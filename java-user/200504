From java-user-return-13852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 01:04:22 2005
Return-Path: <java-user-return-13852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66251 invoked from network); 1 Apr 2005 01:04:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 01:04:22 -0000
Received: (qmail 82367 invoked by uid 500); 1 Apr 2005 01:04:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82345 invoked by uid 500); 1 Apr 2005 01:04:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82331 invoked by uid 99); 1 Apr 2005 01:04:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 31 Mar 2005 17:04:17 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 59AE613E2120; Thu, 31 Mar 2005 20:04:12 -0500 (EST)
Received: from [192.168.1.102] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 35EE013E2006
	for <java-user@lucene.apache.org>; Thu, 31 Mar 2005 20:03:40 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <E3AD9C3F9EC34949855CDFC6FB5A6C11755123@NYHWWEX001.hwwilson.local>
References: <E3AD9C3F9EC34949855CDFC6FB5A6C11755123@NYHWWEX001.hwwilson.local>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <2ba84766b216c6684959e9baa04f0a33@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: HTML pages highlighter
Date: Thu, 31 Mar 2005 20:03:38 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Mar 31, 2005, at 6:36 PM, Yagnesh Shah wrote:
>     try {
>       fis = new FileInputStream(f);
>       HTMLParser parser = new HTMLParser(fis);
>
>       // Add the tag-stripped contents as a Reader-valued Text field 
> so it will
>       // get tokenized and indexed.
> //      doc.add(new Field("contents", parser.getReader()));
>       LineNumberReader reader = new 
> LineNumberReader(parser.getReader());
>       for (String l = reader.readLine(); l != null; l = 
> reader.readLine())
> //        System.out.println(l);
>       doc.add(Field.Text("contents", l));

Notice that your loop here is adding a "contents" field for *every* 
line read since that is where the first semi-colon is.

Look at using Luke to explore your index.  Try indexing just a dummy 
String:

	doc.add(Field.Text("contents", "some dummy text"));

to show that it works.  Always always always simplify a complicated 
situation by doing the most obvious thing that _should_ work.

Also, the demo Lucene code is not really designed to be used in a 
production application (sadly), so you're better off borrowing code 
from the many articles or our book to begin with.

	Erik


>
>       // Add the summary as a field that is stored and returned with
>       // hit documents for display.
>       doc.add(new Field("summary", parser.getSummary(), 
> Field.Store.YES, Field.Index.NO));
>
>       // Add the title as a field that it can be searched and that is 
> stored.
>       doc.add(new Field("title", parser.getTitle(), Field.Store.YES, 
> Field.Index.TOKENIZED));
>     }
>
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Wednesday, March 30, 2005 7:38 PM
> To: java-user@lucene.apache.org
> Subject: Re: HTML pages highlighter
>
>
>
> On Mar 30, 2005, at 4:46 PM, Yagnesh Shah wrote:
>
>> Hi! Eric,
>
> Erik - with a 'k' - Sorry, I let it slide once though :)
>
>> 	I try to modified that with this but I get compile error. Do you have
>> any code snippet of highlighting code to pull the contents from the
>> original source?
>
> I have a whole book full of code examples :)
> http://www.lucenebook.com - Grab the source code and look in
> src/lia/tools at Highlight*.java
>
>>  or Do you know how I can do field store?
>>
>>       doc.add(new Field("contents", parser.getReader(),
>> Field.Store.YES, Field.Index.NO));
>
> You cannot store it with a Reader.  You need to use Field.Text(String,
> String), or one of the other variations.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 01:09:04 2005
Return-Path: <java-user-return-13853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69064 invoked from network); 1 Apr 2005 01:09:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 01:09:04 -0000
Received: (qmail 88441 invoked by uid 500); 1 Apr 2005 01:09:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88413 invoked by uid 500); 1 Apr 2005 01:09:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88398 invoked by uid 99); 1 Apr 2005 01:09:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 31 Mar 2005 17:08:59 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 410B013E2122; Thu, 31 Mar 2005 20:08:53 -0500 (EST)
Received: from [192.168.1.102] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 0582413E2120
	for <java-user@lucene.apache.org>; Thu, 31 Mar 2005 20:08:38 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <424C32BC.80304@colaborativa.net>
References: <424C0E62.10002@colaborativa.net> <297f128e646a94719e98205e5e42c4bc@ehatchersolutions.com> <424C32BC.80304@colaborativa.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <8e69c06b3362e84b43417b653c0c9913@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Analyzer don't work with wildcard queries, snowball analyzer.
Date: Thu, 31 Mar 2005 20:08:37 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mar 31, 2005, at 12:26 PM, Ernesto De Santis wrote:
> Hi Erik

Finally, my name spelled correctly..... :))

> Ok, in PrefixQuery cases, non analyze is right.
>
> But you think that non analyze in WildcardQuery is right?

Do I think its right?  That's just the way it is.  Whether that is 
right or not I don't know for sure.  I don't think analyzing a wildcard 
expression is going to do the right thing in most cases - consider 
analyzers that split on special characters like ? and * - in fact I'd 
bet your analyzer currently does that!

> You search "example" and obtain x results.
> You search "ex?mple" and don't obtain any result.
> This is correct for you?
> It is difficult to analyze wildcard queries in lucene code?

Your free to subclass QueryParser and override getWildcardQuery and 
analyze the term text.  I suspect you won't have much success though.  
Please let us know what you find.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 01:16:04 2005
Return-Path: <java-user-return-13854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70986 invoked from network); 1 Apr 2005 01:16:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 01:16:04 -0000
Received: (qmail 95860 invoked by uid 500); 1 Apr 2005 01:15:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95831 invoked by uid 500); 1 Apr 2005 01:15:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95817 invoked by uid 99); 1 Apr 2005 01:15:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 31 Mar 2005 17:15:57 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E761113E2120; Thu, 31 Mar 2005 20:15:49 -0500 (EST)
Received: from [192.168.1.102] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 69C3213E2006
	for <java-user@lucene.apache.org>; Thu, 31 Mar 2005 20:15:30 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <20050331164455.17674.qmail@web41208.mail.yahoo.com>
References: <20050331164455.17674.qmail@web41208.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <bde774bfd02b64af3c106abdbf37fa99@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: using different analyzer for searching
Date: Thu, 31 Mar 2005 20:15:29 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Mar 31, 2005, at 11:44 AM, pashupathinath wrote:

>   is it possible to index using a predefined analyzer
> and search using a custom analyzer ??

Yes, its perfectly fine to do so with the caveat that you end up 
searching for the terms exactly as they were indexed.

I end up doing this in most applications, actually, primarily because 
untokenized fields need to use the KeywordAnalyzer during searching.

>   i'm searching using the built in whitespace
> analyser. the problem is when i'm searching for a part
> of a string the search results are zero.
>   i'm using white space analyzer. for example if the
> statement is "my name is abc123" the search for abc or
> 123 doesnt return any hits.
>   anyinsight into this ??

The exact terms indexed using WhitespaceAnalyzer are like this (using 
the Lucene in Action AnalyzerDemo - "ant AnalyzerDemo"):

     [input] String to analyze: [This string will be analyzed.]
my name is abc123
      [echo] Running lia.analysis.AnalyzerDemo...
      [java] Analyzing "my name is abc123"
      [java]   WhitespaceAnalyzer:
      [java]     [my] [name] [is] [abc123]

      [java]   SimpleAnalyzer:
      [java]     [my] [name] [is] [abc]

      [java]   StopAnalyzer:
      [java]     [my] [name] [abc]

      [java]   StandardAnalyzer:
      [java]     [my] [name] [abc123]

So you indexed "abc123" and searches must search for that term 
*exactly*.  You can search for "abc*" as a PrefixQuery or WildcardQuery 
and find "abc123".  "*123" will also find it though QueryParser does 
not support leading wildcard characters (but the API does).  Wildcard 
queries are not ideally what you want as it tends to be much slower for 
large indexes.

You may need to do specialized analysis.  Perhaps you could share you 
real needs with the list and we could offer recommendations.  It is 
possible to index "abc123", "abc", and "123" all within the same 
position in the index if you do some clever analysis and that meshes 
with what you're after.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 03:49:11 2005
Return-Path: <java-user-return-13855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30615 invoked from network); 1 Apr 2005 03:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 03:49:11 -0000
Received: (qmail 26551 invoked by uid 500); 1 Apr 2005 03:49:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26256 invoked by uid 500); 1 Apr 2005 03:49:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26241 invoked by uid 99); 1 Apr 2005 03:49:07 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web41209.mail.yahoo.com (HELO web41209.mail.yahoo.com) (66.218.93.42)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 31 Mar 2005 19:49:05 -0800
Received: (qmail 47074 invoked by uid 60001); 1 Apr 2005 03:49:02 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=Bx7OXryG3JUI0SrFPPfXSEG4njCqG0NB3wHHdSAFSKXmFbeFhLb3PkaTMDNp0xTmcumUtwuXhaB47m1rrHN98h6JlowePMvqD3qI3u1Nt5fVWWXKq1mF94UAZ9TOh7eOtgYmV9eRjpKwOMf1ohCm6Rb19OXG+Fw1fewozsfRyoc=  ;
Message-ID: <20050401034902.47072.qmail@web41209.mail.yahoo.com>
Received: from [130.65.157.139] by web41209.mail.yahoo.com via HTTP; Fri, 01 Apr 2005 04:49:02 BST
Date: Fri, 1 Apr 2005 04:49:02 +0100 (BST)
From: pashupathinath <pashupathinathk@yahoo.com>
Subject: Re: using different analyzer for searching
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi erik,
   i'm creating a blogger application, where the users
can create blogs, upload pictures and post comments
etc etc.
   i'm storing all the information using mysql
database. i'm indexing the database contents and
searching on this index.i'm using lucene to implement
this feature.
   i give the user options to search based on
BlogTitle, Blogdesc,blogcategory. my main purpose of
search is ..whenever a user enters any query related
to blogtitle or blogdesc or blogcategory, it should
return all the matching documents for that search
string. 
   the real problem i'm facing is ..whenever the user
enters some part of the mainstring, the search returns
 zero because i was using a whitespaceanalyser, which
needs the complete string. i should look into using
wildcardquery which i think will solve my problem to
some extent. 
   i should do even more analysis as suggested by you
before i should come to a decision of which analyser i
should be using to solve this. what about writing a
custom analyzer to solve this ??? how can i go abt the
logic of implementing this in a custom analyzer..
where this returns all the documents that has even a
part of  the search string. 
   any insight into this would be very helpful
especially in terms of performance wise.

thanks,
pashupathinath.k
   
--- Erik Hatcher <erik@ehatchersolutions.com> wrote:
> 
> On Mar 31, 2005, at 11:44 AM, pashupathinath wrote:
> 
> >   is it possible to index using a predefined
> analyzer
> > and search using a custom analyzer ??
> 
> Yes, its perfectly fine to do so with the caveat
> that you end up 
> searching for the terms exactly as they were
> indexed.
> 
> I end up doing this in most applications, actually,
> primarily because 
> untokenized fields need to use the KeywordAnalyzer
> during searching.
> 
> >   i'm searching using the built in whitespace
> > analyser. the problem is when i'm searching for a
> part
> > of a string the search results are zero.
> >   i'm using white space analyzer. for example if
> the
> > statement is "my name is abc123" the search for
> abc or
> > 123 doesnt return any hits.
> >   anyinsight into this ??
> 
> The exact terms indexed using WhitespaceAnalyzer are
> like this (using 
> the Lucene in Action AnalyzerDemo - "ant
> AnalyzerDemo"):
> 
>      [input] String to analyze: [This string will be
> analyzed.]
> my name is abc123
>       [echo] Running lia.analysis.AnalyzerDemo...
>       [java] Analyzing "my name is abc123"
>       [java]   WhitespaceAnalyzer:
>       [java]     [my] [name] [is] [abc123]
> 
>       [java]   SimpleAnalyzer:
>       [java]     [my] [name] [is] [abc]
> 
>       [java]   StopAnalyzer:
>       [java]     [my] [name] [abc]
> 
>       [java]   StandardAnalyzer:
>       [java]     [my] [name] [abc123]
> 
> So you indexed "abc123" and searches must search for
> that term 
> *exactly*.  You can search for "abc*" as a
> PrefixQuery or WildcardQuery 
> and find "abc123".  "*123" will also find it though
> QueryParser does 
> not support leading wildcard characters (but the API
> does).  Wildcard 
> queries are not ideally what you want as it tends to
> be much slower for 
> large indexes.
> 
> You may need to do specialized analysis.  Perhaps
> you could share you 
> real needs with the list and we could offer
> recommendations.  It is 
> possible to index "abc123", "abc", and "123" all
> within the same 
> position in the index if you do some clever analysis
> and that meshes 
> with what you're after.
> 
> 	Erik
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 

Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 06:23:06 2005
Return-Path: <java-user-return-13856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61185 invoked from network); 1 Apr 2005 06:23:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 06:23:06 -0000
Received: (qmail 58754 invoked by uid 500); 1 Apr 2005 06:22:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58712 invoked by uid 500); 1 Apr 2005 06:22:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58693 invoked by uid 99); 1 Apr 2005 06:22:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.tanto.de (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 31 Mar 2005 22:22:52 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id BBA5D23CE0
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2005 08:23:02 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 27833-09 for <java-user@lucene.apache.org>;
 Fri,  1 Apr 2005 08:23:02 +0200 (CEST)
Received: from tucholsky.office.tanto.de (tucholsky.office.tanto.de [10.0.0.35])
	by mail.tanto.de (Postfix) with ESMTP id 7FCA223BF5
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2005 08:23:02 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@localhost [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j316P54B002783
	for <java-user@lucene.apache.org>; Fri, 1 Apr 2005 08:25:05 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) id j316P5Lt002779;
	Fri, 1 Apr 2005 08:25:05 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16972.59712.990916.548312@tanto-xipolis.de>
Date: Fri, 1 Apr 2005 08:25:04 +0200
To: java-user@lucene.apache.org
Subject: Re: Analyzer don't work with wildcard queries, snowball analyzer.
In-Reply-To: <424C32BC.80304@colaborativa.net>
References: <424C0E62.10002@colaborativa.net>
	<297f128e646a94719e98205e5e42c4bc@ehatchersolutions.com>
	<424C32BC.80304@colaborativa.net>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ernesto De Santis writes:
> Hi Erik
> 
> Ok, in PrefixQuery cases, non analyze is right.
> 
It creates the same problems.
'example*' should find 'example' but does not if 'example' is stemmed
to 'exampl' and you don't analyze the prefix query.

> 
> You search "example" and obtain x results.
> You search "ex?mple" and don't obtain any result.
> This is correct for you?
> It is difficult to analyze wildcard queries in lucene code?
> 
This has nothing to do with lucene code.
If you can write such an analyzer, do so. Erik already showed you, how
to integrate it with QP. If you're successful share the code.
It looks easy for 'ex?ample' but how would you analyze 'exampl?s'?
Assuming 'examples' get's stemmed to 'exampl' you would have to guess,
that ? might expand to 'e' and 'exampl?s' should be analyzed to 'exampl'
and 'exampl?s' (and probably 'exampl?'). Or 'exa*s'?

IMO you have to either avoid stemming or wildcards or live with the 
different handling.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 08:34:16 2005
Return-Path: <java-user-return-13857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6733 invoked from network); 1 Apr 2005 08:34:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 08:34:16 -0000
Received: (qmail 51748 invoked by uid 500); 1 Apr 2005 08:34:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51718 invoked by uid 500); 1 Apr 2005 08:34:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51705 invoked by uid 99); 1 Apr 2005 08:34:07 -0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=HTML_IMAGE_ONLY_20,HTML_MESSAGE,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 01 Apr 2005 00:34:05 -0800
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IE9FAG00.O0S for <java-user@lucene.apache.org>; Fri, 1
          Apr 2005 14:21:52 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <java-user@lucene.apache.org>
Subject: LUCENE & eCommerce
Date: Fri, 1 Apr 2005 14:11:57 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKIELKCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----=_NextPart_000_0006_01C536C4.C3C82190"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0006_01C536C4.C3C82190
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0007_01C536C4.C3C82190"


------=_NextPart_001_0007_01C536C4.C3C82190
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit



Hi Guys

Apologies.................

Has Any body out on the Form ,have implemented  Lucene API in  eCommerce (
Search based Shopping)

Something similar to   http://www.bizrate.com/  .



Please Help me ???






WITH WARM REGARDS
HAVE A NICE DAY
[ N.S.KARTHIK]


------=_NextPart_001_0007_01C536C4.C3C82190
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<STYLE><!-- body, P.msoNormal, LI.msoNormal, PRE, BLOCKQUOTE, a, MENU, =
dd, UL, DT { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } dir, ADDRESS, h1, h2, h3, h4, h5, =
h6, HR { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } --></STYLE>

<META content=3D"MSHTML 6.00.2600.0" name=3DGENERATOR></HEAD>
<BODY id=3DridBody>
<P><STRONG><FONT face=3DVerdana size=3D2></FONT></STRONG>&nbsp;</P>
<P><SPAN class=3D453263708-01042005><FONT face=3DVerdana =
size=3D2><STRONG>Hi=20
Guys</STRONG></FONT></SPAN></P>
<P><SPAN class=3D453263708-01042005><STRONG><FONT face=3DVerdana=20
size=3D2>Apologies.................</FONT></STRONG></SPAN></P>
<P><SPAN class=3D453263708-01042005><STRONG><FONT face=3DVerdana =
size=3D2>Has Any body=20
out on the Form ,have implemented&nbsp; Lucene API in&nbsp; eCommerce ( =
Search=20
based Shopping)</FONT></STRONG></SPAN></P>
<P><SPAN class=3D453263708-01042005><STRONG><FONT face=3DVerdana =
size=3D2>Something=20
similar to&nbsp;&nbsp; <A=20
href=3D"http://www.bizrate.com/">http://www.bizrate.com/</A><A=20
href=3D"http://bitzrate.com"></A>&nbsp; .</FONT></STRONG></SPAN></P>
<P><SPAN class=3D453263708-01042005><STRONG><FONT face=3DVerdana=20
size=3D2></FONT></STRONG></SPAN>&nbsp;</P>
<P><SPAN class=3D453263708-01042005><STRONG><FONT face=3DVerdana =
size=3D2>Please Help=20
me ???</FONT></STRONG></SPAN></P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><IMG height=3D85 src=3D"cid:453263708@01042005-278d" =
width=3D85><BR><B><FONT=20
face=3DVerdana color=3D#939ff7 size=3D3>WITH WARM REGARDS <BR>HAVE A =
NICE DAY <BR>[=20
N.S.KARTHIK]</FONT></B> </P></BODY></HTML>

------=_NextPart_001_0007_01C536C4.C3C82190--

------=_NextPart_000_0006_01C536C4.C3C82190--


From java-user-return-13858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 08:37:48 2005
Return-Path: <java-user-return-13858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7423 invoked from network); 1 Apr 2005 08:37:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 08:37:48 -0000
Received: (qmail 56563 invoked by uid 500); 1 Apr 2005 08:37:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56540 invoked by uid 500); 1 Apr 2005 08:37:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56526 invoked by uid 99); 1 Apr 2005 08:37:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 01 Apr 2005 00:37:40 -0800
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IE9FGK00.20M for <java-user@lucene.apache.org>; Fri, 1
          Apr 2005 14:25:32 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: using different analyzer for searching
Date: Fri, 1 Apr 2005 14:15:37 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKOELKCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <20050401034902.47072.qmail@web41209.mail.yahoo.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

Try First Try Using the AnalysisDemo.java code from
http://today.java.net/pub/a/today/2003/07/30/LuceneIntro.html?page=last#thre
ad from java.net for the Contents u seems to experiment with and verify
which analyzer to use.

Probably this will give  u some Idea on Analyzers.



with regaards
Karthik



-----Original Message-----
From: pashupathinath [mailto:pashupathinathk@yahoo.com]
Sent: Friday, April 01, 2005 9:19 AM
To: java-user@lucene.apache.org
Subject: Re: using different analyzer for searching


hi erik,
   i'm creating a blogger application, where the users
can create blogs, upload pictures and post comments
etc etc.
   i'm storing all the information using mysql
database. i'm indexing the database contents and
searching on this index.i'm using lucene to implement
this feature.
   i give the user options to search based on
BlogTitle, Blogdesc,blogcategory. my main purpose of
search is ..whenever a user enters any query related
to blogtitle or blogdesc or blogcategory, it should
return all the matching documents for that search
string.
   the real problem i'm facing is ..whenever the user
enters some part of the mainstring, the search returns
 zero because i was using a whitespaceanalyser, which
needs the complete string. i should look into using
wildcardquery which i think will solve my problem to
some extent.
   i should do even more analysis as suggested by you
before i should come to a decision of which analyser i
should be using to solve this. what about writing a
custom analyzer to solve this ??? how can i go abt the
logic of implementing this in a custom analyzer..
where this returns all the documents that has even a
part of  the search string.
   any insight into this would be very helpful
especially in terms of performance wise.

thanks,
pashupathinath.k

--- Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
> On Mar 31, 2005, at 11:44 AM, pashupathinath wrote:
>
> >   is it possible to index using a predefined
> analyzer
> > and search using a custom analyzer ??
>
> Yes, its perfectly fine to do so with the caveat
> that you end up
> searching for the terms exactly as they were
> indexed.
>
> I end up doing this in most applications, actually,
> primarily because
> untokenized fields need to use the KeywordAnalyzer
> during searching.
>
> >   i'm searching using the built in whitespace
> > analyser. the problem is when i'm searching for a
> part
> > of a string the search results are zero.
> >   i'm using white space analyzer. for example if
> the
> > statement is "my name is abc123" the search for
> abc or
> > 123 doesnt return any hits.
> >   anyinsight into this ??
>
> The exact terms indexed using WhitespaceAnalyzer are
> like this (using
> the Lucene in Action AnalyzerDemo - "ant
> AnalyzerDemo"):
>
>      [input] String to analyze: [This string will be
> analyzed.]
> my name is abc123
>       [echo] Running lia.analysis.AnalyzerDemo...
>       [java] Analyzing "my name is abc123"
>       [java]   WhitespaceAnalyzer:
>       [java]     [my] [name] [is] [abc123]
>
>       [java]   SimpleAnalyzer:
>       [java]     [my] [name] [is] [abc]
>
>       [java]   StopAnalyzer:
>       [java]     [my] [name] [abc]
>
>       [java]   StandardAnalyzer:
>       [java]     [my] [name] [abc123]
>
> So you indexed "abc123" and searches must search for
> that term
> *exactly*.  You can search for "abc*" as a
> PrefixQuery or WildcardQuery
> and find "abc123".  "*123" will also find it though
> QueryParser does
> not support leading wildcard characters (but the API
> does).  Wildcard
> queries are not ideally what you want as it tends to
> be much slower for
> large indexes.
>
> You may need to do specialized analysis.  Perhaps
> you could share you
> real needs with the list and we could offer
> recommendations.  It is
> possible to index "abc123", "abc", and "123" all
> within the same
> position in the index if you do some clever analysis
> and that meshes
> with what you're after.
>
> 	Erik
>
>
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
>
>

Send instant messages to your online friends http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 09:43:39 2005
Return-Path: <java-user-return-13859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34112 invoked from network); 1 Apr 2005 09:43:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 09:43:38 -0000
Received: (qmail 45014 invoked by uid 500); 1 Apr 2005 09:43:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44988 invoked by uid 500); 1 Apr 2005 09:43:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44974 invoked by uid 99); 1 Apr 2005 09:43:33 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from smtp10.wanadoo.fr (HELO smtp10.wanadoo.fr) (193.252.22.21)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 01:43:32 -0800
Received: from me-wanadoo.net (unknown [127.0.0.1])
	by mwinf1002.wanadoo.fr (SMTP Server) with ESMTP id 690F42400066
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2005 11:43:28 +0200 (CEST)
Received: from nt5-dell2600.ullink.local (Laubervilliers-151_11-9-132.w82-127.abo.wanadoo.fr [82.127.8.132])
	by mwinf1002.wanadoo.fr (SMTP Server) with ESMTP id 825D8240009F
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2005 11:43:27 +0200 (CEST)
X-ME-UUID: 20050401094327534.825D8240009F@mwinf1002.wanadoo.fr
Content-class: urn:content-classes:message
Subject: indexing performance of little documents
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5369F.3DB87188"
Date: Fri, 1 Apr 2005 11:43:20 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Message-ID: <347E7B119927DF42A1D64146C239F7076FF198@nt5-dell2600.ullink.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: indexing performance of little documents
Thread-Index: AcU2nz1qGrUxcR3iSIaryIjOz56rGw==
From: "Fabien Le Floc'h" <fabien.lefloch@ullink.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5369F.3DB87188
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello,
=20
I want to index a 1GB file that contains a list of lines of
approximately 100 characters each, so that i can later get lines
containing some particular text. The natural way of doing it with lucene
would be to create 1 lucene Document per line. It works well except it
is too slow for my needs, even after tweaking all possible parameters of
IndexWriter and using cvs version of lucene.=20
=20
I can get 10x the indexing performance by indexing the file as 1 lucene
Document. Lucene builds a good index with all the terms and I am able to
get the number of terms matching a query but not the absolute position
in the original file (I only get the token relative position). A minor
quirk with this approach is that i need to split the document in order
to avoid outofmemory exception when the document is too big. It would be
probably possible for me to customize lucene for my needs (create a more
flexible Term class), that's just a hack. But I was wondering why there
should be such a performance difference.
=20
I see that for each document plenty of work is done, but that seems
necessary, and then there is even more work while merging segments.
Things could probably be faster if documents were first aggregated and
then work done on them. But I think this would imply huge changes in
Lucene. Any advice for indexing millions of tiny docs?
=20
=20
=20
Regards,
=20
Fabien.

------_=_NextPart_001_01C5369F.3DB87188--


From java-user-return-13860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 13:09:29 2005
Return-Path: <java-user-return-13860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83611 invoked from network); 1 Apr 2005 13:09:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 13:09:29 -0000
Received: (qmail 41328 invoked by uid 500); 1 Apr 2005 13:09:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41271 invoked by uid 500); 1 Apr 2005 13:09:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41257 invoked by uid 99); 1 Apr 2005 13:09:24 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from host.12.157.23.62.rev.coltfrance.com (HELO xmailserver.test) (62.23.157.12)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 01 Apr 2005 05:09:23 -0800
Received: from localhost (127.0.0.1:1989)
	by xmailserver.test with [XMail 1.20 ESMTP Server]
	id <S90A> for <java-user@lucene.apache.org> from <sven.duzont@keljob.com>;
	Fri, 1 Apr 2005 15:09:18 +0200
Date: Fri, 1 Apr 2005 15:09:18 +0200
From: Sven Duzont <sven.duzont@keljob.com>
X-Mailer: The Bat! (v3.0) UNREG / CD5BF9353B3B7091
Reply-To: Sven duzont <sven.duzont@keljob.com>
Organization: Keljob
X-Priority: 3 (Normal)
Message-ID: <773719179.20050401150918@keljob.com>
To: Erik Hatcher <java-user@lucene.apache.org>
Subject: Re[2]: Analyzer don't work with wildcard queries, snowball analyzer.
In-Reply-To: <297f128e646a94719e98205e5e42c4bc@ehatchersolutions.com>
References: <424C0E62.10002@colaborativa.net>
 <297f128e646a94719e98205e5e42c4bc@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Erik,

Since wilcard queries are not analyzed, how can we deal with accents ?
For instance (in french) a query like "ingé*" will not match documents containing
"ingénieur" but the query "inge*" will.

Thanks

---
 sven

Le jeudi 31 mars 2005 à 17:51:25, vous écriviez :

EH> Wildcard terms simply are not analyzed.  How could it be possible to do
EH> this?  What if I search for "a*" - how could you stem that?

EH> 	Erik

EH> On Mar 31, 2005, at 9:51 AM, Ernesto De Santis wrote:

>> Hi
>>
>> I get an unexpected behavior when use wildcards in my queries.
>> I use a EnglishAnalyzer developed with SnowballAnalyzer. version 
>> 1.1_dev from Lucene in Action lib.
>>
>> Analysis case:
>> When use wildcards in the middle of one word, the word in not analyzed.
>> Examples:
>>
>>            QueryParser qp = new QueryParser("body", analyzer);
>>            Query q = qp.parse("ex?mple");
>>            String strq = q.toString();
>>            assertEquals("body:ex?mpl", strq);
>> //FAIL strq == body:ex?mple
>>
>>            qp = new QueryParser("body", analyzer);
>>            q = qp.parse("ex*ple");
>>            strq = q.toString();
>>            assertEquals("body:ex*pl", strq);
>> //FAIL strq == body:ex*ple
>>
>> With this behavior, the search does not find any document.
>>
>> Bye
>> Ernesto.
>>
>> -- 
>> Ernesto De Santis - Colaborativa.net
>> Córdoba 1147 Piso 6 Oficinas 3 y 4
>> (S2000AWO) Rosario, SF, Argentina.
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org


EH> ---------------------------------------------------------------------
EH> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
EH> For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 13:22:17 2005
Return-Path: <java-user-return-13861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88200 invoked from network); 1 Apr 2005 13:22:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 13:22:17 -0000
Received: (qmail 66262 invoked by uid 500); 1 Apr 2005 13:22:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66241 invoked by uid 500); 1 Apr 2005 13:22:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66226 invoked by uid 99); 1 Apr 2005 13:22:10 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FORGED_RCVD_HELO,MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of william_wws@hotmail.com designates 65.54.248.239 as permitted sender)
Received: from omc1-s37.bay6.hotmail.com (HELO OMC1-S37.phx.gbl) (65.54.248.239)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 05:22:06 -0800
Received: from hotmail.com ([65.54.233.122]) by OMC1-S37.phx.gbl with Microsoft SMTPSVC(6.0.3790.211);
	 Fri, 1 Apr 2005 05:22:05 -0800
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 1 Apr 2005 05:22:05 -0800
Message-ID: <BAY21-F3366FD074F2BF7702578A098380@phx.gbl>
Received: from 200.214.14.1 by by21fd.bay21.hotmail.msn.com with HTTP;
	Fri, 01 Apr 2005 13:22:04 GMT
X-Originating-IP: [200.214.14.1]
X-Originating-Email: [william_wws@hotmail.com]
X-Sender: william_wws@hotmail.com
In-Reply-To: <OBELINLGKPEMCIEIJJNKIELKCCAA.karthik@controlnet.co.in>
From: "William W" <william_wws@hotmail.com>
To: java-user@lucene.apache.org
Bcc: 
Subject: RE: LUCENE & eCommerce
Date: Fri, 01 Apr 2005 13:22:04 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 01 Apr 2005 13:22:05.0140 (UTC) FILETIME=[CC219940:01C536BD]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi Karthik,
The e-commerce website www.shoptime.com from Brasil.

William.

>From: "Karthik N S" <karthik@controlnet.co.in>
>Reply-To: java-user@lucene.apache.org
>To: "LUCENE" <java-user@lucene.apache.org>
>Subject: LUCENE & eCommerce
>Date: Fri, 1 Apr 2005 14:11:57 +0530
>
>
>
>Hi Guys
>
>Apologies.................
>
>Has Any body out on the Form ,have implemented  Lucene API in  eCommerce (
>Search based Shopping)
>
>Something similar to   http://www.bizrate.com/  .
>
>
>
>Please Help me ???
>
>
>
>
>
>
>WITH WARM REGARDS
>HAVE A NICE DAY
>[ N.S.KARTHIK]
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 13:47:51 2005
Return-Path: <java-user-return-13862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96713 invoked from network); 1 Apr 2005 13:47:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 13:47:51 -0000
Received: (qmail 7344 invoked by uid 500); 1 Apr 2005 13:47:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7124 invoked by uid 500); 1 Apr 2005 13:47:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7110 invoked by uid 99); 1 Apr 2005 13:47:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.gan.no (HELO mail.gan.no) (195.159.151.132)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 05:47:42 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.gan.no (Postfix) with ESMTP id 84763F000D
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2005 15:47:38 +0200 (CEST)
Received: from [172.16.16.192] (MetaMac.mediehuset.gan.no [172.16.16.192])
	by mail.gan.no (Postfix) with ESMTP id 84BE8F000C
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2005 15:47:37 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <347E7B119927DF42A1D64146C239F7076FF198@nt5-dell2600.ullink.local>
References: <347E7B119927DF42A1D64146C239F7076FF198@nt5-dell2600.ullink.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <a4efe961ca3efd5496bb76c286e5478f@gan.no>
Content-Transfer-Encoding: quoted-printable
From: =?ISO-8859-1?Q?Karl_=D8ie?= <karl@gan.no>
Subject: Re: indexing performance of little documents
Date: Fri, 1 Apr 2005 15:47:37 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at gan.no
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This might sound a bit lame but it has worked for me. I have had the=20
same problem where the amount of small lucene documents slows down the=20=

building of large indexes.

Search is pretty fast, and read only, so for my case i just created=20
three indexes and saved every three lucene documents into one of each=20
index. then upon a search i merge the results from the three smaller=20
indexes. Only thing to consider is to store all parts of a source=20
document into the same index so that booleans still work. I have even=20
threaded out the searching so search on the three indexes are performed=20=

in parallel.

By the way; Stop word filters can also do wonders for a index full of=20
text too...

Mvh Karl =D8ie

On 1. apr. 2005, at 11.43, Fabien Le Floc'h wrote:

> Hello,
>
> I want to index a 1GB file that contains a list of lines of
> approximately 100 characters each, so that i can later get lines
> containing some particular text. The natural way of doing it with=20
> lucene
> would be to create 1 lucene Document per line. It works well except it
> is too slow for my needs, even after tweaking all possible parameters=20=

> of
> IndexWriter and using cvs version of lucene.
>
> I can get 10x the indexing performance by indexing the file as 1 =
lucene
> Document. Lucene builds a good index with all the terms and I am able=20=

> to
> get the number of terms matching a query but not the absolute position
> in the original file (I only get the token relative position). A minor
> quirk with this approach is that i need to split the document in order
> to avoid outofmemory exception when the document is too big. It would=20=

> be
> probably possible for me to customize lucene for my needs (create a=20
> more
> flexible Term class), that's just a hack. But I was wondering why =
there
> should be such a performance difference.
>
> I see that for each document plenty of work is done, but that seems
> necessary, and then there is even more work while merging segments.
> Things could probably be faster if documents were first aggregated and
> then work done on them. But I think this would imply huge changes in
> Lucene. Any advice for indexing millions of tiny docs?
>
>
>
> Regards,
>
> Fabien.
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 14:11:24 2005
Return-Path: <java-user-return-13863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3990 invoked from network); 1 Apr 2005 14:11:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 14:11:23 -0000
Received: (qmail 63123 invoked by uid 500); 1 Apr 2005 14:11:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63094 invoked by uid 500); 1 Apr 2005 14:11:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63079 invoked by uid 99); 1 Apr 2005 14:11:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 06:11:15 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EEEBC13E2121; Fri,  1 Apr 2005 09:11:10 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 3B71C13E2006
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2005 09:10:40 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <773719179.20050401150918@keljob.com>
References: <424C0E62.10002@colaborativa.net> <297f128e646a94719e98205e5e42c4bc@ehatchersolutions.com> <773719179.20050401150918@keljob.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <3e9becd32d830a737fc6da54ea0d1e36@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Re[2]: Analyzer don't work with wildcard queries, snowball analyzer.
Date: Fri, 1 Apr 2005 09:10:39 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 1, 2005, at 8:09 AM, Sven Duzont wrote:
> Since wilcard queries are not analyzed, how can we deal with accents ?
> For instance (in french) a query like "ing=E9*" will not match =
documents=20
> containing
> "ing=E9nieur" but the query "inge*" will.

I presume your analyzer normalized accented characters?  Which analyzer=20=

is that?

You will need to employ some form of character normalization on=20
wildcard queries too.

	Erik


>
> Thanks
>
> ---
>  sven
>
> Le jeudi 31 mars 2005 =E0 17:51:25, vous =E9criviez :
>
> EH> Wildcard terms simply are not analyzed.  How could it be possible=20=

> to do
> EH> this?  What if I search for "a*" - how could you stem that?
>
> EH> 	Erik
>
> EH> On Mar 31, 2005, at 9:51 AM, Ernesto De Santis wrote:
>
>>> Hi
>>>
>>> I get an unexpected behavior when use wildcards in my queries.
>>> I use a EnglishAnalyzer developed with SnowballAnalyzer. version
>>> 1.1_dev from Lucene in Action lib.
>>>
>>> Analysis case:
>>> When use wildcards in the middle of one word, the word in not=20
>>> analyzed.
>>> Examples:
>>>
>>>            QueryParser qp =3D new QueryParser("body", analyzer);
>>>            Query q =3D qp.parse("ex?mple");
>>>            String strq =3D q.toString();
>>>            assertEquals("body:ex?mpl", strq);
>>> //FAIL strq =3D=3D body:ex?mple
>>>
>>>            qp =3D new QueryParser("body", analyzer);
>>>            q =3D qp.parse("ex*ple");
>>>            strq =3D q.toString();
>>>            assertEquals("body:ex*pl", strq);
>>> //FAIL strq =3D=3D body:ex*ple
>>>
>>> With this behavior, the search does not find any document.
>>>
>>> Bye
>>> Ernesto.
>>>
>>> --=20
>>> Ernesto De Santis - Colaborativa.net
>>> C=F3rdoba 1147 Piso 6 Oficinas 3 y 4
>>> (S2000AWO) Rosario, SF, Argentina.
>>>
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> EH>=20
> ---------------------------------------------------------------------
> EH> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> EH> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 14:23:46 2005
Return-Path: <java-user-return-13864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22278 invoked from network); 1 Apr 2005 14:23:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 14:23:46 -0000
Received: (qmail 82732 invoked by uid 500); 1 Apr 2005 14:23:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82706 invoked by uid 500); 1 Apr 2005 14:23:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82691 invoked by uid 99); 1 Apr 2005 14:23:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 06:23:38 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2658E13E2121; Fri,  1 Apr 2005 09:23:18 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 47E4313E2006
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2005 09:22:54 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <20050401034902.47072.qmail@web41209.mail.yahoo.com>
References: <20050401034902.47072.qmail@web41209.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <1f7eee5d249ff7d22ad77377ee1c03b1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: using different analyzer for searching
Date: Fri, 1 Apr 2005 09:22:53 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Mar 31, 2005, at 10:49 PM, pashupathinath wrote:
>    i should do even more analysis as suggested by you
> before i should come to a decision of which analyser i
> should be using to solve this. what about writing a
> custom analyzer to solve this ??? how can i go abt the
> logic of implementing this in a custom analyzer..
> where this returns all the documents that has even a
> part of  the search string.
>    any insight into this would be very helpful
> especially in terms of performance wise.

This is an involved topic, and one that is covered in great detail in 
the analysis chapter of Lucene in Action (shameless plug, yes, I 
know!).

I recommend you analyze the types of queries that need to be made and 
what type of user interface you will present for this - then determine 
what makes the most sense analysis-wise.  WhitespaceAnalyzer is not 
going to be good enough, as I suspect you'll want case-insensitive 
searches at least.

	Erik


>
> thanks,
> pashupathinath.k
>
> --- Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>
>> On Mar 31, 2005, at 11:44 AM, pashupathinath wrote:
>>
>>>   is it possible to index using a predefined
>> analyzer
>>> and search using a custom analyzer ??
>>
>> Yes, its perfectly fine to do so with the caveat
>> that you end up
>> searching for the terms exactly as they were
>> indexed.
>>
>> I end up doing this in most applications, actually,
>> primarily because
>> untokenized fields need to use the KeywordAnalyzer
>> during searching.
>>
>>>   i'm searching using the built in whitespace
>>> analyser. the problem is when i'm searching for a
>> part
>>> of a string the search results are zero.
>>>   i'm using white space analyzer. for example if
>> the
>>> statement is "my name is abc123" the search for
>> abc or
>>> 123 doesnt return any hits.
>>>   anyinsight into this ??
>>
>> The exact terms indexed using WhitespaceAnalyzer are
>> like this (using
>> the Lucene in Action AnalyzerDemo - "ant
>> AnalyzerDemo"):
>>
>>      [input] String to analyze: [This string will be
>> analyzed.]
>> my name is abc123
>>       [echo] Running lia.analysis.AnalyzerDemo...
>>       [java] Analyzing "my name is abc123"
>>       [java]   WhitespaceAnalyzer:
>>       [java]     [my] [name] [is] [abc123]
>>
>>       [java]   SimpleAnalyzer:
>>       [java]     [my] [name] [is] [abc]
>>
>>       [java]   StopAnalyzer:
>>       [java]     [my] [name] [abc]
>>
>>       [java]   StandardAnalyzer:
>>       [java]     [my] [name] [abc123]
>>
>> So you indexed "abc123" and searches must search for
>> that term
>> *exactly*.  You can search for "abc*" as a
>> PrefixQuery or WildcardQuery
>> and find "abc123".  "*123" will also find it though
>> QueryParser does
>> not support leading wildcard characters (but the API
>> does).  Wildcard
>> queries are not ideally what you want as it tends to
>> be much slower for
>> large indexes.
>>
>> You may need to do specialized analysis.  Perhaps
>> you could share you
>> real needs with the list and we could offer
>> recommendations.  It is
>> possible to index "abc123", "abc", and "123" all
>> within the same
>> position in the index if you do some clever analysis
>> and that meshes
>> with what you're after.
>>
>> 	Erik
>>
>>
>>
> ---------------------------------------------------------------------
>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>
>>
>
> Send instant messages to your online friends 
> http://uk.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 16:07:16 2005
Return-Path: <java-user-return-13865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52676 invoked from network); 1 Apr 2005 16:07:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 16:07:16 -0000
Received: (qmail 75300 invoked by uid 500); 1 Apr 2005 16:07:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75134 invoked by uid 500); 1 Apr 2005 16:07:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75120 invoked by uid 99); 1 Apr 2005 16:07:10 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from host.12.157.23.62.rev.coltfrance.com (HELO xmailserver.test) (62.23.157.12)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 01 Apr 2005 08:07:09 -0800
Received: from localhost (127.0.0.1:3195)
	by xmailserver.test with [XMail 1.20 ESMTP Server]
	id <S90B> for <java-user@lucene.apache.org> from <sven.duzont@keljob.com>;
	Fri, 1 Apr 2005 18:07:04 +0200
Date: Fri, 1 Apr 2005 18:07:03 +0200
From: Sven Duzont <sven.duzont@keljob.com>
X-Mailer: The Bat! (v3.0) UNREG / CD5BF9353B3B7091
Reply-To: Sven duzont <sven.duzont@keljob.com>
Organization: Keljob
X-Priority: 3 (Normal)
Message-ID: <1582287727.20050401180703@keljob.com>
To: Erik Hatcher <java-user@lucene.apache.org>
Subject: Re[4]: Analyzer don't work with wildcard queries, snowball analyzer.
In-Reply-To: <3e9becd32d830a737fc6da54ea0d1e36@ehatchersolutions.com>
References: <424C0E62.10002@colaborativa.net>
 <297f128e646a94719e98205e5e42c4bc@ehatchersolutions.com>
 <773719179.20050401150918@keljob.com>
 <3e9becd32d830a737fc6da54ea0d1e36@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

EH> I presume your analyzer normalized accented characters?  Which analyzer
EH> is that?

Yes, i'm using a custom analyser for indexing / searching, ti consists
in :
- FrenchStopFilter
- IsoLatinFilter (this is the one that will replace accented
characters)
- LowerCaseFilter
- ApostropheFilter (in order to handle terms like with apostrophes,
for instance "l'expérience" will be decompozed into two tokens : "l" "expérience"

EH> You will need to employ some form of character normalization on 
EH> wildcard queries too.

thanks, it works succeffuly, code snippet following

---
 sven

/*----------------------- CODE ----------------------------*/

private static Query CreateCustomQuery(Query query)
{
  if(query instanceof BooleanQuery)  {
    final BooleanClause[] bClauses = ((BooleanQuery) query).getClauses();
    
    // The first clause is required
    if(bClauses[0].prohibited != true)
      bClauses[0].required = true;
      
    // Will parse each clause to remove accents if needed
    Term term;
    for (int i = 0; i < bClauses.length; i++)    {
      if(bClauses[i].query instanceof WildcardQuery)      {
        term = ((WildcardQuery)bClauses[i].query).getTerm();
        bClauses[i].query = new WildcardQuery(new Term(term.field(), 
            ISOLatin1AccentFilter.RemoveAccents(term.text().toLowerCase())));
      }
      if(bClauses[i].query instanceof PrefixQuery)      {
        term = ((PrefixQuery)bClauses[i].query).getPrefix();
        bClauses[i].query = new PrefixQuery(new Term(term.field(), 
            ISOLatin1AccentFilter.RemoveAccents(term.text().toLowerCase())));
      // toLowerCase because the text is lowercased during indexation
      }
    }    
  }
  else if(query instanceof WildcardQuery)  {
    final Term term = ((WildcardQuery)query).getTerm();
    query = new WildcardQuery(new Term(term.field(), 
        ISOLatin1AccentFilter.RemoveAccents(term.text().toLowerCase())));
  }
  else if(query instanceof PrefixQuery)  {
    final Term term = ((PrefixQuery)query).getPrefix();
    query = new PrefixQuery(new Term(term.field(), 
        ISOLatin1AccentFilter.RemoveAccents(term.text().toLowerCase())));
  }
  return query;
}

/*----------------------- END OF CODE ----------------------------*/

EH> 	Erik




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 16:14:07 2005
Return-Path: <java-user-return-13866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54016 invoked from network); 1 Apr 2005 16:14:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 16:14:07 -0000
Received: (qmail 85914 invoked by uid 500); 1 Apr 2005 16:13:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85858 invoked by uid 500); 1 Apr 2005 16:13:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85801 invoked by uid 99); 1 Apr 2005 16:13:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.crcpress.com (HELO flexbe01.crcpress.com) (65.244.170.27)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 08:13:44 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: FilteredQuery and Boolean AND
Date: Fri, 1 Apr 2005 11:13:41 -0500
Message-ID: <78A2AFE317F5AD48B823BE740D4A815224070D@flexbe01.crcpress.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FilteredQuery and Boolean AND
Thread-Index: AcUxUBgGSqKrSKbOQASE4TXxhK/3pgFhLivw
From: "Kipping, Peter" <Peter.Kipping@taylorandfrancis.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Any ideas on this?  I have purchased your book, Lucene in Action, which
is quite good.  To make things easier, consider the example on p212.  In
item 4, when you combine the queries, what happens you combine them in
and AND fashion?  The book only has OR, which works.  Although it may
work since the book only has one filtered query, but what if you made
them both filtered queries and ANDed them?

Thanks,
Peter

-----Original Message-----
From: Kipping, Peter [mailto:Peter.Kipping@taylorandfrancis.com]=20
Sent: Friday, March 25, 2005 10:34 AM
To: java-user@lucene.apache.org
Subject: FilteredQuery and Boolean AND

I have the following query structure:

BooleanQuery q2 =3D new BooleanQuery();
TermQuery tq =3D new TermQuery(new Term("all_entries", "y"));
FilteredQuery fq =3D new FilteredQuery(tq, ft);
FilteredQuery fq2 =3D new FilteredQuery(tq, ft2);
q2.add(fq, false, false);
q2.add(fq2, false, false);

The two filters are searches over numeric ranges.  I'm using filters so
I don't get the TooManyBooleanClauses Exception.  And my TermQuery tq is
just a field that has 'y' in every document so I can filter over the
entire index.  The last two lines I am creating a boolean OR, and
everything works fine.  I get back 30 documents which is correct.

However when I change the last two lines to create an AND:

q2.add(fq, true, false);
q2.add(fq2, true, false);

I still get back 30 documents, which is not correct.  It should be 0.
What's going on with FilteredQuery?

Thanks,
Peter


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 16:15:08 2005
Return-Path: <java-user-return-13867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54270 invoked from network); 1 Apr 2005 16:15:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 16:15:08 -0000
Received: (qmail 89244 invoked by uid 500); 1 Apr 2005 16:15:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89224 invoked by uid 500); 1 Apr 2005 16:15:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89210 invoked by uid 99); 1 Apr 2005 16:15:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 08:14:59 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E6EF113E2006; Fri,  1 Apr 2005 11:14:55 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id CDA1513E2006
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2005 11:14:36 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <6eaaed68ad071ce34613d9b154cf7368@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: java-user@lucene.apache.org
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Deeply nested boolean query performance
Date: Fri, 1 Apr 2005 11:14:36 -0500
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I will soon create some tests for this scenario, but wanted to run this 
by the list as well....

What performance differences would be seen between a query like this:

	a AND b AND c AND d

and this one:

	((a AND b) AND c) AND d

In other words, will building a query with nested boolean queries be 
substantially slower than a single boolean query with many clauses?  Or 
might it be the other way around?

Thanks,
	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 17:14:01 2005
Return-Path: <java-user-return-13868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71144 invoked from network); 1 Apr 2005 17:14:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 17:14:01 -0000
Received: (qmail 28868 invoked by uid 500); 1 Apr 2005 17:13:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28835 invoked by uid 500); 1 Apr 2005 17:13:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28809 invoked by uid 99); 1 Apr 2005 17:13:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 09:13:40 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id BEFA313E2122; Fri,  1 Apr 2005 12:13:36 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 35B4113E2006
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2005 12:13:12 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <1582287727.20050401180703@keljob.com>
References: <424C0E62.10002@colaborativa.net> <297f128e646a94719e98205e5e42c4bc@ehatchersolutions.com> <773719179.20050401150918@keljob.com> <3e9becd32d830a737fc6da54ea0d1e36@ehatchersolutions.com> <1582287727.20050401180703@keljob.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <4367f81557fe22108fce438e2b3c0b22@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Re[4]: Analyzer don't work with wildcard queries, snowball analyzer.
Date: Fri, 1 Apr 2005 12:13:12 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Apr 1, 2005, at 11:07 AM, Sven Duzont wrote:
> EH> I presume your analyzer normalized accented characters?  Which 
> analyzer
> EH> is that?
>
> Yes, i'm using a custom analyser for indexing / searching, ti consists
> in :
> - FrenchStopFilter
> - IsoLatinFilter (this is the one that will replace accented
> characters)

Could you share that filter with the community?

> EH> You will need to employ some form of character normalization on
> EH> wildcard queries too.
>
> thanks, it works succeffuly, code snippet following
>
> ---
>  sven
>
> /*----------------------- CODE ----------------------------*/
>
> private static Query CreateCustomQuery(Query query)
> {
>   if(query instanceof BooleanQuery)  {
>     final BooleanClause[] bClauses = ((BooleanQuery) 
> query).getClauses();
>
>     // The first clause is required
>     if(bClauses[0].prohibited != true)
>       bClauses[0].required = true;

Why do you flip the required flag like this?

>
>     // Will parse each clause to remove accents if needed
>     Term term;
>     for (int i = 0; i < bClauses.length; i++)    {
>       if(bClauses[i].query instanceof WildcardQuery)      {
>         term = ((WildcardQuery)bClauses[i].query).getTerm();
>         bClauses[i].query = new WildcardQuery(new Term(term.field(),
>             
> ISOLatin1AccentFilter.RemoveAccents(term.text().toLowerCase())));
>       }

What about handling BooleanQuery's nested within a BooleanQuery?  
You'll need some recursion.

	Erik



>       if(bClauses[i].query instanceof PrefixQuery)      {
>         term = ((PrefixQuery)bClauses[i].query).getPrefix();
>         bClauses[i].query = new PrefixQuery(new Term(term.field(),
>             
> ISOLatin1AccentFilter.RemoveAccents(term.text().toLowerCase())));
>       // toLowerCase because the text is lowercased during indexation
>       }
>     }
>   }
>   else if(query instanceof WildcardQuery)  {
>     final Term term = ((WildcardQuery)query).getTerm();
>     query = new WildcardQuery(new Term(term.field(),
>         
> ISOLatin1AccentFilter.RemoveAccents(term.text().toLowerCase())));
>   }
>   else if(query instanceof PrefixQuery)  {
>     final Term term = ((PrefixQuery)query).getPrefix();
>     query = new PrefixQuery(new Term(term.field(),
>         
> ISOLatin1AccentFilter.RemoveAccents(term.text().toLowerCase())));
>   }
>   return query;
> }
>
> /*----------------------- END OF CODE ----------------------------*/
>
> EH> 	Erik
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 17:16:31 2005
Return-Path: <java-user-return-13869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72308 invoked from network); 1 Apr 2005 17:16:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 17:16:31 -0000
Received: (qmail 38098 invoked by uid 500); 1 Apr 2005 17:16:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38067 invoked by uid 500); 1 Apr 2005 17:16:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38052 invoked by uid 99); 1 Apr 2005 17:16:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 09:16:21 -0800
Received: from [81.168.89.246] (helo=[192.168.1.28])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1DHPkh-000808-00
	for <java-user@lucene.apache.org>; Fri, 01 Apr 2005 18:16:11 +0100
Subject: Plural Stemming
From: Miles Barr <miles@runtime-collective.com>
To: Lucene User <java-user@lucene.apache.org>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Fri, 01 Apr 2005 18:15:29 +0100
Message-Id: <1112375730.15511.30.camel@saturn>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.4 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Are there any Lucene extensions that can do simple stemming, i.e. just
for plurals? Or is the only stemming package available Snowball?



Cheers
-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 17:24:45 2005
Return-Path: <java-user-return-13870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74760 invoked from network); 1 Apr 2005 17:24:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 17:24:45 -0000
Received: (qmail 62703 invoked by uid 500); 1 Apr 2005 17:24:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62684 invoked by uid 500); 1 Apr 2005 17:24:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62669 invoked by uid 99); 1 Apr 2005 17:24:39 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from shared4.hardhathosting.com (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 09:24:37 -0800
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j31HOjI28710
	for <java-user@lucene.apache.org>; Fri, 1 Apr 2005 11:24:45 -0600
Message-ID: <424D83D1.8070803@getopt.org>
Date: Fri, 01 Apr 2005 19:24:33 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Plural Stemming
References: <1112375730.15511.30.camel@saturn>
In-Reply-To: <1112375730.15511.30.camel@saturn>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Miles Barr wrote:
> Are there any Lucene extensions that can do simple stemming, i.e. just
> for plurals? Or is the only stemming package available Snowball?

For which language? Stemming is always language-specific...

If for English, then there is also a built-in PorterStemmer. If you know 
what you do, you could disable some of the stemming rules to get such 
"under-stemming".

-- 
Best regards,
Andrzej Bialecki
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 17:28:00 2005
Return-Path: <java-user-return-13871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75569 invoked from network); 1 Apr 2005 17:28:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 17:28:00 -0000
Received: (qmail 66955 invoked by uid 500); 1 Apr 2005 17:27:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66920 invoked by uid 500); 1 Apr 2005 17:27:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66906 invoked by uid 99); 1 Apr 2005 17:27:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 09:27:52 -0800
Received: from [81.168.89.246] (helo=[192.168.1.28])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1DHPvr-0000Fi-00
	for <java-user@lucene.apache.org>; Fri, 01 Apr 2005 18:27:43 +0100
Subject: Re: Plural Stemming
From: Miles Barr <miles@runtime-collective.com>
To: Lucene User <java-user@lucene.apache.org>
In-Reply-To: <424D83D1.8070803@getopt.org>
References: <1112375730.15511.30.camel@saturn> <424D83D1.8070803@getopt.org>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Fri, 01 Apr 2005 18:27:01 +0100
Message-Id: <1112376421.15511.32.camel@saturn>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.4 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Fri, 2005-04-01 at 19:24 +0200, Andrzej Bialecki wrote:
> Miles Barr wrote:
> > Are there any Lucene extensions that can do simple stemming, i.e. just
> > for plurals? Or is the only stemming package available Snowball?
> 
> For which language? Stemming is always language-specific...
> 
> If for English, then there is also a built-in PorterStemmer. If you know 
> what you do, you could disable some of the stemming rules to get such 
> "under-stemming".

Sorry I should have said, at the moment I'm only going to be handling
English, but potentially other languages in the future.

I'll take a look at the PorterStemmer.


Thanks
-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 18:10:57 2005
Return-Path: <java-user-return-13872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91800 invoked from network); 1 Apr 2005 18:10:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 18:10:57 -0000
Received: (qmail 62475 invoked by uid 500); 1 Apr 2005 18:10:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62443 invoked by uid 500); 1 Apr 2005 18:10:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62429 invoked by uid 99); 1 Apr 2005 18:10:50 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr8.xs4all.nl (HELO smtp-vbr8.xs4all.nl) (194.109.24.28)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 10:10:49 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr8.xs4all.nl (8.12.11/8.12.11) with ESMTP id j31IAkhr001083
	for <java-user@lucene.apache.org>; Fri, 1 Apr 2005 20:10:46 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Deeply nested boolean query performance
Date: Fri, 1 Apr 2005 20:10:45 +0200
User-Agent: KMail/1.5.4
References: <6eaaed68ad071ce34613d9b154cf7368@ehatchersolutions.com>
In-Reply-To: <6eaaed68ad071ce34613d9b154cf7368@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504012010.45671.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 01 April 2005 18:14, Erik Hatcher wrote:
> I will soon create some tests for this scenario, but wanted to run this 
> by the list as well....

Great, see below.

> What performance differences would be seen between a query like this:
> 
> 	a AND b AND c AND d

This will use a single ConjunctionScorer, and it is the fastest form.
 
> and this one:
> 
> 	((a AND b) AND c) AND d

> In other words, will building a query with nested boolean queries be 
> substantially slower than a single boolean query with many clauses?  Or 
> might it be the other way around?

This will use a ConjunctionScorer for (a AND b), assuming a and
b are terms. For the other AND operators a BooleanScorer will be
used in 1.4.3. The development version will use a ConjunctionScorer
at each AND operator.

The main difference between a ConjunctionScorer and a BooleanScorer
is the use of skipTo(), ie. the forwarding information in the term docs
index, that allows to 'fast forward' to a given document.
This 'fast forward' is useful for AND queries, and ConjunctionScorer does it,
BooleanScorer simply uses next() instead. The next() method iterates
over all documents in a term docs index.

In other words, the nested form should be significantly slower than
the flat form in 1.4.3, and just a bit slower in the development version.

Another skipTo advantage comes from this form:
(a OR b) and c
In 1.4.3, this uses a BooleanScorer for both operators, making this
as much work as:
(a OR b) OR c.
In the development version, the OR operator gets a DisjunctionScorer,
and the AND operator a ConjunctionScorer, both allowing the use
of skipTo(), even on the a and b terms.

In this context (a OR b) can also be for example a fuzzy query or a prefix 
query.

The development version also uses skipTo() on b in the following situations:
+a b
a -b

So, when you measure, please use both 1.4.3 and the development version
to see the differences. And, off course, the larger your index, the better.
As the code is still a bit young, you might be in for some surprises, too.
skipTo() has the biggest advantages when the index data is not
available in any cache.

Regards,
Paul Elschot.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 18:29:45 2005
Return-Path: <java-user-return-13873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96391 invoked from network); 1 Apr 2005 18:29:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 18:29:45 -0000
Received: (qmail 89264 invoked by uid 500); 1 Apr 2005 18:29:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89237 invoked by uid 500); 1 Apr 2005 18:29:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89223 invoked by uid 99); 1 Apr 2005 18:29:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 10:29:37 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id DB67E13E2121; Fri,  1 Apr 2005 13:29:35 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 4BA9713E2006
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2005 13:29:07 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <78A2AFE317F5AD48B823BE740D4A815224070D@flexbe01.crcpress.com>
References: <78A2AFE317F5AD48B823BE740D4A815224070D@flexbe01.crcpress.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <7fb34891eafc72c0d564425a08f6dc4b@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: FilteredQuery and Boolean AND
Date: Fri, 1 Apr 2005 13:29:04 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Peter,

Could you provide a straight-forward test case that indexes a few 
documents into a RAMDirectory and demonstrates the problem you're 
having with AND'd FilteredQuery's?

Give me something concrete and simple and I'll dig into it further.

	Erik

On Apr 1, 2005, at 11:13 AM, Kipping, Peter wrote:

> Any ideas on this?  I have purchased your book, Lucene in Action, which
> is quite good.  To make things easier, consider the example on p212.  
> In
> item 4, when you combine the queries, what happens you combine them in
> and AND fashion?  The book only has OR, which works.  Although it may
> work since the book only has one filtered query, but what if you made
> them both filtered queries and ANDed them?
>
> Thanks,
> Peter
>
> -----Original Message-----
> From: Kipping, Peter [mailto:Peter.Kipping@taylorandfrancis.com]
> Sent: Friday, March 25, 2005 10:34 AM
> To: java-user@lucene.apache.org
> Subject: FilteredQuery and Boolean AND
>
> I have the following query structure:
>
> BooleanQuery q2 = new BooleanQuery();
> TermQuery tq = new TermQuery(new Term("all_entries", "y"));
> FilteredQuery fq = new FilteredQuery(tq, ft);
> FilteredQuery fq2 = new FilteredQuery(tq, ft2);
> q2.add(fq, false, false);
> q2.add(fq2, false, false);
>
> The two filters are searches over numeric ranges.  I'm using filters so
> I don't get the TooManyBooleanClauses Exception.  And my TermQuery tq 
> is
> just a field that has 'y' in every document so I can filter over the
> entire index.  The last two lines I am creating a boolean OR, and
> everything works fine.  I get back 30 documents which is correct.
>
> However when I change the last two lines to create an AND:
>
> q2.add(fq, true, false);
> q2.add(fq2, true, false);
>
> I still get back 30 documents, which is not correct.  It should be 0.
> What's going on with FilteredQuery?
>
> Thanks,
> Peter
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 19:29:04 2005
Return-Path: <java-user-return-13874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14341 invoked from network); 1 Apr 2005 19:29:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 19:29:04 -0000
Received: (qmail 671 invoked by uid 500); 1 Apr 2005 19:28:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 650 invoked by uid 500); 1 Apr 2005 19:28:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 635 invoked by uid 99); 1 Apr 2005 19:28:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 11:28:57 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2011D13E2122; Fri,  1 Apr 2005 14:28:56 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 3201E13E2006
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2005 14:28:42 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <200504012010.45671.paul.elschot@xs4all.nl>
References: <6eaaed68ad071ce34613d9b154cf7368@ehatchersolutions.com> <200504012010.45671.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <8f323a5ab7400452c907eed693709ac8@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Deeply nested boolean query performance
Date: Fri, 1 Apr 2005 14:26:20 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul,

Thanks for your very thorough response.  It is very helpful.

For all my projects, I'm using the latest Subversion codebase and 
staying current with any changes there, so that is very good news.

	Erik

On Apr 1, 2005, at 1:10 PM, Paul Elschot wrote:

> On Friday 01 April 2005 18:14, Erik Hatcher wrote:
>> I will soon create some tests for this scenario, but wanted to run 
>> this
>> by the list as well....
>
> Great, see below.
>
>> What performance differences would be seen between a query like this:
>>
>> 	a AND b AND c AND d
>
> This will use a single ConjunctionScorer, and it is the fastest form.
>
>> and this one:
>>
>> 	((a AND b) AND c) AND d
>
>> In other words, will building a query with nested boolean queries be
>> substantially slower than a single boolean query with many clauses?  
>> Or
>> might it be the other way around?
>
> This will use a ConjunctionScorer for (a AND b), assuming a and
> b are terms. For the other AND operators a BooleanScorer will be
> used in 1.4.3. The development version will use a ConjunctionScorer
> at each AND operator.
>
> The main difference between a ConjunctionScorer and a BooleanScorer
> is the use of skipTo(), ie. the forwarding information in the term docs
> index, that allows to 'fast forward' to a given document.
> This 'fast forward' is useful for AND queries, and ConjunctionScorer 
> does it,
> BooleanScorer simply uses next() instead. The next() method iterates
> over all documents in a term docs index.
>
> In other words, the nested form should be significantly slower than
> the flat form in 1.4.3, and just a bit slower in the development 
> version.
>
> Another skipTo advantage comes from this form:
> (a OR b) and c
> In 1.4.3, this uses a BooleanScorer for both operators, making this
> as much work as:
> (a OR b) OR c.
> In the development version, the OR operator gets a DisjunctionScorer,
> and the AND operator a ConjunctionScorer, both allowing the use
> of skipTo(), even on the a and b terms.
>
> In this context (a OR b) can also be for example a fuzzy query or a 
> prefix
> query.
>
> The development version also uses skipTo() on b in the following 
> situations:
> +a b
> a -b
>
> So, when you measure, please use both 1.4.3 and the development version
> to see the differences. And, off course, the larger your index, the 
> better.
> As the code is still a bit young, you might be in for some surprises, 
> too.
> skipTo() has the biggest advantages when the index data is not
> available in any cache.
>
> Regards,
> Paul Elschot.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 19:29:56 2005
Return-Path: <java-user-return-13875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14562 invoked from network); 1 Apr 2005 19:29:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 19:29:56 -0000
Received: (qmail 2657 invoked by uid 500); 1 Apr 2005 19:29:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2453 invoked by uid 500); 1 Apr 2005 19:29:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2438 invoked by uid 99); 1 Apr 2005 19:29:51 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of gsdas@cse.iitb.ac.in designates 203.199.81.149 as permitted sender)
Received: from smtp3.iitb.ac.in (HELO smtp1.iitb.ac.in) (203.199.81.149)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 01 Apr 2005 11:29:50 -0800
Received: (qmail 32743 invoked from network); 2 Apr 2005 00:59:50 +0530
Received: from unknown (HELO ldns1.iitb.ac.in) (10.200.12.1)
  by smtp1.iitb.ac.in with SMTP; 2 Apr 2005 00:59:50 +0530
Received: (qmail 27565 invoked by uid 781); 1 Apr 2005 19:29:46 -0000
Received: from 10.105.1.1 by ldns1 (envelope-from <gsdas@cse.iitb.ac.in>, uid 502) with qmail-scanner-1.23 
 (spamassassin: 2.54.  
 Clear:RC:1(10.105.1.1):. 
 Processed in 0.018623 secs); 01 Apr 2005 19:29:46 -0000
Received: from unknown (HELO cse.iitb.ac.in) (10.105.1.1)
  by ldns1.iitb.ac.in with SMTP; 1 Apr 2005 19:29:46 -0000
Received: (qmail 16666 invoked by uid 509); 1 Apr 2005 19:32:19 -0000
Received: from gsdas@cse.iitb.ac.in by jeeves.cse.iitb.ac.in by uid 507 with qmail-scanner-1.22-st-qms 
 (clamdscan: 0.73. spamassassin: 2.63.  Clear:RC:1(10.105.1.11):. 
 Processed in 0.899657 secs); 01 Apr 2005 19:32:19 -0000
X-Antivirus-cse.iitb.ac.in-Mail-From: gsdas@cse.iitb.ac.in via jeeves.cse.iitb.ac.in
X-Antivirus-cse.iitb.ac.in: 1.22-st-qms (Clear:RC:1(10.105.1.11):. Processed in 0.899657 secs Process 16650)
Received: from mars.cse.iitb.ac.in (10.105.1.11)
  by cse.iitb.ac.in with SMTP; 1 Apr 2005 19:32:18 -0000
Date: Sat, 2 Apr 2005 00:59:45 +0530 (IST)
From: Sujatha Das <gsdas@cse.iitb.ac.in>
To: java-user@lucene.apache.org
Subject: Re: proximity search in lucene
In-Reply-To: <Pine.LNX.4.61.0504011558550.5631@mars.cse.iitb.ac.in>
Message-ID: <Pine.LNX.4.61.0504020059360.22818@mars.cse.iitb.ac.in>
References: <Pine.LNX.4.61.0504011558550.5631@mars.cse.iitb.ac.in>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



>
> Hi,
> Does Lucene support "SpanNear" or phrase queries where the clauses or terms 
> are not of the same field?
> If not, could someone let me know which is the way to support proximity 
> searches with terms belonging to different fields.
>
> Thanks much,
> Sujatha Das
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 19:35:41 2005
Return-Path: <java-user-return-13876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15734 invoked from network); 1 Apr 2005 19:35:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 19:35:41 -0000
Received: (qmail 11101 invoked by uid 500); 1 Apr 2005 19:35:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10923 invoked by uid 500); 1 Apr 2005 19:35:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10909 invoked by uid 99); 1 Apr 2005 19:35:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 11:35:32 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Performance Question
Date: Fri, 1 Apr 2005 14:35:25 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA010829FA@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FilteredQuery and Boolean AND
thread-index: AcU26MfpNfGfpdsXRgCyyOF3Gn0gYgACEuFw
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have 5 indexes, each one is 6GB...I need 512MB of Heap size in order =
to open the index and have all type of queries. My question is, is it =
better to just have on large Index 30GB? will increasing the Heap size =
increase performance? can I store an instance of MultiSearcher(OR just =
Searcher in case on big index is better) in the application variable =
since I have 3 servlets that opens the index? would implementing a =
listner to open the index would be useful knowing that the index changes =
onece a mounth?
any suggestions would be very helpful,=20
Thanks,
omar

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Friday, April 01, 2005 1:29 PM
To: java-user@lucene.apache.org
Subject: Re: FilteredQuery and Boolean AND


Peter,

Could you provide a straight-forward test case that indexes a few=20
documents into a RAMDirectory and demonstrates the problem you're=20
having with AND'd FilteredQuery's?

Give me something concrete and simple and I'll dig into it further.

	Erik

On Apr 1, 2005, at 11:13 AM, Kipping, Peter wrote:

> Any ideas on this?  I have purchased your book, Lucene in Action, =
which
> is quite good.  To make things easier, consider the example on p212. =20
> In
> item 4, when you combine the queries, what happens you combine them in
> and AND fashion?  The book only has OR, which works.  Although it may
> work since the book only has one filtered query, but what if you made
> them both filtered queries and ANDed them?
>
> Thanks,
> Peter
>
> -----Original Message-----
> From: Kipping, Peter [mailto:Peter.Kipping@taylorandfrancis.com]
> Sent: Friday, March 25, 2005 10:34 AM
> To: java-user@lucene.apache.org
> Subject: FilteredQuery and Boolean AND
>
> I have the following query structure:
>
> BooleanQuery q2 =3D new BooleanQuery();
> TermQuery tq =3D new TermQuery(new Term("all_entries", "y"));
> FilteredQuery fq =3D new FilteredQuery(tq, ft);
> FilteredQuery fq2 =3D new FilteredQuery(tq, ft2);
> q2.add(fq, false, false);
> q2.add(fq2, false, false);
>
> The two filters are searches over numeric ranges.  I'm using filters =
so
> I don't get the TooManyBooleanClauses Exception.  And my TermQuery tq=20
> is
> just a field that has 'y' in every document so I can filter over the
> entire index.  The last two lines I am creating a boolean OR, and
> everything works fine.  I get back 30 documents which is correct.
>
> However when I change the last two lines to create an AND:
>
> q2.add(fq, true, false);
> q2.add(fq2, true, false);
>
> I still get back 30 documents, which is not correct.  It should be 0.
> What's going on with FilteredQuery?
>
> Thanks,
> Peter
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 20:34:52 2005
Return-Path: <java-user-return-13877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46495 invoked from network); 1 Apr 2005 20:34:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2005 20:34:52 -0000
Received: (qmail 16656 invoked by uid 500); 1 Apr 2005 20:34:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16635 invoked by uid 500); 1 Apr 2005 20:34:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16622 invoked by uid 99); 1 Apr 2005 20:34:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 12:34:44 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 275BE13E2122; Fri,  1 Apr 2005 15:34:37 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id A93E813E2121
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2005 15:34:08 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <Pine.LNX.4.61.0504020059360.22818@mars.cse.iitb.ac.in>
References: <Pine.LNX.4.61.0504011558550.5631@mars.cse.iitb.ac.in> <Pine.LNX.4.61.0504020059360.22818@mars.cse.iitb.ac.in>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <a6c99720cca2d4557fd6e7d88ca2a41b@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: proximity search in lucene
Date: Fri, 1 Apr 2005 15:34:10 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 1, 2005, at 2:29 PM, Sujatha Das wrote:

>
>
>>
>> Hi,
>> Does Lucene support "SpanNear" or phrase queries where the clauses or 
>> terms are not of the same field?
>> If not, could someone let me know which is the way to support 
>> proximity searches with terms belonging to different fields.

No, it does not support cross-field proximity.  I'm not even remotely 
understanding what that would even mean.  Could you provide an example 
of what you're after?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 00:03:14 2005
Return-Path: <java-user-return-13878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86258 invoked from network); 2 Apr 2005 00:03:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Apr 2005 00:03:14 -0000
Received: (qmail 72095 invoked by uid 500); 2 Apr 2005 00:03:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72071 invoked by uid 500); 2 Apr 2005 00:03:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72058 invoked by uid 99); 2 Apr 2005 00:03:08 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 16:03:05 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B92935B785; Fri,  1 Apr 2005 16:03:01 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B6E957F45E
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2005 16:03:01 -0800 (PST)
Date: Fri, 1 Apr 2005 16:03:01 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: Lucene User <java-user@lucene.apache.org>
Subject: Re: Plural Stemming
In-Reply-To: <1112376421.15511.32.camel@saturn>
Message-ID: <Pine.LNX.4.58.0504011601240.20757@hal.rescomp.berkeley.edu>
References: <1112375730.15511.30.camel@saturn> <424D83D1.8070803@getopt.org>
 <1112376421.15511.32.camel@saturn>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: > > Are there any Lucene extensions that can do simple stemming, i.e. just
: > > for plurals? Or is the only stemming package available Snowball?

LIA has a case study of jGuru which uses a very specific, home grown
utility method called "stripEnglishPlural" ... since it's in the case
study chapter, i'm not sure if it's included in the books source code, but
is included verbatim in the book...

   http://lucenebook.com/search?query=stripEnglishPlural



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 00:15:27 2005
Return-Path: <java-user-return-13879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87422 invoked from network); 2 Apr 2005 00:15:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Apr 2005 00:15:26 -0000
Received: (qmail 79336 invoked by uid 500); 2 Apr 2005 00:15:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79309 invoked by uid 500); 2 Apr 2005 00:15:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79296 invoked by uid 99); 2 Apr 2005 00:15:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 16:15:18 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5B1C213E2006; Fri,  1 Apr 2005 19:15:10 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 2C7EA13E2006
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2005 19:14:42 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <Pine.LNX.4.58.0504011601240.20757@hal.rescomp.berkeley.edu>
References: <1112375730.15511.30.camel@saturn> <424D83D1.8070803@getopt.org> <1112376421.15511.32.camel@saturn> <Pine.LNX.4.58.0504011601240.20757@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <db22231e9ab736e43c6db8b067a54fc6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Plural Stemming
Date: Fri, 1 Apr 2005 19:14:35 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 1, 2005, at 7:03 PM, Chris Hostetter wrote:

>
> : > > Are there any Lucene extensions that can do simple stemming, 
> i.e. just
> : > > for plurals? Or is the only stemming package available Snowball?
>
> LIA has a case study of jGuru which uses a very specific, home grown
> utility method called "stripEnglishPlural" ... since it's in the case
> study chapter, i'm not sure if it's included in the books source code, 
> but
> is included verbatim in the book...
>
>    http://lucenebook.com/search?query=stripEnglishPlural

Thanks for the reminder, Chris.  I'm sure jGuru wouldn't mind us 
posting it, so I've pasted it below.  It is not included in the LIA 
source code - only the code Otis and I wrote ourselves is included 
there and we didn't get the source code from any of the case studies 
(other than Bob Carpenter's LingPipe stuff).

	Erik


/** A useful, but not particularly efficient plural stripper */
public static String stripEnglishPlural(String word) {
     // too small?
     if ( word.length()<STRIP_PLURAL_MIN_WORD_SIZE ) {
       return word;
     }
     // special cases
     if ( word.equals("has") ||
        word.equals("was") ||
        word.equals("does") ||
        word.equals("goes") ||
        word.equals("dies") ||
        word.equals("yes") ||
        word.equals("gets") || // means too much in java/JSP
        word.equals("its") )
       {
           return word;
       }
     String newWord=word;
     if ( word.endsWith("sses") ||
          word.endsWith("xes") ||
          word.endsWith("hes") ) {
       // remove 'es'
       newWord = word.substring(0,word.length()-2);
     }
     else if ( word.endsWith("ies") ) {
       // remove 'ies', replace with 'y'
       newWord = word.substring(0,word.length()-3)+'y';
     }
     else if ( word.endsWith("s") &&
              !word.endsWith("ss") &&
              !word.endsWith("is") &&
              !word.endsWith("us") &&
              !word.endsWith("pos") &&
              !word.endsWith("ses") ) {
       // remove 's'
       newWord = word.substring(0,word.length()-1);
     }
     return newWord;
}


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 00:53:06 2005
Return-Path: <java-user-return-13880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89864 invoked from network); 2 Apr 2005 00:53:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Apr 2005 00:53:06 -0000
Received: (qmail 225 invoked by uid 500); 2 Apr 2005 00:52:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 200 invoked by uid 500); 2 Apr 2005 00:52:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 187 invoked by uid 99); 2 Apr 2005 00:52:58 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Apr 2005 16:52:57 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6D1495B7A7; Fri,  1 Apr 2005 16:52:55 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 6B69B7F45E
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2005 16:52:55 -0800 (PST)
Date: Fri, 1 Apr 2005 16:52:55 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: FilteredQuery and Boolean AND
In-Reply-To: <7fb34891eafc72c0d564425a08f6dc4b@ehatchersolutions.com>
Message-ID: <Pine.LNX.4.58.0504011644070.20757@hal.rescomp.berkeley.edu>
References: <78A2AFE317F5AD48B823BE740D4A815224070D@flexbe01.crcpress.com>
 <7fb34891eafc72c0d564425a08f6dc4b@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-441870778-53486550-1112403175=:20757"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

---441870778-53486550-1112403175=:20757
Content-Type: TEXT/PLAIN; charset=US-ASCII


Peter's problem intrigued me, so I wrote my own test case using two simple
Filters that filter out all but the first (or last) doc.  I seem to be
getting the same results he is, which is certianly.  see attached test case.

while this definitely seems like a bug, it also seems like a fairly
inefficinent way of approaching hte problem in general, instead of:
  BooleanQuery containing:
    a) FilteredQuery wrapping:
        Query for "all" -- filtered by -- RangeFilter #1
    b) FilteredQuery wrapping:
        Query for "all" -- filtered by -- RangeFilter #2

...it seems like it would make more sense to use...

  FilterQuery wrapping:
    Query for all -- filtered by -- ChainedFilter containing:
      a) RangeFilter #1
      b) RangeFilter #2




: Date: Fri, 1 Apr 2005 13:29:04 -0500
: From: Erik Hatcher <erik@ehatchersolutions.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Re: FilteredQuery and Boolean AND
:
: Peter,
:
: Could you provide a straight-forward test case that indexes a few
: documents into a RAMDirectory and demonstrates the problem you're
: having with AND'd FilteredQuery's?
:
: Give me something concrete and simple and I'll dig into it further.
:
: 	Erik
:
: On Apr 1, 2005, at 11:13 AM, Kipping, Peter wrote:
:
: > Any ideas on this?  I have purchased your book, Lucene in Action, which
: > is quite good.  To make things easier, consider the example on p212.
: > In
: > item 4, when you combine the queries, what happens you combine them in
: > and AND fashion?  The book only has OR, which works.  Although it may
: > work since the book only has one filtered query, but what if you made
: > them both filtered queries and ANDed them?
: >
: > Thanks,
: > Peter
: >
: > -----Original Message-----
: > From: Kipping, Peter [mailto:Peter.Kipping@taylorandfrancis.com]
: > Sent: Friday, March 25, 2005 10:34 AM
: > To: java-user@lucene.apache.org
: > Subject: FilteredQuery and Boolean AND
: >
: > I have the following query structure:
: >
: > BooleanQuery q2 = new BooleanQuery();
: > TermQuery tq = new TermQuery(new Term("all_entries", "y"));
: > FilteredQuery fq = new FilteredQuery(tq, ft);
: > FilteredQuery fq2 = new FilteredQuery(tq, ft2);
: > q2.add(fq, false, false);
: > q2.add(fq2, false, false);
: >
: > The two filters are searches over numeric ranges.  I'm using filters so
: > I don't get the TooManyBooleanClauses Exception.  And my TermQuery tq
: > is
: > just a field that has 'y' in every document so I can filter over the
: > entire index.  The last two lines I am creating a boolean OR, and
: > everything works fine.  I get back 30 documents which is correct.
: >
: > However when I change the last two lines to create an AND:
: >
: > q2.add(fq, true, false);
: > q2.add(fq2, true, false);
: >
: > I still get back 30 documents, which is not correct.  It should be 0.
: > What's going on with FilteredQuery?
: >
: > Thanks,
: > Peter
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss

---441870778-53486550-1112403175=:20757
Content-Type: TEXT/x-java; charset=US-ASCII; name="TestKippingPeterBug.java"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.58.0504011652550.20757@hal.rescomp.berkeley.edu>
Content-Description: 
Content-Disposition: attachment; filename="TestKippingPeterBug.java"

DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguVGVybTsNCmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFJlYWRlcjsNCmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFdyaXRlcjsNCmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guUXVlcnk7DQppbXBvcnQgb3Jn
LmFwYWNoZS5sdWNlbmUuc2VhcmNoLkhpdHM7DQppbXBvcnQgb3JnLmFwYWNo
ZS5sdWNlbmUuc2VhcmNoLkluZGV4U2VhcmNoZXI7DQppbXBvcnQgb3JnLmFw
YWNoZS5sdWNlbmUuc3RvcmUuUkFNRGlyZWN0b3J5Ow0KaW1wb3J0IG9yZy5h
cGFjaGUubHVjZW5lLmFuYWx5c2lzLlNpbXBsZUFuYWx5emVyOw0KaW1wb3J0
IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRvY3VtZW50Ow0KaW1wb3J0
IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkZpZWxkOw0KaW1wb3J0IG9y
Zy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRhdGVGaWVsZDsNCmltcG9ydCBv
cmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guUXVlcnk7DQppbXBvcnQgb3JnLmFw
YWNoZS5sdWNlbmUuc2VhcmNoLlRlcm1RdWVyeTsNCmltcG9ydCBvcmcuYXBh
Y2hlLmx1Y2VuZS5zZWFyY2guQm9vbGVhblF1ZXJ5Ow0KaW1wb3J0IG9yZy5h
cGFjaGUubHVjZW5lLnNlYXJjaC5GaWx0ZXI7DQppbXBvcnQgb3JnLmFwYWNo
ZS5sdWNlbmUuc2VhcmNoLkZpbHRlcmVkUXVlcnk7DQoNCmltcG9ydCBqYXZh
LmlvLklPRXhjZXB0aW9uOw0KaW1wb3J0IGphdmEudXRpbC5SYW5kb207DQpp
bXBvcnQgamF2YS51dGlsLkJpdFNldDsNCg0KaW1wb3J0IGp1bml0LmZyYW1l
d29yay5UZXN0Q2FzZTsNCg0KcHVibGljIGNsYXNzIFRlc3RLaXBwaW5nUGV0
ZXJCdWcgZXh0ZW5kcyBUZXN0Q2FzZSB7DQoNCiAgICBwdWJsaWMgc3RhdGlj
IGZpbmFsIGJvb2xlYW4gRiA9IGZhbHNlOw0KICAgIHB1YmxpYyBzdGF0aWMg
ZmluYWwgYm9vbGVhbiBUID0gdHJ1ZTsNCg0KICAgIHB1YmxpYyBzdGF0aWMg
U3RyaW5nW10gZGF0YSA9IG5ldyBTdHJpbmcgW10gew0KICAgICAgICAiYSBi
ICAgbSBuIiwNCiAgICAgICAgImEgeCAgIHEgciIsDQogICAgICAgICJhIGIg
ICBzIHQiLA0KICAgICAgICAiYSB4ICAgZSBmIiwNCiAgICAgICAgImEiDQog
ICAgfTsNCg0KICAgIA0KICAgIFJBTURpcmVjdG9yeSBpbmRleCA9IG5ldyBS
QU1EaXJlY3RvcnkoKTsNCiAgICBJbmRleFJlYWRlciByOw0KICAgIEluZGV4
U2VhcmNoZXIgczsNCiAgICBRdWVyeSBBTEwgPSBuZXcgVGVybVF1ZXJ5KG5l
dyBUZXJtKCJkYXRhIiwiYSIpKTsNCg0KICAgIA0KICAgIHB1YmxpYyBUZXN0
S2lwcGluZ1BldGVyQnVnKFN0cmluZyBuYW1lKSB7DQoJc3VwZXIobmFtZSk7
DQogICAgfQ0KICAgIHB1YmxpYyBUZXN0S2lwcGluZ1BldGVyQnVnKCkgew0K
ICAgICAgICBzdXBlcigpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHNl
dFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7DQoNCiAgICAgICAgLyogYnVpbGQg
YW4gaW5kZXggKi8NCiAgICAgICAgSW5kZXhXcml0ZXIgd3JpdGVyID0gbmV3
IEluZGV4V3JpdGVyKGluZGV4LA0KICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgbmV3IFNpbXBsZUFuYWx5emVyKCksIFQp
Ow0KICAgICAgICANCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBkYXRh
Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBEb2N1bWVudCBkb2MgPSBu
ZXcgRG9jdW1lbnQoKTsNCiAgICAgICAgICAgIGRvYy5hZGQoRmllbGQuS2V5
d29yZCgiaWQiLFN0cmluZy52YWx1ZU9mKGkpKSk7DQogICAgICAgICAgICBk
b2MuYWRkKEZpZWxkLlRleHQoImRhdGEiLGRhdGFbaV0pKTsNCiAgICAgICAg
ICAgIHdyaXRlci5hZGREb2N1bWVudChkb2MpOw0KICAgICAgICB9DQogICAg
ICAgIA0KICAgICAgICB3cml0ZXIub3B0aW1pemUoKTsNCiAgICAgICAgd3Jp
dGVyLmNsb3NlKCk7DQoNCiAgICAgICAgciA9IEluZGV4UmVhZGVyLm9wZW4o
aW5kZXgpOw0KICAgICAgICBzID0gbmV3IEluZGV4U2VhcmNoZXIocik7DQog
ICAgICAgIA0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RBKCkgdGhy
b3dzIEV4Y2VwdGlvbiB7DQogICAgICAgIEhpdHMgcmVzdWx0Ow0KDQogICAg
ICAgIHJlc3VsdCA9IHMuc2VhcmNoKEFMTCk7DQogICAgICAgIGFzc2VydEVx
dWFscygibm90IGFsbCBkb2NzIGZvdW5kIiwgZGF0YS5sZW5ndGgsIHJlc3Vs
dC5sZW5ndGgoKSk7DQoNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0
RmlsdGVycygpIHRocm93cyBFeGNlcHRpb24gew0KDQogICAgICAgIEZpbHRl
ciBmID0gbmV3IEZpcnN0RmlsdGVyKCk7DQogICAgICAgIEZpbHRlciBsID0g
bmV3IExhc3RGaWx0ZXIoKTsNCiAgICAgICAgDQogICAgICAgIEhpdHMgcmVz
dWx0Ow0KICAgICAgICANCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJvbmx5IG9u
ZSBzaG91bGQgYmUgc2V0IGluIEZpcnN0RmlsdGVyIiwNCiAgICAgICAgICAg
ICAgICAgICAgIDEsIGYuYml0cyhyKS5jYXJkaW5hbGl0eSgpKTsNCiAgICAg
ICAgYXNzZXJ0RXF1YWxzKCJvbmx5IG9uZSBzaG91bGQgYmUgc2V0IGluIExh
c3RGaWx0ZXIiLA0KICAgICAgICAgICAgICAgICAgICAgMSwgbC5iaXRzKHIp
LmNhcmRpbmFsaXR5KCkpOw0KDQogICAgICAgIHJlc3VsdCA9IHMuc2VhcmNo
KEFMTCwgZik7DQogICAgICAgIGFzc2VydEVxdWFscygic2hvdWxkIGdldCBv
bmUgZG9jIGZyb20gRmlyc3RGaWx0ZXIoQUxMKSIsDQogICAgICAgICAgICAg
ICAgICAgICAxLCByZXN1bHQubGVuZ3RoKCkpOw0KICAgICAgICBhc3NlcnRF
cXVhbHMoIndyb25nIGRvYyBmcm9tIEZpcnN0RmlsdGVyKEFMTCkiLA0KICAg
ICAgICAgICAgICAgICAgICAgMCwgcmVzdWx0LmlkKDApKTsNCiAgICAgICAg
ICAgICAgICAgICAgDQogICAgICAgIHJlc3VsdCA9IHMuc2VhcmNoKEFMTCwg
bCk7DQogICAgICAgIGFzc2VydEVxdWFscygic2hvdWxkIGdldCBvbmUgZG9j
IGZyb20gTGFzdEZpbHRlcihBTEwpIiwNCiAgICAgICAgICAgICAgICAgICAg
IDEsIHJlc3VsdC5sZW5ndGgoKSk7DQogICAgICAgIGFzc2VydEVxdWFscygi
d3JvbmcgZG9jIGZyb20gTGFzdEZpbHRlcihBTEwpIiwNCiAgICAgICAgICAg
ICAgICAgICAgIGRhdGEubGVuZ3RoLTEsIHJlc3VsdC5pZCgwKSk7DQogICAg
ICAgICAgICAgICAgICAgIA0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRl
c3RCb29sZWFuRmlsdGVyZWRRdWVyeSgpIHRocm93cyBFeGNlcHRpb24gew0K
DQogICAgICAgIEZpbHRlciBmID0gbmV3IEZpcnN0RmlsdGVyKCk7DQogICAg
ICAgIEZpbHRlciBsID0gbmV3IExhc3RGaWx0ZXIoKTsNCg0KICAgICAgICBR
dWVyeSBmZiA9IG5ldyBGaWx0ZXJlZFF1ZXJ5KEFMTCwgZik7DQogICAgICAg
IFF1ZXJ5IGxsID0gbmV3IEZpbHRlcmVkUXVlcnkoQUxMLCBsKTsNCiAgICAg
ICAgDQogICAgICAgIEhpdHMgcmVzdWx0Ow0KDQogICAgICAgIHJlc3VsdCA9
IHMuc2VhcmNoKGZmKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJzaG91bGQg
Z2V0IG9uZSBkb2MgZnJvbSBGaXJzdEZpbHRlcihBTEwpIiwNCiAgICAgICAg
ICAgICAgICAgICAgIDEsIHJlc3VsdC5sZW5ndGgoKSk7DQogICAgICAgIGFz
c2VydEVxdWFscygid3JvbmcgZG9jIGZyb20gRmlyc3RGaWx0ZXIoQUxMKSIs
DQogICAgICAgICAgICAgICAgICAgICAwLCByZXN1bHQuaWQoMCkpOw0KICAg
ICAgICAgICAgICAgICAgICANCiAgICAgICAgcmVzdWx0ID0gcy5zZWFyY2go
bGwpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoInNob3VsZCBnZXQgb25lIGRv
YyBmcm9tIExhc3RGaWx0ZXIoQUxMKSIsDQogICAgICAgICAgICAgICAgICAg
ICAxLCByZXN1bHQubGVuZ3RoKCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMo
Indyb25nIGRvYyBmcm9tIExhc3RGaWx0ZXIoQUxMKSIsDQogICAgICAgICAg
ICAgICAgICAgICBkYXRhLmxlbmd0aC0xLCByZXN1bHQuaWQoMCkpOw0KDQoN
CiAgICAgICAgQm9vbGVhblF1ZXJ5IG9yID0gbmV3IEJvb2xlYW5RdWVyeSgp
Ow0KICAgICAgICBvci5hZGQoZmYsIGZhbHNlLCBmYWxzZSk7DQogICAgICAg
IG9yLmFkZChsbCwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgDQogICAgICAg
IHJlc3VsdCA9IHMuc2VhcmNoKG9yKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxz
KCJzaG91bGQgZ2V0IHR3byBkb2NzIGZyb20gKm9yKiIsDQogICAgICAgICAg
ICAgICAgICAgICAyLCByZXN1bHQubGVuZ3RoKCkpOw0KICAgICAgICAgICAg
ICAgICAgICANCiAgICAgICAgQm9vbGVhblF1ZXJ5IGFuZCA9IG5ldyBCb29s
ZWFuUXVlcnkoKTsNCiAgICAgICAgYW5kLmFkZChmZiwgdHJ1ZSwgZmFsc2Up
Ow0KICAgICAgICBhbmQuYWRkKGxsLCB0cnVlLCBmYWxzZSk7DQogICAgICAg
IA0KICAgICAgICByZXN1bHQgPSBzLnNlYXJjaChhbmQpOw0KICAgICAgICBh
c3NlcnRFcXVhbHMoInNob3VsZCBnZXQgbm8gZG9jcyBmcm9tICphbmQqIiwN
CiAgICAgICAgICAgICAgICAgICAgIDAsIHJlc3VsdC5sZW5ndGgoKSk7DQog
ICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICANCiAg
ICB9DQoNCiAgICANCiAgICANCn0NCg0KY2xhc3MgRmlyc3RGaWx0ZXIgZXh0
ZW5kcyBGaWx0ZXIgew0KICAgIC8qKiBvbmx5IGxldHMgdGhlIGZpcnN0IGRv
YyBpbiB0aGUgaW5kZXggcGFzcyB0aGUgZmlsdGVyICovDQogICAgcHVibGlj
IEJpdFNldCBiaXRzKEluZGV4UmVhZGVyIHIpIHsNCiAgICAgICAgQml0U2V0
IGIgPSBuZXcgQml0U2V0KHIubWF4RG9jKCkpOw0KICAgICAgICBiLnNldCgw
KTsNCiAgICAgICAgcmV0dXJuIGI7DQogICAgfQ0KfQ0KY2xhc3MgTGFzdEZp
bHRlciBleHRlbmRzIEZpbHRlciB7DQogICAgLyoqIG9ubHkgbGV0cyB0aGUg
bGFzdCBkb2MgaW4gdGhlIGluZGV4IHBhc3MgdGhlIGZpbHRlciAqLw0KICAg
IHB1YmxpYyBCaXRTZXQgYml0cyhJbmRleFJlYWRlciByKSB7DQogICAgICAg
IEJpdFNldCBiID0gbmV3IEJpdFNldChyLm1heERvYygpKTsNCiAgICAgICAg
Yi5zZXQoci5tYXhEb2MoKS0xKTsNCiAgICAgICAgcmV0dXJuIGI7DQogICAg
fQ0KfQ0KDQogICAgDQo=


---441870778-53486550-1112403175=:20757
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
---441870778-53486550-1112403175=:20757--

From java-user-return-13881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 08:29:51 2005
Return-Path: <java-user-return-13881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36809 invoked from network); 2 Apr 2005 08:29:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Apr 2005 08:29:50 -0000
Received: (qmail 91367 invoked by uid 500); 2 Apr 2005 08:29:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91334 invoked by uid 500); 2 Apr 2005 08:29:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91321 invoked by uid 99); 2 Apr 2005 08:29:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ns2.pil.dk (HELO ns2.pil.dk) (195.41.47.38)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 02 Apr 2005 00:29:36 -0800
Received: from Wintermute (cpe.atm2-0-112124.0x3ef2c121.arcnxx12.customer.tele.dk [62.242.193.33])
	by ns2.pil.dk (Postfix) with ESMTP id 6853927E19A
	for <java-user@lucene.apache.org>; Sat,  2 Apr 2005 10:29:34 +0200 (CEST)
Reply-To: <ko@yawah.com>
From: "Kristian Ottosen" <ko@yawah.com>
To: <java-user@lucene.apache.org>
Subject: Lucene on Linux problem...
Date: Sat, 2 Apr 2005 10:29:30 +0200
Organization: YaWah.com
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcU3XhbvXRDKx6slQzayqkJj9NbSIg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Message-Id: <20050402082934.6853927E19A@ns2.pil.dk>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I have really been pulling out hair for a while over this. The problem only
occur using FSDirectory on some Linux system (some Debian, Suse and Redhat -
but not all) and never under Windows, Solaris or Mac OS X. 

What happens is that Lucene for some reason tries to read a segment which
was just merged into another segment and therefore deleted and fails with a
FileNotFoundException.
 
A few facts: Only a single thread is involved. If we use a RAM based Store
(RAMDirectory) there is no problem at all. Also there seems to a problem
related to locking using the lock files. We get timeouts even though there
is only a single thread working on the index. Switching the compound file
format on/off makes no difference. The problem may not appear immediately -
but only after several thousand documents have been indexed in a row using a
combination of IndexSearcher (check for duplicates) and IndexWriter (add
document) operations.

I wonder if there is general problem running Lucene on top of some of the
journaling file systems like ReiserFS or Ext3?

Any help or hints are greatly appreciated. Lucene is an excellent piece of
software.

Best Regards 
Kristian



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 08:41:14 2005
Return-Path: <java-user-return-13882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38249 invoked from network); 2 Apr 2005 08:41:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Apr 2005 08:41:14 -0000
Received: (qmail 2006 invoked by uid 500); 2 Apr 2005 08:41:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1978 invoked by uid 500); 2 Apr 2005 08:41:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1962 invoked by uid 99); 2 Apr 2005 08:41:02 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from web26001.mail.ukl.yahoo.com (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 02 Apr 2005 00:41:00 -0800
Received: (qmail 57182 invoked by uid 60001); 2 Apr 2005 08:40:57 -0000
Message-ID: <20050402084057.57180.qmail@web26001.mail.ukl.yahoo.com>
Received: from [194.106.34.5] by web26001.mail.ukl.yahoo.com via HTTP; Sat, 02 Apr 2005 09:40:57 BST
Date: Sat, 2 Apr 2005 09:40:57 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Plural Stemming
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Just ran this method on 4500 words ending in "s" in my
index and results looks good but I'm tempted to remove
this line:

           !word.endsWith("ses") ) 

With it removed I saw 3 oddities moses=mose gases=gase
viruses=viruse but I got 100+ extra stems that were
OK:

accesses=access
addresses=address
advises=advise
analyses=analyse
arises=arise
bases=base
basses=bass
bonuses=bonuse
bookcases=bookcase
bosses=boss
buses=buse
businesses=business
campuses=campuse
cases=case
causes=cause
ceases=cease
cheeses=cheese
chooses=choose
classes=class
clauses=clause
closes=close
compasses=compass
comprises=comprise
courses=course
crosses=cross
cruises=cruise
databases=database
decreases=decrease
discusses=discuss
diseases=disease
doses=dose
dresses=dress
emphasises=emphasise
encompasses=encompass
enterprises=enterprise
excuses=excuse
exercises=exercise
expenses=expense
farmhouses=farmhouse
focuses=focuse
franchises=franchise
fuses=fuse
gases=gase
gcses=gcse
glasses=glass
glasshouses=glasshouse
grasses=grass
greenhouses=greenhouse
guesthouses=guesthouse
harnesses=harness
horses=horse
hoses=hose
houses=house
illnesses=illness
increases=increase
leases=lease
lenses=lense
licenses=license
loses=lose
losses=loss
masses=mass
mattresses=mattress
minibuses=minibuse
minimises=minimise
misses=miss
moses=mose
noises=noise
nurses=nurse
organises=organise
passes=pass
phases=phase
phrases=phrase
poses=pose
possesses=possess
premises=premise
presses=press
processes=process
progresses=progress
promises=promise
proposes=propose
pulses=pulse
purchases=purchase
purposes=purpose
racecourses=racecourse
raises=raise
recognises=recognise
releases=release
responses=response
rises=rise
roses=rose
senses=sense
ses=ses
showcases=showcase
specialises=specialise
staircases=staircase
stresses=stress
successes=success
summerhouses=summerhouse
sunglasses=sunglass
surprises=surprise
theses=these
uses=uses
utilises=utilise
vases=vase
viruses=viruse
warehouses=warehouse
weaknesses=weakness
witnesses=witness

Cheers
Mark


Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 09:03:12 2005
Return-Path: <java-user-return-13883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40424 invoked from network); 2 Apr 2005 09:03:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Apr 2005 09:03:12 -0000
Received: (qmail 13787 invoked by uid 500); 2 Apr 2005 09:02:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13758 invoked by uid 500); 2 Apr 2005 09:02:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13741 invoked by uid 99); 2 Apr 2005 09:02:59 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr5.xs4all.nl (HELO smtp-vbr5.xs4all.nl) (194.109.24.25)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 02 Apr 2005 01:02:57 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr5.xs4all.nl (8.12.11/8.12.11) with ESMTP id j3292tCR026321
	for <java-user@lucene.apache.org>; Sat, 2 Apr 2005 11:02:55 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Lucene on Linux problem...
Date: Sat, 2 Apr 2005 11:02:54 +0200
User-Agent: KMail/1.5.4
References: <20050402082934.6853927E19A@ns2.pil.dk>
In-Reply-To: <20050402082934.6853927E19A@ns2.pil.dk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504021102.54587.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Saturday 02 April 2005 10:29, Kristian Ottosen wrote:
> Hello,
> 
> I have really been pulling out hair for a while over this. The problem only
> occur using FSDirectory on some Linux system (some Debian, Suse and Redhat -
> but not all) and never under Windows, Solaris or Mac OS X. 
> 
> What happens is that Lucene for some reason tries to read a segment which
> was just merged into another segment and therefore deleted and fails with a
> FileNotFoundException.
>  
> A few facts: Only a single thread is involved. If we use a RAM based Store
> (RAMDirectory) there is no problem at all. Also there seems to a problem
> related to locking using the lock files. We get timeouts even though there
> is only a single thread working on the index. Switching the compound file
> format on/off makes no difference. The problem may not appear immediately -
> but only after several thousand documents have been indexed in a row using a
> combination of IndexSearcher (check for duplicates) and IndexWriter (add
> document) operations.
> 
> I wonder if there is general problem running Lucene on top of some of the
> journaling file systems like ReiserFS or Ext3?

The only reason I can think of for a FileNotFoundException is that the 
corresponding close() of the file has not terminated yet, or was not done
at all.

I don't know the precise file system semantics in relation to a single Linux 
process, but if these semantics allow for a file closed by a process to be
(temporarily) invisible to that same process, one could end up with
a FileNotFoundException.

It's the first time AFAIK something like this has been reported, so another
source of the problem could be your hard disk, but I would not expect a
journalling file system to ignore errors like this, ie. a journalling file
system should provide some indication of a error situation for a
hardware problem. Could you might check the system log for
file system messages?

Going back to the file system semantics allowing a temporarily invisible
file, you might change the Lucene java code to perform a file system sync
(via a shell) in case of the FileNotFoundException, and then retry opening
the file?
If that helps, it's the file system semantics. In case there is such a thing
as a file system sync in the java.io package, this would have to be added
to Lucene. Otherwise it would probably be useful to inform the maintainers
of the JVM.

Regards,
Paul Elschot.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 09:38:07 2005
Return-Path: <java-user-return-13884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43010 invoked from network); 2 Apr 2005 09:38:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Apr 2005 09:38:07 -0000
Received: (qmail 43530 invoked by uid 500); 2 Apr 2005 09:38:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43507 invoked by uid 500); 2 Apr 2005 09:38:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43491 invoked by uid 99); 2 Apr 2005 09:38:04 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.202 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 02 Apr 2005 01:38:02 -0800
Received: by rproxy.gmail.com with SMTP id y7so880824rne
        for <java-user@lucene.apache.org>; Sat, 02 Apr 2005 01:38:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=FFAPFlYkCWxw00eELiy4b0yNuM13/PAN10gXMcg1x+JAiIr9JmzdtX1E1QLr77HBcuEDpuuDBD/o4L+kldY4TRW3HaUxuBTiB28bYiOGwCwMI+MB16U9T5zN0sz7zth1af/cZ6OzCX3pUWa1TyHvwnCrwC8HbDh6otveIx/5mKs=
Received: by 10.38.104.35 with SMTP id b35mr3309232rnc;
        Sat, 02 Apr 2005 01:38:00 -0800 (PST)
Received: by 10.38.104.11 with HTTP; Sat, 2 Apr 2005 01:38:00 -0800 (PST)
Message-ID: <88c6a6720504020138393ca64b@mail.gmail.com>
Date: Sat, 2 Apr 2005 03:38:00 -0600
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene on Linux problem...
In-Reply-To: <20050402082934.6853927E19A@ns2.pil.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <20050402082934.6853927E19A@ns2.pil.dk>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've also been getting this error very rarely on a production system
with lots of search queries.  The system is Fedora 1 using ext3.  It
happens in the call to IndexReader.getCurrentVersion(indexPath).  I
think it happens when the separate indexing process is running or has
just run (from a separate JVM).  Here is the stack trace:

Caused by: java.io.FileNotFoundException: /lucene/segments
(No such file or directory)
       at java.io.RandomAccessFile.open(Native Method)
       at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
       at
org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java:376)
       at org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
       at org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
       at
org.apache.lucene.index.SegmentInfos.readCurrentVersion(SegmentInfos.java:106)
       at
org.apache.lucene.index.IndexReader.getCurrentVersion(IndexReader.java:214)
       at
org.apache.lucene.index.IndexReader.getCurrentVersion(IndexReader.java:200)
       at
org.apache.lucene.index.IndexReader.getCurrentVersion(IndexReader.java:187)
[...]

On Apr 2, 2005 2:29 AM, Kristian Ottosen <ko@yawah.com> wrote:
> Hello,
> 
> I have really been pulling out hair for a while over this. The problem only
> occur using FSDirectory on some Linux system (some Debian, Suse and Redhat -
> but not all) and never under Windows, Solaris or Mac OS X.
> 
> What happens is that Lucene for some reason tries to read a segment which
> was just merged into another segment and therefore deleted and fails with a
> FileNotFoundException.
> 
> A few facts: Only a single thread is involved. If we use a RAM based Store
> (RAMDirectory) there is no problem at all. Also there seems to a problem
> related to locking using the lock files. We get timeouts even though there
> is only a single thread working on the index. Switching the compound file
> format on/off makes no difference. The problem may not appear immediately -
> but only after several thousand documents have been indexed in a row using a
> combination of IndexSearcher (check for duplicates) and IndexWriter (add
> document) operations.
> 
> I wonder if there is general problem running Lucene on top of some of the
> journaling file systems like ReiserFS or Ext3?
> 
> Any help or hints are greatly appreciated. Lucene is an excellent piece of
> software.
> 
> Best Regards
> Kristian
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 10:10:27 2005
Return-Path: <java-user-return-13885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45962 invoked from network); 2 Apr 2005 10:10:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Apr 2005 10:10:27 -0000
Received: (qmail 72236 invoked by uid 500); 2 Apr 2005 10:10:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71357 invoked by uid 500); 2 Apr 2005 10:10:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71344 invoked by uid 99); 2 Apr 2005 10:10:23 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from shared4.hardhathosting.com (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 02 Apr 2005 02:10:22 -0800
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j32AAMq18741
	for <java-user@lucene.apache.org>; Sat, 2 Apr 2005 04:10:22 -0600
Message-ID: <424E6F8A.4070408@getopt.org>
Date: Sat, 02 Apr 2005 12:10:18 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Plural Stemming
References: <20050402084057.57180.qmail@web26001.mail.ukl.yahoo.com>
In-Reply-To: <20050402084057.57180.qmail@web26001.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

mark harwood wrote:
> Just ran this method on 4500 words ending in "s" in my
> index and results looks good but I'm tempted to remove
> this line:
> 
>            !word.endsWith("ses") ) 
> 
> With it removed I saw 3 oddities moses=mose gases=gase
> viruses=viruse but I got 100+ extra stems that were
> OK:

Stemming doesn't have to produce intelligible words, it's the 
lemmatization that does. As long as the stem is unique, and all 
inflected forms of a single base form map to the same stem, it's ok.

In the case above the probability of another word producing the same 
stem "mose" is very low, so this stem is ok, too.

-- 
Best regards,
Andrzej Bialecki
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 10:40:34 2005
Return-Path: <java-user-return-13886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50612 invoked from network); 2 Apr 2005 10:40:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Apr 2005 10:40:34 -0000
Received: (qmail 94320 invoked by uid 500); 2 Apr 2005 10:40:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94293 invoked by uid 500); 2 Apr 2005 10:40:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94280 invoked by uid 99); 2 Apr 2005 10:40:27 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp005.mail.ukl.yahoo.com (HELO smtp005.mail.ukl.yahoo.com) (217.12.11.36)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 02 Apr 2005 02:40:26 -0800
Received: from unknown (HELO ?10.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp005.mail.ukl.yahoo.com with SMTP; 2 Apr 2005 10:40:23 -0000
Message-ID: <424E76A3.1020900@yahoo.co.uk>
Date: Sat, 02 Apr 2005 11:40:35 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Plural Stemming
References: <20050402084057.57180.qmail@web26001.mail.ukl.yahoo.com> <424E6F8A.4070408@getopt.org>
In-Reply-To: <424E6F8A.4070408@getopt.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

 >>Stemming doesn't have to produce intelligible words

True, yes this should be fine for general search requirements.
However, the code presented does make some attempt to produce 
intelligible words eg parties=party unlike Porter stemmer's parties=parti
Does this make it a "lemmatizer"?
This is a feature I find useful in my particular app which is a utility 
which discovers all the main collocations in an index eg "stag party". 
The utitility reads indexed terms so it is useful if they are 
intelligible because they can be used as suggested spelling corrections 
or possible query refinements. Used in this context, as a "lemmatizer" 
(if this is the right word) it doesn't  seem to be doing a bad job of 
producing generally readable words that can be presented back to the end 
user.

Cheers,
Mark




Andrzej Bialecki wrote:

> mark harwood wrote:
>
>> Just ran this method on 4500 words ending in "s" in my
>> index and results looks good but I'm tempted to remove
>> this line:
>>
>>            !word.endsWith("ses") )
>> With it removed I saw 3 oddities moses=mose gases=gase
>> viruses=viruse but I got 100+ extra stems that were
>> OK:
>
>
> Stemming doesn't have to produce intelligible words, it's the 
> lemmatization that does. As long as the stem is unique, and all 
> inflected forms of a single base form map to the same stem, it's ok.
>
> In the case above the probability of another word producing the same 
> stem "mose" is very low, so this stem is ok, too.
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 12:01:45 2005
Return-Path: <java-user-return-13887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64068 invoked from network); 2 Apr 2005 12:01:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Apr 2005 12:01:45 -0000
Received: (qmail 59203 invoked by uid 500); 2 Apr 2005 12:01:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59174 invoked by uid 500); 2 Apr 2005 12:01:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59160 invoked by uid 99); 2 Apr 2005 12:01:37 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from host.12.157.23.62.rev.coltfrance.com (HELO xmailserver.test) (62.23.157.12)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 02 Apr 2005 04:01:37 -0800
Received: from localhost (127.0.0.1:3907)
	by xmailserver.test with [XMail 1.20 ESMTP Server]
	id <S90C> for <java-user@lucene.apache.org> from <sven.duzont@laposte.net>;
	Sat, 2 Apr 2005 14:01:32 +0200
Date: Sat, 2 Apr 2005 14:01:32 +0200
From: Sven Duzont <sven.duzont@laposte.net>
X-Mailer: The Bat! (v3.0) UNREG / CD5BF9353B3B7091
Reply-To: Sven Duzont <sven.duzont@laposte.net>
X-Priority: 3 (Normal)
Message-ID: <571807357.20050402140132@laposte.net>
To: Erik Hatcher <java-user@lucene.apache.org>
Subject: Re[6]: Analyzer don't work with wildcard queries, snowball analyzer.
In-Reply-To: <4367f81557fe22108fce438e2b3c0b22@ehatchersolutions.com>
References: <424C0E62.10002@colaborativa.net>
 <297f128e646a94719e98205e5e42c4bc@ehatchersolutions.com>
 <773719179.20050401150918@keljob.com>
 <3e9becd32d830a737fc6da54ea0d1e36@ehatchersolutions.com>
 <1582287727.20050401180703@keljob.com>
 <4367f81557fe22108fce438e2b3c0b22@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/mixed;
 boundary="----------78D51031F9BB75F"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------------78D51031F9BB75F
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit

Hello,

EH> What about handling BooleanQuery's nested within a BooleanQuery?
EH> You'll need some recursion.
thanks for all hints, i've re-coded the method to handle nested
BooleanQueries

EH> Could you share that filter with the community?
Of course, the code is in the attachment

>>     // The first clause is required
>>     if(bClauses[0].prohibited != true)
>>       bClauses[0].required = true;
EH> Why do you flip the required flag like this?
On the search interface, near the keyword field, there is a combo
with 4 values :
- KW_MODE_OR      : "Search for at least one of the terms"
- KW_MODE_AND     : "Search for all the terms"
- KW_MODE_PHRASE  : "Search for exact phrase"
- KW_MODE_BOOLEAN : "Search using boolean query" (for advanced users)
  I flip the request field only when boolean expression is selected
  It force the first term to be required so the user will not
  need to specify the "+" or "AND" operator
  Maybe there is a more elegant way to do this ?
  The code is following

  Thanks
---
 Sven (is not a bersek)

*/-------------------------------- CODE ---------------------------/*
// mots clés contenus dans le cv
if (cvSearchBean.keywords != null &&
    cvSearchBean.keywords.length() != 0) {
  // "Tous les Mot clés" ou "Au moins un des mots clés"
  boolean required = false;
  if ((required = cvSearchBean.keywordModeId == KW_MODE_AND) ||
       cvSearchBean.keywordModeId == KW_MODE_OR) {
    final Query q = CreateCustomQuery(QueryParser.parse(
           cvSearchBean.keywords, FIELD_RESUME_BODY, analyzer));
    if (q instanceof BooleanQuery) {
      final BooleanClause[] terms = ((BooleanQuery) q).getClauses();
      for (int i = 0; i < terms.length; i++) {
        terms[i].prohibited = false;
        terms[i].required = required;
      }
    }
    bQuery.add(q, true, false);
  }
  // Expression exacte
  if (cvSearchBean.keywordModeId == KW_MODE_PHRASE) {
    final PhraseQuery q = new PhraseQuery();
    final TokenStream ts = analyzer.tokenStream(FIELD_RESUME_BODY,
                          new StringReader(cvSearchBean.keywords));
    Token token;
    while ((token = ts.next()) != null)
      q.add(new Term(FIELD_RESUME_BODY, token.termText()));
    bQuery.add(q, true, false);
  }
  // Expression booléenne
  if (cvSearchBean.keywordModeId == KW_MODE_BOOLEAN) {
    final Query query = QueryParser.parse(cvSearchBean.title,
                                        FIELD_RESUME_BODY, analyzer);
    if (query instanceof BooleanQuery) {
      final BooleanClause[] bClauses =
                              ((BooleanQuery) query).getClauses();
      if (bClauses[0].prohibited != true)
        bClauses[0].required = true;
    }
    bQuery.add(CreateCustomQuery(query), true, false);
  }

*/--------------------------END OF CODE --------------------------/*
      
      

EH> 	Erik


------------78D51031F9BB75F
Content-Type: text/plain; name="ISOLatin1AccentFilter.txt"
Content-transfer-encoding: base64
Content-Disposition: attachment; filename="ISOLatin1AccentFilter.txt"

cGFja2FnZSBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpczsNCg0KLyoqDQogKiBDb3B5cmln
aHQgMjAwNSBUaGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24NCiAqDQogKiBMaWNlbnNl
ZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2Ui
KTsNCiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug
d2l0aCB0aGUgTGljZW5zZS4NCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGlj
ZW5zZSBhdA0KICoNCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElD
RU5TRS0yLjANCiAqDQogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3Ig
YWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQogKiBkaXN0cmlidXRlZCB1bmRlciB0
aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KICogV0lU
SE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHBy
ZXNzIG9yIGltcGxpZWQuDQogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBs
YW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQogKiBsaW1pdGF0aW9ucyB1bmRl
ciB0aGUgTGljZW5zZS4NCiAqLw0KIA0KaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmFuYWx5
c2lzLlRva2VuOw0KaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmFuYWx5c2lzLlRva2VuRmls
dGVyOw0KaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmFuYWx5c2lzLlRva2VuU3RyZWFtOw0K
DQovKioNCiAqIEEgZmlsdGVyIHRoYXQgcmVwbGFjZSBhY2NlbnRlZCBjaGFyYWN0ZXJzIGlu
IHRoZSBJU08gTGF0aW4gMSBjaGFyYWN0ZXIgc2V0IGJ5DQogKiB0aGVpciB1bmFjY2VudGVk
IGVxdWl2YWxlbnQuIFRoZSBjYXNlIHdpbGwgbm90IGJlIGFsdGVyZWQuDQogKiA8cD4NCiAq
IEZvciBpbnN0YW5jZSwgJ+AnIHdpbGwgYmUgcmVwbGFjZSBieSAnYScuDQogKiA8cD4NCiAq
Lw0KcHVibGljIGNsYXNzIElTT0xhdGluMUFjY2VudEZpbHRlciBleHRlbmRzIFRva2VuRmls
dGVyIHsNCglwdWJsaWMgSVNPTGF0aW4xQWNjZW50RmlsdGVyKFRva2VuU3RyZWFtIGlucHV0
KSB7DQoJCXN1cGVyKGlucHV0KTsNCgl9DQoNCgkvKioNCgkgKiBUbyByZXBsYWNlIGFjY2Vu
dGVkIGNoYXJhY3RlcnMgYnkgdW5hY2NlbnRlZCBlcXVpdmFsZW50cy4NCgkgKi8NCglwdWJs
aWMgZmluYWwgVG9rZW4gbmV4dCgpIHRocm93cyBqYXZhLmlvLklPRXhjZXB0aW9uIHsNCgkJ
ZmluYWwgVG9rZW4gdCA9IGlucHV0Lm5leHQoKTsNCgkJaWYgKHQgPT0gbnVsbCkNCgkJCXJl
dHVybiBudWxsOw0KCQkvLyBSZXR1cm4gYSB0b2tlbiB3aXRoIGZpbHRlcmVkIGNoYXJhY3Rl
cnMuDQoJCXJldHVybiBuZXcgVG9rZW4oUmVtb3ZlQWNjZW50cyh0LnRlcm1UZXh0KCkpLCB0
LnN0YXJ0T2Zmc2V0KCksIHQuZW5kT2Zmc2V0KCksIHQudHlwZSgpKTsNCgl9DQoNCgkvKioN
CgkgKiBUbyByZXBsYWNlIGFjY2VudGVkIGNoYXJhY3RlcnMgaW4gYSBTdHJpbmcgYnkgdW5h
Y2NlbnRlZCBlcXVpdmFsZW50cy4NCgkgKi8NCglwdWJsaWMgZmluYWwgc3RhdGljIFN0cmlu
ZyBSZW1vdmVBY2NlbnRzKFN0cmluZyBpbnB1dCkgew0KCQlmaW5hbCBTdHJpbmdCdWZmZXIg
b3V0cHV0ID0gbmV3IFN0cmluZ0J1ZmZlcigpOw0KCQlmb3IgKGludCBpID0gMDsgaSA8IGlu
cHV0Lmxlbmd0aCgpOyBpKyspIHsNCgkJCXN3aXRjaCAoaW5wdXQuY2hhckF0KGkpKSB7DQoJ
CQkJY2FzZSAnXHUwMEMwJyA6IC8vIMANCgkJCQljYXNlICdcdTAwQzEnIDogLy8gwQ0KCQkJ
CWNhc2UgJ1x1MDBDMicgOiAvLyDCDQoJCQkJY2FzZSAnXHUwMEMzJyA6IC8vIMMNCgkJCQlj
YXNlICdcdTAwQzQnIDogLy8gxA0KCQkJCWNhc2UgJ1x1MDBDNScgOiAvLyDFDQoJCQkJCW91
dHB1dC5hcHBlbmQoIkEiKTsNCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSAnXHUwMEM2JyA6IC8v
IMYNCgkJCQkJb3V0cHV0LmFwcGVuZCgiQUUiKTsNCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSAn
XHUwMEM3JyA6IC8vIMcNCgkJCQkJb3V0cHV0LmFwcGVuZCgiQyIpOw0KCQkJCQlicmVhazsN
CgkJCQljYXNlICdcdTAwQzgnIDogLy8gyA0KCQkJCWNhc2UgJ1x1MDBDOScgOiAvLyDJDQoJ
CQkJY2FzZSAnXHUwMENBJyA6IC8vIMoNCgkJCQljYXNlICdcdTAwQ0InIDogLy8gyw0KCQkJ
CQlvdXRwdXQuYXBwZW5kKCJFIik7DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgJ1x1MDBDQycg
OiAvLyDMDQoJCQkJY2FzZSAnXHUwMENEJyA6IC8vIM0NCgkJCQljYXNlICdcdTAwQ0UnIDog
Ly8gzg0KCQkJCWNhc2UgJ1x1MDBDRicgOiAvLyDPDQoJCQkJCW91dHB1dC5hcHBlbmQoIkki
KTsNCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSAnXHUwMEQwJyA6IC8vINANCgkJCQkJb3V0cHV0
LmFwcGVuZCgiRCIpOw0KCQkJCQlicmVhazsNCgkJCQljYXNlICdcdTAwRDEnIDogLy8g0Q0K
CQkJCQlvdXRwdXQuYXBwZW5kKCJOIik7DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgJ1x1MDBE
MicgOiAvLyDSDQoJCQkJY2FzZSAnXHUwMEQzJyA6IC8vINMNCgkJCQljYXNlICdcdTAwRDQn
IDogLy8g1A0KCQkJCWNhc2UgJ1x1MDBENScgOiAvLyDVDQoJCQkJY2FzZSAnXHUwMEQ2JyA6
IC8vINYNCgkJCQljYXNlICdcdTAwRDgnIDogLy8g2A0KCQkJCQlvdXRwdXQuYXBwZW5kKCJP
Iik7DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgJ1x1MDE1MicgOiAvLyCMDQoJCQkJCW91dHB1
dC5hcHBlbmQoIk9FIik7DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgJ1x1MDBERScgOiAvLyDe
DQoJCQkJCW91dHB1dC5hcHBlbmQoIlRIIik7DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgJ1x1
MDBEOScgOiAvLyDZDQoJCQkJY2FzZSAnXHUwMERBJyA6IC8vINoNCgkJCQljYXNlICdcdTAw
REInIDogLy8g2w0KCQkJCWNhc2UgJ1x1MDBEQycgOiAvLyDcDQoJCQkJCW91dHB1dC5hcHBl
bmQoIlUiKTsNCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSAnXHUwMEREJyA6IC8vIN0NCgkJCQlj
YXNlICdcdTAxNzgnIDogLy8gnw0KCQkJCQlvdXRwdXQuYXBwZW5kKCJZIik7DQoJCQkJCWJy
ZWFrOw0KCQkJCWNhc2UgJ1x1MDBFMCcgOiAvLyDgDQoJCQkJY2FzZSAnXHUwMEUxJyA6IC8v
IOENCgkJCQljYXNlICdcdTAwRTInIDogLy8g4g0KCQkJCWNhc2UgJ1x1MDBFMycgOiAvLyDj
DQoJCQkJY2FzZSAnXHUwMEU0JyA6IC8vIOQNCgkJCQljYXNlICdcdTAwRTUnIDogLy8g5Q0K
CQkJCQlvdXRwdXQuYXBwZW5kKCJhIik7DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgJ1x1MDBF
NicgOiAvLyDmDQoJCQkJCW91dHB1dC5hcHBlbmQoImFlIik7DQoJCQkJCWJyZWFrOw0KCQkJ
CWNhc2UgJ1x1MDBFNycgOiAvLyDnDQoJCQkJCW91dHB1dC5hcHBlbmQoImMiKTsNCgkJCQkJ
YnJlYWs7DQoJCQkJY2FzZSAnXHUwMEU4JyA6IC8vIOgNCgkJCQljYXNlICdcdTAwRTknIDog
Ly8g6Q0KCQkJCWNhc2UgJ1x1MDBFQScgOiAvLyDqDQoJCQkJY2FzZSAnXHUwMEVCJyA6IC8v
IOsNCgkJCQkJb3V0cHV0LmFwcGVuZCgiZSIpOw0KCQkJCQlicmVhazsNCgkJCQljYXNlICdc
dTAwRUMnIDogLy8g7A0KCQkJCWNhc2UgJ1x1MDBFRCcgOiAvLyDtDQoJCQkJY2FzZSAnXHUw
MEVFJyA6IC8vIO4NCgkJCQljYXNlICdcdTAwRUYnIDogLy8g7w0KCQkJCQlvdXRwdXQuYXBw
ZW5kKCJpIik7DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgJ1x1MDBGMCcgOiAvLyDwDQoJCQkJ
CW91dHB1dC5hcHBlbmQoImQiKTsNCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSAnXHUwMEYxJyA6
IC8vIPENCgkJCQkJb3V0cHV0LmFwcGVuZCgibiIpOw0KCQkJCQlicmVhazsNCgkJCQljYXNl
ICdcdTAwRjInIDogLy8g8g0KCQkJCWNhc2UgJ1x1MDBGMycgOiAvLyDzDQoJCQkJY2FzZSAn
XHUwMEY0JyA6IC8vIPQNCgkJCQljYXNlICdcdTAwRjUnIDogLy8g9Q0KCQkJCWNhc2UgJ1x1
MDBGNicgOiAvLyD2DQoJCQkJY2FzZSAnXHUwMEY4JyA6IC8vIPgNCgkJCQkJb3V0cHV0LmFw
cGVuZCgibyIpOw0KCQkJCQlicmVhazsNCgkJCQljYXNlICdcdTAxNTMnIDogLy8gnA0KCQkJ
CQlvdXRwdXQuYXBwZW5kKCJvZSIpOw0KCQkJCQlicmVhazsNCgkJCQljYXNlICdcdTAwREYn
IDogLy8g3w0KCQkJCQlvdXRwdXQuYXBwZW5kKCJzcyIpOw0KCQkJCQlicmVhazsNCgkJCQlj
YXNlICdcdTAwRkUnIDogLy8g/g0KCQkJCQlvdXRwdXQuYXBwZW5kKCJ0aCIpOw0KCQkJCQli
cmVhazsNCgkJCQljYXNlICdcdTAwRjknIDogLy8g+Q0KCQkJCWNhc2UgJ1x1MDBGQScgOiAv
LyD6DQoJCQkJY2FzZSAnXHUwMEZCJyA6IC8vIPsNCgkJCQljYXNlICdcdTAwRkMnIDogLy8g
/A0KCQkJCQlvdXRwdXQuYXBwZW5kKCJ1Iik7DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgJ1x1
MDBGRCcgOiAvLyD9DQoJCQkJY2FzZSAnXHUwMEZGJyA6IC8vIP8NCgkJCQkJb3V0cHV0LmFw
cGVuZCgieSIpOw0KCQkJCQlicmVhazsNCgkJCQlkZWZhdWx0IDoNCgkJCQkJb3V0cHV0LmFw
cGVuZChpbnB1dC5jaGFyQXQoaSkpOw0KCQkJCQlicmVhazsNCgkJCX0NCgkJfQ0KCQlyZXR1
cm4gb3V0cHV0LnRvU3RyaW5nKCk7DQoJfQ0KfQ==


------------78D51031F9BB75F
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------------78D51031F9BB75F--


From java-user-return-13888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 14:13:26 2005
Return-Path: <java-user-return-13888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76833 invoked from network); 2 Apr 2005 14:13:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Apr 2005 14:13:26 -0000
Received: (qmail 55757 invoked by uid 500); 2 Apr 2005 14:13:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55730 invoked by uid 500); 2 Apr 2005 14:13:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55717 invoked by uid 99); 2 Apr 2005 14:13:13 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mailgate3.eduhi.at (HELO mailgate3.eduhi.at) (193.170.67.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 02 Apr 2005 06:13:12 -0800
Received: from localhost (localhost [127.0.0.1])
	by mailgate3.eduhi.at (Postfix) with ESMTP id 0095C2B269
	for <java-user@lucene.apache.org>; Sat,  2 Apr 2005 16:13:09 +0200 (CEST)
Received: from mail.eduhi.at (mail.asn-linz.ac.at [172.27.2.5])
	by mailgate3.eduhi.at (Postfix) with ESMTP id CB7012B246
	for <java-user@lucene.apache.org>; Sat,  2 Apr 2005 16:13:08 +0200 (CEST)
Received: from [192.168.0.117] ([10.221.5.120]) by mail.eduhi.at with Microsoft SMTPSVC(5.0.2172.1);
	 Sat, 2 Apr 2005 16:13:06 +0200
Message-ID: <424EA872.5030100@eduhi.at>
Date: Sat, 02 Apr 2005 16:13:06 +0200
From: Gusenbauer Stefan <gusenbauer@eduhi.at>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Can not delete cfs file
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 02 Apr 2005 14:13:06.0120 (UTC) FILETIME=[1707D480:01C5378E]
X-Spam-Checker-Version: SpamAssassin 2.64 (2004-01-11) on mailgate3.eduhi.at
X-Spam-Level: *
X-Spam-Status: No, hits=1.4 required=5.8 tests=EH_b_llwords,EH_b_lwords,
	EH_b_neg_forgetme,EH_f_whitelist5,UNWANTED_LANGUAGE_BODY autolearn=no 
	version=2.64
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm writing a little application and therefore I've implemented unit 
tests. There i've a method to test my removeindex method, the problem is 
can't delete the cfs file. When i try to delete it manually it works. 
But within the tests the method cannot delete this file. I've searched 
through my code but IndexWriter is always closed. I've read in another 
java forum that it is possible that are streams on this file open. Is it 
possible to tell lucene or better to force lucene, that it should close 
all streams. segments and deleteable i can delete without any problems. 
I've also tried to force unlock but this makes no changes to the result.
thanks
stefan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 14:33:04 2005
Return-Path: <java-user-return-13889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79801 invoked from network); 2 Apr 2005 14:33:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Apr 2005 14:33:04 -0000
Received: (qmail 77278 invoked by uid 500); 2 Apr 2005 14:32:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77256 invoked by uid 500); 2 Apr 2005 14:32:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77243 invoked by uid 99); 2 Apr 2005 14:32:57 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mailgate3.eduhi.at (HELO mailgate3.eduhi.at) (193.170.67.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 02 Apr 2005 06:32:57 -0800
Received: from localhost (localhost [127.0.0.1])
	by mailgate3.eduhi.at (Postfix) with ESMTP id 67E6D2B231
	for <java-user@lucene.apache.org>; Sat,  2 Apr 2005 16:32:56 +0200 (CEST)
Received: from mail.eduhi.at (mail.asn-linz.ac.at [172.27.2.5])
	by mailgate3.eduhi.at (Postfix) with ESMTP id 509E02B207
	for <java-user@lucene.apache.org>; Sat,  2 Apr 2005 16:32:56 +0200 (CEST)
Received: from [192.168.0.117] ([10.221.5.120]) by mail.eduhi.at with Microsoft SMTPSVC(5.0.2172.1);
	 Sat, 2 Apr 2005 16:32:53 +0200
Message-ID: <424EAD15.2080500@eduhi.at>
Date: Sat, 02 Apr 2005 16:32:53 +0200
From: Gusenbauer Stefan <gusenbauer@eduhi.at>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Can not delete cfs file
References: <424EA872.5030100@eduhi.at>
In-Reply-To: <424EA872.5030100@eduhi.at>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 02 Apr 2005 14:32:53.0542 (UTC) FILETIME=[DACA0C60:01C53790]
X-Spam-Checker-Version: SpamAssassin 2.64 (2004-01-11) on mailgate3.eduhi.at
X-Spam-Level: *
X-Spam-Status: No, hits=1.7 required=5.8 tests=EH_b_llwords,EH_b_lwords,
	EH_b_neg_forgetme,EH_f_whitelist5,EH_u_spam_lllow,
	UNWANTED_LANGUAGE_BODY autolearn=no version=2.64
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Gusenbauer Stefan wrote:

> I'm writing a little application and therefore I've implemented unit 
> tests. There i've a method to test my removeindex method, the problem 
> is can't delete the cfs file. When i try to delete it manually it 
> works. But within the tests the method cannot delete this file. I've 
> searched through my code but IndexWriter is always closed. I've read 
> in another java forum that it is possible that are streams on this 
> file open. Is it possible to tell lucene or better to force lucene, 
> that it should close all streams. segments and deleteable i can delete 
> without any problems. I've also tried to force unlock but this makes 
> no changes to the result.
> thanks
> stefan
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
sorry just a few google searches later i found a fine workaround for me
the original is found at 
http://forum.java.sun.com/thread.jspa?threadID=158689&messageID=2033384 
by Mike 0'Connor. I've made it static and singleton and added a boolean 
return value which is true if the file is really deleted. But it would 
be nice if any of you know why there are open streams or handles on the 
cfs file? Maybe it is a lucene bug?
thanks
Stefan
public class FileDeleter {

    private FileDeleter() {};
    public static boolean deleteFile(File file) {
        deleteFile(file,10,0);
        if(!file.exists()) {
            return true;
        }//ifs
        else {
            return false;
        }//else
      }
      private static void deleteFile(File file, int tries, int tried) {
        if (!file.delete()) {
          System.gc();  // In case the JVM itself thinks it has a file 
handle
          if (!file.delete()) {
            try {  // Now wait and see if it goes away
                Thread.sleep(200);
            }//try
            catch (InterruptedException e) {}
            // Potential perma-loop avoided with counter
            // if still there after specified tries, give
            // up, you've got another problem
            if( tried < tries ){
              deleteFile(file,tries,tried++);
            }//if
          }//if
        }//if
      }
}


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 15:43:08 2005
Return-Path: <java-user-return-13890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88384 invoked from network); 2 Apr 2005 15:43:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Apr 2005 15:43:08 -0000
Received: (qmail 26220 invoked by uid 500); 2 Apr 2005 15:43:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25338 invoked by uid 500); 2 Apr 2005 15:43:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25324 invoked by uid 99); 2 Apr 2005 15:43:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 02 Apr 2005 07:43:03 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 19A7F13E2121; Sat,  2 Apr 2005 10:43:01 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id DC56613E2006
	for <java-user@lucene.apache.org>; Sat,  2 Apr 2005 10:42:46 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <424EA872.5030100@eduhi.at>
References: <424EA872.5030100@eduhi.at>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <0fd436753dd768a4ed74727306861e45@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Can not delete cfs file
Date: Sat, 2 Apr 2005 10:42:41 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Could you provide your test case code as well as the full stack trace 
of the error you're receiving?

	Erik

On Apr 2, 2005, at 9:13 AM, Gusenbauer Stefan wrote:

> I'm writing a little application and therefore I've implemented unit 
> tests. There i've a method to test my removeindex method, the problem 
> is can't delete the cfs file. When i try to delete it manually it 
> works. But within the tests the method cannot delete this file. I've 
> searched through my code but IndexWriter is always closed. I've read 
> in another java forum that it is possible that are streams on this 
> file open. Is it possible to tell lucene or better to force lucene, 
> that it should close all streams. segments and deleteable i can delete 
> without any problems. I've also tried to force unlock but this makes 
> no changes to the result.
> thanks
> stefan
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 03 13:22:22 2005
Return-Path: <java-user-return-13891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42895 invoked from network); 3 Apr 2005 13:22:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Apr 2005 13:22:22 -0000
Received: (qmail 52235 invoked by uid 500); 3 Apr 2005 13:22:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52206 invoked by uid 500); 3 Apr 2005 13:22:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52192 invoked by uid 99); 3 Apr 2005 13:22:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 03 Apr 2005 06:22:13 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 277E613E2008; Sun,  3 Apr 2005 09:22:08 -0400 (EDT)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 444CC13E2007
	for <java-user@lucene.apache.org>; Sun,  3 Apr 2005 09:21:44 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <571807357.20050402140132@laposte.net>
References: <424C0E62.10002@colaborativa.net> <297f128e646a94719e98205e5e42c4bc@ehatchersolutions.com> <773719179.20050401150918@keljob.com> <3e9becd32d830a737fc6da54ea0d1e36@ehatchersolutions.com> <1582287727.20050401180703@keljob.com> <4367f81557fe22108fce438e2b3c0b22@ehatchersolutions.com> <571807357.20050402140132@laposte.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <4b61beedbd68b73b0d3c7f4da7fb41bb@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Re[6]: Analyzer don't work with wildcard queries, snowball analyzer.
Date: Sun, 3 Apr 2005 09:21:36 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 2, 2005, at 7:01 AM, Sven Duzont wrote:
> EH> Could you share that filter with the community?
> Of course, the code is in the attachment

Thanks for sharing that!

Would you be interested in donating that to the contrib area for=20
analyzers?  The topic of normalizing accented characters has come up=20
often lately.   I noticed you already put the Apache license at the top=20=

of the code.

>>>     // The first clause is required
>>>     if(bClauses[0].prohibited !=3D true)
>>>       bClauses[0].required =3D true;
> EH> Why do you flip the required flag like this?
> On the search interface, near the keyword field, there is a combo
> with 4 values :
> - KW_MODE_OR      : "Search for at least one of the terms"
> - KW_MODE_AND     : "Search for all the terms"
> - KW_MODE_PHRASE  : "Search for exact phrase"
> - KW_MODE_BOOLEAN : "Search using boolean query" (for advanced users)
>   I flip the request field only when boolean expression is selected
>   It force the first term to be required so the user will not
>   need to specify the "+" or "AND" operator
>   Maybe there is a more elegant way to do this ?

When using QueryParser, you can set the default operator, which is=20
normally OR.  It will handle setting the first (and every) clause=20
appropriately.  You'll need to instantiate an instance of QueryParser=20
to set that flag (see javadocs for details).

	Erik


>   // Expression bool=E9enne
>   if (cvSearchBean.keywordModeId =3D=3D KW_MODE_BOOLEAN) {
>     final Query query =3D QueryParser.parse(cvSearchBean.title,
>                                         FIELD_RESUME_BODY, analyzer);
>     if (query instanceof BooleanQuery) {
>       final BooleanClause[] bClauses =3D
>                               ((BooleanQuery) query).getClauses();
>       if (bClauses[0].prohibited !=3D true)
>         bClauses[0].required =3D true;
>     }
>     bQuery.add(CreateCustomQuery(query), true, false);
>   }


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 03 16:32:02 2005
Return-Path: <java-user-return-13892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70127 invoked from network); 3 Apr 2005 16:32:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Apr 2005 16:32:02 -0000
Received: (qmail 18039 invoked by uid 500); 3 Apr 2005 16:31:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18019 invoked by uid 500); 3 Apr 2005 16:31:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18004 invoked by uid 99); 3 Apr 2005 16:31:55 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from host.12.157.23.62.rev.coltfrance.com (HELO xmailserver.test) (62.23.157.12)
  by apache.org (qpsmtpd/0.28) with SMTP; Sun, 03 Apr 2005 09:31:54 -0700
Received: from localhost (127.0.0.1:4196)
	by xmailserver.test with [XMail 1.20 ESMTP Server]
	id <S90D> for <java-user@lucene.apache.org> from <sven.duzont@laposte.net>;
	Sun, 3 Apr 2005 18:31:48 +0200
Date: Sun, 3 Apr 2005 18:31:48 +0200
From: Sven Duzont <sven.duzont@laposte.net>
X-Mailer: The Bat! (v3.0) UNREG / CD5BF9353B3B7091
Reply-To: Sven Duzont <sven.duzont@laposte.net>
X-Priority: 3 (Normal)
Message-ID: <1756833760.20050403183148@laposte.net>
To: Erik Hatcher <java-user@lucene.apache.org>
Subject: Re[8]: Analyzer don't work with wildcard queries, snowball analyzer.
In-Reply-To: <4b61beedbd68b73b0d3c7f4da7fb41bb@ehatchersolutions.com>
References: <424C0E62.10002@colaborativa.net>
 <297f128e646a94719e98205e5e42c4bc@ehatchersolutions.com>
 <773719179.20050401150918@keljob.com>
 <3e9becd32d830a737fc6da54ea0d1e36@ehatchersolutions.com>
 <1582287727.20050401180703@keljob.com>
 <4367f81557fe22108fce438e2b3c0b22@ehatchersolutions.com>
 <571807357.20050402140132@laposte.net>
 <4b61beedbd68b73b0d3c7f4da7fb41bb@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

EH> Thanks for sharing that!
EH> Would you be interested in donating that to the contrib area for
EH> analyzers?  The topic of normalizing accented characters has come up
EH> often lately.   I noticed you already put the Apache license at the top
EH> of the code.

No problem, it was intended for the sandbox.

EH> When using QueryParser, you can set the default operator, which is
EH> normally OR.  It will handle setting the first (and every) clause 
EH> appropriately.  You'll need to instantiate an instance of QueryParser
EH> to set that flag (see javadocs for details).

Yes, that what i was first thinking of, but they (the end users) wanted
all clauses except the first to be handled by the 'OR' operator.
I'll try to convince them that it will make my (and their) life easier
if the default operator for all clauses is 'AND' ;)

Regards,

   Sven



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 03 19:33:16 2005
Return-Path: <java-user-return-13893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46201 invoked from network); 3 Apr 2005 19:33:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Apr 2005 19:33:16 -0000
Received: (qmail 42635 invoked by uid 500); 3 Apr 2005 19:33:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42608 invoked by uid 500); 3 Apr 2005 19:33:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42595 invoked by uid 99); 3 Apr 2005 19:33:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from lilzmailso02.liwest.at (HELO lilzmailso02.liwest.at) (212.33.55.24)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 03 Apr 2005 12:33:08 -0700
Received: from cm66-207.liwest.at ([212.241.66.207] helo=[192.168.0.4])
	by lilzmailso02.liwest.at with esmtp (Exim 4.24)
	id 1DIAqO-0002nO-1D
	for java-user@lucene.apache.org; Sun, 03 Apr 2005 21:33:12 +0200
Message-ID: <425044F0.1050805@eduhi.at>
Date: Sun, 03 Apr 2005 21:33:04 +0200
From: Gusenbauer Stefan <gusenbauer@eduhi.at>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Can not delete cfs file
References: <424EA872.5030100@eduhi.at> <0fd436753dd768a4ed74727306861e45@ehatchersolutions.com>
In-Reply-To: <0fd436753dd768a4ed74727306861e45@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

> Could you provide your test case code as well as the full stack trace 
> of the error you're receiving?
>
>     Erik
>
> On Apr 2, 2005, at 9:13 AM, Gusenbauer Stefan wrote:
>
>> I'm writing a little application and therefore I've implemented unit 
>> tests. There i've a method to test my removeindex method, the problem 
>> is can't delete the cfs file. When i try to delete it manually it 
>> works. But within the tests the method cannot delete this file. I've 
>> searched through my code but IndexWriter is always closed. I've read 
>> in another java forum that it is possible that are streams on this 
>> file open. Is it possible to tell lucene or better to force lucene, 
>> that it should close all streams. segments and deleteable i can 
>> delete without any problems. I've also tried to force unlock but this 
>> makes no changes to the result.
>> thanks
>> stefan
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
Sorry for beeing late!
Only the test code wouldn't be very useful for understanding because 
there are a lot of dependencies in the other code. I can explain what I 
do: I open an IndexWrite close it then open an IndexReader close it and 
open an IndexWriter then close it. Then i try to delete the files from 
the index and only the cfs file i cannot delete. I try to get out the 
code which is involved later on. I get no failure message only the
that the fail could not be removed.
Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 03 21:09:01 2005
Return-Path: <java-user-return-13894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58489 invoked from network); 3 Apr 2005 21:09:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Apr 2005 21:09:01 -0000
Received: (qmail 20777 invoked by uid 500); 3 Apr 2005 21:08:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20750 invoked by uid 500); 3 Apr 2005 21:08:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20737 invoked by uid 99); 3 Apr 2005 21:08:58 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 03 Apr 2005 14:08:57 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 32B155B779; Sun,  3 Apr 2005 14:08:53 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 319057F45E
	for <java-user@lucene.apache.org>; Sun,  3 Apr 2005 14:08:53 -0700 (PDT)
Date: Sun, 3 Apr 2005 14:08:53 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: FilteredQuery and Boolean AND
In-Reply-To: <Pine.LNX.4.58.0504011644070.20757@hal.rescomp.berkeley.edu>
Message-ID: <Pine.LNX.4.58.0504031408210.18839@hal.rescomp.berkeley.edu>
References: <78A2AFE317F5AD48B823BE740D4A815224070D@flexbe01.crcpress.com>
 <7fb34891eafc72c0d564425a08f6dc4b@ehatchersolutions.com>
 <Pine.LNX.4.58.0504011644070.20757@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Bugged...

http://issues.apache.org/bugzilla/show_bug.cgi?id=34279

: : > BooleanQuery q2 = new BooleanQuery();
: : > TermQuery tq = new TermQuery(new Term("all_entries", "y"));
: : > FilteredQuery fq = new FilteredQuery(tq, ft);
: : > FilteredQuery fq2 = new FilteredQuery(tq, ft2);
: : > q2.add(fq, false, false);
: : > q2.add(fq2, false, false);


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 03 22:42:51 2005
Return-Path: <java-user-return-13895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67128 invoked from network); 3 Apr 2005 22:42:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Apr 2005 22:42:51 -0000
Received: (qmail 89986 invoked by uid 500); 3 Apr 2005 22:42:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89955 invoked by uid 500); 3 Apr 2005 22:42:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89942 invoked by uid 99); 3 Apr 2005 22:42:45 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME,TO_ADDRESS_EQ_REAL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from shim1.irt.drexel.edu (HELO shim1.irt.drexel.edu) (144.118.29.71)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 03 Apr 2005 15:42:44 -0700
Received: from conversion-daemon.shim1.irt.drexel.edu by shim1.irt.drexel.edu
 (iPlanet Messaging Server 5.2 HotFix 1.17 (built Jun 23 2003))
 id <0IEE007016KKSE@shim1.irt.drexel.edu> for java-user@lucene.apache.org; Sun,
 03 Apr 2005 18:42:41 -0400 (EDT)
Received: from drexel.edu ([192.168.5.136])
 by shim1.irt.drexel.edu (iPlanet Messaging Server 5.2 HotFix 1.17 (built Jun
 23 2003)) with ESMTP id <0IEE00K186YPRK@shim1.irt.drexel.edu> for
 java-user@lucene.apache.org; Sun, 03 Apr 2005 18:40:01 -0400 (EDT)
Received: from [192.168.5.137] by mail1.prvt.drexel.edu (mshttpd); Sun,
 03 Apr 2005 18:40:01 -0400
Date: Sun, 03 Apr 2005 18:40:01 -0400
From: xx28@drexel.edu
Subject: ant problem
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Message-id: <10c938c10c941f.10c941f10c938c@drexel.edu>
MIME-version: 1.0
X-Mailer: iPlanet Messenger Express 5.2 HotFix 1.17 (built Jun 23 2003)
Content-type: text/plain; charset=us-ascii
Content-language: en
Content-transfer-encoding: 7BIT
Content-disposition: inline
X-Accept-Language: en
Priority: normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello -

I installed apache-ant-1.6.3beta1 and set 

export ANT_HOME=..../ant
export PATH=${PATH}:${ANT_HOME}/bin

But when I modified lucene src code and used ant, I got the following error:

Buildfile: build.xml

BUILD FAILED
java.lang.NoClassDefFoundError: org/apache/xerces/validators/schema/SchemaMessageProvider
        at org.apache.xerces.framework.XMLParser.<clinit>(XMLParser.java:179)
        at org.apache.xerces.jaxp.SAXParserImpl.<init>(SAXParserImpl.java:97)
        at org.apache.xerces.jaxp.SAXParserFactoryImpl.newSAXParser(SAXParserFactoryImpl.java:87)
        at org.apache.tools.ant.util.JAXPUtils.newSAXParser(JAXPUtils.java:205)
        at org.apache.tools.ant.util.JAXPUtils.getNamespaceXMLReader(JAXPUtils.java:163)
        at org.apache.tools.ant.helper.ProjectHelper2.parse(ProjectHelper2.java:187)
        at org.apache.tools.ant.helper.ProjectHelper2.parse(ProjectHelper2.java:134)
        at org.apache.tools.ant.ProjectHelper.configureProject(ProjectHelper.java:91)
        at org.apache.tools.ant.Main.runBuild(Main.java:653)
        at org.apache.tools.ant.Main.startAnt(Main.java:187)
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:246)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:67)

Total time: 0 seconds
java.lang.NoClassDefFoundError: org/apache/xerces/validators/schema/SchemaMessageProvider
        at org.apache.xerces.framework.XMLParser.<clinit>(XMLParser.java:179)
        at org.apache.xerces.jaxp.SAXParserImpl.<init>(SAXParserImpl.java:97)
        at org.apache.xerces.jaxp.SAXParserFactoryImpl.newSAXParser(SAXParserFactoryImpl.java:87)
        at org.apache.tools.ant.util.JAXPUtils.newSAXParser(JAXPUtils.java:205)
        at org.apache.tools.ant.util.JAXPUtils.getNamespaceXMLReader(JAXPUtils.java:163)
        at org.apache.tools.ant.helper.ProjectHelper2.parse(ProjectHelper2.java:187)
        at org.apache.tools.ant.helper.ProjectHelper2.parse(ProjectHelper2.java:134)
        at org.apache.tools.ant.ProjectHelper.configureProject(ProjectHelper.java:91)
        at org.apache.tools.ant.Main.runBuild(Main.java:653)
        at org.apache.tools.ant.Main.startAnt(Main.java:187)
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:246)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:67)
org/apache/xerces/validators/schema/SchemaMessageProvider
 
Someone please shed some lights here....

Thanks,



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 08:21:22 2005
Return-Path: <java-user-return-13896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55813 invoked from network); 4 Apr 2005 08:21:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 08:21:22 -0000
Received: (qmail 46561 invoked by uid 500); 4 Apr 2005 08:21:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46535 invoked by uid 500); 4 Apr 2005 08:21:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46521 invoked by uid 99); 4 Apr 2005 08:21:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 01:21:14 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 17A2313E2007; Mon,  4 Apr 2005 04:21:10 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 6AA3713E2007
	for <java-user@lucene.apache.org>; Mon,  4 Apr 2005 04:21:01 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <425044F0.1050805@eduhi.at>
References: <424EA872.5030100@eduhi.at> <0fd436753dd768a4ed74727306861e45@ehatchersolutions.com> <425044F0.1050805@eduhi.at>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <19e31d6f76a3d3bc0e9c69ec78ae760f@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Can not delete cfs file
Date: Mon, 4 Apr 2005 04:20:59 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 3, 2005, at 3:33 PM, Gusenbauer Stefan wrote:
> Sorry for beeing late!
> Only the test code wouldn't be very useful for understanding because 
> there are a lot of dependencies in the other code. I can explain what 
> I do: I open an IndexWrite close it then open an IndexReader close it 
> and open an IndexWriter then close it. Then i try to delete the files 
> from the index and only the cfs file i cannot delete. I try to get out 
> the code which is involved later on. I get no failure message only the
> that the fail could not be removed.

This is on Windows, I presume?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 08:25:56 2005
Return-Path: <java-user-return-13897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57704 invoked from network); 4 Apr 2005 08:25:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 08:25:56 -0000
Received: (qmail 52146 invoked by uid 500); 4 Apr 2005 08:25:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52122 invoked by uid 500); 4 Apr 2005 08:25:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52103 invoked by uid 99); 4 Apr 2005 08:25:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 01:25:48 -0700
Received: from [81.168.89.246] (helo=[192.168.1.28])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1DIMu0-0006rm-00
	for <java-user@lucene.apache.org>; Mon, 04 Apr 2005 09:25:44 +0100
Subject: Re: Lucene on Linux problem...
From: Miles Barr <miles@runtime-collective.com>
To: Lucene User <java-user@lucene.apache.org>
In-Reply-To: <20050402082934.6853927E19A@ns2.pil.dk>
References: <20050402082934.6853927E19A@ns2.pil.dk>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Mon, 04 Apr 2005 09:24:50 +0100
Message-Id: <1112603090.15511.45.camel@saturn>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.4 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sat, 2005-04-02 at 10:29 +0200, Kristian Ottosen wrote:
> I wonder if there is general problem running Lucene on top of some of the
> journaling file systems like ReiserFS or Ext3?

I haven't had any problems running Lucene on either of those file
systems. I've done updates to the index while people are still searching
and it all worked fine.

> The problem may not appear immediately - but only after several
> thousand documents have been indexed in a row using a combination of
> IndexSearcher (check for duplicates) and IndexWriter (add document)
> operations.

Are you deleting the duplicates as you find them? i.e. are you closing
and opening reader/writers all the time? If you are, besides
recommending switching to batch updates, I suggest being really thorough
with closing everything, e.g.

IndexReader reader = null;
IndexWriter writer = null;

try {
    reader = IndexReader.open(/* Path to index */);

    ... do the deletes ...

    reader.close();
    reader = null;

    writer = new IndexWriter(index, /* Your analyzer */, false);

    ... do the deletes ....

    writer.optimize();
    writer.close();
    writer = null;
}
catch (IOException e) {
    ... do any error processing ...
}
finally {
    // We can do both these closes in the same finally block because if
    // reader is not null then writer is null, so we don't need to worry
    // about reader.close() throwing another IOException
    if (reader != null) {
        reader.close();
        reader = null;
    }

    if (writer != null) {
        writer.optimize();
        writer.close();
        writer = null;
    }
}



-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 08:35:13 2005
Return-Path: <java-user-return-13898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60267 invoked from network); 4 Apr 2005 08:35:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 08:35:13 -0000
Received: (qmail 60998 invoked by uid 500); 4 Apr 2005 08:35:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60967 invoked by uid 500); 4 Apr 2005 08:35:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60950 invoked by uid 99); 4 Apr 2005 08:35:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from lilzmailso01.liwest.at (HELO lilzmailso01.liwest.at) (212.33.55.23)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 01:35:05 -0700
Received: from cm66-207.liwest.at ([212.241.66.207] helo=[192.168.0.4])
	by lilzmailso01.liwest.at with esmtp (Exim 4.24)
	id 1DIN2z-0005DI-Ff
	for java-user@lucene.apache.org; Mon, 04 Apr 2005 10:35:01 +0200
Message-ID: <4250FC35.2080204@eduhi.at>
Date: Mon, 04 Apr 2005 10:35:01 +0200
From: Gusenbauer Stefan <gusenbauer@eduhi.at>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Can not delete cfs file
References: <424EA872.5030100@eduhi.at> <0fd436753dd768a4ed74727306861e45@ehatchersolutions.com> <425044F0.1050805@eduhi.at> <19e31d6f76a3d3bc0e9c69ec78ae760f@ehatchersolutions.com>
In-Reply-To: <19e31d6f76a3d3bc0e9c69ec78ae760f@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

>
> On Apr 3, 2005, at 3:33 PM, Gusenbauer Stefan wrote:
>
>> Sorry for beeing late!
>> Only the test code wouldn't be very useful for understanding because
>> there are a lot of dependencies in the other code. I can explain what
>> I do: I open an IndexWrite close it then open an IndexReader close it
>> and open an IndexWriter then close it. Then i try to delete the files
>> from the index and only the cfs file i cannot delete. I try to get
>> out the code which is involved later on. I get no failure message
>> only the
>> that the fail could not be removed.
>
>
> This is on Windows, I presume?
>
>     Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
Yes, I think it is a java with windows problem because since a use call
System.gc before deleting the file the streams are released.
Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 08:54:02 2005
Return-Path: <java-user-return-13899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67541 invoked from network); 4 Apr 2005 08:54:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 08:54:02 -0000
Received: (qmail 86980 invoked by uid 500); 4 Apr 2005 08:53:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86933 invoked by uid 500); 4 Apr 2005 08:53:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86890 invoked by uid 99); 4 Apr 2005 08:53:27 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=HTML_60_70,HTML_MESSAGE,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 04 Apr 2005 01:53:25 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IEF06X00.LBE for <java-user@lucene.apache.org>; Mon, 4
          Apr 2005 14:41:21 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <java-user@lucene.apache.org>
Subject: EXCEPTION   LUCENE 1.4.3  +  LUKE
Date: Mon, 4 Apr 2005 14:31:30 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKKEMECCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----=_NextPart_000_0005_01C53922.FDE03DD0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0005_01C53922.FDE03DD0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0006_01C53922.FDE03DD0"


------=_NextPart_001_0006_01C53922.FDE03DD0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit



 Hi guys

Apologies..........



Using a MultiFieldQueryParser    for a query like below for a CUSTOM SEARCH

(+(+KEY3:camera
+KEY3:photo) -KEY3:accessories -KEY3:studio -KEY3:cleaners -KEY3:film -KEY3:
filters -KEY3:flashes -KEY3:lenses -KEY3:lighting -KEY3:tripods -KEY3:cables
 -KEY3:digital -KEY3:batteries -KEY3:telescope -KEY3:adapters -KEY3:printers
 -KEY3:quality -KEY3:paper -KEY3:blank -KEY3:media -KEY3:cords -KEY3:cases -
KEY3:bags -KEY3:darkroom -KEY3:supplies -KEY3:light -KEY3:meters -KEY3:under
water -KEY3:photography -KEY3:other -KEY3:frames -KEY3:memory -KEY3:cards -K
EY3:readers -KEY3:slr -KEY3:printer -KEY3:chargers -KEY3:power -KEY3:card -K
EY3:slot -KEY3:barlow -KEY3:dew -KEY3:caps -KEY3:diagonals -KEY3:electronic 
-KEY3:drives -KEY3:erecting -KEY3:prisms -KEY3:eyepieces -KEY3:finder -KEY3:
scopes -KEY3:guiders -KEY3:motor -KEY3:mounts -KEY3:sky -KEY3:maps -KEY3:vie
wfinders -KEY3:camcorder -KEY3:inks -KEY3:toners -KEY3:creative -KEY3:kits -
KEY3:papers)

is raising an BooleanQuery Exception , Even after using
BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE);

java.lang.IndexOutOfBoundsException: More than 32 required/prohibited
clauses in query.
at org.apache.lucene.search.BooleanScorer.add(BooleanScorer.java:61)
at
org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java
:167)
at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
at org.apache.lucene.search.Hits.<init>(Hits.java:43)



But when I use the same  query with  LUKE (v0.6), Luke is able to  display
the Hit's

Somebody Please  tell me the Reason

System Spec for Indexing /Searching
1) O/s Win2000.
2) Lucene 1.4.3.
3) Java 1.4.3.

Luke Spec
1)Lukeall.jar.



Thx in advance


WITH WARM REGARDS
HAVE A NICE DAY
[ N.S.KARTHIK]


------=_NextPart_001_0006_01C53922.FDE03DD0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<STYLE><!-- body, P.msoNormal, LI.msoNormal, PRE, BLOCKQUOTE, a, MENU, =
dd, UL, DT { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } dir, ADDRESS, h1, h2, h3, h4, h5, =
h6, HR { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } --></STYLE>

<META content=3D"MSHTML 6.00.2600.0" name=3DGENERATOR></HEAD>
<BODY id=3DridBody>
<P><STRONG><FONT face=3DVerdana size=3D2></FONT></STRONG>&nbsp;</P>
<P><SPAN class=3D093105108-04042005><STRONG><FONT face=3DVerdana =
size=3D2>&nbsp;Hi=20
guys</FONT></STRONG></SPAN></P>
<P><SPAN class=3D093105108-04042005><STRONG><FONT face=3DVerdana=20
size=3D2>Apologies..........</FONT></STRONG></SPAN></P>
<P><SPAN class=3D093105108-04042005><STRONG><FONT face=3DVerdana=20
size=3D2></FONT></STRONG></SPAN>&nbsp;</P>
<P><SPAN class=3D093105108-04042005><STRONG><FONT face=3DVerdana =
size=3D2>Using a=20
<FONT color=3D#0000c0 =
size=3D2>MultiFieldQueryParser&nbsp;&nbsp;&nbsp;&nbsp;for a=20
query like below for a CUSTOM =
SEARCH</FONT></FONT></STRONG></SPAN></P><SPAN=20
class=3D093105108-04042005><STRONG><FONT><FONT color=3D#0000c0><FONT=20
color=3D#0000ff><FONT face=3DVerdana size=3D2><FONT color=3D#0000ff =
size=3D2>
<P>(+(+KEY3:camera +KEY3:photo) -KEY3:accessories -KEY3:studio =
-KEY3:cleaners=20
-KEY3:film -KEY3:filters -KEY3:flashes -KEY3:lenses -KEY3:lighting =
-KEY3:tripods=20
-KEY3:cables -KEY3:digital -KEY3:batteries -KEY3:telescope =
-KEY3:adapters=20
-KEY3:printers -KEY3:quality -KEY3:paper -KEY3:blank -KEY3:media =
-KEY3:cords=20
-KEY3:cases -KEY3:bags -KEY3:darkroom -KEY3:supplies -KEY3:light =
-KEY3:meters=20
-KEY3:underwater -KEY3:photography -KEY3:other -KEY3:frames -KEY3:memory =

-KEY3:cards -KEY3:readers -KEY3:slr -KEY3:printer -KEY3:chargers =
-KEY3:power=20
-KEY3:card -KEY3:slot -KEY3:barlow -KEY3:dew -KEY3:caps -KEY3:diagonals=20
-KEY3:electronic -KEY3:drives -KEY3:erecting -KEY3:prisms =
-KEY3:eyepieces=20
-KEY3:finder -KEY3:scopes -KEY3:guiders -KEY3:motor -KEY3:mounts =
-KEY3:sky=20
-KEY3:maps -KEY3:viewfinders -KEY3:camcorder -KEY3:inks -KEY3:toners=20
-KEY3:creative -KEY3:kits -KEY3:papers)</P></FONT></FONT>
<P><SPAN class=3D093105108-04042005><FONT color=3D#000000><FONT =
size=3D2><FONT=20
face=3DVerdana>is raising an </FONT><FONT face=3DVerdana>BooleanQuery =
Exception ,=20
Even after using&nbsp; <SPAN class=3D093105108-04042005><FONT =
color=3D#000000><FONT=20
size=3D2><FONT=20
face=3DVerdana>BooleanQuery<B>.</B>setMaxClauseCount<B>(</B>Integer<B>.</=
B></FONT><FONT=20
face=3DVerdana color=3D#0000c0>MAX_VALUE</FONT></FONT><B><FONT =
face=3DVerdana=20
size=3D2>);</FONT></B><FONT face=3DVerdana=20
size=3D2>&nbsp;</FONT></P></FONT></SPAN></FONT></FONT></FONT></SPAN><SPAN=
=20
class=3D093105108-04042005><FONT color=3D#000000><FONT face=3DVerdana =
size=3D2><FONT=20
color=3D#ff0000 size=3D2>
<P>java.lang.IndexOutOfBoundsException: More than 32 required/prohibited =
clauses=20
in query.<BR>at=20
org.apache.lucene.search.BooleanScorer.add(BooleanScorer.java:61)<BR>at=20
org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.j=
ava:167)<BR>at=20
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)<BR>a=
t=20
org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)<BR>at=20
org.apache.lucene.search.Hits.&lt;init&gt;(Hits.java:43)</P>
<P></FONT></FONT></FONT></SPAN><SPAN class=3D093105108-04042005><FONT=20
color=3D#000000>&nbsp;</P>
<P><SPAN class=3D093105108-04042005><FONT face=3DVerdana size=3D2>But =
when I use the=20
same&nbsp; query with&nbsp; LUKE (v0.6), Luke is&nbsp;able to&nbsp; =
display the=20
Hit's&nbsp;</FONT></SPAN></P>
<P><SPAN class=3D093105108-04042005><FONT face=3DVerdana =
size=3D2>Somebody=20
Please&nbsp; tell me the Reason</FONT></SPAN></P>
<P><SPAN class=3D093105108-04042005><FONT face=3DVerdana size=3D2>System =
Spec for=20
Indexing /Searching<BR></FONT></SPAN><SPAN =
class=3D093105108-04042005><FONT=20
face=3DVerdana size=3D2>1) O/s Win2000.<BR></FONT></SPAN><SPAN=20
class=3D093105108-04042005><FONT face=3DVerdana size=3D2>2) Lucene =
1.4.3.<BR>3) Java=20
1.4.3.</FONT></SPAN></P>
<P><SPAN class=3D093105108-04042005><FONT face=3DVerdana size=3D2>Luke=20
Spec<BR></FONT></SPAN><SPAN class=3D093105108-04042005><FONT =
face=3DVerdana=20
size=3D2>1)Lukeall.jar.</FONT></SPAN></P>
<P><SPAN class=3D093105108-04042005><FONT face=3DVerdana=20
size=3D2></FONT></SPAN>&nbsp;</P>
<P><SPAN class=3D093105108-04042005><FONT face=3DVerdana size=3D2>Thx in =

advance</FONT></SPAN></P>
<P></FONT></SPAN></FONT></FONT></FONT></STRONG></SPAN><IMG height=3D85=20
src=3D"cid:093105108@04042005-1866" width=3D85><BR><B><FONT =
face=3DVerdana=20
color=3D#939ff7>WITH WARM REGARDS <BR>HAVE A NICE DAY <BR>[=20
N.S.KARTHIK]</FONT></B> </P></BODY></HTML>

------=_NextPart_001_0006_01C53922.FDE03DD0--

------=_NextPart_000_0005_01C53922.FDE03DD0--


From java-user-return-13900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 09:33:36 2005
Return-Path: <java-user-return-13900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77637 invoked from network); 4 Apr 2005 09:33:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 09:33:36 -0000
Received: (qmail 50558 invoked by uid 500); 4 Apr 2005 09:33:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50522 invoked by uid 500); 4 Apr 2005 09:33:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 25196 invoked by uid 99); 4 Apr 2005 09:17:41 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FORGED_RCVD_HELO,MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of madcow_uk@hotmail.com designates 65.54.248.230 as permitted sender)
Message-ID: <BAY101-F3426DCF1FB790D68DE04559D3B0@phx.gbl>
X-Originating-IP: [64.4.56.206]
X-Originating-Email: [madcow_uk@hotmail.com]
X-Sender: madcow_uk@hotmail.com
From: "mad Cow" <madcow_uk@hotmail.com>
To: java-user@lucene.apache.org
Bcc: 
Subject: Collecting documents where only one field term matches
Date: Mon, 04 Apr 2005 09:17:37 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 04 Apr 2005 09:17:38.0128 (UTC) FILETIME=[25266D00:01C538F7]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Could some more experienced users suggest a solution to my problem. I have 
documents which contain multiple terms and phrases, and I wish to collect 
documents which match only the term I query for.

For example:
Doc1 contains,
   species:"homo sapien" Mammalia

Doc2 contains,
   species:"homo sapien"

I wish to collect documents ONLY with "homo sapien" but a search for 
species:"homo sapien" returns both documents as they both contain the 
phrase.
I have written code to cache every term for every field an I hoped that I 
could do the search - species:"homo sapien" -species:Mammalia. Unfortunately 
the terms homo and sapien seem to be separate.  So when I collect every term 
to use with the "-" operator I end up with a query thus
species:"homo sapien" -species:(homo Mammalia sapien)

which isn't the same.

Can anybody suggest another approach?

Many thanks

Iain

_________________________________________________________________
It's fast, it's easy and it's free. Get MSN Messenger today! 
http://www.msn.co.uk/messenger


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 09:58:45 2005
Return-Path: <java-user-return-13901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82554 invoked from network); 4 Apr 2005 09:58:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 09:58:44 -0000
Received: (qmail 84288 invoked by uid 500); 4 Apr 2005 09:58:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84260 invoked by uid 500); 4 Apr 2005 09:58:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84246 invoked by uid 99); 4 Apr 2005 09:58:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 02:58:36 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AC8E113E2125; Mon,  4 Apr 2005 05:58:32 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id CEFA613E2007
	for <java-user@lucene.apache.org>; Mon,  4 Apr 2005 05:58:26 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <OBELINLGKPEMCIEIJJNKKEMECCAA.karthik@controlnet.co.in>
References: <OBELINLGKPEMCIEIJJNKKEMECCAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <8d81ab731955cd4eada9c9a23bf54e0e@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: EXCEPTION   LUCENE 1.4.3  +  LUKE
Date: Mon, 4 Apr 2005 05:58:21 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I haven't looked at Luke's source code to confirm, but my hunch is that =20=

Luke is upping the maximum clause count of BooleanQuery.  (see =20
BooleanQuery.setMaxClauseCount())

	Erik

On Apr 4, 2005, at 5:01 AM, Karthik N S wrote:

> =A0
>
> =A0Hi guys
>
> Apologies..........
>
> =A0
>
> Using a MultiFieldQueryParser=A0=A0=A0=A0for a query like below for a =
CUSTOM =20
> SEARCH
>
>
> (+(+KEY3:camera +KEY3:photo) -KEY3:accessories -KEY3:studio =20
> -KEY3:cleaners -KEY3:film -KEY3:filters -KEY3:flashes -KEY3:lenses =20
> -KEY3:lighting -KEY3:tripods -KEY3:cables -KEY3:digital =20
> -KEY3:batteries -KEY3:telescope -KEY3:adapters -KEY3:printers =20
> -KEY3:quality -KEY3:paper -KEY3:blank -KEY3:media -KEY3:cords =20
> -KEY3:cases -KEY3:bags -KEY3:darkroom -KEY3:supplies -KEY3:light =20
> -KEY3:meters -KEY3:underwater -KEY3:photography -KEY3:other =20
> -KEY3:frames -KEY3:memory -KEY3:cards -KEY3:readers -KEY3:slr =20
> -KEY3:printer -KEY3:chargers -KEY3:power -KEY3:card -KEY3:slot =20
> -KEY3:barlow -KEY3:dew -KEY3:caps -KEY3:diagonals -KEY3:electronic =20
> -KEY3:drives -KEY3:erecting -KEY3:prisms -KEY3:eyepieces -KEY3:finder =20=

> -KEY3:scopes -KEY3:guiders -KEY3:motor -KEY3:mounts -KEY3:sky =20
> -KEY3:maps -KEY3:viewfinders -KEY3:camcorder -KEY3:inks -KEY3:toners =20=

> -KEY3:creative -KEY3:kits -KEY3:papers)
>
>
> is raising an BooleanQuery Exception , Even after using=A0 =20
> BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE);=A0
>
>
> java.lang.IndexOutOfBoundsException: More than 32 required/prohibited =20=

> clauses in query.
> at org.apache.lucene.search.BooleanScorer.add(BooleanScorer.java:61)
> at =20
> =
org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery=20=

> .java:167)
> at =
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
> at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
> at org.apache.lucene.search.Hits.<init>(Hits.java:43)
>
> =A0
>
>
> But when I use the same=A0 query with=A0 LUKE (v0.6), Luke is=A0able =
to=A0 =20
> display the Hit's=A0
>
> Somebody Please=A0 tell me the Reason
>
> System Spec for Indexing /Searching
> 1) O/s Win2000.
> 2) Lucene 1.4.3.
> 3) Java 1.4.3.
>
> Luke Spec
> 1)Lukeall.jar.
>
> =A0
>
> Thx in advance
>
> <image.tiff>
> WITH WARM REGARDS
>  HAVE A NICE DAY
> [ N.S.KARTHIK]


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 10:21:45 2005
Return-Path: <java-user-return-13902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88544 invoked from network); 4 Apr 2005 10:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 10:21:45 -0000
Received: (qmail 15260 invoked by uid 500); 4 Apr 2005 10:21:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15237 invoked by uid 500); 4 Apr 2005 10:21:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15222 invoked by uid 99); 4 Apr 2005 10:21:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 03:21:32 -0700
Received: from [81.168.89.246] (helo=[192.168.1.28])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1DIOhy-0006QR-00
	for <java-user@lucene.apache.org>; Mon, 04 Apr 2005 11:21:26 +0100
Subject: Re: Collecting documents where only one field term matches
From: Miles Barr <miles@runtime-collective.com>
To: Lucene User <java-user@lucene.apache.org>
In-Reply-To: <BAY101-F3426DCF1FB790D68DE04559D3B0@phx.gbl>
References: <BAY101-F3426DCF1FB790D68DE04559D3B0@phx.gbl>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Mon, 04 Apr 2005 11:20:33 +0100
Message-Id: <1112610034.15511.69.camel@saturn>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.4 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 2005-04-04 at 09:17 +0000, mad Cow wrote:
> Could some more experienced users suggest a solution to my problem. I have 
> documents which contain multiple terms and phrases, and I wish to collect 
> documents which match only the term I query for.
> 
> For example:
> Doc1 contains,
>    species:"homo sapien" Mammalia
> 
> Doc2 contains,
>    species:"homo sapien"
> 
> I wish to collect documents ONLY with "homo sapien" but a search for 
> species:"homo sapien" returns both documents as they both contain the 
> phrase.
> I have written code to cache every term for every field an I hoped that I 
> could do the search - species:"homo sapien" -species:Mammalia. Unfortunately 
> the terms homo and sapien seem to be separate.  So when I collect every term 
> to use with the "-" operator I end up with a query thus
> species:"homo sapien" -species:(homo Mammalia sapien)
> 
> which isn't the same.
> 
> Can anybody suggest another approach?

If the species are fixed I recommend using the Keyword type:

http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Field.html#Keyword(java.lang.String, java.lang.String)

and add each species as a separate field (Lucene can handle multiple
fields with the same name). Then the query 'species:"homo sapien"
-species:Mammalia' should work.

But I think the real problem is that you category hierarchy that you
want to filter by, which is awkward to do with Lucene alone. When I come
across these situations I normally pair up Lucene with a database that
holds the categorization information and take one of two approaches:

1. Do the search in Lucene, then do the category filtering against the
database (which holds document/category information). Lucene holds no
category information in this case

2. Take the query, look up the relevant category information in the
database and expand the query so it only picks up the categories you
want (you'd store each category a document is in as a separate Lucene
keyword field).



-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 10:58:21 2005
Return-Path: <java-user-return-13903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96945 invoked from network); 4 Apr 2005 10:58:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 10:58:21 -0000
Received: (qmail 61158 invoked by uid 500); 4 Apr 2005 10:58:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61138 invoked by uid 500); 4 Apr 2005 10:58:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61125 invoked by uid 99); 4 Apr 2005 10:58:14 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 04 Apr 2005 03:58:13 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IEF5YW00.VBY for <java-user@lucene.apache.org>; Mon, 4
          Apr 2005 16:46:08 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: EXCEPTION   LUCENE 1.4.3  +  LUKE
Date: Mon, 4 Apr 2005 16:36:17 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKKEMFCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <8d81ab731955cd4eada9c9a23bf54e0e@ehatchersolutions.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

Erik

 The Exception is caused even
whenBooleanQuery.setMaxClauseCount(Integer.MAX_VALUE) is used
 but Luke DOES NOT .......... 8(


with regards
Karthik

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Monday, April 04, 2005 3:28 PM
To: java-user@lucene.apache.org
Subject: Re: EXCEPTION LUCENE 1.4.3 + LUKE


I haven't looked at Luke's source code to confirm, but my hunch is that
Luke is upping the maximum clause count of BooleanQuery.  (see
BooleanQuery.setMaxClauseCount())

	Erik

On Apr 4, 2005, at 5:01 AM, Karthik N S wrote:

>  
>
>  Hi guys
>
> Apologies..........
>
>  
>
> Using a MultiFieldQueryParser    for a query like below for a CUSTOM
> SEARCH
>
>
> (+(+KEY3:camera +KEY3:photo) -KEY3:accessories -KEY3:studio
> -KEY3:cleaners -KEY3:film -KEY3:filters -KEY3:flashes -KEY3:lenses
> -KEY3:lighting -KEY3:tripods -KEY3:cables -KEY3:digital
> -KEY3:batteries -KEY3:telescope -KEY3:adapters -KEY3:printers
> -KEY3:quality -KEY3:paper -KEY3:blank -KEY3:media -KEY3:cords
> -KEY3:cases -KEY3:bags -KEY3:darkroom -KEY3:supplies -KEY3:light
> -KEY3:meters -KEY3:underwater -KEY3:photography -KEY3:other
> -KEY3:frames -KEY3:memory -KEY3:cards -KEY3:readers -KEY3:slr
> -KEY3:printer -KEY3:chargers -KEY3:power -KEY3:card -KEY3:slot
> -KEY3:barlow -KEY3:dew -KEY3:caps -KEY3:diagonals -KEY3:electronic
> -KEY3:drives -KEY3:erecting -KEY3:prisms -KEY3:eyepieces -KEY3:finder
> -KEY3:scopes -KEY3:guiders -KEY3:motor -KEY3:mounts -KEY3:sky
> -KEY3:maps -KEY3:viewfinders -KEY3:camcorder -KEY3:inks -KEY3:toners
> -KEY3:creative -KEY3:kits -KEY3:papers)
>
>
> is raising an BooleanQuery Exception , Even after using 
> BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE); 
>
>
> java.lang.IndexOutOfBoundsException: More than 32 required/prohibited
> clauses in query.
> at org.apache.lucene.search.BooleanScorer.add(BooleanScorer.java:61)
> at
> org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery
> .java:167)
> at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
> at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
> at org.apache.lucene.search.Hits.<init>(Hits.java:43)
>
>  
>
>
> But when I use the same  query with  LUKE (v0.6), Luke is able to 
> display the Hit's 
>
> Somebody Please  tell me the Reason
>
> System Spec for Indexing /Searching
> 1) O/s Win2000.
> 2) Lucene 1.4.3.
> 3) Java 1.4.3.
>
> Luke Spec
> 1)Lukeall.jar.
>
>  
>
> Thx in advance
>
> <image.tiff>
> WITH WARM REGARDS
>  HAVE A NICE DAY
> [ N.S.KARTHIK]


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 11:59:30 2005
Return-Path: <java-user-return-13904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18796 invoked from network); 4 Apr 2005 11:59:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 11:59:30 -0000
Received: (qmail 55687 invoked by uid 500); 4 Apr 2005 11:59:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55660 invoked by uid 500); 4 Apr 2005 11:59:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55645 invoked by uid 99); 4 Apr 2005 11:59:21 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from shared4.hardhathosting.com (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 04:59:20 -0700
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j34BxOA15484
	for <java-user@lucene.apache.org>; Mon, 4 Apr 2005 06:59:24 -0500
Message-ID: <42512C14.2020604@getopt.org>
Date: Mon, 04 Apr 2005 13:59:16 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: EXCEPTION   LUCENE 1.4.3  +  LUKE
References: <OBELINLGKPEMCIEIJJNKKEMECCAA.karthik@controlnet.co.in> <8d81ab731955cd4eada9c9a23bf54e0e@ehatchersolutions.com>
In-Reply-To: <8d81ab731955cd4eada9c9a23bf54e0e@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:
> I haven't looked at Luke's source code to confirm, but my hunch is that  
> Luke is upping the maximum clause count of BooleanQuery.  (see  
> BooleanQuery.setMaxClauseCount())

No, it doesn't. The reason for that exception NOT occuring with Luke is 
simply the fact that Luke uses Lucene 1.9-rc1-dev, where that constant 
has been increased to 1024.


-- 
Best regards,
Andrzej Bialecki
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 12:03:43 2005
Return-Path: <java-user-return-13905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19475 invoked from network); 4 Apr 2005 12:03:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 12:03:43 -0000
Received: (qmail 62235 invoked by uid 500); 4 Apr 2005 12:03:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62216 invoked by uid 500); 4 Apr 2005 12:03:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62203 invoked by uid 99); 4 Apr 2005 12:03:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 05:03:34 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9CF4013E2125; Mon,  4 Apr 2005 08:03:28 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id B028D13E2007
	for <java-user@lucene.apache.org>; Mon,  4 Apr 2005 08:02:57 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <OBELINLGKPEMCIEIJJNKKEMFCCAA.karthik@controlnet.co.in>
References: <OBELINLGKPEMCIEIJJNKKEMFCCAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <9e4a734472dee705b2f719c1cfafe71a@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: EXCEPTION   LUCENE 1.4.3  +  LUKE
Date: Mon, 4 Apr 2005 08:02:56 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 4, 2005, at 7:06 AM, Karthik N S wrote:

> Hi
>
> Erik
>
>  The Exception is caused even
> whenBooleanQuery.setMaxClauseCount(Integer.MAX_VALUE) is used
>  but Luke DOES NOT .......... 8(

Sorry, I completely misspoke and did not fully analyze the error you =20
received.  There is a limit of 32 required/prohibited clauses with =20
BooleanQuery that you've exceeded.  I don't know how to get around this =20=

restriction or even if it is possible (off the top of my head).  I =20
don't know how Luke would get around it either.

	Erik

>
>
> with regards
> Karthik
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Monday, April 04, 2005 3:28 PM
> To: java-user@lucene.apache.org
> Subject: Re: EXCEPTION LUCENE 1.4.3 + LUKE
>
>
> I haven't looked at Luke's source code to confirm, but my hunch is =
that
> Luke is upping the maximum clause count of BooleanQuery.  (see
> BooleanQuery.setMaxClauseCount())
>
> 	Erik
>
> On Apr 4, 2005, at 5:01 AM, Karthik N S wrote:
>
>> =A0
>>
>> =A0Hi guys
>>
>> Apologies..........
>>
>> =A0
>>
>> Using a MultiFieldQueryParser=A0=A0=A0=A0for a query like below for a =
CUSTOM
>> SEARCH
>>
>>
>> (+(+KEY3:camera +KEY3:photo) -KEY3:accessories -KEY3:studio
>> -KEY3:cleaners -KEY3:film -KEY3:filters -KEY3:flashes -KEY3:lenses
>> -KEY3:lighting -KEY3:tripods -KEY3:cables -KEY3:digital
>> -KEY3:batteries -KEY3:telescope -KEY3:adapters -KEY3:printers
>> -KEY3:quality -KEY3:paper -KEY3:blank -KEY3:media -KEY3:cords
>> -KEY3:cases -KEY3:bags -KEY3:darkroom -KEY3:supplies -KEY3:light
>> -KEY3:meters -KEY3:underwater -KEY3:photography -KEY3:other
>> -KEY3:frames -KEY3:memory -KEY3:cards -KEY3:readers -KEY3:slr
>> -KEY3:printer -KEY3:chargers -KEY3:power -KEY3:card -KEY3:slot
>> -KEY3:barlow -KEY3:dew -KEY3:caps -KEY3:diagonals -KEY3:electronic
>> -KEY3:drives -KEY3:erecting -KEY3:prisms -KEY3:eyepieces -KEY3:finder
>> -KEY3:scopes -KEY3:guiders -KEY3:motor -KEY3:mounts -KEY3:sky
>> -KEY3:maps -KEY3:viewfinders -KEY3:camcorder -KEY3:inks -KEY3:toners
>> -KEY3:creative -KEY3:kits -KEY3:papers)
>>
>>
>> is raising an BooleanQuery Exception , Even after using=A0
>> BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE);=A0
>>
>>
>> java.lang.IndexOutOfBoundsException: More than 32 required/prohibited
>> clauses in query.
>> at org.apache.lucene.search.BooleanScorer.add(BooleanScorer.java:61)
>> at
>> =
org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuer=20=

>> y
>> .java:167)
>> at =20
>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
>> at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
>> at org.apache.lucene.search.Hits.<init>(Hits.java:43)
>>
>> =A0
>>
>>
>> But when I use the same=A0 query with=A0 LUKE (v0.6), Luke is=A0able =
to=A0
>> display the Hit's=A0
>>
>> Somebody Please=A0 tell me the Reason
>>
>> System Spec for Indexing /Searching
>> 1) O/s Win2000.
>> 2) Lucene 1.4.3.
>> 3) Java 1.4.3.
>>
>> Luke Spec
>> 1)Lukeall.jar.
>>
>> =A0
>>
>> Thx in advance
>>
>> <image.tiff>
>> WITH WARM REGARDS
>>  HAVE A NICE DAY
>> [ N.S.KARTHIK]
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 14:44:21 2005
Return-Path: <java-user-return-13906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64567 invoked from network); 4 Apr 2005 14:44:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 14:44:21 -0000
Received: (qmail 60677 invoked by uid 500); 4 Apr 2005 14:44:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60105 invoked by uid 500); 4 Apr 2005 14:44:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60092 invoked by uid 99); 4 Apr 2005 14:44:14 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from b128D.static.pacific.net.au (HELO localhost.localdomain) (202.7.87.141)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 07:44:13 -0700
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by localhost.localdomain (8.12.11/8.12.11) with ESMTP id j34Ei9EH015040
	for <java-user@lucene.apache.org>; Tue, 5 Apr 2005 00:44:09 +1000
Received: (from sfarquhar@localhost)
	by localhost.localdomain (8.12.11/8.12.11/Submit) id j34Ei8OD015039
	for java-user@lucene.apache.org; Tue, 5 Apr 2005 00:44:08 +1000
X-Authentication-Warning: localhost.localdomain: sfarquhar set sender to scott@atlassian.com using -f
Date: Tue, 5 Apr 2005 00:44:08 +1000
From: Scott Farquhar <scott@atlassian.com>
To: java-user@lucene.apache.org
Subject: FieldCache getCustom() method
Message-ID: <20050404144408.GA15032@localhost.localdomain>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.1i
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,

I've just bought the Lucene in Action book, and I'm delving into search
sorts, trying to improve the way that we do sorting in JIRA.

I'm looking to implement my own SortComparatorSource, as many of the
objects that I need to return from the index can't return comparable, and
I want to use a custom comparator to do the comparison.

So I thought that I would copy the source to SortComparator, and add my
own method getComparator() that subclasses could implement. So far, so
good.

However, the problem is that FieldCache.getCustom() only takes a
SortComparator, not a SortComparatorSource object.

Is there any reason for this?  

The reason is that I want to return an Object from
SortComparator.getComparable(), rather than a Comparable.

If I can't use the FieldCache directly - can I copy the class?  Is there
any explanation of how the FieldCache works?

Thanks in advance for any answers.

Cheers,
Scott

-- 
ATLASSIAN - http://www.atlassian.com
Expert J2EE Software, Services and Support
-------------------------------------------------------------
JIRA Docs: http://www.atlassian.com/software/jira/docs/latest

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 15:36:58 2005
Return-Path: <java-user-return-13907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86097 invoked from network); 4 Apr 2005 15:36:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 15:36:58 -0000
Received: (qmail 79060 invoked by uid 500); 4 Apr 2005 15:36:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79033 invoked by uid 500); 4 Apr 2005 15:36:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79019 invoked by uid 99); 4 Apr 2005 15:36:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from lakermmtao02.cox.net (HELO lakermmtao02.cox.net) (68.230.240.37)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 08:36:47 -0700
Received: from [192.168.2.85] (really [70.187.212.165])
          by lakermmtao02.cox.net
          (InterMail vM.6.01.04.00 201-2131-118-20041027) with ESMTP
          id <20050404153643.VQMS6521.lakermmtao02.cox.net@[192.168.2.85]>
          for <java-user@lucene.apache.org>; Mon, 4 Apr 2005 11:36:43 -0400
Message-ID: <42515F88.2070700@net-frame.com>
Date: Mon, 04 Apr 2005 11:38:48 -0400
From: Terry Steichen <terry@net-frame.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Collecting documents where only one field term matches
References: <BAY101-F3426DCF1FB790D68DE04559D3B0@phx.gbl>
In-Reply-To: <BAY101-F3426DCF1FB790D68DE04559D3B0@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I wonder if you could accomplish your goal by creating another field 
during indexing which holds the number of terms in the "species" field.  
If that's possible, then you might get what you want with a query like: 
+species:"homo sapien" +num_species:1.

mad Cow wrote:

> Could some more experienced users suggest a solution to my problem. I 
> have documents which contain multiple terms and phrases, and I wish to 
> collect documents which match only the term I query for.
>
> For example:
> Doc1 contains,
>   species:"homo sapien" Mammalia
>
> Doc2 contains,
>   species:"homo sapien"
>
> I wish to collect documents ONLY with "homo sapien" but a search for 
> species:"homo sapien" returns both documents as they both contain the 
> phrase.
> I have written code to cache every term for every field an I hoped 
> that I could do the search - species:"homo sapien" -species:Mammalia. 
> Unfortunately the terms homo and sapien seem to be separate.  So when 
> I collect every term to use with the "-" operator I end up with a 
> query thus
> species:"homo sapien" -species:(homo Mammalia sapien)
>
> which isn't the same.
>
> Can anybody suggest another approach?
>
> Many thanks
>
> Iain
>
> _________________________________________________________________
> It's fast, it's easy and it's free. Get MSN Messenger today! 
> http://www.msn.co.uk/messenger
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 17:31:14 2005
Return-Path: <java-user-return-13908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28911 invoked from network); 4 Apr 2005 17:31:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 17:31:13 -0000
Received: (qmail 56866 invoked by uid 500); 4 Apr 2005 17:31:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56847 invoked by uid 500); 4 Apr 2005 17:31:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56833 invoked by uid 99); 4 Apr 2005 17:31:08 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr13.xs4all.nl (HELO smtp-vbr13.xs4all.nl) (194.109.24.33)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 10:31:07 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr13.xs4all.nl (8.12.11/8.12.11) with ESMTP id j34HV4x2077154
	for <java-user@lucene.apache.org>; Mon, 4 Apr 2005 19:31:04 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: EXCEPTION   LUCENE 1.4.3  +  LUKE
Date: Mon, 4 Apr 2005 19:31:03 +0200
User-Agent: KMail/1.5.4
References: <OBELINLGKPEMCIEIJJNKKEMFCCAA.karthik@controlnet.co.in> <9e4a734472dee705b2f719c1cfafe71a@ehatchersolutions.com>
In-Reply-To: <9e4a734472dee705b2f719c1cfafe71a@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200504041931.03684.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 04 April 2005 14:02, Erik Hatcher wrote:
>=20
> On Apr 4, 2005, at 7:06 AM, Karthik N S wrote:
>=20
> > Hi
> >
> > Erik
> >
> >  The Exception is caused even
> > whenBooleanQuery.setMaxClauseCount(Integer.MAX_VALUE) is used
> >  but Luke DOES NOT .......... 8(
>=20
> Sorry, I completely misspoke and did not fully analyze the error you =20
> received.  There is a limit of 32 required/prohibited clauses with =20
> BooleanQuery that you've exceeded.  I don't know how to get around this =
=20
> restriction or even if it is possible (off the top of my head).  I =20

The development version does not the limit of 32 required/prohibited clause=
s.
The maximum number of clauses is in still there.

Regards,
Paul Elschot


> don't know how Luke would get around it either.
>=20
> 	Erik
>=20
> >
> >
> > with regards
> > Karthik
> >
> > -----Original Message-----
> > From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> > Sent: Monday, April 04, 2005 3:28 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: EXCEPTION LUCENE 1.4.3 + LUKE
> >
> >
> > I haven't looked at Luke's source code to confirm, but my hunch is that
> > Luke is upping the maximum clause count of BooleanQuery.  (see
> > BooleanQuery.setMaxClauseCount())
> >
> > 	Erik
> >
> > On Apr 4, 2005, at 5:01 AM, Karthik N S wrote:
> >
> >> =A0
> >>
> >> =A0Hi guys
> >>
> >> Apologies..........
> >>
> >> =A0
> >>
> >> Using a MultiFieldQueryParser=A0=A0=A0=A0for a query like below for a =
CUSTOM
> >> SEARCH
> >>
> >>
> >> (+(+KEY3:camera +KEY3:photo) -KEY3:accessories -KEY3:studio
> >> -KEY3:cleaners -KEY3:film -KEY3:filters -KEY3:flashes -KEY3:lenses
> >> -KEY3:lighting -KEY3:tripods -KEY3:cables -KEY3:digital
> >> -KEY3:batteries -KEY3:telescope -KEY3:adapters -KEY3:printers
> >> -KEY3:quality -KEY3:paper -KEY3:blank -KEY3:media -KEY3:cords
> >> -KEY3:cases -KEY3:bags -KEY3:darkroom -KEY3:supplies -KEY3:light
> >> -KEY3:meters -KEY3:underwater -KEY3:photography -KEY3:other
> >> -KEY3:frames -KEY3:memory -KEY3:cards -KEY3:readers -KEY3:slr
> >> -KEY3:printer -KEY3:chargers -KEY3:power -KEY3:card -KEY3:slot
> >> -KEY3:barlow -KEY3:dew -KEY3:caps -KEY3:diagonals -KEY3:electronic
> >> -KEY3:drives -KEY3:erecting -KEY3:prisms -KEY3:eyepieces -KEY3:finder
> >> -KEY3:scopes -KEY3:guiders -KEY3:motor -KEY3:mounts -KEY3:sky
> >> -KEY3:maps -KEY3:viewfinders -KEY3:camcorder -KEY3:inks -KEY3:toners
> >> -KEY3:creative -KEY3:kits -KEY3:papers)
> >>
> >>
> >> is raising an BooleanQuery Exception , Even after using=A0
> >> BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE);=A0
> >>
> >>
> >> java.lang.IndexOutOfBoundsException: More than 32 required/prohibited
> >> clauses in query.
> >> at org.apache.lucene.search.BooleanScorer.add(BooleanScorer.java:61)
> >> at
> >> org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuer=
=20
> >> y
> >> .java:167)
> >> at =20
> >> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
> >> at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
> >> at org.apache.lucene.search.Hits.<init>(Hits.java:43)
> >>
> >> =A0
> >>
> >>
> >> But when I use the same=A0 query with=A0 LUKE (v0.6), Luke is=A0able t=
o=A0
> >> display the Hit's=A0
> >>
> >> Somebody Please=A0 tell me the Reason
> >>
> >> System Spec for Indexing /Searching
> >> 1) O/s Win2000.
> >> 2) Lucene 1.4.3.
> >> 3) Java 1.4.3.
> >>
> >> Luke Spec
> >> 1)Lukeall.jar.
> >>
> >> =A0
> >>
> >> Thx in advance
> >>
> >> <image.tiff>
> >> WITH WARM REGARDS
> >>  HAVE A NICE DAY
> >> [ N.S.KARTHIK]
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 20:19:10 2005
Return-Path: <java-user-return-13909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79915 invoked from network); 4 Apr 2005 20:19:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 20:19:10 -0000
Received: (qmail 34913 invoked by uid 500); 4 Apr 2005 20:19:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34879 invoked by uid 500); 4 Apr 2005 20:19:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34866 invoked by uid 99); 4 Apr 2005 20:19:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 13:19:01 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: filter search
Date: Mon, 4 Apr 2005 16:18:49 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA010829FF@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: HTML pages highlighter
thread-index: AcU1a+RAUAh7kHt4T6CTAI1ourFz2AD5m4wQ
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi guys,

is it possible to filter the hits returned from a certain query?. for =
example if I have a search like this:
	Query searchQuery =3D queryParser.parse( query );
	Hits  results =3D m_searcher.search( searchQuery );
is there a way to use the results and find out how many of the returned =
documents their url ends with com, and how many ends with net and so =
on... without the need to form a new query?.
thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 20:34:50 2005
Return-Path: <java-user-return-13910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16705 invoked from network); 4 Apr 2005 20:34:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 20:34:50 -0000
Received: (qmail 61599 invoked by uid 500); 4 Apr 2005 20:34:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61563 invoked by uid 500); 4 Apr 2005 20:34:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61548 invoked by uid 99); 4 Apr 2005 20:34:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from artishost.net (HELO artisangel.artishost.net) (69.56.132.178)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 13:34:42 -0700
Received: from [81.25.38.44] (helo=[81.25.38.44])
	by artisangel.artishost.net with esmtpa (Exim 4.43)
	id 1DIYDv-0004DL-S4
	for java-user@lucene.apache.org; Mon, 04 Apr 2005 15:31:06 -0500
Date: Mon, 4 Apr 2005 23:34:36 +0300
From: Yura Smolsky <info@altervision.biz>
X-Mailer: The Bat! (v3.0.1.33) Professional
Reply-To: Yura Smolsky <info@altervision.biz>
Organization: AlterVision Web Development Group
X-Priority: 3 (Normal)
Message-ID: <1361527599.20050404233436@altervision.biz>
To: java-user@lucene.apache.org
Subject: exact match
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - artisangel.artishost.net
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - altervision.biz
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello, java-user.

I have documents with tokenized, indexes and stored field. This field
contain one-two words usually. I need to be able to search exact
matches for two words.
For example search "John" should return documents with field
containing "John" only, not "John Doe" or "John Foo".

Any ideas?

Yura Smolsky.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 20:48:04 2005
Return-Path: <java-user-return-13911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27433 invoked from network); 4 Apr 2005 20:48:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 20:48:04 -0000
Received: (qmail 83262 invoked by uid 500); 4 Apr 2005 20:47:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83233 invoked by uid 500); 4 Apr 2005 20:47:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83215 invoked by uid 99); 4 Apr 2005 20:47:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.crcpress.com (HELO flexbe01.crcpress.com) (65.244.170.27)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 13:47:55 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: FilteredQuery and Boolean AND
Date: Mon, 4 Apr 2005 16:47:51 -0400
Message-ID: <78A2AFE317F5AD48B823BE740D4A815224070E@flexbe01.crcpress.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FilteredQuery and Boolean AND
Thread-Index: AcU3HlWhxSiVa3koSgWi9CrCHwFrUQCOAN4w
From: "Kipping, Peter" <Peter.Kipping@taylorandfrancis.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris, thanks for your help.  I came to the same conclusions about using
the ChainedFilter.  However there are situations where applying a filter
at the end wouldn't work. Consider the same two filtered queries plus
and an OR:

(FilteredQuery1 AND FilteredQuery2) OR TermQuery

Where TermQuery can be pretty much anything.  The ChainedFilter would
restrict the TermQuery docs from appearing in the hits, even though it
shouldn't.  If the FilteredQuerys worked properly, they could be put in
a BooleanQuery and then a BooleanClause.  That's why I was doing that
way.

Peter

-----Original Message-----
From: hossman@hal.rescomp.berkeley.edu
[mailto:hossman@hal.rescomp.berkeley.edu] On Behalf Of Chris Hostetter
Sent: Friday, April 01, 2005 7:53 PM
To: java-user@lucene.apache.org
Subject: Re: FilteredQuery and Boolean AND


Peter's problem intrigued me, so I wrote my own test case using two
simple
Filters that filter out all but the first (or last) doc.  I seem to be
getting the same results he is, which is certianly.  see attached test
case.

while this definitely seems like a bug, it also seems like a fairly
inefficinent way of approaching hte problem in general, instead of:
  BooleanQuery containing:
    a) FilteredQuery wrapping:
        Query for "all" -- filtered by -- RangeFilter #1
    b) FilteredQuery wrapping:
        Query for "all" -- filtered by -- RangeFilter #2

...it seems like it would make more sense to use...

  FilterQuery wrapping:
    Query for all -- filtered by -- ChainedFilter containing:
      a) RangeFilter #1
      b) RangeFilter #2




: Date: Fri, 1 Apr 2005 13:29:04 -0500
: From: Erik Hatcher <erik@ehatchersolutions.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Re: FilteredQuery and Boolean AND
:
: Peter,
:
: Could you provide a straight-forward test case that indexes a few
: documents into a RAMDirectory and demonstrates the problem you're
: having with AND'd FilteredQuery's?
:
: Give me something concrete and simple and I'll dig into it further.
:
: 	Erik
:
: On Apr 1, 2005, at 11:13 AM, Kipping, Peter wrote:
:
: > Any ideas on this?  I have purchased your book, Lucene in Action,
which
: > is quite good.  To make things easier, consider the example on p212.
: > In
: > item 4, when you combine the queries, what happens you combine them
in
: > and AND fashion?  The book only has OR, which works.  Although it
may
: > work since the book only has one filtered query, but what if you
made
: > them both filtered queries and ANDed them?
: >
: > Thanks,
: > Peter
: >
: > -----Original Message-----
: > From: Kipping, Peter [mailto:Peter.Kipping@taylorandfrancis.com]
: > Sent: Friday, March 25, 2005 10:34 AM
: > To: java-user@lucene.apache.org
: > Subject: FilteredQuery and Boolean AND
: >
: > I have the following query structure:
: >
: > BooleanQuery q2 =3D new BooleanQuery();
: > TermQuery tq =3D new TermQuery(new Term("all_entries", "y"));
: > FilteredQuery fq =3D new FilteredQuery(tq, ft);
: > FilteredQuery fq2 =3D new FilteredQuery(tq, ft2);
: > q2.add(fq, false, false);
: > q2.add(fq2, false, false);
: >
: > The two filters are searches over numeric ranges.  I'm using filters
so
: > I don't get the TooManyBooleanClauses Exception.  And my TermQuery
tq
: > is
: > just a field that has 'y' in every document so I can filter over the
: > entire index.  The last two lines I am creating a boolean OR, and
: > everything works fine.  I get back 30 documents which is correct.
: >
: > However when I change the last two lines to create an AND:
: >
: > q2.add(fq, true, false);
: > q2.add(fq2, true, false);
: >
: > I still get back 30 documents, which is not correct.  It should be
0.
: > What's going on with FilteredQuery?
: >
: > Thanks,
: > Peter
: >
: >
: >
---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
: >
: >
: >
---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 20:48:26 2005
Return-Path: <java-user-return-13912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27805 invoked from network); 4 Apr 2005 20:48:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 20:48:26 -0000
Received: (qmail 84460 invoked by uid 500); 4 Apr 2005 20:48:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84439 invoked by uid 500); 4 Apr 2005 20:48:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84426 invoked by uid 99); 4 Apr 2005 20:48:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 13:48:18 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9029113E2007; Mon,  4 Apr 2005 16:48:16 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 3AC8B13E2125
	for <java-user@lucene.apache.org>; Mon,  4 Apr 2005 16:48:09 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <1361527599.20050404233436@altervision.biz>
References: <1361527599.20050404233436@altervision.biz>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <288210f177f90b25236e0ad7abe73c98@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: exact match
Date: Mon, 4 Apr 2005 16:48:08 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 4, 2005, at 4:34 PM, Yura Smolsky wrote:

> Hello, java-user.
>
> I have documents with tokenized, indexes and stored field. This field
> contain one-two words usually. I need to be able to search exact
> matches for two words.
> For example search "John" should return documents with field
> containing "John" only, not "John Doe" or "John Foo".
>
> Any ideas?

Use an untokenized field to search on in the case of finding an exact 
match.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 21:35:52 2005
Return-Path: <java-user-return-13913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39981 invoked from network); 4 Apr 2005 21:35:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 21:35:52 -0000
Received: (qmail 60374 invoked by uid 500); 4 Apr 2005 21:35:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60353 invoked by uid 500); 4 Apr 2005 21:35:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60340 invoked by uid 99); 4 Apr 2005 21:35:45 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from nyhwwex001a.hwwilson.com (HELO NYHWWEX001.hwwilson.local) (208.238.105.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 14:35:43 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: HTML pages highlighter
Date: Mon, 4 Apr 2005 17:35:41 -0400
Message-ID: <E3AD9C3F9EC34949855CDFC6FB5A6C11755128@NYHWWEX001.hwwilson.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: HTML pages highlighter
Thread-Index: AcU2VsD6tCGgGNt3TImQPonhYp6UsQDAagmg
From: "Yagnesh Shah" <yshah@hwwilson.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi! Eric,
	I end up purchasing your book "Lucene in Action". I have downloaded =
your code samples. I am able to retrieve "result" only some time. Below =
is the code I have taken from Search.jhtml in lucene demo. I have 2 =
problem

a) I am unable to display "result" using
b) When I click on the title to retrieve document I do not see my query =
highlighted.

<java>

  Searcher searcher =3D new IndexSearcher(getReader(indexName));

  // get query from request
  String queryString =3D request.getParameter("query");

  query =3D QueryParser.parse(queryString, "contents", analyzer);
  Hits hits =3D searcher.search(query);
  SimpleHTMLFormatter formatter =3D
  new SimpleHTMLFormatter();
  Highlighter highlighter =3D new Highlighter(formatter, new =
QueryScorer(query));
  highlighter.setTextFragmenter(new SimpleFragmenter(50));
  String FIELD_NAME =3D "contents";

  for (int i =3D start; i < end; i++) {             // display the hits
  Document doc =3D hits.doc(i);
  String text =3D hits.doc(i).get(FIELD_NAME);
  int maxNumFragmentsRequired =3D 5;
  String fragmentSeparator =3D "...";
  if ( text !=3D null){
	TokenStream tokenStream =3D new =
StandardAnalyzer().tokenStream(FIELD_NAME, new =
java.io.StringReader(text));
	String result =3D highlighter.getBestFragments		=
(tokenStream,text,maxNumFragmentsRequired,fragmentSeparator);
    	System.out.println("result=3D" +result);
  }

    String title =3D doc.get("title");
    if (title.equals(""))                         // use url for docs =
w/o title
      title =3D doc.get("path");
    </java>
    <p><b><java type=3Dprint>(int)(hits.score(i) * 100.0f)</java>%
    <a href=3D"`doc.get("path")`">
    <java type=3Dprint>Entities.encode(title)</java>
    </b></a>
    <java>
    if (showSummaries) {                          // maybe show summary
    </java>
    <ul><i>Summary</i>:
      <java type=3Dprint>Entities.encode(doc.get("summary"))</java>
    </ul>
    <java>
    }
  }
</java>



-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Thursday, March 31, 2005 8:04 PM
To: java-user@lucene.apache.org
Subject: Re: HTML pages highlighter



On Mar 31, 2005, at 6:36 PM, Yagnesh Shah wrote:
>     try {
>       fis =3D new FileInputStream(f);
>       HTMLParser parser =3D new HTMLParser(fis);
>
>       // Add the tag-stripped contents as a Reader-valued Text field=20
> so it will
>       // get tokenized and indexed.
> //      doc.add(new Field("contents", parser.getReader()));
>       LineNumberReader reader =3D new=20
> LineNumberReader(parser.getReader());
>       for (String l =3D reader.readLine(); l !=3D null; l =3D=20
> reader.readLine())
> //        System.out.println(l);
>       doc.add(Field.Text("contents", l));

Notice that your loop here is adding a "contents" field for *every*=20
line read since that is where the first semi-colon is.

Look at using Luke to explore your index.  Try indexing just a dummy=20
String:

	doc.add(Field.Text("contents", "some dummy text"));

to show that it works.  Always always always simplify a complicated=20
situation by doing the most obvious thing that _should_ work.

Also, the demo Lucene code is not really designed to be used in a=20
production application (sadly), so you're better off borrowing code=20
from the many articles or our book to begin with.

	Erik


>
>       // Add the summary as a field that is stored and returned with
>       // hit documents for display.
>       doc.add(new Field("summary", parser.getSummary(),=20
> Field.Store.YES, Field.Index.NO));
>
>       // Add the title as a field that it can be searched and that is=20
> stored.
>       doc.add(new Field("title", parser.getTitle(), Field.Store.YES,=20
> Field.Index.TOKENIZED));
>     }
>
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Wednesday, March 30, 2005 7:38 PM
> To: java-user@lucene.apache.org
> Subject: Re: HTML pages highlighter
>
>
>
> On Mar 30, 2005, at 4:46 PM, Yagnesh Shah wrote:
>
>> Hi! Eric,
>
> Erik - with a 'k' - Sorry, I let it slide once though :)
>
>> 	I try to modified that with this but I get compile error. Do you =
have
>> any code snippet of highlighting code to pull the contents from the
>> original source?
>
> I have a whole book full of code examples :)
> http://www.lucenebook.com - Grab the source code and look in
> src/lia/tools at Highlight*.java
>
>>  or Do you know how I can do field store?
>>
>>       doc.add(new Field("contents", parser.getReader(),
>> Field.Store.YES, Field.Index.NO));
>
> You cannot store it with a Reader.  You need to use Field.Text(String,
> String), or one of the other variations.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 21:38:52 2005
Return-Path: <java-user-return-13914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40900 invoked from network); 4 Apr 2005 21:38:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 21:38:51 -0000
Received: (qmail 67027 invoked by uid 500); 4 Apr 2005 21:38:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67007 invoked by uid 500); 4 Apr 2005 21:38:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66994 invoked by uid 99); 4 Apr 2005 21:38:46 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.194 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 14:38:45 -0700
Received: by rproxy.gmail.com with SMTP id b11so1363332rne
        for <java-user@lucene.apache.org>; Mon, 04 Apr 2005 14:38:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=nsJHRQaXRNExpFRq494/yCKprHf2yNtvDWBkt5Kys0c/yRLwbob0B1Roy62go+9IaXau5+NkpW1kXKHmq1NZWtpmZ2XTiRM+/pLbgyjqBd/Y2n8CqXVU/N2q8CcVaAzfXCWI422DMwPxBM/Gs9OA1aVs7QMbbTuLor6D4Rjl3Qw=
Received: by 10.38.67.50 with SMTP id p50mr5748419rna;
        Mon, 04 Apr 2005 14:38:40 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Mon, 4 Apr 2005 14:38:36 -0700 (PDT)
Message-ID: <c68e3917050404143832fc3826@mail.gmail.com>
Date: Mon, 4 Apr 2005 17:38:36 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: scalability w/ number of fields
In-Reply-To: <c68e391705040414352e96e0d0@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <c68e391705040414352e96e0d0@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Oops, sorry.  First went to dev by accident.

---------- Forwarded message ----------
I know Lucene is very scalable in many ways, but how about number of fieldnames?

We have an index using around 6000 unique fieldnames,
450,000 documents, and a total index size of 4GB.   It's very
sparse... documents don't have that many fields, but the number of
different fieldtypes is huge.

An optimize of this index took about an hour (mergefactor 10, compound index)
This is on enterprise hardware (fast SCSI raid, 6GB RAM, dual 2.8GHz Xeon).
The JVM was Java5 with 2.5GB heap.

This seems very long... anyone have any insights?
We'll be running more tests to see if decreasing the number of fields
has an impact.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 22:16:59 2005
Return-Path: <java-user-return-13915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50246 invoked from network); 4 Apr 2005 22:16:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 22:16:59 -0000
Received: (qmail 23564 invoked by uid 500); 4 Apr 2005 22:16:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23536 invoked by uid 500); 4 Apr 2005 22:16:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23513 invoked by uid 99); 4 Apr 2005 22:16:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc13.comcast.net (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 15:16:53 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc13) with ESMTP
          id <20050404221649015001h1f3e>; Mon, 4 Apr 2005 22:16:49 +0000
Message-ID: <4251BCD2.8070104@apache.org>
Date: Mon, 04 Apr 2005 15:16:50 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: scalability w/ number of fields
References: <c68e391705040414352e96e0d0@mail.gmail.com> <c68e3917050404143832fc3826@mail.gmail.com>
In-Reply-To: <c68e3917050404143832fc3826@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yonik Seeley wrote:
> I know Lucene is very scalable in many ways, but how about number of fieldnames?
> 
> We have an index using around 6000 unique fieldnames,

How many of these fields are indexed?  At this point I would recommend 
against having more than a handful of indexed fields.  If the fields are 
only stored, then it shouldn't make much difference.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 22:40:37 2005
Return-Path: <java-user-return-13916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57038 invoked from network); 4 Apr 2005 22:40:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2005 22:40:37 -0000
Received: (qmail 54156 invoked by uid 500); 4 Apr 2005 22:40:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53537 invoked by uid 500); 4 Apr 2005 22:40:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53521 invoked by uid 99); 4 Apr 2005 22:40:30 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.199 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.199)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 15:40:29 -0700
Received: by rproxy.gmail.com with SMTP id b11so1374098rne
        for <java-user@lucene.apache.org>; Mon, 04 Apr 2005 15:40:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=GspPixrI+madUEPt1blSaQOJ04sKx1Qo5CkIqgDiI/0X6AJCo4nJjZnYjXGB3TwxUEzw2peunmpZ2sX/Ofu8SJGsyoTd2syZ8IvjiRYW19DlEYlW1cX0IDG2U9o3kJU6aeHPupYwBkJDKqmdlhWm+EknEN13N0eK1ErOYcsZs+8=
Received: by 10.38.160.52 with SMTP id i52mr5703026rne;
        Mon, 04 Apr 2005 15:40:27 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Mon, 4 Apr 2005 15:40:27 -0700 (PDT)
Message-ID: <c68e39170504041540520673e4@mail.gmail.com>
Date: Mon, 4 Apr 2005 18:40:27 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: scalability w/ number of fields
In-Reply-To: <4251BCD2.8070104@apache.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <c68e391705040414352e96e0d0@mail.gmail.com>
	 <c68e3917050404143832fc3826@mail.gmail.com>
	 <4251BCD2.8070104@apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

They are all indexed (and they all need to be under the current design).

-Yonik

On Apr 4, 2005 6:16 PM, Doug Cutting <cutting@apache.org> wrote:
> Yonik Seeley wrote:
> > I know Lucene is very scalable in many ways, but how about number of fieldnames?
> >
> > We have an index using around 6000 unique fieldnames,
> 
> How many of these fields are indexed?  At this point I would recommend
> against having more than a handful of indexed fields.  If the fields are
> only stored, then it shouldn't make much difference.
> 
> Doug
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 00:45:38 2005
Return-Path: <java-user-return-13917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81315 invoked from network); 5 Apr 2005 00:45:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 00:45:38 -0000
Received: (qmail 86988 invoked by uid 500); 5 Apr 2005 00:45:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86106 invoked by uid 500); 5 Apr 2005 00:45:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86093 invoked by uid 99); 5 Apr 2005 00:45:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 17:45:33 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 570C113E2125; Mon,  4 Apr 2005 20:45:31 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 93CF613E2007
	for <java-user@lucene.apache.org>; Mon,  4 Apr 2005 20:45:20 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <E3AD9C3F9EC34949855CDFC6FB5A6C11755128@NYHWWEX001.hwwilson.local>
References: <E3AD9C3F9EC34949855CDFC6FB5A6C11755128@NYHWWEX001.hwwilson.local>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <744b6e88247f822d07aaec04729de92e@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: HTML pages highlighter
Date: Mon, 4 Apr 2005 20:45:14 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Apr 4, 2005, at 5:35 PM, Yagnesh Shah wrote:
> 	I end up purchasing your book "Lucene in Action". I have downloaded  
> your code samples. I am able to retrieve "result" only some time.  
> Below is the code I have taken from Search.jhtml in lucene demo. I  
> have 2 problem
>
> a) I am unable to display "result" using
> b) When I click on the title to retrieve document I do not see my  
> query highlighted.

First things first.... get something very very simple working and  
expand from there.  Here is the simple code from our HighlightIt.java:

     TermQuery query = new TermQuery(new Term("f", "ipsum"));
     QueryScorer scorer = new QueryScorer(query);
     SimpleHTMLFormatter formatter =
         new SimpleHTMLFormatter("<span class=\"highlight\">",
             "</span>");
     Highlighter highlighter = new Highlighter(formatter, scorer);
     Fragmenter fragmenter = new SimpleFragmenter(50);
     highlighter.setTextFragmenter(fragmenter);

     TokenStream tokenStream = new StandardAnalyzer()
         .tokenStream("f", new StringReader(text));

     String result =
         highlighter.getBestFragments(tokenStream, text, 5, "...");

One trick is that you must ensure the query you are passing to  
QueryScorer has been rewritten.  In our simple TermQuery case, that is  
not necessary, but in a general application it is.  You can call  
query.rewrite(reader) where reader is your IndexReader instance.  This  
ensures that range, fuzzy, and wildcard queries are expanded and  
highlightable.

I'm not sure what is wrong with the code you are trying.  But again,  
start simple, just try out our HighlightIt or our HighlightTest.  If  
those work fine for you then move on to integrating further with your  
index.  Besides the Query.rewrite() trick, you have to be sure that the  
text you want to highlight is available.  If you're pulling it from the  
index, it must be in a stored field, otherwise you need to retrieve it  
from elsewhere.

	Erik


>
> <java>
>
>   Searcher searcher = new IndexSearcher(getReader(indexName));
>
>   // get query from request
>   String queryString = request.getParameter("query");
>
>   query = QueryParser.parse(queryString, "contents", analyzer);
>   Hits hits = searcher.search(query);
>   SimpleHTMLFormatter formatter =
>   new SimpleHTMLFormatter();
>   Highlighter highlighter = new Highlighter(formatter, new  
> QueryScorer(query));
>   highlighter.setTextFragmenter(new SimpleFragmenter(50));
>   String FIELD_NAME = "contents";
>
>   for (int i = start; i < end; i++) {             // display the hits
>   Document doc = hits.doc(i);
>   String text = hits.doc(i).get(FIELD_NAME);
>   int maxNumFragmentsRequired = 5;
>   String fragmentSeparator = "...";
>   if ( text != null){
> 	TokenStream tokenStream = new  
> StandardAnalyzer().tokenStream(FIELD_NAME, new  
> java.io.StringReader(text));
> 	String result =  
> highlighter.getBestFragments		 
> (tokenStream,text,maxNumFragmentsRequired,fragmentSeparator);
>     	System.out.println("result=" +result);
>   }
>
>     String title = doc.get("title");
>     if (title.equals(""))                         // use url for docs  
> w/o title
>       title = doc.get("path");
>     </java>
>     <p><b><java type=print>(int)(hits.score(i) * 100.0f)</java>%
>     <a href="`doc.get("path")`">
>     <java type=print>Entities.encode(title)</java>
>     </b></a>
>     <java>
>     if (showSummaries) {                          // maybe show summary
>     </java>
>     <ul><i>Summary</i>:
>       <java type=print>Entities.encode(doc.get("summary"))</java>
>     </ul>
>     <java>
>     }
>   }
> </java>
>
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Thursday, March 31, 2005 8:04 PM
> To: java-user@lucene.apache.org
> Subject: Re: HTML pages highlighter
>
>
>
> On Mar 31, 2005, at 6:36 PM, Yagnesh Shah wrote:
>>     try {
>>       fis = new FileInputStream(f);
>>       HTMLParser parser = new HTMLParser(fis);
>>
>>       // Add the tag-stripped contents as a Reader-valued Text field
>> so it will
>>       // get tokenized and indexed.
>> //      doc.add(new Field("contents", parser.getReader()));
>>       LineNumberReader reader = new
>> LineNumberReader(parser.getReader());
>>       for (String l = reader.readLine(); l != null; l =
>> reader.readLine())
>> //        System.out.println(l);
>>       doc.add(Field.Text("contents", l));
>
> Notice that your loop here is adding a "contents" field for *every*
> line read since that is where the first semi-colon is.
>
> Look at using Luke to explore your index.  Try indexing just a dummy
> String:
>
> 	doc.add(Field.Text("contents", "some dummy text"));
>
> to show that it works.  Always always always simplify a complicated
> situation by doing the most obvious thing that _should_ work.
>
> Also, the demo Lucene code is not really designed to be used in a
> production application (sadly), so you're better off borrowing code
> from the many articles or our book to begin with.
>
> 	Erik
>
>
>>
>>       // Add the summary as a field that is stored and returned with
>>       // hit documents for display.
>>       doc.add(new Field("summary", parser.getSummary(),
>> Field.Store.YES, Field.Index.NO));
>>
>>       // Add the title as a field that it can be searched and that is
>> stored.
>>       doc.add(new Field("title", parser.getTitle(), Field.Store.YES,
>> Field.Index.TOKENIZED));
>>     }
>>
>>
>>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: Wednesday, March 30, 2005 7:38 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: HTML pages highlighter
>>
>>
>>
>> On Mar 30, 2005, at 4:46 PM, Yagnesh Shah wrote:
>>
>>> Hi! Eric,
>>
>> Erik - with a 'k' - Sorry, I let it slide once though :)
>>
>>> 	I try to modified that with this but I get compile error. Do you  
>>> have
>>> any code snippet of highlighting code to pull the contents from the
>>> original source?
>>
>> I have a whole book full of code examples :)
>> http://www.lucenebook.com - Grab the source code and look in
>> src/lia/tools at Highlight*.java
>>
>>>  or Do you know how I can do field store?
>>>
>>>       doc.add(new Field("contents", parser.getReader(),
>>> Field.Store.YES, Field.Index.NO));
>>
>> You cannot store it with a Reader.  You need to use Field.Text(String,
>> String), or one of the other variations.
>>
>> 	Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 00:55:16 2005
Return-Path: <java-user-return-13918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82647 invoked from network); 5 Apr 2005 00:55:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 00:55:16 -0000
Received: (qmail 96348 invoked by uid 500); 5 Apr 2005 00:55:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95471 invoked by uid 500); 5 Apr 2005 00:55:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95457 invoked by uid 99); 5 Apr 2005 00:55:12 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from alpha.Xerox.COM (HELO alpha.xerox.com) (13.1.64.93)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 04 Apr 2005 17:55:11 -0700
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <147849(1)>; Mon, 4 Apr 2005 17:54:54 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58617>; Mon, 4 Apr 2005 17:54:48 PDT
To: java-user@lucene.apache.org
Subject: Normalizing search scores over multiple indices
Date: Mon, 4 Apr 2005 17:54:39 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <05Apr4.175448pdt."58617"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've got a situation where I'm searching over a number of different
repositories, each containing a different set of documents.  I'd like
to run searches over, say, 4 different indices, then combine the
results outside of Java to present to the user.  Is there any way of
normalizing search scores over multiple searches over different
indices?

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 01:00:36 2005
Return-Path: <java-user-return-13919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83638 invoked from network); 5 Apr 2005 01:00:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 01:00:36 -0000
Received: (qmail 2110 invoked by uid 500); 5 Apr 2005 01:00:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1997 invoked by uid 500); 5 Apr 2005 01:00:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1980 invoked by uid 99); 5 Apr 2005 01:00:29 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31101.mail.mud.yahoo.com (HELO web31101.mail.mud.yahoo.com) (68.142.200.34)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 04 Apr 2005 18:00:28 -0700
Received: (qmail 62486 invoked by uid 60001); 5 Apr 2005 01:00:26 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=AWZoVl4RE7fQfde6PArutJf/4Jrp7ZtXT2xSGJ/e8A12Sg7kK3sxlhyly3LF/17j1aauI7Tgeo+Unus+QFONoGvyxOb6PonIND66QJmfvm7hMcSKSM/KQ6/qfH0dWo6KaRUYBGNXFh/MX0TGmThN7QoVqUWeOf62ZVh526cNeP8=  ;
Message-ID: <20050405010026.62484.qmail@web31101.mail.mud.yahoo.com>
Received: from [69.201.138.79] by web31101.mail.mud.yahoo.com via HTTP; Mon, 04 Apr 2005 18:00:25 PDT
Date: Mon, 4 Apr 2005 18:00:25 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Normalizing search scores over multiple indices
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think Chuck and friends have provided just such a patch, but we
haven't applied it yet.... :(

Otis

--- Bill Janssen <janssen@parc.com> wrote:
> I've got a situation where I'm searching over a number of different
> repositories, each containing a different set of documents.  I'd like
> to run searches over, say, 4 different indices, then combine the
> results outside of Java to present to the user.  Is there any way of
> normalizing search scores over multiple searches over different
> indices?
> 
> Bill
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 01:03:04 2005
Return-Path: <java-user-return-13920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84134 invoked from network); 5 Apr 2005 01:03:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 01:03:04 -0000
Received: (qmail 5483 invoked by uid 500); 5 Apr 2005 01:03:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5132 invoked by uid 500); 5 Apr 2005 01:02:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5118 invoked by uid 99); 5 Apr 2005 01:02:58 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31108.mail.mud.yahoo.com (HELO web31108.mail.mud.yahoo.com) (68.142.200.41)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 04 Apr 2005 18:02:57 -0700
Received: (qmail 4121 invoked by uid 60001); 5 Apr 2005 01:02:55 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=jy05LzwE0gCjX4ZdAkeBYqElESTWB7Lf3EjuEJCVDMRrtBG3Xvb1O2qtPTQ5NGpz401j5LD42MXP7Dn5pLin0v/KyXrBE9alhakEfBCdMfH+y4PV4Xf++sskhZNpHRj7OdpvVqJ4k3+MJOezSOb+i+i3A7hpvESfQEKOK69WCDI=  ;
Message-ID: <20050405010255.4119.qmail@web31108.mail.mud.yahoo.com>
Received: from [69.201.138.79] by web31108.mail.mud.yahoo.com via HTTP; Mon, 04 Apr 2005 18:02:55 PDT
Date: Mon, 4 Apr 2005 18:02:55 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: filter search
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Omar,

You could iterate through hits (results), pulling out a document at a
time and checking the appropriate field (e.g.
field.endsWithIgnoreCase(".com") )

Otis

--- Omar Didi <odidi@Cyveillance.com> wrote:
> hi guys,
> 
> is it possible to filter the hits returned from a certain query?. for
> example if I have a search like this:
> 	Query searchQuery = queryParser.parse( query );
> 	Hits  results = m_searcher.search( searchQuery );
> is there a way to use the results and find out how many of the
> returned documents their url ends with com, and how many ends with
> net and so on... without the need to form a new query?.
> thanks.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 01:38:33 2005
Return-Path: <java-user-return-13921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90153 invoked from network); 5 Apr 2005 01:38:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 01:38:33 -0000
Received: (qmail 41516 invoked by uid 500); 5 Apr 2005 01:38:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41491 invoked by uid 500); 5 Apr 2005 01:38:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41477 invoked by uid 99); 5 Apr 2005 01:38:26 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from alpha.Xerox.COM (HELO alpha.xerox.com) (13.1.64.93)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 04 Apr 2005 18:38:24 -0700
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <147884(1)>; Mon, 4 Apr 2005 18:38:14 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58617>; Mon, 4 Apr 2005 18:38:08 PDT
To: java-user@lucene.apache.org
Subject: Re: Normalizing search scores over multiple indices 
In-Reply-To: Your message of "Mon, 04 Apr 2005 18:00:25 PDT."
             <20050405010026.62484.qmail@web31101.mail.mud.yahoo.com> 
Date: Mon, 4 Apr 2005 18:38:03 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <05Apr4.183808pdt."58617"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, Otis.

Yes, I looked at Chuck's messages on the mailing list.  But he seems
to be focussing on MultiSearcher approaches, where I'm looking for a
way (I think) to adjust each individual index so that it will give
scores similar to the others.  I don't quite see how to merge the
results outside of Java without some such calibration.

Bill

> I think Chuck and friends have provided just such a patch, but we
> haven't applied it yet.... :(
> 
> Otis
> 
> --- Bill Janssen <janssen@parc.com> wrote:
> > I've got a situation where I'm searching over a number of different
> > repositories, each containing a different set of documents.  I'd like
> > to run searches over, say, 4 different indices, then combine the
> > results outside of Java to present to the user.  Is there any way of
> > normalizing search scores over multiple searches over different
> > indices?
> > 
> > Bill
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 01:51:01 2005
Return-Path: <java-user-return-13922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91745 invoked from network); 5 Apr 2005 01:50:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 01:50:58 -0000
Received: (qmail 54230 invoked by uid 500); 5 Apr 2005 01:50:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54209 invoked by uid 500); 5 Apr 2005 01:50:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54196 invoked by uid 99); 5 Apr 2005 01:50:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 18:50:50 -0700
Received: from [172.25.1.184] ([::ffff:67.125.239.59])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Mon, 04 Apr 2005 20:50:49 -0500
  id 0007418B.4251EEFA.00005346
Message-ID: <4251EEE8.4040301@allthingslocal.com>
Date: Mon, 04 Apr 2005 18:50:32 -0700
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Normalizing search scores over multiple indices
References: <05Apr4.183808pdt."58617"@synergy1.parc.xerox.com>
In-Reply-To: <05Apr4.183808pdt."58617"@synergy1.parc.xerox.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Bill Janssen writes (4/4/2005 6:38 PM):

>Hi, Otis.
>
>Yes, I looked at Chuck's messages on the mailing list.  But he seems
>to be focussing on MultiSearcher approaches, where I'm looking for a
>way (I think) to adjust each individual index so that it will give
>scores similar to the others.  I don't quite see how to merge the
>results outside of Java without some such calibration.
>  
>
There is also a long thread on this that pre-dates Wolf's solution for 
the MultiSearcher's.  I've never created the more general patch to make 
scores across separate indices normalizable.  In conversations with 
Doug, I concluded the best approach is to generalize the notion of a 
search score into a score object, thereby allowing multiple score facets 
(e.g., relevance as defined now, percent of query terms matched, etc.).  
The original idea was to use the percent of boost-weighted query terms 
matched of the highest result as the top normalized score (which fully 
defines the normalization).

Sorry it's not there...

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 02:22:21 2005
Return-Path: <java-user-return-13923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97815 invoked from network); 5 Apr 2005 02:22:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 02:22:21 -0000
Received: (qmail 89565 invoked by uid 500); 5 Apr 2005 02:22:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89544 invoked by uid 500); 5 Apr 2005 02:22:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 81066 invoked by uid 99); 5 Apr 2005 02:14:39 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_POST,FORGED_RCVD_HELO,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
X-Server-Uuid: E1A60121-6F68-4E45-9692-B480AF34C963
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: Time taken in Indexing when the index is already huge
Date: Mon, 4 Apr 2005 21:14:20 -0500
Message-ID: <ED0BEE447609A74DA6D119E82F5B8E34011CE26B@USTXDFWH13.its.verizon.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Time taken in Indexing when the index is already huge
Thread-Index: AcU5hS0/igddOvYrTKynqaGEDibvyw==
From: "Goel, Nikhil" <nikhil.goel@verizon.com>
To: java-user@lucene.apache.org
X-OriginalArrivalTime: 05 Apr 2005 02:14:20.0624 (UTC)
 FILETIME=[2D789D00:01C53985]
X-WSS-ID: 6E4F2BF74D8338120-01-01
Content-Type: multipart/alternative;
 boundary="----_=_NextPart_001_01C53985.2D44ACC0"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C53985.2D44ACC0
Content-Type: text/plain;
 charset=iso-8859-2
Content-Transfer-Encoding: quoted-printable

Hi,=20

  =20

I have been using lucene-1.3.jar for quite some time and we are using =
another library to store the index in DB.=20

When we started indexing  the writer.optimize used to take in the range =
of 600-800 milliseconds to return but now our index has grown to huge =
proportion and its around 10 MB hence the writer.optimize is taking =
around 30-40 seconds and it is not acceptable for our solution. I put =
the timings on writer.optimize() and it's the one which takes most of =
this time.=20

=20

So I am just wondering if someone is facing the same problem in indexing =
the data when the index is already huge or is there another way to =
manage such huge index.

=20

Here is the simple code which we use to index the data.=20

IndexWriter writer =3D new IndexWriter(dbDirectory, new =
StandardAnalyzer(), false); //Create an indexwriter

writer.addDocument(doc); //doc is of type  =
org.apache.lucene.document.Document...

writer.optimize(); //optimize is called on indexwriter..This is the one =
which takes most of the time and is responsible for the delay.

writer.close(); // indexwriter is closed

=20

=20

The time taken by optimize call grows a lot when the index is of larger =
size. I tried to look it up on Erik Hatcher and Otis Gospodneti=E6 =
<http://www.manning.com/hatcher2#author#author>  book too but everywhere =
it says Lucene is quite scalable and don't have trouble in indexing even =
with huge data. Can anyone please provide  some insight into this?

=20

Thanks.

Nikhil

=20

=20


------_=_NextPart_001_01C53985.2D44ACC0--


From java-user-return-13924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 03:54:16 2005
Return-Path: <java-user-return-13924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13338 invoked from network); 5 Apr 2005 03:54:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 03:54:16 -0000
Received: (qmail 85519 invoked by uid 500); 5 Apr 2005 03:54:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85485 invoked by uid 500); 5 Apr 2005 03:54:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85472 invoked by uid 99); 5 Apr 2005 03:54:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 04 Apr 2005 20:54:07 -0700
Received: from [192.168.1.100] ([::ffff:66.92.12.207])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Mon, 04 Apr 2005 22:54:07 -0500
  id 0007418B.42520BDF.00005D33
Message-ID: <42520BD2.5080708@allthingslocal.com>
Date: Mon, 04 Apr 2005 20:53:54 -0700
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [Fwd: Re: Time taken in Indexing when the index is already huge]
Content-Type: text/plain; charset=ISO-8859-2; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Goel, Nikhil writes (4/4/2005 7:14 PM):

>Hi, 
>
>   
>
>I have been using lucene-1.3.jar for quite some time and we are using another library to store the index in DB. 
>
>When we started indexing  the writer.optimize used to take in the range of 600-800 milliseconds to return but now our index has grown to huge proportion and its around 10 MB hence the writer.optimize is taking around 30-40 seconds and it is not acceptable for our solution. I put the timings on writer.optimize() and it's the one which takes most of this time. 
>
> 
>
>So I am just wondering if someone is facing the same problem in indexing the data when the index is already huge or is there another way to manage such huge index.
>
> 
>
>Here is the simple code which we use to index the data. 
>
>IndexWriter writer = new IndexWriter(dbDirectory, new StandardAnalyzer(), false); //Create an indexwriter
>
>writer.addDocument(doc); //doc is of type  org.apache.lucene.document.Document...
>
>writer.optimize(); //optimize is called on indexwriter..This is the one which takes most of the time and is responsible for the delay.
>
>writer.close(); // indexwriter is closed
>  
>
Does this code imply you are optimizing after every new document is 
indexed?  10MB is actually a pretty small index.  Depending on your 
inflow of documents, you should be able to optimize maybe once a day, 
during your application's least busy period.  Your IndexSearcher can 
still search your documents effectively while the index is unoptimized.  
As a first step, try not optimizing at all.

Chuck

> 
>
> 
>
>The time taken by optimize call grows a lot when the index is of larger size. I tried to look it up on Erik Hatcher and Otis Gospodnetiæ <http://www.manning.com/hatcher2#author#author>  book too but everywhere it says Lucene is quite scalable and don't have trouble in indexing even with huge data. Can anyone please provide  some insight into this?
>
> 
>
>Thanks.
>
>Nikhil
>
> 
>
> 
>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 07:40:27 2005
Return-Path: <java-user-return-13925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62178 invoked from network); 5 Apr 2005 07:40:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 07:40:27 -0000
Received: (qmail 54869 invoked by uid 500); 5 Apr 2005 07:40:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54601 invoked by uid 500); 5 Apr 2005 07:40:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54587 invoked by uid 99); 5 Apr 2005 07:40:16 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail21.messagelabs.com (HELO mail21.messagelabs.com) (62.173.108.19)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 05 Apr 2005 00:40:15 -0700
X-VirusChecked: Checked
X-Env-Sender: lee.turner@oyster.com
X-Msg-Ref: server-7.tower-21.messagelabs.com!1112686802!18945720!1
X-StarScan-Version: 5.4.11; banners=oyster.com,-,-
X-Originating-IP: [193.132.201.148]
Received: (qmail 5830 invoked from network); 5 Apr 2005 07:40:03 -0000
Received: from mail.oyster.co.uk (HELO opexch2.ad.oyster.com) (193.132.201.148)
  by server-7.tower-21.messagelabs.com with SMTP; 5 Apr 2005 07:40:03 -0000
Received: from opexch1.ad.oyster.com ([10.10.10.83]) by opexch2.ad.oyster.com with Microsoft SMTPSVC(6.0.3790.211);
	 Tue, 5 Apr 2005 08:38:05 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C539B2.AD78DA37"
Subject: Strategies for updating indexes.
Date: Tue, 5 Apr 2005 08:38:04 +0100
Message-ID: <B2467B4F52C33C4FB81F5B5433C3D1AC018D4DCD@opexch1.ad.oyster.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Strategies for updating indexes.
Thread-Index: AcU5smdMB5egXd75QjmAezWA3cABSQ==
From: "Lee Turner" <Lee.Turner@oyster.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 05 Apr 2005 07:38:05.0537 (UTC) FILETIME=[679F1D10:01C539B2]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C539B2.AD78DA37
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi

=20

I=20was=20wondering=20whether=20anyone=20has=20any=20experience=20of=20mul=
tithreaded
updates=20to=20indexes.=20=20I=20the=20web=20app=20I=20am=20working=20on=20=
there=20are=20additions,
updates=20and=20deletes=20that=20need=20to=20happen=20to=20the=20index=20t=
hroughout=20the
runtime=20of=20the=20application.=20=20Also,=20the=20application=20is=20ru=
n=20in=20a=20cluster
with=20each=20app=20server=20having=20its=20own=20index.=20=20This=20means=
=20that=20periodically
each=20app=20server=20is=20going=20to=20have=20to=20go=20through=20a=20re-=
indexing=20process=20to
make=20sure=20that=20its=20index=20has=20all=20the=20changes=20from=20the=20=
other=20app=20servers
in=20it.=20=20This=20process=20can=20take=20a=20few=20seconds=20so=20if=20=
another=20update=20to=20the
index=20occurs=20at=20this=20time=20it=20will=20need=20to=20be=20queued=20=
in=20some=20way=20to=20make
sure=20it=20happens=20after=20the=20re-indexing.

=20

I=20was=20just=20wondering=20if=20anyone=20had=20any=20pointers=20for=20do=
ing=20this=20kind=20of
thing.=20=20Any=20help=20would=20be=20gratefully=20appreciated.

=20

Many=20thanks

Lee

=20

=20

Lee=20Turner=20|=20Java=20Developer=20|=20Oyster=20Partners=20

D.=20+44=20(0)20=2074461229=20
T.=20+44=20(0)20=207446=207500=20

www.oyster.com

=20


__________________________________________________________________________=
_______________________________________________
Internet=20communications=20are=20not=20secure=20and=20therefore=20Oyster=20=
Partners=20Ltd=20does=20not=20accept=20legal=20responsibility=20for=20the=20=
contents=20of=20this=20message.=20Any=20views=20or=20opinions=20presented=20=
are=20solely=20those=20of=20the=20author=20and=20do=20not=20necessarily=20=
represent=20those=20of=20Oyster=20Partners=20Ltd.
------_=_NextPart_001_01C539B2.AD78DA37--

From java-user-return-13926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 08:30:16 2005
Return-Path: <java-user-return-13926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74781 invoked from network); 5 Apr 2005 08:30:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 08:30:16 -0000
Received: (qmail 21439 invoked by uid 500); 5 Apr 2005 08:30:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21419 invoked by uid 500); 5 Apr 2005 08:30:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21403 invoked by uid 99); 5 Apr 2005 08:30:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ausdauer.webit.de (HELO ausdauer.webit.de) (195.30.114.250)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 01:29:57 -0700
Received: from cordoba (cordoba.webit.de [195.30.114.47])
	by ausdauer.webit.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j358TqAB017009
	for <java-user@lucene.apache.org>; Tue, 5 Apr 2005 10:29:52 +0200
Received: by cordoba (Postfix, from userid 1000)
	id E18E35DEED; Tue,  5 Apr 2005 10:29:52 +0200 (CEST)
Date: Tue, 5 Apr 2005 10:29:52 +0200
From: Jens Kraemer <kraemer@webit.de>
To: java-user@lucene.apache.org
Subject: Re: Strategies for updating indexes.
Message-ID: <20050405082952.GB12412@cordoba.webit.de>
References: <B2467B4F52C33C4FB81F5B5433C3D1AC018D4DCD@opexch1.ad.oyster.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <B2467B4F52C33C4FB81F5B5433C3D1AC018D4DCD@opexch1.ad.oyster.com>
User-Agent: Mutt/1.5.6+20040907i
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
please see comments below.

On Tue, Apr 05, 2005 at 08:38:04AM +0100, Lee Turner wrote:
> Hi
> 
> I was wondering whether anyone has any experience of multithreaded
> updates to indexes.  I the web app I am working on there are additions,
> updates and deletes that need to happen to the index throughout the
> runtime of the application.  Also, the application is run in a cluster
> with each app server having its own index.  This means that periodically
> each app server is going to have to go through a re-indexing process to
> make sure that its index has all the changes from the other app servers
> in it.  This process can take a few seconds so if another update to the
> index occurs at this time it will need to be queued in some way to make
> sure it happens after the re-indexing.
> 
> I was just wondering if anyone had any pointers for doing this kind of
> thing.  Any help would be gratefully appreciated.

I usually have a service class wrapping all access to the lucene index,
which has a queue where my Servlets or Actions put the documents to be
updated or added in.  There is a single instance of this class for the
whole web app, and a thread regularly waking up and processing the
elements of the queue.

Note the queue has to be threadsafe or has to be synchronized
externally. 

Since there is only one instance of this service class, it is the only
one who will ever write to the index (if the same index is not used by
other applications).

During re-indexing the thread regularly processing the queue will
be paused. After re-indexing it is started again, processing all pending 
changes from the queue. The re-indexing itself takes place in another
thread, which is started by quartz in my case.


hope this helps you somehow,

Jens


-- 
webit! Gesellschaft für neue Medien mbH          www.webit.de
Dipl.-Wirtschaftsingenieur Jens Krämer       kraemer@webit.de
Schnorrstraße 76                      Telefon +49 351 46766 0
D-01069 Dresden                      Telefax +49 351 46766 66

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 08:56:55 2005
Return-Path: <java-user-return-13927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82883 invoked from network); 5 Apr 2005 08:56:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 08:56:55 -0000
Received: (qmail 86395 invoked by uid 500); 5 Apr 2005 08:56:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86358 invoked by uid 500); 5 Apr 2005 08:56:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86344 invoked by uid 99); 5 Apr 2005 08:56:41 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail21.messagelabs.com (HELO mail21.messagelabs.com) (62.173.108.19)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 05 Apr 2005 01:56:40 -0700
X-VirusChecked: Checked
X-Env-Sender: lee.turner@oyster.com
X-Msg-Ref: server-18.tower-21.messagelabs.com!1112691351!5558556!1
X-StarScan-Version: 5.4.11; banners=oyster.com,-,-
X-Originating-IP: [193.132.201.148]
Received: (qmail 29543 invoked from network); 5 Apr 2005 08:55:52 -0000
Received: from mail.oyster.co.uk (HELO opexch2.ad.oyster.com) (193.132.201.148)
  by server-18.tower-21.messagelabs.com with SMTP; 5 Apr 2005 08:55:52 -0000
Received: from opexch1.ad.oyster.com ([10.10.10.83]) by opexch2.ad.oyster.com with Microsoft SMTPSVC(6.0.3790.211);
	 Tue, 5 Apr 2005 09:53:54 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Strategies for updating indexes.
Date: Tue, 5 Apr 2005 09:53:53 +0100
Message-ID: <B2467B4F52C33C4FB81F5B5433C3D1AC018D4E15@opexch1.ad.oyster.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Strategies for updating indexes.
Thread-Index: AcU5ufdSz4v8vjh3T3KBFOmXWakwggAAZefQ
From: "Lee Turner" <Lee.Turner@oyster.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 05 Apr 2005 08:53:54.0505 (UTC) FILETIME=[FF048B90:01C539BC]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

Thank=20you=20for=20replying=20so=20quickly.=20=20I=20am=20very=20pleased=20=
as=20I=20have=20just=20started=20down=20the=20road=20of=20implementing=20a=
=20solution=20which=20is=20very=20nearly=20exactly=20like=20the=20one=20yo=
u=20describe=20below.=20=20It=20is=20good=20to=20know=20that=20I=20am=20no=
t=20heading=20down=20a=20dead=20end.=20=20I=20hadn't=20thought=20about=20t=
he=20re-indexing=20thread=20pausing=20the=20queue=20to=20stop=20it=20proce=
ssing=20while=20the=20re-indexing=20takes=20place.=20=20I=20will=20also=20=
take=20a=20look=20at=20quartz.

Your=20input=20is=20very=20much=20appreciated

Many=20thanks
Lee


-----Original=20Message-----
From:=20Jens=20Kraemer=20[mailto:kraemer@webit.de]=20
Sent:=2005=20April=202005=2009:30
To:=20java-user@lucene.apache.org
Subject:=20Re:=20Strategies=20for=20updating=20indexes.

Hi,
please=20see=20comments=20below.

On=20Tue,=20Apr=2005,=202005=20at=2008:38:04AM=20+0100,=20Lee=20Turner=20w=
rote:
>=20Hi
>=20
>=20I=20was=20wondering=20whether=20anyone=20has=20any=20experience=20of=20=
multithreaded
>=20updates=20to=20indexes.=20=20I=20the=20web=20app=20I=20am=20working=20=
on=20there=20are=20additions,
>=20updates=20and=20deletes=20that=20need=20to=20happen=20to=20the=20index=
=20throughout=20the
>=20runtime=20of=20the=20application.=20=20Also,=20the=20application=20is=20=
run=20in=20a=20cluster
>=20with=20each=20app=20server=20having=20its=20own=20index.=20=20This=20m=
eans=20that=20periodically
>=20each=20app=20server=20is=20going=20to=20have=20to=20go=20through=20a=20=
re-indexing=20process=20to
>=20make=20sure=20that=20its=20index=20has=20all=20the=20changes=20from=20=
the=20other=20app=20servers
>=20in=20it.=20=20This=20process=20can=20take=20a=20few=20seconds=20so=20i=
f=20another=20update=20to=20the
>=20index=20occurs=20at=20this=20time=20it=20will=20need=20to=20be=20queue=
d=20in=20some=20way=20to=20make
>=20sure=20it=20happens=20after=20the=20re-indexing.
>=20
>=20I=20was=20just=20wondering=20if=20anyone=20had=20any=20pointers=20for=20=
doing=20this=20kind=20of
>=20thing.=20=20Any=20help=20would=20be=20gratefully=20appreciated.

I=20usually=20have=20a=20service=20class=20wrapping=20all=20access=20to=20=
the=20lucene=20index,
which=20has=20a=20queue=20where=20my=20Servlets=20or=20Actions=20put=20the=
=20documents=20to=20be
updated=20or=20added=20in.=20=20There=20is=20a=20single=20instance=20of=20=
this=20class=20for=20the
whole=20web=20app,=20and=20a=20thread=20regularly=20waking=20up=20and=20pr=
ocessing=20the
elements=20of=20the=20queue.

Note=20the=20queue=20has=20to=20be=20threadsafe=20or=20has=20to=20be=20syn=
chronized
externally.=20

Since=20there=20is=20only=20one=20instance=20of=20this=20service=20class,=20=
it=20is=20the=20only
one=20who=20will=20ever=20write=20to=20the=20index=20(if=20the=20same=20in=
dex=20is=20not=20used=20by
other=20applications).

During=20re-indexing=20the=20thread=20regularly=20processing=20the=20queue=
=20will
be=20paused.=20After=20re-indexing=20it=20is=20started=20again,=20processi=
ng=20all=20pending=20
changes=20from=20the=20queue.=20The=20re-indexing=20itself=20takes=20place=
=20in=20another
thread,=20which=20is=20started=20by=20quartz=20in=20my=20case.


hope=20this=20helps=20you=20somehow,

Jens


--=20
webit!=20Gesellschaft=20f=FCr=20neue=20Medien=20mbH=20=20=20=20=20=20=20=20=
=20=20www.webit.de
Dipl.-Wirtschaftsingenieur=20Jens=20Kr=E4mer=20=20=20=20=20=20=20kraemer@w=
ebit.de
Schnorrstra=DFe=2076=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=
=20=20=20=20Telefon=20+49=20351=2046766=200
D-01069=20Dresden=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=
=20=20=20Telefax=20+49=20351=2046766=2066

---------------------------------------------------------------------
To=20unsubscribe,=20e-mail:=20java-user-unsubscribe@lucene.apache.org
For=20additional=20commands,=20e-mail:=20java-user-help@lucene.apache.org


__________________________________________________________________________=
_______________________________________________
Internet=20communications=20are=20not=20secure=20and=20therefore=20Oyster=20=
Partners=20Ltd=20does=20not=20accept=20legal=20responsibility=20for=20the=20=
contents=20of=20this=20message.=20Any=20views=20or=20opinions=20presented=20=
are=20solely=20those=20of=20the=20author=20and=20do=20not=20necessarily=20=
represent=20those=20of=20Oyster=20Partners=20Ltd.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 09:24:32 2005
Return-Path: <java-user-return-13928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92351 invoked from network); 5 Apr 2005 09:24:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 09:24:32 -0000
Received: (qmail 27044 invoked by uid 500); 5 Apr 2005 09:24:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27024 invoked by uid 500); 5 Apr 2005 09:24:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27010 invoked by uid 99); 5 Apr 2005 09:24:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail01.de.ina.com (HELO mail01.de.ina.com) (159.51.231.15)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 02:24:20 -0700
Received: from de010245.de.ina.com (de010245.de.ina.com [159.51.231.10])
        by mail01.de.ina.com (SMTP-GW1.2) with SMTP id j359LfXF016805
        for <java-user@lucene.apache.org>; Tue, 5 Apr 2005 11:21:41 +0200
Received: From de010359.de.ina.com ([10.160.1.13]) by de010245.de.ina.com (WebShield SMTP v4.5 MR1a P0803.345);
	id 1112693086328; Tue, 5 Apr 2005 11:24:46 +0200
Received: from de010367.de.ina.com ([10.160.13.7]) by de010359.de.ina.com with Microsoft SMTPSVC(6.0.3790.211);
	 Tue, 5 Apr 2005 11:24:16 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Strategies for updating indexes.
Date: Tue, 5 Apr 2005 11:24:15 +0200
Message-ID: <00ADB1D1C6D9434989D51BA9E55FAE0E0242559B@de010367.de.ina.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Strategies for updating indexes.
Thread-Index: AcU5smdMB5egXd75QjmAezWA3cABSQACz4ew
From: "Nestel, Frank  IZ/HZA-IOL" <nestefan@de.ina.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 05 Apr 2005 09:24:16.0233 (UTC) FILETIME=[3CDA2D90:01C539C1]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

we are using a very cautious method for batch upating.=20

We have long (hours) running updates on our index, but=20
complete reindexing would even be longer (days). But I
guess our strategy could be scaled down to hours or even
less.

So what we do is, we keep two instances
of the index. There is a file which contains a link to the
currently used index for reading. The search application
accesses the index through a thin transparent API which
whatches this file and can switch from one search request
to the next, but does keep the IndexReader open as long
as no switching is need.

When we reindex, we duplicate the "read" instance of the=20
index and then do an selective update on this copied duplicate.=20
Note we need some HD space and time for this. After indexing
there is some checking and comparison between old and new
instance of the index. Only if this looks successful we=20
toggle the above "pointer" file and the transparent API switches
to the new index. In case human recognition still finds the
checked index bad, we can still switch back to the second
last presumably "good" index.=20

Cheers,
Frank

>-----Original Message-----
>From: Lee Turner [mailto:Lee.Turner@oyster.com]=20
>Sent: Tuesday, April 05, 2005 9:38 AM
>To: java-user@lucene.apache.org
>Subject: Strategies for updating indexes.
>
>
>Hi
>
>=20
>
>I was wondering whether anyone has any experience of=20
>multithreaded updates to indexes.  I the web app I am working=20
>on there are additions, updates and deletes that need to=20
>happen to the index throughout the runtime of the application.=20
> Also, the application is run in a cluster with each app=20
>server having its own index.  This means that periodically=20
>each app server is going to have to go through a re-indexing=20
>process to make sure that its index has all the changes from=20
>the other app servers in it.  This process can take a few=20
>seconds so if another update to the index occurs at this time=20
>it will need to be queued in some way to make sure it happens=20
>after the re-indexing.
>
>=20
>
>I was just wondering if anyone had any pointers for doing this=20
>kind of thing.  Any help would be gratefully appreciated.
>
>=20
>
>Many thanks
>
>Lee
>
>=20
>
>=20
>
>Lee Turner | Java Developer | Oyster Partners=20
>
>D. +44 (0)20 74461229=20
>T. +44 (0)20 7446 7500=20
>
>www.oyster.com
>
>=20
>
>
>_______________________________________________________________
>__________________________________________________________
>Internet communications are not secure and therefore Oyster=20
>Partners Ltd does not accept legal responsibility for the=20
>contents of this message. Any views or opinions presented are=20
>solely those of the author and do not necessarily represent=20
>those of Oyster Partners Ltd.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 09:44:32 2005
Return-Path: <java-user-return-13929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99363 invoked from network); 5 Apr 2005 09:44:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 09:44:31 -0000
Received: (qmail 67286 invoked by uid 500); 5 Apr 2005 09:44:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67266 invoked by uid 500); 5 Apr 2005 09:44:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67251 invoked by uid 99); 5 Apr 2005 09:44:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from artishost.net (HELO artisangel.artishost.net) (69.56.132.178)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 02:44:23 -0700
Received: from [81.25.38.188] (helo=[81.25.38.188])
	by artisangel.artishost.net with esmtpa (Exim 4.43)
	id 1DIkY6-0004xX-J6
	for java-user@lucene.apache.org; Tue, 05 Apr 2005 04:40:44 -0500
Date: Tue, 5 Apr 2005 12:44:10 +0300
From: Yura Smolsky <info@altervision.biz>
X-Mailer: The Bat! (v3.0.1.33) Professional
Reply-To: Yura Smolsky <info@altervision.biz>
Organization: AlterVision Web Development Group
X-Priority: 3 (Normal)
Message-ID: <169729875.20050405124410@altervision.biz>
To: java-user@lucene.apache.org
Subject: Re[2]: exact match
In-Reply-To: <288210f177f90b25236e0ad7abe73c98@ehatchersolutions.com>
References: <1361527599.20050404233436@altervision.biz>
 <288210f177f90b25236e0ad7abe73c98@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - artisangel.artishost.net
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - altervision.biz
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello, Erik.


EH> On Apr 4, 2005, at 4:34 PM, Yura Smolsky wrote:
>> Hello, java-user.
>>
>> I have documents with tokenized, indexes and stored field. This field
>> contain one-two words usually. I need to be able to search exact
>> matches for two words.
>> For example search "John" should return documents with field
>> containing "John" only, not "John Doe" or "John Foo".
>>
>> Any ideas?
EH> Use an untokenized field to search on in the case of finding an exact
EH> match.

And no other ways to reach this?

Yura Smolsky.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 10:07:17 2005
Return-Path: <java-user-return-13930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8039 invoked from network); 5 Apr 2005 10:07:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 10:07:16 -0000
Received: (qmail 23447 invoked by uid 500); 5 Apr 2005 10:07:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23283 invoked by uid 500); 5 Apr 2005 10:07:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23267 invoked by uid 99); 5 Apr 2005 10:07:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 03:07:05 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8BB3313E200A; Tue,  5 Apr 2005 06:07:02 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 5F3E913E2007
	for <java-user@lucene.apache.org>; Tue,  5 Apr 2005 06:06:56 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <169729875.20050405124410@altervision.biz>
References: <1361527599.20050404233436@altervision.biz> <288210f177f90b25236e0ad7abe73c98@ehatchersolutions.com> <169729875.20050405124410@altervision.biz>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <734c4280c8f05f264c3f621d16f571d5@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Re[2]: exact match
Date: Tue, 5 Apr 2005 06:06:55 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 5, 2005, at 5:44 AM, Yura Smolsky wrote:
> EH> On Apr 4, 2005, at 4:34 PM, Yura Smolsky wrote:
>>> Hello, java-user.
>>>
>>> I have documents with tokenized, indexes and stored field. This field
>>> contain one-two words usually. I need to be able to search exact
>>> matches for two words.
>>> For example search "John" should return documents with field
>>> containing "John" only, not "John Doe" or "John Foo".
>>>
>>> Any ideas?
> EH> Use an untokenized field to search on in the case of finding an 
> exact
> EH> match.
>
> And no other ways to reach this?

Not that I know of.  Could you give us a more concrete example of what 
you're trying to achieve?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 13:17:35 2005
Return-Path: <java-user-return-13931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63382 invoked from network); 5 Apr 2005 13:17:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 13:17:35 -0000
Received: (qmail 17499 invoked by uid 500); 5 Apr 2005 13:17:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17472 invoked by uid 500); 5 Apr 2005 13:17:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17454 invoked by uid 99); 5 Apr 2005 13:17:25 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of bill.w.au@gmail.com designates 64.233.184.200 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 06:17:24 -0700
Received: by wproxy.gmail.com with SMTP id 50so2193791wri
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2005 06:17:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=JzDk8B8i+LsyE/v+8fc5vYzRkhoZGRXVbTSfIijsrKvayIrDo2Cpd4li1CTEECeCm/BfKZCnuAI3GJzw/GrNdWDE7lC9cnKK4oyPkgiF0nataagyplivOqvNy3OoCfK6EC0nKpQakth7CRGbtke2H5C9d1akY3v6kTQFLhpbqJ0=
Received: by 10.54.52.21 with SMTP id z21mr794918wrz;
        Tue, 05 Apr 2005 06:17:19 -0700 (PDT)
Received: by 10.54.52.14 with HTTP; Tue, 5 Apr 2005 06:17:19 -0700 (PDT)
Message-ID: <3b5f720305040506174302eb98@mail.gmail.com>
Date: Tue, 5 Apr 2005 09:17:19 -0400
From: Bill Au <bill.w.au@gmail.com>
Reply-To: Bill Au <bill.w.au@gmail.com>
To: java-user@lucene.apache.org, Yonik Seeley <yseeley@gmail.com>
Subject: Re: scalability w/ number of fields
In-Reply-To: <c68e39170504041540520673e4@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <c68e391705040414352e96e0d0@mail.gmail.com>
	 <c68e3917050404143832fc3826@mail.gmail.com>
	 <4251BCD2.8070104@apache.org>
	 <c68e39170504041540520673e4@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The compound index structure is meant for indexes with a large number of fields.
I was watching the files in the index directory of my compound index while
it was being optimized.  The IndexWriter that I used was set to use
compound file.
It looks to me that Lucene first combined all existing segments into a new
multifile segment, then it converted this multifile segment into the
compound format.
So I think the data for the entire index is actually being written to
disk twice.
Is there any way to configure Lucene to write the data once only into a compound
segment without first writing a multifile segment first?

Bill

On Apr 4, 2005 6:40 PM, Yonik Seeley <yseeley@gmail.com> wrote:
> They are all indexed (and they all need to be under the current design).
> 
> -Yonik
> 
> On Apr 4, 2005 6:16 PM, Doug Cutting <cutting@apache.org> wrote:
> > Yonik Seeley wrote:
> > > I know Lucene is very scalable in many ways, but how about number of fieldnames?
> > >
> > > We have an index using around 6000 unique fieldnames,
> >
> > How many of these fields are indexed?  At this point I would recommend
> > against having more than a handful of indexed fields.  If the fields are
> > only stored, then it shouldn't make much difference.
> >
> > Doug
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 13:55:18 2005
Return-Path: <java-user-return-13932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74237 invoked from network); 5 Apr 2005 13:55:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 13:55:18 -0000
Received: (qmail 98965 invoked by uid 500); 5 Apr 2005 13:55:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98939 invoked by uid 500); 5 Apr 2005 13:55:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98926 invoked by uid 99); 5 Apr 2005 13:55:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 06:55:05 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-2"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Time taken in Indexing when the index is already huge
Date: Tue, 5 Apr 2005 09:55:03 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CAF4D773@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Time taken in Indexing when the index is already huge
thread-index: AcU5hS0/igddOvYrTKynqaGEDibvywAYYpPg
From: "Will Allen" <wallen@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I would recommend not optimizing your index that often.  Another =
solution is to use the multisearcher and keep one fully optimized =
primary index, and an unoptimized secondary index that you add to.  Then =
search against both.  During off peak hours you could merge the =
secondary index onto your primary index, then optimize .

-----Original Message-----
From: Goel, Nikhil [mailto:nikhil.goel@verizon.com]
Sent: Monday, April 04, 2005 10:14 PM
To: java-user@lucene.apache.org
Subject: Time taken in Indexing when the index is already huge


Hi,=20

  =20

I have been using lucene-1.3.jar for quite some time and we are using =
another library to store the index in DB.=20

When we started indexing  the writer.optimize used to take in the range =
of 600-800 milliseconds to return but now our index has grown to huge =
proportion and its around 10 MB hence the writer.optimize is taking =
around 30-40 seconds and it is not acceptable for our solution. I put =
the timings on writer.optimize() and it's the one which takes most of =
this time.=20

=20

So I am just wondering if someone is facing the same problem in indexing =
the data when the index is already huge or is there another way to =
manage such huge index.

=20

Here is the simple code which we use to index the data.=20

IndexWriter writer =3D new IndexWriter(dbDirectory, new =
StandardAnalyzer(), false); //Create an indexwriter

writer.addDocument(doc); //doc is of type  =
org.apache.lucene.document.Document...

writer.optimize(); //optimize is called on indexwriter..This is the one =
which takes most of the time and is responsible for the delay.

writer.close(); // indexwriter is closed

=20

=20

The time taken by optimize call grows a lot when the index is of larger =
size. I tried to look it up on Erik Hatcher and Otis Gospodneti=E6 =
<http://www.manning.com/hatcher2#author#author>  book too but everywhere =
it says Lucene is quite scalable and don't have trouble in indexing even =
with huge data. Can anyone please provide  some insight into this?

=20

Thanks.

Nikhil

=20

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 15:16:52 2005
Return-Path: <java-user-return-13933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2827 invoked from network); 5 Apr 2005 15:16:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 15:16:52 -0000
Received: (qmail 82397 invoked by uid 500); 5 Apr 2005 15:16:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82368 invoked by uid 500); 5 Apr 2005 15:16:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82355 invoked by uid 99); 5 Apr 2005 15:16:42 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31105.mail.mud.yahoo.com (HELO web31105.mail.mud.yahoo.com) (68.142.200.38)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 05 Apr 2005 08:16:38 -0700
Received: (qmail 69217 invoked by uid 60001); 5 Apr 2005 15:16:35 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=eihKUxF4cqg3qyfC3BQvm4gcI7wiuDVmGYpusBE/3j2UWWWxNzsjw9XDm2HqauKeCFs9FlAR/k0A0UFSzWHZvwGBXgYzBky+9C1omnvlPoXiinJ1JqkQFGxfB7EA7p4YiARFwDC1J6GogEGnGrw2MKhKGuq8NetUGDpSjlna6B8=  ;
Message-ID: <20050405151635.69213.qmail@web31105.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31105.mail.mud.yahoo.com via HTTP; Tue, 05 Apr 2005 08:16:35 PDT
Date: Tue, 5 Apr 2005 08:16:35 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Strategies for updating indexes.
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you take this approach, keep in mind that you will also need to
handle regular application shutdowns, and also try to catch some
crashes/errors, in order to flush your in-memory queue of items
scheduled for indexing, and write them to disk.

Feel free to post the code, if you want and can, so people don't have
to reinvent this.

Otis


--- Jens Kraemer <kraemer@webit.de> wrote:
> Hi,
> please see comments below.
> 
> On Tue, Apr 05, 2005 at 08:38:04AM +0100, Lee Turner wrote:
> > Hi
> > 
> > I was wondering whether anyone has any experience of multithreaded
> > updates to indexes.  I the web app I am working on there are
> additions,
> > updates and deletes that need to happen to the index throughout the
> > runtime of the application.  Also, the application is run in a
> cluster
> > with each app server having its own index.  This means that
> periodically
> > each app server is going to have to go through a re-indexing
> process to
> > make sure that its index has all the changes from the other app
> servers
> > in it.  This process can take a few seconds so if another update to
> the
> > index occurs at this time it will need to be queued in some way to
> make
> > sure it happens after the re-indexing.
> > 
> > I was just wondering if anyone had any pointers for doing this kind
> of
> > thing.  Any help would be gratefully appreciated.
> 
> I usually have a service class wrapping all access to the lucene
> index,
> which has a queue where my Servlets or Actions put the documents to
> be
> updated or added in.  There is a single instance of this class for
> the
> whole web app, and a thread regularly waking up and processing the
> elements of the queue.
> 
> Note the queue has to be threadsafe or has to be synchronized
> externally. 
> 
> Since there is only one instance of this service class, it is the
> only
> one who will ever write to the index (if the same index is not used
> by
> other applications).
> 
> During re-indexing the thread regularly processing the queue will
> be paused. After re-indexing it is started again, processing all
> pending 
> changes from the queue. The re-indexing itself takes place in another
> thread, which is started by quartz in my case.
> 
> 
> hope this helps you somehow,
> 
> Jens
> 
> 
> -- 
> webit! Gesellschaft für neue Medien mbH          www.webit.de
> Dipl.-Wirtschaftsingenieur Jens Krämer       kraemer@webit.de
> Schnorrstraße 76                      Telefon +49 351 46766 0
> D-01069 Dresden                      Telefax +49 351 46766 66
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 16:08:34 2005
Return-Path: <java-user-return-13934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22643 invoked from network); 5 Apr 2005 16:08:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 16:08:33 -0000
Received: (qmail 3083 invoked by uid 500); 5 Apr 2005 16:08:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2696 invoked by uid 500); 5 Apr 2005 16:08:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2683 invoked by uid 99); 5 Apr 2005 16:08:26 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.193 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 09:08:26 -0700
Received: by rproxy.gmail.com with SMTP id b11so1557585rne
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2005 09:08:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=MruHTQre3GeiMYR0nXt1kfQFJtXS/1daw0WKd2X//gaYlo5y8xIxXjmcX4NabnpV8MwmkwiHgJJi7dSJCfvPPzmG6PKMrR62Pa/Y5awI93YVC9hvFVwKjCoAy6Yf6lVFJfmMmbYLRBX3Cug25k1r7KFMX5lyeDHmIomoav9mwq4=
Received: by 10.38.87.21 with SMTP id k21mr6325068rnb;
        Tue, 05 Apr 2005 09:08:24 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Tue, 5 Apr 2005 09:08:24 -0700 (PDT)
Message-ID: <c68e3917050405090821bc6b6d@mail.gmail.com>
Date: Tue, 5 Apr 2005 12:08:24 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: scalability w/ number of fields
In-Reply-To: <c68e3917050404143832fc3826@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <c68e391705040414352e96e0d0@mail.gmail.com>
	 <c68e3917050404143832fc3826@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Optimize performance update (with tons of indexed fields):

We had a timing bug... ignore the hour I first reported.  Here are the
current numbers:

indexed_fields=6791  index_size=3.9GB  optimize_time=21min
indexed_fields=3216  index_size=2.0GB  optimize_time=9min
indexed_fields=2080  index_size=1.4GB  optimize_time=4min

It's a little apples-to-oranges since we simply removed some of the
fields to test a lower field count (and hence the index size also goes
down).

-Yonik

On Apr 4, 2005 5:38 PM, Yonik Seeley <yseeley@gmail.com> wrote:
> I know Lucene is very scalable in many ways, but how about number of fieldnames?
> 
> We have an index using around 6000 unique fieldnames,
> 450,000 documents, and a total index size of 4GB.   It's very
> sparse... documents don't have that many fields, but the number of
> different fieldtypes is huge.
> 
> An optimize of this index took about an hour (mergefactor 10, compound index)
> This is on enterprise hardware (fast SCSI raid, 6GB RAM, dual 2.8GHz Xeon).
> The JVM was Java5 with 2.5GB heap.
> 
> This seems very long... anyone have any insights?
> We'll be running more tests to see if decreasing the number of fields
> has an impact.
> 
> -Yonik
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 17:30:31 2005
Return-Path: <java-user-return-13935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49505 invoked from network); 5 Apr 2005 17:30:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 17:30:31 -0000
Received: (qmail 62555 invoked by uid 500); 5 Apr 2005 17:30:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62535 invoked by uid 500); 5 Apr 2005 17:30:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62520 invoked by uid 99); 5 Apr 2005 17:30:24 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_20_30,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of giovanni.novelli@gmail.com designates 64.233.170.207 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 10:30:23 -0700
Received: by rproxy.gmail.com with SMTP id i8so1752073rne
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2005 10:30:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=qetPtfyYuBakvIZPZQzoj9jTqhY32eHd1P77Ikd8O+34tuHCbSZYedXqKh/7BGhh5Lgf+au5Si1NeILl2RoyZLI+rD8a4HXXjKKtBL34mVWH+qOdr3n7iDHkz4yVnJYAWO3VLRqLJ+SUC5z7hxBNVXaYbIorwazIKSDMPlTr+VY=
Received: by 10.38.150.29 with SMTP id x29mr3286622rnd;
        Tue, 05 Apr 2005 10:30:18 -0700 (PDT)
Received: by 10.39.3.38 with HTTP; Tue, 5 Apr 2005 10:30:18 -0700 (PDT)
Message-ID: <acee472d0504051030217d03bb@mail.gmail.com>
Date: Tue, 5 Apr 2005 19:30:18 +0200
From: Giovanni Novelli <giovanni.novelli@gmail.com>
Reply-To: Giovanni Novelli <giovanni.novelli@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: PHP-Lucene Integration
In-Reply-To: <4799625E-9E73-11D9-AA19-000A95973046@backspaces.net>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3496_91287.1112722218442"
References: <4799625E-9E73-11D9-AA19-000A95973046@backspaces.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3496_91287.1112722218442
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

As Lucene native language is Java it should be more natural to access its=
=20
functionalities through JSP; anyway the idea of accessing Lucene=20
functionalities seems interesting as PHP is perhaps most widely deployed=20
server side scripting language.=20
I think that the way to provide access to Lucene API in PHP development=20
should be more general and clean as possible, so in my opinion the natural=
=20
way should be based on a single layer that interoperates with Lucene API: a=
n=20
Apache module. Then should be needed a PHP API to call such module from PHP=
.=20

Having an Apache module for Lucene as a component of Lucene project should=
=20
allow the spread of Lucene not only in PHP development arena.

On Mar 27, 2005 5:49 AM, Owen Densmore <owen@backspaces.net> wrote:
>=20
> Thanks all for the interesting responses. Sorry for being a bit late
> in responding!
>=20
> -- Owen
>=20
> Owen Densmore - http://backspaces.net - http://redfish.com -
> owen@backspaces.net
>=20
> Begin forwarded message:
>=20
> > From: "Philippe Ombredanne" <pombredanne@nexb.com>
> > Subject: RE: PHP-Lucene Integration
> >
> > Owen,
> > very interesting!
> > Anything (code) you can share?
>=20
> Hi Philippe. We will definitely make our code available. I suspect,
> however, it is not terribly interesting. But if simply useful as a
> "case study" that would still be good.
>=20
> > From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
> > Subject: Re: PHP-Lucene Integration
> >
> > Your implementation and ideas sound very interesting, Owen. Can we see
> > the system anywhere in public (and play with it?)
>=20
> We'll send a link to the site fairly soon. We're having our final
> review tomorrow, and should have a good idea when we can let folks look
> at it.
>=20
> >> We are hoping the institute can afford to have us work on true
> >> clustering techniques such as Carrot2 uses. (Thanks to Dawid and all
> >> the Poznan University folks who's papers were so stimulating!)
> >
> > You are very welcome. We are also academic, so in the feeling of
> > brotherhood we might help you set up a demo on-line clustering server
> > free of charge. There really is not better clustering technique than
> > the one devised to a particular problem and it seems like you found
> > that niche. Although it's always worth experimenting with other stuff
> > just for the sake of comparison. Just let me know if you're interested
> > (if we can access the 'feed' of those plain search results I can set
> > up the clustering demo in a few minutes, really).
>=20
> This would be really great! Indeed, we'd like to help SFI to be a bit
> more involved with exploring their collection with innovative, research
> oriented methods.
>=20
> Some of the staff at SFI are excited by DSpace, for example, and we'd
> be interested in helping them explore its use in the lucene/clustering
> context. That, and their use of Dublin Core for cataloging their
> future work might be of general interest here in the mail list too.
>=20
> > > We did do a
> >> quick LSA SVD on a random set of the papers to see what the
> >> performance (both CPU and good clustering) would be like. Our
> >> results are encouraging, and I think the frequent phrases approach
> >> would be best for this collection.
> >
> > It is always going to be challanging if you attempt to cluster the
> > entire collection, you know. I'm (or rather: I will be) working on
> > algorithm's extensions to deal with full text documents.
>=20
> We're mainly using Abstracts and other meta data (Title, Authors, Key
> phrases, Abstracts, Dates, and so on). These are reasonably small:
> Abstracts are 150 words on the average over the current 1122 document
> collection. If we include the title and key phrases, we get 172
> words/doc.
>=20
> I suspect we could safely limit the abstracts to the first few
> sentences too, getting us to a much smaller number. Indeed, if we
> tossed the abstracts altogether, and used just titles and key phrases,
> we're down to less than 20 words/doc! I bet simply using reasonable
> preprocessing we could get small enough "snippets" as to be workable.
>=20
> > Dawid
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

------=_Part_3496_91287.1112722218442--

From java-user-return-13936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 17:58:50 2005
Return-Path: <java-user-return-13936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57213 invoked from network); 5 Apr 2005 17:58:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 17:58:50 -0000
Received: (qmail 18249 invoked by uid 500); 5 Apr 2005 17:58:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18226 invoked by uid 500); 5 Apr 2005 17:58:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18210 invoked by uid 99); 5 Apr 2005 17:58:42 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of andi@osafoundation.org designates 204.152.186.98 as permitted sender)
Received: from kahuna.osafoundation.org (HELO kahuna.osafoundation.org) (204.152.186.98)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 10:58:39 -0700
X-Envelope-From: andi@osafoundation.org
X-Envelope-To: java-user@lucene.apache.org
Received: from localhost (kahuna.osafoundation.org [127.0.0.1])
	by kahuna.osafoundation.org (8.12.8/8.12.8) with ESMTP id j35HwKab015122
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Tue, 5 Apr 2005 10:58:21 -0700
Date: Tue, 5 Apr 2005 10:58:46 -0700 (PDT)
From: Andi Vajda <andi@osafoundation.org>
X-X-Sender: vajda@zoe
Reply-To: Andi Vajda <andi@osafoundation.org>
To: java-user@lucene.apache.org, Giovanni Novelli <giovanni.novelli@gmail.com>
Subject: Re: PHP-Lucene Integration
In-Reply-To: <acee472d0504051030217d03bb@mail.gmail.com>
Message-ID: <Pine.OSX.4.62.0504051054010.3593@zoe>
References: <4799625E-9E73-11D9-AA19-000A95973046@backspaces.net>
 <acee472d0504051030217d03bb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Scanned-By: MIMEDefang 2.48 on 127.0.0.1
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


As an alternative, you could also take the approach taken for PyLucene: 
compile the Java code with GCJ and generate bindings for Python with SWIG.
SWIG supports a number of languages in addition to Python such as Ruby, PHP, 
Perl, and a bunch more.

For more information, see:
   http://pylucene.osafoundation.org
   http://www.python.org/pycon/2005/papers/27/paper.txt
   http://www.swig.org
   http://gcc.gnu.org/java

As a matter of fact, a team of people is working on such a construction for 
Ruby at the moment.

Andi..


On Tue, 5 Apr 2005, Giovanni Novelli wrote:

> As Lucene native language is Java it should be more natural to access its
> functionalities through JSP; anyway the idea of accessing Lucene
> functionalities seems interesting as PHP is perhaps most widely deployed
> server side scripting language.
> I think that the way to provide access to Lucene API in PHP development
> should be more general and clean as possible, so in my opinion the natural
> way should be based on a single layer that interoperates with Lucene API: an
> Apache module. Then should be needed a PHP API to call such module from PHP.
>
> Having an Apache module for Lucene as a component of Lucene project should
> allow the spread of Lucene not only in PHP development arena.
>
> On Mar 27, 2005 5:49 AM, Owen Densmore <owen@backspaces.net> wrote:
>>
>> Thanks all for the interesting responses. Sorry for being a bit late
>> in responding!
>>
>> -- Owen
>>
>> Owen Densmore - http://backspaces.net - http://redfish.com -
>> owen@backspaces.net
>>
>> Begin forwarded message:
>>
>>> From: "Philippe Ombredanne" <pombredanne@nexb.com>
>>> Subject: RE: PHP-Lucene Integration
>>>
>>> Owen,
>>> very interesting!
>>> Anything (code) you can share?
>>
>> Hi Philippe. We will definitely make our code available. I suspect,
>> however, it is not terribly interesting. But if simply useful as a
>> "case study" that would still be good.
>>
>>> From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
>>> Subject: Re: PHP-Lucene Integration
>>>
>>> Your implementation and ideas sound very interesting, Owen. Can we see
>>> the system anywhere in public (and play with it?)
>>
>> We'll send a link to the site fairly soon. We're having our final
>> review tomorrow, and should have a good idea when we can let folks look
>> at it.
>>
>>>> We are hoping the institute can afford to have us work on true
>>>> clustering techniques such as Carrot2 uses. (Thanks to Dawid and all
>>>> the Poznan University folks who's papers were so stimulating!)
>>>
>>> You are very welcome. We are also academic, so in the feeling of
>>> brotherhood we might help you set up a demo on-line clustering server
>>> free of charge. There really is not better clustering technique than
>>> the one devised to a particular problem and it seems like you found
>>> that niche. Although it's always worth experimenting with other stuff
>>> just for the sake of comparison. Just let me know if you're interested
>>> (if we can access the 'feed' of those plain search results I can set
>>> up the clustering demo in a few minutes, really).
>>
>> This would be really great! Indeed, we'd like to help SFI to be a bit
>> more involved with exploring their collection with innovative, research
>> oriented methods.
>>
>> Some of the staff at SFI are excited by DSpace, for example, and we'd
>> be interested in helping them explore its use in the lucene/clustering
>> context. That, and their use of Dublin Core for cataloging their
>> future work might be of general interest here in the mail list too.
>>
>>>> We did do a
>>>> quick LSA SVD on a random set of the papers to see what the
>>>> performance (both CPU and good clustering) would be like. Our
>>>> results are encouraging, and I think the frequent phrases approach
>>>> would be best for this collection.
>>>
>>> It is always going to be challanging if you attempt to cluster the
>>> entire collection, you know. I'm (or rather: I will be) working on
>>> algorithm's extensions to deal with full text documents.
>>
>> We're mainly using Abstracts and other meta data (Title, Authors, Key
>> phrases, Abstracts, Dates, and so on). These are reasonably small:
>> Abstracts are 150 words on the average over the current 1122 document
>> collection. If we include the title and key phrases, we get 172
>> words/doc.
>>
>> I suspect we could safely limit the abstracts to the first few
>> sentences too, getting us to a much smaller number. Indeed, if we
>> tossed the abstracts altogether, and used just titles and key phrases,
>> we're down to less than 20 words/doc! I bet simply using reasonable
>> preprocessing we could get small enough "snippets" as to be workable.
>>
>>> Dawid
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 18:23:56 2005
Return-Path: <java-user-return-13937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63802 invoked from network); 5 Apr 2005 18:23:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 18:23:56 -0000
Received: (qmail 68342 invoked by uid 500); 5 Apr 2005 18:23:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68315 invoked by uid 500); 5 Apr 2005 18:23:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68300 invoked by uid 99); 5 Apr 2005 18:23:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from lilzmailso02.liwest.at (HELO lilzmailso02.liwest.at) (212.33.55.24)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 11:23:47 -0700
Received: from cm66-207.liwest.at ([212.241.66.207] helo=[192.168.0.5])
	by lilzmailso02.liwest.at with esmtp (Exim 4.24)
	id 1DIsiD-0000b7-A1
	for java-user@lucene.apache.org; Tue, 05 Apr 2005 20:23:41 +0200
Message-ID: <4252D7B0.6000104@eduhi.at>
Date: Tue, 05 Apr 2005 20:23:44 +0200
From: Gusenbauer Stefan <gusenbauer@eduhi.at>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Can not delete cfs file
References: <424EA872.5030100@eduhi.at> <0fd436753dd768a4ed74727306861e45@ehatchersolutions.com> <425044F0.1050805@eduhi.at> <19e31d6f76a3d3bc0e9c69ec78ae760f@ehatchersolutions.com> <4250FC35.2080204@eduhi.at>
In-Reply-To: <4250FC35.2080204@eduhi.at>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Gusenbauer Stefan wrote:

>Erik Hatcher wrote:
>
>  
>
>>On Apr 3, 2005, at 3:33 PM, Gusenbauer Stefan wrote:
>>
>>    
>>
>>>Sorry for beeing late!
>>>Only the test code wouldn't be very useful for understanding because
>>>there are a lot of dependencies in the other code. I can explain what
>>>I do: I open an IndexWrite close it then open an IndexReader close it
>>>and open an IndexWriter then close it. Then i try to delete the files
>>>from the index and only the cfs file i cannot delete. I try to get
>>>out the code which is involved later on. I get no failure message
>>>only the
>>>that the fail could not be removed.
>>>      
>>>
>>This is on Windows, I presume?
>>
>>    Erik
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>    
>>
>Yes, I think it is a java with windows problem because since a use call
>System.gc before deleting the file the streams are released.
>Stefan
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>  
>
I found the bug, i simply didn't close the indexreader in the testcase
before. Shame on me that I've assumed that lucene had a bug!
Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 18:49:30 2005
Return-Path: <java-user-return-13938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69970 invoked from network); 5 Apr 2005 18:49:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 18:49:30 -0000
Received: (qmail 11464 invoked by uid 500); 5 Apr 2005 18:49:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11434 invoked by uid 500); 5 Apr 2005 18:49:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11421 invoked by uid 99); 5 Apr 2005 18:49:23 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.207 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 11:49:22 -0700
Received: by rproxy.gmail.com with SMTP id b11so1603083rne
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2005 11:49:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=k1IdZ96Uzd22adhQb+FUerG0pW6Q/j3BMpMALeizRlpsLQjS3uTY7/qKRrPEdSW9+yc/uR/utxZZL5fBLhRlYLINDY6NQCBE4sUfHUXO92K59eSUc43mGvirt05xPMWp5p/vHyDFe8Segw0EihIQsEkoYeOJDzPwS2onSt+qTAQ=
Received: by 10.38.86.68 with SMTP id j68mr6712207rnb;
        Tue, 05 Apr 2005 11:49:20 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Tue, 5 Apr 2005 11:49:19 -0700 (PDT)
Message-ID: <c68e391705040511493f63b4a5@mail.gmail.com>
Date: Tue, 5 Apr 2005 14:49:19 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: QueryParser: open ended range queries
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Was there any later thread on the QueryParser supporting open ended
range queries after this:
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg07973.html

Just curious.  I plan on overriding the current getRangeQuery() anyway
since it currently doesn't run the endpoints through the analyzer.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 19:44:28 2005
Return-Path: <java-user-return-13939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83969 invoked from network); 5 Apr 2005 19:44:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 19:44:28 -0000
Received: (qmail 3000 invoked by uid 500); 5 Apr 2005 19:44:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2978 invoked by uid 500); 5 Apr 2005 19:44:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2960 invoked by uid 99); 5 Apr 2005 19:44:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 12:44:20 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8B51113E2007; Tue,  5 Apr 2005 15:44:16 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 4159813E2007
	for <java-user@lucene.apache.org>; Tue,  5 Apr 2005 15:44:03 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <c68e391705040511493f63b4a5@mail.gmail.com>
References: <c68e391705040511493f63b4a5@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <029071497e041081e3097248b0c49cc9@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser: open ended range queries
Date: Tue, 5 Apr 2005 15:43:59 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 5, 2005, at 2:49 PM, Yonik Seeley wrote:
> Just curious.  I plan on overriding the current getRangeQuery() anyway
> since it currently doesn't run the endpoints through the analyzer.

What will you do when multiple tokens are returned from the analyzer?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 19:59:55 2005
Return-Path: <java-user-return-13940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17012 invoked from network); 5 Apr 2005 19:59:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 19:59:55 -0000
Received: (qmail 32316 invoked by uid 500); 5 Apr 2005 19:59:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32288 invoked by uid 500); 5 Apr 2005 19:59:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32275 invoked by uid 99); 5 Apr 2005 19:59:46 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.195 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 12:59:44 -0700
Received: by rproxy.gmail.com with SMTP id b11so1620902rne
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2005 12:59:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=flzQxPN28wXhVdNWFMFKXSSHikFNwLbBF+aF92vkTLXeF0zyAcVELgzm3nqE0vvNyptZiCunbWw3ntXTIaNDEdumikfvnP2rpVvalItzVNG5YXaTnQVh8V/ccgWN4ZUN9MTV89uSPOIeE0x4tdAvrbfJCIlX64OlkE3BFb08lsk=
Received: by 10.38.67.50 with SMTP id p50mr6769180rna;
        Tue, 05 Apr 2005 12:59:39 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Tue, 5 Apr 2005 12:59:39 -0700 (PDT)
Message-ID: <c68e391705040512593880b3e2@mail.gmail.com>
Date: Tue, 5 Apr 2005 15:59:39 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser: open ended range queries
In-Reply-To: <029071497e041081e3097248b0c49cc9@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
References: <c68e391705040511493f63b4a5@mail.gmail.com>
	 <029071497e041081e3097248b0c49cc9@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

For numeric fields, this will never happen.
For text fields, I could either
 1) just use the first token generated (yuck)
  2) don't run it through the analyzer (v1.0)
  3) run it through an analyzer specific to range and prefix queries (post =
v1.0)

Since I know the schema, I can pick and choose different methods for
different field types.  Generic lucene isn't as lucky and has to guess
(hence the ugly try-to-parse-as-a-date code).

An example of why option3 may be needed: consider the recently posted
ISOLatinFilter that stripps accents.  If one indexes text:appl=E9, and
it gets indexed as text:apple, then a range query of text:[appl=E9 TO
orange] won't find that document.

Of course you just can't run it through the normal analyzer either
since then text:[a to z] probably won't work (a will get stopped out,
etc).  Also, the normal analyzer may expand things into synonyms, etc.

-Yonik


On Apr 5, 2005 3:43 PM, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>=20
> On Apr 5, 2005, at 2:49 PM, Yonik Seeley wrote:
> > Just curious.  I plan on overriding the current getRangeQuery() anyway
> > since it currently doesn't run the endpoints through the analyzer.
>=20
> What will you do when multiple tokens are returned from the analyzer?
>=20
>         Erik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 20:55:11 2005
Return-Path: <java-user-return-13941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45215 invoked from network); 5 Apr 2005 20:55:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 20:55:11 -0000
Received: (qmail 45071 invoked by uid 500); 5 Apr 2005 20:55:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45001 invoked by uid 500); 5 Apr 2005 20:55:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44987 invoked by uid 99); 5 Apr 2005 20:55:04 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 13:55:03 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1C98A5B792; Tue,  5 Apr 2005 13:54:59 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1A6BB7F459
	for <java-user@lucene.apache.org>; Tue,  5 Apr 2005 13:54:59 -0700 (PDT)
Date: Tue, 5 Apr 2005 13:54:59 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: filter search
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA010829FF@hermes.corp.cyveillance.com>
Message-ID: <Pine.LNX.4.58.0504051340590.17615@hal.rescomp.berkeley.edu>
References: <63434C14F9A6F74CB36B85033E4C30CA010829FF@hermes.corp.cyveillance.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

:
: is it possible to filter the hits returned from a certain query?. for
: example if I have a search like this:
: 	Query searchQuery = queryParser.parse( query );
: 	Hits  results = m_searcher.search( searchQuery );
: is there a way to use the results and find out how many of the returned
: documents their url ends with com, and how many ends with net and so
: on... without the need to form a new query?.

There was a recent thread regarding this issue, with several
implimentations suggested, each with different pros/cons depending on
the specifics of your situation...

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200503.mbox/%3c6fb33c15050329160136d91ee2@mail.gmail.com%3e



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 21:23:49 2005
Return-Path: <java-user-return-13942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53100 invoked from network); 5 Apr 2005 21:23:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 21:23:49 -0000
Received: (qmail 12373 invoked by uid 500); 5 Apr 2005 21:23:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12347 invoked by uid 500); 5 Apr 2005 21:23:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12321 invoked by uid 99); 5 Apr 2005 21:23:42 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 14:23:40 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4E3AE5B798; Tue,  5 Apr 2005 14:23:39 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP
	id 4B9087F459; Tue,  5 Apr 2005 14:23:39 -0700 (PDT)
Date: Tue, 5 Apr 2005 14:23:39 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org, Yura Smolsky <info@altervision.biz>
Subject: Re[2]: exact match
In-Reply-To: <169729875.20050405124410@altervision.biz>
Message-ID: <Pine.LNX.4.58.0504051415000.17615@hal.rescomp.berkeley.edu>
References: <1361527599.20050404233436@altervision.biz>
 <288210f177f90b25236e0ad7abe73c98@ehatchersolutions.com>
 <169729875.20050405124410@altervision.biz>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: >> I have documents with tokenized, indexes and stored field. This field
: >> contain one-two words usually. I need to be able to search exact
: >> matches for two words.
: >> For example search "John" should return documents with field
: >> containing "John" only, not "John Doe" or "John Foo".
: >>
: >> Any ideas?
: EH> Use an untokenized field to search on in the case of finding an exact
: EH> match.
:
: And no other ways to reach this?

are there any cases in which you ever want to search the field for
tokenized values?

if not, then you can just use an analyzer that knows about this special
field and "tokenizes" any value it gets into a single token that is an
exact match.

if you sometimes need exact matches, and sometimes need "ord" matches (for
hte sake of argument let's assume your tokens are simple shitespace
seperated words) then you're going to need somewhat of knowing which case
you wnat when you parse the query -- the easy way to go is with a seperate
field like Erik described.  if you have some other usecase, then you can
index the field using an analyzer that generates a single unparsed "token"
for hte whole string followed by some marker token that isn't likely to
appear in your data (ie: the token "_BOOYA!_" would probably work),
followed by the more conventional tokens -- given the first of those
tokens a very high  positionalIncriment.

Then if you want an exact match, your custom query parsing code could
generate either a Phrase or Span query containing a single Term for your
input, followed by the marker Term (ie: "_BOOYA!_").  a "regular" toekn
based search would work just as it did before.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 21:56:39 2005
Return-Path: <java-user-return-13943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61045 invoked from network); 5 Apr 2005 21:56:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 21:56:39 -0000
Received: (qmail 67425 invoked by uid 500); 5 Apr 2005 21:56:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67394 invoked by uid 500); 5 Apr 2005 21:56:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67372 invoked by uid 99); 5 Apr 2005 21:56:33 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 14:56:32 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 105E05B79B; Tue,  5 Apr 2005 14:56:28 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0F4667F459
	for <java-user@lucene.apache.org>; Tue,  5 Apr 2005 14:56:28 -0700 (PDT)
Date: Tue, 5 Apr 2005 14:56:28 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Wiki formatting changes
Message-ID: <Pine.LNX.4.58.0504051450470.31429@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


he wiki appears to have undergone some style cahnges recently, the layout
is a lot different now (and in my opinion: cleaner) but a side effect
seems to be that some page formatting which used to work no
longer does

Specifically, subSection headings that have leading whitespace, ie...

 == Utility to pad the numbers ==

...show up verbatim in the page, but removing the space...

== Utility to pad the numbers ==

...seems to fix the problem.


does anyone know what exactly changed?  is there an easy config option
that can be toggled to get the old behavior, or do we just need to slowly
tweak all of the existing docs (there are quite a few with this problem)
to eliminate the whitespace?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 22:36:01 2005
Return-Path: <java-user-return-13944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69685 invoked from network); 5 Apr 2005 22:36:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2005 22:36:01 -0000
Received: (qmail 29444 invoked by uid 500); 5 Apr 2005 22:35:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29418 invoked by uid 500); 5 Apr 2005 22:35:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29399 invoked by uid 99); 5 Apr 2005 22:35:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.app.aconex.com (HELO mail.app.aconex.com) (203.89.192.138)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 15:35:56 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id DB935159FFF
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2005 08:35:52 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id C44BA64007
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2005 08:35:52 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 28762-02-9 for <java-user@lucene.apache.org>;
 Wed,  6 Apr 2005 08:35:51 +1000 (EST)
Received: from [192.168.0.242] (unknown [192.168.0.242])
	by herald.aconex.com (Postfix) with ESMTP id D752464002
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2005 08:35:51 +1000 (EST)
Message-ID: <425312CA.90408@aconex.com>
Date: Wed, 06 Apr 2005 08:35:54 +1000
From: Paul Smith <psmith@aconex.com>
User-Agent: Mozilla Thunderbird 1.0 (Macintosh/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Strategies for updating indexes.
References: <20050405151635.69213.qmail@web31105.mail.mud.yahoo.com>
In-Reply-To: <20050405151635.69213.qmail@web31105.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



Otis Gospodnetic wrote:

>If you take this approach, keep in mind that you will also need to
>handle regular application shutdowns, and also try to catch some
>crashes/errors, in order to flush your in-memory queue of items
>scheduled for indexing, and write them to disk.
>
>Feel free to post the code, if you want and can, so people don't have
>to reinvent this.
>
>Otis
>
>  
>
This is where using something like JMS to store persistent messages of 
items for indexing in a JMS queue is useful. 

We are about to go down this road using ActiveMQ 
(http://activemq.codehaus.org, very nice product, Apache licensed), that 
way notifications of change are never lost, and you can disconnect the 
indexer from the application itself (it could be a seperate process or 
in-process, it just needs to be able to read the JMS queue).  With 
ActiveMQ you can even embed the JMS server instance inside the VM of 
your application too, which is very useful for a single instance, and 
can be easily broken out to be used in a clustered environment.

cheers,

Paul Smith

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 00:45:14 2005
Return-Path: <java-user-return-13945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95466 invoked from network); 6 Apr 2005 00:45:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 00:45:14 -0000
Received: (qmail 73971 invoked by uid 500); 6 Apr 2005 00:45:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73948 invoked by uid 500); 6 Apr 2005 00:45:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73930 invoked by uid 99); 6 Apr 2005 00:45:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 17:44:59 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5FD6F13E200A; Tue,  5 Apr 2005 20:44:55 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP
	id 7154413E2007; Tue,  5 Apr 2005 20:44:38 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <9d4a66d7082a9d9b0ee673be6cba90c3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
Cc: java-user@lucene.apache.org
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Fwd: Wiki formatting changes
Date: Tue, 5 Apr 2005 20:44:39 -0400
To: infrastructure@apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I suppose this should be addressed to Leo...  anything we can do about 
the issue mentioned below regarding wiki formatting?

Thanks,
	Erik


Begin forwarded message:

> From: Chris Hostetter <hossman_lucene@fucit.org>
> Date: April 5, 2005 5:56:28 PM EDT
> To: java-user@lucene.apache.org
> Subject: Wiki formatting changes
> Reply-To: java-user@lucene.apache.org
>
>
> he wiki appears to have undergone some style cahnges recently, the 
> layout
> is a lot different now (and in my opinion: cleaner) but a side effect
> seems to be that some page formatting which used to work no
> longer does
>
> Specifically, subSection headings that have leading whitespace, ie...
>
>  == Utility to pad the numbers ==
>
> ...show up verbatim in the page, but removing the space...
>
> == Utility to pad the numbers ==
>
> ...seems to fix the problem.
>
>
> does anyone know what exactly changed?  is there an easy config option
> that can be toggled to get the old behavior, or do we just need to 
> slowly
> tweak all of the existing docs (there are quite a few with this 
> problem)
> to eliminate the whitespace?
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 00:48:33 2005
Return-Path: <java-user-return-13946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96576 invoked from network); 6 Apr 2005 00:48:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 00:48:33 -0000
Received: (qmail 77321 invoked by uid 500); 6 Apr 2005 00:48:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77300 invoked by uid 500); 6 Apr 2005 00:48:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77284 invoked by uid 99); 6 Apr 2005 00:48:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from sparta.hostgo.com (HELO sparta.hostgo.com) (66.220.22.162)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 17:48:23 -0700
Received: from [65.19.37.63] (helo=[10.0.1.2])
	by sparta.hostgo.com with esmtpa (Exim 4.50)
	id 1DIyhu-0000zm-HN
	for java-user@lucene.apache.org; Tue, 05 Apr 2005 20:47:47 -0400
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <71ac111f6733247492376716bb5bce5f@backspaces.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Owen Densmore <owen@backspaces.net>
Subject: php/lucene integration: SFI working papers visualization
Date: Tue, 5 Apr 2005 18:47:43 -0600
X-Mailer: Apple Mail (2.619.2)
X-MailScanner-Information: This email message has been scanned for viruses
X-MailScanner-HostGo: Found to be clean
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - sparta.hostgo.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - backspaces.net
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi folks.  As promised, here is the first beta access to the php/lucene  
work we were discussing earlier.

The url to the php front-end to the SFI working papers Lucene search is:
   http://webdev.santafe.edu/research/publications/redfish/wpSearch.php
This provides a fairly simple search dialog, returning a list of  
relevant documents.

The paragraph style returned data has links for continued searching on  
much of the data within the document's meta data: Authors, Keywords,  
and a similarity search .. similar documents.  It also has a "Browse  
paper in context" icon which launches a Flash graphical navigation  
tool.  It also has links into the rest of the SFI site: pdf/postscript  
for the papers, and an abstract page.

The "similar documents" search is a generalization of the example in  
the book by Erik and Otis: use a document's contents to form a  
secondary search.  Our default is authors^2 & all text.  But we've  
generalized it "inside" so that any primary search can be broken into  
any secondary search.  Thus simply using authors is a "co-author"  
similarity search.

The servlet is available via:
   http://webdev.santafe.edu:8080/redfish/servlet
It provides only raw text, all formatting and adaption to other web  
tools (Flash etc) is done via php.  Many capabilities of the servlet  
are not available via php at this point.  We default everything so that  
errors are minimized.  Thus beaming into the url w/o any parameters  
returns a canned search.  Note that it returns more than one search --  
a batch search of many searches is one of the servlets features.

This should let folks play with the critter.  Let us know if you find  
bugs or odd behaviors .. or find it useful even!  :)

	-- Owen

Owen Densmore - http://backspaces.net - http://redfish.com -  
owen@backspaces.net

Here are some details for those interested.

The meta data fields available are:
Number       Working paper number
Title        Working paper title
Author       Comma separated list of Authors
Abstract     Working paper abstract.
Keywords     Comma separated list of keyphrases
Format       Specifies availability of pdf, ps, none

We "manufacture" a few more fields from the above:
Text         Fake field: Title+Keywords+Abstract
All          Fake field: All .. "Text"+Number+Author+Format
Date         Fake field: YYYY/MM from Number

We typically just search All, augmenting with "Author:Crutchfield" if  
we want a specific field included in the search.  We use the built-in  
query parser.

The php interface does not provide an abstract but that can be done  
through the servlet "api".  For example, this search:
    
http://webdev.santafe.edu:8080/redfish/servlet?s=Author: 
Crutchfield&p=Abstract
..would return Jim Cruchfield's 55 abstracts, along with the rank and  
paper number.  Boy, is it FAST!

The URL api is:
cmd=search   Perform a search using params below.  Results
              have a search header with the query and number of hits,
			 followed by the individual search results unless the "p"
			 parameter is used.
    =debug    Print diagnostic info
    =like     Return documents that are like the document given in the
              s=Number:xxx search string.  Note the search string must be
			 fully specified, due to the default search field, f= being
			 used to specify how the similarty search is performed.  I.e.
			 the similarity search is done with a search string of
			 <default field>:<contents of that field for the document>
			 The parameters (l=,p=,M=,m=) can be used to control the return
			 format and quanity.  See examples below.  This command is fine
			 for now, but is "in beta" and could revert to use of document
			 term vectors.
s=Searches (| separated list)
              A set of N searches to be made, separated by the |  
character.
s2=search|minRank2|maxResults2
              The search to use for the "like" command.  It has three  
parts,
			 separated by "|".  The first is a search, formatted like a print
			 field (p=) below, constructed from the parts of the first search.
			 The second and third parts are a minRank, maxResults pair to
			 be applied during the second search.  As an example:
			     s2=Author([Author])^2 Text([Text])|0.01|100
		     would use the Authors and Text fields of the first search (s=)
			 to construct the second search, using a minRank, maxResults
			 of 0.01 and 100.  The results are formatted according to the
			 p= field below, generally "matrix".
p=PrintField|PrintFormat with PrintTags|"matrix"
              If a field name is provided, search results are printed as:
			 [Rank]\t[Number]\t[<PrintField>]
			 If the printField contains any []'s, the search results are
			 custom formatted using tags.  Thus "[Number]" would return just
			 the number for the search.
    =matrix   Return matrix of hits for N searches.  Results have a  
header
	         with N queries/labels, tab separated, preceeded by an  
additional
			 "DocNo." label.  The search results have the doc number followed
			 by N ranks, tab separated, corresponding to scores for
			 each doc for each search.  A 0 means no hit.  Note each line has
			 N+1 entries.  If a l=xx parameter is given with N entries, then
			 "DocNo." is defaulted to the first label.  If the l=xx parameter
			 has N+1 entries, then no defaulting is done.
f=searchField|SearchFormat with SearchTags
              Default search field if not specified in the s= searches
			 parameter.  Used by Lucene's query parser for unspecified
			 search fields.
l=Search Labels
              Replacements for actual search queries in the search  
results
			 header line.
M=Max number of returned hits (integer)
m=min rank for returned hits (float)

PrintTags (used in p=xx commands)
[<Field>]    Returns text of any named field, including manufactured  
ones.
[Rank]       Returns n.nn of the search rank

SearchTags (used in l=xx commands)
[Hits]       num hits returned by lucene w/o minRank, MaxNumber applied
[Query]      The search query string

- All API parameters are defaulted so that any request should work
- All Lucene fields are indexed as free text.  This can cause subtle
   problems, but generally is easily managed via ""s and similar search
   semantics/markup.
- The secondary search used by "like" adds quotes for Keywords and  
Authors:
   "Stuart A. Kauffman" "digital communities", for example.  It also  
tokenizes
   the All Text Abstract Title fields, creating a much smaller search  
string.

Example searches -- use  
http://webdev.santafe.edu:8080/redfish/servlet?xxx
Find Crutchfield's searches, printing rank, Number, Keywords.
Note "cmd=search" can be left off, search is the default.
	?cmd=search&s=Author:"James P. Crutchfield"&p=Keywords
Return a matrix format for three searches
	?p=matrix&s=ecology|networks|economics
Perform a 3 search batch with custom formatting of results
	? 
s=ecology|networks|economics&p=|[Rank]|[Author]|[Title]|[Abstract]&l=[Qu 
ery]/[Hits]
Perform similarity search for documents similar to 1990001 based on  
keywords
	?cmd=like&s=Number:1990001&m=0.40&M=10&f=Keywords
Dump everything!
	?s=19*  
20*&m=0.0001&f=Number&p=|[Number]|[Title]|[Author]|[Abstract]|[Keywords] 
|[Format]


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 00:58:02 2005
Return-Path: <java-user-return-13947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97840 invoked from network); 6 Apr 2005 00:58:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 00:58:02 -0000
Received: (qmail 92742 invoked by uid 500); 6 Apr 2005 00:57:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92589 invoked by uid 500); 6 Apr 2005 00:57:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92574 invoked by uid 99); 6 Apr 2005 00:57:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 17:57:55 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 418A713E2007; Tue,  5 Apr 2005 20:57:51 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 4141413E2007
	for <java-user@lucene.apache.org>; Tue,  5 Apr 2005 20:57:40 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <a1df7f19d64cd574c60644514ad8b33d@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: java-user@lucene.apache.org
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: wildcarded phrase queries
Date: Tue, 5 Apr 2005 20:57:36 -0400
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a need to implement wildcarded phrase queries, such as this:

	"apach? luc*"

which would match "apache lucene", for example.  This needs to also 
support ordered and unordered proximity like SpanNearQuery does:

	"apach? luc*"~10

I presume I'm going to have to key off of SpanQuery with a some 
specialized subclasses.

What approach do you recommend for implementing something like this?

Thanks,
	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 06:19:46 2005
Return-Path: <java-user-return-13948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58239 invoked from network); 6 Apr 2005 06:19:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 06:19:45 -0000
Received: (qmail 45442 invoked by uid 500); 6 Apr 2005 06:19:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45416 invoked by uid 500); 6 Apr 2005 06:19:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45402 invoked by uid 99); 6 Apr 2005 06:19:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 05 Apr 2005 23:19:36 -0700
Received: from [192.168.1.100] ([::ffff:66.92.12.207])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Wed, 06 Apr 2005 01:19:32 -0500
  id 00074189.42537F74.00005719
Message-ID: <42537F68.1030707@allthingslocal.com>
Date: Tue, 05 Apr 2005 23:19:20 -0700
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: wildcarded phrase queries
References: <a1df7f19d64cd574c60644514ad8b33d@ehatchersolutions.com>
In-Reply-To: <a1df7f19d64cd574c60644514ad8b33d@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher writes (4/5/2005 5:57 PM):

> I have a need to implement wildcarded phrase queries, such as this:
>
>     "apach? luc*"
>
> which would match "apache lucene", for example.  This needs to also 
> support ordered and unordered proximity like SpanNearQuery does:
>
>     "apach? luc*"~10
>
> I presume I'm going to have to key off of SpanQuery with a some 
> specialized subclasses.
>
> What approach do you recommend for implementing something like this?

Hi Erik,

Might it be as easy as creating a SpanWilcardQuery that transforms into 
a SpanOrQuery of SpanTermQuery's, and then use a SpanNearQuery of 
SpanWildcardQuery's?  You could use a WildcardTermEnum.to generate the 
list of terms for the SpanOrQuery.  This would have some issues like 
computing the idf as the sum of all the pattern-matched terms, but it 
looks like that issue still exists with WildcardQuery too.  I haven't 
done much with SpanQuery's so this might not work out so simply, or be 
acceptably efficient.

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 07:10:52 2005
Return-Path: <java-user-return-13949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67083 invoked from network); 6 Apr 2005 07:10:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 07:10:52 -0000
Received: (qmail 12113 invoked by uid 500); 6 Apr 2005 07:10:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11845 invoked by uid 500); 6 Apr 2005 07:10:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11827 invoked by uid 99); 6 Apr 2005 07:10:36 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from wip-ectls-mx3.wipro.com (HELO wip-ectls-mx3.wipro.com) (203.101.113.41)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 00:10:35 -0700
Received: from wip-ectls-mx3.wipro.com (localhost.localdomain [127.0.0.1])
	by localhost (Postfix) with ESMTP id A431C224255
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2005 12:40:28 +0530 (IST)
Received: from blr-ec-bh3.wipro.com (blr-ec-bh3.wipro.com [10.200.50.93])by 
	wip-ectls-mx3.wipro.com (Postfix) with ESMTP id 96B2A224190for 
	<java-user@lucene.apache.org>; Wed,  6 Apr 2005 12:40:28 +0530 (IST)
Received: from del-ggn-msg.wipro.com ([10.105.50.99]) by 
	blr-ec-bh3.wipro.com with Microsoft SMTPSVC(6.0.3790.211); Wed, 6 Apr 2005 
	12:44:02 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="=_Boundary_XonGotupe5uacYDGBvlQ"
Subject: How to index and search PDF documents.
Date: Wed, 6 Apr 2005 12:37:51 +0530
Message-ID: <024A1A56D6648947BD23C2BCA17300B40156144F@del-ggn-msg.wipro.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <024A1A56D6648947BD23C2BCA17300B40156144F@del-ggn-msg.
	wipro.com>
Thread-Topic: How to index and search PDF documents.
Thread-Index: AcU6c42wCSFRhlkiSEqneg1JACAFmAAAMIBi
From: <himani.tandon@wipro.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Apr 2005 07:14:02.0375 (UTC) 
	FILETIME=[35D7D170:01C53A78]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=_Boundary_XonGotupe5uacYDGBvlQ
Content-Type: message/rfc822
Content-Disposition: attachment;
	filename=originalmail.eml

Received: from blr-ec-bh3.wipro.com (blr-ec-bh3.wipro.com [10.200.50.93])
	by wip-ectls-mx3.wipro.com (Postfix) with ESMTP id 96B2A224190
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2005 12:40:28 +0530 (IST)
Received: from del-ggn-msg.wipro.com ([10.105.50.99]) by blr-ec-bh3.wipro.com with Microsoft SMTPSVC(6.0.3790.211);
	 Wed, 6 Apr 2005 12:44:02 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C53A77.58BC8BDC"
Subject: How to index and search PDF documents.
Date: Wed, 6 Apr 2005 12:37:51 +0530
Message-ID: <024A1A56D6648947BD23C2BCA17300B40156144F@del-ggn-msg.wipro.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <024A1A56D6648947BD23C2BCA17300B40156144F@del-ggn-msg.wipro.com>
Thread-Topic: How to index and search PDF documents.
Thread-Index: AcU6c42wCSFRhlkiSEqneg1JACAFmAAAMIBi
From: <himani.tandon@wipro.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Apr 2005 07:14:02.0375 (UTC) FILETIME=[35D7D170:01C53A78]

This is a multi-part message in MIME format.

------_=_NextPart_001_01C53A77.58BC8BDC
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello sir
Thank u for replying.
But my query is not regarding updating indexes, optimizing indexes and =
such others.
=20
Sorry sir may be my earlier question was not that clear. Here i =
elaborate my problem clearly.=20
I have to develop a search engine for my s website. We have some data on =
the local common drive which is accessible o everyone. The drive =
contains directories which further contain html pages, pdf files, power =
point presenations, xml files, word documents , xls files etc. Now the =
requirement is that people of my department wnat a website which =
contains a search engine so that they are able to search any file from =
this drive.
So i created a website and i am trying to make a search engine for my =
site.
=20
I have used Lucene to create the search engine.As u must be knowing  =
Lucene first indexes all the files and then we can search them. Till =
here everything goes fine. But when I integrate lucene with my web =
server i.e. Apache Tomcat it just indexs Html documents and text =
documents. But my requirement is to index all files on the common drive =
i.e. .pdf,.xml,. ppt, .xls etc. For solution to this problem I had =
reffered to the FAQ's of lucene at the following link =
http://wiki.apache.org/jakarta-lucene/LuceneFAQ.  There Ii searched for =
"How to index pdf files" , power point presentations etc. Question 34 is =
the solution for PDF files. Please do refer to it may be u understand my =
problem better.
=20
It says that we require a parser for this so that it can extract text =
from PDF  files and convert it into a text file. Now after extracting =
it, Lucene converts that PDF document to text document. Then Lucene =
indexes it . Now when I search it in my browser the file is searched and =
displayed as a text document which is not required. I want it to be =
display it as PDF documents. So please give me a solution for this and =
tell me how can this problem be solved.
=20
"THAT is  HOW CAN I INDEX  and SEARCH .pdf, .ppt,. xml, .doc etc =
DOCUMENTS  WITH LUCENE."
I WILL BE REALLY HANKFUL IF U SOLVE MY PROBLEM.
=20
=20
Regards,
Himani Tandon
Project Engineer
Wipro Technologies(Gurgaon)
Email : himani.tandon@wipro.com <mailto:himani.tandon@wipro.com>=20

________________________________

From: Chuck Williams [mailto:chuck@allthingslocal.com]
Sent: Wed 4/6/2005 11:49 AM
To: java-user@lucene.apache.org
Subject: Re: wildcarded phrase queries



Erik Hatcher writes (4/5/2005 5:57 PM):

> I have a need to implement wildcarded phrase queries, such as this:
>
>     "apach? luc*"
>
> which would match "apache lucene", for example.  This needs to also
> support ordered and unordered proximity like SpanNearQuery does:
>
>     "apach? luc*"~10
>
> I presume I'm going to have to key off of SpanQuery with a some
> specialized subclasses.
>
> What approach do you recommend for implementing something like this?

Hi Erik,

Might it be as easy as creating a SpanWilcardQuery that transforms into
a SpanOrQuery of SpanTermQuery's, and then use a SpanNearQuery of
SpanWildcardQuery's?  You could use a WildcardTermEnum.to generate the
list of terms for the SpanOrQuery.  This would have some issues like
computing the idf as the sum of all the pattern-matched terms, but it
looks like that issue still exists with WildcardQuery too.  I haven't
done much with SpanQuery's so this might not work out so simply, or be
acceptably efficient.

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




------_=_NextPart_001_01C53A77.58BC8BDC
Content-Type: application/ms-tnef;
	name="winmail.dat"
Content-Transfer-Encoding: base64

eJ8+IjYHAQaQCAAEAAAAAAABAAEAAQeQBgAIAAAA5AQAAAAAAADoAAEIgAcAGAAAAElQTS5NaWNy
b3NvZnQgTWFpbC5Ob3RlADEIAQ2ABAACAAAAAgACAAEEgAEAJwAAAEhvdyB0byBpbmRleCBhbmQg
c2VhcmNoIFBERiBkb2N1bWVudHMuAGwNAQWAAwAOAAAA1QcEAAYADAAlADMAAwBNAQEggAMADgAA
ANUHBAAGAAwAJQAzAAMATQEBCYABACEAAABDQTg4NUI5Qzc1M0M0NjRCODc2OTQ1Q0Y2MTFBMzQ2
QwAyBwEDkAYA9BsAADcAAAADADYAAAAAAEAAOQDci7xYdzrFAR4APQABAAAAAQAAAAAAAAACAUcA
AQAAADMAAABjPXVzO2E9IDtwPVdpcHJvO2w9REVMLUdHTi1NU0ctMDUwNDA2MDcwNzUxWi0zNjQ3
NQAAHgBJAAEAAAAeAAAAUmU6IHdpbGRjYXJkZWQgcGhyYXNlIHF1ZXJpZXMAAABAAE4AACRlkXA6
xQEeAFoAAQAAAA8AAABDaHVjayBXaWxsaWFtcwAAAgFbAAEAAABFAAAAAAAAAIErH6S+oxAZnW4A
3QEPVAIAAAAAQ2h1Y2sgV2lsbGlhbXMAU01UUABjaHVja0BhbGx0aGluZ3Nsb2NhbC5jb20AAAAA
AgFcAAEAAAAeAAAAU01UUDpDSFVDS0BBTExUSElOR1NMT0NBTC5DT00AAAAeAF0AAQAAAA8AAABD
aHVjayBXaWxsaWFtcwAAAgFeAAEAAABFAAAAAAAAAIErH6S+oxAZnW4A3QEPVAIAAAAAQ2h1Y2sg
V2lsbGlhbXMAU01UUABjaHVja0BhbGx0aGluZ3Nsb2NhbC5jb20AAAAAAgFfAAEAAAAeAAAAU01U
UDpDSFVDS0BBTExUSElOR1NMT0NBTC5DT00AAAAeAGYAAQAAAAUAAABTTVRQAAAAAB4AZwABAAAA
GQAAAGNodWNrQGFsbHRoaW5nc2xvY2FsLmNvbQAAAAAeAGgAAQAAAAUAAABTTVRQAAAAAB4AaQAB
AAAAGQAAAGNodWNrQGFsbHRoaW5nc2xvY2FsLmNvbQAAAAAeAHAAAQAAACcAAABIb3cgdG8gaW5k
ZXggYW5kIHNlYXJjaCBQREYgZG9jdW1lbnRzLgAAAgFxAAEAAAAbAAAAAcU6c42wCSFRhlkiSEqn
eg1JACAFmAAAMIBiAB4AdAABAAAAHAAAAGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZwAeABoM
AQAAAA4AAABIaW1hbmkgVGFuZG9uAAAAHgAdDgEAAAAnAAAASG93IHRvIGluZGV4IGFuZCBzZWFy
Y2ggUERGIGRvY3VtZW50cy4AAAIBCRABAAAAJhUAACIVAABITwAATFpGdSO9e+sDAAoAcmNwZzEy
NYIyA0NodG1sMQMwPwEDAfcKgAKkA+MCAGNowQrAc2V0MCAHEwKA/xADAFAEVghVB7IR1Q5RAwHd
ENcyBgAGwxHVMwRGENnZEu9mNBBvEXs1A8YHbeUR1TYaR2FoA3ECgBHj2wjvCfc7Hg8OMDUfLx8P
+wpBDiA4Ia8gNyBBI14R4Z0MYGMAUAsJAWQzNhFgyQulNCAQAipcDrIBkF5nFPAKoxHjKGg0FPA8
ACFET0NUWVBFACBIVE1MIFBVAEJMSUMgIi0vEC9XM0MsAERURBErFDMuMiwARU4izj4pbSkPLkEx
OCpwKyI3LY8unzEQMygAL/BFQb5EME0O8TFvM+8vdDYO8KA8TUVUQQewQTbgmD0iRwnwBJBhdAWw
oiIXEE9OVC1QVDdwiQXhRXgY4W5nZQZSHnYTMTnBAJACICA2LgQ1LgHAMzIuMzknLX41Ty+DNzcq
cFRJKFRMRTBONA7wUmXEOiAD8GxkYwsRCYCYIHBoN9AZICBxClDVCIFzLu41KnAvPd88D78wxT8h
QkAyzzEfRhQ1EWDgPEJPRFlFjSdxRq8IZzk2KnBESVYgiGlkPUsAT1dBP1ABC1B5VGV4dDQ5hDky
PaBkaXI9RjDuckWARfMAISAAAEyxCrHzTaIY4FxxAyFNFRFgSG8/SX9Khkx/TY9OmkXJNjRXUnpO
zy90NC/RRjhRIFJmANBlPQcTIB2DPVQjMFmDIACQeliQMvdSaxgwAzBjE/ADsgHQTqlYSGVsHaBZ
4XIu/DX9SpEvWBJSaVJ3VLsBwFJ37wqiX1gKgC78MDKRLGBK0P9er1avUB9RL1I/U09fj1Vvv2Sv
V49Ylln/WwRbvVQ5MfhrIHVYUAWxIJBLoQuA/GcuXT9eT19fYG9hf2KP/2OfbE9lv2bPZ99o72n/
aw+fbB9tL24/b09bvUJ1BUAcbXlAo4bwBAAgbm87BUAgkGcLEXJRcZBwZL834IhCRCx7ZQuAAQB4
B5D4LCBvBTAHcIRQiEKKZVYgAHBAIHMmAGiK4HT+aDoRco9zn3Svdb92z3ff/3jvgZ97D3wffS9+
P39PgF//gW+Cf4OPhJ9bro0vjj+UbwVGBTgoACZuYnNw4wKAmEdcJ2EBQJoPkH//kY+Sn5Ovo6+V
z5bfl++Y/3+mX5sfq3+dP55Pn19b21OvBbCHQV0BhtBhhvBiOXC1huFlCsBsEyJAsXOIwP06UXdA
cIkPrQOHoozAN+D1WQBsuWEuXJEgkErwuVBvC2AG4DfRuRNwA2ACYGX+bbyES7CNHKTfpe6hP6JP
/49Pp0+oX6lvqn/Br6yfra//rr+vz7Dfse+y/7QPtR+2L/lbvUkgGPA5wLwwXOABAPs5wB2gcIwQ
08C5YYyBCfB+ZwuAOXBxwobhup/LBHfaZcBgab3gvOBXOXDWU/pzA3Blv0/AX6YqiKHXULs6UYzB
IB2gP9BY8m0EYM0DoGQFENZxd2gN4IyQ74dxANBYgAQQab5xiuDY3//LE9bhh0ACINqRcUA5cN/0
/wWgAjALcQQgzLEFkDfxQPH94EVmCHCMwuQ21kAOwUAwv0ZQirKIkM2w4b/LImYDEP3nc2/aMAXA
6bALgAVAvkDfB5AJ8IixAiCKwXjnEelF1ncFsEAgZN8wdQeAAjA7BCDrMWwEIOlDuVB0Y/284E7p
wOfvyxPe4iCQQLDP5OHskodivENwZYrw4WK/zbCG4QEACrEOwPBSd+rB/9dB2jXgReRH11DuT8si
13z/20C8NIzBhvAKwNt/3I+mG/8BoOFh1qHXdQBwhvDpQlhQ/wNhvDGHcfSfyyLf840fwy//xD/F
T8Zfx2/If9Evyp/Lr//Mv83Pzt/P79D/0g9YX1lv71p/W4+4Eb1BYyCQvdFAIN/y6IwivVD8zwdy
YfxRh0D3iELWoRuAaxUB12/YdNpy//5//48AnwGvAr8DzwTfDY//Bv8IDwkfCi8LPwxPDV8Ob//T
LxFvoE8Z3xrvLT/4T/lf/xxPHV8ebx9/L38hnyKvI7//JM8l3ybvJ/84XyofKy8sP+3VvXX7IIxA
TIxw6rDWgz8UBN7T+yUVj+LD1/MuQbv0UHGgbUUg8sC5AWuHoP53iN8xbzJ+RXX70Izw8HH/i7Zc
wN7T7VQVIozBulEX0L9HPzmi30Df0PsljMFt44F/++A9UIzRF9DjA/xxiOFn/m+L8fvQ42KGouBQ
T7HWMPfqMYfwvcNsRYRQH9nzFOBv+3CG4doxGAFy4xGLkC7d2pFBOZA9EBfQVNtQ30C78HHywGpJ
Uouj9FBI5wL/7FhPU4vQ8sBWP/3T7GZUVP+G4e/eE8GKck5j7VTetd+Ll1izXF85oi7nsSwu61F/
ZADqAIsAitBkEO0h7bNG/9hh20BVwLojReH8c75G1jLzjECH4GZmvRFPcfbSVh/hOYRGQVEnYME8
MFXFf/cUcbFOgEnkuZBxcUpOPEpBOXRoZ6E9IkvAdFBwOi8vSfBrWLBhxVkTLthgZy9qF7DyEbRh
LVXEL0V0afEiQrxp5VBsZGjCZnIw5JF0AHtIWVBFUkxJOE5LIG4vbz9wTX19HxIRcjCM8BYQEmEx
XHX/PVpzz3TfcFs3Xzhhe484bvY5EpA24EFCsGJfOY9K//dMD+OSvSFJFWD7JBRR2FK8IkjuEV+3
57LpQyLs4b/pv+Rh6uN/b+K07cJRufY+M4Gg8JPbImXV2FJQRPZG64S84FC8ofsg7EFnkn/mQV+y
XnG41EkgiF+AgnX/WnFNsRUivhm5AHigWFAZr/8uzxvPM8803zXvNv99fzkf/zovOz88Tz1fPm8/
f0CPQZ//Qq8sz5HPkt+lL4E/gk+UP/+VT5Zfl2+nb5mPmp+br5y//53Pnt+f77BPog+jH6Qv1aj9
8sBzjhDwpU/h79X0YbGR/1hB2EP8f/VY9tVZ4VFiXBH/VXDlEFv0/COL8qifqa+quv9O+ORB4xFZ
w+ox9tD0cFwP8+i77eRhZpFxwYZKAhTg/+eQRXXGdfCli/LsVmYzx6//XS7jg9/QRXVN9lnh7eRU
tdf7JcbzXoJi/DB3voJOtn/Nv7GTZpGENxUiszDEIGz/jhAUUvRSzXPMt+BXSdDywO3v1WTt4ESw
d/uQWcNF4f/UD7GijkHWVVnS1vHMel4h/xOx8UGM0vZwRPHwQBfiizq/vwNbxE6B2m+xot6haO4R
/8FSZnuOQWWxUyDZYKXPpt//k9+r36zvrf+vD7e/sS+yP/+zT7RftW+2f7ePuJ+5r7q//6Tf5D/l
T/efw3/Ej+av57//6M/p3/nf6//tD+4f7y/wP3/xT/JfAr/0f/WP9p8KFiJ4VEhBC+C/LvvPTC5I
wE9XIENBTkShc3D4REVYD68Qv/0aW7Pgr4EEAlNFQVJDSNEQ/2PSGFFkkclwZCLREFshZRIHE38U
j/0aRE9DVU06RQvQUw+fGw/9C1dJRw8gFp8D80xVQx0wRfwuIvgv+T/mP/4//08AX/8BbwofA48E
nwWvBr8HzwjfPwnvCv8MDw0fQ88gYExMsV5ARSBSGAA20FlawFES0EtGVTbgSYwQVdHdoE9MVjcQ
TTeAIL8BK4JQUk9CTEVN/+QPI48knyWvJr8nzyjfMY//Kv8sDy0fLi8vPzBPMV8yb/8zfzSP9y86
7zv/Tk8d/x8P/z1fPm8/f0CPUI9KTlffWO9HQw9EH0UiaWQ9XxBTKGlnbsDwdb2wOTT8NDZ+4EVv
Rn9Hilx/XY//ROVM61QPSM9ir0rvS/fGcOJshNA9IzBr00x/TYX/d4B+4E3vOR9kUVs/VG9TJgtW
P0RuY9wgc3M9TeuLIMmQco4AbGXPZt9n7798fG1fbm9pz2rdX5B2jiAbbE959jN6j1G+PFNQlxLR
ZCOQMHnT0D0iS4KALVNJWkU6IFqAzRjgOxKwOIBPUoPAfhKjhCCDM0ZBTTbAWYPA/UwjInXvgM9E
0GAwWsCCIv9bH4dfT6+Jb1HPUt8fuYv//3FfVX9zP1pfkE9jP2RPdH//dY92n3eveL95z4Bfe+9L
xE0PEGneoNcATmXJsFJrwoDgECJrWmYfYH5jM/1+zDWeUk3ETcGfL4Gfgq8dg7IyhA2GP6XEUmVn
8ZeAZHMsh6+Iv6WPit//rW+P35r/kf+TD5QfsD+uf/+XT5hfmW+af5uPnJ+dr56/95/PoN+h7yOj
QKMvpDuksb+lP6ZPp1+ob6l/hr1IwwD94BBpz6DgEd9Qq/+tD8b//68vzy+xT7xvs2+0f7WP0f//
0D+4v7nPut+777z/vg+/H//AL8E/wk/DX8RvxX/Gj8ef/8ivyb/Kz9+vzb/Oz+4P0O//8B/xL+O/
5M7ak+XP5t/n7z/z3+oJ6w/sH+0v+oVQcmBvamVjdG7v2qNFgG5naW5lZXLur//vv/pf8d8Dv9MP
3i/VL9Y//9dPBo8Ez9p/24/cn92v3r//38/g3+Hv9E/1X+Uf98/43z/57/r/6m/8z/3fFD9XaS5w
AAAAbw8zVAAwaG7na3EB4BlwKEdfwKuQzZD+KQJPA18dTwV/J68HnxK//wm/Cs8L3yp/KL8PDxAf
ES//Ej8TTxRfFW8WfxePGJ8Zr/8avxvPHN8d7x7/IA8hHzgv/yY/J09GjylvSJ9Jrzw/9h9/Q0M/
P6STQO9B//wvRG8j8DMzNjY+8EW/Ue9Naq8+S37LQJNW50U1gGlrQD+DwCOfMz9Kv0vPUm1BIDBo
cmVmgxBbcnRvNDpozPMuMsDNckB3VSNCLmtgbVYMZiVwbDpkXAJmZIAB8FOge0gAWVBFUkxJTktm
IGGPYp19faSBZIByxnM3gDoRMVx1a0Bfb/9NLvcfWa9pKWaPYxRdP15PzysfcX9yj0cvL0F+wHTf
/0g/dD9v/3efc182ry2vLr//L896b3ivUXBNoXoFf1+Ab/+Bf4QfhS8x/1zPNBllAKLQfTeAclBL
jAGKIYzyJQBcnnFpH4a3RKCHYEJSUEkfihKJII4PiZ+KrEhSIAmSMGJJzXBleD0tpjFQTGjgcWON
wGpo8cRkYjpQfiBflrKWcf+M8AHxflOQ35HuNx9Wb2nf203JzVBoojFP1DJQTHnQuzpvUl5CUEuW
YaAHRgAAdG06di8voap8SUTwaCh1Y2sjIWyXQGFtdz1wW++SoltmFSUAplFAnzWQmlBuEAHQaIBv
YzWQ/WMyXY6tedGPzJdCl9+g78Oh/61CU2VudKOPpJ8BpadXZWQgNC82Gi+fwDBAYI9wOjQ586cf
kpNBTaqPq5+sr62/e67PuGRUZmCwj7GfpbZqIUWAYS11cwIgQGzjplCwQGUuYWtQJQC/MP0+cGe1
z7bft++4/7oPr9U8dWIAIrufvK+lp1Jl71vAYuBkgKoAcpRws0C0Xw2SonBhMDTgZSBxdf8CICVx
v//BD8IfeR96L85v/8x/zY98r32/fs+G79CPmH9/ko80J1Yf2Y/an5pF2BBQ/4/vex/c/5xPTgCe
P0Axn7zGRcugpnBIYXS/gUNgqnfLoHQ9YSizYDWzlJA1OjU3/+BNKcYcP9KP05/Rr+ov6z9SbCZn
60TQbHg+pYlJYSBFgMtQv54Qyb/e0gIBs0BmUCA9QL5wU9A9ULBQyPrLDCxP0L2mUGjyIKcP3rSp
gXPpH//tL+4/70/wX/tP+V/6b/t/h/yPAJ8Bp25ic3ACWfBcJ2EwAx8ELwU/Bk9/B18Ibwl/Co8L
mmXwv1M/8iC+4Soi/i//PwBPAV//Am8S3xDvEf8TDxQfpaf2/03e0nduEPaRd2+WMSBfNYDnIQ81
y1C+5CL2UGbdPnAglICm4PRBLhivDW/9DntU+FFFYPOxPXDz8TWQ/zUwFa8WvxfPGN8Z7xr/p+f5
9nBwcD5w9KA+cJRwYUBjs0BukSB1bisGbxF4uz1A56B5D7Dm0MtQU2tQ9m49kN7QUcuBLOApP97S
/26wPWD4jySfJa8mvyfPMo//MJ8xrzK/M8833yAPIR86v/87zzzfPe8+/0APQR9CLw7f/Q/hftfg
NW82fzePOJ85r/9KT0hfSW9Kf0uP8TkuP8rDD2FA9nD0cPGwJ20gZ35vqaHz4vHj8/EtICzgb/9s
AFYhLUMt1GLgqYDyISNw//RwTR9OL08/UE9RXyjvKfh+cMXgptCXQOSws0D2cGLsY2zLMMtAcx98
WM9Z3/9a71v/Yt9g72H/ZZ9kH/D7/lfx4PSgv1BvEb9xi7D0APp5HQAgVDBvUfRxs0Aewv9dn97S
9CdVAleyqYMs9PhCfj9l72b/aA9xT3Jfc2lI+mnmoyx0H3Uvcz93z3jfcXnpTWlnlQD0EPSgYnfy
ESKgLaBzLOD2z96lY/9UMB1gVQKeEC1SppHJQi3U76mAa6GMEC1wcx7BpvGpoN+owHqfe695vIDk
Ty3FVnFXfw/e0i1SVOdQbS3TJ//2QSuCqYCwQCuwy0GA5C2Y/1Ywg1+Eb3m8gQXJM4k1cQzvRG9F
f4dv3tJZbKGqQB0Sp4pUjvaI8kVuVGAu8/H+Z78RgnDnsInyi7+Mz3m8/V9AcyrhokDnsILSHsKK
Af+S34hnhrUff5D/IZ8ioBz0//HjV7L0EGAAy4AioC0Clz9nmE95vKpBcHVvg5tSaf5kxKB+0Ztf
KghUwFZxI1CWbKbT3sB0mrFuLR1T9/PCmsL2UGKl0H3hop+jr/GZXW9va6I0ggSh4/Zg/2+AqPGn
L97SHwCaQaDBV1J7jvvz4W+dn56vRazxxG7+J6svrD95rWxgebAdQPaC/1dDVqeJgFehr+/39x1A
faP/K9D0oSsA5uAdAPSgu1HkkP30MXn2UG2BfiC2r7e/hX3qYx5QcN5gYr7Au3+w9P9WQBywy7D0
kGBPwF95r8Uf08YvxzpDaPaAa8f/yQ9/xx/Lf8yPzZ/Or8+/0MYtf9RP1V/Wb9d/0U/SX9BsVK+7
b960K8BfoXOAUGl+II32UGWp0fTQOiBq8fC0YS2KUXLeoN0oQB406i4dxC4rAGfYn9mv0GyiRm2B
YWRk56BpubD/I1Dbv4AEbQErgfZB3ebkz+ecot5oqiBscN+/4M/h31/QX+qv67/sz+3XNe5xL/BG
T05U7slqJ+1gajY/nILyqO/InHPvz2k2NzJt8YFQ7sDtjDBpwPGQROxJVvH/9h9n8zGck/p/CfuP
NTjxgUJPRFkv9533QPy//0E38YFIVBRNTO7AfQFwAAAeADUQAQAAAEEAAAA8MDI0QTFBNTZENjY0
ODk0N0JEMjNDMkJDQTE3MzAwQjQwMTU2MTQ0RkBkZWwtZ2duLW1zZy53aXByby5jb20+AAAAAB4A
RxABAAAADwAAAG1lc3NhZ2UvcmZjODIyAAALAPIQAQAAAB8A8xABAAAAVgAAAEgAbwB3ACAAdABv
ACAAaQBuAGQAZQB4ACAAYQBuAGQAIABzAGUAYQByAGMAaAAgAFAARABGACAAZABvAGMAdQBtAGUA
bgB0AHMALgAuAEUATQBMAAAAAAALAPYQAAAAAEAABzDyxLBPdDrFAUAACDASRc1YdzrFAQMA3j+v
bwAAAwDxPwkEAAAeAPg/AQAAAA4AAABIaW1hbmkgVGFuZG9uAAAAAgH5PwEAAABbAAAAAAAAANyn
QMjAQhAatLkIACsv4YIBAAAAAAAAAC9PPVdJUFJPL09VPUZJUlNUIEFETUlOSVNUUkFUSVZFIEdS
T1VQL0NOPVJFQ0lQSUVOVFMvQ049VFI4MDk2AAAeAPo/AQAAABUAAABTeXN0ZW0gQWRtaW5pc3Ry
YXRvcgAAAAACAfs/AQAAAB4AAAAAAAAA3KdAyMBCEBq0uQgAKy/hggEAAAAAAAAALgAAAAMA/T/k
BAAAAwAZQAAAAAADABpAAAAAAAMAHUAAAAAAAwAeQAAAAAAeADBAAQAAAAcAAABUUjgwOTYAAB4A
MUABAAAABwAAAFRSODA5NgAAHgAyQAEAAAAZAAAAY2h1Y2tAYWxsdGhpbmdzbG9jYWwuY29tAAAA
AB4AM0ABAAAAGQAAAGNodWNrQGFsbHRoaW5nc2xvY2FsLmNvbQAAAAAeADhAAQAAAAcAAABUUjgw
OTYAAB4AOUABAAAAAgAAAC4AAAADAHZA/////wsAKQAAAAAACwAjAAAAAAADAAYQYmRUbQMABxAF
CwAAAwAQEAAAAAADABEQAAAAAB4ACBABAAAAZQAAAEhFTExPU0lSVEhBTktVRk9SUkVQTFlJTkdC
VVRNWVFVRVJZSVNOT1RSRUdBUkRJTkdVUERBVElOR0lOREVYRVMsT1BUSU1JWklOR0lOREVYRVNB
TkRTVUNIT1RIRVJTU09SUlkAAAAAAgF/AAEAAABBAAAAPDAyNEExQTU2RDY2NDg5NDdCRDIzQzJC
Q0ExNzMwMEI0MDE1NjE0NEZAZGVsLWdnbi1tc2cud2lwcm8uY29tPgAAAADnjQ==

------_=_NextPart_001_01C53A77.58BC8BDC--
--=_Boundary_XonGotupe5uacYDGBvlQ
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: 7bit



Confidentiality Notice 

The information contained in this electronic message and any attachments to this message are intended
for the exclusive use of the addressee(s) and may contain confidential or privileged information. If
you are not the intended recipient, please notify the sender at Wipro or Mailadmin@wipro.com immediately
and destroy all copies of this message and any attachments.

--=_Boundary_XonGotupe5uacYDGBvlQ
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--=_Boundary_XonGotupe5uacYDGBvlQ--

From java-user-return-13950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 07:18:55 2005
Return-Path: <java-user-return-13950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69427 invoked from network); 6 Apr 2005 07:18:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 07:18:55 -0000
Received: (qmail 22074 invoked by uid 500); 6 Apr 2005 07:18:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22053 invoked by uid 500); 6 Apr 2005 07:18:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22039 invoked by uid 99); 6 Apr 2005 07:18:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from envoy.cybage.com (HELO envoy.cybage.com) (203.199.150.190)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 00:18:46 -0700
Received: from chandrasekhard ([192.168.11.236]) by envoy.cybage.com with Microsoft SMTPSVC(6.0.3790.211);
	 Wed, 6 Apr 2005 12:47:24 +0530
From: "Chandrashekhar" <chandrashekhard@cybage.com>
To: <java-user@lucene.apache.org>
Subject: RE: How to index and search PDF documents.
Date: Wed, 6 Apr 2005 12:47:24 +0530
Message-ID: <HMEBILHDEDLGKKKDMGGAKEEJCDAA.chandrashekhard@cybage.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.6604 (9.0.2911.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Importance: Normal
In-Reply-To: <024A1A56D6648947BD23C2BCA17300B40156144F@del-ggn-msg.wipro.com>
X-OriginalArrivalTime: 06 Apr 2005 07:17:24.0363 (UTC) FILETIME=[AE3CBDB0:01C53A78]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Himani,
Your search result should have reference to your documents (like you can
content/document id) and then add rendering logic to render such contents
after you click on some link.

Regards,
Chandra

-----Original Message-----
From: himani.tandon@wipro.com [mailto:himani.tandon@wipro.com]
Sent: Wednesday, April 06, 2005 12:38 PM
To: java-user@lucene.apache.org
Subject: How to index and search PDF documents.




Confidentiality Notice

The information contained in this electronic message and any attachments to
this message are intended
for the exclusive use of the addressee(s) and may contain confidential or
privileged information. If
you are not the intended recipient, please notify the sender at Wipro or
Mailadmin@wipro.com immediately
and destroy all copies of this message and any attachments.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 07:24:19 2005
Return-Path: <java-user-return-13951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70494 invoked from network); 6 Apr 2005 07:24:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 07:24:19 -0000
Received: (qmail 29368 invoked by uid 500); 6 Apr 2005 07:24:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29059 invoked by uid 500); 6 Apr 2005 07:24:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29044 invoked by uid 99); 6 Apr 2005 07:24:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.tanto.de (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 00:24:09 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 1DE8723CE0
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2005 09:24:32 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 07385-06 for <java-user@lucene.apache.org>;
 Wed,  6 Apr 2005 09:24:32 +0200 (CEST)
Received: from tucholsky.office.tanto.de (tucholsky.office.tanto.de [10.0.0.35])
	by mail.tanto.de (Postfix) with ESMTP id 018EB23BF5
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2005 09:24:32 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@localhost [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j367Qa4B003004
	for <java-user@lucene.apache.org>; Wed, 6 Apr 2005 09:26:36 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) id j367QaXt003000;
	Wed, 6 Apr 2005 09:26:36 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16979.36652.728375.467978@tanto-xipolis.de>
Date: Wed, 6 Apr 2005 09:26:36 +0200
To: java-user@lucene.apache.org
Subject: Re: Deeply nested boolean query performance
In-Reply-To: <8f323a5ab7400452c907eed693709ac8@ehatchersolutions.com>
References: <6eaaed68ad071ce34613d9b154cf7368@ehatchersolutions.com>
	<200504012010.45671.paul.elschot@xs4all.nl>
	<8f323a5ab7400452c907eed693709ac8@ehatchersolutions.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik,
> 
> Thanks for your very thorough response.  It is very helpful.
> 
> For all my projects, I'm using the latest Subversion codebase and 
> staying current with any changes there, so that is very good news.
> 
For lucene-1.4.final I find that some query on a real life index
of the form  a AND b AND c AND d AND e AND f takes ~ 10 ms 
 a AND ( b AND ( c AND ( d AND ( e AND f ) ) ) ) ~ 42 ms
and ( ( ( ( ( a AND b ) AND c ) AND d ) AND e ) AND f ) ~ 33 ms

Queries were repeated in order to exclude any IO time. Index size ~ 1 G
(~ 1.5 Mio documents), 6 hits.

Of course that's not a systematic test, but I thought you might be interested
anyway. I don't have the time to see how this would look like using
svn head.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 07:39:56 2005
Return-Path: <java-user-return-13952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73917 invoked from network); 6 Apr 2005 07:39:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 07:39:56 -0000
Received: (qmail 47037 invoked by uid 500); 6 Apr 2005 07:39:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47012 invoked by uid 500); 6 Apr 2005 07:39:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46996 invoked by uid 99); 6 Apr 2005 07:39:48 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr8.xs4all.nl (HELO smtp-vbr8.xs4all.nl) (194.109.24.28)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 00:39:47 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr8.xs4all.nl (8.12.11/8.12.11) with ESMTP id j367dhNM001414
	for <java-user@lucene.apache.org>; Wed, 6 Apr 2005 09:39:43 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: wildcarded phrase queries
Date: Wed, 6 Apr 2005 09:39:43 +0200
User-Agent: KMail/1.5.4
References: <a1df7f19d64cd574c60644514ad8b33d@ehatchersolutions.com> <42537F68.1030707@allthingslocal.com>
In-Reply-To: <42537F68.1030707@allthingslocal.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504060939.43578.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 06 April 2005 08:19, Chuck Williams wrote:
> Erik Hatcher writes (4/5/2005 5:57 PM):
> 
> > I have a need to implement wildcarded phrase queries, such as this:
> >
> >     "apach? luc*"
> >
> > which would match "apache lucene", for example.  This needs to also 
> > support ordered and unordered proximity like SpanNearQuery does:
> >
> >     "apach? luc*"~10
> >
> > I presume I'm going to have to key off of SpanQuery with a some 
> > specialized subclasses.
> >
> > What approach do you recommend for implementing something like this?
> 
> Hi Erik,
> 
> Might it be as easy as creating a SpanWilcardQuery that transforms into 
> a SpanOrQuery of SpanTermQuery's, and then use a SpanNearQuery of 
> SpanWildcardQuery's?  You could use a WildcardTermEnum.to generate the 
> list of terms for the SpanOrQuery.  This would have some issues like 
> computing the idf as the sum of all the pattern-matched terms, but it 
> looks like that issue still exists with WildcardQuery too.  I haven't 
> done much with SpanQuery's so this might not work out so simply, or be 
> acceptably efficient.

I did something very much like this in the surround query language.
I used a SpanNearClauseFactory for use during rewrite of a truncated
term with the following operations:
- create a SpanNearClauseFactory from a field name and an indexreader.
- add a weighted Term.
  This internally adds a corresponding SpanTermQuery, or
  increases the weight of an already added one.
- add a weighted SpanNearQuery as a subquery (for nesting, but
  that probably doesn't fit your syntax above).
- create a clause from the things added above.
  This  normally produces a SpanOrQuery over the added terms
  and subqueries.

Like the boolean clauses,  it's advisable to set a maximum to the
total number of SpanNearTerms used for a query.

Regards,
Paul Elschot.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 07:46:37 2005
Return-Path: <java-user-return-13953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76541 invoked from network); 6 Apr 2005 07:46:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 07:46:37 -0000
Received: (qmail 56642 invoked by uid 500); 6 Apr 2005 07:46:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56618 invoked by uid 500); 6 Apr 2005 07:46:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56603 invoked by uid 99); 6 Apr 2005 07:46:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 00:46:25 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2813B13E2136; Wed,  6 Apr 2005 03:46:20 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 53FEE13E2135
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2005 03:46:03 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <024A1A56D6648947BD23C2BCA17300B40156144F@del-ggn-msg.wipro.com>
References: <024A1A56D6648947BD23C2BCA17300B40156144F@del-ggn-msg.wipro.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <c0eed9548a85ff6f3ad7ae88a281a825@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to index and search PDF documents.
Date: Wed, 6 Apr 2005 03:45:59 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 6, 2005, at 3:07 AM, <himani.tandon@wipro.com> wrote:
> "THAT is  HOW CAN I INDEX  and SEARCH .pdf, .ppt,. xml, .doc etc 
> DOCUMENTS  WITH LUCENE."
> I WILL BE REALLY HANKFUL IF U SOLVE MY PROBLEM.

<commercial>

Get a copy of Lucene in Action.  Otis wrote a great chapter on how to 
handle various document formats with Lucene:

	http://www.lucenebook.com/search?query=index+pdf

</commercial>

It sounds like you're using the Lucene demo application.  That is a 
reasonable starting point, but you will very quickly want to diverge 
from it and integrate in a PDF reader (PDFBox being the best open 
source library) and something to read Office documents (TextMining for 
Word docs, perhaps POI for the other formats).

Also, have a look at Nutch - it may actually be the indexing/searching 
solution you want for your intranet rather than a custom Lucene 
application.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 07:49:48 2005
Return-Path: <java-user-return-13954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78606 invoked from network); 6 Apr 2005 07:49:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 07:49:47 -0000
Received: (qmail 61902 invoked by uid 500); 6 Apr 2005 07:49:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61786 invoked by uid 500); 6 Apr 2005 07:49:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61770 invoked by uid 99); 6 Apr 2005 07:49:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 00:49:39 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 33DDC13E2137; Wed,  6 Apr 2005 03:49:37 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id F12A913E2136
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2005 03:49:29 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <16979.36652.728375.467978@tanto-xipolis.de>
References: <6eaaed68ad071ce34613d9b154cf7368@ehatchersolutions.com> <200504012010.45671.paul.elschot@xs4all.nl> <8f323a5ab7400452c907eed693709ac8@ehatchersolutions.com> <16979.36652.728375.467978@tanto-xipolis.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <35fa6df11129578c98ac54bed537930a@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Deeply nested boolean query performance
Date: Wed, 6 Apr 2005 03:49:29 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Morus.

I will very soon be running experiments against a very large dataset 
using the trunk of Lucene and will report some statistics then.

	Erik

On Apr 6, 2005, at 3:26 AM, Morus Walter wrote:

> Hi Erik,
>>
>> Thanks for your very thorough response.  It is very helpful.
>>
>> For all my projects, I'm using the latest Subversion codebase and
>> staying current with any changes there, so that is very good news.
>>
> For lucene-1.4.final I find that some query on a real life index
> of the form  a AND b AND c AND d AND e AND f takes ~ 10 ms
>  a AND ( b AND ( c AND ( d AND ( e AND f ) ) ) ) ~ 42 ms
> and ( ( ( ( ( a AND b ) AND c ) AND d ) AND e ) AND f ) ~ 33 ms
>
> Queries were repeated in order to exclude any IO time. Index size ~ 1 G
> (~ 1.5 Mio documents), 6 hits.
>
> Of course that's not a systematic test, but I thought you might be 
> interested
> anyway. I don't have the time to see how this would look like using
> svn head.
>
> Morus
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 08:24:55 2005
Return-Path: <java-user-return-13955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89507 invoked from network); 6 Apr 2005 08:24:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 08:24:55 -0000
Received: (qmail 25133 invoked by uid 500); 6 Apr 2005 08:24:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25041 invoked by uid 500); 6 Apr 2005 08:24:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 19303 invoked by uid 500); 6 Apr 2005 02:50:23 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
From: "Jason Eacott" <jeacott@hardlight.com.au>
To: lucene-user@jakarta.apache.org
Date: Wed, 6 Apr 2005 12:20:35 +0930
MIME-Version: 1.0
Subject: lucene 1.4 + needs spaces problem
Reply-To: jeacott@hardlight.com.au
Message-ID: <4253D413.14684.8835087@localhost>
Priority: normal
X-mailer: Pegasus Mail for Windows (v4.01)
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Content-description: Mail message body
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
	 I recently upgraded from lucene 1.3 final to 1.4 and discovered some things 
which no longer seem to work right.

I am using 
Analyzer analyzer = new StandardAnalyzer();
QueryParser parser = new QueryParser( "terms", analyzer); 
parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND); 
query = parser.parse(TextParameters);

I then proceed to flesh out the query with a bunch of BooleanQuery's

all this works great with the older lucene but I get lots of error s in the trace because I am 
also using the compoundindex (need to on a windoze box to prevent too many file handles 
issues)

anyway - 
if I run a query something like
properties@conf:false+properties@year:"2004"+properties@month:"February"+properties
@committee:"Council" 

it no longer works unless I ensure there are spaces around each +

eg this works

properties@conf:false + properties@year:"2004" + properties@month:"February" + 
properties@committee:"Council" 

can anyone tell me if this has been fixed somewhere or whether this was by design? (I 
cannot imagine that it is)

I know I have and set by default but this should still work I think.

thanks in Advance

Jason.

btw - the mailinglist search is broken, I get
 VelocityServlet: Error processing the template 
 null: Got error 127 from table handlerorg.apache.velocity.exception.VelocityException: 
null: Got error 127 from table handler 
      at org.tigris.eyebrowse.servlets.EyebrowseServlet.handleRequest(Unknown Source) 
      at org.apache.velocity.servlet.VelocityServlet.doRequest(VelocityServlet.java:396) 
      at org.tigris.eyebrowse.servlets.EyebrowseServlet.doRequest(Unknown Source) 

for this URL
http://nagoya.apache.org/eyebrowse/BrowseList?listName=lucene-
user@jakarta.apache.org&from=&to=&count=12556&by=date&first=41&windowSize=20&s
electedPage=3


Thanks
Jason.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 08:36:38 2005
Return-Path: <java-user-return-13956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92942 invoked from network); 6 Apr 2005 08:36:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 08:36:37 -0000
Received: (qmail 44277 invoked by uid 500); 6 Apr 2005 08:36:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44260 invoked by uid 500); 6 Apr 2005 08:36:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 31354 invoked by uid 99); 6 Apr 2005 08:30:31 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
X-Sasl-enc: gXwT6Fz2zmwbVcV0uFkfjA 1112776221
Message-ID: <42539E1E.9070803@upaya.co.uk>
Date: Wed, 06 Apr 2005 09:30:22 +0100
From: Upayavira <uv@upaya.co.uk>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041124)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: infrastructure@apache.org
Cc: java-user@lucene.apache.org
Subject: Re: Fwd: Wiki formatting changes
References: <9d4a66d7082a9d9b0ee673be6cba90c3@ehatchersolutions.com>
In-Reply-To: <9d4a66d7082a9d9b0ee673be6cba90c3@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It is either manual change, or a little script to sort the problem out. 
At the moment, I can't help with the latter. If you can handle doing it 
manually whenever you see it, that will be the most straight-forward 
approach.

As to the nature of the change - we upgraded from Moin 1.1(pre) to 
1.3.4. It was a huge upgrade, and means we're back with Moin's HEAD, and 
we've been much more careful about patches that take us away from what 
moin are doing, so that it will be easier to upgrade in future.

I'm sure over the coming months we'll discover the many benefits of 
having upgraded, once all of the teething problems have settled down.

Regards, Upayavira


Erik Hatcher wrote:
> I suppose this should be addressed to Leo...  anything we can do about 
> the issue mentioned below regarding wiki formatting?
> 
> Thanks,
>     Erik
> 
> 
> Begin forwarded message:
> 
>> From: Chris Hostetter <hossman_lucene@fucit.org>
>> Date: April 5, 2005 5:56:28 PM EDT
>> To: java-user@lucene.apache.org
>> Subject: Wiki formatting changes
>> Reply-To: java-user@lucene.apache.org
>>
>>
>> he wiki appears to have undergone some style cahnges recently, the layout
>> is a lot different now (and in my opinion: cleaner) but a side effect
>> seems to be that some page formatting which used to work no
>> longer does
>>
>> Specifically, subSection headings that have leading whitespace, ie...
>>
>>  == Utility to pad the numbers ==
>>
>> ...show up verbatim in the page, but removing the space...
>>
>> == Utility to pad the numbers ==
>>
>> ...seems to fix the problem.
>>
>>
>> does anyone know what exactly changed?  is there an easy config option
>> that can be toggled to get the old behavior, or do we just need to slowly
>> tweak all of the existing docs (there are quite a few with this problem)
>> to eliminate the whitespace?
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 08:59:07 2005
Return-Path: <java-user-return-13957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99293 invoked from network); 6 Apr 2005 08:59:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 08:59:07 -0000
Received: (qmail 82301 invoked by uid 500); 6 Apr 2005 08:58:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82236 invoked by uid 500); 6 Apr 2005 08:58:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82182 invoked by uid 500); 6 Apr 2005 08:58:27 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 82118 invoked by uid 99); 6 Apr 2005 08:58:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 01:58:24 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 31C0813E2136; Wed,  6 Apr 2005 04:58:22 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id A667913E2135
	for <lucene-user@jakarta.apache.org>; Wed,  6 Apr 2005 04:58:08 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <412C9F9B.4000302@zilverline.org>
References: <412C9F9B.4000302@zilverline.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <1747ac0ae9d321f74e426a20c48decad@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: lucene 1.4 in maven repository
Date: Wed, 6 Apr 2005 04:58:06 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 25, 2004, at 10:18 AM, Zilverline info wrote:

> Hi,
>
> Can anyone tell me why there is no lucene 1.4 jar in the maven 
> repository @ http://www.ibiblio.org/maven/lucene/jars/ ? Who makes 
> them available? It would be very convenient to be able to get the 
> latest version from there (or anywhere else)

Why?  I'm sure it is only because no one has asked for it before.

I'll check on what it takes to publish it ibiblio.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 09:06:54 2005
Return-Path: <java-user-return-13958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1329 invoked from network); 6 Apr 2005 09:06:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 09:06:54 -0000
Received: (qmail 97574 invoked by uid 500); 6 Apr 2005 09:06:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97552 invoked by uid 500); 6 Apr 2005 09:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97539 invoked by uid 99); 6 Apr 2005 09:06:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 02:06:44 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 823F413E2136; Wed,  6 Apr 2005 05:06:39 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id DBBF713E2135
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2005 05:06:07 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <4253D413.14684.8835087@localhost>
References: <4253D413.14684.8835087@localhost>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4e3782ca57f30602b7d2bb5e55a7f73c@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: lucene 1.4 + needs spaces problem
Date: Wed, 6 Apr 2005 05:06:07 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 5, 2005, at 10:50 PM, Jason Eacott wrote:

> Hi,
> 	 I recently upgraded from lucene 1.3 final to 1.4 and discovered some  
> things
> which no longer seem to work right.
>
> anyway -
> if I run a query something like
> properties@conf: 
> false+properties@year:"2004"+properties@month:"February"+properties
> @committee:"Council"
>
> it no longer works unless I ensure there are spaces around each +
>
> eg this works
>
> properties@conf:false + properties@year:"2004" +  
> properties@month:"February" +
> properties@committee:"Council"
>
> can anyone tell me if this has been fixed somewhere or whether this  
> was by design? (I
> cannot imagine that it is)

This was by design.  The issue is where to draw the boundaries for  
terms.  In 1.3, "Wal-mart" was treated as "wal NOT mart" so we added  
"-" and "+" to be considered term characters.

This change is noted in the CHANGES.txt file that is packaged with  
Lucene distributions, and says this:

13. Changed QueryParser.jj to allow '-' and '+' within tokens:
     http://issues.apache.org/bugzilla/show_bug.cgi?id=27491
     (Morus Walter via Otis)

In other words, you'll need to add whitespace, or if this is a drastic  
issue for your users you can clone QueryParser and change the grammar  
slightly (remove "+" and "-" from #_TERM_CHAR and use your custom query  
parser.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 09:20:15 2005
Return-Path: <java-user-return-13959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4541 invoked from network); 6 Apr 2005 09:20:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 09:20:15 -0000
Received: (qmail 21995 invoked by uid 500); 6 Apr 2005 09:20:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21973 invoked by uid 500); 6 Apr 2005 09:20:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21946 invoked by uid 99); 6 Apr 2005 09:20:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 02:20:05 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 17C8313E2135; Wed,  6 Apr 2005 05:20:00 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id A7DB813E2135
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2005 05:19:37 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <1747ac0ae9d321f74e426a20c48decad@ehatchersolutions.com>
References: <412C9F9B.4000302@zilverline.org> <1747ac0ae9d321f74e426a20c48decad@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <951d0a1762515bbc072f3e41bd944991@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: lucene 1.4 in maven repository
Date: Wed, 6 Apr 2005 05:19:33 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Please forgive my completely out of date reply here.  I was looking at 
my mess of an inbox and just happened to spot this (one of a zillion) 
unread message and didn't notice the date of it.  Yes, my inbox is a 
disaster!  Maybe I should be using ZOE :)

	Erik

On Apr 6, 2005, at 4:58 AM, Erik Hatcher wrote:

>
> On Aug 25, 2004, at 10:18 AM, Zilverline info wrote:
>
>> Hi,
>>
>> Can anyone tell me why there is no lucene 1.4 jar in the maven 
>> repository @ http://www.ibiblio.org/maven/lucene/jars/ ? Who makes 
>> them available? It would be very convenient to be able to get the 
>> latest version from there (or anywhere else)
>
> Why?  I'm sure it is only because no one has asked for it before.
>
> I'll check on what it takes to publish it ibiblio.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 09:35:17 2005
Return-Path: <java-user-return-13960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9322 invoked from network); 6 Apr 2005 09:35:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 09:35:17 -0000
Received: (qmail 49815 invoked by uid 500); 6 Apr 2005 09:35:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49722 invoked by uid 500); 6 Apr 2005 09:35:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 62314 invoked by uid 99); 6 Apr 2005 08:46:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
User-Agent: Microsoft-Entourage/11.1.0.040913
Date: Wed, 06 Apr 2005 10:51:17 +0200
Subject: Re: Wiki formatting changes
From: Leo Simons <mail@leosimons.com>
To: Erik Hatcher <erik@ehatchersolutions.com>,
	<infrastructure@apache.org>
Cc: <java-user@lucene.apache.org>
Message-ID: <BE796FA5.25452%mail@leosimons.com>
In-Reply-To: <9d4a66d7082a9d9b0ee673be6cba90c3@ehatchersolutions.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 06-04-2005 02:44, "Erik Hatcher" <erik@ehatchersolutions.com> wrote:
> I suppose this should be addressed to Leo...

Oh no, please do direct this stuff at infra@; there's more people than just
me working on this. I might not be around :-D

> anything we can do about
> the issue mentioned below regarding wiki formatting?

In short, no. In long...

<snip/>
>  a side effect
>> seems to be that some page formatting which used to work no
>> longer does
>> 
<snip/>
>> does anyone know what exactly changed?

Not me, though I think there is some information hidden somewhere on
moinmoin.wikiwikiweb.de. Basically the moin people cleaned up their parser a
whole lot.

>> is there an easy config option
>> that can be toggled to get the old behavior,

I'm afraid not, sorry.

>> or do we just need to
>> slowly
>> tweak all of the existing docs (there are quite a few with this
>> problem)
>> to eliminate the whitespace?

Well, it wouldn't have to be slowly. These pages in the end are all plain
text. One could write a script that looks for something like

  "^ +(=+) +(.*) +(=+)$"

And replace it with

  "$1 $2 $3"

Or something similar. I don't have time for that right now, but file a jira
issue, and it might happen sooner or later :-D


Cheers,


Leo



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 11:39:44 2005
Return-Path: <java-user-return-13961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47520 invoked from network); 6 Apr 2005 11:39:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 11:39:43 -0000
Received: (qmail 39216 invoked by uid 500); 6 Apr 2005 11:39:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39186 invoked by uid 500); 6 Apr 2005 11:39:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39173 invoked by uid 99); 6 Apr 2005 11:39:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from artishost.net (HELO artisangel.artishost.net) (69.56.132.178)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 04:39:35 -0700
Received: from [81.25.38.103] (helo=[81.25.38.103])
	by artisangel.artishost.net with esmtpa (Exim 4.43)
	id 1DJ8ox-0000Jm-0S; Wed, 06 Apr 2005 06:35:44 -0500
Date: Wed, 6 Apr 2005 14:39:24 +0300
From: Yura Smolsky <info@altervision.biz>
X-Mailer: The Bat! (v3.0.1.33) Professional
Reply-To: Yura Smolsky <info@altervision.biz>
Organization: AlterVision Web Development Group
X-Priority: 3 (Normal)
Message-ID: <1353574207.20050406143924@altervision.biz>
To: Erik Hatcher <erik@ehatchersolutions.com>
CC: java-user@lucene.apache.org
Subject: Re[4]: exact match
In-Reply-To: <734c4280c8f05f264c3f621d16f571d5@ehatchersolutions.com>
References: <1361527599.20050404233436@altervision.biz>
 <288210f177f90b25236e0ad7abe73c98@ehatchersolutions.com>
 <169729875.20050405124410@altervision.biz>
 <734c4280c8f05f264c3f621d16f571d5@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - artisangel.artishost.net
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - altervision.biz
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello, Erik.

I have very large index (200Gb) with big amount of documents.
I have field "author", which stores name and this fields is tokenized,
indexed, stored.

This field contains values of following examples:
"John"
"John Doe"
"Bill"
"Bill Gates"

I do not want to reindex all documents again. and I want to search by
this fields with exactly search. Like if I search "John" then it will
return documents with fields "author" containing phrase "John" only
and not "John Doe". Now it returns all combinations with word John and
I just want to have documents with the word "John" only.

Solution might not simple, but I can manage that. I cannot manage
reindexing all documents again. :)

Does it clear to you?



EH> On Apr 5, 2005, at 5:44 AM, Yura Smolsky wrote:
>> EH> On Apr 4, 2005, at 4:34 PM, Yura Smolsky wrote:
>>>> Hello, java-user.
>>>>
>>>> I have documents with tokenized, indexes and stored field. This field
>>>> contain one-two words usually. I need to be able to search exact
>>>> matches for two words.
>>>> For example search "John" should return documents with field
>>>> containing "John" only, not "John Doe" or "John Foo".
>>>>
>>>> Any ideas?
>> EH> Use an untokenized field to search on in the case of finding an
>> exact
>> EH> match.
>>
>> And no other ways to reach this?

EH> Not that I know of.  Could you give us a more concrete example of what
EH> you're trying to achieve?

EH>         Erik


EH> ---------------------------------------------------------------------
EH> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
EH> For additional commands, e-mail: java-user-help@lucene.apache.org





Yura Smolsky.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 12:06:52 2005
Return-Path: <java-user-return-13962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53800 invoked from network); 6 Apr 2005 12:06:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 12:06:52 -0000
Received: (qmail 86161 invoked by uid 500); 6 Apr 2005 12:06:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86139 invoked by uid 500); 6 Apr 2005 12:06:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86125 invoked by uid 99); 6 Apr 2005 12:06:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ausdauer.webit.de (HELO ausdauer.webit.de) (195.30.114.250)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 05:06:42 -0700
Received: from cordoba (cordoba.webit.de [195.30.114.47])
	by ausdauer.webit.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j36C6dAB022070
	for <java-user@lucene.apache.org>; Wed, 6 Apr 2005 14:06:39 +0200
Received: by cordoba (Postfix, from userid 1000)
	id 3401D5E053; Wed,  6 Apr 2005 14:06:40 +0200 (CEST)
Date: Wed, 6 Apr 2005 14:06:40 +0200
From: Jens Kraemer <kraemer@webit.de>
To: java-user@lucene.apache.org
Subject: Re: Strategies for updating indexes.
Message-ID: <20050406120640.GF9604@cordoba.webit.de>
References: <20050405151635.69213.qmail@web31105.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20050405151635.69213.qmail@web31105.mail.mud.yahoo.com>
User-Agent: Mutt/1.5.6+20040907i
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, Apr 05, 2005 at 08:16:35AM -0700, Otis Gospodnetic wrote:
> If you take this approach, keep in mind that you will also need to
> handle regular application shutdowns, and also try to catch some
> crashes/errors, in order to flush your in-memory queue of items
> scheduled for indexing, and write them to disk.

right, when complete index rebuilds are expensive and therefore seldom
or never take place this is essential.

> Feel free to post the code, if you want and can, so people don't have
> to reinvent this.

I implemented the solution I mentioned in a lucene indexing plugin I
wrote for XWiki (xwiki.org). It doesn't have any persistency solution
for the queue to preserve state of the queue during application
downtime, but relies on complete index rebuilds to be done after such
events.

code (GPL) and docs can be found at
http://www.jkraemer.net/maven/xwiki/plugins/lucene-plugin/

The relevant piece of code is the IndexUpdater class which holds a
XWikiDocumentQueue and implements several XWiki interfaces to receive
notifications when documents change. IndexUpdater#run is executed in
it's own thread (spawned by the LucenePlugin class), regularly checking
the queue and updating the index when necessary.

Index rebuilds are done by emptying the index and then feeding all
documents into the updater's queue. At least on unix systems this works
fine, searches during the rebuild are still done using the old IndexReader 
instance which was opened when the index still was there. After rebuild 
is finished, the reader is closed and a new one is opened, now searching 
takes place on the new index.

Jens


-- 
webit! Gesellschaft für neue Medien mbH          www.webit.de
Dipl.-Wirtschaftsingenieur Jens Krämer       kraemer@webit.de
Schnorrstraße 76                      Telefon +49 351 46766 0
D-01069 Dresden                      Telefax +49 351 46766 66

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 12:36:42 2005
Return-Path: <java-user-return-13963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64709 invoked from network); 6 Apr 2005 12:36:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 12:36:42 -0000
Received: (qmail 44313 invoked by uid 500); 6 Apr 2005 12:36:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44288 invoked by uid 500); 6 Apr 2005 12:36:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 81079 invoked by uid 500); 6 Apr 2005 11:02:43 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_POST,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
X-VirusChecked: Checked
X-Env-Sender: iouli.golovatyi@novartis.com
X-Msg-Ref: server-10.tower-84.messagelabs.com!1112785356!8098341!1
X-StarScan-Version: 5.4.12; banners=novartis.com,-,-
X-Originating-IP: [160.62.1.169]
Subject: Re: Sorting date stored in milliseconds time
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Message-ID: <OFD00E6C14.9809EA6F-ONC1256FDB.003B8A22-C1256FDB.003CA954@EU.novartis.net>
From: iouli.golovatyi@novartis.com
Date: Wed, 6 Apr 2005 13:02:35 +0200
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I'm  forced to keep date up to milisec. The reason is simple: I get at
least a couple of new messages per sec, if all of them are stamped with the
same time, the retrieval order id undefined, i.e.  once I get it, let's
say, as the last reference on the first page, other time - as the first one
on the second page. In case You do not keep the cache and always performs
the same query even to get the second page it's getting even worse, i.e.
displaying the messgaes 41-80, may bring the message 41, which You already
displayed on your first page as message 40.



                                                                                                                               
                      Morus Walter                                                                                             
                      <morus.walter@tan        To:       "Lucene Users List" <lucene-user@jakarta.apache.org>, Ben             
                      to.de>                    <newreaders@gmail.com>                                                         
                                               cc:       (bcc: Iouli Golovatyi/X/GP/Novartis)                                  
                      28.02.2005 08:47         Subject:  Re: Sorting date stored in milliseconds time                          
                      Please respond to                                                                                        
                      "Lucene Users            Category:       |-------------------------|                                     
                      List"                                    | ( ) Action needed       |                                     
                                                               | ( ) Decision needed     |                                     
                                                               | ( ) General Information |                                     
                                                               |-------------------------|                                     
                                                                                                                               
                                                                                                                               




Ben writes:
>
> I store my date in milliseconds, how can I do a sort on it? SortField
> has INT, FLOAT and STRING. Do I need to create a new sort class, to
> sort the long value?
>
Why do you need that precicion?
Remember: there's a price to pay. The memory required for sorting and
the time to set up the sort cache depends on the number of different terms,
dates in your case.
I can hardly think of an application where seconds are relevant, what do
you need milliseconds for?

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org







______________________________________________________________________
The Novartis email address format has changed to 
firstname.lastname@novartis.com.  Please update your address book 
accordingly.
______________________________________________________________________

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 16:28:30 2005
Return-Path: <java-user-return-13964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35665 invoked from network); 6 Apr 2005 16:28:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 16:28:29 -0000
Received: (qmail 91154 invoked by uid 500); 6 Apr 2005 16:28:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91133 invoked by uid 500); 6 Apr 2005 16:28:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91117 invoked by uid 99); 6 Apr 2005 16:28:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc14.comcast.net (HELO rwcrmhc14.comcast.net) (216.148.227.89)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 09:28:21 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc14) with ESMTP
          id <20050406162821014005b2ide>; Wed, 6 Apr 2005 16:28:21 +0000
Message-ID: <42540E22.8010706@apache.org>
Date: Wed, 06 Apr 2005 09:28:18 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: scalability w/ number of fields
References: <c68e391705040414352e96e0d0@mail.gmail.com>	 <c68e3917050404143832fc3826@mail.gmail.com>	 <4251BCD2.8070104@apache.org> <c68e39170504041540520673e4@mail.gmail.com>
In-Reply-To: <c68e39170504041540520673e4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yonik Seeley wrote:
> They are all indexed (and they all need to be under the current design).

As I mentioned before, Lucene will not perform well with a large number 
of indexed fields.  If these are not tokenized fields, then a simple way 
to reduce the number of indexed fields is to move the field name into 
the value.  Instead of adding <fieldX, valueY> and <fieldZ, valueA>, add 
<generic, fieldX-valueY> and <generic, fieldZ-valueY>.  This should 
perform quite well.  You'll also need to manipulate queries accordingly.

A similar method can work for tokenized fields.  Simply write a 
TokenFilter that appends a field name to the front of tokens.

Yes, this is an ugly hack, but it can make a huge performance 
differrence.  The problem is that Lucene stores norm values in an array, 
when, in cases like yours, a sparse data structure might be more sensible.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 16:49:48 2005
Return-Path: <java-user-return-13965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41715 invoked from network); 6 Apr 2005 16:49:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 16:49:48 -0000
Received: (qmail 40439 invoked by uid 500); 6 Apr 2005 16:49:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40364 invoked by uid 500); 6 Apr 2005 16:49:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40351 invoked by uid 99); 6 Apr 2005 16:49:40 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31108.mail.mud.yahoo.com (HELO web31108.mail.mud.yahoo.com) (68.142.200.41)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 06 Apr 2005 09:49:37 -0700
Received: (qmail 68493 invoked by uid 60001); 6 Apr 2005 16:49:35 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=BDpXrAqM6xr1BgT3OwYtsHA/Fx8EGHJ+FHRY8nrfGhMi2YJIRMHQ5UgfKhCBYXO8GAxrlIAfGmmutYXI81MU5Q+XvEgu0UP5V3lj01RoOl/2jA6lSq9KlB41m3PKwFTXxIKixaaPYcXqQLPCHjkUCGd2tYgh0MihSGOyPDeqOpE=  ;
Message-ID: <20050406164934.68491.qmail@web31108.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31108.mail.mud.yahoo.com via HTTP; Wed, 06 Apr 2005 09:49:34 PDT
Date: Wed, 6 Apr 2005 09:49:34 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Wiki formatting changes
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The only problematic Wiki page I found was
http://wiki.apache.org/jakarta-lucene/HowTo and I just fixed that.

Otis

--- Leo Simons <mail@leosimons.com> wrote:
> On 06-04-2005 02:44, "Erik Hatcher" <erik@ehatchersolutions.com>
> wrote:
> > I suppose this should be addressed to Leo...
> 
> Oh no, please do direct this stuff at infra@; there's more people
> than just
> me working on this. I might not be around :-D
> 
> > anything we can do about
> > the issue mentioned below regarding wiki formatting?
> 
> In short, no. In long...
> 
> <snip/>
> >  a side effect
> >> seems to be that some page formatting which used to work no
> >> longer does
> >> 
> <snip/>
> >> does anyone know what exactly changed?
> 
> Not me, though I think there is some information hidden somewhere on
> moinmoin.wikiwikiweb.de. Basically the moin people cleaned up their
> parser a
> whole lot.
> 
> >> is there an easy config option
> >> that can be toggled to get the old behavior,
> 
> I'm afraid not, sorry.
> 
> >> or do we just need to
> >> slowly
> >> tweak all of the existing docs (there are quite a few with this
> >> problem)
> >> to eliminate the whitespace?
> 
> Well, it wouldn't have to be slowly. These pages in the end are all
> plain
> text. One could write a script that looks for something like
> 
>   "^ +(=+) +(.*) +(=+)$"
> 
> And replace it with
> 
>   "$1 $2 $3"
> 
> Or something similar. I don't have time for that right now, but file
> a jira
> issue, and it might happen sooner or later :-D
> 
> 
> Cheers,
> 
> 
> Leo
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 16:59:47 2005
Return-Path: <java-user-return-13966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44733 invoked from network); 6 Apr 2005 16:59:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 16:59:47 -0000
Received: (qmail 58921 invoked by uid 500); 6 Apr 2005 16:59:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58901 invoked by uid 500); 6 Apr 2005 16:59:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58887 invoked by uid 99); 6 Apr 2005 16:59:40 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.203 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 09:59:40 -0700
Received: by rproxy.gmail.com with SMTP id b11so216370rne
        for <java-user@lucene.apache.org>; Wed, 06 Apr 2005 09:59:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=uuBPiSo3+TPuN2h6Q4ybzm+UuSZW5/Pe+VV/JzwX/ux1pckaiQWmpscTPPtV76W+FTMRXws69XtAI92VZMPbKc3qfP6+tx31HiZ+L/EzS6KutTxIT5EKs0OPJgBw8R6IkfgCujwKKnuZpu89AVaARw0cNI7/NtZL6linE2X0B7A=
Received: by 10.38.12.72 with SMTP id 72mr521320rnl;
        Wed, 06 Apr 2005 09:59:37 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Wed, 6 Apr 2005 09:59:37 -0700 (PDT)
Message-ID: <c68e39170504060959570ebec7@mail.gmail.com>
Date: Wed, 6 Apr 2005 12:59:37 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: scalability w/ number of fields
In-Reply-To: <42540E22.8010706@apache.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <c68e391705040414352e96e0d0@mail.gmail.com>
	 <c68e3917050404143832fc3826@mail.gmail.com>
	 <4251BCD2.8070104@apache.org>
	 <c68e39170504041540520673e4@mail.gmail.com>
	 <42540E22.8010706@apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Doug, your previous comment led us to consider compound field
types of the form compound:"name=value".  Open ended range queries
also need some manipulation for this scheme to work.

> Yes, this is an ugly hack, but it can make a huge performance
> differrence.  The problem is that Lucene stores norm values in an array,
> when, in cases like yours, a sparse data structure might be more sensible.

Ahhh, "There's a norm file for each indexed field with a byte for each
document."
This obviously impacts segment merging... what about query performance? 

A question regarding stored-only fields (and having say 10,000 of
those)... I notice that stored and indexed field names are both listed
in the .fnm segment file.  Are there any performance critical places
in Lucene where this list is walked linearly?  I assume it's loaded
into an array in memory so access by fieldnum is O(1).  Also makes the
FieldNum VInts bigger, but I don't see that has having a big effect.

I'll try and keep the list informed as we get more numbers (and maybe
try out other things like generic or compound fields).

-Yonik

On Apr 6, 2005 12:28 PM, Doug Cutting <cutting@apache.org> wrote:
> Yonik Seeley wrote:
> > They are all indexed (and they all need to be under the current design).
> 
> As I mentioned before, Lucene will not perform well with a large number
> of indexed fields.  If these are not tokenized fields, then a simple way
> to reduce the number of indexed fields is to move the field name into
> the value.  Instead of adding <fieldX, valueY> and <fieldZ, valueA>, add
> <generic, fieldX-valueY> and <generic, fieldZ-valueY>.  This should
> perform quite well.  You'll also need to manipulate queries accordingly.
> 
> A similar method can work for tokenized fields.  Simply write a
> TokenFilter that appends a field name to the front of tokens.
> 
> Yes, this is an ugly hack, but it can make a huge performance
> differrence.  The problem is that Lucene stores norm values in an array,
> when, in cases like yours, a sparse data structure might be more sensible.
> 
> Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 17:52:06 2005
Return-Path: <java-user-return-13967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58320 invoked from network); 6 Apr 2005 17:52:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 17:52:06 -0000
Received: (qmail 70462 invoked by uid 500); 6 Apr 2005 17:51:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70436 invoked by uid 500); 6 Apr 2005 17:51:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70416 invoked by uid 99); 6 Apr 2005 17:51:57 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 10:51:55 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C07F75B77C; Wed,  6 Apr 2005 10:51:51 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BF7117F459
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2005 10:51:51 -0700 (PDT)
Date: Wed, 6 Apr 2005 10:51:51 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: RE: FilteredQuery and Boolean AND
In-Reply-To: <78A2AFE317F5AD48B823BE740D4A815224070E@flexbe01.crcpress.com>
Message-ID: <Pine.LNX.4.58.0504061047050.29824@hal.rescomp.berkeley.edu>
References: <78A2AFE317F5AD48B823BE740D4A815224070E@flexbe01.crcpress.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: shouldn't.  If the FilteredQuerys worked properly, they could be put in
: a BooleanQuery and then a BooleanClause.  That's why I was doing that

Peter:

Comments in bug#34279 indicate that this problem may have been
inadvertantly fixed in the latest development version of the code base --
or at least, the testcase i submitted now passes.

if you could ammend my test case with more examples of the types of
complex combinations of FilteredQuery/BooleanQuery that you've seen fail
(or add a new testcase file that works in a similar way, against a self
contained RAMDirectory based index) it would help to clarify wether the
problem is genuinely "Fixed", or if the test case i created was just a
lucky abnormality.

http://issues.apache.org/bugzilla/show_bug.cgi?id=34279


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 18:02:08 2005
Return-Path: <java-user-return-13968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61285 invoked from network); 6 Apr 2005 18:02:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 18:02:08 -0000
Received: (qmail 87616 invoked by uid 500); 6 Apr 2005 18:02:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87591 invoked by uid 500); 6 Apr 2005 18:02:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87578 invoked by uid 99); 6 Apr 2005 18:02:01 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 11:01:58 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id EE6E85B77C; Wed,  6 Apr 2005 11:01:56 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id EBEA37F459
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2005 11:01:56 -0700 (PDT)
Date: Wed, 6 Apr 2005 11:01:56 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Wiki formatting changes
In-Reply-To: <20050406164934.68491.qmail@web31108.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0504061100430.29824@hal.rescomp.berkeley.edu>
References: <20050406164934.68491.qmail@web31108.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: The only problematic Wiki page I found was
: http://wiki.apache.org/jakarta-lucene/HowTo and I just fixed that.

I've seen a few more, but i'll clean them up as i see them.  i guess the
problem isn't as wide spread as it initially seemd (i just got unlucky in
the first few pages i looked at) but i was mainly worried that some other
formatting problems might be less obvious (ie: sections might not be
rendered at all) .. just my usually paranoia.



: --- Leo Simons <mail@leosimons.com> wrote:
: > On 06-04-2005 02:44, "Erik Hatcher" <erik@ehatchersolutions.com>
: > wrote:
: > > I suppose this should be addressed to Leo...
: >
: > Oh no, please do direct this stuff at infra@; there's more people
: > than just
: > me working on this. I might not be around :-D
: >
: > > anything we can do about
: > > the issue mentioned below regarding wiki formatting?
: >
: > In short, no. In long...
: >
: > <snip/>
: > >  a side effect
: > >> seems to be that some page formatting which used to work no
: > >> longer does
: > >>
: > <snip/>
: > >> does anyone know what exactly changed?
: >
: > Not me, though I think there is some information hidden somewhere on
: > moinmoin.wikiwikiweb.de. Basically the moin people cleaned up their
: > parser a
: > whole lot.
: >
: > >> is there an easy config option
: > >> that can be toggled to get the old behavior,
: >
: > I'm afraid not, sorry.
: >
: > >> or do we just need to
: > >> slowly
: > >> tweak all of the existing docs (there are quite a few with this
: > >> problem)
: > >> to eliminate the whitespace?
: >
: > Well, it wouldn't have to be slowly. These pages in the end are all
: > plain
: > text. One could write a script that looks for something like
: >
: >   "^ +(=+) +(.*) +(=+)$"
: >
: > And replace it with
: >
: >   "$1 $2 $3"
: >
: > Or something similar. I don't have time for that right now, but file
: > a jira
: > issue, and it might happen sooner or later :-D
: >
: >
: > Cheers,
: >
: >
: > Leo
: >
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 21:51:48 2005
Return-Path: <java-user-return-13970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30461 invoked from network); 6 Apr 2005 21:51:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 21:51:47 -0000
Received: (qmail 19891 invoked by uid 500); 6 Apr 2005 21:51:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19806 invoked by uid 500); 6 Apr 2005 21:51:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19777 invoked by uid 500); 6 Apr 2005 21:51:35 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 19770 invoked by uid 99); 6 Apr 2005 21:51:35 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from b128D.static.pacific.net.au (HELO localhost.localdomain) (202.7.87.141)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 14:51:33 -0700
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by localhost.localdomain (8.12.11/8.12.11) with ESMTP id j36LpTto010994;
	Thu, 7 Apr 2005 07:51:29 +1000
Received: (from sfarquhar@localhost)
	by localhost.localdomain (8.12.11/8.12.11/Submit) id j36LpRoF010993;
	Thu, 7 Apr 2005 07:51:27 +1000
X-Authentication-Warning: localhost.localdomain: sfarquhar set sender to scott@atlassian.com using -f
Date: Thu, 7 Apr 2005 07:51:27 +1000
From: Scott Farquhar <scott@atlassian.com>
To: java-user@lucene.apache.org
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Sorting date stored in milliseconds time
Message-ID: <20050406215127.GS15646@localhost.localdomain>
References: <OFD00E6C14.9809EA6F-ONC1256FDB.003B8A22-C1256FDB.003CA954@EU.novartis.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <OFD00E6C14.9809EA6F-ONC1256FDB.003B8A22-C1256FDB.003CA954@EU.novartis.net>
User-Agent: Mutt/1.4.1i
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wed, Apr 06, 2005 at 01:02:35PM +0200, iouli.golovatyi@novartis.com wrote:
> I'm  forced to keep date up to milisec. The reason is simple: I get at
> least a couple of new messages per sec, if all of them are stamped with the
> same time, the retrieval order id undefined, i.e.  once I get it, let's
> say, as the last reference on the first page, other time - as the first one
> on the second page. In case You do not keep the cache and always performs
> the same query even to get the second page it's getting even worse, i.e.
> displaying the messgaes 41-80, may bring the message 41, which You already
> displayed on your first page as message 40.

Why can't you have a secondary sort on message id?  Then you sort by time
and message id will always result in consistent ordering.

Cheers,
Scott 

-- 
ATLASSIAN - http://www.atlassian.com
Expert J2EE Software, Services and Support
-------------------------------------------------------------
JIRA Docs: http://www.atlassian.com/software/jira/docs/latest

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 21:51:48 2005
Return-Path: <java-user-return-13969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30463 invoked from network); 6 Apr 2005 21:51:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 21:51:47 -0000
Received: (qmail 19825 invoked by uid 500); 6 Apr 2005 21:51:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19791 invoked by uid 500); 6 Apr 2005 21:51:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19770 invoked by uid 99); 6 Apr 2005 21:51:35 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from b128D.static.pacific.net.au (HELO localhost.localdomain) (202.7.87.141)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 14:51:33 -0700
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by localhost.localdomain (8.12.11/8.12.11) with ESMTP id j36LpTto010994;
	Thu, 7 Apr 2005 07:51:29 +1000
Received: (from sfarquhar@localhost)
	by localhost.localdomain (8.12.11/8.12.11/Submit) id j36LpRoF010993;
	Thu, 7 Apr 2005 07:51:27 +1000
X-Authentication-Warning: localhost.localdomain: sfarquhar set sender to scott@atlassian.com using -f
Date: Thu, 7 Apr 2005 07:51:27 +1000
From: Scott Farquhar <scott@atlassian.com>
To: java-user@lucene.apache.org
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Sorting date stored in milliseconds time
Message-ID: <20050406215127.GS15646@localhost.localdomain>
References: <OFD00E6C14.9809EA6F-ONC1256FDB.003B8A22-C1256FDB.003CA954@EU.novartis.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <OFD00E6C14.9809EA6F-ONC1256FDB.003B8A22-C1256FDB.003CA954@EU.novartis.net>
User-Agent: Mutt/1.4.1i
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wed, Apr 06, 2005 at 01:02:35PM +0200, iouli.golovatyi@novartis.com wrote:
> I'm  forced to keep date up to milisec. The reason is simple: I get at
> least a couple of new messages per sec, if all of them are stamped with the
> same time, the retrieval order id undefined, i.e.  once I get it, let's
> say, as the last reference on the first page, other time - as the first one
> on the second page. In case You do not keep the cache and always performs
> the same query even to get the second page it's getting even worse, i.e.
> displaying the messgaes 41-80, may bring the message 41, which You already
> displayed on your first page as message 40.

Why can't you have a secondary sort on message id?  Then you sort by time
and message id will always result in consistent ordering.

Cheers,
Scott 

-- 
ATLASSIAN - http://www.atlassian.com
Expert J2EE Software, Services and Support
-------------------------------------------------------------
JIRA Docs: http://www.atlassian.com/software/jira/docs/latest

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 22:16:23 2005
Return-Path: <java-user-return-13971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35543 invoked from network); 6 Apr 2005 22:16:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 22:16:23 -0000
Received: (qmail 50905 invoked by uid 500); 6 Apr 2005 22:16:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50883 invoked by uid 500); 6 Apr 2005 22:16:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50868 invoked by uid 99); 6 Apr 2005 22:16:16 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from nyhwwex001a.hwwilson.com (HELO NYHWWEX001.hwwilson.local) (208.238.105.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 15:16:16 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C53AF6.3E93CE9B"
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: HTML pages highlighter
Date: Wed, 6 Apr 2005 18:16:13 -0400
Message-ID: <E3AD9C3F9EC34949855CDFC6FB5A6C11755132@NYHWWEX001.hwwilson.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: HTML pages highlighter
Thread-Index: AcU5eMwRimUZSqaLQpqv694KNqRFWABe8Xyg
From: "Yagnesh Shah" <yshah@hwwilson.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C53AF6.3E93CE9B
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi! Erik,
	Yes basic seems to be working.=20
a) My problem is there is a chances that query is not present in stored =
content of a file so sometimes I am getting empty strings at line#106 so =
I have to put a special check at line#109 and line#126. I guess this is =
not a problem. What you think?
b) When I click on a doc path that was generated by line#120 and =
line#121 The files that it open do not have a searched query =
highlighted. Any suggestion for this? How I can do?
 =20

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Monday, April 04, 2005 8:45 PM
To: java-user@lucene.apache.org
Subject: Re: HTML pages highlighter


On Apr 4, 2005, at 5:35 PM, Yagnesh Shah wrote:
> 	I end up purchasing your book "Lucene in Action". I have downloaded =20
> your code samples. I am able to retrieve "result" only some time. =20
> Below is the code I have taken from Search.jhtml in lucene demo. I =20
> have 2 problem
>
> a) I am unable to display "result" using
> b) When I click on the title to retrieve document I do not see my =20
> query highlighted.

First things first.... get something very very simple working and =20
expand from there.  Here is the simple code from our HighlightIt.java:

     TermQuery query =3D new TermQuery(new Term("f", "ipsum"));
     QueryScorer scorer =3D new QueryScorer(query);
     SimpleHTMLFormatter formatter =3D
         new SimpleHTMLFormatter("<span class=3D\"highlight\">",
             "</span>");
     Highlighter highlighter =3D new Highlighter(formatter, scorer);
     Fragmenter fragmenter =3D new SimpleFragmenter(50);
     highlighter.setTextFragmenter(fragmenter);

     TokenStream tokenStream =3D new StandardAnalyzer()
         .tokenStream("f", new StringReader(text));

     String result =3D
         highlighter.getBestFragments(tokenStream, text, 5, "...");

One trick is that you must ensure the query you are passing to =20
QueryScorer has been rewritten.  In our simple TermQuery case, that is =20
not necessary, but in a general application it is.  You can call =20
query.rewrite(reader) where reader is your IndexReader instance.  This =20
ensures that range, fuzzy, and wildcard queries are expanded and =20
highlightable.

I'm not sure what is wrong with the code you are trying.  But again, =20
start simple, just try out our HighlightIt or our HighlightTest.  If =20
those work fine for you then move on to integrating further with your =20
index.  Besides the Query.rewrite() trick, you have to be sure that the  =

text you want to highlight is available.  If you're pulling it from the  =

index, it must be in a stored field, otherwise you need to retrieve it =20
from elsewhere.

	Erik


>
> <java>
>
>   Searcher searcher =3D new IndexSearcher(getReader(indexName));
>
>   // get query from request
>   String queryString =3D request.getParameter("query");
>
>   query =3D QueryParser.parse(queryString, "contents", analyzer);
>   Hits hits =3D searcher.search(query);
>   SimpleHTMLFormatter formatter =3D
>   new SimpleHTMLFormatter();
>   Highlighter highlighter =3D new Highlighter(formatter, new =20
> QueryScorer(query));
>   highlighter.setTextFragmenter(new SimpleFragmenter(50));
>   String FIELD_NAME =3D "contents";
>
>   for (int i =3D start; i < end; i++) {             // display the =
hits
>   Document doc =3D hits.doc(i);
>   String text =3D hits.doc(i).get(FIELD_NAME);
>   int maxNumFragmentsRequired =3D 5;
>   String fragmentSeparator =3D "...";
>   if ( text !=3D null){
> 	TokenStream tokenStream =3D new =20
> StandardAnalyzer().tokenStream(FIELD_NAME, new =20
> java.io.StringReader(text));
> 	String result =3D =20
> highlighter.getBestFragments		=20
> (tokenStream,text,maxNumFragmentsRequired,fragmentSeparator);
>     	System.out.println("result=3D" +result);
>   }
>
>     String title =3D doc.get("title");
>     if (title.equals(""))                         // use url for docs  =

> w/o title
>       title =3D doc.get("path");
>     </java>
>     <p><b><java type=3Dprint>(int)(hits.score(i) * 100.0f)</java>%
>     <a href=3D"`doc.get("path")`">
>     <java type=3Dprint>Entities.encode(title)</java>
>     </b></a>
>     <java>
>     if (showSummaries) {                          // maybe show =
summary
>     </java>
>     <ul><i>Summary</i>:
>       <java type=3Dprint>Entities.encode(doc.get("summary"))</java>
>     </ul>
>     <java>
>     }
>   }
> </java>
>
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Thursday, March 31, 2005 8:04 PM
> To: java-user@lucene.apache.org
> Subject: Re: HTML pages highlighter
>
>
>
> On Mar 31, 2005, at 6:36 PM, Yagnesh Shah wrote:
>>     try {
>>       fis =3D new FileInputStream(f);
>>       HTMLParser parser =3D new HTMLParser(fis);
>>
>>       // Add the tag-stripped contents as a Reader-valued Text field
>> so it will
>>       // get tokenized and indexed.
>> //      doc.add(new Field("contents", parser.getReader()));
>>       LineNumberReader reader =3D new
>> LineNumberReader(parser.getReader());
>>       for (String l =3D reader.readLine(); l !=3D null; l =3D
>> reader.readLine())
>> //        System.out.println(l);
>>       doc.add(Field.Text("contents", l));
>
> Notice that your loop here is adding a "contents" field for *every*
> line read since that is where the first semi-colon is.
>
> Look at using Luke to explore your index.  Try indexing just a dummy
> String:
>
> 	doc.add(Field.Text("contents", "some dummy text"));
>
> to show that it works.  Always always always simplify a complicated
> situation by doing the most obvious thing that _should_ work.
>
> Also, the demo Lucene code is not really designed to be used in a
> production application (sadly), so you're better off borrowing code
> from the many articles or our book to begin with.
>
> 	Erik
>
>
>>
>>       // Add the summary as a field that is stored and returned with
>>       // hit documents for display.
>>       doc.add(new Field("summary", parser.getSummary(),
>> Field.Store.YES, Field.Index.NO));
>>
>>       // Add the title as a field that it can be searched and that is
>> stored.
>>       doc.add(new Field("title", parser.getTitle(), Field.Store.YES,
>> Field.Index.TOKENIZED));
>>     }
>>
>>
>>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: Wednesday, March 30, 2005 7:38 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: HTML pages highlighter
>>
>>
>>
>> On Mar 30, 2005, at 4:46 PM, Yagnesh Shah wrote:
>>
>>> Hi! Eric,
>>
>> Erik - with a 'k' - Sorry, I let it slide once though :)
>>
>>> 	I try to modified that with this but I get compile error. Do you =20
>>> have
>>> any code snippet of highlighting code to pull the contents from the
>>> original source?
>>
>> I have a whole book full of code examples :)
>> http://www.lucenebook.com - Grab the source code and look in
>> src/lia/tools at Highlight*.java
>>
>>>  or Do you know how I can do field store?
>>>
>>>       doc.add(new Field("contents", parser.getReader(),
>>> Field.Store.YES, Field.Index.NO));
>>
>> You cannot store it with a Reader.  You need to use =
Field.Text(String,
>> String), or one of the other variations.
>>
>> 	Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



------_=_NextPart_001_01C53AF6.3E93CE9B
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C53AF6.3E93CE9B--

From java-user-return-13972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 22:39:54 2005
Return-Path: <java-user-return-13972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43833 invoked from network); 6 Apr 2005 22:39:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 22:39:54 -0000
Received: (qmail 75710 invoked by uid 500); 6 Apr 2005 22:39:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75696 invoked by uid 500); 6 Apr 2005 22:39:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 58273 invoked by uid 99); 6 Apr 2005 21:11:48 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Message-ID: <4254505C.706@pricerunner.com>
Date: Wed, 06 Apr 2005 23:10:52 +0200
From: Daniel Herlitz <daniel.herlitz@pricerunner.com>
User-Agent: Mozilla Thunderbird 0.8 (X11/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Search performance under high load
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi everybody,

We have been using Lucene for about one year now with great success. 
Recently though the index has growed noticably and so has the number of 
searches. I was wondering if anyone would like to comment on these 
figures and say if it works for them?

Index size: ~2.5 GB, on disk
Number of fields: ~30
Number of indexed fields: ~10
Server: Linux, Intel(R) Xeon(TM) CPU 3.00GHz, 3GB, dedicated to Lucene 
searches.
Java: Sun 1.5, -Xmx1200m
Load: Approaching 2000 requests / hour.
Queries: The query strings are of highly differing complexity, from 
simple x:y to long queries involving conjunctions, disjunctions and 
wildecard queries.

90% of the queries run brilliantly. Problem is that 10% of the queries 
(simple or not) take a long time, on average more that 10 seconds, 
sometimes several minutes.

We have managed to track down these figures to the calls to 
IndexSearcher.search(Query). We have seen up to about 10 searches 
concurrently executing.

We have tried to run the server on different machines and with different 
version of Java. We have no OutOfMemorys.

I am curious about what to expect from Lucene when it comes to 
searching. There are lots of figures about the indexing speed (no 
question about that, it's incredibly fast!). But what about searching? 
And searching with the kind of load we have. Anyone in the same 
situation as we are? Comments? Suggestions?

Thanks
Daniel




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 22:44:57 2005
Return-Path: <java-user-return-13973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44761 invoked from network); 6 Apr 2005 22:44:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 22:44:57 -0000
Received: (qmail 79871 invoked by uid 500); 6 Apr 2005 22:44:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79845 invoked by uid 500); 6 Apr 2005 22:44:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79832 invoked by uid 99); 6 Apr 2005 22:44:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 15:44:52 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 37BD613E2135; Wed,  6 Apr 2005 18:44:51 -0400 (EDT)
Received: from [192.168.1.102] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 8BE6F13E2120
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2005 18:44:40 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <E3AD9C3F9EC34949855CDFC6FB5A6C11755132@NYHWWEX001.hwwilson.local>
References: <E3AD9C3F9EC34949855CDFC6FB5A6C11755132@NYHWWEX001.hwwilson.local>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <9b096c41fee7a82014fe99973a9b993b@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: HTML pages highlighter
Date: Wed, 6 Apr 2005 18:44:41 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What file do those line numbers correspond to?  I'm lost.

Did the Lucene in Action highlighting code work for you?

	Erik

On Apr 6, 2005, at 6:16 PM, Yagnesh Shah wrote:

> Hi! Erik,
> 	Yes basic seems to be working.
> a) My problem is there is a chances that query is not present in 
> stored content of a file so sometimes I am getting empty strings at 
> line#106 so I have to put a special check at line#109 and line#126. I 
> guess this is not a problem. What you think?
> b) When I click on a doc path that was generated by line#120 and 
> line#121 The files that it open do not have a searched query 
> highlighted. Any suggestion for this? How I can do?
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Monday, April 04, 2005 8:45 PM
> To: java-user@lucene.apache.org
> Subject: Re: HTML pages highlighter
>
>
> On Apr 4, 2005, at 5:35 PM, Yagnesh Shah wrote:
>> 	I end up purchasing your book "Lucene in Action". I have downloaded
>> your code samples. I am able to retrieve "result" only some time.
>> Below is the code I have taken from Search.jhtml in lucene demo. I
>> have 2 problem
>>
>> a) I am unable to display "result" using
>> b) When I click on the title to retrieve document I do not see my
>> query highlighted.
>
> First things first.... get something very very simple working and
> expand from there.  Here is the simple code from our HighlightIt.java:
>
>      TermQuery query = new TermQuery(new Term("f", "ipsum"));
>      QueryScorer scorer = new QueryScorer(query);
>      SimpleHTMLFormatter formatter =
>          new SimpleHTMLFormatter("<span class=\"highlight\">",
>              "</span>");
>      Highlighter highlighter = new Highlighter(formatter, scorer);
>      Fragmenter fragmenter = new SimpleFragmenter(50);
>      highlighter.setTextFragmenter(fragmenter);
>
>      TokenStream tokenStream = new StandardAnalyzer()
>          .tokenStream("f", new StringReader(text));
>
>      String result =
>          highlighter.getBestFragments(tokenStream, text, 5, "...");
>
> One trick is that you must ensure the query you are passing to
> QueryScorer has been rewritten.  In our simple TermQuery case, that is
> not necessary, but in a general application it is.  You can call
> query.rewrite(reader) where reader is your IndexReader instance.  This
> ensures that range, fuzzy, and wildcard queries are expanded and
> highlightable.
>
> I'm not sure what is wrong with the code you are trying.  But again,
> start simple, just try out our HighlightIt or our HighlightTest.  If
> those work fine for you then move on to integrating further with your
> index.  Besides the Query.rewrite() trick, you have to be sure that the
> text you want to highlight is available.  If you're pulling it from the
> index, it must be in a stored field, otherwise you need to retrieve it
> from elsewhere.
>
> 	Erik
>
>
>>
>> <java>
>>
>>   Searcher searcher = new IndexSearcher(getReader(indexName));
>>
>>   // get query from request
>>   String queryString = request.getParameter("query");
>>
>>   query = QueryParser.parse(queryString, "contents", analyzer);
>>   Hits hits = searcher.search(query);
>>   SimpleHTMLFormatter formatter =
>>   new SimpleHTMLFormatter();
>>   Highlighter highlighter = new Highlighter(formatter, new
>> QueryScorer(query));
>>   highlighter.setTextFragmenter(new SimpleFragmenter(50));
>>   String FIELD_NAME = "contents";
>>
>>   for (int i = start; i < end; i++) {             // display the hits
>>   Document doc = hits.doc(i);
>>   String text = hits.doc(i).get(FIELD_NAME);
>>   int maxNumFragmentsRequired = 5;
>>   String fragmentSeparator = "...";
>>   if ( text != null){
>> 	TokenStream tokenStream = new
>> StandardAnalyzer().tokenStream(FIELD_NAME, new
>> java.io.StringReader(text));
>> 	String result =
>> highlighter.getBestFragments		
>> (tokenStream,text,maxNumFragmentsRequired,fragmentSeparator);
>>     	System.out.println("result=" +result);
>>   }
>>
>>     String title = doc.get("title");
>>     if (title.equals(""))                         // use url for docs
>> w/o title
>>       title = doc.get("path");
>>     </java>
>>     <p><b><java type=print>(int)(hits.score(i) * 100.0f)</java>%
>>     <a href="`doc.get("path")`">
>>     <java type=print>Entities.encode(title)</java>
>>     </b></a>
>>     <java>
>>     if (showSummaries) {                          // maybe show 
>> summary
>>     </java>
>>     <ul><i>Summary</i>:
>>       <java type=print>Entities.encode(doc.get("summary"))</java>
>>     </ul>
>>     <java>
>>     }
>>   }
>> </java>
>>
>>
>>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: Thursday, March 31, 2005 8:04 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: HTML pages highlighter
>>
>>
>>
>> On Mar 31, 2005, at 6:36 PM, Yagnesh Shah wrote:
>>>     try {
>>>       fis = new FileInputStream(f);
>>>       HTMLParser parser = new HTMLParser(fis);
>>>
>>>       // Add the tag-stripped contents as a Reader-valued Text field
>>> so it will
>>>       // get tokenized and indexed.
>>> //      doc.add(new Field("contents", parser.getReader()));
>>>       LineNumberReader reader = new
>>> LineNumberReader(parser.getReader());
>>>       for (String l = reader.readLine(); l != null; l =
>>> reader.readLine())
>>> //        System.out.println(l);
>>>       doc.add(Field.Text("contents", l));
>>
>> Notice that your loop here is adding a "contents" field for *every*
>> line read since that is where the first semi-colon is.
>>
>> Look at using Luke to explore your index.  Try indexing just a dummy
>> String:
>>
>> 	doc.add(Field.Text("contents", "some dummy text"));
>>
>> to show that it works.  Always always always simplify a complicated
>> situation by doing the most obvious thing that _should_ work.
>>
>> Also, the demo Lucene code is not really designed to be used in a
>> production application (sadly), so you're better off borrowing code
>> from the many articles or our book to begin with.
>>
>> 	Erik
>>
>>
>>>
>>>       // Add the summary as a field that is stored and returned with
>>>       // hit documents for display.
>>>       doc.add(new Field("summary", parser.getSummary(),
>>> Field.Store.YES, Field.Index.NO));
>>>
>>>       // Add the title as a field that it can be searched and that is
>>> stored.
>>>       doc.add(new Field("title", parser.getTitle(), Field.Store.YES,
>>> Field.Index.TOKENIZED));
>>>     }
>>>
>>>
>>>
>>> -----Original Message-----
>>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>>> Sent: Wednesday, March 30, 2005 7:38 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: HTML pages highlighter
>>>
>>>
>>>
>>> On Mar 30, 2005, at 4:46 PM, Yagnesh Shah wrote:
>>>
>>>> Hi! Eric,
>>>
>>> Erik - with a 'k' - Sorry, I let it slide once though :)
>>>
>>>> 	I try to modified that with this but I get compile error. Do you
>>>> have
>>>> any code snippet of highlighting code to pull the contents from the
>>>> original source?
>>>
>>> I have a whole book full of code examples :)
>>> http://www.lucenebook.com - Grab the source code and look in
>>> src/lia/tools at Highlight*.java
>>>
>>>>  or Do you know how I can do field store?
>>>>
>>>>       doc.add(new Field("contents", parser.getReader(),
>>>> Field.Store.YES, Field.Index.NO));
>>>
>>> You cannot store it with a Reader.  You need to use 
>>> Field.Text(String,
>>> String), or one of the other variations.
>>>
>>> 	Erik
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 22:54:43 2005
Return-Path: <java-user-return-13974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46767 invoked from network); 6 Apr 2005 22:54:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 22:54:43 -0000
Received: (qmail 91595 invoked by uid 500); 6 Apr 2005 22:54:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91567 invoked by uid 500); 6 Apr 2005 22:54:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91548 invoked by uid 99); 6 Apr 2005 22:54:36 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 15:54:34 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F26935B7A3; Wed,  6 Apr 2005 15:54:31 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id F14747F459
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2005 15:54:31 -0700 (PDT)
Date: Wed, 6 Apr 2005 15:54:31 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Search performance under high load
In-Reply-To: <4254505C.706@pricerunner.com>
Message-ID: <Pine.LNX.4.58.0504061542010.25817@hal.rescomp.berkeley.edu>
References: <4254505C.706@pricerunner.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Queries: The query strings are of highly differing complexity, from
: simple x:y to long queries involving conjunctions, disjunctions and
: wildecard queries.
:
: 90% of the queries run brilliantly. Problem is that 10% of the queries
: (simple or not) take a long time, on average more that 10 seconds,
: sometimes several minutes.

without knowing the nature of the queries, these numbers are not outside
the realm of possibility.  there have been examples on the list in the
last few days of how BooleanQueries constructed with deep nesting have
particularly bad performance.

I would suggest you timing logs to your Search code so that you get one
log line per search executed telling you:

1) the time of day the search was executed
2) the total time taken by the Searcher.search(Query) call
3) the Query.toString() of the search.
4) the Hits.length() of the result.
5) any tracking information to help you identify where the search came
   from (ie: canned search from a category listing page, user entered
   freeform text, your RSS feed genertor, etc...)

This will help you determine:

 a) is there a common element to the structure of queries that take more
    then a certain amount of time?
 b) are the slow queries clustured by time of day? is anything else
    happening on that box during that time?
 c) are the "slow" queries all resulting in a high number of Hits?
 d) are the slow searches all orriginating from a single source? (ie: are
    the queries needed by categlory listing pages all really slow) can
    they be re-implimented differently?
 e) is there anything else the slow queries have in common?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 23:08:06 2005
Return-Path: <java-user-return-13975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48236 invoked from network); 6 Apr 2005 23:08:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 23:08:06 -0000
Received: (qmail 1865 invoked by uid 500); 6 Apr 2005 23:08:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 980 invoked by uid 500); 6 Apr 2005 23:08:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 967 invoked by uid 99); 6 Apr 2005 23:08:02 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from customer-reverse-entry.216.93.187.44 (HELO mail.pudg.org) (216.93.187.44)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 16:08:01 -0700
Received: (qmail 21565 invoked by uid 508); 6 Apr 2005 23:08:02 -0000
Received: from unknown (HELO mail.pudg.org) (216.93.177.208)
  by 0 with DES-CBC3-SHA encrypted SMTP; 6 Apr 2005 23:08:02 -0000
Date: Wed, 6 Apr 2005 16:08:02 -0700 (PDT)
From: David Noll <lists@noll.org>
X-X-Sender: david@mail.pudg.org
To: java-user@lucene.apache.org
Subject: New Lucene-powered site, plus a Lucene job
Message-ID: <Pine.LNX.4.44.0504061605140.21145-100000@mail.pudg.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Lucene folks,

Just a quick note to announce the launch of a new Lucene-powered site,
the GATT Digital Library at Stanford. The URL is
http://gatt.stanford.edu.

Over the past seven years, the Stanford Libraries have digitized a
large collection of documents produced by the GATT, the predecessor to
today's World Trade Organization. This site, which offers access to
over 30,000 documents, makes the products of this digitization effort
publicly available for the first time. Over the coming months and
years, we hope to release tens of thousands more documents through
this website, and through other digital library systems.

As you might have guessed, the functionality for searching and
browsing the GATT library is driven by Lucene. We owe a huge debt of
gratitude to Doug and the Lucene team. Without Lucene, it would have
been much more difficult to release these important historical
documents to the public.

I also wanted to announce an opening for a developer job at Stanford
that may be of interest to Lucene programmers. The work will focus on
creating tools to put Stanford's digital collections online, and on
developing an open source toolkit for indexing XML with Lucene. (We
already have a good beta, which was used to create the index for the
GATT site.) For more details on the job, please take a look at the
posting at Craigslist.

  http://www.craigslist.org/pen/art/66515046.html

Comments and questions on the site and/or job are most welcome. Feel
free to contact me at this address or via my work e-mail, dln (at)
stanford.edu.

- David


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 23:11:35 2005
Return-Path: <java-user-return-13976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48802 invoked from network); 6 Apr 2005 23:11:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2005 23:11:35 -0000
Received: (qmail 4200 invoked by uid 500); 6 Apr 2005 23:11:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4169 invoked by uid 500); 6 Apr 2005 23:11:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4156 invoked by uid 99); 6 Apr 2005 23:11:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from server1.hostmon.com (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 16:11:31 -0700
Received: (qmail 10432 invoked by uid 532); 6 Apr 2005 23:09:51 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 3.0.0.  Clear:. 
 Processed in 0.244082 secs); 06 Apr 2005 23:09:51 -0000
Received: from unknown (HELO ?172.31.1.2?) (127.0.0.1)
  by 0 with SMTP; 6 Apr 2005 23:09:51 -0000
Message-ID: <42546CA0.4090002@tropo.com>
Date: Wed, 06 Apr 2005 16:11:28 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041217
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Search performance under high load
References: <4254505C.706@pricerunner.com>
In-Reply-To: <4254505C.706@pricerunner.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Herlitz wrote:

> Hi everybody,
> 
> We have been using Lucene for about one year now with great success. 
> Recently though the index has growed noticably and so has the number of 
> searches. I was wondering if anyone would like to comment on these 
> figures and say if it works for them?
> 
> Index size: ~2.5 GB, on disk
> Number of fields: ~30
> Number of indexed fields: ~10
> Server: Linux, Intel(R) Xeon(TM) CPU 3.00GHz, 3GB, dedicated to Lucene 
> searches.
> Java: Sun 1.5, -Xmx1200m

For perf tuning on 1.4+ VMs I always try these flags too:

-server
-XX:CompileThreshold=100
-Xverify:none

And also worth considering is giving a -Xms value equal to -Xmx.



> Load: Approaching 2000 requests / hour.
> Queries: The query strings are of highly differing complexity, from 
> simple x:y to long queries involving conjunctions, disjunctions and 
> wildecard queries.
> 
> 90% of the queries run brilliantly. Problem is that 10% of the queries 
> (simple or not) take a long time, on average more that 10 seconds, 
> sometimes several minutes.
> 
> We have managed to track down these figures to the calls to 
> IndexSearcher.search(Query). We have seen up to about 10 searches 
> concurrently executing.
> 
> We have tried to run the server on different machines and with different 
> version of Java. We have no OutOfMemorys.
> 
> I am curious about what to expect from Lucene when it comes to 
> searching. There are lots of figures about the indexing speed (no 
> question about that, it's incredibly fast!). But what about searching? 
> And searching with the kind of load we have. Anyone in the same 
> situation as we are? Comments? Suggestions?

Well in a benchmark I was doing recently fuzzy queries were the problem 
in the mix I had - but to be fair, a fuzzy search is really just a big 
query as it expands query to be all "similar" terms.

Also of interest is what's the problem w/ the long running queries - are 
they slowing down the response time for the other users w/ shorter 
queries?

I've never done this, but you could consider a thread pool to execute 
the queries, and once a query takes more than, say, a second, you lower 
its priority.

Also, I'd have a rule like no more than "n" slow queries can run at 
once, so you queue up slow queries if there are lots of them executing.



> 
> Thanks
> Daniel
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 06:22:16 2005
Return-Path: <java-user-return-13977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21850 invoked from network); 7 Apr 2005 06:22:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2005 06:22:16 -0000
Received: (qmail 17062 invoked by uid 500); 7 Apr 2005 06:22:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17031 invoked by uid 500); 7 Apr 2005 06:22:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17016 invoked by uid 99); 7 Apr 2005 06:22:12 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=FORGED_RCVD_HELO,HTML_90_100,HTML_MESSAGE,HTML_TEXT_AFTER_BODY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 66-238-9-116.dia.xo.com (HELO exch01.allegro.med) (66.238.9.116)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 23:22:10 -0700
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.181
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C53B3A.1B339DC0"
Subject: Escaping special characters
Date: Wed, 6 Apr 2005 23:21:59 -0700
Message-ID: <B5ADCC4EA669BF4697F6AF63FF328674E0FFE1@exch01.allegro.med>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Escaping special characters
thread-index: AcU7Ohrognv1q79FRoSlysSCRlhyMg==
From: "Mufaddal Khumri" <MKhumri@allegromedical.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C53B3A.1B339DC0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

Am new to Lucene. I found the following page:
http://lucene.apache.org/java/docs/queryparsersyntax.html. At the bottom
of the page there is a section that in order to escape special
characters one would use "\".

=20

I have an Indexer that indexes product names. Some product names have
"-" character in them. When I use my search class to search for product
names with - in them it wont find those products.

=20

The code below returns no result.

=20

public void searchIndex()

{

            try

            {

              SearchManager sm =3D new
ManagerFactory().getSearchManager();

             =20

              String searchPath =3D "Product-search-index";

              sm.initIndex(searchPath);

              sm.buildIndex(this.daoFactory);

             =20

              String tk =3D "Chimi-Bose-765";

              if(tk.contains("-"));

                  tk =3D tk.replaceAll("-" , "\\-");

                 =20

              if(tk !=3D null && tk.trim().equals("") =3D=3D false)

                  tk =3D tk + "*";

              else

                  tk =3D "";

=20

              try

              {

                  Hits hits =3D sm.search(searchPath, tk);

                   =20

                  if(hits !=3D null && hits.length() > 0)

                  {

                      int length =3D hits.length();

                      log.info(length + " result(s) were found matching
your search criteria.");

                      for(int i =3D 0; i < length; i++)

                      {

                          Document doc =3D hits.doc(i);

                          log.info("Score: " + hits.score(i) + " Product
id =3D " + doc.getField("id").stringValue() + " prod name =3D " +
doc.getField("name").stringValue());

                      }

                  }

                  else

                      log.info("No results were found matching your
search.");

              }

              catch(IOException ex)

              {

                  ex.printStackTrace();

              }

              catch(Exception ex)

              {

                  log.info("No results were found matching your
search.");

              }

            }

            catch (Exception ex)

            {

                  ex.printStackTrace();

                  Assert.fail();

            }

}

=20


-------------------------------------------------------------------------=
-----------------
This email and any files transmitted with it are confidential=20
and intended solely for the use of the individual or entity=20
to whom they are addressed. If you have received this=20
email in error please notify the system manager. Please
note that any views or opinions presented in this email=20
are solely those of the author and do not necessarily
represent those of the company. Finally, the recipient
should check this email and any attachments for the=20
presence of viruses. The company accepts no liability for
any damage caused by any virus transmitted by this email.
Consult your physician prior to the use of any medical
supplies or product.
-------------------------------------------------------------------------=
-----------------


------_=_NextPart_001_01C53B3A.1B339DC0--

From java-user-return-13978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 06:39:13 2005
Return-Path: <java-user-return-13978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27785 invoked from network); 7 Apr 2005 06:39:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2005 06:39:13 -0000
Received: (qmail 36623 invoked by uid 500); 7 Apr 2005 06:39:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36480 invoked by uid 500); 7 Apr 2005 06:39:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36464 invoked by uid 99); 7 Apr 2005 06:39:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 23:39:03 -0700
Received: from [192.168.1.100] ([::ffff:66.92.12.207])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Thu, 07 Apr 2005 01:39:00 -0500
  id 00074190.4254D585.00004DC9
Message-ID: <4254D576.20201@allthingslocal.com>
Date: Wed, 06 Apr 2005 23:38:46 -0700
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Escaping special characters
References: <B5ADCC4EA669BF4697F6AF63FF328674E0FFE1@exch01.allegro.med>
In-Reply-To: <B5ADCC4EA669BF4697F6AF63FF328674E0FFE1@exch01.allegro.med>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mufaddal Khumri writes (4/6/2005 11:21 PM):

>Hi,
>
> 
>
>Am new to Lucene. I found the following page:
>http://lucene.apache.org/java/docs/queryparsersyntax.html. At the bottom
>of the page there is a section that in order to escape special
>characters one would use "\".
>
> 
>
>I have an Indexer that indexes product names. Some product names have
>"-" character in them. When I use my search class to search for product
>names with - in them it wont find those products.
>  
>
How did you index those product names?  I.e., if you used a tokenized 
field for the product names and an analyzer that breaks on the hyphens, 
then there are no hyphenated tokens for you to match.  I would suggest 
using Luke to browse your index and see what you have.

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 06:47:27 2005
Return-Path: <java-user-return-13979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28654 invoked from network); 7 Apr 2005 06:47:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2005 06:47:26 -0000
Received: (qmail 43516 invoked by uid 500); 7 Apr 2005 06:47:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42608 invoked by uid 500); 7 Apr 2005 06:47:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42594 invoked by uid 99); 7 Apr 2005 06:47:22 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 66-238-9-116.dia.xo.com (HELO exch01.allegro.med) (66.238.9.116)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 06 Apr 2005 23:47:22 -0700
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.181
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Escaping special characters
Date: Wed, 6 Apr 2005 23:47:18 -0700
Message-ID: <B5ADCC4EA669BF4697F6AF63FF328674E0FFE2@exch01.allegro.med>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Escaping special characters
thread-index: AcU7PIE0WQBr0oBlRt2IVkvMZHJ6bAAAMO4A
From: "Mufaddal Khumri" <MKhumri@allegromedical.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have indexed the product names using the StandardAnalyzer and I store
the product names as Field.Text. I suspect the StandardAnalyzer uses my
hyphens as a token separator. What do I do to get around this problem?
Can I tell StandardAnalyzer not to break on hyphens or should I be using
some other Analyzer?

Thanks.

-----Original Message-----
From: Chuck Williams [mailto:chuck@allthingslocal.com]=20
Sent: Wednesday, April 06, 2005 11:39 PM
To: java-user@lucene.apache.org
Subject: Re: Escaping special characters

Mufaddal Khumri writes (4/6/2005 11:21 PM):

>Hi,
>
>=20
>
>Am new to Lucene. I found the following page:
>http://lucene.apache.org/java/docs/queryparsersyntax.html. At the
bottom
>of the page there is a section that in order to escape special
>characters one would use "\".
>
>=20
>
>I have an Indexer that indexes product names. Some product names have
>"-" character in them. When I use my search class to search for product
>names with - in them it wont find those products.
> =20
>
How did you index those product names?  I.e., if you used a tokenized=20
field for the product names and an analyzer that breaks on the hyphens,=20
then there are no hyphenated tokens for you to match.  I would suggest=20
using Luke to browse your index and see what you have.

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


-------------------------------------------------------------------------=
-----------------
This email and any files transmitted with it are confidential=20
and intended solely for the use of the individual or entity=20
to whom they are addressed. If you have received this=20
email in error please notify the system manager. Please
note that any views or opinions presented in this email=20
are solely those of the author and do not necessarily
represent those of the company. Finally, the recipient
should check this email and any attachments for the=20
presence of viruses. The company accepts no liability for
any damage caused by any virus transmitted by this email.
Consult your physician prior to the use of any medical
supplies or product.
-------------------------------------------------------------------------=
-----------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 07:25:03 2005
Return-Path: <java-user-return-13980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37223 invoked from network); 7 Apr 2005 07:25:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2005 07:25:03 -0000
Received: (qmail 97080 invoked by uid 500); 7 Apr 2005 07:25:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97055 invoked by uid 500); 7 Apr 2005 07:25:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97039 invoked by uid 99); 7 Apr 2005 07:25:00 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr14.xs4all.nl (HELO smtp-vbr14.xs4all.nl) (194.109.24.34)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 07 Apr 2005 00:24:59 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr14.xs4all.nl (8.12.11/8.12.11) with ESMTP id j377OtrG026490
	for <java-user@lucene.apache.org>; Thu, 7 Apr 2005 09:24:56 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Search performance under high load
Date: Thu, 7 Apr 2005 09:24:55 +0200
User-Agent: KMail/1.5.4
References: <4254505C.706@pricerunner.com> <Pine.LNX.4.58.0504061542010.25817@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0504061542010.25817@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504070924.55568.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel,

On Thursday 07 April 2005 00:54, Chris Hostetter wrote:
> 
> : Queries: The query strings are of highly differing complexity, from
> : simple x:y to long queries involving conjunctions, disjunctions and
> : wildecard queries.
> :
> : 90% of the queries run brilliantly. Problem is that 10% of the queries
> : (simple or not) take a long time, on average more that 10 seconds,
> : sometimes several minutes.
> 
> without knowing the nature of the queries, these numbers are not outside
> the realm of possibility.  there have been examples on the list in the
> last few days of how BooleanQueries constructed with deep nesting have
> particularly bad performance.
> 
> I would suggest you timing logs to your Search code so that you get one
> log line per search executed telling you:
> 
> 1) the time of day the search was executed
> 2) the total time taken by the Searcher.search(Query) call
> 3) the Query.toString() of the search.
> 4) the Hits.length() of the result.
> 5) any tracking information to help you identify where the search came
>    from (ie: canned search from a category listing page, user entered
>    freeform text, your RSS feed genertor, etc...)
> 
> This will help you determine:
> 
>  a) is there a common element to the structure of queries that take more
>     then a certain amount of time?

In general, disjunctions (truncations, fuzzy queries) are slow, and
conjunctions (required terms, filters) are faster.

>  b) are the slow queries clustured by time of day? is anything else
>     happening on that box during that time?
>  c) are the "slow" queries all resulting in a high number of Hits?
>  d) are the slow searches all orriginating from a single source? (ie: are
>     the queries needed by categlory listing pages all really slow) can
>     they be re-implimented differently?
>  e) is there anything else the slow queries have in common?

I think your case is CPU bound, so you have a few options:
- use more CPU's,
- get in touch with the 'power' users, (via the logs as suggested by Chris)
  and find out it there are  simple measures you can take to help performance
  for them. For example, replacing a range that is repeatedly used by a cached
  filter can be quite effective.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 08:31:54 2005
Return-Path: <java-user-return-13981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55838 invoked from network); 7 Apr 2005 08:31:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2005 08:31:54 -0000
Received: (qmail 16178 invoked by uid 500); 7 Apr 2005 08:31:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16140 invoked by uid 500); 7 Apr 2005 08:31:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16124 invoked by uid 99); 7 Apr 2005 08:31:30 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from web26005.mail.ukl.yahoo.com (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 07 Apr 2005 01:31:28 -0700
Received: (qmail 53909 invoked by uid 60001); 7 Apr 2005 08:31:26 -0000
Message-ID: <20050407083126.53907.qmail@web26005.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26005.mail.ukl.yahoo.com via HTTP; Thu, 07 Apr 2005 09:31:25 BST
Date: Thu, 7 Apr 2005 09:31:25 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Search performance under high load
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In addition to the comments already made, I recently
recently found these changes to be useful:

1) Swapping out Sun 1.4.2_05 JVM for BEA's JRockit JVM
halved my query times. (In both cases did not tweak
any default JVM settings other than -Xmx to ensure
adequate memory allocation). 

2) My app uses long queries, some of which include
very common terms. Using the "MoreLikeThis" query to
drop common terms drastically improved performance. If
your "killer queries" are long ones you could spot
them and service them with a MoreLikeThis or simply
limit the number of allowed terms in the query string.


Cheers
Mark

Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 09:09:56 2005
Return-Path: <java-user-return-13982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65755 invoked from network); 7 Apr 2005 09:09:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2005 09:09:56 -0000
Received: (qmail 85376 invoked by uid 500); 7 Apr 2005 09:09:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85358 invoked by uid 500); 7 Apr 2005 09:09:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 79808 invoked by uid 99); 7 Apr 2005 08:13:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Re: Escaping special characters
Date: Thu, 7 Apr 2005 09:16:58 +0000
User-Agent: KMail/1.8
References: <B5ADCC4EA669BF4697F6AF63FF328674E0FFE1@exch01.allegro.med> <4254D576.20201@allthingslocal.com>
In-Reply-To: <4254D576.20201@allthingslocal.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504070916.58680.mail@andy-roberts.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 07 Apr 2005 06:38, Chuck Williams wrote:
> Mufaddal Khumri writes (4/6/2005 11:21 PM):
> >Hi,
> >
> >Am new to Lucene. I found the following page:
> >http://lucene.apache.org/java/docs/queryparsersyntax.html. At the bottom
> >of the page there is a section that in order to escape special
> >characters one would use "\".
> >
> >
> >
> >I have an Indexer that indexes product names. Some product names have
> >"-" character in them. When I use my search class to search for product
> >names with - in them it wont find those products.
>
> How did you index those product names?  I.e., if you used a tokenized
> field for the product names and an analyzer that breaks on the hyphens,
> then there are no hyphenated tokens for you to match.  I would suggest
> using Luke to browse your index and see what you have.
>
> Chuck

The Lucene In Action book has an excellent chapter on Analysers - well worth a 
read. Of particular interest is some code that allows you to see how a given 
Analyser tokenises an input string.

You can download the source code from the book 
(http://www.lucenebook.com/LuceneInAction.zip). If you unzip this file you 
will find a directory called "LuceneInAction/src/lia/analysis" and in there 
is a class called AnalyzerDemo (which depends in AnalyzerUtils). Compile this 
and run to see how the Analysers work. Put in your hyphenated strings to see 
how they work too.

HTH
Andy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 09:13:00 2005
Return-Path: <java-user-return-13983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66515 invoked from network); 7 Apr 2005 09:13:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2005 09:13:00 -0000
Received: (qmail 91841 invoked by uid 500); 7 Apr 2005 09:12:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91819 invoked by uid 500); 7 Apr 2005 09:12:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 22795 invoked by uid 99); 7 Apr 2005 08:34:37 -0000
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_POST,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
X-VirusChecked: Checked
X-Env-Sender: iouli.golovatyi@novartis.com
X-Msg-Ref: server-9.tower-84.messagelabs.com!1112862870!8159314!1
X-StarScan-Version: 5.4.12; banners=novartis.com,-,-
X-Originating-IP: [160.62.1.169]
Subject: Re: Sorting date stored in milliseconds time
To: java-user@lucene.apache.org
Message-ID: <OF525E89FE.027DCD0A-ONC1256FDC.002E8278-C1256FDC.002F1A30@EU.novartis.net>
From: iouli.golovatyi@novartis.com
Date: Thu, 7 Apr 2005 10:34:29 +0200
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


well,

1) it would be additional logic overhead to generate the unique id and keep
it global for all data providers
2) I doubt that ordering on 2 fields like "time" up to sec (or even to min)
and "integer" will be quicker when sorting using just one "long"





                                                                                                                               
                      Scott Farquhar                                                                                           
                      <scott@atlassian.        To:       java-user@lucene.apache.org                                           
                      com>                     cc:       Lucene Users List <lucene-user@jakarta.apache.org>, (bcc: Iouli       
                                                Golovatyi/X/GP/Novartis)                                                       
                      06.04.2005 23:51         Subject:  Re: Sorting date stored in milliseconds time                          
                      Please respond to                                                                                        
                      java-user                Category:       |-------------------------|                                     
                                                               | ( ) Action needed       |                                     
                                                               | ( ) Decision needed     |                                     
                                                               | ( ) General Information |                                     
                                                               |-------------------------|                                     
                                                                                                                               
                                                                                                                               




On Wed, Apr 06, 2005 at 01:02:35PM +0200, iouli.golovatyi@novartis.com
wrote:
> I'm  forced to keep date up to milisec. The reason is simple: I get at
> least a couple of new messages per sec, if all of them are stamped with
the
> same time, the retrieval order id undefined, i.e.  once I get it, let's
> say, as the last reference on the first page, other time - as the first
one
> on the second page. In case You do not keep the cache and always performs
> the same query even to get the second page it's getting even worse, i.e.
> displaying the messgaes 41-80, may bring the message 41, which You
already
> displayed on your first page as message 40.

Why can't you have a secondary sort on message id?  Then you sort by time
and message id will always result in consistent ordering.

Cheers,
Scott

--
ATLASSIAN - http://www.atlassian.com
Expert J2EE Software, Services and Support
-------------------------------------------------------------
JIRA Docs: http://www.atlassian.com/software/jira/docs/latest

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org







______________________________________________________________________
The Novartis email address format has changed to 
firstname.lastname@novartis.com.  Please update your address book 
accordingly.
______________________________________________________________________

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 09:57:13 2005
Return-Path: <java-user-return-13984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78182 invoked from network); 7 Apr 2005 09:57:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2005 09:57:13 -0000
Received: (qmail 69043 invoked by uid 500); 7 Apr 2005 09:57:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68956 invoked by uid 500); 7 Apr 2005 09:57:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68928 invoked by uid 99); 7 Apr 2005 09:57:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mx.laposte.net (HELO mx.laposte.net) (81.255.54.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 07 Apr 2005 02:57:04 -0700
Received: from workstation (81.57.207.77) by mx.laposte.net (7.0.028) (authenticated as fred.lamuette)
        id 425309EF000E9AB6 for java-user@lucene.apache.org; Thu, 7 Apr 2005 11:57:34 +0200
From: "Fred Lamuette" <fred.lamuette@laposte.net>
To: "lucene" <java-user@lucene.apache.org>
Subject: Best practice
Date: Thu, 7 Apr 2005 11:57:23 +0200
Message-ID: <GKEOJOCCFAOMMEFHBOEMKECDFIAA.fred.lamuette@laposte.net>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,
I'm pretty new to Lucene, and I'd like to have your point of view on the
following case.
I need to build a webapp that would manage workers' profiles and in each
profile, we allow to attach any documents (pdf, doc, video, ...). Pretty
basic. We need to index searchable documents (lucene) and stores documents
on the server.
My question is the following. I'd like to store the documents with a
repository framework (jakarta slide, jsr-170, ...) and I wonder if there
already exists something tied with Lucene ?  or a repository+lucene package
that performs well ?
Thank you for your feedback.
Richard.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 10:13:14 2005
Return-Path: <java-user-return-13985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83043 invoked from network); 7 Apr 2005 10:13:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2005 10:13:14 -0000
Received: (qmail 3310 invoked by uid 500); 7 Apr 2005 10:13:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3288 invoked by uid 500); 7 Apr 2005 10:13:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3268 invoked by uid 99); 7 Apr 2005 10:13:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from web25610.mail.ukl.yahoo.com (HELO web25610.mail.ukl.yahoo.com) (217.12.10.169)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 07 Apr 2005 03:13:06 -0700
Received: (qmail 53600 invoked by uid 60001); 7 Apr 2005 10:13:03 -0000
Message-ID: <20050407101303.53598.qmail@web25610.mail.ukl.yahoo.com>
Received: from [213.11.44.138] by web25610.mail.ukl.yahoo.com via HTTP; Thu, 07 Apr 2005 12:13:03 CEST
Date: Thu, 7 Apr 2005 12:13:03 +0200 (CEST)
From: quinton olivier <ehtenrion@yahoo.fr>
Subject: Scoring refinement question
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 

I don't know if this question has already  been asked
as I couldn't find any clue on Mail Archive. 
I would like to kown if there is a proper way to
refine the scoring of a fuzzy query in such a way :
taking in account only the best match for a given
position, and not to sum scores for all mathing tokens
regarding the same position (i.e. for different
synonyms).

In other words, if more than one synonym match a term
of a fuzzy search query, i would like to collect only
the score of the best synonym, but not to sum scores
for all matching synonyms.

Maybe a short example should help to understand my
question : 

I have products identified by labels. A label have one
or more tokens.  A token can have none, few or a lot
of synonyms. 

Doing a fuzzy query on a particular label with a wrong
spelling should bring back the most relevant ones and
not the ones with the most of associated synonyms. 
We give a 0-increment position to synonyms while
indexing and don't injected them in the fuzzy query as
we don't know them at this time.

Looking at  the source code, I think the best way is
to check which term (i.e. which position) match with
the searched one when collecting results but
HitCollector.collect() method only receive a docId and
a score. Internally it sums scores to any previous
matched ones. This method doesn't have access to term
text, or position and can't compare with an internal
memory containing the current most relevant synonym
for the term at a given position.

If any of you have some ideas or suggestions that can
help me, you are welcome :)


Thanks a lot for your help.

Cheers,
Olivier


	

	
		
__________________________________________________________________
Découvrez le nouveau Yahoo! Mail : 250 Mo d'espace de stockage pour vos mails ! 
Créez votre Yahoo! Mail sur http://fr.mail.yahoo.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 13:38:22 2005
Return-Path: <java-user-return-13986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52153 invoked from network); 7 Apr 2005 13:38:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2005 13:38:22 -0000
Received: (qmail 29559 invoked by uid 500); 7 Apr 2005 13:37:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29464 invoked by uid 500); 7 Apr 2005 13:37:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29354 invoked by uid 99); 7 Apr 2005 13:37:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from gandalf.xlnet.net.ar (HELO gandalf.xlnet.net.ar) (200.61.10.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 07 Apr 2005 06:37:55 -0700
Received: from exchange.xlnet.net.ar (10.0.0.3) by gandalf.xlnet.net.ar (NPlex 5.1.036)
        id 420E22C20004B6D4 for java-user@lucene.apache.org; Thu, 7 Apr 2005 10:37:17 -0300
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: nested queries
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Thu, 7 Apr 2005 10:37:14 -0300
Message-ID: <DDD3F807D283B543B3396F7E00A2C7E179E050@exchange.xlnet.net.ar>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: nested queries
Thread-Index: AcU7dujsXizsOBTkRk2joYYEZ0ipTQ==
From: "Romero Mariela" <mariela.romero@xlnet.net.ar>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi all,

We are using Lucene to search business objects with simple queries, but
now we need advanced searchs.=20

For example, we have a user object which has as indexed fields the id
and its function, and an account object which has as indexed fields its
id and the id of the owner user.=20

	User	-> userId, function
	Account -> accountId , userId

Can we use Lucene to find the accounts of the users with a given
function??=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 14:25:18 2005
Return-Path: <java-user-return-13987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73589 invoked from network); 7 Apr 2005 14:25:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2005 14:25:18 -0000
Received: (qmail 49704 invoked by uid 500); 7 Apr 2005 14:25:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49686 invoked by uid 500); 7 Apr 2005 14:25:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49671 invoked by uid 99); 7 Apr 2005 14:25:06 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from nyhwwex001a.hwwilson.com (HELO NYHWWEX001.hwwilson.local) (208.238.105.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 07 Apr 2005 07:25:04 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: HTML pages highlighter
Date: Thu, 7 Apr 2005 10:25:01 -0400
Message-ID: <E3AD9C3F9EC34949855CDFC6FB5A6C11755135@NYHWWEX001.hwwilson.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: HTML pages highlighter
Thread-Index: AcU6+kVkb7ZH0gFDTNmJMq3IfBLxGQAhCOFg
From: "Yagnesh Shah" <yshah@hwwilson.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi! Eric,
	Yes HighlightIt.java and HighlightTest.java works. I did attached the =
file, Anyway here is the source:

      1 <HTML><!-- -*-java-*- -->
      2 <!-- Lucene Search Demo via CompiledPageServlet -->
      3 <!-- Copyright (c) 1998,2000 Douglass R. Cutting. -->
      4
      5 <java type=3Dimport>
      6   javax.servlet.*
      7   javax.servlet.http.*
      8  java.io.StringWriter
      9  java.io.StringReader
     10  java.io.IOException
     11   org.apache.lucene.analysis.*
     12   org.apache.lucene.document.*
     13   org.apache.lucene.index.*
     14   org.apache.lucene.search.*
     15   org.apache.lucene.queryParser.*
     16   org.apache.lucene.demo.*
     17   org.apache.lucene.demo.html.Entities
     18   org.apache.lucene.search.highlight.*
     19  org.apache.lucene.analysis.standard.StandardAnalyzer
     20  org.apache.lucene.search.highlight.Formatter
     21  org.apache.lucene.search.highlight.Highlighter
     22  org.apache.lucene.search.highlight.QueryScorer
     23  org.apache.lucene.search.highlight.SimpleFragmenter
     24 </java>
     25
     26 <java>
     27   // get index from request
     28   String indexName =3D request.getParameter("index");
     29   if (indexName =3D=3D null)                          // default =
to "index"
     30     indexName =3D "/opt/dynamo/prod/hww-doc/hww/help/index";
     31 IndexReader ireader =3D getReader(indexName);
     32
     33  Searcher searcher =3D new IndexSearcher(ireader);
     34
     35   // get query from request
     36   String queryString =3D request.getParameter("query");
     37   if (queryString =3D=3D null)
     38     throw new ServletException("no query specified");
     39
     40   int start =3D 0;                                  // first hit =
to display
     41   String startString =3D request.getParameter("start");
     42   if (startString !=3D null)
     43     start =3D Integer.parseInt(startString);
     44
     45   int hitsPerPage =3D 10;                           // number of =
hits to display
     46   String hitsString =3D request.getParameter("hitsPerPage");
     47   if (hitsString !=3D null)
     48     hitsPerPage =3D Integer.parseInt(hitsString);
     49
     50   boolean showSummaries =3D true;                   // show =
summaries?
     51   if ("false".equals(request.getParameter("showSummaries")))
     52     showSummaries =3D false;
     53
     54   Query query =3D null;
     55   try {                                           // parse query
     56     query =3D QueryParser.parse(queryString, "contents", =
analyzer);
     57   } catch (ParseException e) {                    // error =
parsing query
     58     </java>
     59     <HEAD><TITLE>Error Parsing Query</TITLE></HEAD><BODY>
     60     <p>While parsing `queryString`: `e.getMessage()`
     61     <java>
     62     return;
     63   }
     64
     65   String servletPath =3D request.getRequestURI();   // =
getServletPath should work
     66   int j =3D servletPath.indexOf('?');               // here but =
doesn't, so we
     67   if (j !=3D -1)                                    // remove =
query by hand...
     68     servletPath =3D servletPath.substring(0, j);
     69
     70 </java>
     71
     72 <head><title>Lucene Search Results</title></head><body>
     73
     74 <center>
     75  <form name=3Dsearch action=3D`servletPath` method=3Dget>
     76  <input name=3Dquery size=3D44 value=3D'`queryString`'>
     77  <input type=3Dhidden name=3Dindex value=3D"`indexName`">
     78  <input type=3Dhidden name=3DhitsPerPage value=3D`hitsPerPage`>
     79  <input type=3Dhidden name=3DshowSummaries =
value=3D`showSummaries`>
     80  <input type=3Dsubmit value=3DSearch>
     81  </form>
     82 </center>
     83 <java>
     84   Hits hits =3D searcher.search(query);             // perform =
query
     85   int end =3D Math.min(hits.length(), start + hitsPerPage);
     86 </java>
     87
     88
     89
     90 <p>Hits <b><java type=3Dprint>start+1</java>-<java =
type=3Dprint>end</java></b>
     91 (out of <java type=3Dprint>hits.length()</java> total matching =
documents):
     92
     93 <ul>
     94 <java>
     95     SimpleHTMLFormatter formatter =3D
     96         new SimpleHTMLFormatter();
     97 QueryScorer scorer =3D new QueryScorer(query);
     98 query.rewrite(ireader);
     99 Highlighter highlighter =3D new Highlighter(formatter, scorer);
    100 highlighter.setTextFragmenter(new SimpleFragmenter(50));
    101 String FIELD_NAME =3D "contents";
    102   String result =3D "not specific";
    103   String text;
    104   for (int i =3D start; i < end; i++) {             // display =
the hits
    105   Document doc =3D hits.doc(i);
    106   text =3D hits.doc(i).get(FIELD_NAME);
    107   int maxNumFragmentsRequired =3D 5;
    108   String fragmentSeparator =3D "...";
    109         if ( text !=3D null){
    110   TokenStream tokenStream =3D new =
StandardAnalyzer().tokenStream(FIELD_NAME, new =
java.io.StringReader(text));
    111   result =3D =
highlighter.getBestFragments(tokenStream,text,maxNumFragmentsRequired,fra=
gmentSeparator);
    112     System.out.println("text" + text + "start" + start + "end" =
+end + "i" +i +"result=3D" +result);
    113 }
    114
    115     String title =3D doc.get("title");
    116     if (title.equals(""))                         // use url for =
docs w/o title
    117       title =3D doc.get("path");
    118     </java>
    119     <p><b><java type=3Dprint>(int)(hits.score(i) * =
100.0f)</java>%
    120     <a href=3D"`doc.get("path")`">
    121     <java type=3Dprint>Entities.encode(title)</java>
    122     </b></a>
    123 <hr>
    124     <ul><i>Summary</i>:</ul>
    125     <java>
    126     if (text !=3D null) {                          // maybe show =
summary
    127     </java>
    128         <java type=3Dprint>result</java>
    129     }
    130     elseif (showSummaries)
    131     {
    132     </java>
    133       <java =
type=3Dprint>Entities.encode(doc.get("summary"))</java>
    134     <java>
    135     }
    136   }
    137 </java>
    138 </ul>
    139
    140 <java>
    141   if (end < hits.length()) {                      // insert next =
page button
    142 </java>
    143     <center>
    144     <form name=3Dsearch action=3D`servletPath` method=3Dget>
    145     <input type=3Dhidden name=3Dquery value=3D'`queryString`'>
    146     <input type=3Dhidden name=3Dstart value=3D`end`>
    147     <input type=3Dhidden name=3Dindex value=3D"`indexName`">
    148     <input type=3Dhidden name=3DhitsPerPage =
value=3D`hitsPerPage`>
    149     <input type=3Dhidden name=3DshowSummaries =
value=3D`showSummaries`>
    150     <input type=3Dsubmit value=3DNext>
    151     </form>
    152     </center>
    153 <java>
    154     }
    155 </java>
    156
    157 </body>
    158
    159 <java type=3Dclass>
    160
    161   Analyzer analyzer =3D new StopAnalyzer();         // used to =
tokenize queries
    162
    163   /** Keep a cache of open IndexReader's, so that an index does =
not have to
    164       opened for each query.  The cache re-opens an index when =
it has changed
    165       so that additions and deletions are visible ASAP. */
    166
    167   static Hashtable indexCache =3D new Hashtable();  // =
name->CachedIndex
    168
    169   class CachedIndex {                             // an entry in =
the cache
    170     IndexReader reader;                           // an open =
reader
    171     long modified;                                // reader's =
modified date
    172
    173     CachedIndex(String name) throws IOException {
    174       modified =3D IndexReader.lastModified(name);  // get =
modified date
    175       reader =3D IndexReader.open(name);            // open =
reader
    176     }
    177   }
    178
    179   IndexReader getReader(String name) throws ServletException {
    180     CachedIndex index =3D                           // look in =
cache
    181       (CachedIndex)indexCache.get(name);
    182
    183     try {
    184       if (index !=3D null &&                        // check =
up-to-date
    185           (index.modified =3D=3D =
IndexReader.lastModified(name)))
    186         return index.reader;                      // cache hit
    187       else {
    188         index =3D new CachedIndex(name);            // cache =
miss
    189       }
    190     } catch (IOException e) {
    191       StringWriter writer =3D new StringWriter();
    192       PrintWriter pw =3D new PrintWriter(writer);
    193       throw new ServletException("Could not open index " + name =
+ ": " +
    194                                  e.getClass().getName() + "--" +
    195                                  e.getMessage());
    196     }
    197
    198     indexCache.put(name, index);                  // add to =
cache
    199     return index.reader;
    200   }
    201 </java>

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Wednesday, April 06, 2005 6:45 PM
To: java-user@lucene.apache.org
Subject: Re: HTML pages highlighter


What file do those line numbers correspond to?  I'm lost.

Did the Lucene in Action highlighting code work for you?

	Erik

On Apr 6, 2005, at 6:16 PM, Yagnesh Shah wrote:

> Hi! Erik,
> 	Yes basic seems to be working.
> a) My problem is there is a chances that query is not present in=20
> stored content of a file so sometimes I am getting empty strings at=20
> line#106 so I have to put a special check at line#109 and line#126. I=20
> guess this is not a problem. What you think?
> b) When I click on a doc path that was generated by line#120 and=20
> line#121 The files that it open do not have a searched query=20
> highlighted. Any suggestion for this? How I can do?
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Monday, April 04, 2005 8:45 PM
> To: java-user@lucene.apache.org
> Subject: Re: HTML pages highlighter
>
>
> On Apr 4, 2005, at 5:35 PM, Yagnesh Shah wrote:
>> 	I end up purchasing your book "Lucene in Action". I have downloaded
>> your code samples. I am able to retrieve "result" only some time.
>> Below is the code I have taken from Search.jhtml in lucene demo. I
>> have 2 problem
>>
>> a) I am unable to display "result" using
>> b) When I click on the title to retrieve document I do not see my
>> query highlighted.
>
> First things first.... get something very very simple working and
> expand from there.  Here is the simple code from our HighlightIt.java:
>
>      TermQuery query =3D new TermQuery(new Term("f", "ipsum"));
>      QueryScorer scorer =3D new QueryScorer(query);
>      SimpleHTMLFormatter formatter =3D
>          new SimpleHTMLFormatter("<span class=3D\"highlight\">",
>              "</span>");
>      Highlighter highlighter =3D new Highlighter(formatter, scorer);
>      Fragmenter fragmenter =3D new SimpleFragmenter(50);
>      highlighter.setTextFragmenter(fragmenter);
>
>      TokenStream tokenStream =3D new StandardAnalyzer()
>          .tokenStream("f", new StringReader(text));
>
>      String result =3D
>          highlighter.getBestFragments(tokenStream, text, 5, "...");
>
> One trick is that you must ensure the query you are passing to
> QueryScorer has been rewritten.  In our simple TermQuery case, that is
> not necessary, but in a general application it is.  You can call
> query.rewrite(reader) where reader is your IndexReader instance.  This
> ensures that range, fuzzy, and wildcard queries are expanded and
> highlightable.
>
> I'm not sure what is wrong with the code you are trying.  But again,
> start simple, just try out our HighlightIt or our HighlightTest.  If
> those work fine for you then move on to integrating further with your
> index.  Besides the Query.rewrite() trick, you have to be sure that =
the
> text you want to highlight is available.  If you're pulling it from =
the
> index, it must be in a stored field, otherwise you need to retrieve it
> from elsewhere.
>
> 	Erik
>
>
>>
>> <java>
>>
>>   Searcher searcher =3D new IndexSearcher(getReader(indexName));
>>
>>   // get query from request
>>   String queryString =3D request.getParameter("query");
>>
>>   query =3D QueryParser.parse(queryString, "contents", analyzer);
>>   Hits hits =3D searcher.search(query);
>>   SimpleHTMLFormatter formatter =3D
>>   new SimpleHTMLFormatter();
>>   Highlighter highlighter =3D new Highlighter(formatter, new
>> QueryScorer(query));
>>   highlighter.setTextFragmenter(new SimpleFragmenter(50));
>>   String FIELD_NAME =3D "contents";
>>
>>   for (int i =3D start; i < end; i++) {             // display the =
hits
>>   Document doc =3D hits.doc(i);
>>   String text =3D hits.doc(i).get(FIELD_NAME);
>>   int maxNumFragmentsRequired =3D 5;
>>   String fragmentSeparator =3D "...";
>>   if ( text !=3D null){
>> 	TokenStream tokenStream =3D new
>> StandardAnalyzer().tokenStream(FIELD_NAME, new
>> java.io.StringReader(text));
>> 	String result =3D
>> highlighter.getBestFragments	=09
>> (tokenStream,text,maxNumFragmentsRequired,fragmentSeparator);
>>     	System.out.println("result=3D" +result);
>>   }
>>
>>     String title =3D doc.get("title");
>>     if (title.equals(""))                         // use url for docs
>> w/o title
>>       title =3D doc.get("path");
>>     </java>
>>     <p><b><java type=3Dprint>(int)(hits.score(i) * 100.0f)</java>%
>>     <a href=3D"`doc.get("path")`">
>>     <java type=3Dprint>Entities.encode(title)</java>
>>     </b></a>
>>     <java>
>>     if (showSummaries) {                          // maybe show=20
>> summary
>>     </java>
>>     <ul><i>Summary</i>:
>>       <java type=3Dprint>Entities.encode(doc.get("summary"))</java>
>>     </ul>
>>     <java>
>>     }
>>   }
>> </java>
>>
>>
>>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: Thursday, March 31, 2005 8:04 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: HTML pages highlighter
>>
>>
>>
>> On Mar 31, 2005, at 6:36 PM, Yagnesh Shah wrote:
>>>     try {
>>>       fis =3D new FileInputStream(f);
>>>       HTMLParser parser =3D new HTMLParser(fis);
>>>
>>>       // Add the tag-stripped contents as a Reader-valued Text field
>>> so it will
>>>       // get tokenized and indexed.
>>> //      doc.add(new Field("contents", parser.getReader()));
>>>       LineNumberReader reader =3D new
>>> LineNumberReader(parser.getReader());
>>>       for (String l =3D reader.readLine(); l !=3D null; l =3D
>>> reader.readLine())
>>> //        System.out.println(l);
>>>       doc.add(Field.Text("contents", l));
>>
>> Notice that your loop here is adding a "contents" field for *every*
>> line read since that is where the first semi-colon is.
>>
>> Look at using Luke to explore your index.  Try indexing just a dummy
>> String:
>>
>> 	doc.add(Field.Text("contents", "some dummy text"));
>>
>> to show that it works.  Always always always simplify a complicated
>> situation by doing the most obvious thing that _should_ work.
>>
>> Also, the demo Lucene code is not really designed to be used in a
>> production application (sadly), so you're better off borrowing code
>> from the many articles or our book to begin with.
>>
>> 	Erik
>>
>>
>>>
>>>       // Add the summary as a field that is stored and returned with
>>>       // hit documents for display.
>>>       doc.add(new Field("summary", parser.getSummary(),
>>> Field.Store.YES, Field.Index.NO));
>>>
>>>       // Add the title as a field that it can be searched and that =
is
>>> stored.
>>>       doc.add(new Field("title", parser.getTitle(), Field.Store.YES,
>>> Field.Index.TOKENIZED));
>>>     }
>>>
>>>
>>>
>>> -----Original Message-----
>>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>>> Sent: Wednesday, March 30, 2005 7:38 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: HTML pages highlighter
>>>
>>>
>>>
>>> On Mar 30, 2005, at 4:46 PM, Yagnesh Shah wrote:
>>>
>>>> Hi! Eric,
>>>
>>> Erik - with a 'k' - Sorry, I let it slide once though :)
>>>
>>>> 	I try to modified that with this but I get compile error. Do you
>>>> have
>>>> any code snippet of highlighting code to pull the contents from the
>>>> original source?
>>>
>>> I have a whole book full of code examples :)
>>> http://www.lucenebook.com - Grab the source code and look in
>>> src/lia/tools at Highlight*.java
>>>
>>>>  or Do you know how I can do field store?
>>>>
>>>>       doc.add(new Field("contents", parser.getReader(),
>>>> Field.Store.YES, Field.Index.NO));
>>>
>>> You cannot store it with a Reader.  You need to use=20
>>> Field.Text(String,
>>> String), or one of the other variations.
>>>
>>> 	Erik
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 15:56:50 2005
Return-Path: <java-user-return-13988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7965 invoked from network); 7 Apr 2005 15:56:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2005 15:56:50 -0000
Received: (qmail 88127 invoked by uid 500); 7 Apr 2005 15:56:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88098 invoked by uid 500); 7 Apr 2005 15:56:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88084 invoked by uid 99); 7 Apr 2005 15:56:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from artishost.net (HELO artisangel.artishost.net) (69.56.132.178)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 07 Apr 2005 08:56:41 -0700
Received: from [81.25.37.93] (helo=[81.25.37.93])
	by artisangel.artishost.net with esmtpa (Exim 4.43)
	id 1DJZJE-0004NB-WA
	for java-user@lucene.apache.org; Thu, 07 Apr 2005 10:52:46 -0500
Date: Thu, 7 Apr 2005 18:56:30 +0300
From: Yura Smolsky <info@altervision.biz>
X-Mailer: The Bat! (v3.0.1.33) Professional
Reply-To: Yura Smolsky <info@altervision.biz>
Organization: AlterVision Web Development Group
X-Priority: 3 (Normal)
Message-ID: <291786385.20050407185630@altervision.biz>
To: mark harwood <java-user@lucene.apache.org>
Subject: Re[2]: Search performance under high load
In-Reply-To: <20050407083126.53907.qmail@web26005.mail.ukl.yahoo.com>
References: 6667 <20050407083126.53907.qmail@web26005.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Spam-Score: -2.6
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - artisangel.artishost.net
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - altervision.biz
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello, mark.

mh> 2) My app uses long queries, some of which include
mh> very common terms. Using the "MoreLikeThis" query to
mh> drop common terms drastically improved performance. If
mh> your "killer queries" are long ones you could spot
mh> them and service them with a MoreLikeThis or simply
mh> limit the number of allowed terms in the query string.

Can you please explain what is "MoreLikeThis" query in the Lucene?

Yura Smolsky.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 16:05:24 2005
Return-Path: <java-user-return-13989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10925 invoked from network); 7 Apr 2005 16:05:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2005 16:05:24 -0000
Received: (qmail 13841 invoked by uid 500); 7 Apr 2005 16:05:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13821 invoked by uid 500); 7 Apr 2005 16:05:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13807 invoked by uid 99); 7 Apr 2005 16:05:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from server1.hostmon.com (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 07 Apr 2005 09:05:14 -0700
Received: (qmail 11568 invoked by uid 532); 7 Apr 2005 16:03:33 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 3.0.0.  Clear:. 
 Processed in 0.160295 secs); 07 Apr 2005 16:03:33 -0000
Received: from unknown (HELO ?172.31.1.2?) (127.0.0.1)
  by 0 with SMTP; 7 Apr 2005 16:03:33 -0000
Message-ID: <42555A2A.5090501@tropo.com>
Date: Thu, 07 Apr 2005 09:04:58 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041217
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Search performance under high load
References: 6667 <20050407083126.53907.qmail@web26005.mail.ukl.yahoo.com> <291786385.20050407185630@altervision.biz>
In-Reply-To: <291786385.20050407185630@altervision.biz>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yura Smolsky wrote:

> Hello, mark.
> 
> mh> 2) My app uses long queries, some of which include
> mh> very common terms. Using the "MoreLikeThis" query to
> mh> drop common terms drastically improved performance. If
> mh> your "killer queries" are long ones you could spot
> mh> them and service them with a MoreLikeThis or simply
> mh> limit the number of allowed terms in the query string.
> 
> Can you please explain what is "MoreLikeThis" query in the Lucene?

Not sure exactly how Mark is using it, but several of us worked on the 
MoreLikeThis query similarity generator:

http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/similarity/

Various javadoc links etc here:

http://searchmorph.com/weblog/index.php?id=44

> 
> Yura Smolsky.
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 16:16:03 2005
Return-Path: <java-user-return-13990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15262 invoked from network); 7 Apr 2005 16:16:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2005 16:16:03 -0000
Received: (qmail 41506 invoked by uid 500); 7 Apr 2005 16:15:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41455 invoked by uid 500); 7 Apr 2005 16:15:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41405 invoked by uid 99); 7 Apr 2005 16:15:53 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 07 Apr 2005 09:15:51 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 979565B76E; Thu,  7 Apr 2005 09:15:49 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 950A37F459
	for <java-user@lucene.apache.org>; Thu,  7 Apr 2005 09:15:49 -0700 (PDT)
Date: Thu, 7 Apr 2005 09:15:49 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Sorting date stored in milliseconds time
In-Reply-To: <OF525E89FE.027DCD0A-ONC1256FDC.002E8278-C1256FDC.002F1A30@EU.novartis.net>
Message-ID: <Pine.LNX.4.58.0504070910290.32169@hal.rescomp.berkeley.edu>
References: <OF525E89FE.027DCD0A-ONC1256FDC.002E8278-C1256FDC.002F1A30@EU.novartis.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: 2) I doubt that ordering on 2 fields like "time" up to sec (or even to min)
: and "integer" will be quicker when sorting using just one "long"

i wouldn't be so sure untill you benchmark it ...

The biggest issue is the total number of Terms per field that come into
play when you sort ... with millisecond granularity, you have a huge
number of unique terms, if you were to break that up into 2 (or maybe
even 3) fields -- the first being down to minute resolution, then second
being seconds and milliseconds, then assuming you get logs and lots of
queries in a single minute, the number of unique terms for those two
fields decreases drasticly.

you may in fact find it faster to sort multiple fields in that case.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 19:36:24 2005
Return-Path: <java-user-return-13991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88998 invoked from network); 7 Apr 2005 19:36:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2005 19:36:24 -0000
Received: (qmail 72930 invoked by uid 500); 7 Apr 2005 19:36:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72742 invoked by uid 500); 7 Apr 2005 19:36:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72723 invoked by uid 99); 7 Apr 2005 19:36:10 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from main.gmane.org (HELO ciao.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 07 Apr 2005 12:36:09 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DJckC-0005Xu-7i
	for java-user@lucene.apache.org; Thu, 07 Apr 2005 21:32:48 +0200
Received: from dhcp-171-71-47-105.cisco.com ([171.71.47.105])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 07 Apr 2005 21:32:48 +0200
Received: from aurora00 by dhcp-171-71-47-105.cisco.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 07 Apr 2005 21:32:48 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  aurora <aurora00@gmail.com>
Subject:  O'Reilly on Native XML Databases
Date:  Thu, 07 Apr 2005 12:33:46 -0700
Lines: 47
Message-ID:  <opsovnakey6yt6e7@dhcp-171-71-47-105.cisco.com>
Mime-Version:  1.0
Content-Type:  text/plain; format=flowed; delsp=yes; charset=iso-8859-15
Content-Transfer-Encoding:  Quoted-Printable
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: dhcp-171-71-47-105.cisco.com
User-Agent: Opera M2/7.54u1 (Win32, build 3918)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I was reading an interesting article on O'Reilly about Native XML  =

Databases.

   http://www.xml.com/pub/a/2005/03/30/native.html

My initial reaction is someone is trying to take on relational database =
 =

again and this time it is a resurrection of hierarchical database.

But as I read on, I find that the domain of native XML database is mainl=
y  =

in managing and querying documents. Thus it is more akin to a full text =
 =

search engine that a relational database.

It has some examples on structured queries I find very interesting. I'm =
 =

sure we come across situations where we want to search for documents  =

between certain dates that comes from certain website that contains  =

certain word. Sometimes these meta data are derived and does not even  =

appears in the document.

I wonder what's the best use of Lucene in these situations.

1. Lucene alone is good enough, by structuring the meta data and query  =

carefully and by using org.apache.lucene.search.Filter.

2. A combination of relational database and full-text search (as suggest=
ed  =

in the article).

3. Get one of these native XML database. They are really providing value=
  =

over a full-text search engine.

Just like to get a big picture understanding :)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 02:01:06 2005
Return-Path: <java-user-return-13992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77474 invoked from network); 8 Apr 2005 02:01:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2005 02:01:05 -0000
Received: (qmail 36851 invoked by uid 500); 8 Apr 2005 02:00:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36823 invoked by uid 500); 8 Apr 2005 02:00:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36808 invoked by uid 99); 8 Apr 2005 02:00:57 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of markgunnels@gmail.com designates 64.233.170.192 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 07 Apr 2005 19:00:57 -0700
Received: by rproxy.gmail.com with SMTP id b11so580951rne
        for <java-user@lucene.apache.org>; Thu, 07 Apr 2005 19:00:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=cdaEV/WHYkMK+Uv+1/Gm1VoJLObqdaaEbrrGFq/HmUXwORcG43D8FZ0ygJJDvYngqhsJxyMsc8I752QJqbb765Fwbr/fAav/6YMlYfvJ9TqJRC7GVZSbPv6oUcFTszVqVXrbb5xfEdmlZFCsyEzFeE50HZGG8CcaJytpGIN8/dQ=
Received: by 10.38.90.72 with SMTP id n72mr2442085rnb;
        Thu, 07 Apr 2005 19:00:55 -0700 (PDT)
Received: by 10.38.149.70 with HTTP; Thu, 7 Apr 2005 19:00:55 -0700 (PDT)
Message-ID: <a79200205040719006fdd907e@mail.gmail.com>
Date: Thu, 7 Apr 2005 22:00:55 -0400
From: Mark Gunnels <markgunnels@gmail.com>
Reply-To: Mark Gunnels <markgunnels@gmail.com>
To: java-user@lucene.apache.org
Subject: list all terms in a field
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is there a simple way to list all terms in a field?
The only approach that I see is to use the IndexReader.terms()  method
and then iterate over all the results and build my list by manually
filtering. This seems inefficient and there must be a better way that
my newbie eyes don't see.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 05:42:20 2005
Return-Path: <java-user-return-13993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15743 invoked from network); 8 Apr 2005 05:42:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2005 05:42:20 -0000
Received: (qmail 43187 invoked by uid 500); 8 Apr 2005 05:42:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43155 invoked by uid 500); 8 Apr 2005 05:42:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43142 invoked by uid 99); 8 Apr 2005 05:42:10 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web41205.mail.yahoo.com (HELO web41205.mail.yahoo.com) (66.218.93.38)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 07 Apr 2005 22:42:09 -0700
Received: (qmail 72298 invoked by uid 60001); 8 Apr 2005 05:42:07 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=BhRr8uNVSSlEgWAkzMHKeJJIsicKOzNirbXic67VIxcDPQZylF5v221vWJdlYXf+95wUpIFVNN5tBgYDIxJ+vSBgkVKIQgdOgF5PITKiqBqNZHHsOk12VsIfIAbM+er1ujzBTISaHt6auINkt7uXOU729Q+JqA8JbIvzrAo5h2w=  ;
Message-ID: <20050408054207.72296.qmail@web41205.mail.yahoo.com>
Received: from [67.125.85.174] by web41205.mail.yahoo.com via HTTP; Fri, 08 Apr 2005 06:42:06 BST
Date: Fri, 8 Apr 2005 06:42:06 +0100 (BST)
From: pashupathinath <pashupathinathk@yahoo.com>
Subject: Updating Index.
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi,
  i've created an index for database records. the
problem is whenever i'm trying to update the database,
i mean adding or deleting records from the database i
want the index to be updated too.
   right now, i am adding new documents to the
existing index whenever i add new records to the
database. 
   the main problem is how do i traverse through the
existing index so that i wont add duplicate records in
the index. i can use my primary key to check for
duplicate records in the index. 
   how can i traverse through the values stored in the
index and make sure that the new records are not
duplicated ? once i encounter the duplicate primary
key, i should be able to delete all the various fields
values associated with that primary key.
   

thanks,
pashupathinath.k

Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 06:38:27 2005
Return-Path: <java-user-return-13994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26942 invoked from network); 8 Apr 2005 06:38:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2005 06:38:27 -0000
Received: (qmail 11122 invoked by uid 500); 8 Apr 2005 06:38:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10822 invoked by uid 500); 8 Apr 2005 06:38:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10809 invoked by uid 99); 8 Apr 2005 06:38:18 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.204 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 07 Apr 2005 23:38:18 -0700
Received: by rproxy.gmail.com with SMTP id i8so575228rne
        for <java-user@lucene.apache.org>; Thu, 07 Apr 2005 23:38:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=JZdWS9+1P/Flf8Zul6viAURLcveM+V9caOUuFXREvLkpCQrCJF+E312j22uMEjDbwsl2R9FeqYsS2by/Mf5XUWCcGaRgRmoPE0AjlgjNfzicBcvO6zsV0L9rxklxCQ2fUQ9WhPfTVhPfyWzDNzikVheuirKS9fE3xTBNzZp6UJ8=
Received: by 10.38.2.70 with SMTP id 70mr1519422rnb;
        Thu, 07 Apr 2005 23:38:16 -0700 (PDT)
Received: by 10.38.104.11 with HTTP; Thu, 7 Apr 2005 23:38:16 -0700 (PDT)
Message-ID: <88c6a672050407233858fbb17c@mail.gmail.com>
Date: Fri, 8 Apr 2005 01:38:16 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org, Mark Gunnels <markgunnels@gmail.com>
Subject: Re: list all terms in a field
In-Reply-To: <a79200205040719006fdd907e@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <a79200205040719006fdd907e@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mark, Here's a small piece of code that outputs a list of all terms
for a given field, in order of decreasing term frequency:

--- Requires Java 1.5 for PriorityQueue, or you can use Doug Lea's version ---


String field = "myfield".intern();                       // intern
required for != below
IndexReader reader = IndexReader.open(indexPath);
Term startTerm = new Term(field, "");         // set your field here
TermEnum termEnum = reader.terms(startTerm);
PriorityQueue queue = new PriorityQueue();     // using java 1.5's PriorityQueue

while (termEnum.next()) {
   Term term = termEnum.term();
   if (term.field() != field) break;       // lucene interns fields so != works
   int freq = reader.docFreq(term);
   queue.add(new TermFreq(term, freq));
}
reader.close();

while (!queue.isEmpty()) {
   TermFreq termFreq = (TermFreq) queue.remove();
   System.out.println(termFreq.term.text()+": "+termFreq.freq);
}

/* inner class for priority queue */
class TermFreq implements Comparable {
    Term term;
    int freq;
    public TermFreq(Term term, int freq) { this.term = term; this.freq = freq; }
    public int compareTo(Object o) {
        if (this == o) return 0;
        TermFreq other = (TermFreq) o;
        return other.freq - this.freq;
    }
}


On Apr 7, 2005 9:00 PM, Mark Gunnels <markgunnels@gmail.com> wrote:
> Is there a simple way to list all terms in a field?
> The only approach that I see is to use the IndexReader.terms()  method
> and then iterate over all the results and build my list by manually
> filtering. This seems inefficient and there must be a better way that
> my newbie eyes don't see.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 06:42:26 2005
Return-Path: <java-user-return-13995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27812 invoked from network); 8 Apr 2005 06:42:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2005 06:42:26 -0000
Received: (qmail 18852 invoked by uid 500); 8 Apr 2005 06:42:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18652 invoked by uid 500); 8 Apr 2005 06:42:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18635 invoked by uid 99); 8 Apr 2005 06:42:17 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 07 Apr 2005 23:42:15 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6C8F05B7A1; Thu,  7 Apr 2005 23:42:13 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP
	id 69D6F7F459; Thu,  7 Apr 2005 23:42:13 -0700 (PDT)
Date: Thu, 7 Apr 2005 23:42:13 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org, Mark Gunnels <markgunnels@gmail.com>
Subject: Re: list all terms in a field
In-Reply-To: <a79200205040719006fdd907e@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0504072334470.1075@hal.rescomp.berkeley.edu>
References: <a79200205040719006fdd907e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Is there a simple way to list all terms in a field?
: The only approach that I see is to use the IndexReader.terms()  method
: and then iterate over all the results and build my list by manually
: filtering. This seems inefficient and there must be a better way that
: my newbie eyes don't see.

it's the most efficient way i can think of, the trick is in the specifics
of the documentation:

1) TermEnum says...

   Term enumerations are always ordered by Term.compareTo(). Each term in
   the enumeration is greater than all that precede it.

2) Term.compareTo(Term) says...

   The ordering of terms is first by field, then by text.

2) IndexReader.terms(Term) says...

   Returns an enumeration of all terms after a given term.


...which means that if you want all of the Terms for a given field, you
can call IntexReader.terms(new Term("field","")) and get a TermEnum
starting at the very first Term in that field.  you cna then iterate over
the Terms untill you encounter one for a different field (or hit the end
of the TermEnum)

I think that's about as efficient as it gets.

take a look at RangeFilter for an example in use...

http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/java/org/apache/lucene/search/RangeFilter.java

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 06:49:35 2005
Return-Path: <java-user-return-13996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28947 invoked from network); 8 Apr 2005 06:49:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2005 06:49:35 -0000
Received: (qmail 27610 invoked by uid 500); 8 Apr 2005 06:49:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26687 invoked by uid 500); 8 Apr 2005 06:49:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26674 invoked by uid 99); 8 Apr 2005 06:49:31 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr2.xs4all.nl (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 07 Apr 2005 23:49:29 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr2.xs4all.nl (8.12.11/8.12.11) with ESMTP id j386nQPe081306
	for <java-user@lucene.apache.org>; Fri, 8 Apr 2005 08:49:26 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Updating Index.
Date: Fri, 8 Apr 2005 08:49:26 +0200
User-Agent: KMail/1.5.4
References: <20050408054207.72296.qmail@web41205.mail.yahoo.com>
In-Reply-To: <20050408054207.72296.qmail@web41205.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504080849.26149.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 08 April 2005 07:42, pashupathinath wrote:
> hi,
>   i've created an index for database records. the
> problem is whenever i'm trying to update the database,
> i mean adding or deleting records from the database i
> want the index to be updated too.
>    right now, i am adding new documents to the
> existing index whenever i add new records to the
> database. 
>    the main problem is how do i traverse through the
> existing index so that i wont add duplicate records in
> the index. i can use my primary key to check for
> duplicate records in the index. 
>    how can i traverse through the values stored in the
> index and make sure that the new records are not
> duplicated ? once i encounter the duplicate primary
> key, i should be able to delete all the various fields
> values associated with that primary key.

Lucene does not provide this, ie. one can add
any document to the an index as often as one wants.
That means that it is necessary to implement
the identity yourself, eg. by using one field as primary
key, and/or use some hash of the document content
in another field.
Before adding a new document, one can lookup the
old one and check whether it should be deleted or not.

Updating documents is done by deletion and insertion
and this is best done in batches for efficiency.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 06:49:52 2005
Return-Path: <java-user-return-13997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29017 invoked from network); 8 Apr 2005 06:49:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2005 06:49:52 -0000
Received: (qmail 27879 invoked by uid 500); 8 Apr 2005 06:49:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27699 invoked by uid 500); 8 Apr 2005 06:49:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27686 invoked by uid 99); 8 Apr 2005 06:49:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.tanto.de (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 07 Apr 2005 23:49:37 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 8815423CE3
	for <java-user@lucene.apache.org>; Fri,  8 Apr 2005 08:50:02 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 21675-09 for <java-user@lucene.apache.org>;
 Fri,  8 Apr 2005 08:50:02 +0200 (CEST)
Received: from tucholsky.office.tanto.de (tucholsky.office.tanto.de [10.0.0.35])
	by mail.tanto.de (Postfix) with ESMTP id 5601F23CE2
	for <java-user@lucene.apache.org>; Fri,  8 Apr 2005 08:50:02 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@localhost [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j386q74B019990
	for <java-user@lucene.apache.org>; Fri, 8 Apr 2005 08:52:07 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) id j386q7cr019986;
	Fri, 8 Apr 2005 08:52:07 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16982.10775.442961.902864@tanto-xipolis.de>
Date: Fri, 8 Apr 2005 08:52:07 +0200
To: java-user@lucene.apache.org
Subject: Re: Updating Index.
In-Reply-To: <20050408054207.72296.qmail@web41205.mail.yahoo.com>
References: <20050408054207.72296.qmail@web41205.mail.yahoo.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

pashupathinath writes:
>    how can i traverse through the values stored in the
> index and make sure that the new records are not
> duplicated ? once i encounter the duplicate primary
> key, i should be able to delete all the various fields
> values associated with that primary key.
>    
There's no way to delete fields of a document in lucene. You can only 
delete documents. So update means to delete the old document for a 
given record and add the new record.

Deletion can be done based on the pk? Lucene will do the index search 
for you:
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#delete(org.apache.lucene.index.Term)

The hard part is that you cannot have an index reader doing deletions
and an index writer doing document adds at the same time.
So you have to delete first and add then.

You can access all documents having a certain term using 
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#termDocs(org.apache.lucene.index.Term)
if you really want to do that yourself...

HTH
	Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 17:03:22 2005
Return-Path: <java-user-return-13998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45050 invoked from network); 8 Apr 2005 17:03:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2005 17:03:22 -0000
Received: (qmail 66995 invoked by uid 500); 8 Apr 2005 17:03:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66970 invoked by uid 500); 8 Apr 2005 17:03:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66957 invoked by uid 99); 8 Apr 2005 17:03:15 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_HAS_ULINE_NUMS,HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web42108.mail.yahoo.com (HELO web42108.mail.yahoo.com) (66.218.93.201)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 08 Apr 2005 10:03:14 -0700
Received: (qmail 80299 invoked by uid 60001); 8 Apr 2005 17:03:12 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=VuwUNN1L4rX6UdN0sh2Yj6zgZqhyrT/TRosOSE0F9qKg8lcgSb33IQM4UhLHmUJCq6DQV55/YwXYeqgy9mtxcsbkNGKATmDMGL/av0dHp/NWVSOiwE5miafbyCCfMyBHSk1+4nPLWpcDkmpBpoBwSB0BLUkgiJiehXec8RBzcRY=  ;
Message-ID: <20050408170312.80297.qmail@web42108.mail.yahoo.com>
Received: from [68.126.239.73] by web42108.mail.yahoo.com via HTTP; Fri, 08 Apr 2005 10:03:12 PDT
Date: Fri, 8 Apr 2005 10:03:12 -0700 (PDT)
From: bib bib <bib_java2@yahoo.com>
Subject: Implementing(Indexing) as Server
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1158594017-1112979792=:78905"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1158594017-1112979792=:78905
Content-Type: text/plain; charset=us-ascii

Hi All
 
People use my webapp to load documents. I want to use lucene to index and present a search page for them. My files are uploaded to a directory.
 
I want to write a program which runs stand alone and does all the indexing etc. My web app just searches and displays.
 
Is there a sample app for doing this.
 
Thanks
bib

		
---------------------------------
Do you Yahoo!?
 Read only the mail you want - Yahoo! Mail SpamGuard.
--0-1158594017-1112979792=:78905--

From java-user-return-13999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 17:18:00 2005
Return-Path: <java-user-return-13999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47832 invoked from network); 8 Apr 2005 17:18:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2005 17:18:00 -0000
Received: (qmail 83097 invoked by uid 500); 8 Apr 2005 17:17:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83071 invoked by uid 500); 8 Apr 2005 17:17:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83058 invoked by uid 99); 8 Apr 2005 17:17:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from gandalf.xlnet.net.ar (HELO gandalf.xlnet.net.ar) (200.61.10.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 08 Apr 2005 10:17:52 -0700
Received: from exchange.xlnet.net.ar (10.0.0.3) by gandalf.xlnet.net.ar (NPlex 5.1.036)
        id 420E22C20004DFD4 for java-user@lucene.apache.org; Fri, 8 Apr 2005 14:17:14 -0300
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Subject: RV: nested queries
Date: Fri, 8 Apr 2005 14:17:12 -0300
Message-ID: <DDD3F807D283B543B3396F7E00A2C7E179E05F@exchange.xlnet.net.ar>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: nested queries
Thread-Index: AcU7dujsXizsOBTkRk2joYYEZ0ipTQA5mEvg
From: "Romero Mariela" <mariela.romero@xlnet.net.ar>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi all,

We are using Lucene to search business objects with simple queries, but
now we need advanced searchs.=20

For example, we have a user object which has as indexed fields the type
of the object, its id and its role, and an account object which has as
indexed fields the type, its id and the id of the owner user.=20

	User	-> type, userId, role
	Account -> type, accountId , userId

We want to find the accounts of the users with a given role. I tried
with the query (type:account AND owner:(type:user AND role:XXX)) but it
is parsed as (type:account AND +(type:user AND role:XXX)) and hence the
search result isn't the expected one. How can I do to find the accounts
of the users with a given role???
=09

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 17:26:59 2005
Return-Path: <java-user-return-14000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48962 invoked from network); 8 Apr 2005 17:26:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2005 17:26:59 -0000
Received: (qmail 98806 invoked by uid 500); 8 Apr 2005 17:26:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98780 invoked by uid 500); 8 Apr 2005 17:26:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98767 invoked by uid 500); 8 Apr 2005 17:26:53 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 98763 invoked by uid 99); 8 Apr 2005 17:26:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from ylpvm01-ext.prodigy.net (HELO ylpvm01.prodigy.net) (207.115.57.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 08 Apr 2005 10:26:52 -0700
Received: from [192.168.1.10] (adsl-66-143-171-129.dsl.austtx.swbell.net [66.143.171.129])
	by ylpvm01.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j38HQn4H018717
	for <lucene-user@jakarta.apache.org>; Fri, 8 Apr 2005 13:26:49 -0400
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <714bb96f024157c10aec520fc937db18@otherwise.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: Lucene Users List <lucene-user@jakarta.apache.org>
From: Bill Tschumy <bill@otherwise.com>
Subject: Corrupted index
Date: Fri, 8 Apr 2005 12:26:49 -0500
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I had a customer report a corrupted Lucene index.  He had copied the  
index to backup storage, reformatted his drive, and then restored the  
data.  After that Lucene has trouble opening the index.

Here is the backtrace:
java.io.FileNotFoundException: /Users/bill/Desktop/IndexData/_v.fnm (No  
such file or directory)
         at java.io.RandomAccessFile.open(Native Method)
         at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
         at  
org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java 
:376)
         at  
org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
         at  
org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
         at org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:53)
         at  
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java: 
109)
         at  
org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:94)
         at  
org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:122)
         at org.apache.lucene.store.Lock$With.run(Lock.java:109)
         at  
org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
         at  
org.apache.lucene.index.IndexReader.open(IndexReader.java:106)
         at  
org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:43)
         at  
com.otherwise.parsnips.MySearcher.getSearcher(MySearcher.java:94)
         at  
com.otherwise.parsnips.IndexUpdater.checkIndexVersion(IndexUpdater.java: 
35)
         at com.otherwise.parsnips.Parsnips.initIndex(Parsnips.java:1101)
         at  
com.otherwise.parsnips.PreferencesDialog.checkIndexLoacation(Preferences 
Dialog.java:212)
         at  
com.otherwise.parsnips.PreferencesDialog.actionPerformed(PreferencesDial 
og.java:95)
         at  
javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java: 
1819)
         at  
javax.swing.AbstractButton$ForwardActionEvents.actionPerformed(AbstractB 
utton.java:1872)
         at  
javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.ja 
va:420)
         at  
javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:258)
         at javax.swing.AbstractButton.doClick(AbstractButton.java:321)
         at  
javax.swing.plaf.basic.BasicRootPaneUI$DefaultAction.actionPerformed(Bas 
icRootPaneUI.java

Here is what is in the index directory:

[pm1:~/Desktop/IndexData] ls -la
total 336
drwxr-xr-x   6 bill  admin    204  8 Apr 08:04 ./
drwxr-xr-x  25 bill  admin    850  8 Apr 10:10 ../
-rwxr-xr-x   1 bill  admin  78695  7 Apr 10:02 _6r.cfs*
-rwxr-xr-x   1 bill  admin  78371  7 Apr 10:03 _6t.cfs*
-rwxr-xr-x   1 bill  admin     20  7 Apr 10:03 deletable*
-rwxr-xr-x   1 bill  admin     83  7 Apr 10:03 segments*

The only thought I had was that he copied the data while the app was  
still running and perhaps it was in an inconsistent state.  Is this  
possible?  Any other way to track down what went wrong?

-- 
Bill Tschumy
Otherwise -- Austin, TX
http://www.otherwise.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 18:21:22 2005
Return-Path: <java-user-return-14001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61821 invoked from network); 8 Apr 2005 18:21:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2005 18:21:22 -0000
Received: (qmail 80227 invoked by uid 500); 8 Apr 2005 18:21:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80207 invoked by uid 500); 8 Apr 2005 18:21:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80194 invoked by uid 99); 8 Apr 2005 18:21:16 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=SPF_HELO_PASS,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (hermes.apache.org: transitioning domain of lucenelist@danielnaber.de does not designate 80.67.18.13 as permitted sender)
Received: from smtprelay01.ispgateway.de (HELO smtprelay01.ispgateway.de) (80.67.18.13)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 08 Apr 2005 11:21:15 -0700
Received: (qmail 30649 invoked from network); 8 Apr 2005 18:21:11 -0000
Received: from unknown (HELO p54963DAF.dip.t-dialin.net) ([pbs]937788@[84.150.61.175])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 8 Apr 2005 18:21:11 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Corrupted index
User-Agent: KMail/1.8
References: <714bb96f024157c10aec520fc937db18@otherwise.com>
In-Reply-To: <714bb96f024157c10aec520fc937db18@otherwise.com>
MIME-Version: 1.0
Content-Disposition: inline
Date: Fri, 8 Apr 2005 20:22:31 +0200
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Message-Id: <200504082022.31452@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 08 April 2005 19:26, Bill Tschumy wrote:

> The only thought I had was that he copied the data while the app was =C2=
=A0
> still running and perhaps it was in an inconsistent state.

Yes, the *.cfs shows that this is a compound index which has *.fnm files=20
only when it's being modified. You're not asking how to fix the index, but=
=20
that might be possible by modifying the segments file.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 18:37:48 2005
Return-Path: <java-user-return-14002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65348 invoked from network); 8 Apr 2005 18:37:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2005 18:37:48 -0000
Received: (qmail 13205 invoked by uid 500); 8 Apr 2005 18:37:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12946 invoked by uid 500); 8 Apr 2005 18:37:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 79147 invoked by uid 99); 8 Apr 2005 18:19:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
From: Daniel Naber <daniel.naber@t-online.de>
To: java-user@lucene.apache.org
Subject: Re: Corrupted index
Date: Fri, 8 Apr 2005 20:20:53 +0200
User-Agent: KMail/1.8
References: <714bb96f024157c10aec520fc937db18@otherwise.com>
In-Reply-To: <714bb96f024157c10aec520fc937db18@otherwise.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200504082020.53306@danielnaber.de>
X-ID: rSoZzBZSweyOel29MF+mYDWRRo2ULJ17UQPN1Qjw--qB+SywmNDyEB@t-dialin.net
X-TOI-MSGID: b126477f-4a67-450f-b882-a1f264caff80
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 08 April 2005 19:26, Bill Tschumy wrote:

> The only thought I had was that he copied the data while the app was =C2=
=A0
> still running and perhaps it was in an inconsistent state.

Yes, the *.cfs shows that this is a compound index which has *.fnm files=20
only when it's being modified. You're not asking how to fix the index, but=
=20
that might be possible by modifying the segments file.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 18:44:41 2005
Return-Path: <java-user-return-14003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67259 invoked from network); 8 Apr 2005 18:44:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2005 18:44:40 -0000
Received: (qmail 30408 invoked by uid 500); 8 Apr 2005 18:44:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30172 invoked by uid 500); 8 Apr 2005 18:44:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30159 invoked by uid 99); 8 Apr 2005 18:44:35 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from relay3.san2.attens.com (HELO relay3.san1.attens.com) (192.215.81.76)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 08 Apr 2005 11:44:34 -0700
Received: from ehatchersolutions.com (256host85.starwoodbroadband.com [12.105.73.85])
	by relay3.san1.attens.com (8.11.6/8.9.3) with ESMTP id j38IiW911811
	for <java-user@lucene.apache.org>; Fri, 8 Apr 2005 18:44:32 GMT
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by ehatchersolutions.com (Postfix) with ESMTP id BF886DB0D5
	for <java-user@lucene.apache.org>; Fri,  8 Apr 2005 14:44:37 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <20050408170312.80297.qmail@web42108.mail.yahoo.com>
References: <20050408170312.80297.qmail@web42108.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <e8f79ceac4a4d52c206b953220506931@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Implementing(Indexing) as Server
Date: Fri, 8 Apr 2005 14:44:36 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 8, 2005, at 1:03 PM, bib bib wrote:

> Hi All
>
> People use my webapp to load documents. I want to use lucene to index 
> and present a search page for them. My files are uploaded to a 
> directory.
>
> I want to write a program which runs stand alone and does all the 
> indexing etc. My web app just searches and displays.
>
> Is there a sample app for doing this.

The demo web application that comes with Lucene is exactly this, 
however its not quite as clean as we'd like.  The standalone 
application part is covered by that demo code, and there is also a 
cleaner codebase to start with in the Lucene in Action source code - 
http://www.lucenebook.com - (see the lia.meetlucene package code for 
Indexer and Searcher).

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 21:51:26 2005
Return-Path: <java-user-return-14004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28620 invoked from network); 8 Apr 2005 21:51:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2005 21:51:26 -0000
Received: (qmail 19236 invoked by uid 500); 8 Apr 2005 21:51:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18345 invoked by uid 500); 8 Apr 2005 21:51:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18329 invoked by uid 99); 8 Apr 2005 21:51:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from ylpvm12-ext.prodigy.net (HELO ylpvm12.prodigy.net) (207.115.57.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 08 Apr 2005 14:51:20 -0700
Received: from pimout5-ext.prodigy.net (pimout5-ext.prodigy.net [207.115.63.73])
	by ylpvm12.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j38LpEck027752
	for <java-user@lucene.apache.org>; Fri, 8 Apr 2005 17:51:17 -0400
X-ORBL: [66.143.171.129]
Received: from [192.168.1.10] (adsl-66-143-171-129.dsl.austtx.swbell.net [66.143.171.129])
	by pimout5-ext.prodigy.net (8.12.10 milter /8.12.10) with ESMTP id j38Lp60D096654
	for <java-user@lucene.apache.org>; Fri, 8 Apr 2005 17:51:12 -0400
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <200504082022.31452@danielnaber.de>
References: <714bb96f024157c10aec520fc937db18@otherwise.com> <200504082022.31452@danielnaber.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <a6559301729491232d10196e002e2ef7@otherwise.com>
Content-Transfer-Encoding: quoted-printable
From: Bill Tschumy <bill@otherwise.com>
Subject: Re: Corrupted index
Date: Fri, 8 Apr 2005 16:51:07 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

So, did this happen because he copied the data while in an inconsistent=20=

state?  I'm a bit surprised that an inconsistent index is ever left on=20=

disk (except for temporarily while something is being written).  Would=20=

this happen if there was a Writer that was not closed?


On Apr 8, 2005, at 1:22 PM, Daniel Naber wrote:

> On Friday 08 April 2005 19:26, Bill Tschumy wrote:
>
>> The only thought I had was that he copied the data while the app was =
=A0
>> still running and perhaps it was in an inconsistent state.
>
> Yes, the *.cfs shows that this is a compound index which has *.fnm=20
> files
> only when it's being modified. You're not asking how to fix the index,=20=

> but
> that might be possible by modifying the segments file.
>
> Regards
>  Daniel
>
> --=20
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
--=20
Bill Tschumy
Otherwise -- Austin, TX
http://www.otherwise.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 21:58:36 2005
Return-Path: <java-user-return-14005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29656 invoked from network); 8 Apr 2005 21:58:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2005 21:58:36 -0000
Received: (qmail 27950 invoked by uid 500); 8 Apr 2005 21:58:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27671 invoked by uid 500); 8 Apr 2005 21:58:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27658 invoked by uid 99); 8 Apr 2005 21:58:30 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=SPF_HELO_PASS,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (hermes.apache.org: transitioning domain of lucenelist@danielnaber.de does not designate 80.67.18.16 as permitted sender)
Received: from smtprelay04.ispgateway.de (HELO smtprelay04.ispgateway.de) (80.67.18.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 08 Apr 2005 14:58:29 -0700
Received: (qmail 19830 invoked from network); 8 Apr 2005 21:58:26 -0000
Received: from unknown (HELO p549657B9.dip.t-dialin.net) ([pbs]937788@[84.150.87.185])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 8 Apr 2005 21:58:26 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Corrupted index
Date: Fri, 8 Apr 2005 23:59:45 +0200
User-Agent: KMail/1.8
References: <714bb96f024157c10aec520fc937db18@otherwise.com> <200504082022.31452@danielnaber.de> <a6559301729491232d10196e002e2ef7@otherwise.com>
In-Reply-To: <a6559301729491232d10196e002e2ef7@otherwise.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504082359.45831@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 08 April 2005 23:51, Bill Tschumy wrote:

> Would
> this happen if there was a Writer that was not closed?

Either the copy was done while the index was being updated, or the previous 
index update didn't finish (e.g. because it crashed before the index was 
closed).

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 22:44:38 2005
Return-Path: <java-user-return-14006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40667 invoked from network); 8 Apr 2005 22:44:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2005 22:44:38 -0000
Received: (qmail 66876 invoked by uid 500); 8 Apr 2005 22:44:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66849 invoked by uid 500); 8 Apr 2005 22:44:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66836 invoked by uid 99); 8 Apr 2005 22:44:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from cheetah.lao.on.ca (HELO cheetah.lao.on.ca) (67.70.194.157)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 08 Apr 2005 15:44:30 -0700
Received: by CHEETAH with Internet Mail Service (5.5.2657.72)
	id <2QK4M9R6>; Fri, 8 Apr 2005 18:44:28 -0400
Message-ID: <55675C2D7AA8D411A94500508B66062D0F591B56@CHEETAH>
From: "Bruce Best (CRO)" <bestb@lao.on.ca>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Field searching for nothing
Date: Fri, 8 Apr 2005 18:44:28 -0400 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is there any syntax to find all the documents where a particular
Lucene-indexed field is empty?

For instance, say there is a field called "author". I can do a field search
for 
	author:cutting
to find all documents with "cutting" in the author field; I could also
search for 
	author:"*"
which would return all documents, whether there was something in the author
field or not.  

What if I wanted to find all those documents that had nothing at all in the
"author" field? I tried a few combinations of wildcards and other various
Lucene symbols, but they generally resulted in errors.

Is it possible with Lucene to specify "Return all documents where fieldx: is
empty"? 

Thanks,

B.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 09 13:12:31 2005
Return-Path: <java-user-return-14007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82063 invoked from network); 9 Apr 2005 13:12:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Apr 2005 13:12:31 -0000
Received: (qmail 87779 invoked by uid 500); 9 Apr 2005 13:12:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86890 invoked by uid 500); 9 Apr 2005 13:12:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86876 invoked by uid 99); 9 Apr 2005 13:12:27 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_20_30,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ivan.guzvinec@gmail.com designates 64.233.170.197 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.197)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 09 Apr 2005 06:12:25 -0700
Received: by rproxy.gmail.com with SMTP id i8so820450rne
        for <java-user@lucene.apache.org>; Sat, 09 Apr 2005 06:12:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=OeqxRfvsnbegoW6gR0CTvp+Idspzc/C/YOqmolr0xMBKmaysP6lSy+zVafnX+QPzG16w72fBBwvcQ7iNYsceTJ6/UY9oqQ6g17+wujRHXqYUfoF8z+Dj2hVYT0+lU1BaLoPi7mr7A62x8VNbSYVVfJG2TGF32HWH+ZpHvdoVZTw=
Received: by 10.38.82.21 with SMTP id f21mr2576782rnb;
        Sat, 09 Apr 2005 06:12:24 -0700 (PDT)
Received: by 10.39.3.16 with HTTP; Sat, 9 Apr 2005 06:12:24 -0700 (PDT)
Message-ID: <816463205040906124b3298bc@mail.gmail.com>
Date: Sat, 9 Apr 2005 15:12:24 +0200
From: =?ISO-8859-2?Q?Ivan_Gu=BEvinec?= <ivan.guzvinec@gmail.com>
Reply-To: =?ISO-8859-2?Q?Ivan_Gu=BEvinec?= <ivan.guzvinec@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field searching for nothing
In-Reply-To: <55675C2D7AA8D411A94500508B66062D0F591B56@CHEETAH>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_261_22294484.1113052344109"
References: <55675C2D7AA8D411A94500508B66062D0F591B56@CHEETAH>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_261_22294484.1113052344109
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I believe there isn't. I don't think any of the existing QueryParsers=20
implements "search empty field" expression.

The way you might solve this requirement is to use a special "empty term"=
=20
for such fields. For instance, I use single underscore "_" as a value for=
=20
all empty fields in the document. I also use Keyword field to store this=20
value verbatim (avoid Analyser that might not want to index a single=20
underscore).

Searching for "empty term" can then be performed programmaticaly with a=20
TermQuery:
indexSearcher.Search(new TermQuery(new Term("author", "_")));

General guide for the "empty term" value would be to choose a term that doe=
s=20
not occur in any text you put into your index.


On Apr 9, 2005 12:44 AM, Bruce Best (CRO) <bestb@lao.on.ca> wrote:
> Is there any syntax to find all the documents where a particular
> Lucene-indexed field is empty?
>=20
> For instance, say there is a field called "author". I can do a field=20
search
> for
> author:cutting
> to find all documents with "cutting" in the author field; I could also
> search for
> author:"*"
> which would return all documents, whether there was something in the=20
author
> field or not.
>=20
> What if I wanted to find all those documents that had nothing at all in=
=20
the
> "author" field? I tried a few combinations of wildcards and other various
> Lucene symbols, but they generally resulted in errors.
>=20
> Is it possible with Lucene to specify "Return all documents where fieldx:=
=20
is
> empty"?
>=20
> Thanks,
>=20
> B.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

------=_Part_261_22294484.1113052344109--

From java-user-return-14008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 09 14:43:15 2005
Return-Path: <java-user-return-14008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9301 invoked from network); 9 Apr 2005 14:43:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Apr 2005 14:43:15 -0000
Received: (qmail 58058 invoked by uid 500); 9 Apr 2005 14:43:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58032 invoked by uid 500); 9 Apr 2005 14:43:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58018 invoked by uid 99); 9 Apr 2005 14:43:12 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME,TO_ADDRESS_EQ_REAL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from shim2.irt.drexel.edu (HELO shim2.irt.drexel.edu) (144.118.29.72)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 09 Apr 2005 07:43:11 -0700
Received: from conversion-daemon.shim2.irt.drexel.edu by shim2.irt.drexel.edu
 (iPlanet Messaging Server 5.2 HotFix 1.17 (built Jun 23 2003))
 id <0IEO00B01OJL9X@shim2.irt.drexel.edu> for java-user@lucene.apache.org; Sat,
 09 Apr 2005 10:43:07 -0400 (EDT)
Received: from drexel.edu ([192.168.5.136])
 by shim2.irt.drexel.edu (iPlanet Messaging Server 5.2 HotFix 1.17 (built Jun
 23 2003)) with ESMTP id <0IEO00DFGOVV4E@shim2.irt.drexel.edu> for
 java-user@lucene.apache.org; Sat, 09 Apr 2005 10:43:07 -0400 (EDT)
Received: from [192.168.5.137] by mail1.prvt.drexel.edu (mshttpd); Sat,
 09 Apr 2005 10:43:07 -0400
Date: Sat, 09 Apr 2005 10:43:07 -0400
From: xx28@drexel.edu
Subject: NoSuchMethodError
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Message-id: <14a0f3e149f490.149f49014a0f3e@drexel.edu>
MIME-version: 1.0
X-Mailer: iPlanet Messenger Express 5.2 HotFix 1.17 (built Jun 23 2003)
Content-type: text/plain; charset=us-ascii
Content-language: en
Content-transfer-encoding: 7BIT
Content-disposition: inline
X-Accept-Language: en
Priority: normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello -

I tried to modify Document(File) method as Document1(String) of HTMLDocument.java. The parameter is String, not File. However I got: 

Exception in thread "main" java.lang.NoSuchMethodError: org.apache.lucene.demo.HTMLDocument.Document1(Ljava/lang/String;)Lorg/apache/lucene/document/Document;
        at org.apache.lucene.demo.IndexRemoteHTML.indexDocs1(IndexRemoteHTML.java:173)
        at org.apache.lucene.demo.IndexRemoteHTML.indexDocs(IndexRemoteHTML.java:120)
        at org.apache.lucene.demo.IndexRemoteHTML.main(IndexRemoteHTML.java:74)

What could be wrong?

Thanks for help in advance...

George


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 10 04:16:31 2005
Return-Path: <java-user-return-14009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42667 invoked from network); 10 Apr 2005 04:16:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Apr 2005 04:16:31 -0000
Received: (qmail 87957 invoked by uid 500); 10 Apr 2005 04:16:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87934 invoked by uid 500); 10 Apr 2005 04:16:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 3473 invoked by uid 99); 9 Apr 2005 13:30:32 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of petedaly@gmail.com designates 64.233.184.207 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=ZntOg1KTAjN36Z4wL+kHVaQkfM+YM8hVg1k76D9knN/lwvTZ2VJvmw7Wl91njouPIqghLUu/CXMugQmI7ySO1KrB9jkmByA1fxGO69gLPs6F2F9naP7pzzx3azmbFWDlNhvbzhbG6/GEmmM9K5p29i6ZR/vi0M7AY5RYh9yGT48=
Message-ID: <6f0a20e105040906301da6e744@mail.gmail.com>
Date: Sat, 9 Apr 2005 09:30:30 -0400
From: "Peter A. Daly" <petedaly@gmail.com>
Reply-To: "Peter A. Daly" <petedaly@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene on Palm OS?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does anyone know if it possible/feasible to run lucene on PalmOS? 
I've never done any Palm development before, but have an application
in which Lucene is a critical component that I'd like to make work on
my Tungsten T3 as well as other palms if possible.

I'm trying to feel out whether this is a project worth attempting.

Thanks,

-Pete

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 01:21:34 2005
Return-Path: <java-user-return-14010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67978 invoked from network); 11 Apr 2005 01:21:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 01:21:33 -0000
Received: (qmail 87236 invoked by uid 500); 11 Apr 2005 01:21:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87203 invoked by uid 500); 11 Apr 2005 01:21:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87182 invoked by uid 500); 11 Apr 2005 01:21:25 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 87179 invoked by uid 99); 11 Apr 2005 01:21:25 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of eric138@gmail.com designates 64.233.170.207 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 10 Apr 2005 18:21:25 -0700
Received: by rproxy.gmail.com with SMTP id a41so1127132rng
        for <lucene-user@jakarta.apache.org>; Sun, 10 Apr 2005 18:21:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=e1pIfpdf6+fsdhFwLYowa5k3sk9fMXtE/ykw7+svxchL8D7rv3s3lh3Tw8fy9I0CGv1m4bjcr9NQl1/7Okoz6HpREFE3BX72z16FdokoZYYmpx2b0Nhp093U3mFE2A/W8kLLSj7EubNbtNhiXbjghFayGM2EkP9rsZSpzdVreDw=
Received: by 10.38.13.58 with SMTP id 58mr1695387rnm;
        Sun, 10 Apr 2005 18:21:23 -0700 (PDT)
Received: by 10.38.12.59 with HTTP; Sun, 10 Apr 2005 18:21:23 -0700 (PDT)
Message-ID: <f472e9a0050410182173e5c40@mail.gmail.com>
Date: Mon, 11 Apr 2005 09:21:23 +0800
From: Eric Chow <eric138@gmail.com>
Reply-To: Eric Chow <eric138@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Multi-analyzer ?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

If I don't know the language of the input terms, how can I use
different analyzer to search it ?

For example, the input box accepts UTF-8 search text, they can be
anything, such as Chinese, Japanese, English, Russian, Deuch, etc. How
can search any of them or all of them with Lucene?

Any example, please?


Best Regards,
Eric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 06:22:20 2005
Return-Path: <java-user-return-14011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14849 invoked from network); 11 Apr 2005 06:22:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 06:22:20 -0000
Received: (qmail 43784 invoked by uid 500); 11 Apr 2005 06:22:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43451 invoked by uid 500); 11 Apr 2005 06:22:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43437 invoked by uid 99); 11 Apr 2005 06:22:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from lilzmailso01.liwest.at (HELO lilzmailso01.liwest.at) (212.33.55.23)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 10 Apr 2005 23:22:07 -0700
Received: from cm66-207.liwest.at ([212.241.66.207] helo=[192.168.0.4])
	by lilzmailso01.liwest.at with esmtp (Exim 4.24)
	id 1DKsJ9-0000gq-R4
	for java-user@lucene.apache.org; Mon, 11 Apr 2005 08:22:03 +0200
Message-ID: <425A178E.60005@eduhi.at>
Date: Mon, 11 Apr 2005 08:22:06 +0200
From: Gusenbauer Stefan <gusenbauer@eduhi.at>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: NoSuchMethodError
References: <14a0f3e149f490.149f49014a0f3e@drexel.edu>
In-Reply-To: <14a0f3e149f490.149f49014a0f3e@drexel.edu>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

xx28@drexel.edu wrote:

>Hello -
>
>I tried to modify Document(File) method as Document1(String) of HTMLDocument.java. The parameter is String, not File. However I got: 
>
>Exception in thread "main" java.lang.NoSuchMethodError: org.apache.lucene.demo.HTMLDocument.Document1(Ljava/lang/String;)Lorg/apache/lucene/document/Document;
>        at org.apache.lucene.demo.IndexRemoteHTML.indexDocs1(IndexRemoteHTML.java:173)
>        at org.apache.lucene.demo.IndexRemoteHTML.indexDocs(IndexRemoteHTML.java:120)
>        at org.apache.lucene.demo.IndexRemoteHTML.main(IndexRemoteHTML.java:74)
>
>What could be wrong?
>
>Thanks for help in advance...
>
>George
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>  
>
try to check the modifiers of the main method and of the Document1
method they should be static I think. By the way a better approach would
be you rename the Document1 Method to Document (overloading) and call in
the new Document(String file) method the original Document Method.
Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 08:49:05 2005
Return-Path: <java-user-return-14012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75716 invoked from network); 11 Apr 2005 08:49:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 08:49:05 -0000
Received: (qmail 57130 invoked by uid 500); 11 Apr 2005 08:48:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57099 invoked by uid 500); 11 Apr 2005 08:48:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57085 invoked by uid 99); 11 Apr 2005 08:48:55 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.198 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 01:48:55 -0700
Received: by rproxy.gmail.com with SMTP id i8so1050926rne
        for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 01:48:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=CE/hBurR/dK23H0QPY1E1HuBpFuOh9oy6fKrdjAdNuXN6a19yqlTnqJUt2ygTP0mtXziJyasCblLElm7f4vqg0Jc2PDlRBjLEnQvYkd8ZtLR3cjAMFCBejy8cXuSoO7D6bH5AZxKjkv6mX8q4OR6Hwly0ztmRrwJeKYAC2NbL7w=
Received: by 10.38.66.24 with SMTP id o24mr3722574rna;
        Mon, 11 Apr 2005 01:48:53 -0700 (PDT)
Received: by 10.38.104.11 with HTTP; Mon, 11 Apr 2005 01:48:53 -0700 (PDT)
Message-ID: <88c6a67205041101487a627f1c@mail.gmail.com>
Date: Mon, 11 Apr 2005 03:48:53 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: RangeQuery doesn't override equals() or hashCode() - intentional?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I was attempting to cache QueryFilters in a Map using the Query as the
key (a BooleanQuery instance containing two RangeQueries), and I
discovered that my BooleanQueries' equals() methods would always
return false, even when the queries were equivalent.  The culprit was
RangeQuery - it doesn't implement equals() or hashCode().  Is this
intentional, and if not, can I propose a patch to implement these
methods?  thanks,

Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 09:50:55 2005
Return-Path: <java-user-return-14013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98495 invoked from network); 11 Apr 2005 09:50:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 09:50:54 -0000
Received: (qmail 15003 invoked by uid 500); 11 Apr 2005 09:50:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14730 invoked by uid 500); 11 Apr 2005 09:50:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14714 invoked by uid 99); 11 Apr 2005 09:50:44 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of charley.yao@gmail.com designates 64.233.162.204 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 02:50:44 -0700
Received: by zproxy.gmail.com with SMTP id 18so558280nzp
        for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 02:50:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=uPkL2mwV48rdcJwTkrBSuK9KvtDP/fYNPj7buHbp6BuoFpQKxMW/R1K8ghu/tjaPbTy0o0LmLIqke4n2BsO+hLmSaHNw+mvWv9pjUBrO/VyhIjjjJ2z/JaMeNAKRTxrtIvVHpJ13WS87KhqzfsvDAsit35qu389wmv5tE5UL8SU=
Received: by 10.36.104.12 with SMTP id b12mr180999nzc;
        Mon, 11 Apr 2005 02:50:41 -0700 (PDT)
Received: by 10.36.34.14 with HTTP; Mon, 11 Apr 2005 02:50:41 -0700 (PDT)
Message-ID: <72cf53b405041102507b598167@mail.gmail.com>
Date: Mon, 11 Apr 2005 17:50:41 +0800
From: cerberus yao <charley.yao@gmail.com>
Reply-To: cerberus yao <charley.yao@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Search Result with Line Numbers?
In-Reply-To: <72cf53b405041102424ea6171e@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <72cf53b405041102424ea6171e@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, Lucene users:

  Does anyone knows how to add the Lucene search results with Line
number in original source content?
  for example:
     I have a file "Test.java" which is indexed by lucene.
     When I search inside the index, how to enhance the search result
with line number in Test.java?

  ps. the lucene sandbox has a highlighter for search result. where
can I find a line number decorator for search results?

 Thx.
 Best regards,

--
Charley, Chang-Li Yao

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 09:55:15 2005
Return-Path: <java-user-return-14014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99416 invoked from network); 11 Apr 2005 09:55:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 09:55:15 -0000
Received: (qmail 20555 invoked by uid 500); 11 Apr 2005 09:55:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20263 invoked by uid 500); 11 Apr 2005 09:55:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20249 invoked by uid 500); 11 Apr 2005 09:55:06 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 20245 invoked by uid 99); 11 Apr 2005 09:55:05 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of eric138@gmail.com designates 64.233.170.194 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 02:55:05 -0700
Received: by rproxy.gmail.com with SMTP id a41so1199245rng
        for <lucene-user@jakarta.apache.org>; Mon, 11 Apr 2005 02:55:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=MX/I1+nOOHpq6Ys8I77hpK02RK/pkYhZ3hMyQg7LGtkbX3Mm2JniMlTgkGmp8Cro89hlikDTH0y3SVPmrO91Tts6chlm1w5tbusfu9FhiX3y/hsA3R8w0RKoJCBojcmaGo7QyoTbfQ/J0LKWj6bhXFR4eL43h4lW6CQSl8ZPvOU=
Received: by 10.38.68.47 with SMTP id q47mr68898rna;
        Mon, 11 Apr 2005 02:54:58 -0700 (PDT)
Received: by 10.38.12.59 with HTTP; Mon, 11 Apr 2005 02:54:53 -0700 (PDT)
Message-ID: <f472e9a005041102542bd0dc90@mail.gmail.com>
Date: Mon, 11 Apr 2005 17:54:53 +0800
From: Eric Chow <eric138@gmail.com>
Reply-To: Eric Chow <eric138@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Urgent, please help Index/Search in UTF-8 ???
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,


I am a beginner in using Lucene.


My files are contains different language (English, Chinese,
Portuguese, Japanese and some Asian languages, non-latin languages).
They always contain in one file.
Therefore, I have to use UTF-8 to save the contents.

I am now developing a web-based search engine. I use Lucene to create
index for those files and search it in web. The charset of the web
page is UTF-8, but it cannot search anything.

I try to use some Analyser (CJKAnalyser, ChineseAnalyser,
StandardAnalyser, SimpleAnalyser), still failed.

Finally, I tested to use original charset, for example, the Chinese
contents I used BIG5, and I can search it very well. For those
English, of couse, no problem.

But I can't use UTF-8 as the charset for documents. Any suggest and examples ?


Best regards,
Eric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 10:02:08 2005
Return-Path: <java-user-return-14015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2081 invoked from network); 11 Apr 2005 10:02:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 10:02:08 -0000
Received: (qmail 29163 invoked by uid 500); 11 Apr 2005 10:01:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29135 invoked by uid 500); 11 Apr 2005 10:01:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29118 invoked by uid 99); 11 Apr 2005 10:01:55 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of eric138@gmail.com designates 64.233.170.198 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 03:01:53 -0700
Received: by rproxy.gmail.com with SMTP id f1so1916292rne
        for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 03:01:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=TCMFI8cBjIwfUjc3nh0UWziILD4y/ErQRBZMKvtYwMchgJCFJ4DBynp5HBogP0Pl8jUSuCKHXvXPQt+bUtQsgpdsa9o4RXAEk8ciM0J2gz1D18HvdeWAhOrpcxsJej65uhMwGB6EtXFd9gIPYNOMAZle4iHRKbeKeSGW1bir7xQ=
Received: by 10.38.153.43 with SMTP id a43mr3653690rne;
        Mon, 11 Apr 2005 03:01:51 -0700 (PDT)
Received: by 10.38.12.59 with HTTP; Mon, 11 Apr 2005 03:01:50 -0700 (PDT)
Message-ID: <f472e9a0050411030169072793@mail.gmail.com>
Date: Mon, 11 Apr 2005 18:01:50 +0800
From: Eric Chow <eric138@gmail.com>
Reply-To: Eric Chow <eric138@gmail.com>
To: java-user@lucene.apache.org
Subject: Urgent, please help, index/search in UTF-8 ???
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I am a beginner in using Lucene.

My files are contains different language (English, Chinese,
Portuguese, Japanese and some Asian languages, non-latin languages).
They always contain in one file.
Therefore, I have to use UTF-8 to save the contents.

I am now developing a web-based search engine. I use Lucene to create
index for those files and search it in web. The charset of the web
page is UTF-8, but it cannot search anything.

I try to use some Analyser (CJKAnalyser, ChineseAnalyser,
StandardAnalyser, SimpleAnalyser), still failed.

Finally, I tested to use original charset, for example, the Chinese
contents I used BIG5, and I can search it very well. For those
English, of couse, no problem.

But I can't use UTF-8 as the charset for documents. Any suggest and examples ?

Best regards,
Eric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 10:09:54 2005
Return-Path: <java-user-return-14016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4729 invoked from network); 11 Apr 2005 10:09:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 10:09:53 -0000
Received: (qmail 44583 invoked by uid 500); 11 Apr 2005 10:09:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44533 invoked by uid 500); 11 Apr 2005 10:09:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44483 invoked by uid 99); 11 Apr 2005 10:09:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.gan.no (HELO mail.gan.no) (195.159.151.132)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 03:09:36 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.gan.no (Postfix) with ESMTP id B6599F000C
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 12:09:32 +0200 (CEST)
Received: from [172.16.16.192] (MetaMac.mediehuset.gan.no [172.16.16.192])
	by mail.gan.no (Postfix) with ESMTP id B4AC0F000B
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 12:09:30 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <f472e9a005041102542bd0dc90@mail.gmail.com>
References: <f472e9a005041102542bd0dc90@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <aae14651c7ae9987f0d83b88266857b9@gan.no>
Content-Transfer-Encoding: quoted-printable
From: =?ISO-8859-1?Q?Karl_=D8ie?= <karl@gan.no>
Subject: Re: Urgent, please help Index/Search in UTF-8 ???
Date: Mon, 11 Apr 2005 12:09:30 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at gan.no
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you use a servlet and a HTML Form to feed queries to the QueryParser=20=

take good care of all configurations around the servlet container. If=20
you, like me, use tomcat you might have to recode the query into=20
internal java form (utf-8) before you pass it to lucene.


read this:

http://www.crazysquirrel.com/compgen/form-encoding.php


then in your receiving servlet:

String query_string =3D request.getParameter("query");

String query_string =3D new=20
String(query_string.getBytes(),request.getCharacterEncoding());

then pass query_string to lucene. This ensures that the string fetched=20=

by getParameter() is encoded by the right encoding.

Hope this helps!

Mvh Karl =D8ie

On 11. apr. 2005, at 11.54, Eric Chow wrote:

> Hello,
>
>
> I am a beginner in using Lucene.
>
>
> My files are contains different language (English, Chinese,
> Portuguese, Japanese and some Asian languages, non-latin languages).
> They always contain in one file.
> Therefore, I have to use UTF-8 to save the contents.
>
> I am now developing a web-based search engine. I use Lucene to create
> index for those files and search it in web. The charset of the web
> page is UTF-8, but it cannot search anything.
>
> I try to use some Analyser (CJKAnalyser, ChineseAnalyser,
> StandardAnalyser, SimpleAnalyser), still failed.
>
> Finally, I tested to use original charset, for example, the Chinese
> contents I used BIG5, and I can search it very well. For those
> English, of couse, no problem.
>
> But I can't use UTF-8 as the charset for documents. Any suggest and=20
> examples ?
>
>
> Best regards,
> Eric
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
- ...I wonder if the really nerdy Klingons learn how to speak english?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 10:11:13 2005
Return-Path: <java-user-return-14017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5110 invoked from network); 11 Apr 2005 10:11:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 10:11:13 -0000
Received: (qmail 47355 invoked by uid 500); 11 Apr 2005 10:10:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47318 invoked by uid 500); 11 Apr 2005 10:10:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47302 invoked by uid 99); 11 Apr 2005 10:10:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from post-22.mail.nl.demon.net (HELO post-22.mail.nl.demon.net) (194.159.73.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 03:10:57 -0700
Received: from mda.demon.nl ([212.238.156.229]:55184 helo=[127.0.0.1])
	by post-22.mail.nl.demon.net with esmtp (Exim 4.43)
	id 1DKvsc-0006aL-GT; Mon, 11 Apr 2005 10:10:54 +0000
Message-ID: <425A4D2F.5070108@zilverline.org>
Date: Mon, 11 Apr 2005 12:10:55 +0200
From: Zilverline info <info@zilverline.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: nl, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Urgent, please help Index/Search in UTF-8 ???
References: <f472e9a005041102542bd0dc90@mail.gmail.com> <aae14651c7ae9987f0d83b88266857b9@gan.no>
In-Reply-To: <aae14651c7ae9987f0d83b88266857b9@gan.no>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

For instance look at http://www.zilverline.org/zilverlineweb/space/faq

Michael

Karl Øie wrote:

> If you use a servlet and a HTML Form to feed queries to the 
> QueryParser take good care of all configurations around the servlet 
> container. If you, like me, use tomcat you might have to recode the 
> query into internal java form (utf-8) before you pass it to lucene.
>
>
> read this:
>
> http://www.crazysquirrel.com/compgen/form-encoding.php
>
>
> then in your receiving servlet:
>
> String query_string = request.getParameter("query");
>
> String query_string = new 
> String(query_string.getBytes(),request.getCharacterEncoding());
>
> then pass query_string to lucene. This ensures that the string fetched 
> by getParameter() is encoded by the right encoding.
>
> Hope this helps!
>
> Mvh Karl Øie
>
> On 11. apr. 2005, at 11.54, Eric Chow wrote:
>
>> Hello,
>>
>>
>> I am a beginner in using Lucene.
>>
>>
>> My files are contains different language (English, Chinese,
>> Portuguese, Japanese and some Asian languages, non-latin languages).
>> They always contain in one file.
>> Therefore, I have to use UTF-8 to save the contents.
>>
>> I am now developing a web-based search engine. I use Lucene to create
>> index for those files and search it in web. The charset of the web
>> page is UTF-8, but it cannot search anything.
>>
>> I try to use some Analyser (CJKAnalyser, ChineseAnalyser,
>> StandardAnalyser, SimpleAnalyser), still failed.
>>
>> Finally, I tested to use original charset, for example, the Chinese
>> contents I used BIG5, and I can search it very well. For those
>> English, of couse, no problem.
>>
>> But I can't use UTF-8 as the charset for documents. Any suggest and 
>> examples ?
>>
>>
>> Best regards,
>> Eric
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> - ...I wonder if the really nerdy Klingons learn how to speak english?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 10:13:08 2005
Return-Path: <java-user-return-14018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5588 invoked from network); 11 Apr 2005 10:13:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 10:13:08 -0000
Received: (qmail 52661 invoked by uid 500); 11 Apr 2005 10:12:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52628 invoked by uid 500); 11 Apr 2005 10:12:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52614 invoked by uid 99); 11 Apr 2005 10:12:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.gan.no (HELO mail.gan.no) (195.159.151.132)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 03:12:57 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.gan.no (Postfix) with ESMTP id 9FCF3F000F
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 12:12:54 +0200 (CEST)
Received: from [172.16.16.192] (MetaMac.mediehuset.gan.no [172.16.16.192])
	by mail.gan.no (Postfix) with ESMTP id D28F8F000B
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 12:12:53 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <f472e9a0050410182173e5c40@mail.gmail.com>
References: <f472e9a0050410182173e5c40@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <8fd8f18e5bd47f7ffd6bb37fdca9442c@gan.no>
Content-Transfer-Encoding: quoted-printable
From: =?ISO-8859-1?Q?Karl_=D8ie?= <karl@gan.no>
Subject: Re: Multi-analyzer ?
Date: Mon, 11 Apr 2005 12:12:53 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at gan.no
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't think you can figure out the language from the input box value=20=

alone, i can't see any way to select the correct language analyzer at=20
this point. What you can do is to put Chinese, Japanese, English and=20
Dutch content in separate indexes and use multisearcher to search in=20
all of them, and then you would know what languages that returns hits.

Mvh Karl =D8ie

On 11. apr. 2005, at 03.21, Eric Chow wrote:

> Hello,
>
> If I don't know the language of the input terms, how can I use
> different analyzer to search it ?
>
> For example, the input box accepts UTF-8 search text, they can be
> anything, such as Chinese, Japanese, English, Russian, Deuch, etc. How
> can search any of them or all of them with Lucene?
>
> Any example, please?
>
>
> Best Regards,
> Eric
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
- 1f j00 (4n 1234d 7|-|15, j00 n33d 70 937 |41d


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 12:27:16 2005
Return-Path: <java-user-return-14019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71480 invoked from network); 11 Apr 2005 12:27:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 12:27:16 -0000
Received: (qmail 52272 invoked by uid 500); 11 Apr 2005 12:26:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52182 invoked by uid 500); 11 Apr 2005 12:26:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 40730 invoked by uid 500); 10 Apr 2005 16:01:31 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
From: "Patricio Galeas" <galeas@informatik.uni-siegen.de>
To: <lucene-user@jakarta.apache.org>
Subject: Terms & Postion from Hits ...
Date: Sun, 10 Apr 2005 17:52:45 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0020_01C53DF6.393E4AC0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcU95VYDXVHL/w+lTraCo2kmX0PZSA==
Message-ID: <MAILF0rRDyjLQoOuDdH000000c9@MAILF0.uni-siegen.de>
X-OriginalArrivalTime: 10 Apr 2005 15:56:37.0164 (UTC) FILETIME=[E067EEC0:01C53DE5]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0020_01C53DF6.393E4AC0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hello,
I am new with Lucene. I have following problem.
When I execute a search I receive the list of document Hits.
I get without problem the content of the documents too:

for (int i = 0; i < hits.length(); i++) {
      Document doc = hits.doc(i);
      System.out.println(doc.get("content"));
}

Now, I would like to obtain the List of all Terms (and their corresponding
position) from each document (hits.doc(i)).

I have experimented creating a second index with the founded documents
(Hits), and analyze it to obtain this information, but the algorithm work
very slow.

Do you have another idea?

Thank You for your help!


------=_NextPart_000_0020_01C53DF6.393E4AC0--


From java-user-return-14020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 12:27:44 2005
Return-Path: <java-user-return-14020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71625 invoked from network); 11 Apr 2005 12:27:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 12:27:43 -0000
Received: (qmail 54662 invoked by uid 500); 11 Apr 2005 12:27:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54637 invoked by uid 500); 11 Apr 2005 12:27:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 80691 invoked by uid 99); 11 Apr 2005 08:58:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Re: Multi-analyzer ?
Date: Mon, 11 Apr 2005 10:02:01 +0000
User-Agent: KMail/1.8
References: <f472e9a0050410182173e5c40@mail.gmail.com>
In-Reply-To: <f472e9a0050410182173e5c40@mail.gmail.com>
MIME-Version: 1.0
Content-Disposition: inline
Message-Id: <200504111002.01179.mail@andy-roberts.net>
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Can you not provide the user with a option list to specify their input 
language?

Language identification can be a pretty tricky field. There are some tricks 
you can do with unicode to identify language, e.g., \u0600 - \u06FF contains 
the Arabic characters, so if you're input contains lots of chars within this 
range, you can guess that the input is Arabic, for example.

The problem comes with differentiating between the languages that use a Latin 
alphabet. Again, there are multiple approaches, although the only one I know 
of that worked pretty well for identifying European languages was to build a 
model based on character bigrams (that is, sequences of two letters) [1]

At the end of the day, Lucene cannot help you in choosing the correct language 
as it doesn't know, and so it'll be up to you to add the necessary logic to 
tell Lucene which Analyzers to utilise. :(

Andy

[1] Churcher, G E; Hayes, J; Hughes, J S; Johnson, S; Souter, C. Bigram and 
trigram models for language identification and classification in: Evett, L & 
Rose,T (editors) Computational Linguistics for Speech and Handwriting 
Recognition AISB'94 Workshop University of Leeds/AISB. 1994.

On Monday 11 Apr 2005 01:21, Eric Chow wrote:
> Hello,
>
> If I don't know the language of the input terms, how can I use
> different analyzer to search it ?
>
> For example, the input box accepts UTF-8 search text, they can be
> anything, such as Chinese, Japanese, English, Russian, Deuch, etc. How
> can search any of them or all of them with Lucene?
>
> Any example, please?
>
>
> Best Regards,
> Eric
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 12:28:56 2005
Return-Path: <java-user-return-14021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71978 invoked from network); 11 Apr 2005 12:28:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 12:28:56 -0000
Received: (qmail 60164 invoked by uid 500); 11 Apr 2005 12:28:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60032 invoked by uid 500); 11 Apr 2005 12:28:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59997 invoked by uid 99); 11 Apr 2005 12:28:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.gan.no (HELO mail.gan.no) (195.159.151.132)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 05:28:35 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.gan.no (Postfix) with ESMTP id 89B43F000F
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 14:28:32 +0200 (CEST)
Received: from [172.16.16.192] (MetaMac.mediehuset.gan.no [172.16.16.192])
	by mail.gan.no (Postfix) with ESMTP id 9B4CDF000B
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 14:28:31 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <72cf53b405041102507b598167@mail.gmail.com>
References: <72cf53b405041102424ea6171e@mail.gmail.com> <72cf53b405041102507b598167@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <ed83bfe9cedf9e934cfd2ef06b0871cf@gan.no>
Content-Transfer-Encoding: quoted-printable
From: =?ISO-8859-1?Q?Karl_=D8ie?= <karl@gan.no>
Subject: Re: Lucene Search Result with Line Numbers?
Date: Mon, 11 Apr 2005 14:28:31 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at gan.no
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Most indexing creates a Lucene document for each Source document. What=20=

would need is to create a Lucene document for each line.

String src_doc =3D "crash.java";
int line_number =3D 0;
while(reader!=3DEOF) {
	String line =3D reader.readLine();
	Document ld =3D new Document();
	ld.add(new Field("id", src_doc, true, true, false));
	ld.add(new Field("line", ""+line_number, true, true, false));
	ld.add(new Field("text", line.toString(), false, true, true));
	index_writer.addDocument(ld);
	line_number++;
}

This will create a small lucene document for each line, upon search you=20=

will find documents based on the content of the line and the line=20
number as a field. The reason syntax highlighting works without=20
creating a lucene document for each line is because syntax highlighting=20=

bases its result on groups of occurencies of text, not line numbers.

Mvh Karl =D8ie

On 11. apr. 2005, at 11.50, cerberus yao wrote:

> Hi, Lucene users:
>
>   Does anyone knows how to add the Lucene search results with Line
> number in original source content?
>   for example:
>      I have a file "Test.java" which is indexed by lucene.
>      When I search inside the index, how to enhance the search result
> with line number in Test.java?
>
>   ps. the lucene sandbox has a highlighter for search result. where
> can I find a line number decorator for search results?
>
>  Thx.
>  Best regards,
>
> --
> Charley, Chang-Li Yao
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
- there is nothing wrong with using linux. if that's the lifestyle you=20=

want to live, i wont judge you. i just wont support you at the parades.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 12:51:55 2005
Return-Path: <java-user-return-14022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80137 invoked from network); 11 Apr 2005 12:51:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 12:51:55 -0000
Received: (qmail 13710 invoked by uid 500); 11 Apr 2005 12:51:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13683 invoked by uid 500); 11 Apr 2005 12:51:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13666 invoked by uid 99); 11 Apr 2005 12:51:47 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from d-128-167-108.bootp.Virginia.EDU (HELO ehatchersolutions.com) (128.143.167.108)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 05:51:47 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by ehatchersolutions.com (Postfix) with ESMTP id 5C9F8E0DC8
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 08:51:55 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <88c6a67205041101487a627f1c@mail.gmail.com>
References: <88c6a67205041101487a627f1c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <efc67d9587f1343162ee22362c114384@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: RangeQuery doesn't override equals() or hashCode() - intentional?
Date: Mon, 11 Apr 2005 08:51:53 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 11, 2005, at 4:48 AM, Chris Lamprecht wrote:
> I was attempting to cache QueryFilters in a Map using the Query as the
> key (a BooleanQuery instance containing two RangeQueries), and I
> discovered that my BooleanQueries' equals() methods would always
> return false, even when the queries were equivalent.  The culprit was
> RangeQuery - it doesn't implement equals() or hashCode().  Is this
> intentional, and if not, can I propose a patch to implement these
> methods?  thanks,

I have been adding .equals/.hashCode to the query types as I find a 
need.  I'm comparing queries generated by a custom query parser and 
queries created by the API using .equals in unit tests and have 
encountered the same issue.  I have not hit RangeQuery yet, so your 
patch would be a welcome addition.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 13:05:30 2005
Return-Path: <java-user-return-14023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84381 invoked from network); 11 Apr 2005 13:05:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 13:05:30 -0000
Received: (qmail 46942 invoked by uid 500); 11 Apr 2005 13:05:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46908 invoked by uid 500); 11 Apr 2005 13:05:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46895 invoked by uid 99); 11 Apr 2005 13:05:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 06:05:13 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4CC5613E211E; Mon, 11 Apr 2005 09:05:10 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id BAFB213E200A
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 09:04:48 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <MAILF0rRDyjLQoOuDdH000000c9@MAILF0.uni-siegen.de>
References: <MAILF0rRDyjLQoOuDdH000000c9@MAILF0.uni-siegen.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <fa7ece67ad60a1fa04151b5c4adb49a1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Terms & Postion from Hits ...
Date: Mon, 11 Apr 2005 09:04:53 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 10, 2005, at 11:52 AM, Patricio Galeas wrote:

> Hello,
> I am new with Lucene. I have following problem.
> When I execute a search I receive the list of document Hits.
> I get without problem the content of the documents too:
>
> for (int i = 0; i < hits.length(); i++) {
>       Document doc = hits.doc(i);
>       System.out.println(doc.get("content"));
> }
>
> Now, I would like to obtain the List of all Terms (and their 
> corresponding
> position) from each document (hits.doc(i)).

Lucene 1.4.x contains a term vector feature (see the javadocs for 
Field) that you can enable.  This does not give you position 
information though.  In the latest codebase (obtained via Subversion) 
the term vector feature has been enhanced to allow (optionally) the 
capturing of term positions and then also term offsets.

I recommend you try out the latest codebase for these features.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 13:09:58 2005
Return-Path: <java-user-return-14024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86457 invoked from network); 11 Apr 2005 13:09:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 13:09:58 -0000
Received: (qmail 57917 invoked by uid 500); 11 Apr 2005 13:09:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57879 invoked by uid 500); 11 Apr 2005 13:09:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 81983 invoked by uid 99); 11 Apr 2005 12:35:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Re: Terms & Postion from Hits ...
Date: Mon, 11 Apr 2005 13:38:52 +0000
User-Agent: KMail/1.8
References: <MAILF0rRDyjLQoOuDdH000000c9@MAILF0.uni-siegen.de>
In-Reply-To: <MAILF0rRDyjLQoOuDdH000000c9@MAILF0.uni-siegen.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504111338.52676.mail@andy-roberts.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've managed something like this from a slightly different perspective.

IndexReader ir = new IndexReader(yourIndex);

String searchTerm = "word";

TermPositions tp = ir.termPositions(new Term("contents", searchTerm);

tp.next();
int termFreq = tp.freq();
System.out.print(currentTerm.text());
		
for (int i=0; i < termFreq; i++) {
	System.out.print(" " + tp.nextPosition());
}
System.out.println();

ir.close();

This will print out something like:

word 1 67 104 155

Where the term "word" occurs at positions 1, 67, 104 and 155 in the field 
"contents" of the index ir.

HTH,
Andy Roberts

On Sunday 10 Apr 2005 15:52, Patricio Galeas wrote:
> Hello,
> I am new with Lucene. I have following problem.
> When I execute a search I receive the list of document Hits.
> I get without problem the content of the documents too:
>
> for (int i = 0; i < hits.length(); i++) {
>       Document doc = hits.doc(i);
>       System.out.println(doc.get("content"));
> }
>
> Now, I would like to obtain the List of all Terms (and their corresponding
> position) from each document (hits.doc(i)).
>
> I have experimented creating a second index with the founded documents
> (Hits), and analyze it to obtain this information, but the algorithm work
> very slow.
>
> Do you have another idea?
>
> Thank You for your help!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 13:10:09 2005
Return-Path: <java-user-return-14025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86511 invoked from network); 11 Apr 2005 13:10:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 13:10:08 -0000
Received: (qmail 58681 invoked by uid 500); 11 Apr 2005 13:09:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58657 invoked by uid 500); 11 Apr 2005 13:09:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 13576 invoked by uid 99); 11 Apr 2005 12:51:44 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of blizzy@blizzy.de designates 212.79.22.222 as permitted sender)
Message-ID: <425A72EE.8060605@blizzy.de>
Date: Mon, 11 Apr 2005 14:51:58 +0200
From: Maik Schreiber <blizzy@blizzy.de>
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050326)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Terms & Postion from Hits ...
References: <MAILF0rRDyjLQoOuDdH000000c9@MAILF0.uni-siegen.de>
In-Reply-To: <MAILF0rRDyjLQoOuDdH000000c9@MAILF0.uni-siegen.de>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Now, I would like to obtain the List of all Terms (and their corresponding
> position) from each document (hits.doc(i)).

Try IndexReader.getTermFreqVector(), which will return an instance of
TermPositionVector when the corresponding field has been indexed with
storeTermVector==true.

-- 
Maik Schreiber   *   http://www.blizzy.de

GPG public key: http://pgp.mit.edu:11371/pks/lookup?op=get&search=0x1F11D713
Key fingerprint: CF19 AFCE 6E3D 5443 9599 18B5 5640 1F11 D713

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 13:29:34 2005
Return-Path: <java-user-return-14026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9226 invoked from network); 11 Apr 2005 13:29:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 13:29:34 -0000
Received: (qmail 19216 invoked by uid 500); 11 Apr 2005 13:29:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19192 invoked by uid 500); 11 Apr 2005 13:29:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19177 invoked by uid 99); 11 Apr 2005 13:29:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from ylpvm01-ext.prodigy.net (HELO ylpvm01.prodigy.net) (207.115.57.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 06:29:22 -0700
Received: from [192.168.1.10] (adsl-66-141-52-252.dsl.austtx.swbell.net [66.141.52.252])
	by ylpvm01.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j3BDTJ4H007868
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 09:29:19 -0400
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <200504082359.45831@danielnaber.de>
References: <714bb96f024157c10aec520fc937db18@otherwise.com> <200504082022.31452@danielnaber.de> <a6559301729491232d10196e002e2ef7@otherwise.com> <200504082359.45831@danielnaber.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <ed783268cc76fb983e5c4fd6799b1625@otherwise.com>
Content-Transfer-Encoding: 7bit
From: Bill Tschumy <bill@otherwise.com>
Subject: Re: Corrupted index
Date: Mon, 11 Apr 2005 08:29:16 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel,

Thanks for responding on this thread.  I doubt the copy was made while 
the index was being updated and I don't see any indication of a crash.

Just for my clarification, if I update the index, but don't close the 
IndexWriter (because I may need it again soon), can the index on disk 
be left in an inconsistent state?  Do I need to close the IndexWriter 
to assure the index is OK in disk?

It is imperative I figure out what is going on.  I can't take the risk 
of my customer's data becoming corrupted due to my error.

Bill


On Apr 8, 2005, at 4:59 PM, Daniel Naber wrote:

> On Friday 08 April 2005 23:51, Bill Tschumy wrote:
>
>> Would
>> this happen if there was a Writer that was not closed?
>
> Either the copy was done while the index was being updated, or the 
> previous
> index update didn't finish (e.g. because it crashed before the index 
> was
> closed).
>
> Regards
>  Daniel
>
> -- 
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
-- 
Bill Tschumy
Otherwise -- Austin, TX
http://www.otherwise.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 13:36:23 2005
Return-Path: <java-user-return-14027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12318 invoked from network); 11 Apr 2005 13:36:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 13:36:23 -0000
Received: (qmail 43709 invoked by uid 500); 11 Apr 2005 13:36:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43659 invoked by uid 500); 11 Apr 2005 13:36:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43582 invoked by uid 99); 11 Apr 2005 13:36:05 -0000
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ngaard@hotmail.com designates 64.4.31.14 as permitted sender)
Received: from bay13-f14.bay13.hotmail.com (HELO hotmail.com) (64.4.31.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 06:36:04 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Mon, 11 Apr 2005 06:36:01 -0700
Message-ID: <BAY13-F1470DA9FF2855922ABE93DD0320@phx.gbl>
Received: from 193.162.59.125 by by13fd.bay13.hotmail.msn.com with HTTP;
	Mon, 11 Apr 2005 13:36:01 GMT
X-Originating-IP: [193.162.59.125]
X-Originating-Email: [ngaard@hotmail.com]
X-Sender: ngaard@hotmail.com
From: "Peter Hotm. Nørregaard" <ngaard@hotmail.com>
To: java-user@lucene.apache.org
Bcc: 
Subject: How to include a multi-word synonym to a word when indexing?
Date: Mon, 11 Apr 2005 13:36:01 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 11 Apr 2005 13:36:01.0887 (UTC) FILETIME=[67008EF0:01C53E9B]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

According to "Lucene in Action" it is possible to get synonyms indexed 
together with a word by putting multiple words with the same position-id in 
the term vector.

My problem is, however, that some words needs to have alternatives where the 
word is decomposed / decompounded into two or more words:

"FooBar Corp" or "cybercafe"

should be found when searching for

"Foo Ba*" or "cyber cafe"


The reverse is also true: The "Foo Bar Corp" should be found with "Foob* 
corp".

So how do I solve this problem?



Thanks,



Peter

_________________________________________________________________
Få alle de nye og sjove ikoner med MSN Messenger http://messenger.msn.dk/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 13:46:47 2005
Return-Path: <java-user-return-14028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30567 invoked from network); 11 Apr 2005 13:46:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 13:46:47 -0000
Received: (qmail 70279 invoked by uid 500); 11 Apr 2005 13:46:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70248 invoked by uid 500); 11 Apr 2005 13:46:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70218 invoked by uid 99); 11 Apr 2005 13:46:22 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of charley.yao@gmail.com designates 64.233.162.198 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 06:46:20 -0700
Received: by zproxy.gmail.com with SMTP id 18so598888nzp
        for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 06:46:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=PrHgAfoNcUj2lLcBQAaFmPtTw/BRxXq/scFQBESoHQowSo2OlUmVPUh4jzeOk3J+qPIvwfcErVjjL1bZjmCKJB9NR/Vwpi1xbUPHdcsDXBgMrwN7KXwqglUeQHuBNwi9sgmW7fv8msepJdSS3K19FM1m9zIfksgmJZLqXK8lqC4=
Received: by 10.36.37.6 with SMTP id k6mr190926nzk;
        Mon, 11 Apr 2005 06:46:17 -0700 (PDT)
Received: by 10.36.34.14 with HTTP; Mon, 11 Apr 2005 06:46:17 -0700 (PDT)
Message-ID: <72cf53b4050411064663c305d6@mail.gmail.com>
Date: Mon, 11 Apr 2005 21:46:17 +0800
From: cerberus yao <charley.yao@gmail.com>
Reply-To: cerberus yao <charley.yao@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Result with Line Numbers?
In-Reply-To: <ed83bfe9cedf9e934cfd2ef06b0871cf@gan.no>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
References: <72cf53b405041102424ea6171e@mail.gmail.com>
	 <72cf53b405041102507b598167@mail.gmail.com>
	 <ed83bfe9cedf9e934cfd2ef06b0871cf@gan.no>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

But the "crash.java" is a just single document physically.
Do we have any drawback if we treat each line in "crash.java" as a doucment=
?

Another question:
  If we need to present the search result with the hit lines plus n
lines forward and backword, how can I do this if each lines are
seperated in each document?
  for example:

 1. contents in crash.java are:
      public class crash {
          public static void main(String[] args) {
          }
      }
 2. query "main"
 3. search result=3D the hit line +1 line and -1 line
     1 public class crash {
     2    public static void main(String[] args) {
     3   }

On Apr 11, 2005 8:28 PM, Karl =D8ie <karl@gan.no> wrote:
> Most indexing creates a Lucene document for each Source document. What
> would need is to create a Lucene document for each line.
>=20
> String src_doc =3D "crash.java";
> int line_number =3D 0;
> while(reader!=3DEOF) {
>         String line =3D reader.readLine();
>         Document ld =3D new Document();
>         ld.add(new Field("id", src_doc, true, true, false));
>         ld.add(new Field("line", ""+line_number, true, true, false));
>         ld.add(new Field("text", line.toString(), false, true, true));
>         index_writer.addDocument(ld);
>         line_number++;
> }
>=20
> This will create a small lucene document for each line, upon search you
> will find documents based on the content of the line and the line
> number as a field. The reason syntax highlighting works without
> creating a lucene document for each line is because syntax highlighting
> bases its result on groups of occurencies of text, not line numbers.
>=20
> Mvh Karl =D8ie
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 13:54:39 2005
Return-Path: <java-user-return-14029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34545 invoked from network); 11 Apr 2005 13:54:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 13:54:39 -0000
Received: (qmail 85848 invoked by uid 500); 11 Apr 2005 13:54:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85801 invoked by uid 500); 11 Apr 2005 13:54:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85758 invoked by uid 99); 11 Apr 2005 13:54:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.gan.no (HELO mail.gan.no) (195.159.151.132)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 06:54:26 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.gan.no (Postfix) with ESMTP id EA8F4F000C
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 15:54:22 +0200 (CEST)
Received: from [172.16.16.192] (MetaMac.mediehuset.gan.no [172.16.16.192])
	by mail.gan.no (Postfix) with ESMTP id DFC30F000B
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 15:54:21 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <72cf53b4050411064663c305d6@mail.gmail.com>
References: <72cf53b405041102424ea6171e@mail.gmail.com> <72cf53b405041102507b598167@mail.gmail.com> <ed83bfe9cedf9e934cfd2ef06b0871cf@gan.no> <72cf53b4050411064663c305d6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <bf9ce0c0a743414ce60e917e4721621a@gan.no>
Content-Transfer-Encoding: quoted-printable
From: =?ISO-8859-1?Q?Karl_=D8ie?= <karl@gan.no>
Subject: Re: Lucene Search Result with Line Numbers?
Date: Mon, 11 Apr 2005 15:54:22 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at gan.no
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes, the biggest drawback is text spanning lines:

L1 - it was the best of times,
L2 - it was the worst of times

will return no hits for the search "it was the best of times, it was=20
the worst of times" (with quotes). because no single lucene document=20
contains the whole text alone.

I would be interested in an alternative approach here because i have=20
encountered this problem myself. A possible solution would be to have a=20=

freetext index and a linetext index, and the query is run against the=20
fulltext index, but when hits are returned, these hits are compared=20
against the linetext index to find each freetext hit's exact=20
linenumber.

Mvh Karl =D8ie

On 11. apr. 2005, at 15.46, cerberus yao wrote:

> But the "crash.java" is a just single document physically.
> Do we have any drawback if we treat each line in "crash.java" as a=20
> doucment?
>
> Another question:
>   If we need to present the search result with the hit lines plus n
> lines forward and backword, how can I do this if each lines are
> seperated in each document?
>   for example:
>
>  1. contents in crash.java are:
>       public class crash {
>           public static void main(String[] args) {
>           }
>       }
>  2. query "main"
>  3. search result=3D the hit line +1 line and -1 line
>      1 public class crash {
>      2    public static void main(String[] args) {
>      3   }
>
> On Apr 11, 2005 8:28 PM, Karl =D8ie <karl@gan.no> wrote:
>> Most indexing creates a Lucene document for each Source document. =
What
>> would need is to create a Lucene document for each line.
>>
>> String src_doc =3D "crash.java";
>> int line_number =3D 0;
>> while(reader!=3DEOF) {
>>         String line =3D reader.readLine();
>>         Document ld =3D new Document();
>>         ld.add(new Field("id", src_doc, true, true, false));
>>         ld.add(new Field("line", ""+line_number, true, true, false));
>>         ld.add(new Field("text", line.toString(), false, true, =
true));
>>         index_writer.addDocument(ld);
>>         line_number++;
>> }
>>
>> This will create a small lucene document for each line, upon search=20=

>> you
>> will find documents based on the content of the line and the line
>> number as a field. The reason syntax highlighting works without
>> creating a lucene document for each line is because syntax=20
>> highlighting
>> bases its result on groups of occurencies of text, not line numbers.
>>
>> Mvh Karl =D8ie
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
- Somewhere, out there on the Net, is an HD full of lame quotes


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 14:56:14 2005
Return-Path: <java-user-return-14030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64574 invoked from network); 11 Apr 2005 14:56:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 14:56:14 -0000
Received: (qmail 40728 invoked by uid 500); 11 Apr 2005 14:55:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40658 invoked by uid 500); 11 Apr 2005 14:55:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40513 invoked by uid 99); 11 Apr 2005 14:55:40 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of mbarancz@twcny.rr.com designates 24.24.2.56 as permitted sender)
Received: from ms-smtp-02.nyroc.rr.com (HELO ms-smtp-02.nyroc.rr.com) (24.24.2.56)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 07:55:38 -0700
Received: from [192.168.0.104] (cpe-24-58-8-69.twcny.res.rr.com [24.58.8.69])
	by ms-smtp-02.nyroc.rr.com (8.12.10/8.12.10) with ESMTP id j3BEtXJj014887
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 10:55:33 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <200504111002.01179.mail@andy-roberts.net>
References: <f472e9a0050410182173e5c40@mail.gmail.com> <200504111002.01179.mail@andy-roberts.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Message-Id: <fe92bd84112cef272a39341e87c70c3d@twcny.rr.com>
Content-Transfer-Encoding: quoted-printable
From: Mike Baranczak <mbarancz@twcny.rr.com>
Subject: Re: Multi-analyzer ?
Date: Mon, 11 Apr 2005 10:55:33 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Scanned: Symantec AntiVirus Scan Engine
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Your example with Arabic wouldn't work reliably either - there are=20
several other languages that use the Arabic script (Persian for=20
example).

You could also try to pick out characters that are unique to a=20
particular language - for example, =C4=98 or =C5=BB only occur in Polish =
(as far=20
as I know...). Of course, you have no guarantee that a Polish-language=20=

query will actually contain any of those characters - so this method=20
would only work as a supplement to another method.

And don't forget that some words are written the same in several=20
different languages.

This is the sort of problem that the end user can solve much better=20
than the software can.

-MB


On Apr 11, 2005, at 6:02 AM, Andy Roberts wrote:

> Can you not provide the user with a option list to specify their input
> language?
>
> Language identification can be a pretty tricky field. There are some=20=

> tricks
> you can do with unicode to identify language, e.g., \u0600 - \u06FF=20
> contains
> the Arabic characters, so if you're input contains lots of chars=20
> within this
> range, you can guess that the input is Arabic, for example.
>
> The problem comes with differentiating between the languages that use=20=

> a Latin
> alphabet. Again, there are multiple approaches, although the only one=20=

> I know
> of that worked pretty well for identifying European languages was to=20=

> build a
> model based on character bigrams (that is, sequences of two letters)=20=

> [1]
>
> At the end of the day, Lucene cannot help you in choosing the correct=20=

> language
> as it doesn't know, and so it'll be up to you to add the necessary=20
> logic to
> tell Lucene which Analyzers to utilise. :(
>
> Andy
>
> [1] Churcher, G E; Hayes, J; Hughes, J S; Johnson, S; Souter, C.=20
> Bigram and
> trigram models for language identification and classification in:=20
> Evett, L &
> Rose,T (editors) Computational Linguistics for Speech and Handwriting
> Recognition AISB'94 Workshop University of Leeds/AISB. 1994.
>
> On Monday 11 Apr 2005 01:21, Eric Chow wrote:
>> Hello,
>>
>> If I don't know the language of the input terms, how can I use
>> different analyzer to search it ?
>>
>> For example, the input box accepts UTF-8 search text, they can be
>> anything, such as Chinese, Japanese, English, Russian, Deuch, etc. =
How
>> can search any of them or all of them with Lucene?
>>
>> Any example, please?
>>
>>
>> Best Regards,
>> Eric
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 15:07:30 2005
Return-Path: <java-user-return-14031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70403 invoked from network); 11 Apr 2005 15:07:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 15:07:30 -0000
Received: (qmail 66498 invoked by uid 500); 11 Apr 2005 15:07:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66468 invoked by uid 500); 11 Apr 2005 15:07:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66453 invoked by uid 99); 11 Apr 2005 15:07:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.gan.no (HELO mail.gan.no) (195.159.151.132)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 08:07:05 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.gan.no (Postfix) with ESMTP id AB547F000B
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 17:07:02 +0200 (CEST)
Received: from [172.16.16.192] (MetaMac.mediehuset.gan.no [172.16.16.192])
	by mail.gan.no (Postfix) with ESMTP id BDEAEF000F
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 17:07:00 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <72cf53b4050411064663c305d6@mail.gmail.com>
References: <72cf53b405041102424ea6171e@mail.gmail.com> <72cf53b405041102507b598167@mail.gmail.com> <ed83bfe9cedf9e934cfd2ef06b0871cf@gan.no> <72cf53b4050411064663c305d6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <2693f7c8c00ba33fc9dc11bc6eefa231@gan.no>
Content-Transfer-Encoding: quoted-printable
From: =?ISO-8859-1?Q?Karl_=D8ie?= <karl@gan.no>
Subject: Re: Lucene Search Result with Line Numbers?
Date: Mon, 11 Apr 2005 17:07:01 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at gan.no
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Oh, forgot your last question, thats why the field "line" has to be=20
stored, upon query you have to get the "line" number from the document=20=

that represents the line and in "forward" / "back" actions you will=20
have sort the resultset by line value and print only chunks of that=20
result.

Mvh Karl =D8ie

> Another question:
>   If we need to present the search result with the hit lines plus n
> lines forward and backword, how can I do this if each lines are
> seperated in each document?
>   for example:
>
>  1. contents in crash.java are:
>       public class crash {
>           public static void main(String[] args) {
>           }
>       }
>  2. query "main"
>  3. search result=3D the hit line +1 line and -1 line
>      1 public class crash {
>      2    public static void main(String[] args) {
>      3   }
>
> On Apr 11, 2005 8:28 PM, Karl =D8ie <karl@gan.no> wrote:
>> Most indexing creates a Lucene document for each Source document. =
What
>> would need is to create a Lucene document for each line.
>>
>> String src_doc =3D "crash.java";
>> int line_number =3D 0;
>> while(reader!=3DEOF) {
>>         String line =3D reader.readLine();
>>         Document ld =3D new Document();
>>         ld.add(new Field("id", src_doc, true, true, false));
>>         ld.add(new Field("line", ""+line_number, true, true, false));
>>         ld.add(new Field("text", line.toString(), false, true, =
true));
>>         index_writer.addDocument(ld);
>>         line_number++;
>> }
>>
>> This will create a small lucene document for each line, upon search=20=

>> you
>> will find documents based on the content of the line and the line
>> number as a field. The reason syntax highlighting works without
>> creating a lucene document for each line is because syntax=20
>> highlighting
>> bases its result on groups of occurencies of text, not line numbers.
>>
>> Mvh Karl =D8ie
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
- Real life should have a search function. I need my socks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 15:36:10 2005
Return-Path: <java-user-return-14032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86616 invoked from network); 11 Apr 2005 15:36:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 15:36:10 -0000
Received: (qmail 37464 invoked by uid 500); 11 Apr 2005 15:35:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37428 invoked by uid 500); 11 Apr 2005 15:35:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 76982 invoked by uid 99); 11 Apr 2005 15:10:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Re: Multi-analyzer ?
Date: Mon, 11 Apr 2005 16:13:53 +0000
User-Agent: KMail/1.8
References: <f472e9a0050410182173e5c40@mail.gmail.com> <200504111002.01179.mail@andy-roberts.net> <fe92bd84112cef272a39341e87c70c3d@twcny.rr.com>
In-Reply-To: <fe92bd84112cef272a39341e87c70c3d@twcny.rr.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504111613.53674.mail@andy-roberts.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 11 Apr 2005 14:55, Mike Baranczak wrote:
> Your example with Arabic wouldn't work reliably either - there are
> several other languages that use the Arabic script (Persian for
> example).

Good point. Although you could try a simple approach to test for the 
additional characters that exist in Persian but not in Arabic. Although, this 
again is not fool-proof. A letter-model approach would be better but is 
rather time consuming.

>
> This is the sort of problem that the end user can solve much better
> than the software can.
>

I completely agree, which is why I originally suggested prompting the user for 
this info. It may be the case that for the majority of queries, English is 
the usual language. And it is probably more feasible to do a test to 
determine whether the query English or not (still very tricky, mind). If not, 
then prompt the user to specify their input language because otherwise, 
results will be poor.

Andy Roberts

> -MB
>
> On Apr 11, 2005, at 6:02 AM, Andy Roberts wrote:
> > Can you not provide the user with a option list to specify their input
> > language?
> >
> > Language identification can be a pretty tricky field. There are some
> > tricks
> > you can do with unicode to identify language, e.g., \u0600 - \u06FF
> > contains
> > the Arabic characters, so if you're input contains lots of chars
> > within this
> > range, you can guess that the input is Arabic, for example.
> >
> > The problem comes with differentiating between the languages that use
> > a Latin
> > alphabet. Again, there are multiple approaches, although the only one
> > I know
> > of that worked pretty well for identifying European languages was to
> > build a
> > model based on character bigrams (that is, sequences of two letters)
> > [1]
> >
> > At the end of the day, Lucene cannot help you in choosing the correct
> > language
> > as it doesn't know, and so it'll be up to you to add the necessary
> > logic to
> > tell Lucene which Analyzers to utilise. :(
> >
> > Andy
> >
> > [1] Churcher, G E; Hayes, J; Hughes, J S; Johnson, S; Souter, C.
> > Bigram and
> > trigram models for language identification and classification in:
> > Evett, L &
> > Rose,T (editors) Computational Linguistics for Speech and Handwriting
> > Recognition AISB'94 Workshop University of Leeds/AISB. 1994.
> >
> > On Monday 11 Apr 2005 01:21, Eric Chow wrote:
> >> Hello,
> >>
> >> If I don't know the language of the input terms, how can I use
> >> different analyzer to search it ?
> >>
> >> For example, the input box accepts UTF-8 search text, they can be
> >> anything, such as Chinese, Japanese, English, Russian, Deuch, etc. How
> >> can search any of them or all of them with Lucene?
> >>
> >> Any example, please?
> >>
> >>
> >> Best Regards,
> >> Eric
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 16:16:43 2005
Return-Path: <java-user-return-14033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8899 invoked from network); 11 Apr 2005 16:16:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 16:16:43 -0000
Received: (qmail 37772 invoked by uid 500); 11 Apr 2005 16:16:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37740 invoked by uid 500); 11 Apr 2005 16:16:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37722 invoked by uid 99); 11 Apr 2005 16:16:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 09:16:33 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EC89313E211E; Mon, 11 Apr 2005 12:16:30 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 0F51A13E200A
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 12:16:07 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <BAY13-F1470DA9FF2855922ABE93DD0320@phx.gbl>
References: <BAY13-F1470DA9FF2855922ABE93DD0320@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <6595a9e30ce8023608bc45ff776afef8@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to include a multi-word synonym to a word when indexing?
Date: Mon, 11 Apr 2005 12:16:12 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Apr 11, 2005, at 9:36 AM, Peter Hotm. N=F8rregaard wrote:
> According to "Lucene in Action" it is possible to get synonyms indexed=20=

> together with a word by putting multiple words with the same=20
> position-id in the term vector.
>
> My problem is, however, that some words needs to have alternatives=20
> where the word is decomposed / decompounded into two or more words:
>
> "FooBar Corp" or "cybercafe"
>
> should be found when searching for
>
> "Foo Ba*" or "cyber cafe"

First, the phrase query with wildcards is not currently a built-in=20
capability of Lucene.

You'll need some kind of lookup to know how to split a token like=20
"cybercafe" into two words - once you've done that it will be easy to=20
set the position increment of them to zero so that they overlay the=20
original term.

> The reverse is also true: The "Foo Bar Corp" should be found with=20
> "Foob* corp".

Again the caveat about wildcard phrase queries applies.  You'll need to=20=

use that same lookup mechanism to combine multiple tokens coming=20
through a token filter into a single combined one.


> So how do I solve this problem?

The approach I've described above is a crude dictionary-based one, but=20=

I'm sure other tricks could be employed but they would be quite=20
sophisticated (N-gram sequencing ala LingPipe comes to mind).

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 16:25:35 2005
Return-Path: <java-user-return-14034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11854 invoked from network); 11 Apr 2005 16:25:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 16:25:35 -0000
Received: (qmail 55235 invoked by uid 500); 11 Apr 2005 16:25:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55080 invoked by uid 500); 11 Apr 2005 16:25:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55067 invoked by uid 99); 11 Apr 2005 16:25:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from vhost6.atomicservers.com (HELO vhost6.atomicservers.com) (216.58.160.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 09:25:26 -0700
Received: from lab1dt.corp.aptas.com ([64.78.237.253])
	by vhost6.atomicservers.com (8.11.6/8.11.6) with ESMTP id j3BGPNx11239
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 10:25:23 -0600
Subject: Lucene for Geo
From: Martin May <maym@foobar.lu>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Mon, 11 Apr 2005 10:25:23 -0600
Message-Id: <1113236723.18886.11.camel@lab1dt>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.4 (2.0.4-2) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi everybody,

I have some questions concerning using Lucene for Geo-searching. I have
a bunch of documents (> 100,000) in the index that all have a latitude
and longitude associated with them.

I wanted to be able to search within a certain radius of a point of
origin, which I accomplished by applying some filters on the search that
restrict what values lat/long can take.

So far so good. What I would like to be able to do now is factor in the
distance from the point of origin in the scoring, i.e. give documents
that are closer to the point of origin a boost.

Simply sorting by distance won't cut it, because there are other
relevance factors affecting the ranking. Is there any good (easy &
efficient) way to do this?

Thanks,

Martin


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 17:55:06 2005
Return-Path: <java-user-return-14035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43870 invoked from network); 11 Apr 2005 17:55:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 17:55:06 -0000
Received: (qmail 58108 invoked by uid 500); 11 Apr 2005 17:54:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58073 invoked by uid 500); 11 Apr 2005 17:54:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58058 invoked by uid 99); 11 Apr 2005 17:54:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc11.comcast.net (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 10:54:55 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc11) with ESMTP
          id <20050411175453013001986ae>; Mon, 11 Apr 2005 17:54:53 +0000
Message-ID: <425AB9ED.3040608@apache.org>
Date: Mon, 11 Apr 2005 10:54:53 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene Search Result with Line Numbers?
References: <72cf53b405041102424ea6171e@mail.gmail.com> <72cf53b405041102507b598167@mail.gmail.com>
In-Reply-To: <72cf53b405041102507b598167@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

cerberus yao wrote:
>   Does anyone knows how to add the Lucene search results with Line
> number in original source content?

When you display each hit, first scan the text and build an array 
containing the positions of each newline.  Then use the highlighter (in 
contrib/highlighter) to find fragments:

   TextFragment[] frags = highlighter.getBestTextFragments(...);

Finally, display these fragments as complete lines by searching the 
array of line starts for the first fragment's start position to find the 
start line, and the last fragment's end position to find the last line.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 18:06:15 2005
Return-Path: <java-user-return-14036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50465 invoked from network); 11 Apr 2005 18:06:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 18:06:15 -0000
Received: (qmail 91317 invoked by uid 500); 11 Apr 2005 18:06:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91295 invoked by uid 500); 11 Apr 2005 18:06:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91278 invoked by uid 99); 11 Apr 2005 18:06:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc13.comcast.net (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 11:06:02 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc13) with ESMTP
          id <2005041118060001500b8rcke>; Mon, 11 Apr 2005 18:06:00 +0000
Message-ID: <425ABC88.7030700@apache.org>
Date: Mon, 11 Apr 2005 11:06:00 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Corrupted index
References: <714bb96f024157c10aec520fc937db18@otherwise.com> <200504082020.53306@danielnaber.de>
In-Reply-To: <200504082020.53306@danielnaber.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:
> Yes, the *.cfs shows that this is a compound index which has *.fnm files 
> only when it's being modified.

When creating a compound segment, a "segments" file is never written 
that refers to the segment until the .cfs file is created and the .fnm 
files are removed.

The real problem here looks to be that the segments file is out of sync, 
and refers to a segment named 'v' when no such segment, compound or 
otherwise, exists.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 18:09:00 2005
Return-Path: <java-user-return-14037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50923 invoked from network); 11 Apr 2005 18:09:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 18:09:00 -0000
Received: (qmail 97528 invoked by uid 500); 11 Apr 2005 18:08:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97492 invoked by uid 500); 11 Apr 2005 18:08:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97454 invoked by uid 99); 11 Apr 2005 18:08:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc14.comcast.net (HELO rwcrmhc14.comcast.net) (216.148.227.89)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 11:08:40 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc14) with ESMTP
          id <200504111808380140035depe>; Mon, 11 Apr 2005 18:08:38 +0000
Message-ID: <425ABD26.70401@apache.org>
Date: Mon, 11 Apr 2005 11:08:38 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Corrupted index
References: <714bb96f024157c10aec520fc937db18@otherwise.com> <200504082022.31452@danielnaber.de> <a6559301729491232d10196e002e2ef7@otherwise.com>
In-Reply-To: <a6559301729491232d10196e002e2ef7@otherwise.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Bill Tschumy wrote:
> So, did this happen because he copied the data while in an inconsistent 
> state?  I'm a bit surprised that an inconsistent index is ever left on 
> disk (except for temporarily while something is being written).  Would 
> this happen if there was a Writer that was not closed?

An index should never be left in an inconsistent state.  After a crash 
lock files may need to be removed, but that's it.

However, backing up an index while it is being modified is tricky, since 
it is a moving target.  At any single point in time the index is 
consistent, but the backup process is not instantaneous, and views the 
index at a number of points in time.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 19:28:09 2005
Return-Path: <java-user-return-14038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88255 invoked from network); 11 Apr 2005 19:28:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2005 19:28:09 -0000
Received: (qmail 53935 invoked by uid 500); 11 Apr 2005 19:28:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53916 invoked by uid 500); 11 Apr 2005 19:27:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53893 invoked by uid 500); 11 Apr 2005 19:27:59 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 53889 invoked by uid 99); 11 Apr 2005 19:27:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from ylpvm01-ext.prodigy.net (HELO ylpvm01.prodigy.net) (207.115.57.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 12:27:59 -0700
Received: from [192.168.1.10] (adsl-66-141-52-252.dsl.austtx.swbell.net [66.141.52.252])
	by ylpvm01.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j3BJRt4H019878
	for <lucene-user@jakarta.apache.org>; Mon, 11 Apr 2005 15:27:56 -0400
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <dab56f707725e6206fb0b2e1bdd7aed7@otherwise.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: Lucene Users List <lucene-user@jakarta.apache.org>
From: Bill Tschumy <bill@otherwise.com>
Subject: Strange sort error
Date: Mon, 11 Apr 2005 14:27:57 -0500
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In my application, by default I display all documents that are in the  
index.  I sort them either using a "time modified" or "time created".   
If I have a newly created empty index, I find I get an error if I sort  
by "time modified" but not "time created".  In either case there are  
actually no documents that match my query so in reality there is  
nothing to sort.

Here is my query:

query = new TermQuery(new Term(MyIndexer.CREATOR_KEY,  
MyIndexer.PARSNIPS_VAL));
String fieldName = sortType == Parsnips.SORT_BY_MODIFIED ?  
MyIndexer.MODIFIED_KEY : MyIndexer.CREATED_KEY;
Sort sorter = new Sort(new SortField(fieldName, SortField.STRING,  
true));
hits = searcher.search(query, sorter);

The error I'm getting when using MyIndexer.MODIFIED_KEY as the sort  
field is:

java.lang.RuntimeException: no terms in field modified
         at  
org.apache.lucene.search.FieldCacheImpl.getStringIndex(FieldCacheImpl.ja 
va:256)
         at  
org.apache.lucene.search.FieldSortedHitQueue.comparatorString(FieldSorte 
dHitQueue.java:265)
         at  
org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSo 
rtedHitQueue.java:180)
         at  
org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQueue. 
java:58)
         at  
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:122)
         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
         at org.apache.lucene.search.Hits.<init>(Hits.java:51)
         at org.apache.lucene.search.Searcher.search(Searcher.java:41)
         at com.otherwise.parsnips.MySearcher.search(MySearcher.java:170)
         at com.otherwise.parsnips.MySearcher.search(MySearcher.java:149)
         at com.otherwise.parsnips.Parsnips.<init>(Parsnips.java:163)
         at com.otherwise.parsnips.Parsnips.main(Parsnips.java:1205)

I can't understand why I would be getting this for one sort field but  
not the other given there are 0 hits anyway in a newly created index.   
Anyone have any thoughts?  I am using Lucene 1.4.2.

-- 
Bill Tschumy
Otherwise -- Austin, TX
http://www.otherwise.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 00:53:27 2005
Return-Path: <java-user-return-14039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77720 invoked from network); 12 Apr 2005 00:53:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 00:53:27 -0000
Received: (qmail 62347 invoked by uid 500); 12 Apr 2005 00:53:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62306 invoked by uid 500); 12 Apr 2005 00:53:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62292 invoked by uid 99); 12 Apr 2005 00:53:15 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of eric138@gmail.com designates 64.233.170.194 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 17:53:13 -0700
Received: by rproxy.gmail.com with SMTP id b11so1221434rne
        for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 17:53:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=CabU0i1z01C9kvghm8K5oGQuNEm0YoNm6eU0bvJcnR2Frs5cBEoePlWoJNk9K3UfjnfEefhIMq3gMUx+PWZjkozwJ2gVettWs1OLzNagR56SBSQPVayG63hTCixwLoiyW+dpon6/KpNxDQ6XI6SCwvgE/Na6wS0vros6jjaV3n0=
Received: by 10.38.161.53 with SMTP id j53mr20769rne;
        Mon, 11 Apr 2005 17:53:11 -0700 (PDT)
Received: by 10.38.12.59 with HTTP; Mon, 11 Apr 2005 17:53:11 -0700 (PDT)
Message-ID: <f472e9a0050411175353eea998@mail.gmail.com>
Date: Tue, 12 Apr 2005 08:53:11 +0800
From: Eric Chow <eric138@gmail.com>
Reply-To: Eric Chow <eric138@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi-analyzer ?
In-Reply-To: <200504111613.53674.mail@andy-roberts.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <f472e9a0050410182173e5c40@mail.gmail.com>
	 <200504111002.01179.mail@andy-roberts.net>
	 <fe92bd84112cef272a39341e87c70c3d@twcny.rr.com>
	 <200504111613.53674.mail@andy-roberts.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

But how about one document contains more than two different languages ??


Eric

On Apr 12, 2005 12:13 AM, Andy Roberts <mail@andy-roberts.net> wrote:
> On Monday 11 Apr 2005 14:55, Mike Baranczak wrote:
> > Your example with Arabic wouldn't work reliably either - there are
> > several other languages that use the Arabic script (Persian for
> > example).
> 
> Good point. Although you could try a simple approach to test for the
> additional characters that exist in Persian but not in Arabic. Although, this
> again is not fool-proof. A letter-model approach would be better but is
> rather time consuming.
> 
> >
> > This is the sort of problem that the end user can solve much better
> > than the software can.
> >
> 
> I completely agree, which is why I originally suggested prompting the user for
> this info. It may be the case that for the majority of queries, English is
> the usual language. And it is probably more feasible to do a test to
> determine whether the query English or not (still very tricky, mind). If not,
> then prompt the user to specify their input language because otherwise,
> results will be poor.
> 
> Andy Roberts
> 
> > -MB
> >
> > On Apr 11, 2005, at 6:02 AM, Andy Roberts wrote:
> > > Can you not provide the user with a option list to specify their input
> > > language?
> > >
> > > Language identification can be a pretty tricky field. There are some
> > > tricks
> > > you can do with unicode to identify language, e.g., \u0600 - \u06FF
> > > contains
> > > the Arabic characters, so if you're input contains lots of chars
> > > within this
> > > range, you can guess that the input is Arabic, for example.
> > >
> > > The problem comes with differentiating between the languages that use
> > > a Latin
> > > alphabet. Again, there are multiple approaches, although the only one
> > > I know
> > > of that worked pretty well for identifying European languages was to
> > > build a
> > > model based on character bigrams (that is, sequences of two letters)
> > > [1]
> > >
> > > At the end of the day, Lucene cannot help you in choosing the correct
> > > language
> > > as it doesn't know, and so it'll be up to you to add the necessary
> > > logic to
> > > tell Lucene which Analyzers to utilise. :(
> > >
> > > Andy
> > >
> > > [1] Churcher, G E; Hayes, J; Hughes, J S; Johnson, S; Souter, C.
> > > Bigram and
> > > trigram models for language identification and classification in:
> > > Evett, L &
> > > Rose,T (editors) Computational Linguistics for Speech and Handwriting
> > > Recognition AISB'94 Workshop University of Leeds/AISB. 1994.
> > >
> > > On Monday 11 Apr 2005 01:21, Eric Chow wrote:
> > >> Hello,
> > >>
> > >> If I don't know the language of the input terms, how can I use
> > >> different analyzer to search it ?
> > >>
> > >> For example, the input box accepts UTF-8 search text, they can be
> > >> anything, such as Chinese, Japanese, English, Russian, Deuch, etc. How
> > >> can search any of them or all of them with Lucene?
> > >>
> > >> Any example, please?
> > >>
> > >>
> > >> Best Regards,
> > >> Eric
> > >>
> > >> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 04:12:58 2005
Return-Path: <java-user-return-14040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33889 invoked from network); 12 Apr 2005 04:12:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 04:12:57 -0000
Received: (qmail 41031 invoked by uid 500); 12 Apr 2005 04:12:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40918 invoked by uid 500); 12 Apr 2005 04:12:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40883 invoked by uid 99); 12 Apr 2005 04:12:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fckdp@ok.ru designates 195.2.83.236 as permitted sender)
Received: from mail4.zmail.ru (HELO aha.ru) (195.2.83.236)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 21:12:37 -0700
Received: from [195.98.167.2] (account fckdp@ok.ru HELO WRKPASHA)
  by frontend4.aha.ru (CommuniGate Pro SMTP 4.2.8)
  with ESMTP id 133724868 for java-user@lucene.apache.org; Tue, 12 Apr 2005 08:12:32 +0400
Reply-To: <bizhan@aha.ru>
From: "Pasha Bizhan" <fckdp@ok.ru>
To: <java-user@lucene.apache.org>
Subject: RE: How to include a multi-word synonym to a word when indexing?
Date: Tue, 12 Apr 2005 08:27:26 +0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <6595a9e30ce8023608bc45ff776afef8@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Thread-Index: AcU+sdX6MQzP+I7DS3aaVJW/jbIwvgAZURdg
Message-ID: <auto-000133724868@frontend4.aha.ru>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 

> From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 

> > My problem is, however, that some words needs to have alternatives 
> > where the word is decomposed / decompounded into two or more words:
> >
> > "FooBar Corp" or "cybercafe"
> >
> > should be found when searching for
> >
> > "Foo Ba*" or "cyber cafe"
 
> You'll need some kind of lookup to know how to split a token like 
> "cybercafe" into two words - once you've done that it will be easy to 
> set the position increment of them to zero so that they overlay the 
> original term.

What about putting all synonyms into index? 
Foo Bar Corp, FooBar Corp, FooBarCorp, cyber cafe, cybercafe etc?
In this case we do no need analyze input query.

Pasha Bizhan
 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 05:43:10 2005
Return-Path: <java-user-return-14041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51071 invoked from network); 12 Apr 2005 05:43:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 05:43:10 -0000
Received: (qmail 35197 invoked by uid 500); 12 Apr 2005 05:43:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35176 invoked by uid 500); 12 Apr 2005 05:43:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35158 invoked by uid 99); 12 Apr 2005 05:42:59 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 22:42:58 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 544375B76C; Mon, 11 Apr 2005 22:42:51 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 5326F7F45E
	for <java-user@lucene.apache.org>; Mon, 11 Apr 2005 22:42:51 -0700 (PDT)
Date: Mon, 11 Apr 2005 22:42:51 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: How to include a multi-word synonym to a word when indexing?
In-Reply-To: <6595a9e30ce8023608bc45ff776afef8@ehatchersolutions.com>
Message-ID: <Pine.LNX.4.58.0504112142560.32677@hal.rescomp.berkeley.edu>
References: <BAY13-F1470DA9FF2855922ABE93DD0320@phx.gbl>
 <6595a9e30ce8023608bc45ff776afef8@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: You'll need some kind of lookup to know how to split a token like
: "cybercafe" into two words - once you've done that it will be easy to
: set the position increment of them to zero so that they overlay the
: original term.

but how would you set the position increment of a multi-word synonym so
that phrase/span queries will work?

Assuming you have the following "phrase synonym" (and code that
that can find them during Analysis)...

   [CyberCafe] => [Cyber] [Cafe]
   [IBM] => [International] [Business] [Machines]
   [Cyber] [Cafe] => [CyberCafe]
   [International] [Business] [Machines] => [IBM]

and the source documents:

1) bob bought stock in IBM for five bucks
2) sue went to the cybercafe yesterday
3) joe was at the cafe, cyber chating yesterday

...how would you set the position incriment so that a span/phrase query
for "stock in International Business Machines" would match document #1,
and "cyber cafe" would match document #2 but not #3 ?

the only thing that's ever occured to me is to set the position incriment
of all the words to "0" (but that will still reseult in false positives in
the "cyber cafe" example) or to pick some high default position incriment
(bigger then the longest multi-word synonym) and use that normally, and
reserve incriments of "1" for words in a multi-word synonym.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 06:28:08 2005
Return-Path: <java-user-return-14042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60642 invoked from network); 12 Apr 2005 06:28:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 06:28:08 -0000
Received: (qmail 88636 invoked by uid 500); 12 Apr 2005 06:27:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88612 invoked by uid 500); 12 Apr 2005 06:27:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88598 invoked by uid 99); 12 Apr 2005 06:27:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from cmailm1.svr.pol.co.uk (HELO cmailm1.svr.pol.co.uk) (195.92.193.18)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 11 Apr 2005 23:27:56 -0700
Received: from user-3179.l4.c3.dsl.pol.co.uk ([81.79.108.107] helo=[192.168.1.2])
	by cmailm1.svr.pol.co.uk with esmtp (Exim 4.41)
	id 1DLEsH-0006Lx-4u
	for java-user@lucene.apache.org; Tue, 12 Apr 2005 07:27:49 +0100
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Re: Multi-analyzer ?
Date: Tue, 12 Apr 2005 07:31:01 +0000
User-Agent: KMail/1.8
References: <f472e9a0050410182173e5c40@mail.gmail.com> <200504111613.53674.mail@andy-roberts.net> <f472e9a0050411175353eea998@mail.gmail.com>
In-Reply-To: <f472e9a0050411175353eea998@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504120731.01808.mail@andy-roberts.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 12 Apr 2005 00:53, Eric Chow wrote:
> But how about one document contains more than two different languages ??
>
>
> Eric

If you're indexing many documents which contain multiple languages then it's 
probably just better to use a SimpleAnalyser, rather than one that does any 
language specific stemming or removal of stoplist words.

If there are documents where one language is clearly more dominant than the 
other, then it would probably be ok to use an Analyzer for that language and 
hope it doesn't effect the indexing of the other language too much. However, 
it's clear that you can't really accomodate multi-language documents. It 
would be much easier to ensure all docs were in a single language before 
indexing.

Andy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 12:10:44 2005
Return-Path: <java-user-return-14043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86408 invoked from network); 12 Apr 2005 12:10:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 12:10:44 -0000
Received: (qmail 17443 invoked by uid 500); 12 Apr 2005 12:10:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17421 invoked by uid 500); 12 Apr 2005 12:10:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17403 invoked by uid 99); 12 Apr 2005 12:10:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from smtp201.mail.sc5.yahoo.com (HELO smtp201.mail.sc5.yahoo.com) (216.136.129.91)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 12 Apr 2005 05:10:30 -0700
Received: from unknown (HELO ?24.232.184.152?) (desantisernesto@24.232.184.152 with login)
  by smtp201.mail.sc5.yahoo.com with SMTP; 12 Apr 2005 12:10:26 -0000
Received: from 127.0.0.1 (AVG SMTP 7.0.308 [266.9.6]); Tue, 12 Apr 2005 09:12:48 -0300
Message-ID: <425BBB3F.9010907@colaborativa.net>
Date: Tue, 12 Apr 2005 09:12:47 -0300
From: Ernesto De Santis <ernesto.desantis@colaborativa.net>
Organization: Colaborativa.net
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: es-ar, es, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multi-analyzer ?
References: <f472e9a0050410182173e5c40@mail.gmail.com>	 <200504111002.01179.mail@andy-roberts.net>	 <fe92bd84112cef272a39341e87c70c3d@twcny.rr.com>	 <200504111613.53674.mail@andy-roberts.net> <f472e9a0050411175353eea998@mail.gmail.com>
In-Reply-To: <f472e9a0050411175353eea998@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Maybe you can use PerFieldAnalyzerWrapper.
(I never used this)

Ernesto.

Eric Chow escribió:

>But how about one document contains more than two different languages ??
>
>
>Eric
>
>On Apr 12, 2005 12:13 AM, Andy Roberts <mail@andy-roberts.net> wrote:
>  
>
>>On Monday 11 Apr 2005 14:55, Mike Baranczak wrote:
>>    
>>
>>>Your example with Arabic wouldn't work reliably either - there are
>>>several other languages that use the Arabic script (Persian for
>>>example).
>>>      
>>>
>>Good point. Although you could try a simple approach to test for the
>>additional characters that exist in Persian but not in Arabic. Although, this
>>again is not fool-proof. A letter-model approach would be better but is
>>rather time consuming.
>>
>>    
>>
>>>This is the sort of problem that the end user can solve much better
>>>than the software can.
>>>
>>>      
>>>
>>I completely agree, which is why I originally suggested prompting the user for
>>this info. It may be the case that for the majority of queries, English is
>>the usual language. And it is probably more feasible to do a test to
>>determine whether the query English or not (still very tricky, mind). If not,
>>then prompt the user to specify their input language because otherwise,
>>results will be poor.
>>
>>Andy Roberts
>>
>>    
>>
>>>-MB
>>>
>>>On Apr 11, 2005, at 6:02 AM, Andy Roberts wrote:
>>>      
>>>
>>>>Can you not provide the user with a option list to specify their input
>>>>language?
>>>>
>>>>Language identification can be a pretty tricky field. There are some
>>>>tricks
>>>>you can do with unicode to identify language, e.g., \u0600 - \u06FF
>>>>contains
>>>>the Arabic characters, so if you're input contains lots of chars
>>>>within this
>>>>range, you can guess that the input is Arabic, for example.
>>>>
>>>>The problem comes with differentiating between the languages that use
>>>>a Latin
>>>>alphabet. Again, there are multiple approaches, although the only one
>>>>I know
>>>>of that worked pretty well for identifying European languages was to
>>>>build a
>>>>model based on character bigrams (that is, sequences of two letters)
>>>>[1]
>>>>
>>>>At the end of the day, Lucene cannot help you in choosing the correct
>>>>language
>>>>as it doesn't know, and so it'll be up to you to add the necessary
>>>>logic to
>>>>tell Lucene which Analyzers to utilise. :(
>>>>
>>>>Andy
>>>>
>>>>[1] Churcher, G E; Hayes, J; Hughes, J S; Johnson, S; Souter, C.
>>>>Bigram and
>>>>trigram models for language identification and classification in:
>>>>Evett, L &
>>>>Rose,T (editors) Computational Linguistics for Speech and Handwriting
>>>>Recognition AISB'94 Workshop University of Leeds/AISB. 1994.
>>>>
>>>>On Monday 11 Apr 2005 01:21, Eric Chow wrote:
>>>>        
>>>>
>>>>>Hello,
>>>>>
>>>>>If I don't know the language of the input terms, how can I use
>>>>>different analyzer to search it ?
>>>>>
>>>>>For example, the input box accepts UTF-8 search text, they can be
>>>>>anything, such as Chinese, Japanese, English, Russian, Deuch, etc. How
>>>>>can search any of them or all of them with Lucene?
>>>>>
>>>>>Any example, please?
>>>>>
>>>>>
>>>>>Best Regards,
>>>>>Eric
>>>>>
>>>>>---------------------------------------------------------------------
>>>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>          
>>>>>
>>>>---------------------------------------------------------------------
>>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>        
>>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>      
>>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

-- 
Ernesto De Santis - Colaborativa.net
Córdoba 1147 Piso 6 Oficinas 3 y 4
(S2000AWO) Rosario, SF, Argentina.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 12:19:37 2005
Return-Path: <java-user-return-14044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89805 invoked from network); 12 Apr 2005 12:19:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 12:19:37 -0000
Received: (qmail 29442 invoked by uid 500); 12 Apr 2005 12:19:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29408 invoked by uid 500); 12 Apr 2005 12:19:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29388 invoked by uid 99); 12 Apr 2005 12:19:28 -0000
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ngaard@hotmail.com designates 64.4.31.8 as permitted sender)
Received: from bay13-f8.bay13.hotmail.com (HELO hotmail.com) (64.4.31.8)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 12 Apr 2005 05:19:25 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Tue, 12 Apr 2005 05:19:22 -0700
Message-ID: <BAY13-F82A37FAB12D11988A393FD0330@phx.gbl>
Received: from 193.162.59.125 by by13fd.bay13.hotmail.msn.com with HTTP;
	Tue, 12 Apr 2005 12:19:22 GMT
X-Originating-IP: [193.162.59.125]
X-Originating-Email: [ngaard@hotmail.com]
X-Sender: ngaard@hotmail.com
In-Reply-To: <6595a9e30ce8023608bc45ff776afef8@ehatchersolutions.com>
From: "Peter Hotm. Nørregaard" <ngaard@hotmail.com>
To: java-user@lucene.apache.org
Bcc: 
Subject: Re: How to include a multi-word synonym to a word when indexing?
Date: Tue, 12 Apr 2005 12:19:22 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 12 Apr 2005 12:19:22.0882 (UTC) FILETIME=[DC31D620:01C53F59]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Good point on phrase/span queries, Hostetter.

:Assuming you have the following "phrase synonym" (and code that
:that can find them during Analysis)...
:
:  [CyberCafe] => [Cyber] [Cafe]

...
: the only thing that's ever occured to me is to set the position incriment
: of all the words to "0" (but that will still reseult in false positives in
: the "cyber cafe" example) or to pick some high default position incriment
: (bigger then the longest multi-word synonym) and use that normally, and
: reserve incriments of "1" for words in a multi-word synonym.

A good suggestion, however it does have a small side-effect: If I understand 
you correctly, that strategy will create the following token stream for 
"CyberCafe Inc.", assuming that we increment by, say, 10 per default:
[cybercafe, 1] [cyber, 1] [cafe, 2] [inc, 10]

In that case, a search for the phrase "cybercafe cafe inc" would return a 
match. In this case it is acceptable albeit a bit strange to the user, but 
then again, searching for "cybercafe cafe" IS a bit strange. However, 
situations can be constructed where the result would be a false positive. 
Also, we could end up with no match for phrase queries if the slop-factor is 
too low (e.g. 0): "Cybercafe inc" would not be found unless the same 
analyse-algorithm also is applied to both the document and the query,
And ranking could also be aversely affected.

There is no such concept as a 2-dimensional term vector?
[CyberCafe Inc] => [[cybercafe], [[cyber] [café]]] [inc]
(in theory it would have to be a directed, acyclic graph (DAG), I guess)

_________________________________________________________________
Del din verden med MSN Spaces  http://spaces.msn.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 13:19:56 2005
Return-Path: <java-user-return-14045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26934 invoked from network); 12 Apr 2005 13:19:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 13:19:56 -0000
Received: (qmail 68121 invoked by uid 500); 12 Apr 2005 13:19:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68092 invoked by uid 500); 12 Apr 2005 13:19:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68045 invoked by uid 99); 12 Apr 2005 13:19:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from ylpvm43-ext.prodigy.net (HELO ylpvm43.prodigy.net) (207.115.57.74)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 12 Apr 2005 06:19:33 -0700
Received: from pimout6-ext.prodigy.net (pimout6-ext.prodigy.net [207.115.63.78])
	by ylpvm43.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j3CDJUjp025639
	for <java-user@lucene.apache.org>; Tue, 12 Apr 2005 09:19:31 -0400
X-ORBL: [66.141.52.46]
Received: from [192.168.1.10] (adsl-66-141-52-46.dsl.austtx.swbell.net [66.141.52.46])
	by pimout6-ext.prodigy.net (8.12.10 milter /8.12.10) with ESMTP id j3CDJKbG072118
	for <java-user@lucene.apache.org>; Tue, 12 Apr 2005 09:19:27 -0400
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <dab56f707725e6206fb0b2e1bdd7aed7@otherwise.com>
References: <dab56f707725e6206fb0b2e1bdd7aed7@otherwise.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <725b06dd592826ba5622184fcdb70db7@otherwise.com>
Content-Transfer-Encoding: 7bit
From: Bill Tschumy <bill@otherwise.com>
Subject: Re: Strange sort error
Date: Tue, 12 Apr 2005 08:19:17 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This problem is seeming more and more strange.  It now looks like if  
the fieldName I'm sorting on starts is ASCII "j" or above, the  
RuntimeException is thrown.  Any fieldName that starts with "i" or  
below (including capitals) works.  Can anyone think of what could  
possibly be going on here?


On Apr 11, 2005, at 2:27 PM, Bill Tschumy wrote:

> In my application, by default I display all documents that are in the  
> index.  I sort them either using a "time modified" or "time created".   
> If I have a newly created empty index, I find I get an error if I sort  
> by "time modified" but not "time created".  In either case there are  
> actually no documents that match my query so in reality there is  
> nothing to sort.
>
> Here is my query:
>
> query = new TermQuery(new Term(MyIndexer.CREATOR_KEY,  
> MyIndexer.PARSNIPS_VAL));
> String fieldName = sortType == Parsnips.SORT_BY_MODIFIED ?  
> MyIndexer.MODIFIED_KEY : MyIndexer.CREATED_KEY;
> Sort sorter = new Sort(new SortField(fieldName, SortField.STRING,  
> true));
> hits = searcher.search(query, sorter);
>
> The error I'm getting when using MyIndexer.MODIFIED_KEY (which is  
> "modified") as the sort field is:
>
> java.lang.RuntimeException: no terms in field modified
>         at  
> org.apache.lucene.search.FieldCacheImpl.getStringIndex(FieldCacheImpl.j 
> ava:256)
>         at  
> org.apache.lucene.search.FieldSortedHitQueue.comparatorString(FieldSort 
> edHitQueue.java:265)
>         at  
> org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldS 
> ortedHitQueue.java:180)
>         at  
> org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQueue 
> .java:58)
>         at  
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:122)
>         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
>         at org.apache.lucene.search.Hits.<init>(Hits.java:51)
>         at org.apache.lucene.search.Searcher.search(Searcher.java:41)
>         at  
> com.otherwise.parsnips.MySearcher.search(MySearcher.java:170)
>         at  
> com.otherwise.parsnips.MySearcher.search(MySearcher.java:149)
>         at com.otherwise.parsnips.Parsnips.<init>(Parsnips.java:163)
>         at com.otherwise.parsnips.Parsnips.main(Parsnips.java:1205)
>
> I can't understand why I would be getting this for one sort field but  
> not the other given there are 0 hits anyway in a newly created index.   
> Anyone have any thoughts?  I am using Lucene 1.4.2.
>
> -- 
> Bill Tschumy
> Otherwise -- Austin, TX
> http://www.otherwise.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
-- 
Bill Tschumy
Otherwise -- Austin, TX
http://www.otherwise.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 13:37:26 2005
Return-Path: <java-user-return-14046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33203 invoked from network); 12 Apr 2005 13:37:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 13:37:26 -0000
Received: (qmail 645 invoked by uid 500); 12 Apr 2005 13:37:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 612 invoked by uid 500); 12 Apr 2005 13:37:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 595 invoked by uid 99); 12 Apr 2005 13:37:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 12 Apr 2005 06:37:12 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3AE5713E2125; Tue, 12 Apr 2005 09:37:08 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 5793F13E2120
	for <java-user@lucene.apache.org>; Tue, 12 Apr 2005 09:36:46 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <Pine.LNX.4.58.0504112142560.32677@hal.rescomp.berkeley.edu>
References: <BAY13-F1470DA9FF2855922ABE93DD0320@phx.gbl> <6595a9e30ce8023608bc45ff776afef8@ehatchersolutions.com> <Pine.LNX.4.58.0504112142560.32677@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <083272d3dd992786bff319cda6648504@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to include a multi-word synonym to a word when indexing?
Date: Tue, 12 Apr 2005 09:36:55 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Apr 12, 2005, at 1:42 AM, Chris Hostetter wrote:
>
> : You'll need some kind of lookup to know how to split a token like
> : "cybercafe" into two words - once you've done that it will be easy to
> : set the position increment of them to zero so that they overlay the
> : original term.
>
> but how would you set the position increment of a multi-word synonym so
> that phrase/span queries will work?
>
> Assuming you have the following "phrase synonym" (and code that
> that can find them during Analysis)...
>
>    [CyberCafe] => [Cyber] [Cafe]
>    [IBM] => [International] [Business] [Machines]
>    [Cyber] [Cafe] => [CyberCafe]
>    [International] [Business] [Machines] => [IBM]
>
> and the source documents:
>
> 1) bob bought stock in IBM for five bucks
> 2) sue went to the cybercafe yesterday
> 3) joe was at the cafe, cyber chating yesterday
>
> ...how would you set the position incriment so that a span/phrase query
> for "stock in International Business Machines" would match document #1,
> and "cyber cafe" would match document #2 but not #3 ?

On further thought, my approach would be to handle this on the analysis 
side and not deal with position increments.  The lookup would take 
"cyber cafe" and emit the token "cybercafe".  In your #3 example, the 
tokens would be [cafe] [cyber] and would not match.  If someone issued 
a phrase query for "cyber cafe" the same analysis would turn that into 
a query for "cybercafe".

What drawbacks are there from replacing multiple words with its 
corresponding acryonym/alias during analysis?

> the only thing that's ever occured to me is to set the position 
> incriment

I can't help myself, I'm working with the spell checker as we speak.... 
incrEment :)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 13:39:42 2005
Return-Path: <java-user-return-14047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34106 invoked from network); 12 Apr 2005 13:39:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 13:39:42 -0000
Received: (qmail 5035 invoked by uid 500); 12 Apr 2005 13:39:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5007 invoked by uid 500); 12 Apr 2005 13:39:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4985 invoked by uid 99); 12 Apr 2005 13:39:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 12 Apr 2005 06:39:27 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2874813E2125; Tue, 12 Apr 2005 09:39:22 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 9A45913E2120
	for <java-user@lucene.apache.org>; Tue, 12 Apr 2005 09:38:37 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <725b06dd592826ba5622184fcdb70db7@otherwise.com>
References: <dab56f707725e6206fb0b2e1bdd7aed7@otherwise.com> <725b06dd592826ba5622184fcdb70db7@otherwise.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <adc8773d9da86fed89a6f7823afab71b@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Strange sort error
Date: Tue, 12 Apr 2005 09:38:46 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Could you give us a self-contained test case that reproduces this issue?

	Erik

On Apr 12, 2005, at 9:19 AM, Bill Tschumy wrote:

> This problem is seeming more and more strange.  It now looks like if  
> the fieldName I'm sorting on starts is ASCII "j" or above, the  
> RuntimeException is thrown.  Any fieldName that starts with "i" or  
> below (including capitals) works.  Can anyone think of what could  
> possibly be going on here?
>
>
> On Apr 11, 2005, at 2:27 PM, Bill Tschumy wrote:
>
>> In my application, by default I display all documents that are in the  
>> index.  I sort them either using a "time modified" or "time created".  
>>  If I have a newly created empty index, I find I get an error if I  
>> sort by "time modified" but not "time created".  In either case there  
>> are actually no documents that match my query so in reality there is  
>> nothing to sort.
>>
>> Here is my query:
>>
>> query = new TermQuery(new Term(MyIndexer.CREATOR_KEY,  
>> MyIndexer.PARSNIPS_VAL));
>> String fieldName = sortType == Parsnips.SORT_BY_MODIFIED ?  
>> MyIndexer.MODIFIED_KEY : MyIndexer.CREATED_KEY;
>> Sort sorter = new Sort(new SortField(fieldName, SortField.STRING,  
>> true));
>> hits = searcher.search(query, sorter);
>>
>> The error I'm getting when using MyIndexer.MODIFIED_KEY (which is  
>> "modified") as the sort field is:
>>
>> java.lang.RuntimeException: no terms in field modified
>>         at  
>> org.apache.lucene.search.FieldCacheImpl.getStringIndex(FieldCacheImpl. 
>> java:256)
>>         at  
>> org.apache.lucene.search.FieldSortedHitQueue.comparatorString(FieldSor 
>> tedHitQueue.java:265)
>>         at  
>> org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(Field 
>> SortedHitQueue.java:180)
>>         at  
>> org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQueu 
>> e.java:58)
>>         at  
>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:122)
>>         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
>>         at org.apache.lucene.search.Hits.<init>(Hits.java:51)
>>         at org.apache.lucene.search.Searcher.search(Searcher.java:41)
>>         at  
>> com.otherwise.parsnips.MySearcher.search(MySearcher.java:170)
>>         at  
>> com.otherwise.parsnips.MySearcher.search(MySearcher.java:149)
>>         at com.otherwise.parsnips.Parsnips.<init>(Parsnips.java:163)
>>         at com.otherwise.parsnips.Parsnips.main(Parsnips.java:1205)
>>
>> I can't understand why I would be getting this for one sort field but  
>> not the other given there are 0 hits anyway in a newly created index.  
>>  Anyone have any thoughts?  I am using Lucene 1.4.2.
>>
>> -- 
>> Bill Tschumy
>> Otherwise -- Austin, TX
>> http://www.otherwise.com
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> -- 
> Bill Tschumy
> Otherwise -- Austin, TX
> http://www.otherwise.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 14:33:31 2005
Return-Path: <java-user-return-14048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61566 invoked from network); 12 Apr 2005 14:33:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 14:33:30 -0000
Received: (qmail 57650 invoked by uid 500); 12 Apr 2005 14:33:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57604 invoked by uid 500); 12 Apr 2005 14:33:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57588 invoked by uid 99); 12 Apr 2005 14:33:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mailf0.uni-siegen.de (HELO MAILF0.uni-siegen.de) (141.99.1.40)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 12 Apr 2005 07:33:13 -0700
Received: from mailf1.uni-siegen.de ([141.99.11.41]) by MAILF0.uni-siegen.de with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 12 Apr 2005 16:33:09 +0200
Received: from patricio ([141.99.26.131]) by mailf1.uni-siegen.de with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 12 Apr 2005 16:33:09 +0200
From: "Patricio Galeas" <galeas@informatik.uni-siegen.de>
To: <java-user@lucene.apache.org>
Subject: AW: Terms & Postion from Hits ...
Date: Tue, 12 Apr 2005 16:32:12 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <fa7ece67ad60a1fa04151b5c4adb49a1@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcU+lx+Jt2789rLTS/eyvj6+BRyLxwA0wMWQ
Message-ID: <MAILF1KZmcK8r6beUzm00000316@mailf1.uni-siegen.de>
X-OriginalArrivalTime: 12 Apr 2005 14:33:09.0497 (UTC) FILETIME=[8C6E1690:01C53F6C]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello!
Do You mean:=20
I must compile the latest classes of
/lucene/java/trunk/src/java/org/apache/lucene/index (Rev.159229)
and
/lucene/java/trunk/src/java/org/apache/lucene/document (Rev.150682)

and actualize my actual version of Lucene?

Thank You for your help!!

Patricio



=20

-----Urspr=FCngliche Nachricht-----
Von: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Gesendet: Montag, 11. April 2005 15:05
An: java-user@lucene.apache.org
Betreff: Re: Terms & Postion from Hits ...


On Apr 10, 2005, at 11:52 AM, Patricio Galeas wrote:

> Hello,
> I am new with Lucene. I have following problem.
> When I execute a search I receive the list of document Hits.
> I get without problem the content of the documents too:
>
> for (int i =3D 0; i < hits.length(); i++) {
>       Document doc =3D hits.doc(i);
>       System.out.println(doc.get("content"));
> }
>
> Now, I would like to obtain the List of all Terms (and their=20
> corresponding
> position) from each document (hits.doc(i)).

Lucene 1.4.x contains a term vector feature (see the javadocs for
Field) that you can enable.  This does not give you position information
though.  In the latest codebase (obtained via Subversion) the term =
vector
feature has been enhanced to allow (optionally) the capturing of term
positions and then also term offsets.

I recommend you try out the latest codebase for these features.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 14:54:48 2005
Return-Path: <java-user-return-14049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76567 invoked from network); 12 Apr 2005 14:54:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 14:54:47 -0000
Received: (qmail 17659 invoked by uid 500); 12 Apr 2005 14:54:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17632 invoked by uid 500); 12 Apr 2005 14:54:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17617 invoked by uid 99); 12 Apr 2005 14:54:31 -0000
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ngaard@hotmail.com designates 64.4.31.33 as permitted sender)
Received: from bay13-f33.bay13.hotmail.com (HELO hotmail.com) (64.4.31.33)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 12 Apr 2005 07:54:30 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Tue, 12 Apr 2005 07:54:29 -0700
Message-ID: <BAY13-F339C0C5856C96900E32227D0330@phx.gbl>
Received: from 193.162.59.125 by by13fd.bay13.hotmail.msn.com with HTTP;
	Tue, 12 Apr 2005 14:54:28 GMT
X-Originating-IP: [193.162.59.125]
X-Originating-Email: [ngaard@hotmail.com]
X-Sender: ngaard@hotmail.com
In-Reply-To: <6595a9e30ce8023608bc45ff776afef8@ehatchersolutions.com>
From: "Peter Hotm. Nørregaard" <ngaard@hotmail.com>
To: java-user@lucene.apache.org
Bcc: 
Subject: Re: How to include a multi-word synonym to a word when indexing?
Date: Tue, 12 Apr 2005 14:54:28 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 12 Apr 2005 14:54:29.0139 (UTC) FILETIME=[8727F630:01C53F6F]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>What drawbacks are there from replacing multiple words with its 
>corresponding acryonym/alias during analysis?

- Wildcard search: [cyber] [ca*] would not match [cybercafe]
- Fuzzy search: [cyber] [cage~] would not match [cybercafe]

Peter

_________________________________________________________________
Log på MSN Messenger direkte fra nettet  http://webmessenger.msn.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 16:06:57 2005
Return-Path: <java-user-return-14050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5129 invoked from network); 12 Apr 2005 16:06:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 16:06:56 -0000
Received: (qmail 8931 invoked by uid 500); 12 Apr 2005 16:06:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8874 invoked by uid 500); 12 Apr 2005 16:06:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8626 invoked by uid 99); 12 Apr 2005 16:06:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ns2.pil.dk (HELO ns2.pil.dk) (195.41.47.38)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 12 Apr 2005 09:06:38 -0700
Received: from Wintermute (cpe.atm2-0-112124.0x3ef2c121.arcnxx12.customer.tele.dk [62.242.193.33])
	by ns2.pil.dk (Postfix) with ESMTP id 5498227E19C
	for <java-user@lucene.apache.org>; Tue, 12 Apr 2005 18:06:31 +0200 (CEST)
Reply-To: <ko@yawah.com>
From: "Kristian Ottosen" <ko@yawah.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene on Linux problem...
Date: Tue, 12 Apr 2005 18:06:20 +0200
Organization: YaWah.com
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <1112603090.15511.45.camel@saturn>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcU47+uK7a9o8atJTlOBsBrDk1pQ+AGgfidg
Message-Id: <20050412160631.5498227E19C@ns2.pil.dk>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Thank you for the comments and hints.

It seems like we finally solved this problem - but unfortunately without
being able to pinpoint the exact cause. 

Our application did in fact follow all the Lucene concurrency rules. I
checked, double checked, bought "Lucene in Action" (that I highly recommend
by the way), read chapter 2.9 twice, triple checked and it just didn't do
anything illegal at all. Everything was closed correctly etc.

This was also backed by the fact that it worked absolutely perfect when
using a RAMDirectory instead of an FSDirectory on top of the Linux file.

Further the application also worked perfectly on all Windows, Mac OS X,
Solaris, AS/400 as well as almost all Linux system. But in a handful of
Linux cases (different distributions by the way) it simply behaved very,
very strange causing two possible symptoms:

1) After adding an amount of documents we sometimes got exceptions like this
one:

java.io.FileNotFoundException:
/srv/www/tomcat/demoserver/webapps/erez3/WEB-INF/private/index/_35.fnm
(No such file or directory)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
        at
org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java:376
)
        at
org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
        at
org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
        at org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:53)
        at
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:110)
        at
org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:95)
        at
org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:122)
        at org.apache.lucene.store.Lock$With.run(Lock.java:109)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
        at
org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)
 
while Lucene tried to read a segment which it had already deleted while
merging it with other segments.

2) And also very often:

java.io.IOException: Lock obtain timed out:
Lock@/usr/local/tomcat/current/temp/lucene-4e8e9515c104fa3aef765398cfa76815-
write.lock
        at org.apache.lucene.store.Lock.obtain(Lock.java:58)
        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:223)
        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:213)

The frequency of this second exception was highly dependent on the value of
the writeLockTimeout. The table below shows the number of timeouts
encountered during a single run (add some thousand documents) for different
values of writeLockTimeout:

  20  =    1
 500  =    1
 995  =    1
 999  =    1 
1000  = 3600
1100  = 3252
1500  = 3645 
2000  =  116 
3000  =   66 
4000  =   57 
10000 =   15 
30000 =    7 

Strange isn't it? Mind you that only a single thread is involved. No other
threads are reading or writing to the index. All files including the locks
are stored on a local file system (no NFS or anything).

What we did to finally work around the problem was to stop creating a new
IndexSearcher to check for duplicates before adding each document and
instead re-use it during batch updates. That required some deal of extra
care and management on the part of the application - but as a side effect
also improved performance a bit (I guess).

But it is still a puzzle to me why things didn't work on these Linux boxes
in the first place. It almost seems like the Linux file system sometimes got
"overwhelmed" by the frequent modifications and started returning "stale"
data and/or file status to the application. 

It seems to work now - but I would still love to see a good explanation.

Best Regards from Denmark
Kristian Ottosen
http://www.yawah.com


> -----Original Message-----
> From: Miles Barr [mailto:miles@runtime-collective.com]
> Sent: 4. april 2005 10:25
> To: Lucene User
> Subject: Re: Lucene on Linux problem...
> 
> On Sat, 2005-04-02 at 10:29 +0200, Kristian Ottosen wrote:
> > I wonder if there is general problem running Lucene on top of some of
> the
> > journaling file systems like ReiserFS or Ext3?
> 
> I haven't had any problems running Lucene on either of those file
> systems. I've done updates to the index while people are still searching
> and it all worked fine.
> 
> > The problem may not appear immediately - but only after several
> > thousand documents have been indexed in a row using a combination of
> > IndexSearcher (check for duplicates) and IndexWriter (add document)
> > operations.
> 
> Are you deleting the duplicates as you find them? i.e. are you closing
> and opening reader/writers all the time? If you are, besides
> recommending switching to batch updates, I suggest being really thorough
> with closing everything, e.g.
> 
> IndexReader reader = null;
> IndexWriter writer = null;
> 
> try {
>     reader = IndexReader.open(/* Path to index */);
> 
>     ... do the deletes ...
> 
>     reader.close();
>     reader = null;
> 
>     writer = new IndexWriter(index, /* Your analyzer */, false);
> 
>     ... do the deletes ....
> 
>     writer.optimize();
>     writer.close();
>     writer = null;
> }
> catch (IOException e) {
>     ... do any error processing ...
> }
> finally {
>     // We can do both these closes in the same finally block because if
>     // reader is not null then writer is null, so we don't need to worry
>     // about reader.close() throwing another IOException
>     if (reader != null) {
>         reader.close();
>         reader = null;
>     }
> 
>     if (writer != null) {
>         writer.optimize();
>         writer.close();
>         writer = null;
>     }
> }
> 
> 
> 
> --
> Miles Barr <miles@runtime-collective.com>
> Runtime Collective Ltd.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 18:05:14 2005
Return-Path: <java-user-return-14051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44650 invoked from network); 12 Apr 2005 18:05:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 18:05:14 -0000
Received: (qmail 29363 invoked by uid 500); 12 Apr 2005 18:05:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29288 invoked by uid 500); 12 Apr 2005 18:04:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29264 invoked by uid 99); 12 Apr 2005 18:04:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from ylpvm15-ext.prodigy.net (HELO ylpvm15.prodigy.net) (207.115.57.46)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 12 Apr 2005 11:04:57 -0700
Received: from [192.168.1.10] (adsl-66-141-52-46.dsl.austtx.swbell.net [66.141.52.46])
	by ylpvm15.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j3CI0uba010965
	for <java-user@lucene.apache.org>; Tue, 12 Apr 2005 14:00:57 -0400
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <adc8773d9da86fed89a6f7823afab71b@ehatchersolutions.com>
References: <dab56f707725e6206fb0b2e1bdd7aed7@otherwise.com> <725b06dd592826ba5622184fcdb70db7@otherwise.com> <adc8773d9da86fed89a6f7823afab71b@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <16e966217680968994ed9d8b5d0c47f1@otherwise.com>
Content-Transfer-Encoding: 7bit
From: Bill Tschumy <bill@otherwise.com>
Subject: Re: Strange sort error
Date: Tue, 12 Apr 2005 13:04:54 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Apr 12, 2005, at 8:38 AM, Erik Hatcher wrote:

> Could you give us a self-contained test case that reproduces this  
> issue?
>
> 	Erik
>

Here is a small program that will manifest the error.  Hopefully  
someone can explain the problem.  It happens with Lucene 1.4.2 and  
1.4.3.

file: SortProblem.java
=========================
import java.io.*;
import org.apache.lucene.search.*;
import org.apache.lucene.index.*;
import org.apache.lucene.store.*;
import org.apache.lucene.document.*;
import org.apache.lucene.analysis.standard.StandardAnalyzer;

/**
  *  This program demonstrates a problem I'm having with Lucene.  If I  
search for
  *  documents with a particular field name/value pair and sort them  
based upon
  *  another field, I sometimes get a RuntimeException thrown.  This  
happens when the
  *  Hits comes back empty and the sort field name begins with a letter  
< "j".  For
  *  the bug to manifest it appears I also need to have an unrelated  
document in the
  *  index that is storing version information.
  **/

public class SortProblem
{

     private static String INDEX_DIRECTORY     = "SortProblemIndex";

     // This is the field name of a field in the dcoument that hold  
version
     // information.  The bug happens if this field name has certain  
values.
     // "creatorVal" will fail, but "xreatorVal" will not.  Very wierd.
     private static String VERSION_CREATOR_KEY = "creatorVer";

     private static String INDEX_VERSION_VAL   = "indexVersionVal";
     private static String INDEX_VERSION_KEY   = "indexVersion";
     private static String INDEX_VERSION       = "1.1";
     private static String CREATOR_KEY         = "creator";
     private static String PARSNIPS_VAL        = "Parsnips";

     public static void main(String[] args)
     {
         initIndex(INDEX_DIRECTORY);
         // The search appears to fail if the fieldName starts with a  
letter >= "j".
         // The first and last search here will work while the middle  
will fail.
         search(INDEX_DIRECTORY, "aaa");
         search(INDEX_DIRECTORY, "mmm");
         search(INDEX_DIRECTORY, "bbb");
     }


     private static void initIndex(String directoryName)
     {
         File indexDir  = new File(directoryName);
         if (indexDir.exists())
             deleteFileOrDirectory(indexDir);
         indexDir.mkdir();
         try
         {
             IndexWriter writer = new IndexWriter(indexDir, new  
StandardAnalyzer(), true);
             // Adding the one document which contains version  
information seems
             // necessary to cause some search/sorts to fail.
             Document doc = new Document();
             doc.add(Field.Keyword(VERSION_CREATOR_KEY,  
INDEX_VERSION_VAL));
             doc.add(Field.Keyword(INDEX_VERSION_KEY, INDEX_VERSION));
             writer.addDocument(doc);
             writer.close();
         }
         catch (IOException ioe)
         {
             ioe.printStackTrace();
         }
     }


     private static void search(String directoryName, String  
sortFieldName)
     {
         try
         {
             File indexDir  = new File(directoryName);
             Directory fsDir = FSDirectory.getDirectory(indexDir, false);
             IndexSearcher searcher = new IndexSearcher(fsDir);
             Hits hits;
             Query query = new TermQuery(new Term(CREATOR_KEY,  
PARSNIPS_VAL));
             Sort sorter = new Sort(new SortField(sortFieldName,  
SortField.STRING, true));
             try
             {
                 hits = searcher.search(query, sorter);
                 System.out.println("sort on " + sortFieldName + "  
successful.");
             }
             catch (RuntimeException e)
             {
                 System.out.println("sort on " + sortFieldName + "  
failed.");
                 e.printStackTrace();
             }
         }
         catch (IOException e)
         {
             e.printStackTrace();
         }

     }

     private static boolean deleteFileOrDirectory(File dir)
     {
         if (dir.isDirectory())
         {
             String[] children = dir.list();
             for (int i = 0; i < children.length; i++)
             {
                 boolean success = deleteFileOrDirectory(new File(dir,  
children[i]));
                 if (!success)
                 {
                     return false;
                 }
             }
         }
         // The directory is now empty so delete it
         return dir.delete();
     }
}



> On Apr 12, 2005, at 9:19 AM, Bill Tschumy wrote:
>
>> This problem is seeming more and more strange.  It now looks like if  
>> the fieldName I'm sorting on starts is ASCII "j" or above, the  
>> RuntimeException is thrown.  Any fieldName that starts with "i" or  
>> below (including capitals) works.  Can anyone think of what could  
>> possibly be going on here?
>>
>>
>> On Apr 11, 2005, at 2:27 PM, Bill Tschumy wrote:
>>
>>> In my application, by default I display all documents that are in  
>>> the index.  I sort them either using a "time modified" or "time  
>>> created".  If I have a newly created empty index, I find I get an  
>>> error if I sort by "time modified" but not "time created".  In  
>>> either case there are actually no documents that match my query so  
>>> in reality there is nothing to sort.
>>>
>>> Here is my query:
>>>
>>> query = new TermQuery(new Term(MyIndexer.CREATOR_KEY,  
>>> MyIndexer.PARSNIPS_VAL));
>>> String fieldName = sortType == Parsnips.SORT_BY_MODIFIED ?  
>>> MyIndexer.MODIFIED_KEY : MyIndexer.CREATED_KEY;
>>> Sort sorter = new Sort(new SortField(fieldName, SortField.STRING,  
>>> true));
>>> hits = searcher.search(query, sorter);
>>>
>>> The error I'm getting when using MyIndexer.MODIFIED_KEY (which is  
>>> "modified") as the sort field is:
>>>
>>> java.lang.RuntimeException: no terms in field modified
>>>         at  
>>> org.apache.lucene.search.FieldCacheImpl.getStringIndex(FieldCacheImpl 
>>> .java:256)
>>>         at  
>>> org.apache.lucene.search.FieldSortedHitQueue.comparatorString(FieldSo 
>>> rtedHitQueue.java:265)
>>>         at  
>>> org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(Fiel 
>>> dSortedHitQueue.java:180)
>>>         at  
>>> org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQue 
>>> ue.java:58)
>>>         at  
>>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
>>> 122)
>>>         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
>>>         at org.apache.lucene.search.Hits.<init>(Hits.java:51)
>>>         at org.apache.lucene.search.Searcher.search(Searcher.java:41)
>>>         at  
>>> com.otherwise.parsnips.MySearcher.search(MySearcher.java:170)
>>>         at  
>>> com.otherwise.parsnips.MySearcher.search(MySearcher.java:149)
>>>         at com.otherwise.parsnips.Parsnips.<init>(Parsnips.java:163)
>>>         at com.otherwise.parsnips.Parsnips.main(Parsnips.java:1205)
>>>
>>> I can't understand why I would be getting this for one sort field  
>>> but not the other given there are 0 hits anyway in a newly created  
>>> index.  Anyone have any thoughts?  I am using Lucene 1.4.2.
>>>
>>> -- 
>>> Bill Tschumy
>>> Otherwise -- Austin, TX
>>> http://www.otherwise.com
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> -- 
>> Bill Tschumy
>> Otherwise -- Austin, TX
>> http://www.otherwise.com
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
-- 
Bill Tschumy
Otherwise -- Austin, TX
http://www.otherwise.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 18:32:57 2005
Return-Path: <java-user-return-14052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53364 invoked from network); 12 Apr 2005 18:32:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 18:32:57 -0000
Received: (qmail 3132 invoked by uid 500); 12 Apr 2005 18:32:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3108 invoked by uid 500); 12 Apr 2005 18:32:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3095 invoked by uid 99); 12 Apr 2005 18:32:44 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.206 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 12 Apr 2005 11:32:43 -0700
Received: by rproxy.gmail.com with SMTP id a41so1591975rng
        for <java-user@lucene.apache.org>; Tue, 12 Apr 2005 11:32:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=IaBxPnUxcZPuRfbX2WWxpFJld7KUWPBNyxLbI10nljCRMMkDvK7bjiDmJ7RCpUAf0axdfPuz9IZFSUASA8U8aVz67hgBSxTA7hDkpg9gvTKttuvFWRMlFkyreNCRBu9rNbcbGFww0ZskcWcOq7zA2biPMQzccj+sFxONxy/rcEM=
Received: by 10.38.74.9 with SMTP id w9mr5356212rna;
        Tue, 12 Apr 2005 11:32:40 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Tue, 12 Apr 2005 11:32:40 -0700 (PDT)
Message-ID: <c68e391705041211325f585cd5@mail.gmail.com>
Date: Tue, 12 Apr 2005 14:32:40 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Strange sort error
In-Reply-To: <16e966217680968994ed9d8b5d0c47f1@otherwise.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <dab56f707725e6206fb0b2e1bdd7aed7@otherwise.com>
	 <725b06dd592826ba5622184fcdb70db7@otherwise.com>
	 <adc8773d9da86fed89a6f7823afab71b@ehatchersolutions.com>
	 <16e966217680968994ed9d8b5d0c47f1@otherwise.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>  Any fieldName that starts with "i" or
> below (including capitals) works.  Can anyone think of what could
> possibly be going on here?

Looks like you uncovered an obscure sorting bug.  
The reason that fields >= "j" fail is that your last indexed field
(and hence the last indexed term) starts with "i" (specifically
"indexVersion").

>      private static String VERSION_CREATOR_KEY = "creatorVer";
>      private static String INDEX_VERSION_KEY   = "indexVersion";

If you changed these to "a" and "aa", then all three tests would fail.

-Yonik


On Apr 12, 2005 2:04 PM, Bill Tschumy <bill@otherwise.com> wrote:
> On Apr 12, 2005, at 8:38 AM, Erik Hatcher wrote:
> 
> > Could you give us a self-contained test case that reproduces this
> > issue?
> >
> >       Erik
> >
> 
> Here is a small program that will manifest the error.  Hopefully
> someone can explain the problem.  It happens with Lucene 1.4.2 and
> 1.4.3.
> 
> file: SortProblem.java
> =========================
> import java.io.*;
> import org.apache.lucene.search.*;
> import org.apache.lucene.index.*;
> import org.apache.lucene.store.*;
> import org.apache.lucene.document.*;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> 
> /**
>   *  This program demonstrates a problem I'm having with Lucene.  If I
> search for
>   *  documents with a particular field name/value pair and sort them
> based upon
>   *  another field, I sometimes get a RuntimeException thrown.  This
> happens when the
>   *  Hits comes back empty and the sort field name begins with a letter
> < "j".  For
>   *  the bug to manifest it appears I also need to have an unrelated
> document in the
>   *  index that is storing version information.
>   **/
> 
> public class SortProblem
> {
> 
>      private static String INDEX_DIRECTORY     = "SortProblemIndex";
> 
>      // This is the field name of a field in the dcoument that hold
> version
>      // information.  The bug happens if this field name has certain
> values.
>      // "creatorVal" will fail, but "xreatorVal" will not.  Very wierd.
>      private static String VERSION_CREATOR_KEY = "creatorVer";
> 
>      private static String INDEX_VERSION_VAL   = "indexVersionVal";
>      private static String INDEX_VERSION_KEY   = "indexVersion";
>      private static String INDEX_VERSION       = "1.1";
>      private static String CREATOR_KEY         = "creator";
>      private static String PARSNIPS_VAL        = "Parsnips";
> 
>      public static void main(String[] args)
>      {
>          initIndex(INDEX_DIRECTORY);
>          // The search appears to fail if the fieldName starts with a
> letter >= "j".
>          // The first and last search here will work while the middle
> will fail.
>          search(INDEX_DIRECTORY, "aaa");
>          search(INDEX_DIRECTORY, "mmm");
>          search(INDEX_DIRECTORY, "bbb");
>      }
> 
>      private static void initIndex(String directoryName)
>      {
>          File indexDir  = new File(directoryName);
>          if (indexDir.exists())
>              deleteFileOrDirectory(indexDir);
>          indexDir.mkdir();
>          try
>          {
>              IndexWriter writer = new IndexWriter(indexDir, new
> StandardAnalyzer(), true);
>              // Adding the one document which contains version
> information seems
>              // necessary to cause some search/sorts to fail.
>              Document doc = new Document();
>              doc.add(Field.Keyword(VERSION_CREATOR_KEY,
> INDEX_VERSION_VAL));
>              doc.add(Field.Keyword(INDEX_VERSION_KEY, INDEX_VERSION));
>              writer.addDocument(doc);
>              writer.close();
>          }
>          catch (IOException ioe)
>          {
>              ioe.printStackTrace();
>          }
>      }
> 
>      private static void search(String directoryName, String
> sortFieldName)
>      {
>          try
>          {
>              File indexDir  = new File(directoryName);
>              Directory fsDir = FSDirectory.getDirectory(indexDir, false);
>              IndexSearcher searcher = new IndexSearcher(fsDir);
>              Hits hits;
>              Query query = new TermQuery(new Term(CREATOR_KEY,
> PARSNIPS_VAL));
>              Sort sorter = new Sort(new SortField(sortFieldName,
> SortField.STRING, true));
>              try
>              {
>                  hits = searcher.search(query, sorter);
>                  System.out.println("sort on " + sortFieldName + "
> successful.");
>              }
>              catch (RuntimeException e)
>              {
>                  System.out.println("sort on " + sortFieldName + "
> failed.");
>                  e.printStackTrace();
>              }
>          }
>          catch (IOException e)
>          {
>              e.printStackTrace();
>          }
> 
>      }
> 
>      private static boolean deleteFileOrDirectory(File dir)
>      {
>          if (dir.isDirectory())
>          {
>              String[] children = dir.list();
>              for (int i = 0; i < children.length; i++)
>              {
>                  boolean success = deleteFileOrDirectory(new File(dir,
> children[i]));
>                  if (!success)
>                  {
>                      return false;
>                  }
>              }
>          }
>          // The directory is now empty so delete it
>          return dir.delete();
>      }
> }
> 
> > On Apr 12, 2005, at 9:19 AM, Bill Tschumy wrote:
> >
> >> This problem is seeming more and more strange.  It now looks like if
> >> the fieldName I'm sorting on starts is ASCII "j" or above, the
> >> RuntimeException is thrown.  Any fieldName that starts with "i" or
> >> below (including capitals) works.  Can anyone think of what could
> >> possibly be going on here?
> >>
> >>
> >> On Apr 11, 2005, at 2:27 PM, Bill Tschumy wrote:
> >>
> >>> In my application, by default I display all documents that are in
> >>> the index.  I sort them either using a "time modified" or "time
> >>> created".  If I have a newly created empty index, I find I get an
> >>> error if I sort by "time modified" but not "time created".  In
> >>> either case there are actually no documents that match my query so
> >>> in reality there is nothing to sort.
> >>>
> >>> Here is my query:
> >>>
> >>> query = new TermQuery(new Term(MyIndexer.CREATOR_KEY,
> >>> MyIndexer.PARSNIPS_VAL));
> >>> String fieldName = sortType == Parsnips.SORT_BY_MODIFIED ?
> >>> MyIndexer.MODIFIED_KEY : MyIndexer.CREATED_KEY;
> >>> Sort sorter = new Sort(new SortField(fieldName, SortField.STRING,
> >>> true));
> >>> hits = searcher.search(query, sorter);
> >>>
> >>> The error I'm getting when using MyIndexer.MODIFIED_KEY (which is
> >>> "modified") as the sort field is:
> >>>
> >>> java.lang.RuntimeException: no terms in field modified
> >>>         at
> >>> org.apache.lucene.search.FieldCacheImpl.getStringIndex(FieldCacheImpl
> >>> .java:256)
> >>>         at
> >>> org.apache.lucene.search.FieldSortedHitQueue.comparatorString(FieldSo
> >>> rtedHitQueue.java:265)
> >>>         at
> >>> org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(Fiel
> >>> dSortedHitQueue.java:180)
> >>>         at
> >>> org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQue
> >>> ue.java:58)
> >>>         at
> >>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:
> >>> 122)
> >>>         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
> >>>         at org.apache.lucene.search.Hits.<init>(Hits.java:51)
> >>>         at org.apache.lucene.search.Searcher.search(Searcher.java:41)
> >>>         at
> >>> com.otherwise.parsnips.MySearcher.search(MySearcher.java:170)
> >>>         at
> >>> com.otherwise.parsnips.MySearcher.search(MySearcher.java:149)
> >>>         at com.otherwise.parsnips.Parsnips.<init>(Parsnips.java:163)
> >>>         at com.otherwise.parsnips.Parsnips.main(Parsnips.java:1205)
> >>>
> >>> I can't understand why I would be getting this for one sort field
> >>> but not the other given there are 0 hits anyway in a newly created
> >>> index.  Anyone have any thoughts?  I am using Lucene 1.4.2.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 18:51:04 2005
Return-Path: <java-user-return-14053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58671 invoked from network); 12 Apr 2005 18:51:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 18:51:04 -0000
Received: (qmail 39010 invoked by uid 500); 12 Apr 2005 18:50:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38990 invoked by uid 500); 12 Apr 2005 18:50:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38968 invoked by uid 99); 12 Apr 2005 18:50:56 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.205 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.205)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 12 Apr 2005 11:50:54 -0700
Received: by rproxy.gmail.com with SMTP id b11so1394471rne
        for <java-user@lucene.apache.org>; Tue, 12 Apr 2005 11:50:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=F19jhSglvRERsPfaVXgk6GzN0R/VVD5mwrgKqCjvPLNZ0cBC33zt/Mtwftxrle9dONE2i7VaaAwnMG/hjKNfgrggEANgJ0yzHBruONFQJxZUAnoEfU1yHYIfiR2KUBNpypxZ7AkHqmTjEedtiZt+WHXp+D0fUn11pEPEByOpZqY=
Received: by 10.38.155.3 with SMTP id c3mr1261316rne;
        Tue, 12 Apr 2005 11:50:51 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Tue, 12 Apr 2005 11:50:51 -0700 (PDT)
Message-ID: <c68e39170504121150647538c7@mail.gmail.com>
Date: Tue, 12 Apr 2005 14:50:51 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Strange sort error
In-Reply-To: <c68e391705041211325f585cd5@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <dab56f707725e6206fb0b2e1bdd7aed7@otherwise.com>
	 <725b06dd592826ba5622184fcdb70db7@otherwise.com>
	 <adc8773d9da86fed89a6f7823afab71b@ehatchersolutions.com>
	 <16e966217680968994ed9d8b5d0c47f1@otherwise.com>
	 <c68e391705041211325f585cd5@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

A workaround until this problem is fixed in Lucene would be to add an
indexed sentinel field to a single doc in the collection that will be
larger (after) all other fields that you may try a sort on.

Example:
            String sentinel = new String(new char[]{0xffff}); 
            doc.add(Field.Keyword(sentinel, sentinel));

-Yonik

On Apr 12, 2005 2:32 PM, Yonik Seeley <yseeley@gmail.com> wrote:
> >  Any fieldName that starts with "i" or
> > below (including capitals) works.  Can anyone think of what could
> > possibly be going on here?
> 
> Looks like you uncovered an obscure sorting bug.
> The reason that fields >= "j" fail is that your last indexed field
> (and hence the last indexed term) starts with "i" (specifically
> "indexVersion").
> 
> >      private static String VERSION_CREATOR_KEY = "creatorVer";
> >      private static String INDEX_VERSION_KEY   = "indexVersion";
> 
> If you changed these to "a" and "aa", then all three tests would fail.
> 
> -Yonik
> 
> 
> On Apr 12, 2005 2:04 PM, Bill Tschumy <bill@otherwise.com> wrote:
> > On Apr 12, 2005, at 8:38 AM, Erik Hatcher wrote:
> >
> > > Could you give us a self-contained test case that reproduces this
> > > issue?
> > >
> > >       Erik
> > >
> >
> > Here is a small program that will manifest the error.  Hopefully
> > someone can explain the problem.  It happens with Lucene 1.4.2 and
> > 1.4.3.
> >
> > file: SortProblem.java
> > =========================
> > import java.io.*;
> > import org.apache.lucene.search.*;
> > import org.apache.lucene.index.*;
> > import org.apache.lucene.store.*;
> > import org.apache.lucene.document.*;
> > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> >
> > /**
> >   *  This program demonstrates a problem I'm having with Lucene.  If I
> > search for
> >   *  documents with a particular field name/value pair and sort them
> > based upon
> >   *  another field, I sometimes get a RuntimeException thrown.  This
> > happens when the
> >   *  Hits comes back empty and the sort field name begins with a letter
> > < "j".  For
> >   *  the bug to manifest it appears I also need to have an unrelated
> > document in the
> >   *  index that is storing version information.
> >   **/
> >
> > public class SortProblem
> > {
> >
> >      private static String INDEX_DIRECTORY     = "SortProblemIndex";
> >
> >      // This is the field name of a field in the dcoument that hold
> > version
> >      // information.  The bug happens if this field name has certain
> > values.
> >      // "creatorVal" will fail, but "xreatorVal" will not.  Very wierd.
> >      private static String VERSION_CREATOR_KEY = "creatorVer";
> >
> >      private static String INDEX_VERSION_VAL   = "indexVersionVal";
> >      private static String INDEX_VERSION_KEY   = "indexVersion";
> >      private static String INDEX_VERSION       = "1.1";
> >      private static String CREATOR_KEY         = "creator";
> >      private static String PARSNIPS_VAL        = "Parsnips";
> >
> >      public static void main(String[] args)
> >      {
> >          initIndex(INDEX_DIRECTORY);
> >          // The search appears to fail if the fieldName starts with a
> > letter >= "j".
> >          // The first and last search here will work while the middle
> > will fail.
> >          search(INDEX_DIRECTORY, "aaa");
> >          search(INDEX_DIRECTORY, "mmm");
> >          search(INDEX_DIRECTORY, "bbb");
> >      }
> >
> >      private static void initIndex(String directoryName)
> >      {
> >          File indexDir  = new File(directoryName);
> >          if (indexDir.exists())
> >              deleteFileOrDirectory(indexDir);
> >          indexDir.mkdir();
> >          try
> >          {
> >              IndexWriter writer = new IndexWriter(indexDir, new
> > StandardAnalyzer(), true);
> >              // Adding the one document which contains version
> > information seems
> >              // necessary to cause some search/sorts to fail.
> >              Document doc = new Document();
> >              doc.add(Field.Keyword(VERSION_CREATOR_KEY,
> > INDEX_VERSION_VAL));
> >              doc.add(Field.Keyword(INDEX_VERSION_KEY, INDEX_VERSION));
> >              writer.addDocument(doc);
> >              writer.close();
> >          }
> >          catch (IOException ioe)
> >          {
> >              ioe.printStackTrace();
> >          }
> >      }
> >
> >      private static void search(String directoryName, String
> > sortFieldName)
> >      {
> >          try
> >          {
> >              File indexDir  = new File(directoryName);
> >              Directory fsDir = FSDirectory.getDirectory(indexDir, false);
> >              IndexSearcher searcher = new IndexSearcher(fsDir);
> >              Hits hits;
> >              Query query = new TermQuery(new Term(CREATOR_KEY,
> > PARSNIPS_VAL));
> >              Sort sorter = new Sort(new SortField(sortFieldName,
> > SortField.STRING, true));
> >              try
> >              {
> >                  hits = searcher.search(query, sorter);
> >                  System.out.println("sort on " + sortFieldName + "
> > successful.");
> >              }
> >              catch (RuntimeException e)
> >              {
> >                  System.out.println("sort on " + sortFieldName + "
> > failed.");
> >                  e.printStackTrace();
> >              }
> >          }
> >          catch (IOException e)
> >          {
> >              e.printStackTrace();
> >          }
> >
> >      }
> >
> >      private static boolean deleteFileOrDirectory(File dir)
> >      {
> >          if (dir.isDirectory())
> >          {
> >              String[] children = dir.list();
> >              for (int i = 0; i < children.length; i++)
> >              {
> >                  boolean success = deleteFileOrDirectory(new File(dir,
> > children[i]));
> >                  if (!success)
> >                  {
> >                      return false;
> >                  }
> >              }
> >          }
> >          // The directory is now empty so delete it
> >          return dir.delete();
> >      }
> > }
> >
> > > On Apr 12, 2005, at 9:19 AM, Bill Tschumy wrote:
> > >
> > >> This problem is seeming more and more strange.  It now looks like if
> > >> the fieldName I'm sorting on starts is ASCII "j" or above, the
> > >> RuntimeException is thrown.  Any fieldName that starts with "i" or
> > >> below (including capitals) works.  Can anyone think of what could
> > >> possibly be going on here?
> > >>
> > >>
> > >> On Apr 11, 2005, at 2:27 PM, Bill Tschumy wrote:
> > >>
> > >>> In my application, by default I display all documents that are in
> > >>> the index.  I sort them either using a "time modified" or "time
> > >>> created".  If I have a newly created empty index, I find I get an
> > >>> error if I sort by "time modified" but not "time created".  In
> > >>> either case there are actually no documents that match my query so
> > >>> in reality there is nothing to sort.
> > >>>
> > >>> Here is my query:
> > >>>
> > >>> query = new TermQuery(new Term(MyIndexer.CREATOR_KEY,
> > >>> MyIndexer.PARSNIPS_VAL));
> > >>> String fieldName = sortType == Parsnips.SORT_BY_MODIFIED ?
> > >>> MyIndexer.MODIFIED_KEY : MyIndexer.CREATED_KEY;
> > >>> Sort sorter = new Sort(new SortField(fieldName, SortField.STRING,
> > >>> true));
> > >>> hits = searcher.search(query, sorter);
> > >>>
> > >>> The error I'm getting when using MyIndexer.MODIFIED_KEY (which is
> > >>> "modified") as the sort field is:
> > >>>
> > >>> java.lang.RuntimeException: no terms in field modified
> > >>>         at
> > >>> org.apache.lucene.search.FieldCacheImpl.getStringIndex(FieldCacheImpl
> > >>> .java:256)
> > >>>         at
> > >>> org.apache.lucene.search.FieldSortedHitQueue.comparatorString(FieldSo
> > >>> rtedHitQueue.java:265)
> > >>>         at
> > >>> org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(Fiel
> > >>> dSortedHitQueue.java:180)
> > >>>         at
> > >>> org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQue
> > >>> ue.java:58)
> > >>>         at
> > >>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:
> > >>> 122)
> > >>>         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
> > >>>         at org.apache.lucene.search.Hits.<init>(Hits.java:51)
> > >>>         at org.apache.lucene.search.Searcher.search(Searcher.java:41)
> > >>>         at
> > >>> com.otherwise.parsnips.MySearcher.search(MySearcher.java:170)
> > >>>         at
> > >>> com.otherwise.parsnips.MySearcher.search(MySearcher.java:149)
> > >>>         at com.otherwise.parsnips.Parsnips.<init>(Parsnips.java:163)
> > >>>         at com.otherwise.parsnips.Parsnips.main(Parsnips.java:1205)
> > >>>
> > >>> I can't understand why I would be getting this for one sort field
> > >>> but not the other given there are 0 hits anyway in a newly created
> > >>> index.  Anyone have any thoughts?  I am using Lucene 1.4.2.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 19:17:53 2005
Return-Path: <java-user-return-14054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76017 invoked from network); 12 Apr 2005 19:17:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 19:17:49 -0000
Received: (qmail 24779 invoked by uid 500); 12 Apr 2005 19:17:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24760 invoked by uid 500); 12 Apr 2005 19:17:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24745 invoked by uid 99); 12 Apr 2005 19:17:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from ylpvm43-ext.prodigy.net (HELO ylpvm43.prodigy.net) (207.115.57.74)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 12 Apr 2005 12:17:36 -0700
Received: from pimout7-ext.prodigy.net (pimout7-ext.prodigy.net [207.115.63.58])
	by ylpvm43.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j3CJHZl8008527
	for <java-user@lucene.apache.org>; Tue, 12 Apr 2005 15:17:35 -0400
X-ORBL: [66.141.52.46]
Received: from [192.168.1.10] (adsl-66-141-52-46.dsl.austtx.swbell.net [66.141.52.46])
	by pimout7-ext.prodigy.net (8.12.10 milter /8.12.10) with ESMTP id j3CJHTQC197996
	for <java-user@lucene.apache.org>; Tue, 12 Apr 2005 15:17:31 -0400
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <c68e39170504121150647538c7@mail.gmail.com>
References: <dab56f707725e6206fb0b2e1bdd7aed7@otherwise.com> <725b06dd592826ba5622184fcdb70db7@otherwise.com> <adc8773d9da86fed89a6f7823afab71b@ehatchersolutions.com> <16e966217680968994ed9d8b5d0c47f1@otherwise.com> <c68e391705041211325f585cd5@mail.gmail.com> <c68e39170504121150647538c7@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <d2f7c72fc4e3fc3d79bce27f1426b1c4@otherwise.com>
Content-Transfer-Encoding: 7bit
From: Bill Tschumy <bill@otherwise.com>
Subject: Re: Strange sort error
Date: Tue, 12 Apr 2005 14:17:30 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Great!  Thanks for looking at it and thanks for the work around.


On Apr 12, 2005, at 1:50 PM, Yonik Seeley wrote:

> A workaround until this problem is fixed in Lucene would be to add an
> indexed sentinel field to a single doc in the collection that will be
> larger (after) all other fields that you may try a sort on.
>
> Example:
>             String sentinel = new String(new char[]{0xffff});
>             doc.add(Field.Keyword(sentinel, sentinel));
>
> -Yonik
>
> On Apr 12, 2005 2:32 PM, Yonik Seeley <yseeley@gmail.com> wrote:
>>>  Any fieldName that starts with "i" or
>>> below (including capitals) works.  Can anyone think of what could
>>> possibly be going on here?
>>
>> Looks like you uncovered an obscure sorting bug.
>> The reason that fields >= "j" fail is that your last indexed field
>> (and hence the last indexed term) starts with "i" (specifically
>> "indexVersion").
>>
>>>      private static String VERSION_CREATOR_KEY = "creatorVer";
>>>      private static String INDEX_VERSION_KEY   = "indexVersion";
>>
>> If you changed these to "a" and "aa", then all three tests would fail.
>>
>> -Yonik
>>
>>
>> On Apr 12, 2005 2:04 PM, Bill Tschumy <bill@otherwise.com> wrote:
>>> On Apr 12, 2005, at 8:38 AM, Erik Hatcher wrote:
>>>
>>>> Could you give us a self-contained test case that reproduces this
>>>> issue?
>>>>
>>>>       Erik
>>>>
>>>
>>> Here is a small program that will manifest the error.  Hopefully
>>> someone can explain the problem.  It happens with Lucene 1.4.2 and
>>> 1.4.3.
>>>
>>> file: SortProblem.java
>>> =========================
>>> import java.io.*;
>>> import org.apache.lucene.search.*;
>>> import org.apache.lucene.index.*;
>>> import org.apache.lucene.store.*;
>>> import org.apache.lucene.document.*;
>>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>>>
>>> /**
>>>   *  This program demonstrates a problem I'm having with Lucene.  If  
>>> I
>>> search for
>>>   *  documents with a particular field name/value pair and sort them
>>> based upon
>>>   *  another field, I sometimes get a RuntimeException thrown.  This
>>> happens when the
>>>   *  Hits comes back empty and the sort field name begins with a  
>>> letter
>>> < "j".  For
>>>   *  the bug to manifest it appears I also need to have an unrelated
>>> document in the
>>>   *  index that is storing version information.
>>>   **/
>>>
>>> public class SortProblem
>>> {
>>>
>>>      private static String INDEX_DIRECTORY     = "SortProblemIndex";
>>>
>>>      // This is the field name of a field in the dcoument that hold
>>> version
>>>      // information.  The bug happens if this field name has certain
>>> values.
>>>      // "creatorVal" will fail, but "xreatorVal" will not.  Very  
>>> wierd.
>>>      private static String VERSION_CREATOR_KEY = "creatorVer";
>>>
>>>      private static String INDEX_VERSION_VAL   = "indexVersionVal";
>>>      private static String INDEX_VERSION_KEY   = "indexVersion";
>>>      private static String INDEX_VERSION       = "1.1";
>>>      private static String CREATOR_KEY         = "creator";
>>>      private static String PARSNIPS_VAL        = "Parsnips";
>>>
>>>      public static void main(String[] args)
>>>      {
>>>          initIndex(INDEX_DIRECTORY);
>>>          // The search appears to fail if the fieldName starts with a
>>> letter >= "j".
>>>          // The first and last search here will work while the middle
>>> will fail.
>>>          search(INDEX_DIRECTORY, "aaa");
>>>          search(INDEX_DIRECTORY, "mmm");
>>>          search(INDEX_DIRECTORY, "bbb");
>>>      }
>>>
>>>      private static void initIndex(String directoryName)
>>>      {
>>>          File indexDir  = new File(directoryName);
>>>          if (indexDir.exists())
>>>              deleteFileOrDirectory(indexDir);
>>>          indexDir.mkdir();
>>>          try
>>>          {
>>>              IndexWriter writer = new IndexWriter(indexDir, new
>>> StandardAnalyzer(), true);
>>>              // Adding the one document which contains version
>>> information seems
>>>              // necessary to cause some search/sorts to fail.
>>>              Document doc = new Document();
>>>              doc.add(Field.Keyword(VERSION_CREATOR_KEY,
>>> INDEX_VERSION_VAL));
>>>              doc.add(Field.Keyword(INDEX_VERSION_KEY,  
>>> INDEX_VERSION));
>>>              writer.addDocument(doc);
>>>              writer.close();
>>>          }
>>>          catch (IOException ioe)
>>>          {
>>>              ioe.printStackTrace();
>>>          }
>>>      }
>>>
>>>      private static void search(String directoryName, String
>>> sortFieldName)
>>>      {
>>>          try
>>>          {
>>>              File indexDir  = new File(directoryName);
>>>              Directory fsDir = FSDirectory.getDirectory(indexDir,  
>>> false);
>>>              IndexSearcher searcher = new IndexSearcher(fsDir);
>>>              Hits hits;
>>>              Query query = new TermQuery(new Term(CREATOR_KEY,
>>> PARSNIPS_VAL));
>>>              Sort sorter = new Sort(new SortField(sortFieldName,
>>> SortField.STRING, true));
>>>              try
>>>              {
>>>                  hits = searcher.search(query, sorter);
>>>                  System.out.println("sort on " + sortFieldName + "
>>> successful.");
>>>              }
>>>              catch (RuntimeException e)
>>>              {
>>>                  System.out.println("sort on " + sortFieldName + "
>>> failed.");
>>>                  e.printStackTrace();
>>>              }
>>>          }
>>>          catch (IOException e)
>>>          {
>>>              e.printStackTrace();
>>>          }
>>>
>>>      }
>>>
>>>      private static boolean deleteFileOrDirectory(File dir)
>>>      {
>>>          if (dir.isDirectory())
>>>          {
>>>              String[] children = dir.list();
>>>              for (int i = 0; i < children.length; i++)
>>>              {
>>>                  boolean success = deleteFileOrDirectory(new  
>>> File(dir,
>>> children[i]));
>>>                  if (!success)
>>>                  {
>>>                      return false;
>>>                  }
>>>              }
>>>          }
>>>          // The directory is now empty so delete it
>>>          return dir.delete();
>>>      }
>>> }
>>>
>>>> On Apr 12, 2005, at 9:19 AM, Bill Tschumy wrote:
>>>>
>>>>> This problem is seeming more and more strange.  It now looks like  
>>>>> if
>>>>> the fieldName I'm sorting on starts is ASCII "j" or above, the
>>>>> RuntimeException is thrown.  Any fieldName that starts with "i" or
>>>>> below (including capitals) works.  Can anyone think of what could
>>>>> possibly be going on here?
>>>>>
>>>>>
>>>>> On Apr 11, 2005, at 2:27 PM, Bill Tschumy wrote:
>>>>>
>>>>>> In my application, by default I display all documents that are in
>>>>>> the index.  I sort them either using a "time modified" or "time
>>>>>> created".  If I have a newly created empty index, I find I get an
>>>>>> error if I sort by "time modified" but not "time created".  In
>>>>>> either case there are actually no documents that match my query so
>>>>>> in reality there is nothing to sort.
>>>>>>
>>>>>> Here is my query:
>>>>>>
>>>>>> query = new TermQuery(new Term(MyIndexer.CREATOR_KEY,
>>>>>> MyIndexer.PARSNIPS_VAL));
>>>>>> String fieldName = sortType == Parsnips.SORT_BY_MODIFIED ?
>>>>>> MyIndexer.MODIFIED_KEY : MyIndexer.CREATED_KEY;
>>>>>> Sort sorter = new Sort(new SortField(fieldName, SortField.STRING,
>>>>>> true));
>>>>>> hits = searcher.search(query, sorter);
>>>>>>
>>>>>> The error I'm getting when using MyIndexer.MODIFIED_KEY (which is
>>>>>> "modified") as the sort field is:
>>>>>>
>>>>>> java.lang.RuntimeException: no terms in field modified
>>>>>>         at
>>>>>> org.apache.lucene.search.FieldCacheImpl.getStringIndex(FieldCacheI 
>>>>>> mpl
>>>>>> .java:256)
>>>>>>         at
>>>>>> org.apache.lucene.search.FieldSortedHitQueue.comparatorString(Fiel 
>>>>>> dSo
>>>>>> rtedHitQueue.java:265)
>>>>>>         at
>>>>>> org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(F 
>>>>>> iel
>>>>>> dSortedHitQueue.java:180)
>>>>>>         at
>>>>>> org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHit 
>>>>>> Que
>>>>>> ue.java:58)
>>>>>>         at
>>>>>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:
>>>>>> 122)
>>>>>>         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
>>>>>>         at org.apache.lucene.search.Hits.<init>(Hits.java:51)
>>>>>>         at  
>>>>>> org.apache.lucene.search.Searcher.search(Searcher.java:41)
>>>>>>         at
>>>>>> com.otherwise.parsnips.MySearcher.search(MySearcher.java:170)
>>>>>>         at
>>>>>> com.otherwise.parsnips.MySearcher.search(MySearcher.java:149)
>>>>>>         at  
>>>>>> com.otherwise.parsnips.Parsnips.<init>(Parsnips.java:163)
>>>>>>         at  
>>>>>> com.otherwise.parsnips.Parsnips.main(Parsnips.java:1205)
>>>>>>
>>>>>> I can't understand why I would be getting this for one sort field
>>>>>> but not the other given there are 0 hits anyway in a newly created
>>>>>> index.  Anyone have any thoughts?  I am using Lucene 1.4.2.
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
-- 
Bill Tschumy
Otherwise -- Austin, TX
http://www.otherwise.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 21:42:13 2005
Return-Path: <java-user-return-14055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39877 invoked from network); 12 Apr 2005 21:42:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 21:42:12 -0000
Received: (qmail 67464 invoked by uid 500); 12 Apr 2005 21:42:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67329 invoked by uid 500); 12 Apr 2005 21:42:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67284 invoked by uid 99); 12 Apr 2005 21:41:59 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.196 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 12 Apr 2005 14:41:58 -0700
Received: by rproxy.gmail.com with SMTP id c16so1943677rne
        for <java-user@lucene.apache.org>; Tue, 12 Apr 2005 14:41:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type;
        b=Dd2/LeitcXPLctHlwWh9lsOE9butDNg+UNotH/J6aIKA1XOmkCl60ZS4V7Fsxp80xF9/ZxUkkkbiFQuxlUpGXbNddpHwZ+7kWHSENJRY7NsvP4gLpdlgpPDEwW62BOyz5wBHvt5c+IVZ+jMj8ahUnfhq3NTe0GqL+bycWWKBr4g=
Received: by 10.38.74.9 with SMTP id w9mr5532444rna;
        Tue, 12 Apr 2005 14:41:56 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Tue, 12 Apr 2005 14:41:55 -0700 (PDT)
Message-ID: <c68e3917050412144165c6c1b3@mail.gmail.com>
Date: Tue, 12 Apr 2005 17:41:55 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: zero boost / zero score
Mime-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_2914_11622354.1113342115961"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2914_11622354.1113342115961
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It seems like different search methods treat zero scoring docs a
little differently.  Is this OK?

Some search methods on IndexSearcher check for score > 0.0f :
    scorer.score(new HitCollector() {
        public final void collect(int doc, float score) {
          if (score > 0.0f &&			  // ignore zeroed buckets

The search method that accepts a HitCollector doesn't check for a score of 0.
I wrote a test program and got a surprising result... instead of
getting a score of 0, I got a score of NaN.  Now the NaN is passed to
the HitCollector, but excluded from the other search methods (since
NaN > 0.0f is false.... only NaN != 0.0f would be true).  Is this
intended/OK?

Test Program Output:
Query=a:aaa^0.0
number of hits = 0
Found doc 0 with score NaN

Test Program: attached.

-Yonik


------=_Part_2914_11622354.1113342115961
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_Part_2914_11622354.1113342115961--

From java-user-return-14056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 23:41:39 2005
Return-Path: <java-user-return-14056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76971 invoked from network); 12 Apr 2005 23:41:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2005 23:41:39 -0000
Received: (qmail 74099 invoked by uid 500); 12 Apr 2005 23:41:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74064 invoked by uid 500); 12 Apr 2005 23:41:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74051 invoked by uid 99); 12 Apr 2005 23:41:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ngwnameserver.tenfold.com (HELO slcgw1c.tenfold.com) (69.27.3.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 12 Apr 2005 16:41:33 -0700
Received: from no.name.available by slcgw1c.tenfold.com
          via smtpd (for hermes.apache.org [209.237.227.199]) with ESMTP; Tue, 12 Apr 2005 17:41:32 -0600
Received: from provo (provo [10.96.11.226]) by SLCMS6.tenfold.com 
    (Clearswift SMTPRS 5.0.9) with ESMTP id 
    <T7043ebf3050a600aa1c64@SLCMS6.tenfold.com> for 
    <java-user@lucene.apache.org>; Tue, 12 Apr 2005 17:44:33 -0600
Received: from CORPDOM-MTA by provo with Novell_GroupWise; Tue, 12 Apr 2005 
    17:42:30 -0600
Message-Id: <s25c0886.041@provo>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Tue, 12 Apr 2005 17:42:23 -0600
From: "Paul Smith" <PSmith@tenfold.com>
To: <java-user@lucene.apache.org>
Subject: Hungarian notation analyzer and phrase queries
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am writing a document management system for my company, and many of
our feature names are in Hungarian notation (PowerQuery,
TransactionManager, etc.). This can make it hard to find some things
with a default analyzer.

I'd like to be able to index text like "Use PowerQuery for advanced
searches" and be able to find it with "use power query for advanced
searches". Note the space between power and query.

I have written a custom analyzer to tokenize PowerQuery into  'power',
'query, and 'powerquery' and change the position increment to 0, but I
don't quite get the desired behavior. The phrase query "use power query
for advanced searches" does not match, but "use query for advanced
searches", and "use power for advanced searches" do.

Any ideas?

I noticed that Dave at tropo.com has written a JavaDocAnalyzer that has
the same problem. Go to searchmorph.com and search for "An instance of
HashMap has two parameters" and "An instance of Hash Map has two
parameters"

I realize that with my custom analyzer I can find it without using a
phrase query, but it would be nice.

Thanks,
Paul

http://www.tenfold.com

**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the TenFold Postmaster (postmaster@tenfold.com).
**********************************************************************


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 01:01:45 2005
Return-Path: <java-user-return-14057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99771 invoked from network); 13 Apr 2005 01:01:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 01:01:44 -0000
Received: (qmail 76905 invoked by uid 500); 13 Apr 2005 01:01:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76870 invoked by uid 500); 13 Apr 2005 01:01:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76855 invoked by uid 99); 13 Apr 2005 01:01:40 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 12 Apr 2005 18:01:37 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D4CE45B76C; Tue, 12 Apr 2005 18:01:33 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D1E867F45E
	for <java-user@lucene.apache.org>; Tue, 12 Apr 2005 18:01:33 -0700 (PDT)
Date: Tue, 12 Apr 2005 18:01:33 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Hungarian notation analyzer and phrase queries
In-Reply-To: <s25c0886.041@provo>
Message-ID: <Pine.LNX.4.58.0504121751040.7724@hal.rescomp.berkeley.edu>
References: <s25c0886.041@provo>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


This question is very similar to a recent/current thread sith the subject
"How to include a multi-word synonym to a word when indexing?" ...

http://www.mail-archive.com/java-user@lucene.apache.org/msg00546.html

...As Erik points out in that thread, when dealing with a dictionary of
"singleword" => ["multi" "word"], and ["multi" "word"] => "singleword"
synonyms a very good/simple approach is to use an analyzer that allways
normalizes down to the single word version (as a single token)

This allows you to leave the position incriment alone, and get Span/Phrase
queries to work just fine.

In your case, if the source text being indexed contains allready contains
only the "SingleWord" forms in "HungarianNotation", you don't need to
start out with a dictionary -- you can build one while indexing using a
TokenFilter (ie: if a token starts with capital, and contains capital,
split on capitals and log to dictionary file).  Then at search time, use a
different TokenFilter that looks up token sequences in your dictionary
and replaces them with the single token version.

If you have mixed usage in the source text being indexed, you may have to
do two passes to build a dictionary, then index.



: Date: Tue, 12 Apr 2005 17:42:23 -0600
: From: Paul Smith <PSmith@tenfold.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Hungarian notation analyzer and phrase queries
:
: I am writing a document management system for my company, and many of
: our feature names are in Hungarian notation (PowerQuery,
: TransactionManager, etc.). This can make it hard to find some things
: with a default analyzer.
:
: I'd like to be able to index text like "Use PowerQuery for advanced
: searches" and be able to find it with "use power query for advanced
: searches". Note the space between power and query.
:
: I have written a custom analyzer to tokenize PowerQuery into  'power',
: 'query, and 'powerquery' and change the position increment to 0, but I
: don't quite get the desired behavior. The phrase query "use power query
: for advanced searches" does not match, but "use query for advanced
: searches", and "use power for advanced searches" do.
:
: Any ideas?
:
: I noticed that Dave at tropo.com has written a JavaDocAnalyzer that has
: the same problem. Go to searchmorph.com and search for "An instance of
: HashMap has two parameters" and "An instance of Hash Map has two
: parameters"
:
: I realize that with my custom analyzer I can find it without using a
: phrase query, but it would be nice.
:
: Thanks,
: Paul
:
: http://www.tenfold.com
:
: **********************************************************************
: This email and any files transmitted with it are confidential and
: intended solely for the use of the individual or entity to whom they
: are addressed. If you have received this email in error please notify
: the TenFold Postmaster (postmaster@tenfold.com).
: **********************************************************************
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 03:04:18 2005
Return-Path: <java-user-return-14058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64432 invoked from network); 13 Apr 2005 03:04:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 03:04:18 -0000
Received: (qmail 23273 invoked by uid 500); 13 Apr 2005 03:04:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23242 invoked by uid 500); 13 Apr 2005 03:04:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23228 invoked by uid 99); 13 Apr 2005 03:04:08 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31107.mail.mud.yahoo.com (HELO web31107.mail.mud.yahoo.com) (68.142.200.40)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 12 Apr 2005 20:04:06 -0700
Received: (qmail 12884 invoked by uid 60001); 13 Apr 2005 03:04:04 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=nA7RNRWJMw1xRTO25LYoZUFvp//v879UWcGATD6GMg5rj21D+uzXspREsNPlWY9yueA9Q+Yasqp53VxZLwGbOWqokdjaCm4gyUjl82HXVjxnasIkCvEDssLuWPOkQyDin8ovhB1IpRLMy4ZaduMWL/beQDBmOK6tkk9VTy4v1x8=  ;
Message-ID: <20050413030404.12882.qmail@web31107.mail.mud.yahoo.com>
Received: from [69.201.130.192] by web31107.mail.mud.yahoo.com via HTTP; Tue, 12 Apr 2005 20:04:04 PDT
Date: Tue, 12 Apr 2005 20:04:04 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: A9 (search-related jobs)
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

A9 (Amazon's subsidiary) is looking for people, and since they are in
the information/search business people on java-user@lucene may be
interested in this, even though it's not Lucene-specific.

Here is an example job description:

Senior Manager and Technical Team Leader  Search Infrastructure

A9 is looking for an experienced technical leader to help drive the
development of leading edge search technology. You will have extensive
experience with all facets of the software development lifecycle and
will provide technical leadership in driving the design and
implementation of extremely large distributed systems. You should be an
experienced hands-on manager with an innovative spirit who loves
technology and can wear many hats, including development manager,
architect, and product manager. You must possess strong communication
skills and should be comfortable with C++ and Java in a Unix
environment as well as internet and middleware technologies such as
Perl, SOAP, SQL, HTML and XML. You must display a deep understanding of
the theory of distributed computing, object oriented analysis and
design, and networking protocols.

Candidates should have at least 10 years industry experience and 5
years experience managing software development.


They are also looking for less senior geeks.  Anyhow, if working for
Udi Manber (A9's CEO) sounds like fun, send your resume to Ms.
"Margaret Moore" <margaretpm@yahoo.com>.  I believe this work is in the
Palo Alto area.

Otis
--
Simpy -- http://www.simpy.com/ -- social bookmarking powered by Lucene


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 06:36:52 2005
Return-Path: <java-user-return-14059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56807 invoked from network); 13 Apr 2005 06:36:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 06:36:52 -0000
Received: (qmail 4938 invoked by uid 500); 13 Apr 2005 06:35:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4624 invoked by uid 500); 13 Apr 2005 06:35:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4588 invoked by uid 99); 13 Apr 2005 06:35:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.tanto.de (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 12 Apr 2005 23:35:47 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP
	id 2DF0023CE5; Wed, 13 Apr 2005 08:36:23 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 08980-07; Wed, 13 Apr 2005 08:36:23 +0200 (CEST)
Received: from tucholsky.office.tanto.de (tucholsky.office.tanto.de [10.0.0.35])
	by mail.tanto.de (Postfix) with ESMTP
	id 1043323CE0; Wed, 13 Apr 2005 08:36:23 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@localhost [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j3D6cU4B018685;
	Wed, 13 Apr 2005 08:38:30 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) id j3D6cTH0018681;
	Wed, 13 Apr 2005 08:38:29 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16988.48741.795454.194917@tanto-xipolis.de>
Date: Wed, 13 Apr 2005 08:38:29 +0200
To: java-user@lucene.apache.org, <ko@yawah.com>
Subject: RE: Lucene on Linux problem...
In-Reply-To: <20050412160631.5498227E19C@ns2.pil.dk>
References: <1112603090.15511.45.camel@saturn>
	<20050412160631.5498227E19C@ns2.pil.dk>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Kristian Ottosen writes:
> 
> It seems to work now - but I would still love to see a good explanation.
> 
How was your java application started? (sorry I you already explained, 
I didn't keep the thread and the mailing list archive seems to be out 
of order)
I remember strange problems (with mkdir in my case) when using java
servlets within a tomcat that was started by apache daemon.
The problem occured on some linux installations only.
The reason we found after quite some debugging was, that daemon wasn't 
linked to libpthread, so java was somehow using the wrong libc (or something
similar, I never understood all details).
(daemon started, loading the unthreaded libc and handed control to the
java binary which continued using that libc while requireing a threaded)

I don't know if your problems have anything to do with such effects, but
when you say, it happens on some distributions while others work, that
comes into my mind.
If the same jar file works on one linux installation and fails on another
it's suggesting that the problem is on the jvm level or it's libraries.

Morus


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 07:29:05 2005
Return-Path: <java-user-return-14060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3212 invoked from network); 13 Apr 2005 07:29:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 07:29:04 -0000
Received: (qmail 974 invoked by uid 500); 13 Apr 2005 07:28:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 886 invoked by uid 500); 13 Apr 2005 07:28:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 767 invoked by uid 99); 13 Apr 2005 07:28:28 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr8.xs4all.nl (HELO smtp-vbr8.xs4all.nl) (194.109.24.28)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 00:28:26 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr8.xs4all.nl (8.12.11/8.12.11) with ESMTP id j3D7SMIa015419
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2005 09:28:22 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: zero boost / zero score
Date: Wed, 13 Apr 2005 09:28:21 +0200
User-Agent: KMail/1.5.4
References: <c68e3917050412144165c6c1b3@mail.gmail.com>
In-Reply-To: <c68e3917050412144165c6c1b3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504130928.21573.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 12 April 2005 23:41, Yonik Seeley wrote:
> It seems like different search methods treat zero scoring docs a
> little differently.  Is this OK?
> 
> Some search methods on IndexSearcher check for score > 0.0f :
>     scorer.score(new HitCollector() {
>         public final void collect(int doc, float score) {
>           if (score > 0.0f &&			  // ignore zeroed buckets
> 
> The search method that accepts a HitCollector doesn't check for a score of 
0.
> I wrote a test program and got a surprising result... instead of
> getting a score of 0, I got a score of NaN.  Now the NaN is passed to
> the HitCollector, but excluded from the other search methods (since
> NaN > 0.0f is false.... only NaN != 0.0f would be true).  Is this
> intended/OK?

The NaN is from the division by the zero to normalize the score
for the query weights, so this is a feature.

I think for a document to be counted in the result of a query should only
depend on next(), skipTo()  and doc() of the scorer, and not on score().
However, other external code already depends on this code in IndexSearcher,
so I'm using another IndexSearcher that does not use the score.

Regards,
Paul Elschot.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 07:41:50 2005
Return-Path: <java-user-return-14061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8205 invoked from network); 13 Apr 2005 07:41:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 07:41:49 -0000
Received: (qmail 22831 invoked by uid 500); 13 Apr 2005 07:41:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22769 invoked by uid 500); 13 Apr 2005 07:41:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22722 invoked by uid 99); 13 Apr 2005 07:41:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 13 Apr 2005 00:41:14 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IEVK0300.0H4; Wed, 13 Apr 2005 13:10:51 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>, <ko@yawah.com>
Subject: RE: Lucene on Linux problem...
Date: Wed, 13 Apr 2005 13:01:07 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKIEOJCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <20050412160631.5498227E19C@ns2.pil.dk>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Guys

Apologies.........



We had something similar problems with Tomcat 5.0.3 on Linux Gentoo and
Lucene1.4.3...
every first Search was not able to work properly,

So finally we swithched JVM's from 1.4.2 to 1.4.3 sdk's and solved the
problem for the day....
We also updated the Linux Machines with Latest patch to solve the "stale"
problems.

May be swithcing the JVM's would solve some of the problems.




With regards
Karthik

-----Original Message-----
From: Kristian Ottosen [mailto:ko@yawah.com]
Sent: Tuesday, April 12, 2005 9:36 PM
To: java-user@lucene.apache.org
Subject: RE: Lucene on Linux problem...


Hi,

Thank you for the comments and hints.

It seems like we finally solved this problem - but unfortunately without
being able to pinpoint the exact cause.

Our application did in fact follow all the Lucene concurrency rules. I
checked, double checked, bought "Lucene in Action" (that I highly recommend
by the way), read chapter 2.9 twice, triple checked and it just didn't do
anything illegal at all. Everything was closed correctly etc.

This was also backed by the fact that it worked absolutely perfect when
using a RAMDirectory instead of an FSDirectory on top of the Linux file.

Further the application also worked perfectly on all Windows, Mac OS X,
Solaris, AS/400 as well as almost all Linux system. But in a handful of
Linux cases (different distributions by the way) it simply behaved very,
very strange causing two possible symptoms:

1) After adding an amount of documents we sometimes got exceptions like this
one:

java.io.FileNotFoundException:
/srv/www/tomcat/demoserver/webapps/erez3/WEB-INF/private/index/_35.fnm
(No such file or directory)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
        at
org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java:376
)
        at
org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
        at
org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
        at org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:53)
        at
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:110)
        at
org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:95)
        at
org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:122)
        at org.apache.lucene.store.Lock$With.run(Lock.java:109)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
        at
org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)

while Lucene tried to read a segment which it had already deleted while
merging it with other segments.

2) And also very often:

java.io.IOException: Lock obtain timed out:
Lock@/usr/local/tomcat/current/temp/lucene-4e8e9515c104fa3aef765398cfa76815-
write.lock
        at org.apache.lucene.store.Lock.obtain(Lock.java:58)
        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:223)
        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:213)

The frequency of this second exception was highly dependent on the value of
the writeLockTimeout. The table below shows the number of timeouts
encountered during a single run (add some thousand documents) for different
values of writeLockTimeout:

  20  =    1
 500  =    1
 995  =    1
 999  =    1
1000  = 3600
1100  = 3252
1500  = 3645
2000  =  116
3000  =   66
4000  =   57
10000 =   15
30000 =    7

Strange isn't it? Mind you that only a single thread is involved. No other
threads are reading or writing to the index. All files including the locks
are stored on a local file system (no NFS or anything).

What we did to finally work around the problem was to stop creating a new
IndexSearcher to check for duplicates before adding each document and
instead re-use it during batch updates. That required some deal of extra
care and management on the part of the application - but as a side effect
also improved performance a bit (I guess).

But it is still a puzzle to me why things didn't work on these Linux boxes
in the first place. It almost seems like the Linux file system sometimes got
"overwhelmed" by the frequent modifications and started returning "stale"
data and/or file status to the application.

It seems to work now - but I would still love to see a good explanation.

Best Regards from Denmark
Kristian Ottosen
http://www.yawah.com


> -----Original Message-----
> From: Miles Barr [mailto:miles@runtime-collective.com]
> Sent: 4. april 2005 10:25
> To: Lucene User
> Subject: Re: Lucene on Linux problem...
>
> On Sat, 2005-04-02 at 10:29 +0200, Kristian Ottosen wrote:
> > I wonder if there is general problem running Lucene on top of some of
> the
> > journaling file systems like ReiserFS or Ext3?
>
> I haven't had any problems running Lucene on either of those file
> systems. I've done updates to the index while people are still searching
> and it all worked fine.
>
> > The problem may not appear immediately - but only after several
> > thousand documents have been indexed in a row using a combination of
> > IndexSearcher (check for duplicates) and IndexWriter (add document)
> > operations.
>
> Are you deleting the duplicates as you find them? i.e. are you closing
> and opening reader/writers all the time? If you are, besides
> recommending switching to batch updates, I suggest being really thorough
> with closing everything, e.g.
>
> IndexReader reader = null;
> IndexWriter writer = null;
>
> try {
>     reader = IndexReader.open(/* Path to index */);
>
>     ... do the deletes ...
>
>     reader.close();
>     reader = null;
>
>     writer = new IndexWriter(index, /* Your analyzer */, false);
>
>     ... do the deletes ....
>
>     writer.optimize();
>     writer.close();
>     writer = null;
> }
> catch (IOException e) {
>     ... do any error processing ...
> }
> finally {
>     // We can do both these closes in the same finally block because if
>     // reader is not null then writer is null, so we don't need to worry
>     // about reader.close() throwing another IOException
>     if (reader != null) {
>         reader.close();
>         reader = null;
>     }
>
>     if (writer != null) {
>         writer.optimize();
>         writer.close();
>         writer = null;
>     }
> }
>
>
>
> --
> Miles Barr <miles@runtime-collective.com>
> Runtime Collective Ltd.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 07:47:01 2005
Return-Path: <java-user-return-14062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9865 invoked from network); 13 Apr 2005 07:47:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 07:47:01 -0000
Received: (qmail 37635 invoked by uid 500); 13 Apr 2005 07:46:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37594 invoked by uid 500); 13 Apr 2005 07:46:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37560 invoked by uid 99); 13 Apr 2005 07:46:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ns2.pil.dk (HELO ns2.pil.dk) (195.41.47.38)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 00:46:25 -0700
Received: from Wintermute (cpe.atm2-0-112124.0x3ef2c121.arcnxx12.customer.tele.dk [62.242.193.33])
	by ns2.pil.dk (Postfix) with ESMTP id 4148227E180;
	Wed, 13 Apr 2005 09:46:11 +0200 (CEST)
Reply-To: <ko@yawah.com>
From: "Kristian Ottosen" <ko@yawah.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene on Linux problem...
Date: Wed, 13 Apr 2005 09:46:06 +0200
Organization: YaWah.com
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <16988.48741.795454.194917@tanto-xipolis.de>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcU/8ybFoLKjDXnzRDC28992rX0JtAACPniQ
Message-Id: <20050413074611.4148227E180@ns2.pil.dk>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> I remember strange problems (with mkdir in my case) when using java
> servlets within a tomcat that was started by apache daemon.
> The problem occured on some linux installations only.

As a fact this is a servlet running under Tomcat - so you may have a good
point there. But I don't think it is started by an apache daemon. 

Will check it. Thanks
Kristian

> -----Original Message-----
> From: Morus Walter [mailto:morus.walter@tanto.de]
> Sent: 13. april 2005 08:38
> To: java-user@lucene.apache.org; ko@yawah.com
> Subject: RE: Lucene on Linux problem...
> 
> Kristian Ottosen writes:
> >
> > It seems to work now - but I would still love to see a good explanation.
> >
> How was your java application started? (sorry I you already explained,
> I didn't keep the thread and the mailing list archive seems to be out
> of order)
> I remember strange problems (with mkdir in my case) when using java
> servlets within a tomcat that was started by apache daemon.
> The problem occured on some linux installations only.
> The reason we found after quite some debugging was, that daemon wasn't
> linked to libpthread, so java was somehow using the wrong libc (or
> something
> similar, I never understood all details).
> (daemon started, loading the unthreaded libc and handed control to the
> java binary which continued using that libc while requireing a threaded)
> 
> I don't know if your problems have anything to do with such effects, but
> when you say, it happens on some distributions while others work, that
> comes into my mind.
> If the same jar file works on one linux installation and fails on another
> it's suggesting that the problem is on the jvm level or it's libraries.
> 
> Morus
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 08:07:28 2005
Return-Path: <java-user-return-14063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20030 invoked from network); 13 Apr 2005 08:07:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 08:07:28 -0000
Received: (qmail 79149 invoked by uid 500); 13 Apr 2005 08:05:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79112 invoked by uid 500); 13 Apr 2005 08:05:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79003 invoked by uid 99); 13 Apr 2005 08:05:09 -0000
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ngaard@hotmail.com designates 64.4.31.32 as permitted sender)
Received: from bay13-f32.bay13.hotmail.com (HELO hotmail.com) (64.4.31.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 01:05:07 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 13 Apr 2005 01:05:00 -0700
Message-ID: <BAY13-F325EF85F3FABEA93DE480FD0340@phx.gbl>
Received: from 193.162.59.125 by by13fd.bay13.hotmail.msn.com with HTTP;
	Wed, 13 Apr 2005 08:04:59 GMT
X-Originating-IP: [193.162.59.125]
X-Originating-Email: [ngaard@hotmail.com]
X-Sender: ngaard@hotmail.com
In-Reply-To: <Pine.LNX.4.58.0504121751040.7724@hal.rescomp.berkeley.edu>
From: "Peter Hotm. Nørregaard" <ngaard@hotmail.com>
To: java-user@lucene.apache.org
Bcc: 
Subject: Re: Hungarian notation analyzer and phrase queries
Date: Wed, 13 Apr 2005 08:04:59 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 13 Apr 2005 08:05:00.0437 (UTC) FILETIME=[7D7B4C50:01C53FFF]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris wrote
>...As Erik points out in that thread, when dealing with a dictionary of
>"singleword" => ["multi" "word"], and ["multi" "word"] => "singleword"
>synonyms a very good/simple approach is to use an analyzer that allways
>normalizes down to the single word version (as a single token)
>
>This allows you to leave the position incriment alone, and get Span/Phrase
>queries to work just fine.

But be aware of the drawbacks from replacing multiple words with its  
corresponding acryonym/alias during analysis. The analyzis at search-time 
cannot perform the normalization to a single word if the rest of the words 
in the search string are not recognized:

- Prefix search: [cyber] [ca*] would not match [cybercafe]
- Wildcard search: [cyber] [ca?e] would not match [cybercafe]
- Fuzzy search: [cyber] [cage~] would not match [cybercafe]

I am not sure that this is correct but perhaps someone in this forum can.

/Peter

_________________________________________________________________
Del din verden med MSN Spaces  http://spaces.msn.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 10:34:41 2005
Return-Path: <java-user-return-14064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79397 invoked from network); 13 Apr 2005 10:34:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 10:34:41 -0000
Received: (qmail 48393 invoked by uid 500); 13 Apr 2005 10:34:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48362 invoked by uid 500); 13 Apr 2005 10:34:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48347 invoked by uid 99); 13 Apr 2005 10:34:24 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web53010.mail.yahoo.com (HELO web53010.mail.yahoo.com) (206.190.39.200)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 13 Apr 2005 03:34:22 -0700
Received: (qmail 92925 invoked by uid 60001); 13 Apr 2005 10:34:20 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=ZvSyFa9W20dSu5Y9UGtOOj77ltt5Esej4hoN7IMSqGGE1ieIJBn8/bzA0uLq7dcKmxzM/nBR2Gr9cg4p+BJ5gmW44axgqP0OBkChcaraMyyXGSHSNjoFV4CvejVaVu2FoWH7dPYHAu6IgsrQWPiK2wKHktwp9UQMy/DoK9VXIVQ=  ;
Message-ID: <20050413103420.92919.qmail@web53010.mail.yahoo.com>
Received: from [192.94.34.2] by web53010.mail.yahoo.com via HTTP; Wed, 13 Apr 2005 03:34:20 PDT
Date: Wed, 13 Apr 2005 03:34:20 -0700 (PDT)
From: "Ranjan K. Baisak" <ranjanbaisak@yahoo.com>
Subject: Dynamic index building is expensive 
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

 Hello,
My application used swing and a data base application.
For searching mechanism, I'm using Lucene. I used to
build the index during application startup and any
change to the DB also makes change the index. So I
have a thread which looks if any change has occurred
in DB and if so then updates index. This way of search
is too expensive and also does not have any
performance benefit compare to DB search compare to
million of records in DB. Any suggestion to make index
dynamic with multiuser environment.

regards,
Ranjan


		
__________________________________ 
Do you Yahoo!? 
Yahoo! Small Business - Try our new resources site!
http://smallbusiness.yahoo.com/resources/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 10:35:37 2005
Return-Path: <java-user-return-14065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79701 invoked from network); 13 Apr 2005 10:35:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 10:35:37 -0000
Received: (qmail 50272 invoked by uid 500); 13 Apr 2005 10:35:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50243 invoked by uid 500); 13 Apr 2005 10:35:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50227 invoked by uid 99); 13 Apr 2005 10:35:20 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=DATE_IN_FUTURE_06_12,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from smtp002.mail.ukl.yahoo.com (HELO smtp002.mail.ukl.yahoo.com) (217.12.11.33)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 13 Apr 2005 03:35:18 -0700
Received: from unknown (HELO platoon) (arnaudbuffet@82.123.9.83 with login)
  by smtp002.mail.ukl.yahoo.com with SMTP; 13 Apr 2005 10:35:15 -0000
From: "arnaudbuffet" <arnaudbuffet@yahoo.fr>
To: <java-user@lucene.apache.org>
Subject: TR : information
Date: Wed, 13 Apr 2005 12:35:16 -0700
Message-ID: <002501c5405f$ebaf9270$1e00a8c0@platoon>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0026_01C54025.3F50BA70"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0026_01C54025.3F50BA70
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hello,
 
Today I need few explanations about the possibilities of lucene in order
to implement development on an application.
 
First, I have to index different things; documents files and bdd tables
to make a search on all theses elements. Is it possible? How can I index
both elements? For the search, I have to use a MultiSearcher ?
 
Then I want to have different score for my results. For exemple, if the
user keyword is found in a specific bdd field I want this results appear
before others. How can I do "ponderation" on different fields and
documents for the results ?
 
About the keywords written by a user, how can I filter them? Maybe some
are not useful for the search and other like "AND" can combine results
search? 
 
Then, I have right permission on documents, is there a way with lucene
to introduction these permissions for the search ? if I do not have
permission, results are filtered ?
 
Thanks for your answers,
 
Regards
 
Arnaud
 
 
 
 
 
 
 
 
 

------=_NextPart_000_0026_01C54025.3F50BA70--



From java-user-return-14066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 10:36:41 2005
Return-Path: <java-user-return-14066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80120 invoked from network); 13 Apr 2005 10:36:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 10:36:41 -0000
Received: (qmail 53700 invoked by uid 500); 13 Apr 2005 10:36:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53677 invoked by uid 500); 13 Apr 2005 10:36:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53659 invoked by uid 99); 13 Apr 2005 10:36:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 03:36:25 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: RE: Dynamic index building is expensive 
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 13 Apr 2005 12:36:22 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA07113E@gerard.anchormen.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Dynamic index building is expensive 
thread-index: AcVAFGOW/Oznsrb+TLiwfMF+OUyWmQAABBog
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You could create a change-table in the database where all changes are
registered (you could add triggers to the database that registers
changes). Now your searchengine only has to check the changetable and
retrieve the changed data (and index it).=20

-----Oorspronkelijk bericht-----
Van: Ranjan K. Baisak [mailto:ranjanbaisak@yahoo.com]=20
Verzonden: woensdag 13 april 2005 12:34
Aan: java-user@lucene.apache.org
Onderwerp: Dynamic index building is expensive=20

 Hello,
My application used swing and a data base application.
For searching mechanism, I'm using Lucene. I used to build the index
during application startup and any change to the DB also makes change
the index. So I have a thread which looks if any change has occurred in
DB and if so then updates index. This way of search is too expensive and
also does not have any performance benefit compare to DB search compare
to million of records in DB. Any suggestion to make index dynamic with
multiuser environment.

regards,
Ranjan


	=09
__________________________________
Do you Yahoo!?=20
Yahoo! Small Business - Try our new resources site!
http://smallbusiness.yahoo.com/resources/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 10:39:37 2005
Return-Path: <java-user-return-14067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81484 invoked from network); 13 Apr 2005 10:39:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 10:39:37 -0000
Received: (qmail 58176 invoked by uid 500); 13 Apr 2005 10:39:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58155 invoked by uid 500); 13 Apr 2005 10:39:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58139 invoked by uid 99); 13 Apr 2005 10:39:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from keys.webasto.de (HELO keys.webasto.de) (194.59.2.36)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 03:39:23 -0700
Received: from sdestopgp1out.svc.de.web-int.net by keys.webasto.de
          via smtpd (for hermes.apache.org [209.237.227.199]) with ESMTP; Wed, 13 Apr 2005 12:39:23 +0200
Received: from keys1.webasto.de (loopback [127.0.0.1])
	by keys.webasto.de (Postfix) with ESMTP id B79D4256FF2
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2005 12:39:20 +0200 (CEST)
Received: from sdestoex2.svc.de.web-int.net ([192.168.205.22])
  by keys1.webasto.de (PGP Universal service);
  Wed, 13 Apr 2005 12:39:20 +0200
Received: from mailhub.wan.de.web-int.net by sdestoex2.svc.de.web-int.net
          via smtpd (for sdestopgp1int.svc.de.web-int.net [192.168.205.101]) with ESMTP; Wed, 13 Apr 2005 12:39:20 +0200
Received: from SDESTOCEX1.sto.de.web-int.net ([172.16.254.160]) by sdestoex2.de.web-int.net with Microsoft SMTPSVC(6.0.3790.0);
	 Wed, 13 Apr 2005 12:39:18 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C54014.FD78DBEC"
Subject: Searching an NTFS File Server
Date: Wed, 13 Apr 2005 12:38:54 +0200
Message-ID: <EAF09DC4D4C9FE4C812A0633D290406301316F17@SDESTOCEX1.sto.de.web-int.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching an NTFS File Server
Thread-Index: AcVAFP0s6lC95drnR8uc8q3eas7tdQ==
From: "Maher Martin" <MMaher@Webasto.de>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 13 Apr 2005 10:39:18.0214 (UTC) FILETIME=[0B8BF660:01C54015]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C54014.FD78DBEC
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello all,

=20

We're currently evaluating search tools to cover the following
requirement:

=20

We have an NTFS file server with 2 TB of files (word, excel, pdf, txt,
etc). We would like to index all these files and integrate a simple web
application into our intranet which will allow users to login using
their windows credentials and search through this file index, returning
only hits to files matching the users search criteria, to which the user
has the *necessary rights* to view.

=20

My questions are:

-        How does one generate the list of results, so that the list
contains only entries that the user may view? Should the returned list
of results be post processed to filter out the invalid entries, and if
so how?

-        Is 2 TB of data to large to be handled by Lucene?

-        Has anybody implemented a similar type of application?

=20

Thanks in advance

Martin

=20

=20

=20


------_=_NextPart_001_01C54014.FD78DBEC--

From java-user-return-14068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 10:56:42 2005
Return-Path: <java-user-return-14068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89437 invoked from network); 13 Apr 2005 10:56:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 10:56:42 -0000
Received: (qmail 79129 invoked by uid 500); 13 Apr 2005 10:56:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79106 invoked by uid 500); 13 Apr 2005 10:56:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79089 invoked by uid 99); 13 Apr 2005 10:56:27 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from web26004.mail.ukl.yahoo.com (HELO web26004.mail.ukl.yahoo.com) (217.12.10.215)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 13 Apr 2005 03:56:25 -0700
Received: (qmail 45574 invoked by uid 60001); 13 Apr 2005 10:56:23 -0000
Message-ID: <20050413105623.45572.qmail@web26004.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26004.mail.ukl.yahoo.com via HTTP; Wed, 13 Apr 2005 11:56:22 BST
Date: Wed, 13 Apr 2005 11:56:22 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Searching an NTFS File Server
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have used JCIFS before (http://jcifs.samba.org/) to
handle single-sign-on of Windows clients to my web
apps and it works very well.
There is a whole bunch of file-access stuff in this
package too which could possibly help with identifying
who can see what. 

Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 11:03:41 2005
Return-Path: <java-user-return-14069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91718 invoked from network); 13 Apr 2005 11:03:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 11:03:41 -0000
Received: (qmail 88642 invoked by uid 500); 13 Apr 2005 11:03:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88620 invoked by uid 500); 13 Apr 2005 11:03:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88590 invoked by uid 99); 13 Apr 2005 11:03:14 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.204 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 04:03:12 -0700
Received: by rproxy.gmail.com with SMTP id i8so111073rne
        for <java-user@lucene.apache.org>; Wed, 13 Apr 2005 04:03:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kYFttU8ZJq6UiWs9/1KhG81cyo+MXt3vtw8kBGpeMY7BIoviD/itlFm+azm4+A5RxXmjCU/YiwGt/IzCe15KeOVvnzzxorMI7+NrpyIH6cEtWLBjhS1l8NAz+cW+ADB9vJ9G/A3oEwP3pRTxP1zSys57uBTYQXdyorB7MNtFs1c=
Received: by 10.38.82.20 with SMTP id f20mr475855rnb;
        Wed, 13 Apr 2005 04:03:10 -0700 (PDT)
Received: by 10.38.104.11 with HTTP; Wed, 13 Apr 2005 04:03:10 -0700 (PDT)
Message-ID: <88c6a67205041304037a4aef24@mail.gmail.com>
Date: Wed, 13 Apr 2005 06:03:10 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TR : information
In-Reply-To: <002501c5405f$ebaf9270$1e00a8c0@platoon>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <002501c5405f$ebaf9270$1e00a8c0@platoon>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Arnaud,

> First, I have to index different things; documents files and bdd tables
> to make a search on all theses elements. Is it possible? How can I index
> both elements? For the search, I have to use a MultiSearcher ?

Yes, you can store different types of documents (i.e., they have
different fields) in the same lucene index.  You do not need a
MultiSearcher for this.  (Of course, you could also divide your
documents between more than one index, and use MultiSearcher if you
want, but it's not necessary).

> Then I want to have different score for my results. For exemple, if the
> user keyword is found in a specific bdd field I want this results appear
> before others. How can I do "ponderation" on different fields and
> documents for the results ?

For this you can use a field boost, either at indexing time, or at
search time.  I'm not sure what 'ponderation' means.

> About the keywords written by a user, how can I filter them? Maybe some
> are not useful for the search and other like "AND" can combine results
> search?

You can filter search terms using "stop words" with the Analyzer used
at query parsing time.  Lucene can do "AND" searches, "OR" searches,
and "NOT" searches, as well as range queries, wildcards, and more.

> Then, I have right permission on documents, is there a way with lucene
> to introduction these permissions for the search ? if I do not have
> permission, results are filtered ?

You can use lucene Filters for this.  If you're new to lucene, the
best thing you can do for yourself is buy the book _Lucene in Action_.
 It explains how to do all this stuff and more.

-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 11:56:13 2005
Return-Path: <java-user-return-14070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13067 invoked from network); 13 Apr 2005 11:56:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 11:56:13 -0000
Received: (qmail 78666 invoked by uid 500); 13 Apr 2005 11:56:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78461 invoked by uid 500); 13 Apr 2005 11:56:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78444 invoked by uid 99); 13 Apr 2005 11:56:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 04:56:02 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: RE: Searching an NTFS File Server
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 13 Apr 2005 13:56:00 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA07113F@gerard.anchormen.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching an NTFS File Server
thread-index: AcVAFP0s6lC95drnR8uc8q3eas7tdQACn+7Q
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

=20

-----Oorspronkelijk bericht-----
Van: Maher Martin [mailto:MMaher@Webasto.de]=20
Verzonden: woensdag 13 april 2005 12:39
Aan: java-user@lucene.apache.org
Onderwerp: Searching an NTFS File Server

-        How does one generate the list of results, so that the list
contains only entries that the user may view? Should the returned list
of results be post processed to filter out the invalid entries, and if
so how?

You can use a filter with the IndexSearcher so that it removes all
'unwanted' results.=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 12:24:54 2005
Return-Path: <java-user-return-14071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22389 invoked from network); 13 Apr 2005 12:24:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 12:24:54 -0000
Received: (qmail 36299 invoked by uid 500); 13 Apr 2005 12:24:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36262 invoked by uid 500); 13 Apr 2005 12:24:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36245 invoked by uid 99); 13 Apr 2005 12:24:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 05:24:21 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E9D9D13E2120; Wed, 13 Apr 2005 08:24:19 -0400 (EDT)
Received: from [192.168.1.102] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 6AADB13E2120
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2005 08:24:16 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <20050413103420.92919.qmail@web53010.mail.yahoo.com>
References: <20050413103420.92919.qmail@web53010.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <3f96d7f3f4b2f9063170372cd7f48a84@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Dynamic index building is expensive 
Date: Wed, 13 Apr 2005 08:24:27 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 13, 2005, at 6:34 AM, Ranjan K. Baisak wrote:

>  Hello,
> My application used swing and a data base application.
> For searching mechanism, I'm using Lucene. I used to
> build the index during application startup and any
> change to the DB also makes change the index. So I
> have a thread which looks if any change has occurred
> in DB and if so then updates index. This way of search
> is too expensive and also does not have any
> performance benefit compare to DB search compare to
> million of records in DB. Any suggestion to make index
> dynamic with multiuser environment.

So the issue is how to update the Lucene index more rapidly when data 
in the DB changes?

If there is a single point of code that DB code goes through and all DB 
changes are under your control then hooking that point for updating 
Lucene makes sense.  Perhaps aspect-oriented programming could come 
into play to separate the Lucene indexing concern from the DB updating 
code?

Database triggers would be a good place to hook Lucene indexing if 
different processes not under your control are updating data that needs 
to be indexed.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 15:57:15 2005
Return-Path: <java-user-return-14072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1752 invoked from network); 13 Apr 2005 15:57:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 15:57:15 -0000
Received: (qmail 6276 invoked by uid 500); 13 Apr 2005 15:54:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6231 invoked by uid 500); 13 Apr 2005 15:54:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6205 invoked by uid 99); 13 Apr 2005 15:54:30 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp106.mail.sc5.yahoo.com (HELO smtp106.mail.sc5.yahoo.com) (66.163.169.226)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 13 Apr 2005 08:54:28 -0700
Received: from unknown (HELO ganesh) (jazdrv@24.105.139.91 with login)
  by smtp106.mail.sc5.yahoo.com with SMTP; 13 Apr 2005 15:54:22 -0000
Reply-To: <jazdrv@yahoo.com>
From: "jazdrv" <jazdrv@yahoo.com>
To: <java-user@lucene.apache.org>
Subject: lucene - nutch to rss?
Date: Wed, 13 Apr 2005 11:54:02 -0400
Message-ID: <001a01c54041$068aaa90$70131009@ganesh>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_001B_01C5401F.7F790A90"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_001B_01C5401F.7F790A90
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

hello,
 
this is my first posting to this thread, and i haven't played with the
libraries as of yet. i'm curious whether people have been using 
lucene/nutch to convert results to rss and what would be architectural
considerationis/time period in doing something like that.
 
zak

------=_NextPart_000_001B_01C5401F.7F790A90--


From java-user-return-14073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 16:01:35 2005
Return-Path: <java-user-return-14073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4533 invoked from network); 13 Apr 2005 16:01:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 16:01:35 -0000
Received: (qmail 30552 invoked by uid 500); 13 Apr 2005 16:00:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30507 invoked by uid 500); 13 Apr 2005 16:00:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30375 invoked by uid 99); 13 Apr 2005 16:00:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from furl.net (HELO furl.net) (65.125.235.114)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 09:00:52 -0700
Received: from [172.16.125.40] (sv-fw.looksmart.com [64.241.242.18])
	(authenticated bits=0)
	by furl.net (8.12.8/8.12.8) with ESMTP id j3DG0Xsn009247
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2005 16:00:34 GMT
Message-ID: <425D41F5.3020000@furl.net>
Date: Wed, 13 Apr 2005 11:59:49 -0400
From: Michael Giles <mgiles@furl.net>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: lucene - nutch to rss?
References: <001a01c54041$068aaa90$70131009@ganesh>
In-Reply-To: <001a01c54041$068aaa90$70131009@ganesh>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Zak,

Doing such a thing is pretty simple.  If you take the Nutch sample, 
there is a JSP page which handles queries and renders the search 
results.  You can easily copy and alter that page to render the results 
in RSS format instead of HTML.

-Mike

jazdrv wrote:

>hello,
> 
>this is my first posting to this thread, and i haven't played with the
>libraries as of yet. i'm curious whether people have been using 
>lucene/nutch to convert results to rss and what would be architectural
>considerationis/time period in doing something like that.
> 
>zak
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 16:15:29 2005
Return-Path: <java-user-return-14074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10947 invoked from network); 13 Apr 2005 16:15:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 16:15:29 -0000
Received: (qmail 71317 invoked by uid 500); 13 Apr 2005 16:12:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71265 invoked by uid 500); 13 Apr 2005 16:12:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71220 invoked by uid 99); 13 Apr 2005 16:12:22 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp108.mail.sc5.yahoo.com (HELO smtp108.mail.sc5.yahoo.com) (66.163.170.6)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 13 Apr 2005 09:12:20 -0700
Received: from unknown (HELO ganesh) (jazdrv@24.105.139.91 with login)
  by smtp108.mail.sc5.yahoo.com with SMTP; 13 Apr 2005 16:12:11 -0000
Reply-To: <jazdrv@yahoo.com>
From: "jazdrv" <jazdrv@yahoo.com>
To: <java-user@lucene.apache.org>
Subject: RE: lucene - nutch to rss?
Date: Wed, 13 Apr 2005 12:11:55 -0400
Message-ID: <002401c54043$83d0c190$70131009@ganesh>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
In-Reply-To: <425D41F5.3020000@furl.net>
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

ok, that's comforting to hear. i've been trying to figure out
the particular piece that does that html to rss conversion.
what have other people been using? Something like informa or 
am I over-complicating myself?

~z

-----Original Message-----
From: Michael Giles [mailto:mgiles@furl.net] 
Sent: Wednesday, April 13, 2005 12:00 PM
To: java-user@lucene.apache.org
Subject: Re: lucene - nutch to rss?


Zak,

Doing such a thing is pretty simple.  If you take the Nutch sample, 
there is a JSP page which handles queries and renders the search 
results.  You can easily copy and alter that page to render the results 
in RSS format instead of HTML.

-Mike

jazdrv wrote:

>hello,
> 
>this is my first posting to this thread, and i haven't played with the 
>libraries as of yet. i'm curious whether people have been using 
>lucene/nutch to convert results to rss and what would be architectural 
>considerationis/time period in doing something like that.
> 
>zak
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 16:26:34 2005
Return-Path: <java-user-return-14075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19645 invoked from network); 13 Apr 2005 16:26:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 16:26:33 -0000
Received: (qmail 15275 invoked by uid 500); 13 Apr 2005 16:26:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15224 invoked by uid 500); 13 Apr 2005 16:26:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15168 invoked by uid 99); 13 Apr 2005 16:26:29 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_30_40,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from furl.net (HELO furl.net) (65.125.235.114)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 09:26:26 -0700
Received: from [172.16.125.40] (sv-fw.looksmart.com [64.241.242.18])
	(authenticated bits=0)
	by furl.net (8.12.8/8.12.8) with ESMTP id j3DGQKsn009765
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2005 16:26:21 GMT
Message-ID: <425D47F6.6030507@furl.net>
Date: Wed, 13 Apr 2005 12:25:26 -0400
From: Michael Giles <mgiles@furl.net>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: lucene - nutch to rss?
References: <002401c54043$83d0c190$70131009@ganesh>
In-Reply-To: <002401c54043$83d0c190$70131009@ganesh>
Content-Type: multipart/alternative;
 boundary="------------080306070802090504040405"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------080306070802090504040405
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

I think you are over-complicating it.  There is no need to turn the HTML 
into RSS.  Once you're in HTML, you've gone too far.  You just need to 
change the code in the JSP page that currently renders HTML so that it 
renders XML/RSS instead.  Then pass requests to your new JSP page when 
folks want RSS results.

You can obviously get into issues of caching and such to optimize 
performance, but to just get some RSS feeds up should be pretty simple 
(and shouldn't require anything other than a basic understanding of JSP).

-Mike

jazdrv wrote:

>ok, that's comforting to hear. i've been trying to figure out
>the particular piece that does that html to rss conversion.
>what have other people been using? Something like informa or 
>am I over-complicating myself?
>
>~z
>
>-----Original Message-----
>From: Michael Giles [mailto:mgiles@furl.net] 
>Sent: Wednesday, April 13, 2005 12:00 PM
>To: java-user@lucene.apache.org
>Subject: Re: lucene - nutch to rss?
>
>
>Zak,
>
>Doing such a thing is pretty simple.  If you take the Nutch sample, 
>there is a JSP page which handles queries and renders the search 
>results.  You can easily copy and alter that page to render the results 
>in RSS format instead of HTML.
>
>-Mike
>
>jazdrv wrote:
>
>  
>
>>hello,
>>
>>this is my first posting to this thread, and i haven't played with the 
>>libraries as of yet. i'm curious whether people have been using 
>>lucene/nutch to convert results to rss and what would be architectural 
>>considerationis/time period in doing something like that.
>>
>>zak
>>
>> 
>>
>>    
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>

--------------080306070802090504040405--

From java-user-return-14076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 16:51:58 2005
Return-Path: <java-user-return-14076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26046 invoked from network); 13 Apr 2005 16:51:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 16:51:58 -0000
Received: (qmail 68391 invoked by uid 500); 13 Apr 2005 16:51:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68368 invoked by uid 500); 13 Apr 2005 16:51:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68348 invoked by uid 99); 13 Apr 2005 16:51:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from keys.webasto.de (HELO keys.webasto.de) (194.59.2.36)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 09:51:42 -0700
Received: from sdestopgp1out.svc.de.web-int.net by keys.webasto.de
          via smtpd (for hermes.apache.org [209.237.227.199]) with ESMTP; Wed, 13 Apr 2005 18:51:42 +0200
Received: from keys1.webasto.de (loopback [127.0.0.1])
	by keys.webasto.de (Postfix) with ESMTP id 4C9D4256D8A
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2005 18:51:40 +0200 (CEST)
Received: from sdestoex2.svc.de.web-int.net ([192.168.205.22])
  by keys1.webasto.de (PGP Universal service);
  Wed, 13 Apr 2005 18:51:40 +0200
Received: from mailhub.wan.de.web-int.net by sdestoex2.svc.de.web-int.net
          via smtpd (for sdestopgp1int.svc.de.web-int.net [192.168.205.101]) with ESMTP; Wed, 13 Apr 2005 18:51:40 +0200
Received: from SDESTOCEX1.sto.de.web-int.net ([172.16.254.160]) by sdestoex2.de.web-int.net with Microsoft SMTPSVC(6.0.3790.0);
	 Wed, 13 Apr 2005 18:51:39 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Searching an NTFS File Server
Date: Wed, 13 Apr 2005 18:51:10 +0200
Message-ID: <EAF09DC4D4C9FE4C812A0633D2904063013177C5@SDESTOCEX1.sto.de.web-int.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching an NTFS File Server
Thread-Index: AcVAFP0s6lC95drnR8uc8q3eas7tdQACn+7QAAlF6OA=
From: "Maher Martin" <MMaher@Webasto.de>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 13 Apr 2005 16:51:39.0353 (UTC) FILETIME=[0FE73C90:01C54049]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Does the following concept sound reasonable?

* The Lucene index generator would run under a windows account that has
full read access to all files stored on the NTFS file server.=20
* For each file, the following information would have to be extracted:=20
  - the contents of the file and,=20
  - the access rights of the file (which windows users / groups have
read access to the file)=20

All of this information is stored within the Document index.
Once the index is complete and a user logs into the system then the
following would occur:

* The user's access rights would be read from Active Directory (i.e
windows group membership, etc)
* On the submission of a query to Lucene - the user / group access
rights would be appended as required search criteria and Lucene would
filter out all results that the user shouldn't see.

Is this the correct approach to take with Lucene?=20
And does anybody know how to extract user/group access right from Files
lying on an NTFS drive? Ok, I know this is more of a general Java
question - but I'd be interested in hearing from anyone who has faced a
similar requirement and how they solved it.


-----Original Message-----
From: Peter Veentjer - Anchor Men [mailto:p.veentjer@anchormen.nl]=20
Sent: 13 April 2005 13:56
To: java-user@lucene.apache.org
Subject: RE: Searching an NTFS File Server

You can use a filter with the IndexSearcher so that it removes all
'unwanted' results.=20

-----Original Message-----
From: Maher Martin=20
Sent: 13 April 2005 12:39
To: java-user@lucene.apache.org
Subject: Searching an NTFS File Server

Hello all,

We're currently evaluating search tools to cover the following
requirement:

We have an NTFS file server with 2 TB of files (word, excel, pdf, txt,
etc). We would like to index all these files and integrate a simple web
application into our intranet which will allow users to login using
their windows credentials and search through this file index, returning
only hits to files matching the users search criteria, to which the user
has the *necessary rights* to view.

My questions are:

-        How does one generate the list of results, so that the list
contains only entries that the user may view? Should the returned list
of results be post processed to filter out the invalid entries, and if
so how?

-        Is 2 TB of data to large to be handled by Lucene?

-        Has anybody implemented a similar type of application?

=20

Thanks in advance

Martin
---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 17:09:36 2005
Return-Path: <java-user-return-14077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32565 invoked from network); 13 Apr 2005 17:09:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 17:09:36 -0000
Received: (qmail 9520 invoked by uid 500); 13 Apr 2005 17:09:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9498 invoked by uid 500); 13 Apr 2005 17:09:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9483 invoked by uid 99); 13 Apr 2005 17:09:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 10:09:16 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id ECCD713E2135; Wed, 13 Apr 2005 13:09:13 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 70FB613E2136
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2005 13:08:57 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <001a01c54041$068aaa90$70131009@ganesh>
References: <001a01c54041$068aaa90$70131009@ganesh>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <e05b87c078c4e7cced7f78da22837824@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: lucene - nutch to rss?
Date: Wed, 13 Apr 2005 13:07:07 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 13, 2005, at 11:54 AM, jazdrv wrote:

> hello,
>
> this is my first posting to this thread, and i haven't played with the
> libraries as of yet. i'm curious whether people have been using
> lucene/nutch to convert results to rss and what would be architectural
> considerationis/time period in doing something like that.

My personal blog, such as it is, is powered by Lucene, a servlet, and 
some Velocity templates.  That's it.  I borrowed the RSS/RDF/RSS2 
templates from blojsom and adjusted them to my structure.

	http://www.blogscene.org/erik

Nutch just added (as in within the last day) support for A9's 
OpenSearch RSS extension.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 17:32:01 2005
Return-Path: <java-user-return-14078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40527 invoked from network); 13 Apr 2005 17:32:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 17:32:01 -0000
Received: (qmail 77767 invoked by uid 500); 13 Apr 2005 17:31:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77736 invoked by uid 500); 13 Apr 2005 17:31:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77704 invoked by uid 99); 13 Apr 2005 17:31:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc11.comcast.net (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 10:31:47 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2005041317314501300kokcme>; Wed, 13 Apr 2005 17:31:45 +0000
Message-ID: <425D5781.2060301@apache.org>
Date: Wed, 13 Apr 2005 10:31:45 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Hungarian notation analyzer and phrase queries
References: <s25c0886.041@provo>
In-Reply-To: <s25c0886.041@provo>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul Smith wrote:
> I have written a custom analyzer to tokenize PowerQuery into  'power',
> 'query, and 'powerquery' and change the position increment to 0, but I
> don't quite get the desired behavior. The phrase query "use power query
> for advanced searches" does not match, but "use query for advanced
> searches", and "use power for advanced searches" do.
> 
> Any ideas?

Another approach would be to index this as:

token:       use   power      query for advanced searches
                    powerquery
position:    0     1          2     3   4        5

Then use phrase queries with slop=1, to permit a one-token gap when 
someone searches for "use powerquery for advanced searches".

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 17:36:57 2005
Return-Path: <java-user-return-14079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41387 invoked from network); 13 Apr 2005 17:36:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 17:36:57 -0000
Received: (qmail 88780 invoked by uid 500); 13 Apr 2005 17:36:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88748 invoked by uid 500); 13 Apr 2005 17:36:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88731 invoked by uid 99); 13 Apr 2005 17:36:47 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 10:36:46 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 95F0B5B79D; Wed, 13 Apr 2005 10:36:44 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 94C297F45C
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2005 10:36:44 -0700 (PDT)
Date: Wed, 13 Apr 2005 10:36:44 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Hungarian notation analyzer and phrase queries
In-Reply-To: <425D5781.2060301@apache.org>
Message-ID: <Pine.LNX.4.58.0504131033090.7130@hal.rescomp.berkeley.edu>
References: <s25c0886.041@provo> <425D5781.2060301@apache.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Another approach would be to index this as:
:
: token:       use   power      query for advanced searches
:                     powerquery
: position:    0     1          2     3   4        5
:
: Then use phrase queries with slop=1, to permit a one-token gap when
: someone searches for "use powerquery for advanced searches".

right, but in your example "1" is a magic number that works because we are
only dealing with "multi-word synonyms" of 2 words.  in general, this
approach requires that you pick some some N such that you are garunteed no
synonym contains more then N-1 words, and set the token positions to...

 token:       use   powerquery         for  advanced  searches
                    power      query
 position:    0     N          N+1     2N   3N        4N





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 19:06:37 2005
Return-Path: <java-user-return-14080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72715 invoked from network); 13 Apr 2005 19:06:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 19:06:37 -0000
Received: (qmail 15724 invoked by uid 500); 13 Apr 2005 19:06:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15641 invoked by uid 500); 13 Apr 2005 19:06:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15625 invoked by uid 99); 13 Apr 2005 19:06:26 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of michael.wechner@wyona.com designates 195.226.6.68 as permitted sender)
Received: from mx1.wyona.com (HELO mx1.wyona.com) (195.226.6.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 12:06:24 -0700
Received: from 107.7.78.83.cust.bluewin.ch ([83.78.7.107] helo=[192.168.2.100])
	by mx1.wyona.com with asmtp (Exim 3.35 #1 (Debian))
	id 1DLnBr-0005f7-00
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2005 21:06:19 +0200
Message-ID: <425D6DA2.2010201@wyona.com>
Date: Wed, 13 Apr 2005 21:06:10 +0200
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.6) Gecko/20050319
X-Accept-Language: en-us, de, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: lucene - nutch to rss?
References: <001a01c54041$068aaa90$70131009@ganesh> <425D41F5.3020000@furl.net>
In-Reply-To: <425D41F5.3020000@furl.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael Giles wrote:

> Zak,
>
> Doing such a thing is pretty simple.  If you take the Nutch sample, 
> there is a JSP page which handles queries and renders the search results.


I think it would make sense to enhance the current JSP by introducing a 
"format" parameter, e.g.

nutch?format=xml

whereas default could be HTML (or XHTML)

It seems to me that the following formats would make sense most:

XML (plus an XSLT attached, e.g. 
http://search.msn.ch/results.aspx?q=Nutch&format=rss&FORM=ZZRE)

and a

(X)HTML like XML with a CSS attached.

If people are interested then I could try to provide such a patch.

Re the XSLT one then could offer various XSLTs in order to cover the 
various RSS
and Atom formats (and other "XMLs" of course).

Michi

-- 
Michael Wechner
Wyona Inc.  -   Open Source Content Management   -   Apache Lenya
http://www.wyona.com                      http://lenya.apache.org
michael.wechner@wyona.com                        michi@apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 19:21:24 2005
Return-Path: <java-user-return-14081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93100 invoked from network); 13 Apr 2005 19:21:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 19:21:24 -0000
Received: (qmail 59158 invoked by uid 500); 13 Apr 2005 19:21:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59123 invoked by uid 500); 13 Apr 2005 19:21:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59108 invoked by uid 500); 13 Apr 2005 19:21:11 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 59102 invoked by uid 99); 13 Apr 2005 19:21:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from ylpvm12-ext.prodigy.net (HELO ylpvm12.prodigy.net) (207.115.57.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 12:21:09 -0700
Received: from pimout6-ext.prodigy.net (pimout6-ext.prodigy.net [207.115.63.78])
	by ylpvm12.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j3DJL6ck031906
	for <lucene-user@jakarta.apache.org>; Wed, 13 Apr 2005 15:21:06 -0400
X-ORBL: [66.136.197.80]
Received: from [192.168.1.10] (adsl-66-136-197-80.dsl.austtx.swbell.net [66.136.197.80])
	by pimout6-ext.prodigy.net (8.12.10 milter /8.12.10) with ESMTP id j3DJKwbG092844
	for <lucene-user@jakarta.apache.org>; Wed, 13 Apr 2005 15:21:04 -0400
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <7e4a4763497edfcb919400ff6b3c7732@otherwise.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: Lucene Users List <lucene-user@jakarta.apache.org>
From: Bill Tschumy <bill@otherwise.com>
Subject: ArrayIndexOutOfBounds exception
Date: Wed, 13 Apr 2005 14:20:58 -0500
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am using the MoreLikeThis class that is available in the "similarity"  
package in the contributed software area.  It has bee working fine, but  
I just received the following exception

java.lang.ArrayIndexOutOfBoundsException: -1
	at  
org.apache.lucene.index.MultiReader.getTermFreqVector(MultiReader.java: 
89)
	at  
org.apache.lucene.search.similar.MoreLikeThis.retrieveTerms(MoreLikeThis 
.java:675)
	at  
org.apache.lucene.search.similar.MoreLikeThis.like(MoreLikeThis.java: 
452)
	at  
com.otherwise.parsnips.MySearcher.getMoreLikeThis(MySearcher.java:236)
	at com.otherwise.parsnips.Parsnips.showMoreLikeThis(Parsnips.java:1326)
      ...

Here is the offending code in getTermFreqVector:

   public TermFreqVector getTermFreqVector(int n, String field)
       throws IOException {
     int i = readerIndex(n);        // find segment num
     return subReaders[i].getTermFreqVector(n - starts[i], field);
   }

That index "i" returned from readerIndex() is -1.

I have gotten it twice, but am now unable to reproduce it.  Does anyone  
know if there is a known problem or what I might do to prevent it?

-- 
Bill Tschumy
Otherwise -- Austin, TX
http://www.otherwise.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 19:49:34 2005
Return-Path: <java-user-return-14082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1578 invoked from network); 13 Apr 2005 19:49:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 19:49:34 -0000
Received: (qmail 27848 invoked by uid 500); 13 Apr 2005 19:49:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27787 invoked by uid 500); 13 Apr 2005 19:49:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27766 invoked by uid 99); 13 Apr 2005 19:49:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 12:49:21 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B4EBE13E2135; Wed, 13 Apr 2005 15:49:08 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 0EF6913E2125
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2005 15:48:48 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <425D6DA2.2010201@wyona.com>
References: <001a01c54041$068aaa90$70131009@ganesh> <425D41F5.3020000@furl.net> <425D6DA2.2010201@wyona.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <441fdf2eb3e181f1614641d243c59ace@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: lucene - nutch to rss?
Date: Wed, 13 Apr 2005 15:48:58 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 13, 2005, at 3:06 PM, Michael Wechner wrote:

> Michael Giles wrote:
>
>> Zak,
>>
>> Doing such a thing is pretty simple.  If you take the Nutch sample, 
>> there is a JSP page which handles queries and renders the search 
>> results.
>
>
> I think it would make sense to enhance the current JSP by introducing 
> a "format" parameter, e.g.
>
> nutch?format=xml
>
> whereas default could be HTML (or XHTML)
>
> It seems to me that the following formats would make sense most:
>
> XML (plus an XSLT attached, e.g. 
> http://search.msn.ch/results.aspx?q=Nutch&format=rss&FORM=ZZRE)
>
> and a
>
> (X)HTML like XML with a CSS attached.
>
> If people are interested then I could try to provide such a patch.

That's really more appropriate to the Nutch list, not the Lucene user 
list.

> Re the XSLT one then could offer various XSLTs in order to cover the 
> various RSS
> and Atom formats (and other "XMLs" of course).

Earlier today I saw Doug commit a servlet to Nutch which serves up the 
A9 OpenSearch RSS format.  Again, best to take the Nutch related 
discussions to its list.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 19:54:43 2005
Return-Path: <java-user-return-14083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2722 invoked from network); 13 Apr 2005 19:54:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 19:54:43 -0000
Received: (qmail 38379 invoked by uid 500); 13 Apr 2005 19:54:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38356 invoked by uid 500); 13 Apr 2005 19:54:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38343 invoked by uid 99); 13 Apr 2005 19:54:31 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of michael.wechner@wyona.com designates 195.226.6.68 as permitted sender)
Received: from mx1.wyona.com (HELO mx1.wyona.com) (195.226.6.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 12:54:30 -0700
Received: from 107.7.78.83.cust.bluewin.ch ([83.78.7.107] helo=[192.168.2.100])
	by mx1.wyona.com with asmtp (Exim 3.35 #1 (Debian))
	id 1DLnwP-0001WA-00
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2005 21:54:25 +0200
Message-ID: <425D78F1.5000003@wyona.com>
Date: Wed, 13 Apr 2005 21:54:25 +0200
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.6) Gecko/20050319
X-Accept-Language: en-us, de, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: lucene - nutch to rss?
References: <001a01c54041$068aaa90$70131009@ganesh> <425D41F5.3020000@furl.net> <425D6DA2.2010201@wyona.com> <441fdf2eb3e181f1614641d243c59ace@ehatchersolutions.com>
In-Reply-To: <441fdf2eb3e181f1614641d243c59ace@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

> That's really more appropriate to the Nutch list, not the Lucene user 
> list.


right. I realised at the very last moment (when it was too late ;-) that 
the address
was the lucene list instead the nutch list

>
>> Re the XSLT one then could offer various XSLTs in order to cover the 
>> various RSS
>> and Atom formats (and other "XMLs" of course).
>
>
> Earlier today I saw Doug commit a servlet to Nutch which serves up the 
> A9 OpenSearch RSS format.  Again, best to take the Nutch related 
> discussions to its list.


good to know. I will take a look at it.

Thanks

Michi

>
>     Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Michael Wechner
Wyona Inc.  -   Open Source Content Management   -   Apache Lenya
http://www.wyona.com                      http://lenya.apache.org
michael.wechner@wyona.com                        michi@apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 22:13:14 2005
Return-Path: <java-user-return-14084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55104 invoked from network); 13 Apr 2005 22:13:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2005 22:13:14 -0000
Received: (qmail 36869 invoked by uid 500); 13 Apr 2005 22:13:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36833 invoked by uid 500); 13 Apr 2005 22:13:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36819 invoked by uid 99); 13 Apr 2005 22:13:03 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=SPF_HELO_PASS,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (hermes.apache.org: transitioning domain of lucenelist@danielnaber.de does not designate 80.67.18.16 as permitted sender)
Received: from smtprelay04.ispgateway.de (HELO smtprelay04.ispgateway.de) (80.67.18.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 15:13:02 -0700
Received: (qmail 8219 invoked from network); 13 Apr 2005 22:12:58 -0000
Received: from unknown (HELO p54967F43.dip.t-dialin.net) ([pbs]937788@[84.150.127.67])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 13 Apr 2005 22:12:58 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Strange sort error
Date: Thu, 14 Apr 2005 00:11:16 +0200
User-Agent: KMail/1.8
References: <dab56f707725e6206fb0b2e1bdd7aed7@otherwise.com> <adc8773d9da86fed89a6f7823afab71b@ehatchersolutions.com> <16e966217680968994ed9d8b5d0c47f1@otherwise.com>
In-Reply-To: <16e966217680968994ed9d8b5d0c47f1@otherwise.com>
MIME-Version: 1.0
Content-Disposition: inline
Message-Id: <200504140011.16575@danielnaber.de>
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 12 April 2005 20:04, Bill Tschumy wrote:

> Here is a small program that will manifest the error. =C2=A0Hopefully =C2=
=A0
> someone can explain the problem. =C2=A0It happens with Lucene 1.4.2 and =
=C2=A0
> 1.4.3.

This is the code that throws the exception (from FieldCacheImpl.java):

  TermEnum termEnum =3D reader.terms (new Term (field, ""));
  (...)
  if (termEnum.term() =3D=3D null) {
      throw new RuntimeException ("no terms in field " + field);
  }

The problem is that a TermEnum always returns all terms after a given one,=
=20
not only terms in the same field. So the check is incomplete. If one=20
changes the if like this, one will always get an exception if there are no=
=20
terms in the field, as the exception claims:

  if (termEnum.term() =3D=3D null || !termEnum.term().field().equals(field)=
) {

The other issue is that you probably expect to not get an exception at all,=
=20
as there are no matches. Lucene doesn't first search and then sort, these=20
tasks are parallel I think. So this is not that easy to fix (and I doubt=20
if one should try).

Could you open a bug report for the problem with the exception that seems=20
to occur only sometimes? The change suggested above needs to be tested=20
before it can be committed and a bug report is useful for that.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 05:36:12 2005
Return-Path: <java-user-return-14085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49983 invoked from network); 14 Apr 2005 05:36:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 05:36:11 -0000
Received: (qmail 92209 invoked by uid 500); 14 Apr 2005 05:35:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92146 invoked by uid 500); 14 Apr 2005 05:35:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92120 invoked by uid 500); 14 Apr 2005 05:35:53 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 92111 invoked by uid 99); 14 Apr 2005 05:35:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from anchor-post-36.mail.demon.net (HELO anchor-post-36.mail.demon.net) (194.217.242.86)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 22:35:51 -0700
Received: from rselvaraj.demon.co.uk ([83.104.137.62] helo=ROBERTSELVARAJ)
	by anchor-post-36.mail.demon.net with esmtp (Exim 4.42)
	id 1DLx12-0005EP-Ki; Thu, 14 Apr 2005 05:35:48 +0000
Reply-To: <lucene@searchblox.com>
From: "Robert Selvaraj" <lucene@searchblox.com>
To: <lucene-user@jakarta.apache.org>,
	<lucene-dev@jakarta.apache.org>
Subject: SearchBlox J2EE Search Expands Language Support in Version 2.2
Date: Thu, 14 Apr 2005 06:35:44 +0100
Organization: SearchBlox Software, Inc.
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcVAs81OVn29AtT2QA6g1sAdOAj1Zg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SearchBlox is a J2EE Search Component that delivers out-of-the-box search
functionality for fast and easy implementation in your websites,
applications, intranets and portals. SearchBlox uses the Lucene Search API
and incorporates integrated HTTP/HTTPS and File System crawlers, support for
various document formats including HTML, Word, PDF, PowerPoint and Excel,
support for indexing and searching content in 30 languages and fully
customizable search results, all controlled from a browser-based Admin
Console. 
 
Main features in this release: 
==============================
- Support for indexing content in 12 new languages. The new languages
supported are Arabic, Czech, Estonian, Hebrew, Hungarian, Latvian,
Lithuanian, Romanian, Slovak, Slovenian, Thai and Turkish.

- Support for indexing using Proxy Servers

- Disable stemming for individual collections    


SearchBlox is available as a Web Archive (WAR) and is deployable on any
Servlet 2.3/JSP 1.2 compliant server. SearchBlox 

Getting-Started Guides are available for the following servers: 

JBoss - http://www.searchblox.com/gettingstarted_jboss.html 
Jetty - http://www.searchblox.com/gettingstarted_jetty.html 
JRun - http://www.searchblox.com/gettingstarted_jrun.html 
Oracle - http://www.searchblox.com/gettingstarted_oracle.html 
Pramati - http://www.searchblox.com/gettingstarted_pramati.html 
Resin - http://www.searchblox.com/gettingstarted_resin.html 
Sun - http://www.searchblox.com/gettingstarted_sun.html 
Tomcat - http://www.searchblox.com/gettingstarted_tomcat.html 
Weblogic - http://www.searchblox.com/gettingstarted_weblogic.html 
Websphere - http://www.searchblox.com/gettingstarted_websphere.html 

SearchBlox is also available as SearchBlox Server. The Server is an
integrated application incorporating everything you need to run SearchBlox.
The Server includes SearchBlox J2EE Component, the Jetty Application Server
and the Java Runtime Environment(JRE) 1.4. With the SearchBlox Server, there
are no additional software requirements to deploy SearchBlox. 

The SearchBlox FREE Edition is available free of charge and can index up to
1000 documents. 

The software can be downloaded from http://www.searchblox.com





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 06:45:29 2005
Return-Path: <java-user-return-14086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63326 invoked from network); 14 Apr 2005 06:45:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 06:45:29 -0000
Received: (qmail 79055 invoked by uid 500); 14 Apr 2005 06:45:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79027 invoked by uid 500); 14 Apr 2005 06:45:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79008 invoked by uid 99); 14 Apr 2005 06:45:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ngwnameserver.tenfold.com (HELO slcgw1c.tenfold.com) (69.27.3.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 13 Apr 2005 23:45:12 -0700
Received: from no.name.available by slcgw1c.tenfold.com
          via smtpd (for hermes.apache.org [209.237.227.199]) with ESMTP; Thu, 14 Apr 2005 00:45:11 -0600
Received: from provo (provo [10.96.11.226]) by SLCMS6.tenfold.com 
    (Clearswift SMTPRS 5.0.9) with ESMTP id 
    <T704a961a040a600aa1c64@SLCMS6.tenfold.com> for 
    <java-user@lucene.apache.org>; Thu, 14 Apr 2005 00:48:08 -0600
Received: from CORPDOM-MTA by provo with Novell_GroupWise; Thu, 14 Apr 2005 
    00:46:08 -0600
Message-Id: <s25dbd50.091@provo>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Thu, 14 Apr 2005 00:45:52 -0600
From: "Paul Smith" <PSmith@tenfold.com>
To: <hossman_lucene@fucit.org>,<java-user@lucene.apache.org>
Subject: Re: Hungarian notation analyzer and phrase queries
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 500/1000/N

Thanks for your help guys!

If you put the term query at position 2 then you need slop to find "Use
PowerQuery for advanced searches", which is the exact text in the
document.  I think I'd rather have that phrase query work without any
slop, and require some slop for  "use power query for advanced
searches", because it doesn't really match the document exactly anyway.
Putting powerquery, power, and query at the same position has this
behavior. But in this approach, queries like  "Use query for advanced
searches" also match.

On the other hand, if we put query at the next position (position 2 in
this example), then "Use query for advanced searches" does not match
(correctly).

Either of these approaches seem to work fine with non-phrase queries.
The approach that always replaces power query with powerquery has
problems in some of these areas (like wildcard and fuzzy searches).

So it sounds like there isn't a perfect solution, but I think the best
tradeoff for me is to put them all in the same position.... unless
anyone has more input on the subject?

Paul


>>> hossman_lucene@fucit.org 04/13/05 11:36AM >>>

: Another approach would be to index this as:
:
: token:       use   power      query for advanced searches
:                     powerquery
: position:    0     1          2     3   4        5
:
: Then use phrase queries with slop=1, to permit a one-token gap when
: someone searches for "use powerquery for advanced searches".

right, but in your example "1" is a magic number that works because we
are
only dealing with "multi-word synonyms" of 2 words.  in general, this
approach requires that you pick some some N such that you are garunteed
no
synonym contains more then N-1 words, and set the token positions
to...

 token:       use   powerquery         for  advanced  searches
                    power      query
 position:    0     N          N+1     2N   3N        4N





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
For additional commands, e-mail: java-user-help@lucene.apache.org 


http://www.tenfold.com

**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the TenFold Postmaster (postmaster@tenfold.com).
**********************************************************************


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 08:33:27 2005
Return-Path: <java-user-return-14087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15024 invoked from network); 14 Apr 2005 08:33:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 08:33:27 -0000
Received: (qmail 55755 invoked by uid 500); 14 Apr 2005 08:33:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55729 invoked by uid 500); 14 Apr 2005 08:33:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55715 invoked by uid 99); 14 Apr 2005 08:33:11 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of eric138@gmail.com designates 64.233.162.205 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.205)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 01:33:10 -0700
Received: by zproxy.gmail.com with SMTP id 18so1243909nzp
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 01:33:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=ZgONVk3vcgwDg7SBbu2/U9BazUsokboyxOv2huQEWbILFGvMRybkFmth+i6h9+xtgfJ867tEkRlnp0GXP+Wqv58jer1ahe+WJsgjj3VL+PY+Xm2H3M5B4uOh3Y57GkM/SZ1sufzpqfreXGued3FMPzzrQBft0u2wh7KS8EGGNtM=
Received: by 10.36.97.10 with SMTP id u10mr96065nzb;
        Thu, 14 Apr 2005 01:33:08 -0700 (PDT)
Received: by 10.36.103.4 with HTTP; Thu, 14 Apr 2005 01:33:07 -0700 (PDT)
Message-ID: <f472e9a00504140133598c2e55@mail.gmail.com>
Date: Thu, 14 Apr 2005 16:33:08 +0800
From: Eric Chow <eric138@gmail.com>
Reply-To: Eric Chow <eric138@gmail.com>
To: java-user@lucene.apache.org
Subject: Highlighter for CJK ??
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

Is any any good Highlighter for Asian languages (Chinese, Japanese, Koreane=
se)

Eric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 08:51:50 2005
Return-Path: <java-user-return-14088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20200 invoked from network); 14 Apr 2005 08:51:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 08:51:50 -0000
Received: (qmail 83596 invoked by uid 500); 14 Apr 2005 08:51:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83566 invoked by uid 500); 14 Apr 2005 08:51:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83511 invoked by uid 99); 14 Apr 2005 08:51:20 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_HELO_FAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail06.powweb.com (HELO mail06.powweb.com) (66.152.97.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 01:51:16 -0700
Received: from [172.24.106.195] (global-nat-fw1.bj.corp.yahoo.com [202.43.217.195])
	by mail06.powweb.com (Postfix) with ESMTP id DDE24B088;
	Thu, 14 Apr 2005 01:51:09 -0700 (PDT)
Received: from 127.0.0.1 (AVG SMTP 7.0.308 [266.9.7]); Thu, 14 Apr 2005 16:52:36 +0800
Message-ID: <425E2F50.5060502@chedong.com>
Date: Thu, 14 Apr 2005 16:52:32 +0800
From: Che Dong <chedong@chedong.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: zh-cn,zh
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighter for CJK ??
References: <f472e9a00504140133598c2e55@mail.gmail.com>
In-Reply-To: <f472e9a00504140133598c2e55@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Here is a demo:
http://grassland.cnblog.org/

Che Dong

Eric Chow åé:
> Hello,
> 
> Is any any good Highlighter for Asian languages (Chinese, Japanese, Koreanese)
> 
> Eric
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 08:52:15 2005
Return-Path: <java-user-return-14089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20277 invoked from network); 14 Apr 2005 08:52:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 08:52:15 -0000
Received: (qmail 86048 invoked by uid 500); 14 Apr 2005 08:52:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86024 invoked by uid 500); 14 Apr 2005 08:52:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86009 invoked by uid 99); 14 Apr 2005 08:52:03 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from web26005.mail.ukl.yahoo.com (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 14 Apr 2005 01:52:01 -0700
Received: (qmail 43721 invoked by uid 60001); 14 Apr 2005 08:51:58 -0000
Message-ID: <20050414085158.43719.qmail@web26005.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26005.mail.ukl.yahoo.com via HTTP; Thu, 14 Apr 2005 09:51:58 BST
Date: Thu, 14 Apr 2005 09:51:58 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Highlighter for CJK ??
To: java-user@lucene.apache.org, Eric Chow <eric138@gmail.com>
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Eric,
I haven't tested it personally, but I have had reports
that it works OK with CJKAnalyzer. This was reported
after I added support for overlapping tokens in 
tokenstreams last July.

Cheers,
Mark


--- Eric Chow <eric138@gmail.com> wrote:
> Hello,
> 
> Is any any good Highlighter for Asian languages
> (Chinese, Japanese, Koreanese)
> 
> Eric
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 

Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 09:13:21 2005
Return-Path: <java-user-return-14090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26147 invoked from network); 14 Apr 2005 09:13:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 09:13:21 -0000
Received: (qmail 29853 invoked by uid 500); 14 Apr 2005 09:13:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29751 invoked by uid 500); 14 Apr 2005 09:12:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29692 invoked by uid 99); 14 Apr 2005 09:12:58 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 66-7-233-83.scalix.com (HELO hagrid.scalix.local) (66.7.233.83)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 02:12:56 -0700
Received: from hagrid.scalix.local (localhost.localdomain [127.0.0.1])
	by hagrid.scalix.local (8.12.11/8.12.11) with ESMTP id j3E91Hl4008311
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 02:01:17 -0700
Received: from hagrid.scalix.local (root@localhost)
	by hagrid.scalix.local (8.12.11/8.12.11/Submit) with ESMTP id j3E91H4Z008309
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 02:01:17 -0700
Received: from [10.11.108.231] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 9.2.1.14)
    via ESMTP; Thu, 14 Apr 2005 10:12:49 +0100 (BST)
Date: Thu, 14 Apr 2005 10:12:49 +0100
From: John Haxby <jch@scalix.com>
Sender: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <425E3411.4070208@scalix.com>
In-Reply-To: <EAF09DC4D4C9FE4C812A0633D2904063013177C5@SDESTOCEX1.sto.de.web>
References: <EAF09DC4D4C9FE4C812A0633D2904063013177C5@SDESTOCEX1.sto.de.web>
Subject: Re: Searching an NTFS File Server
x-scalix-Hops: 3
User-Agent: Mozilla Thunderbird  (X11/20050322)
X-Accept-Language: en-us, en
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1";
	format="flowed"
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Maher Martin wrote:

>* The user's access rights would be read from Active Directory (i.e
>windows group membership, etc)
>* On the submission of a query to Lucene - the user / group access
>rights would be appended as required search criteria and Lucene would
>filter out all results that the user shouldn't see.
>  
>
That deals with a user's access rights changing but it doesn't deal with 
the access rights if individual files changing, unless you re-index a 
file when its access rights change.   I don't know about NT, but 
Linux/Unix permissions on files change helluva a lot more often than a 
user's access rights change.

Although slower than relying entirely on Lucene, I would be inclined to 
filter out results for which the user has no access.   Unless I've 
missed  something in recent JDK versions, I don't think that there is 
anything in Java to do this and you'd have to wrap a small library using 
JNI or similar to do this check.

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 13:40:06 2005
Return-Path: <java-user-return-14091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46725 invoked from network); 14 Apr 2005 13:40:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 13:40:06 -0000
Received: (qmail 50596 invoked by uid 500); 14 Apr 2005 13:39:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50567 invoked by uid 500); 14 Apr 2005 13:39:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50552 invoked by uid 99); 14 Apr 2005 13:39:46 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from host59a.simplicato.com (HELO host54a.simplicato.com) (207.99.47.59)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 06:39:45 -0700
Received: from localhost (localhost.simplicato.com [127.0.0.1])
	by host54a.simplicato.com (Postfix) with ESMTP id BD3156C02A9
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 09:39:40 -0400 (EDT)
Received: from host54a.simplicato.com ([127.0.0.1])
 by localhost (host54a.simplicato.com [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 92242-10 for <java-user@lucene.apache.org>;
 Thu, 14 Apr 2005 09:39:40 -0400 (EDT)
Received: from pangloss (unknown [216.195.213.27])
	by host54a.simplicato.com (Postfix) with SMTP id 626606C029F
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 09:39:40 -0400 (EDT)
From: "Roy Klein" <klein@sitescape.com>
To: <java-user@lucene.apache.org>
Subject: Update performance/indexwriter.delete()?
Date: Thu, 14 Apr 2005 09:39:43 -0400
Message-ID: <OAELLNADBIAIBGFCBKEKOEOHDDAA.klein@sitescape.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Scanned: by amavisd-new at simplicato.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I've got an application that will be doing constant updates to an index.
I've looked into batching those updates, however, based on the way the
application works, the updates can't be batched. (Well, I figure with a lot
of work, I might be able to batch ~10% of the transactions) Another
requirement of my application is that the index needs to be updated
synchronously (i.e. a given thread will update a document, and then
immediately issue a query in which the updated document must be in the
resulting hits), so keeping a "background working copy" of the index and
switching it out with a live copy doesn't work in this case.

I started looking at the performance issues involved in updating one
document at a time, and found that most of the cost is in opening and
closing readers&writers.

So one thing I've been wondering:  Why do you need to do deletes from an
indexreader?  Is there some reason why a writer couldn't be modified to do
both deletes and adds?

Could someone who is familiar with the design please explain why a reader is
required?   This seems to be a common enough issue that I bet a lot of
people on this list would benefit from a thorough explanation.   ( I just
ordered the LIA book, if it's explained in there, then my apologies for not
having read it before posting here)

Roy


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 14:29:49 2005
Return-Path: <java-user-return-14092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70307 invoked from network); 14 Apr 2005 14:29:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 14:29:49 -0000
Received: (qmail 9648 invoked by uid 500); 14 Apr 2005 14:29:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9563 invoked by uid 500); 14 Apr 2005 14:29:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9479 invoked by uid 99); 14 Apr 2005 14:29:16 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.205 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.205)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 07:29:08 -0700
Received: by rproxy.gmail.com with SMTP id b11so337698rne
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 07:28:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ZTLwaKxqempoXKIrUZgPueTZak0uC0oyjbd6IOG8sV49S2kMEftH+LnNc/Iwwjp+2Z6IJ6cn/lswx57w+R9s7uKxNKv6NJPFAc7+Or59PiQAXRUErab8/QHAH4WRbWpAWmyzExZkUjjqSJJnStt/mV3ZdBhWFCuzVOuWJunjoNM=
Received: by 10.38.68.47 with SMTP id q47mr1778604rna;
        Thu, 14 Apr 2005 07:28:45 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Thu, 14 Apr 2005 07:28:44 -0700 (PDT)
Message-ID: <c68e3917050414072835c1d799@mail.gmail.com>
Date: Thu, 14 Apr 2005 10:28:44 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Strange sort error
In-Reply-To: <200504140011.16575@danielnaber.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <dab56f707725e6206fb0b2e1bdd7aed7@otherwise.com>
	 <adc8773d9da86fed89a6f7823afab71b@ehatchersolutions.com>
	 <16e966217680968994ed9d8b5d0c47f1@otherwise.com>
	 <200504140011.16575@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I haven't tried it, but I think the fix should be easy... never throw
that exception.  Either check for null before the loop, or in the
loop.

Original code for native int sorting:

        TermEnum termEnum =3D reader.terms (new Term (field, ""));
        try {
          if (termEnum.term() =3D=3D null) {
            throw new RuntimeException ("no terms in field " + field);
          }
          do {
            Term term =3D termEnum.term();
            if (term.field() !=3D field) break;
            int termval =3D Integer.parseInt (term.text());
            termDocs.seek (termEnum);
            while (termDocs.next()) {
              retArray[termDocs.doc()] =3D termval;
            }
          } while (termEnum.next());
        } finally {
          termDocs.close();
          termEnum.close();
        }

------------- possible fix --------------
        TermEnum termEnum =3D reader.terms (new Term (field, ""));
        try { =20
          do {
            Term term =3D termEnum.term();
            if (termEnum=3D=3Dnull || term.field() !=3D field) break;  // C=
HANGE here
            int termval =3D Integer.parseInt (term.text());
            termDocs.seek (termEnum);
            while (termDocs.next()) {
              retArray[termDocs.doc()] =3D termval;
            }
          } while (termEnum.next());
        } finally {
          termDocs.close();
          termEnum.close();
        }

-Yonik

On 4/13/05, Daniel Naber <lucenelist@danielnaber.de> wrote:
> On Tuesday 12 April 2005 20:04, Bill Tschumy wrote:
>=20
> > Here is a small program that will manifest the error. Hopefully=20
> > someone can explain the problem. It happens with Lucene 1.4.2 and=20
> > 1.4.3.
>=20
> This is the code that throws the exception (from FieldCacheImpl.java):
>=20
>   TermEnum termEnum =3D reader.terms (new Term (field, ""));
>   (...)
>   if (termEnum.term() =3D=3D null) {
>       throw new RuntimeException ("no terms in field " + field);
>   }
>=20
> The problem is that a TermEnum always returns all terms after a given one=
,
> not only terms in the same field. So the check is incomplete. If one
> changes the if like this, one will always get an exception if there are n=
o
> terms in the field, as the exception claims:
>=20
>   if (termEnum.term() =3D=3D null || !termEnum.term().field().equals(fiel=
d)) {
>=20
> The other issue is that you probably expect to not get an exception at al=
l,
> as there are no matches. Lucene doesn't first search and then sort, these
> tasks are parallel I think. So this is not that easy to fix (and I doubt
> if one should try).
>=20
> Could you open a bug report for the problem with the exception that seems
> to occur only sometimes? The change suggested above needs to be tested
> before it can be committed and a bug report is useful for that.
>=20
> Regards
>  Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 14:47:07 2005
Return-Path: <java-user-return-14093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79271 invoked from network); 14 Apr 2005 14:47:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 14:47:07 -0000
Received: (qmail 64692 invoked by uid 500); 14 Apr 2005 14:44:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64649 invoked by uid 500); 14 Apr 2005 14:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64498 invoked by uid 99); 14 Apr 2005 14:44:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.saumag.edu (HELO mail.SAUMAG.EDU) (150.208.44.1)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 07:44:39 -0700
Received: from 32217 (32217-.saumag.edu [10.1.1.13]) by mail.SAUMAG.EDU with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2653.13)
	id H3A3YD53; Thu, 14 Apr 2005 09:44:33 -0500
From: "Luis Medina" <lmedina@ruralsource.com>
To: "Lucene java user" <java-user@lucene.apache.org>
Subject: IOException: No such path or directory
Date: Thu, 14 Apr 2005 09:44:34 -0500
Message-ID: <ACEIJKEFACAHGGILCJHOGEDKCAAA.lmedina@ruralsource.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Everyone,

The company I work for uses Lucene search 2 of their sites. Each site's
configuration is (almost) an mirror image of the other. The only difference
here is the content. We use a servlet to start up a Lucene mantainance
utility that keeps the indexes up to date. This servlet is set to load when
the servers are rebooted (which happens periodically). That way (ideally)
the mantainance util is started automatically.
I don't know if the information above is relevant to the problem, but I
thought I'd give it to you anyway, just in case.
Yesterday, I started seeing an ArrayIndexOutOfBounds exception in the logs.
I don't have the stack trace, but it is similar (almost identical, in fact)
to the stack trace found here:
http://issues.apache.org/bugzilla/show_bug.cgi?id=14355

Thinking maybe one of the indexes was corrupted, I decided to rebuild the
indexes from scratch: I stoped the mantainance utility, I deleted the
indexes, restarted the mantainance utility and let it rebuild the indexes.
This created another problem: the following exception showed up in the logs:

java.io.IOException: No such path or directory.
/.../.../.../lucenesearch/_v.fnm
      java/lang/Throwable.<init>(Ljava/lang/String;)V+4 (Throwable.java:94)
      java/lang/Exception.<init>(Ljava/lang/String;)V+1 (Exception.java:42)
      java/io/IOException.<init>(Ljava/lang/String;)V+1
(IOException.java:47)
      java/io/RandomAccessFile.<init>(Ljava/lang/String;Ljava/lang/String;)V
+0 (RandomAccessFile.java:88)
      java/io/RandomAccessFile.<init>(Ljava/io/File;Ljava/lang/String;)V+0
(RandomAccessFile.java:145)
      org/apache/lucene/store/FSInputStream$Descriptor.<init>(Lorg/apache/lu
cene/store/FSInputStream;Ljava/io/File;Ljava/lang/String;)V+0 (:??)
      org/apache/lucene/store/FSInputStream.<init>(Ljava/io/File;)V+0 (:??)
      org/apache/lucene/store/FSDirectory.openFile(Ljava/lang/String;)Lorg/a
pache/lucene/store/InputStream;+0 (:??)
      org/apache/lucene/index/FieldInfos.<init>(Lorg/apache/lucene/store/Dir
ectory;Ljava/lang/String;)V+0 (:??)
      org/apache/lucene/index/SegmentReader.<init>(Lorg/apache/lucene/index/
SegmentInfo;)V+0 (:??)
      org/apache/lucene/index/IndexWriter.mergeSegments(I)V+0 (:??)
      org/apache/lucene/index/IndexWriter.optimize()V+0 (:??)
      .../.../lucene/wc/update/LuceneUpdate.buildIndex(Ljava/lang/String;)V+
0 (:??)
      .../.../lucene/wc/update/LuceneUpdate.maintainIndex()V+0 (:??)
      .../.../lucene/wc/update/LuceneUpdate.run()V+0 (:??)
      java/lang/Thread.run()V+11 (Thread.java:479)

Some index files are generated but then the program quits and this exception
shows up in the logs over, and over and over and over and over......., along
with other exceptions, primarily reporting lock issues (except no lock files
were found in the directory).  I finally had to stop the program, delete the
files and restart it. Only that time, it actually worked.
So far, the program seems to be working, but I would like to know what
caused this problem, and if it is going to show up again. This problem
started showing up after last week's reboot, maybe it had to do with it? Has
anyone encountered anything similar before? Any suggestions?

I appreciate your help.
Thank you,

Luis A. Medina


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 14:52:25 2005
Return-Path: <java-user-return-14094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83082 invoked from network); 14 Apr 2005 14:52:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 14:52:25 -0000
Received: (qmail 88944 invoked by uid 500); 14 Apr 2005 14:51:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88745 invoked by uid 500); 14 Apr 2005 14:50:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88607 invoked by uid 99); 14 Apr 2005 14:50:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 07:50:41 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Subject: RE: Update performance/indexwriter.delete()?
Content-Transfer-Encoding: quoted-printable
Date: Thu, 14 Apr 2005 16:50:11 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA071140@gerard.anchormen.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Update performance/indexwriter.delete()?
thread-index: AcVA93VJ2LvVfqliTia/6EQOKfyHcQACMakA
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

=20

-----Oorspronkelijk bericht-----
Van: Roy Klein [mailto:klein@sitescape.com]=20
Verzonden: donderdag 14 april 2005 15:40
Aan: java-user@lucene.apache.org
Onderwerp: Update performance/indexwriter.delete()?


>>I've got an application that will be doing=20
>>constant updates to an index.
>>I've looked into batching those updates, however,
>>based on the way the application works,=20
>>the updates can't be batched.=20

You could always batch a single document :)

At the moment I have a components that stores documents to write/delete
and is called once and a while. This makes it very easy to do batch
processing (and also makes it easier to deal with the concurrency
problems)

>>(Well, I figure with a lot of work, I might be able=20
>>to batch ~10% of the transactions) Another requirement=20
>>of my application is that the index needs to be updated
>> synchronously (i.e. a given thread will update a document
>>, and then immediately issue a query in which the updated=20
>>document must be in the resulting hits), so keeping a=20
>>"background working copy" of the index and switching=20
>>it out with a live copy doesn't work in this case.

This is not possible onless you only process one single=20
document at a time. After the document is writing you have to=20
refresh the readed and find the document. Why do have such a
requirement?=20
Are you afraid that a single document is indexed more than once? :)

In the platform for Lucene I have writen for all document it is very
very
Important that the index never contains two (or more)instances of the=20
Same document. This is possible, even with doing batch updates :)

>>I started looking at the performance issues involved in updating one=20
>>document at a time, and found that most of the cost is in opening=20
>>and closing readers&writers.

That is why batchupdating is invented :)

>>So one thing I've been wondering:  Why do you need to do=20
>>deletes from an indexreader?  Is there some reason why a writer=20
>>couldn't be modified to do both deletes and adds?

>>Could someone who is familiar with the design please explain why a
reader is
>>required?   This seems to be a common enough issue that I bet a lot of
>>people on this list would benefit from a thorough explanation.   ( I
just
>>ordered the LIA book, if it's explained in there, then my apologies
for not having read it before posting here)

It is explained in that book ;)

Roy


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 15:16:02 2005
Return-Path: <java-user-return-14095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92514 invoked from network); 14 Apr 2005 15:16:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 15:16:02 -0000
Received: (qmail 73400 invoked by uid 500); 14 Apr 2005 15:15:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73369 invoked by uid 500); 14 Apr 2005 15:15:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73343 invoked by uid 99); 14 Apr 2005 15:15:38 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of gomesp@gmail.com designates 64.233.184.203 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 08:15:33 -0700
Received: by wproxy.gmail.com with SMTP id 36so528052wra
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 08:15:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Lopq4dDseOjzeLRaB60pLF8y85CDGjvigGA2T6RBGwANy2nS7g9Fs0Nvy1ap3q80tjXiMEvCopmwZRH2cbCzuiF+VSG18cvdO1SnsA/LtCXciY/Kp0F2alvxHqjDnH3wzO+Ys0N9u4doVd4lvVaIShxG6pMXlFcdkDKPrI/BSUY=
Received: by 10.54.6.65 with SMTP id 65mr984879wrf;
        Thu, 14 Apr 2005 08:15:26 -0700 (PDT)
Received: by 10.54.104.18 with HTTP; Thu, 14 Apr 2005 08:15:26 -0700 (PDT)
Message-ID: <4f05ec8e05041408151cd97502@mail.gmail.com>
Date: Thu, 14 Apr 2005 17:15:26 +0200
From: Pablo Gomes Ludermir <gomesp@gmail.com>
Reply-To: Pablo Gomes Ludermir <gomesp@gmail.com>
To: java-user@lucene.apache.org
Subject: getting the number of occurrences within a document
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,

I would like to get the following information from the index:

1. Given a term, how many times the term occurs in each document.
Something like a triple:
< Term, Doc1, Freq> , <Term, Doc2, Freq>, <Term2, Docx, Freq>, ...

Is possible to do that?


Regards,
Pablo

--=20
Pablo Gomes Ludermir
gomesp@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 15:19:05 2005
Return-Path: <java-user-return-14096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93603 invoked from network); 14 Apr 2005 15:19:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 15:19:05 -0000
Received: (qmail 83169 invoked by uid 500); 14 Apr 2005 15:18:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83113 invoked by uid 500); 14 Apr 2005 15:18:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82960 invoked by uid 99); 14 Apr 2005 15:18:36 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.201 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.201)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 08:18:33 -0700
Received: by rproxy.gmail.com with SMTP id b11so348536rne
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 08:18:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=VboXgUkzxRS+xHdxpNLFqstmMlkcxAwK/zdRqA1bFJMAgAeeerU8UTiyCjm8wt/HYKfJrhc3w1JziZklo5KWsGRm4PM/Cf+l1jTdtJqoB5JTD8YBJ/W3df+SCYTmEd1leqUATqFke1hErqZhQpBxeZHjqayJu3nPRQr21/Q3Xoo=
Received: by 10.38.68.14 with SMTP id q14mr1733636rna;
        Thu, 14 Apr 2005 08:18:30 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Thu, 14 Apr 2005 08:18:30 -0700 (PDT)
Message-ID: <c68e391705041408185f044cda@mail.gmail.com>
Date: Thu, 14 Apr 2005 11:18:30 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Strange sort error
In-Reply-To: <c68e3917050414072835c1d799@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <dab56f707725e6206fb0b2e1bdd7aed7@otherwise.com>
	 <adc8773d9da86fed89a6f7823afab71b@ehatchersolutions.com>
	 <16e966217680968994ed9d8b5d0c47f1@otherwise.com>
	 <200504140011.16575@danielnaber.de>
	 <c68e3917050414072835c1d799@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>             if (termEnum=3D=3Dnull || term.field() !=3D field) break;  //=
 CHANGE here

Errr, that should be term=3D=3Dnull of course.

>             if (term=3D=3Dnull || term.field() !=3D field) break;  // CHA=
NGE here

And it *may* be slightly speedier to check for null just before the
do/while loop instead:

if (termEnum.term() !=3D null) {
  do {
 [...]
  } while(...)
}

-Yonik

On 4/14/05, Yonik Seeley <yseeley@gmail.com> wrote:
> I haven't tried it, but I think the fix should be easy... never throw
> that exception.  Either check for null before the loop, or in the
> loop.
>=20
> Original code for native int sorting:
>=20
>         TermEnum termEnum =3D reader.terms (new Term (field, ""));
>         try {
>           if (termEnum.term() =3D=3D null) {
>             throw new RuntimeException ("no terms in field " + field);
>           }
>           do {
>             Term term =3D termEnum.term();
>             if (term.field() !=3D field) break;
>             int termval =3D Integer.parseInt (term.text());
>             termDocs.seek (termEnum);
>             while (termDocs.next()) {
>               retArray[termDocs.doc()] =3D termval;
>             }
>           } while (termEnum.next());
>         } finally {
>           termDocs.close();
>           termEnum.close();
>         }
>=20
> ------------- possible fix --------------
>         TermEnum termEnum =3D reader.terms (new Term (field, ""));
>         try {
>           do {
>             Term term =3D termEnum.term();
>             if (termEnum=3D=3Dnull || term.field() !=3D field) break;  //=
 CHANGE here
>             int termval =3D Integer.parseInt (term.text());
>             termDocs.seek (termEnum);
>             while (termDocs.next()) {
>               retArray[termDocs.doc()] =3D termval;
>             }
>           } while (termEnum.next());
>         } finally {
>           termDocs.close();
>           termEnum.close();
>         }
>=20
> -Yonik
>=20
> On 4/13/05, Daniel Naber <lucenelist@danielnaber.de> wrote:
> > On Tuesday 12 April 2005 20:04, Bill Tschumy wrote:
> >
> > > Here is a small program that will manifest the error. Hopefully
> > > someone can explain the problem. It happens with Lucene 1.4.2 and
> > > 1.4.3.
> >
> > This is the code that throws the exception (from FieldCacheImpl.java):
> >
> >   TermEnum termEnum =3D reader.terms (new Term (field, ""));
> >   (...)
> >   if (termEnum.term() =3D=3D null) {
> >       throw new RuntimeException ("no terms in field " + field);
> >   }
> >
> > The problem is that a TermEnum always returns all terms after a given o=
ne,
> > not only terms in the same field. So the check is incomplete. If one
> > changes the if like this, one will always get an exception if there are=
 no
> > terms in the field, as the exception claims:
> >
> >   if (termEnum.term() =3D=3D null || !termEnum.term().field().equals(fi=
eld)) {
> >
> > The other issue is that you probably expect to not get an exception at =
all,
> > as there are no matches. Lucene doesn't first search and then sort, the=
se
> > tasks are parallel I think. So this is not that easy to fix (and I doub=
t
> > if one should try).
> >
> > Could you open a bug report for the problem with the exception that see=
ms
> > to occur only sometimes? The change suggested above needs to be tested
> > before it can be committed and a bug report is useful for that.
> >
> > Regards
> >  Daniel
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 15:29:55 2005
Return-Path: <java-user-return-14097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98949 invoked from network); 14 Apr 2005 15:29:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 15:29:55 -0000
Received: (qmail 20900 invoked by uid 500); 14 Apr 2005 15:28:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20820 invoked by uid 500); 14 Apr 2005 15:28:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20442 invoked by uid 99); 14 Apr 2005 15:28:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fckdp@ok.ru designates 195.2.83.226 as permitted sender)
Received: from mail3.zmail.ru (HELO aha.ru) (195.2.83.226)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 08:28:14 -0700
Received: from [195.98.167.2] (account fckdp@ok.ru HELO WRKPASHA)
  by frontend3.aha.ru (CommuniGate Pro SMTP 4.2.8)
  with ESMTP id 16105409; Thu, 14 Apr 2005 19:28:04 +0400
Reply-To: <bizhan@aha.ru>
From: "Pasha Bizhan" <fckdp@ok.ru>
To: <java-user@lucene.apache.org>,
	"'Pablo Gomes Ludermir'" <gomesp@gmail.com>
Subject: RE: getting the number of occurrences within a document
Date: Thu, 14 Apr 2005 19:43:13 +0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
In-Reply-To: <4f05ec8e05041408151cd97502@mail.gmail.com>
thread-index: AcVBBNR06qkQiMIDQny6AHogcP+psAAA4v6g
Message-ID: <auto-000016105409@frontend3.aha.ru>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

> From: Pablo Gomes Ludermir [mailto:gomesp@gmail.com] 

> I would like to get the following information from the index:
> 
> 1. Given a term, how many times the term occurs in each document.
> Something like a triple:
> < Term, Doc1, Freq> , <Term, Doc2, Freq>, <Term2, Docx, Freq>, ...
> 
> Is possible to do that?

See IndexReader.TermDocs(Term t) and TermDocs.Freq().

Pasha Bizhan





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 15:30:56 2005
Return-Path: <java-user-return-14098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99321 invoked from network); 14 Apr 2005 15:30:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 15:30:56 -0000
Received: (qmail 29277 invoked by uid 500); 14 Apr 2005 15:30:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29184 invoked by uid 500); 14 Apr 2005 15:30:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29152 invoked by uid 99); 14 Apr 2005 15:30:39 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 08:30:39 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 1499DE4810
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 17:30:36 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 007F0E47C9
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 17:30:35 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <4f05ec8e05041408151cd97502@mail.gmail.com>
References: <4f05ec8e05041408151cd97502@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <926b07b12a4af478154650ad5f5c0d80@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: getting the number of occurrences within a document
Date: Thu, 14 Apr 2005 17:30:32 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Le 14 avr. 05, =E0 17:15, Pablo Gomes Ludermir a =E9crit :

> I would like to get the following information from the index:
> 1. Given a term, how many times the term occurs in each document.
> Something like a triple:
> < Term, Doc1, Freq> , <Term, Doc2, Freq>, <Term2, Docx, Freq>, ...
> Is possible to do that?

Luke did this to my index with good speed... I presume one should be=20
able to find the source of this easily.

paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 15:32:40 2005
Return-Path: <java-user-return-14099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99907 invoked from network); 14 Apr 2005 15:32:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 15:32:40 -0000
Received: (qmail 36043 invoked by uid 500); 14 Apr 2005 15:32:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36013 invoked by uid 500); 14 Apr 2005 15:32:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35995 invoked by uid 99); 14 Apr 2005 15:32:26 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 08:32:24 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 741E7E4817
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 17:32:20 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 6190AE47C9
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 17:32:20 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <fe382a82d75a518683878259ce6fbcb8@activemath.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: java-user@lucene.apache.org
From: Paul Libbrecht <paul@activemath.org>
Subject: Reverting QueryParser ?
Date: Thu, 14 Apr 2005 17:32:17 +0200
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

	
Hi,

I am currently evaluating the need for an elaborate query 
data-structure (to be exchanged over XML-RPC) as opposed to working 
with plain strings.

One thing that would heavily vote for strings would be to have query 
objects returned by Query-parser reconvertible to a string (and back).

did anyone did this ?

thanks

paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 15:33:13 2005
Return-Path: <java-user-return-14100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 183 invoked from network); 14 Apr 2005 15:33:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 15:33:13 -0000
Received: (qmail 37337 invoked by uid 500); 14 Apr 2005 15:32:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37281 invoked by uid 500); 14 Apr 2005 15:32:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37233 invoked by uid 99); 14 Apr 2005 15:32:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from csunb0.leeds.ac.uk (HELO csunb0.leeds.ac.uk) (129.11.144.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 08:32:40 -0700
Received: from csunix.leeds.ac.uk (cserv1.leeds.ac.uk [129.11.144.20])
	by csunb0.leeds.ac.uk (8.12.11/8.12.11) with ESMTP id j3EFWZ1h000513
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 16:32:35 +0100
Received: from csdhcp19.leeds.ac.uk (csdhcp19 [129.11.144.169]) by csunix.leeds.ac.uk (8.12.2/) with ESMTP id j3EFWZJY007243 for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 16:32:35 +0100 (BST)
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Re: getting the number of occurrences within a document
Date: Thu, 14 Apr 2005 16:35:51 +0000
User-Agent: KMail/1.8
References: <4f05ec8e05041408151cd97502@mail.gmail.com>
In-Reply-To: <4f05ec8e05041408151cd97502@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504141635.51772.mail@andy-roberts.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 14 Apr 2005 15:15, Pablo Gomes Ludermir wrote:
> Hello all,
>
> I would like to get the following information from the index:
>
> 1. Given a term, how many times the term occurs in each document.
> Something like a triple:
> < Term, Doc1, Freq> , <Term, Doc2, Freq>, <Term2, Docx, Freq>, ...
>
> Is possible to do that?
>
>
> Regards,
> Pablo

Off the top of my head... assuming you have an IndexReader (or MultiReader) called reader:

TermEnum te = reader.terms();

while (te.next()) {
	Term currentTerm = te.term();
	
	TermDocs docs = reader.termDocs(currentTerm);
	int docCounter = 1;
	while (docs.next()) {
		System.out.println(currentTerm.text() + ", doc" + docCount + ", " + docs.freq());
		docCounter++;
	}
}

HTH,

Andy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 16:00:39 2005
Return-Path: <java-user-return-14101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15569 invoked from network); 14 Apr 2005 16:00:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 16:00:39 -0000
Received: (qmail 26356 invoked by uid 500); 14 Apr 2005 15:59:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26307 invoked by uid 500); 14 Apr 2005 15:59:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26184 invoked by uid 99); 14 Apr 2005 15:59:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc11.comcast.net (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 08:59:40 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2005041415593301300ktg2be>; Thu, 14 Apr 2005 15:59:33 +0000
Message-ID: <425E9364.2020309@apache.org>
Date: Thu, 14 Apr 2005 08:59:32 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Hungarian notation analyzer and phrase queries
References: <s25dbd50.091@provo>
In-Reply-To: <s25dbd50.091@provo>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul Smith wrote:
> So it sounds like there isn't a perfect solution, but I think the best
> tradeoff for me is to put them all in the same position.... unless
> anyone has more input on the subject?

If they're all at the same position you can still use slop to match the 
phrase.  So if 'power', 'query' and 'powerquery' are all at the same 
position, a search for "power query" with slop=1 will match.  Also, you 
can specify a default slop to the query parser, so when folks enter just 
"power query" it will automatically have slop=1.  This will permit some 
false positives, e.g., the text "power green query" will match with slop=1.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 16:10:16 2005
Return-Path: <java-user-return-14102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18187 invoked from network); 14 Apr 2005 16:10:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 16:10:16 -0000
Received: (qmail 59703 invoked by uid 500); 14 Apr 2005 16:08:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59616 invoked by uid 500); 14 Apr 2005 16:08:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59523 invoked by uid 99); 14 Apr 2005 16:08:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc11.comcast.net (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 09:08:24 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2005041416080101300krekhe>; Thu, 14 Apr 2005 16:08:01 +0000
Message-ID: <425E9560.7040807@apache.org>
Date: Thu, 14 Apr 2005 09:08:00 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Update performance/indexwriter.delete()?
References: <OAELLNADBIAIBGFCBKEKOEOHDDAA.klein@sitescape.com>
In-Reply-To: <OAELLNADBIAIBGFCBKEKOEOHDDAA.klein@sitescape.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Roy Klein wrote:
> So one thing I've been wondering:  Why do you need to do deletes from an
> indexreader?

Is this not in the FAQ?  It should be...

IndexWriter can only append documents to an index.

An IndexReader is required to, given a term, find the document number to 
mark deleted.

Also, in the current sources the cost of opening an IndexReader has been 
greatly reduced.  Now the norms and the term index are read lazily, so 
that only a few tiny files are actually read when an IndexReader is 
opened, the rest are merely opened.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 16:21:01 2005
Return-Path: <java-user-return-14103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21606 invoked from network); 14 Apr 2005 16:21:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 16:21:01 -0000
Received: (qmail 99129 invoked by uid 500); 14 Apr 2005 16:20:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99095 invoked by uid 500); 14 Apr 2005 16:20:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99080 invoked by uid 99); 14 Apr 2005 16:20:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 09:20:42 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A2D2C13E2124; Thu, 14 Apr 2005 12:20:30 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 6E5DF13E2005
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 12:19:55 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <fe382a82d75a518683878259ce6fbcb8@activemath.org>
References: <fe382a82d75a518683878259ce6fbcb8@activemath.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <c10a580817d5c7c5857ff57728e23ea1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Reverting QueryParser ?
Date: Thu, 14 Apr 2005 12:12:37 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 14, 2005, at 11:32 AM, Paul Libbrecht wrote:

> 	
> Hi,
>
> I am currently evaluating the need for an elaborate query 
> data-structure (to be exchanged over XML-RPC) as opposed to working 
> with plain strings.
>
> One thing that would heavily vote for strings would be to have query 
> objects returned by Query-parser reconvertible to a string (and back).
>
> did anyone did this ?

No, this hasn't been done except for the basic Query.toString() output 
which for the most part is parsable again.

The question is, what do you do about the analysis process?  It's a 
one-way transformation - and parsing again may not yield the same 
query.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 16:27:13 2005
Return-Path: <java-user-return-14104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23171 invoked from network); 14 Apr 2005 16:27:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 16:27:13 -0000
Received: (qmail 11533 invoked by uid 500); 14 Apr 2005 16:26:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11487 invoked by uid 500); 14 Apr 2005 16:26:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11473 invoked by uid 99); 14 Apr 2005 16:26:57 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.196 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 09:26:57 -0700
Received: by rproxy.gmail.com with SMTP id b11so362891rne
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 09:26:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=XMnh8ovFXJdfRZ9Ez8vGg6ayqp/NC1Xnc9iN887o9Jv5ypad7Y3wylFeWpb3PjEdzkkONK/Ag1cO+xSS9k9TThA72niPEXHEFOa4SpYgkK56rSXZdVVn10h28bePDdkq2l6tEgf86P3RTKwjWvU6Z/8uvDhEk140cfWdyYcjNB4=
Received: by 10.38.68.14 with SMTP id q14mr1815287rna;
        Thu, 14 Apr 2005 09:26:54 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Thu, 14 Apr 2005 09:26:53 -0700 (PDT)
Message-ID: <c68e3917050414092677d67e24@mail.gmail.com>
Date: Thu, 14 Apr 2005 12:26:53 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Update performance/indexwriter.delete()?
In-Reply-To: <425E9560.7040807@apache.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <OAELLNADBIAIBGFCBKEKOEOHDDAA.klein@sitescape.com>
	 <425E9560.7040807@apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> An IndexReader is required to, given a term, find the document number to
> mark deleted.

Yeah, most the time it makes sense to do deletions off the
IndexReader.  There are times, however, when it would be nice for
deletes to be able to be concurrent with adds.

Q: can docids change after an add() (with merging segments going on
behind the scenes) or is optimize() the only call that ends up
changing the docid->Document mapping?

If it's only optimize() then it seems like delete(int docnum) could
easily be added to IndexWriter.  It would be up to the user, of
course, to ensure that the IndexReader used to obtain the docids to
delete was in sync (meaning the docids match up) with the IndexWriter.
 The big benefit would be that one could add and delete documents at
the same time - something that can't be done today, AFAIK.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 16:31:59 2005
Return-Path: <java-user-return-14105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24754 invoked from network); 14 Apr 2005 16:31:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 16:31:58 -0000
Received: (qmail 25205 invoked by uid 500); 14 Apr 2005 16:31:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25177 invoked by uid 500); 14 Apr 2005 16:31:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25153 invoked by uid 99); 14 Apr 2005 16:31:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc11.comcast.net (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 09:31:34 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2005041416313101300kol4ve>; Thu, 14 Apr 2005 16:31:31 +0000
Message-ID: <425E9AE3.7050504@apache.org>
Date: Thu, 14 Apr 2005 09:31:31 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Reverting QueryParser ?
References: <fe382a82d75a518683878259ce6fbcb8@activemath.org>
In-Reply-To: <fe382a82d75a518683878259ce6fbcb8@activemath.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul Libbrecht wrote:
> I am currently evaluating the need for an elaborate query data-structure 
> (to be exchanged over XML-RPC) as opposed to working with plain strings.

I'd opt for both.  For example:

<search>
   <boolean-query>
     <required>
       <query-parser analyzer="...">"java based" -coffee</query-parser>
     <required>
       <term-query>
         <field>site</field>
         <text>apache.org</text>
       </term-query>
   </boolean-query>
   <range-filter>
     <field>date</field>
     <start>2004</start>
     <end>2006</end>
   </range-filter>
   <sort>
     <field>date</field>
   </sort>
</search>

This would be a natural thing to generate, e.g., from an "advanced 
search" page.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 16:36:21 2005
Return-Path: <java-user-return-14106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26522 invoked from network); 14 Apr 2005 16:36:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 16:36:21 -0000
Received: (qmail 37735 invoked by uid 500); 14 Apr 2005 16:35:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37681 invoked by uid 500); 14 Apr 2005 16:35:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37620 invoked by uid 99); 14 Apr 2005 16:35:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc13.comcast.net (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 09:35:53 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc13) with ESMTP
          id <2005041416355001500h2l4re>; Thu, 14 Apr 2005 16:35:50 +0000
Message-ID: <425E9BE5.8080905@apache.org>
Date: Thu, 14 Apr 2005 09:35:49 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Update performance/indexwriter.delete()?
References: <OAELLNADBIAIBGFCBKEKOEOHDDAA.klein@sitescape.com>	 <425E9560.7040807@apache.org> <c68e3917050414092677d67e24@mail.gmail.com>
In-Reply-To: <c68e3917050414092677d67e24@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yonik Seeley wrote:
> There are times, however, when it would be nice for
> deletes to be able to be concurrent with adds.

It would also be nice if good coffee was free.

> Q: can docids change after an add() (with merging segments going on
> behind the scenes) or is optimize() the only call that ends up
> changing the docid->Document mapping?

Once there have been deletions, any addition or optimization can trigger 
renumbering.  If there were no deletions since the last optimize, then 
no renumbering will be triggered by additions or optimization.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 16:55:57 2005
Return-Path: <java-user-return-14107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33059 invoked from network); 14 Apr 2005 16:55:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 16:55:56 -0000
Received: (qmail 90665 invoked by uid 500); 14 Apr 2005 16:55:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90626 invoked by uid 500); 14 Apr 2005 16:55:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90594 invoked by uid 99); 14 Apr 2005 16:55:35 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from main.gmane.org (HELO ciao.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 09:55:33 -0700
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1DM7Y8-00070c-G0
	for java-user@lucene.apache.org; Thu, 14 Apr 2005 18:50:40 +0200
Received: from vil35-2-82-236-174-106.fbx.proxad.net ([82.236.174.106])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 18:50:40 +0200
Received: from pierrick.brihaye by vil35-2-82-236-174-106.fbx.proxad.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 18:50:40 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Pierrick Brihaye <pierrick.brihaye@free.fr>
Subject:  Re: Reverting QueryParser ?
Date:  Thu, 14 Apr 2005 18:44:42 +0200
Lines: 41
Message-ID: <d3m6fe$p86$1@sea.gmane.org>
References:  <fe382a82d75a518683878259ce6fbcb8@activemath.org> <c10a580817d5c7c5857ff57728e23ea1@ehatchersolutions.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  8bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: vil35-2-82-236-174-106.fbx.proxad.net
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; fr-FR; rv:1.7) Gecko/20040608
X-Accept-Language: fr-fr, en-us, en
In-Reply-To: <c10a580817d5c7c5857ff57728e23ea1@ehatchersolutions.com>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Erik Hatcher a écrit :

> No, this hasn't been done except for the basic Query.toString() output 
> which for the most part is parsable again.
> 
> The question is, what do you do about the analysis process?  It's a 
> one-way transformation - and parsing again may not yield the same query.

We (the SDX developpers) have had quite the same need, i.e. to make a 
QueryParsed String parsable again, more often than most of the cases :-)

In fact, we did half of the job ; I mean... prevent analysis :-)

Look at 
http://savannah.nongnu.org/cgi-bin/viewcvs/sdx/sdx_v2/src/java/fr/gouv/culture/sdx/search/lucene/queryparser/DefaultQueryParser.jj?rev=1.16&content-type=text/vnd.viewcvs-markup

and search for : NO_ANALYSIS

You will see that we need an "UnanalyzedQuery" class which is already 
packaged for Lucene ;-)

http://savannah.nongnu.org/cgi-bin/viewcvs/sdx/sdx_v2/src/java/org/apache/lucene/search/UnanalyzedQuery.java?rev=1.4&content-type=text/vnd.viewcvs-markup

The other half could be done by a method like OriginalQuery(String 
field) that would return this kind of string representation :

field:re_analyze_me (i.e. the original token)

or, the SDX way, modify the existing Query(String field) so that it 
would return this kind of string representation :

field:|alreay_analyzed_no_need_to_reanalyze_me|

What do you think ?

Cheers,

p.b.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 17:25:17 2005
Return-Path: <java-user-return-14108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41119 invoked from network); 14 Apr 2005 17:25:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 17:25:17 -0000
Received: (qmail 53993 invoked by uid 500); 14 Apr 2005 17:25:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53974 invoked by uid 500); 14 Apr 2005 17:25:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53953 invoked by uid 99); 14 Apr 2005 17:25:06 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from host59a.simplicato.com (HELO host54a.simplicato.com) (207.99.47.59)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 10:25:04 -0700
Received: from localhost (localhost.simplicato.com [127.0.0.1])
	by host54a.simplicato.com (Postfix) with ESMTP id 2C1B36C038A
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 13:24:57 -0400 (EDT)
Received: from host54a.simplicato.com ([127.0.0.1])
 by localhost (host54a.simplicato.com [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 25150-10 for <java-user@lucene.apache.org>;
 Thu, 14 Apr 2005 13:24:57 -0400 (EDT)
Received: from pangloss (unknown [216.195.213.27])
	by host54a.simplicato.com (Postfix) with SMTP id 756926C0304
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 13:24:57 -0400 (EDT)
From: "Roy Klein" <klein@sitescape.com>
To: <java-user@lucene.apache.org>
Subject: RE: Update performance/indexwriter.delete()?
Date: Thu, 14 Apr 2005 13:25:02 -0400
Message-ID: <OAELLNADBIAIBGFCBKEKIEOMDDAA.klein@sitescape.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
In-Reply-To: <425E9560.7040807@apache.org>
X-Virus-Scanned: by amavisd-new at simplicato.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I guess I didn't ask my question very well.  I do understand that you can
only do a delete via a reader based on the current sources, what I don't
understand is why the delete function couldn't be incorporated into a
writer, so that updates could be all done within the context of a writer?

For instance, I need to update 3 documents that already exist in the index.
With the current mechanism I have to:
1) open a reader, delete doc1, close the reader.
2) open a writer, add doc1, close the writer.
3) open a reader, delete doc2, close the reader.
4) open a writer, add doc2, close the writer.
5) open a reader, delete doc3, close the reader.
6) open a writer, add doc3, close the writer.

Note: any given delete might be a term delete, which means it might delete
one of the previously added docs)


That's a lot of opens and closes.


If the update function was incorporated into a writer, the steps could be:
1) open a writer
2) delete doc1, add doc1
3) delete doc2, add doc2
4) delete doc3, add doc3
5) close the writer

The added benefit is that I can optimize (via batching) all the updates,
because all the previously added docs are recognized by the writer.

I think this is a better way of asking my original questions:
	"Why was this designed this way?"
	"Can it be changed to optimize updates?"


Thanks

Roy

-----Original Message-----
From: Doug Cutting [mailto:cutting@apache.org]
Sent: Thursday, April 14, 2005 12:08 PM
To: java-user@lucene.apache.org
Subject: Re: Update performance/indexwriter.delete()?


Roy Klein wrote:
> So one thing I've been wondering:  Why do you need to do deletes from an
> indexreader?

Is this not in the FAQ?  It should be...

IndexWriter can only append documents to an index.

An IndexReader is required to, given a term, find the document number to
mark deleted.

Also, in the current sources the cost of opening an IndexReader has been
greatly reduced.  Now the norms and the term index are read lazily, so
that only a few tiny files are actually read when an IndexReader is
opened, the rest are merely opened.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 17:31:57 2005
Return-Path: <java-user-return-14109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42984 invoked from network); 14 Apr 2005 17:31:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 17:31:57 -0000
Received: (qmail 66692 invoked by uid 500); 14 Apr 2005 17:31:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66671 invoked by uid 500); 14 Apr 2005 17:31:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66650 invoked by uid 99); 14 Apr 2005 17:31:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc14.comcast.net (HELO rwcrmhc14.comcast.net) (216.148.227.89)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 10:31:42 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc14) with ESMTP
          id <2005041417314001400hn5kpe>; Thu, 14 Apr 2005 17:31:40 +0000
Message-ID: <425EA8FB.1090402@apache.org>
Date: Thu, 14 Apr 2005 10:31:39 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Update performance/indexwriter.delete()?
References: <OAELLNADBIAIBGFCBKEKIEOMDDAA.klein@sitescape.com>
In-Reply-To: <OAELLNADBIAIBGFCBKEKIEOMDDAA.klein@sitescape.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Roy Klein wrote:
> I think this is a better way of asking my original questions:
> 	"Why was this designed this way?"

In order to optimize updates.

> 	"Can it be changed to optimize updates?"

Updates are fastest when additions and deletions are separately batched. 
  That is the design.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 18:45:41 2005
Return-Path: <java-user-return-14110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70994 invoked from network); 14 Apr 2005 18:45:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 18:45:41 -0000
Received: (qmail 44922 invoked by uid 500); 14 Apr 2005 18:45:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44900 invoked by uid 500); 14 Apr 2005 18:45:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44885 invoked by uid 99); 14 Apr 2005 18:45:33 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=SPF_HELO_PASS,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (hermes.apache.org: transitioning domain of lucenelist@danielnaber.de does not designate 80.67.18.14 as permitted sender)
Received: from smtprelay02.ispgateway.de (HELO smtprelay02.ispgateway.de) (80.67.18.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 11:45:31 -0700
Received: (qmail 9111 invoked from network); 14 Apr 2005 18:45:26 -0000
Received: from unknown (HELO p54965C29.dip.t-dialin.net) ([pbs]937788@[84.150.92.41])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 14 Apr 2005 18:45:26 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: IOException: No such path or directory
Date: Thu, 14 Apr 2005 20:44:37 +0200
User-Agent: KMail/1.8
References: <ACEIJKEFACAHGGILCJHOGEDKCAAA.lmedina@ruralsource.com>
In-Reply-To: <ACEIJKEFACAHGGILCJHOGEDKCAAA.lmedina@ruralsource.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504142044.37412@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 14 April 2005 16:44, Luis Medina wrote:

> primarily reporting lock issues (except no lock files
> were found in the directory).

With "that directory", do you mean the index directory? The lock files are 
not there, but in /tmp (by default). It's only okay to remove the lock 
file manually if Lucene had crashed / was stopped by Ctrl-C.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 20:21:52 2005
Return-Path: <java-user-return-14111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23539 invoked from network); 14 Apr 2005 20:21:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 20:21:52 -0000
Received: (qmail 67270 invoked by uid 500); 14 Apr 2005 20:21:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67246 invoked by uid 500); 14 Apr 2005 20:21:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67231 invoked by uid 99); 14 Apr 2005 20:21:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from vhost6.atomicservers.com (HELO vhost6.atomicservers.com) (216.58.160.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 13:21:41 -0700
Received: from lab1dt.corp.aptas.com ([64.78.237.253])
	by vhost6.atomicservers.com (8.11.6/8.11.6) with ESMTP id j3EKLbx20346
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 14:21:38 -0600
Subject: Boosting not working?
From: Martin May <maym@foobar.lu>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Thu, 14 Apr 2005 14:21:37 -0600
Message-Id: <1113510097.5471.2.camel@lab1dt>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.4 (2.0.4-2) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I have a bunch of documents in my index, some of which have values for a
certain field while others don't. I'd like the ones that do have a value
to always show up before the ones who don't when sorting by relevance.

I tried to accomplish this by check whether there are values for the
field, and if so boosting the document by 5000. However, it doesn't seem
to have the desired effect.

Any ideas?

Thanks,
Martin


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 20:24:50 2005
Return-Path: <java-user-return-14112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24467 invoked from network); 14 Apr 2005 20:24:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 20:24:50 -0000
Received: (qmail 75075 invoked by uid 500); 14 Apr 2005 20:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75045 invoked by uid 500); 14 Apr 2005 20:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75031 invoked by uid 99); 14 Apr 2005 20:24:40 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31103.mail.mud.yahoo.com (HELO web31103.mail.mud.yahoo.com) (68.142.200.36)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 14 Apr 2005 13:24:38 -0700
Received: (qmail 33225 invoked by uid 60001); 14 Apr 2005 20:24:36 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=vS3GC6rU32yA/gV8WDy7VI+rzK/BStiIn44e0AHcifDuKbcrrmxtIbyeYbajXyfePKXkX5joEuRIdHGZQQnEb5c3dVE3UXAg1rvJhoyrUKyuaFvH20DqfRntsg8MxdzLOBmzEk1hNVvHH0q8d2Fe5L3l9Va0EEY83wxvcZySaCw=  ;
Message-ID: <20050414202436.33223.qmail@web31103.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31103.mail.mud.yahoo.com via HTTP; Thu, 14 Apr 2005 13:24:36 PDT
Date: Thu, 14 Apr 2005 13:24:36 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Boosting not working?
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'd look a the output of Explain to see how ranking score is calculated

Look at this: http://lucenebook.com/search?query=explain (hit #1 is
from a free chapter)

Otis


--- Martin May <maym@foobar.lu> wrote:
> 
> I have a bunch of documents in my index, some of which have values
> for a
> certain field while others don't. I'd like the ones that do have a
> value
> to always show up before the ones who don't when sorting by
> relevance.
> 
> I tried to accomplish this by check whether there are values for the
> field, and if so boosting the document by 5000. However, it doesn't
> seem
> to have the desired effect.
> 
> Any ideas?
> 
> Thanks,
> Martin
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 20:32:24 2005
Return-Path: <java-user-return-14113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26741 invoked from network); 14 Apr 2005 20:32:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 20:32:24 -0000
Received: (qmail 94268 invoked by uid 500); 14 Apr 2005 20:32:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94245 invoked by uid 500); 14 Apr 2005 20:32:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94226 invoked by uid 99); 14 Apr 2005 20:32:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from vhost6.atomicservers.com (HELO vhost6.atomicservers.com) (216.58.160.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 13:32:13 -0700
Received: from lab1dt.corp.aptas.com ([64.78.237.253])
	by vhost6.atomicservers.com (8.11.6/8.11.6) with ESMTP id j3EKWBx22844
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 14:32:11 -0600
Subject: Re: Boosting not working?
From: Martin May <maym@foobar.lu>
To: java-user@lucene.apache.org
In-Reply-To: <20050414202436.33223.qmail@web31103.mail.mud.yahoo.com>
References: <20050414202436.33223.qmail@web31103.mail.mud.yahoo.com>
Content-Type: text/plain
Date: Thu, 14 Apr 2005 14:32:11 -0600
Message-Id: <1113510731.5471.6.camel@lab1dt>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.4 (2.0.4-2) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I've got the book (which is great, btw). I used Luke to get explanations
of the results, but I don't see any boosts in the explanations.

Martin

On Thu, 2005-04-14 at 13:24 -0700, Otis Gospodnetic wrote:
> I'd look a the output of Explain to see how ranking score is calculated
> 
> Look at this: http://lucenebook.com/search?query=explain (hit #1 is
> from a free chapter)
> 
> Otis
> 
> 
> --- Martin May <maym@foobar.lu> wrote:
> > 
> > I have a bunch of documents in my index, some of which have values
> > for a
> > certain field while others don't. I'd like the ones that do have a
> > value
> > to always show up before the ones who don't when sorting by
> > relevance.
> > 
> > I tried to accomplish this by check whether there are values for the
> > field, and if so boosting the document by 5000. However, it doesn't
> > seem
> > to have the desired effect.
> > 
> > Any ideas?
> > 
> > Thanks,
> > Martin
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 20:53:15 2005
Return-Path: <java-user-return-14114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32047 invoked from network); 14 Apr 2005 20:53:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 20:53:15 -0000
Received: (qmail 26258 invoked by uid 500); 14 Apr 2005 20:53:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26238 invoked by uid 500); 14 Apr 2005 20:53:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26220 invoked by uid 99); 14 Apr 2005 20:53:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 13:53:06 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E4E3D13E2006; Thu, 14 Apr 2005 16:53:02 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 94B4C13E2005
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 16:52:40 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <1113510731.5471.6.camel@lab1dt>
References: <20050414202436.33223.qmail@web31103.mail.mud.yahoo.com> <1113510731.5471.6.camel@lab1dt>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <abb64bc0d62ab1f30abf9ef7fa5ba97e@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Boosting not working?
Date: Thu, 14 Apr 2005 16:52:47 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 14, 2005, at 4:32 PM, Martin May wrote:
>
> I've got the book (which is great, btw). I used Luke to get 
> explanations
> of the results, but I don't see any boosts in the explanations.

The index-time boosts are folded into the field normalization factor, 
so you won't see boost by itself.  That field normalization factor also 
takes other things into account like how long the field is - so your 
boost may be overwhelmed by some other factors.

A simple detailed example would be helpful.

	Erik


>
> Martin
>
> On Thu, 2005-04-14 at 13:24 -0700, Otis Gospodnetic wrote:
>> I'd look a the output of Explain to see how ranking score is 
>> calculated
>>
>> Look at this: http://lucenebook.com/search?query=explain (hit #1 is
>> from a free chapter)
>>
>> Otis
>>
>>
>> --- Martin May <maym@foobar.lu> wrote:
>>>
>>> I have a bunch of documents in my index, some of which have values
>>> for a
>>> certain field while others don't. I'd like the ones that do have a
>>> value
>>> to always show up before the ones who don't when sorting by
>>> relevance.
>>>
>>> I tried to accomplish this by check whether there are values for the
>>> field, and if so boosting the document by 5000. However, it doesn't
>>> seem
>>> to have the desired effect.
>>>
>>> Any ideas?
>>>
>>> Thanks,
>>> Martin
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 22:43:10 2005
Return-Path: <java-user-return-14115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56207 invoked from network); 14 Apr 2005 22:43:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 22:43:10 -0000
Received: (qmail 645 invoked by uid 500); 14 Apr 2005 22:43:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 617 invoked by uid 500); 14 Apr 2005 22:43:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 603 invoked by uid 99); 14 Apr 2005 22:43:04 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=SPF_HELO_PASS,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (hermes.apache.org: transitioning domain of lucenelist@danielnaber.de does not designate 80.67.18.15 as permitted sender)
Received: from smtprelay03.ispgateway.de (HELO smtprelay03.ispgateway.de) (80.67.18.15)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 15:43:02 -0700
Received: (qmail 32037 invoked from network); 14 Apr 2005 22:42:58 -0000
Received: from unknown (HELO p54965107.dip.t-dialin.net) ([pbs]937788@[84.150.81.7])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 14 Apr 2005 22:42:58 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Strange sort error
Date: Fri, 15 Apr 2005 00:42:20 +0200
User-Agent: KMail/1.8
References: <dab56f707725e6206fb0b2e1bdd7aed7@otherwise.com> <200504140011.16575@danielnaber.de> <c68e3917050414072835c1d799@mail.gmail.com>
In-Reply-To: <c68e3917050414072835c1d799@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504150042.20444@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 14 April 2005 16:28, Yonik Seeley wrote:

> I haven't tried it, but I think the fix should be easy... never throw
> that exception.

As Lucene does not have the concept of a "warning" I think it should throw 
exceptions when someone tries to do something that doesn't make sense 
(even if it's technically possible). And sorting on a field that doesn't 
exist doesn't seem to make sense.

Well, searching on a field that doesn't exist won't give you an exception 
either. For debugging it would be useful if you'd get an exception instead 
of no results.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 23:06:32 2005
Return-Path: <java-user-return-14116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62528 invoked from network); 14 Apr 2005 23:06:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 23:06:32 -0000
Received: (qmail 29830 invoked by uid 500); 14 Apr 2005 23:06:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29616 invoked by uid 500); 14 Apr 2005 23:06:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29568 invoked by uid 99); 14 Apr 2005 23:06:24 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.201 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.201)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 16:06:23 -0700
Received: by rproxy.gmail.com with SMTP id b11so434216rne
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 16:06:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IRViIhyWozQJDxiaQ29dAPnRIPQuKx9xIR1WoUxY/j0W5eW0Mpn5qOW8XMYfl+HgOyOoVrf3eXj60UF62+jcC6Hb/nD4BKqddQSy69k3DSzo97XkJL3hDiCD2qA5Ap4OB+vTY+FalgC05DGWr4zZ7xYkLZuuFiRWPw3bEP2nSr4=
Received: by 10.38.160.51 with SMTP id i51mr1642633rne;
        Thu, 14 Apr 2005 16:06:20 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Thu, 14 Apr 2005 16:06:20 -0700 (PDT)
Message-ID: <c68e391705041416062fc3b914@mail.gmail.com>
Date: Thu, 14 Apr 2005 19:06:20 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Strange sort error
In-Reply-To: <200504150042.20444@danielnaber.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <dab56f707725e6206fb0b2e1bdd7aed7@otherwise.com>
	 <200504140011.16575@danielnaber.de>
	 <c68e3917050414072835c1d799@mail.gmail.com>
	 <200504150042.20444@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hmmm, that's a great lucene architecture question.
Should one be allowed to sort on a field that doesn't exist?
One *can* query on fields that don't exist (and that's correct in my view).

The thing is, lucene field creation is lazy... just because the field
doesn't exist now doesn't mean that it won't exist later.  The field
one is sorting on doesn't even have to exist in all the documents.  I
think it would be even more confusing for an invalid query suddenly
becoming a valid query in the future just because someone added a doc
with that field indexed (esp since that doc may not even match the
query being sorted).

In short, I think sorting should act like querying (no exception if
field doesn't exist yet).

-Yonik

On 4/14/05, Daniel Naber <lucenelist@danielnaber.de> wrote:
> On Thursday 14 April 2005 16:28, Yonik Seeley wrote:
>=20
> > I haven't tried it, but I think the fix should be easy... never throw
> > that exception.
>=20
> As Lucene does not have the concept of a "warning" I think it should thro=
w
> exceptions when someone tries to do something that doesn't make sense
> (even if it's technically possible). And sorting on a field that doesn't
> exist doesn't seem to make sense.
>=20
> Well, searching on a field that doesn't exist won't give you an exception
> either. For debugging it would be useful if you'd get an exception instea=
d
> of no results.
>=20
> Regards
>  Daniel
>=20
> --
> http://www.danielnaber.de
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 23:11:58 2005
Return-Path: <java-user-return-14117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63822 invoked from network); 14 Apr 2005 23:11:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 23:11:57 -0000
Received: (qmail 35723 invoked by uid 500); 14 Apr 2005 23:11:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35651 invoked by uid 500); 14 Apr 2005 23:11:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35629 invoked by uid 99); 14 Apr 2005 23:11:46 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.193 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 16:11:45 -0700
Received: by rproxy.gmail.com with SMTP id b11so435051rne
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 16:11:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=AgliK8Rd247IaHrAB2ijswDqO/Mvp8NTpdTixDxH4ShYS3t9VqlzcZDCu8QQLPBLi5kr4PMCc952rI7r4rUMKsJ86hk3rbA+loeb64pCTlzzh1plsgkAizb86zU0ptlQUJJOUEtIMHmmgtP+y/gm0NgeEgfNuO1koBRhDdbckzo=
Received: by 10.38.149.73 with SMTP id w73mr2336277rnd;
        Thu, 14 Apr 2005 16:11:42 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Thu, 14 Apr 2005 16:11:42 -0700 (PDT)
Message-ID: <c68e391705041416115830f399@mail.gmail.com>
Date: Thu, 14 Apr 2005 19:11:42 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Strange sort error
In-Reply-To: <c68e391705041416062fc3b914@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <dab56f707725e6206fb0b2e1bdd7aed7@otherwise.com>
	 <200504140011.16575@danielnaber.de>
	 <c68e3917050414072835c1d799@mail.gmail.com>
	 <200504150042.20444@danielnaber.de>
	 <c68e391705041416062fc3b914@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Also, it's more flexible.  You can easily implement stricter checking
on top of a "lax" model (use a term enumerator to see if the field
exists before you call search), but not vice versa.

-Yonik

On 4/14/05, Yonik Seeley <yseeley@gmail.com> wrote:
> Hmmm, that's a great lucene architecture question.
> Should one be allowed to sort on a field that doesn't exist?
> One *can* query on fields that don't exist (and that's correct in my view=
).
>=20
> The thing is, lucene field creation is lazy... just because the field
> doesn't exist now doesn't mean that it won't exist later.  The field
> one is sorting on doesn't even have to exist in all the documents.  I
> think it would be even more confusing for an invalid query suddenly
> becoming a valid query in the future just because someone added a doc
> with that field indexed (esp since that doc may not even match the
> query being sorted).
>=20
> In short, I think sorting should act like querying (no exception if
> field doesn't exist yet).
>=20
> -Yonik
>=20
> On 4/14/05, Daniel Naber <lucenelist@danielnaber.de> wrote:
> > On Thursday 14 April 2005 16:28, Yonik Seeley wrote:
> >
> > > I haven't tried it, but I think the fix should be easy... never throw
> > > that exception.
> >
> > As Lucene does not have the concept of a "warning" I think it should th=
row
> > exceptions when someone tries to do something that doesn't make sense
> > (even if it's technically possible). And sorting on a field that doesn'=
t
> > exist doesn't seem to make sense.
> >
> > Well, searching on a field that doesn't exist won't give you an excepti=
on
> > either. For debugging it would be useful if you'd get an exception inst=
ead
> > of no results.
> >
> > Regards
> >  Daniel
> >
> > --
> > http://www.danielnaber.de
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 23:33:25 2005
Return-Path: <java-user-return-14118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69259 invoked from network); 14 Apr 2005 23:33:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 23:33:25 -0000
Received: (qmail 57834 invoked by uid 500); 14 Apr 2005 23:33:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57802 invoked by uid 500); 14 Apr 2005 23:33:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 92107 invoked by uid 500); 14 Apr 2005 22:37:19 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Message-ID: <425EF09C.7060908@zilverline.org>
Date: Fri, 15 Apr 2005 00:37:16 +0200
From: Zilverline info <info@zilverline.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: nl, en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Zilverline Search Engine version 1.2.0 released
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 14 Apr 2005 22:37:17.0169 (UTC) FILETIME=[83049610:01C54142]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

All,

I've just released Zilverline version 1.2.0.

This version is fully webbased, all settings, collections, preferences 
can be set via the web interface. You don't need to edit any config
files anymore. Also I'm adding Powerpoint and Excel Extractors.

The source will be made available as well very soon.

Zilverline is protected by a Collaborative Source License. You can read
more on this type of licensing at http://www.zilverline.org

Zilverline is a search engine based on lucene that's ready to
roll, and can be simply dropped in a Servlet Engine. It runs out of the
box, and supports PDF, WORD, HTM, TXT, RTF, Excel, Powerpoint and CHM, 
and can  index zip, rar, and many other formats. Both on Windows and Linux.

Zilverline supports plugins. You can create your own extractors
for various file formats. I've provided Extractors for RTF, Text, PDF,
Word, Excel, Powerpoint and HTML.

Zilverline supports collections. A collection is a set of files and
directories in a directory. A collection can be indexed, and searched.
The results of the search can be retrieved from local disk or remotely,
if you run a webserver on your machine. Files inside zip, rar and chm
files are extracted, indexed and can be cached. The cache can be mapped
to sit behind your webserver as well.

It's also possible to specify your own handlers for archives. Say you
have a RAR archive, and you have a program on your system that can
extract the content from it, then you can specify that Zilverline should
use this program.


Please take look at http://www.zilverline.org, and have a swing at it.

cheers,

   Michael Franken






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 23:46:20 2005
Return-Path: <java-user-return-14119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71477 invoked from network); 14 Apr 2005 23:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2005 23:46:20 -0000
Received: (qmail 72217 invoked by uid 500); 14 Apr 2005 23:46:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72192 invoked by uid 500); 14 Apr 2005 23:46:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72178 invoked by uid 99); 14 Apr 2005 23:46:13 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 16:46:12 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2BFC05B78B; Thu, 14 Apr 2005 16:46:10 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP
	id 243177F459; Thu, 14 Apr 2005 16:46:10 -0700 (PDT)
Date: Thu, 14 Apr 2005 16:46:10 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org, Yonik Seeley <yseeley@gmail.com>
Subject: Re: Strange sort error
In-Reply-To: <c68e391705041416062fc3b914@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0504141626350.18601@hal.rescomp.berkeley.edu>
References: <dab56f707725e6206fb0b2e1bdd7aed7@otherwise.com> 
 <200504140011.16575@danielnaber.de>  <c68e3917050414072835c1d799@mail.gmail.com>
  <200504150042.20444@danielnaber.de> <c68e391705041416062fc3b914@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: one is sorting on doesn't even have to exist in all the documents.  I
: think it would be even more confusing for an invalid query suddenly
: becoming a valid query in the future just because someone added a doc

Or worse, a query that does work today, stops working tomorow because one
doc was removed.

: with that field indexed (esp since that doc may not even match the
: query being sorted).

In my mind, thta's the real crux of the issue...

Imagine you have two general classes of Documents:  "animals" and "plants"
-- all documents have some fields in common, including a "doctype" field
(which is allways either "plant" or "animal") but there may be some fields
which are exlusive to each type (ie: "number_of_legs", "avg_root_depth").

doing a search on something like "description:africa" sorted by score,
might return you all the plants and animals in africa.  sorting by
"number_of_legs" would get you the same results, but all the animals would
come first (since the plants don't have any legs).  a search for
"doctype:plant description:africa" would only return you plants, but even
then it would still work if you sorted by "number_of_legs".

so why then should it stop working if all of hte animals gradually become
extinct and get removed from the index.

: In short, I think sorting should act like querying (no exception if
: field doesn't exist yet).

agreed.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 00:19:10 2005
Return-Path: <java-user-return-14120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79506 invoked from network); 15 Apr 2005 00:19:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2005 00:19:10 -0000
Received: (qmail 5823 invoked by uid 500); 15 Apr 2005 00:19:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5655 invoked by uid 500); 15 Apr 2005 00:19:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5621 invoked by uid 99); 15 Apr 2005 00:19:01 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 17:19:01 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5E9895B79C; Thu, 14 Apr 2005 17:18:57 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 5D6FA7F45C
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 17:18:57 -0700 (PDT)
Date: Thu, 14 Apr 2005 17:18:57 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: RE: Update performance/indexwriter.delete()?
In-Reply-To: <OAELLNADBIAIBGFCBKEKIEOMDDAA.klein@sitescape.com>
Message-ID: <Pine.LNX.4.58.0504141710430.31600@hal.rescomp.berkeley.edu>
References: <OAELLNADBIAIBGFCBKEKIEOMDDAA.klein@sitescape.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


You mentioned before that you can't "batch" your updates ... i can
understand not being able to batch updates by number of updates -- but why
can't you batch by time?

It may sound bad to only process updates once an hour, or once every half
hour, or once every 5 minutes, or even once every 30 seconds ... but if
you are truely processing your records in such rapid fire succession that
the cumulative (milli)seconds it takes to open/close the reader and
open/close the writer for each doc is expensive, then why can't you batch
on whatever that cumulative time durration is?

Why not write your updater such that waits at most N milliseconds for
updates to be sent to it, then as long as it recieved at least 1 doc: open
a reader, deletes all the matching docs, closes the reader, opens a
writer, add the new versions of the docs, close the writter.

then do some performance tests, and find the optimal value of N, so that
you are processing docs as fast you possibly can.

	?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 01:54:05 2005
Return-Path: <java-user-return-14121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7245 invoked from network); 15 Apr 2005 01:54:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2005 01:54:05 -0000
Received: (qmail 85824 invoked by uid 500); 15 Apr 2005 01:53:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85783 invoked by uid 500); 15 Apr 2005 01:53:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85769 invoked by uid 99); 15 Apr 2005 01:53:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from www.trekspace.com (HELO trekspace.trekspace.com) (207.245.223.231)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 14 Apr 2005 18:53:55 -0700
Received: from trekspace.trekspace.com (trekspace@trekspace.trekspace.com [192.168.2.234])
	by trekspace.trekspace.com (8.12.3/8.12.3/Debian-7.1) with ESMTP id j3F1rqae027215
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2005 21:53:53 -0400
Message-ID: <5000359763114256133UZMHBGDEUJ.tlai@trekspace.com>
Date: Thu, 14 Apr 2005 21:53:52 -0400 (EDT)
From: Terence Lai <tlai@trekspace.com>
Reply-To: Terence Lai <tlai@trekspace.com>
To: java-user@lucene.apache.org
Subject: Atomic updates on Lucene index document?
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: Treklogic MailTool v1.6 http://www.treklogic.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

As far as I know, I don't find any Lucene API for updating an index document. What I have to do is to delete the existing index document and insert a new one. However, this is going to be 2 separate operations (delete and update). If the first operation suceeds while the second operation fails, I don't see an easy way to roll back the changes. Does any one have ideas on how to implement automic update in Lucene?

Thanks,
Terence




----------------------------------------------------------
Get your free email account from http://www.trekspace.com
          Your Internet Virtual Desktop!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 07:48:38 2005
Return-Path: <java-user-return-14122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5451 invoked from network); 15 Apr 2005 07:48:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2005 07:48:38 -0000
Received: (qmail 98993 invoked by uid 500); 15 Apr 2005 07:48:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98971 invoked by uid 500); 15 Apr 2005 07:48:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98955 invoked by uid 99); 15 Apr 2005 07:48:18 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 66-238-9-116.dia.xo.com (HELO exch01.allegro.med) (66.238.9.116)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 15 Apr 2005 00:48:17 -0700
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.181
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Problem when searching ..
Date: Fri, 15 Apr 2005 00:48:14 -0700
Message-ID: <B5ADCC4EA669BF4697F6AF63FF328674EC6FD0@exch01.allegro.med>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem when searching ..
thread-index: AcVBTCbWiuyL0QT6QkO9AeFDPcRbbAAQOMPw
From: "Mufaddal Khumri" <MKhumri@allegromedical.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am creating an index of my data that's persisted by Hibernate using
Lucene. I am running my indexer on a huge data set. My indexing takes
1312805ms. At the end of which I get a 26,266KB directory.=20

I can view the contents of my index directory using Luke.

When I copy my webapp under Tomcat and try to search on it I get the
following exception:

java.io.FileNotFoundException: C:\Program Files\Apache Software
Foundation\Tomcat 5.5\webapps\tan\tan-search-index\_33.fnm (The system
cannot find the file specified)
	java.io.RandomAccessFile.open(Native Method)
	java.io.RandomAccessFile.<init>(Unknown Source)
=09
org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java
:376)
=09
org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
=09
org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
	org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:53)
=09
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:109)
=09
org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:94)
=09
org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:122)
	org.apache.lucene.store.Lock$With.run(Lock.java:109)
	org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
	org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
=09
org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)
=09
com.ac.t.managers.SearchManagerImpl.search(SearchManagerImpl.java:233)
	com.ac.t.web.actions.search.Search.work(Search.java:42)
	com.ac.t.web.actions.TanAction.execute(TanAction.java:51)
=09
org.apache.struts.action.RequestProcessor.processActionPerform(RequestPr
ocessor.java:421)
=09
org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:
226)
=09
org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)
=09
org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:397)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
=09
com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.j
ava:39)
=09
com.opensymphony.module.sitemesh.filter.PageFilter.parsePage(PageFilter.
java:118)
=09
com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.j
ava:52)
=09
com.ac.t.web.filters.HibernateSessionFilter.doFilter(HibernateSessionFil
ter.java:41)

This is the code of my com.ac.t.managers.SearchManagerImpl.search
function:

	public Hits search(String indexPath, String queryString, String
entity)
		throws IOException, ParseException
	{
		IndexSearcher indexSearcher =3D new
IndexSearcher(indexPath); <--This is the line where it throws the
exception.

		if(queryString =3D=3D null)=20
		  queryString =3D "";

		Query query1 =3D
QueryParser.parse(queryString,"content",analyzer);
	=09
		Term term =3D null;
		if(entity.equals("product"))
		  term =3D new Term("entity","product");
		else
		if(entity.equals("category"))
		  term =3D new Term("entity","category");
		 =20
		TermQuery query2 =3D new TermQuery(term);=20
		BooleanQuery bq =3D new BooleanQuery();
		bq.add(query1, true, false);
		bq.add(query2, true, false);
	=09
		log.debug(query1.toString());
		log.debug(query2.toString());
		log.debug(bq.toString());

		return indexSearcher.search(bq);
	}


What am I doing wrong while searching? Why is the exception being
thrown?=20

Mufaddal.

-------------------------------------------------------------------------=
-----------------
This email and any files transmitted with it are confidential=20
and intended solely for the use of the individual or entity=20
to whom they are addressed. If you have received this=20
email in error please notify the system manager. Please
note that any views or opinions presented in this email=20
are solely those of the author and do not necessarily
represent those of the company. Finally, the recipient
should check this email and any attachments for the=20
presence of viruses. The company accepts no liability for
any damage caused by any virus transmitted by this email.
Consult your physician prior to the use of any medical
supplies or product.
-------------------------------------------------------------------------=
-----------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 08:05:54 2005
Return-Path: <java-user-return-14123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9881 invoked from network); 15 Apr 2005 08:05:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2005 08:05:54 -0000
Received: (qmail 24628 invoked by uid 500); 15 Apr 2005 08:05:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24605 invoked by uid 500); 15 Apr 2005 08:05:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24587 invoked by uid 99); 15 Apr 2005 08:05:33 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of Franck.Brisbart@kelkoo.net designates 194.98.147.102 as permitted sender)
Received: from mail.uunet.kelkoo.net (HELO smtp.kelkoo.net) (194.98.147.102)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 15 Apr 2005 01:05:32 -0700
Received: from [192.168.1.144] (alix.gre.kelkoo.net [192.168.1.144])
	(authenticated bits=0)
	by smtp.kelkoo.net (8.13.1/8.13.1) with ESMTP id j3F85RNP008340
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 15 Apr 2005 10:05:27 +0200
Message-ID: <425F75C7.20207@kelkoo.net>
Date: Fri, 15 Apr 2005 10:05:27 +0200
From: Brisbart Franck <Franck.Brisbart@kelkoo.net>
Reply-To: java-user@lucene.apache.org
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Problem when searching ..
References: <B5ADCC4EA669BF4697F6AF63FF328674EC6FD0@exch01.allegro.med>
In-Reply-To: <B5ADCC4EA669BF4697F6AF63FF328674EC6FD0@exch01.allegro.med>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Security-Warning: SMTP AUTH used with SSL, from a friendly host. No further checking required.
X-Spam-Warning: Message skipped by SpamAssassin. [Relay 192.168.1.144 has authenticated securely.]
X-Scanned-By: MIMEDefang 2.51 on 194.98.147.102
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Did you have a look at this thread ??
http://mail-archives.eu.apache.org/mod_mbox/jakarta-lucene-dev/200401.mbox/%3c40056471.5020704@jivesoftware.com%3e
It may help you

Franck

Mufaddal Khumri wrote:
> Hi,
> 
> I am creating an index of my data that's persisted by Hibernate using
> Lucene. I am running my indexer on a huge data set. My indexing takes
> 1312805ms. At the end of which I get a 26,266KB directory. 
> 
> I can view the contents of my index directory using Luke.
> 
> When I copy my webapp under Tomcat and try to search on it I get the
> following exception:
> 
> java.io.FileNotFoundException: C:\Program Files\Apache Software
> Foundation\Tomcat 5.5\webapps\tan\tan-search-index\_33.fnm (The system
> cannot find the file specified)
> 	java.io.RandomAccessFile.open(Native Method)
> 	java.io.RandomAccessFile.<init>(Unknown Source)
> 	
> org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java
> :376)
> 	
> org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
> 	
> org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
> 	org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:53)
> 	
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:109)
> 	
> org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:94)
> 	
> org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:122)
> 	org.apache.lucene.store.Lock$With.run(Lock.java:109)
> 	org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
> 	org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
> 	
> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)
> 	

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 08:33:51 2005
Return-Path: <java-user-return-14124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19514 invoked from network); 15 Apr 2005 08:33:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2005 08:33:51 -0000
Received: (qmail 78077 invoked by uid 500); 15 Apr 2005 08:33:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77996 invoked by uid 500); 15 Apr 2005 08:33:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77912 invoked by uid 99); 15 Apr 2005 08:33:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ausdauer.webit.de (HELO ausdauer.webit.de) (195.30.114.250)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 15 Apr 2005 01:33:26 -0700
Received: from cordoba (cordoba.webit.de [195.30.114.47])
	by ausdauer.webit.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j3F8XMMo024852;
	Fri, 15 Apr 2005 10:33:22 +0200
Received: by cordoba (Postfix, from userid 1000)
	id 2C8EB63331; Fri, 15 Apr 2005 10:33:22 +0200 (CEST)
Date: Fri, 15 Apr 2005 10:33:22 +0200
From: Jens Kraemer <kraemer@webit.de>
To: java-user@lucene.apache.org, Terence Lai <tlai@trekspace.com>
Subject: Re: Atomic updates on Lucene index document?
Message-ID: <20050415083321.GB17013@cordoba.webit.de>
References: <5000359763114256133UZMHBGDEUJ.tlai@trekspace.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <5000359763114256133UZMHBGDEUJ.tlai@trekspace.com>
User-Agent: Mutt/1.5.6+20040907i
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thu, Apr 14, 2005 at 09:53:52PM -0400, Terence Lai wrote:
> Hi all,
> 
> As far as I know, I don't find any Lucene API for updating an index
> document. What I have to do is to delete the existing index document
> and insert a new one. However, this is going to be 2 separate
> operations (delete and update). If the first operation suceeds while
> the second operation fails, I don't see an easy way to roll back the
> changes. Does any one have ideas on how to implement automic update in
> Lucene?

I would first add the new document version and delete the old one only
if that succeeds. When the deletion of the old version fails, just try
to delete the just inserted new version.

having some primary key like field identifying a document (equal in both
versions) one would first find out the lucene document id of the old
version by querying for this key field, then insert the new version,
then delete the old version using the document id from step 1.

If the deletion of the old version fails, and the deletion (the
'rollback') of the just inserted new version fails too, I suppose
something is wrong with the index anyway, so the two versions now
existing in the index might not be your biggest problem.

Jens

-- 
webit! Gesellschaft für neue Medien mbH          www.webit.de
Dipl.-Wirtschaftsingenieur Jens Krämer       kraemer@webit.de
Schnorrstraße 76                      Telefon +49 351 46766 0
D-01069 Dresden                      Telefax +49 351 46766 66

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 10:28:16 2005
Return-Path: <java-user-return-14125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62040 invoked from network); 15 Apr 2005 10:28:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2005 10:28:16 -0000
Received: (qmail 20324 invoked by uid 500); 15 Apr 2005 10:28:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20297 invoked by uid 500); 15 Apr 2005 10:28:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20278 invoked by uid 99); 15 Apr 2005 10:28:01 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=HTML_IMAGE_ONLY_24,HTML_MESSAGE,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 15 Apr 2005 03:28:00 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IEZHWZ00.5VA for <java-user@lucene.apache.org>; Fri, 15
          Apr 2005 16:16:11 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <java-user@lucene.apache.org>
Subject: LUCENE IS NOT ANY OTHER DB
Date: Fri, 15 Apr 2005 16:06:29 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKMEPFCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----=_NextPart_000_0002_01C541D5.15BEC330"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0002_01C541D5.15BEC330
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0003_01C541D5.15BEC330"


------=_NextPart_001_0003_01C541D5.15BEC330
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit



Hi guys....

Apologies..............

It really pains to after a hards day's work that Lucene is turning to be
similar to any other DB product.

The form is full of Db similar requirements on Lucene to perform.

If one requires supports similar to DB ,then can use Any of the free
avaliable DB's  PSQL/MYSQL/MSACCESS/...

Please do not expect Lucene to perform DB based queries.

Lucene is a DATA SEARCH ENGINE and not a DB Product by functionality.



I hope Users of Lucene will understand this in simple explanation.



Karthik


WITH WARM REGARDS
HAVE A NICE DAY
[ N.S.KARTHIK]


------=_NextPart_001_0003_01C541D5.15BEC330
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<STYLE><!-- body, P.msoNormal, LI.msoNormal, PRE, BLOCKQUOTE, a, MENU, =
dd, UL, DT { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } dir, ADDRESS, h1, h2, h3, h4, h5, =
h6, HR { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } --></STYLE>

<META content=3D"MSHTML 6.00.2600.0" name=3DGENERATOR></HEAD>
<BODY id=3DridBody>
<P><STRONG><FONT face=3DVerdana size=3D2></FONT></STRONG>&nbsp;</P>
<P><SPAN class=3D328482810-15042005><FONT face=3DVerdana =
size=3D2><STRONG>Hi=20
guys....</STRONG></FONT></SPAN></P>
<P><SPAN class=3D328482810-15042005><STRONG><FONT face=3DVerdana=20
size=3D2>Apologies..............</FONT></STRONG></SPAN></P>
<P><SPAN class=3D328482810-15042005><STRONG><FONT face=3DVerdana =
size=3D2>It really=20
pains to after a hards day's work that Lucene is turning to be similar =
to any=20
other DB product.</FONT></STRONG></SPAN></P>
<P><SPAN class=3D328482810-15042005><STRONG><FONT face=3DVerdana =
size=3D2>The form is=20
full of Db similar requirements on Lucene to =
perform.</FONT></STRONG></SPAN></P>
<P><SPAN class=3D328482810-15042005><STRONG><FONT face=3DVerdana =
size=3D2>If&nbsp;one=20
requires supports similar to DB ,then can use Any of the free avaliable=20
DB's&nbsp; PSQL/MYSQL/MSACCESS/...</FONT></STRONG></SPAN></P>
<P><SPAN class=3D328482810-15042005><STRONG><FONT face=3DVerdana =
size=3D2>Please do=20
not expect Lucene to perform DB based =
queries.</FONT></STRONG></SPAN></P>
<P><SPAN class=3D328482810-15042005><STRONG><FONT face=3DVerdana =
size=3D2>Lucene is a=20
DATA SEARCH ENGINE and not a DB Product by=20
functionality.</FONT></STRONG></SPAN></P>
<P><STRONG><FONT face=3DVerdana size=3D2></FONT></STRONG>&nbsp;</P>
<P><STRONG><FONT face=3DVerdana size=3D2>I hope Users of Lucene will =
understand this=20
in simple explanation.</FONT></STRONG></P>
<P><STRONG><FONT face=3DVerdana size=3D2></FONT></STRONG>&nbsp;</P>
<P><STRONG><FONT face=3DVerdana size=3D2>Karthik</FONT></STRONG></P>
<P><IMG height=3D85 src=3D"cid:328482810@15042005-01be" =
width=3D85><BR><B><FONT=20
face=3DVerdana color=3D#939ff7 size=3D3>WITH WARM REGARDS <BR>HAVE A =
NICE DAY <BR>[=20
N.S.KARTHIK]</FONT></B> </P></BODY></HTML>

------=_NextPart_001_0003_01C541D5.15BEC330--

------=_NextPart_000_0002_01C541D5.15BEC330--


From java-user-return-14126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 12:44:26 2005
Return-Path: <java-user-return-14126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2359 invoked from network); 15 Apr 2005 12:44:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2005 12:44:25 -0000
Received: (qmail 72002 invoked by uid 500); 15 Apr 2005 12:44:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71977 invoked by uid 500); 15 Apr 2005 12:44:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71964 invoked by uid 99); 15 Apr 2005 12:44:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 15 Apr 2005 05:44:03 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C541B8.CC492BE4"
Subject: Fields with same name boosting
Date: Fri, 15 Apr 2005 14:44:00 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA071141@gerard.anchormen.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Fields with same name boosting
thread-index: AcVBuMwd1jBW2MLFSkePdZx3sLj0sw==
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C541B8.CC492BE4
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have question about field boosting.
=20
If I have 2 (or more) fields with the same fieldname in a single
document, and I boost one of those, than only that one will be boosted?
Or will all fields with the same name be boosted? I guess only one field
is boosted, but I want to be certain.=20
=20

Met vriendelijke groet,

Peter Veentjer
Anchor Men Interactive Solutions - duidelijk in zakelijke
internetoplossingen

Praediniussingel 41
9711 AE Groningen

T: 050-3115222
F: 050-5891696
E: p.veentjer@anchormen.nl
I : www.anchormen.nl <blocked::http://www.anchormen.nl/>=20

=20

------_=_NextPart_001_01C541B8.CC492BE4--

From java-user-return-14127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 13:31:09 2005
Return-Path: <java-user-return-14127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33464 invoked from network); 15 Apr 2005 13:31:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2005 13:31:08 -0000
Received: (qmail 83445 invoked by uid 500); 15 Apr 2005 13:30:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83348 invoked by uid 500); 15 Apr 2005 13:30:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83280 invoked by uid 99); 15 Apr 2005 13:30:30 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from host59a.simplicato.com (HELO host54a.simplicato.com) (207.99.47.59)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 15 Apr 2005 06:30:28 -0700
Received: from localhost (localhost.simplicato.com [127.0.0.1])
	by host54a.simplicato.com (Postfix) with ESMTP id 0E6D26C02CE
	for <java-user@lucene.apache.org>; Fri, 15 Apr 2005 09:30:22 -0400 (EDT)
Received: from host54a.simplicato.com ([127.0.0.1])
 by localhost (host54a.simplicato.com [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 74875-02 for <java-user@lucene.apache.org>;
 Fri, 15 Apr 2005 09:30:21 -0400 (EDT)
Received: from pangloss (unknown [216.195.213.27])
	by host54a.simplicato.com (Postfix) with SMTP id A36116C02CD
	for <java-user@lucene.apache.org>; Fri, 15 Apr 2005 09:30:21 -0400 (EDT)
From: "Roy Klein" <klein@sitescape.com>
To: <java-user@lucene.apache.org>
Subject: RE: Update performance/indexwriter.delete()?
Date: Fri, 15 Apr 2005 09:30:24 -0400
Message-ID: <OAELLNADBIAIBGFCBKEKEEPBDDAA.klein@sitescape.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <Pine.LNX.4.58.0504141710430.31600@hal.rescomp.berkeley.edu>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Scanned: by amavisd-new at simplicato.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Hoss,

Thanks very much for your comments.

While batch processing might work in some cases, I believe it's not "safe"
in mine.

Here's the scenario that I can't guarantee won't happen:

There might be 3 transactions in a very short time span (for example, 1
second), here's what they are:

1) update doc1 (DEL doc1, ADD doc1)
2) update doc2 (DEL doc2, ADD doc2)
3) delete doc1

If I process these in order, then at the end of the 3 transactions, my index
will only have one document in it, doc2.



If I batch process these, I'll first do all the deletes, and then do all the
adds:

1) DEL doc1
2) DEL doc2
3) DEL doc1
4) ADD doc1
5) ADD doc2

At the end of processing these, my index will have 2 documents, doc1 and
doc2, which, is incorrect.



The first thing that comes to mind is that I could look at the transactions
in the batch queue, and based on the docid, I could make sure to delete all
the matching ADD docid's in the batch queue whenever a matching DEL comes
in.   However, that will only work if I know the docid's.  But, what happens
when the deletes are "term" deletes. My app would have to know how to search
the ADD docs that are already in the batching queue, and delete the ones
that match.  While it might be possible, and I could come up with some
interesting ways to do that (i.e. keep all the batched docs in a ram index,
and use that to match previously added docs), I think that's probably going
to be slower than just doing the transactions synchronously.

Another option is that I could process all the entries in the batch queue
whenever a delete comes in. However, based on the way the application is
feeding me transactions, that won't be much of an optimization either...

In my mind, the right way to fix this for my application was to have a
single object(i.e. indexwriter) that could do deletes and adds, so that it
would be aware of previously added docs whenever the batching queue looked
like my example above. That's why I wanted to understand more about the
architecture.

I wonder how unique my application is?  I thought many ecommerce/commercial
websites would have similar requirements, but, I might be mistaken.

Roy




-----Original Message-----
From: hossman@hal.rescomp.berkeley.edu
[mailto:hossman@hal.rescomp.berkeley.edu]On Behalf Of Chris Hostetter
Sent: Thursday, April 14, 2005 8:19 PM
To: java-user@lucene.apache.org
Subject: RE: Update performance/indexwriter.delete()?



You mentioned before that you can't "batch" your updates ... i can
understand not being able to batch updates by number of updates -- but why
can't you batch by time?

It may sound bad to only process updates once an hour, or once every half
hour, or once every 5 minutes, or even once every 30 seconds ... but if
you are truely processing your records in such rapid fire succession that
the cumulative (milli)seconds it takes to open/close the reader and
open/close the writer for each doc is expensive, then why can't you batch
on whatever that cumulative time durration is?

Why not write your updater such that waits at most N milliseconds for
updates to be sent to it, then as long as it recieved at least 1 doc: open
a reader, deletes all the matching docs, closes the reader, opens a
writer, add the new versions of the docs, close the writter.

then do some performance tests, and find the optimal value of N, so that
you are processing docs as fast you possibly can.

	?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 13:41:15 2005
Return-Path: <java-user-return-14128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37281 invoked from network); 15 Apr 2005 13:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2005 13:41:15 -0000
Received: (qmail 8091 invoked by uid 500); 15 Apr 2005 13:41:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8067 invoked by uid 500); 15 Apr 2005 13:41:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8052 invoked by uid 99); 15 Apr 2005 13:41:04 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 15 Apr 2005 06:41:01 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 5229BE47DF
	for <java-user@lucene.apache.org>; Fri, 15 Apr 2005 15:40:56 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 1E5A8E47C9
	for <java-user@lucene.apache.org>; Fri, 15 Apr 2005 15:40:56 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <24CFCE44DCB015489FB96D38BDF4FCAA071141@gerard.anchormen.nl>
References: <24CFCE44DCB015489FB96D38BDF4FCAA071141@gerard.anchormen.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <592bd8597d4178f0a090b2066008d59a@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: Fields with same name boosting
Date: Fri, 15 Apr 2005 15:40:53 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Le 15 avr. 05, =E0 14:44, Peter Veentjer - Anchor Men a =E9crit :
> I have question about field boosting.
>
> If I have 2 (or more) fields with the same fieldname in a single
> document, and I boost one of those, than only that one will be =
boosted?
> Or will all fields with the same name be boosted? I guess only one=20
> field
> is boosted, but I want to be certain.

I'd love to see a bit more about this.
One more ambiguity is the javadoc of Field.getBoost:

 > Returns the boost factor for hits on any field of this document.

In any case... what I'm not clear about is wether there is the=20
possibility to set the boost for all fields of this name for all=20
documents...
Reading the book didn't help me there but I may have overlooked.

paul=


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 14:06:39 2005
Return-Path: <java-user-return-14129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47909 invoked from network); 15 Apr 2005 14:06:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2005 14:06:39 -0000
Received: (qmail 82593 invoked by uid 500); 15 Apr 2005 14:06:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82571 invoked by uid 500); 15 Apr 2005 14:06:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82557 invoked by uid 99); 15 Apr 2005 14:06:28 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 66-7-233-83.scalix.com (HELO hagrid.scalix.local) (66.7.233.83)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 15 Apr 2005 07:06:27 -0700
Received: from hagrid.scalix.local (localhost.localdomain [127.0.0.1])
	by hagrid.scalix.local (8.12.11/8.12.11) with ESMTP id j3FDsjMQ023810
	for <java-user@lucene.apache.org>; Fri, 15 Apr 2005 06:54:45 -0700
Received: from hagrid.scalix.local (root@localhost)
	by hagrid.scalix.local (8.12.11/8.12.11/Submit) with ESMTP id j3FDsjlQ023808
	for <java-user@lucene.apache.org>; Fri, 15 Apr 2005 06:54:45 -0700
Received: from [10.11.108.231] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 9.2.1.15)
    via ESMTP; Fri, 15 Apr 2005 15:06:21 +0100 (BST)
Date: Fri, 15 Apr 2005 15:06:16 +0100
From: John Haxby <jch@scalix.com>
Sender: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <425FCA58.8060904@scalix.com>
In-Reply-To: <OAELLNADBIAIBGFCBKEKEEPBDDAA.klein@sitescape.com>
References: <OAELLNADBIAIBGFCBKEKEEPBDDAA.klein@sitescape.com>
Subject: Re: Update performance/indexwriter.delete()?
x-scalix-Hops: 3
User-Agent: Mozilla Thunderbird  (X11/20050322)
X-Accept-Language: en-us, en
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1";
	format="flowed"
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Roy Klein wrote:

>Here's the scenario that I can't guarantee won't happen:
>
>There might be 3 transactions in a very short time span (for example, 1
>second), here's what they are:
>
>1) update doc1 (DEL doc1, ADD doc1)
>2) update doc2 (DEL doc2, ADD doc2)
>3) delete doc1
>
>If I process these in order, then at the end of the 3 transactions, my index
>will only have one document in it, doc2.
>  
>
When I did something similar a while back(*) I added a little 
intelligence to the insertion of jobs into the queue.  Essentially, if 
I'm about to update a document that's already scheduled for updating, 
don't update it twice (delete the first job, ignore the new job, which 
ever is appropriate).  Similarly, if I'm going to delete a document 
that's awaiting update, don't bother with the update (but let the delete 
in so that the old document is deleted.  You can handle new documents 
and updates to them in a similar vein.

For your particular example, the first job would be discarded when the 
third job is added to the queue.

jch


(*) Updates to a folder in an IMAP server if you're interested.   
Although I'm dealing with only a few bytes at a time, the time-based 
batch is much the same, with the time being dictated by the IMAP client 
rather than any sort of clock.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 14:15:47 2005
Return-Path: <java-user-return-14130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52128 invoked from network); 15 Apr 2005 14:15:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2005 14:15:47 -0000
Received: (qmail 10306 invoked by uid 500); 15 Apr 2005 14:13:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10224 invoked by uid 500); 15 Apr 2005 14:13:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10189 invoked by uid 99); 15 Apr 2005 14:13:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 15 Apr 2005 07:13:51 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Subject: RE: Update performance/indexwriter.delete()?
Content-Transfer-Encoding: quoted-printable
Date: Fri, 15 Apr 2005 16:13:48 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA071142@gerard.anchormen.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Update performance/indexwriter.delete()?
thread-index: AcVBxFbBLMBoK/BARKaAC+GJhLyK2gAABJyg
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have done something similar. I have added a creational date to my
Jobs. Some jobs can take some time (analyzing) and all indexwrite jobs
are queued for a threadpool to be processed. After they are analyzed,
they are added in a queue to be written to the index. If 2 (or more)
indexwrite jobs for the same document are found in a single batch, the
oldest one is cancelled.=20


-----Oorspronkelijk bericht-----
Van: John Haxby [mailto:jch@scalix.com]=20
Verzonden: vrijdag 15 april 2005 16:06
Aan: java-user@lucene.apache.org
Onderwerp: Re: Update performance/indexwriter.delete()?

Roy Klein wrote:

>Here's the scenario that I can't guarantee won't happen:
>
>There might be 3 transactions in a very short time span (for example, 1

>second), here's what they are:
>
>1) update doc1 (DEL doc1, ADD doc1)
>2) update doc2 (DEL doc2, ADD doc2)
>3) delete doc1
>
>If I process these in order, then at the end of the 3 transactions, my=20
>index will only have one document in it, doc2.
> =20
>
When I did something similar a while back(*) I added a little
intelligence to the insertion of jobs into the queue.  Essentially, if
I'm about to update a document that's already scheduled for updating,
don't update it twice (delete the first job, ignore the new job, which
ever is appropriate).  Similarly, if I'm going to delete a document
that's awaiting update, don't bother with the update (but let the delete
in so that the old document is deleted.  You can handle new documents
and updates to them in a similar vein.

For your particular example, the first job would be discarded when the
third job is added to the queue.

jch


(*) Updates to a folder in an IMAP server if you're interested.  =20
Although I'm dealing with only a few bytes at a time, the time-based
batch is much the same, with the time being dictated by the IMAP client
rather than any sort of clock.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 15:57:24 2005
Return-Path: <java-user-return-14131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90461 invoked from network); 15 Apr 2005 15:57:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2005 15:57:24 -0000
Received: (qmail 18129 invoked by uid 500); 15 Apr 2005 15:56:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18077 invoked by uid 500); 15 Apr 2005 15:56:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18058 invoked by uid 99); 15 Apr 2005 15:56:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc11.comcast.net (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 15 Apr 2005 08:56:31 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2005041515560701300kq8d5e>; Fri, 15 Apr 2005 15:56:07 +0000
Message-ID: <425FE416.2000507@apache.org>
Date: Fri, 15 Apr 2005 08:56:06 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Fields with same name boosting
References: <24CFCE44DCB015489FB96D38BDF4FCAA071141@gerard.anchormen.nl>
In-Reply-To: <24CFCE44DCB015489FB96D38BDF4FCAA071141@gerard.anchormen.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Peter Veentjer - Anchor Men wrote:
> I have question about field boosting.
>  
> If I have 2 (or more) fields with the same fieldname in a single
> document, and I boost one of those, than only that one will be boosted?
> Or will all fields with the same name be boosted? I guess only one field
> is boosted, but I want to be certain. 

http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Field.html#setBoost(float)

"If a document has multiple fields with the same name, all such values 
are multiplied together."

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 20:52:29 2005
Return-Path: <java-user-return-14132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3723 invoked from network); 15 Apr 2005 20:52:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2005 20:52:29 -0000
Received: (qmail 11455 invoked by uid 500); 15 Apr 2005 20:52:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11433 invoked by uid 500); 15 Apr 2005 20:52:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11418 invoked by uid 99); 15 Apr 2005 20:52:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 15 Apr 2005 13:52:20 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: strange results using QueryFilter
Date: Fri, 15 Apr 2005 16:52:09 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA01082A1E@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Fields with same name boosting
thread-index: AcVB088ldX24VS78T3muaFnLLO4cpgAJ+ifQ
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi guys,

I have to do a search where the user will enter a query and then i have =
to get the hit's length for that term plus get the hit's length for that =
term such that the url ends with com or net or ..... I used QueryFilter, =
it works fine when the query is only one word but when the query is =
"bank of america" it doesn t return anything.
I am using QueryParser, I did the toString() on the query and it look =
like this: +content:bank +content:america +urlendswith:com. when i run =
the same query without queryfilter it works fine. any explanations will =
be very helpfull.

thanks,

omar

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 21:48:09 2005
Return-Path: <java-user-return-14133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17095 invoked from network); 15 Apr 2005 21:48:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2005 21:48:09 -0000
Received: (qmail 72465 invoked by uid 500); 15 Apr 2005 21:48:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72444 invoked by uid 500); 15 Apr 2005 21:48:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72431 invoked by uid 99); 15 Apr 2005 21:48:00 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=SPF_HELO_PASS,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (hermes.apache.org: transitioning domain of lucenelist@danielnaber.de does not designate 80.67.18.14 as permitted sender)
Received: from smtprelay02.ispgateway.de (HELO smtprelay02.ispgateway.de) (80.67.18.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 15 Apr 2005 14:47:57 -0700
Received: (qmail 19824 invoked from network); 15 Apr 2005 21:47:54 -0000
Received: from unknown (HELO p549655BC.dip.t-dialin.net) ([pbs]937788@[84.150.85.188])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 15 Apr 2005 21:47:54 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Strange sort error
Date: Fri, 15 Apr 2005 23:47:18 +0200
User-Agent: KMail/1.8
References: <dab56f707725e6206fb0b2e1bdd7aed7@otherwise.com> <c68e391705041416062fc3b914@mail.gmail.com> <Pine.LNX.4.58.0504141626350.18601@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0504141626350.18601@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504152347.18162@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 15 April 2005 01:46, Chris Hostetter wrote:

> Or worse, a query that does work today, stops working tomorow because
> one doc was removed.

You're right, that is not acceptable. I've created a bug report about the 
original problem:
http://issues.apache.org/bugzilla/show_bug.cgi?id=34477

Further discussion should probably take place on the development list.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 22:15:00 2005
Return-Path: <java-user-return-14134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21395 invoked from network); 15 Apr 2005 22:14:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2005 22:14:59 -0000
Received: (qmail 6430 invoked by uid 500); 15 Apr 2005 22:14:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6398 invoked by uid 500); 15 Apr 2005 22:14:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6377 invoked by uid 99); 15 Apr 2005 22:14:52 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 15 Apr 2005 15:14:51 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1D7245B791; Fri, 15 Apr 2005 15:14:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E97627F459
	for <java-user@lucene.apache.org>; Fri, 15 Apr 2005 15:14:48 -0700 (PDT)
Date: Fri, 15 Apr 2005 15:14:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: RE: Update performance/indexwriter.delete()?
In-Reply-To: <OAELLNADBIAIBGFCBKEKEEPBDDAA.klein@sitescape.com>
Message-ID: <Pine.LNX.4.58.0504151459050.27822@hal.rescomp.berkeley.edu>
References: <OAELLNADBIAIBGFCBKEKEEPBDDAA.klein@sitescape.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: The first thing that comes to mind is that I could look at the transactions
: in the batch queue, and based on the docid, I could make sure to delete all
: the matching ADD docid's in the batch queue whenever a matching DEL comes
: in.   However, that will only work if I know the docid's.  But, what happens
: when the deletes are "term" deletes. My app would have to know how to search

well, it depends on what the terms you allow for deletions are ... if the
Terms are unique to individual documents (ie: an identifier) then you
don't really have a problem -- Paul Libbrecht & John Haxby have allready
replied with great suggestions.

If you are allowing deletions on arbitrary Terms, which may match many
documents .. yeah, that's a tricky one.

My off the cuff answer would be sort of along the lines of what you
alluded to here...

: interesting ways to do that (i.e. keep all the batched docs in a ram index,
: and use that to match previously added docs), I think that's probably going

you could maintain your batch using a temporary RAMDirectory based index,
and a list of Terms to delete.
 - to start a batch, create a new IndeWriter on a RAMDirectory, and List
   for deletions.
 - whenever an "update" comes in, add the doc to your RAM Index, and add
   the UID for that doc do your List.
 - when a "delete" comes in, add the Term to delete by to the List.
 - once you're ready to "process" the job:
   * close the writer on your RAM Index
   * open a reader on both your RAM Index and your persistent index
   * for each Term in your deletion List, delete from both readers
   * close the reader on your persistent index, open a writer, and merge
     your RAM based index into it.

.,..I've never acctually tried that, but i think it should work ... if i
recall correctly, Yonik was looking into this for a while, but i think he
ran into a snag with the fact that IndexWriter.addIndexes() wants to call
optimize twice. (?)


Anyway, that's the best suggestion i can think of.  Personally I'm
suspicious of any application that needs to process updates/delets so
urgently that the cost of open/closing the reader/writer is that
significant -AND- needs to delete by more then just a Unique Identifier.

perhaps if you described your use cases a little more (ie; the context of
your application) people could propose alternate approaches that might
accomplish your needs faster.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 16 00:11:01 2005
Return-Path: <java-user-return-14135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39119 invoked from network); 16 Apr 2005 00:11:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2005 00:11:01 -0000
Received: (qmail 13018 invoked by uid 500); 16 Apr 2005 00:10:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12987 invoked by uid 500); 16 Apr 2005 00:10:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12972 invoked by uid 99); 16 Apr 2005 00:10:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 15 Apr 2005 17:10:50 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 40A3213E2005; Fri, 15 Apr 2005 20:10:47 -0400 (EDT)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 5122813E2005
	for <java-user@lucene.apache.org>; Fri, 15 Apr 2005 20:10:45 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA01082A1E@hermes.corp.cyveillance.com>
References: <63434C14F9A6F74CB36B85033E4C30CA01082A1E@hermes.corp.cyveillance.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <6a0fff8146493daa7f0ea57efe012cbe@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: strange results using QueryFilter
Date: Fri, 15 Apr 2005 20:10:55 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 15, 2005, at 4:52 PM, Omar Didi wrote:

> Hi guys,
>
> I have to do a search where the user will enter a query and then i 
> have to get the hit's length for that term plus get the hit's length 
> for that term such that the url ends with com or net or ..... I used 
> QueryFilter, it works fine when the query is only one word but when 
> the query is "bank of america" it doesn t return anything.
> I am using QueryParser, I did the toString() on the query and it look 
> like this: +content:bank +content:america +urlendswith:com. when i run 
> the same query without queryfilter it works fine. any explanations 
> will be very helpfull.

Short and sweet code example would do wonders to help see the details.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 16 01:05:09 2005
Return-Path: <java-user-return-14136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44280 invoked from network); 16 Apr 2005 01:05:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2005 01:05:09 -0000
Received: (qmail 57224 invoked by uid 500); 16 Apr 2005 01:05:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57186 invoked by uid 500); 16 Apr 2005 01:05:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57169 invoked by uid 99); 16 Apr 2005 01:05:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 15 Apr 2005 18:05:03 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: strange results using QueryFilter
Date: Fri, 15 Apr 2005 21:05:01 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA01082A1F@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: strange results using QueryFilter
thread-index: AcVCGMYKANgbSSlsSSurg6kdaklSpAABf4sA
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik,

here is a sample code that I hope is enough to find out what s wrong.

thanks.

Query domainQuery =3D new TermQuery( new Term( domain, brandName ) );
Filter domainFilter =3D new QueryFilter( domainQuery );
int total_result =3D searchIndex.getHits( "content", "bank of america" =
).length();
String[] _tlds =3D {"com","net","org",....};
	for ( String tld : _tlds )
	{
		// count is always 0 but when I dont use domainQuery it has different =
values
		int count =3D searchIndex.getHits( "content", brandName + " tld:" + =
tld, domainFilter ).length();
	}
// this is the getHits method=20
public Hits getHits( String defaultField, String query )
			throws ParseException,
			IOException
	{
		Hits results =3D null;

		// set the query parser properties
		QueryParser queryParser =3D new QueryParser( defaultField, m_analyzer =
);
		queryParser.setOperator( QueryParser.DEFAULT_OPERATOR_AND );
		Query searchQuery =3D queryParser.parse( query );
		logger.info("parsed query is :  " + searchQuery.toString());
		logger.info("parsed query is :  " + =
searchQuery.toString(defaultField));
		// get the results
		results =3D m_searcher.search( searchQuery );
		return results;
	}

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Friday, April 15, 2005 8:11 PM
To: java-user@lucene.apache.org
Subject: Re: strange results using QueryFilter



On Apr 15, 2005, at 4:52 PM, Omar Didi wrote:

> Hi guys,
>
> I have to do a search where the user will enter a query and then i=20
> have to get the hit's length for that term plus get the hit's length=20
> for that term such that the url ends with com or net or ..... I used=20
> QueryFilter, it works fine when the query is only one word but when=20
> the query is "bank of america" it doesn t return anything.
> I am using QueryParser, I did the toString() on the query and it look=20
> like this: +content:bank +content:america +urlendswith:com. when i run =

> the same query without queryfilter it works fine. any explanations=20
> will be very helpfull.

Short and sweet code example would do wonders to help see the details.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 16 02:21:46 2005
Return-Path: <java-user-return-14137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67301 invoked from network); 16 Apr 2005 02:21:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2005 02:21:46 -0000
Received: (qmail 17342 invoked by uid 500); 16 Apr 2005 02:21:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17303 invoked by uid 500); 16 Apr 2005 02:21:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17290 invoked by uid 99); 16 Apr 2005 02:21:38 -0000
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_20_30,HTML_MESSAGE,MIME_BOUND_NEXTPART,NO_REAL_NAME,RCVD_BY_IP,RCVD_DOUBLE_IP_LOOSE,RCVD_NUMERIC_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from sccrmhc12.comcast.net (HELO sccrmhc12.comcast.net) (204.127.202.56)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 15 Apr 2005 19:21:36 -0700
Received: from 204.127.205.142 (unknown[204.127.205.162](misconfigured sender))
          by comcast.net (sccrmhc12) with SMTP
          id <200504160221340120053r8te>; Sat, 16 Apr 2005 02:21:34 +0000
Received: from [24.34.25.105] by 204.127.205.142;
	Sat, 16 Apr 2005 02:21:33 +0000
From: ethandev@comcast.net
To: java-user@lucene.apache.org
Cc: ethandev@comcast.net
Subject: token type question
Date: Sat, 16 Apr 2005 02:21:33 +0000
Message-Id: <041620050221.9157.426076AD0005F369000023C52207001641900A0B020E089B0A@comcast.net>
X-Mailer: AT&T Message Center Version 1 (Dec 17 2004)
X-Authenticated-Sender: ZXRoYW5kZXZAY29tY2FzdC5uZXQ=
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="NextPart_Webmail_9m3u9jl4l_9157_1113618093_0"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--NextPart_Webmail_9m3u9jl4l_9157_1113618093_0
Content-Type: text/plain
Content-Transfer-Encoding: 8bit

Hi, 

I am working on a program to index/search chemical element/compound. Say I write an analyzer to filter out chemical terms, such as H2O. I noticed that I can specify a tocken's type. Can I construct a token as 
new Token ("H2", start, end, "chem");

My questions is
How do I search all the tokens with "chem" type token, such as H2O, O2, etc? Any sample like this? 

If this approach doesn't work, what's the best approach?

Thanks,
Ethan
--NextPart_Webmail_9m3u9jl4l_9157_1113618093_0--

From java-user-return-14138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 16 06:31:55 2005
Return-Path: <java-user-return-14138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40023 invoked from network); 16 Apr 2005 06:31:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2005 06:31:55 -0000
Received: (qmail 38064 invoked by uid 500); 16 Apr 2005 06:31:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38034 invoked by uid 500); 16 Apr 2005 06:31:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38020 invoked by uid 99); 16 Apr 2005 06:31:47 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from main.gmane.org (HELO ciao.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 15 Apr 2005 23:31:45 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DMgmb-0001YW-KT
	for java-user@lucene.apache.org; Sat, 16 Apr 2005 08:27:57 +0200
Received: from vil35-2-82-236-174-106.fbx.proxad.net ([82.236.174.106])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 16 Apr 2005 08:27:57 +0200
Received: from pierrick.brihaye by vil35-2-82-236-174-106.fbx.proxad.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 16 Apr 2005 08:27:57 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Pierrick Brihaye <pierrick.brihaye@free.fr>
Subject:  Re: token type question
Date:  Sat, 16 Apr 2005 08:31:32 +0200
Lines: 37
Message-ID: <d3qb99$d4o$1@sea.gmane.org>
References:  <041620050221.9157.426076AD0005F369000023C52207001641900A0B020E089B0A@comcast.net>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  8bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: vil35-2-82-236-174-106.fbx.proxad.net
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; fr-FR; rv:1.7) Gecko/20040608
X-Accept-Language: fr-fr, en-us, en
In-Reply-To: <041620050221.9157.426076AD0005F369000023C52207001641900A0B020E089B0A@comcast.net>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

ethandev@comcast.net a écrit :

> I am working on a program to index/search chemical element/compound. Say I write an analyzer to filter out chemical terms, such as H2O. I noticed that I can specify a tocken's type. Can I construct a token as 
> new Token ("H2", start, end, "chem");
> 
> My questions is
> How do I search all the tokens with "chem" type token, such as H2O, O2, etc? Any sample like this? 
> 
> If this approach doesn't work, what's the best approach?

You may assign a type to the tokens, and then you may filter them 
according to their type *but* the index forgets this info since it 
stores *terms* (field/value pairs).

Compare :
http://lucene.apache.org/java/docs/api/org/apache/lucene/analysis/Token.html
and
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/Term.html

Notice however that the terms have also their relative position (the 
Token's positionIncrement, default = 1) stored in the index ; this 
allows proximity searches.

So... how to do ?

1) use a dedicated field "chem" where only chemical content is allowed 
(filter out every token whose type is different from "chem")
2) manipulate your termText : "chem_H2" ; the same for your queries
3) play with the query rather than with the index content : filter out 
what is not chemical

There may be other solutions...

Cheers,

p.b.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 16 08:19:44 2005
Return-Path: <java-user-return-14139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94026 invoked from network); 16 Apr 2005 08:19:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2005 08:19:44 -0000
Received: (qmail 27643 invoked by uid 500); 16 Apr 2005 08:19:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27612 invoked by uid 500); 16 Apr 2005 08:19:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27596 invoked by uid 99); 16 Apr 2005 08:19:35 -0000
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD,HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web90210.mail.scd.yahoo.com (HELO web90210.mail.scd.yahoo.com) (66.218.94.94)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 16 Apr 2005 01:19:34 -0700
Received: (qmail 39380 invoked by uid 60001); 16 Apr 2005 08:19:32 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=HK/HzPmO5MmZp0rJ/E8uXtQM5fHFqJDAlwmBMbXg9ivRvv6hXNCGxef85l+JKjecvPBiURut9StdwxjYy6XDplE+p7+dQOuk55TTMfISbkFaIHeDXF2f69yYYcfBotqqqw94y8UVORtHHgVP+hVAZGh2ORFdbkKAt7lEZj2Hbs8=  ;
Message-ID: <20050416081932.39378.qmail@web90210.mail.scd.yahoo.com>
Received: from [68.14.110.116] by web90210.mail.scd.yahoo.com via HTTP; Sat, 16 Apr 2005 01:19:32 PDT
Date: Sat, 16 Apr 2005 01:19:32 -0700 (PDT)
From: kelly jesicca <kellyjesicca@yahoo.com>
Subject: lucene with oracle ?????
To: Erik Hatcher <erik@ehatchersolutions.com>
Cc: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-370200937-1113639572=:38769"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-370200937-1113639572=:38769
Content-Type: text/plain; charset=us-ascii

hi 
 
   i am new to lucene and would like to know if i can index data in the oracle ? if so can i have any example application of indexing database ???
 
thanks 
kelly

		
---------------------------------
Do you Yahoo!?
 Plan great trips with Yahoo! Travel: Now over 17,000 guides!
--0-370200937-1113639572=:38769--

From java-user-return-14140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 16 08:22:31 2005
Return-Path: <java-user-return-14140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94841 invoked from network); 16 Apr 2005 08:22:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2005 08:22:31 -0000
Received: (qmail 31764 invoked by uid 500); 16 Apr 2005 08:22:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31734 invoked by uid 500); 16 Apr 2005 08:22:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31719 invoked by uid 99); 16 Apr 2005 08:22:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 16 Apr 2005 01:22:19 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C5425D.66F8E40A"
Subject: RE: lucene with oracle ?????
Date: Sat, 16 Apr 2005 10:21:10 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA07C96C@gerard.anchormen.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <24CFCE44DCB015489FB96D38BDF4FCAA07C96C@gerard.anchormen.nl>
Thread-Topic: lucene with oracle ?????
thread-index: AcVCXQsw7auL2epFQr6HubTNqNh3vgAADPpU
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5425D.66F8E40A
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

You could access the database, read the data, and index it with Lucene. =
But you have to make your own dbaccess, but this shouldn`t have to be =
any problem. If you take middlegen + Hibernate your up and running in no =
time.=20

________________________________

From: kelly jesicca [mailto:kellyjesicca@yahoo.com]
Sent: Sat 16-4-2005 10:19
To: Erik Hatcher
Cc: java-user@lucene.apache.org
Subject: lucene with oracle ?????



hi

   i am new to lucene and would like to know if i can index data in the =
oracle ? if so can i have any example application of indexing database =
???

thanks
kelly

              =20
---------------------------------
Do you Yahoo!?
 Plan great trips with Yahoo! Travel: Now over 17,000 guides!=20



------_=_NextPart_001_01C5425D.66F8E40A
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C5425D.66F8E40A--

From java-user-return-14141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 16 08:52:44 2005
Return-Path: <java-user-return-14141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3217 invoked from network); 16 Apr 2005 08:52:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2005 08:52:44 -0000
Received: (qmail 65820 invoked by uid 500); 16 Apr 2005 08:52:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65541 invoked by uid 500); 16 Apr 2005 08:52:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65526 invoked by uid 99); 16 Apr 2005 08:52:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.bayt.net (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 16 Apr 2005 01:52:33 -0700
Received: from [192.168.0.3] [217.165.86.225] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id A4BC59170134; Sat, 16 Apr 2005 05:02:52 -0400
Message-ID: <4260D247.7090401@bayt.net>
Date: Sat, 16 Apr 2005 12:52:23 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: lucene with oracle ?????
References: <20050416081932.39378.qmail@web90210.mail.scd.yahoo.com>
In-Reply-To: <20050416081932.39378.qmail@web90210.mail.scd.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You would have to write a little application to read from oracle and 
write Lucene documents to the index and then a little more code to 
search your newly created index. Lucene will function externally from 
Oracle, you can also add a few triggers to oracle to tag new records as 
"dirty" or pending indexing, so when the indexer runs it can pick those 
up. This all depends on how complex your application is and how complex 
do you see it getting.

Nader Henein

kelly jesicca wrote:

>hi 
> 
>   i am new to lucene and would like to know if i can index data in the oracle ? if so can i have any example application of indexing database ???
> 
>thanks 
>kelly
>
>		
>---------------------------------
>Do you Yahoo!?
> Plan great trips with Yahoo! Travel: Now over 17,000 guides!
>  
>

-- 
Nader S. Henein
Senior Applications Developer

Bayt.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 16 17:24:41 2005
Return-Path: <java-user-return-14142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3204 invoked from network); 16 Apr 2005 17:24:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2005 17:24:41 -0000
Received: (qmail 56248 invoked by uid 500); 16 Apr 2005 17:24:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56220 invoked by uid 500); 16 Apr 2005 17:24:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56206 invoked by uid 99); 16 Apr 2005 17:24:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 16 Apr 2005 10:24:30 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Subject: finding all docs with field.
Content-Transfer-Encoding: quoted-printable
Date: Sat, 16 Apr 2005 19:24:27 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA07C96D@gerard.anchormen.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: finding all docs with field.
thread-index: AcVCqSRaF3shEFNzQl2m7mL3whpN+g==
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How can I find all documents with a field (the value doesn`t matter).
=20
I have tried:
Query query =3D new TermQuery(new =
Term(AbstractBaseDoc.FIELD_INDEX_ERROR,""));
 =20
=20
But this never finds results. The field with name FIELD_INDEX_ERROR has =
been of type Unindex, Text, Keyword  but it doesn`t matter.=20
=20
I have checked the index with Luke, and I did find a document with the =
specified field.. So there are documents.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 16 21:16:12 2005
Return-Path: <java-user-return-14143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66977 invoked from network); 16 Apr 2005 21:16:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2005 21:16:12 -0000
Received: (qmail 62317 invoked by uid 500); 16 Apr 2005 21:16:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62260 invoked by uid 500); 16 Apr 2005 21:16:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62246 invoked by uid 99); 16 Apr 2005 21:16:08 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 16 Apr 2005 14:16:08 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 660C6E47E3
	for <java-user@lucene.apache.org>; Sat, 16 Apr 2005 23:16:04 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 48690E47E2
	for <java-user@lucene.apache.org>; Sat, 16 Apr 2005 23:16:04 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <d3qb99$d4o$1@sea.gmane.org>
References: <041620050221.9157.426076AD0005F369000023C52207001641900A0B020E089B0A@comcast.net> <d3qb99$d4o$1@sea.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <2aefc3b0377ade6c68354e411dd19230@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: token type question
Date: Sat, 16 Apr 2005 23:16:03 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Le 16 avr. 05, =E0 08:31, Pierrick Brihaye a =E9crit :
>> How do I search all the tokens with "chem" type token, such as H2O,=20=

>> O2, etc? Any sample like this? If this approach doesn't work, what's=20=

>> the best approach?

Nifty question... I'm working on indexing text with math formulae...=20
there may be similarities !

> You may assign a type to the tokens, and then you may filter them=20
> according to their type *but* the index forgets this info since it=20
> stores *terms* (field/value pairs). [...]
> 1) use a dedicated field "chem" where only chemical content is allowed=20=

> (filter out every token whose type is different from "chem")
> 2) manipulate your termText : "chem_H2" ; the same for your queries
> 3) play with the query rather than with the index content : filter out=20=

> what is not chemical

So it really seems chem_H2 is the only choice, or ?

What's your requirements or expectations ?
- match a formula in the middle of a sentence ?
- or simply match documents that contain both the sentence's words and=20=

the formula (in the latter case, I think solution 1 is valid)
- how would you do wildcards with formulae ?

A related question, at least for me, is how to match a+(b+1) when the=20
query is X+Y, ie. subtree cut.
Does this occur in chemical formulae as well?

paul=


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 17 15:21:29 2005
Return-Path: <java-user-return-14144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34825 invoked from network); 17 Apr 2005 15:21:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2005 15:21:29 -0000
Received: (qmail 51883 invoked by uid 500); 17 Apr 2005 15:21:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51762 invoked by uid 500); 17 Apr 2005 15:21:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51719 invoked by uid 99); 17 Apr 2005 15:21:00 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mailgate3.eduhi.at (HELO mailgate3.eduhi.at) (193.170.67.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 17 Apr 2005 08:20:59 -0700
Received: from localhost (localhost [127.0.0.1])
	by mailgate3.eduhi.at (Postfix) with ESMTP id 9393C2B231
	for <java-user@lucene.apache.org>; Sun, 17 Apr 2005 17:20:55 +0200 (CEST)
Received: from mail.eduhi.at (mail.asn-linz.ac.at [172.27.2.5])
	by mailgate3.eduhi.at (Postfix) with ESMTP id 71D182B222
	for <java-user@lucene.apache.org>; Sun, 17 Apr 2005 17:20:55 +0200 (CEST)
Received: from [192.168.0.117] ([10.221.6.242]) by mail.eduhi.at with Microsoft SMTPSVC(5.0.2172.1);
	 Sun, 17 Apr 2005 17:20:52 +0200
Message-ID: <42627ED5.3070004@eduhi.at>
Date: Sun, 17 Apr 2005 17:20:53 +0200
From: Gusenbauer Stefan <gusenbauer@eduhi.at>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: finding all docs with field.
References: <24CFCE44DCB015489FB96D38BDF4FCAA07C96D@gerard.anchormen.nl>
In-Reply-To: <24CFCE44DCB015489FB96D38BDF4FCAA07C96D@gerard.anchormen.nl>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 17 Apr 2005 15:20:52.0696 (UTC) FILETIME=[0B185580:01C54361]
X-Spam-Checker-Version: SpamAssassin 2.64 (2004-01-11) on mailgate3.eduhi.at
X-Spam-Level: **
X-Spam-Status: No, hits=2.7 required=5.8 tests=EH_b_lwords,EH_f_whitelist5,
	EH_s_llwords,EH_u_spam_lllow,UNWANTED_LANGUAGE_BODY autolearn=no 
	version=2.64
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Peter Veentjer - Anchor Men wrote:

>How can I find all documents with a field (the value doesn`t matter).
> 
>I have tried:
>Query query = new TermQuery(new Term(AbstractBaseDoc.FIELD_INDEX_ERROR,""));
>  
> 
>But this never finds results. The field with name FIELD_INDEX_ERROR has been of type Unindex, Text, Keyword  but it doesn`t matter. 
> 
>I have checked the index with Luke, and I did find a document with the specified field.. So there are documents.
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>  
>
What content does this field have?
I use the following:
To every Document I add Field.Keyword("all","all"); (The values and the
name doesn't matter)
When I search for them i made the following Query  query = new
TermQuery(new Term("all","all")); This should return all the fields.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 18 00:41:34 2005
Return-Path: <java-user-return-14145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30292 invoked from network); 18 Apr 2005 00:41:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2005 00:41:34 -0000
Received: (qmail 82268 invoked by uid 500); 18 Apr 2005 00:41:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82248 invoked by uid 500); 18 Apr 2005 00:41:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82235 invoked by uid 99); 18 Apr 2005 00:41:27 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web60808.mail.yahoo.com (HELO web60808.mail.yahoo.com) (216.155.196.71)
  by apache.org (qpsmtpd/0.28) with SMTP; Sun, 17 Apr 2005 17:41:23 -0700
Received: (qmail 76225 invoked by uid 60001); 18 Apr 2005 00:41:21 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=zaCv5NogyccQ3kZAHPMo7rLE0JoT0ES7vJVVL4u2Lkspq+EBbHww5n9cyGiAzqJJNmle9f05EPuEFc6oeXYjL/oXX5LcHwEFZ2QAbXsq9SXlJty9zoYBwLnvV1kBYslsWXmGkVJtbMy5LCYmglyOn8VlIkHU1uxKlCdPTzoiiyE=  ;
Message-ID: <20050418004121.76223.qmail@web60808.mail.yahoo.com>
Received: from [66.114.85.99] by web60808.mail.yahoo.com via HTTP; Sun, 17 Apr 2005 17:41:21 PDT
Date: Sun, 17 Apr 2005 17:41:21 -0700 (PDT)
From: Gabe <gjz22@yahoo.com>
Subject: Re: Lucene for Geo
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I don't think you can do this continuously, but this
might be possible to do by setting up "regions" of how
far away the person is. I'm not using real lats and
longs here, but say you want to search within 5 points
of lat=5; long=6. You could set up your search as:

+((lat:[0 TO 10] and long:[1 TO 11]) (lat:[1 TO 9] and
long:[2 TO 10]) (lat:[2 TO 8] and long:[3 TO 9]) ...
(lat:5 and long:6))

Hairy yes, but I *believe* looking at how scoring
works that (assuming all other terms had boost factors
of 0), that those docs which were closer would match
more terms and thus be scored higher. Not positive but
it's something to play with.

Gabe

--- Martin May <maym@foobar.lu> wrote:
> 
> Hi everybody,
> 
> I have some questions concerning using Lucene for
> Geo-searching. I have
> a bunch of documents (> 100,000) in the index that
> all have a latitude
> and longitude associated with them.
> 
> I wanted to be able to search within a certain
> radius of a point of
> origin, which I accomplished by applying some
> filters on the search that
> restrict what values lat/long can take.
> 
> So far so good. What I would like to be able to do
> now is factor in the
> distance from the point of origin in the scoring,
> i.e. give documents
> that are closer to the point of origin a boost.
> 
> Simply sorting by distance won't cut it, because
> there are other
> relevance factors affecting the ranking. Is there
> any good (easy &
> efficient) way to do this?
> 
> Thanks,
> 
> Martin
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 18 00:53:43 2005
Return-Path: <java-user-return-14146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31146 invoked from network); 18 Apr 2005 00:53:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2005 00:53:43 -0000
Received: (qmail 91929 invoked by uid 500); 18 Apr 2005 00:53:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91896 invoked by uid 500); 18 Apr 2005 00:53:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91882 invoked by uid 99); 18 Apr 2005 00:53:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from sccrmhc14.comcast.net (HELO sccrmhc14.comcast.net) (204.127.202.59)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 17 Apr 2005 17:53:35 -0700
Received: from [67.161.146.9] (c-67-161-146-9.hsd1.co.comcast.net[67.161.146.9])
          by comcast.net (sccrmhc14) with ESMTP
          id <2005041800533201400h4l31e>; Mon, 18 Apr 2005 00:53:33 +0000
Message-ID: <42630507.6010503@foobar.lu>
Date: Sun, 17 Apr 2005 18:53:27 -0600
From: Martin May <maym@foobar.lu>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene for Geo
References: <20050418004121.76223.qmail@web60808.mail.yahoo.com>
In-Reply-To: <20050418004121.76223.qmail@web60808.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Gabe,

Thanks for the tip. That's more or less how I am doing things now, but 
it doesn't seem to boost anything. I guess that if you could do a range 
query with a preferred value, the scoring could give things that have 
values closer to that preferred value more weight. However, it seems 
that this is not currently possible in Lucene (and please, correct me if 
I'm wrong).

Thanks,
Martin

Gabe wrote:

>I don't think you can do this continuously, but this
>might be possible to do by setting up "regions" of how
>far away the person is. I'm not using real lats and
>longs here, but say you want to search within 5 points
>of lat=5; long=6. You could set up your search as:
>
>+((lat:[0 TO 10] and long:[1 TO 11]) (lat:[1 TO 9] and
>long:[2 TO 10]) (lat:[2 TO 8] and long:[3 TO 9]) ...
>(lat:5 and long:6))
>
>Hairy yes, but I *believe* looking at how scoring
>works that (assuming all other terms had boost factors
>of 0), that those docs which were closer would match
>more terms and thus be scored higher. Not positive but
>it's something to play with.
>
>Gabe
>
>--- Martin May <maym@foobar.lu> wrote:
>  
>
>>Hi everybody,
>>
>>I have some questions concerning using Lucene for
>>Geo-searching. I have
>>a bunch of documents (> 100,000) in the index that
>>all have a latitude
>>and longitude associated with them.
>>
>>I wanted to be able to search within a certain
>>radius of a point of
>>origin, which I accomplished by applying some
>>filters on the search that
>>restrict what values lat/long can take.
>>
>>So far so good. What I would like to be able to do
>>now is factor in the
>>distance from the point of origin in the scoring,
>>i.e. give documents
>>that are closer to the point of origin a boost.
>>
>>Simply sorting by distance won't cut it, because
>>there are other
>>relevance factors affecting the ranking. Is there
>>any good (easy &
>>efficient) way to do this?
>>
>>Thanks,
>>
>>Martin
>>
>>
>>
>>    
>>
>---------------------------------------------------------------------
>  
>
>>To unsubscribe, e-mail:
>>java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail:
>>java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>__________________________________________________
>Do You Yahoo!?
>Tired of spam?  Yahoo! Mail has the best spam protection around 
>http://mail.yahoo.com 
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 18 07:55:40 2005
Return-Path: <java-user-return-14147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47107 invoked from network); 18 Apr 2005 07:55:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2005 07:55:40 -0000
Received: (qmail 42732 invoked by uid 500); 18 Apr 2005 07:55:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42710 invoked by uid 500); 18 Apr 2005 07:55:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42693 invoked by uid 99); 18 Apr 2005 07:55:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 18 Apr 2005 00:55:29 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Subject: RE: finding all docs with field.
Content-Transfer-Encoding: quoted-printable
Date: Mon, 18 Apr 2005 09:55:27 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA071144@gerard.anchormen.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: finding all docs with field.
thread-index: AcVDYSCyrN+bbZIpSsK1TqGNjiLUjwAiUezw
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

=20

-----Oorspronkelijk bericht-----
Van: Gusenbauer Stefan [mailto:gusenbauer@eduhi.at]=20
Verzonden: zondag 17 april 2005 17:21
Aan: java-user@lucene.apache.org
Onderwerp: Re: finding all docs with field.

Peter Veentjer - Anchor Men wrote:

>How can I find all documents with a field (the value doesn`t matter).
>=20
>I have tried:
>Query query =3D new TermQuery(new=20
>Term(AbstractBaseDoc.FIELD_INDEX_ERROR,""));
> =20
>=20
>But this never finds results. The field with name FIELD_INDEX_ERROR has
been of type Unindex, Text, Keyword  but it doesn`t matter.=20
>=20
>I have checked the index with Luke, and I did find a document with the
specified field.. So there are documents.
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> =20
>
What content does this field have?

It can contain all kinds of information (stacktraces for example). If I
search in the field with a normal query:
	Query query =3D new TermQuery(new
Term(AbstractBaseDoc.FIELD_INDEX_ERROR,"document"));
then the documents are found (document is a keyword that exists in most
errors.. Error in document blablabla)



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 09:55:22 2005
Return-Path: <java-user-return-14148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59631 invoked from network); 19 Apr 2005 09:55:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 09:55:22 -0000
Received: (qmail 38254 invoked by uid 500); 19 Apr 2005 09:54:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38205 invoked by uid 500); 19 Apr 2005 09:54:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38181 invoked by uid 99); 19 Apr 2005 09:54:50 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of eric138@gmail.com designates 64.233.162.204 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 02:54:47 -0700
Received: by zproxy.gmail.com with SMTP id 18so2498966nzp
        for <java-user@lucene.apache.org>; Tue, 19 Apr 2005 02:54:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=KhCpfgDrSuLdc3kxnOOk4bG0/gTTt6LBhpH52XwodaKrk29DIAZ3uZ5imukJPNRcKzsMkPsADcrR3XyJUpffG4aqEJ0xRnCuQA00aNXbS0znSdtks9OgOwxyv/p8YZS9RJOg3w8ZWlJq2Sn5+KjnysRM5oLjoJAZFBrRgBqsxgE=
Received: by 10.36.82.18 with SMTP id f18mr468486nzb;
        Tue, 19 Apr 2005 02:54:45 -0700 (PDT)
Received: by 10.36.103.4 with HTTP; Tue, 19 Apr 2005 02:54:45 -0700 (PDT)
Message-ID: <f472e9a005041902546582207e@mail.gmail.com>
Date: Tue, 19 Apr 2005 17:54:45 +0800
From: Eric Chow <eric138@gmail.com>
Reply-To: Eric Chow <eric138@gmail.com>
To: java-user@lucene.apache.org
Subject: Wildcard searching with Highlight support ?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I downloaded the term highlighting in sandbox.
But it seems not support wildcard searching.

I mean if I use wildcard query, it cannot highlight any terms ?

Any idea to do this or any existing example ?

Best regards,
Eric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 10:16:32 2005
Return-Path: <java-user-return-14149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73613 invoked from network); 19 Apr 2005 10:16:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 10:16:32 -0000
Received: (qmail 71599 invoked by uid 500); 19 Apr 2005 10:16:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71547 invoked by uid 500); 19 Apr 2005 10:16:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71522 invoked by uid 99); 19 Apr 2005 10:16:06 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from web26001.mail.ukl.yahoo.com (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 19 Apr 2005 03:16:04 -0700
Received: (qmail 76125 invoked by uid 60001); 19 Apr 2005 10:16:01 -0000
Message-ID: <20050419101601.76123.qmail@web26001.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26001.mail.ukl.yahoo.com via HTTP; Tue, 19 Apr 2005 11:16:01 BST
Date: Tue, 19 Apr 2005 11:16:01 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Wildcard searching with Highlight support ?
To: java-user@lucene.apache.org, Eric Chow <eric138@gmail.com>
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Use query.rewrite() to expand the query before calling
the highlighter. See the Junit test or javadocs for
the QueryTermExtractor class.


--- Eric Chow <eric138@gmail.com> wrote:
> Hello,
> 
> I downloaded the term highlighting in sandbox.
> But it seems not support wildcard searching.
> 
> I mean if I use wildcard query, it cannot highlight
> any terms ?
> 
> Any idea to do this or any existing example ?
> 
> Best regards,
> Eric
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 

Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 10:43:27 2005
Return-Path: <java-user-return-14150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80807 invoked from network); 19 Apr 2005 10:43:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 10:43:26 -0000
Received: (qmail 14973 invoked by uid 500); 19 Apr 2005 10:43:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14951 invoked by uid 500); 19 Apr 2005 10:43:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14938 invoked by uid 99); 19 Apr 2005 10:43:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fckdp@ok.ru designates 195.2.83.206 as permitted sender)
Received: from mail2.zmail.ru (HELO aha.ru) (195.2.83.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 03:43:14 -0700
Received: from [195.98.167.2] (account fckdp@ok.ru HELO WRKPASHA)
  by frontend2.aha.ru (CommuniGate Pro SMTP 4.2.8)
  with ESMTP id 181970415; Tue, 19 Apr 2005 14:43:10 +0400
Reply-To: <bizhan@aha.ru>
From: "Pasha Bizhan" <fckdp@ok.ru>
To: <java-user@lucene.apache.org>,
	"'Eric Chow'" <eric138@gmail.com>
Subject: RE: Wildcard searching with Highlight support ?
Date: Tue, 19 Apr 2005 14:58:25 +0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <f472e9a005041902546582207e@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Thread-Index: AcVExeFa5+seEZIxRPOvTS8Y+K/7xAACLCXw
Message-ID: <auto-000181970415@frontend2.aha.ru>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 

> From: Eric Chow [mailto:eric138@gmail.com] 
> 
> I mean if I use wildcard query, it cannot highlight any terms ?
> 
> Any idea to do this or any existing example ?

Try to rewrite query before highlighting.
 
Pasha Bizhan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 11:38:05 2005
Return-Path: <java-user-return-14151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97105 invoked from network); 19 Apr 2005 11:38:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 11:38:04 -0000
Received: (qmail 5122 invoked by uid 500); 19 Apr 2005 11:37:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5089 invoked by uid 500); 19 Apr 2005 11:37:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5070 invoked by uid 99); 19 Apr 2005 11:37:49 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of eric138@gmail.com designates 64.233.162.202 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 04:37:48 -0700
Received: by zproxy.gmail.com with SMTP id 18so2524789nzp
        for <java-user@lucene.apache.org>; Tue, 19 Apr 2005 04:37:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=YctKLxRQWOBA/bK7ffOdercPbk4YhMv67UCRvM+FuD5P7TCvJcQ/OqXBj9oe+Yvy2LkUCeAnK8oLH6c19/SgRyxDKwz6Ih4iSy++m7aHoEzBeAnXgLfx9ILSEpx5zatqtGgwg+RFNnGOw/bBsdbtH7RsrTalaPY1qoWMiWjW4w4=
Received: by 10.36.91.10 with SMTP id o10mr252880nzb;
        Tue, 19 Apr 2005 04:37:42 -0700 (PDT)
Received: by 10.36.103.4 with HTTP; Tue, 19 Apr 2005 04:37:42 -0700 (PDT)
Message-ID: <f472e9a0050419043727176db0@mail.gmail.com>
Date: Tue, 19 Apr 2005 19:37:42 +0800
From: Eric Chow <eric138@gmail.com>
Reply-To: Eric Chow <eric138@gmail.com>
To: java-user@lucene.apache.org
Subject: RTF text extractor ?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

Is there any RTF text extractor for Lucene ?

Eric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 12:28:46 2005
Return-Path: <java-user-return-14152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10075 invoked from network); 19 Apr 2005 12:28:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 12:28:46 -0000
Received: (qmail 90956 invoked by uid 500); 19 Apr 2005 12:28:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90928 invoked by uid 500); 19 Apr 2005 12:28:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90914 invoked by uid 99); 19 Apr 2005 12:28:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 05:28:33 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8154D13E211F; Tue, 19 Apr 2005 08:28:27 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 08A0C13E211E
	for <java-user@lucene.apache.org>; Tue, 19 Apr 2005 08:28:10 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <f472e9a0050419043727176db0@mail.gmail.com>
References: <f472e9a0050419043727176db0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <8c7324c56edcc88bf9c4e58495409b29@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: RTF text extractor ?
Date: Tue, 19 Apr 2005 08:28:04 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 19, 2005, at 7:37 AM, Eric Chow wrote:

> Hello,
>
> Is there any RTF text extractor for Lucene ?

You can use some Swing classes to do this.  This is from the Lucene in 
Action code (http://www.lucenebook.com/search?query=rtf)

   public Document getDocument(InputStream is)
     throws DocumentHandlerException {

     String bodyText = null;

     DefaultStyledDocument styledDoc = new DefaultStyledDocument();
     try {
       new RTFEditorKit().read(is, styledDoc, 0);
       bodyText = styledDoc.getText(0, styledDoc.getLength());
     }
     catch (IOException e) {
       throw new DocumentHandlerException(
         "Cannot extract text from a RTF document", e);
     }
     catch (BadLocationException e) {
       throw new DocumentHandlerException(
         "Cannot extract text from a RTF document", e);
     }

     if (bodyText != null) {
       Document doc = new Document();
       doc.add(Field.UnStored("body", bodyText));
       return doc;
     }
     return null;
   }


Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 12:42:12 2005
Return-Path: <java-user-return-14153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13274 invoked from network); 19 Apr 2005 12:42:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 12:42:12 -0000
Received: (qmail 17395 invoked by uid 500); 19 Apr 2005 12:41:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17366 invoked by uid 500); 19 Apr 2005 12:41:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17319 invoked by uid 99); 19 Apr 2005 12:41:55 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of petite.abeille@gmail.com designates 64.233.170.195 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 05:41:53 -0700
Received: by rproxy.gmail.com with SMTP id b11so1100273rne
        for <java-user@lucene.apache.org>; Tue, 19 Apr 2005 05:41:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=LqAbx5PKfi86xip/P1+/LdwppLIDGhNCVCJz81+RMz+ow5DS/yO93VxchZOJg9BBzMzyGesuRAGh9LMzZmbdGXiWoBjjTz7iUqnYI5TO0U2e7X2cTZ4OU+fSELt99NxugqHioGxcu0imWddlAuHR2VyNASxrRrzhrTaOQBzOI58=
Received: by 10.38.160.51 with SMTP id i51mr6268992rne;
        Tue, 19 Apr 2005 05:41:48 -0700 (PDT)
Received: from ?172.16.1.146? ([212.126.162.65])
        by mx.gmail.com with ESMTP id 59sm428871rnb.2005.04.19.05.41.48;
        Tue, 19 Apr 2005 05:41:48 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <f472e9a0050419043727176db0@mail.gmail.com>
References: <f472e9a0050419043727176db0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5a48580fdf7de40a5f7c7e0a47444168@gmail.com>
Content-Transfer-Encoding: 7bit
From: PA <petite.abeille@gmail.com>
Subject: Re: RTF text extractor ?
Date: Tue, 19 Apr 2005 14:41:34 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 19, 2005, at 13:37, Eric Chow wrote:

> Is there any RTF text extractor for Lucene ?

import javax.swing.text.Document;
import javax.swing.text.rtf.RTFEditorKit;

RTFEditorKit    aKit = new RTFEditorKit();
Document        aDocument = aKit.createDefaultDocument();

aKit.read( anInputStream, aDocument, 0 );

return aDocument.getText( 0, aDocument.getLength() );

http://dev.alt.textdrive.com/file/ZOE/Bundles/RTFTextDecoder/ 
RTFTextDecoder.java

Cheers

--
PA, Onnay Equitursay
http://alt.textdrive.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 12:47:08 2005
Return-Path: <java-user-return-14154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15302 invoked from network); 19 Apr 2005 12:47:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 12:47:08 -0000
Received: (qmail 33004 invoked by uid 500); 19 Apr 2005 12:46:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32975 invoked by uid 500); 19 Apr 2005 12:46:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32820 invoked by uid 99); 19 Apr 2005 12:46:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO anjalrelay) (194.170.154.6)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 05:46:14 -0700
Received: from anjalmail ([172.17.1.9])
          by anjalrelay (Lotus Domino Release 6.0.1)
          with ESMTP id 2005041916504012-106783 ;
          Tue, 19 Apr 2005 16:50:40 +0400 
Received: from jayakumar ([192.168.1.107])
          by anjalmail (Lotus Domino Release 6.0.1)
          with ESMTP id 2005041916412791-13453 ;
          Tue, 19 Apr 2005 16:41:27 +0400 
Reply-To: <jayakumar.v@uaeexchange.com>
From: "Jayakumar.V" <jayakumar.v@uaeexchange.com>
To: <java-user@lucene.apache.org>
Subject: FW: Indexing aborts in mid-process
Date: Tue, 19 Apr 2005 16:44:11 +0400
Organization: UAE Xchange Center
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Thread-Index: AcVE2fLWDaNhiZa/RNyGxDjAhSvVkQAACjIwAADV3IA=
X-MIMETrack: Itemize by SMTP Server on MAIL/UAE Exchange(Release 6.0.1|February 07, 2003) at
 04/19/2005 04:41:27 PM,
	Serialize by Router on MAIL/UAE Exchange(Release 6.0.1|February 07, 2003) at
 04/19/2005 04:41:29 PM,
	Serialize complete at 04/19/2005 04:41:29 PM,
	Itemize by SMTP Server on RELAY/UAE Exchange(Release 6.0.1|February 07, 2003) at
 04/19/2005 04:50:40 PM,
	Serialize by Router on RELAY/UAE Exchange(Release 6.0.1|February 07, 2003) at
 04/19/2005 04:50:53 PM,
	Serialize complete at 04/19/2005 04:50:53 PM
Message-ID: <OF490EA5B4.A7CACF35-ON44256FE8.0045B6DD@xpressmoney.com>
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0192_01C544FF.0370CAC0"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0192_01C544FF.0370CAC0
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset="us-ascii"

 

Hi,

I need some clarification on the indexing process.

 

A process is initiated for indexing 1000 documents. If for some reason, the
process fails mid-way during the indexing activity, say while indexing the
501st document, what is the status of the index files? Does it commit after
each document is indexed or does it happen when the close() is invoked on
the writer object? Will the index files get corrupted?

 

If the commit happens after each document is added, then I need to keep
track of the documents that have been indexed so that I don't re-index a
document which has already been indexed. 

 

Hope I was able to get thru' to you with my doubt & hoping to get a
clarification.

 

TIA

Jayakumar.V

 


------=_NextPart_000_0192_01C544FF.0370CAC0--


From java-user-return-14155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 18:10:55 2005
Return-Path: <java-user-return-14155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46740 invoked from network); 19 Apr 2005 18:10:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 18:10:55 -0000
Received: (qmail 20222 invoked by uid 500); 19 Apr 2005 18:10:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20197 invoked by uid 500); 19 Apr 2005 18:10:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20179 invoked by uid 99); 19 Apr 2005 18:10:45 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 66-238-9-116.dia.xo.com (HELO exch01.allegro.med) (66.238.9.116)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 11:10:43 -0700
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Lucene bulk indexing
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.181
Date: Tue, 19 Apr 2005 11:10:41 -0700
Message-ID: <B5ADCC4EA669BF4697F6AF63FF328674EC76A1@exch01.allegro.med>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene bulk indexing
thread-index: AcVE3TDRECka/KxLQOaroMCv/lR6TgALKeHQ
From: "Mufaddal Khumri" <MKhumri@allegromedical.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am sure this question must be raised before and maybe it has been even
answered. I would be grateful, if someone could point me in the right
direction or give their thoughts on this topic.

The problem:

I have approximately over 20000 products that I need to index. At the
moment I get X number of products at a time and index them. This process
takes about 26 minutes (Am indexing the database id, product name,
product description).

I was thinking of ways to make this indexing faster. For this I was
thinking about writing a threaded module that would index X number of
products simultaneously. For instance I could spawn (Number of
products/X) number of threads and do the indexing. I am guessing this
would be faster but by what factor would this be faster? (I understand
the writes to the index are synchronized by lucene).

Is there any other approach by which I could speed up the indexing?
Thoughts? Suggestions?

Thanks,
Mufaddal.


-------------------------------------------------------------------------=
-----------------
This email and any files transmitted with it are confidential=20
and intended solely for the use of the individual or entity=20
to whom they are addressed. If you have received this=20
email in error please notify the system manager. Please
note that any views or opinions presented in this email=20
are solely those of the author and do not necessarily
represent those of the company. Finally, the recipient
should check this email and any attachments for the=20
presence of viruses. The company accepts no liability for
any damage caused by any virus transmitted by this email.
Consult your physician prior to the use of any medical
supplies or product.
-------------------------------------------------------------------------=
-----------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 19:02:57 2005
Return-Path: <java-user-return-14156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61682 invoked from network); 19 Apr 2005 19:02:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 19:02:57 -0000
Received: (qmail 24725 invoked by uid 500); 19 Apr 2005 19:02:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24711 invoked by uid 500); 19 Apr 2005 19:02:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 67372 invoked by uid 99); 19 Apr 2005 18:34:24 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Content-class: urn:content-classes:message
Subject: RE: Lucene bulk indexing
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Tue, 19 Apr 2005 14:34:25 -0400
Message-ID: <6C1FF371E2319F45BABA49F9BA1BD039036F0B@mail.lou.emergint.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene bulk indexing
Thread-Index: AcVE3TDRECka/KxLQOaroMCv/lR6TgALKeHQAADMEEA=
From: "Kevin L. Cobb" <cobbk@emergint.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think your bottleneck is most likely the DB hit. I assume by 20000
products you mean 20000 distinct entries into the Lucene Index, i.e.
20000 rows in the DB to select from.=20

I index about 1.5 million rows from a SQL Server 2000 database with
several fields for each entry and it finishes in about twenty minutes so
you should be able to index 20000 rows in a few seconds.=20

Make sure your database table(s) are indexed appropriately according to
your select statements. Indexing correctly will be the biggest
performance improvement you will see.=20

Best of luck.=20

KLCobb

-----Original Message-----
From: Mufaddal Khumri [mailto:MKhumri@allegromedical.com]=20
Sent: Tuesday, April 19, 2005 2:11 PM
To: java-user@lucene.apache.org
Subject: Lucene bulk indexing

Hi,

I am sure this question must be raised before and maybe it has been even
answered. I would be grateful, if someone could point me in the right
direction or give their thoughts on this topic.

The problem:

I have approximately over 20000 products that I need to index. At the
moment I get X number of products at a time and index them. This process
takes about 26 minutes (Am indexing the database id, product name,
product description).

I was thinking of ways to make this indexing faster. For this I was
thinking about writing a threaded module that would index X number of
products simultaneously. For instance I could spawn (Number of
products/X) number of threads and do the indexing. I am guessing this
would be faster but by what factor would this be faster? (I understand
the writes to the index are synchronized by lucene).

Is there any other approach by which I could speed up the indexing?
Thoughts? Suggestions?

Thanks,
Mufaddal.


------------------------------------------------------------------------
------------------
This email and any files transmitted with it are confidential=20
and intended solely for the use of the individual or entity=20
to whom they are addressed. If you have received this=20
email in error please notify the system manager. Please
note that any views or opinions presented in this email=20
are solely those of the author and do not necessarily
represent those of the company. Finally, the recipient
should check this email and any attachments for the=20
presence of viruses. The company accepts no liability for
any damage caused by any virus transmitted by this email.
Consult your physician prior to the use of any medical
supplies or product.
------------------------------------------------------------------------
------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 19:16:30 2005
Return-Path: <java-user-return-14157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73675 invoked from network); 19 Apr 2005 19:16:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 19:16:30 -0000
Received: (qmail 44531 invoked by uid 500); 19 Apr 2005 19:16:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44506 invoked by uid 500); 19 Apr 2005 19:16:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44493 invoked by uid 99); 19 Apr 2005 19:16:20 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 1-1-6-15a.sbi.sth.bostream.se (HELO farfarello.dhlz.com) (213.238.209.180)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 12:16:18 -0700
Received: from blackmesa.dhlz.com ([192.168.0.2] ident=daniel)
	by farfarello.dhlz.com with esmtp (Exim 4.30)
	id 1DNy0M-0001k3-EY
	for java-user@lucene.apache.org; Tue, 19 Apr 2005 21:03:26 +0200
Message-ID: <4265751C.5080309@dhlz.com>
Date: Tue, 19 Apr 2005 23:16:12 +0200
From: Daniel Herlitz <daniel@dhlz.com>
User-Agent: Mozilla Thunderbird 0.8 (X11/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene bulk indexing
References: <6C1FF371E2319F45BABA49F9BA1BD039036F0B@mail.lou.emergint.com>
In-Reply-To: <6C1FF371E2319F45BABA49F9BA1BD039036F0B@mail.lou.emergint.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Agree. We run an index with about 2.5 million documents and around 30 
fields. The indexing itself of 20000 items should only take a few 
seconds on a reasonably fast machine.

/D

Kevin L. Cobb wrote:

>I think your bottleneck is most likely the DB hit. I assume by 20000
>products you mean 20000 distinct entries into the Lucene Index, i.e.
>20000 rows in the DB to select from. 
>
>I index about 1.5 million rows from a SQL Server 2000 database with
>several fields for each entry and it finishes in about twenty minutes so
>you should be able to index 20000 rows in a few seconds. 
>
>Make sure your database table(s) are indexed appropriately according to
>your select statements. Indexing correctly will be the biggest
>performance improvement you will see. 
>
>Best of luck. 
>
>KLCobb
>
>-----Original Message-----
>From: Mufaddal Khumri [mailto:MKhumri@allegromedical.com] 
>Sent: Tuesday, April 19, 2005 2:11 PM
>To: java-user@lucene.apache.org
>Subject: Lucene bulk indexing
>
>Hi,
>
>I am sure this question must be raised before and maybe it has been even
>answered. I would be grateful, if someone could point me in the right
>direction or give their thoughts on this topic.
>
>The problem:
>
>I have approximately over 20000 products that I need to index. At the
>moment I get X number of products at a time and index them. This process
>takes about 26 minutes (Am indexing the database id, product name,
>product description).
>
>I was thinking of ways to make this indexing faster. For this I was
>thinking about writing a threaded module that would index X number of
>products simultaneously. For instance I could spawn (Number of
>products/X) number of threads and do the indexing. I am guessing this
>would be faster but by what factor would this be faster? (I understand
>the writes to the index are synchronized by lucene).
>
>Is there any other approach by which I could speed up the indexing?
>Thoughts? Suggestions?
>
>Thanks,
>Mufaddal.
>
>
>------------------------------------------------------------------------
>------------------
>This email and any files transmitted with it are confidential 
>and intended solely for the use of the individual or entity 
>to whom they are addressed. If you have received this 
>email in error please notify the system manager. Please
>note that any views or opinions presented in this email 
>are solely those of the author and do not necessarily
>represent those of the company. Finally, the recipient
>should check this email and any attachments for the 
>presence of viruses. The company accepts no liability for
>any damage caused by any virus transmitted by this email.
>Consult your physician prior to the use of any medical
>supplies or product.
>------------------------------------------------------------------------
>------------------
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 19:22:39 2005
Return-Path: <java-user-return-14158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80761 invoked from network); 19 Apr 2005 19:22:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 19:22:39 -0000
Received: (qmail 53024 invoked by uid 500); 19 Apr 2005 19:22:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52990 invoked by uid 500); 19 Apr 2005 19:22:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52977 invoked by uid 99); 19 Apr 2005 19:22:20 -0000
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD,FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web32115.mail.mud.yahoo.com (HELO web32115.mail.mud.yahoo.com) (68.142.207.129)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 19 Apr 2005 12:22:19 -0700
Received: (qmail 46251 invoked by uid 60001); 19 Apr 2005 19:22:16 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=iDqFe3b8nY5HeK4w0ap4MZPuOGD9e5/fVn3C1SS6+Uibt5r6pOMf+1Z591xAKIJtQgJq0uQbUpF+8jKFFa0WAGej31iRUsLoN0sMsyLIX41DG03SbkxAvTQ6KnbI9Z6DsJLmrDqWzWkBhzpdlgs2lR73xP9HXXB4o7WlJa4hrds=  ;
Message-ID: <20050419192216.46249.qmail@web32115.mail.mud.yahoo.com>
Received: from [206.13.63.69] by web32115.mail.mud.yahoo.com via HTTP; Tue, 19 Apr 2005 12:22:16 PDT
Date: Tue, 19 Apr 2005 12:22:16 -0700 (PDT)
From: Aalap Parikh <aloo77@yahoo.com>
Subject: WildCard search replacement
To: java-user@lucene.apache.org
Cc: vbychkoviak@i-hypergrid.com
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Volodymyr,

About the trick you described about wildcard search
replacement, you mentioned:

> So I found following workaround. I index this field
as > sequence of terms, each of containing single
digit from > needed value. (For example I have
123214213 value
> that needs to be indexed. Then it will be indexed as
> sequence of 1,2,3,2,1,4,2,1,3
terms.)
> This can be done by custom Analyzer class.

When you index "123214213" as sequence of individual
terms, what is the name of the the fields you use for
each of the individual terms?

Also, can you post your custom analyzer class?

Thanks,
Aalap.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 19:55:49 2005
Return-Path: <java-user-return-14159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89902 invoked from network); 19 Apr 2005 19:55:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 19:55:49 -0000
Received: (qmail 7209 invoked by uid 500); 19 Apr 2005 19:55:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7167 invoked by uid 500); 19 Apr 2005 19:55:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7150 invoked by uid 99); 19 Apr 2005 19:55:43 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 12:55:42 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 49954E47F3
	for <java-user@lucene.apache.org>; Tue, 19 Apr 2005 21:55:39 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 25098E47F0
	for <java-user@lucene.apache.org>; Tue, 19 Apr 2005 21:55:39 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
Content-Transfer-Encoding: 7bit
Message-Id: <4eff27aa24b467385fd37f17e300a286@activemath.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: java-user@lucene.apache.org
From: Paul Libbrecht <paul@activemath.org>
Subject: Passing XML objects to the analyzer ?
Date: Tue, 19 Apr 2005 21:55:36 +0200
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

I am working on an index to search XML data in a fixed format that I 
master well...
The idea is that the XML content (which I have as JDOM object) actually 
carries the semantic which would be best converted directly into tokens 
by something like an analyzer. However, adding fields is done not using 
the result of the analysis (or a stream thereof) but using readers or 
strings.

I have two choices and would like to know what's the best:
- make the text passed to the analyzer a simple "instruction" which 
will fetch the XML objects and do the analysis there
- make a pre-analysis step which converts it into tokens of text which 
then my analyzer catches again.
I'd be more inclined for the first solution but I fear there's a catch.

Is there one ?

paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 20:18:54 2005
Return-Path: <java-user-return-14160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96763 invoked from network); 19 Apr 2005 20:18:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 20:18:54 -0000
Received: (qmail 54595 invoked by uid 500); 19 Apr 2005 20:18:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54576 invoked by uid 500); 19 Apr 2005 20:18:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54562 invoked by uid 99); 19 Apr 2005 20:18:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from cmailm1.svr.pol.co.uk (HELO cmailm1.svr.pol.co.uk) (195.92.193.18)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 13:18:45 -0700
Received: from user-3179.l4.c3.dsl.pol.co.uk ([81.79.108.107] helo=[192.168.1.2])
	by cmailm1.svr.pol.co.uk with esmtp (Exim 4.41)
	id 1DNzBC-0006s7-JS
	for java-user@lucene.apache.org; Tue, 19 Apr 2005 21:18:42 +0100
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Best way to purposely corrupt an index?
Date: Tue, 19 Apr 2005 21:22:08 +0000
User-Agent: KMail/1.8
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504192122.08102.mail@andy-roberts.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Seems like an odd request I'm sure. However, my application relies an index, 
and should the index become unusable for some unfortunate reason, I'd like my 
app to gracefully cope with this situation.

Firstly, I need to know how to detect a broken index. Opening an IndexReader 
can potentially throw an IOException if a problem occurs, but presumably this 
will be thrown for other reasons, not just an unreadable index. Would the 
IndexReader.indexExists() be better?

Secondly, to test how my code responds to broken indexes, I'd like to 
purposely break an index. Any suggestions, or will removing any file from the 
directory be sufficient?

Many thanks,
Andy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 20:25:53 2005
Return-Path: <java-user-return-14161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98726 invoked from network); 19 Apr 2005 20:25:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 20:25:53 -0000
Received: (qmail 69745 invoked by uid 500); 19 Apr 2005 20:25:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69720 invoked by uid 500); 19 Apr 2005 20:25:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69707 invoked by uid 99); 19 Apr 2005 20:25:43 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from 87.52.220-216.q9.net (HELO mail.futurebrandexp.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 13:25:42 -0700
Received: from p001002 ([216.220.52.5]) by mail.futurebrandexp.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Tue, 19 Apr 2005 16:29:14 -0400
Message-ID: <032d01c5451e$73ba93f0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@futurebrand.com>
To: <java-user@lucene.apache.org>
References: <200504192122.08102.mail@andy-roberts.net>
Subject: Re: Best way to purposely corrupt an index?
Date: Tue, 19 Apr 2005 16:29:14 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 19 Apr 2005 20:29:14.0517 (UTC) FILETIME=[73DDAC50:01C5451E]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The only time I have seen corrupted indexes is when the java process is
killed during the indexing process.

If you shutdown tomcat (or what ever you are running for java) during the
indexing process you will end up with a corrupted index.

----- Original Message ----- 
From: "Andy Roberts" <mail@andy-roberts.net>
To: <java-user@lucene.apache.org>
Sent: Tuesday, April 19, 2005 5:22 PM
Subject: Best way to purposely corrupt an index?


> Hi,
>
> Seems like an odd request I'm sure. However, my application relies an
index,
> and should the index become unusable for some unfortunate reason, I'd like
my
> app to gracefully cope with this situation.
>
> Firstly, I need to know how to detect a broken index. Opening an
IndexReader
> can potentially throw an IOException if a problem occurs, but presumably
this
> will be thrown for other reasons, not just an unreadable index. Would the
> IndexReader.indexExists() be better?
>
> Secondly, to test how my code responds to broken indexes, I'd like to
> purposely break an index. Any suggestions, or will removing any file from
the
> directory be sufficient?
>
> Many thanks,
> Andy
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 20:38:11 2005
Return-Path: <java-user-return-14162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2086 invoked from network); 19 Apr 2005 20:38:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 20:38:11 -0000
Received: (qmail 95282 invoked by uid 500); 19 Apr 2005 20:38:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95256 invoked by uid 500); 19 Apr 2005 20:38:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95241 invoked by uid 99); 19 Apr 2005 20:38:02 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 1-1-6-15a.sbi.sth.bostream.se (HELO farfarello.dhlz.com) (213.238.209.180)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 13:38:01 -0700
Received: from blackmesa.dhlz.com ([192.168.0.2] ident=daniel)
	by farfarello.dhlz.com with esmtp (Exim 4.30)
	id 1DNzHU-0001kd-C5
	for java-user@lucene.apache.org; Tue, 19 Apr 2005 22:25:12 +0200
Message-ID: <42658846.4010904@dhlz.com>
Date: Wed, 20 Apr 2005 00:37:58 +0200
From: Daniel Herlitz <daniel@dhlz.com>
User-Agent: Mozilla Thunderbird 0.8 (X11/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Best way to purposely corrupt an index?
References: <200504192122.08102.mail@andy-roberts.net>
In-Reply-To: <200504192122.08102.mail@andy-roberts.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I would suggest you simply do not create unusable indexes. :-)  Handle 
catch/throw/finally correctly and it should not present any problems.

Assume one app builds the index, another uses it:

try: Build the index in a separate catalogue.
finally: remove ('rm') production index and move ('mv') newly built 
index to its place. Notify using app that it should reopen its IndexReader.

This relies on UNIX file handling semantics. (Can't say a word about 
Windows). Don't know if this applies at all to our situation, but it 
works for us.

/D

Andy Roberts wrote:

>Hi,
>
>Seems like an odd request I'm sure. However, my application relies an index, 
>and should the index become unusable for some unfortunate reason, I'd like my 
>app to gracefully cope with this situation.
>
>Firstly, I need to know how to detect a broken index. Opening an IndexReader 
>can potentially throw an IOException if a problem occurs, but presumably this 
>will be thrown for other reasons, not just an unreadable index. Would the 
>IndexReader.indexExists() be better?
>
>Secondly, to test how my code responds to broken indexes, I'd like to 
>purposely break an index. Any suggestions, or will removing any file from the 
>directory be sufficient?
>
>Many thanks,
>Andy
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 20:50:04 2005
Return-Path: <java-user-return-14163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7164 invoked from network); 19 Apr 2005 20:50:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 20:50:03 -0000
Received: (qmail 28722 invoked by uid 500); 19 Apr 2005 20:49:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28679 invoked by uid 500); 19 Apr 2005 20:49:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28657 invoked by uid 99); 19 Apr 2005 20:49:54 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 1-1-6-15a.sbi.sth.bostream.se (HELO farfarello.dhlz.com) (213.238.209.180)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 13:49:54 -0700
Received: from blackmesa.dhlz.com ([192.168.0.2] ident=daniel)
	by farfarello.dhlz.com with esmtp (Exim 4.30)
	id 1DNzSy-0001kl-Qc
	for java-user@lucene.apache.org; Tue, 19 Apr 2005 22:37:04 +0200
Message-ID: <42658B0E.4080905@dhlz.com>
Date: Wed, 20 Apr 2005 00:49:50 +0200
From: Daniel Herlitz <daniel@dhlz.com>
User-Agent: Mozilla Thunderbird 0.8 (X11/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Best way to purposely corrupt an index?
References: <200504192122.08102.mail@andy-roberts.net> <42658846.4010904@dhlz.com>
In-Reply-To: <42658846.4010904@dhlz.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hm well, I unconsciously extrapolated natural language into java syntax. 
Just in case, should be:

try: Build the index in a separate catalogue.
if all ok: remove ('rm') production index and move ('mv') newly built 
index to its place. Notify using app that it should reopen its IndexReader.

/D




I would suggest you simply do not create unusable indexes. :-)  Handle 
catch/throw/finally correctly and it should not present any problems.

Assume one app builds the index, another uses it:

try: Build the index in a separate catalogue.
finally: remove ('rm') production index and move ('mv') newly built 
index to its place. Notify using app that it should reopen its IndexReader.

This relies on UNIX file handling semantics. (Can't say a word about 
Windows). Don't know if this applies at all to our situation, but it 
works for us.


Daniel Herlitz wrote:

> I would suggest you simply do not create unusable indexes. :-)  Handle 
> catch/throw/finally correctly and it should not present any problems.
>
> Assume one app builds the index, another uses it:
>
> try: Build the index in a separate catalogue.
> finally: remove ('rm') production index and move ('mv') newly built 
> index to its place. Notify using app that it should reopen its 
> IndexReader.
>
> This relies on UNIX file handling semantics. (Can't say a word about 
> Windows). Don't know if this applies at all to our situation, but it 
> works for us.
>
> /D
>
> Andy Roberts wrote:
>
>> Hi,
>>
>> Seems like an odd request I'm sure. However, my application relies an 
>> index, and should the index become unusable for some unfortunate 
>> reason, I'd like my app to gracefully cope with this situation.
>>
>> Firstly, I need to know how to detect a broken index. Opening an 
>> IndexReader can potentially throw an IOException if a problem occurs, 
>> but presumably this will be thrown for other reasons, not just an 
>> unreadable index. Would the IndexReader.indexExists() be better?
>>
>> Secondly, to test how my code responds to broken indexes, I'd like to 
>> purposely break an index. Any suggestions, or will removing any file 
>> from the directory be sufficient?
>>
>> Many thanks,
>> Andy
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>  
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 20:51:57 2005
Return-Path: <java-user-return-14164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7981 invoked from network); 19 Apr 2005 20:51:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 20:51:57 -0000
Received: (qmail 32383 invoked by uid 500); 19 Apr 2005 20:51:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32356 invoked by uid 500); 19 Apr 2005 20:51:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32324 invoked by uid 99); 19 Apr 2005 20:51:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 13:51:04 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3F9C813E211F; Tue, 19 Apr 2005 16:50:56 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 88C5D13E211E
	for <java-user@lucene.apache.org>; Tue, 19 Apr 2005 16:50:36 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <4eff27aa24b467385fd37f17e300a286@activemath.org>
References: <4eff27aa24b467385fd37f17e300a286@activemath.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <e57d201eee072646b5abd3bed35dc79d@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Passing XML objects to the analyzer ?
Date: Tue, 19 Apr 2005 16:50:34 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 19, 2005, at 3:55 PM, Paul Libbrecht wrote:

>
> Hi,
>
> I am working on an index to search XML data in a fixed format that I 
> master well...
> The idea is that the XML content (which I have as JDOM object) 
> actually carries the semantic which would be best converted directly 
> into tokens by something like an analyzer. However, adding fields is 
> done not using the result of the analysis (or a stream thereof) but 
> using readers or strings.
>
> I have two choices and would like to know what's the best:
> - make the text passed to the analyzer a simple "instruction" which 
> will fetch the XML objects and do the analysis there
> - make a pre-analysis step which converts it into tokens of text which 
> then my analyzer catches again.
> I'd be more inclined for the first solution but I fear there's a catch.
>
> Is there one ?

The only catch that I know if is that an Analyzer is invoked on a 
per-field basis.  I can't tell exactly what you have in mind, but a 
Lucene Analyzer cannot split data into separate fields itself - it has 
to have been split prior.

I'm indexing a lot of XML myself, with JDOM in the middle, and using 
XPath to extract data per field before building the Document.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 21:07:31 2005
Return-Path: <java-user-return-14165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13735 invoked from network); 19 Apr 2005 21:07:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 21:07:30 -0000
Received: (qmail 68276 invoked by uid 500); 19 Apr 2005 21:07:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68155 invoked by uid 500); 19 Apr 2005 21:07:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68142 invoked by uid 99); 19 Apr 2005 21:07:21 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 66-238-9-116.dia.xo.com (HELO exch01.allegro.med) (66.238.9.116)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 14:07:19 -0700
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene bulk indexing
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.181
Date: Tue, 19 Apr 2005 14:07:17 -0700
Message-ID: <B5ADCC4EA669BF4697F6AF63FF328674F6E360@exch01.allegro.med>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene bulk indexing
thread-index: AcVFFEec/+sxcaoHRGOvCem5AU6kaQADe1cw
From: "Mufaddal Khumri" <MKhumri@allegromedical.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

The 20000 products I mentioned are 20000 rows. I get the products in
bulk by using a limit clause.=20

I am using hibernate with MySQL server on a 2.8GHz, 1.00GB Ram machine.=20

I am baffled that 1.2 or 1.5 million records are being indexed in 20
minutes compared to the 20000 records I am indexing in 22 minutes. One
possibility is that the hardware you guys are using is much better. I do
not know what else can cause the indexing to be so slow. Where am I
going wrong with this?

This is the gist of what I am doing in my indexer for all products:

Product prod =3D list.next();
Document doc =3D new Document();
String name =3D prod.getName();
Description desc
=3D(Description)prod.getDescriptions().get(Description.LONG);
String longDesc =3D null, shortDesc =3D null, content =3D null;
		=09
if(desc !=3D null)=20
  longDesc =3D desc.getText();
else
  longDesc =3D "";
		=09
desc =3D (Description)prod.getDescriptions().get(Description.SHORT);
if(desc !=3D null)
  shortDesc =3D desc.getText();
else
  shortDesc =3D "";
		=09
content =3D name + " " + shortDesc + " " + longDesc + " ";
=09
doc.add(Field.UnIndexed("id", prod.getId() + ""));
doc.add(Field.Keyword("entity","product"));
doc.add(Field.Text("name", name));
doc.add(Field.Text("shortDescription", (shortDesc.equals("") ? "" :
shortDesc)));
doc.add(Field.Text("longDescription", (longDesc.equals("") ? "" :
longDesc)));
doc.add(Field.Text("content", content));
=09
try
{
	writer.addDocument(doc);
}
catch (IOException e)
{
	log.error("Error adding document: " + e.getMessage());
}

Where could I be slowing down the indexing process? Is it because I am
indexing the longDescription as a Field.Text? (longDescription could
have a fair amount of text averaging about 4000 words).

Any ideas?

Thanks,
Mufaddal.

-----Original Message-----
From: Daniel Herlitz [mailto:daniel@dhlz.com]=20
Sent: Tuesday, April 19, 2005 2:16 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene bulk indexing

Agree. We run an index with about 2.5 million documents and around 30=20
fields. The indexing itself of 20000 items should only take a few=20
seconds on a reasonably fast machine.

/D

Kevin L. Cobb wrote:

>I think your bottleneck is most likely the DB hit. I assume by 20000
>products you mean 20000 distinct entries into the Lucene Index, i.e.
>20000 rows in the DB to select from.=20
>
>I index about 1.5 million rows from a SQL Server 2000 database with
>several fields for each entry and it finishes in about twenty minutes
so
>you should be able to index 20000 rows in a few seconds.=20
>
>Make sure your database table(s) are indexed appropriately according to
>your select statements. Indexing correctly will be the biggest
>performance improvement you will see.=20
>
>Best of luck.=20
>
>KLCobb
>
>-----Original Message-----
>From: Mufaddal Khumri [mailto:MKhumri@allegromedical.com]=20
>Sent: Tuesday, April 19, 2005 2:11 PM
>To: java-user@lucene.apache.org
>Subject: Lucene bulk indexing
>
>Hi,
>
>I am sure this question must be raised before and maybe it has been
even
>answered. I would be grateful, if someone could point me in the right
>direction or give their thoughts on this topic.
>
>The problem:
>
>I have approximately over 20000 products that I need to index. At the
>moment I get X number of products at a time and index them. This
process
>takes about 26 minutes (Am indexing the database id, product name,
>product description).
>
>I was thinking of ways to make this indexing faster. For this I was
>thinking about writing a threaded module that would index X number of
>products simultaneously. For instance I could spawn (Number of
>products/X) number of threads and do the indexing. I am guessing this
>would be faster but by what factor would this be faster? (I understand
>the writes to the index are synchronized by lucene).
>
>Is there any other approach by which I could speed up the indexing?
>Thoughts? Suggestions?
>
>Thanks,
>Mufaddal.
>
>
>-----------------------------------------------------------------------
-
>------------------
>This email and any files transmitted with it are confidential=20
>and intended solely for the use of the individual or entity=20
>to whom they are addressed. If you have received this=20
>email in error please notify the system manager. Please
>note that any views or opinions presented in this email=20
>are solely those of the author and do not necessarily
>represent those of the company. Finally, the recipient
>should check this email and any attachments for the=20
>presence of viruses. The company accepts no liability for
>any damage caused by any virus transmitted by this email.
>Consult your physician prior to the use of any medical
>supplies or product.
>-----------------------------------------------------------------------
-
>------------------
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
> =20
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


-------------------------------------------------------------------------=
-----------------
This email and any files transmitted with it are confidential=20
and intended solely for the use of the individual or entity=20
to whom they are addressed. If you have received this=20
email in error please notify the system manager. Please
note that any views or opinions presented in this email=20
are solely those of the author and do not necessarily
represent those of the company. Finally, the recipient
should check this email and any attachments for the=20
presence of viruses. The company accepts no liability for
any damage caused by any virus transmitted by this email.
Consult your physician prior to the use of any medical
supplies or product.
-------------------------------------------------------------------------=
-----------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 21:11:12 2005
Return-Path: <java-user-return-14166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14574 invoked from network); 19 Apr 2005 21:11:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 21:11:12 -0000
Received: (qmail 75682 invoked by uid 500); 19 Apr 2005 21:11:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75645 invoked by uid 500); 19 Apr 2005 21:11:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75631 invoked by uid 500); 19 Apr 2005 21:11:05 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 75626 invoked by uid 99); 19 Apr 2005 21:11:04 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web51607.mail.yahoo.com (HELO web51607.mail.yahoo.com) (206.190.38.212)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 19 Apr 2005 14:11:02 -0700
Received: (qmail 43213 invoked by uid 60001); 19 Apr 2005 21:11:00 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=eyYLp9S9WXajpirZUjOJc43bubnR0woFDmvNreqP2kOpovWqC9WhXFxu6Zrfe+DMUeFrYu6uDcZVnXbYCUAMo3yMzuxztzBEc56/qIjnyZj0rwaIpeHQEw7yle5nLuyCkLdgzern+/qD3+j3hl1qmzFGKGi6D/FhyDx7inIML4U=  ;
Message-ID: <20050419211100.43210.qmail@web51607.mail.yahoo.com>
Received: from [65.211.127.139] by web51607.mail.yahoo.com via HTTP; Tue, 19 Apr 2005 14:11:00 PDT
Date: Tue, 19 Apr 2005 14:11:00 -0700 (PDT)
From: Tomcat Programmer <tcprogrammer@yahoo.com>
Subject: numDocs method of IndexReader
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Everyone, 

I need to be able to iterate through the entire set of
documents within the index to perform some auditing. I
originally tried the following code snip:

int ndoc = idxReader.numDocs();
for (int i=0; i< ndoc; i++) {
    Document doc = idxReader.document(i);
    . 
    . 
    .
}

This is working with my initial project here, where
the number of Documents are small. I am concerned when
the indexes grow larger. Since this method returns an
int, does this mean that I am limited by the size of
an integer to the number of documents I can have? 

Also, I wanted to search the archives of this list to
see if anyone had previously answered this question,
but I could not find a site that archives this list.
Can any one point me to such a site? 

Many thanks in advance, 

Tom C. 








		
__________________________________ 
Do you Yahoo!? 
Plan great trips with Yahoo! Travel: Now over 17,000 guides!
http://travel.yahoo.com/p-travelguide

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 21:22:18 2005
Return-Path: <java-user-return-14167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17192 invoked from network); 19 Apr 2005 21:22:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 21:22:18 -0000
Received: (qmail 2789 invoked by uid 500); 19 Apr 2005 21:22:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2758 invoked by uid 500); 19 Apr 2005 21:22:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2741 invoked by uid 99); 19 Apr 2005 21:22:09 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from shared4.hardhathosting.com (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 14:22:07 -0700
Received: from [192.168.101.96] ([213.80.34.34])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j3JLML608679
	for <java-user@lucene.apache.org>; Tue, 19 Apr 2005 16:22:21 -0500
Message-ID: <4265767B.5090307@getopt.org>
Date: Tue, 19 Apr 2005 23:22:03 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Best way to purposely corrupt an index?
References: <200504192122.08102.mail@andy-roberts.net> <42658846.4010904@dhlz.com>
In-Reply-To: <42658846.4010904@dhlz.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Herlitz wrote:
> I would suggest you simply do not create unusable indexes. :-)  Handle 
> catch/throw/finally correctly and it should not present any problems.

In some use scenarios it's not that simple... Anyway, back to the 
original question: indexExists() just checks for the presence of the 
"segments" file, so it says nothing about the index consistency. The 
best way to make sure the index is valid is to open it, and catch an 
IOException.

To purposefuly break the index you can do several things:

* delete the "segments" file itself (this will trash the whole index)

* delete one of the segments from the index (should generate exception 
when opening)

* write a bunch of zeros in the middle of a segment file. This should 
result in an exception - but I'm not sure when; whether during open(), 
or during actual reading of affected data. You could then do the 
following: loop through all terms in the index (see IndexReader API), 
and for each term get its TermPositions. This will have to read the 
complete index. Looping through all documents, and reading each 
document, doesn't guarantee that - unstored fields are not loaded into 
documents.

-- 
Best regards,
Andrzej Bialecki
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 21:39:32 2005
Return-Path: <java-user-return-14168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20444 invoked from network); 19 Apr 2005 21:39:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 21:39:32 -0000
Received: (qmail 27843 invoked by uid 500); 19 Apr 2005 21:39:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27785 invoked by uid 500); 19 Apr 2005 21:39:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27727 invoked by uid 99); 19 Apr 2005 21:39:19 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.197 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.197)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 14:39:17 -0700
Received: by rproxy.gmail.com with SMTP id i8so16849rne
        for <java-user@lucene.apache.org>; Tue, 19 Apr 2005 14:39:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=KHqNuqAaWb1xqept1Jc0PwnT4Xc6cycxULhzpE70gxptqUPb7k02fhYoGXgb13MCEgNQ5sMfTcbwpjALuNrK1WPWMZxxz11RJz8hnx3OaIJmw0Ta9dyXOwlBViu6jQQNp2/bQ7j4rVz5zBRUQh3ieyG2j4nmh2D0c5XYwNRB7RA=
Received: by 10.38.92.65 with SMTP id p65mr93493rnb;
        Tue, 19 Apr 2005 14:39:15 -0700 (PDT)
Received: by 10.38.104.11 with HTTP; Tue, 19 Apr 2005 14:39:15 -0700 (PDT)
Message-ID: <88c6a672050419143937ff7064@mail.gmail.com>
Date: Tue, 19 Apr 2005 16:39:15 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene bulk indexing
In-Reply-To: <B5ADCC4EA669BF4697F6AF63FF328674F6E360@exch01.allegro.med>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <B5ADCC4EA669BF4697F6AF63FF328674F6E360@exch01.allegro.med>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Muffadal,

First, you should add some timing code to determine whether your
database is slow, or your indexing (I think tokenization occurs in the
call to writer.addDocument()).  Assuming your database query is the
slowdown, read on...

Depending on the details of your database (which fields are indexed,
etc), your query using LIMIT x,y may be slow.  You might try this:

At the start of your index process, issue a one-time query to your
database that returns a list of ALL primary keys that you want to
index.  Save this list of primary keys in memory.

Then take your records in "chunks" of 1000 or whatever, using a query
like "select * from mytable where primarykey =3D 1 or primarykey =3D 2 or
... or primarykey =3D 1000".  A primary key lookup like this should be
fast.  Also I got a small performance increase by replacing the "OR"
query above with something like "select * from mytable where
primarykey IN (1,2,3,...,1000)" (with MySQL 4.1).


On 4/19/05, Mufaddal Khumri <MKhumri@allegromedical.com> wrote:
> Hi,
>=20
> The 20000 products I mentioned are 20000 rows. I get the products in
> bulk by using a limit clause.
>=20
> I am using hibernate with MySQL server on a 2.8GHz, 1.00GB Ram machine.
>=20
> I am baffled that 1.2 or 1.5 million records are being indexed in 20
> minutes compared to the 20000 records I am indexing in 22 minutes. One
> possibility is that the hardware you guys are using is much better. I do
> not know what else can cause the indexing to be so slow. Where am I
> going wrong with this?
>=20
> This is the gist of what I am doing in my indexer for all products:
>=20
> Product prod =3D list.next();
> Document doc =3D new Document();
> String name =3D prod.getName();
> Description desc
> =3D(Description)prod.getDescriptions().get(Description.LONG);
> String longDesc =3D null, shortDesc =3D null, content =3D null;
>=20
> if(desc !=3D null)
>  longDesc =3D desc.getText();
> else
>  longDesc =3D "";
>=20
> desc =3D (Description)prod.getDescriptions().get(Description.SHORT);
> if(desc !=3D null)
>  shortDesc =3D desc.getText();
> else
>  shortDesc =3D "";
>=20
> content =3D name + " " + shortDesc + " " + longDesc + " ";
>=20
> doc.add(Field.UnIndexed("id", prod.getId() + ""));
> doc.add(Field.Keyword("entity","product"));
> doc.add(Field.Text("name", name));
> doc.add(Field.Text("shortDescription", (shortDesc.equals("") ? "" :
> shortDesc)));
> doc.add(Field.Text("longDescription", (longDesc.equals("") ? "" :
> longDesc)));
> doc.add(Field.Text("content", content));
>=20
> try
> {
>        writer.addDocument(doc);
> }
> catch (IOException e)
> {
>        log.error("Error adding document: " + e.getMessage());
> }
>=20
> Where could I be slowing down the indexing process? Is it because I am
> indexing the longDescription as a Field.Text? (longDescription could
> have a fair amount of text averaging about 4000 words).
>=20
> Any ideas?
>=20
> Thanks,
> Mufaddal.
>=20
> -----Original Message-----
> From: Daniel Herlitz [mailto:daniel@dhlz.com]
> Sent: Tuesday, April 19, 2005 2:16 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene bulk indexing
>=20
> Agree. We run an index with about 2.5 million documents and around 30
> fields. The indexing itself of 20000 items should only take a few
> seconds on a reasonably fast machine.
>=20
> /D
>=20
> Kevin L. Cobb wrote:
>=20
> >I think your bottleneck is most likely the DB hit. I assume by 20000
> >products you mean 20000 distinct entries into the Lucene Index, i.e.
> >20000 rows in the DB to select from.
> >
> >I index about 1.5 million rows from a SQL Server 2000 database with
> >several fields for each entry and it finishes in about twenty minutes
> so
> >you should be able to index 20000 rows in a few seconds.
> >
> >Make sure your database table(s) are indexed appropriately according to
> >your select statements. Indexing correctly will be the biggest
> >performance improvement you will see.
> >
> >Best of luck.
> >
> >KLCobb
> >
> >-----Original Message-----
> >From: Mufaddal Khumri [mailto:MKhumri@allegromedical.com]
> >Sent: Tuesday, April 19, 2005 2:11 PM
> >To: java-user@lucene.apache.org
> >Subject: Lucene bulk indexing
> >
> >Hi,
> >
> >I am sure this question must be raised before and maybe it has been
> even
> >answered. I would be grateful, if someone could point me in the right
> >direction or give their thoughts on this topic.
> >
> >The problem:
> >
> >I have approximately over 20000 products that I need to index. At the
> >moment I get X number of products at a time and index them. This
> process
> >takes about 26 minutes (Am indexing the database id, product name,
> >product description).
> >
> >I was thinking of ways to make this indexing faster. For this I was
> >thinking about writing a threaded module that would index X number of
> >products simultaneously. For instance I could spawn (Number of
> >products/X) number of threads and do the indexing. I am guessing this
> >would be faster but by what factor would this be faster? (I understand
> >the writes to the index are synchronized by lucene).
> >
> >Is there any other approach by which I could speed up the indexing?
> >Thoughts? Suggestions?
> >
> >Thanks,
> >Mufaddal.
> >
> >
> >-----------------------------------------------------------------------
> -
> >------------------
> >This email and any files transmitted with it are confidential
> >and intended solely for the use of the individual or entity
> >to whom they are addressed. If you have received this
> >email in error please notify the system manager. Please
> >note that any views or opinions presented in this email
> >are solely those of the author and do not necessarily
> >represent those of the company. Finally, the recipient
> >should check this email and any attachments for the
> >presence of viruses. The company accepts no liability for
> >any damage caused by any virus transmitted by this email.
> >Consult your physician prior to the use of any medical
> >supplies or product.
> >-----------------------------------------------------------------------
> -
> >------------------
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
> -------------------------------------------------------------------------=
-----------------
> This email and any files transmitted with it are confidential
> and intended solely for the use of the individual or entity
> to whom they are addressed. If you have received this
> email in error please notify the system manager. Please
> note that any views or opinions presented in this email
> are solely those of the author and do not necessarily
> represent those of the company. Finally, the recipient
> should check this email and any attachments for the
> presence of viruses. The company accepts no liability for
> any damage caused by any virus transmitted by this email.
> Consult your physician prior to the use of any medical
> supplies or product.
> -------------------------------------------------------------------------=
-----------------
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 21:44:12 2005
Return-Path: <java-user-return-14169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21423 invoked from network); 19 Apr 2005 21:44:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 21:44:11 -0000
Received: (qmail 33473 invoked by uid 500); 19 Apr 2005 21:44:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33438 invoked by uid 500); 19 Apr 2005 21:44:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33422 invoked by uid 99); 19 Apr 2005 21:44:07 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 14:44:07 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 5A267E47E6
	for <java-user@lucene.apache.org>; Tue, 19 Apr 2005 23:44:04 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 2EDEBE47DA
	for <java-user@lucene.apache.org>; Tue, 19 Apr 2005 23:44:04 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <e57d201eee072646b5abd3bed35dc79d@ehatchersolutions.com>
References: <4eff27aa24b467385fd37f17e300a286@activemath.org> <e57d201eee072646b5abd3bed35dc79d@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <8c9b59527d8dc0ac8fbd84e8f29de596@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: Passing XML objects to the analyzer ?
Date: Tue, 19 Apr 2005 23:44:01 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Le 19 avr. 05, =E0 22:50, Erik Hatcher a =E9crit :
> The only catch that I know if is that an Analyzer is invoked on a=20
> per-field basis.  I can't tell exactly what you have in mind, but a=20
> Lucene Analyzer cannot split data into separate fields itself - it has=20=

> to have been split prior.

That's an easy one... ok, yes, I was clearly aware of this.

> I'm indexing a lot of XML myself, with JDOM in the middle, and using=20=

> XPath to extract data per field before building the Document.

So wouldn't Field.Unstored(Object) actually make sense ?
That object, instead of being a reader, would be passed around till the=20=

analyzer call which would then decide to accept, say, JDOM objects...

paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 23:44:47 2005
Return-Path: <java-user-return-14170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44262 invoked from network); 19 Apr 2005 23:44:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 23:44:47 -0000
Received: (qmail 2561 invoked by uid 500); 19 Apr 2005 23:44:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1882 invoked by uid 500); 19 Apr 2005 23:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1869 invoked by uid 99); 19 Apr 2005 23:44:42 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of mbarancz@twcny.rr.com designates 24.24.2.57 as permitted sender)
Received: from ms-smtp-03.nyroc.rr.com (HELO ms-smtp-03.nyroc.rr.com) (24.24.2.57)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 16:44:39 -0700
Received: from [192.168.0.103] (cpe-24-58-8-69.twcny.res.rr.com [24.58.8.69])
	by ms-smtp-03.nyroc.rr.com (8.12.10/8.12.10) with ESMTP id j3JNiZP4003917
	for <java-user@lucene.apache.org>; Tue, 19 Apr 2005 19:44:35 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v622)
Content-Transfer-Encoding: 7bit
Message-Id: <46bdb814f3a7979b43ed28a1701e9cbd@twcny.rr.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: java-user@lucene.apache.org
From: Mike Baranczak <mbarancz@twcny.rr.com>
Subject: globally unique field
Date: Tue, 19 Apr 2005 19:44:35 -0400
X-Mailer: Apple Mail (2.622)
X-Virus-Scanned: Symantec AntiVirus Scan Engine
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

First of all, a big thanks to all the Lucene hackers - I've only been 
using your product for a couple of weeks, and I've been very impressed 
by what I've seen.

Here's my question: I have an index with a little over 3 million 
documents in it, with more on the way. Each document has an "URL" field 
(which is not indexed). I want to guarantee that each URL is unique; 
that is, when I'm adding a new document, I have to check if another 
existing document has the same value for the URL field. What's the best 
way to do it? I can think of two possible approaches:

1 - Open an IndexReader and iterate over all the Documents that it 
contains, checking the value of the "URL" field for each Document. This 
seems a little inefficient, since I only care about one field, and I 
don't want to have to retrieve all of the fields.

2 - Rebuild the index such that the URL field is indexed. Then, I could 
just do a normal search for the value of the URL. But since the URL 
field will never be searched under any other circumstances, this seems 
like kind of a waste of disk space.

I'm sure somebody else has had to do something like this before. Is 
there a better way to do it than what I've described above? If not, 
then which of the two approaches will give me the best results?

Thanks in advance.

-MB


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 19 23:55:18 2005
Return-Path: <java-user-return-14171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45297 invoked from network); 19 Apr 2005 23:55:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2005 23:55:17 -0000
Received: (qmail 11498 invoked by uid 500); 19 Apr 2005 23:55:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11472 invoked by uid 500); 19 Apr 2005 23:55:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11458 invoked by uid 99); 19 Apr 2005 23:55:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 16:55:12 -0700
Received: from [192.168.1.103] ([::ffff:66.92.12.207])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Tue, 19 Apr 2005 18:55:11 -0500
  id 000741FD.42659A5F.00005D74
Message-ID: <42659A9E.8040507@allthingslocal.com>
Date: Tue, 19 Apr 2005 16:56:14 -0700
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Debian Thunderbird 1.0 (X11/20050116)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: globally unique field
References: <46bdb814f3a7979b43ed28a1701e9cbd@twcny.rr.com>
In-Reply-To: <46bdb814f3a7979b43ed28a1701e9cbd@twcny.rr.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mike Baranczak wrote:

> First of all, a big thanks to all the Lucene hackers - I've only been 
> using your product for a couple of weeks, and I've been very impressed 
> by what I've seen.
>
> Here's my question: I have an index with a little over 3 million 
> documents in it, with more on the way. Each document has an "URL" 
> field (which is not indexed). I want to guarantee that each URL is 
> unique; that is, when I'm adding a new document, I have to check if 
> another existing document has the same value for the URL field. What's 
> the best way to do it? I can think of two possible approaches:
>
> 1 - Open an IndexReader and iterate over all the Documents that it 
> contains, checking the value of the "URL" field for each Document. 
> This seems a little inefficient, since I only care about one field, 
> and I don't want to have to retrieve all of the fields.
>
> 2 - Rebuild the index such that the URL field is indexed. Then, I 
> could just do a normal search for the value of the URL. But since the 
> URL field will never be searched under any other circumstances, this 
> seems like kind of a waste of disk space.
>
> I'm sure somebody else has had to do something like this before. Is 
> there a better way to do it than what I've described above? If not, 
> then which of the two approaches will give me the best results?

I'd suggest putting the URL into the index, untokenzied, and then use 
IndexReader.terms(<Term for you new URL>). This will seek to precisely 
the URL you want or the one just after it, and do it quickly. This will 
be orders of magnitude faster than approach 1, and much faster than 
using the search API if that is what you intended by approach 2. The 
disk space should not be noticeable unless your documents are very very 
small.

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 02:10:57 2005
Return-Path: <java-user-return-14172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97328 invoked from network); 20 Apr 2005 02:10:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 02:10:57 -0000
Received: (qmail 64848 invoked by uid 500); 20 Apr 2005 02:10:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64801 invoked by uid 500); 20 Apr 2005 02:10:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64786 invoked by uid 99); 20 Apr 2005 02:10:49 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from hs-216-106-102-23.storm.ca (HELO extremesoftware.ca) (216.106.102.23)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 19:10:47 -0700
Subject: RE: globally unique field
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 19 Apr 2005 22:09:55 -0400
Content-class: urn:content-classes:message
Message-ID: <41989D7DF8323B4CB0F7A58F5BA0101905BB14@sydney.extremesoftware.ca>
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: globally unique field
Thread-Index: AcVFOcMbP57gPqYtSBuVc+Rt6mmaCQAE/Zhg
From: "Wesley MacDonald" <wes@extremesoftware.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I posted this in the past:

Java has GUID's classes called java.rmi.server.UID and
java.rmi.dgc.VMID.

The UID class can generate identifiers that are unique over time within
a JVM. The VMID class provides uniqueness across ALL JVM's.

UID consists of a unique number based on a hashcode, system time and a
counter, and a VMID contains a UID and adds a SHA hash based on IP
address.


Then you won't need to check to see if your URL is unique...it will be.


Wes. =20

-----Original Message-----
From: Mike Baranczak [mailto:mbarancz@twcny.rr.com]=20
Sent: April 19, 2005 7:45 PM
To: java-user@lucene.apache.org
Subject: globally unique field

First of all, a big thanks to all the Lucene hackers - I've only been
using your product for a couple of weeks, and I've been very impressed
by what I've seen.

Here's my question: I have an index with a little over 3 million
documents in it, with more on the way. Each document has an "URL" field
(which is not indexed). I want to guarantee that each URL is unique;
that is, when I'm adding a new document, I have to check if another
existing document has the same value for the URL field. What's the best
way to do it? I can think of two possible approaches:

1 - Open an IndexReader and iterate over all the Documents that it
contains, checking the value of the "URL" field for each Document. This
seems a little inefficient, since I only care about one field, and I
don't want to have to retrieve all of the fields.

2 - Rebuild the index such that the URL field is indexed. Then, I could
just do a normal search for the value of the URL. But since the URL
field will never be searched under any other circumstances, this seems
like kind of a waste of disk space.

I'm sure somebody else has had to do something like this before. Is
there a better way to do it than what I've described above? If not, then
which of the two approaches will give me the best results?

Thanks in advance.

-MB


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 02:31:23 2005
Return-Path: <java-user-return-14173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3861 invoked from network); 20 Apr 2005 02:31:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 02:31:23 -0000
Received: (qmail 88172 invoked by uid 500); 20 Apr 2005 02:31:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88146 invoked by uid 500); 20 Apr 2005 02:31:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88131 invoked by uid 99); 20 Apr 2005 02:31:12 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31110.mail.mud.yahoo.com (HELO web31110.mail.mud.yahoo.com) (68.142.200.43)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 19 Apr 2005 19:31:11 -0700
Received: (qmail 3364 invoked by uid 60001); 20 Apr 2005 02:31:08 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=UvP5oTMXXdTbwYb6g8Zo19kyOMY3wcAz3RFx8FupUIH+otqCI8DuopvXXuwrT1Zc1o/Uz7RDNCiOY8A5QaCd3m1sCCmq+n1Zw2e2/nnIiBClLs1Mn/0/2qjO4U64V//MdDkcIx0EikAevsTBAYIJKZ0dcTAroSjLM5V9sCelaR8=  ;
Message-ID: <20050420023108.3362.qmail@web31110.mail.mud.yahoo.com>
Received: from [69.201.130.192] by web31110.mail.mud.yahoo.com via HTTP; Tue, 19 Apr 2005 19:31:08 PDT
Date: Tue, 19 Apr 2005 19:31:08 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: numDocs method of IndexReader
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

Yes, there is a limit, but it's pretty high:
http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Integer.html#MAX_VALUE

Iterating the index like that is ok, but each call do
reader.document(int) pulls the entire Document off the disk, which can
get expensive.

The link to list archives should be on lucene.apache.org.

Otis


--- Tomcat Programmer <tcprogrammer@yahoo.com> wrote:
> Hello Everyone, 
> 
> I need to be able to iterate through the entire set of
> documents within the index to perform some auditing. I
> originally tried the following code snip:
> 
> int ndoc = idxReader.numDocs();
> for (int i=0; i< ndoc; i++) {
>     Document doc = idxReader.document(i);
>     . 
>     . 
>     .
> }
> 
> This is working with my initial project here, where
> the number of Documents are small. I am concerned when
> the indexes grow larger. Since this method returns an
> int, does this mean that I am limited by the size of
> an integer to the number of documents I can have? 
> 
> Also, I wanted to search the archives of this list to
> see if anyone had previously answered this question,
> but I could not find a site that archives this list.
> Can any one point me to such a site? 
> 
> Many thanks in advance, 
> 
> Tom C. 
> 
> 
> 
> 
> 
> 
> 
> 
> 		
> __________________________________ 
> Do you Yahoo!? 
> Plan great trips with Yahoo! Travel: Now over 17,000 guides!
> http://travel.yahoo.com/p-travelguide
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 03:00:07 2005
Return-Path: <java-user-return-14174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12626 invoked from network); 20 Apr 2005 03:00:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 03:00:07 -0000
Received: (qmail 22770 invoked by uid 500); 20 Apr 2005 03:00:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22740 invoked by uid 500); 20 Apr 2005 02:59:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22724 invoked by uid 99); 20 Apr 2005 02:59:59 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FORGED_RCVD_HELO,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from relay.fis.ru (HELO mail.office.fis.ru) (212.20.24.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 19:59:57 -0700
Received: by mail.office.fis.ru (Postfix, from userid 1007)
	id 99113933DC; Wed, 20 Apr 2005 10:09:23 +0700 (NOVST)
Received: from [212.20.24.60] (unknown [212.20.24.60])
	by mail.office.fis.ru (Postfix) with ESMTP id 073E992F7F
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 10:09:23 +0700 (NOVST)
From: skoptelov@fis.ru
To: java-user@lucene.apache.org
Subject: Re: Lucene bulk indexing
Date: Wed, 20 Apr 2005 10:07:51 +0700
User-Agent: KMail/1.7
References: <B5ADCC4EA669BF4697F6AF63FF328674F6E360@exch01.allegro.med>
In-Reply-To: <B5ADCC4EA669BF4697F6AF63FF328674F6E360@exch01.allegro.med>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200504201007.51458.skoptelov@fis.ru>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

=D0=92 =D1=81=D0=BE=D0=BE=D0=B1=D1=89=D0=B5=D0=BD=D0=B8=D0=B8 =D0=BE=D1=82 =
=D0=A1=D1=80=D0=B5=D0=B4=D0=B0 20 =D0=90=D0=BF=D1=80=D0=B5=D0=BB=D1=8C 2005=
 04:07 Mufaddal Khumri =D0=BD=D0=B0=D0=BF=D0=B8=D1=81=D0=B0=D0=BB(a):
> The 20000 products I mentioned are 20000 rows. I get the products in
> bulk by using a limit clause.
>
> I am using hibernate with MySQL server on a 2.8GHz, 1.00GB Ram machine.

Maybe your session-level cache in hibernate grows incredibly. Do you do=20
Session.clear() sometimes while doing indexing? Here's a link about batchin=
g=20
& hibernate:
http://blog.hibernate.org/cgi-bin/blosxom.cgi/2004/08/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 03:57:57 2005
Return-Path: <java-user-return-14175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29350 invoked from network); 20 Apr 2005 03:57:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 03:57:57 -0000
Received: (qmail 98503 invoked by uid 500); 20 Apr 2005 03:57:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98455 invoked by uid 500); 20 Apr 2005 03:57:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98439 invoked by uid 99); 20 Apr 2005 03:57:51 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web51609.mail.yahoo.com (HELO web51609.mail.yahoo.com) (206.190.38.214)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 19 Apr 2005 20:57:50 -0700
Received: (qmail 35469 invoked by uid 60001); 20 Apr 2005 03:57:47 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=TS7lTnjMMpaTadvOsUA3kYDxhUGdEzkNUlSfDISCYYEHLsHfe3qGoV6milAAAQ5TRO/DrCZC5GbqYffIgu48Yxyff/oCS3tYnpsOlXyWF0sYht6Kk0os54J3U3OKAvmb9xJF2QG4JH1DIi3bch+MJ3wfHKd11uSfJ0AKd0ErsIY=  ;
Message-ID: <20050420035747.35467.qmail@web51609.mail.yahoo.com>
Received: from [68.116.201.173] by web51609.mail.yahoo.com via HTTP; Tue, 19 Apr 2005 20:57:46 PDT
Date: Tue, 19 Apr 2005 20:57:46 -0700 (PDT)
From: Tomcat Programmer <tcprogrammer@yahoo.com>
Subject: Re: numDocs method of IndexReader
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi Otis, 

Thanks for your answer on the integer issue. I was not
sure if the index was actually limited, or if it was
just the numDocs method call. I guess it really does
not matter which it is; and for me, I don't think my
index will ever get that large!  I do have a couple of
questions from your response: 

> 
> Iterating the index like that is ok, but each call
> do reader.document(int) pulls the entire Document 
> off the disk, which can get expensive.
> 

Thanks for the clarification. Is there a 'better' i.e.
less expensive way to extract values from each
document than to iterate through them in that fashion?
I would appreciate any suggestions that you can offer.


>
> The link to list archives should be on
> lucene.apache.org.
> 

I checked the lucene.apache.org site. The
"Lucene-user" link (on the left under the Resources
heading) which points to the eyebrowse apache site is
broken. The Achive link for lucene-user under the
"mailing lists" page points takes you to the mbox
archive which is not searchable. 

Hopefully these problems will be corrected soon. In
the mean time, does anyone know of any other sites
that might be archiving the lucene-user list and which
provide a search capability? 

Thanks, 

Tom C. 

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 08:42:54 2005
Return-Path: <java-user-return-14181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1184 invoked from network); 20 Apr 2005 08:42:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 08:42:54 -0000
Received: (qmail 96896 invoked by uid 500); 20 Apr 2005 08:42:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96875 invoked by uid 500); 20 Apr 2005 08:42:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96859 invoked by uid 99); 20 Apr 2005 08:42:51 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO uar.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 01:42:51 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id CE3F03871A
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 11:42:46 +0300 (EEST)
Message-ID: <42661606.2030406@i-hypergrid.com>
Date: Wed, 20 Apr 2005 11:42:46 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene bulk indexing
References: <B5ADCC4EA669BF4697F6AF63FF328674EC76A1@exch01.allegro.med>
In-Reply-To: <B5ADCC4EA669BF4697F6AF63FF328674EC76A1@exch01.allegro.med>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

The best way to determine bottlenecks is profiling. (JProfiler is very 
good tool for that. It's commercial product with free evaluation)

I was indexing 1.5 million documents in 45 minutes.
before optimizing it took much more time to index. optimization was done 
through 'select' query changing.

Mufaddal Khumri wrote:

>Hi,
>
>I am sure this question must be raised before and maybe it has been even
>answered. I would be grateful, if someone could point me in the right
>direction or give their thoughts on this topic.
>
>The problem:
>
>I have approximately over 20000 products that I need to index. At the
>moment I get X number of products at a time and index them. This process
>takes about 26 minutes (Am indexing the database id, product name,
>product description).
>
>I was thinking of ways to make this indexing faster. For this I was
>thinking about writing a threaded module that would index X number of
>products simultaneously. For instance I could spawn (Number of
>products/X) number of threads and do the indexing. I am guessing this
>would be faster but by what factor would this be faster? (I understand
>the writes to the index are synchronized by lucene).
>
>Is there any other approach by which I could speed up the indexing?
>Thoughts? Suggestions?
>
>Thanks,
>Mufaddal.
>
>
>------------------------------------------------------------------------------------------
>This email and any files transmitted with it are confidential 
>and intended solely for the use of the individual or entity 
>to whom they are addressed. If you have received this 
>email in error please notify the system manager. Please
>note that any views or opinions presented in this email 
>are solely those of the author and do not necessarily
>represent those of the company. Finally, the recipient
>should check this email and any attachments for the 
>presence of viruses. The company accepts no liability for
>any damage caused by any virus transmitted by this email.
>Consult your physician prior to the use of any medical
>supplies or product.
>------------------------------------------------------------------------------------------
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 16:12:21 2005
Return-Path: <java-user-return-14185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3396 invoked from network); 20 Apr 2005 16:12:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 16:12:16 -0000
Received: (qmail 29904 invoked by uid 500); 20 Apr 2005 13:11:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29793 invoked by uid 500); 20 Apr 2005 13:11:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29725 invoked by uid 99); 20 Apr 2005 13:11:09 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO uar.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 06:11:09 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id 3E98F1DB2B
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 16:10:47 +0300 (EEST)
Message-ID: <426654D6.6020608@i-hypergrid.com>
Date: Wed, 20 Apr 2005 16:10:46 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: What is going on with subversion.
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I can't connect svn.apache.org. It seems that apache.org is down.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 16:12:32 2005
Return-Path: <java-user-return-14184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4768 invoked from network); 20 Apr 2005 16:12:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 16:12:32 -0000
Received: (qmail 11541 invoked by uid 500); 20 Apr 2005 12:04:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11514 invoked by uid 500); 20 Apr 2005 12:04:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11500 invoked by uid 99); 20 Apr 2005 12:04:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp07.web.de (HELO smtp07.web.de) (217.72.192.225)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 05:04:20 -0700
Received: from [217.224.149.220] (helo=[192.168.1.3])
	by smtp07.web.de with asmtp (WEB.DE 4.105 #275)
	id 1DODwG-00017J-00
	for java-user@lucene.apache.org; Wed, 20 Apr 2005 14:04:16 +0200
Message-ID: <42664550.9020104@web.de>
Date: Wed, 20 Apr 2005 14:04:32 +0200
From: Barbara Krausz <bkrausz@web.de>
Reply-To:  java-user@lucene.apache.org
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8a3) Gecko/20040817
X-Accept-Language: de, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Scoring, cosine measure
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Sender: bkrausz@web.de
X-Sender: bkrausz@web.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
currently I'm writing my Bachelorthesis about Lucene. I searched for 
theoretical information for example about the IR-model Lucene uses, but 
I couldn't find anything so I had to figure it out on my own.
I think Lucene uses the vector space model with a variation of the 
cosine measure (cosine measure is described in "modern information 
retrieval"): Instead of a division by the length of the documentvector 
it divides the score by the fieldNorm. So, the scoring formula can be 
written as:

score(d,q)=sum (i=1 to t) ( wid* wiq/(sqrt(m)*|q|) )

t: number of distinct terms in the collection
wid: weight of term i in document d
wiq: weight of term i in the query
m: total number of terms in the field  (sqrt(m)=fieldNorm)
|q|: length of queryvector q

The weight wid is the product of idf and tf. The weight wiq is just 
idf.  So the only difference to the cosine measure is the use of sqrt(m) 
instead of the length of the documentvector, isn't it? Why? Is it too 
difficult to compute this length?
Has anyone tried an index based on n-grams?

Thanks
Barbara

PS: Probably I will have more questions about Lucene in the next weeks :-)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 16:13:17 2005
Return-Path: <java-user-return-14192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6250 invoked from network); 20 Apr 2005 16:13:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 16:13:17 -0000
Received: (qmail 27599 invoked by uid 500); 20 Apr 2005 16:12:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27554 invoked by uid 500); 20 Apr 2005 16:12:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27527 invoked by uid 99); 20 Apr 2005 16:12:42 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO uar.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 09:12:42 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id B1A1C1C787
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 19:12:31 +0300 (EEST)
Message-ID: <42667F6F.3040000@i-hypergrid.com>
Date: Wed, 20 Apr 2005 19:12:31 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: What is going on with subversion.
References: <24CFCE44DCB015489FB96D38BDF4FCAA07114A@gerard.anchormen.nl>
In-Reply-To: <24CFCE44DCB015489FB96D38BDF4FCAA07114A@gerard.anchormen.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

IMHO QueryParser.DEFAULT_OPERATOR_AND and 
QueryParser.DEFAULT_OPERATOR_OR should be used instead QueryParser.AND 
and QueryParser.OR

Peter Veentjer - Anchor Men wrote:

>package com.jph.lucene.parsers;
>
>/**
> * Copyright 2004 The Apache Software Foundation
> *
> * Licensed under the Apache License, Version 2.0 (the "License");
> * you may not use this file except in compliance with the License.
> * You may obtain a copy of the License at
> *
> *     http://www.apache.org/licenses/LICENSE-2.0
> *
> * Unless required by applicable law or agreed to in writing, software
> * distributed under the License is distributed on an "AS IS" BASIS,
> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
>implied.
> * See the License for the specific language governing permissions and
> * limitations under the License.
> */
>
>import org.apache.lucene.analysis.Analyzer;
>import org.apache.lucene.queryParser.MultiFieldQueryParser;
>import org.apache.lucene.queryParser.ParseException;
>import org.apache.lucene.queryParser.QueryParser;
>import org.apache.lucene.search.BooleanQuery;
>import org.apache.lucene.search.Query;
>
>/**
> * A QueryParser which constructs queries to indexSearcher multiple
>fields.
> * <p/>
> * Deze parser kan waarschijnlijk gekicked worden bij Lucene 2.0.
> *
> * @author Peter Veentjer
> */
>public class MultiFieldQueryParserUtil {
>	/**
>	 * <p/>
>	 * Parses a query which searches on the fields specified.
>	 * <p/>
>	 * If x fields are specified, this effectively constructs:
>	 * <pre>
>	 * <code>
>	 * (field1:query) (field2:query) (field3:query)...(fieldx:query)
>	 * </code>
>	 * </pre>
>	 *
>	 * @param query    Query string to parse
>	 * @param fields   Fields to indexSearcher on
>	 * @param analyzer Analyzer to use
>	 * @throws ParseException if query parsing fails
>	 * @throws org.apache.lucene.queryParser.TokenMgrError
>	 *                        if query parsing fails
>	 */
>	public static Query parse(String query, String[] fields,
>Analyzer analyzer, boolean and) throws ParseException {
>		BooleanQuery bQuery = new BooleanQuery();
>		for (int i = 0; i < fields.length; i++) {
>			QueryParser queryParser = new
>QueryParser(fields[i], analyzer);
>			queryParser.setOperator(and ? QueryParser.AND :
>QueryParser.OR);
>			Query q = queryParser.parse(query);
>			bQuery.add(q, false, false);
>		}
>		return bQuery;
>	}
>
>	/**
>	 * <p/>
>	 * Parses a query, searching on the fields specified.
>	 * Use this if you need to specify certain fields as required,
>	 * and others as prohibited.
>	 * <p><pre>
>	 * Usage:
>	 * <code>
>	 * String[] fields = {"filename", "contents", "description"};
>	 * int[] flags = {MultiFieldQueryParser.NORMAL FIELD,
>	 *                MultiFieldQueryParser.REQUIRED FIELD,
>	 *                MultiFieldQueryParser.PROHIBITED FIELD,};
>	 * parse(query, fields, flags, analyzer);
>	 * </code>
>	 * </pre>
>	 * <p/>
>	 * The code above would construct a query:
>	 * <pre>
>	 * <code>
>	 * (filename:query) +(contents:query) -(description:query)
>	 * </code>
>	 * </pre>
>	 *
>	 * @param query    Query string to parse
>	 * @param fields   Fields to indexSearcher on
>	 * @param flags    Flags describing the fields
>	 * @param analyzer Analyzer to use
>	 * @throws ParseException if query parsing fails
>	 * @throws org.apache.lucene.queryParser.TokenMgrError
>	 *                        if query parsing fails
>	 */
>	public static Query parse(String query, String[] fields, int[]
>flags, Analyzer analyzer, boolean and) throws ParseException {
>		if (query == null)
>			throw new NullPointerException("query can`t be
>null");
>		if (fields == null)
>			throw new NullPointerException("fields can`t be
>null");
>		if (flags == null)
>			throw new NullPointerException("flags can`t be
>null");
>		if (fields.length != flags.length)
>			throw new IllegalArgumentException();
>		if (analyzer == null)
>			throw new NullPointerException("analyzer can`t
>be null");
>
>
>		BooleanQuery bQuery = new BooleanQuery();
>		for (int i = 0; i < fields.length; i++) {
>			QueryParser queryParser = new
>QueryParser(fields[i], analyzer);
>			queryParser.setOperator(and ? QueryParser.AND :
>QueryParser.OR);
>			Query q = queryParser.parse(query);
>
>			int flag = flags[i];
>			switch (flag) {
>				case
>MultiFieldQueryParser.REQUIRED_FIELD:
>					bQuery.add(q, true, false);
>					break;
>				case
>MultiFieldQueryParser.PROHIBITED_FIELD:
>					bQuery.add(q, false, true);
>					break;
>				case MultiFieldQueryParser.NORMAL_FIELD:
>					bQuery.add(q, false, false);
>					break;
>				default:
>					throw new
>IllegalArgumentException("unrecognized fieldflag: " + flag);
>			}
>		}
>		return bQuery;
>	}
>
>	public static Query parseAnd(String query, String[] fields,
>int[] flags, Analyzer analyzer) throws ParseException {
>		return parse(query, fields, flags, analyzer, true);
>	}
>
>	public static Query parseOr(String query, String[] fields, int[]
>flags, Analyzer analyzer) throws ParseException {
>		return parse(query, fields, flags, analyzer, false);
>	}
>} 
>
>-----Oorspronkelijk bericht-----
>Van: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com] 
>Verzonden: woensdag 20 april 2005 15:21
>Aan: java-user@lucene.apache.org
>Onderwerp: Re: What is going on with subversion.
>
>Sorry, I've already read about servers moving.
>
>Can somebody mail me latest  MultiFieldQueryParser.java  and
>highlighting source code. Because I can't get it from subversion and I
>need it urgently.
>
>Thanks in advance.
>
>
>Regards,
>Volodymyr Bychkoviak
>
>Volodymyr Bychkoviak wrote:
>
>  
>
>>I can't connect svn.apache.org. It seems that apache.org is down.
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 16:14:57 2005
Return-Path: <java-user-return-14191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8736 invoked from network); 20 Apr 2005 16:14:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 16:14:57 -0000
Received: (qmail 87783 invoked by uid 500); 20 Apr 2005 14:17:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87736 invoked by uid 500); 20 Apr 2005 14:17:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87701 invoked by uid 99); 20 Apr 2005 14:17:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 07:17:36 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 37B7413E211F; Wed, 20 Apr 2005 10:17:23 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 8A03213E211E
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 10:17:18 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <24CFCE44DCB015489FB96D38BDF4FCAA07114B@gerard.anchormen.nl>
References: <24CFCE44DCB015489FB96D38BDF4FCAA07114B@gerard.anchormen.nl>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <b0ff94de89fca4bfa5d823c701ef2aed@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: What is going on with subversion.
Date: Wed, 20 Apr 2005 10:17:12 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 20, 2005, at 9:47 AM, Peter Veentjer - Anchor Men wrote:
>  I guess and hope the original
> MultifieldQueryParser in Lucene 2.0 will be of better design.

MFQP in Subversion is what you'll get unless someone supplies patches 
to improve it.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 16:24:12 2005
Return-Path: <java-user-return-14193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17935 invoked from network); 20 Apr 2005 16:24:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 16:24:12 -0000
Received: (qmail 60303 invoked by uid 500); 20 Apr 2005 16:22:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60194 invoked by uid 500); 20 Apr 2005 16:22:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60181 invoked by uid 99); 20 Apr 2005 16:22:41 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr10.xs4all.nl (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 09:22:41 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.12.11/8.12.11) with ESMTP id j3KGMRb4058354
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 18:22:27 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Scoring, cosine measure
Date: Wed, 20 Apr 2005 18:22:26 +0200
User-Agent: KMail/1.5.4
References: <42664550.9020104@web.de>
In-Reply-To: <42664550.9020104@web.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504201822.26939.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 20 April 2005 14:04, Barbara Krausz wrote:
> Hi,
> currently I'm writing my Bachelorthesis about Lucene. I searched for 
> theoretical information for example about the IR-model Lucene uses, but 
> I couldn't find anything so I had to figure it out on my own.
> I think Lucene uses the vector space model with a variation of the 
> cosine measure (cosine measure is described in "modern information 
> retrieval"): Instead of a division by the length of the documentvector 
> it divides the score by the fieldNorm. So, the scoring formula can be 
> written as:
> 
> score(d,q)=sum (i=1 to t) ( wid* wiq/(sqrt(m)*|q|) )
> 
> t: number of distinct terms in the collection
> wid: weight of term i in document d
> wiq: weight of term i in the query
> m: total number of terms in the field  (sqrt(m)=fieldNorm)
> |q|: length of queryvector q

There is also a coordination factor:
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html
 
> The weight wid is the product of idf and tf. The weight wiq is just 
> idf.  So the only difference to the cosine measure is the use of sqrt(m) 
> instead of the length of the documentvector, isn't it? Why? Is it too 
> difficult to compute this length?

The square root is a variation on the power norms of the extended
boolean model. It helps to make each extra occurrence in the same document
less important.

The field length is computed under the hood by counting the indexed terms.
Its square root is stored as a single byte value in a special representation
with 3 bits mantissa and 5 bits exponent.

> Has anyone tried an index based on n-grams?

Nutch has bigrams for phrases with frequently occurring words.
 
Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 16:26:46 2005
Return-Path: <java-user-return-14186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22171 invoked from network); 20 Apr 2005 16:26:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 16:26:45 -0000
Received: (qmail 47313 invoked by uid 500); 20 Apr 2005 13:21:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47289 invoked by uid 500); 20 Apr 2005 13:21:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47270 invoked by uid 99); 20 Apr 2005 13:21:08 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO uar.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 06:21:08 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id 635A81BE4D
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 16:20:59 +0300 (EEST)
Message-ID: <4266573B.9040400@i-hypergrid.com>
Date: Wed, 20 Apr 2005 16:20:59 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: What is going on with subversion.
References: <426654D6.6020608@i-hypergrid.com>
In-Reply-To: <426654D6.6020608@i-hypergrid.com>
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sorry, I've already read about servers moving.

Can somebody mail me latest  MultiFieldQueryParser.java  and 
highlighting source code. Because I can't get it from subversion and I 
need it urgently.

Thanks in advance.


Regards,
Volodymyr Bychkoviak

Volodymyr Bychkoviak wrote:

> I can't connect svn.apache.org. It seems that apache.org is down.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 16:34:12 2005
Return-Path: <java-user-return-14188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40208 invoked from network); 20 Apr 2005 16:34:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 16:34:11 -0000
Received: (qmail 95850 invoked by uid 500); 20 Apr 2005 13:40:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95822 invoked by uid 500); 20 Apr 2005 13:40:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95800 invoked by uid 99); 20 Apr 2005 13:40:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 06:40:51 -0700
Subject: RE: What is going on with subversion.
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 20 Apr 2005 15:40:47 +0200
Content-class: urn:content-classes:message
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA07114A@gerard.anchormen.nl>
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: What is going on with subversion.
Thread-Index: AcVFq9ixlvrc3IaUQ+ejUq8u2oHYVQAAorWg
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

package com.jph.lucene.parsers;

/**
 * Copyright 2004 The Apache Software Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.queryParser.MultiFieldQueryParser;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.BooleanQuery;
import org.apache.lucene.search.Query;

/**
 * A QueryParser which constructs queries to indexSearcher multiple
fields.
 * <p/>
 * Deze parser kan waarschijnlijk gekicked worden bij Lucene 2.0.
 *
 * @author Peter Veentjer
 */
public class MultiFieldQueryParserUtil {
	/**
	 * <p/>
	 * Parses a query which searches on the fields specified.
	 * <p/>
	 * If x fields are specified, this effectively constructs:
	 * <pre>
	 * <code>
	 * (field1:query) (field2:query) (field3:query)...(fieldx:query)
	 * </code>
	 * </pre>
	 *
	 * @param query    Query string to parse
	 * @param fields   Fields to indexSearcher on
	 * @param analyzer Analyzer to use
	 * @throws ParseException if query parsing fails
	 * @throws org.apache.lucene.queryParser.TokenMgrError
	 *                        if query parsing fails
	 */
	public static Query parse(String query, String[] fields,
Analyzer analyzer, boolean and) throws ParseException {
		BooleanQuery bQuery =3D new BooleanQuery();
		for (int i =3D 0; i < fields.length; i++) {
			QueryParser queryParser =3D new
QueryParser(fields[i], analyzer);
			queryParser.setOperator(and ? QueryParser.AND :
QueryParser.OR);
			Query q =3D queryParser.parse(query);
			bQuery.add(q, false, false);
		}
		return bQuery;
	}

	/**
	 * <p/>
	 * Parses a query, searching on the fields specified.
	 * Use this if you need to specify certain fields as required,
	 * and others as prohibited.
	 * <p><pre>
	 * Usage:
	 * <code>
	 * String[] fields =3D {"filename", "contents", "description"};
	 * int[] flags =3D {MultiFieldQueryParser.NORMAL FIELD,
	 *                MultiFieldQueryParser.REQUIRED FIELD,
	 *                MultiFieldQueryParser.PROHIBITED FIELD,};
	 * parse(query, fields, flags, analyzer);
	 * </code>
	 * </pre>
	 * <p/>
	 * The code above would construct a query:
	 * <pre>
	 * <code>
	 * (filename:query) +(contents:query) -(description:query)
	 * </code>
	 * </pre>
	 *
	 * @param query    Query string to parse
	 * @param fields   Fields to indexSearcher on
	 * @param flags    Flags describing the fields
	 * @param analyzer Analyzer to use
	 * @throws ParseException if query parsing fails
	 * @throws org.apache.lucene.queryParser.TokenMgrError
	 *                        if query parsing fails
	 */
	public static Query parse(String query, String[] fields, int[]
flags, Analyzer analyzer, boolean and) throws ParseException {
		if (query =3D=3D null)
			throw new NullPointerException("query can`t be
null");
		if (fields =3D=3D null)
			throw new NullPointerException("fields can`t be
null");
		if (flags =3D=3D null)
			throw new NullPointerException("flags can`t be
null");
		if (fields.length !=3D flags.length)
			throw new IllegalArgumentException();
		if (analyzer =3D=3D null)
			throw new NullPointerException("analyzer can`t
be null");


		BooleanQuery bQuery =3D new BooleanQuery();
		for (int i =3D 0; i < fields.length; i++) {
			QueryParser queryParser =3D new
QueryParser(fields[i], analyzer);
			queryParser.setOperator(and ? QueryParser.AND :
QueryParser.OR);
			Query q =3D queryParser.parse(query);

			int flag =3D flags[i];
			switch (flag) {
				case
MultiFieldQueryParser.REQUIRED_FIELD:
					bQuery.add(q, true, false);
					break;
				case
MultiFieldQueryParser.PROHIBITED_FIELD:
					bQuery.add(q, false, true);
					break;
				case MultiFieldQueryParser.NORMAL_FIELD:
					bQuery.add(q, false, false);
					break;
				default:
					throw new
IllegalArgumentException("unrecognized fieldflag: " + flag);
			}
		}
		return bQuery;
	}

	public static Query parseAnd(String query, String[] fields,
int[] flags, Analyzer analyzer) throws ParseException {
		return parse(query, fields, flags, analyzer, true);
	}

	public static Query parseOr(String query, String[] fields, int[]
flags, Analyzer analyzer) throws ParseException {
		return parse(query, fields, flags, analyzer, false);
	}
}=20

-----Oorspronkelijk bericht-----
Van: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]=20
Verzonden: woensdag 20 april 2005 15:21
Aan: java-user@lucene.apache.org
Onderwerp: Re: What is going on with subversion.

Sorry, I've already read about servers moving.

Can somebody mail me latest  MultiFieldQueryParser.java  and
highlighting source code. Because I can't get it from subversion and I
need it urgently.

Thanks in advance.


Regards,
Volodymyr Bychkoviak

Volodymyr Bychkoviak wrote:

> I can't connect svn.apache.org. It seems that apache.org is down.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 16:37:05 2005
Return-Path: <java-user-return-14182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49064 invoked from network); 20 Apr 2005 16:37:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 16:37:04 -0000
Received: (qmail 34255 invoked by uid 500); 20 Apr 2005 09:03:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34226 invoked by uid 500); 20 Apr 2005 09:03:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34194 invoked by uid 99); 20 Apr 2005 09:03:17 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of blizzy-keyword-lucene_user.f5486d@blizzy.de designates 212.79.22.222 as permitted sender)
Received: from subshell.com (HELO subshell.com) (212.79.22.222)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 02:03:17 -0700
Received: (qmail 19625 invoked from network); 20 Apr 2005 11:03:12 +0200
Received: from unknown (HELO ?10.0.0.10?) (212.79.22.193)
  by subshell.com with SMTP; 20 Apr 2005 11:03:12 +0200
Message-ID: <42661AF0.1070508@blizzy.de>
Date: Wed, 20 Apr 2005 11:03:44 +0200
From: Maik Schreiber <blizzy-keyword-lucene_user.f5486d@blizzy.de>
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050326)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Best way to purposely corrupt an index?
References: <200504192122.08102.mail@andy-roberts.net> <200504200840.53608.mail@andy-roberts.net> <42661267.6000709@blizzy.de> <200504200943.05470.mail@andy-roberts.net>
In-Reply-To: <200504200943.05470.mail@andy-roberts.net>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> It looks to me that if I do get an IOException, I will then have to perform a 
> number of additional checks to eliminate the other possible causes of 
> IOExceptions (such as permissions issues), and by a process of elimination, 
> determine a corrupt index.

Slightly off-topic:

That's exactly the problem you get when following the practice of using
existing exception types "when your exception does not have something new to
say". The thing is, subclassing an existing exception type actually _does_
make the new type more meaningful and specialized.

-- 
Maik Schreiber   *   http://www.blizzy.de

GPG public key: http://pgp.mit.edu:11371/pks/lookup?op=get&search=0x1F11D713
Key fingerprint: CF19 AFCE 6E3D 5443 9599 18B5 5640 1F11 D713

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 16:43:48 2005
Return-Path: <java-user-return-14189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86824 invoked from network); 20 Apr 2005 16:43:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 16:43:48 -0000
Received: (qmail 7322 invoked by uid 500); 20 Apr 2005 13:43:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7293 invoked by uid 500); 20 Apr 2005 13:43:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7256 invoked by uid 99); 20 Apr 2005 13:43:35 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO uar.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 06:43:35 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id C99BE1BD79
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 16:43:26 +0300 (EEST)
Message-ID: <42665C7C.8010605@i-hypergrid.com>
Date: Wed, 20 Apr 2005 16:43:24 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: What is going on with subversion.
References: <24CFCE44DCB015489FB96D38BDF4FCAA07114A@gerard.anchormen.nl>
In-Reply-To: <24CFCE44DCB015489FB96D38BDF4FCAA07114A@gerard.anchormen.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

thanks.

Peter Veentjer - Anchor Men wrote:

>package com.jph.lucene.parsers;
>
>/**
> * Copyright 2004 The Apache Software Foundation
> *
> * Licensed under the Apache License, Version 2.0 (the "License");
> * you may not use this file except in compliance with the License.
> * You may obtain a copy of the License at
> *
> *     http://www.apache.org/licenses/LICENSE-2.0
> *
> * Unless required by applicable law or agreed to in writing, software
> * distributed under the License is distributed on an "AS IS" BASIS,
> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
>implied.
> * See the License for the specific language governing permissions and
> * limitations under the License.
> */
>
>import org.apache.lucene.analysis.Analyzer;
>import org.apache.lucene.queryParser.MultiFieldQueryParser;
>import org.apache.lucene.queryParser.ParseException;
>import org.apache.lucene.queryParser.QueryParser;
>import org.apache.lucene.search.BooleanQuery;
>import org.apache.lucene.search.Query;
>
>/**
> * A QueryParser which constructs queries to indexSearcher multiple
>fields.
> * <p/>
> * Deze parser kan waarschijnlijk gekicked worden bij Lucene 2.0.
> *
> * @author Peter Veentjer
> */
>public class MultiFieldQueryParserUtil {
>	/**
>	 * <p/>
>	 * Parses a query which searches on the fields specified.
>	 * <p/>
>	 * If x fields are specified, this effectively constructs:
>	 * <pre>
>	 * <code>
>	 * (field1:query) (field2:query) (field3:query)...(fieldx:query)
>	 * </code>
>	 * </pre>
>	 *
>	 * @param query    Query string to parse
>	 * @param fields   Fields to indexSearcher on
>	 * @param analyzer Analyzer to use
>	 * @throws ParseException if query parsing fails
>	 * @throws org.apache.lucene.queryParser.TokenMgrError
>	 *                        if query parsing fails
>	 */
>	public static Query parse(String query, String[] fields,
>Analyzer analyzer, boolean and) throws ParseException {
>		BooleanQuery bQuery = new BooleanQuery();
>		for (int i = 0; i < fields.length; i++) {
>			QueryParser queryParser = new
>QueryParser(fields[i], analyzer);
>			queryParser.setOperator(and ? QueryParser.AND :
>QueryParser.OR);
>			Query q = queryParser.parse(query);
>			bQuery.add(q, false, false);
>		}
>		return bQuery;
>	}
>
>	/**
>	 * <p/>
>	 * Parses a query, searching on the fields specified.
>	 * Use this if you need to specify certain fields as required,
>	 * and others as prohibited.
>	 * <p><pre>
>	 * Usage:
>	 * <code>
>	 * String[] fields = {"filename", "contents", "description"};
>	 * int[] flags = {MultiFieldQueryParser.NORMAL FIELD,
>	 *                MultiFieldQueryParser.REQUIRED FIELD,
>	 *                MultiFieldQueryParser.PROHIBITED FIELD,};
>	 * parse(query, fields, flags, analyzer);
>	 * </code>
>	 * </pre>
>	 * <p/>
>	 * The code above would construct a query:
>	 * <pre>
>	 * <code>
>	 * (filename:query) +(contents:query) -(description:query)
>	 * </code>
>	 * </pre>
>	 *
>	 * @param query    Query string to parse
>	 * @param fields   Fields to indexSearcher on
>	 * @param flags    Flags describing the fields
>	 * @param analyzer Analyzer to use
>	 * @throws ParseException if query parsing fails
>	 * @throws org.apache.lucene.queryParser.TokenMgrError
>	 *                        if query parsing fails
>	 */
>	public static Query parse(String query, String[] fields, int[]
>flags, Analyzer analyzer, boolean and) throws ParseException {
>		if (query == null)
>			throw new NullPointerException("query can`t be
>null");
>		if (fields == null)
>			throw new NullPointerException("fields can`t be
>null");
>		if (flags == null)
>			throw new NullPointerException("flags can`t be
>null");
>		if (fields.length != flags.length)
>			throw new IllegalArgumentException();
>		if (analyzer == null)
>			throw new NullPointerException("analyzer can`t
>be null");
>
>
>		BooleanQuery bQuery = new BooleanQuery();
>		for (int i = 0; i < fields.length; i++) {
>			QueryParser queryParser = new
>QueryParser(fields[i], analyzer);
>			queryParser.setOperator(and ? QueryParser.AND :
>QueryParser.OR);
>			Query q = queryParser.parse(query);
>
>			int flag = flags[i];
>			switch (flag) {
>				case
>MultiFieldQueryParser.REQUIRED_FIELD:
>					bQuery.add(q, true, false);
>					break;
>				case
>MultiFieldQueryParser.PROHIBITED_FIELD:
>					bQuery.add(q, false, true);
>					break;
>				case MultiFieldQueryParser.NORMAL_FIELD:
>					bQuery.add(q, false, false);
>					break;
>				default:
>					throw new
>IllegalArgumentException("unrecognized fieldflag: " + flag);
>			}
>		}
>		return bQuery;
>	}
>
>	public static Query parseAnd(String query, String[] fields,
>int[] flags, Analyzer analyzer) throws ParseException {
>		return parse(query, fields, flags, analyzer, true);
>	}
>
>	public static Query parseOr(String query, String[] fields, int[]
>flags, Analyzer analyzer) throws ParseException {
>		return parse(query, fields, flags, analyzer, false);
>	}
>} 
>
>-----Oorspronkelijk bericht-----
>Van: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com] 
>Verzonden: woensdag 20 april 2005 15:21
>Aan: java-user@lucene.apache.org
>Onderwerp: Re: What is going on with subversion.
>
>Sorry, I've already read about servers moving.
>
>Can somebody mail me latest  MultiFieldQueryParser.java  and
>highlighting source code. Because I can't get it from subversion and I
>need it urgently.
>
>Thanks in advance.
>
>
>Regards,
>Volodymyr Bychkoviak
>
>Volodymyr Bychkoviak wrote:
>
>  
>
>>I can't connect svn.apache.org. It seems that apache.org is down.
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 16:44:02 2005
Return-Path: <java-user-return-14190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88024 invoked from network); 20 Apr 2005 16:44:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 16:44:01 -0000
Received: (qmail 15942 invoked by uid 500); 20 Apr 2005 13:47:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15907 invoked by uid 500); 20 Apr 2005 13:47:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15889 invoked by uid 99); 20 Apr 2005 13:47:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 06:47:10 -0700
Subject: RE: What is going on with subversion.
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 20 Apr 2005 15:47:07 +0200
Content-class: urn:content-classes:message
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA07114B@gerard.anchormen.nl>
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: What is going on with subversion.
Thread-Index: AcVFrvnfW/hW21kmQEul4i/BBnpx3QAABugA
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The MultiFieldQueryParser is of terrible design. It looks like it
extends the QueryParser, but it doesn`t. There are only a few static
methods that restrict the functionality of the QueryParser a lot. That
is why I have created this util class, that does exactly the same job
and has a few extra features. There still is a lot missing, but it does
the job at the moment. I guess and hope the original
MultifieldQueryParser in Lucene 2.0 will be of better design.

-----Oorspronkelijk bericht-----
Van: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]=20
Verzonden: woensdag 20 april 2005 15:43
Aan: java-user@lucene.apache.org
Onderwerp: Re: What is going on with subversion.

thanks.

Peter Veentjer - Anchor Men wrote:

>package com.jph.lucene.parsers;
>
>/**
> * Copyright 2004 The Apache Software Foundation
> *
> * Licensed under the Apache License, Version 2.0 (the "License");
> * you may not use this file except in compliance with the License.
> * You may obtain a copy of the License at
> *
> *     http://www.apache.org/licenses/LICENSE-2.0
> *
> * Unless required by applicable law or agreed to in writing, software
> * distributed under the License is distributed on an "AS IS" BASIS,
> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or=20
>implied.
> * See the License for the specific language governing permissions and
> * limitations under the License.
> */
>
>import org.apache.lucene.analysis.Analyzer;
>import org.apache.lucene.queryParser.MultiFieldQueryParser;
>import org.apache.lucene.queryParser.ParseException;
>import org.apache.lucene.queryParser.QueryParser;
>import org.apache.lucene.search.BooleanQuery;
>import org.apache.lucene.search.Query;
>
>/**
> * A QueryParser which constructs queries to indexSearcher multiple=20
>fields.
> * <p/>
> * Deze parser kan waarschijnlijk gekicked worden bij Lucene 2.0.
> *
> * @author Peter Veentjer
> */
>public class MultiFieldQueryParserUtil {
>	/**
>	 * <p/>
>	 * Parses a query which searches on the fields specified.
>	 * <p/>
>	 * If x fields are specified, this effectively constructs:
>	 * <pre>
>	 * <code>
>	 * (field1:query) (field2:query) (field3:query)...(fieldx:query)
>	 * </code>
>	 * </pre>
>	 *
>	 * @param query    Query string to parse
>	 * @param fields   Fields to indexSearcher on
>	 * @param analyzer Analyzer to use
>	 * @throws ParseException if query parsing fails
>	 * @throws org.apache.lucene.queryParser.TokenMgrError
>	 *                        if query parsing fails
>	 */
>	public static Query parse(String query, String[] fields,
Analyzer=20
>analyzer, boolean and) throws ParseException {
>		BooleanQuery bQuery =3D new BooleanQuery();
>		for (int i =3D 0; i < fields.length; i++) {
>			QueryParser queryParser =3D new
>QueryParser(fields[i], analyzer);
>			queryParser.setOperator(and ? QueryParser.AND :
>QueryParser.OR);
>			Query q =3D queryParser.parse(query);
>			bQuery.add(q, false, false);
>		}
>		return bQuery;
>	}
>
>	/**
>	 * <p/>
>	 * Parses a query, searching on the fields specified.
>	 * Use this if you need to specify certain fields as required,
>	 * and others as prohibited.
>	 * <p><pre>
>	 * Usage:
>	 * <code>
>	 * String[] fields =3D {"filename", "contents", "description"};
>	 * int[] flags =3D {MultiFieldQueryParser.NORMAL FIELD,
>	 *                MultiFieldQueryParser.REQUIRED FIELD,
>	 *                MultiFieldQueryParser.PROHIBITED FIELD,};
>	 * parse(query, fields, flags, analyzer);
>	 * </code>
>	 * </pre>
>	 * <p/>
>	 * The code above would construct a query:
>	 * <pre>
>	 * <code>
>	 * (filename:query) +(contents:query) -(description:query)
>	 * </code>
>	 * </pre>
>	 *
>	 * @param query    Query string to parse
>	 * @param fields   Fields to indexSearcher on
>	 * @param flags    Flags describing the fields
>	 * @param analyzer Analyzer to use
>	 * @throws ParseException if query parsing fails
>	 * @throws org.apache.lucene.queryParser.TokenMgrError
>	 *                        if query parsing fails
>	 */
>	public static Query parse(String query, String[] fields, int[]
flags,=20
>Analyzer analyzer, boolean and) throws ParseException {
>		if (query =3D=3D null)
>			throw new NullPointerException("query can`t be
null");
>		if (fields =3D=3D null)
>			throw new NullPointerException("fields can`t be
null");
>		if (flags =3D=3D null)
>			throw new NullPointerException("flags can`t be
null");
>		if (fields.length !=3D flags.length)
>			throw new IllegalArgumentException();
>		if (analyzer =3D=3D null)
>			throw new NullPointerException("analyzer can`t
be null");
>
>
>		BooleanQuery bQuery =3D new BooleanQuery();
>		for (int i =3D 0; i < fields.length; i++) {
>			QueryParser queryParser =3D new
>QueryParser(fields[i], analyzer);
>			queryParser.setOperator(and ? QueryParser.AND :
>QueryParser.OR);
>			Query q =3D queryParser.parse(query);
>
>			int flag =3D flags[i];
>			switch (flag) {
>				case
>MultiFieldQueryParser.REQUIRED_FIELD:
>					bQuery.add(q, true, false);
>					break;
>				case
>MultiFieldQueryParser.PROHIBITED_FIELD:
>					bQuery.add(q, false, true);
>					break;
>				case MultiFieldQueryParser.NORMAL_FIELD:
>					bQuery.add(q, false, false);
>					break;
>				default:
>					throw new
>IllegalArgumentException("unrecognized fieldflag: " + flag);
>			}
>		}
>		return bQuery;
>	}
>
>	public static Query parseAnd(String query, String[] fields,
int[]=20
>flags, Analyzer analyzer) throws ParseException {
>		return parse(query, fields, flags, analyzer, true);
>	}
>
>	public static Query parseOr(String query, String[] fields, int[]

>flags, Analyzer analyzer) throws ParseException {
>		return parse(query, fields, flags, analyzer, false);
>	}
>}
>
>-----Oorspronkelijk bericht-----
>Van: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]
>Verzonden: woensdag 20 april 2005 15:21
>Aan: java-user@lucene.apache.org
>Onderwerp: Re: What is going on with subversion.
>
>Sorry, I've already read about servers moving.
>
>Can somebody mail me latest  MultiFieldQueryParser.java  and=20
>highlighting source code. Because I can't get it from subversion and I=20
>need it urgently.
>
>Thanks in advance.
>
>
>Regards,
>Volodymyr Bychkoviak
>
>Volodymyr Bychkoviak wrote:
>
> =20
>
>>I can't connect svn.apache.org. It seems that apache.org is down.
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>   =20
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> =20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 16:54:41 2005
Return-Path: <java-user-return-14187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73074 invoked from network); 20 Apr 2005 16:54:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 16:54:41 -0000
Received: (qmail 77331 invoked by uid 500); 20 Apr 2005 13:33:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77278 invoked by uid 500); 20 Apr 2005 13:33:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77227 invoked by uid 99); 20 Apr 2005 13:33:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from exchange.bvdep.com (HELO exchange.bvdep.com) (193.194.158.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 06:33:02 -0700
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: RE: Passing XML objects to the analyzer ?
Date: Wed, 20 Apr 2005 15:32:50 +0200
Message-ID: <950FF7DE40C2B64CAF80B564732927E1039E7207@exchange.be.bvd>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Passing XML objects to the analyzer ?
thread-index: AcVFKO1vP4efPJzDQe6L+Je7rK6/TgAgqRnA
From: "Vanlerberghe, Luc" <Luc.Vanlerberghe@bvdep.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The problem with this approach is that the Analyser you will use for =
indexing will be *very* different from the one used for searching.

The way I see it, the Document objects pqssed to Lucene should contain =
fields that are as much text based as possible, comparable to what a =
user would type while searching.   It's the task of the Analyzer then to =
break the text up in terms, remove capitals, etc, etc... This should be =
kept as similar as possible for indexing and searching.

IMHO, only fields that are not Tokenized (like dates or keywords) or =
fields that are UnIndexed should contain 'raw' data.

Luc


-----Original Message-----
From: Paul Libbrecht [mailto:paul@activemath.org]=20
Sent: Tuesday, April 19, 2005 11:44 PM
To: java-user@lucene.apache.org
Subject: Re: Passing XML objects to the analyzer ?


Le 19 avr. 05, =E0 22:50, Erik Hatcher a =E9crit :
> The only catch that I know if is that an Analyzer is invoked on a=20
> per-field basis.  I can't tell exactly what you have in mind, but a=20
> Lucene Analyzer cannot split data into separate fields itself - it has =

> to have been split prior.

That's an easy one... ok, yes, I was clearly aware of this.

> I'm indexing a lot of XML myself, with JDOM in the middle, and using=20
> XPath to extract data per field before building the Document.

So wouldn't Field.Unstored(Object) actually make sense ?
That object, instead of being a reader, would be passed around till the =
analyzer call which would then decide to accept, say, JDOM objects...

paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 17:08:09 2005
Return-Path: <java-user-return-14178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24877 invoked from network); 20 Apr 2005 17:08:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 17:08:09 -0000
Received: (qmail 78037 invoked by uid 500); 20 Apr 2005 07:37:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77929 invoked by uid 500); 20 Apr 2005 07:37:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77910 invoked by uid 99); 20 Apr 2005 07:37:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from csunb0.leeds.ac.uk (HELO csunb0.leeds.ac.uk) (129.11.144.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 00:37:31 -0700
Received: from csunix.leeds.ac.uk (cserv1.leeds.ac.uk [129.11.144.20])
	by csunb0.leeds.ac.uk (8.12.11/8.12.11) with ESMTP id j3K7bRlk012103
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 08:37:27 +0100
Received: from csdhcp19.leeds.ac.uk (csdhcp19 [129.11.144.169]) by csunix.leeds.ac.uk (8.12.2/) with ESMTP id j3K7bR1D028068 for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 08:37:27 +0100 (BST)
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Re: Best way to purposely corrupt an index?
Date: Wed, 20 Apr 2005 08:40:53 +0000
User-Agent: KMail/1.8
References: <200504192122.08102.mail@andy-roberts.net> <42658846.4010904@dhlz.com>
In-Reply-To: <42658846.4010904@dhlz.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504200840.53608.mail@andy-roberts.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 19 Apr 2005 22:37, Daniel Herlitz wrote:
> I would suggest you simply do not create unusable indexes. :-)  

I agree! :) I am obviously very confident that my application is building 
indexes correctly. I'm thinking of the rarer instances whereby user or system 
error has caused a problem. These could be permission problems, bad sector 
forming on harddisk that happens to be the same sector containing an index, 
user accidentally removing a file in the index, a virus, etc. All seem pretty 
far fetched, but not impossible.

As the index is rather critical to my program, I just wanted to make it really 
robust, and able to cope should a problem occur with the index itself. 
Otherwise, the user will be left with a non-functioning program with no 
explanation. That's my reasoning anyway.

Andy


> Handle 
> catch/throw/finally correctly and it should not present any problems.
>
> Assume one app builds the index, another uses it:
>
> try: Build the index in a separate catalogue.
> finally: remove ('rm') production index and move ('mv') newly built
> index to its place. Notify using app that it should reopen its IndexReader.
>
> This relies on UNIX file handling semantics. (Can't say a word about
> Windows). Don't know if this applies at all to our situation, but it
> works for us.
>
> /D
>
> Andy Roberts wrote:
> >Hi,
> >
> >Seems like an odd request I'm sure. However, my application relies an
> > index, and should the index become unusable for some unfortunate reason,
> > I'd like my app to gracefully cope with this situation.
> >
> >Firstly, I need to know how to detect a broken index. Opening an
> > IndexReader can potentially throw an IOException if a problem occurs, but
> > presumably this will be thrown for other reasons, not just an unreadable
> > index. Would the IndexReader.indexExists() be better?
> >
> >Secondly, to test how my code responds to broken indexes, I'd like to
> >purposely break an index. Any suggestions, or will removing any file from
> > the directory be sufficient?
> >
> >Many thanks,
> >Andy
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 17:09:38 2005
Return-Path: <java-user-return-14177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28757 invoked from network); 20 Apr 2005 17:09:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 17:09:38 -0000
Received: (qmail 40813 invoked by uid 500); 20 Apr 2005 06:35:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39909 invoked by uid 500); 20 Apr 2005 06:35:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39893 invoked by uid 99); 20 Apr 2005 06:35:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.tanto.de (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 23:35:53 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 820D323CE3
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 08:36:04 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 07525-10 for <java-user@lucene.apache.org>;
 Wed, 20 Apr 2005 08:36:04 +0200 (CEST)
Received: from tucholsky.office.tanto.de (tucholsky.office.tanto.de [10.0.0.35])
	by mail.tanto.de (Postfix) with ESMTP id 55A6923CE0
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 08:36:04 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@localhost [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j3K6crH2021540
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 08:38:53 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) id j3K6crbO021536;
	Wed, 20 Apr 2005 08:38:53 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16997.63740.946343.598252@tanto-xipolis.de>
Date: Wed, 20 Apr 2005 08:38:52 +0200
To: java-user@lucene.apache.org
Subject: Re: numDocs method of IndexReader
In-Reply-To: <20050420023108.3362.qmail@web31110.mail.mud.yahoo.com>
References: <20050420023108.3362.qmail@web31110.mail.mud.yahoo.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis Gospodnetic writes:
> 
> The link to list archives should be on lucene.apache.org.
> 
It should, but the link there does not work.

All you get is 'Error occurred
Required parameter "listId" or "listName" is missing or invalid'
from mail-archives.apache.org

Something seems to be broken.

So the only archive available is
http://mail-archives.apache.org/mod_mbox/jakarta-lucene-user/

unfortunatley that's not searchable and ends beginning of March 2005...

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 17:30:09 2005
Return-Path: <java-user-return-14183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76301 invoked from network); 20 Apr 2005 17:30:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 17:30:08 -0000
Received: (qmail 91314 invoked by uid 500); 20 Apr 2005 11:53:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91289 invoked by uid 500); 20 Apr 2005 11:53:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91274 invoked by uid 99); 20 Apr 2005 11:53:46 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO uar.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 04:53:46 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id 3E8CE39F3B
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 14:53:42 +0300 (EEST)
Message-ID: <426642C5.4080103@i-hypergrid.com>
Date: Wed, 20 Apr 2005 14:53:41 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: WildCard search replacement
References: <20050419192216.46249.qmail@web32115.mail.mud.yahoo.com>
In-Reply-To: <20050419192216.46249.qmail@web32115.mail.mud.yahoo.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



Aalap Parikh wrote:

>Hi Volodymyr,
>
>About the trick you described about wildcard search
>replacement, you mentioned:
>
>  
>
>>So I found following workaround. I index this field
>>    
>>
>as > sequence of terms, each of containing single
>digit from > needed value. (For example I have
>123214213 value
>  
>
>>that needs to be indexed. Then it will be indexed as
>>sequence of 1,2,3,2,1,4,2,1,3
>>    
>>
>terms.)
>  
>
>>This can be done by custom Analyzer class.
>>    
>>
>
>When you index "123214213" as sequence of individual
>terms, what is the name of the the fields you use for
>each of the individual terms?
>  
>
same field name for all terms. lucene remembers terms positions withing 
document, so it gives you ability to use phrase query.

>Also, can you post your custom analyzer class?
>  
>

public class CharFilter extends TokenFilter {

private String text = null;

private int index = 0;

public CharFilter(TokenStream in) {
super(in);
}

public Token next() throws IOException {
if (text == null) {
Token token = input.next();
if (token == null) {
return null;
}
text = token.termText();
index = 0;
}

char c = text.charAt(index++);
Token token = new Token(String.valueOf(c), index, index - 1);
if (index >= text.length()) {
text = null;
}

return token;
}
}


public class CharSplitter extends StandardAnalyzer {

public TokenStream tokenStream(String fieldName, Reader reader) {
TokenStream stream = super.tokenStream(fieldName, reader);

if ("file".equals(fieldName)) {
return new CharFilter(stream);
}
return stream;

}
}

here this field is named "file" but you could change it to arbitrary.

Also this analyzer is not used in any application, I wrote it only to 
measure search speed.

>Thanks,
>Aalap.
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

regards,
Volodymyr Bychkoviak


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 17:44:46 2005
Return-Path: <java-user-return-14194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96591 invoked from network); 20 Apr 2005 17:44:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 17:44:46 -0000
Received: (qmail 98553 invoked by uid 500); 20 Apr 2005 17:44:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98519 invoked by uid 500); 20 Apr 2005 17:44:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98502 invoked by uid 99); 20 Apr 2005 17:44:44 -0000
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=FORGED_YAHOO_RCVD,FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web32113.mail.mud.yahoo.com (HELO web32113.mail.mud.yahoo.com) (68.142.207.127)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 20 Apr 2005 10:44:44 -0700
Received: (qmail 35507 invoked by uid 60001); 20 Apr 2005 17:44:36 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=QvBvb0DOmgcg12VGkzAw8/xNsGPvaeB5K4q15RsaQfwTqErZjk7iG1R7GOeu59sh2g1HdCUR6/3/rtIJ8gDrGG0uDiJO9XNub79twoUzzfqCgH+UVH9xtK2fGm+gNcwnWExiVInCSYy/33lfpo5m/U4d5ld3bo5dBBLopSYxm+A=  ;
Message-ID: <20050420174436.35505.qmail@web32113.mail.mud.yahoo.com>
Received: from [206.13.63.69] by web32113.mail.mud.yahoo.com via HTTP; Wed, 20 Apr 2005 10:44:36 PDT
Date: Wed, 20 Apr 2005 10:44:36 -0700 (PDT)
From: Aalap Parikh <aloo77@yahoo.com>
Subject: Re: WildCard search replacement
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

> Also this analyzer is not used in any application, I
> wrote it only to 
> measure search speed.

So you don't use the method you described for your
wildcard search trick?

Thanks,
Aalap.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 17:45:56 2005
Return-Path: <java-user-return-14195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97099 invoked from network); 20 Apr 2005 17:45:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 17:45:56 -0000
Received: (qmail 620 invoked by uid 500); 20 Apr 2005 17:45:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 587 invoked by uid 500); 20 Apr 2005 17:45:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 574 invoked by uid 99); 20 Apr 2005 17:45:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 10:45:50 -0700
Subject: RE: What is going on with subversion.
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C545D0.C5D0867E"
Date: Wed, 20 Apr 2005 19:43:48 +0200
Content-class: urn:content-classes:message
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA07C96F@gerard.anchormen.nl>
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <24CFCE44DCB015489FB96D38BDF4FCAA07C96F@gerard.anchormen.nl>
Thread-Topic: What is going on with subversion.
Thread-Index: AcVFw96gk5q+n6WSSTyTYX+1YDIq7gADKMBU
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C545D0.C5D0867E
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

You are right..  =20

________________________________

From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]
Sent: Wed 20-4-2005 18:12
To: java-user@lucene.apache.org
Subject: Re: What is going on with subversion.



IMHO QueryParser.DEFAULT_OPERATOR_AND and
QueryParser.DEFAULT_OPERATOR_OR should be used instead QueryParser.AND
and QueryParser.OR

Peter Veentjer - Anchor Men wrote:

>package com.jph.lucene.parsers;
>
>/**
> * Copyright 2004 The Apache Software Foundation
> *
> * Licensed under the Apache License, Version 2.0 (the "License");
> * you may not use this file except in compliance with the License.
> * You may obtain a copy of the License at
> *
> *     http://www.apache.org/licenses/LICENSE-2.0
> *
> * Unless required by applicable law or agreed to in writing, software
> * distributed under the License is distributed on an "AS IS" BASIS,
> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
>implied.
> * See the License for the specific language governing permissions and
> * limitations under the License.
> */
>
>import org.apache.lucene.analysis.Analyzer;
>import org.apache.lucene.queryParser.MultiFieldQueryParser;
>import org.apache.lucene.queryParser.ParseException;
>import org.apache.lucene.queryParser.QueryParser;
>import org.apache.lucene.search.BooleanQuery;
>import org.apache.lucene.search.Query;
>
>/**
> * A QueryParser which constructs queries to indexSearcher multiple
>fields.
> * <p/>
> * Deze parser kan waarschijnlijk gekicked worden bij Lucene 2.0.
> *
> * @author Peter Veentjer
> */
>public class MultiFieldQueryParserUtil {
>       /**
>        * <p/>
>        * Parses a query which searches on the fields specified.
>        * <p/>
>        * If x fields are specified, this effectively constructs:
>        * <pre>
>        * <code>
>        * (field1:query) (field2:query) (field3:query)...(fieldx:query)
>        * </code>
>        * </pre>
>        *
>        * @param query    Query string to parse
>        * @param fields   Fields to indexSearcher on
>        * @param analyzer Analyzer to use
>        * @throws ParseException if query parsing fails
>        * @throws org.apache.lucene.queryParser.TokenMgrError
>        *                        if query parsing fails
>        */
>       public static Query parse(String query, String[] fields,
>Analyzer analyzer, boolean and) throws ParseException {
>               BooleanQuery bQuery =3D new BooleanQuery();
>               for (int i =3D 0; i < fields.length; i++) {
>                       QueryParser queryParser =3D new
>QueryParser(fields[i], analyzer);
>                       queryParser.setOperator(and ? QueryParser.AND :
>QueryParser.OR);
>                       Query q =3D queryParser.parse(query);
>                       bQuery.add(q, false, false);
>               }
>               return bQuery;
>       }
>
>       /**
>        * <p/>
>        * Parses a query, searching on the fields specified.
>        * Use this if you need to specify certain fields as required,
>        * and others as prohibited.
>        * <p><pre>
>        * Usage:
>        * <code>
>        * String[] fields =3D {"filename", "contents", "description"};
>        * int[] flags =3D {MultiFieldQueryParser.NORMAL FIELD,
>        *                MultiFieldQueryParser.REQUIRED FIELD,
>        *                MultiFieldQueryParser.PROHIBITED FIELD,};
>        * parse(query, fields, flags, analyzer);
>        * </code>
>        * </pre>
>        * <p/>
>        * The code above would construct a query:
>        * <pre>
>        * <code>
>        * (filename:query) +(contents:query) -(description:query)
>        * </code>
>        * </pre>
>        *
>        * @param query    Query string to parse
>        * @param fields   Fields to indexSearcher on
>        * @param flags    Flags describing the fields
>        * @param analyzer Analyzer to use
>        * @throws ParseException if query parsing fails
>        * @throws org.apache.lucene.queryParser.TokenMgrError
>        *                        if query parsing fails
>        */
>       public static Query parse(String query, String[] fields, int[]
>flags, Analyzer analyzer, boolean and) throws ParseException {
>               if (query =3D=3D null)
>                       throw new NullPointerException("query can`t be
>null");
>               if (fields =3D=3D null)
>                       throw new NullPointerException("fields can`t be
>null");
>               if (flags =3D=3D null)
>                       throw new NullPointerException("flags can`t be
>null");
>               if (fields.length !=3D flags.length)
>                       throw new IllegalArgumentException();
>               if (analyzer =3D=3D null)
>                       throw new NullPointerException("analyzer can`t
>be null");
>
>
>               BooleanQuery bQuery =3D new BooleanQuery();
>               for (int i =3D 0; i < fields.length; i++) {
>                       QueryParser queryParser =3D new
>QueryParser(fields[i], analyzer);
>                       queryParser.setOperator(and ? QueryParser.AND :
>QueryParser.OR);
>                       Query q =3D queryParser.parse(query);
>
>                       int flag =3D flags[i];
>                       switch (flag) {
>                               case
>MultiFieldQueryParser.REQUIRED_FIELD:
>                                       bQuery.add(q, true, false);
>                                       break;
>                               case
>MultiFieldQueryParser.PROHIBITED_FIELD:
>                                       bQuery.add(q, false, true);
>                                       break;
>                               case MultiFieldQueryParser.NORMAL_FIELD:
>                                       bQuery.add(q, false, false);
>                                       break;
>                               default:
>                                       throw new
>IllegalArgumentException("unrecognized fieldflag: " + flag);
>                       }
>               }
>               return bQuery;
>       }
>
>       public static Query parseAnd(String query, String[] fields,
>int[] flags, Analyzer analyzer) throws ParseException {
>               return parse(query, fields, flags, analyzer, true);
>       }
>
>       public static Query parseOr(String query, String[] fields, int[]
>flags, Analyzer analyzer) throws ParseException {
>               return parse(query, fields, flags, analyzer, false);
>       }
>}
>
>-----Oorspronkelijk bericht-----
>Van: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com]
>Verzonden: woensdag 20 april 2005 15:21
>Aan: java-user@lucene.apache.org
>Onderwerp: Re: What is going on with subversion.
>
>Sorry, I've already read about servers moving.
>
>Can somebody mail me latest  MultiFieldQueryParser.java  and
>highlighting source code. Because I can't get it from subversion and I
>need it urgently.
>
>Thanks in advance.
>
>
>Regards,
>Volodymyr Bychkoviak
>
>Volodymyr Bychkoviak wrote:
>
>=20
>
>>I can't connect svn.apache.org. It seems that apache.org is down.
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>  =20
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






------_=_NextPart_001_01C545D0.C5D0867E
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C545D0.C5D0867E--

From java-user-return-14176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 17:47:27 2005
Return-Path: <java-user-return-14176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97823 invoked from network); 20 Apr 2005 17:47:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 17:47:27 -0000
Received: (qmail 31352 invoked by uid 500); 20 Apr 2005 06:27:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31327 invoked by uid 500); 20 Apr 2005 06:27:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31311 invoked by uid 99); 20 Apr 2005 06:27:28 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of petite.abeille@gmail.com designates 64.233.184.202 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 19 Apr 2005 23:27:24 -0700
Received: by wproxy.gmail.com with SMTP id 36so90823wra
        for <java-user@lucene.apache.org>; Tue, 19 Apr 2005 23:27:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=bNkcamaDju9CYZDymOqb/sXPV/cC5RRpD6LmsGXKNUJCRi4ttt9bTA9S/NtUGfqEHFWEUOlgANlcbKhhDr5sxLKnICutRwIz0eKTaojBkQ/Fer/rVIvV0uqz8deYOCahW+qMSurpwUQYhsmKy8Yf8uFBfJ3a8g2TzbycpY4qLQw=
Received: by 10.54.104.13 with SMTP id b13mr4229664wrc;
        Tue, 19 Apr 2005 23:00:42 -0700 (PDT)
Received: from ?10.0.1.14? ([62.167.56.39])
        by mx.gmail.com with ESMTP id g3sm1242303wra.2005.04.19.23.00.42;
        Tue, 19 Apr 2005 23:00:42 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <41989D7DF8323B4CB0F7A58F5BA0101905BB14@sydney.extremesoftware.ca>
References: <41989D7DF8323B4CB0F7A58F5BA0101905BB14@sydney.extremesoftware.ca>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <57f71135059323d0bc46198d7f86a9c0@gmail.com>
Content-Transfer-Encoding: 7bit
From: PA <petite.abeille@gmail.com>
Subject: Re: globally unique field
Date: Wed, 20 Apr 2005 08:00:27 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 20, 2005, at 04:09, Wesley MacDonald wrote:

> UID consists of a unique number based on a hashcode, system time and a
> counter, and a VMID contains a UID and adds a SHA hash based on IP
> address.

Hmmm... UUID?

http://en.wikipedia.org/wiki/UUID
http://java.sun.com/j2se/1.5.0/docs/api/java/util/UUID.html

Cheers

--
PA, Onnay Equitursay
http://alt.textdrive.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 17:51:41 2005
Return-Path: <java-user-return-14180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9484 invoked from network); 20 Apr 2005 17:51:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 17:51:41 -0000
Received: (qmail 91231 invoked by uid 500); 20 Apr 2005 08:39:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91198 invoked by uid 500); 20 Apr 2005 08:39:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91140 invoked by uid 99); 20 Apr 2005 08:39:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from csunb0.leeds.ac.uk (HELO csunb0.leeds.ac.uk) (129.11.144.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 01:39:42 -0700
Received: from csunix.leeds.ac.uk (cserv1.leeds.ac.uk [129.11.144.20])
	by csunb0.leeds.ac.uk (8.12.11/8.12.11) with ESMTP id j3K8ddAo016754
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 09:39:39 +0100
Received: from csdhcp19.leeds.ac.uk (csdhcp19 [129.11.144.169]) by csunix.leeds.ac.uk (8.12.2/) with ESMTP id j3K8dc0Q012985 for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 09:39:39 +0100 (BST)
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Re: Best way to purposely corrupt an index?
Date: Wed, 20 Apr 2005 09:43:05 +0000
User-Agent: KMail/1.8
References: <200504192122.08102.mail@andy-roberts.net> <200504200840.53608.mail@andy-roberts.net> <42661267.6000709@blizzy.de>
In-Reply-To: <42661267.6000709@blizzy.de>
MIME-Version: 1.0
Content-Disposition: inline
Message-Id: <200504200943.05470.mail@andy-roberts.net>
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 20 Apr 2005 08:27, Maik Schreiber wrote:
> > As the index is rather critical to my program, I just wanted to make it
> > really robust, and able to cope should a problem occur with the index
> > itself. Otherwise, the user will be left with a non-functioning program
> > with no explanation. That's my reasoning anyway.
>
> You should perhaps go about implementing an automatic index backup feature
> of some sort. In the case of index corruption you would at least be able to
> go back to the latest backup.

Don't worry, I know what I intend to do *should* an error exist. My original 
post was about how to detect corrupt indexes, and also how to purposely 
corrupt an index for the purposes of testing.

Note, IndexReader throws IOExceptions, but, this could be for a multitude of 
reasons, not just a corrupt index. I was rather hoping for a 
CorruptIndexException of some sort!

It looks to me that if I do get an IOException, I will then have to perform a 
number of additional checks to eliminate the other possible causes of 
IOExceptions (such as permissions issues), and by a process of elimination, 
determine a corrupt index.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 17:57:12 2005
Return-Path: <java-user-return-14179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12972 invoked from network); 20 Apr 2005 17:57:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 17:57:12 -0000
Received: (qmail 63913 invoked by uid 500); 20 Apr 2005 08:26:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63860 invoked by uid 500); 20 Apr 2005 08:26:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63827 invoked by uid 99); 20 Apr 2005 08:26:52 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of blizzy-keyword-lucene_user.f5486d@blizzy.de designates 212.79.22.222 as permitted sender)
Received: from subshell.com (HELO subshell.com) (212.79.22.222)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 01:26:51 -0700
Received: (qmail 16339 invoked from network); 20 Apr 2005 10:26:48 +0200
Received: from unknown (HELO ?10.0.0.10?) (212.79.22.193)
  by subshell.com with SMTP; 20 Apr 2005 10:26:48 +0200
Message-ID: <42661267.6000709@blizzy.de>
Date: Wed, 20 Apr 2005 10:27:19 +0200
From: Maik Schreiber <blizzy-keyword-lucene_user.f5486d@blizzy.de>
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050326)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Best way to purposely corrupt an index?
References: <200504192122.08102.mail@andy-roberts.net> <42658846.4010904@dhlz.com> <200504200840.53608.mail@andy-roberts.net>
In-Reply-To: <200504200840.53608.mail@andy-roberts.net>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> As the index is rather critical to my program, I just wanted to make it really 
> robust, and able to cope should a problem occur with the index itself. 
> Otherwise, the user will be left with a non-functioning program with no 
> explanation. That's my reasoning anyway.

You should perhaps go about implementing an automatic index backup feature of
some sort. In the case of index corruption you would at least be able to go
back to the latest backup.

-- 
Maik Schreiber   *   http://www.blizzy.de

GPG public key: http://pgp.mit.edu:11371/pks/lookup?op=get&search=0x1F11D713
Key fingerprint: CF19 AFCE 6E3D 5443 9599 18B5 5640 1F11 D713

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 18:12:55 2005
Return-Path: <java-user-return-14196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21738 invoked from network); 20 Apr 2005 18:12:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 18:12:54 -0000
Received: (qmail 71656 invoked by uid 500); 20 Apr 2005 18:12:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71634 invoked by uid 500); 20 Apr 2005 18:12:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71617 invoked by uid 99); 20 Apr 2005 18:12:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: softfail (hermes.apache.org: transitioning domain of lucenelist@danielnaber.de does not designate 80.67.18.13 as permitted sender)
Received: from smtprelay01.ispgateway.de (HELO smtprelay01.ispgateway.de) (80.67.18.13)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 11:12:49 -0700
Received: (qmail 26087 invoked from network); 20 Apr 2005 18:12:39 -0000
Received: from unknown (HELO p54964AF4.dip.t-dialin.net) ([pbs]937788@[84.150.74.244])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 20 Apr 2005 18:12:39 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Scoring, cosine measure
Date: Wed, 20 Apr 2005 20:12:15 +0200
User-Agent: KMail/1.8
References: <42664550.9020104@web.de> <200504201822.26939.paul.elschot@xs4all.nl>
In-Reply-To: <200504201822.26939.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504202012.15376@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 20 April 2005 18:22, Paul Elschot wrote:

> > Has anyone tried an index based on n-grams?
>
> Nutch has bigrams for phrases with frequently occurring words.

Also the spell checker  in SVN uses n-grams I think.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 19:03:53 2005
Return-Path: <java-user-return-14197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36873 invoked from network); 20 Apr 2005 19:03:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 19:03:53 -0000
Received: (qmail 75421 invoked by uid 500); 20 Apr 2005 19:03:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75399 invoked by uid 500); 20 Apr 2005 19:03:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75383 invoked by uid 99); 20 Apr 2005 19:03:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from server1.hostmon.com (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 12:03:50 -0700
Received: (qmail 11715 invoked by uid 532); 20 Apr 2005 19:01:36 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 3.0.2.  Clear:. 
 Processed in 0.215088 secs); 20 Apr 2005 19:01:36 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 20 Apr 2005 19:01:36 -0000
Message-ID: <4266A7B3.4010102@tropo.com>
Date: Wed, 20 Apr 2005 12:04:19 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.3) Gecko/20040910
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Scoring, cosine measure
References: <42664550.9020104@web.de> <200504201822.26939.paul.elschot@xs4all.nl> <200504202012.15376@danielnaber.de>
In-Reply-To: <200504202012.15376@danielnaber.de>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:

> On Wednesday 20 April 2005 18:22, Paul Elschot wrote:
> 
> 
>>>Has anyone tried an index based on n-grams?
>>
>>Nutch has bigrams for phrases with frequently occurring words.
> 
> 
> Also the spell checker  in SVN uses n-grams I think.


SVN here:

http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/spellchecker/

Weblog entry about it, which has more links

http://www.searchmorph.com/weblog/index.php?id=23

> 
> Regards
>  Daniel
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 19:14:46 2005
Return-Path: <java-user-return-14198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40837 invoked from network); 20 Apr 2005 19:14:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 19:14:46 -0000
Received: (qmail 96033 invoked by uid 500); 20 Apr 2005 19:14:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95917 invoked by uid 500); 20 Apr 2005 19:14:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95860 invoked by uid 99); 20 Apr 2005 19:14:28 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from shared4.hardhathosting.com (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 12:14:28 -0700
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j3KJEVM23184
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 14:14:32 -0500
Message-ID: <4266AA09.90108@getopt.org>
Date: Wed, 20 Apr 2005 21:14:17 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Scoring, cosine measure
References: <42664550.9020104@web.de> <200504201822.26939.paul.elschot@xs4all.nl> <200504202012.15376@danielnaber.de>
In-Reply-To: <200504202012.15376@danielnaber.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:
> On Wednesday 20 April 2005 18:22, Paul Elschot wrote:
> 
> 
>>>Has anyone tried an index based on n-grams?
>>
>>Nutch has bigrams for phrases with frequently occurring words.
> 
> 
> Also the spell checker  in SVN uses n-grams I think.

Yes, but Nutch uses word n-grams, whereas the spell checker uses 
character n-grams.



-- 
Best regards,
Andrzej Bialecki
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 19:51:00 2005
Return-Path: <java-user-return-14199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67262 invoked from network); 20 Apr 2005 19:51:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 19:51:00 -0000
Received: (qmail 59866 invoked by uid 500); 20 Apr 2005 19:51:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59846 invoked by uid 500); 20 Apr 2005 19:51:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59832 invoked by uid 99); 20 Apr 2005 19:51:00 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 12:51:00 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 40ED4E4801
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 21:50:49 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 196F0E47FD
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2005 21:50:49 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <950FF7DE40C2B64CAF80B564732927E1039E7207@exchange.be.bvd>
References: <950FF7DE40C2B64CAF80B564732927E1039E7207@exchange.be.bvd>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <13ea4e1b1f92732bbfe4ca75c8411698@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: Passing XML objects to the analyzer ?
Date: Wed, 20 Apr 2005 21:50:46 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't agree with this if the query is expected to contain the same=20
"text-encoding" as the content being analyzed.

So one example would be matching
     f is continuous since it is the product of g and x |-> x^2
(in "email notation", we work with a semantic encoding)
This combination of text and formula (which we represent as OpenMath)=20
would be both something that could be queried as a phrase and something=20=

that would be a content.
Of course, you're left with the query input which is a separate problem=20=

closer to the controls for content authoring anyways.

One natural effect of XML is the mark of a region as being a reference=20=

to a named entity such as could be done in HTML with
  <a href=3D"def_continuous">continuous function</a>
Here one would like to match both the "symbol" continuous (that is the=20=

reference def_continuous as well as the words continuous function.
What I could read thus far about position-increment to offer=20
alternatives seems to be limited to one word.

paul


Le 20 avr. 05, =E0 15:32, Vanlerberghe, Luc a =E9crit :

> The problem with this approach is that the Analyser you will use for=20=

> indexing will be *very* different from the one used for searching.
>
> The way I see it, the Document objects pqssed to Lucene should contain=20=

> fields that are as much text based as possible, comparable to what a=20=

> user would type while searching.   It's the task of the Analyzer then=20=

> to break the text up in terms, remove capitals, etc, etc... This=20
> should be kept as similar as possible for indexing and searching.
>
> IMHO, only fields that are not Tokenized (like dates or keywords) or=20=

> fields that are UnIndexed should contain 'raw' data.
>
> Luc
>
>
> -----Original Message-----
> From: Paul Libbrecht [mailto:paul@activemath.org]
> Sent: Tuesday, April 19, 2005 11:44 PM
> To: java-user@lucene.apache.org
> Subject: Re: Passing XML objects to the analyzer ?
>
>
> Le 19 avr. 05, =E0 22:50, Erik Hatcher a =E9crit :
>> The only catch that I know if is that an Analyzer is invoked on a
>> per-field basis.  I can't tell exactly what you have in mind, but a
>> Lucene Analyzer cannot split data into separate fields itself - it =
has
>> to have been split prior.
>
> That's an easy one... ok, yes, I was clearly aware of this.
>
>> I'm indexing a lot of XML myself, with JDOM in the middle, and using
>> XPath to extract data per field before building the Document.
>
> So wouldn't Field.Unstored(Object) actually make sense ?
> That object, instead of being a reader, would be passed around till=20
> the analyzer call which would then decide to accept, say, JDOM=20
> objects...
>
> paul
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 20 23:05:34 2005
Return-Path: <java-user-return-14200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41411 invoked from network); 20 Apr 2005 23:05:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2005 23:05:34 -0000
Received: (qmail 27883 invoked by uid 500); 20 Apr 2005 23:05:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27866 invoked by uid 500); 20 Apr 2005 23:05:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 92429 invoked by uid 99); 20 Apr 2005 12:52:06 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Subject: RE: Best way to purposely corrupt an index?
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Wed, 20 Apr 2005 08:52:07 -0400
Message-ID: <6C1FF371E2319F45BABA49F9BA1BD039036F3F@mail.lou.emergint.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Best way to purposely corrupt an index?
Thread-Index: AcVFhJFtZ8W4wb/ERQaMSPR13Eg17wAIKYpw
From: "Kevin L. Cobb" <cobbk@emergint.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My policy on this type of exception handling is to only byte off what
you can chew. If you catch an IOException, then you simply report to the
user that an unexpected error has occurred and the search engine is
unobtainable at the moment. Errors should be logged and developers
should look at the specifics of the error to solve the issue. As you
implied, either it's a corrupted index, a permission problem, or another
access problem.=20

Trying to attack the issue much deeper than this will sacrifice
development/maintenance time for very little payback in the end if you
expect this error to occur infrequently.=20



-----Original Message-----
From: Andy Roberts [mailto:mail@andy-roberts.net]=20
Sent: Wednesday, April 20, 2005 5:43 AM
To: java-user@lucene.apache.org
Subject: Re: Best way to purposely corrupt an index?

On Wednesday 20 Apr 2005 08:27, Maik Schreiber wrote:
> > As the index is rather critical to my program, I just wanted to make
it
> > really robust, and able to cope should a problem occur with the
index
> > itself. Otherwise, the user will be left with a non-functioning
program
> > with no explanation. That's my reasoning anyway.
>
> You should perhaps go about implementing an automatic index backup
feature
> of some sort. In the case of index corruption you would at least be
able to
> go back to the latest backup.

Don't worry, I know what I intend to do *should* an error exist. My
original=20
post was about how to detect corrupt indexes, and also how to purposely=20
corrupt an index for the purposes of testing.

Note, IndexReader throws IOExceptions, but, this could be for a
multitude of=20
reasons, not just a corrupt index. I was rather hoping for a=20
CorruptIndexException of some sort!

It looks to me that if I do get an IOException, I will then have to
perform a=20
number of additional checks to eliminate the other possible causes of=20
IOExceptions (such as permissions issues), and by a process of
elimination,=20
determine a corrupt index.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 00:06:03 2005
Return-Path: <java-user-return-14201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61543 invoked from network); 21 Apr 2005 00:06:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 00:06:03 -0000
Received: (qmail 91919 invoked by uid 500); 21 Apr 2005 00:06:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91893 invoked by uid 500); 21 Apr 2005 00:06:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91878 invoked by uid 99); 21 Apr 2005 00:06:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 17:06:03 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: fields that are indexed as UnStored
Date: Wed, 20 Apr 2005 20:05:53 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA01082A27@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Best way to purposely corrupt an index?
thread-index: AcVFhJFtZ8W4wb/ERQaMSPR13Eg17wAIKYpwABgapsA=
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi guys,

If a field is indexed as UnStored how can I get it value?
I tried document.get("UnStored_field") it returns null.

thanks

-----Original Message-----
From: Kevin L. Cobb [mailto:cobbk@emergint.com]
Sent: Wednesday, April 20, 2005 8:52 AM
To: java-user@lucene.apache.org
Subject: RE: Best way to purposely corrupt an index?


My policy on this type of exception handling is to only byte off what
you can chew. If you catch an IOException, then you simply report to the
user that an unexpected error has occurred and the search engine is
unobtainable at the moment. Errors should be logged and developers
should look at the specifics of the error to solve the issue. As you
implied, either it's a corrupted index, a permission problem, or another
access problem.=20

Trying to attack the issue much deeper than this will sacrifice
development/maintenance time for very little payback in the end if you
expect this error to occur infrequently.=20



-----Original Message-----
From: Andy Roberts [mailto:mail@andy-roberts.net]=20
Sent: Wednesday, April 20, 2005 5:43 AM
To: java-user@lucene.apache.org
Subject: Re: Best way to purposely corrupt an index?

On Wednesday 20 Apr 2005 08:27, Maik Schreiber wrote:
> > As the index is rather critical to my program, I just wanted to make
it
> > really robust, and able to cope should a problem occur with the
index
> > itself. Otherwise, the user will be left with a non-functioning
program
> > with no explanation. That's my reasoning anyway.
>
> You should perhaps go about implementing an automatic index backup
feature
> of some sort. In the case of index corruption you would at least be
able to
> go back to the latest backup.

Don't worry, I know what I intend to do *should* an error exist. My
original=20
post was about how to detect corrupt indexes, and also how to purposely=20
corrupt an index for the purposes of testing.

Note, IndexReader throws IOExceptions, but, this could be for a
multitude of=20
reasons, not just a corrupt index. I was rather hoping for a=20
CorruptIndexException of some sort!

It looks to me that if I do get an IOException, I will then have to
perform a=20
number of additional checks to eliminate the other possible causes of=20
IOExceptions (such as permissions issues), and by a process of
elimination,=20
determine a corrupt index.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 00:36:06 2005
Return-Path: <java-user-return-14202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5188 invoked from network); 21 Apr 2005 00:36:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 00:36:05 -0000
Received: (qmail 41014 invoked by uid 500); 21 Apr 2005 00:36:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40972 invoked by uid 500); 21 Apr 2005 00:36:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40957 invoked by uid 99); 21 Apr 2005 00:36:02 -0000
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=FORGED_YAHOO_RCVD,FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web32112.mail.mud.yahoo.com (HELO web32112.mail.mud.yahoo.com) (68.142.207.126)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 20 Apr 2005 17:36:02 -0700
Received: (qmail 64717 invoked by uid 60001); 21 Apr 2005 00:35:51 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=rRzOoLufIhqsgITsga+kSj+GTEmiFeEh+qTzTYGlQN86unyuIwylAGl6UKvhZgWAY2s5bke66Fqpzfwutft1QbPhT4z1bhTHp3tEq0wmC2r35fEKug47BrvG/MZzveYSZZFis6x/ZImXZfJZiBwP23vGOYrSu/3T31ImbitW4PI=  ;
Message-ID: <20050421003551.64715.qmail@web32112.mail.mud.yahoo.com>
Received: from [206.13.63.69] by web32112.mail.mud.yahoo.com via HTTP; Wed, 20 Apr 2005 17:35:51 PDT
Date: Wed, 20 Apr 2005 17:35:51 -0700 (PDT)
From: Aalap Parikh <aloo77@yahoo.com>
Subject: Re: Lucene bulk indexing
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have similar issues in indexing time.

I am doing a SELECT from database and getting back
10,000 rows. I then start indexing each row and hence
would have 10,000 documents in my Lucene index. Each
doc has 27 fields.

I added some timing code to my indexing process. The
DB select call takes around 23 seconds and the
indexing process takes 567 seconds. Also, I profiled
the app using JProfiler and found out that 90% of time
is spent in the IndexWriter.addDocument call. As
expected, there were 10,000 invocation of that method
(one for each doc) and the profiler showed that the
method took 90% of the processing time.

I am concerned that it is taking around 9.5 minutes
for 10,000 docs and I am expecting to have around
600,000 docs to index. So that would take 570 minutes
(9-10 hours) to index and which is HUGE!!!

My machine: Pentium 4 CPU 2.40 GHz
            RAM 1 GB

Any help appreciated.

Thanks,
Aalap.


--- skoptelov@fis.ru wrote:
> Ð ÑÐ¾Ð¾Ð±ÑÐµÐ½Ð¸Ð¸ Ð¾Ñ Ð¡ÑÐµÐ´Ð° 20
> ÐÐ¿ÑÐµÐ»Ñ 2005 04:07 Mufaddal Khumri
> Ð½Ð°Ð¿Ð¸ÑÐ°Ð»(a):
> > The 20000 products I mentioned are 20000 rows. I
> get the products in
> > bulk by using a limit clause.
> >
> > I am using hibernate with MySQL server on a
> 2.8GHz, 1.00GB Ram machine.
> 
> Maybe your session-level cache in hibernate grows
> incredibly. Do you do 
> Session.clear() sometimes while doing indexing?
> Here's a link about batching 
> & hibernate:
>
http://blog.hibernate.org/cgi-bin/blosxom.cgi/2004/08/
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 00:37:32 2005
Return-Path: <java-user-return-14203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5706 invoked from network); 21 Apr 2005 00:37:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 00:37:32 -0000
Received: (qmail 43363 invoked by uid 500); 21 Apr 2005 00:37:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43343 invoked by uid 500); 21 Apr 2005 00:37:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43330 invoked by uid 99); 21 Apr 2005 00:37:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 17:37:32 -0700
Received: from [172.25.1.184] ([::ffff:67.125.239.59])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Wed, 20 Apr 2005 19:37:23 -0500
  id 00074200.4266F5C3.0000538F
Message-ID: <4266F5B4.6080502@allthingslocal.com>
Date: Wed, 20 Apr 2005 17:37:08 -0700
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: fields that are indexed as UnStored
References: <63434C14F9A6F74CB36B85033E4C30CA01082A27@hermes.corp.cyveillance.com>
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA01082A27@hermes.corp.cyveillance.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Omar Didi writes (4/20/2005 5:05 PM):

>Hi guys,
>
>If a field is indexed as UnStored how can I get it value?
>I tried document.get("UnStored_field") it returns null.
>  
>
You didn't store it, so it's not there.  If the field happens to be a 
single Term, you might be able to find it in the index, expensively.  If 
not, it ranges from difficult to impossible.

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 01:41:11 2005
Return-Path: <java-user-return-14204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42935 invoked from network); 21 Apr 2005 01:41:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 01:41:11 -0000
Received: (qmail 25120 invoked by uid 500); 21 Apr 2005 01:41:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25073 invoked by uid 500); 21 Apr 2005 01:41:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25060 invoked by uid 99); 21 Apr 2005 01:41:08 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31103.mail.mud.yahoo.com (HELO web31103.mail.mud.yahoo.com) (68.142.200.36)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 20 Apr 2005 18:41:08 -0700
Received: (qmail 52381 invoked by uid 60001); 21 Apr 2005 01:40:57 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=3+a1+HHi2bPirc3NRNPdFqI2TyyxICtc1UYvZEBrLYbSrWLlM6CYiv6D9ExTJP+21aXop3gyiGu0ZQTGHruxz84707YEDnY2IRCdth0bvEh/QNFUqG+wbToCeQ5yWGB2HuAIO+FBiRymv9wrHR7OiS473nRDxHTbgLojeNlg5Xs=  ;
Message-ID: <20050421014057.52379.qmail@web31103.mail.mud.yahoo.com>
Received: from [69.201.130.192] by web31103.mail.mud.yahoo.com via HTTP; Wed, 20 Apr 2005 18:40:57 PDT
Date: Wed, 20 Apr 2005 18:40:57 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene bulk indexing
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That sounds way too long, unless you have veeery slow disks, veeery
large Documents (long fields that you analyze, index, and store in
Lucene), or some such.
If you have very loooong fiiiiieeeelds you could try setting
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.html#maxFieldLength
to a very small number and see if that changes performance drastically.
 There are other IndexWriter knobs you can fiddle with.

I've seen Hibernate 2.* get sluggish once its Session gets filled up
with a lot of objects.

Otis


--- Aalap Parikh <aloo77@yahoo.com> wrote:
> Hi,
> 
> I have similar issues in indexing time.
> 
> I am doing a SELECT from database and getting back
> 10,000 rows. I then start indexing each row and hence
> would have 10,000 documents in my Lucene index. Each
> doc has 27 fields.
> 
> I added some timing code to my indexing process. The
> DB select call takes around 23 seconds and the
> indexing process takes 567 seconds. Also, I profiled
> the app using JProfiler and found out that 90% of time
> is spent in the IndexWriter.addDocument call. As
> expected, there were 10,000 invocation of that method
> (one for each doc) and the profiler showed that the
> method took 90% of the processing time.
> 
> I am concerned that it is taking around 9.5 minutes
> for 10,000 docs and I am expecting to have around
> 600,000 docs to index. So that would take 570 minutes
> (9-10 hours) to index and which is HUGE!!!
> 
> My machine: Pentium 4 CPU 2.40 GHz
>             RAM 1 GB
> 
> Any help appreciated.
> 
> Thanks,
> Aalap.
> 
> 
> --- skoptelov@fis.ru wrote:
> > Ð ÑÐ¾Ð¾Ð±ÑÐµÐ½Ð¸Ð¸ Ð¾Ñ Ð¡ÑÐµÐ´Ð° 20
> > ÐÐ¿ÑÐµÐ»Ñ 2005 04:07 Mufaddal Khumri
> > Ð½Ð°Ð¿Ð¸ÑÐ°Ð»(a):
> > > The 20000 products I mentioned are 20000 rows. I
> > get the products in
> > > bulk by using a limit clause.
> > >
> > > I am using hibernate with MySQL server on a
> > 2.8GHz, 1.00GB Ram machine.
> > 
> > Maybe your session-level cache in hibernate grows
> > incredibly. Do you do 
> > Session.clear() sometimes while doing indexing?
> > Here's a link about batching 
> > & hibernate:
> >
> http://blog.hibernate.org/cgi-bin/blosxom.cgi/2004/08/
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > 
> > 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 03:21:57 2005
Return-Path: <java-user-return-14205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83984 invoked from network); 21 Apr 2005 03:21:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 03:21:54 -0000
Received: (qmail 49593 invoked by uid 500); 21 Apr 2005 03:21:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49568 invoked by uid 500); 21 Apr 2005 03:21:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49554 invoked by uid 99); 21 Apr 2005 03:21:54 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31102.mail.mud.yahoo.com (HELO web31102.mail.mud.yahoo.com) (68.142.200.35)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 20 Apr 2005 20:21:54 -0700
Received: (qmail 69931 invoked by uid 60001); 21 Apr 2005 03:21:42 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=qE6bbecf5HyTvdvbdW3twrITdV6rbamlRc1osTGqEEiHMp4bqaRzJfShEMBM4STSkKRgY0ZzosQnNurxIyoVWh0gnO/A4Y7TottV7f/wlETJbV2NEZyFhOaE4ybwwE/x9bHmDw6uHJdBARVOBcHqCfuKCqeqiRPM0LUmZqfRt+I=  ;
Message-ID: <20050421032142.69929.qmail@web31102.mail.mud.yahoo.com>
Received: from [69.201.130.192] by web31102.mail.mud.yahoo.com via HTTP; Wed, 20 Apr 2005 20:21:42 PDT
Date: Wed, 20 Apr 2005 20:21:42 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: numDocs method of IndexReader
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


--- Tomcat Programmer <tcprogrammer@yahoo.com> wrote:
> 
> Hi Otis, 
> 
> Thanks for your answer on the integer issue. I was not
> sure if the index was actually limited, or if it was
> just the numDocs method call. I guess it really does
> not matter which it is; and for me, I don't think my
> index will ever get that large!  I do have a couple of
> questions from your response: 
> 
> > 
> > Iterating the index like that is ok, but each call
> > do reader.document(int) pulls the entire Document 
> > off the disk, which can get expensive.
> > 
> 
> Thanks for the clarification. Is there a 'better' i.e.
> less expensive way to extract values from each
> document than to iterate through them in that fashion?
> I would appreciate any suggestions that you can offer.

I don't think so.  You may want to check whether Documents are deleted
before you pull them, that's all.

> > The link to list archives should be on
> > lucene.apache.org.
> > 
> 
> I checked the lucene.apache.org site. The
> "Lucene-user" link (on the left under the Resources
> heading) which points to the eyebrowse apache site is
> broken. The Achive link for lucene-user under the
> "mailing lists" page points takes you to the mbox
> archive which is not searchable. 

Thanks, I removed the stale links.

> Hopefully these problems will be corrected soon. In
> the mean time, does anyone know of any other sites
> that might be archiving the lucene-user list and which
> provide a search capability? 

http://www.mail-archive.com/index.php?hunt=lucene

Otis


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 06:41:29 2005
Return-Path: <java-user-return-14206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37315 invoked from network); 21 Apr 2005 06:41:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 06:41:29 -0000
Received: (qmail 20700 invoked by uid 500); 21 Apr 2005 06:41:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20661 invoked by uid 500); 21 Apr 2005 06:41:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20648 invoked by uid 99); 21 Apr 2005 06:41:18 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO uar.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 20 Apr 2005 23:41:18 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id CF2583054F
	for <java-user@lucene.apache.org>; Thu, 21 Apr 2005 09:41:03 +0300 (EEST)
Message-ID: <42674B18.7070602@i-hypergrid.com>
Date: Thu, 21 Apr 2005 09:41:28 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: WildCard search replacement
References: <20050420174436.35505.qmail@web32113.mail.mud.yahoo.com>
In-Reply-To: <20050420174436.35505.qmail@web32113.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I used It to measure speed and  but I was planning to use it in file 
search application. when u need wildcard search like *.txt and so on. 
The matter is that file search application  is not my primary job, so I 
will tune it later.
This is just an example to give you an idea how it can work.

regards,
Volodymyr Bychkoviak

Aalap Parikh wrote:

>Hi,
>
>  
>
>>Also this analyzer is not used in any application, I
>>wrote it only to 
>>measure search speed.
>>    
>>
>
>So you don't use the method you described for your
>wildcard search trick?
>
>Thanks,
>Aalap.
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 08:41:08 2005
Return-Path: <java-user-return-14207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96688 invoked from network); 21 Apr 2005 08:41:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 08:41:08 -0000
Received: (qmail 10347 invoked by uid 500); 21 Apr 2005 08:41:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10319 invoked by uid 500); 21 Apr 2005 08:41:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10300 invoked by uid 99); 21 Apr 2005 08:41:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from csunb0.leeds.ac.uk (HELO csunb0.leeds.ac.uk) (129.11.144.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 21 Apr 2005 01:41:04 -0700
Received: from csunix.leeds.ac.uk (cserv1.leeds.ac.uk [129.11.144.20])
	by csunb0.leeds.ac.uk (8.12.11/8.12.11) with ESMTP id j3L8enBQ015378
	for <java-user@lucene.apache.org>; Thu, 21 Apr 2005 09:40:49 +0100
Received: from csdhcp19.leeds.ac.uk (csdhcp19 [129.11.144.169]) by csunix.leeds.ac.uk (8.12.2/) with ESMTP id j3L8enan003524 for <java-user@lucene.apache.org>; Thu, 21 Apr 2005 09:40:49 +0100 (BST)
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Re: Best way to purposely corrupt an index?
Date: Thu, 21 Apr 2005 09:44:17 +0000
User-Agent: KMail/1.8
References: <6C1FF371E2319F45BABA49F9BA1BD039036F3F@mail.lou.emergint.com>
In-Reply-To: <6C1FF371E2319F45BABA49F9BA1BD039036F3F@mail.lou.emergint.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504210944.17801.mail@andy-roberts.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 20 Apr 2005 12:52, Kevin L. Cobb wrote:
> My policy on this type of exception handling is to only byte off what
> you can chew. If you catch an IOException, then you simply report to the
> user that an unexpected error has occurred and the search engine is
> unobtainable at the moment. Errors should be logged and developers
> should look at the specifics of the error to solve the issue. As you
> implied, either it's a corrupted index, a permission problem, or another
> access problem.


Of course, you are making the assumption that Lucene is only used in the 
context of online search engines. This is not the case here. I have developed 
a stand alone application for text analysis, and I bundle the Lucene jar with 
it to store text in an efficient index. Once the software is on the users' 
computer, I don't want to be doing any maintenance of their indexes! (And I'm 
sure they'd prefer it that way too)

Andy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 10:22:52 2005
Return-Path: <java-user-return-14208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37269 invoked from network); 21 Apr 2005 10:22:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 10:22:52 -0000
Received: (qmail 23504 invoked by uid 500); 21 Apr 2005 10:22:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23478 invoked by uid 500); 21 Apr 2005 10:22:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23465 invoked by uid 99); 21 Apr 2005 10:22:55 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from shared4.hardhathosting.com (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 21 Apr 2005 03:22:55 -0700
Received: from [192.168.101.96] ([213.80.34.34])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j3LAMiY10659
	for <java-user@lucene.apache.org>; Thu, 21 Apr 2005 05:22:44 -0500
Message-ID: <42677EEF.1090709@getopt.org>
Date: Thu, 21 Apr 2005 12:22:39 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: fields that are indexed as UnStored
References: <63434C14F9A6F74CB36B85033E4C30CA01082A27@hermes.corp.cyveillance.com> <4266F5B4.6080502@allthingslocal.com>
In-Reply-To: <4266F5B4.6080502@allthingslocal.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chuck Williams wrote:
> Omar Didi writes (4/20/2005 5:05 PM):
> 
>> Hi guys,
>>
>> If a field is indexed as UnStored how can I get it value?
>> I tried document.get("UnStored_field") it returns null.
>>  
>>
> You didn't store it, so it's not there.  If the field happens to be a 
> single Term, you might be able to find it in the index, expensively.  If 
> not, it ranges from difficult to impossible.

Please also see the function "Reconstruct & Edit" in Luke 
(http://www.getopt.org/luke) and see if it's enough to meet your 
requirements. The source code is available at the same place.


-- 
Best regards,
Andrzej Bialecki
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 12:24:37 2005
Return-Path: <java-user-return-14209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82317 invoked from network); 21 Apr 2005 12:24:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 12:24:37 -0000
Received: (qmail 22553 invoked by uid 500); 21 Apr 2005 12:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22520 invoked by uid 500); 21 Apr 2005 12:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 14687 invoked by uid 99); 21 Apr 2005 12:20:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of petedaly@gmail.com designates 64.233.184.202 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=lqSpsHjUWnCUhqzYC4T21AV8E6hm9jAR+xAG1Qjiz3wNLxwh7POgd8r//d1iLTh0PVDdyOIgd8mX5yC8xVJB3Erxu6WwQ1enTQ6m2orhdRLAJ4GHxcToltWlgM8ukrQJfCnnUC/s/otGL32N2XtfwQyhM+E9pQHjJgLPar0joJg=
Message-ID: <6f0a20e105042105202ea71a88@mail.gmail.com>
Date: Thu, 21 Apr 2005 08:20:25 -0400
From: "Peter A. Daly" <petedaly@gmail.com>
Reply-To: "Peter A. Daly" <petedaly@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene bulk indexing
In-Reply-To: <20050421014057.52379.qmail@web31103.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=KOI8-R
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <20050421014057.52379.qmail@web31103.mail.mud.yahoo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

T24gc29tZSBzeXN0ZW1zIEkgaGF2ZSBzZWVuIGJpZyBzcGVlZCBpbmNyZWFzZXMgYnkgaW5kZXhp
bmcgdG8gYQpSQU1EaXJlY3RvcnkgYW5kIHBlcmlvZGljYWxseSAibWVyZ2luZyIgaW50byBhbiBv
biBkaXNrIGRpcmVjdG9yeQpldmVyeSBYIG51bWJlciBvZiBkb2NzLiAgTWF5IG9yIG1heSBub3Qg
aGVscCBpbiB0aGlzIGNhc2UuICBJbiB0aGUKZmlyc3QgY2FzZSBhIHVzZWQgdGhpcywgaXQgdG9v
ayBpbmRleGluZyBkb3duIGZyb20gYSBmZXcgaG91cnMgdG8gMzAKbWludXRlcyBmb3IgYSBmZXcg
bWlsbGlvbiBkb2N1bWVudHMgb24gYSB3aW5kb3dzIDJrIGRlc2t0b3AgbWFjaGluZS4KCmh0dHA6
Ly93d3cuYnVkZ2V0LWhhLmNvbS9sdWNlbmUvcmFtLXRvLWRpc2svCgotUGV0ZQoKT24gNC8yMC8w
NSwgT3RpcyBHb3Nwb2RuZXRpYyA8b3Rpc19nb3Nwb2RuZXRpY0B5YWhvby5jb20+IHdyb3RlOgo+
IFRoYXQgc291bmRzIHdheSB0b28gbG9uZywgdW5sZXNzIHlvdSBoYXZlIHZlZWVyeSBzbG93IGRp
c2tzLCB2ZWVlcnkKPiBsYXJnZSBEb2N1bWVudHMgKGxvbmcgZmllbGRzIHRoYXQgeW91IGFuYWx5
emUsIGluZGV4LCBhbmQgc3RvcmUgaW4KPiBMdWNlbmUpLCBvciBzb21lIHN1Y2guCj4gSWYgeW91
IGhhdmUgdmVyeSBsb29vb25nIGZpaWlpaWVlZWVsZHMgeW91IGNvdWxkIHRyeSBzZXR0aW5nCj4g
aHR0cDovL2x1Y2VuZS5hcGFjaGUub3JnL2phdmEvZG9jcy9hcGkvb3JnL2FwYWNoZS9sdWNlbmUv
aW5kZXgvSW5kZXhXcml0ZXIuaHRtbCNtYXhGaWVsZExlbmd0aAo+IHRvIGEgdmVyeSBzbWFsbCBu
dW1iZXIgYW5kIHNlZSBpZiB0aGF0IGNoYW5nZXMgcGVyZm9ybWFuY2UgZHJhc3RpY2FsbHkuCj4g
IFRoZXJlIGFyZSBvdGhlciBJbmRleFdyaXRlciBrbm9icyB5b3UgY2FuIGZpZGRsZSB3aXRoLgo+
IAo+IEkndmUgc2VlbiBIaWJlcm5hdGUgMi4qIGdldCBzbHVnZ2lzaCBvbmNlIGl0cyBTZXNzaW9u
IGdldHMgZmlsbGVkIHVwCj4gd2l0aCBhIGxvdCBvZiBvYmplY3RzLgo+IAo+IE90aXMKPiAKPiAK
PiAtLS0gQWFsYXAgUGFyaWtoIDxhbG9vNzdAeWFob28uY29tPiB3cm90ZToKPiA+IEhpLAo+ID4K
PiA+IEkgaGF2ZSBzaW1pbGFyIGlzc3VlcyBpbiBpbmRleGluZyB0aW1lLgo+ID4KPiA+IEkgYW0g
ZG9pbmcgYSBTRUxFQ1QgZnJvbSBkYXRhYmFzZSBhbmQgZ2V0dGluZyBiYWNrCj4gPiAxMCwwMDAg
cm93cy4gSSB0aGVuIHN0YXJ0IGluZGV4aW5nIGVhY2ggcm93IGFuZCBoZW5jZQo+ID4gd291bGQg
aGF2ZSAxMCwwMDAgZG9jdW1lbnRzIGluIG15IEx1Y2VuZSBpbmRleC4gRWFjaAo+ID4gZG9jIGhh
cyAyNyBmaWVsZHMuCj4gPgo+ID4gSSBhZGRlZCBzb21lIHRpbWluZyBjb2RlIHRvIG15IGluZGV4
aW5nIHByb2Nlc3MuIFRoZQo+ID4gREIgc2VsZWN0IGNhbGwgdGFrZXMgYXJvdW5kIDIzIHNlY29u
ZHMgYW5kIHRoZQo+ID4gaW5kZXhpbmcgcHJvY2VzcyB0YWtlcyA1Njcgc2Vjb25kcy4gQWxzbywg
SSBwcm9maWxlZAo+ID4gdGhlIGFwcCB1c2luZyBKUHJvZmlsZXIgYW5kIGZvdW5kIG91dCB0aGF0
IDkwJSBvZiB0aW1lCj4gPiBpcyBzcGVudCBpbiB0aGUgSW5kZXhXcml0ZXIuYWRkRG9jdW1lbnQg
Y2FsbC4gQXMKPiA+IGV4cGVjdGVkLCB0aGVyZSB3ZXJlIDEwLDAwMCBpbnZvY2F0aW9uIG9mIHRo
YXQgbWV0aG9kCj4gPiAob25lIGZvciBlYWNoIGRvYykgYW5kIHRoZSBwcm9maWxlciBzaG93ZWQg
dGhhdCB0aGUKPiA+IG1ldGhvZCB0b29rIDkwJSBvZiB0aGUgcHJvY2Vzc2luZyB0aW1lLgo+ID4K
PiA+IEkgYW0gY29uY2VybmVkIHRoYXQgaXQgaXMgdGFraW5nIGFyb3VuZCA5LjUgbWludXRlcwo+
ID4gZm9yIDEwLDAwMCBkb2NzIGFuZCBJIGFtIGV4cGVjdGluZyB0byBoYXZlIGFyb3VuZAo+ID4g
NjAwLDAwMCBkb2NzIHRvIGluZGV4LiBTbyB0aGF0IHdvdWxkIHRha2UgNTcwIG1pbnV0ZXMKPiA+
ICg5LTEwIGhvdXJzKSB0byBpbmRleCBhbmQgd2hpY2ggaXMgSFVHRSEhIQo+ID4KPiA+IE15IG1h
Y2hpbmU6IFBlbnRpdW0gNCBDUFUgMi40MCBHSHoKPiA+ICAgICAgICAgICAgIFJBTSAxIEdCCj4g
Pgo+ID4gQW55IGhlbHAgYXBwcmVjaWF0ZWQuCj4gPgo+ID4gVGhhbmtzLAo+ID4gQWFsYXAuCj4g
Pgo+ID4KPiA+IC0tLSBza29wdGVsb3ZAZmlzLnJ1IHdyb3RlOgo+ID4gPiD3INPPz8Ldxc7JySDP
1CDz0sXEwSAyMAo+ID4gPiDh0NLFzNggMjAwNSAwNDowNyBNdWZhZGRhbCBLaHVtcmkKPiA+ID4g
zsHQydPBzChhKToKPiA+ID4gPiBUaGUgMjAwMDAgcHJvZHVjdHMgSSBtZW50aW9uZWQgYXJlIDIw
MDAwIHJvd3MuIEkKPiA+ID4gZ2V0IHRoZSBwcm9kdWN0cyBpbgo+ID4gPiA+IGJ1bGsgYnkgdXNp
bmcgYSBsaW1pdCBjbGF1c2UuCj4gPiA+ID4KPiA+ID4gPiBJIGFtIHVzaW5nIGhpYmVybmF0ZSB3
aXRoIE15U1FMIHNlcnZlciBvbiBhCj4gPiA+IDIuOEdIeiwgMS4wMEdCIFJhbSBtYWNoaW5lLgo+
ID4gPgo+ID4gPiBNYXliZSB5b3VyIHNlc3Npb24tbGV2ZWwgY2FjaGUgaW4gaGliZXJuYXRlIGdy
b3dzCj4gPiA+IGluY3JlZGlibHkuIERvIHlvdSBkbwo+ID4gPiBTZXNzaW9uLmNsZWFyKCkgc29t
ZXRpbWVzIHdoaWxlIGRvaW5nIGluZGV4aW5nPwo+ID4gPiBIZXJlJ3MgYSBsaW5rIGFib3V0IGJh
dGNoaW5nCj4gPiA+ICYgaGliZXJuYXRlOgo+ID4gPgo+ID4gaHR0cDovL2Jsb2cuaGliZXJuYXRl
Lm9yZy9jZ2ktYmluL2Jsb3N4b20uY2dpLzIwMDQvMDgvCj4gPiA+Cj4gPiA+Cj4gPiAtLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0KPiA+ID4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDoKPiA+ID4gamF2YS11c2VyLXVuc3Vi
c2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBl
LW1haWw6Cj4gPiA+IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+Cj4gPiA+
Cj4gPgo+ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVz
ZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1h
bmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPgo+ID4KPiAK
PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJz
Y3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWls
OiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+IAo+Cg==


From java-user-return-14210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 12:40:10 2005
Return-Path: <java-user-return-14210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87118 invoked from network); 21 Apr 2005 12:40:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 12:40:09 -0000
Received: (qmail 47258 invoked by uid 500); 21 Apr 2005 12:40:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47203 invoked by uid 500); 21 Apr 2005 12:40:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46955 invoked by uid 99); 21 Apr 2005 12:40:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 21 Apr 2005 05:40:02 -0700
Content-class: urn:content-classes:message
Subject: extract data from mpg/avi etc
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C5466F.3399799C"
Date: Thu, 21 Apr 2005 14:39:47 +0200
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA07114F@gerard.anchormen.nl>
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <24CFCE44DCB015489FB96D38BDF4FCAA07114F@gerard.anchormen.nl>
Thread-Topic: extract data from mpg/avi etc
Thread-Index: AcVGbycRJ9FRqIKiSYm2BJvQl9HAnA==
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5466F.3399799C
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Does anyone know of a library that can extra metadata from movie
formats?=20
=20

Met vriendelijke groet,

Peter Veentjer
Anchor Men Interactive Solutions - duidelijk in zakelijke
internetoplossingen

Praediniussingel 41
9711 AE Groningen

T: 050-3115222
F: 050-5891696
E: p.veentjer@anchormen.nl
I : www.anchormen.nl <blocked::http://www.anchormen.nl/>=20

=20


------_=_NextPart_001_01C5466F.3399799C
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C5466F.3399799C--

From java-user-return-14211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 13:14:54 2005
Return-Path: <java-user-return-14211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97124 invoked from network); 21 Apr 2005 13:14:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 13:14:54 -0000
Received: (qmail 15816 invoked by uid 500); 21 Apr 2005 13:14:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15738 invoked by uid 500); 21 Apr 2005 13:14:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15650 invoked by uid 99); 21 Apr 2005 13:14:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of mariella@lanl.gov designates 192.65.95.54 as permitted sender)
Received: from mailwasher.lanl.gov (HELO mailwasher-b.lanl.gov) (192.65.95.54)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 21 Apr 2005 06:14:47 -0700
Received: from cic-mail.lanl.gov (cic-mail.lanl.gov [128.165.4.115])
	by mailwasher-b.lanl.gov (8.12.11/8.12.11/(ccn-5)) with ESMTP id j3LDETlo013177
	for <java-user@lucene.apache.org>; Thu, 21 Apr 2005 07:14:29 -0600
Received: from OCELOT.lanl.gov (ts-usr-12.lanl.gov [128.165.7.12])
	by cic-mail.lanl.gov (8.12.11/8.12.11/(ccn-5)) with ESMTP id j3LDEPxY003196;
	Thu, 21 Apr 2005 07:14:26 -0600
Message-Id: <5.2.0.9.2.20050421070432.00b16a88@cic-mail.lanl.gov>
X-Sender: mariella@cic-mail.lanl.gov
X-Mailer: QUALCOMM Windows Eudora Version 5.2.0.9
Date: Thu, 21 Apr 2005 07:12:06 -0600
To: java-user@lucene.apache.org
From: Mariella Digiacomo <mariella@lanl.gov>
Subject: Can not create searcher: java.io.IOException: Invalid argument
Cc: mariella Digiacomo <mariella@lanl.gov>, rrkhet@lanl.gov
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-PMX-Version: 4.7.0.111621
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi ALL,

We have built Lucene indexes on a Solaris box. We have tested them and they 
can be accessed OK when residing on a native Linux filesystem.
What we like to do is export through NFS the Lucene indexes from the 
Solaris box to the Linux box (mainly for development and testing purposes).

When we try to export through NFS Lucene indexes to the Linux box from the 
Solaris server, we get an error:

...............
  searchables[i] = new IndexSearcher(indexDirs.get(i));
...........................................

throws an IOException when the dir passed to IndexSearcher is a mounted one.

Following is the stack trace proceeded by the Directory value...

FSDirectory@/data/lucene/alpha2006
Can not create searcher: java.io.IOException: Invalid argument
java.io.IOException: Invalid argument
         at java.io.RandomAccessFile.length(Native Method)
at java.io.RandomAccessFile.length(Native Method)

         at org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:406)
         at org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
         at 
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:63)
         at 
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:104)
         at org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:89)
         at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:118)
         at org.apache.lucene.store.Lock$With.run(Lock.java:109)
         at org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
         at org.apache.lucene.index.IndexReader.open(IndexReader.java:106)
         at 
org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:43)
         at 
gov.lanl.rlsearch.engine.lucene.search.client.LuceneSearcher.search(LuceneSearcher.java:54)
         at 
gov.lanl.rlsearch.servlets.ScienceServerSearchServlet.doGet(ScienceServerSearchServlet.java:494)
         at javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
         at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
         at 
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
         at 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
         at 
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:214)
         at 
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
         at 
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
         at 
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
         at 
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
         at 
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:526)
         at 
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
         at 
org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:306)
         at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:385)
         at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:745)
         at 
org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:675)
         at org.apache.jk.common.SocketConnection.runIt(ChannelSocket.java:868)
         at 
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
         at java.lang.Thread.run(Thread.java:595)



Could you please help ?
Thanks a lot in advance for your help,

Mariella Di Giacomo


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 13:43:45 2005
Return-Path: <java-user-return-14212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22541 invoked from network); 21 Apr 2005 13:43:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 13:43:45 -0000
Received: (qmail 444 invoked by uid 500); 21 Apr 2005 13:43:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 411 invoked by uid 500); 21 Apr 2005 13:43:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 395 invoked by uid 99); 21 Apr 2005 13:43:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from rivette.uk.mediasurface.com (HELO rivette.int.mediasurface.com) (193.123.241.50)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 21 Apr 2005 06:43:43 -0700
Received: from rivette.int.mediasurface.com (localhost [127.0.0.1])
	by rivette.int.mediasurface.com (8.11.6+Sun/8.11.6) with ESMTP id j3LDhOD28022
	for <java-user@lucene.apache.org>; Thu, 21 Apr 2005 14:43:24 +0100 (BST)
Received: from ntexchange.int.mediasurface.com (ntexchange.int.mediasurface.com [10.0.5.69])
	by rivette.int.mediasurface.com (8.11.6+Sun/8.11.6) with ESMTP id j3LDhOI28018
	for <java-user@lucene.apache.org>; Thu, 21 Apr 2005 14:43:24 +0100 (BST)
Received: by ntexchange.int.mediasurface.com with Internet Mail Service (5.5.2657.72)
	id <H1VTLFDN>; Thu, 21 Apr 2005 14:42:36 +0100
Message-ID: <BE3E7BC7F7553B4A9362D4192ECD308A3C8A33@neptune.int.mediasurface.com>
From: Peter Gelderbloem <Peter.Gelderbloem@mediasurface.com>
To: java-user@lucene.apache.org
Subject: Lucene and J2EE transactions
Date: Thu, 21 Apr 2005 14:43:14 +0100
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I am looking to get Lucene to participate in a JTA transaction.
What would be the best way to do this?
I am thinking maybe use a message queue that feeds an indexing
thread/message driven bean with add update and delete information.
Or maybe using a subclass of Directory that uses a relational database.
Regards
Peter

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 14:00:04 2005
Return-Path: <java-user-return-14213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28837 invoked from network); 21 Apr 2005 14:00:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 14:00:04 -0000
Received: (qmail 36154 invoked by uid 500); 21 Apr 2005 14:00:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36131 invoked by uid 500); 21 Apr 2005 14:00:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36117 invoked by uid 99); 21 Apr 2005 14:00:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 21 Apr 2005 07:00:03 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8937013E211E; Thu, 21 Apr 2005 09:59:44 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 7752313E2005
	for <java-user@lucene.apache.org>; Thu, 21 Apr 2005 09:59:20 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <BE3E7BC7F7553B4A9362D4192ECD308A3C8A33@neptune.int.mediasurface.com>
References: <BE3E7BC7F7553B4A9362D4192ECD308A3C8A33@neptune.int.mediasurface.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <9ae6cf424c56d05888e168b04bd11cdd@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucene and J2EE transactions
Date: Thu, 21 Apr 2005 09:59:17 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 21, 2005, at 9:43 AM, Peter Gelderbloem wrote:
> Hi,
> I am looking to get Lucene to participate in a JTA transaction.
> What would be the best way to do this?

Have a look at LuceneRAR:  https://lucenerar.dev.java.net/

I have no experience with it, but it fits what you're looking for.

> I am thinking maybe use a message queue that feeds an indexing
> thread/message driven bean with add update and delete information.
> Or maybe using a subclass of Directory that uses a relational database.

Or perhaps consider using the Berkeley DBDirectory (found in the 
contrib area of the Lucene Subversion repository).

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 16:01:17 2005
Return-Path: <java-user-return-14214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71074 invoked from network); 21 Apr 2005 16:01:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 16:01:17 -0000
Received: (qmail 41594 invoked by uid 500); 21 Apr 2005 16:01:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41494 invoked by uid 500); 21 Apr 2005 16:01:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41439 invoked by uid 99); 21 Apr 2005 16:01:18 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 209-254-108-74.ip.mcleodusa.net (HELO enigmastation.com) (209.254.108.74)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 21 Apr 2005 09:01:18 -0700
Received: from joeo (helo=localhost)
	by enigmastation.com with local-esmtp (Exim 4.50)
	id 1DOe6q-0004WS-Gd
	for java-user@lucene.apache.org; Thu, 21 Apr 2005 12:00:56 -0400
Date: Thu, 21 Apr 2005 11:00:56 -0500 (EST)
From: "Joseph B. Ottinger" <joeo@enigmastation.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and J2EE transactions
In-Reply-To: <9ae6cf424c56d05888e168b04bd11cdd@ehatchersolutions.com>
Message-ID: <Pine.LNX.4.62.0504211100250.15758@enigmastation.com>
References: <BE3E7BC7F7553B4A9362D4192ECD308A3C8A33@neptune.int.mediasurface.com>
 <9ae6cf424c56d05888e168b04bd11cdd@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Well, LuceneRAR isn't transactional - yet. As soon as I figure out how to 
queue deletes, though... :)

On Thu, 21 Apr 2005, Erik Hatcher wrote:

>
> On Apr 21, 2005, at 9:43 AM, Peter Gelderbloem wrote:
>> Hi,
>> I am looking to get Lucene to participate in a JTA transaction.
>> What would be the best way to do this?
>
> Have a look at LuceneRAR:  https://lucenerar.dev.java.net/
>
> I have no experience with it, but it fits what you're looking for.
>
>> I am thinking maybe use a message queue that feeds an indexing
>> thread/message driven bean with add update and delete information.
>> Or maybe using a subclass of Directory that uses a relational database.
>
> Or perhaps consider using the Berkeley DBDirectory (found in the contrib area 
> of the Lucene Subversion repository).
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-----------------------------------------------------------------------
Joseph B. Ottinger                             http://enigmastation.com
Editor, http://www.TheServerSide.com             joeo@enigmastation.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 19:37:27 2005
Return-Path: <java-user-return-14215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57607 invoked from network); 21 Apr 2005 19:37:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 19:37:27 -0000
Received: (qmail 30616 invoked by uid 500); 21 Apr 2005 19:37:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30594 invoked by uid 500); 21 Apr 2005 19:37:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30580 invoked by uid 99); 21 Apr 2005 19:37:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of hasan.diwan@gmail.com designates 64.233.184.199 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.199)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 21 Apr 2005 12:37:37 -0700
Received: by wproxy.gmail.com with SMTP id 50so623341wri
        for <java-user@lucene.apache.org>; Thu, 21 Apr 2005 12:37:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Xp6MRT0+fk8wiDWktxGUewRxcvrB6qvNYJE0MQeuDAH0GTYfXfn0Kizr0AZPSRS1DJ9VVAQuc6nCwrUdx4aGTwSU9dBfBQLqIPtd8mBIJU/YRe0R9tbtqKUO4yoBvb6zth+xjibUFQusK6JY1yqFtKv1VfYk0WF/CMk202TruHw=
Received: by 10.54.16.79 with SMTP id 79mr38538wrp;
        Thu, 21 Apr 2005 12:37:16 -0700 (PDT)
Received: by 10.54.40.65 with HTTP; Thu, 21 Apr 2005 12:37:16 -0700 (PDT)
Message-ID: <2cda2fc9050421123758fa31e1@mail.gmail.com>
Date: Thu, 21 Apr 2005 12:37:16 -0700
From: Hasan Diwan <hasan.diwan@gmail.com>
Reply-To: Hasan Diwan <hasan.diwan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: extract data from mpg/avi etc
In-Reply-To: <24CFCE44DCB015489FB96D38BDF4FCAA07114F@gerard.anchormen.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <24CFCE44DCB015489FB96D38BDF4FCAA07114F@gerard.anchormen.nl>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 21/04/05, Peter Veentjer - Anchor Men <p.veentjer@anchormen.nl> wrote:
> Does anyone know of a library that can extra metadata from movie
> formats?

http://computing.ee.ethz.ch/sepp/jmf-1.0-to.html
That's advertised to be able to.
--=20
Cheers,
Hasan Diwan <hasan.diwan@gmail.com>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 23:43:55 2005
Return-Path: <java-user-return-14216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52967 invoked from network); 21 Apr 2005 23:43:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 23:43:55 -0000
Received: (qmail 92580 invoked by uid 500); 21 Apr 2005 23:44:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92565 invoked by uid 500); 21 Apr 2005 23:44:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92552 invoked by uid 99); 21 Apr 2005 23:44:07 -0000
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=FORGED_YAHOO_RCVD,FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web32108.mail.mud.yahoo.com (HELO web32108.mail.mud.yahoo.com) (68.142.207.122)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 21 Apr 2005 16:44:07 -0700
Received: (qmail 18358 invoked by uid 60001); 21 Apr 2005 23:43:46 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=xjb0lJJ9Zh5AMYgrL1ATgTfcGFGJBWUxQFvh3aW69Y4Y1fba5miIZ1B52CpE5Gm4ZhFqMiRkYas6xgTsJ1raCKAF6H6eIAoMth3DHw06Nnun8buVR+kBWSaY0wnm2CTkNkZe3KxymTzrdFCluytPJFFDKVpXS1QiomGD5nuhF+0=  ;
Message-ID: <20050421234346.18356.qmail@web32108.mail.mud.yahoo.com>
Received: from [206.13.63.69] by web32108.mail.mud.yahoo.com via HTTP; Thu, 21 Apr 2005 16:43:45 PDT
Date: Thu, 21 Apr 2005 16:43:45 -0700 (PDT)
From: Aalap Parikh <aloo77@yahoo.com>
Subject: Re: WildCard search replacement
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Thanks for your reply.
One more question. You mentioned that your technique
can be used for wildcard search like ex. *123* . But
say I only need something like 123* i.e. wildcard only
at the end and NOT on both sides, then how can one use
your technique to avoid TooManyClauseException?

Thanks,
Aalap.

--- Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
wrote:
> I used It to measure speed and  but I was planning
> to use it in file 
> search application. when u need wildcard search like
> *.txt and so on. 
> The matter is that file search application  is not
> my primary job, so I 
> will tune it later.
> This is just an example to give you an idea how it
> can work.
> 
> regards,
> Volodymyr Bychkoviak
> 
> Aalap Parikh wrote:
> 
> >Hi,
> >
> >  
> >
> >>Also this analyzer is not used in any application,
> I
> >>wrote it only to 
> >>measure search speed.
> >>    
> >>
> >
> >So you don't use the method you described for your
> >wildcard search trick?
> >
> >Thanks,
> >Aalap.
> >
>
>---------------------------------------------------------------------
> >To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >
> >  
> >
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 23:47:18 2005
Return-Path: <java-user-return-14217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53919 invoked from network); 21 Apr 2005 23:47:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 23:47:18 -0000
Received: (qmail 479 invoked by uid 500); 21 Apr 2005 23:47:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 457 invoked by uid 500); 21 Apr 2005 23:47:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 440 invoked by uid 99); 21 Apr 2005 23:47:30 -0000
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=FORGED_YAHOO_RCVD,FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web32106.mail.mud.yahoo.com (HELO web32106.mail.mud.yahoo.com) (68.142.207.120)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 21 Apr 2005 16:47:30 -0700
Received: (qmail 66798 invoked by uid 60001); 21 Apr 2005 23:47:08 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=Rw4Q1SGS4D0UnYZ8aUtTOnxB6EgA1pYK/qODTGVznBYpEkpfGDhahtJmdUnfQ2n/OWChjaD0/Bt6Y1rggqAakY3vhMvIAch0dL81nd8M7gslIA0v9j6eM1hUxz1xXWpHtjy/AhH0Z52L5NQeiniijGtapgKPNAkCXmBsR1ph4WU=  ;
Message-ID: <20050421234708.66793.qmail@web32106.mail.mud.yahoo.com>
Received: from [206.13.63.69] by web32106.mail.mud.yahoo.com via HTTP; Thu, 21 Apr 2005 16:47:08 PDT
Date: Thu, 21 Apr 2005 16:47:08 -0700 (PDT)
From: Aalap Parikh <aloo77@yahoo.com>
Subject: Re: Lucene bulk indexing
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My machine is pretty good and fairly new. The disk for
sure is not slow and also I am not indexing large
Documents; 27 fields with each field value being a
string with no more than 15-20 characters long.

I tried setting the maxFieldLength value of the
Indexwriter to a low value but that didn't help.

Also, I am not using Hibernate at all.

Thanks,
Aalap.

--- Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:
> That sounds way too long, unless you have veeery
> slow disks, veeery
> large Documents (long fields that you analyze,
> index, and store in
> Lucene), or some such.
> If you have very loooong fiiiiieeeelds you could try
> setting
>
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.html#maxFieldLength
> to a very small number and see if that changes
> performance drastically.
>  There are other IndexWriter knobs you can fiddle
> with.
> 
> I've seen Hibernate 2.* get sluggish once its
> Session gets filled up
> with a lot of objects.
> 
> Otis
> 
> 
> --- Aalap Parikh <aloo77@yahoo.com> wrote:
> > Hi,
> > 
> > I have similar issues in indexing time.
> > 
> > I am doing a SELECT from database and getting back
> > 10,000 rows. I then start indexing each row and
> hence
> > would have 10,000 documents in my Lucene index.
> Each
> > doc has 27 fields.
> > 
> > I added some timing code to my indexing process.
> The
> > DB select call takes around 23 seconds and the
> > indexing process takes 567 seconds. Also, I
> profiled
> > the app using JProfiler and found out that 90% of
> time
> > is spent in the IndexWriter.addDocument call. As
> > expected, there were 10,000 invocation of that
> method
> > (one for each doc) and the profiler showed that
> the
> > method took 90% of the processing time.
> > 
> > I am concerned that it is taking around 9.5
> minutes
> > for 10,000 docs and I am expecting to have around
> > 600,000 docs to index. So that would take 570
> minutes
> > (9-10 hours) to index and which is HUGE!!!
> > 
> > My machine: Pentium 4 CPU 2.40 GHz
> >             RAM 1 GB
> > 
> > Any help appreciated.
> > 
> > Thanks,
> > Aalap.
> > 
> > 
> > --- skoptelov@fis.ru wrote:
> > > Ð ÑÐ¾Ð¾Ð±ÑÐµÐ½Ð¸Ð¸ Ð¾Ñ Ð¡ÑÐµÐ´Ð° 20
> > > ÐÐ¿ÑÐµÐ»Ñ 2005 04:07 Mufaddal Khumri
> > > Ð½Ð°Ð¿Ð¸ÑÐ°Ð»(a):
> > > > The 20000 products I mentioned are 20000 rows.
> I
> > > get the products in
> > > > bulk by using a limit clause.
> > > >
> > > > I am using hibernate with MySQL server on a
> > > 2.8GHz, 1.00GB Ram machine.
> > > 
> > > Maybe your session-level cache in hibernate
> grows
> > > incredibly. Do you do 
> > > Session.clear() sometimes while doing indexing?
> > > Here's a link about batching 
> > > & hibernate:
> > >
> >
>
http://blog.hibernate.org/cgi-bin/blosxom.cgi/2004/08/
> > > 
> > >
> >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > > 
> > > 
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > 
> > 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 21 23:50:23 2005
Return-Path: <java-user-return-14218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54933 invoked from network); 21 Apr 2005 23:50:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2005 23:50:23 -0000
Received: (qmail 5798 invoked by uid 500); 21 Apr 2005 23:50:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5777 invoked by uid 500); 21 Apr 2005 23:50:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5760 invoked by uid 99); 21 Apr 2005 23:50:36 -0000
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=FORGED_YAHOO_RCVD,FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web32114.mail.mud.yahoo.com (HELO web32114.mail.mud.yahoo.com) (68.142.207.128)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 21 Apr 2005 16:50:36 -0700
Received: (qmail 60537 invoked by uid 60001); 21 Apr 2005 23:50:15 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=pIfU/f5QtZKPS0Icp4m+4fAU+vLzoEsV5K+Q6Cllbm/IfhWG5GA46pPgFPLNIr8u83pbjLIcf2lAKI8jUxBSwzYeJKOmNvJabIRufiHIv/Tl6NpDVBSl1V0uL2dwjiFQ40/qhrVZa6KH8Z068oDXf6Kf7Si6wsuG8dQLZRIIXKo=  ;
Message-ID: <20050421235015.60535.qmail@web32114.mail.mud.yahoo.com>
Received: from [206.13.63.69] by web32114.mail.mud.yahoo.com via HTTP; Thu, 21 Apr 2005 16:50:14 PDT
Date: Thu, 21 Apr 2005 16:50:14 -0700 (PDT)
From: Aalap Parikh <aloo77@yahoo.com>
Subject: Re: Lucene bulk indexing
To: java-user@lucene.apache.org, "Peter A. Daly" <petedaly@gmail.com>
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Thanks for your suggestion. I haven't yet tried your
technique but I did try something similar by tweaking
some Indexwriter properties like mergeFactor and
minMergeDocs and it did certainly speed up the process
a lot. I am sure the same can be achieved with what
you suggest because it is essentially doing the same
thing, namely, doing more in-memory store before
writing the index out to disk.

Thanks,
Aalap.

--- "Peter A. Daly" <petedaly@gmail.com> wrote:
> On some systems I have seen big speed increases by
> indexing to a
> RAMDirectory and periodically "merging" into an on
> disk directory
> every X number of docs.  May or may not help in this
> case.  In the
> first case a used this, it took indexing down from a
> few hours to 30
> minutes for a few million documents on a windows 2k
> desktop machine.
> 
> http://www.budget-ha.com/lucene/ram-to-disk/
> 
> -Pete
> 
> On 4/20/05, Otis Gospodnetic
> <otis_gospodnetic@yahoo.com> wrote:
> > That sounds way too long, unless you have veeery
> slow disks, veeery
> > large Documents (long fields that you analyze,
> index, and store in
> > Lucene), or some such.
> > If you have very loooong fiiiiieeeelds you could
> try setting
> >
>
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.html#maxFieldLength
> > to a very small number and see if that changes
> performance drastically.
> >  There are other IndexWriter knobs you can fiddle
> with.
> > 
> > I've seen Hibernate 2.* get sluggish once its
> Session gets filled up
> > with a lot of objects.
> > 
> > Otis
> > 
> > 
> > --- Aalap Parikh <aloo77@yahoo.com> wrote:
> > > Hi,
> > >
> > > I have similar issues in indexing time.
> > >
> > > I am doing a SELECT from database and getting
> back
> > > 10,000 rows. I then start indexing each row and
> hence
> > > would have 10,000 documents in my Lucene index.
> Each
> > > doc has 27 fields.
> > >
> > > I added some timing code to my indexing process.
> The
> > > DB select call takes around 23 seconds and the
> > > indexing process takes 567 seconds. Also, I
> profiled
> > > the app using JProfiler and found out that 90%
> of time
> > > is spent in the IndexWriter.addDocument call. As
> > > expected, there were 10,000 invocation of that
> method
> > > (one for each doc) and the profiler showed that
> the
> > > method took 90% of the processing time.
> > >
> > > I am concerned that it is taking around 9.5
> minutes
> > > for 10,000 docs and I am expecting to have
> around
> > > 600,000 docs to index. So that would take 570
> minutes
> > > (9-10 hours) to index and which is HUGE!!!
> > >
> > > My machine: Pentium 4 CPU 2.40 GHz
> > >             RAM 1 GB
> > >
> > > Any help appreciated.
> > >
> > > Thanks,
> > > Aalap.
> > >
> > >
> > > --- skoptelov@fis.ru wrote:
> > > > ÷ ÓÏÏÂÝÅÎÉÉ ÏÔ óÒÅÄÁ 20
> > > > áÐÒÅÌØ 2005 04:07 Mufaddal Khumri
> > > > ÎÁÐÉÓÁÌ(a):
> > > > > The 20000 products I mentioned are 20000
> rows. I
> > > > get the products in
> > > > > bulk by using a limit clause.
> > > > >
> > > > > I am using hibernate with MySQL server on a
> > > > 2.8GHz, 1.00GB Ram machine.
> > > >
> > > > Maybe your session-level cache in hibernate
> grows
> > > > incredibly. Do you do
> > > > Session.clear() sometimes while doing
> indexing?
> > > > Here's a link about batching
> > > > & hibernate:
> > > >
> > >
>
http://blog.hibernate.org/cgi-bin/blosxom.cgi/2004/08/
> > > >
> > > >
> > >
>
---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> > > > java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail:
> > > > java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > >
> > >
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > 
> >
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 00:08:01 2005
Return-Path: <java-user-return-14219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60623 invoked from network); 22 Apr 2005 00:08:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 00:08:01 -0000
Received: (qmail 25990 invoked by uid 500); 22 Apr 2005 00:08:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25959 invoked by uid 500); 22 Apr 2005 00:08:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25944 invoked by uid 99); 22 Apr 2005 00:08:13 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web51605.mail.yahoo.com (HELO web51605.mail.yahoo.com) (206.190.38.210)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 21 Apr 2005 17:08:13 -0700
Received: (qmail 87814 invoked by uid 60001); 22 Apr 2005 00:07:50 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=nHz+FBuDc0Oke5dOMwlGkTUUYHXTEQGGKi/R3fI6uQZOcIkaIPK37OZQwBfdhd/+e//NDgT5Ex7BwGJ4SRW9YWJZqIEs6B0oEsNP9+gKsxx0mGZGxO7TZ+0bPVRycybmJ7NV9wqlVC/pMMTn4g9tfquN31LWgo6z4GjfVCHzPaw=  ;
Message-ID: <20050422000750.87809.qmail@web51605.mail.yahoo.com>
Received: from [24.6.91.87] by web51605.mail.yahoo.com via HTTP; Thu, 21 Apr 2005 17:07:50 PDT
Date: Thu, 21 Apr 2005 17:07:50 -0700 (PDT)
From: James <ajd_765@yahoo.com>
Subject: help with date sort, please
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Apologies if the post is a duplicate, but my original post didn't
come back over the mailing list...


I have an index of around 3 million records, and typical queries
can result in result sets of between 1 and 400,000 results.  

We have indexed "dateTime" fields in the form 20050415142, that is, to
10-minute precision.

When I try to sort queries I get something back that is roughly sorted
on index, but not quite.  Stuff is out of order just a bit.  The
size of the result set does not seem to be related occurance of
this problem.


We've tried lucene 1.4-final and1.4.3.

my code looks like this

s = new Sort( new SortField[] { new SortField( "dateTime", SortField.STRING,
true ), SortField.FIELD_SCORE } );

...

hits = searcher.search( qry, s );


Any help is appreciated, I'm so far baffled by this problem.

Regards,
James

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 01:27:06 2005
Return-Path: <java-user-return-14220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88665 invoked from network); 22 Apr 2005 01:27:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 01:27:05 -0000
Received: (qmail 18188 invoked by uid 500); 22 Apr 2005 01:27:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17284 invoked by uid 500); 22 Apr 2005 01:27:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 21051 invoked by uid 99); 21 Apr 2005 21:22:46 -0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jdlevine@gmail.com designates 64.233.184.201 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type;
        b=FfhlXwYiA0xWC7b9N9bnZFr3GFaXv7MhIsl/px0fzgAXGjspN32JRXKLkUNngmbXBfTlYU7YMOicy7MVnmwgLQd9vTy94EuDNENS7GUXyvZqxSwP+4ujlWu+bO6TqfEDrutFpBb0yOVJtkDbcMz5H+KlJvlVB9AREz/B/U/crZM=
Message-ID: <399bbc0e05042114225e3415f1@mail.gmail.com>
Date: Thu, 21 Apr 2005 14:22:23 -0700
From: James Levine <jdlevine@gmail.com>
Reply-To: James Levine <jdlevine@gmail.com>
To: java-user@lucene.apache.org
Subject: sorting on "dates" a little fuzzy...
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1084_26436520.1114118543087"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1084_26436520.1114118543087
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I have an index of around 3 million records, and typical queries
can result in result sets of between 1 and 400,000 results.=20

We have indexed "dateTime" fields in the form 20050415142, that is, to
10-minute precision.

When I try to sort queries I get something back that is roughly sorted
on index, but not quite. Stuff is out of order just a bit. The
size of the result set does not seem to be related occurance of
this problem.

We've tried lucene 1.4-final and1.4.3.

my code looks like this

s =3D new Sort( new SortField[] { new SortField( "dateTime", SortField.STRI=
NG,=20
true ), SortField.FIELD_SCORE } );

...

hits =3D searcher.search( qry, s );


Any help is appreciated, I'm so far baffled by this problem.

Regards,
James

------=_Part_1084_26436520.1114118543087--

From java-user-return-14221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 02:13:54 2005
Return-Path: <java-user-return-14221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96399 invoked from network); 22 Apr 2005 02:13:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 02:13:54 -0000
Received: (qmail 67776 invoked by uid 500); 22 Apr 2005 02:13:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67658 invoked by uid 500); 22 Apr 2005 02:13:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67628 invoked by uid 99); 22 Apr 2005 02:13:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 21 Apr 2005 19:13:57 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 1543013E211E; Thu, 21 Apr 2005 22:13:31 -0400 (EDT)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 7A0BF13E2008
	for <java-user@lucene.apache.org>; Thu, 21 Apr 2005 22:13:25 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <399bbc0e05042114225e3415f1@mail.gmail.com>
References: <399bbc0e05042114225e3415f1@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <321d0104f2fec342e6cb234b6c5ade85@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: sorting on "dates" a little fuzzy...
Date: Thu, 21 Apr 2005 22:13:24 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 21, 2005, at 5:22 PM, James Levine wrote:

> I have an index of around 3 million records, and typical queries
> can result in result sets of between 1 and 400,000 results.
>
> We have indexed "dateTime" fields in the form 20050415142, that is, to
> 10-minute precision.
>
> When I try to sort queries I get something back that is roughly sorted
> on index, but not quite. Stuff is out of order just a bit. The
> size of the result set does not seem to be related occurance of
> this problem.
>
> We've tried lucene 1.4-final and1.4.3.
>
> my code looks like this
>
> s = new Sort( new SortField[] { new SortField( "dateTime", 
> SortField.STRING,
> true ), SortField.FIELD_SCORE } );
>
> ...
>
> hits = searcher.search( qry, s );
>
>
> Any help is appreciated, I'm so far baffled by this problem.

I don't have a solution, but rather some questions to check.... are all 
dateTime's the same width, zero padded on the right?  Does every 
document have a dateTime field?

I recommend you sort with type INT instead of STRING if it fits, or 
maybe LONG.  STRING will use the most resources for sorting.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 02:33:38 2005
Return-Path: <java-user-return-14222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99290 invoked from network); 22 Apr 2005 02:33:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 02:33:38 -0000
Received: (qmail 89254 invoked by uid 500); 22 Apr 2005 02:33:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88338 invoked by uid 500); 22 Apr 2005 02:33:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88319 invoked by uid 99); 22 Apr 2005 02:33:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 21 Apr 2005 19:33:53 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4AB3E5B7D9; Thu, 21 Apr 2005 19:33:31 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 47FDB7F45E
	for <java-user@lucene.apache.org>; Thu, 21 Apr 2005 19:33:31 -0700 (PDT)
Date: Thu, 21 Apr 2005 19:33:31 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Lucene bulk indexing
In-Reply-To: <20050421003551.64715.qmail@web32112.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0504211929250.18489@hal.rescomp.berkeley.edu>
References: <20050421003551.64715.qmail@web32112.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: the app using JProfiler and found out that 90% of time
: is spent in the IndexWriter.addDocument call. As

what analyzer are you using?

: My machine: Pentium 4 CPU 2.40 GHz
:             RAM 1 GB

what JVM args are you using? (in particular: how much ram are you telling
the JVM to use) ... what else is running on this box while you index?

: Any help appreciated.

The biggest help anyone an give you is if you post your code ... there may
be little things in the way you are using the IndexWriter that will jump
out at people if they see exactly what you are doing.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 02:34:30 2005
Return-Path: <java-user-return-14223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99322 invoked from network); 22 Apr 2005 02:34:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 02:34:30 -0000
Received: (qmail 89845 invoked by uid 500); 22 Apr 2005 02:34:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89818 invoked by uid 500); 22 Apr 2005 02:34:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89795 invoked by uid 99); 22 Apr 2005 02:34:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 21 Apr 2005 19:34:41 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B38C213E2008; Thu, 21 Apr 2005 22:34:19 -0400 (EDT)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP
	id 6C62D13E2008; Thu, 21 Apr 2005 22:34:16 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <75bfb67debe5ea3fcafea8f0a0382a96@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Fwd: [jira] Closed: (INFRA-272) 3 new Lucene mailing lists
Date: Thu, 21 Apr 2005 22:34:15 -0400
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sorry for the delay in sending this out.  There are now new lists for 
Lucene commit messages, one for the Ruby port work that is beginning, 
and also a general one set up to span all of the Lucene community for 
use for general discussion across all subprojects.  Here are quick 
links for subscribing to them all:

	general-subscribe@lucene.apache.org (general Lucene list, for 
discussion that spans all Lucene subprojects)

	c-commits-subscribe@lucene.apache.org (Lucene4C commit messages)

	java-commits-subscribe@lucene.apache.org (Java Lucene commit messages)

	ruby-dev-subscribe@lucene.apache.org (Ruby Lucene development 
discussion)

Erik




Begin forwarded message:

> From: "Roy T. Fielding (JIRA)" <jira@apache.org>
> Date: April 16, 2005 12:43:57 PM EDT
> To: infrastructure@apache.org
> Subject: [jira] Closed: (INFRA-272) 3 new Lucene mailing lists
>
>      [ http://issues.apache.org/jira/browse/INFRA-272?page=history ]
>
> Roy T. Fielding closed INFRA-272:
> ---------------------------------
>
>     Resolution: Fixed
>
> Done.  Don't forget to tell people to subscribe to
> the new lists.
>
>
>> 3 new Lucene mailing lists
>> --------------------------
>>
>>          Key: INFRA-272
>>          URL: http://issues.apache.org/jira/browse/INFRA-272
>>      Project: Infrastructure
>>         Type: Task
>>   Components: Mailing Lists
>>     Reporter: Otis Gospodnetic
>>     Priority: Minor
>
>>
>> Hello,
>> Could you please create the following lists for the Lucene project:
>> 1. general@lucene.apache.org
>> 2. c-commits@lucene.apache.org
>> 3. java-commits@lucene.apache.org
>> The commit messages for lucene/java should then go to 
>> java-commits@lucene, while commit messages for lucene4c 
>> (http://incubator.apache.org/projects/lucene4c.html) should go to 
>> c-commits@lucene.
>> All 3 of these lists should be archived 
>> http://mail-archives.apache.org/mod_mbox/.
>> Thank you,
>> Otis

	From: 	  jira@apache.org
	Subject: 	[jira] Closed: (INFRA-259) ruby-dev Lucene e-mail list 
creation
	Date: 	April 16, 2005 12:43:59 PM EDT
	To: 	  ehatcher@apache.org

      [ http://issues.apache.org/jira/browse/INFRA-259?page=history ]

Roy T. Fielding closed INFRA-259:
---------------------------------

     Resolution: Fixed

Done.


> ruby-dev Lucene e-mail list creation
> ------------------------------------
>
>          Key: INFRA-259
>          URL: http://issues.apache.org/jira/browse/INFRA-259
>      Project: Infrastructure
>         Type: New Feature
>   Components: Mailing Lists
>     Reporter: Erik Hatcher

>
> Please create a new ruby-dev@lucene.apache.org e-mail list with me 
> (ehatcher) as moderator.  Thank you!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 02:49:11 2005
Return-Path: <java-user-return-14224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1369 invoked from network); 22 Apr 2005 02:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 02:49:11 -0000
Received: (qmail 10803 invoked by uid 500); 22 Apr 2005 02:49:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9913 invoked by uid 500); 22 Apr 2005 02:49:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9898 invoked by uid 99); 22 Apr 2005 02:49:27 -0000
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_20_30,HTML_MESSAGE,MIME_BOUND_NEXTPART,NO_REAL_NAME,RCVD_BY_IP,RCVD_DOUBLE_IP_LOOSE,RCVD_NUMERIC_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from sccrmhc11.comcast.net (HELO sccrmhc11.comcast.net) (204.127.202.55)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 21 Apr 2005 19:49:27 -0700
Received: from 204.127.205.147 ([204.127.205.147])
          by comcast.net (sccrmhc11) with SMTP
          id <200504220249040110086d8be>; Fri, 22 Apr 2005 02:49:04 +0000
Received: from [24.34.25.105] by 204.127.205.147;
	Fri, 22 Apr 2005 02:49:04 +0000
From: ethandev@comcast.net
To: java-user@lucene.apache.org, java-user@lucene.apache.org
Cc: Pierrick Brihaye <pierrick.brihaye@free.fr>
Subject: Re: token type question
Date: Fri, 22 Apr 2005 02:49:04 +0000
Message-Id: <042220050249.13376.426866200006966E000034402200762194900A0B020E089B0A@comcast.net>
X-Mailer: AT&T Message Center Version 1 (Dec 17 2004)
X-Authenticated-Sender: ZXRoYW5kZXZAY29tY2FzdC5uZXQ=
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="NextPart_Webmail_9m3u9jl4l_13376_1114138144_0"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--NextPart_Webmail_9m3u9jl4l_13376_1114138144_0
Content-Type: text/plain
Content-Transfer-Encoding: 8bit

Thanks Pierrick.

Are you say that I should construct Token in analyzer like
new Token ("chem_H2O", 100, 103, "chem");

note that chem_ is added prefix to H2O, and 100 to 103 is length of H2O rather than chem_H2O?

I also have some further problem and not sure if can be solved by this approch.

I want to index H2O in a compound, say H2O-CH2. say I want a query to find out H2O in a compound. How can I do that?

Thanks,
Ethan

-------------- Original message -------------- 

> ethandev@comcast.net a écrit : 
> 
> > I am working on a program to index/search chemical element/compound. Say I 
> write an analyzer to filter out chemical terms, such as H2O. I noticed that I 
> can specify a tocken's type. Can I construct a token as 
> > new Token ("H2", start, end, "chem"); 
> > 
> > My questions is 
> > How do I search all the tokens with "chem" type token, such as H2O, O2, etc? 
> Any sample like this? 
> > 
> > If this approach doesn't work, what's the best approach? 
> 
> You may assign a type to the tokens, and then you may filter them 
> according to their type *but* the index forgets this info since it 
> stores *terms* (field/value pairs). 
> 
> Compare : 
> http://lucene.apache.org/java/docs/api/org/apache/lucene/analysis/Token.html 
> and 
> http://lucene.apache.org/java/docs/api/org/apache/lucene/index/Term.html 
> 
> Notice however that the terms have also their relative position (the 
> Token's positionIncrement, default = 1) stored in the index ; this 
> allows proximity searches. 
> 
> So... how to do ? 
> 
> 1) use a dedicated field "chem" where only chemical content is allowed 
> (filter out every token whose type is different from "chem") 
> 2) manipulate your termText : "chem_H2" ; the same for your queries 
> 3) play with the query rather than with the index content : filter out 
> what is not chemical 
> 
> There may be other solutions... 
> 
> Cheers, 
> 
> p.b. 
> 
> 
> 
> --------------------------------------------------------------------- 
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
> For additional commands, e-mail: java-user-help@lucene.apache.org 
> 
--NextPart_Webmail_9m3u9jl4l_13376_1114138144_0--

From java-user-return-14225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 02:51:04 2005
Return-Path: <java-user-return-14225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1842 invoked from network); 22 Apr 2005 02:51:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 02:51:04 -0000
Received: (qmail 13909 invoked by uid 500); 22 Apr 2005 02:51:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13878 invoked by uid 500); 22 Apr 2005 02:51:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13865 invoked by uid 99); 22 Apr 2005 02:51:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail06.powweb.com (HELO mail06.powweb.com) (66.152.97.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 21 Apr 2005 19:51:15 -0700
Received: from [172.24.106.195] (global-nat-fw1.bj.corp.yahoo.com [202.43.217.195])
	by mail06.powweb.com (Postfix) with ESMTP id 1410EB091;
	Thu, 21 Apr 2005 19:51:01 -0700 (PDT)
Received: from 127.0.0.1 (AVG SMTP 7.0.308 [266.10.2]); Fri, 22 Apr 2005 10:52:33 +0800
Message-ID: <426866F0.3070002@chedong.com>
Date: Fri, 22 Apr 2005 10:52:32 +0800
From: Che Dong <chedong@chedong.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: zh-cn,zh
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Increase IndexWriter.mergeFactor if you have enought memory Re: Lucene
 bulk indexing
References: <20050421234708.66793.qmail@web32106.mail.mud.yahoo.com>
In-Reply-To: <20050421234708.66793.qmail@web32106.mail.mud.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all:
did you tried to increase IndexWriter.mergeFactor. I tried to increase 
it to 1000 and index speed is about 10 time faster than defualt = 10 .

Regards

Che Dong
http://www.chedong.com/


Aalap Parikh åé:
> My machine is pretty good and fairly new. The disk for
> sure is not slow and also I am not indexing large
> Documents; 27 fields with each field value being a
> string with no more than 15-20 characters long.
> 
> I tried setting the maxFieldLength value of the
> Indexwriter to a low value but that didn't help.
> 
> Also, I am not using Hibernate at all.
> 
> Thanks,
> Aalap.
> 
> --- Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> wrote:
> 
>>That sounds way too long, unless you have veeery
>>slow disks, veeery
>>large Documents (long fields that you analyze,
>>index, and store in
>>Lucene), or some such.
>>If you have very loooong fiiiiieeeelds you could try
>>setting
>>
> 
> http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.html#maxFieldLength
> 
>>to a very small number and see if that changes
>>performance drastically.
>> There are other IndexWriter knobs you can fiddle
>>with.
>>
>>I've seen Hibernate 2.* get sluggish once its
>>Session gets filled up
>>with a lot of objects.
>>
>>Otis
>>
>>
>>--- Aalap Parikh <aloo77@yahoo.com> wrote:
>>
>>>Hi,
>>>
>>>I have similar issues in indexing time.
>>>
>>>I am doing a SELECT from database and getting back
>>>10,000 rows. I then start indexing each row and
>>
>>hence
>>
>>>would have 10,000 documents in my Lucene index.
>>
>>Each
>>
>>>doc has 27 fields.
>>>
>>>I added some timing code to my indexing process.
>>
>>The
>>
>>>DB select call takes around 23 seconds and the
>>>indexing process takes 567 seconds. Also, I
>>
>>profiled
>>
>>>the app using JProfiler and found out that 90% of
>>
>>time
>>
>>>is spent in the IndexWriter.addDocument call. As
>>>expected, there were 10,000 invocation of that
>>
>>method
>>
>>>(one for each doc) and the profiler showed that
>>
>>the
>>
>>>method took 90% of the processing time.
>>>
>>>I am concerned that it is taking around 9.5
>>
>>minutes
>>
>>>for 10,000 docs and I am expecting to have around
>>>600,000 docs to index. So that would take 570
>>
>>minutes
>>
>>>(9-10 hours) to index and which is HUGE!!!
>>>
>>>My machine: Pentium 4 CPU 2.40 GHz
>>>            RAM 1 GB
>>>
>>>Any help appreciated.
>>>
>>>Thanks,
>>>Aalap.
>>>
>>>
>>>--- skoptelov@fis.ru wrote:
>>>
>>>>Ãâ ÃÂÃÂ¾ÃÂ¾ÃÂ±Ãâ°ÃÂµÃÂ½ÃÂ¸ÃÂ¸ ÃÂ¾Ãâ ÃÂ¡Ãâ¬ÃÂµÃÂ´ÃÂ° 20
>>>>ÃÂÃÂ¿Ãâ¬ÃÂµÃÂ»ÃÅ 2005 04:07 Mufaddal Khumri
>>>>ÃÂ½ÃÂ°ÃÂ¿ÃÂ¸ÃÂÃÂ°ÃÂ»(a):
>>>>
>>>>>The 20000 products I mentioned are 20000 rows.
>>
>>I
>>
>>>>get the products in
>>>>
>>>>>bulk by using a limit clause.
>>>>>
>>>>>I am using hibernate with MySQL server on a
>>>>
>>>>2.8GHz, 1.00GB Ram machine.
>>>>
>>>>Maybe your session-level cache in hibernate
>>
>>grows
>>
>>>>incredibly. Do you do 
>>>>Session.clear() sometimes while doing indexing?
>>>>Here's a link about batching 
>>>>& hibernate:
>>>>
>>>
> http://blog.hibernate.org/cgi-bin/blosxom.cgi/2004/08/
> 
>>>>
> ---------------------------------------------------------------------
> 
>>>>To unsubscribe, e-mail:
>>>>java-user-unsubscribe@lucene.apache.org
>>>>For additional commands, e-mail:
>>>>java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
> ---------------------------------------------------------------------
> 
>>>To unsubscribe, e-mail:
>>
>>java-user-unsubscribe@lucene.apache.org
>>
>>>For additional commands, e-mail:
>>
>>java-user-help@lucene.apache.org
>>
>>>
>>
> ---------------------------------------------------------------------
> 
>>To unsubscribe, e-mail:
>>java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail:
>>java-user-help@lucene.apache.org
>>
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 03:25:08 2005
Return-Path: <java-user-return-14226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9507 invoked from network); 22 Apr 2005 03:25:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 03:25:08 -0000
Received: (qmail 53438 invoked by uid 500); 22 Apr 2005 03:25:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53411 invoked by uid 500); 22 Apr 2005 03:25:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53397 invoked by uid 99); 22 Apr 2005 03:25:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail06.powweb.com (HELO mail06.powweb.com) (66.152.97.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 21 Apr 2005 20:25:19 -0700
Received: from [172.24.106.195] (global-nat-fw1.bj.corp.yahoo.com [202.43.217.195])
	by mail06.powweb.com (Postfix) with ESMTP id AA572AFBE;
	Thu, 21 Apr 2005 20:25:02 -0700 (PDT)
Received: from 127.0.0.1 (AVG SMTP 7.0.308 [266.10.2]); Fri, 22 Apr 2005 11:26:26 +0800
Message-ID: <42686EE2.5010900@chedong.com>
Date: Fri, 22 Apr 2005 11:26:26 +0800
From: Che Dong <chedong@chedong.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: zh-cn,zh
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: sorting on "dates" a little fuzzy...
References: <399bbc0e05042114225e3415f1@mail.gmail.com> <321d0104f2fec342e6cb234b6c5ade85@ehatchersolutions.com>
In-Reply-To: <321d0104f2fec342e6cb234b6c5ade85@ehatchersolutions.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Just like Google said: full text search service is not traditional 
database application. Lucene is not a database too: if you wanna sort on 
some fields, you'd better pre-sort it before it indexed: like date. then 
get results by doc id.

For lucene you can only sort results in top hits. if you sort 400k 
result hits by date: you lost the speed of Lucene.


Thanks

Che Dong
http://www.chedong.com/

Erik Hatcher åé:
> 
> On Apr 21, 2005, at 5:22 PM, James Levine wrote:
> 
>> I have an index of around 3 million records, and typical queries
>> can result in result sets of between 1 and 400,000 results.
>>
>> We have indexed "dateTime" fields in the form 20050415142, that is, to
>> 10-minute precision.
>>
>> When I try to sort queries I get something back that is roughly sorted
>> on index, but not quite. Stuff is out of order just a bit. The
>> size of the result set does not seem to be related occurance of
>> this problem.
>>
>> We've tried lucene 1.4-final and1.4.3.
>>
>> my code looks like this
>>
>> s = new Sort( new SortField[] { new SortField( "dateTime", 
>> SortField.STRING,
>> true ), SortField.FIELD_SCORE } );
>>
>> ...
>>
>> hits = searcher.search( qry, s );
>>
>>
>> Any help is appreciated, I'm so far baffled by this problem.
> 
> 
> I don't have a solution, but rather some questions to check.... are all 
> dateTime's the same width, zero padded on the right?  Does every 
> document have a dateTime field?
> 
> I recommend you sort with type INT instead of STRING if it fits, or 
> maybe LONG.  STRING will use the most resources for sorting.
> 
>     Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 04:22:09 2005
Return-Path: <java-user-return-14227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35037 invoked from network); 22 Apr 2005 04:22:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 04:22:09 -0000
Received: (qmail 17411 invoked by uid 500); 22 Apr 2005 04:22:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17371 invoked by uid 500); 22 Apr 2005 04:22:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17330 invoked by uid 99); 22 Apr 2005 04:22:17 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web51608.mail.yahoo.com (HELO web51608.mail.yahoo.com) (206.190.38.213)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 21 Apr 2005 21:22:17 -0700
Received: (qmail 25174 invoked by uid 60001); 22 Apr 2005 04:21:50 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=5mV+9QIhY1c4p00eKXaa7VzeYNRlSlwVXJfPEjtUd/WDu24pix0Pa4h1RY3M2FqbtML1zQukI1yDNJ8lCt9mmlO5lmxT95oCovLVUDC7ZjgOU1bJxr99cv9xujq9bFo6qU9eRxKQ23HJhvKN0XrQbB6Yzz6xeqrUu8lChbmQPfg=  ;
Message-ID: <20050422042150.25172.qmail@web51608.mail.yahoo.com>
Received: from [24.6.91.87] by web51608.mail.yahoo.com via HTTP; Thu, 21 Apr 2005 21:21:50 PDT
Date: Thu, 21 Apr 2005 21:21:50 -0700 (PDT)
From: James <ajd_765@yahoo.com>
Subject: Re: sorting on "dates" a little fuzzy...
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi Erik,

Thanks for the reply.  All dateTime fields are zero-padded and the
same length, and each indexed document has a valid dateTime value.

Regarding the sort type, INT generates a ParseException, I assume
because the string has too many digits to fit in an int.  I looked
for a LONG type but couldn't find one.  So string was the next logical
choice.

Regards,
James

--- Erik Hatcher <erik@ehatchersolutions.com> wrote:
> 
> On Apr 21, 2005, at 5:22 PM, James Levine wrote:
> 
> > I have an index of around 3 million records, and typical queries
> > can result in result sets of between 1 and 400,000 results.
> >
> > We have indexed "dateTime" fields in the form 20050415142, that is, to
> > 10-minute precision.
> >
> > When I try to sort queries I get something back that is roughly sorted
> > on index, but not quite. Stuff is out of order just a bit. The
> > size of the result set does not seem to be related occurance of
> > this problem.
> >
> > We've tried lucene 1.4-final and1.4.3.
> >
> > my code looks like this
> >
> > s = new Sort( new SortField[] { new SortField( "dateTime", 
> > SortField.STRING,
> > true ), SortField.FIELD_SCORE } );
> >
> > ...
> >
> > hits = searcher.search( qry, s );
> >
> >
> > Any help is appreciated, I'm so far baffled by this problem.
> 
> I don't have a solution, but rather some questions to check.... are all 
> dateTime's the same width, zero padded on the right?  Does every 
> document have a dateTime field?
> 
> I recommend you sort with type INT instead of STRING if it fits, or 
> maybe LONG.  STRING will use the most resources for sorting.
> 
> 	Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 04:26:24 2005
Return-Path: <java-user-return-14228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36352 invoked from network); 22 Apr 2005 04:26:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 04:26:23 -0000
Received: (qmail 23616 invoked by uid 500); 22 Apr 2005 04:26:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23595 invoked by uid 500); 22 Apr 2005 04:26:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23582 invoked by uid 99); 22 Apr 2005 04:26:34 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web51604.mail.yahoo.com (HELO web51604.mail.yahoo.com) (206.190.38.209)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 21 Apr 2005 21:26:34 -0700
Received: (qmail 33820 invoked by uid 60001); 22 Apr 2005 04:26:11 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=dDwv7TQiLgnFxAGej0RzIM0xaxYniEEb6r4YurD8jITPuIFOTAfWeAEuzyXoi8kOslg+Mn53LSkTRjx5d9dgLkxSXcQWJycfrPBjxMRVKVDQFbsK6Bxh2K+3V0sPV2HybDaQxnjm/iWe0qrZrKYcxNevAYMHTfvDo9bpysqDPiM=  ;
Message-ID: <20050422042611.33818.qmail@web51604.mail.yahoo.com>
Received: from [24.6.91.87] by web51604.mail.yahoo.com via HTTP; Thu, 21 Apr 2005 21:26:11 PDT
Date: Thu, 21 Apr 2005 21:26:11 -0700 (PDT)
From: James <ajd_765@yahoo.com>
Subject: Re: sorting on "dates" a little fuzzy...
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi Che-

The presort method was our first approach but this doesn't work
in practice because we update the index incrementally and insertion order
doesn't match date ordering as we add updates.

I don't think sorting top hits only will deliver what the user is
expecting -- that is, results listed in most-recent-first order.  
Is there a better way to do it?

BTW, we're not seeing a ridiculous performance degredation arising
out of sorts on large result sets.  But on the other hand, sort
doesn't seem to be working very well, so far...

Regards,
James 

--- Che Dong <chedong@chedong.com> wrote:
> Just like Google said: full text search service is not traditional 
> database application. Lucene is not a database too: if you wanna sort on 
> some fields, you'd better pre-sort it before it indexed: like date. then 
> get results by doc id.
> 
> For lucene you can only sort results in top hits. if you sort 400k 
> result hits by date: you lost the speed of Lucene.
> 
> 
> Thanks
> 
> Che Dong
> http://www.chedong.com/
> 
> Erik Hatcher åé:
> > 
> > On Apr 21, 2005, at 5:22 PM, James Levine wrote:
> > 
> >> I have an index of around 3 million records, and typical queries
> >> can result in result sets of between 1 and 400,000 results.
> >>
> >> We have indexed "dateTime" fields in the form 20050415142, that is, to
> >> 10-minute precision.
> >>
> >> When I try to sort queries I get something back that is roughly sorted
> >> on index, but not quite. Stuff is out of order just a bit. The
> >> size of the result set does not seem to be related occurance of
> >> this problem.
> >>
> >> We've tried lucene 1.4-final and1.4.3.
> >>
> >> my code looks like this
> >>
> >> s = new Sort( new SortField[] { new SortField( "dateTime", 
> >> SortField.STRING,
> >> true ), SortField.FIELD_SCORE } );
> >>
> >> ...
> >>
> >> hits = searcher.search( qry, s );
> >>
> >>
> >> Any help is appreciated, I'm so far baffled by this problem.
> > 
> > 
> > I don't have a solution, but rather some questions to check.... are all 
> > dateTime's the same width, zero padded on the right?  Does every 
> > document have a dateTime field?
> > 
> > I recommend you sort with type INT instead of STRING if it fits, or 
> > maybe LONG.  STRING will use the most resources for sorting.
> > 
> >     Erik
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 06:17:28 2005
Return-Path: <java-user-return-14229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59581 invoked from network); 22 Apr 2005 06:17:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 06:17:28 -0000
Received: (qmail 48460 invoked by uid 500); 22 Apr 2005 06:17:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48427 invoked by uid 500); 22 Apr 2005 06:17:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48412 invoked by uid 99); 22 Apr 2005 06:17:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail06.powweb.com (HELO mail06.powweb.com) (66.152.97.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 21 Apr 2005 23:17:31 -0700
Received: from [172.24.106.195] (global-nat-fw1.bj.corp.yahoo.com [202.43.217.195])
	by mail06.powweb.com (Postfix) with ESMTP id 496D6B111;
	Thu, 21 Apr 2005 23:17:19 -0700 (PDT)
Received: from 127.0.0.1 (AVG SMTP 7.0.308 [266.10.2]); Fri, 22 Apr 2005 14:18:51 +0800
Message-ID: <4268974B.9080801@chedong.com>
Date: Fri, 22 Apr 2005 14:18:51 +0800
From: Che Dong <chedong@chedong.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: zh-cn,zh
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: sorting on "dates" a little fuzzy...
References: <20050422042611.33818.qmail@web51604.mail.yahoo.com>
In-Reply-To: <20050422042611.33818.qmail@web51604.mail.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

James åé:
> Hi Che-
> 
> The presort method was our first approach but this doesn't work
> in practice because we update the index incrementally and insertion order
> doesn't match date ordering as we add updates.
> 
> I don't think sorting top hits only will deliver what the user is
> expecting -- that is, results listed in most-recent-first order.  
> Is there a better way to do it?
I don't think a single index can match both your requirment on speed 
and compacity.
How about split databased into multi level: daily / weekly / monthly if 
searcher can get enough top hits in top db.

> 
> BTW, we're not seeing a ridiculous performance degredation arising
> out of sorts on large result sets.  But on the other hand, sort
> doesn't seem to be working very well, so far...
I check the HitCollector: seem Lucene will pre-fetch first 100 results 
by default. Lucene with pre-fetch to 200 results only if you walk to 101.

BTW: I feel lucene is getting too complex after adding to many functions 
on customized sorting and fuzzy query.

> 
> Regards,
> James 
> 
Che Dong
http://www.chedong.com/


> --- Che Dong <chedong@chedong.com> wrote:
> 
>>Just like Google said: full text search service is not traditional 
>>database application. Lucene is not a database too: if you wanna sort on 
>>some fields, you'd better pre-sort it before it indexed: like date. then 
>>get results by doc id.
>>
>>For lucene you can only sort results in top hits. if you sort 400k 
>>result hits by date: you lost the speed of Lucene.
>>
>>
>>Thanks
>>
>>Che Dong
>>http://www.chedong.com/
>>
>>Erik Hatcher Ã¥â â¢Ã©Ââ:
>>
>>>On Apr 21, 2005, at 5:22 PM, James Levine wrote:
>>>
>>>
>>>>I have an index of around 3 million records, and typical queries
>>>>can result in result sets of between 1 and 400,000 results.
>>>>
>>>>We have indexed "dateTime" fields in the form 20050415142, that is, to
>>>>10-minute precision.
>>>>
>>>>When I try to sort queries I get something back that is roughly sorted
>>>>on index, but not quite. Stuff is out of order just a bit. The
>>>>size of the result set does not seem to be related occurance of
>>>>this problem.
>>>>
>>>>We've tried lucene 1.4-final and1.4.3.
>>>>
>>>>my code looks like this
>>>>
>>>>s = new Sort( new SortField[] { new SortField( "dateTime", 
>>>>SortField.STRING,
>>>>true ), SortField.FIELD_SCORE } );
>>>>
>>>>...
>>>>
>>>>hits = searcher.search( qry, s );
>>>>
>>>>
>>>>Any help is appreciated, I'm so far baffled by this problem.
>>>
>>>
>>>I don't have a solution, but rather some questions to check.... are all 
>>>dateTime's the same width, zero padded on the right?  Does every 
>>>document have a dateTime field?
>>>
>>>I recommend you sort with type INT instead of STRING if it fits, or 
>>>maybe LONG.  STRING will use the most resources for sorting.
>>>
>>>    Erik
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around 
> http://mail.yahoo.com 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 07:34:37 2005
Return-Path: <java-user-return-14230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9623 invoked from network); 22 Apr 2005 07:34:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 07:34:37 -0000
Received: (qmail 48494 invoked by uid 500); 22 Apr 2005 07:34:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48457 invoked by uid 500); 22 Apr 2005 07:34:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48435 invoked by uid 99); 22 Apr 2005 07:34:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO hermes.culture.fr) (143.126.201.210)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 22 Apr 2005 00:34:47 -0700
Received: by mta.culture.fr with id j3M7XSRO002334
 for <java-user@lucene.apache.org>; Fri, 22 Apr 2005 09:33:28 +0200
Received: from bretagne.culture.fr (bretagne.culture.fr) by pasteur.culture.fr
 (Content Technologies SMTPRS 4.3.17) with ESMTP id <T7075a984798f7ec9dc3f8@pasteur.culture.fr> for <java-user@lucene.apache.org>;
 Fri, 22 Apr 2005 09:33:00 +0200
Received: from culture.gouv.fr by bretagne.culture.fr with ESMTP id j3M7XRaG007338
  for <java-user@lucene.apache.org>; Fri, 22 Apr 2005 09:33:27 +0200
Message-ID: <4268A980.3050807@culture.gouv.fr>
Date: Fri, 22 Apr 2005 09:36:32 +0200
From: Pierrick Brihaye <pierrick.brihaye@culture.gouv.fr>
User-Agent: Mozilla/5.0 (Windows; U; Win98; fr-FR; rv:1.6) Gecko/20040113
X-Accept-Language: fr, en, ar-eg
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: token type question
References: <042220050249.13376.426866200006966E000034402200762194900A0B020E089B0A@comcast.net>
In-Reply-To: <042220050249.13376.426866200006966E000034402200762194900A0B020E089B0A@comcast.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

ethandev@comcast.net a écrit :

> Thanks Pierrick.
> 
> Are you say that I should construct Token in analyzer like
> new Token ("chem_H2O", 100, 103, "chem");
> 
> note that chem_ is added prefix to H2O, and 100 to 103 is length of H2O rather than chem_H2O?

Well... 100 to 103 are offsets provided by the reader (an are thus 
usually offsets in the source file). These offsets may help you to make 
some computations but they are lost when the token is indexed.

> I want to index H2O in a compound, say H2O-CH2. say I want a query to find out H2O in a compound. How can I do that?

Dirty solution : use wildcard queries (chem_H20-*).

Smart solution :

consider that you have "words", i.e. chem_H2O followed by chem_CH2 
(strange enough ;-)... and make some phrase queries or 
MultiPhraseQueries. See :

http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/test/org/apache/lucene/search/TestPhraseQuery.java?rev=150740&view=markup
http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/test/org/apache/lucene/search/TestMultiPhraseQuery.java?rev=150733&view=markup

Setting the phrase slop may help you.

You may also want to play with the position of the tokens to 
allow/prevent hits from your PhraseQuery. Give your Tokens a relevant 
positionIncrement. See : 
http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/test/org/apache/lucene/search/TestPositionIncrement.java?rev=150585&view=markup

Cheers,

-- 
Pierrick Brihaye, informaticien
Service régional de l'Inventaire
DRAC Bretagne
mailto:pierrick.brihaye@culture.gouv.fr
+33 (0)2 99 29 67 78

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 07:39:54 2005
Return-Path: <java-user-return-14231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10652 invoked from network); 22 Apr 2005 07:39:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 07:39:53 -0000
Received: (qmail 58083 invoked by uid 500); 22 Apr 2005 07:40:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58060 invoked by uid 500); 22 Apr 2005 07:40:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58044 invoked by uid 99); 22 Apr 2005 07:40:03 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO uar.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 22 Apr 2005 00:40:03 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id 6B18A20290
	for <java-user@lucene.apache.org>; Fri, 22 Apr 2005 10:39:37 +0300 (EEST)
Message-ID: <4268AA5A.7030902@i-hypergrid.com>
Date: Fri, 22 Apr 2005 10:40:10 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: WildCard search replacement
References: <20050421234346.18356.qmail@web32108.mail.mud.yahoo.com>
In-Reply-To: <20050421234346.18356.qmail@web32108.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

first of all you'll never get TooManyClauseException because you're 
sesarching for phrase query. (i.e. this query will not be rewrited into 
boolean query).

about your question: if you need search like 123* you can use some term 
as begining marker and include this term at the begining of phrase 
query. But if prefix is long enough then ordinary PrefixQuery can win in 
speed. (it can vary depending on indexing conditions)

Regards,
Volosymyr Bychkoviak.

Aalap Parikh wrote:

>Hi,
>
>Thanks for your reply.
>One more question. You mentioned that your technique
>can be used for wildcard search like ex. *123* . But
>say I only need something like 123* i.e. wildcard only
>at the end and NOT on both sides, then how can one use
>your technique to avoid TooManyClauseException?
>
>Thanks,
>Aalap.
>
>--- Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
>wrote:
>  
>
>>I used It to measure speed and  but I was planning
>>to use it in file 
>>search application. when u need wildcard search like
>>*.txt and so on. 
>>The matter is that file search application  is not
>>my primary job, so I 
>>will tune it later.
>>This is just an example to give you an idea how it
>>can work.
>>
>>regards,
>>Volodymyr Bychkoviak
>>
>>Aalap Parikh wrote:
>>
>>    
>>
>>>Hi,
>>>
>>> 
>>>
>>>      
>>>
>>>>Also this analyzer is not used in any application,
>>>>        
>>>>
>>I
>>    
>>
>>>>wrote it only to 
>>>>measure search speed.
>>>>   
>>>>
>>>>        
>>>>
>>>So you don't use the method you described for your
>>>wildcard search trick?
>>>
>>>Thanks,
>>>Aalap.
>>>
>>>      
>>>
>>---------------------------------------------------------------------
>>    
>>
>>>To unsubscribe, e-mail:
>>>      
>>>
>>java-user-unsubscribe@lucene.apache.org
>>    
>>
>>>For additional commands, e-mail:
>>>      
>>>
>>java-user-help@lucene.apache.org
>>    
>>
>>> 
>>>
>>>      
>>>
>>    
>>
>---------------------------------------------------------------------
>  
>
>>To unsubscribe, e-mail:
>>java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail:
>>java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 08:09:16 2005
Return-Path: <java-user-return-14232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20534 invoked from network); 22 Apr 2005 08:09:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 08:09:16 -0000
Received: (qmail 11064 invoked by uid 500); 22 Apr 2005 08:09:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11038 invoked by uid 500); 22 Apr 2005 08:09:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11013 invoked by uid 99); 22 Apr 2005 08:09:25 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 22 Apr 2005 01:09:25 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 7426EE4812
	for <java-user@lucene.apache.org>; Fri, 22 Apr 2005 10:09:00 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 507B8E47C4
	for <java-user@lucene.apache.org>; Fri, 22 Apr 2005 10:09:00 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
Content-Transfer-Encoding: 7bit
Message-Id: <292407ebfcdff1e7055ddeba696bafb1@activemath.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: java-user@lucene.apache.org
From: Paul Libbrecht <paul@activemath.org>
Subject: Querying things "close to" a gang of terms ?
Date: Fri, 22 Apr 2005 10:08:57 +0200
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

Many people speak about the cosine distance or variation thereof (even 
probably n-gram things)... nice...

All this geometry has some power but a typical requirement of embedding 
such power is to be able to query documents that are close to this 
query's terms or to this document in the sense of this metric..

As far as I can see, Lucene provides me nothing for this...
The LuceneBook only shows an example where all distances a pre-computed.

Did I miss something ?
Is there another tool ? Maybe infomap ?

thanks

paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 10:19:31 2005
Return-Path: <java-user-return-14233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80833 invoked from network); 22 Apr 2005 10:19:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 10:19:30 -0000
Received: (qmail 43995 invoked by uid 500); 22 Apr 2005 10:19:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43872 invoked by uid 500); 22 Apr 2005 10:19:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43855 invoked by uid 99); 22 Apr 2005 10:19:40 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 22 Apr 2005 03:19:39 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id D708BE47CB
	for <java-user@lucene.apache.org>; Fri, 22 Apr 2005 12:19:14 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id BE1BDE47C4
	for <java-user@lucene.apache.org>; Fri, 22 Apr 2005 12:19:14 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <4268A980.3050807@culture.gouv.fr>
References: <042220050249.13376.426866200006966E000034402200762194900A0B020E089B0A@comcast.net> <4268A980.3050807@culture.gouv.fr>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <a10973f7b57d914abc5823ed2866a37f@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: token type question
Date: Fri, 22 Apr 2005 12:19:13 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Le 22 avr. 05, =E0 09:36, Pierrick Brihaye a =E9crit :

>> Are you say that I should construct Token in analyzer like
>> new Token ("chem_H2O", 100, 103, "chem");
>> note that chem_ is added prefix to H2O, and 100 to 103 is length of=20=

>> H2O rather than chem_H2O?
> Well... 100 to 103 are offsets provided by the reader (an are thus=20
> usually offsets in the source file). These offsets may help you to=20
> make some computations but they are lost when the token is indexed.

?? not in all situations, or ?? You couldn't render it back otherwise=20
as is done search-result highlighting.

One thing that tackles me is how much this parameter could, again, be=20
something different...

In particular, I'd much prefer to have it a tree-path instead of a=20
plain number. I don't have reader plain numbers and they are, often,=20
lost in an XML content-base.

hopeable ?


thanks

paul=


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 13:13:17 2005
Return-Path: <java-user-return-14234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58751 invoked from network); 22 Apr 2005 13:13:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 13:13:17 -0000
Received: (qmail 41282 invoked by uid 500); 22 Apr 2005 13:13:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41253 invoked by uid 500); 22 Apr 2005 13:13:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41230 invoked by uid 99); 22 Apr 2005 13:13:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 22 Apr 2005 06:13:29 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4265B13E2120; Fri, 22 Apr 2005 09:13:02 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 0F90B13E2007
	for <java-user@lucene.apache.org>; Fri, 22 Apr 2005 09:12:43 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <ac69bd1cfff793f8cbe1fe73ade1f4db@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: java-user@lucene.apache.org
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Fwd: New Article: Groovy and Lucene
Date: Fri, 22 Apr 2005 09:09:52 -0400
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



Begin forwarded message:

> From: Jeremy Rayner <jeremy.rayner@gmail.com>
> Date: April 22, 2005 7:48:05 AM EDT
> To: user@groovy.codehaus.org
> Subject: New Article: Groovy and Lucene
> Reply-To: Jeremy Rayner <jeremy.rayner@gmail.com>
>
> Hi groovy users,
>   Just a quick note to let you know that I have just posted a short
> article on my blog about
> using Groovy with Lucene (the high performance, scalable Information
> Retrieval library)
>
>   http://javanicus.com/blog2/items/178-index.html
>
> Enjoy,
>
> jez.
> -- 
> http://javanicus.com/blog2


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 15:23:14 2005
Return-Path: <java-user-return-14235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22945 invoked from network); 22 Apr 2005 15:23:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 15:23:14 -0000
Received: (qmail 36362 invoked by uid 500); 22 Apr 2005 15:23:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36335 invoked by uid 500); 22 Apr 2005 15:23:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36321 invoked by uid 99); 22 Apr 2005 15:23:29 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from csunb0.leeds.ac.uk (HELO csunb0.leeds.ac.uk) (129.11.144.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 22 Apr 2005 08:23:29 -0700
Received: from csunix.leeds.ac.uk (cserv1.leeds.ac.uk [129.11.144.20])
	by csunb0.leeds.ac.uk (8.12.11/8.12.11) with ESMTP id j3MFN1Pj012255
	for <java-user@lucene.apache.org>; Fri, 22 Apr 2005 16:23:01 +0100
Received: from cslin119.csunix.comp.leeds.ac.uk (cslin119.csunix.comp [129.11.146.119]) by csunix.leeds.ac.uk (8.12.2/) with ESMTP id j3MFN0Q9001428 for <java-user@lucene.apache.org>; Fri, 22 Apr 2005 16:23:00 +0100 (BST)
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Digester and simple XML files
Date: Fri, 22 Apr 2005 16:26:31 +0000
User-Agent: KMail/1.8
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504221626.31825.mail@andy-roberts.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

Just been playing with Digester after reading chapter 7 in LIA. Seems to fit 
my needs as I have a relatively simple XML structure. 

<xml>
	<header>
		<!-- meta data about the file here. This is not important to me. -->
	</header>

	<text>
		<front>
			<!-- info here too but it's nothing I care about -->
		</front>
		<body>
			<p>some sentences</p>
			<p>some more sentences</p>
		</body>
	</text>
</xml>

Now, I want the text that's found between the <p> tags within the body 
section. So, I wrote a little test class using a largely bastardised version 
of DigesterXMLHandler from LIA.

I'm a tad confused to say the least. I create a Paragraph object upon seeing 
text/body. Then, call setText when I see the next <p> tag. And that's all I 
want per object, so I've added the addSetNext to call printParagraph which I 
hope prints the previous paragraph contents. But it doesn't!

My code looks so wrong but I've been hacking at it for a while with little 
fun. Any suggestions?

Thanks,
Andy

public class DigesterTest {
    
    private Digester dig;
    
    public DigesterTest(File inFile) throws IOException, SAXException {
        dig = new Digester();
        dig.setValidating(false);
              
        dig.addObjectCreate("text/body/", Paragraph.class);

        
        dig.addCallMethod("text/body/p", "setText", 0);
        
        dig.addSetNext("text/body/p", "printParagraph");
        
        System.out.println(inFile);
        dig.parse(inFile);
        
    }
    
    public void printParagraph(Paragraph p) {
	    System.out.println(p.getText());
	}
    
   
    public static void main(String[] args) {
        try {
            new DigesterTest(new File(args[0]));
        } catch (IOException e) {
            e.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        }
    }
    public class Paragraph {
    
    	private String text;
    
    	public Paragraph() {
    	}
    
    	public String getText() {
    	    return text;
    	}
    
    	public void setText(String inText) {
        
    	    if (inText != null) {
    	        text = inText;
    	    }
    	}
    	
   }    

}

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 16:13:28 2005
Return-Path: <java-user-return-14236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39512 invoked from network); 22 Apr 2005 16:13:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 16:13:28 -0000
Received: (qmail 36489 invoked by uid 500); 22 Apr 2005 16:13:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36462 invoked by uid 500); 22 Apr 2005 16:13:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36446 invoked by uid 99); 22 Apr 2005 16:13:43 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from humanizing-42.iquest.net (HELO htexc.hq.htinc.com) (206.246.149.42)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 22 Apr 2005 09:13:43 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Subject: lucene score
Date: Fri, 22 Apr 2005 11:13:10 -0500
Message-ID: <4568BE33B520DD43B7B24DE0B609B21568E28B@htexc.hq.htinc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: lucene score
Thread-Index: AcU8awX+IfW8ksZNQweHwUorw5JLtgK6qR/g
From: "Ravi" <ravi@htinc.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi=20
 Does lucene relevancy score depend on the total number of documents in
the index? Will I get different scores for the same document for the
same query for indexes of different sizes? If it does, when does it
return a higher score?=20

Thanks in advance,
Ravi.=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 17:24:41 2005
Return-Path: <java-user-return-14237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59449 invoked from network); 22 Apr 2005 17:24:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 17:24:41 -0000
Received: (qmail 87402 invoked by uid 500); 22 Apr 2005 17:24:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87360 invoked by uid 500); 22 Apr 2005 17:24:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87344 invoked by uid 99); 22 Apr 2005 17:24:58 -0000
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=FORGED_YAHOO_RCVD,FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web32113.mail.mud.yahoo.com (HELO web32113.mail.mud.yahoo.com) (68.142.207.127)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 22 Apr 2005 10:24:58 -0700
Received: (qmail 37783 invoked by uid 60001); 22 Apr 2005 17:24:30 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=0jkc4/g836pHbEsXZC8bS5pFh57swb4lHrC+UdtLzas4yegfhSTYz6lIDg6Eic0LUG7u8ym1kD5SfSVOLXwKqHjY6VRxnhsN7et+VvfUcklNeltcB6sAwBNarILh59bVwHL/gbR6yjaWt3UHclXZorjTf/DCEfGTovPyIjN4OZo=  ;
Message-ID: <20050422172430.37781.qmail@web32113.mail.mud.yahoo.com>
Received: from [206.13.63.69] by web32113.mail.mud.yahoo.com via HTTP; Fri, 22 Apr 2005 10:24:30 PDT
Date: Fri, 22 Apr 2005 10:24:30 -0700 (PDT)
From: Aalap Parikh <aloo77@yahoo.com>
Subject: Re: Lucene bulk indexing
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

> : the app using JProfiler and found out that 90% of
> time
> : is spent in the IndexWriter.addDocument call. As
> 
> what analyzer are you using?

I am using the StandardAnalyzer (tried using
SimpleAnalyzer too, but not much affect on
performance).

> : My machine: Pentium 4 CPU 2.40 GHz
> :             RAM 1 GB
> 
> what JVM args are you using? (in particular: how
> much ram are you telling
> the JVM to use) ... what else is running on this box
> while you index?

I am using -Xms32M -Xmx200M . I have tried giving more
but doesn't help much.

> The biggest help anyone an give you is if you post
> your code ... there may

Here is what my code looks like:

Document doc = null;
IndexWriter writer = new IndexWriter(indexDirPath, 
                         new StandardAnalyzer(),
true);

for (int i = 0; i < dataArrayToIndex.length; i++) {
    doc = new Document();
    doc.add(Field.UnIndexed("ID",  
        
String.valueOf(dataArrayToIndex[i].getId())));
    doc.add(Field.Keyword("claimCode", 
             dataArrayToIndex[i].getClaimCode()));
    doc.add(Field.Keyword("insuredName", 
             dataArrayToIndex[i].getInsuredName()));
    doc.add(Field.Keyword("claimantName", 
             dataArrayToIndex[i].getClaimantName()));
    ....
    //and so on with about 27 fields in total, most of
 
    //them indexed as Field.Keyword with text not more

    //than 10-20 character each.

    writer.addDocument(doc);
 } //end of for loop

 writer.optimize();
 writer.close();

Thanks,
Aalap.


--- Chris Hostetter <hossman_lucene@fucit.org> wrote:
> : the app using JProfiler and found out that 90% of
> time
> : is spent in the IndexWriter.addDocument call. As
> 
> what analyzer are you using?
> 
> : My machine: Pentium 4 CPU 2.40 GHz
> :             RAM 1 GB
> 
> what JVM args are you using? (in particular: how
> much ram are you telling
> the JVM to use) ... what else is running on this box
> while you index?
> 
> : Any help appreciated.
> 
> The biggest help anyone an give you is if you post
> your code ... there may
> be little things in the way you are using the
> IndexWriter that will jump
> out at people if they see exactly what you are
> doing.
> 
> 
> -Hoss
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 20:02:14 2005
Return-Path: <java-user-return-14238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14018 invoked from network); 22 Apr 2005 20:02:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 20:02:14 -0000
Received: (qmail 86313 invoked by uid 500); 22 Apr 2005 20:02:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86217 invoked by uid 500); 22 Apr 2005 20:02:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86137 invoked by uid 99); 22 Apr 2005 20:02:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of rbpandey@gmail.com designates 64.233.184.204 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 22 Apr 2005 13:02:30 -0700
Received: by wproxy.gmail.com with SMTP id 50so972727wri
        for <java-user@lucene.apache.org>; Fri, 22 Apr 2005 13:02:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=P27q7dv9z/a+1V/pI8bNqMV7ETXoVgZTr6u8/pUkJ5azKnTLbmwIictJ/IRw6fWRXtQxr+diElileV2Gkbalu13CSlhBnxyFQsFr8OXrjfkx72ePMCxsI5mpYEOXBzpBtS81EdDI6NWLVQwjDPCTzauZynfLGze96zyBpfvGQvg=
Received: by 10.54.15.76 with SMTP id 76mr686324wro;
        Fri, 22 Apr 2005 13:02:00 -0700 (PDT)
Received: by 10.54.66.13 with HTTP; Fri, 22 Apr 2005 13:02:00 -0700 (PDT)
Message-ID: <80d298bc0504221302d15792d@mail.gmail.com>
Date: Fri, 22 Apr 2005 16:02:00 -0400
From: Rasik Pandey <rbpandey@gmail.com>
Reply-To: Rasik Pandey <rbpandey@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: sorting on "dates" a little fuzzy...
In-Reply-To: <20050422042150.25172.qmail@web51608.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20050422042150.25172.qmail@web51608.mail.yahoo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi James,

Have a look in Bugzilla at issue #34563. I contributed some code last
night that may be helpful to you. Have a look at the
patchTestSort.txt, which is a diff of my changes to test the classes I
created. This may help you understand how to use the classes, but I
assume based upon the value you are storing in the index you may only
need the LongSortComparator.java which I attached to that Bugzilla
issue.

Regards,
Rus

On 4/22/05, James <ajd_765@yahoo.com> wrote:
>=20
> Hi Erik,
>=20
> Thanks for the reply.  All dateTime fields are zero-padded and the
> same length, and each indexed document has a valid dateTime value.
>=20
> Regarding the sort type, INT generates a ParseException, I assume
> because the string has too many digits to fit in an int.  I looked
> for a LONG type but couldn't find one.  So string was the next logical
> choice.
>=20
> Regards,
> James
>=20
> --- Erik Hatcher <erik@ehatchersolutions.com> wrote:
> >
> > On Apr 21, 2005, at 5:22 PM, James Levine wrote:
> >
> > > I have an index of around 3 million records, and typical queries
> > > can result in result sets of between 1 and 400,000 results.
> > >
> > > We have indexed "dateTime" fields in the form 20050415142, that is, t=
o
> > > 10-minute precision.
> > >
> > > When I try to sort queries I get something back that is roughly sorte=
d
> > > on index, but not quite. Stuff is out of order just a bit. The
> > > size of the result set does not seem to be related occurance of
> > > this problem.
> > >
> > > We've tried lucene 1.4-final and1.4.3.
> > >
> > > my code looks like this
> > >
> > > s =3D new Sort( new SortField[] { new SortField( "dateTime",
> > > SortField.STRING,
> > > true ), SortField.FIELD_SCORE } );
> > >
> > > ...
> > >
> > > hits =3D searcher.search( qry, s );
> > >
> > >
> > > Any help is appreciated, I'm so far baffled by this problem.
> >
> > I don't have a solution, but rather some questions to check.... are all
> > dateTime's the same width, zero padded on the right?  Does every
> > document have a dateTime field?
> >
> > I recommend you sort with type INT instead of STRING if it fits, or
> > maybe LONG.  STRING will use the most resources for sorting.
> >
> >       Erik
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 21:23:34 2005
Return-Path: <java-user-return-14239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34970 invoked from network); 22 Apr 2005 21:23:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 21:23:34 -0000
Received: (qmail 58503 invoked by uid 500); 22 Apr 2005 21:23:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58361 invoked by uid 500); 22 Apr 2005 21:23:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58345 invoked by uid 99); 22 Apr 2005 21:23:53 -0000
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=FORGED_YAHOO_RCVD,FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web32105.mail.mud.yahoo.com (HELO web32105.mail.mud.yahoo.com) (68.142.207.119)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 22 Apr 2005 14:23:53 -0700
Received: (qmail 60506 invoked by uid 60001); 22 Apr 2005 21:23:22 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=uNNS9Oj0sgHJl3UzlNa9B9E4au9cPjMtVA6F7lqYFvIQECNklww1C7fsjb5rogFDFVqeO26pQd2EMMB9UUBWoh6xqYSL44yGqYOa7xpx2LiR27ZQnx4TcfziEQfgHgw2VAmVpJ4kOlXyQmGYw5o/11VWHj8C5/wFurraqECRTFE=  ;
Message-ID: <20050422212322.60504.qmail@web32105.mail.mud.yahoo.com>
Received: from [206.13.63.69] by web32105.mail.mud.yahoo.com via HTTP; Fri, 22 Apr 2005 14:23:22 PDT
Date: Fri, 22 Apr 2005 14:23:22 -0700 (PDT)
From: Aalap Parikh <aloo77@yahoo.com>
Subject: Re: WildCard search replacement
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

The idea about begin marker sounds good. And the
prefix could be anything and could be made really
small by just using may be 2 or 3 or even less
characters.

In terms of the PrefixQuery for 123* wildcard search,
wouldn't such a query be rewritten to a BooleanQuery?
I tried using PrefixQuery and it did give me the
TooManyClauseException.

Thanks,
Aalap.


--- Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
wrote:
> Hi,
> 
> first of all you'll never get TooManyClauseException
> because you're 
> sesarching for phrase query. (i.e. this query will
> not be rewrited into 
> boolean query).
> 
> about your question: if you need search like 123*
> you can use some term 
> as begining marker and include this term at the
> begining of phrase 
> query. But if prefix is long enough then ordinary
> PrefixQuery can win in 
> speed. (it can vary depending on indexing
> conditions)
> 
> Regards,
> Volosymyr Bychkoviak.
> 
> Aalap Parikh wrote:
> 
> >Hi,
> >
> >Thanks for your reply.
> >One more question. You mentioned that your
> technique
> >can be used for wildcard search like ex. *123* .
> But
> >say I only need something like 123* i.e. wildcard
> only
> >at the end and NOT on both sides, then how can one
> use
> >your technique to avoid TooManyClauseException?
> >
> >Thanks,
> >Aalap.
> >
> >--- Volodymyr Bychkoviak
> <vbychkoviak@i-hypergrid.com>
> >wrote:
> >  
> >
> >>I used It to measure speed and  but I was planning
> >>to use it in file 
> >>search application. when u need wildcard search
> like
> >>*.txt and so on. 
> >>The matter is that file search application  is not
> >>my primary job, so I 
> >>will tune it later.
> >>This is just an example to give you an idea how it
> >>can work.
> >>
> >>regards,
> >>Volodymyr Bychkoviak
> >>
> >>Aalap Parikh wrote:
> >>
> >>    
> >>
> >>>Hi,
> >>>
> >>> 
> >>>
> >>>      
> >>>
> >>>>Also this analyzer is not used in any
> application,
> >>>>        
> >>>>
> >>I
> >>    
> >>
> >>>>wrote it only to 
> >>>>measure search speed.
> >>>>   
> >>>>
> >>>>        
> >>>>
> >>>So you don't use the method you described for
> your
> >>>wildcard search trick?
> >>>
> >>>Thanks,
> >>>Aalap.
> >>>
> >>>      
> >>>
>
>>---------------------------------------------------------------------
> >>    
> >>
> >>>To unsubscribe, e-mail:
> >>>      
> >>>
> >>java-user-unsubscribe@lucene.apache.org
> >>    
> >>
> >>>For additional commands, e-mail:
> >>>      
> >>>
> >>java-user-help@lucene.apache.org
> >>    
> >>
> >>> 
> >>>
> >>>      
> >>>
> >>    
> >>
>
>---------------------------------------------------------------------
> >  
> >
> >>To unsubscribe, e-mail:
> >>java-user-unsubscribe@lucene.apache.org
> >>For additional commands, e-mail:
> >>java-user-help@lucene.apache.org
> >>
> >>
> >>    
> >>
> >
>
>---------------------------------------------------------------------
> >To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >
> >  
> >
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 21:33:32 2005
Return-Path: <java-user-return-14240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37234 invoked from network); 22 Apr 2005 21:33:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 21:33:32 -0000
Received: (qmail 74533 invoked by uid 500); 22 Apr 2005 21:33:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73968 invoked by uid 500); 22 Apr 2005 21:33:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73954 invoked by uid 99); 22 Apr 2005 21:33:53 -0000
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=FORGED_YAHOO_RCVD,FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web32112.mail.mud.yahoo.com (HELO web32112.mail.mud.yahoo.com) (68.142.207.126)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 22 Apr 2005 14:33:52 -0700
Received: (qmail 89768 invoked by uid 60001); 22 Apr 2005 21:33:22 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=QrzC/tgbMUbMbS+KDStOmQxkbw352SxUlmn4vUfZ2O1EUnV85pPjhqwoj4hEzOZUL0jm42cr1bA2Xl/llY/+E6T5NwVkSjOf45/rOgn6LDdABVH2C4obrIBZcVEa8wRjrbrQ0MhVQCZSy7P2SY6LO0bjBnVX4CVJx43a7VrCyZM=  ;
Message-ID: <20050422213322.89766.qmail@web32112.mail.mud.yahoo.com>
Received: from [206.13.63.69] by web32112.mail.mud.yahoo.com via HTTP; Fri, 22 Apr 2005 14:33:22 PDT
Date: Fri, 22 Apr 2005 14:33:22 -0700 (PDT)
From: Aalap Parikh <aloo77@yahoo.com>
Subject: Re: Lucene bulk indexing
To: java-user@lucene.apache.org, "Peter A. Daly" <petedaly@gmail.com>
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Peter,

As I said in my earlier email, changing the
mergeFactor and minMergeDocs properties in IndexWriter
did help but still not what I would like it to be. I
then tried what you suggested. RAMDirectory-based disk
indexing and it has worked SUPERBLY for me. I was able
to reduce the processing time to less than 2 hrs for
the same process which would have taken somewhere
around 8-9 hours. Thanks a lot.

Aalap.

--- "Peter A. Daly" <petedaly@gmail.com> wrote:
> On some systems I have seen big speed increases by
> indexing to a
> RAMDirectory and periodically "merging" into an on
> disk directory
> every X number of docs.  May or may not help in this
> case.  In the
> first case a used this, it took indexing down from a
> few hours to 30
> minutes for a few million documents on a windows 2k
> desktop machine.
> 
> http://www.budget-ha.com/lucene/ram-to-disk/
> 
> -Pete
> 
> On 4/20/05, Otis Gospodnetic
> <otis_gospodnetic@yahoo.com> wrote:
> > That sounds way too long, unless you have veeery
> slow disks, veeery
> > large Documents (long fields that you analyze,
> index, and store in
> > Lucene), or some such.
> > If you have very loooong fiiiiieeeelds you could
> try setting
> >
>
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.html#maxFieldLength
> > to a very small number and see if that changes
> performance drastically.
> >  There are other IndexWriter knobs you can fiddle
> with.
> > 
> > I've seen Hibernate 2.* get sluggish once its
> Session gets filled up
> > with a lot of objects.
> > 
> > Otis
> > 
> > 
> > --- Aalap Parikh <aloo77@yahoo.com> wrote:
> > > Hi,
> > >
> > > I have similar issues in indexing time.
> > >
> > > I am doing a SELECT from database and getting
> back
> > > 10,000 rows. I then start indexing each row and
> hence
> > > would have 10,000 documents in my Lucene index.
> Each
> > > doc has 27 fields.
> > >
> > > I added some timing code to my indexing process.
> The
> > > DB select call takes around 23 seconds and the
> > > indexing process takes 567 seconds. Also, I
> profiled
> > > the app using JProfiler and found out that 90%
> of time
> > > is spent in the IndexWriter.addDocument call. As
> > > expected, there were 10,000 invocation of that
> method
> > > (one for each doc) and the profiler showed that
> the
> > > method took 90% of the processing time.
> > >
> > > I am concerned that it is taking around 9.5
> minutes
> > > for 10,000 docs and I am expecting to have
> around
> > > 600,000 docs to index. So that would take 570
> minutes
> > > (9-10 hours) to index and which is HUGE!!!
> > >
> > > My machine: Pentium 4 CPU 2.40 GHz
> > >             RAM 1 GB
> > >
> > > Any help appreciated.
> > >
> > > Thanks,
> > > Aalap.
> > >
> > >
> > > --- skoptelov@fis.ru wrote:
> > > > ÷ ÓÏÏÂÝÅÎÉÉ ÏÔ óÒÅÄÁ 20
> > > > áÐÒÅÌØ 2005 04:07 Mufaddal Khumri
> > > > ÎÁÐÉÓÁÌ(a):
> > > > > The 20000 products I mentioned are 20000
> rows. I
> > > > get the products in
> > > > > bulk by using a limit clause.
> > > > >
> > > > > I am using hibernate with MySQL server on a
> > > > 2.8GHz, 1.00GB Ram machine.
> > > >
> > > > Maybe your session-level cache in hibernate
> grows
> > > > incredibly. Do you do
> > > > Session.clear() sometimes while doing
> indexing?
> > > > Here's a link about batching
> > > > & hibernate:
> > > >
> > >
>
http://blog.hibernate.org/cgi-bin/blosxom.cgi/2004/08/
> > > >
> > > >
> > >
>
---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> > > > java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail:
> > > > java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > >
> > >
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > 
> >
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 22 23:47:14 2005
Return-Path: <java-user-return-14241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82156 invoked from network); 22 Apr 2005 23:47:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2005 23:47:13 -0000
Received: (qmail 11582 invoked by uid 500); 22 Apr 2005 23:47:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11543 invoked by uid 500); 22 Apr 2005 23:47:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11519 invoked by uid 99); 22 Apr 2005 23:47:38 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web51605.mail.yahoo.com (HELO web51605.mail.yahoo.com) (206.190.38.210)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 22 Apr 2005 16:47:37 -0700
Received: (qmail 36815 invoked by uid 60001); 22 Apr 2005 23:47:06 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=qs3j7BbG77McrV8ftLYdc8PT83aHBkzqgqeR+8tNCp97zTJa0+Y7RuQ5T85JpmhZ6xf2mVWAPddJb+PXWMEQ1g5zIrEHeZl1ftY5g0lONENbfkY6TMWT409VSgfoURuKcfPI1i8r7FSdUvjBqCBn0uO6mZcy2TfKLCpVUS2JsQk=  ;
Message-ID: <20050422234706.36813.qmail@web51605.mail.yahoo.com>
Received: from [24.6.91.87] by web51605.mail.yahoo.com via HTTP; Fri, 22 Apr 2005 16:47:06 PDT
Date: Fri, 22 Apr 2005 16:47:06 -0700 (PDT)
From: James <ajd_765@yahoo.com>
Subject: Re: sorting on "dates" a little fuzzy... - resolved
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


This was resolved by specifying Locale.US in the SortField
constructor.  I guess our default locale setting is messed
up somewhere.  

Thanks to everyone who responded!

James


--- James Levine <jdlevine@gmail.com> wrote:
> I have an index of around 3 million records, and typical queries
> can result in result sets of between 1 and 400,000 results. 
> 
> We have indexed "dateTime" fields in the form 20050415142, that is, to
> 10-minute precision.
> 
> When I try to sort queries I get something back that is roughly sorted
> on index, but not quite. Stuff is out of order just a bit. The
> size of the result set does not seem to be related occurance of
> this problem.
> 
> We've tried lucene 1.4-final and1.4.3.
> 
> my code looks like this
> 
> s = new Sort( new SortField[] { new SortField( "dateTime", SortField.STRING, 
> true ), SortField.FIELD_SCORE } );
> 
> ...
> 
> hits = searcher.search( qry, s );
> 
> 
> Any help is appreciated, I'm so far baffled by this problem.
> 
> Regards,
> James
> 

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 23 21:46:09 2005
Return-Path: <java-user-return-14242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70544 invoked from network); 23 Apr 2005 21:46:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Apr 2005 21:46:09 -0000
Received: (qmail 28503 invoked by uid 500); 23 Apr 2005 21:46:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28472 invoked by uid 500); 23 Apr 2005 21:46:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28459 invoked by uid 99); 23 Apr 2005 21:46:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO anjalrelay) (194.170.154.6)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 23 Apr 2005 14:46:35 -0700
Received: from anjalmail ([172.17.1.9])
          by anjalrelay (Lotus Domino Release 6.0.1)
          with ESMTP id 2005042401504370-123361 ;
          Sun, 24 Apr 2005 01:50:43 +0400 
Received: from jayakumar ([192.168.1.107])
          by anjalmail (Lotus Domino Release 6.0.1)
          with ESMTP id 2005042401412205-19468 ;
          Sun, 24 Apr 2005 01:41:22 +0400 
Reply-To: <jayakumar.v@uaeexchange.com>
From: "Jayakumar.V" <jayakumar.v@uaeexchange.com>
To: <java-user@lucene.apache.org>
Subject: lucene indexing performance
Date: Sun, 24 Apr 2005 01:44:03 +0400
Organization: UAE Xchange Center
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcVITZDyobhcUUpyRrmVaRhqfohKjw==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
X-MIMETrack: Itemize by SMTP Server on MAIL/UAE Exchange(Release 6.0.1|February 07, 2003) at
 04/24/2005 01:41:22 AM,
	Serialize by Router on MAIL/UAE Exchange(Release 6.0.1|February 07, 2003) at
 04/24/2005 01:41:24 AM,
	Serialize complete at 04/24/2005 01:41:24 AM,
	Itemize by SMTP Server on RELAY/UAE Exchange(Release 6.0.1|February 07, 2003) at
 04/24/2005 01:50:43 AM,
	Serialize by Router on RELAY/UAE Exchange(Release 6.0.1|February 07, 2003) at
 04/24/2005 01:50:49 AM,
	Serialize complete at 04/24/2005 01:50:49 AM
Message-ID: <OF44731AC9.3A848CE0-ON44256FEC.007724DA@xpressmoney.com>
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0000_01C5486F.18384DC0"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0000_01C5486F.18384DC0
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset="US-ASCII"

Hi,

Maybe this query has been answered before. My first email to this user group
did not generate any response. I had forwarded it to the following email ids
:  

java-user-info@lucene.apache.org

java-user@lucene.apache.org

 

This is my second email to this mail id. Hope I've reached the right place.

 

We are indexing documents on a scheduled basis. A document which was indexed
at time T1 will be available again for indexing at time T2 with certain
additional fields. Now, I need to ensure that only the document received at
time T2 is present in the index, for which I need to first identify if the
record is present in the index & then delete it before indexing the same.
I've taken the cue from a code snippet available in the TSS case study in
the book Lucene In Action. 

 

The steps I've followed is as below :

-          prepare the Document for indexing

-          close the existing  IndexWriter instance

-          get an IndexReader instance to the index

-          check if the record going to be indexed is already available in
the index 

-          if YES, delete it & close the IndexReader instance

-          open the IndexWriter instance again

-          add the Document to the index

 

Now, this is an iterative process for each record being indexed. Is it the
right way to go about doing this? It took nearly 3 hours to index 250,000
records.

 

I'm attaching the code snippet used in my app. for deleting & adding the
record :

 

    private void addIndex(Document doc, Map dataMap) {

        IndexReader indexReader = null;

        

        // check if the doc. is already indexed.

        // if YES, first remove it b4 adding the document

        try {

            // first, close the undelying IndexWriter instance

            // v can't have 2 index modifying instances open at the same
time

            closeWriterIndex();

            

            // get an IndexReader instance

            indexReader = IndexReader.open(fsDir);

            // get a Term obj. for deletion

            Term term = new Term("xpin",(String)dataMap.get("xpin"));

            // now, remove the already added doc.

            indexReader.delete(term);

      } catch (IOException e) {

            e.printStackTrace();

      } finally {

          try {

              // close the reader instance after deleting the doc.

              indexReader.close();

          } catch (IOException e) {

            e.printStackTrace();

          }

      }

         

      try {

            // now, reopen the index writer object

            openWriterIndex();

 

            // index the document

            fsWriter.addDocument(doc);

        } catch (IOException e) {

            e.printStackTrace();

        }

    }

 

    private void closeWriterIndex() {

      try {

            fsWriter.close();

      } catch (IOException e) {

            e.printStackTrace();

      }

    }

 

    private void openWriterIndex() {

      try {

            fsWriter = new IndexWriter(fsDir, new StandardAnalyzer(),
false);

            fsWriter.mergeFactor = 100;

      } catch (IOException e) {

            e.printStackTrace();

      }  

    }

 

I'm at the final stages of deploying this module. Any suggestions / ideas
will be helpful in completing it fast. 

 

 

TIA 

Jayakumar.V

 


------=_NextPart_000_0000_01C5486F.18384DC0--


From java-user-return-14243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 23 21:58:09 2005
Return-Path: <java-user-return-14243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71714 invoked from network); 23 Apr 2005 21:58:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Apr 2005 21:58:09 -0000
Received: (qmail 38306 invoked by uid 500); 23 Apr 2005 21:58:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38281 invoked by uid 500); 23 Apr 2005 21:58:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38266 invoked by uid 99); 23 Apr 2005 21:58:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 23 Apr 2005 14:58:35 -0700
Received: from [192.168.1.104] ([::ffff:66.92.12.207])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Sat, 23 Apr 2005 16:58:04 -0500
  id 00074202.426AC4EC.00001598
Message-ID: <426AC501.2070606@allthingslocal.com>
Date: Sat, 23 Apr 2005 14:58:25 -0700
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Debian Thunderbird 1.0 (X11/20050116)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: lucene indexing performance
References: <OF44731AC9.3A848CE0-ON44256FEC.007724DA@xpressmoney.com>
In-Reply-To: <OF44731AC9.3A848CE0-ON44256FEC.007724DA@xpressmoney.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

One immediate optimization would be to only close the writer and open 
the reader if the document is present.  You can have a reader open and 
do searches while indexing (and optimization) are underway.  It's just 
the delete operation that requires you to close the writer (so you don't 
have two different objects trying the update the same index).

However, that is rendered moot by the much bigger optimization.  Open 
the reader once, do all your deletes, close the reader, and then do all 
your adds.  I.e., batch your updates as much as possible.

If you have to them one at a time, then the first optimization should 
help some.

Chuck

Jayakumar.V wrote:

>Hi,
>
>Maybe this query has been answered before. My first email to this user group
>did not generate any response. I had forwarded it to the following email ids
>:  
>
>java-user-info@lucene.apache.org
>
>java-user@lucene.apache.org
>
> 
>
>This is my second email to this mail id. Hope I've reached the right place.
>
> 
>
>We are indexing documents on a scheduled basis. A document which was indexed
>at time T1 will be available again for indexing at time T2 with certain
>additional fields. Now, I need to ensure that only the document received at
>time T2 is present in the index, for which I need to first identify if the
>record is present in the index & then delete it before indexing the same.
>I've taken the cue from a code snippet available in the TSS case study in
>the book Lucene In Action. 
>
> 
>
>The steps I've followed is as below :
>
>-          prepare the Document for indexing
>
>-          close the existing  IndexWriter instance
>
>-          get an IndexReader instance to the index
>
>-          check if the record going to be indexed is already available in
>the index 
>
>-          if YES, delete it & close the IndexReader instance
>
>-          open the IndexWriter instance again
>
>-          add the Document to the index
>
> 
>
>Now, this is an iterative process for each record being indexed. Is it the
>right way to go about doing this? It took nearly 3 hours to index 250,000
>records.
>
> 
>
>I'm attaching the code snippet used in my app. for deleting & adding the
>record :
>
> 
>
>    private void addIndex(Document doc, Map dataMap) {
>
>        IndexReader indexReader = null;
>
>        
>
>        // check if the doc. is already indexed.
>
>        // if YES, first remove it b4 adding the document
>
>        try {
>
>            // first, close the undelying IndexWriter instance
>
>            // v can't have 2 index modifying instances open at the same
>time
>
>            closeWriterIndex();
>
>            
>
>            // get an IndexReader instance
>
>            indexReader = IndexReader.open(fsDir);
>
>            // get a Term obj. for deletion
>
>            Term term = new Term("xpin",(String)dataMap.get("xpin"));
>
>            // now, remove the already added doc.
>
>            indexReader.delete(term);
>
>      } catch (IOException e) {
>
>            e.printStackTrace();
>
>      } finally {
>
>          try {
>
>              // close the reader instance after deleting the doc.
>
>              indexReader.close();
>
>          } catch (IOException e) {
>
>            e.printStackTrace();
>
>          }
>
>      }
>
>         
>
>      try {
>
>            // now, reopen the index writer object
>
>            openWriterIndex();
>
> 
>
>            // index the document
>
>            fsWriter.addDocument(doc);
>
>        } catch (IOException e) {
>
>            e.printStackTrace();
>
>        }
>
>    }
>
> 
>
>    private void closeWriterIndex() {
>
>      try {
>
>            fsWriter.close();
>
>      } catch (IOException e) {
>
>            e.printStackTrace();
>
>      }
>
>    }
>
> 
>
>    private void openWriterIndex() {
>
>      try {
>
>            fsWriter = new IndexWriter(fsDir, new StandardAnalyzer(),
>false);
>
>            fsWriter.mergeFactor = 100;
>
>      } catch (IOException e) {
>
>            e.printStackTrace();
>
>      }  
>
>    }
>
> 
>
>I'm at the final stages of deploying this module. Any suggestions / ideas
>will be helpful in completing it fast. 
>
> 
>
> 
>
>TIA 
>
>Jayakumar.V
>
> 
>
>
>  
>


-- 
*Chuck Williams*
All Things Local
Founder and CEO
V: (415)464-1889
C: (415)846-9018
chuck@AllThingsLocal.com <mailto:chuck@AllThingsLocal.com>
AIM: hawimanawiz

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 24 14:05:31 2005
Return-Path: <java-user-return-14244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97627 invoked from network); 24 Apr 2005 14:05:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Apr 2005 14:05:31 -0000
Received: (qmail 70806 invoked by uid 500); 24 Apr 2005 14:05:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70773 invoked by uid 500); 24 Apr 2005 14:05:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70759 invoked by uid 99); 24 Apr 2005 14:05:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of gomesp@gmail.com designates 64.233.184.192 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 24 Apr 2005 07:05:55 -0700
Received: by wproxy.gmail.com with SMTP id 36so1259849wra
        for <java-user@lucene.apache.org>; Sun, 24 Apr 2005 07:05:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=p3dNraoi0kuGMP3oecWjF9gMoGQxISPIyDMVwf4EoVvyNZNdyvG4fuvDwq0gznf2OezgaO/iijNT/SBGvIYIsNupr9C9r6T+EU8Dvhyoadwtpmqm+QADDXWpaj3uuBSHCvU0sn7cjiUTgq3k3gfOLWn51yR7dd+xJMOI/cVP9p8=
Received: by 10.54.149.20 with SMTP id w20mr1379594wrd;
        Sun, 24 Apr 2005 07:05:26 -0700 (PDT)
Received: by 10.54.104.18 with HTTP; Sun, 24 Apr 2005 07:05:25 -0700 (PDT)
Message-ID: <4f05ec8e05042407053cbc2031@mail.gmail.com>
Date: Sun, 24 Apr 2005 16:05:26 +0200
From: Pablo Gomes Ludermir <gomesp@gmail.com>
Reply-To: Pablo Gomes Ludermir <gomesp@gmail.com>
To: java-user@lucene.apache.org
Subject: categorized search
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

I have indexed a field that describes the "category" of the document.
Thus, I want to know how many categories have a specific term. Could
someone help me to get this with good performance?

Regards,
Pablo
--=20
Pablo Gomes Ludermir
gomesp@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 24 17:05:59 2005
Return-Path: <java-user-return-14245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28545 invoked from network); 24 Apr 2005 17:05:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Apr 2005 17:05:59 -0000
Received: (qmail 39208 invoked by uid 500); 24 Apr 2005 17:06:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39183 invoked by uid 500); 24 Apr 2005 17:06:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39170 invoked by uid 99); 24 Apr 2005 17:06:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 24 Apr 2005 10:06:19 -0700
Received: from [192.168.1.106] ([::ffff:66.92.12.207])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Sun, 24 Apr 2005 12:05:49 -0500
  id 0007420C.426BD1ED.000024D0
Message-ID: <426BD1F9.9070008@allthingslocal.com>
Date: Sun, 24 Apr 2005 10:06:01 -0700
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Debian Thunderbird 1.0 (X11/20050116)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: categorized search
References: <4f05ec8e05042407053cbc2031@mail.gmail.com>
In-Reply-To: <4f05ec8e05042407053cbc2031@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Pablo Gomes Ludermir wrote:

>Hi all,
>
>I have indexed a field that describes the "category" of the document.
>Thus, I want to know how many categories have a specific term. Could
>someone help me to get this with good performance?
>  
>
If you want a complete count of all documents in the index for each 
category term, you should keep these counts in your own data structure 
as you index.  If you want to determine a global count for a specific 
category term on demand, I'd suggest using IndexReader.termDocs().  If 
you want to determine counts relative to the results of a particular 
search query, then you need to either iterate the results of the query 
and count occurrences of the category term(s), or perform queries that 
AND the additional category term of interest (the former will be much 
faster if you are computing this for many category terms simultaneously).

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 24 19:43:30 2005
Return-Path: <java-user-return-14246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94180 invoked from network); 24 Apr 2005 19:43:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Apr 2005 19:43:30 -0000
Received: (qmail 72521 invoked by uid 500); 24 Apr 2005 19:43:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72499 invoked by uid 500); 24 Apr 2005 19:43:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72485 invoked by uid 99); 24 Apr 2005 19:43:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 24 Apr 2005 12:43:50 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 83BD05B829; Sun, 24 Apr 2005 12:42:45 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0E9517F466
	for <java-user@lucene.apache.org>; Sun, 24 Apr 2005 12:42:44 -0700 (PDT)
Date: Sun, 24 Apr 2005 12:42:44 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: categorized search
In-Reply-To: <426BD1F9.9070008@allthingslocal.com>
Message-ID: <Pine.LNX.4.58.0504241155230.19799@hal.rescomp.berkeley.edu>
References: <4f05ec8e05042407053cbc2031@mail.gmail.com> <426BD1F9.9070008@allthingslocal.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: >I have indexed a field that describes the "category" of the document.
: >Thus, I want to know how many categories have a specific term. Could
: >someone help me to get this with good performance?

I think I'm reading this question different than Chuck, so I'll toss out
somethign totally different...

as I understand it, you've indexed a bunch of documents, with a variety of
fields, one of which is "category" (for example, maybe you are indexing
news articles, that each have a "title", "description", "url", and
"category").  Now you have a term like "title:lucene" (or
"description:pope") and you want to know the number of unique terms in the
category field that exist in articles that contain your input term.

If that's what you're looking for, then you can problem achieve this by:
  1) make a TermQuery for your input term (ie: "title:lucene")
  2) put that TermQuery in a QueryFilter, and call bits(reader)
  3) call FieldCache.DEFAULT.getStrings(reader,"category")
  3) loop over the true bits in the BitSet from #3, and for each one, add
     the corrisponding entry from the String[] in #4 to a Set.

when you're all done, the Set will be the list of categories, and the size
of that Set is the number (i think) you wanted.


(DISCLAIMER: I've never acctaully used FieldCache, i'm just giving you my
advice based on reading the javadocs)

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 24 19:43:40 2005
Return-Path: <java-user-return-14247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94259 invoked from network); 24 Apr 2005 19:43:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Apr 2005 19:43:40 -0000
Received: (qmail 72753 invoked by uid 500); 24 Apr 2005 19:43:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72690 invoked by uid 500); 24 Apr 2005 19:43:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72643 invoked by uid 99); 24 Apr 2005 19:43:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 24 Apr 2005 12:43:52 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4C12C5B827; Sun, 24 Apr 2005 12:42:45 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0E9517F466
	for <java-user@lucene.apache.org>; Sun, 24 Apr 2005 12:42:44 -0700 (PDT)
Date: Sun, 24 Apr 2005 12:42:44 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: categorized search
In-Reply-To: <426BD1F9.9070008@allthingslocal.com>
Message-ID: <Pine.LNX.4.58.0504241155230.19799@hal.rescomp.berkeley.edu>
References: <4f05ec8e05042407053cbc2031@mail.gmail.com> <426BD1F9.9070008@allthingslocal.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: >I have indexed a field that describes the "category" of the document.
: >Thus, I want to know how many categories have a specific term. Could
: >someone help me to get this with good performance?

I think I'm reading this question different than Chuck, so I'll toss out
somethign totally different...

as I understand it, you've indexed a bunch of documents, with a variety of
fields, one of which is "category" (for example, maybe you are indexing
news articles, that each have a "title", "description", "url", and
"category").  Now you have a term like "title:lucene" (or
"description:pope") and you want to know the number of unique terms in the
category field that exist in articles that contain your input term.

If that's what you're looking for, then you can problem achieve this by:
  1) make a TermQuery for your input term (ie: "title:lucene")
  2) put that TermQuery in a QueryFilter, and call bits(reader)
  3) call FieldCache.DEFAULT.getStrings(reader,"category")
  3) loop over the true bits in the BitSet from #3, and for each one, add
     the corrisponding entry from the String[] in #4 to a Set.

when you're all done, the Set will be the list of categories, and the size
of that Set is the number (i think) you wanted.


(DISCLAIMER: I've never acctaully used FieldCache, i'm just giving you my
advice based on reading the javadocs)

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 25 06:40:44 2005
Return-Path: <java-user-return-14248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40175 invoked from network); 25 Apr 2005 06:40:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2005 06:40:44 -0000
Received: (qmail 69680 invoked by uid 500); 25 Apr 2005 06:40:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69536 invoked by uid 500); 25 Apr 2005 06:40:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69505 invoked by uid 99); 25 Apr 2005 06:40:55 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO uar.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 24 Apr 2005 23:40:55 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id F33553EE3D
	for <java-user@lucene.apache.org>; Mon, 25 Apr 2005 09:40:22 +0300 (EEST)
Message-ID: <426C90D6.3090502@i-hypergrid.com>
Date: Mon, 25 Apr 2005 09:40:22 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: WildCard search replacement
References: <20050422212322.60504.qmail@web32105.mail.mud.yahoo.com>
In-Reply-To: <20050422212322.60504.qmail@web32105.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi.

Aalap Parikh wrote:

>Hi,
>
>The idea about begin marker sounds good. And the
>prefix could be anything and could be made really
>small by just using may be 2 or 3 or even less
>characters.
>  
>
if you want to use 1 character for begin marker make sure you don't nave 
same tokens. But I think that making it 2 characters long is the best way.

>In terms of the PrefixQuery for 123* wildcard search,
>wouldn't such a query be rewritten to a BooleanQuery?
>  
>
Yes, PrefixQuery is rewritten to a BooleanQuery.

>I tried using PrefixQuery and it did give me the
>TooManyClauseException.
>  
>
Then you should use this approach. :)

regards,
Volodymyr Bychkoviak

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 25 12:08:36 2005
Return-Path: <java-user-return-14249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93633 invoked from network); 25 Apr 2005 12:08:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2005 12:08:36 -0000
Received: (qmail 63564 invoked by uid 500); 25 Apr 2005 12:08:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63530 invoked by uid 500); 25 Apr 2005 12:08:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63512 invoked by uid 99); 25 Apr 2005 12:08:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 25 Apr 2005 05:08:49 -0700
Content-class: urn:content-classes:message
Subject: CVS Lucene 2.0
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5498F.77FD9C6C"
Date: Mon, 25 Apr 2005 14:08:19 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA071152@gerard.anchormen.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: CVS Lucene 2.0
Thread-Index: AcVJj3f7VjeuOkAXRjKCZqGwAVjidA==
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5498F.77FD9C6C
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Is the sourcecode of Lucene 2.0 accessable? I have looked on the site,
but I couldn`t find a link.=20
=20
And where are the archived mailinglists? They where of great value to
me.
=20

Met vriendelijke groet,

Peter Veentjer
Anchor Men Interactive Solutions - duidelijk in zakelijke
internetoplossingen

Praediniussingel 41
9711 AE Groningen

T: 050-3115222
F: 050-5891696
E: p.veentjer@anchormen.nl
I : www.anchormen.nl <blocked::http://www.anchormen.nl/>=20

=20

------_=_NextPart_001_01C5498F.77FD9C6C--

From java-user-return-14250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 25 12:18:40 2005
Return-Path: <java-user-return-14250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97507 invoked from network); 25 Apr 2005 12:18:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2005 12:18:39 -0000
Received: (qmail 79047 invoked by uid 500); 25 Apr 2005 12:18:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78969 invoked by uid 500); 25 Apr 2005 12:18:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78953 invoked by uid 99); 25 Apr 2005 12:18:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of newreaders@gmail.com designates 64.233.184.206 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 25 Apr 2005 05:18:53 -0700
Received: by wproxy.gmail.com with SMTP id 50so1510252wri
        for <java-user@lucene.apache.org>; Mon, 25 Apr 2005 05:18:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=cO3cWn6GV3SMmJmwRA/xMJz1vDGfawSxxcu6eMa5XXV4iQPpO+NN554V4WrrPjp3wnG3pmSfqW28kEczZg3r8phS8NmHYz6oqDz8HKYu0+he5fp1EFdVucHaQxgRfjzzm2R32HCp399siY2HdsfJ4+tZsYG+esH+hDNIIxHLt6k=
Received: by 10.54.10.67 with SMTP id 67mr1886617wrj;
        Mon, 25 Apr 2005 05:18:22 -0700 (PDT)
Received: by 10.54.23.39 with HTTP; Mon, 25 Apr 2005 05:18:22 -0700 (PDT)
Message-ID: <5f4a6461050425051842dcf59f@mail.gmail.com>
Date: Mon, 25 Apr 2005 22:18:22 +1000
From: Ben <newreaders@gmail.com>
Reply-To: Ben <newreaders@gmail.com>
To: Lucene <java-user@lucene.apache.org>
Subject: Delete documents base on more than one condition?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

Is it possible to delete a set of documents where they match certain
conditions? I would like to delete a set of articles that belong to a
given user within a category.

Thanks,
Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 25 14:40:05 2005
Return-Path: <java-user-return-14251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59660 invoked from network); 25 Apr 2005 14:40:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2005 14:40:05 -0000
Received: (qmail 39054 invoked by uid 500); 25 Apr 2005 14:40:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38798 invoked by uid 500); 25 Apr 2005 14:40:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38776 invoked by uid 99); 25 Apr 2005 14:40:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.dit.upm.es (HELO mail.dit.upm.es) (138.4.2.7)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 25 Apr 2005 07:40:21 -0700
Received: from jungla.dit.upm.es (IDENT:aLDIfL+MoS2VzsAqbbILdsfryVN5+2uS@jungla-sdit.dit.upm.es [138.4.5.11])
	by mail.dit.upm.es (8.11.6/8.9.3) with ESMTP id j3PEdlg24012
	for <java-user@lucene.apache.org>; Mon, 25 Apr 2005 16:39:47 +0200
Received: from [138.4.7.166] (guest7.dit.upm.es [138.4.7.166])
	by jungla.dit.upm.es (8.11.6/8.9.3) with ESMTP id j3PEdlR28749
	for <java-user@lucene.apache.org>; Mon, 25 Apr 2005 16:39:47 +0200
Message-ID: <426D0132.60503@dit.upm.es>
Date: Mon, 25 Apr 2005 16:39:46 +0200
From: Victor Abeytua <vabeytua@dit.upm.es>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Multiple field search problem
X-Enigmail-Version: 0.86.1.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello everyone,
    In the project I'm currently involved we are using lucene (+ 
Digester) to index a small number of XML files. To be able to perform 
the searches I want, I should need to query the index with something 
similar to (where fieldN are XML tags):
(field1:"Policy and planning" OR  field1:Newspapers) AND field2:Spanish

    I haven't been able to find any class that suits my needs and if I 
try to use QueryParse.parse() to be able to write the query in "human" 
form, the analyzer takes the "and" away and changes the string to lower 
case. This is something I can't afford as I need to be able to search by 
the exact keywords.
    Any ideas are welcome. Perhaps the answer is right in front of me 
but I haven't been able to figure it out.

    Thanks in advance,
    Victor Abeytua
   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 25 14:48:18 2005
Return-Path: <java-user-return-14252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63924 invoked from network); 25 Apr 2005 14:48:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2005 14:48:18 -0000
Received: (qmail 57778 invoked by uid 500); 25 Apr 2005 14:48:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57754 invoked by uid 500); 25 Apr 2005 14:48:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57735 invoked by uid 99); 25 Apr 2005 14:48:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from lilzmailso01.liwest.at (HELO lilzmailso01.liwest.at) (212.33.55.23)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 25 Apr 2005 07:48:35 -0700
Received: from cm66-207.liwest.at ([212.241.66.207] helo=[192.168.0.4])
	by lilzmailso01.liwest.at with esmtp (Exim 4.24)
	id 1DQ4sT-0008T7-SG
	for java-user@lucene.apache.org; Mon, 25 Apr 2005 16:48:01 +0200
Message-ID: <426D0254.30407@eduhi.at>
Date: Mon, 25 Apr 2005 16:44:36 +0200
From: Gusenbauer Stefan <gusenbauer@eduhi.at>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiple field search problem
References: <426D0132.60503@dit.upm.es>
In-Reply-To: <426D0132.60503@dit.upm.es>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Victor Abeytua wrote:

> Hello everyone,
>    In the project I'm currently involved we are using lucene (+
> Digester) to index a small number of XML files. To be able to perform
> the searches I want, I should need to query the index with something
> similar to (where fieldN are XML tags):
> (field1:"Policy and planning" OR  field1:Newspapers) AND field2:Spanish
>
>    I haven't been able to find any class that suits my needs and if I
> try to use QueryParse.parse() to be able to write the query in "human"
> form, the analyzer takes the "and" away and changes the string to
> lower case. This is something I can't afford as I need to be able to
> search by the exact keywords.
>    Any ideas are welcome. Perhaps the answer is right in front of me
> but I haven't been able to figure it out.
>
>    Thanks in advance,
>    Victor Abeytua
>  
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
The lowercasing depends on the analyzer you use perharps you've only put
them into apostrophs like this " if you instanciate the Queryparser you
can specifiy which Boolean operand should be used if no operand is
given. With query.toString() you get the query in an human readable
format for with + for and and so on.
stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 25 15:48:33 2005
Return-Path: <java-user-return-14253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97768 invoked from network); 25 Apr 2005 15:48:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2005 15:48:33 -0000
Received: (qmail 76095 invoked by uid 500); 25 Apr 2005 15:48:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76051 invoked by uid 500); 25 Apr 2005 15:48:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76036 invoked by uid 99); 25 Apr 2005 15:48:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 25 Apr 2005 08:48:55 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2B25C13E2123; Mon, 25 Apr 2005 11:48:17 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id A064213E2121
	for <java-user@lucene.apache.org>; Mon, 25 Apr 2005 11:47:39 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <24CFCE44DCB015489FB96D38BDF4FCAA071152@gerard.anchormen.nl>
References: <24CFCE44DCB015489FB96D38BDF4FCAA071152@gerard.anchormen.nl>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <fc86b396d3da5438560656aa1bfac782@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: CVS Lucene 2.0
Date: Mon, 25 Apr 2005 11:47:35 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 25, 2005, at 8:08 AM, Peter Veentjer - Anchor Men wrote:
> Is the sourcecode of Lucene 2.0 accessable? I have looked on the site,
> but I couldn`t find a link.

There has been no binary release of it.  The codebase available from 
Subversion checkout and easily built with Ant is available using:

	svn co http://svn.apache.org/repos/asf/lucene/java/trunk

The current trunk will be (except for any changes that occur in the 
next few days or weeks) Lucene 1.9 and Lucene 2.0 will be the same as 
1.9 except with the deprecated methods removed.

> And where are the archived mailinglists? They where of great value to
> me.

You can view them here:

	http://www.mail-archive.com/java-user%40lucene.apache.org/

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 25 19:42:00 2005
Return-Path: <java-user-return-14254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12318 invoked from network); 25 Apr 2005 19:42:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2005 19:42:00 -0000
Received: (qmail 17217 invoked by uid 500); 25 Apr 2005 19:42:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16320 invoked by uid 500); 25 Apr 2005 19:42:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16306 invoked by uid 99); 25 Apr 2005 19:42:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from skipper.frogspace.net (HELO skipper.frogspace.net) (216.222.192.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 25 Apr 2005 12:42:28 -0700
Received: from [129.33.1.37] (helo=aroushlt)
	by skipper.frogspace.net with esmtp (Exim 4.44)
	id 1DQ9Ss-00006r-2C
	for java-user@lucene.apache.org; Mon, 25 Apr 2005 12:41:54 -0700
From: "George Aroush" <george@aroush.net>
To: <java-user@lucene.apache.org>
Subject: RE: CVS Lucene 2.0
Date: Mon, 25 Apr 2005 15:41:54 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <fc86b396d3da5438560656aa1bfac782@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1478
thread-index: AcVJrjwEYw31h/36SYic0qCWGg/PpwAH95eg
X-SA-Exim-Connect-IP: 129.33.1.37
X-SA-Exim-Mail-From: george@aroush.net
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik,

I would like to see a source release of 1.9, a packaged source release as
ZIP/TAR.  Is that possible?

Regards,

-- George Aroush


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Monday, April 25, 2005 11:48 AM
To: java-user@lucene.apache.org
Subject: Re: CVS Lucene 2.0


On Apr 25, 2005, at 8:08 AM, Peter Veentjer - Anchor Men wrote:
> Is the sourcecode of Lucene 2.0 accessable? I have looked on the site, 
> but I couldn`t find a link.

There has been no binary release of it.  The codebase available from
Subversion checkout and easily built with Ant is available using:

	svn co http://svn.apache.org/repos/asf/lucene/java/trunk

The current trunk will be (except for any changes that occur in the next few
days or weeks) Lucene 1.9 and Lucene 2.0 will be the same as
1.9 except with the deprecated methods removed.

> And where are the archived mailinglists? They where of great value to 
> me.

You can view them here:

	http://www.mail-archive.com/java-user%40lucene.apache.org/

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 25 20:08:36 2005
Return-Path: <java-user-return-14255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21480 invoked from network); 25 Apr 2005 20:08:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2005 20:08:36 -0000
Received: (qmail 57897 invoked by uid 500); 25 Apr 2005 20:09:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56977 invoked by uid 500); 25 Apr 2005 20:09:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56962 invoked by uid 99); 25 Apr 2005 20:09:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc11.comcast.net (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 25 Apr 2005 13:09:04 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2005042520082701300d69e8e>; Mon, 25 Apr 2005 20:08:27 +0000
Message-ID: <426D4E3A.4010002@apache.org>
Date: Mon, 25 Apr 2005 13:08:26 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: CVS Lucene 2.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

George Aroush wrote:
> I would like to see a source release of 1.9, a packaged source release as
> ZIP/TAR.  Is that possible?

There is no 1.9 release.  It is a *planned* release at this point.  When 
a release is actually made, then you will be able to download it.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 25 23:02:26 2005
Return-Path: <java-user-return-14256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76337 invoked from network); 25 Apr 2005 23:02:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2005 23:02:26 -0000
Received: (qmail 46457 invoked by uid 500); 25 Apr 2005 23:02:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46437 invoked by uid 500); 25 Apr 2005 23:02:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46423 invoked by uid 99); 25 Apr 2005 23:02:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 25 Apr 2005 16:02:53 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 52F0913E2125; Mon, 25 Apr 2005 19:02:16 -0400 (EDT)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 45C5913E2124
	for <java-user@lucene.apache.org>; Mon, 25 Apr 2005 19:02:08 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <426D4E3A.4010002@apache.org>
References: <426D4E3A.4010002@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <762b2577de2c164d1c63328272036cdf@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: CVS Lucene 2.0
Date: Mon, 25 Apr 2005 19:02:02 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

FYI... I'm working on the build process to include the contrib 
libraries at this moment.  Once that is done, we can move forward with 
1.9 RC1 release whenever it is deemed ready.

	Erik

On Apr 25, 2005, at 4:08 PM, Doug Cutting wrote:

> George Aroush wrote:
>> I would like to see a source release of 1.9, a packaged source 
>> release as
>> ZIP/TAR.  Is that possible?
>
> There is no 1.9 release.  It is a *planned* release at this point.  
> When a release is actually made, then you will be able to download it.
>
> Doug
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 26 08:18:20 2005
Return-Path: <java-user-return-14257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59956 invoked from network); 26 Apr 2005 08:18:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2005 08:18:20 -0000
Received: (qmail 66160 invoked by uid 500); 26 Apr 2005 08:18:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66077 invoked by uid 500); 26 Apr 2005 08:18:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66036 invoked by uid 99); 26 Apr 2005 08:18:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ausdauer.webit.de (HELO ausdauer.webit.de) (195.30.114.250)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 01:18:38 -0700
Received: from cordoba (cordoba.webit.de [195.30.114.47])
	by ausdauer.webit.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j3Q8HsOw001501;
	Tue, 26 Apr 2005 10:17:55 +0200
Received: by cordoba (Postfix, from userid 1000)
	id 59FF364B93; Tue, 26 Apr 2005 10:17:55 +0200 (CEST)
Date: Tue, 26 Apr 2005 10:17:55 +0200
From: Jens Kraemer <kraemer@webit.de>
To: java-user@lucene.apache.org, Ben <newreaders@gmail.com>
Subject: Re: Delete documents base on more than one condition?
Message-ID: <20050426081755.GO3695@cordoba.webit.de>
References: <5f4a6461050425051842dcf59f@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <5f4a6461050425051842dcf59f@mail.gmail.com>
User-Agent: Mutt/1.5.6+20040907i
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, Apr 25, 2005 at 10:18:22PM +1000, Ben wrote:
> Hi
> 
> Is it possible to delete a set of documents where they match certain
> conditions? I would like to delete a set of articles that belong to a
> given user within a category.

just build a query reflecting your criteria (e.g. a BooleanQuery
containing two TermQueries, one for category and one for the user
field), run a search with this query, walk through the search results
and delete each of them.

Jens

-- 
webit! Gesellschaft für neue Medien mbH          www.webit.de
Dipl.-Wirtschaftsingenieur Jens Krämer       kraemer@webit.de
Schnorrstraße 76                      Telefon +49 351 46766 0
D-01069 Dresden                      Telefax +49 351 46766 66

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 26 08:29:07 2005
Return-Path: <java-user-return-14258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63617 invoked from network); 26 Apr 2005 08:29:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2005 08:29:07 -0000
Received: (qmail 85533 invoked by uid 500); 26 Apr 2005 08:29:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85509 invoked by uid 500); 26 Apr 2005 08:29:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85490 invoked by uid 99); 26 Apr 2005 08:29:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.dit.upm.es (HELO mail.dit.upm.es) (138.4.2.7)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 01:29:17 -0700
Received: from jungla.dit.upm.es (IDENT:pEhRZdx64wABj3GoF/JdSdq5u3lfyGXx@jungla.dit.upm.es [138.4.5.11])
	by mail.dit.upm.es (8.11.6/8.9.3) with ESMTP id j3Q8Sbd25582
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2005 10:28:37 +0200
Received: from [138.4.7.166] (guest7.dit.upm.es [138.4.7.166])
	by jungla.dit.upm.es (8.11.6/8.9.3) with ESMTP id j3Q8SbR25331
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2005 10:28:37 +0200
Message-ID: <426DFBB4.8090503@dit.upm.es>
Date: Tue, 26 Apr 2005 10:28:36 +0200
From: Victor Abeytua <vabeytua@dit.upm.es>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Multiple field search problem
References: <426D0132.60503@dit.upm.es> <426D0254.30407@eduhi.at>
In-Reply-To: <426D0254.30407@eduhi.at>
X-Enigmail-Version: 0.86.1.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the quick reply.
    As I supposed, the answer was right in front of me. To build a query 
as the one I wanted I have to use the BooleanQuery class:

        Term term1 = new Term("field1", "Policy planning");
        Term term2 = new Term("field1", "Newspapers");
        Term term3 = new Term("field2", "Spanish");
        Query query = new TermQuery(term1);
        Query query2 = new TermQuery(term2);
        Query query3 = new TermQuery(term3);
        BooleanQuery bquery = new BooleanQuery ();
        BooleanQuery bquery2 = new BooleanQuery ();
        bquery.add(query, false, false);
        bquery.add(query2, false, false);
        bquery2.add (bquery, true, false);
        bquery2.add (query3, true, false);
        
        Victor

Gusenbauer Stefan wrote:

>Victor Abeytua wrote:
>
>  
>
>>Hello everyone,
>>   In the project I'm currently involved we are using lucene (+
>>Digester) to index a small number of XML files. To be able to perform
>>the searches I want, I should need to query the index with something
>>similar to (where fieldN are XML tags):
>>(field1:"Policy and planning" OR  field1:Newspapers) AND field2:Spanish
>>
>>   I haven't been able to find any class that suits my needs and if I
>>try to use QueryParse.parse() to be able to write the query in "human"
>>form, the analyzer takes the "and" away and changes the string to
>>lower case. This is something I can't afford as I need to be able to
>>search by the exact keywords.
>>   Any ideas are welcome. Perhaps the answer is right in front of me
>>but I haven't been able to figure it out.
>>
>>   Thanks in advance,
>>   Victor Abeytua
>> 
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>    
>>
>The lowercasing depends on the analyzer you use perharps you've only put
>them into apostrophs like this " if you instanciate the Queryparser you
>can specifiy which Boolean operand should be used if no operand is
>given. With query.toString() you get the query in an human readable
>format for with + for and and so on.
>stefan
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 26 13:00:56 2005
Return-Path: <java-user-return-14259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73368 invoked from network); 26 Apr 2005 13:00:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2005 13:00:56 -0000
Received: (qmail 24362 invoked by uid 500); 26 Apr 2005 13:01:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24292 invoked by uid 500); 26 Apr 2005 13:01:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24248 invoked by uid 99); 26 Apr 2005 13:01:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 06:01:19 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EE84313E2006; Tue, 26 Apr 2005 09:00:36 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP
	id B865013E2124; Tue, 26 Apr 2005 09:00:08 -0400 (EDT)
In-Reply-To: <426DEBE1.1060309@gmx.net>
References: <426DEBE1.1060309@gmx.net>
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <816ce3ffeb6daf26ceddfadb287fba6c@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
Cc: java-user@lucene.apache.org
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Indexing of virtual "made up" documents
Date: Tue, 26 Apr 2005 09:00:05 -0400
To: general@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 26, 2005, at 3:21 AM, Daniel Stephan wrote:
> lets see if somebody listens on this list :-D

I doubt many are on this list, yet.  But your question is probably best 
asked on the java-user@lucene list rather than here.  I'll CC java-user 
this time to loop those folks in.

> I wonder if the following is possible with Lucene.

Yes, it is!

> I would like to add documents to the index, which aren't real 
> documents.

That's pretty much how my use of Lucene works - there aren't real 
filesystem documents to index per se.

> :-) Meaning: there is no text to parse and tokenize. What I have is a
> number of features, some are simple words, some are combinations of
> words. Those features classify an entity in my database.
>
> I have also an own parser/analyzer/tokenizer which is able to take a
> text and extract those features from it. (Possibly a query.)
>
> So, I wanna do sth like (pseudo code):
>
>    Lucene.index(myEntity.getId, myEntity.getDescriptors)
>
> and then when a query was issued:
>
>    List entityIds = Lucene.query(myQuery.convertToLuceneQueryLanguage)
>
> I was looking at the source and couldn't find a possibility to get rid
> of the analyzing stage to hand the features to Lucene myself.

You have two good options here.... you can add each token individually 
as a Field.Keyword() with the same field name - these will not get 
analyzed.

> One possibility would be to use an analyzer which only considers
> whitespace as delimiter and set all descriptors as one string. This
> feels suboptimal, because I have them as single tokens already and
> concatenating them first, to let lucene tokenize them again,  should 
> not
> be necessary.

You're right, it's not necessary.  The second option is to create a 
custom Analyzer that returns the tokens you've already established.

> Also, the neighbour information isn't applicable in my scenario. It
> seems you use placement of terms somehow. I don't have placement
> information. Would that hurt Lucene?

Placement of terms is used in phrase queries, but certainly isn't a 
necessity that you concern yourself with it.  You can simply emit 
tokens in whatever position you like (leaving the default position 
increment to 1 is what I'd recommend).

> I am not sure how Lucenes uses the placement information, but in the
> described case where I concatenate all my features to a
> whitespace-delimited text, I fear that Lucene uses the placement of
> features in this made-up text and comes to some wrong conclusions 
> (after
> all, the placement is arbitrary in the "made-up" text).

What wrong conclusions do you fear here?  Again, the position 
information is used for phrase queries, but in your situation you 
wouldn't be using phrase queries so no need to concern yourself with 
the position stuff at all.

> Also 2, I am not sure yet, how the converter would have to look like.
> After all the terms in the query have to be of the same form as those 
> in
> the index, otherwise they wouldn't match. Can I inject my own analyzer
> only for the query part, so that lucene hands it phrases and lets it
> build features from those phrases?

Sure - you can use any analyzer you like for query parsing.  It sounds 
like you aren't going to use QueryParser, though, so you may not need 
an analyzer at all.  You definitely have to ensure that the terms in 
the query match the terms you indexed in order to find documents.  How 
you do this is really up to you.

> Any info is appreciated. I could maybe build my own simple index, the
> analyzer is already there, but I would prefer to use a professional
> solution with a good query language and some additional
> nice-to-have-features.

If you could give us something more concrete, we could help in more 
detail.  But from the scenario you've described, Lucene fits fine and 
in fact describes the way I use it in some cases.

> May I use Lucene? :-)

Yes, you may!

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 26 13:13:00 2005
Return-Path: <java-user-return-14260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76924 invoked from network); 26 Apr 2005 13:13:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2005 13:13:00 -0000
Received: (qmail 49688 invoked by uid 500); 26 Apr 2005 13:13:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49647 invoked by uid 500); 26 Apr 2005 13:13:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49627 invoked by uid 99); 26 Apr 2005 13:13:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 06:13:19 -0700
Subject: RE: CVS Lucene 2.0
Date: Tue, 26 Apr 2005 15:12:39 +0200
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA071155@gerard.anchormen.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Thread-Topic: CVS Lucene 2.0
Thread-Index: AcVJrj4rULskEGKHQDGk4lLt1X1+AQAsl90w
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How can I send the modified sources? Do they have to be checked?

And 1.9 is going to be backwards compatible, but 2.0? Are only
deprecated methods removed or can the structure be subject of change
also?=20

Btw:
I would like to improve the MultiFieldQueryParser. The code is strange..
It looks like the MultiFieldQueryParser is extending the QueryParser,
but it isn`t (so the structure has to be improved). And the
MultiFieldQueryParser loses the ability to use 'and' searching. So foo
bar would be foo AND bar instead of foo OR bar.

Peter

-----Oorspronkelijk bericht-----
Van: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Verzonden: maandag 25 april 2005 17:48
Aan: java-user@lucene.apache.org
Onderwerp: Re: CVS Lucene 2.0


On Apr 25, 2005, at 8:08 AM, Peter Veentjer - Anchor Men wrote:
> Is the sourcecode of Lucene 2.0 accessable? I have looked on the site,

> but I couldn`t find a link.

There has been no binary release of it.  The codebase available from
Subversion checkout and easily built with Ant is available using:

	svn co http://svn.apache.org/repos/asf/lucene/java/trunk

The current trunk will be (except for any changes that occur in the next
few days or weeks) Lucene 1.9 and Lucene 2.0 will be the same as
1.9 except with the deprecated methods removed.

> And where are the archived mailinglists? They where of great value to=20
> me.

You can view them here:

	http://www.mail-archive.com/java-user%40lucene.apache.org/

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 26 13:32:12 2005
Return-Path: <java-user-return-14261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99018 invoked from network); 26 Apr 2005 13:32:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2005 13:32:12 -0000
Received: (qmail 90834 invoked by uid 500); 26 Apr 2005 13:31:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90780 invoked by uid 500); 26 Apr 2005 13:31:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 74728 invoked by uid 99); 26 Apr 2005 13:23:11 -0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of madhusasidhar@gmail.com designates 64.233.184.202 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type;
        b=bwYHaH1cPGbvBqTxKVhaBNiGtsL6xYkbT13oDbL5qv3wZski3S5pIKuM+YWCMQZUCrt0XzNUbWXxnWr5hgcFkqUlK0Lf6aMtUoDruw9/0mm8C9jS31b7mgLJgoBKPoUUaLC+usNpJHUOoInQnl5pBLCfvd9K+lJYnwn81TdJoDQ=
Message-ID: <b2cdeaa7050426062254e01385@mail.gmail.com>
Date: Tue, 26 Apr 2005 07:22:23 -0600
From: "Madhu Sasidhar, MD" <madhusasidhar@gmail.com>
Reply-To: "Madhu Sasidhar, MD" <madhusasidhar@gmail.com>
To: general@lucene.apache.org, java-user@lucene.apache.org
Subject: multi word synonym
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_741_22126027.1114521743429"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_741_22126027.1114521743429
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I have found the previous discussions on multi word synonyms as as well as=
=20
the section on synonym injection in Hatcher's book, but have not been able=
=20
to come up with a satisfactory solution. I am indexing text that has severa=
l=20
multi word synonyms. Some of the synonyms may have single words as one of=
=20
the synonym. These words should only match for the appropriate multi word=
=20
phrase searches - in other words, "chest pain", should only match a query=
=20
for "chest pain" and not for "chest" or "pain". In addition, it will match=
=20
angina (synonym). So, in this sentence:
Lab results for alpha 1 antitrypsin level....
I would like to index 'alpha-1-antitrypsin', 'antitrypsin', 'antitrypsin,=
=20
alpha 1', 'A1AT' as synonyms for the phrase alpha-1-antitrypsin in the=20
sentence. Thanks in advance...
madhu

------=_Part_741_22126027.1114521743429--

From java-user-return-14262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 26 13:45:29 2005
Return-Path: <java-user-return-14262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5957 invoked from network); 26 Apr 2005 13:45:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2005 13:45:29 -0000
Received: (qmail 29171 invoked by uid 500); 26 Apr 2005 13:45:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29142 invoked by uid 500); 26 Apr 2005 13:45:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29128 invoked by uid 500); 26 Apr 2005 13:45:59 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 29125 invoked by uid 99); 26 Apr 2005 13:45:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 06:45:59 -0700
Subject: FW: CVS Lucene 2.0
Date: Tue, 26 Apr 2005 15:45:19 +0200
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA071157@gerard.anchormen.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Thread-Topic: CVS Lucene 2.0
Thread-Index: AcVKZPCHOdNrrVIBTC+95IbvYfLo3gAACv5wAABDRIA=
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

=20

-----Oorspronkelijk bericht-----
Van: Peter Veentjer - Anchor Men=20
Verzonden: dinsdag 26 april 2005 15:44
Aan: 'Daniel Naber'
Onderwerp: RE: CVS Lucene 2.0

=20

-----Oorspronkelijk bericht-----
Van: Daniel Naber [mailto:daniel.naber@intrafind.de]
Verzonden: dinsdag 26 april 2005 15:36
Aan: Peter Veentjer - Anchor Men
Onderwerp: Re: CVS Lucene 2.0

On Tuesday 26 April 2005 15:12, Peter Veentjer - Anchor Men wrote:

> Btw:
> I would like to improve the MultiFieldQueryParser. The code is
strange..

This should be mostly fixed in the development version. Let me know
(i.e. post to the list) if something is still wrong. Note that there
might be some "strange" or "broken" methods around, but these should be
deprecated.

Ok.. I`ll post it (maybe this evening if I have time)..

I`m looking through the code at this moment and have a few remarks:

1) there are a lot of final methods that don`t need to be finalized (the
class is finallized, so the all the methods are finallized).

2) I have looked at the equals method of Term, and it could be improved
also:


Original Term.equals:

	public boolean equals(Object o) {
		if (o =3D=3D null)
			return false;
=09
		Term other =3D (Term) o;
		return field =3D=3D other.field && text.equals(other.text);
	}
=09
New:

	public boolean equals(Object o) {
		if (o =3D=3D this)
			return true;

		if(!(o instanceof Term))
			return false;=09
		=09
		Term other =3D (Term) o;
		return field.equals(other.field) &&
text.equals(other.text);
	}

First if an object is checked with itself... No internal checking is
needed.
Two: if an object is tested with a class of a different type (or null)
the result is false.=20
Third: if the field values of refer to the same text but to different
object, the result should be the same.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 26 14:05:04 2005
Return-Path: <java-user-return-14263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13685 invoked from network); 26 Apr 2005 14:05:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2005 14:05:04 -0000
Received: (qmail 81691 invoked by uid 500); 26 Apr 2005 14:05:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81655 invoked by uid 500); 26 Apr 2005 14:05:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81407 invoked by uid 99); 26 Apr 2005 14:05:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.201 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.201)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 07:05:10 -0700
Received: by rproxy.gmail.com with SMTP id b11so1190161rne
        for <java-user@lucene.apache.org>; Tue, 26 Apr 2005 07:04:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=WOXZYC7UbBzlmm2SNbDB7nkJYasnZzFNRzhqUd+W7xR+jthnBeF/owAFX/SRIAbBp1TLolwJzgYjFtQMb8GZz7T2DWAezVS2ztet9g1BIqq1aaWqUHaWCaYBYHajUYH8qTByxXP6AsmdZdGG+S3RG08BMnwULjnTOY9MR5W36UQ=
Received: by 10.38.74.21 with SMTP id w21mr7671440rna;
        Tue, 26 Apr 2005 07:04:25 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Tue, 26 Apr 2005 07:04:25 -0700 (PDT)
Message-ID: <c68e3917050426070459d364af@mail.gmail.com>
Date: Tue, 26 Apr 2005 10:04:25 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FW: CVS Lucene 2.0
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <24CFCE44DCB015489FB96D38BDF4FCAA071157@gerard.anchormen.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <24CFCE44DCB015489FB96D38BDF4FCAA071157@gerard.anchormen.nl>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Term.field is interned, so equals() isn't needed.
-Yonik

On 4/26/05, Peter Veentjer - Anchor Men <p.veentjer@anchormen.nl> wrote:
[...]
>                 Term other =3D (Term) o;
>                 return field.equals(other.field) &&
> text.equals(other.text);
>         }
> Third: if the field values of refer to the same text but to different
> object, the result should be the same.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 26 14:05:17 2005
Return-Path: <java-user-return-14264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13768 invoked from network); 26 Apr 2005 14:05:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2005 14:05:17 -0000
Received: (qmail 81727 invoked by uid 500); 26 Apr 2005 14:05:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81671 invoked by uid 500); 26 Apr 2005 14:05:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81541 invoked by uid 500); 26 Apr 2005 14:05:13 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 81370 invoked by uid 99); 26 Apr 2005 14:05:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.193 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 07:05:09 -0700
Received: by rproxy.gmail.com with SMTP id a41so1120284rng
        for <lucene-user@jakarta.apache.org>; Tue, 26 Apr 2005 07:04:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=WOXZYC7UbBzlmm2SNbDB7nkJYasnZzFNRzhqUd+W7xR+jthnBeF/owAFX/SRIAbBp1TLolwJzgYjFtQMb8GZz7T2DWAezVS2ztet9g1BIqq1aaWqUHaWCaYBYHajUYH8qTByxXP6AsmdZdGG+S3RG08BMnwULjnTOY9MR5W36UQ=
Received: by 10.38.74.21 with SMTP id w21mr7671440rna;
        Tue, 26 Apr 2005 07:04:25 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Tue, 26 Apr 2005 07:04:25 -0700 (PDT)
Message-ID: <c68e3917050426070459d364af@mail.gmail.com>
Date: Tue, 26 Apr 2005 10:04:25 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FW: CVS Lucene 2.0
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <24CFCE44DCB015489FB96D38BDF4FCAA071157@gerard.anchormen.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <24CFCE44DCB015489FB96D38BDF4FCAA071157@gerard.anchormen.nl>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Term.field is interned, so equals() isn't needed.
-Yonik

On 4/26/05, Peter Veentjer - Anchor Men <p.veentjer@anchormen.nl> wrote:
[...]
>                 Term other =3D (Term) o;
>                 return field.equals(other.field) &&
> text.equals(other.text);
>         }
> Third: if the field values of refer to the same text but to different
> object, the result should be the same.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 26 14:09:21 2005
Return-Path: <java-user-return-14265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16233 invoked from network); 26 Apr 2005 14:09:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2005 14:09:21 -0000
Received: (qmail 97227 invoked by uid 500); 26 Apr 2005 14:08:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97178 invoked by uid 500); 26 Apr 2005 14:08:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97152 invoked by uid 99); 26 Apr 2005 14:08:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 07:08:43 -0700
Subject: RE: FW: CVS Lucene 2.0
Date: Tue, 26 Apr 2005 16:07:32 +0200
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA071158@gerard.anchormen.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Thread-Topic: FW: CVS Lucene 2.0
Thread-Index: AcVKaPI/x43491DjSZqgPCGrNBvWdQAABy7A
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>,
	"Yonik Seeley" <yseeley@gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How do you mean? If I create two terms, with the public constructor:

Term t1 =3D new Term(new String("foo"),"bar");
Term t2 =3D new Term(new String("foo"),"bar");

The result of t1.equals(t2) will be false.. =20




-----Oorspronkelijk bericht-----
Van: Yonik Seeley [mailto:yseeley@gmail.com]=20
Verzonden: dinsdag 26 april 2005 16:04
Aan: java-user@lucene.apache.org
CC: Lucene Users List
Onderwerp: Re: FW: CVS Lucene 2.0

Term.field is interned, so equals() isn't needed.
-Yonik

On 4/26/05, Peter Veentjer - Anchor Men <p.veentjer@anchormen.nl> wrote:
[...]
>                 Term other =3D (Term) o;
>                 return field.equals(other.field) &&=20
> text.equals(other.text);
>         }
> Third: if the field values of refer to the same text but to different=20
> object, the result should be the same.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 26 14:13:54 2005
Return-Path: <java-user-return-14266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17621 invoked from network); 26 Apr 2005 14:13:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2005 14:13:54 -0000
Received: (qmail 4890 invoked by uid 500); 26 Apr 2005 14:11:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4779 invoked by uid 500); 26 Apr 2005 14:11:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4646 invoked by uid 99); 26 Apr 2005 14:11:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.anchormen.nl (HELO mail.anchormen.nl) (212.83.242.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 07:11:10 -0700
Subject: RE: FW: CVS Lucene 2.0
Date: Tue, 26 Apr 2005 16:10:30 +0200
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA071159@gerard.anchormen.nl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Thread-Topic: FW: CVS Lucene 2.0
Thread-Index: AcVKaPI/x43491DjSZqgPCGrNBvWdQAAIEIw
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have checked the documentation if interned.. I didn`t knew it existed
:) =20

So my previous post has no value anymore..

-----Oorspronkelijk bericht-----
Van: Yonik Seeley [mailto:yseeley@gmail.com]=20
Verzonden: dinsdag 26 april 2005 16:04
Aan: java-user@lucene.apache.org
CC: Lucene Users List
Onderwerp: Re: FW: CVS Lucene 2.0

Term.field is interned, so equals() isn't needed.
-Yonik

On 4/26/05, Peter Veentjer - Anchor Men <p.veentjer@anchormen.nl> wrote:
[...]
>                 Term other =3D (Term) o;
>                 return field.equals(other.field) &&=20
> text.equals(other.text);
>         }
> Third: if the field values of refer to the same text but to different=20
> object, the result should be the same.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 26 14:58:09 2005
Return-Path: <java-user-return-14267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38532 invoked from network); 26 Apr 2005 14:58:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2005 14:58:09 -0000
Received: (qmail 46291 invoked by uid 500); 26 Apr 2005 14:55:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46191 invoked by uid 500); 26 Apr 2005 14:55:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46148 invoked by uid 99); 26 Apr 2005 14:55:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 07:55:37 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 165BB13E2124; Tue, 26 Apr 2005 10:54:44 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP
	id AA71613E2125; Tue, 26 Apr 2005 10:53:51 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <5fba25a47134fbefe78a2f76427d6f74@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Jakarta List <general@jakarta.apache.org>,
	java-user@lucene.apache.org
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: general versus java-user@lucene e-mail lists
Date: Tue, 26 Apr 2005 10:53:42 -0400
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Because we now have the e-mail lists general@lucene and 
java-user@lucene, I want to clarify their purpose.  java-user@lucene is 
where we discuss the Java implementation of Lucene.  The general@lucene 
list is for discussions that are about the Lucene top-level Apache 
project that do not pertain to a specific implementation or sub-project 
- such as organization of the sub-projects, cross-implementation 
testing, etc.

Several have posted to general@lucene recently but those mails are 
really best sent to java-user@lucene.  I am subscribed to both and 
filter them both into my "Lucene" folder, and may or may not notice 
which of the lists I'm replying to.  Please use the appropriate list 
for your messages.

If there is anything we can do to avoid confusion with the e-mail 
lists, let us know.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 26 19:58:17 2005
Return-Path: <java-user-return-14268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20256 invoked from network); 26 Apr 2005 19:58:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2005 19:58:17 -0000
Received: (qmail 19520 invoked by uid 500); 26 Apr 2005 19:58:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19494 invoked by uid 500); 26 Apr 2005 19:58:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19478 invoked by uid 99); 26 Apr 2005 19:58:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 12:58:55 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6B23713E2006; Tue, 26 Apr 2005 15:58:03 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 4444013E2005
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2005 15:57:35 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <24CFCE44DCB015489FB96D38BDF4FCAA071155@gerard.anchormen.nl>
References: <24CFCE44DCB015489FB96D38BDF4FCAA071155@gerard.anchormen.nl>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <dd911a0f1086789f944895a8c256b577@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: CVS Lucene 2.0
Date: Tue, 26 Apr 2005 15:57:30 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 26, 2005, at 9:12 AM, Peter Veentjer - Anchor Men wrote:
> How can I send the modified sources? Do they have to be checked?

Submit patches in unified diff format to Lucene's issue tracking system 
- see the links on the Lucene site.

> And 1.9 is going to be backwards compatible, but 2.0?

The goal is to have 1.9 backwards compatible with 1.4.3 API, but many 
things will be deprecated.  2.0 will remove all those deprecated 
methods.  If you can your app with 1.9 without deprecation warnings, 
then you can upgrade cleanly to 2.0.  Functionally 1.9 and 2.0 will be 
the same though.

>  Are only
> deprecated methods removed or can the structure be subject of change
> also?

I don't think at this point anything structural has been proposed as 
different between 1.9 and 2.0.

> Btw:
> I would like to improve the MultiFieldQueryParser. The code is 
> strange..
> It looks like the MultiFieldQueryParser is extending the QueryParser,
> but it isn`t (so the structure has to be improved). And the
> MultiFieldQueryParser loses the ability to use 'and' searching. So foo
> bar would be foo AND bar instead of foo OR bar.

Improvements always welcome!

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 26 20:47:03 2005
Return-Path: <java-user-return-14269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37689 invoked from network); 26 Apr 2005 20:47:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2005 20:47:03 -0000
Received: (qmail 31010 invoked by uid 500); 26 Apr 2005 20:47:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30979 invoked by uid 500); 26 Apr 2005 20:47:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30965 invoked by uid 99); 26 Apr 2005 20:47:41 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 13:47:41 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 043CFE47F4
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2005 22:46:51 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id B6D2EE47DC
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2005 22:46:50 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <816ce3ffeb6daf26ceddfadb287fba6c@ehatchersolutions.com>
References: <426DEBE1.1060309@gmx.net> <816ce3ffeb6daf26ceddfadb287fba6c@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <b56d1a3c0c6f16137991dad464c94a74@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: Indexing of virtual "made up" documents
Date: Tue, 26 Apr 2005 22:46:49 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Le 26 avr. 05, =E0 15:00, Erik Hatcher a =E9crit :
>> I am not sure how Lucenes uses the placement information, but in the
>> described case where I concatenate all my features to a
>> whitespace-delimited text, I fear that Lucene uses the placement of
>> features in this made-up text and comes to some wrong conclusions=20
>> (after
>> all, the placement is arbitrary in the "made-up" text).
> What wrong conclusions do you fear here?  Again, the position=20
> information is used for phrase queries, but in your situation you=20
> wouldn't be using phrase queries so no need to concern yourself with=20=

> the position stuff at all.

There are some information retrieval settings which tend to say that=20
things that appear early in the document should be considered with=20
greater score... is there nothing such in Lucene's scoring ?

paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 26 20:51:10 2005
Return-Path: <java-user-return-14270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42136 invoked from network); 26 Apr 2005 20:51:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2005 20:51:10 -0000
Received: (qmail 39464 invoked by uid 500); 26 Apr 2005 20:51:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39413 invoked by uid 500); 26 Apr 2005 20:51:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39385 invoked by uid 99); 26 Apr 2005 20:51:39 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 13:51:39 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 41B28E47F4
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2005 22:50:50 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 249FFE47DC
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2005 22:50:49 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <b2cdeaa7050426062254e01385@mail.gmail.com>
References: <b2cdeaa7050426062254e01385@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <37f46cda564bdd6ad3b7faec2cd908a8@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: multi word synonym
Date: Tue, 26 Apr 2005 22:50:48 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If I understand well... it would be easy to do so if you do not wish to=20=

use phrase matches... you could just add a field (with the same name)=20
for each token...

I think that, if you wish phrase-matches (or the span-ones) then Lucene=20=

can't help you... but I'm quite a newbie on this topic.

Is there a hope this becomes different in Lucene 1.9 or 2.0 ??

My dream would be to have the position increments living in a tree...=20
you know.... and... XML tree...

thanks

paul

Le 26 avr. 05, =E0 15:22, Madhu Sasidhar, MD a =E9crit :
> I have found the previous discussions on multi word synonyms as as=20
> well as
> the section on synonym injection in Hatcher's book, but have not been=20=

> able
> to come up with a satisfactory solution. I am indexing text that has=20=

> several
> multi word synonyms. Some of the synonyms may have single words as one=20=

> of
> the synonym. These words should only match for the appropriate multi=20=

> word
> phrase searches - in other words, "chest pain", should only match a=20
> query
> for "chest pain" and not for "chest" or "pain". In addition, it will=20=

> match
> angina (synonym). So, in this sentence:
> Lab results for alpha 1 antitrypsin level....
> I would like to index 'alpha-1-antitrypsin', 'antitrypsin',=20
> 'antitrypsin,
> alpha 1', 'A1AT' as synonyms for the phrase alpha-1-antitrypsin in the
> sentence. Thanks in advance...
> madhu


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 26 21:52:19 2005
Return-Path: <java-user-return-14271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60898 invoked from network); 26 Apr 2005 21:52:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2005 21:52:19 -0000
Received: (qmail 53061 invoked by uid 500); 26 Apr 2005 21:52:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53033 invoked by uid 500); 26 Apr 2005 21:52:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53019 invoked by uid 99); 26 Apr 2005 21:52:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.206 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 14:52:57 -0700
Received: by rproxy.gmail.com with SMTP id b11so48102rne
        for <java-user@lucene.apache.org>; Tue, 26 Apr 2005 14:52:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=WhXstV5LYVnewHc7fzwI5Z3XpnzKcHzNTqknJes8nlD/UMdYGg2v/zMa8a2qqr4Hv1sA+UzriD2LzitYgtdWgY3IkybtZtAvYEdeG52UaejZAXfmvQrDklSiHrq1oiz0E9FLJJoz5LEvi4W+sL0/Uy5olmpm0DsAy8gjgtCLeQQ=
Received: by 10.38.74.73 with SMTP id w73mr266643rna;
        Tue, 26 Apr 2005 14:52:09 -0700 (PDT)
Received: by 10.38.12.53 with HTTP; Tue, 26 Apr 2005 14:52:09 -0700 (PDT)
Message-ID: <c68e3917050426145246218470@mail.gmail.com>
Date: Tue, 26 Apr 2005 17:52:09 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CVS Lucene 2.0
In-Reply-To: <dd911a0f1086789f944895a8c256b577@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <24CFCE44DCB015489FB96D38BDF4FCAA071155@gerard.anchormen.nl>
	 <dd911a0f1086789f944895a8c256b577@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> I don't think at this point anything structural has been proposed as
> different between 1.9 and 2.0.

Are any of Paul Elschot's query and scorer changes being considered for 2.0=
?

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 26 22:07:47 2005
Return-Path: <java-user-return-14272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64813 invoked from network); 26 Apr 2005 22:07:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2005 22:07:47 -0000
Received: (qmail 79990 invoked by uid 500); 26 Apr 2005 22:08:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79966 invoked by uid 500); 26 Apr 2005 22:08:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79950 invoked by uid 99); 26 Apr 2005 22:08:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc11.comcast.net (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 15:08:27 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2005042622073701300dj5abe>; Tue, 26 Apr 2005 22:07:37 +0000
Message-ID: <426EBBA9.1060805@apache.org>
Date: Tue, 26 Apr 2005 15:07:37 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: CVS Lucene 2.0
References: <24CFCE44DCB015489FB96D38BDF4FCAA071155@gerard.anchormen.nl>	 <dd911a0f1086789f944895a8c256b577@ehatchersolutions.com> <c68e3917050426145246218470@mail.gmail.com>
In-Reply-To: <c68e3917050426145246218470@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yonik Seeley wrote:
>>I don't think at this point anything structural has been proposed as
>>different between 1.9 and 2.0.
> 
> Are any of Paul Elschot's query and scorer changes being considered for 2.0?

1.9 and 2.0 will be what's in the SVN trunk.  Many of Paul's changes 
have already been committed.  Are there particular changes that Paul has 
contributed that have not yet been committed that you feel ought to be 
before a release is made?

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 27 01:50:52 2005
Return-Path: <java-user-return-14273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29536 invoked from network); 27 Apr 2005 01:50:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2005 01:50:52 -0000
Received: (qmail 19750 invoked by uid 500); 27 Apr 2005 01:51:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19709 invoked by uid 500); 27 Apr 2005 01:51:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19692 invoked by uid 99); 27 Apr 2005 01:51:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 18:51:28 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 71BB413E211F; Tue, 26 Apr 2005 21:50:33 -0400 (EDT)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id F20AE13E2006
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2005 21:50:10 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <b56d1a3c0c6f16137991dad464c94a74@activemath.org>
References: <426DEBE1.1060309@gmx.net> <816ce3ffeb6daf26ceddfadb287fba6c@ehatchersolutions.com> <b56d1a3c0c6f16137991dad464c94a74@activemath.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <22e0cae1a45d04d5b0a9bb18e9e58618@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Indexing of virtual "made up" documents
Date: Tue, 26 Apr 2005 21:50:08 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Apr 26, 2005, at 4:46 PM, Paul Libbrecht wrote:
>
> Le 26 avr. 05, =E0 15:00, Erik Hatcher a =E9crit :
>>> I am not sure how Lucenes uses the placement information, but in the
>>> described case where I concatenate all my features to a
>>> whitespace-delimited text, I fear that Lucene uses the placement of
>>> features in this made-up text and comes to some wrong conclusions=20
>>> (after
>>> all, the placement is arbitrary in the "made-up" text).
>> What wrong conclusions do you fear here?  Again, the position=20
>> information is used for phrase queries, but in your situation you=20
>> wouldn't be using phrase queries so no need to concern yourself with=20=

>> the position stuff at all.
>
> There are some information retrieval settings which tend to say that=20=

> things that appear early in the document should be considered with=20
> greater score... is there nothing such in Lucene's scoring ?

No, Lucene doesn't have that feature, at least not explicitly....  it=20
could be hacked, sort of, by injecting multiple of the same term in the=20=

same position (to get a higher term frequency) for the earlier terms. =20=

Back to the original question - the position information will not=20
adversely affect scoring.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 27 06:07:17 2005
Return-Path: <java-user-return-14274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85250 invoked from network); 27 Apr 2005 06:07:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2005 06:07:17 -0000
Received: (qmail 37220 invoked by uid 500); 27 Apr 2005 06:07:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37106 invoked by uid 500); 27 Apr 2005 06:07:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37089 invoked by uid 99); 27 Apr 2005 06:07:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.tanto.de (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 26 Apr 2005 23:07:30 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 7BA6D23CE7
	for <java-user@lucene.apache.org>; Wed, 27 Apr 2005 08:06:36 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 27125-06 for <java-user@lucene.apache.org>;
 Wed, 27 Apr 2005 08:06:36 +0200 (CEST)
Received: from tucholsky.office.tanto.de (tucholsky.office.tanto.de [10.0.0.35])
	by mail.tanto.de (Postfix) with ESMTP id 4061C23CEB
	for <java-user@lucene.apache.org>; Wed, 27 Apr 2005 08:06:36 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@localhost [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j3R69tH2012575
	for <java-user@lucene.apache.org>; Wed, 27 Apr 2005 08:09:55 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) id j3R69t3j012571;
	Wed, 27 Apr 2005 08:09:55 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17007.11442.952559.523897@tanto-xipolis.de>
Date: Wed, 27 Apr 2005 08:09:54 +0200
To: java-user@lucene.apache.org
Subject: Re: Indexing of virtual "made up" documents
In-Reply-To: <22e0cae1a45d04d5b0a9bb18e9e58618@ehatchersolutions.com>
References: <426DEBE1.1060309@gmx.net>
	<816ce3ffeb6daf26ceddfadb287fba6c@ehatchersolutions.com>
	<b56d1a3c0c6f16137991dad464c94a74@activemath.org>
	<22e0cae1a45d04d5b0a9bb18e9e58618@ehatchersolutions.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher writes:
> >
> > There are some information retrieval settings which tend to say that 
> > things that appear early in the document should be considered with 
> > greater score... is there nothing such in Lucene's scoring ?
> 
> No, Lucene doesn't have that feature, at least not explicitly....  it 
> could be hacked, sort of, by injecting multiple of the same term in the 
> same position (to get a higher term frequency) for the earlier terms.  
> Back to the original question - the position information will not 
> adversely affect scoring.
> 
Wouldn't it be easier to fake that by using a proximity query and a document
start marker?
E.g. index `xxxstartxxx some text other text'
and search for "xxxstartxxx some"~10000000 or "xxxstartxxx other"~10000000
If I understand proximity query correctly the latter should have a lower
score (given that 'some' and 'other' have equal scores). Untested though.

Alternatively it should be able to write a query that does such a scoring
directly (without the document start anchor) by the same means proximity
query uses. Proximity query uses positional information so it should be 
possible to use that information for scoring based on document position also.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 27 11:51:34 2005
Return-Path: <java-user-return-14275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30411 invoked from network); 27 Apr 2005 11:51:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2005 11:51:34 -0000
Received: (qmail 55651 invoked by uid 500); 27 Apr 2005 11:52:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55628 invoked by uid 500); 27 Apr 2005 11:52:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55614 invoked by uid 99); 27 Apr 2005 11:52:13 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from host.12.157.23.62.rev.coltfrance.com (HELO xmailserver.test) (62.23.157.12)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 27 Apr 2005 04:52:12 -0700
Received: from localhost (127.0.0.1:1740)
	by xmailserver.test with [XMail 1.20 ESMTP Server]
	id <S11B9> for <java-user@lucene.apache.org> from <sven.duzont@keljob.com>;
	Wed, 27 Apr 2005 13:51:26 +0200
Date: Wed, 27 Apr 2005 13:51:25 +0200
From: Sven Duzont <sven.duzont@keljob.com>
X-Mailer: The Bat! (v3.0) UNREG / CD5BF9353B3B7091
Reply-To: Sven duzont <sven.duzont@keljob.com>
Organization: Keljob
X-Priority: 3 (Normal)
Message-ID: <912251814.20050427135125@keljob.com>
To: Chris Hostetter <java-user@lucene.apache.org>
Subject: Re[2]: multi word synonym (was Hungarian notation analyzer and phrase queries)
In-Reply-To: <Pine.LNX.4.58.0504131033090.7130@hal.rescomp.berkeley.edu>
References: <s25c0886.041@provo> <425D5781.2060301@apache.org>
 <Pine.LNX.4.58.0504131033090.7130@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

What about the solution to index every multi-word synonym as a single
token ?
Example :
Phrase to index : "i love jsp and tomcat"
Synonyms        : "jsp" = "java server pages" = "javaserver pages"
Tokens          : i love jsp               and tomcat
                         java server pages
                         javaserver pages
Position        : 0 1    2                 3   4

This solution will have the advantage to solve the phrase query problems.

One will have also to rewrite queries before parsing it with the
QueryParser. for instance the query (tomcat jsp) will be rewrited as
(tomcat (jsp OR "java server pages" OR "javaserver pages"))

Any thoughts ?
Thanks in advance

---
 Sven





mercredi 13 avril 2005, 19:36:44, vous avez écrit:


CH> : Another approach would be to index this as:
CH> :
CH> : token:       use   power      query for advanced searches
CH> :                     powerquery
CH> : position:    0     1          2     3   4        5
CH> :
CH> : Then use phrase queries with slop=1, to permit a one-token gap when
CH> : someone searches for "use powerquery for advanced searches".

CH> right, but in your example "1" is a magic number that works because we are
CH> only dealing with "multi-word synonyms" of 2 words.  in general, this
CH> approach requires that you pick some some N such that you are garunteed no
CH> synonym contains more then N-1 words, and set the token positions to...

CH>  token:       use   powerquery         for  advanced  searches
CH>                     power      query
CH>  position:    0     N          N+1     2N   3N        4N





CH> -Hoss


CH> ---------------------------------------------------------------------
CH> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
CH> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 27 15:03:15 2005
Return-Path: <java-user-return-14276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22450 invoked from network); 27 Apr 2005 15:03:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2005 15:03:15 -0000
Received: (qmail 24750 invoked by uid 500); 27 Apr 2005 15:03:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24727 invoked by uid 500); 27 Apr 2005 15:03:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24709 invoked by uid 99); 27 Apr 2005 15:03:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from natsmtp00.rzone.de (HELO natsmtp00.rzone.de) (81.169.145.165)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 27 Apr 2005 08:03:55 -0700
Received: from Karl (dsl-62-220-9-10.berlikomm.net [62.220.9.10])
	by post.webmailer.de (8.13.1/8.13.1) with ESMTP id j3RF2tmA007364
	for <java-user@lucene.apache.org>; Wed, 27 Apr 2005 17:02:56 +0200 (MEST)
From: "Sven" <sven@schmeier.de>
To: <java-user@lucene.apache.org>
Subject: Question about Boosting Fields in a Query
Date: Wed, 27 Apr 2005 17:02:31 +0200
Message-ID: <002801c54b3a$239f8390$6401a8c0@Karl>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0029_01C54B4A.E7285390"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0029_01C54B4A.E7285390
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

 
 
Hi folks,
 
I have a question about boosting fields in a Query.
Suppose we have documents like this in the index:
 
fieldA:String fieldB:String fieldC:Date fieldD:Number
 
And the query is like that:
 
fieldA: wordA1 wordA2 wordA3 wordA4  
fieldB: wordB1 wordB2 wordB3 wordB4
fieldC:[date1 to date2]
fieldD:[number1 to number2]
 
 
Now what I want to do is to boost certain fields, for example the fieldA
of the query should be boosted by a factor of 2.
What is the most elegant way to do that?
 
btw. boosting document fields doesnt help as different users should be
able to boost different fields....
 
 
Thanks,
Sven

------=_NextPart_000_0029_01C54B4A.E7285390--


From java-user-return-14277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 27 15:30:01 2005
Return-Path: <java-user-return-14277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38113 invoked from network); 27 Apr 2005 15:30:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2005 15:30:01 -0000
Received: (qmail 91330 invoked by uid 500); 27 Apr 2005 15:30:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91272 invoked by uid 500); 27 Apr 2005 15:30:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91240 invoked by uid 99); 27 Apr 2005 15:30:33 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31108.mail.mud.yahoo.com (HELO web31108.mail.mud.yahoo.com) (68.142.200.41)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 27 Apr 2005 08:30:33 -0700
Received: (qmail 83536 invoked by uid 60001); 27 Apr 2005 15:29:33 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=h1tl9/hRYnzL8xzO4ZoNw11WKjD+8i5bHgKG/KnLFgN6mdNk8tYUUuPBLBccCU18o59Bir4FklnhvkZ542H6LmgYpHW6Wacq4QwUgo1zP1aKkm/MSwVMH1pggg5fqffqVy4gQsVlEnxUhS3b3w47JAI9NYXghND6Otxmt2kA8uk=  ;
Message-ID: <20050427152933.83534.qmail@web31108.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31108.mail.mud.yahoo.com via HTTP; Wed, 27 Apr 2005 08:29:33 PDT
Date: Wed, 27 Apr 2005 08:29:33 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Question about Boosting Fields in a Query
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Sven,

http://www.lucenebook.com/search?query=search+boost+field
(hm, I was hoping to find something better)

You can use setBoost at search time: Query class has setBoost(float)
method, which you can use if you construct queries in the code, and
QueryParser supports ^float syntax, which puts the power in the hands
of people entering queries.

Otis


--- Sven <sven@schmeier.de> wrote:
>  
>  
> Hi folks,
>  
> I have a question about boosting fields in a Query.
> Suppose we have documents like this in the index:
>  
> fieldA:String fieldB:String fieldC:Date fieldD:Number
>  
> And the query is like that:
>  
> fieldA: wordA1 wordA2 wordA3 wordA4  
> fieldB: wordB1 wordB2 wordB3 wordB4
> fieldC:[date1 to date2]
> fieldD:[number1 to number2]
>  
>  
> Now what I want to do is to boost certain fields, for example the
> fieldA
> of the query should be boosted by a factor of 2.
> What is the most elegant way to do that?
>  
> btw. boosting document fields doesnt help as different users should
> be
> able to boost different fields....
>  
>  
> Thanks,
> Sven
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 27 15:36:30 2005
Return-Path: <java-user-return-14278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41766 invoked from network); 27 Apr 2005 15:36:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2005 15:36:30 -0000
Received: (qmail 12344 invoked by uid 500); 27 Apr 2005 15:37:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12317 invoked by uid 500); 27 Apr 2005 15:37:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12303 invoked by uid 99); 27 Apr 2005 15:37:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 27 Apr 2005 08:37:14 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B043713E211F; Wed, 27 Apr 2005 11:36:09 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id EADA513E211E
	for <java-user@lucene.apache.org>; Wed, 27 Apr 2005 11:36:04 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <002801c54b3a$239f8390$6401a8c0@Karl>
References: <002801c54b3a$239f8390$6401a8c0@Karl>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <312f99a057d03b088041516d975d3894@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Question about Boosting Fields in a Query
Date: Wed, 27 Apr 2005 11:36:00 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 27, 2005, at 11:02 AM, Sven wrote:
> Hi folks,
>
> I have a question about boosting fields in a Query.
> Suppose we have documents like this in the index:
>
> fieldA:String fieldB:String fieldC:Date fieldD:Number
>
> And the query is like that:
>
> fieldA: wordA1 wordA2 wordA3 wordA4
> fieldB: wordB1 wordB2 wordB3 wordB4
> fieldC:[date1 to date2]
> fieldD:[number1 to number2]
>
>
> Now what I want to do is to boost certain fields, for example the 
> fieldA
> of the query should be boosted by a factor of 2.
> What is the most elegant way to do that?

This depends on how you're constructing the query.  If you're doing it 
through the API, then call query.setBoost(2.0f) on the fieldA clause.  
If this an expression you're parsing, use "expression"^2.0 syntax.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 27 16:00:39 2005
Return-Path: <java-user-return-14279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56567 invoked from network); 27 Apr 2005 16:00:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2005 16:00:39 -0000
Received: (qmail 93861 invoked by uid 500); 27 Apr 2005 16:01:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93579 invoked by uid 500); 27 Apr 2005 16:01:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93513 invoked by uid 99); 27 Apr 2005 16:01:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.crcpress.com (HELO flexbe01.crcpress.com) (65.244.170.27)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 27 Apr 2005 09:01:13 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C54B42.340A4E72"
Subject: RE: FilteredQuery and Boolean AND
Date: Wed, 27 Apr 2005 12:00:16 -0400
Message-ID: <78A2AFE317F5AD48B823BE740D4A8152240727@flexbe01.crcpress.com>
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
Thread-Topic: FilteredQuery and Boolean AND
Thread-Index: AcU3HlWhxSiVa3koSgWi9CrCHwFrUQCOAN4wBHrMpVA=
From: "Kipping, Peter" <Peter.Kipping@taylorandfrancis.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C54B42.340A4E72
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Chris,

Sorry for the delay...  I added a test case like this:

(FilteredQuery1 AND FilteredQuery2) OR TermQuery

See my email below for details.  Although this doesn't really add
anything new to the problem, it just illustrates that applying a chained
filter at search time won't always work.  It would be great if this bug
has been fixed already, do you know when the next release of lucene will
be available?

Thanks,
Peter




Peter:

Comments in bug#34279 indicate that this problem may have been
inadvertantly fixed in the latest development version of the code base
--
or at least, the testcase i submitted now passes.

if you could ammend my test case with more examples of the types of
complex combinations of FilteredQuery/BooleanQuery that you've seen fail
(or add a new testcase file that works in a similar way, against a self
contained RAMDirectory based index) it would help to clarify wether the
problem is genuinely "Fixed", or if the test case i created was just a
lucky abnormality.

http://issues.apache.org/bugzilla/show_bug.cgi?id=3D34279


-Hoss

-----Original Message-----
From: Kipping, Peter [mailto:Peter.Kipping@taylorandfrancis.com]=20
Sent: Monday, April 04, 2005 3:48 PM
To: java-user@lucene.apache.org
Subject: RE: FilteredQuery and Boolean AND

Chris, thanks for your help.  I came to the same conclusions about using
the ChainedFilter.  However there are situations where applying a filter
at the end wouldn't work. Consider the same two filtered queries plus
and an OR:

(FilteredQuery1 AND FilteredQuery2) OR TermQuery

Where TermQuery can be pretty much anything.  The ChainedFilter would
restrict the TermQuery docs from appearing in the hits, even though it
shouldn't.  If the FilteredQuerys worked properly, they could be put in
a BooleanQuery and then a BooleanClause.  That's why I was doing that
way.

Peter

-----Original Message-----
From: hossman@hal.rescomp.berkeley.edu
[mailto:hossman@hal.rescomp.berkeley.edu] On Behalf Of Chris Hostetter
Sent: Friday, April 01, 2005 7:53 PM
To: java-user@lucene.apache.org
Subject: Re: FilteredQuery and Boolean AND


Peter's problem intrigued me, so I wrote my own test case using two
simple
Filters that filter out all but the first (or last) doc.  I seem to be
getting the same results he is, which is certianly.  see attached test
case.

while this definitely seems like a bug, it also seems like a fairly
inefficinent way of approaching hte problem in general, instead of:
  BooleanQuery containing:
    a) FilteredQuery wrapping:
        Query for "all" -- filtered by -- RangeFilter #1
    b) FilteredQuery wrapping:
        Query for "all" -- filtered by -- RangeFilter #2

...it seems like it would make more sense to use...

  FilterQuery wrapping:
    Query for all -- filtered by -- ChainedFilter containing:
      a) RangeFilter #1
      b) RangeFilter #2




: Date: Fri, 1 Apr 2005 13:29:04 -0500
: From: Erik Hatcher <erik@ehatchersolutions.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Re: FilteredQuery and Boolean AND
:
: Peter,
:
: Could you provide a straight-forward test case that indexes a few
: documents into a RAMDirectory and demonstrates the problem you're
: having with AND'd FilteredQuery's?
:
: Give me something concrete and simple and I'll dig into it further.
:
: 	Erik
:
: On Apr 1, 2005, at 11:13 AM, Kipping, Peter wrote:
:
: > Any ideas on this?  I have purchased your book, Lucene in Action,
which
: > is quite good.  To make things easier, consider the example on p212.
: > In
: > item 4, when you combine the queries, what happens you combine them
in
: > and AND fashion?  The book only has OR, which works.  Although it
may
: > work since the book only has one filtered query, but what if you
made
: > them both filtered queries and ANDed them?
: >
: > Thanks,
: > Peter
: >
: > -----Original Message-----
: > From: Kipping, Peter [mailto:Peter.Kipping@taylorandfrancis.com]
: > Sent: Friday, March 25, 2005 10:34 AM
: > To: java-user@lucene.apache.org
: > Subject: FilteredQuery and Boolean AND
: >
: > I have the following query structure:
: >
: > BooleanQuery q2 =3D new BooleanQuery();
: > TermQuery tq =3D new TermQuery(new Term("all_entries", "y"));
: > FilteredQuery fq =3D new FilteredQuery(tq, ft);
: > FilteredQuery fq2 =3D new FilteredQuery(tq, ft2);
: > q2.add(fq, false, false);
: > q2.add(fq2, false, false);
: >
: > The two filters are searches over numeric ranges.  I'm using filters
so
: > I don't get the TooManyBooleanClauses Exception.  And my TermQuery
tq
: > is
: > just a field that has 'y' in every document so I can filter over the
: > entire index.  The last two lines I am creating a boolean OR, and
: > everything works fine.  I get back 30 documents which is correct.
: >
: > However when I change the last two lines to create an AND:
: >
: > q2.add(fq, true, false);
: > q2.add(fq2, true, false);
: >
: > I still get back 30 documents, which is not correct.  It should be
0.
: > What's going on with FilteredQuery?
: >
: > Thanks,
: > Peter
: >
: >
: >
---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
: >
: >
: >
---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C54B42.340A4E72
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C54B42.340A4E72--

From java-user-return-14280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 27 16:15:56 2005
Return-Path: <java-user-return-14280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64228 invoked from network); 27 Apr 2005 16:15:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2005 16:15:55 -0000
Received: (qmail 33518 invoked by uid 500); 27 Apr 2005 16:16:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33450 invoked by uid 500); 27 Apr 2005 16:16:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33316 invoked by uid 99); 27 Apr 2005 16:16:14 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_MESSAGE,HTML_NONELEMENT_20_30
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mx1.scansoft.com (HELO mx1.scansoft.com) (198.71.64.81)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 27 Apr 2005 09:16:12 -0700
Received: from pb-exchcon.pb.scansoft.com ([10.1.4.73]) by mx1.scansoft.com with InterScan Messaging Security Suite; Wed, 27 Apr 2005 12:27:57 -0400
Received: by pb-exchcon.pb.scansoft.com with Internet Mail Service (5.5.2653.19)
	id <J2PVY72Z>; Wed, 27 Apr 2005 12:15:11 -0400
Message-ID: <FBA9F803D33470489B9B4676A6B09F0B013F3FC6@mt-exch1.montreal.speechworks.com>
From: "Robichaud, Jean-Philippe" <Jean-Philippe.Robichaud@scansoft.com>
To: java-user@lucene.apache.org
Subject: Implementation of a ScoreObject ?
Date: Wed, 27 Apr 2005 12:01:40 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C54B42.6615B2F0"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C54B42.6615B2F0
Content-Type: text/plain

Hi Everyone, 

 

            Lucene is incredible for a lot of reasons.  I've been using it
for the past months and it served me quite well.  I'm using the subversion
snapshots, which I update every now and then.  Almost every functionality I
need is already present and well implemented, but sadly some crucial ones
are missing. I think the most crucial for me is to have something like a
ScoreObject that would contain in a simple (bean?) way all the score
information.  Having to use the reader.explain() function is just impossible
since it basically rerun  the entire search to give a STRING representation
of the scores of ONE document.  Parsing the explanation is pretty slow for
an application that handles 1k-1.5k queries per minutes.  I would really
need that "term level" information to enhance my application.

 

Probably the simplest/ideal schema of the ScoreObject would be something
like a hashtable with Term being the keys and a TermScoreObject the value.
The TermScoreObject would be filled at search time (if asked) and would
contain all values used in the calculation of the "similarity score".  That
way we could easily know what is the contribution of a specific term to the
overall score.  

 

Is this is something that would be useful to others also?  Is this a feature
that was on the dev whiteboard?

 

Thanks,

 

Jp

 

____________________________________________________________________________
_________
SpeechWorks solutions from ScanSoft. Inspired Applications, Exceptional
Results

 

<Jean-Philippe Robichaud >  ::  Solution Speech Scientist

ScanSoft :: Professional Services

5100-75 Queen Street, Montreal, QC

P +1 514 843 4884 

 

 


------_=_NextPart_001_01C54B42.6615B2F0--

From java-user-return-14281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 27 16:20:18 2005
Return-Path: <java-user-return-14281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66153 invoked from network); 27 Apr 2005 16:20:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2005 16:20:18 -0000
Received: (qmail 46156 invoked by uid 500); 27 Apr 2005 16:21:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46006 invoked by uid 500); 27 Apr 2005 16:21:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45990 invoked by uid 99); 27 Apr 2005 16:21:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc11.comcast.net (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 27 Apr 2005 09:21:04 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2005042716200601300dcd4ee>; Wed, 27 Apr 2005 16:20:07 +0000
Message-ID: <426FBBB6.7050502@apache.org>
Date: Wed, 27 Apr 2005 09:20:06 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Indexing of virtual "made up" documents
References: <426DEBE1.1060309@gmx.net>	<816ce3ffeb6daf26ceddfadb287fba6c@ehatchersolutions.com>	<b56d1a3c0c6f16137991dad464c94a74@activemath.org>	<22e0cae1a45d04d5b0a9bb18e9e58618@ehatchersolutions.com> <17007.11442.952559.523897@tanto-xipolis.de>
In-Reply-To: <17007.11442.952559.523897@tanto-xipolis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Morus Walter wrote:
> Alternatively it should be able to write a query that does such a scoring
> directly (without the document start anchor) by the same means proximity
> query uses. Proximity query uses positional information so it should be 
> possible to use that information for scoring based on document position also.

The easiest way to do this would be to use span queries and modify 
SpanScorer.  The score for a span is currently based on the inverse of 
its length, but it could also or instead be based on the inverse of its 
start, end or middle, so that matches nearer the start of the document 
are given higher scores.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 27 16:30:33 2005
Return-Path: <java-user-return-14282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69942 invoked from network); 27 Apr 2005 16:30:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2005 16:30:33 -0000
Received: (qmail 73556 invoked by uid 500); 27 Apr 2005 16:31:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73534 invoked by uid 500); 27 Apr 2005 16:31:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73517 invoked by uid 99); 27 Apr 2005 16:31:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 27 Apr 2005 09:31:16 -0700
Received: from [192.168.1.106] ([::ffff:66.92.12.207])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Wed, 27 Apr 2005 11:30:17 -0500
  id 00074210.426FBE19.00000850
Message-ID: <426FBE1C.5050800@allthingslocal.com>
Date: Wed, 27 Apr 2005 09:30:20 -0700
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Debian Thunderbird 1.0 (X11/20050116)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Implementation of a ScoreObject ?
References: <FBA9F803D33470489B9B4676A6B09F0B013F3FC6@mt-exch1.montreal.speechworks.com>
In-Reply-To: <FBA9F803D33470489B9B4676A6B09F0B013F3FC6@mt-exch1.montreal.speechworks.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Robichaud, Jean-Philippe wrote:

>Probably the simplest/ideal schema of the ScoreObject would be something
>like a hashtable with Term being the keys and a TermScoreObject the value.
>The TermScoreObject would be filled at search time (if asked) and would
>contain all values used in the calculation of the "similarity score".  That
>way we could easily know what is the contribution of a specific term to the
>overall score.  
>  
>
Jean-Philippe,

Some of us have talked about a score object in the past and agree that 
this would be a very good thing.  In addition to providing a sounder 
foundation for explanation, such a mechanism could help to provide 
better scoring.  For example, one limitation in Lucene now is that score 
normalization is ad hoc -- all scores are divided by the highest score 
IF the highest score is greater than 1, and whether or not the highest 
unnormalized score is greater that 1 is pretty much random.  This yields 
a situation where scores across multiple searches are not comparable 
(notwithstanding many applications that do compare them, getting random 
results).  With a score object, one would like to keep additional 
information, e.g., a count of boost-weighted query terms and the 
boost-weighted percentage of such terms that were matched by each 
result.  This could provide a more intrinsic normalization scheme, e.g., 
defining the highest score as the boost-weighted percentage of matched 
query terms and dividing all scores by the same constant to achieve 
this.  (Some additional refinements are necessary to handle things like 
MultiTermQuery's, which rewrite to BooleanQuery's with coord disabled -- 
such lists of alternate query terms should count as one term).

That is one addition example of something score objects could be used 
for.  A general mechanism should provide for easy extension such that 
different scoring classes could collect, record and aggregate different 
information for various purposes.

I've wanted to work on this for a while but haven't found the time.  I 
know Doug has had a score object mechanism on his radar screen (he first 
suggested this approach to me as a solution to the normalization issue 
I'm concerned about).  I expect he has a good approach in mind.  It 
would be great if you'd tackle this -- I'd be happy to help if that 
makes sense.

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 27 17:12:22 2005
Return-Path: <java-user-return-14283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86265 invoked from network); 27 Apr 2005 17:12:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2005 17:12:22 -0000
Received: (qmail 64672 invoked by uid 500); 27 Apr 2005 17:13:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64579 invoked by uid 500); 27 Apr 2005 17:13:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64560 invoked by uid 99); 27 Apr 2005 17:13:02 -0000
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=FORGED_YAHOO_RCVD,FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web32108.mail.mud.yahoo.com (HELO web32108.mail.mud.yahoo.com) (68.142.207.122)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 27 Apr 2005 10:13:02 -0700
Received: (qmail 84063 invoked by uid 60001); 27 Apr 2005 17:12:03 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=Mn43Qn3ga9ijl16FO2FnZM/GKklLSu7TCfC9hic3FwRV/dzNSgEiW2sZEI0mLGJhuaQ+PMqyNOSXwuSWOxDrMUK9tmQHJstM9VPnukwFDUx8lcUiwS4vr1hPyO/bx0eBxpAVR2krFs4uPbl3ddP00QKDiJ5PCovQ6NF2C4AwuJg=  ;
Message-ID: <20050427171203.84061.qmail@web32108.mail.mud.yahoo.com>
Received: from [206.13.63.69] by web32108.mail.mud.yahoo.com via HTTP; Wed, 27 Apr 2005 10:12:03 PDT
Date: Wed, 27 Apr 2005 10:12:03 -0700 (PDT)
From: Aalap Parikh <aloo77@yahoo.com>
Subject: Re: WildCard search replacement
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks very much. Volodymyr, your trick about wildcard
search replacement has helped me a lot. Great idea!!!

Thanks a lot again.

--- Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
wrote:
> Hi.
> 
> Aalap Parikh wrote:
> 
> >Hi,
> >
> >The idea about begin marker sounds good. And the
> >prefix could be anything and could be made really
> >small by just using may be 2 or 3 or even less
> >characters.
> >  
> >
> if you want to use 1 character for begin marker make
> sure you don't nave 
> same tokens. But I think that making it 2 characters
> long is the best way.
> 
> >In terms of the PrefixQuery for 123* wildcard
> search,
> >wouldn't such a query be rewritten to a
> BooleanQuery?
> >  
> >
> Yes, PrefixQuery is rewritten to a BooleanQuery.
> 
> >I tried using PrefixQuery and it did give me the
> >TooManyClauseException.
> >  
> >
> Then you should use this approach. :)
> 
> regards,
> Volodymyr Bychkoviak
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 27 17:17:04 2005
Return-Path: <java-user-return-14284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88862 invoked from network); 27 Apr 2005 17:17:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2005 17:17:04 -0000
Received: (qmail 73030 invoked by uid 500); 27 Apr 2005 17:17:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73001 invoked by uid 500); 27 Apr 2005 17:17:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72986 invoked by uid 99); 27 Apr 2005 17:17:51 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO uar.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 27 Apr 2005 10:17:51 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id A9A7E33445
	for <java-user@lucene.apache.org>; Wed, 27 Apr 2005 20:16:50 +0300 (EEST)
Message-ID: <426FC8FD.9020908@i-hypergrid.com>
Date: Wed, 27 Apr 2005 20:16:45 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: WildCard search replacement
References: <20050427171203.84061.qmail@web32108.mail.mud.yahoo.com>
In-Reply-To: <20050427171203.84061.qmail@web32108.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Glad to help you.


Aalap Parikh wrote:

>Thanks very much. Volodymyr, your trick about wildcard
>search replacement has helped me a lot. Great idea!!!
>
>Thanks a lot again.
>
>--- Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
>wrote:
>  
>
>>Hi.
>>
>>Aalap Parikh wrote:
>>
>>    
>>
>>>Hi,
>>>
>>>The idea about begin marker sounds good. And the
>>>prefix could be anything and could be made really
>>>small by just using may be 2 or 3 or even less
>>>characters.
>>> 
>>>
>>>      
>>>
>>if you want to use 1 character for begin marker make
>>sure you don't nave 
>>same tokens. But I think that making it 2 characters
>>long is the best way.
>>
>>    
>>
>>>In terms of the PrefixQuery for 123* wildcard
>>>      
>>>
>>search,
>>    
>>
>>>wouldn't such a query be rewritten to a
>>>      
>>>
>>BooleanQuery?
>>    
>>
>>> 
>>>
>>>      
>>>
>>Yes, PrefixQuery is rewritten to a BooleanQuery.
>>
>>    
>>
>>>I tried using PrefixQuery and it did give me the
>>>TooManyClauseException.
>>> 
>>>
>>>      
>>>
>>Then you should use this approach. :)
>>
>>regards,
>>Volodymyr Bychkoviak
>>
>>
>>    
>>
>---------------------------------------------------------------------
>  
>
>>To unsubscribe, e-mail:
>>java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail:
>>java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 28 15:46:41 2005
Return-Path: <java-user-return-14285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63194 invoked from network); 28 Apr 2005 15:46:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2005 15:46:41 -0000
Received: (qmail 1030 invoked by uid 500); 28 Apr 2005 15:47:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 930 invoked by uid 500); 28 Apr 2005 15:47:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 88883 invoked by uid 99); 28 Apr 2005 15:39:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Message-ID: <20050428153818.20261.qmail@web26907.mail.ukl.yahoo.com>
Date: Thu, 28 Apr 2005 17:38:18 +0200 (CEST)
From: Albert -- <il_puto_amo@yahoo.es>
Subject: New Lucene-powered Website
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

 Hi!

 Please add huubs (http://www.huubs.com) to the
"Powered by Lucene" list page.

 It is a news search engine built using lucene and
clucene. 

 Any comments are apreciate?

 Cheers,
 
 Albert


		
______________________________________________ 
Renovamos el Correo Yahoo!: ¡250 MB GRATIS! 
Nuevos servicios, más seguridad 
http://correo.yahoo.es

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 28 20:38:32 2005
Return-Path: <java-user-return-14286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80056 invoked from network); 28 Apr 2005 20:38:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2005 20:38:32 -0000
Received: (qmail 20435 invoked by uid 500); 28 Apr 2005 20:39:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20387 invoked by uid 500); 28 Apr 2005 20:39:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20374 invoked by uid 500); 28 Apr 2005 20:39:31 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 20371 invoked by uid 99); 28 Apr 2005 20:39:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ns1.mainstreamdata.com (HELO ns1.mainstreamdata.com) (209.63.42.21)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 28 Apr 2005 13:39:31 -0700
Received: from localhost (localhost [127.0.0.1])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 932F4C56
	for <lucene-user@jakarta.apache.org>; Thu, 28 Apr 2005 14:38:19 -0600 (MDT)
Received: from ns1.mainstreamdata.com ([127.0.0.1])
	by localhost (ns1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 07500-01 for <lucene-user@jakarta.apache.org>;
	Thu, 28 Apr 2005 14:38:17 -0600 (MDT)
Received: from slc-xchg1.slc.mainstreamdata.com (slc-xchg1.slc.mainstreamdata.com [10.7.11.32])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 6EC46B17
	for <lucene-user@jakarta.apache.org>; Thu, 28 Apr 2005 14:38:17 -0600 (MDT)
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C54C32.3516F170"
Subject: Deletes and Hits
Date: Thu, 28 Apr 2005 14:38:17 -0600
Message-ID: <A60AC49BA89F4F4D9D86F2B7519111E801219FFC@slc-xchg1.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Deletes and Hits
Thread-Index: AcVMMjUTf0UDdR/+SxC43M19oLJdFg==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at mainstreamdata.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C54C32.3516F170
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Suppose I do a search and get a hit list.  Before I access the hit list,
my delete routine (running in another thread) comes along and deletes
some documents.  What happens if I now try to access documents that have
been deleted?

=20

Scott=20

=20

=20


------_=_NextPart_001_01C54C32.3516F170--

From java-user-return-14287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 28 20:54:49 2005
Return-Path: <java-user-return-14287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87628 invoked from network); 28 Apr 2005 20:54:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2005 20:54:49 -0000
Received: (qmail 48241 invoked by uid 500); 28 Apr 2005 20:55:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48219 invoked by uid 500); 28 Apr 2005 20:55:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48205 invoked by uid 99); 28 Apr 2005 20:55:52 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 66-238-9-116.dia.xo.com (HELO exch01.allegro.med) (66.238.9.116)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 28 Apr 2005 13:55:52 -0700
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.181
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Lucene loosing documents?
Date: Thu, 28 Apr 2005 13:54:38 -0700
Message-ID: <B5ADCC4EA669BF4697F6AF63FF328674FF604E@exch01.allegro.med>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene loosing documents?
thread-index: AcVHguxRlw/bmNFfRvCYWN1ERbNbAAErqqGA
From: "Mufaddal Khumri" <MKhumri@allegromedical.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am trying to index 20349 records. When I index using the FSDirectory I
get 20349 documents - this is correct. Now when I ude the RAMDirectory
to create my index and write all documents from the RAMDirectory to the
FSDirectory I only get 20340 documents consistently. This is the only
change I made. Why do I loose 9 documents?

int counter =3D 1;
while(counter <=3D 20349)
{
	ramWriter.addDocument(doc);
}

Directory d[] =3D {ramDir};
fsWriter.addIndexes(d);
fsWriter.optimize();
ramWriter.close();

fsWriter.close();

Any ideas as to why I am missing the 9 documents?

Thanks.

-------------------------------------------------------------------------=
-----------------
This email and any files transmitted with it are confidential=20
and intended solely for the use of the individual or entity=20
to whom they are addressed. If you have received this=20
email in error please notify the system manager. Please
note that any views or opinions presented in this email=20
are solely those of the author and do not necessarily
represent those of the company. Finally, the recipient
should check this email and any attachments for the=20
presence of viruses. The company accepts no liability for
any damage caused by any virus transmitted by this email.
Consult your physician prior to the use of any medical
supplies or product.
-------------------------------------------------------------------------=
-----------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 28 21:19:11 2005
Return-Path: <java-user-return-14288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93917 invoked from network); 28 Apr 2005 21:19:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2005 21:19:11 -0000
Received: (qmail 85753 invoked by uid 500); 28 Apr 2005 21:20:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85730 invoked by uid 500); 28 Apr 2005 21:20:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85715 invoked by uid 99); 28 Apr 2005 21:20:17 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31106.mail.mud.yahoo.com (HELO web31106.mail.mud.yahoo.com) (68.142.200.39)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 28 Apr 2005 14:20:17 -0700
Received: (qmail 15018 invoked by uid 60001); 28 Apr 2005 21:19:04 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=ogV45w6P9voMwXxNNLv+wYkhJwRKqw/XxPSIeQQeBzotYY9G2etsytspljVvJ7U50VDH/s/2X/ej45ZnSl5N117AY4wMou1a4foSDw1FMALpcbVynJIteTsXMLJ2d0f9aAUk9UGB0cvG5lqXxDzzxZ8+fkhG39inFUwahgdrOw0=  ;
Message-ID: <20050428211904.15016.qmail@web31106.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31106.mail.mud.yahoo.com via HTTP; Thu, 28 Apr 2005 14:19:04 PDT
Date: Thu, 28 Apr 2005 14:19:04 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene loosing documents?
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Can you close the ramDirectory first and then add it via fsWriter and
see if that solves it?

Otis

--- Mufaddal Khumri <MKhumri@allegromedical.com> wrote:
> Hi,
> 
> I am trying to index 20349 records. When I index using the
> FSDirectory I
> get 20349 documents - this is correct. Now when I ude the
> RAMDirectory
> to create my index and write all documents from the RAMDirectory to
> the
> FSDirectory I only get 20340 documents consistently. This is the only
> change I made. Why do I loose 9 documents?
> 
> int counter = 1;
> while(counter <= 20349)
> {
> 	ramWriter.addDocument(doc);
> }
> 
> Directory d[] = {ramDir};
> fsWriter.addIndexes(d);
> fsWriter.optimize();
> ramWriter.close();
> 
> fsWriter.close();
> 
> Any ideas as to why I am missing the 9 documents?
> 
> Thanks.
> 
>
------------------------------------------------------------------------------------------
> This email and any files transmitted with it are confidential 
> and intended solely for the use of the individual or entity 
> to whom they are addressed. If you have received this 
> email in error please notify the system manager. Please
> note that any views or opinions presented in this email 
> are solely those of the author and do not necessarily
> represent those of the company. Finally, the recipient
> should check this email and any attachments for the 
> presence of viruses. The company accepts no liability for
> any damage caused by any virus transmitted by this email.
> Consult your physician prior to the use of any medical
> supplies or product.
>
------------------------------------------------------------------------------------------
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 28 22:10:58 2005
Return-Path: <java-user-return-14289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9150 invoked from network); 28 Apr 2005 22:10:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2005 22:10:58 -0000
Received: (qmail 62128 invoked by uid 500); 28 Apr 2005 22:12:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62006 invoked by uid 500); 28 Apr 2005 22:12:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61993 invoked by uid 500); 28 Apr 2005 22:12:02 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 61989 invoked by uid 99); 28 Apr 2005 22:12:02 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ip-64-7-7-100.dsl.nyc.megapath.net (HELO mail.monsur.com) (64.7.7.100)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 28 Apr 2005 15:12:02 -0700
Received: from chicago [64.7.7.99] by mail.monsur.com with ESMTP
  (SMTPD32-8.04) id A1632602012E; Thu, 28 Apr 2005 18:19:15 -0400
From: "Monsur Hossain" <monsur@monsur.com>
To: <lucene-user@jakarta.apache.org>
Subject: IndexSearcher hanging on to old index files in Windows
Date: Thu, 28 Apr 2005 18:10:45 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcVMPx/5v8fvaqxzSMmrnBfwx5jt/g==
Message-Id: <200504281819640.SM01836@chicago>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi all.  I'm running Lucene.NET in a Windows/ASP.NET environment.  We are
searching a 300meg index in a web environment, where the IndexSearcher is
cached.  Every 10-30 minutes, a separate process updates the index.  When
ASP.NET's cache detects a changed index, it drops the current IndexSearcher
(which the Garbage collector takes care of in the future [1]) and creates a
new one. 

Now, while the index is being updated, the current IndexSearcher in cache
holds a reference to the old index files.  Therefore, the IndexWriter can't
delete them, and they sit around in the folder, continuing to grow.  Since
the IndexSearcher is left to the GC, there's no guarantee of when the files
will be released.  

I was considering such previously mentioned systems as reference counting
[2] and swapping between two indexes [3].  But in both these cases, I don't
think I'm ever guaranteed that an old IndexSearcher will have released its
grasp on the old files in time to delete them.  

Anyway, I'd like to hear if others are dealing with this issue.

Also, I'm curious, is this a Windows specific issue; I haven't seen any
mention of this on UNIX?

Thanks,
Monsur

[1] http://tinyurl.com/8qzo4
[2] http://tinyurl.com/8enzh
[3] I can't find a link to it, but it was suggested by George Aroush in a
previous thread of mine.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 28 22:24:38 2005
Return-Path: <java-user-return-14290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11578 invoked from network); 28 Apr 2005 22:24:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2005 22:24:38 -0000
Received: (qmail 81605 invoked by uid 500); 28 Apr 2005 22:25:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81571 invoked by uid 500); 28 Apr 2005 22:25:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81557 invoked by uid 99); 28 Apr 2005 22:25:41 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 66-238-9-116.dia.xo.com (HELO exch01.allegro.med) (66.238.9.116)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 28 Apr 2005 15:25:41 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene loosing documents?
Date: Thu, 28 Apr 2005 15:24:27 -0700
Message-ID: <B5ADCC4EA669BF4697F6AF63FF328674FF60AF@exch01.allegro.med>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene loosing documents?
Thread-Index: AcVMN+vbFA2+JMdLR6Gx3unrvb4pMwACQlZg
From: "Mufaddal Khumri" <MKhumri@allegromedical.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Thanks. That seems to work. I guess calling the close before the add
causes the last few documents to be flushed out or something?

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Thursday, April 28, 2005 2:19 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene loosing documents?

Can you close the ramDirectory first and then add it via fsWriter and
see if that solves it?

Otis

--- Mufaddal Khumri <MKhumri@allegromedical.com> wrote:
> Hi,
>=20
> I am trying to index 20349 records. When I index using the
> FSDirectory I
> get 20349 documents - this is correct. Now when I ude the
> RAMDirectory
> to create my index and write all documents from the RAMDirectory to
> the
> FSDirectory I only get 20340 documents consistently. This is the only
> change I made. Why do I loose 9 documents?
>=20
> int counter =3D 1;
> while(counter <=3D 20349)
> {
> 	ramWriter.addDocument(doc);
> }
>=20
> Directory d[] =3D {ramDir};
> fsWriter.addIndexes(d);
> fsWriter.optimize();
> ramWriter.close();
>=20
> fsWriter.close();
>=20
> Any ideas as to why I am missing the 9 documents?
>=20
> Thanks.
>=20
>
------------------------------------------------------------------------
------------------
> This email and any files transmitted with it are confidential=20
> and intended solely for the use of the individual or entity=20
> to whom they are addressed. If you have received this=20
> email in error please notify the system manager. Please
> note that any views or opinions presented in this email=20
> are solely those of the author and do not necessarily
> represent those of the company. Finally, the recipient
> should check this email and any attachments for the=20
> presence of viruses. The company accepts no liability for
> any damage caused by any virus transmitted by this email.
> Consult your physician prior to the use of any medical
> supplies or product.
>
------------------------------------------------------------------------
------------------
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 28 22:28:16 2005
Return-Path: <java-user-return-14291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12354 invoked from network); 28 Apr 2005 22:28:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2005 22:28:16 -0000
Received: (qmail 87617 invoked by uid 500); 28 Apr 2005 22:29:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87220 invoked by uid 500); 28 Apr 2005 22:29:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87206 invoked by uid 99); 28 Apr 2005 22:29:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 28 Apr 2005 15:29:20 -0700
Received: from [172.25.1.184] ([::ffff:67.125.239.59])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Thu, 28 Apr 2005 17:28:08 -0500
  id 00074205.42716378.000013CD
Message-ID: <42716375.2030809@allthingslocal.com>
Date: Thu, 28 Apr 2005 15:28:05 -0700
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher hanging on to old index files in Windows
References: <200504281819640.SM01836@chicago>
In-Reply-To: <200504281819640.SM01836@chicago>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Monsur Hossain writes (4/28/2005 3:10 PM):

>Hi all.  I'm running Lucene.NET in a Windows/ASP.NET environment.  We are
>searching a 300meg index in a web environment, where the IndexSearcher is
>cached.  Every 10-30 minutes, a separate process updates the index.  When
>ASP.NET's cache detects a changed index, it drops the current IndexSearcher
>(which the Garbage collector takes care of in the future [1]) and creates a
>new one. 
>
>Now, while the index is being updated, the current IndexSearcher in cache
>holds a reference to the old index files.  Therefore, the IndexWriter can't
>delete them, and they sit around in the folder, continuing to grow.  Since
>the IndexSearcher is left to the GC, there's no guarantee of when the files
>will be released.  
>
>I was considering such previously mentioned systems as reference counting
>[2] and swapping between two indexes [3].  But in both these cases, I don't
>think I'm ever guaranteed that an old IndexSearcher will have released its
>grasp on the old files in time to delete them.  
>
>Anyway, I'd like to hear if others are dealing with this issue.
>  
>
Perhaps I'm not fully understanding your issue, but I did a stress test 
recently with a large Lucene index (growing to about 10 million large 
documents on a single node) and didn't encounter this problem.  The 
system did continual round-the-clock indexing at about 100k 
documents/hour with nightly optimizations.  Searching was performed on 
the same index on the same node in parallel (taking generally 20 to 
200ms per search).  The test harness closed the underlying IndexReader 
and reopened a new one every 2 minutes, thus guaranteeing that search 
results were up-to-date within 2 minutes.  I wasn't doing deletes, but 
old segment files caused by incremental merging and/or optimization were 
not hanging around as far as I could tell. This was on the Java version 
on Windows.

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 28 23:31:50 2005
Return-Path: <java-user-return-14292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25106 invoked from network); 28 Apr 2005 23:31:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2005 23:31:50 -0000
Received: (qmail 75223 invoked by uid 500); 28 Apr 2005 23:32:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75183 invoked by uid 500); 28 Apr 2005 23:32:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75166 invoked by uid 99); 28 Apr 2005 23:32:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail01.de.ina.com (HELO mail01.de.ina.com) (159.51.231.15)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 28 Apr 2005 16:32:45 -0700
Received: from de010245.de.ina.com (de010245.de.ina.com [159.51.231.10])
        by mail01.de.ina.com (SMTP-GW1.2) with SMTP id j3SNReMN023062
        for <java-user@lucene.apache.org>; Fri, 29 Apr 2005 01:27:40 +0200
Received: From de010359.de.ina.com ([10.160.1.13]) by de010245.de.ina.com (WebShield SMTP v4.5 MR1a P0803.345);
	id 1114731124734; Fri, 29 Apr 2005 01:32:04 +0200
Received: from de010367.de.ina.com ([10.160.13.7]) by de010359.de.ina.com with Microsoft SMTPSVC(6.0.3790.211);
	 Fri, 29 Apr 2005 01:31:29 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: IndexSearcher hanging on to old index files in Windows
Date: Fri, 29 Apr 2005 01:31:24 +0200
Message-ID: <00ADB1D1C6D9434989D51BA9E55FAE0E02A409C2@de010367.de.ina.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IndexSearcher hanging on to old index files in Windows
Thread-Index: AcVMPx/5v8fvaqxzSMmrnBfwx5jt/gACwO2g
From: "Nestel, Frank  IZ/HZA-IOL" <nestefan@de.ina.com>
To: <java-user@lucene.apache.org>, <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 28 Apr 2005 23:31:29.0407 (UTC) FILETIME=[674938F0:01C54C4A]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Maybe it is .NET specific?! We use a very similar
Szenario with Java under Windows and the Server is
now running for 40 day since we launched it productively.
No problem at all! We have two index directories between
which we switch back and forth though?

Frank

>-----Original Message-----
>From: Monsur Hossain [mailto:monsur@monsur.com]=20
>Sent: Friday, April 29, 2005 12:11 AM
>To: lucene-user@jakarta.apache.org
>Subject: IndexSearcher hanging on to old index files in Windows
>
>
>
>Hi all.  I'm running Lucene.NET in a Windows/ASP.NET=20
>environment.  We are searching a 300meg index in a web=20
>environment, where the IndexSearcher is cached.  Every 10-30=20
>minutes, a separate process updates the index.  When ASP.NET's=20
>cache detects a changed index, it drops the current=20
>IndexSearcher (which the Garbage collector takes care of in=20
>the future [1]) and creates a new one.=20
>
>Now, while the index is being updated, the current=20
>IndexSearcher in cache holds a reference to the old index=20
>files.  Therefore, the IndexWriter can't delete them, and they=20
>sit around in the folder, continuing to grow.  Since the=20
>IndexSearcher is left to the GC, there's no guarantee of when=20
>the files will be released. =20
>
>I was considering such previously mentioned systems as=20
>reference counting [2] and swapping between two indexes [3]. =20
>But in both these cases, I don't think I'm ever guaranteed=20
>that an old IndexSearcher will have released its grasp on the=20
>old files in time to delete them. =20
>
>Anyway, I'd like to hear if others are dealing with this issue.
>
>Also, I'm curious, is this a Windows specific issue; I haven't=20
>seen any mention of this on UNIX?
>
>Thanks,
>Monsur
>
>[1] http://tinyurl.com/8qzo4
>[2] http://tinyurl.com/8enzh
>[3] I can't find a link to it, but it was suggested by George=20
>Aroush in a previous thread of mine.
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 28 23:31:50 2005
Return-Path: <java-user-return-14293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25112 invoked from network); 28 Apr 2005 23:31:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2005 23:31:50 -0000
Received: (qmail 75292 invoked by uid 500); 28 Apr 2005 23:32:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75203 invoked by uid 500); 28 Apr 2005 23:32:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75186 invoked by uid 500); 28 Apr 2005 23:32:46 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 75168 invoked by uid 99); 28 Apr 2005 23:32:46 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail01.ina.de (HELO mail01.de.ina.com) (159.51.231.15)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 28 Apr 2005 16:32:45 -0700
Received: from de010245.de.ina.com (de010245.de.ina.com [159.51.231.10])
        by mail01.de.ina.com (SMTP-GW1.2) with SMTP id j3SNReQR023065
        for <lucene-user@jakarta.apache.org>; Fri, 29 Apr 2005 01:27:40 +0200
Received: From de010359.de.ina.com ([10.160.1.13]) by de010245.de.ina.com (WebShield SMTP v4.5 MR1a P0803.345);
	id 1114731124734; Fri, 29 Apr 2005 01:32:04 +0200
Received: from de010367.de.ina.com ([10.160.13.7]) by de010359.de.ina.com with Microsoft SMTPSVC(6.0.3790.211);
	 Fri, 29 Apr 2005 01:31:29 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: IndexSearcher hanging on to old index files in Windows
Date: Fri, 29 Apr 2005 01:31:24 +0200
Message-ID: <00ADB1D1C6D9434989D51BA9E55FAE0E02A409C2@de010367.de.ina.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IndexSearcher hanging on to old index files in Windows
Thread-Index: AcVMPx/5v8fvaqxzSMmrnBfwx5jt/gACwO2g
From: "Nestel, Frank  IZ/HZA-IOL" <nestefan@de.ina.com>
To: <java-user@lucene.apache.org>, <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 28 Apr 2005 23:31:29.0407 (UTC) FILETIME=[674938F0:01C54C4A]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Maybe it is .NET specific?! We use a very similar
Szenario with Java under Windows and the Server is
now running for 40 day since we launched it productively.
No problem at all! We have two index directories between
which we switch back and forth though?

Frank

>-----Original Message-----
>From: Monsur Hossain [mailto:monsur@monsur.com]=20
>Sent: Friday, April 29, 2005 12:11 AM
>To: lucene-user@jakarta.apache.org
>Subject: IndexSearcher hanging on to old index files in Windows
>
>
>
>Hi all.  I'm running Lucene.NET in a Windows/ASP.NET=20
>environment.  We are searching a 300meg index in a web=20
>environment, where the IndexSearcher is cached.  Every 10-30=20
>minutes, a separate process updates the index.  When ASP.NET's=20
>cache detects a changed index, it drops the current=20
>IndexSearcher (which the Garbage collector takes care of in=20
>the future [1]) and creates a new one.=20
>
>Now, while the index is being updated, the current=20
>IndexSearcher in cache holds a reference to the old index=20
>files.  Therefore, the IndexWriter can't delete them, and they=20
>sit around in the folder, continuing to grow.  Since the=20
>IndexSearcher is left to the GC, there's no guarantee of when=20
>the files will be released. =20
>
>I was considering such previously mentioned systems as=20
>reference counting [2] and swapping between two indexes [3]. =20
>But in both these cases, I don't think I'm ever guaranteed=20
>that an old IndexSearcher will have released its grasp on the=20
>old files in time to delete them. =20
>
>Anyway, I'd like to hear if others are dealing with this issue.
>
>Also, I'm curious, is this a Windows specific issue; I haven't=20
>seen any mention of this on UNIX?
>
>Thanks,
>Monsur
>
>[1] http://tinyurl.com/8qzo4
>[2] http://tinyurl.com/8enzh
>[3] I can't find a link to it, but it was suggested by George=20
>Aroush in a previous thread of mine.
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 28 23:44:36 2005
Return-Path: <java-user-return-14294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27510 invoked from network); 28 Apr 2005 23:44:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2005 23:44:36 -0000
Received: (qmail 98276 invoked by uid 500); 28 Apr 2005 23:45:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98250 invoked by uid 500); 28 Apr 2005 23:45:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98236 invoked by uid 99); 28 Apr 2005 23:45:40 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ip-64-7-7-100.dsl.nyc.megapath.net (HELO mail.monsur.com) (64.7.7.100)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 28 Apr 2005 16:45:39 -0700
Received: from chicago [64.7.7.99] by mail.monsur.com with ESMTP
  (SMTPD32-8.04) id A75413B2012A; Thu, 28 Apr 2005 19:52:52 -0400
From: "Monsur Hossain" <monsur@monsur.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexSearcher hanging on to old index files in Windows
Date: Thu, 28 Apr 2005 19:44:21 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <00ADB1D1C6D9434989D51BA9E55FAE0E02A409C2@de010367.de.ina.com>
Thread-Index: AcVMPx/5v8fvaqxzSMmrnBfwx5jt/gACwO2gAABmA5A=
Message-Id: <200504281952437.SM01836@chicago>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi there.  Thanks for the input.  I just pulled together a quick set of .NET
console apps to test this out.  I have an app that indexes and an app that
holds an open searcher.  Sure enough, after each incremental index/searcher
refresh, I can't delete the old index files.  I even tried doing a
gc.collect(), with no luck.  

I'm currently porting these two apps over to Java to see if I get different
results; I'll post the code, and let you know what I find.

Monsur

  

> -----Original Message-----
> From: Nestel, Frank IZ/HZA-IOL [mailto:nestefan@de.ina.com] 
> Sent: Thursday, April 28, 2005 7:31 PM
> To: java-user@lucene.apache.org; lucene-user@jakarta.apache.org
> Subject: RE: IndexSearcher hanging on to old index files in Windows
> 
> Maybe it is .NET specific?! We use a very similar
> Szenario with Java under Windows and the Server is
> now running for 40 day since we launched it productively.
> No problem at all! We have two index directories between
> which we switch back and forth though?
> 
> Frank
> 
> >-----Original Message-----
> >From: Monsur Hossain [mailto:monsur@monsur.com] 
> >Sent: Friday, April 29, 2005 12:11 AM
> >To: lucene-user@jakarta.apache.org
> >Subject: IndexSearcher hanging on to old index files in Windows
> >
> >
> >
> >Hi all.  I'm running Lucene.NET in a Windows/ASP.NET 
> >environment.  We are searching a 300meg index in a web 
> >environment, where the IndexSearcher is cached.  Every 10-30 
> >minutes, a separate process updates the index.  When ASP.NET's 
> >cache detects a changed index, it drops the current 
> >IndexSearcher (which the Garbage collector takes care of in 
> >the future [1]) and creates a new one. 
> >
> >Now, while the index is being updated, the current 
> >IndexSearcher in cache holds a reference to the old index 
> >files.  Therefore, the IndexWriter can't delete them, and they 
> >sit around in the folder, continuing to grow.  Since the 
> >IndexSearcher is left to the GC, there's no guarantee of when 
> >the files will be released.  
> >
> >I was considering such previously mentioned systems as 
> >reference counting [2] and swapping between two indexes [3].  
> >But in both these cases, I don't think I'm ever guaranteed 
> >that an old IndexSearcher will have released its grasp on the 
> >old files in time to delete them.  
> >
> >Anyway, I'd like to hear if others are dealing with this issue.
> >
> >Also, I'm curious, is this a Windows specific issue; I haven't 
> >seen any mention of this on UNIX?
> >
> >Thanks,
> >Monsur
> >
> >[1] http://tinyurl.com/8qzo4
> >[2] http://tinyurl.com/8enzh
> >[3] I can't find a link to it, but it was suggested by George 
> >Aroush in a previous thread of mine.
> >
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 28 23:53:29 2005
Return-Path: <java-user-return-14295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29205 invoked from network); 28 Apr 2005 23:53:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2005 23:53:29 -0000
Received: (qmail 8742 invoked by uid 500); 28 Apr 2005 23:54:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8698 invoked by uid 500); 28 Apr 2005 23:54:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8678 invoked by uid 99); 28 Apr 2005 23:54:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.204 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 28 Apr 2005 16:54:22 -0700
Received: by rproxy.gmail.com with SMTP id i8so432470rne
        for <java-user@lucene.apache.org>; Thu, 28 Apr 2005 16:53:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=iyR1Us2uQuQRXiPPJHfQ6Y/iWNw4vGps2yRzOtlOYnKPOAtarwXKybf44qTvaDvBZFjNwDTNvcqa7w2gH1k0Z9vypu5tgqT/OGDkUKNVjXOa9lT2UQWf+UQDVY9gnatKmubnPXXPxMaayeHgjsY6GFZvj9YqsY60PSAt79yyUQs=
Received: by 10.38.11.53 with SMTP id 53mr2251898rnk;
        Thu, 28 Apr 2005 16:53:08 -0700 (PDT)
Received: by 10.38.104.11 with HTTP; Thu, 28 Apr 2005 16:53:08 -0700 (PDT)
Message-ID: <88c6a67205042816533325e65d@mail.gmail.com>
Date: Thu, 28 Apr 2005 18:53:08 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Splitting index into indexed fields and stored fields for performance
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've been thinking about splitting a (presumably large) Lucene index
up into two:  one index only contains "indexed" (searchable) fields,
and the second index contains only stored fields.  I'm interested in
whether this might increase response time or throughput for a
high-volume system.  Google appears to use something like this, where
they have index servers that do the search, and then separate document
servers which return the documents (and compute the KWIC snippets, I
believe).   The docids in the two indexes would have to be in sync so
you could look up docs in the stored index using the docid from the
search index.

Since the "stored fields" index would basically just be a database,
perhaps this is better served using a traditional relational database
(or even use the OS's file system).  However, a traditional database
doesn't know what the docids are (and docids change over time), -- may
be one could store a single stored field in the "search index",
containing a permanent identifier for the DB lookup.

Has anyone tried this, or have any thoughts on whether this would
increase performance?   I've looked at Nutch some; it can use a
distributed index but it doesn't seem to split the index into stored
vs. indexed so I figure there may be a good reason for this (maybe
just for simplicity).

-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 02:09:08 2005
Return-Path: <java-user-return-14296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76478 invoked from network); 29 Apr 2005 02:09:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 02:09:07 -0000
Received: (qmail 86036 invoked by uid 500); 29 Apr 2005 02:10:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85999 invoked by uid 500); 29 Apr 2005 02:10:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85979 invoked by uid 99); 29 Apr 2005 02:10:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 28 Apr 2005 19:10:10 -0700
Received: from [172.25.1.184] ([::ffff:67.125.239.59])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Thu, 28 Apr 2005 21:08:57 -0500
  id 00074215.42719739.00002385
Message-ID: <42719735.10607@allthingslocal.com>
Date: Thu, 28 Apr 2005 19:08:53 -0700
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher hanging on to old index files in Windows
References: <200504281952437.SM01836@chicago>
In-Reply-To: <200504281952437.SM01836@chicago>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Monsur Hossain writes (4/28/2005 4:44 PM):

>Hi there.  Thanks for the input.  I just pulled together a quick set of .NET
>console apps to test this out.  I have an app that indexes and an app that
>holds an open searcher.  Sure enough, after each incremental index/searcher
>refresh, I can't delete the old index files.  I even tried doing a
>gc.collect(), with no luck.  
>  
>
I mentioned this earlier, but just to be explicit, you are closing the 
IndexSearcher before abandoning it, right?  And if you opened the 
IndexReader separately from the IndexSearcher, then are you also closing 
it separately?

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 02:12:55 2005
Return-Path: <java-user-return-14297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77124 invoked from network); 29 Apr 2005 02:12:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 02:12:55 -0000
Received: (qmail 90790 invoked by uid 500); 29 Apr 2005 02:13:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90768 invoked by uid 500); 29 Apr 2005 02:13:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90752 invoked by uid 99); 29 Apr 2005 02:13:57 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ip-64-7-7-100.dsl.nyc.megapath.net (HELO mail.monsur.com) (64.7.7.100)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 28 Apr 2005 19:13:57 -0700
Received: from chicago [64.7.7.99] by mail.monsur.com with ESMTP
  (SMTPD32-8.04) id AA1532900148; Thu, 28 Apr 2005 22:21:09 -0400
From: "Monsur Hossain" <monsur@monsur.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexSearcher hanging on to old index files in Windows
Date: Thu, 28 Apr 2005 22:12:38 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <200504281952437.SM01836@chicago>
Thread-Index: AcVMPx/5v8fvaqxzSMmrnBfwx5jt/gACwO2gAABmA5AABTek4A==
Message-Id: <200504282221437.SM01836@chicago>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok, I've written up a Java test with Lucene 1.4.3, the code is pasted below.
The code creates a new index, creates an IndexSearcher object, and then does
an incremental index/optimize.  The IndexSearcher line is commented out.
When I run this code, I end up with a single "segments", "deletable" and
".cfs" file in my Index directory.

Now, when I uncomment the IndexSearcher line and run the application again,
I end up with two .cfs files.  Notice how all I have to do is create an
IndexSearcher; I don't even have to run a query.  

Am I doing this correctly?

Thanks,
Monsur


import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;


public class SearchTest {
    
    static String indexDir = "C:\\Temp\\Index"; 
    static int numDocsAdd = 1000;
    static int mergeFactor = 2;
    static int docId = 0;

    public static void main(String[] args) throws Exception {
        System.out.println("Running full index");
        initialIndex();
//        IndexSearcher isearcher = new IndexSearcher(indexDir);
        System.out.println("Running incremental index");
        incrementalIndex();
    }
    
    static void initialIndex() throws Exception {
        // create a new index with 1000 documents
        IndexWriter writerMain = new IndexWriter(indexDir, new
SimpleAnalyzer(), true);
        writerMain.mergeFactor = mergeFactor;
        for (docId = 0; docId < numDocsAdd; docId++)
        {
            Document doc = new Document();
            doc.add(Field.Text("Content", "This is for document number " +
docId));
            doc.add(Field.Keyword("DocID", Integer.toString(docId)));
            writerMain.addDocument(doc);
        }
        writerMain.optimize();
        writerMain.close();
    }
    
    static void incrementalIndex() throws Exception {
        // add 1000 new documents to the index
        IndexWriter writerMain = new IndexWriter(indexDir, new
SimpleAnalyzer(), false);
        writerMain.mergeFactor = mergeFactor;
        int docMax = docId + numDocsAdd;
        for (; docId < docMax; docId++)
        {
            Document doc = new Document();
            doc.add(Field.Text("Content", "This is for document number " +
docId));
            doc.add(Field.Keyword("DocID", Integer.toString(docId)));
            writerMain.addDocument(doc);
        }
        writerMain.optimize();
        writerMain.close();
    }
}



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 02:19:59 2005
Return-Path: <java-user-return-14298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77807 invoked from network); 29 Apr 2005 02:19:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 02:19:59 -0000
Received: (qmail 6293 invoked by uid 500); 29 Apr 2005 02:21:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6211 invoked by uid 500); 29 Apr 2005 02:21:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6196 invoked by uid 99); 29 Apr 2005 02:21:01 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ip-64-7-7-100.dsl.nyc.megapath.net (HELO mail.monsur.com) (64.7.7.100)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 28 Apr 2005 19:21:01 -0700
Received: from chicago [64.7.7.99] by mail.monsur.com with ESMTP
  (SMTPD32-8.04) id ABBD2685012E; Thu, 28 Apr 2005 22:28:13 -0400
From: "Monsur Hossain" <monsur@monsur.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexSearcher hanging on to old index files in Windows
Date: Thu, 28 Apr 2005 22:19:43 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <42719735.10607@allthingslocal.com>
Thread-Index: AcVMYZs+0sbsiBPjS0WkLXobNU2dtgAAJRkQ
Message-Id: <200504282228531.SM01836@chicago>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Well, that's part of my question, sorry if it wasn't clear.  I'm not
explicitly closing the IndexSearcher, because there may be users still using
it.  Instead, I'm creating a new IndexSearcher, and leaving the old
IndexSearcher to be cleaned up by the GC, as suggested here:

http://tinyurl.com/8qzo4

In the example I just sent out, the IndexSearcher is open during the
incremental index, which could be the issue.  Its sort of like a catch-22
right now: I can't close the old IndexSearcher until the new index is ready,
and by the time the new index is ready, its too late to delete the old
files.

Thanks,
Monsur



> -----Original Message-----
> From: Chuck Williams [mailto:chuck@allthingslocal.com] 
> Sent: Thursday, April 28, 2005 10:09 PM
> To: java-user@lucene.apache.org
> Subject: Re: IndexSearcher hanging on to old index files in Windows
> 
> Monsur Hossain writes (4/28/2005 4:44 PM):
> 
> >Hi there.  Thanks for the input.  I just pulled together a 
> quick set of .NET
> >console apps to test this out.  I have an app that indexes 
> and an app that
> >holds an open searcher.  Sure enough, after each incremental 
> index/searcher
> >refresh, I can't delete the old index files.  I even tried doing a
> >gc.collect(), with no luck.  
> >  
> >
> I mentioned this earlier, but just to be explicit, you are 
> closing the 
> IndexSearcher before abandoning it, right?  And if you opened the 
> IndexReader separately from the IndexSearcher, then are you 
> also closing 
> it separately?
> 
> Chuck
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 02:22:08 2005
Return-Path: <java-user-return-14299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78049 invoked from network); 29 Apr 2005 02:22:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 02:22:08 -0000
Received: (qmail 9166 invoked by uid 500); 29 Apr 2005 02:23:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8875 invoked by uid 500); 29 Apr 2005 02:23:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8862 invoked by uid 99); 29 Apr 2005 02:23:14 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31106.mail.mud.yahoo.com (HELO web31106.mail.mud.yahoo.com) (68.142.200.39)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 28 Apr 2005 19:23:14 -0700
Received: (qmail 15640 invoked by uid 60001); 29 Apr 2005 02:21:59 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=0sHzneSkEKPAsU+UweWytyOOhUGp0KD2gQgGgtRIa/0CNFsU1TAJEHm4roRqMkx4lzowEAT7cKiHDTMVaurXp3MjNlWjOqmAsLfOxdm2chgYFIb0EIPbmf6ruCP6916saX2b/7Cv5TnftaQzLvJxWbn+MqRW/0Eieu1Cmr17czU=  ;
Message-ID: <20050429022159.15638.qmail@web31106.mail.mud.yahoo.com>
Received: from [69.201.130.192] by web31106.mail.mud.yahoo.com via HTTP; Thu, 28 Apr 2005 19:21:59 PDT
Date: Thu, 28 Apr 2005 19:21:59 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: IndexSearcher hanging on to old index files in Windows
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Just tried this on my linux laptop - with IndexSearcher uncommented, I
still get a single .cfs file.  It's one of those problems where Windows
doesn't let you erase the file.  I'd start this SortTest in the
debugger and step through it until you find a spot where you see that
some index file deletion fails.
Do you get 2 .cfs files even if you add isearcher.close() right after
you open the IndexSearcher?

Otis

--- Monsur Hossain <monsur@monsur.com> wrote:
> Ok, I've written up a Java test with Lucene 1.4.3, the code is pasted
> below.
> The code creates a new index, creates an IndexSearcher object, and
> then does
> an incremental index/optimize.  The IndexSearcher line is commented
> out.
> When I run this code, I end up with a single "segments", "deletable"
> and
> ".cfs" file in my Index directory.
> 
> Now, when I uncomment the IndexSearcher line and run the application
> again,
> I end up with two .cfs files.  Notice how all I have to do is create
> an
> IndexSearcher; I don't even have to run a query.  
> 
> Am I doing this correctly?
> 
> Thanks,
> Monsur
> 
> 
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.analysis.SimpleAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> 
> 
> public class SearchTest {
>     
>     static String indexDir = "C:\\Temp\\Index"; 
>     static int numDocsAdd = 1000;
>     static int mergeFactor = 2;
>     static int docId = 0;
> 
>     public static void main(String[] args) throws Exception {
>         System.out.println("Running full index");
>         initialIndex();
> //        IndexSearcher isearcher = new IndexSearcher(indexDir);
>         System.out.println("Running incremental index");
>         incrementalIndex();
>     }
>     
>     static void initialIndex() throws Exception {
>         // create a new index with 1000 documents
>         IndexWriter writerMain = new IndexWriter(indexDir, new
> SimpleAnalyzer(), true);
>         writerMain.mergeFactor = mergeFactor;
>         for (docId = 0; docId < numDocsAdd; docId++)
>         {
>             Document doc = new Document();
>             doc.add(Field.Text("Content", "This is for document
> number " +
> docId));
>             doc.add(Field.Keyword("DocID", Integer.toString(docId)));
>             writerMain.addDocument(doc);
>         }
>         writerMain.optimize();
>         writerMain.close();
>     }
>     
>     static void incrementalIndex() throws Exception {
>         // add 1000 new documents to the index
>         IndexWriter writerMain = new IndexWriter(indexDir, new
> SimpleAnalyzer(), false);
>         writerMain.mergeFactor = mergeFactor;
>         int docMax = docId + numDocsAdd;
>         for (; docId < docMax; docId++)
>         {
>             Document doc = new Document();
>             doc.add(Field.Text("Content", "This is for document
> number " +
> docId));
>             doc.add(Field.Keyword("DocID", Integer.toString(docId)));
>             writerMain.addDocument(doc);
>         }
>         writerMain.optimize();
>         writerMain.close();
>     }
> }
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 02:27:00 2005
Return-Path: <java-user-return-14300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78587 invoked from network); 29 Apr 2005 02:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 02:27:00 -0000
Received: (qmail 13769 invoked by uid 500); 29 Apr 2005 02:28:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13739 invoked by uid 500); 29 Apr 2005 02:28:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13725 invoked by uid 99); 29 Apr 2005 02:28:09 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ip-64-7-7-100.dsl.nyc.megapath.net (HELO mail.monsur.com) (64.7.7.100)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 28 Apr 2005 19:28:09 -0700
Received: from chicago [64.7.7.99] by mail.monsur.com with ESMTP
  (SMTPD32-8.04) id AD69268D012E; Thu, 28 Apr 2005 22:35:21 -0400
From: "Monsur Hossain" <monsur@monsur.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexSearcher hanging on to old index files in Windows
Date: Thu, 28 Apr 2005 22:26:51 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <20050429022159.15638.qmail@web31106.mail.mud.yahoo.com>
Thread-Index: AcVMY2uQdp2vhAYER9SzHdh8edIhNAAAPMvg
Message-Id: <200504282235749.SM01836@chicago>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Do you get 2 .cfs files even if you add isearcher.close() right after
> you open the IndexSearcher?

Nope!  Adding the close() right after the open gives me one .cfs file.

Monsur



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 02:47:12 2005
Return-Path: <java-user-return-14301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80791 invoked from network); 29 Apr 2005 02:47:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 02:47:12 -0000
Received: (qmail 34474 invoked by uid 500); 29 Apr 2005 02:48:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34129 invoked by uid 500); 29 Apr 2005 02:48:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34116 invoked by uid 99); 29 Apr 2005 02:48:15 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31102.mail.mud.yahoo.com (HELO web31102.mail.mud.yahoo.com) (68.142.200.35)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 28 Apr 2005 19:48:15 -0700
Received: (qmail 35289 invoked by uid 60001); 29 Apr 2005 02:47:00 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=VXkUoWaaZovasljoabHIBV0e6HFiTDOU5ZUzFVAofpnWSGy6mfnGH5JYTtbV8bBbEiIC9XdtQQVpNOlozACjMnPf7ySChR8ZxhaiHOh5ORO3/NLH3Qn3D14vEgDpvinoaYs56pvArSUVFRzQH9wfh8M+7RWTo5lZPFuHD7vTIMY=  ;
Message-ID: <20050429024700.35287.qmail@web31102.mail.mud.yahoo.com>
Received: from [69.201.130.192] by web31102.mail.mud.yahoo.com via HTTP; Thu, 28 Apr 2005 19:47:00 PDT
Date: Thu, 28 Apr 2005 19:47:00 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Deletes and Hits
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Let's see:

import org.apache.lucene.search.*;
import org.apache.lucene.index.*;
import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;


public class HitDocDeleteTest {

    static String indexDir = "/tmp/hddt";
    static int numDocsAdd = 2;
    static int docId = 0;

    public static void main(String[] args) throws Exception {
        index();
        search();
    }

    static void index() throws Exception {
        IndexWriter writerMain = new IndexWriter(indexDir, new
SimpleAnalyzer(), true);
        for (docId = 0; docId < numDocsAdd; docId++)
        {
            Document doc = new Document();
            doc.add(Field.Text("Content", "This is for document number
" + docId));
            doc.add(Field.Keyword("DocID", Integer.toString(docId)));
            writerMain.addDocument(doc);
        }
        writerMain.optimize();
        writerMain.close();
    }

    static void search() throws Exception {
        IndexSearcher isearcher = new IndexSearcher(indexDir);
        Hits hits = isearcher.search(new TermQuery(new Term("Content",
"document")));

        System.out.println("HITS: " + hits.length());
        System.out.println("DOC0: " + hits.doc(0));
        System.out.println("DOC1: " + hits.doc(1));

        IndexReader reader = IndexReader.open(indexDir);
        reader.delete(1);
        reader.close();
        
        System.out.println("HITS: " + hits.length());
        System.out.println("DOC0: " + hits.doc(0));
        System.out.println("DOC1: " + hits.doc(1));
    }
}

java HitDocDeleteTest
HITS: 2
DOC0: Document<stored/uncompressed,indexed,tokenized<Content:This is
for document number 0> stored/uncompressed,indexed<DocID:0>>
DOC1: Document<stored/uncompressed,indexed,tokenized<Content:This is
for document number 1> stored/uncompressed,indexed<DocID:1>>
HITS: 2
DOC0: Document<stored/uncompressed,indexed,tokenized<Content:This is
for document number 0> stored/uncompressed,indexed<DocID:0>>
DOC1: Document<stored/uncompressed,indexed,tokenized<Content:This is
for document number 1> stored/uncompressed,indexed<DocID:1>>


See also:
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#isDeleted(int)

Otis


--- Scott Smith <ssmith@mainstreamdata.com> wrote:
> Suppose I do a search and get a hit list.  Before I access the hit
> list,
> my delete routine (running in another thread) comes along and deletes
> some documents.  What happens if I now try to access documents that
> have
> been deleted?
> 
>  
> 
> Scott 
> 
>  
> 
>  
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 11:50:38 2005
Return-Path: <java-user-return-14302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36337 invoked from network); 29 Apr 2005 11:50:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 11:50:38 -0000
Received: (qmail 29748 invoked by uid 500); 29 Apr 2005 11:51:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29645 invoked by uid 500); 29 Apr 2005 11:51:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29581 invoked by uid 99); 29 Apr 2005 11:51:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of gomesp@gmail.com designates 64.233.184.205 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.205)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 29 Apr 2005 04:51:30 -0700
Received: by wproxy.gmail.com with SMTP id 36so1087468wra
        for <java-user@lucene.apache.org>; Fri, 29 Apr 2005 04:50:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=KKICbyUhHk1cINzSuqMU8WJ6uplQRcLjqfEOkDXbqZefS0O3suExAbt/P3mxh6agx61d/EwEUXwsHP8jCPoOPReLQfPTY9gIa5nXjQ7B5fjCUfwkTLxeTXw/yjF/pm8/M6CXpFldAcs5cn00088gO1dNirrekm97rJdvdcq8grE=
Received: by 10.54.27.16 with SMTP id a16mr1675375wra;
        Fri, 29 Apr 2005 04:50:12 -0700 (PDT)
Received: by 10.54.104.18 with HTTP; Fri, 29 Apr 2005 04:50:12 -0700 (PDT)
Message-ID: <4f05ec8e050429045051341305@mail.gmail.com>
Date: Fri, 29 Apr 2005 13:50:12 +0200
From: Pablo Gomes Ludermir <gomesp@gmail.com>
Reply-To: Pablo Gomes Ludermir <gomesp@gmail.com>
To: java-user@lucene.apache.org
Subject: skip document header while indexing
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,

Is it possible to skip the first "xx" words while indexing a document?
For instance, on the code bellow, I would like to skip the "xx" first
words of "file" on the "CONTENTS_FIELD". Is that possible?

Document doc =3D new Document();
FileInputStream is =3D new FileInputStream(file);
Reader reader =3D new BufferedReader(new InputStreamReader(is));
doc.add(Field.Text(PATH_FIELD, artifactModel));
doc.add(Field.Text(CONTENTS_FIELD, reader, true));

Regards,
Pablo
--=20
Pablo Gomes Ludermir
gomesp@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 12:26:30 2005
Return-Path: <java-user-return-14303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45259 invoked from network); 29 Apr 2005 12:26:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 12:26:30 -0000
Received: (qmail 98117 invoked by uid 500); 29 Apr 2005 12:27:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98088 invoked by uid 500); 29 Apr 2005 12:27:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98070 invoked by uid 99); 29 Apr 2005 12:27:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 29 Apr 2005 05:27:31 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AB2DF13E2120; Fri, 29 Apr 2005 08:26:11 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 2702B13E211F
	for <java-user@lucene.apache.org>; Fri, 29 Apr 2005 08:26:03 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <4f05ec8e050429045051341305@mail.gmail.com>
References: <4f05ec8e050429045051341305@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <aff1cb0af5b39c5caf548e42cb9292a1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: skip document header while indexing
Date: Fri, 29 Apr 2005 08:26:01 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 29, 2005, at 7:50 AM, Pablo Gomes Ludermir wrote:

> Hello all,
>
> Is it possible to skip the first "xx" words while indexing a document?
> For instance, on the code bellow, I would like to skip the "xx" first
> words of "file" on the "CONTENTS_FIELD". Is that possible?
>
> Document doc = new Document();
> FileInputStream is = new FileInputStream(file);
> Reader reader = new BufferedReader(new InputStreamReader(is));
> doc.add(Field.Text(PATH_FIELD, artifactModel));
> doc.add(Field.Text(CONTENTS_FIELD, reader, true));

I believe your best bet will be to put in a custom Analyzer that does 
this.  It wouldn't be too hard to code a wrapper around an analyzer 
that did this.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 12:31:10 2005
Return-Path: <java-user-return-14304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46227 invoked from network); 29 Apr 2005 12:31:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 12:31:10 -0000
Received: (qmail 8195 invoked by uid 500); 29 Apr 2005 12:32:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8175 invoked by uid 500); 29 Apr 2005 12:32:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8149 invoked by uid 99); 29 Apr 2005 12:32:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of gomesp@gmail.com designates 64.233.184.203 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 29 Apr 2005 05:32:12 -0700
Received: by wproxy.gmail.com with SMTP id 36so1097385wra
        for <java-user@lucene.apache.org>; Fri, 29 Apr 2005 05:30:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=cmAIrCsG7EZG9/xU+ztSaG60OFiyGlm2RNSxvKE56Ky9cFeNzJcKRQ/pzstqN+G8Y3svjBWvSHjq1Cc7k9Qw+nsgSTk+Gi++dXkj6FDoYgCniYWMW9ukbLlFR+5Z3o5D9BkMBTwvBclTAGhIYOp7FpkZ64QMOgf5meRPTScXkoQ=
Received: by 10.54.124.18 with SMTP id w18mr1324132wrc;
        Fri, 29 Apr 2005 05:30:54 -0700 (PDT)
Received: by 10.54.104.18 with HTTP; Fri, 29 Apr 2005 05:30:54 -0700 (PDT)
Message-ID: <4f05ec8e0504290530688772a2@mail.gmail.com>
Date: Fri, 29 Apr 2005 14:30:54 +0200
From: Pablo Gomes Ludermir <gomesp@gmail.com>
Reply-To: Pablo Gomes Ludermir <gomesp@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: skip document header while indexing
In-Reply-To: <aff1cb0af5b39c5caf548e42cb9292a1@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4f05ec8e050429045051341305@mail.gmail.com>
	 <aff1cb0af5b39c5caf548e42cb9292a1@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Could you give me some pointers (example or website) to how I could do that=
?

On 4/29/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>=20
> On Apr 29, 2005, at 7:50 AM, Pablo Gomes Ludermir wrote:
>=20
> > Hello all,
> >
> > Is it possible to skip the first "xx" words while indexing a document?
> > For instance, on the code bellow, I would like to skip the "xx" first
> > words of "file" on the "CONTENTS_FIELD". Is that possible?
> >
> > Document doc =3D new Document();
> > FileInputStream is =3D new FileInputStream(file);
> > Reader reader =3D new BufferedReader(new InputStreamReader(is));
> > doc.add(Field.Text(PATH_FIELD, artifactModel));
> > doc.add(Field.Text(CONTENTS_FIELD, reader, true));
>=20
> I believe your best bet will be to put in a custom Analyzer that does
> this.  It wouldn't be too hard to code a wrapper around an analyzer
> that did this.
>=20
>        Erik
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
Pablo Gomes Ludermir
gomesp@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 13:51:46 2005
Return-Path: <java-user-return-14305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91931 invoked from network); 29 Apr 2005 13:51:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 13:51:46 -0000
Received: (qmail 87960 invoked by uid 500); 29 Apr 2005 13:52:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87933 invoked by uid 500); 29 Apr 2005 13:52:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87909 invoked by uid 99); 29 Apr 2005 13:52:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 29 Apr 2005 06:52:36 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5E0BC13E211F; Fri, 29 Apr 2005 09:51:17 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 87AE313E211F
	for <java-user@lucene.apache.org>; Fri, 29 Apr 2005 09:50:53 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <4f05ec8e0504290530688772a2@mail.gmail.com>
References: <4f05ec8e050429045051341305@mail.gmail.com> <aff1cb0af5b39c5caf548e42cb9292a1@ehatchersolutions.com> <4f05ec8e0504290530688772a2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <00e0d520c05cbcfb68e4fd6a84a56763@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: skip document header while indexing
Date: Fri, 29 Apr 2005 09:50:52 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Apr 29, 2005, at 8:30 AM, Pablo Gomes Ludermir wrote:
> Could you give me some pointers (example or website) to how I could do 
> that?

Lucene's own source code has several analyzers that are worth 
investigating.  We also include several in Lucene in Action that 
demonstrate additional features like incorporating synonym lookup with 
WordNet and metaphone (soundex-like) replacements.  
http://www.lucenebook.com to grab the source code download.

The trick would be to add a TokenFilter that dropped Tokens until N 
number of tokens had been dropped.

For an example, here's the Analyzer I wrote for the lucenebook.com site:

public class LiaAnalyzer extends Analyzer {
   private Set stopSet;
   boolean stem = true;

   public LiaAnalyzer() {
     stopSet = StopFilter.makeStopSet(StopAnalyzer.ENGLISH_STOP_WORDS);

     // just a few words that would not be queried on
     stopSet.add("isn");
     stopSet.add("xyz");
     stopSet.add("bcd");
     stopSet.add("blt");
     stopSet.add("dhb");
     stopSet.add("ttc");
     stopSet.add("you");
     stopSet.add("our");
   }

   public LiaAnalyzer(boolean stem) {
     this();
     this.stem = stem;
   }

   public TokenStream tokenStream(String fieldName, Reader reader) {
     TokenFilter filter = new DashSplitterFilter(
               new HyphenatedFilter(
                 new DashDashFilter(
                   new LiaTokenizer(reader))));

     filter = new LengthFilter(3, filter);
     filter = new StopFilter(filter, stopSet);

     if (stem) {
       filter = new SnowballFilter(filter, "English");
     }

     return filter;
   }
}

	Erik


>
> On 4/29/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>
>> On Apr 29, 2005, at 7:50 AM, Pablo Gomes Ludermir wrote:
>>
>>> Hello all,
>>>
>>> Is it possible to skip the first "xx" words while indexing a 
>>> document?
>>> For instance, on the code bellow, I would like to skip the "xx" first
>>> words of "file" on the "CONTENTS_FIELD". Is that possible?
>>>
>>> Document doc = new Document();
>>> FileInputStream is = new FileInputStream(file);
>>> Reader reader = new BufferedReader(new InputStreamReader(is));
>>> doc.add(Field.Text(PATH_FIELD, artifactModel));
>>> doc.add(Field.Text(CONTENTS_FIELD, reader, true));
>>
>> I believe your best bet will be to put in a custom Analyzer that does
>> this.  It wouldn't be too hard to code a wrapper around an analyzer
>> that did this.
>>
>>        Erik
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> -- 
> Pablo Gomes Ludermir
> gomesp@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 16:47:25 2005
Return-Path: <java-user-return-14306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42724 invoked from network); 29 Apr 2005 16:47:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 16:47:25 -0000
Received: (qmail 32103 invoked by uid 500); 29 Apr 2005 16:47:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31885 invoked by uid 500); 29 Apr 2005 16:47:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31808 invoked by uid 99); 29 Apr 2005 16:47:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ngwnameserver.tenfold.com (HELO slcgw1c.tenfold.com) (69.27.3.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 29 Apr 2005 09:47:54 -0700
Received: from no.name.available by slcgw1c.tenfold.com
          via smtpd (for hermes.apache.org [209.237.227.199]) with ESMTP; Fri, 29 Apr 2005 10:46:34 -0600
Received: from provo (provo [10.96.11.226]) by SLCMS6.tenfold.com 
    (Clearswift SMTPRS 5.0.9) with ESMTP id 
    <T7099fc57160a600aa1c74@SLCMS6.tenfold.com> for 
    <java-user@lucene.apache.org>; Fri, 29 Apr 2005 10:49:48 -0600
Received: from CORPDOM-MTA by provo with Novell_GroupWise; Fri, 29 Apr 2005 
    10:47:37 -0600
Message-Id: <s27210c9.006@provo>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Fri, 29 Apr 2005 10:47:08 -0600
From: "Paul Smith" <PSmith@tenfold.com>
To: <sven.duzont@keljob.com>,<java-user@lucene.apache.org>
Subject: Re: Re[2]: multi word synonym (was Hungarian notation analyzer and
    phrase queries)
Mime-Version: 1.0
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 500/1000/N

Indexing every multi-word synonym as a single token would introduce
spaces into the tokens. In that case searching for (java) would not
match "i love jsp and tomcat". I think that searching for (java*) would
match.

Rewriting the query is also problematic. If you search for (java
server), you don't have a rule to rewrite it to help you find jsp.

Paul

>>> sven.duzont@keljob.com 04/27/05 05:51AM >>>
Hello,

What about the solution to index every multi-word synonym as a single
token ?
Example :
Phrase to index : "i love jsp and tomcat"
Synonyms        : "jsp" = "java server pages" = "javaserver pages"
Tokens          : i love jsp               and tomcat
                         java server pages
                         javaserver pages
Position        : 0 1    2                 3   4

This solution will have the advantage to solve the phrase query
problems.

One will have also to rewrite queries before parsing it with the
QueryParser. for instance the query (tomcat jsp) will be rewrited as
(tomcat (jsp OR "java server pages" OR "javaserver pages"))

Any thoughts ?
Thanks in advance

---
 Sven





mercredi 13 avril 2005, 19:36:44, vous avez écrit:


CH> : Another approach would be to index this as:
CH> :
CH> : token:       use   power      query for advanced searches
CH> :                     powerquery
CH> : position:    0     1          2     3   4        5
CH> :
CH> : Then use phrase queries with slop=1, to permit a one-token gap
when
CH> : someone searches for "use powerquery for advanced searches".

CH> right, but in your example "1" is a magic number that works because
we are
CH> only dealing with "multi-word synonyms" of 2 words.  in general,
this
CH> approach requires that you pick some some N such that you are
garunteed no
CH> synonym contains more then N-1 words, and set the token positions
to...

CH>  token:       use   powerquery         for  advanced  searches
CH>                     power      query
CH>  position:    0     N          N+1     2N   3N        4N





CH> -Hoss


CH>
---------------------------------------------------------------------
CH> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
CH> For additional commands, e-mail: java-user-help@lucene.apache.org 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
For additional commands, e-mail: java-user-help@lucene.apache.org 


http://www.tenfold.com

**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the TenFold Postmaster (postmaster@tenfold.com).
**********************************************************************


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 18:29:47 2005
Return-Path: <java-user-return-14307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80315 invoked from network); 29 Apr 2005 18:29:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 18:29:47 -0000
Received: (qmail 93860 invoked by uid 500); 29 Apr 2005 18:30:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93741 invoked by uid 500); 29 Apr 2005 18:30:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93693 invoked by uid 99); 29 Apr 2005 18:30:39 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ip-64-7-7-100.dsl.nyc.megapath.net (HELO mail.monsur.com) (64.7.7.100)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 29 Apr 2005 11:30:38 -0700
Received: from chicago [64.7.7.99] by mail.monsur.com with ESMTP
  (SMTPD32-8.04) id AEF813290146; Fri, 29 Apr 2005 14:37:44 -0400
From: "Monsur Hossain" <monsur@monsur.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexSearcher hanging on to old index files in Windows
Date: Fri, 29 Apr 2005 14:29:12 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <20050429022159.15638.qmail@web31106.mail.mud.yahoo.com>
Thread-Index: AcVMY2uQdp2vhAYER9SzHdh8edIhNAAhHmwg
Message-Id: <200504291437562.SM01836@chicago>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Just tried this on my linux laptop - with IndexSearcher uncommented, I
> still get a single .cfs file.  It's one of those problems 
> where Windows
> doesn't let you erase the file.  I'd start this SortTest in the
> debugger and step through it until you find a spot where you see that
> some index file deletion fails.


Using the debugger and Process Explorer, I've been spending the morning
learning about file management in Lucene, and its fascinating stuff!

Sure enough, the IndexSearcher opens a handle to the first .cfs file.  After
the incremental index is updated and optimized, the IndexWriter tries to
delete the old .cfs file, but fails with the error:

"The process cannot access the file because it is being used by another
process." 

It then sticks the filename in Lucene's "deletable" file to be deleted at
some later time.  As a sanity check I used Process Explorer to delete the
file handle before running the incremental index, and it worked fine.

Since this is happening in both .NET and Java, I'm assuming its Windows
specific.  I don't know much about Windows low-level file management, but
I'm going to keep digging into this issue further.  Does anyone have any
expertise in this area, or know why this behavior is different in Windows
vs. Linux?

In the meantime, I think I can just ignore this issue, since the old .cfs
name is stored in the "deletable" file.  I'm guessing that at some later
point, once the IndexSearcher has been garbage collected, Lucene will load
that filename from "deletable", and then delete it.  I just worry that my
index will become too cluttered in the meantime (especially after an
optimization).

Thanks,
Monsur



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 18:50:45 2005
Return-Path: <java-user-return-14308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91070 invoked from network); 29 Apr 2005 18:50:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 18:50:45 -0000
Received: (qmail 64373 invoked by uid 500); 29 Apr 2005 18:51:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64303 invoked by uid 500); 29 Apr 2005 18:51:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64277 invoked by uid 99); 29 Apr 2005 18:51:54 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ip-64-7-7-100.dsl.nyc.megapath.net (HELO mail.monsur.com) (64.7.7.100)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 29 Apr 2005 11:51:53 -0700
Received: from chicago [64.7.7.99] by mail.monsur.com with ESMTP
  (SMTPD32-8.04) id A3F323B700C6; Fri, 29 Apr 2005 14:58:59 -0400
From: "Monsur Hossain" <monsur@monsur.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexSearcher hanging on to old index files in Windows
Date: Fri, 29 Apr 2005 14:50:27 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <20050429022159.15638.qmail@web31106.mail.mud.yahoo.com>
Thread-Index: AcVMY2uQdp2vhAYER9SzHdh8edIhNAAiK4cg
Message-Id: <200504291458781.SM01836@chicago>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> Just tried this on my linux laptop - with IndexSearcher uncommented, I
> still get a single .cfs file.

Hmmm, rereading this, I'm curious to know how/why this works in Linux.
Consider this scenario:

1) Create a new index

2) Create a new IndexSearcher pointing to that index.

3) Run an incremental index/optimize.  At this point, the new, optimized cfs
file is created, the old cfs file is deleted, and the segments file is
updated to point to the new cfs file.

4) Run a search using the IndexSearcher created in step 2.

At this point, how does the IndexSearcher know that the segments have been
updated and that it should try to read from the new cfs file?

Thanks,
Monsur 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 18:57:34 2005
Return-Path: <java-user-return-14309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92440 invoked from network); 29 Apr 2005 18:57:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 18:57:34 -0000
Received: (qmail 78243 invoked by uid 500); 29 Apr 2005 18:58:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78224 invoked by uid 500); 29 Apr 2005 18:58:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78209 invoked by uid 99); 29 Apr 2005 18:58:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 29 Apr 2005 11:58:46 -0700
Received: from [192.168.1.106] ([::ffff:66.92.12.207])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Fri, 29 Apr 2005 13:57:24 -0500
  id 00074216.42728394.00007638
Message-ID: <4272837D.3090305@allthingslocal.com>
Date: Fri, 29 Apr 2005 11:57:01 -0700
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Debian Thunderbird 1.0 (X11/20050116)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher hanging on to old index files in Windows
References: <200504291437562.SM01836@chicago>
In-Reply-To: <200504291437562.SM01836@chicago>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Monsur Hossain wrote:

>"The process cannot access the file because it is being used by another
>process." 
>
>It then sticks the filename in Lucene's "deletable" file to be deleted at
>some later time.  As a sanity check I used Process Explorer to delete the
>file handle before running the incremental index, and it worked fine.
>
>Since this is happening in both .NET and Java, I'm assuming its Windows
>specific.  I don't know much about Windows low-level file management, but
>I'm going to keep digging into this issue further.  Does anyone have any
>expertise in this area, or know why this behavior is different in Windows
>vs. Linux?
>  
>
Yes, Windows won't allow you to delete a file that is separately open. 
Linux will because it can disconnect the inode. The actual data blocks 
in the file won't be deleted until nobody is accessing them. Windows 
doesn't have that kind of garbage collection in the OS itself.

I'm confident you don't have to worry about that. As mentioned earlier, 
I ran a large scalability benchmark on Windows and everything did end up 
properly. I ran this test a little differently than letting the 
IndexSearcher get garbage collected. Instead, I explicitly closed the 
searcher (reader) and reopened it periodically. I used explicit 
synchronization involving counts of searches in process, such that when 
it can time to refresh the searcher, new searches would wait until the 
searcher was refreshed and the refresh operation would wait until the 
searches already in progress had completed. This did not seem to add any 
significant delays to search times even on a very large index.

The garbage collection approach should work as well.

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 19:02:47 2005
Return-Path: <java-user-return-14310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96215 invoked from network); 29 Apr 2005 19:02:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 19:02:47 -0000
Received: (qmail 94129 invoked by uid 500); 29 Apr 2005 19:03:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94101 invoked by uid 500); 29 Apr 2005 19:03:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94086 invoked by uid 99); 29 Apr 2005 19:03:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 29 Apr 2005 12:03:58 -0700
Received: from [192.168.1.106] ([::ffff:66.92.12.207])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Fri, 29 Apr 2005 14:02:36 -0500
  id 00074216.427284CC.000076FF
Message-ID: <427284B5.5040106@allthingslocal.com>
Date: Fri, 29 Apr 2005 12:02:13 -0700
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Debian Thunderbird 1.0 (X11/20050116)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher hanging on to old index files in Windows
References: <200504291458781.SM01836@chicago>
In-Reply-To: <200504291458781.SM01836@chicago>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Monsur Hossain wrote:

>>Just tried this on my linux laptop - with IndexSearcher uncommented, I
>>still get a single .cfs file.
>>    
>>
>
>Hmmm, rereading this, I'm curious to know how/why this works in Linux.
>Consider this scenario:
>
>1) Create a new index
>
>2) Create a new IndexSearcher pointing to that index.
>
>3) Run an incremental index/optimize.  At this point, the new, optimized cfs
>file is created, the old cfs file is deleted, and the segments file is
>updated to point to the new cfs file.
>
>4) Run a search using the IndexSearcher created in step 2.
>
>At this point, how does the IndexSearcher know that the segments have been
>updated and that it should try to read from the new cfs file?
>  
>
It doesn't.  It won't see the changes to the index until you close it 
and open a new one.  On Linux, the IndexSearcher can point to the old 
index although the index directory no longer does.

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 19:29:57 2005
Return-Path: <java-user-return-14311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18391 invoked from network); 29 Apr 2005 19:29:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 19:29:57 -0000
Received: (qmail 45668 invoked by uid 500); 29 Apr 2005 19:31:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45634 invoked by uid 500); 29 Apr 2005 19:31:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45618 invoked by uid 99); 29 Apr 2005 19:31:11 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ip-64-7-7-100.dsl.nyc.megapath.net (HELO mail.monsur.com) (64.7.7.100)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 29 Apr 2005 12:31:11 -0700
Received: from chicago [64.7.7.99] by mail.monsur.com with ESMTP
  (SMTPD32-8.04) id AD282A0C0132; Fri, 29 Apr 2005 15:38:16 -0400
From: "Monsur Hossain" <monsur@monsur.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexSearcher hanging on to old index files in Windows
Date: Fri, 29 Apr 2005 15:29:44 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <4272837D.3090305@allthingslocal.com>
Thread-Index: AcVM7nug9netyyEWRsuZ0GYON4VwUwAAZfOA
Message-Id: <200504291538249.SM01836@chicago>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> I ran this test a little differently than letting the 
> IndexSearcher get garbage collected. Instead, I explicitly closed the 
> searcher (reader) and reopened it periodically. 

Thanks Chuck, this is all really helpful.  That explicit close() is what
allows the files stored up in "deletable" to eventually be deleted.  I'm
wary of relying on the GC to clean up my work, so I think I'll use that
reference counting system you mentioned.  That way I can be guaranteed that
at some point, my IndexSearcher is in fact closed.  (In my tests, when I
left it up to the GC, these open file handles stuck around for hours).

Thanks,
Monsur



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 19:47:11 2005
Return-Path: <java-user-return-14312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22969 invoked from network); 29 Apr 2005 19:47:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 19:47:11 -0000
Received: (qmail 86613 invoked by uid 500); 29 Apr 2005 19:48:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86573 invoked by uid 500); 29 Apr 2005 19:48:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86557 invoked by uid 99); 29 Apr 2005 19:48:23 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mspmail5.stellent.com (HELO mspmail5.intranetsolutions.com) (12.40.184.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 29 Apr 2005 12:48:23 -0700
Received: from [10.10.20.20] ([10.10.20.20]) by mspmail5.intranetsolutions.com with Microsoft SMTPSVC(6.0.3790.211);
	 Fri, 29 Apr 2005 14:46:57 -0500
Subject: RE: IndexSearcher hanging on to old index files in Windows
From: Luke Francl <luke.francl@stellent.com>
To: java-user@lucene.apache.org
In-Reply-To: <200504291538249.SM01836@chicago>
References: <200504291538249.SM01836@chicago>
Content-Type: text/plain
Message-Id: <1114804010.13643.4.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Fri, 29 Apr 2005 14:46:50 -0500
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 29 Apr 2005 19:46:57.0622 (UTC) FILETIME=[33E3B760:01C54CF4]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Fri, 2005-04-29 at 14:29, Monsur Hossain wrote:

> Thanks Chuck, this is all really helpful.  That explicit close() is what
> allows the files stored up in "deletable" to eventually be deleted.  I'm
> wary of relying on the GC to clean up my work, so I think I'll use that
> reference counting system you mentioned.  That way I can be guaranteed that
> at some point, my IndexSearcher is in fact closed.  (In my tests, when I
> left it up to the GC, these open file handles stuck around for hours).

I really recommend against relying on the GC to clean up operating
system resources. It's just not reliable, especially in long-running VMs
with lots of memory (like an application server). 

This can leave file handles open indefinitely, which can lead to
problems in Windows with too many open files, or deletion, as you've
seen.

I also implemented a reference counting scheme for IndexSearchers and it
works well.

Regards,
Luke Francl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 19:59:11 2005
Return-Path: <java-user-return-14313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25813 invoked from network); 29 Apr 2005 19:59:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 19:59:11 -0000
Received: (qmail 8732 invoked by uid 500); 29 Apr 2005 20:00:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8700 invoked by uid 500); 29 Apr 2005 20:00:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8683 invoked by uid 99); 29 Apr 2005 20:00:24 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 29 Apr 2005 13:00:23 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 47EBFE483D;
	Fri, 29 Apr 2005 21:58:58 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 15B41E483B;
	Fri, 29 Apr 2005 21:58:58 +0200 (CEST)
In-Reply-To: <s27210c9.006@provo>
References: <s27210c9.006@provo>
Mime-Version: 1.0 (Apple Message framework v622)
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <2f6581af4050fda4e5009a2375e18714@activemath.org>
Content-Transfer-Encoding: quoted-printable
Cc: <sven.duzont@keljob.com>
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: Re[2]: multi word synonym (was Hungarian notation analyzer and phrase queries)
Date: Fri, 29 Apr 2005 21:58:54 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I knew there was a catch...

I do think, however, that the point is a delicate one which would=20
consideration: multi-word synonyms are quite common!

paul


Le 29 avr. 05, =E0 18:47, Paul Smith a =E9crit :

> Indexing every multi-word synonym as a single token would introduce
> spaces into the tokens. In that case searching for (java) would not
> match "i love jsp and tomcat". I think that searching for (java*) =
would
> match.
>
> Rewriting the query is also problematic. If you search for (java
> server), you don't have a rule to rewrite it to help you find jsp.
>
> Paul
>
>>>> sven.duzont@keljob.com 04/27/05 05:51AM >>>
> Hello,
>
> What about the solution to index every multi-word synonym as a single
> token ?
> Example :
> Phrase to index : "i love jsp and tomcat"
> Synonyms        : "jsp" =3D "java server pages" =3D "javaserver pages"
> Tokens          : i love jsp               and tomcat
>                          java server pages
>                          javaserver pages
> Position        : 0 1    2                 3   4
>
> This solution will have the advantage to solve the phrase query
> problems.
>
> One will have also to rewrite queries before parsing it with the
> QueryParser. for instance the query (tomcat jsp) will be rewrited as
> (tomcat (jsp OR "java server pages" OR "javaserver pages"))
>
> Any thoughts ?
> Thanks in advance
>
> ---
>  Sven
>
>
>
>
>
> mercredi 13 avril 2005, 19:36:44, vous avez =E9crit:
>
>
> CH> : Another approach would be to index this as:
> CH> :
> CH> : token:       use   power      query for advanced searches
> CH> :                     powerquery
> CH> : position:    0     1          2     3   4        5
> CH> :
> CH> : Then use phrase queries with slop=3D1, to permit a one-token gap
> when
> CH> : someone searches for "use powerquery for advanced searches".
>
> CH> right, but in your example "1" is a magic number that works =
because
> we are
> CH> only dealing with "multi-word synonyms" of 2 words.  in general,
> this
> CH> approach requires that you pick some some N such that you are
> garunteed no
> CH> synonym contains more then N-1 words, and set the token positions
> to...
>
> CH>  token:       use   powerquery         for  advanced  searches
> CH>                     power      query
> CH>  position:    0     N          N+1     2N   3N        4N
>
>
>
>
>
> CH> -Hoss
>
>
> CH>
> ---------------------------------------------------------------------
> CH> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> CH> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> http://www.tenfold.com
>
> **********************************************************************
> This email and any files transmitted with it are confidential and
> intended solely for the use of the individual or entity to whom they
> are addressed. If you have received this email in error please notify
> the TenFold Postmaster (postmaster@tenfold.com).
> **********************************************************************
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 29 20:19:58 2005
Return-Path: <java-user-return-14314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30723 invoked from network); 29 Apr 2005 20:19:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2005 20:19:57 -0000
Received: (qmail 47426 invoked by uid 500); 29 Apr 2005 20:21:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47388 invoked by uid 500); 29 Apr 2005 20:21:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47372 invoked by uid 99); 29 Apr 2005 20:21:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from fb.gardnerinc.com (HELO mail.gardnerinc.com) (12.109.121.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 29 Apr 2005 13:21:10 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: IndexSearcher hanging on to old index files in Windows
Date: Fri, 29 Apr 2005 16:19:43 -0400
Message-ID: <BBCA603A87EADC489C8FAFE5D2EDD3CE18C16E@gardner-exc.gardnerinc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IndexSearcher hanging on to old index files in Windows
Thread-Index: AcVMPx/5v8fvaqxzSMmrnBfwx5jt/gAuMqIQ
From: "Aaron Loucks" <aaronl@GardnerInc.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I had this exact same problem in a j2ee + windows environment. Even when
the index searcher was closed, it still seemed to hold onto the file. As
I recall I solved this by only caching the IndexSearcher long enough to
get the results I wanted to display. If the user would look at the next
page of results the query would be run again. This didn't affect
performance.

Aaron Loucks
Web Developer
Gardner, Inc.
3641 Interchange Road=20
Columbus, OH 43204=20
614.456.3492
-----Original Message-----
From: Monsur Hossain [mailto:monsur@monsur.com]=20
Sent: Thursday, April 28, 2005 6:11 PM
To: lucene-user@jakarta.apache.org
Subject: IndexSearcher hanging on to old index files in Windows


Hi all.  I'm running Lucene.NET in a Windows/ASP.NET environment.  We
are
searching a 300meg index in a web environment, where the IndexSearcher
is
cached.  Every 10-30 minutes, a separate process updates the index.
When
ASP.NET's cache detects a changed index, it drops the current
IndexSearcher
(which the Garbage collector takes care of in the future [1]) and
creates a
new one.=20

Now, while the index is being updated, the current IndexSearcher in
cache
holds a reference to the old index files.  Therefore, the IndexWriter
can't
delete them, and they sit around in the folder, continuing to grow.
Since
the IndexSearcher is left to the GC, there's no guarantee of when the
files
will be released. =20

I was considering such previously mentioned systems as reference
counting
[2] and swapping between two indexes [3].  But in both these cases, I
don't
think I'm ever guaranteed that an old IndexSearcher will have released
its
grasp on the old files in time to delete them. =20

Anyway, I'd like to hear if others are dealing with this issue.

Also, I'm curious, is this a Windows specific issue; I haven't seen any
mention of this on UNIX?

Thanks,
Monsur

[1] http://tinyurl.com/8qzo4
[2] http://tinyurl.com/8enzh
[3] I can't find a link to it, but it was suggested by George Aroush in
a
previous thread of mine.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 30 11:01:49 2005
Return-Path: <java-user-return-14315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15090 invoked from network); 30 Apr 2005 11:01:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Apr 2005 11:01:49 -0000
Received: (qmail 20744 invoked by uid 500); 30 Apr 2005 11:03:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19839 invoked by uid 500); 30 Apr 2005 11:03:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19825 invoked by uid 99); 30 Apr 2005 11:03:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: 217.11.48.103 is neither permitted nor denied by domain of fast.jack@gmx.net)
Received: from web03.manitu.net (HELO web03.manitu.net) (217.11.48.103)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 30 Apr 2005 04:03:09 -0700
Received: from localhost (p5489FFE8.dip.t-dialin.net [84.137.255.232])
	(authenticated)
	by web03.manitu.net (8.10.2-SOL3/8.10.2) with ESMTP id j3UB1ao20179
	for <java-user@lucene.apache.org>; Sat, 30 Apr 2005 13:01:36 +0200
Message-ID: <427365A0.8070002@gmx.net>
Date: Sat, 30 Apr 2005 13:01:52 +0200
From: Daniel Stephan <fast.jack@gmx.net>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing of virtual "made up" documents
References: <426DEBE1.1060309@gmx.net> <816ce3ffeb6daf26ceddfadb287fba6c@ehatchersolutions.com>
In-Reply-To: <816ce3ffeb6daf26ceddfadb287fba6c@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 0517-6, 30.04.2005), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik, thank you very much for your help!

I am not in the position to build the indexing (other features are in
line before that), yet, but I will try Lucene for it. Looks very good :)

What I did not ask the last time, because it just occurred to me, was: I
have in my application a metric of "fit" to know how much a term
compares to a document, and also how much the term compares to the whole
collection. Seems to be a good candidate for your "boost" value, then?

Cheers,
Daniel


Erik Hatcher schrieb:

>
> On Apr 26, 2005, at 3:21 AM, Daniel Stephan wrote:
>
>> lets see if somebody listens on this list :-D
>
>
> I doubt many are on this list, yet.  But your question is probably
> best asked on the java-user@lucene list rather than here.  I'll CC
> java-user this time to loop those folks in.
>
>> I wonder if the following is possible with Lucene.
>
>
> Yes, it is!
>
>> I would like to add documents to the index, which aren't real documents.
>
>
> That's pretty much how my use of Lucene works - there aren't real
> filesystem documents to index per se.
>
>> :-) Meaning: there is no text to parse and tokenize. What I have is a
>> number of features, some are simple words, some are combinations of
>> words. Those features classify an entity in my database.
>>
>> I have also an own parser/analyzer/tokenizer which is able to take a
>> text and extract those features from it. (Possibly a query.)
>>
>> So, I wanna do sth like (pseudo code):
>>
>>    Lucene.index(myEntity.getId, myEntity.getDescriptors)
>>
>> and then when a query was issued:
>>
>>    List entityIds = Lucene.query(myQuery.convertToLuceneQueryLanguage)
>>
>> I was looking at the source and couldn't find a possibility to get rid
>> of the analyzing stage to hand the features to Lucene myself.
>
>
> You have two good options here.... you can add each token individually
> as a Field.Keyword() with the same field name - these will not get
> analyzed.
>
>> One possibility would be to use an analyzer which only considers
>> whitespace as delimiter and set all descriptors as one string. This
>> feels suboptimal, because I have them as single tokens already and
>> concatenating them first, to let lucene tokenize them again,  should not
>> be necessary.
>
>
> You're right, it's not necessary.  The second option is to create a
> custom Analyzer that returns the tokens you've already established.
>
>> Also, the neighbour information isn't applicable in my scenario. It
>> seems you use placement of terms somehow. I don't have placement
>> information. Would that hurt Lucene?
>
>
> Placement of terms is used in phrase queries, but certainly isn't a
> necessity that you concern yourself with it.  You can simply emit
> tokens in whatever position you like (leaving the default position
> increment to 1 is what I'd recommend).
>
>> I am not sure how Lucenes uses the placement information, but in the
>> described case where I concatenate all my features to a
>> whitespace-delimited text, I fear that Lucene uses the placement of
>> features in this made-up text and comes to some wrong conclusions (after
>> all, the placement is arbitrary in the "made-up" text).
>
>
> What wrong conclusions do you fear here?  Again, the position
> information is used for phrase queries, but in your situation you
> wouldn't be using phrase queries so no need to concern yourself with
> the position stuff at all.
>
>> Also 2, I am not sure yet, how the converter would have to look like.
>> After all the terms in the query have to be of the same form as those in
>> the index, otherwise they wouldn't match. Can I inject my own analyzer
>> only for the query part, so that lucene hands it phrases and lets it
>> build features from those phrases?
>
>
> Sure - you can use any analyzer you like for query parsing.  It sounds
> like you aren't going to use QueryParser, though, so you may not need
> an analyzer at all.  You definitely have to ensure that the terms in
> the query match the terms you indexed in order to find documents.  How
> you do this is really up to you.
>
>> Any info is appreciated. I could maybe build my own simple index, the
>> analyzer is already there, but I would prefer to use a professional
>> solution with a good query language and some additional
>> nice-to-have-features.
>
>
> If you could give us something more concrete, we could help in more
> detail.  But from the scenario you've described, Lucene fits fine and
> in fact describes the way I use it in some cases.
>
>> May I use Lucene? :-)
>
>
> Yes, you may!
>
>     Erik
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 30 20:18:37 2005
Return-Path: <java-user-return-14316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25683 invoked from network); 30 Apr 2005 20:18:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Apr 2005 20:18:36 -0000
Received: (qmail 99764 invoked by uid 500); 30 Apr 2005 20:19:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99715 invoked by uid 500); 30 Apr 2005 20:19:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99700 invoked by uid 99); 30 Apr 2005 20:19:57 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from bobillot-6-82-225-66-75.fbx.proxad.net (HELO xmailserver.test) (82.225.66.75)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 30 Apr 2005 13:19:57 -0700
Received: from rmi-search-server (127.0.0.1:3956)
	by xmailserver.test with [XMail 1.20 ESMTP Server]
	id <S71> for <java-user@lucene.apache.org> from <sven.duzont@laposte.net>;
	Sat, 30 Apr 2005 22:18:29 +0200
Date: Sat, 30 Apr 2005 22:18:29 +0200
From: Sven Duzont <sven.duzont@laposte.net>
X-Mailer: The Bat! (v3.0.1.33) Professional
Reply-To: Sven Duzont <sven.duzont@laposte.net>
X-Priority: 3 (Normal)
Message-ID: <971145638.20050430221829@laposte.net>
To: Paul Libbrecht <java-user@lucene.apache.org>
Subject: Re[4]: multi word synonym (was Hungarian notation analyzer and phrase queries)
In-Reply-To: <2f6581af4050fda4e5009a2375e18714@activemath.org>
References: <s27210c9.006@provo>
 <2f6581af4050fda4e5009a2375e18714@activemath.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

 Thanks for your reply Paul.
 Yes, this was a delicate point.
 I gave up indexing  multi-words synonyms as single token for the
 reason you pointed.

 To handle phraseQueries, i change the positions of the Terms that
 follows the synonyms.
 For instance for the PhraseQuery "jsp and vb developer", with the
 synonyms "vb:virtual basic" and "jsp:java server pages" the positions
 of the terms will be :
-Terms    : jsp vb developer
-Position : 0   3  5

 Doing like this, the queries for "jsp server" will not match.

 I have pieces of code to give if some people are interested

 Thanks again.

Sven

Le vendredi 29 avril 2005 à 21:58:54, vous écriviez :

PL> I knew there was a catch...

PL> I do think, however, that the point is a delicate one which would 
PL> consideration: multi-word synonyms are quite common!

PL> paul



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


