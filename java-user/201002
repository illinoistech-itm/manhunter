From java-user-return-44791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 06:59:19 2010
Return-Path: <java-user-return-44791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18114 invoked from network); 1 Feb 2010 06:59:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 06:59:19 -0000
Received: (qmail 98521 invoked by uid 500); 1 Feb 2010 06:59:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98277 invoked by uid 500); 1 Feb 2010 06:59:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98261 invoked by uid 99); 1 Feb 2010 06:59:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 06:59:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.86.5.95] (HELO smtp108.mail.in.yahoo.com) (202.86.5.95)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 01 Feb 2010 06:59:02 +0000
Received: (qmail 41765 invoked from network); 1 Feb 2010 06:58:40 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Cc:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=cSM0zj3MVXEug/caUqiL9DOrDV9T7X13k96pWjyhDbY0tEpW5EzkPmHT1eVOvGRDfFaczKOj09og7JnV36LTbmyAcsLk4LL35ex7fTJVvfWd3Tiz1O8OMwoJ4ZU7vYNP2eoVFJg3Og4/bAw6SlcnqCo4CP0ji2+pQr7yLx2SndE=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp108.mail.in.yahoo.com with SMTP; 01 Feb 2010 12:28:39 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: QU4OED8VM1mJspRecAZeuyrjS4XKrYcw5cG8zHG8B5L7zGv8zmSrwBxgX3yAKcOYuFxSR9lLRNoj5PgsaJd5n3TIUfx.PJGyS5MlLg.fEy9pTP87bdpkPIlStnxb8hrlfSif.k_gUXtUG9WJfPA9nSrY0Wd6BAES0Eyo.XKjTQTW3Ua2frGlXB6AKuMqwnBL3upCQZxuDWAZzy8kPMYnSngAiQ6WGJwD44cMEyTN0CrgsiewBtgWCjsBssd5jrTT37q_gPnsXZu3oWc-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <BA33B3244BE0472DABC5F38EF9A19A1C@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Cc: <gsingers@apache.org>, <erickerickson@gmail.com>,
  <otis_gospodnetic@yahoo.com>
References: <C5567625C1594369817D0270E247E353@sv.us.sonicwall.com>
Subject: Re: Roadmap for next release
Date: Mon, 1 Feb 2010 12:28:41 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5843
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

Any reply to this thread?

----- Original Message -----=20
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Sent: Thursday, January 28, 2010 2:35 PM
Subject: Roadmap for next release


Hello all,

Please provide me the information related to road map for the next =
release. This information will be really helpful to plan our product =
road map for this year.=20

Is the below feature planned for this year.
-----------------------------------------
1. To reduce sorting memory consumption by caching / offload it to disk
2. If all records are not part of sorting, Is there any way to create =
the custom field cache array based on some filter criteria.

Regards
Ganesh =20
Send instant messages to your online friends =
http://in.messenger.yahoo.com=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 07:08:44 2010
Return-Path: <java-user-return-44792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19948 invoked from network); 1 Feb 2010 07:08:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 07:08:44 -0000
Received: (qmail 6852 invoked by uid 500); 1 Feb 2010 07:08:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6724 invoked by uid 500); 1 Feb 2010 07:08:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6714 invoked by uid 99); 1 Feb 2010 07:08:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 07:08:40 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [193.16.154.33] (HELO timmy.zylon.net) (193.16.154.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 01 Feb 2010 07:08:30 +0000
Received: (qmail 15313 invoked by uid 89); 1 Feb 2010 07:08:10 -0000
Received: from unknown (HELO ?192.168.1.112?) (dennis.hendriksen@kalooga.com@193.138.250.18)
  by 0 with SMTP; 1 Feb 2010 07:08:10 -0000
Subject: RE: combine query score with external score
From: Dennis Hendriksen <dennis.hendriksen@kalooga.com>
To: java-user@lucene.apache.org
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F36661E0D@suex07-mbx-03.ad.syr.edu>
References: <1264676463.2334.59.camel@kalooga-dennis>
	 <2D127F11DC79714E9B6A43AC9458147F36661E0D@suex07-mbx-03.ad.syr.edu>
Content-Type: text/plain; charset="UTF-8"
Organization: Kalooga
Date: Mon, 01 Feb 2010 08:08:10 +0100
Message-ID: <1265008090.2444.4.camel@kalooga-dennis>
Mime-Version: 1.0
X-Mailer: Evolution 2.28.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Steve,

Thank you for your suggestions. Payloads might indeed help me to
overcome the precision loss problem that I am experiencing right now. I
don't think it will help me with the combining of Lucene scores with
external scores however.

Is there anyone who has a suggestion how to deal with that?

Dennis 

On Thu, 2010-01-28 at 13:52 -0500, Steven A Rowe wrote:
> Hi Dennis,
> 
> You should check out payloads (arbitrary per-index-term byte[] arrays), which can be used to encode values which are then incorporated into documents' scores, by overriding Similarity.scorePayload():
> 
> <http://lucene.apache.org/java/3_0_0/api/core/org/apache/lucene/search/Similarity.html#scorePayload%28int,%20java.lang.String,%20int,%20int,%20byte[],%20int,%20int%29>
> 
> The Lucene in Action 2 MEAP has a nice introduction to using payloads to influence scoring, in section 6.5.
> 
> See also this (slightly out-of-date*) blog post "Getting Started with Payloads" by Grant Ingersoll at Lucid Imagination:
> 
> <http://www.lucidimagination.com/blog/2009/08/05/getting-started-with-payloads/>
> 
> *Note that since this blog post was written, BoostingTermQuery was renamed to PayloadTermQuery (in Lucene 2.9.0+ ; see http://issues.apache.org/jira/browse/LUCENE-1827 ; wow - this issue isn't mentioned in CHANGES.txt???):
> 
> <http://lucene.apache.org/java/3_0_0/api/core/org/apache/lucene/search/payloads/PayloadTermQuery.html>
> 
> Steve
> 
> On 01/28/2010 at 6:01 AM, Dennis Hendriksen wrote:
> > I'm struggling to create a performant query in Lucene 3.0.0 in which I
> > want to combine 'regular' scoring with scores derived from external
> > sources.
> > 
> > For each document a fixed set of scores is calculated in the range [0.0,
> > 1.0>. These scores represent the confidences that a document falls into
> > categories. So for example document #1 has a score of 0.3 for cat=boys,
> > 0.2 for cat=girls, 0.1 for cat=toys, 0.05 for cat=animals.
> > 
> > The 'regular' scoring is calculated using a BooleanQuery with TermQuerys
> > similar to: -type:H +(title:dna body:dna^1.5)
> > 
> > In the current naive approach I'm combining the scores as following: -
> > for each document store the three best categories in the following
> > fields:
> > name=cat1st value=boys fieldboost=0.3
> > name=cat2nd value=girls fieldboost=0.2
> > name=cat3rd value=toys fieldboost=0.1
> > Search-time use the following query if you're interested in 'girls':
> > -type:H +(title:dna body:dna^1.5) cat1st:girls cat2nd:girls cat3rd:girls 
> > or if you're interested in 'boys': 
> > -type:H +(title:dna body:dna^1.5) cat1st:boys cat2nd:boys cat3rd:boys
> > 
> > Disadvantages of the current approach:
> > - loss of precision encoding/decoding boosts (performance is important,
> > so this might be acceptable)
> > - using TermQuery for the cat fields doesn't make a lot of sense since
> > the external scores are multiplied by the idf of 'boys'/'girls' and
> > the querynorm
> > - the resulting score from the cat field is added to the other query
> > score instead of multiplied
> > 
> > Just to give you an idea: the index I'm using is growing in time and
> > contains about 50 million documents
> > 
> > Do you have an idea how I can improve my query and still keep high
> > performance? Or should I combine the scores in the Collector (but this
> > doesn't seem the right place to retrieve the category scores from the
> > index)? Is it possible to use a different float->byte encoder per field
> > to reduce the lack of precision?
> > 
> > Thanks for your time,
> > Dennis
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 07:26:00 2010
Return-Path: <java-user-return-44793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22554 invoked from network); 1 Feb 2010 07:26:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 07:26:00 -0000
Received: (qmail 16912 invoked by uid 500); 1 Feb 2010 07:25:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16863 invoked by uid 500); 1 Feb 2010 07:25:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16853 invoked by uid 99); 1 Feb 2010 07:25:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 07:25:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 07:25:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nbqf0-0006MO-IE
	for java-user@lucene.apache.org; Sun, 31 Jan 2010 23:25:26 -0800
Message-ID: <27400546.post@talk.nabble.com>
Date: Sun, 31 Jan 2010 23:25:26 -0800 (PST)
From: jchang <jchangkihatest@gmail.com>
To: java-user@lucene.apache.org
Subject: Can't get tokenization/stop works working
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jchangkihatest@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I want to be able to store a doc with a field with this as a substring:
  www.fubar.com
And then I want this document to get returned when I query on
  fubar or
  fubar.com

I assume what I should do is make www and com stop words, and make sure the
field is tokenized, so it wil break it up along the '.'

I thought  I should take a list of Enlisgh stop words, add in 'www' and com,
and then make sure the field is tokenized, which I did by using this
constructor:
new Field("name", "value",  Field.Store.YES, Field.Index.Analyzed).
I saw that Field.Index.Analyzed meant it would be tokenized.

It is not working.  Searching on fubar or fubar.com does not return it. 
Thanks for any help.
-- 
View this message in context: http://old.nabble.com/Can%27t-get-tokenization-stop-works-working-tp27400546p27400546.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 07:34:14 2010
Return-Path: <java-user-return-44794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23880 invoked from network); 1 Feb 2010 07:34:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 07:34:14 -0000
Received: (qmail 22918 invoked by uid 500); 1 Feb 2010 07:34:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22838 invoked by uid 500); 1 Feb 2010 07:34:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22827 invoked by uid 99); 1 Feb 2010 07:34:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 07:34:11 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 07:34:01 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 843CA45FA1D
	for <java-user@lucene.apache.org>; Mon,  1 Feb 2010 08:33:41 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id uT08GmlWaXT4 for <java-user@lucene.apache.org>;
	Mon,  1 Feb 2010 08:33:31 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 5E38145FA0E
	for <java-user@lucene.apache.org>; Mon,  1 Feb 2010 08:33:31 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
Subject: Apache Hadoop Get Together Berlin March 2010
Date: Mon, 1 Feb 2010 08:33:46 +0100
Message-ID: <000301caa310$e40668f0$ac133ad0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-index: AcqjEOJOlerSlWsAQ5i5RxiH+l956g==
Content-Language: de
x-cr-hashedpuzzle: A3cs BE42 B+Vb CoX4 C4xP DcwF E1Jp FTBe FYnS HM2p H/Y5 IoAQ JBgP J6Yz K760 MAyW;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{AAF23751-0292-47F5-9C4E-2BDFE1791CAB};dQB3AGUAQAB0AGgAZQB0AGEAcABoAGkALgBkAGUA;Mon, 01 Feb 2010 07:33:44 GMT;QQBwAGEAYwBoAGUAIABIAGEAZABvAG8AcAAgAEcAZQB0ACAAVABvAGcAZQB0AGgAZQByACAAQgBlAHIAbABpAG4AIABNAGEAcgBjAGgAIAAyADAAMQAwAA==
x-cr-puzzleid: {AAF23751-0292-47F5-9C4E-2BDFE1791CAB}
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

this is to announce the next Apache Hadoop Get Together Berlin:

                      When: March 10th, 5p.m.=20
                      Where: Newthinking store Berlin=20


Talks scheduled so far:

   * Bram Smeets (JTeam/ Amsterdam): Spatial Search.
   * Dragan Milosevic (zanox/ Berlin: Product Search and Reporting =
powered by=20
     Hadoop.
   * Bob Schulze (eCircle/ Munich): Database and Table Design Tips with =
HBase.


A big Thanks goes to the newthinking store for providing a room in the =
center of Berlin for us. Another big thanks goes to Nokia Gate 5 for =
sponsoring videos of the talks. Links to the videos will be posted after =
the event.


More information as well as registration is available on upcoming or =
xing:

 http://upcoming.yahoo.com/event/5280014
 https://www.xing.com/events/apache-hadoop-march-2010-459305


Looking forward to seeing you in Berlin,
Isabel Drost



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 09:20:44 2010
Return-Path: <java-user-return-44795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42601 invoked from network); 1 Feb 2010 09:20:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 09:20:44 -0000
Received: (qmail 3317 invoked by uid 500); 1 Feb 2010 09:20:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3257 invoked by uid 500); 1 Feb 2010 09:20:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3247 invoked by uid 99); 1 Feb 2010 09:20:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 09:20:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.209 as permitted sender)
Received: from [209.85.218.209] (HELO mail-bw0-f209.google.com) (209.85.218.209)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 09:20:33 +0000
Received: by bwz1 with SMTP id 1so2162854bwz.12
        for <java-user@lucene.apache.org>; Mon, 01 Feb 2010 01:20:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=fdY7u/4jsS3w9SpC8uERJbRqsRWlpzYEdX+/qZ2LVoE=;
        b=rELGte9PtX9cLx+dO0z3nT+B9Egn9jumlkt8VqSlBchkOHvNMb+Q6kZ54gUQ0NX1RM
         RFq7wQK+HKEbl+S9CkhUQReLVJLbORyTcNiFfzrUhREOFh2Fqa/Y8N5UxvPtJTJDlW6O
         FoNtoSEqC4VHYZ5s6onLH0xQaHVLqeuHCxs8c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=XDe4JbrsTlReNWghdO9f03d0JnuT8trdx2VAi9fImNE6m6Rj6WPNPYSXGBb9x+nFCy
         7xtEIfBDOXUWv77V6jgIp0SLLIllsxHeGS0ePl7Z5wKHrEPRHmjEFwjth0V8OxpFYjVd
         bZ7ijC45lqIQpQc0jt51MbhXIBL7LwUWvkrEM=
MIME-Version: 1.0
Received: by 10.204.156.28 with SMTP id u28mr3000531bkw.74.1265016013264; Mon, 
	01 Feb 2010 01:20:13 -0800 (PST)
In-Reply-To: <6CA9B075-90B5-411D-9CD8-B799F3DF77BC@koberg.com>
References: <6CA9B075-90B5-411D-9CD8-B799F3DF77BC@koberg.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 1 Feb 2010 09:19:53 +0000
Message-ID: <8c4e68611002010119k34299a9dgfc2d59b6301ac0a0@mail.gmail.com>
Subject: Re: best way to compare Documents
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

> ...
> Is there some convenient way to compare Lucene Documents?

Not that I know of.

> I want to check if I should update a document based on whether field values have changed and whether fields have been added or removed.
>
> Is it as simple as:
>
> newDoc.equals(oldDoc)

No!

> I don't need to create the newDoc first, so I could compare by field. I am creating Fields like so:
>
> new Field("modified", modified, Field.Store.YES, Field.Index.NOT_ANALYZED)
>
> So, would it be better to:
> * check oldDoc's fields count against the to be created documents desired fields count, and
> * loop through the fields and compare values

Yes.  Of course you won't be able to compare unstored fields.

> Is there a better way to create Fields and/or Documents for this type of thing?

Hash or CRC as Shashi suggested, but you'll still need compare old and
new hash values.


--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 09:28:45 2010
Return-Path: <java-user-return-44796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45786 invoked from network); 1 Feb 2010 09:28:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 09:28:45 -0000
Received: (qmail 11044 invoked by uid 500); 1 Feb 2010 09:28:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10967 invoked by uid 500); 1 Feb 2010 09:28:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10957 invoked by uid 99); 1 Feb 2010 09:28:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 09:28:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.209 as permitted sender)
Received: from [209.85.218.209] (HELO mail-bw0-f209.google.com) (209.85.218.209)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 09:28:34 +0000
Received: by bwz1 with SMTP id 1so2167192bwz.12
        for <java-user@lucene.apache.org>; Mon, 01 Feb 2010 01:28:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=YTsOZAJU29BczJnAj8onDccJ3evOnxD+OFxyOcqzFy4=;
        b=xb9tuC2XMaVyRCsZ4WnjiSCpxlNPXLSlMKrDJMW1PXdicFOa8xnkbRXfDvEl2Vo7I4
         6rmDlHEQfR6+iXa54QVHHOxzkFuuf5zw3WrMl3BJ297+CB8jNWjFom8MXrlIvZqYVJjN
         4uJGNCAAmfyusBLBUkOFOJ3FxxWN+29PAv2xE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=pq66nVlPYFpqA2M+uL0rttRIGVeesrygb/yF7zBt12Swi6lH2+oWUXgMDs0UjQuxEg
         lQNRJ8HwPllLNdWCgl9rMXfW77t5GMd6XosK3+MPz+x20jRMiaE3RETtuPZUIZguKl63
         Ie3Ycx+jT7TwwnzelumqXxWjr1Jog45TkQDdo=
MIME-Version: 1.0
Received: by 10.204.20.142 with SMTP id f14mr3013541bkb.64.1265016492849; Mon, 
	01 Feb 2010 01:28:12 -0800 (PST)
In-Reply-To: <27400546.post@talk.nabble.com>
References: <27400546.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 1 Feb 2010 09:27:52 +0000
Message-ID: <8c4e68611002010127u2645cb56v142a28af8671e9ce@mail.gmail.com>
Subject: Re: Can't get tokenization/stop works working
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

If you make com a stop word then you won't be able to search for it,
but a search for fubar should have worked.  Are you sure your analyzer
is doing what you want?  You don't tell us what analyzer you are
using.

Tips:
  use Luke to see what has been indexed
  read the FAQ entry
http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_no_hits_.2BAC=
8_incorrect_hits.3F


--
Ian.

On Mon, Feb 1, 2010 at 7:25 AM, jchang <jchangkihatest@gmail.com> wrote:
>
> I want to be able to store a doc with a field with this as a substring:
> =A0www.fubar.com
> And then I want this document to get returned when I query on
> =A0fubar or
> =A0fubar.com
>
> I assume what I should do is make www and com stop words, and make sure t=
he
> field is tokenized, so it wil break it up along the '.'
>
> I thought =A0I should take a list of Enlisgh stop words, add in 'www' and=
 com,
> and then make sure the field is tokenized, which I did by using this
> constructor:
> new Field("name", "value", =A0Field.Store.YES, Field.Index.Analyzed).
> I saw that Field.Index.Analyzed meant it would be tokenized.
>
> It is not working. =A0Searching on fubar or fubar.com does not return it.
> Thanks for any help.
> --
> View this message in context: http://old.nabble.com/Can%27t-get-tokenizat=
ion-stop-works-working-tp27400546p27400546.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 09:43:38 2010
Return-Path: <java-user-return-44797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54417 invoked from network); 1 Feb 2010 09:43:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 09:43:38 -0000
Received: (qmail 25901 invoked by uid 500); 1 Feb 2010 09:43:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25849 invoked by uid 500); 1 Feb 2010 09:43:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25839 invoked by uid 99); 1 Feb 2010 09:43:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 09:43:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.214 as permitted sender)
Received: from [209.85.218.214] (HELO mail-bw0-f214.google.com) (209.85.218.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 09:43:27 +0000
Received: by bwz6 with SMTP id 6so2924902bwz.11
        for <java-user@lucene.apache.org>; Mon, 01 Feb 2010 01:43:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=IJKji4PHPdjsS1SqgaW2rFsHmbAkp6m6WjDSJBoIlME=;
        b=UVTXeh7nojk19o2YOjZ2DzkWgkMgXXO79Xs3Cp/rHNzZZ8+LUivhiIw+uqSSwZ0M1P
         AX3JhWPzWAujOigL3RZCHAIUnmLkE0BhmngeLSVmZRgdal6CuQ/qCeQUS23vfaGcU2MN
         hFyRMpsEJpnmoK+ZhmLeA+xbi6ZUNG0ct515c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=xIzwoxrwjmGnw40aiZ0rq6vw1ixV5GTBxfJAT7owVpMJfqSVQx4czCxufEXZfPY36Y
         jwVrQDi1jvfHxiPdQlVuqDARMtMl2sekfDyQCZ9N6FmXTuZjx/9ca6n2F9HfKhDPN21D
         VlOU543uzq1MOMOssYNDH3CQ2pzy4D7FcUE6M=
MIME-Version: 1.0
Received: by 10.204.20.142 with SMTP id f14mr3024891bkb.64.1265017386140; Mon, 
	01 Feb 2010 01:43:06 -0800 (PST)
In-Reply-To: <1265008090.2444.4.camel@kalooga-dennis>
References: <1264676463.2334.59.camel@kalooga-dennis> <2D127F11DC79714E9B6A43AC9458147F36661E0D@suex07-mbx-03.ad.syr.edu> 
	<1265008090.2444.4.camel@kalooga-dennis>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 1 Feb 2010 09:42:46 +0000
Message-ID: <8c4e68611002010142l64826897p6fac9fc5e5d68e69@mail.gmail.com>
Subject: Re: combine query score with external score
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Have you considered the function query stuff?
oal.search.function.CustomScoreQuery and friends.
If you provide your own CustomScoreQuery implementation you can do
scoring however you like.


--
Ian.



On Mon, Feb 1, 2010 at 7:08 AM, Dennis Hendriksen
<dennis.hendriksen@kalooga.com> wrote:
> Hi Steve,
>
> Thank you for your suggestions. Payloads might indeed help me to
> overcome the precision loss problem that I am experiencing right now. I
> don't think it will help me with the combining of Lucene scores with
> external scores however.
>
> Is there anyone who has a suggestion how to deal with that?
>
> Dennis
>
> On Thu, 2010-01-28 at 13:52 -0500, Steven A Rowe wrote:
>> Hi Dennis,
>>
>> You should check out payloads (arbitrary per-index-term byte[] arrays), which can be used to encode values which are then incorporated into documents' scores, by overriding Similarity.scorePayload():
>>
>> <http://lucene.apache.org/java/3_0_0/api/core/org/apache/lucene/search/Similarity.html#scorePayload%28int,%20java.lang.String,%20int,%20int,%20byte[],%20int,%20int%29>
>>
>> The Lucene in Action 2 MEAP has a nice introduction to using payloads to influence scoring, in section 6.5.
>>
>> See also this (slightly out-of-date*) blog post "Getting Started with Payloads" by Grant Ingersoll at Lucid Imagination:
>>
>> <http://www.lucidimagination.com/blog/2009/08/05/getting-started-with-payloads/>
>>
>> *Note that since this blog post was written, BoostingTermQuery was renamed to PayloadTermQuery (in Lucene 2.9.0+ ; see http://issues.apache.org/jira/browse/LUCENE-1827 ; wow - this issue isn't mentioned in CHANGES.txt???):
>>
>> <http://lucene.apache.org/java/3_0_0/api/core/org/apache/lucene/search/payloads/PayloadTermQuery.html>
>>
>> Steve
>>
>> On 01/28/2010 at 6:01 AM, Dennis Hendriksen wrote:
>> > I'm struggling to create a performant query in Lucene 3.0.0 in which I
>> > want to combine 'regular' scoring with scores derived from external
>> > sources.
>> >
>> > For each document a fixed set of scores is calculated in the range [0.0,
>> > 1.0>. These scores represent the confidences that a document falls into
>> > categories. So for example document #1 has a score of 0.3 for cat=boys,
>> > 0.2 for cat=girls, 0.1 for cat=toys, 0.05 for cat=animals.
>> >
>> > The 'regular' scoring is calculated using a BooleanQuery with TermQuerys
>> > similar to: -type:H +(title:dna body:dna^1.5)
>> >
>> > In the current naive approach I'm combining the scores as following: -
>> > for each document store the three best categories in the following
>> > fields:
>> > name=cat1st value=boys fieldboost=0.3
>> > name=cat2nd value=girls fieldboost=0.2
>> > name=cat3rd value=toys fieldboost=0.1
>> > Search-time use the following query if you're interested in 'girls':
>> > -type:H +(title:dna body:dna^1.5) cat1st:girls cat2nd:girls cat3rd:girls
>> > or if you're interested in 'boys':
>> > -type:H +(title:dna body:dna^1.5) cat1st:boys cat2nd:boys cat3rd:boys
>> >
>> > Disadvantages of the current approach:
>> > - loss of precision encoding/decoding boosts (performance is important,
>> > so this might be acceptable)
>> > - using TermQuery for the cat fields doesn't make a lot of sense since
>> > the external scores are multiplied by the idf of 'boys'/'girls' and
>> > the querynorm
>> > - the resulting score from the cat field is added to the other query
>> > score instead of multiplied
>> >
>> > Just to give you an idea: the index I'm using is growing in time and
>> > contains about 50 million documents
>> >
>> > Do you have an idea how I can improve my query and still keep high
>> > performance? Or should I combine the scores in the Collector (but this
>> > doesn't seem the right place to retrieve the category scores from the
>> > index)? Is it possible to use a different float->byte encoder per field
>> > to reduce the lack of precision?
>> >
>> > Thanks for your time,
>> > Dennis
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 11:44:02 2010
Return-Path: <java-user-return-44798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91080 invoked from network); 1 Feb 2010 11:44:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 11:44:02 -0000
Received: (qmail 66403 invoked by uid 500); 1 Feb 2010 11:44:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66334 invoked by uid 500); 1 Feb 2010 11:44:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66324 invoked by uid 99); 1 Feb 2010 11:44:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 11:44:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 11:43:52 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nbugl-0002JQ-MS
	for java-user@lucene.apache.org; Mon, 01 Feb 2010 03:43:31 -0800
Message-ID: <27402945.post@talk.nabble.com>
Date: Mon, 1 Feb 2010 03:43:31 -0800 (PST)
From: Suraj Parida <parida.suraj@gmail.com>
To: java-user@lucene.apache.org
Subject: Searching compressed text using CompressionTools
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: parida.suraj@gmail.com


Hi,

I want to compress a text field (due to its large size and spaces), during
indexing.

I am unable to get the same also want to search. 


My code during compressing is as follows:
                                String value = "Some large text ...... ";
				byte[] valuesbyte = CompressionTools.compress(value.getBytes());
				final Field f = new Field(key, valuesbyte, Field.Store.YES);
				f.setOmitTermFreqAndPositions(true);
				f.setOmitNorms(true);
                                document.add(f);

Please tell me how to search and display this value.

Regards
Suraj
-- 
View this message in context: http://old.nabble.com/Searching-compressed-text-using-CompressionTools-tp27402945p27402945.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 11:46:47 2010
Return-Path: <java-user-return-44799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91495 invoked from network); 1 Feb 2010 11:46:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 11:46:47 -0000
Received: (qmail 69732 invoked by uid 500); 1 Feb 2010 11:46:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69650 invoked by uid 500); 1 Feb 2010 11:46:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69640 invoked by uid 99); 1 Feb 2010 11:46:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 11:46:45 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 11:46:34 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 8E8F045FA00
	for <java-user@lucene.apache.org>; Mon,  1 Feb 2010 12:46:14 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id wi4BRG0EKOne for <java-user@lucene.apache.org>;
	Mon,  1 Feb 2010 12:46:04 +0100 (CET)
Received: from VEGA (unknown [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 81A3D45F9CD
	for <java-user@lucene.apache.org>; Mon,  1 Feb 2010 12:46:04 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <27402945.post@talk.nabble.com>
In-Reply-To: <27402945.post@talk.nabble.com>
Subject: RE: Searching compressed text using CompressionTools
Date: Mon, 1 Feb 2010 12:46:19 +0100
Message-ID: <001d01caa334$2bae98d0$830bca70$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqjM99jdKqCA3ZQQYm07lqfEl1efAAAC+5w
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Compression is only used for *stored* fields. For indexing there is no =
compression available (how should that work). You must clearly =
differentiate between stored and indexed fields!

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Suraj Parida [mailto:parida.suraj@gmail.com]
> Sent: Monday, February 01, 2010 12:44 PM
> To: java-user@lucene.apache.org
> Subject: Searching compressed text using CompressionTools
>=20
>=20
> Hi,
>=20
> I want to compress a text field (due to its large size and spaces),
> during
> indexing.
>=20
> I am unable to get the same also want to search.
>=20
>=20
> My code during compressing is as follows:
>                                 String value =3D "Some large text =
......
> ";
> 				byte[] valuesbyte =3D
> CompressionTools.compress(value.getBytes());
> 				final Field f =3D new Field(key, valuesbyte,
> Field.Store.YES);
> 				f.setOmitTermFreqAndPositions(true);
> 				f.setOmitNorms(true);
>                                 document.add(f);
>=20
> Please tell me how to search and display this value.
>=20
> Regards
> Suraj
> --
> View this message in context: http://old.nabble.com/Searching-
> compressed-text-using-CompressionTools-tp27402945p27402945.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 11:51:14 2010
Return-Path: <java-user-return-44800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92125 invoked from network); 1 Feb 2010 11:51:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 11:51:14 -0000
Received: (qmail 72566 invoked by uid 500); 1 Feb 2010 11:51:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72493 invoked by uid 500); 1 Feb 2010 11:51:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72483 invoked by uid 99); 1 Feb 2010 11:51:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 11:51:11 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 11:51:00 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id C521145FA03
	for <java-user@lucene.apache.org>; Mon,  1 Feb 2010 12:50:40 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 1PLRCG1kMTyu for <java-user@lucene.apache.org>;
	Mon,  1 Feb 2010 12:50:30 +0100 (CET)
Received: from VEGA (unknown [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id D644C45FA00
	for <java-user@lucene.apache.org>; Mon,  1 Feb 2010 12:50:29 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <27402945.post@talk.nabble.com> <001d01caa334$2bae98d0$830bca70$@de>
In-Reply-To: <001d01caa334$2bae98d0$830bca70$@de>
Subject: RE: Searching compressed text using CompressionTools
Date: Mon, 1 Feb 2010 12:50:43 +0100
Message-ID: <001e01caa334$c9d3ac80$5d7b0580$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqjM99jdKqCA3ZQQYm07lqfEl1efAAAC+5wAAATEGA=
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

I forget:

To also index those fields, add it a second time with only index enabled =
and same name:

String value =3D "Some large text ...... ";
byte[] valuesbyte =3D CompressionTools.compress(value.getBytes());
Field f =3D new Field(key, valuesbyte, Field.Store.YES);
Document.add(field); // the stored one, so need for norms/TF suppress
F =3D new Field(key, value, Field.Store.NO, Field.Index.ANALYZED);
f.setOmitTermFreqAndPositions(true);
f.setOmitNorms(true);
document.add(f);

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Monday, February 01, 2010 12:46 PM
> To: java-user@lucene.apache.org
> Subject: RE: Searching compressed text using CompressionTools
>=20
> Compression is only used for *stored* fields. For indexing there is no
> compression available (how should that work). You must clearly
> differentiate between stored and indexed fields!
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
> > -----Original Message-----
> > From: Suraj Parida [mailto:parida.suraj@gmail.com]
> > Sent: Monday, February 01, 2010 12:44 PM
> > To: java-user@lucene.apache.org
> > Subject: Searching compressed text using CompressionTools
> >
> >
> > Hi,
> >
> > I want to compress a text field (due to its large size and spaces),
> > during
> > indexing.
> >
> > I am unable to get the same also want to search.
> >
> >
> > My code during compressing is as follows:
> >                                 String value =3D "Some large text
> ......
> > ";
> > 				byte[] valuesbyte =3D
> > CompressionTools.compress(value.getBytes());
> > 				final Field f =3D new Field(key, valuesbyte,
> > Field.Store.YES);
> > 				f.setOmitTermFreqAndPositions(true);
> > 				f.setOmitNorms(true);
> >                                 document.add(f);
> >
> > Please tell me how to search and display this value.
> >
> > Regards
> > Suraj
> > --
> > View this message in context: http://old.nabble.com/Searching-
> > compressed-text-using-CompressionTools-tp27402945p27402945.html
> > Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 12:04:47 2010
Return-Path: <java-user-return-44801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95953 invoked from network); 1 Feb 2010 12:04:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 12:04:47 -0000
Received: (qmail 90499 invoked by uid 500); 1 Feb 2010 12:04:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90422 invoked by uid 500); 1 Feb 2010 12:04:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90412 invoked by uid 99); 1 Feb 2010 12:04:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 12:04:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 12:04:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nbv0o-0004BF-9s
	for java-user@lucene.apache.org; Mon, 01 Feb 2010 04:04:14 -0800
Message-ID: <27403169.post@talk.nabble.com>
Date: Mon, 1 Feb 2010 04:04:14 -0800 (PST)
From: Suraj Parida <parida.suraj@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Searching compressed text using CompressionTools
In-Reply-To: <001d01caa334$2bae98d0$830bca70$@de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: parida.suraj@gmail.com
References: <27402945.post@talk.nabble.com> <001d01caa334$2bae98d0$830bca70$@de>
X-Virus-Checked: Checked by ClamAV on apache.org


Uwe,

Thanks for the reply.

I am confused with 
    document.add(new Field(key, value, Field.Store.COMPRESS,
Field.Index.ANALYZED));

  My requirement is also the same, but how can i do it in 3.0 ?
  i thought CompressionTools would be used for compression. 

Basically i need to compress the text which content of a document and there
are around 50,000 documents and still increasing in number.  If possible
please send a code or hint as an example. 

Regards,
Suraj
 

 
      
       
      
       
      
         
   



Uwe Schindler wrote:
> 
> Compression is only used for *stored* fields. For indexing there is no
> compression available (how should that work). You must clearly
> differentiate between stored and indexed fields!
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
>> -----Original Message-----
>> From: Suraj Parida [mailto:parida.suraj@gmail.com]
>> Sent: Monday, February 01, 2010 12:44 PM
>> To: java-user@lucene.apache.org
>> Subject: Searching compressed text using CompressionTools
>> 
>> 
>> Hi,
>> 
>> I want to compress a text field (due to its large size and spaces),
>> during
>> indexing.
>> 
>> I am unable to get the same also want to search.
>> 
>> 
>> My code during compressing is as follows:
>>                                 String value = "Some large text ......
>> ";
>> 				byte[] valuesbyte =
>> CompressionTools.compress(value.getBytes());
>> 				final Field f = new Field(key, valuesbyte,
>> Field.Store.YES);
>> 				f.setOmitTermFreqAndPositions(true);
>> 				f.setOmitNorms(true);
>>                                 document.add(f);
>> 
>> Please tell me how to search and display this value.
>> 
>> Regards
>> Suraj
>> --
>> View this message in context: http://old.nabble.com/Searching-
>> compressed-text-using-CompressionTools-tp27402945p27402945.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/Searching-compressed-text-using-CompressionTools-tp27402945p27403169.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 12:18:05 2010
Return-Path: <java-user-return-44802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99040 invoked from network); 1 Feb 2010 12:18:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 12:18:05 -0000
Received: (qmail 12062 invoked by uid 500); 1 Feb 2010 12:18:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12003 invoked by uid 500); 1 Feb 2010 12:18:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11993 invoked by uid 99); 1 Feb 2010 12:18:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 12:18:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 12:17:54 +0000
Received: by bwz22 with SMTP id 22so2906296bwz.5
        for <java-user@lucene.apache.org>; Mon, 01 Feb 2010 04:17:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=RgYtzi3WD0reJucQFguNyxkR+/dS56nWoBFqpA+DY/M=;
        b=RFsI3avtl9Mtwo2LxKYDbYfuco4Dd+ZAM8Fp78FAJc8dSeAt+FaAsH0XtFaNg9+/Ei
         dLFUknjWEntDRIDpGunA9NYtvPvwuGhYHCNs6yygxewqi7THI0kQ2gA8rf4tLgNx7XIN
         otW6qo775pnTSqVQAhULOuquaWQxbU9gpcetk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=R6m0KXDSq2cSJjeAlb612FE7xcOGpZN88ctm/DVfsOGHuJzWru0AukBqJQlJeFA1Ml
         zK7DJj3K+hGoaO36PMh4A4VoZ3cMxejbvqUz3K4K1pwl8LmTnYbHognqI1v9NmKpIMcs
         L3sr9iUN4dThoj9fwWOp/dcIkpBgOUR3eAG54=
MIME-Version: 1.0
Received: by 10.204.9.134 with SMTP id l6mr3051920bkl.83.1265026653125; Mon, 
	01 Feb 2010 04:17:33 -0800 (PST)
In-Reply-To: <27403169.post@talk.nabble.com>
References: <27402945.post@talk.nabble.com> <001d01caa334$2bae98d0$830bca70$@de> 
	<27403169.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 1 Feb 2010 12:17:13 +0000
Message-ID: <8c4e68611002010417pd7a6d36wb976c61c7bb176f3@mail.gmail.com>
Subject: Re: Searching compressed text using CompressionTools
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Please read Uwe's answers again.  I think he has already answered all
your questions.

The javadocs for 2.9.1 are very useful when upgrading to 3.0.0.  Read
the entry for Field.Store.COMPRESS.


--
Ian.



On Mon, Feb 1, 2010 at 12:04 PM, Suraj Parida <parida.suraj@gmail.com> wrot=
e:
>
> Uwe,
>
> Thanks for the reply.
>
> I am confused with
> =A0 =A0document.add(new Field(key, value, Field.Store.COMPRESS,
> Field.Index.ANALYZED));
>
> =A0My requirement is also the same, but how can i do it in 3.0 ?
> =A0i thought CompressionTools would be used for compression.
>
> Basically i need to compress the text which content of a document and the=
re
> are around 50,000 documents and still increasing in number. =A0If possibl=
e
> please send a code or hint as an example.
>
> Regards,
> Suraj
>
>
>
>
>
>
>
>
>
>
>
>
>
> Uwe Schindler wrote:
>>
>> Compression is only used for *stored* fields. For indexing there is no
>> compression available (how should that work). You must clearly
>> differentiate between stored and indexed fields!
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>> -----Original Message-----
>>> From: Suraj Parida [mailto:parida.suraj@gmail.com]
>>> Sent: Monday, February 01, 2010 12:44 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Searching compressed text using CompressionTools
>>>
>>>
>>> Hi,
>>>
>>> I want to compress a text field (due to its large size and spaces),
>>> during
>>> indexing.
>>>
>>> I am unable to get the same also want to search.
>>>
>>>
>>> My code during compressing is as follows:
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 String =
value =3D "Some large text ......
>>> ";
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0byte[] value=
sbyte =3D
>>> CompressionTools.compress(value.getBytes());
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0final Field =
f =3D new Field(key, valuesbyte,
>>> Field.Store.YES);
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0f.setOmitTer=
mFreqAndPositions(true);
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0f.setOmitNor=
ms(true);
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 documen=
t.add(f);
>>>
>>> Please tell me how to search and display this value.
>>>
>>> Regards
>>> Suraj
>>> --
>>> View this message in context: http://old.nabble.com/Searching-
>>> compressed-text-using-CompressionTools-tp27402945p27402945.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://old.nabble.com/Searching-compressed-=
text-using-CompressionTools-tp27402945p27403169.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 13:05:30 2010
Return-Path: <java-user-return-44803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17853 invoked from network); 1 Feb 2010 13:05:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 13:05:30 -0000
Received: (qmail 71396 invoked by uid 500); 1 Feb 2010 13:05:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71308 invoked by uid 500); 1 Feb 2010 13:05:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71298 invoked by uid 99); 1 Feb 2010 13:05:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 13:05:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of franz.see@gmail.com designates 209.85.216.186 as permitted sender)
Received: from [209.85.216.186] (HELO mail-px0-f186.google.com) (209.85.216.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 13:05:16 +0000
Received: by pxi16 with SMTP id 16so4685074pxi.29
        for <java-user@lucene.apache.org>; Mon, 01 Feb 2010 05:04:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=3G4tcfd/AYH99bxEONSAVkx6d/1KyXtIul8fIiHyC4M=;
        b=SZkhsc46dje9wm0pFNjeeJlvbTNuSjbQjtByeS7SMSy9ZxQNEqmL2xJ8EP+eaDvk3V
         sCq8nJmjp0MsUs83SaiJY+ADA82bDY0XNMkSpxpRTx7baFHgotKQbbX55dmr8IVzXKGO
         x7frTw+47tfjGZOuJwJvV/i5sQiZhH/mdG5no=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=wBs8BpRSZsYoxFQYzeO2Fa/MhOh4CXA/5qUkPe0sl1xdjIugc4CI8/9ZPoTTQJUJWh
         rEnQOP9gElv0C524dRHp3HojhzvIYSrIplMX0sc2STz8pf9KCxGYe5kVSuXkvKj5rVIe
         gdOHdxOpRvCQVSGSXx5TidWtidi0RGJrzc9O0=
MIME-Version: 1.0
Received: by 10.114.186.10 with SMTP id j10mr3044933waf.206.1265029494623; 
	Mon, 01 Feb 2010 05:04:54 -0800 (PST)
In-Reply-To: <8c4e68611001300958w380968b0sc3cdb12152fecb96@mail.gmail.com>
References: <5b254f71001281943q6d015c3ak6a7c43ce78670287@mail.gmail.com>
	 <8c4e68611001290242k4cb7d6e4v58048f0d7854228f@mail.gmail.com>
	 <5b254f71001291612jcce8f2fha8f9360297da3f42@mail.gmail.com>
	 <8c4e68611001300958w380968b0sc3cdb12152fecb96@mail.gmail.com>
Date: Mon, 1 Feb 2010 21:04:54 +0800
Message-ID: <5b254f71002010504v29f1d7a6qab1e4d583ac17cb0@mail.gmail.com>
Subject: Re: Modifying IDF
From: Franz Allan Valencia See <franz.see@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64cb0faa84d1a047e89a118
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64cb0faa84d1a047e89a118
Content-Type: text/plain; charset=ISO-8859-1

Hmm....

My Analyzer is a Dictionary-based Analyzer. And so, it only recognizes
tokens in its dictionary. Adding every url (or domain) is not a viable
solution.

So how could I include that to my analyzer? Lucene Filter? FilterReader?

Thanks,

-- 
Franz Allan Valencia See | Java Software Engineer
franz.see@gmail.com
LinkedIn: http://www.linkedin.com/in/franzsee
Twitter: http://www.twitter.com/franz_see

On Sun, Jan 31, 2010 at 1:58 AM, Ian Lea <ian.lea@gmail.com> wrote:

> Are you asking how to get lucene.apache.org out of
> http://lucene.apache.org/ or how to get apache.org out of
> lucene.apache.org?  The getHost() method of java.net.URL will give you
> the former. Or use a regexp.  I don't know an easy way to do the
> latter, but depending on your requirements you could split
> lucene.apache.org into tokens "lucene.apache.org" and "apache.org" and
> "org" and index all of them.  You probably want to use an analyzer
> that doesn't split on the . character.
>
>
> --
> Ian.
>
>
> On Sat, Jan 30, 2010 at 12:12 AM, Franz Allan Valencia See
> <franz.see@gmail.com> wrote:
> > How should I go about identifying the domain?
> >
> > Thanks,
> >
> > --
> > Franz Allan Valencia See | Java Software Engineer
> > franz.see@gmail.com
> > LinkedIn: http://www.linkedin.com/in/franzsee
> > Twitter: http://www.twitter.com/franz_see
> >
> > On Fri, Jan 29, 2010 at 6:42 PM, Ian Lea <ian.lea@gmail.com> wrote:
> >
> >> Instead of playing around with tf/idf, how about just indexing and
> >> searching the domain.
> >>
> >>
> >> --
> >> Ian.
> >>
> >>
> >> On Fri, Jan 29, 2010 at 3:43 AM, Franz Allan Valencia See
> >> <franz.see@gmail.com> wrote:
> >> > Good day,
> >> >
> >> > I am currently using lucene for my searches. And one of the problems
> that
> >> Im
> >> > facing is when keyword is a url. The tokens such as http, https, ://,
> >> index,
> >> > html, etc seems to be messing up with our search results. The focus
> was
> >> > supposed to be only on the url domain.
> >> >
> >> > The idea that I have is modify the idf so that rare terms get boosted
> >> much
> >> > more than the default settings in lucene. Since there are probably a
> lot
> >> of
> >> > http, https://, etc, then matches to these terms should be really
> really
> >> > low, while matches to the domain (which is rare) should be high.
> >> >
> >> > Would this work or am I totally misunderstanding lucene's tf/idf? :-)
> >> >
> >> > Thanks,
> >> >
> >> > --
> >> > Franz Allan Valencia See | Java Software Engineer
> >> > franz.see@gmail.com
> >> > LinkedIn: http://www.linkedin.com/in/franzsee
> >> > Twitter: http://www.twitter.com/franz_see
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64cb0faa84d1a047e89a118--

From java-user-return-44804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 13:17:59 2010
Return-Path: <java-user-return-44804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21702 invoked from network); 1 Feb 2010 13:17:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 13:17:59 -0000
Received: (qmail 97354 invoked by uid 500); 1 Feb 2010 13:17:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97273 invoked by uid 500); 1 Feb 2010 13:17:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97262 invoked by uid 99); 1 Feb 2010 13:17:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 13:17:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of volkanagun@gmail.com designates 209.85.220.219 as permitted sender)
Received: from [209.85.220.219] (HELO mail-fx0-f219.google.com) (209.85.220.219)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 13:17:47 +0000
Received: by fxm19 with SMTP id 19so103999fxm.5
        for <java-user@lucene.apache.org>; Mon, 01 Feb 2010 05:17:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=JvAoNxdYRrFv5/4xrMYudeYpwW+CVjvTCGZXNwv+pFg=;
        b=craMdRXVeY1caqlnbyc6fsGI+IK6mMI9cZh/Z4ApUmwKJETkoLrLm8StXjaOyR5ryQ
         qJ30NHSJvChr3oBd5WaH9Vp2WWLomAU5tABZaLr0ya7l223eGtZ82OwCKp/PMVlBfkYf
         zxlD0yPCe5V4/zglJ484xgMrcdAsjC3n5gjh8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=Lc5hZsxCO2RgzJg532pRmhycOp6fJnTnYe3E+xTm77MmFVpgvnyNos2MoS5wYL0SCL
         DlwiITAeSPNPi5rOosywPNuOxgqAcoFlQ/2GjUwVcLI8t1UqE3/rBrVf5kIU2ioqO7E6
         re1GO3h+H/ctpZr/w1LVjXDbRcscVsRvAxGaA=
Received: by 10.102.13.2 with SMTP id 2mr2742756mum.12.1265030246838;
        Mon, 01 Feb 2010 05:17:26 -0800 (PST)
Received: from ?192.168.2.2? ([88.236.67.12])
        by mx.google.com with ESMTPS id i5sm1244183mue.55.2010.02.01.05.17.25
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 01 Feb 2010 05:17:26 -0800 (PST)
Message-ID: <4B66D463.5080607@gmail.com>
Date: Mon, 01 Feb 2010 14:17:23 +0100
From: Hayri <volkanagun@gmail.com>
User-Agent: Thunderbird 2.0.0.23 (X11/20090817)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: How to use search index while indexing 
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I want to search an index and at the same time continue to my indexing. 
ParallelReader doesn't solve my problem.
It is obvious that I am not searching multiple indexes at the same time. 
How can I build a document based lock, more over
I don't want to open and close and index every time while writing. 
Merging new index with the old one seems really time
consuming and also I want to search the new index.

Is it possible? Please give hints...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 13:44:47 2010
Return-Path: <java-user-return-44805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35553 invoked from network); 1 Feb 2010 13:44:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 13:44:47 -0000
Received: (qmail 40904 invoked by uid 500); 1 Feb 2010 13:44:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40849 invoked by uid 500); 1 Feb 2010 13:44:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40839 invoked by uid 99); 1 Feb 2010 13:44:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 13:44:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of asifnawaz@hotmail.com designates 65.55.90.106 as permitted sender)
Received: from [65.55.90.106] (HELO snt0-omc2-s31.snt0.hotmail.com) (65.55.90.106)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 13:44:35 +0000
Received: from SNT122-W31 ([65.55.90.73]) by snt0-omc2-s31.snt0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 1 Feb 2010 05:44:13 -0800
Message-ID: <SNT122-W31BD4A3A2A564100488581B1580@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_aa6b686d-7e75-483f-adb4-2690a835efe6_"
X-Originating-IP: [119.153.142.211]
From: Asif Nawaz <asifnawaz@hotmail.com>
To: Java Lucene <java-user@lucene.apache.org>
Subject: Getting DF & IDF
Date: Mon, 1 Feb 2010 18:44:13 +0500
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 01 Feb 2010 13:44:13.0976 (UTC) FILETIME=[A41A2180:01CAA344]

--_aa6b686d-7e75-483f-adb4-2690a835efe6_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi=2C I am new to use lucene=2C I have a query string of multiple terms. i)=
 i want to return query string by removing stop words and stemmed version o=
f the query.=20
ii) second i want to get tf and idf of each term in a query=2C how to get i=
t?







Asif

 		 	   		 =20
_________________________________________________________________
Hotmail: Trusted email with powerful SPAM protection.
https://signup.live.com/signup.aspx?id=3D60969=

--_aa6b686d-7e75-483f-adb4-2690a835efe6_--

From java-user-return-44806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 14:33:19 2010
Return-Path: <java-user-return-44806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58190 invoked from network); 1 Feb 2010 14:33:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 14:33:19 -0000
Received: (qmail 219 invoked by uid 500); 1 Feb 2010 14:33:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 103 invoked by uid 500); 1 Feb 2010 14:33:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99992 invoked by uid 99); 1 Feb 2010 14:33:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 14:33:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 14:33:08 +0000
Received: by bwz22 with SMTP id 22so3013987bwz.5
        for <java-user@lucene.apache.org>; Mon, 01 Feb 2010 06:32:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=tLdp/ye1dirSTIXJF1y39BUL6hRlsWGGge7pf1vSgWQ=;
        b=p6qWUBsYgBisDT/oJEkmmBefADw3zyXzHQYPI4r4pMqgLqlYpyQvDBXsjs00y1tiYa
         SDcEF74gD5sKAAx8KkwNOFKw3h7KIPjJPYTYihdosPoDnM60jizRIT+NdTivHoYTlMUy
         WdgppZzqahsdMF0BeQ3d61f39zJvZtJJtCJDc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=BjHDV/EjqufA/owi6s9WLKi9GshewtTku7sBt1tfmjvnlnMrAAJ1x6O7xAA3CHzX8d
         JbhHY0OlxSc/6WQrADMX1u/lPUGgDsh1uFUekVqSO0FCB2YtxeUql27VZGxHJ4ZkwLTz
         ao8JMAg5JZ+Z0U+zZ9DcMwzU5c7i+uOGv5VKY=
MIME-Version: 1.0
Received: by 10.204.156.28 with SMTP id u28mr3295463bkw.74.1265034766818; Mon, 
	01 Feb 2010 06:32:46 -0800 (PST)
In-Reply-To: <4B66D463.5080607@gmail.com>
References: <4B66D463.5080607@gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 1 Feb 2010 14:32:26 +0000
Message-ID: <8c4e68611002010632x615fb993pab21fd24d1b8c460@mail.gmail.com>
Subject: Re: How to use search index while indexing
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Sounds like a job for near realtime search aka NRT.

Take a look at IndexWriter.getReader().

http://wiki.apache.org/lucene-java/NearRealtimeSearch
http://www.lucidimagination.com/blog/2009/04/10/real-time-search-with-lucene/

And more with the help of your favourite search engine.


--
Ian.

On Mon, Feb 1, 2010 at 1:17 PM, Hayri <volkanagun@gmail.com> wrote:
> Hi,
>
> I want to search an index and at the same time continue to my indexing.
> ParallelReader doesn't solve my problem.
> It is obvious that I am not searching multiple indexes at the same time. How
> can I build a document based lock, more over
> I don't want to open and close and index every time while writing. Merging
> new index with the old one seems really time
> consuming and also I want to search the new index.
>
> Is it possible? Please give hints...
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 16:03:52 2010
Return-Path: <java-user-return-44807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87234 invoked from network); 1 Feb 2010 16:03:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 16:03:52 -0000
Received: (qmail 60338 invoked by uid 500); 1 Feb 2010 16:03:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60261 invoked by uid 500); 1 Feb 2010 16:03:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60183 invoked by uid 99); 1 Feb 2010 16:03:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 16:03:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 16:03:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nbyk8-0000jM-9e
	for java-user@lucene.apache.org; Mon, 01 Feb 2010 08:03:16 -0800
Message-ID: <27406592.post@talk.nabble.com>
Date: Mon, 1 Feb 2010 08:03:16 -0800 (PST)
From: ctorresl <ctorresl@facinf.uho.edu.cu>
To: java-user@lucene.apache.org
Subject: Re: Search for more than one term
In-Reply-To: <3b23ce091001272051g2ef79c7fsde1e835955b1dcad@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ctorresl@facinf.uho.edu.cu
References: <27348933.post@talk.nabble.com> <359a92831001271815y532f5007le8b89845a5d7f8e1@mail.gmail.com> <3b23ce091001272051g2ef79c7fsde1e835955b1dcad@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hello Erik, Mark and Phan:

Thanks all of you for the reply, I'll check all of you have said.

greetings,

Carmen

 

-- 
View this message in context: http://old.nabble.com/Search-for-more-than-one-term-tp27348933p27406592.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 16:27:09 2010
Return-Path: <java-user-return-44808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92847 invoked from network); 1 Feb 2010 16:27:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 16:27:08 -0000
Received: (qmail 2246 invoked by uid 500); 1 Feb 2010 16:27:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2197 invoked by uid 500); 1 Feb 2010 16:27:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2187 invoked by uid 99); 1 Feb 2010 16:27:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 16:27:06 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of java8964@hotmail.com designates 65.55.111.102 as permitted sender)
Received: from [65.55.111.102] (HELO blu0-omc2-s27.blu0.hotmail.com) (65.55.111.102)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 16:26:56 +0000
Received: from BLU140-W13 ([65.55.111.72]) by blu0-omc2-s27.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 1 Feb 2010 08:26:35 -0800
Message-ID: <BLU140-W13CC0DF0E167ED77FB01FBD0580@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_24ff9ab2-dfbf-4dba-a80b-e414072b3f83_"
X-Originating-IP: [192.100.104.17]
From: java8964 java8964 <java8964@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: During the wild card search, will lucene 2.9.0 to convert the
 search string to lower case?
Date: Mon, 1 Feb 2010 11:26:35 -0500
Importance: Normal
In-Reply-To: <27406592.post@talk.nabble.com>
References: <27348933.post@talk.nabble.com>
 <359a92831001271815y532f5007le8b89845a5d7f8e1@mail.gmail.com>
 <3b23ce091001272051g2ef79c7fsde1e835955b1dcad@mail.gmail.com>,<27406592.post@talk.nabble.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 01 Feb 2010 16:26:35.0248 (UTC) FILETIME=[525A4700:01CAA35B]
X-Virus-Checked: Checked by ClamAV on apache.org

--_24ff9ab2-dfbf-4dba-a80b-e414072b3f83_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


I noticed a strange result from the following test case. For wildcard searc=
h=2C my understanding is that lucene will NOT use any analyzer on the query=
 string. But as the following simple code to show=2C it looks like that luc=
ene will lower case the search query in the wildcard search. Why? If not=2C=
 why the following test case show the search hits as one for lower case wil=
dcard search=2C but not for the upper case data? My original data is NOT an=
alyzed=2C so they should be stored as the original data in the index segmen=
t=2C right?

Lucene version: 2.9.0

JDK version: JDK 1.6.0_17


public class IndexTest1 {
    public static void main(String[] args) {
        try {
            Directory directory =3D new RAMDirectory()=3B
            IndexWriter writer =3D new IndexWriter(directory=2C new Standar=
dAnalyzer(Version.LUCENE_CURRENT)=2C IndexWriter.MaxFieldLength.UNLIMITED)=
=3B
            Document doc =3D new Document()=3B
            doc.add(new Field("title"=2C "BBB CCC"=2C Field.Store.YES=2C Fi=
eld.Index.NOT_ANALYZED))=3B
            writer.addDocument(doc)=3B
            doc =3D new Document()=3B
            doc.add(new Field("title"=2C "ddd eee"=2C Field.Store.YES=2C Fi=
eld.Index.NOT_ANALYZED))=3B
            writer.addDocument(doc)=3B

            writer.close()=3B

            IndexSearcher searcher =3D new IndexSearcher(directory=2C true)=
=3B
            PerFieldAnalyzerWrapper wrapper =3D new PerFieldAnalyzerWrapper=
(new StandardAnalyzer(Version.LUCENE_CURRENT))=3B
            wrapper.addAnalyzer("title"=2C new KeywordAnalyzer())=3B
            Query query =3D new QueryParser("title"=2C
                    wrapper).parse("title:BBB*")=3B
            System.out.println("hits of title =3D " + searcher.search(query=
=2C 100).totalHits)=3B
            query =3D new QueryParser("title"=2C
                    wrapper).parse("title:ddd*")=3B
            System.out.println("hits of title =3D " + searcher.search(query=
=2C 100).totalHits)=3B
            searcher.close()=3B
        } catch (Exception e) {
            System.out.println(e)=3B
        }
    }
}

The output:
hits of title =3D 0
hits of title =3D 1

 		 	   		 =20
_________________________________________________________________
Hotmail: Trusted email with powerful SPAM protection.
http://clk.atdmt.com/GBL/go/201469227/direct/01/=

--_24ff9ab2-dfbf-4dba-a80b-e414072b3f83_--

From java-user-return-44809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 16:41:39 2010
Return-Path: <java-user-return-44809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97961 invoked from network); 1 Feb 2010 16:41:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 16:41:39 -0000
Received: (qmail 35161 invoked by uid 500); 1 Feb 2010 16:41:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35086 invoked by uid 500); 1 Feb 2010 16:41:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35076 invoked by uid 99); 1 Feb 2010 16:41:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 16:41:36 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 16:41:27 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id D304745FA1C
	for <java-user@lucene.apache.org>; Mon,  1 Feb 2010 17:41:04 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id LRQ2uolzNASY for <java-user@lucene.apache.org>;
	Mon,  1 Feb 2010 17:40:53 +0100 (CET)
Received: from VEGA (unknown [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 51A8C45FA18
	for <java-user@lucene.apache.org>; Mon,  1 Feb 2010 17:40:53 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <27348933.post@talk.nabble.com> <359a92831001271815y532f5007le8b89845a5d7f8e1@mail.gmail.com> <3b23ce091001272051g2ef79c7fsde1e835955b1dcad@mail.gmail.com>,<27406592.post@talk.nabble.com> <BLU140-W13CC0DF0E167ED77FB01FBD0580@phx.gbl>
In-Reply-To: <BLU140-W13CC0DF0E167ED77FB01FBD0580@phx.gbl>
Subject: RE: During the wild card search, will lucene 2.9.0 to convert the search string to lower case?
Date: Mon, 1 Feb 2010 17:41:08 +0100
Message-ID: <000c01caa35d$5b071fc0$11155f40$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqjW22f/h1Uj1Z7QI67PqyBv1BkjwAAdHtg
Content-Language: de

Only query parser does the lower casing. For such a special case, I =
would suggest to use a PrefixQuery or WildcardQuery directly and not use =
query parser.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: java8964 java8964 [mailto:java8964@hotmail.com]
> Sent: Monday, February 01, 2010 5:27 PM
> To: java-user@lucene.apache.org
> Subject: During the wild card search, will lucene 2.9.0 to convert the
> search string to lower case?
>=20
>=20
> I noticed a strange result from the following test case. For wildcard
> search, my understanding is that lucene will NOT use any analyzer on
> the query string. But as the following simple code to show, it looks
> like that lucene will lower case the search query in the wildcard
> search. Why? If not, why the following test case show the search hits
> as one for lower case wildcard search, but not for the upper case =
data?
> My original data is NOT analyzed, so they should be stored as the
> original data in the index segment, right?
>=20
> Lucene version: 2.9.0
>=20
> JDK version: JDK 1.6.0_17
>=20
>=20
> public class IndexTest1 {
>     public static void main(String[] args) {
>         try {
>             Directory directory =3D new RAMDirectory();
>             IndexWriter writer =3D new IndexWriter(directory, new
> StandardAnalyzer(Version.LUCENE_CURRENT),
> IndexWriter.MaxFieldLength.UNLIMITED);
>             Document doc =3D new Document();
>             doc.add(new Field("title", "BBB CCC", Field.Store.YES,
> Field.Index.NOT_ANALYZED));
>             writer.addDocument(doc);
>             doc =3D new Document();
>             doc.add(new Field("title", "ddd eee", Field.Store.YES,
> Field.Index.NOT_ANALYZED));
>             writer.addDocument(doc);
>=20
>             writer.close();
>=20
>             IndexSearcher searcher =3D new IndexSearcher(directory,
> true);
>             PerFieldAnalyzerWrapper wrapper =3D new
> PerFieldAnalyzerWrapper(new StandardAnalyzer(Version.LUCENE_CURRENT));
>             wrapper.addAnalyzer("title", new KeywordAnalyzer());
>             Query query =3D new QueryParser("title",
>                     wrapper).parse("title:BBB*");
>             System.out.println("hits of title =3D " +
> searcher.search(query, 100).totalHits);
>             query =3D new QueryParser("title",
>                     wrapper).parse("title:ddd*");
>             System.out.println("hits of title =3D " +
> searcher.search(query, 100).totalHits);
>             searcher.close();
>         } catch (Exception e) {
>             System.out.println(e);
>         }
>     }
> }
>=20
> The output:
> hits of title =3D 0
> hits of title =3D 1
>=20
>=20
> _________________________________________________________________
> Hotmail: Trusted email with powerful SPAM protection.
> http://clk.atdmt.com/GBL/go/201469227/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 18:11:34 2010
Return-Path: <java-user-return-44810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36524 invoked from network); 1 Feb 2010 18:11:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 18:11:34 -0000
Received: (qmail 59706 invoked by uid 500); 1 Feb 2010 18:11:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59624 invoked by uid 500); 1 Feb 2010 18:11:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59597 invoked by uid 99); 1 Feb 2010 18:11:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 18:11:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of java8964@hotmail.com designates 65.55.111.113 as permitted sender)
Received: from [65.55.111.113] (HELO blu0-omc2-s38.blu0.hotmail.com) (65.55.111.113)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 18:11:17 +0000
Received: from BLU140-W37 ([65.55.111.72]) by blu0-omc2-s38.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 1 Feb 2010 10:10:55 -0800
Message-ID: <BLU140-W379ACA1D14F772E0B5CC6ED0580@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_68d7c134-9ccf-4957-86d0-5091e0e3426f_"
X-Originating-IP: [192.100.104.17]
From: java8964 java8964 <java8964@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: During the wild card search, will lucene 2.9.0 to convert the
 search string to lower case?
Date: Mon, 1 Feb 2010 13:10:55 -0500
Importance: Normal
In-Reply-To: <000c01caa35d$5b071fc0$11155f40$@de>
References: <27348933.post@talk.nabble.com>
 <359a92831001271815y532f5007le8b89845a5d7f8e1@mail.gmail.com>
 <3b23ce091001272051g2ef79c7fsde1e835955b1dcad@mail.gmail.com>,<27406592.post@talk.nabble.com>
 <BLU140-W13CC0DF0E167ED77FB01FBD0580@phx.gbl>,<000c01caa35d$5b071fc0$11155f40$@de>
MIME-Version: 1.0
X-OriginalArrivalTime: 01 Feb 2010 18:10:55.0723 (UTC) FILETIME=[E5E2F3B0:01CAA369]
X-Virus-Checked: Checked by ClamAV on apache.org

--_68d7c134-9ccf-4957-86d0-5091e0e3426f_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


I would like to confirm your reply. You mean that the query parse will lowe=
r casing. In fact=2C it looks like that it only does this for wild card que=
ry=2C right?

For the term query=2C it didn't. As proved by if you change the line to:

            Query query =3D new QueryParser("title"=2C wrapper).parse("titl=
e:\"BBB CCC\"")=3B

You will get 1 hits back. So in this case=2C the query parser class did in =
different way for term query and wild card query.

We have to use the query parse in this case=2C but we have our own Query pa=
rser class extends from the lucene query parser class. Anything we can do t=
o about it?

Will lucense's query parser class be fixed for the above inconsistent imple=
mentation?

Thanks


> From: uwe@thetaphi.de
> To: java-user@lucene.apache.org
> Subject: RE: During the wild card search=2C will lucene 2.9.0 to convert =
the search string to lower case?
> Date: Mon=2C 1 Feb 2010 17:41:08 +0100
>=20
> Only query parser does the lower casing. For such a special case=2C I wou=
ld suggest to use a PrefixQuery or WildcardQuery directly and not use query=
 parser.
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63=2C D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
> > -----Original Message-----
> > From: java8964 java8964 [mailto:java8964@hotmail.com]
> > Sent: Monday=2C February 01=2C 2010 5:27 PM
> > To: java-user@lucene.apache.org
> > Subject: During the wild card search=2C will lucene 2.9.0 to convert th=
e
> > search string to lower case?
> >=20
> >=20
> > I noticed a strange result from the following test case. For wildcard
> > search=2C my understanding is that lucene will NOT use any analyzer on
> > the query string. But as the following simple code to show=2C it looks
> > like that lucene will lower case the search query in the wildcard
> > search. Why? If not=2C why the following test case show the search hits
> > as one for lower case wildcard search=2C but not for the upper case dat=
a?
> > My original data is NOT analyzed=2C so they should be stored as the
> > original data in the index segment=2C right?
> >=20
> > Lucene version: 2.9.0
> >=20
> > JDK version: JDK 1.6.0_17
> >=20
> >=20
> > public class IndexTest1 {
> >     public static void main(String[] args) {
> >         try {
> >             Directory directory =3D new RAMDirectory()=3B
> >             IndexWriter writer =3D new IndexWriter(directory=2C new
> > StandardAnalyzer(Version.LUCENE_CURRENT)=2C
> > IndexWriter.MaxFieldLength.UNLIMITED)=3B
> >             Document doc =3D new Document()=3B
> >             doc.add(new Field("title"=2C "BBB CCC"=2C Field.Store.YES=
=2C
> > Field.Index.NOT_ANALYZED))=3B
> >             writer.addDocument(doc)=3B
> >             doc =3D new Document()=3B
> >             doc.add(new Field("title"=2C "ddd eee"=2C Field.Store.YES=
=2C
> > Field.Index.NOT_ANALYZED))=3B
> >             writer.addDocument(doc)=3B
> >=20
> >             writer.close()=3B
> >=20
> >             IndexSearcher searcher =3D new IndexSearcher(directory=2C
> > true)=3B
> >             PerFieldAnalyzerWrapper wrapper =3D new
> > PerFieldAnalyzerWrapper(new StandardAnalyzer(Version.LUCENE_CURRENT))=
=3B
> >             wrapper.addAnalyzer("title"=2C new KeywordAnalyzer())=3B
> >             Query query =3D new QueryParser("title"=2C
> >                     wrapper).parse("title:BBB*")=3B
> >             System.out.println("hits of title =3D " +
> > searcher.search(query=2C 100).totalHits)=3B
> >             query =3D new QueryParser("title"=2C
> >                     wrapper).parse("title:ddd*")=3B
> >             System.out.println("hits of title =3D " +
> > searcher.search(query=2C 100).totalHits)=3B
> >             searcher.close()=3B
> >         } catch (Exception e) {
> >             System.out.println(e)=3B
> >         }
> >     }
> > }
> >=20
> > The output:
> > hits of title =3D 0
> > hits of title =3D 1
> >=20
> >=20
> > _________________________________________________________________
> > Hotmail: Trusted email with powerful SPAM protection.
> > http://clk.atdmt.com/GBL/go/201469227/direct/01/
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands=2C e-mail: java-user-help@lucene.apache.org
>=20
 		 	   		 =20
_________________________________________________________________
Hotmail: Powerful Free email with security by Microsoft.
http://clk.atdmt.com/GBL/go/201469230/direct/01/=

--_68d7c134-9ccf-4957-86d0-5091e0e3426f_--

From java-user-return-44811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 18:34:03 2010
Return-Path: <java-user-return-44811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53134 invoked from network); 1 Feb 2010 18:34:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 18:34:03 -0000
Received: (qmail 16138 invoked by uid 500); 1 Feb 2010 18:34:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16059 invoked by uid 500); 1 Feb 2010 18:34:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16049 invoked by uid 99); 1 Feb 2010 18:34:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 18:34:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erik.hatcher@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 18:33:50 +0000
Received: by qw-out-2122.google.com with SMTP id 3so479595qwe.53
        for <java-user@lucene.apache.org>; Mon, 01 Feb 2010 10:33:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=j+E23ltuoAnzoOvlsCZQaYDdFapfgrvcYuGNepc1v8o=;
        b=FXp7NFPjJwVV/Sy+FaGH7zAbZ9oob4wpsIwWxKp5HFB6TnLdyUSkWi2PgZrOSdsgav
         vISnqGP+P569A6i2jlGgjmRmkCtvSOm3W5ubDZU2YNlfWa3hluzIUPmcRunV0qqNKIAK
         mASKgo7xYqv7Rand/k52SjvsT3kmvyJ9My7Ds=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=qNz1GmObuvEWkC+qtBantLNOBns9irpRU7A/CrSibacslY9O2r9w9oMwXt8u5RIx75
         ZZahR+YXqYpTf/MvgeLiwqdLyb/XpPr91HkJXLBtg41sp55+bxez2DGl0XNMRwMemldy
         4TAwQSt3swODph9P4P3GJCqlR4Azn2wY/Dpjc=
Received: by 10.224.66.30 with SMTP id l30mr2216913qai.258.1265049208876;
        Mon, 01 Feb 2010 10:33:28 -0800 (PST)
Received: from ?10.0.1.69? (va-76-1-149-249.dhcp.embarqhsd.net [76.1.149.249])
        by mx.google.com with ESMTPS id 21sm3964541qyk.8.2010.02.01.10.33.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 01 Feb 2010 10:33:27 -0800 (PST)
Message-Id: <2AABA799-EB23-4383-A1D2-929C58353838@gmail.com>
From: Erik Hatcher <erik.hatcher@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <BLU140-W379ACA1D14F772E0B5CC6ED0580@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: During the wild card search, will lucene 2.9.0 to convert the search string to lower case?
Date: Mon, 1 Feb 2010 13:33:24 -0500
References: <27348933.post@talk.nabble.com> <359a92831001271815y532f5007le8b89845a5d7f8e1@mail.gmail.com> <3b23ce091001272051g2ef79c7fsde1e835955b1dcad@mail.gmail.com>,<27406592.post@talk.nabble.com> <BLU140-W13CC0DF0E167ED77FB01FBD0580@phx.gbl>,<000c01caa35d$5b071fc0$11155f40$@de> <BLU140-W379ACA1D14F772E0B5CC6ED0580@phx.gbl>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org

QueryParser has a special capability to lowercase wildcard and prefix  
queries, simply because they are not passed to an analyzer.  Term  
queries, phrase queries (like your example), etc are passed on to the  
analyzer.  You are using the KeywordAnalyzer for the title field, and  
thus it is not lowercased.  Choose a different analyzer that  
lowercases and it will.

	Erik

On Feb 1, 2010, at 1:10 PM, java8964 java8964 wrote:

>
> I would like to confirm your reply. You mean that the query parse  
> will lower casing. In fact, it looks like that it only does this for  
> wild card query, right?
>
> For the term query, it didn't. As proved by if you change the line to:
>
>            Query query = new QueryParser("title",  
> wrapper).parse("title:\"BBB CCC\"");
>
> You will get 1 hits back. So in this case, the query parser class  
> did in different way for term query and wild card query.
>
> We have to use the query parse in this case, but we have our own  
> Query parser class extends from the lucene query parser class.  
> Anything we can do to about it?
>
> Will lucense's query parser class be fixed for the above  
> inconsistent implementation?
>
> Thanks
>
>
>> From: uwe@thetaphi.de
>> To: java-user@lucene.apache.org
>> Subject: RE: During the wild card search, will lucene 2.9.0 to  
>> convert the search string to lower case?
>> Date: Mon, 1 Feb 2010 17:41:08 +0100
>>
>> Only query parser does the lower casing. For such a special case, I  
>> would suggest to use a PrefixQuery or WildcardQuery directly and  
>> not use query parser.
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>> -----Original Message-----
>>> From: java8964 java8964 [mailto:java8964@hotmail.com]
>>> Sent: Monday, February 01, 2010 5:27 PM
>>> To: java-user@lucene.apache.org
>>> Subject: During the wild card search, will lucene 2.9.0 to convert  
>>> the
>>> search string to lower case?
>>>
>>>
>>> I noticed a strange result from the following test case. For  
>>> wildcard
>>> search, my understanding is that lucene will NOT use any analyzer on
>>> the query string. But as the following simple code to show, it looks
>>> like that lucene will lower case the search query in the wildcard
>>> search. Why? If not, why the following test case show the search  
>>> hits
>>> as one for lower case wildcard search, but not for the upper case  
>>> data?
>>> My original data is NOT analyzed, so they should be stored as the
>>> original data in the index segment, right?
>>>
>>> Lucene version: 2.9.0
>>>
>>> JDK version: JDK 1.6.0_17
>>>
>>>
>>> public class IndexTest1 {
>>>    public static void main(String[] args) {
>>>        try {
>>>            Directory directory = new RAMDirectory();
>>>            IndexWriter writer = new IndexWriter(directory, new
>>> StandardAnalyzer(Version.LUCENE_CURRENT),
>>> IndexWriter.MaxFieldLength.UNLIMITED);
>>>            Document doc = new Document();
>>>            doc.add(new Field("title", "BBB CCC", Field.Store.YES,
>>> Field.Index.NOT_ANALYZED));
>>>            writer.addDocument(doc);
>>>            doc = new Document();
>>>            doc.add(new Field("title", "ddd eee", Field.Store.YES,
>>> Field.Index.NOT_ANALYZED));
>>>            writer.addDocument(doc);
>>>
>>>            writer.close();
>>>
>>>            IndexSearcher searcher = new IndexSearcher(directory,
>>> true);
>>>            PerFieldAnalyzerWrapper wrapper = new
>>> PerFieldAnalyzerWrapper(new  
>>> StandardAnalyzer(Version.LUCENE_CURRENT));
>>>            wrapper.addAnalyzer("title", new KeywordAnalyzer());
>>>            Query query = new QueryParser("title",
>>>                    wrapper).parse("title:BBB*");
>>>            System.out.println("hits of title = " +
>>> searcher.search(query, 100).totalHits);
>>>            query = new QueryParser("title",
>>>                    wrapper).parse("title:ddd*");
>>>            System.out.println("hits of title = " +
>>> searcher.search(query, 100).totalHits);
>>>            searcher.close();
>>>        } catch (Exception e) {
>>>            System.out.println(e);
>>>        }
>>>    }
>>> }
>>>
>>> The output:
>>> hits of title = 0
>>> hits of title = 1
>>>
>>>
>>> _________________________________________________________________
>>> Hotmail: Trusted email with powerful SPAM protection.
>>> http://clk.atdmt.com/GBL/go/201469227/direct/01/
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 		 	   		
> _________________________________________________________________
> Hotmail: Powerful Free email with security by Microsoft.
> http://clk.atdmt.com/GBL/go/201469230/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 18:37:06 2010
Return-Path: <java-user-return-44812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54548 invoked from network); 1 Feb 2010 18:37:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 18:37:06 -0000
Received: (qmail 23620 invoked by uid 500); 1 Feb 2010 18:37:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23549 invoked by uid 500); 1 Feb 2010 18:37:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23539 invoked by uid 99); 1 Feb 2010 18:37:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 18:37:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of digydigy@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 18:36:52 +0000
Received: by ey-out-2122.google.com with SMTP id 22so854364eye.5
        for <java-user@lucene.apache.org>; Mon, 01 Feb 2010 10:36:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references
         :in-reply-to:subject:date:message-id:mime-version:content-type
         :content-transfer-encoding:x-mailer:thread-index:content-language;
        bh=sG6OX2I/sCXz/mcuhjz5cN+ypBSsi7Kr3BmxdZ9i0kY=;
        b=dtCUg+XpWuBF1DgyjgO9khaGJ1lKx6YbOGmHr+L1Kt6r7nI4TYnLajn/jMJsHoiQPe
         aASbLKmWw01PQTT+eZqGvH0YDc+ZcI4NFdMqWQ719Ii7bcIk5YDb3LGEMFA6MCVI2185
         zWMIUsHw4Kv6OiO9eqZ7qd0UzGAk7CAy6HvuU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:thread-index
         :content-language;
        b=BcnFdq+l4Zs5baIFMo2KMPnMJOpJ+frOmlFcz82pIwcuDBTVaP3ngQzOZWeC7kvhde
         joheUS3GYDEjEyMe8Rmt0I8XhMB9Rm5Vx2z9RFPzGOVW3bEEzlSfvvEksok4RK4tJeeZ
         9dhHX2z/jmljpVCWUDHk/8NrEml3z/W8LGffI=
Received: by 10.213.49.140 with SMTP id v12mr4800007ebf.6.1265049392365;
        Mon, 01 Feb 2010 10:36:32 -0800 (PST)
Received: from NEWPC ([81.213.206.230])
        by mx.google.com with ESMTPS id 7sm10626189eyb.26.2010.02.01.10.36.30
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 01 Feb 2010 10:36:31 -0800 (PST)
From: "Digy" <digydigy@gmail.com>
To: <java-user@lucene.apache.org>
References: <27348933.post@talk.nabble.com> <359a92831001271815y532f5007le8b89845a5d7f8e1@mail.gmail.com> <3b23ce091001272051g2ef79c7fsde1e835955b1dcad@mail.gmail.com>,<27406592.post@talk.nabble.com> <BLU140-W13CC0DF0E167ED77FB01FBD0580@phx.gbl>,<000c01caa35d$5b071fc0$11155f40$@de> <BLU140-W379ACA1D14F772E0B5CC6ED0580@phx.gbl>
In-Reply-To: <BLU140-W379ACA1D14F772E0B5CC6ED0580@phx.gbl>
Subject: RE: During the wild card search, will lucene 2.9.0 to convert the search string to lower case?
Date: Mon, 1 Feb 2010 20:36:29 +0200
Message-ID: <000f01caa36d$7927ba90$6b772fb0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
thread-index: AcqjafwaKztFCzPiTfuOsPUgygTN7AAA1EYg
Content-Language: tr
X-Virus-Checked: Checked by ClamAV on apache.org

Did you try queryParser.SetLowercaseExpandedTerms(false)?

DIGY

-----Original Message-----
From: java8964 java8964 [mailto:java8964@hotmail.com] 
Sent: Monday, February 01, 2010 8:11 PM
To: java-user@lucene.apache.org
Subject: RE: During the wild card search, will lucene 2.9.0 to convert the
search string to lower case?


I would like to confirm your reply. You mean that the query parse will lower
casing. In fact, it looks like that it only does this for wild card query,
right?

For the term query, it didn't. As proved by if you change the line to:

            Query query = new QueryParser("title",
wrapper).parse("title:\"BBB CCC\"");

You will get 1 hits back. So in this case, the query parser class did in
different way for term query and wild card query.

We have to use the query parse in this case, but we have our own Query
parser class extends from the lucene query parser class. Anything we can do
to about it?

Will lucense's query parser class be fixed for the above inconsistent
implementation?

Thanks


> From: uwe@thetaphi.de
> To: java-user@lucene.apache.org
> Subject: RE: During the wild card search, will lucene 2.9.0 to convert the
search string to lower case?
> Date: Mon, 1 Feb 2010 17:41:08 +0100
> 
> Only query parser does the lower casing. For such a special case, I would
suggest to use a PrefixQuery or WildcardQuery directly and not use query
parser.
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
> > -----Original Message-----
> > From: java8964 java8964 [mailto:java8964@hotmail.com]
> > Sent: Monday, February 01, 2010 5:27 PM
> > To: java-user@lucene.apache.org
> > Subject: During the wild card search, will lucene 2.9.0 to convert the
> > search string to lower case?
> > 
> > 
> > I noticed a strange result from the following test case. For wildcard
> > search, my understanding is that lucene will NOT use any analyzer on
> > the query string. But as the following simple code to show, it looks
> > like that lucene will lower case the search query in the wildcard
> > search. Why? If not, why the following test case show the search hits
> > as one for lower case wildcard search, but not for the upper case data?
> > My original data is NOT analyzed, so they should be stored as the
> > original data in the index segment, right?
> > 
> > Lucene version: 2.9.0
> > 
> > JDK version: JDK 1.6.0_17
> > 
> > 
> > public class IndexTest1 {
> >     public static void main(String[] args) {
> >         try {
> >             Directory directory = new RAMDirectory();
> >             IndexWriter writer = new IndexWriter(directory, new
> > StandardAnalyzer(Version.LUCENE_CURRENT),
> > IndexWriter.MaxFieldLength.UNLIMITED);
> >             Document doc = new Document();
> >             doc.add(new Field("title", "BBB CCC", Field.Store.YES,
> > Field.Index.NOT_ANALYZED));
> >             writer.addDocument(doc);
> >             doc = new Document();
> >             doc.add(new Field("title", "ddd eee", Field.Store.YES,
> > Field.Index.NOT_ANALYZED));
> >             writer.addDocument(doc);
> > 
> >             writer.close();
> > 
> >             IndexSearcher searcher = new IndexSearcher(directory,
> > true);
> >             PerFieldAnalyzerWrapper wrapper = new
> > PerFieldAnalyzerWrapper(new StandardAnalyzer(Version.LUCENE_CURRENT));
> >             wrapper.addAnalyzer("title", new KeywordAnalyzer());
> >             Query query = new QueryParser("title",
> >                     wrapper).parse("title:BBB*");
> >             System.out.println("hits of title = " +
> > searcher.search(query, 100).totalHits);
> >             query = new QueryParser("title",
> >                     wrapper).parse("title:ddd*");
> >             System.out.println("hits of title = " +
> > searcher.search(query, 100).totalHits);
> >             searcher.close();
> >         } catch (Exception e) {
> >             System.out.println(e);
> >         }
> >     }
> > }
> > 
> > The output:
> > hits of title = 0
> > hits of title = 1
> > 
> > 
> > _________________________________________________________________
> > Hotmail: Trusted email with powerful SPAM protection.
> > http://clk.atdmt.com/GBL/go/201469227/direct/01/
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
 		 	   		  
_________________________________________________________________
Hotmail: Powerful Free email with security by Microsoft.
http://clk.atdmt.com/GBL/go/201469230/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 19:24:33 2010
Return-Path: <java-user-return-44813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71447 invoked from network); 1 Feb 2010 19:24:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 19:24:33 -0000
Received: (qmail 91092 invoked by uid 500); 1 Feb 2010 19:24:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91014 invoked by uid 500); 1 Feb 2010 19:24:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91004 invoked by uid 99); 1 Feb 2010 19:24:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 19:24:31 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of java8964@hotmail.com designates 65.55.111.83 as permitted sender)
Received: from [65.55.111.83] (HELO blu0-omc2-s8.blu0.hotmail.com) (65.55.111.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 19:24:21 +0000
Received: from BLU140-W15 ([65.55.111.73]) by blu0-omc2-s8.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 1 Feb 2010 11:24:00 -0800
Message-ID: <BLU140-W157692F785244E89839A1ED0580@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_b6a55084-f7f5-4e4a-9bb0-30c5062642cb_"
X-Originating-IP: [192.100.104.17]
From: java8964 java8964 <java8964@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: During the wild card search, will lucene 2.9.0 to convert the
 search string to lower case?
Date: Mon, 1 Feb 2010 14:24:00 -0500
Importance: Normal
In-Reply-To: <000f01caa36d$7927ba90$6b772fb0$@com>
References: <27348933.post@talk.nabble.com>
 <359a92831001271815y532f5007le8b89845a5d7f8e1@mail.gmail.com>
 <3b23ce091001272051g2ef79c7fsde1e835955b1dcad@mail.gmail.com>,<27406592.post@talk.nabble.com>
 <BLU140-W13CC0DF0E167ED77FB01FBD0580@phx.gbl>,<000c01caa35d$5b071fc0$11155f40$@de>
 <BLU140-W379ACA1D14F772E0B5CC6ED0580@phx.gbl>,<000f01caa36d$7927ba90$6b772fb0$@com>
MIME-Version: 1.0
X-OriginalArrivalTime: 01 Feb 2010 19:24:00.0334 (UTC) FILETIME=[1B517EE0:01CAA374]

--_b6a55084-f7f5-4e4a-9bb0-30c5062642cb_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable


This is maybe something I am looking for. We are using the default value=2C=
 which is true.

Let me examine this method more.

Thanks for your help.

> From: digydigy@gmail.com
> To: java-user@lucene.apache.org
> Subject: RE: During the wild card search=2C will lucene 2.9.0 to convert =
the search string to lower case?
> Date: Mon=2C 1 Feb 2010 20:36:29 +0200
>=20
> Did you try queryParser.SetLowercaseExpandedTerms(false)?
>=20
> DIGY
>=20
> -----Original Message-----
> From: java8964 java8964 [mailto:java8964@hotmail.com]=20
> Sent: Monday=2C February 01=2C 2010 8:11 PM
> To: java-user@lucene.apache.org
> Subject: RE: During the wild card search=2C will lucene 2.9.0 to convert =
the
> search string to lower case?
>=20
>=20
> I would like to confirm your reply. You mean that the query parse will lo=
wer
> casing. In fact=2C it looks like that it only does this for wild card que=
ry=2C
> right?
>=20
> For the term query=2C it didn't. As proved by if you change the line to:
>=20
>             Query query =3D new QueryParser("title"=2C
> wrapper).parse("title:\"BBB CCC\"")=3B
>=20
> You will get 1 hits back. So in this case=2C the query parser class did i=
n
> different way for term query and wild card query.
>=20
> We have to use the query parse in this case=2C but we have our own Query
> parser class extends from the lucene query parser class. Anything we can =
do
> to about it?
>=20
> Will lucense's query parser class be fixed for the above inconsistent
> implementation?
>=20
> Thanks
>=20
>=20
> > From: uwe@thetaphi.de
> > To: java-user@lucene.apache.org
> > Subject: RE: During the wild card search=2C will lucene 2.9.0 to conver=
t the
> search string to lower case?
> > Date: Mon=2C 1 Feb 2010 17:41:08 +0100
> >=20
> > Only query parser does the lower casing. For such a special case=2C I w=
ould
> suggest to use a PrefixQuery or WildcardQuery directly and not use query
> parser.
> >=20
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63=2C D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >=20
> > > -----Original Message-----
> > > From: java8964 java8964 [mailto:java8964@hotmail.com]
> > > Sent: Monday=2C February 01=2C 2010 5:27 PM
> > > To: java-user@lucene.apache.org
> > > Subject: During the wild card search=2C will lucene 2.9.0 to convert =
the
> > > search string to lower case?
> > >=20
> > >=20
> > > I noticed a strange result from the following test case. For wildcard
> > > search=2C my understanding is that lucene will NOT use any analyzer o=
n
> > > the query string. But as the following simple code to show=2C it look=
s
> > > like that lucene will lower case the search query in the wildcard
> > > search. Why? If not=2C why the following test case show the search hi=
ts
> > > as one for lower case wildcard search=2C but not for the upper case d=
ata?
> > > My original data is NOT analyzed=2C so they should be stored as the
> > > original data in the index segment=2C right?
> > >=20
> > > Lucene version: 2.9.0
> > >=20
> > > JDK version: JDK 1.6.0_17
> > >=20
> > >=20
> > > public class IndexTest1 {
> > >     public static void main(String[] args) {
> > >         try {
> > >             Directory directory =3D new RAMDirectory()=3B
> > >             IndexWriter writer =3D new IndexWriter(directory=2C new
> > > StandardAnalyzer(Version.LUCENE_CURRENT)=2C
> > > IndexWriter.MaxFieldLength.UNLIMITED)=3B
> > >             Document doc =3D new Document()=3B
> > >             doc.add(new Field("title"=2C "BBB CCC"=2C Field.Store.YES=
=2C
> > > Field.Index.NOT_ANALYZED))=3B
> > >             writer.addDocument(doc)=3B
> > >             doc =3D new Document()=3B
> > >             doc.add(new Field("title"=2C "ddd eee"=2C Field.Store.YES=
=2C
> > > Field.Index.NOT_ANALYZED))=3B
> > >             writer.addDocument(doc)=3B
> > >=20
> > >             writer.close()=3B
> > >=20
> > >             IndexSearcher searcher =3D new IndexSearcher(directory=2C
> > > true)=3B
> > >             PerFieldAnalyzerWrapper wrapper =3D new
> > > PerFieldAnalyzerWrapper(new StandardAnalyzer(Version.LUCENE_CURRENT))=
=3B
> > >             wrapper.addAnalyzer("title"=2C new KeywordAnalyzer())=3B
> > >             Query query =3D new QueryParser("title"=2C
> > >                     wrapper).parse("title:BBB*")=3B
> > >             System.out.println("hits of title =3D " +
> > > searcher.search(query=2C 100).totalHits)=3B
> > >             query =3D new QueryParser("title"=2C
> > >                     wrapper).parse("title:ddd*")=3B
> > >             System.out.println("hits of title =3D " +
> > > searcher.search(query=2C 100).totalHits)=3B
> > >             searcher.close()=3B
> > >         } catch (Exception e) {
> > >             System.out.println(e)=3B
> > >         }
> > >     }
> > > }
> > >=20
> > > The output:
> > > hits of title =3D 0
> > > hits of title =3D 1
> > >=20
> > >=20
> > > _________________________________________________________________
> > > Hotmail: Trusted email with powerful SPAM protection.
> > > http://clk.atdmt.com/GBL/go/201469227/direct/01/
> >=20
> >=20
> > ---------------------------------------------------------------------
> > To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands=2C e-mail: java-user-help@lucene.apache.org
> >=20
>  		 	   		 =20
> _________________________________________________________________
> Hotmail: Powerful Free email with security by Microsoft.
> http://clk.atdmt.com/GBL/go/201469230/direct/01/
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands=2C e-mail: java-user-help@lucene.apache.org
>=20
 		 	   		 =20
_________________________________________________________________
Hotmail: Trusted email with Microsoft=92s powerful SPAM protection.
http://clk.atdmt.com/GBL/go/201469226/direct/01/=

--_b6a55084-f7f5-4e4a-9bb0-30c5062642cb_--

From java-user-return-44814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 01 21:32:41 2010
Return-Path: <java-user-return-44814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15014 invoked from network); 1 Feb 2010 21:32:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Feb 2010 21:32:41 -0000
Received: (qmail 68902 invoked by uid 500); 1 Feb 2010 21:32:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68848 invoked by uid 500); 1 Feb 2010 21:32:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68838 invoked by uid 99); 1 Feb 2010 21:32:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 21:32:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Nariman.Haghighi@workopolis.com designates 207.164.200.12 as permitted sender)
Received: from [207.164.200.12] (HELO mail3.workopolis.com) (207.164.200.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Feb 2010 21:32:30 +0000
Received: from unknown (HELO WKTOHUB01.workopolis.net) ([172.28.50.225])
  by mailout.workopolis.com with ESMTP; 01 Feb 2010 16:16:21 -0500
Received: from WKTOMAIL2.workopolis.net ([fe80::5978:c90:66b3:bdee]) by
 WKTOHUB01.workopolis.net ([::1]) with mapi; Mon, 1 Feb 2010 16:32:08 -0500
From: "Haghighi, Nariman" <Nariman.Haghighi@workopolis.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Date: Mon, 1 Feb 2010 16:32:29 -0500
Subject: ComplexPhraseQueryParser (Expanded Form and Boosting)
Thread-Topic: ComplexPhraseQueryParser (Expanded Form and Boosting)
Thread-Index: AcqjhgF1U9giCS0OR1y0cYaL4l+54g==
Message-ID: <94A09368FBF52A4FB3B4AFEC3E425E2A257894711E@WKTOMAIL2.workopolis.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_94A09368FBF52A4FB3B4AFEC3E425E2A257894711EWKTOMAIL2work_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_94A09368FBF52A4FB3B4AFEC3E425E2A257894711EWKTOMAIL2work_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

We are relying on the ComplexPhraseQueryParser for some impressive matching=
 capabilities.

Of concern is that Wildcard Queries, of the form "quality operations provid=
ing quality food services job requirements: click here to apply for this jo=
b*", for instance, take 2-5 seconds to execute and require boosting the max=
ClauseCount to > 40K. I'm hard-pressed to believe that we have over 40K uni=
que words that have 'job' as a prefix in our index so the first question is=
, how does one see the expanded form of this query? We've installed the lat=
est Luke for Lucene 3 but aren't able to reproduce the same search there as=
 it doesn't seem to support Wildcard Queries. Second concern: boosting a ph=
rase ("java developer"^10.0) doesn't seem to be applied when you look at th=
e result explanations when using the ComplexPhraseQueryParser - it's respec=
ted on single word queries and it's respected on phrases using the basic Qu=
eryParser.

Any ideas?




________________________________
Please consider the environment before printing this email.
Avant d'imprimer ce courriel, pensez ? l'environnement.

--_000_94A09368FBF52A4FB3B4AFEC3E425E2A257894711EWKTOMAIL2work_--

From java-user-return-44815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 06:19:19 2010
Return-Path: <java-user-return-44815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94179 invoked from network); 2 Feb 2010 06:19:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 06:19:19 -0000
Received: (qmail 80156 invoked by uid 500); 2 Feb 2010 06:19:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79996 invoked by uid 500); 2 Feb 2010 06:19:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79986 invoked by uid 99); 2 Feb 2010 06:19:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 06:19:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.86.5.91] (HELO smtp104.mail.in.yahoo.com) (202.86.5.91)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Feb 2010 06:19:06 +0000
Received: (qmail 24630 invoked from network); 2 Feb 2010 06:18:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=VVunl/PttRQ9x3tHYxUW7iXSRxQZOOBroOPWXC6RtxisnpemJQ2fyYlTQvWuvX/XO/RSMisw3MS37Vt5G47AFcM2B5A5baLPOoz1rHujKCUZHqUWbuLHLVWVafCq6r4VJncUP56J0toDkMGTCvfvIc87mw1cz+/9EkFTyTJ1gX8=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp104.mail.in.yahoo.com with SMTP; 02 Feb 2010 11:48:41 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: 0KbTRhoVM1mEPfNPV0VUe0joCX5iRrHOWHCvhvN2mXiFJ_pZCRsZcd1NGVmdlmOL4vhCjCwsoL7dIXNjuyNf8ozBjwF_LJbZMt4x5p9zR2kJttYebCKnMOTHF2rfD7G_f4nW5XV2rqhD0Xce305UaCatM1Uaqh5Wc81a_wKWKuNgppNpVBvpUuVCX.VbqXsr5ydNcI.s
X-Yahoo-Newman-Property: ymail-3
Message-ID: <F05A13A048D4425C9A8BF2D7768C06C7@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Exception while adding document in 3.0 
Date: Tue, 2 Feb 2010 11:48:33 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5843
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

I am getting below exception, while adding documents. I am adding =
documents continously and at some point, i am getting the below =
exception. This exception is not occuring with v2.9.0

 Exception: Index: 21, Size: 2
 java.util.ArrayList.RangeCheck(Unknown Source)
 java.util.ArrayList.get(Unknown Source)
 =
org.apache.lucene.index.DocFieldProcessorPerThread.processDocument(DocFie=
ldProcessorPerThread.java:175)
 =
org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.ja=
va:779)
 =
org.apache.lucene.index.DocumentsWriter.addDocument(DocumentsWriter.java:=
757)
 org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:2472)
 org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:2446)

Regards
Ganesh
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 07:34:22 2010
Return-Path: <java-user-return-44816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20485 invoked from network); 2 Feb 2010 07:34:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 07:34:21 -0000
Received: (qmail 18321 invoked by uid 500); 2 Feb 2010 07:34:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18220 invoked by uid 500); 2 Feb 2010 07:34:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18210 invoked by uid 99); 2 Feb 2010 07:34:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 07:34:18 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.82.104.180] (HELO web24707.mail.ird.yahoo.com) (212.82.104.180)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Feb 2010 07:34:09 +0000
Received: (qmail 54453 invoked by uid 60001); 2 Feb 2010 07:33:47 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1265096027; bh=YnMfszpEC4JvO2LljE9GIDh8ykDsnoICdqZMDSiQ6dk=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=IQkYkUTntaIdzfkYFy+tdYroFYSYoCqdvrxzrK+LqP+6b12G2RtLW86GNOOiUMhIrMQEyVgUMeAGB5JL/6NHIMX8U43xPv897SzIkTbOv4y5iudm+f5w/QDyZRmP2AsGDAIA/U3Hak2IsX3WqXJ1GUym83WZYEu+nc00+JnEfd0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=dUb30911ACxMTtdFhkr8E4a55efaeeMbihIf07wUWpHEDdtWm52R+dXOzP7IVnZZBHuAq78HY7UVHmamFyWTNX3hR+/BjVb3eetPUVCM936g2WZNNSfC9c+k/1IA+t7VM6f9brmrSs0YwVmoGqQzyy4xpGVUdYPgdA0YISuTRTc=;
Message-ID: <103184.53472.qm@web24707.mail.ird.yahoo.com>
X-YMail-OSG: i_KF1A8VM1ktMMdTEi4LDh_FmivkXJ0J6r6_Djw6yBgpTo6TTIh6tY068jfiBS29mKp61fOuFxt.hQj.K3xuGgLmfl7AMgsKyRMBe5SHXD91Pgfnyzybr3bDWezLpMHhc0zVrOFW23HqQDC2RxYvQ5JjJs9HVAio66AAHezeK9_qiDMWvxQVtQYbGo_htEK3xDZaGctQhU1jgtsNpb7BMKK5dVHG7A1n3Dn50ktNCDu_kTVE.9gkrP2qYHTMw_EHhlM3krnx9aejjrkyHMGnzgnM22R1wEqxtatG05tFBhFBP2itknvaXeAa4.4IeusVOO62hwJU
Received: from [87.248.121.238] by web24707.mail.ird.yahoo.com via HTTP; Tue, 02 Feb 2010 07:33:47 GMT
X-Mailer: YahooMailWebService/0.8.100.260964
Date: Tue, 2 Feb 2010 07:33:47 +0000 (GMT)
From: Mark Harwood <markharw00d@yahoo.co.uk>
Subject: Re: ComplexPhraseQueryParser (Expanded Form and Boosting)
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Try call rewrite on the query object to expand then call tostring on  =0Ath=
e result.=0A=0ACheers,=0AMark=0A=0A---------=0AOn 1 Feb 2010, at 21:32, "Ha=
ghighi, Nariman" <Nariman.Haghighi@workopolis.com =0A > wrote:=0A=0A> We ar=
e relying on the ComplexPhraseQueryParser for some impressive  =0A> matchin=
g capabilities.=0A>=0A> Of concern is that Wildcard Queries, of the form "q=
uality operations  =0A> providing quality food services job requirements: c=
lick here to  =0A> apply for this job*", for instance, take 2-5 seconds to =
execute and  =0A> require boosting the maxClauseCount to > 40K. I'm hard-pr=
essed to  =0A> believe that we have over 40K unique words that have 'job' a=
s a  =0A> prefix in our index so the first question is, how does one see th=
e  =0A> expanded form of this query? We've installed the latest Luke for  =
=0A> Lucene 3 but aren't able to reproduce the same search there as it  =0A=
> doesn't seem to support Wildcard Queries. Second concern: boosting a  =0A=
> phrase ("java developer"^10.0) doesn't seem to be applied when you  =0A> =
look at the result explanations when using the  =0A> ComplexPhraseQueryPars=
er - it's respected on single word queries and  =0A> it's respected on phra=
ses using the basic QueryParser.=0A>=0A> Any ideas?=0A>=0A>=0A>=0A>=0A> ___=
_____________________________=0A> Please consider the environment before pr=
inting this email.=0A> Avant d'imprimer ce courriel, pensez ? l'environneme=
nt.=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 07:55:50 2010
Return-Path: <java-user-return-44817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23860 invoked from network); 2 Feb 2010 07:55:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 07:55:49 -0000
Received: (qmail 33631 invoked by uid 500); 2 Feb 2010 07:55:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33565 invoked by uid 500); 2 Feb 2010 07:55:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33555 invoked by uid 99); 2 Feb 2010 07:55:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 07:55:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.224 as permitted sender)
Received: from [209.85.220.224] (HELO mail-fx0-f224.google.com) (209.85.220.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 07:55:36 +0000
Received: by fxm24 with SMTP id 24so1477948fxm.11
        for <java-user@lucene.apache.org>; Mon, 01 Feb 2010 23:55:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=qGfwmuXkmD2vfAWRVCR9ndKXEVuYUTFrL7YwwjR34QU=;
        b=fuCL2KeQ6QzffA3jbfY8ozY6zEYzbIaFFr0nxiBkGe2RvLukUAtig0CiLPG7DDOiss
         nQ/MAJDzC8Z8BHNZgrJjSkJqKJSYsCBrFtnIQCe+5JrTmYws4l6biS+STQlfAnDaCoFN
         znhpbL8TUalEOYrE1gedsv5wujyiaY8jrstsA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=WSfO4YRSx9xVP4KcWMFethvMvNIUi6H4oNeszUHrSyCSb4qtFl9JjCyWiXoiOPacPC
         lopbMVOgrQiNY2wE0I1AdNY+rmBgwx2bNV7cAi00LXwpC4IixcgZR2TC2B5RcK/2ENXH
         jCokq7B4cjaLcEGgzRMq8dF2JlJMlcTn2StT0=
MIME-Version: 1.0
Received: by 10.239.150.4 with SMTP id l4mr827777hbb.6.1265097316651; Mon, 01 
	Feb 2010 23:55:16 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <F05A13A048D4425C9A8BF2D7768C06C7@sv.us.sonicwall.com>
References: <F05A13A048D4425C9A8BF2D7768C06C7@sv.us.sonicwall.com>
Date: Tue, 2 Feb 2010 08:55:16 +0100
Message-ID: <f18c9dde1002012355g60e89e55hd8c1ca394c0b2a76@mail.gmail.com>
Subject: Re: Exception while adding document in 3.0
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Ganesh,

do you reuse your Document instances in any way or do you create new
docs for each add?

simon

On Tue, Feb 2, 2010 at 7:18 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> I am getting below exception, while adding documents. I am adding documen=
ts continously and at some point, i am getting the below exception. This ex=
ception is not occuring with v2.9.0
>
> =C2=A0Exception: Index: 21, Size: 2
> =C2=A0java.util.ArrayList.RangeCheck(Unknown Source)
> =C2=A0java.util.ArrayList.get(Unknown Source)
> =C2=A0org.apache.lucene.index.DocFieldProcessorPerThread.processDocument(=
DocFieldProcessorPerThread.java:175)
> =C2=A0org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWri=
ter.java:779)
> =C2=A0org.apache.lucene.index.DocumentsWriter.addDocument(DocumentsWriter=
.java:757)
> =C2=A0org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:24=
72)
> =C2=A0org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:24=
46)
>
> Regards
> Ganesh
> Send instant messages to your online friends http://in.messenger.yahoo.co=
m
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 08:03:35 2010
Return-Path: <java-user-return-44818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25749 invoked from network); 2 Feb 2010 08:03:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 08:03:35 -0000
Received: (qmail 41473 invoked by uid 500); 2 Feb 2010 08:03:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41412 invoked by uid 500); 2 Feb 2010 08:03:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41397 invoked by uid 99); 2 Feb 2010 08:03:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 08:03:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.217.217 as permitted sender)
Received: from [209.85.217.217] (HELO mail-gx0-f217.google.com) (209.85.217.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 08:03:26 +0000
Received: by gxk9 with SMTP id 9so3389615gxk.5
        for <java-user@lucene.apache.org>; Tue, 02 Feb 2010 00:03:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=r9lzfqNLQeM9BWsLObMfkPs5pu48Fuwqr7I4ZncCKJs=;
        b=MjXJQTslGVVznER+7g7SzbjWGOLkl40GEgQECvu6gsvVg1npMfbxk6Yugv8EAh2FTN
         rrSVEJVK2F2pvoHeeABRzm/CfxadhNLeFDc35U3nbiA47fwY2M9TaSIfp+NQRSDDJe+1
         eq4P1AoKH9JO07RQO91v1x1/5fRnCtPhiSsgE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=VPqJwuVHIdIf3KBZAioOvNy6x5XU20pAfyBoR7GvABvrLgIwmL8JkY1FKAhLTi4U1J
         HVoAjetoh1QGTx5Hzuee2VTU92mItgGJb2bq1Z9JtVs9+2nMc9ok/8OFneMt9LqbrhZJ
         1YqWcG5c7n35+xXdSJtvsOWVq0Un0zlAtQyug=
MIME-Version: 1.0
Received: by 10.101.131.32 with SMTP id i32mr7117607ann.40.1265097785261; Tue, 
	02 Feb 2010 00:03:05 -0800 (PST)
In-Reply-To: <f18c9dde1002012355g60e89e55hd8c1ca394c0b2a76@mail.gmail.com>
References: <F05A13A048D4425C9A8BF2D7768C06C7@sv.us.sonicwall.com>
	 <f18c9dde1002012355g60e89e55hd8c1ca394c0b2a76@mail.gmail.com>
Date: Tue, 2 Feb 2010 03:03:05 -0500
Message-ID: <5e76f3841002020003n2b4f3ebdyc33981356427332b@mail.gmail.com>
Subject: Re: Exception while adding document in 3.0
From: Glen Newton <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Documents cannot be re-used in v3.0?
 http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

-glen
http://zzzoot.blogspot.com/

On 2 February 2010 02:55, Simon Willnauer
<simon.willnauer@googlemail.com> wrote:
> Ganesh,
>
> do you reuse your Document instances in any way or do you create new
> docs for each add?
>
> simon
>
> On Tue, Feb 2, 2010 at 7:18 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>> I am getting below exception, while adding documents. I am adding docume=
nts continously and at some point, i am getting the below exception. This e=
xception is not occuring with v2.9.0
>>
>> =C2=A0Exception: Index: 21, Size: 2
>> =C2=A0java.util.ArrayList.RangeCheck(Unknown Source)
>> =C2=A0java.util.ArrayList.get(Unknown Source)
>> =C2=A0org.apache.lucene.index.DocFieldProcessorPerThread.processDocument=
(DocFieldProcessorPerThread.java:175)
>> =C2=A0org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWr=
iter.java:779)
>> =C2=A0org.apache.lucene.index.DocumentsWriter.addDocument(DocumentsWrite=
r.java:757)
>> =C2=A0org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:2=
472)
>> =C2=A0org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:2=
446)
>>
>> Regards
>> Ganesh
>> Send instant messages to your online friends http://in.messenger.yahoo.c=
om
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 08:11:35 2010
Return-Path: <java-user-return-44819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27236 invoked from network); 2 Feb 2010 08:11:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 08:11:35 -0000
Received: (qmail 50447 invoked by uid 500); 2 Feb 2010 08:11:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50384 invoked by uid 500); 2 Feb 2010 08:11:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50370 invoked by uid 99); 2 Feb 2010 08:11:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 08:11:33 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 08:11:22 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id BCE0F45FA00
	for <java-user@lucene.apache.org>; Tue,  2 Feb 2010 09:11:00 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 0cBBB2KZ1sl7 for <java-user@lucene.apache.org>;
	Tue,  2 Feb 2010 09:10:50 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 4445245F9F2
	for <java-user@lucene.apache.org>; Tue,  2 Feb 2010 09:10:50 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <F05A13A048D4425C9A8BF2D7768C06C7@sv.us.sonicwall.com>	 <f18c9dde1002012355g60e89e55hd8c1ca394c0b2a76@mail.gmail.com> <5e76f3841002020003n2b4f3ebdyc33981356427332b@mail.gmail.com>
In-Reply-To: <5e76f3841002020003n2b4f3ebdyc33981356427332b@mail.gmail.com>
Subject: RE: Exception while adding document in 3.0
Date: Tue, 2 Feb 2010 09:11:06 +0100
Message-ID: <000301caa3df$458d8ee0$d0a8aca0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acqj3j8WqagfjcCmSuG+lbGhCwUFgAAAP7Eg
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

They can.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Glen Newton [mailto:glen.newton@gmail.com]
> Sent: Tuesday, February 02, 2010 9:03 AM
> To: java-user@lucene.apache.org
> Subject: Re: Exception while adding document in 3.0
> 
> Documents cannot be re-used in v3.0?
>  http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
> 
> -glen
> http://zzzoot.blogspot.com/
> 
> On 2 February 2010 02:55, Simon Willnauer
> <simon.willnauer@googlemail.com> wrote:
> > Ganesh,
> >
> > do you reuse your Document instances in any way or do you create new
> > docs for each add?
> >
> > simon
> >
> > On Tue, Feb 2, 2010 at 7:18 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> >> I am getting below exception, while adding documents. I am adding
> documents continously and at some point, i am getting the below
> exception. This exception is not occuring with v2.9.0
> >>
> >>  Exception: Index: 21, Size: 2
> >>  java.util.ArrayList.RangeCheck(Unknown Source)
> >>  java.util.ArrayList.get(Unknown Source)
> >>
>  org.apache.lucene.index.DocFieldProcessorPerThread.processDocument(Doc
> FieldProcessorPerThread.java:175)
> >>
>  org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter
> .java:779)
> >>
>  org.apache.lucene.index.DocumentsWriter.addDocument(DocumentsWriter.ja
> va:757)
> >>
>  org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:2472)
> >>
>  org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:2446)
> >>
> >> Regards
> >> Ganesh
> >> Send instant messages to your online friends
> http://in.messenger.yahoo.com
> >>
> >> --------------------------------------------------------------------
> -
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> 
> --
> 
> -
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 08:24:43 2010
Return-Path: <java-user-return-44820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30795 invoked from network); 2 Feb 2010 08:24:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 08:24:43 -0000
Received: (qmail 63830 invoked by uid 500); 2 Feb 2010 08:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63741 invoked by uid 500); 2 Feb 2010 08:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63731 invoked by uid 99); 2 Feb 2010 08:24:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 08:24:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.86.5.36] (HELO smtp109.mail.in.yahoo.com) (202.86.5.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Feb 2010 08:24:30 +0000
Received: (qmail 49245 invoked from network); 2 Feb 2010 08:24:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=PKKZe52KqauaHj5EzmTjdHXPhIpVRVzmldZ59MXUxOIlyA6JdLnXWo5Fq9qlzSnTDwnPqAhiEUGZmOURxPEgDqf3PD0yGvz5WeXQfJNTzLKYyaHY2LCXP5S8dOA5dZ4OYValHRxTGfFOzTZgnoZpSvL4loKFTsPX2FXKb3Jcnd4=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp109.mail.in.yahoo.com with SMTP; 2 Feb 2010 08:24:05 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: 0Yl.oT4VM1mqRsoXU9yah5POpeOwAWTtd_aoh13j6fjoql22.eLGktFwezPbj18vjUgUSwV0dSiIbPbuw1cm6LZApsB2pujUwEaE8hbZ0kFeAEDnvIfi8SkviExnpEnH_.M7W2isJNagvU_WvhCg_eIjTd8SyFUdxsFfJIRbR4qqr.DTL41kYn7eXGSXOWhAClRj7PMkoBXJHwrEojMYaJrGvly1A2h7eo42XuHiZmKh6L3fpybDYg--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <DB50726564B543B282DE1CD741CE7501@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <F05A13A048D4425C9A8BF2D7768C06C7@sv.us.sonicwall.com>	 <f18c9dde1002012355g60e89e55hd8c1ca394c0b2a76@mail.gmail.com> <5e76f3841002020003n2b4f3ebdyc33981356427332b@mail.gmail.com> <000301caa3df$458d8ee0$d0a8aca0$@de>
Subject: Re: [Bulk] RE: Exception while adding document in 3.0
Date: Tue, 2 Feb 2010 13:53:59 +0530
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0DAF_01CAA40F.2B564820"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5843
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

------=_NextPart_000_0DAF_01CAA40F.2B564820
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

I tried My App with v2.9.0 without reusing Documents and it is working =
fine.

Based on the suggestion from group (refer attached mail), I modified the =
code to use v3.0.0 and in order to increase performance, I am reusing =
the Documents and Fields objects as suggessted. I am facing problems =
with this approach.=20

Documents cannot be re-used in v3.0?

Regards
Ganesh

----- Original Message -----=20
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
Sent: Tuesday, February 02, 2010 1:41 PM
Subject: [Bulk] RE: Exception while adding document in 3.0


> They can.
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
>> -----Original Message-----
>> From: Glen Newton [mailto:glen.newton@gmail.com]
>> Sent: Tuesday, February 02, 2010 9:03 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Exception while adding document in 3.0
>>=20
>> Documents cannot be re-used in v3.0?
>>  http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
>>=20
>> -glen
>> http://zzzoot.blogspot.com/
>>=20
>> On 2 February 2010 02:55, Simon Willnauer
>> <simon.willnauer@googlemail.com> wrote:
>> > Ganesh,
>> >
>> > do you reuse your Document instances in any way or do you create =
new
>> > docs for each add?
>> >
>> > simon
>> >
>> > On Tue, Feb 2, 2010 at 7:18 AM, Ganesh <emailgane@yahoo.co.in> =
wrote:
>> >> I am getting below exception, while adding documents. I am adding
>> documents continously and at some point, i am getting the below
>> exception. This exception is not occuring with v2.9.0
>> >>
>> >>  Exception: Index: 21, Size: 2
>> >>  java.util.ArrayList.RangeCheck(Unknown Source)
>> >>  java.util.ArrayList.get(Unknown Source)
>> >>
>>  =
org.apache.lucene.index.DocFieldProcessorPerThread.processDocument(Doc
>> FieldProcessorPerThread.java:175)
>> >>
>>  =
org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter
>> .java:779)
>> >>
>>  =
org.apache.lucene.index.DocumentsWriter.addDocument(DocumentsWriter.ja
>> va:757)
>> >>
>>  =
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:2472)
>> >>
>>  =
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:2446)
>> >>
>> >> Regards
>> >> Ganesh
>> >> Send instant messages to your online friends
>> http://in.messenger.yahoo.com
>> >>
>> >> =
--------------------------------------------------------------------
>> -
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> > =
---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>=20
>>=20
>>=20
>> --
>>=20
>> -
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
------=_NextPart_000_0DAF_01CAA40F.2B564820
Content-Type: message/rfc822;
	name="Re_ Reusing Document and Field objects.eml"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename="Re_ Reusing Document and Field objects.eml"

X-Apparently-To: emailgane@yahoo.co.in via 121.101.151.12; Mon, 18 Jan 2010 15:40:23 +0530
X-YMailISG: D4DOyhIWLDtm029_Ahnba6e4iEvkPtbvMj4K2wZq4rDhUg4AK_yPwziqNXoY44NM0b8i1CZtEm8ztf9MZ6h4jCXumzXCjTUWgk6yLe0EYbtxwe56t_cejwg8qX5as.rHiFe_o42DzahOo8PFJCc7qVz9hTU43If3RqxBFobey.YoigY4NxXgPzk5BKc2reBPJvcw78oGivcgweolfV5hjxo4RlJbr0wf_PzEeQkHY2LVXAsIbNam6yUL.OKoEhahRyeOL.GkE65.FajwL0UYHYvsydp9_puDTFEkCaP1dANqE8GD4oM.NaExAptm.NBse1tS8TO7rvhn7.iNpBXxiDquCOhzimxsUM.ZSE1RXhFuZ13RkWVkmUxBowfSS1kKQavue.wHvBfO_x9fgFpmJceHQvdDGLBs8Zsh1VczdqTHOVfTm1ub5PXN1whPaJ6IF_R9d3NiduWFxGNRPTT1
X-Originating-IP: [140.211.11.3]
Authentication-Results: mta154.mail.in.yahoo.com  from=gmail.com; domainkeys=fail (bad sig); from=gmail.com; dkim=permerror (bad  sig)
Received: from 140.211.11.3  (HELO mail.apache.org) (140.211.11.3)
  by mta154.mail.in.yahoo.com with SMTP; Mon, 18 Jan 2010 15:40:22 +0530
Received: (qmail 89577 invoked by uid 500); 18 Jan 2010 10:10:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89567 invoked by uid 99); 18 Jan 2010 10:10:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jan 2010 10:10:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.220.210 as permitted sender)
Received: from [209.85.220.210] (HELO mail-fx0-f210.google.com) (209.85.220.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jan 2010 10:10:11 +0000
Received: by mail-fx0-f210.google.com with SMTP id 2so507630fxm.5
        for <java-user@lucene.apache.org>; Mon, 18 Jan 2010 02:09:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=S9wuMjz/QKqLmIf+TlrN0hpYEPYpPvjQiYWZ9EhQdHQ=;
        b=pSy/4rJ9phHOvIPZqdRskXk/OmhRzExbsCpD/4uU7tTHHzJDTEq8RNzl8iSsUKHbRF
         YbB1Goei3Cq4vQ5AD/c21kI1DNxgqbgDh/ErxFnLO6gGEsA3WGaiZztCdn4ioBqtViie
         rfah9/WjQflKqAHrtD/9j4ld1TLDKld0D/tyM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=m7XSIZUClq8yxqfj63CUmMF5+Vzcn4hJN0rgef46lx8SiJcoRetXTO/tSFwuyvVCRe
         Tw2ZAvbRW9xxhIAQRzB8Rn/QGw/DJnjItpCMB61wUe1Eo/ZCbvQcDvMvzMa0r9aS4mYV
         ywOEwrs1rXaIMItZSoDMKPwAqRCMkda7DELsI=
MIME-Version: 1.0
Received: by 10.223.14.140 with SMTP id g12mr7272470faa.50.1263809391118; Mon, 
	18 Jan 2010 02:09:51 -0800 (PST)
In-Reply-To: <9ac0c6aa1001180205g53a8408fk73131ad215fc9494@mail.gmail.com>
References: <5BE842FD3A27402EAD4917104DD210FA@sv.us.sonicwall.com> 
	<9ac0c6aa1001180205g53a8408fk73131ad215fc9494@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 18 Jan 2010 10:09:31 +0000
Message-ID: <8c4e68611001180209k790fb552s38908a5c125949b5@mail.gmail.com>
Subject: Re: Reusing Document and Field objects
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

There's a section on reusing Fields and Documents in
http://wiki.apache.org/lucene-java/ImproveIndexingSpeed.  And lots of
other good tips.


--
Ian.

On Mon, Jan 18, 2010 at 10:05 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> It should give some perf improvement, reducing GC costs.
>
> But you don't need to set field values to null -- just set to the
> values of the next doc to index, and index with that.
>
> If your machine has available hardware concurrency, using threads
> should give you even more gains.
>
> Mike
>
> On Mon, Jan 18, 2010 at 4:47 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>> Hello all,
>>
>> I am indexing millions of documents. The app is single threaded. I need to create Document and Fields objects repeatedly. I have a thought to create it once and reuse by setting the field values to null.
>>
>> Is this advisable, Will it give any performance improvement?
>>
>> Regards
>> Ganesh
>>
>>
>> Send instant messages to your online friends http://in.messenger.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


------=_NextPart_000_0DAF_01CAA40F.2B564820
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPart_000_0DAF_01CAA40F.2B564820--

Send instant messages to your online friends http://in.messenger.yahoo.com 

From java-user-return-44821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 08:32:47 2010
Return-Path: <java-user-return-44821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32985 invoked from network); 2 Feb 2010 08:32:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 08:32:47 -0000
Received: (qmail 73751 invoked by uid 500); 2 Feb 2010 08:32:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73676 invoked by uid 500); 2 Feb 2010 08:32:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73666 invoked by uid 99); 2 Feb 2010 08:32:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 08:32:44 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 08:32:33 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id B0FF645FA8E
	for <java-user@lucene.apache.org>; Tue,  2 Feb 2010 09:32:13 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6VNO6ppLu27h for <java-user@lucene.apache.org>;
	Tue,  2 Feb 2010 09:31:59 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id E5DE845FA8C
	for <java-user@lucene.apache.org>; Tue,  2 Feb 2010 09:31:58 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <F05A13A048D4425C9A8BF2D7768C06C7@sv.us.sonicwall.com>	 <f18c9dde1002012355g60e89e55hd8c1ca394c0b2a76@mail.gmail.com> <5e76f3841002020003n2b4f3ebdyc33981356427332b@mail.gmail.com> <000301caa3df$458d8ee0$d0a8aca0$@de> <DB50726564B543B282DE1CD741CE7501@sv.us.sonicwall.com>
In-Reply-To: <DB50726564B543B282DE1CD741CE7501@sv.us.sonicwall.com>
Subject: RE: [Bulk] RE: Exception while adding document in 3.0
Date: Tue, 2 Feb 2010 09:32:15 +0100
Message-ID: <000601caa3e2$39a39a40$aceacec0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acqj4TLgKhaG8n68SG+CXPUasno3LgAAD+bg
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

They can be reused, but the exception and looking into the code shows =
that you are doing it wrong. You can reuse Documents but only under two =
conditions:

a) In one thread, not one document in multithreaded app - one document =
per thread! And using one document in more than one thread is what you =
are likely doing. This exception cannot occur in one thread (just look =
into the lucene source code): What it does: it iterates over all fields =
of the document using a for-loop. A RangeCheck exception can only occur, =
if the document is modified during this iteration.
b) Only reuse the Document instance after the IndexWriter.xxxDocumentis =
finished! So don't prepare the document and the do the IndexWriter =
stuffs in another task, this would exactly produce this error.

Your problem is exactly the same as when you create an ArrayList, then =
iterate over the ArrayList using a for-loop and remove elements from the =
ArrayList in a parallel thread.

Both of above conditions are mentioned in the FAQ (indirectly).

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Ganesh [mailto:emailgane@yahoo.co.in]
> Sent: Tuesday, February 02, 2010 9:24 AM
> To: java-user@lucene.apache.org
> Subject: Re: [Bulk] RE: Exception while adding document in 3.0
>=20
> I tried My App with v2.9.0 without reusing Documents and it is working
> fine.
>=20
> Based on the suggestion from group (refer attached mail), I modified
> the code to use v3.0.0 and in order to increase performance, I am
> reusing the Documents and Fields objects as suggessted. I am facing
> problems with this approach.
>=20
> Documents cannot be re-used in v3.0?
>=20
> Regards
> Ganesh
>=20
> ----- Original Message -----
> From: "Uwe Schindler" <uwe@thetaphi.de>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, February 02, 2010 1:41 PM
> Subject: [Bulk] RE: Exception while adding document in 3.0
>=20
>=20
> > They can.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >> -----Original Message-----
> >> From: Glen Newton [mailto:glen.newton@gmail.com]
> >> Sent: Tuesday, February 02, 2010 9:03 AM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Exception while adding document in 3.0
> >>
> >> Documents cannot be re-used in v3.0?
> >>  http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
> >>
> >> -glen
> >> http://zzzoot.blogspot.com/
> >>
> >> On 2 February 2010 02:55, Simon Willnauer
> >> <simon.willnauer@googlemail.com> wrote:
> >> > Ganesh,
> >> >
> >> > do you reuse your Document instances in any way or do you create
> new
> >> > docs for each add?
> >> >
> >> > simon
> >> >
> >> > On Tue, Feb 2, 2010 at 7:18 AM, Ganesh <emailgane@yahoo.co.in>
> wrote:
> >> >> I am getting below exception, while adding documents. I am =
adding
> >> documents continously and at some point, i am getting the below
> >> exception. This exception is not occuring with v2.9.0
> >> >>
> >> >>  Exception: Index: 21, Size: 2
> >> >>  java.util.ArrayList.RangeCheck(Unknown Source)
> >> >>  java.util.ArrayList.get(Unknown Source)
> >> >>
> >>
> org.apache.lucene.index.DocFieldProcessorPerThread.processDocument(Doc
> >> FieldProcessorPerThread.java:175)
> >> >>
> >>
> org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter
> >> .java:779)
> >> >>
> >>
> org.apache.lucene.index.DocumentsWriter.addDocument(DocumentsWriter.ja
> >> va:757)
> >> >>
> >>
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:2472)
> >> >>
> >>
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:2446)
> >> >>
> >> >> Regards
> >> >> Ganesh
> >> >> Send instant messages to your online friends
> >> http://in.messenger.yahoo.com
> >> >>
> >> >> =
-----------------------------------------------------------------
> ---
> >> -
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: =
java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >> > =
------------------------------------------------------------------
> ---
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >>
> >>
> >> --
> >>
> >> -
> >>
> >> =
--------------------------------------------------------------------
> -
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 09:19:12 2010
Return-Path: <java-user-return-44822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44188 invoked from network); 2 Feb 2010 09:19:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 09:19:11 -0000
Received: (qmail 23812 invoked by uid 500); 2 Feb 2010 09:19:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23738 invoked by uid 500); 2 Feb 2010 09:19:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23728 invoked by uid 99); 2 Feb 2010 09:19:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 09:19:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.86.5.90] (HELO smtp103.mail.in.yahoo.com) (202.86.5.90)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Feb 2010 09:18:57 +0000
Received: (qmail 61462 invoked from network); 2 Feb 2010 09:18:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=5Jf+JN4EiJheYgFTwu02Vr5upe0oa1+Of4WGcdXsX0EzzadIx5iY1+Rc3n3v/nvFWwmfJMaKau5xcUHenxOxloxRWBFyNQgVc5n44EzFCeasJS1LxUxq8y0mmviT7SzJBnuuyS4PY66EZPPRPPZbQltxw9GoqTi3cbCKn7rc+Eo=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp103.mail.in.yahoo.com with SMTP; 02 Feb 2010 14:48:33 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: lA2KKbIVM1karTQqr8LZnb5pTad5H3SgBDUeudORMjH5UcfnMV7qcaXCl82AqHs6f_Apr5EwikzyblXYcC.2vg.rf4ieIXqP49cyU.EKxnqFyl0akN9K4VX3AxgIWpoxagDY_ocZ0Qnk_Bjm1SIW0n9yQcT7vJytxkfbTNYSYRRwGtexbaSjO8UXw5lhS.uO4wl5Qg.OQ9PIfCAUYOeWyvytCK7OWV7g97qI6yI50nr4T9UB0I78_I8-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <6B71E6DA239541A4B4C5D937452E0B56@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <F05A13A048D4425C9A8BF2D7768C06C7@sv.us.sonicwall.com>	 <f18c9dde1002012355g60e89e55hd8c1ca394c0b2a76@mail.gmail.com> <5e76f3841002020003n2b4f3ebdyc33981356427332b@mail.gmail.com> <000301caa3df$458d8ee0$d0a8aca0$@de> <DB50726564B543B282DE1CD741CE7501@sv.us.sonicwall.com> <000601caa3e2$39a39a40$aceacec0$@de>
Subject: Re: [Bulk] RE: [Bulk] RE: Exception while adding document in 3.0
Date: Tue, 2 Feb 2010 14:48:22 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5843
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Yes. I am using the objects across threads. Thanks for pointing out.

But still i didn't see much increase in performance by reusing documents =
and field objects.=20

Regards
Ganesh

----- Original Message -----=20
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
Sent: Tuesday, February 02, 2010 2:02 PM
Subject: [Bulk] RE: [Bulk] RE: Exception while adding document in 3.0


They can be reused, but the exception and looking into the code shows =
that you are doing it wrong. You can reuse Documents but only under two =
conditions:

a) In one thread, not one document in multithreaded app - one document =
per thread! And using one document in more than one thread is what you =
are likely doing. This exception cannot occur in one thread (just look =
into the lucene source code): What it does: it iterates over all fields =
of the document using a for-loop. A RangeCheck exception can only occur, =
if the document is modified during this iteration.
b) Only reuse the Document instance after the IndexWriter.xxxDocumentis =
finished! So don't prepare the document and the do the IndexWriter =
stuffs in another task, this would exactly produce this error.

Your problem is exactly the same as when you create an ArrayList, then =
iterate over the ArrayList using a for-loop and remove elements from the =
ArrayList in a parallel thread.

Both of above conditions are mentioned in the FAQ (indirectly).

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Ganesh [mailto:emailgane@yahoo.co.in]
> Sent: Tuesday, February 02, 2010 9:24 AM
> To: java-user@lucene.apache.org
> Subject: Re: [Bulk] RE: Exception while adding document in 3.0
>=20
> I tried My App with v2.9.0 without reusing Documents and it is working
> fine.
>=20
> Based on the suggestion from group (refer attached mail), I modified
> the code to use v3.0.0 and in order to increase performance, I am
> reusing the Documents and Fields objects as suggessted. I am facing
> problems with this approach.
>=20
> Documents cannot be re-used in v3.0?
>=20
> Regards
> Ganesh
>=20
> ----- Original Message -----
> From: "Uwe Schindler" <uwe@thetaphi.de>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, February 02, 2010 1:41 PM
> Subject: [Bulk] RE: Exception while adding document in 3.0
>=20
>=20
> > They can.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >> -----Original Message-----
> >> From: Glen Newton [mailto:glen.newton@gmail.com]
> >> Sent: Tuesday, February 02, 2010 9:03 AM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Exception while adding document in 3.0
> >>
> >> Documents cannot be re-used in v3.0?
> >>  http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
> >>
> >> -glen
> >> http://zzzoot.blogspot.com/
> >>
> >> On 2 February 2010 02:55, Simon Willnauer
> >> <simon.willnauer@googlemail.com> wrote:
> >> > Ganesh,
> >> >
> >> > do you reuse your Document instances in any way or do you create
> new
> >> > docs for each add?
> >> >
> >> > simon
> >> >
> >> > On Tue, Feb 2, 2010 at 7:18 AM, Ganesh <emailgane@yahoo.co.in>
> wrote:
> >> >> I am getting below exception, while adding documents. I am =
adding
> >> documents continously and at some point, i am getting the below
> >> exception. This exception is not occuring with v2.9.0
> >> >>
> >> >>  Exception: Index: 21, Size: 2
> >> >>  java.util.ArrayList.RangeCheck(Unknown Source)
> >> >>  java.util.ArrayList.get(Unknown Source)
> >> >>
> >>
> org.apache.lucene.index.DocFieldProcessorPerThread.processDocument(Doc
> >> FieldProcessorPerThread.java:175)
> >> >>
> >>
> org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter
> >> .java:779)
> >> >>
> >>
> org.apache.lucene.index.DocumentsWriter.addDocument(DocumentsWriter.ja
> >> va:757)
> >> >>
> >>
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:2472)
> >> >>
> >>
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:2446)
> >> >>
> >> >> Regards
> >> >> Ganesh
> >> >> Send instant messages to your online friends
> >> http://in.messenger.yahoo.com
> >> >>
> >> >> =
-----------------------------------------------------------------
> ---
> >> -
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: =
java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >> > =
------------------------------------------------------------------
> ---
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >>
> >>
> >> --
> >>
> >> -
> >>
> >> =
--------------------------------------------------------------------
> -
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 09:30:35 2010
Return-Path: <java-user-return-44823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49569 invoked from network); 2 Feb 2010 09:30:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 09:30:35 -0000
Received: (qmail 43683 invoked by uid 500); 2 Feb 2010 09:30:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43601 invoked by uid 500); 2 Feb 2010 09:30:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43591 invoked by uid 99); 2 Feb 2010 09:30:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 09:30:33 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 09:30:25 +0000
Received: by bwz22 with SMTP id 22so3717187bwz.5
        for <java-user@lucene.apache.org>; Tue, 02 Feb 2010 01:30:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=rt4nM6sHkXxCepUgL5MdQKtkb4e/IlwDTeM3vGcWPjE=;
        b=GMTtVXUQtqeVxcM9pbaT6ll867HgjwS3YfjzpfhLePJBOOs8V2FecIGbJ4vcEVCmgr
         AsHmnRk80s72cn+uGjIC9eL25QZGgF6RjXh8HsXT8MDd0kFXB0BAqN7YfZmMqAlwlho9
         pFVP82INdo31cgBmYjPd8LgeL4sJ/2eMAwB2E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=HU8EdFAJSr90LIUhmQTATNtKF3Qp7QogDqMI7RKok5vHcAnicFVYkofWB+4KUHHg3X
         zac35OCPf+1u19eF1nw6mAHogV7eUFkqO3wowVDyalrvxoQQe3M9Obit98ehMYh21Ep7
         TghDnCChZo6sb7w3bxWaDC/YHz0S4fTdyxVQM=
MIME-Version: 1.0
Received: by 10.204.10.147 with SMTP id p19mr3340047bkp.213.1265103004492; 
	Tue, 02 Feb 2010 01:30:04 -0800 (PST)
In-Reply-To: <6B71E6DA239541A4B4C5D937452E0B56@sv.us.sonicwall.com>
References: <F05A13A048D4425C9A8BF2D7768C06C7@sv.us.sonicwall.com> 
	<f18c9dde1002012355g60e89e55hd8c1ca394c0b2a76@mail.gmail.com> 
	<5e76f3841002020003n2b4f3ebdyc33981356427332b@mail.gmail.com> 
	<000301caa3df$458d8ee0$d0a8aca0$@de> <DB50726564B543B282DE1CD741CE7501@sv.us.sonicwall.com> 
	<000601caa3e2$39a39a40$aceacec0$@de> <6B71E6DA239541A4B4C5D937452E0B56@sv.us.sonicwall.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 2 Feb 2010 09:29:44 +0000
Message-ID: <8c4e68611002020129s3f7574a6u8b056183b4f4679d@mail.gmail.com>
Subject: Re: [Bulk] RE: [Bulk] RE: Exception while adding document in 3.0
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

> But still i didn't see much increase in performance by reusing documents and field objects.

Oh well, some you win, some you lose.  Although it sounds like you're
still winning.  Are you following all the other advice on
http://wiki.apache.org/lucene-java/ImproveIndexingSpeed.  Maybe the
best advice is to run a profiler to see where the time really is being
spent.


--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 12:22:13 2010
Return-Path: <java-user-return-44824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10265 invoked from network); 2 Feb 2010 12:22:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 12:22:13 -0000
Received: (qmail 53196 invoked by uid 500); 2 Feb 2010 12:22:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53128 invoked by uid 500); 2 Feb 2010 12:22:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53117 invoked by uid 99); 2 Feb 2010 12:22:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 12:22:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of volkanagun@gmail.com designates 209.85.220.224 as permitted sender)
Received: from [209.85.220.224] (HELO mail-fx0-f224.google.com) (209.85.220.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 12:22:01 +0000
Received: by fxm24 with SMTP id 24so1706013fxm.11
        for <java-user@lucene.apache.org>; Tue, 02 Feb 2010 04:21:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=ORaNWoDfqw4BRadEagoa+zehFWNh7W3+W8E/30t4rl8=;
        b=AnHFojTrqq1j/LMNhTYIpm8MXK/d1NXWoowHjg/zTpdtLsiXfvrOC4tvbx0U5Ersdx
         l9rl0Ay0LAxm7hZhnMuyxIs97MGzmS+y9M9cUVNgWXtM09U/guVEtfimxqnUsWyjt9pa
         jvP+D/oBZxXCGfHiRhtavQ/WexfY5LZgD48ck=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=n3IoCs/JMxYOY/0j5sf22O5ITq3whYxuxUixXAtbDh7gRcsGJNIS6anYypi7p187Be
         1DejgeiP5yv+9oAymB8G+eZ+YUcAGWDVvaJ5cZpad75o1zNpOTgxD5QuQx/SK7NPAJDA
         eVGGxn7URxKrxjgn9suW2RzpPAR+HWMqwqnZE=
Received: by 10.223.14.206 with SMTP id h14mr700283faa.92.1265113297946;
        Tue, 02 Feb 2010 04:21:37 -0800 (PST)
Received: from ?192.168.2.2? ([88.236.68.130])
        by mx.google.com with ESMTPS id 15sm2457562fxm.6.2010.02.02.04.21.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 02 Feb 2010 04:21:37 -0800 (PST)
Message-ID: <4B6818CF.20008@gmail.com>
Date: Tue, 02 Feb 2010 13:21:35 +0100
From: Hayri <volkanagun@gmail.com>
User-Agent: Thunderbird 2.0.0.23 (X11/20090817)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to use search index while indexing
References: <4B66D463.5080607@gmail.com> <8c4e68611002010632x615fb993pab21fd24d1b8c460@mail.gmail.com>
In-Reply-To: <8c4e68611002010632x615fb993pab21fd24d1b8c460@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Ian Lea wrote:
> Sounds like a job for near realtime search aka NRT.
>
> Take a look at IndexWriter.getReader().
>
> http://wiki.apache.org/lucene-java/NearRealtimeSearch
> http://www.lucidimagination.com/blog/2009/04/10/real-time-search-with-lucene/
>
> And more with the help of your favourite search engine.
>
>
> --
> Ian.
>
> On Mon, Feb 1, 2010 at 1:17 PM, Hayri <volkanagun@gmail.com> wrote:
>   
>> Hi,
>>
>> I want to search an index and at the same time continue to my indexing.
>> ParallelReader doesn't solve my problem.
>> It is obvious that I am not searching multiple indexes at the same time. How
>> can I build a document based lock, more over
>> I don't want to open and close and index every time while writing. Merging
>> new index with the old one seems really time
>> consuming and also I want to search the new index.
>>
>> Is it possible? Please give hints...
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   
Hi Thanks,

I have another related question. I want to decide whether I can index 
the document,
so basically when a new document comes I need to make a search in a 
specific field in index.
The problem is I don't need to create a IndexSearcher to search for 
every document to find if it indexed or not.
I can gather and index the documents to RAM for example. But after 
certain # of documents ?? I have to decide to
merge the index except the documents that are already in file index (for 
specific fields like unique).


   


 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 12:25:56 2010
Return-Path: <java-user-return-44825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11216 invoked from network); 2 Feb 2010 12:25:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 12:25:56 -0000
Received: (qmail 62634 invoked by uid 500); 2 Feb 2010 12:25:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62570 invoked by uid 500); 2 Feb 2010 12:25:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62560 invoked by uid 99); 2 Feb 2010 12:25:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 12:25:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 12:25:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NcHoq-0002UU-8X
	for java-user@lucene.apache.org; Tue, 02 Feb 2010 04:25:24 -0800
Message-ID: <27419562.post@talk.nabble.com>
Date: Tue, 2 Feb 2010 04:25:24 -0800 (PST)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: ComplexPhraseQueryParser (Expanded Form and Boosting)
In-Reply-To: <94A09368FBF52A4FB3B4AFEC3E425E2A257894711E@WKTOMAIL2.workopolis.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <94A09368FBF52A4FB3B4AFEC3E425E2A257894711E@WKTOMAIL2.workopolis.net>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Nariman,

In my understanding of ComplexPhraseQueryParser this class is not longer
supported.
http://issues.apache.org/jira/browse/LUCENE-1486#action_12782254

Instead with lucene 3.1 the new
org.apache.lucene.queryParser.standard.parser.StandardSyntaxParser will do
this job.
https://issues.apache.org/jira/browse/LUCENE-1823

If I am wrong, please let me now.
In particular I am very keen to see a ComplexPhraseQueryParser that does not
throw an exception for 
author:"fred* smith" 

Best regards
   Karsten
-- 
View this message in context: http://old.nabble.com/ComplexPhraseQueryParser-%28Expanded-Form-and-Boosting%29-tp27411736p27419562.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 14:10:06 2010
Return-Path: <java-user-return-44826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62407 invoked from network); 2 Feb 2010 14:10:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 14:10:06 -0000
Received: (qmail 54270 invoked by uid 500); 2 Feb 2010 14:10:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54196 invoked by uid 500); 2 Feb 2010 14:10:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54186 invoked by uid 99); 2 Feb 2010 14:10:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 14:10:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 14:09:53 +0000
Received: by bwz22 with SMTP id 22so72255bwz.5
        for <java-user@lucene.apache.org>; Tue, 02 Feb 2010 06:09:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=ZG/KOFj5L+YS0J3wa4N1Ii5Hi8Nyry+z0hb9vq/n2Gw=;
        b=RqgaPQakUp2M3aU6pCbiJhCkUGRbAx0gSmhtrqokzBMmCv8ulUdkys5HUM6rozmg3v
         asDI3ILjGj/SG1y+XKbPgASsQbGw0mUvJsm2R2/btkcU9iFZPylrxpVwq8y486ACkcAu
         pyK4HeBvm2AQnSsueenHNNqoVs2tN0T9YvOcA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Z32UzL9cgzOkNNhArthxjBpkz8lxvg7dngFauv9KgrcGxcZW1cbqeAi8zjyfgl+hww
         PhN7V9Bc5HAZezcD7/ibPNgg4xutE7eEdmqO8+soF2suzB7LtUEtnvKUzqsR0/c02ACT
         6Ci3JPc21H5EXozW3JL2sexnAXTY5N41pkBdk=
MIME-Version: 1.0
Received: by 10.204.10.147 with SMTP id p19mr3569842bkp.213.1265119771489; 
	Tue, 02 Feb 2010 06:09:31 -0800 (PST)
In-Reply-To: <4B6818CF.20008@gmail.com>
References: <4B66D463.5080607@gmail.com> <8c4e68611002010632x615fb993pab21fd24d1b8c460@mail.gmail.com> 
	<4B6818CF.20008@gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 2 Feb 2010 14:09:11 +0000
Message-ID: <8c4e68611002020609s168f9e2cmec784a1b1fa7c802@mail.gmail.com>
Subject: Re: How to use search index while indexing
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not sure that I understand the question.  Can you not use a
searcher based on the reader returned by IndexWriter.getReader() to
determine if the doc is already in the index?

Or just use IndexWriter.updateDocument to save or replace as appropriate.


--
Ian.

On Tue, Feb 2, 2010 at 12:21 PM, Hayri <volkanagun@gmail.com> wrote:
> Ian Lea wrote:
>>
>> Sounds like a job for near realtime search aka NRT.
>>
>> Take a look at IndexWriter.getReader().
>>
>> http://wiki.apache.org/lucene-java/NearRealtimeSearch
>>
>> http://www.lucidimagination.com/blog/2009/04/10/real-time-search-with-lucene/
>>
>> And more with the help of your favourite search engine.
>>
>>
>> --
>> Ian.
>>
>> On Mon, Feb 1, 2010 at 1:17 PM, Hayri <volkanagun@gmail.com> wrote:
>>
>>>
>>> Hi,
>>>
>>> I want to search an index and at the same time continue to my indexing.
>>> ParallelReader doesn't solve my problem.
>>> It is obvious that I am not searching multiple indexes at the same time.
>>> How
>>> can I build a document based lock, more over
>>> I don't want to open and close and index every time while writing.
>>> Merging
>>> new index with the old one seems really time
>>> consuming and also I want to search the new index.
>>>
>>> Is it possible? Please give hints...
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> Hi Thanks,
>
> I have another related question. I want to decide whether I can index the
> document,
> so basically when a new document comes I need to make a search in a specific
> field in index.
> The problem is I don't need to create a IndexSearcher to search for every
> document to find if it indexed or not.
> I can gather and index the documents to RAM for example. But after certain #
> of documents ?? I have to decide to
> merge the index except the documents that are already in file index (for
> specific fields like unique).

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 14:33:01 2010
Return-Path: <java-user-return-44827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74088 invoked from network); 2 Feb 2010 14:33:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 14:33:01 -0000
Received: (qmail 89116 invoked by uid 500); 2 Feb 2010 14:32:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89034 invoked by uid 500); 2 Feb 2010 14:32:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89024 invoked by uid 99); 2 Feb 2010 14:32:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 14:32:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.15] (HELO web52905.mail.re2.yahoo.com) (206.190.49.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Feb 2010 14:32:50 +0000
Received: (qmail 17981 invoked by uid 60001); 2 Feb 2010 14:32:29 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1265121149; bh=ltfWpKx3dPTn81uK7u7UA+Voxm+h2FnPP6xWYfhDqrI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=BXsMUXy/oFKVnQBQZOojNsTKEKRYI7JEW970lMtfx0UhcUR6RtiLhMvCKc9RCPGgrMOd/bw35xcA0aVsbAY/gY1I16XO8s4FZ5K5mpf87JZfIsM8hoRR6jtL684FaR1PRj3keiKqx+b5keHgm4FR0ZNrW3QrjPQypNvQjCYXNzw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=Fde3reRfRHeFkgYx52hv/bXk694+F1kLkkpc8l6X+XXIsGSL8IW1BcFxhKir0rwDkCA1zSoaNKGzhp6XRXldMQSlUk3f6jMsuY5CeB5uuSP6foITIH4LYpPhbYU5zCEuXfXHJ6GJ1DwofvDgeR0ATu4WEwWHmeJsul75aDu5UnE=;
Message-ID: <158863.93962.qm@web52905.mail.re2.yahoo.com>
X-YMail-OSG: hkEwkhEVM1mBV1SJV.vAqwUHMcIs4yfwU6rYwuGl6gFPxf95UWG8eBOO1UA8ew34KzA4zdklc447uY4sciJMtKVqKECLWKLDObhFX.lwRU0ZYYmWtjodKuJlsoN3Mm7NpoNqTyrtYBoF4e11bluYtLNKVjcsP8dJ3MRuEfGXJfqrtn6lFE2hQZdWFpIDebnXgBXx4NU_PHeLsk4R1YLAjowPPHrm2LMLZz5x3dTaOk7NSLGEI7OBTD4seRqS37WYN.7iWJiAYn65EL_.NxxMHsOSpMVe0iJ1nF2oYszv4xiEln63_uKJC4MQq1zN.Uy5wlsK9WUih_P2wIysozSbpQ--
Received: from [193.140.184.100] by web52905.mail.re2.yahoo.com via HTTP; Tue, 02 Feb 2010 06:32:28 PST
X-Mailer: YahooMailClassic/9.1.10 YahooMailWebService/0.8.100.260964
Date: Tue, 2 Feb 2010 06:32:28 -0800 (PST)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: ComplexPhraseQueryParser (Expanded Form and Boosting)
To: java-user@lucene.apache.org
In-Reply-To: <94A09368FBF52A4FB3B4AFEC3E425E2A257894711E@WKTOMAIL2.workopolis.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

> Second concern: boosting a
> phrase ("java developer"^10.0) doesn't seem to be applied
> when you look at the result explanations when using the
> ComplexPhraseQueryParser - it's respected on single word
> queries and it's respected on phrases using the basic
> QueryParser.

I just tested and able to see "product of: 10.0 = boost" in explanations. However I added a new term to the query: "java developer"^10.0 java

It seems that the queries alone "java developer"^10.0 and "java developer" are virtually equal without any other terms.


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 15:04:04 2010
Return-Path: <java-user-return-44828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87543 invoked from network); 2 Feb 2010 15:04:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 15:04:04 -0000
Received: (qmail 41766 invoked by uid 500); 2 Feb 2010 15:04:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41686 invoked by uid 500); 2 Feb 2010 15:04:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41676 invoked by uid 99); 2 Feb 2010 15:04:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 15:04:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Nariman.Haghighi@workopolis.com designates 207.164.200.12 as permitted sender)
Received: from [207.164.200.12] (HELO mail3.workopolis.com) (207.164.200.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 15:03:53 +0000
Received: from unknown (HELO WKTOHUB01.workopolis.net) ([172.28.50.225])
  by mailout.workopolis.com with ESMTP; 02 Feb 2010 09:47:33 -0500
Received: from WKTOMAIL2.workopolis.net ([fe80::5978:c90:66b3:bdee]) by
 WKTOHUB01.workopolis.net ([::1]) with mapi; Tue, 2 Feb 2010 10:03:21 -0500
From: "Haghighi, Nariman" <Nariman.Haghighi@workopolis.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 2 Feb 2010 10:03:26 -0500
Subject: RE: ComplexPhraseQueryParser (Expanded Form and Boosting)
Thread-Topic: ComplexPhraseQueryParser (Expanded Form and Boosting)
Thread-Index: AcqkFKtwEuJsodzuQ+aScAW6TSYgWQAA8MBw
Message-ID: <94A09368FBF52A4FB3B4AFEC3E425E2A2578947129@WKTOMAIL2.workopolis.net>
References: <94A09368FBF52A4FB3B4AFEC3E425E2A257894711E@WKTOMAIL2.workopolis.net>
 <158863.93962.qm@web52905.mail.re2.yahoo.com>
In-Reply-To: <158863.93962.qm@web52905.mail.re2.yahoo.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not able to see the boost applied even with an additional term added.=20

The original query:

+(JOB_TITLE:"java developer"^15.0 TEXT:"java developer") +LANGUAGE:EN +GATE=
WAY:work

Modified to:

+(JOB_TITLE:"java developer"^15.0 JOB_TITLE:java TEXT:"java developer") +LA=
NGUAGE:EN +GATEWAY:work

Produces:

39.992558 =3D (MATCH) time weighted query score is product of
  23.095446 =3D time-weight
  1.731621 =3D (MATCH) sum of:
    1.6057005 =3D (MATCH) product of:
      2.4085507 =3D (MATCH) sum of:
        2.2247097 =3D (MATCH) weight(spanNear([JOB_TITLE:java, JOB_TITLE:de=
veloper], 0, true) in 20801), product of:
          0.61919963 =3D queryWeight(spanNear([JOB_TITLE:java, JOB_TITLE:de=
veloper], 0, true)), product of:
            12.4461 =3D idf(JOB_TITLE:  developer=3D873 java=3D120)
            0.049750492 =3D queryNorm
          3.5928795 =3D (MATCH) fieldWeight(JOB_TITLE:spanNear([java, devel=
oper],0, true) in 20801), product of:
            0.57735026 =3D tf(phraseFreq=3D0.33333334)
            12.4461 =3D idf(JOB_TITLE:  developer=3D873 java=3D120)
            0.5 =3D fieldNorm(field=3DJOB_TITLE, doc=3D20801)
        0.183841 =3D (MATCH) weight(spanNear([TEXT:java, TEXT:developer], 0=
, true) in 20801), product of:
          0.50345445 =3D queryWeight(spanNear([TEXT:java, TEXT:developer], =
0, true)), product of:
            10.119588 =3D idf(TEXT:  developer=3D1290 java=3D838)
            0.049750492 =3D queryNorm
          0.36515915 =3D (MATCH) fieldWeight(TEXT:spanNear([java, developer=
], 0, true) in 20801), product of:
            0.57735026 =3D tf(phraseFreq=3D0.33333334)
            10.119588 =3D idf(TEXT:  developer=3D1290 java=3D838)
            0.0625 =3D fieldNorm(field=3DTEXT, doc=3D20801)
      0.6666667 =3D coord(2/3)
    0.07157092 =3D (MATCH) weight(LANGUAGE:EN in 20801), product of:
      0.059671503 =3D queryWeight(LANGUAGE:EN), product of:
        1.1994153 =3D idf(docFreq=3D49417, maxDocs=3D60324)
        0.049750492 =3D queryNorm
      1.1994153 =3D (MATCH) fieldWeight(LANGUAGE:EN in 20801), product of:
        1.0 =3D tf(termFreq(LANGUAGE:EN)=3D1)
        1.1994153 =3D idf(docFreq=3D49417, maxDocs=3D60324)
        1.0 =3D fieldNorm(field=3DLANGUAGE, doc=3D20801)
    0.05434969 =3D (MATCH) weight(GATEWAY:work in 20801), product of:
      0.051999267 =3D queryWeight(GATEWAY:work), product of:
        1.0452011 =3D idf(docFreq=3D57657, maxDocs=3D60324)
        0.049750492 =3D queryNorm
      1.0452011 =3D (MATCH) fieldWeight(GATEWAY:work in 20801), product of:
        1.0 =3D tf(termFreq(GATEWAY:work)=3D1)
        1.0452011 =3D idf(docFreq=3D57657, maxDocs=3D60324)
        1.0 =3D fieldNorm(field=3DGATEWAY, doc=3D20801)

-----Original Message-----
From: Ahmet Arslan [mailto:iorixxx@yahoo.com]=20
Sent: Tuesday, February 02, 2010 9:32 AM
To: java-user@lucene.apache.org
Subject: Re: ComplexPhraseQueryParser (Expanded Form and Boosting)

> Second concern: boosting a
> phrase ("java developer"^10.0) doesn't seem to be applied
> when you look at the result explanations when using the
> ComplexPhraseQueryParser - it's respected on single word
> queries and it's respected on phrases using the basic
> QueryParser.

I just tested and able to see "product of: 10.0 =3D boost" in explanations.=
 However I added a new term to the query: "java developer"^10.0 java

It seems that the queries alone "java developer"^10.0 and "java developer" =
are virtually equal without any other terms.


     =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 19:57:38 2010
Return-Path: <java-user-return-44829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16803 invoked from network); 2 Feb 2010 19:57:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 19:57:38 -0000
Received: (qmail 92156 invoked by uid 500); 2 Feb 2010 19:57:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92086 invoked by uid 500); 2 Feb 2010 19:57:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92043 invoked by uid 99); 2 Feb 2010 19:57:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 19:57:34 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of thienthanhomenh@gmail.com designates 209.85.221.189 as permitted sender)
Received: from [209.85.221.189] (HELO mail-qy0-f189.google.com) (209.85.221.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 19:57:26 +0000
Received: by qyk27 with SMTP id 27so353594qyk.13
        for <java-user@lucene.apache.org>; Tue, 02 Feb 2010 11:57:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=FC+Ia+9uJxjSiwQpkbSNvMV/IuNvbtJACref9zg6c1M=;
        b=e9QA/ME9mwLAGLNfbTab8fmK/SR6DbvHS8np6uIfooAjGhqD7eWAYt66tVodlI+ZkA
         Bwm+bAgFsZMKfxA5jAhglh12wWK030R//yi+FWEZBrt2VMayu6xCWVe1sD70DmXSbav9
         h+sckyOpldj+/yLqP5WQ8Jfqank1GIs8MX3t4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=j0YT85LVVg9AdmWeX8vWiQxV0UKcRtGp9qR5V02O6kVHiBeYV3aHHo78m/bpYBBZ6H
         lp+Ar1xn4jEnU7klYbAvexdXXLIEXE3vNpXaYuv5+2sV48CQ3rZZRjO9Tv7y/Wx1XuhA
         hS9j6Dpsp1uB3rW7wFFkbI9ZwJXlHUVpXgcyY=
MIME-Version: 1.0
Received: by 10.224.140.132 with SMTP id i4mr3059299qau.375.1265140625016; 
	Tue, 02 Feb 2010 11:57:05 -0800 (PST)
In-Reply-To: <8c4e68611001290946g5b5e5d0ctc27419f7c5752c3e@mail.gmail.com>
References: <3b23ce091001290827q22bfa182v941f140ae00f00cf@mail.gmail.com> 
	<8c4e68611001290946g5b5e5d0ctc27419f7c5752c3e@mail.gmail.com>
From: Phan The Dai <thienthanhomenh@gmail.com>
Date: Wed, 3 Feb 2010 04:56:44 +0900
Message-ID: <3b23ce091002021156p687708a5w48c409e7f39c66ec@mail.gmail.com>
Subject: Re: How further reward documents matching more query terms?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6e6968b878f047ea3812d
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd6e6968b878f047ea3812d
Content-Type: text/plain; charset=ISO-8859-1

Dear Lan Lea,
Thanks much for your reply.
Please tell me more details of coord.
what is its default?
how to customize it, why we have to define.

Thank you much for understading my question.

On Sat, Jan 30, 2010 at 2:46 AM, Ian Lea <ian.lea@gmail.com> wrote:

> I presume that quote is from the javadocs for Similarity.
>
> You can write your own Similarity class that extends DefaultSimilarity
> and provides an implementation of public float coord(int overlap, int
> maxOverlap) that does what you want, maybe by scaling up the value
> returned, if I've understood the description properly.
>
> Tell lucene to use your class by calling
> Similarity.setDefault(Similarity similarity).
>
> Warning: in my limited experience of trying to tweak lucene's scoring
> I almost always make things worse rather than better.  YMMV.  Good
> luck.
>
>
> --
> Ian.
>
>
> On Fri, Jan 29, 2010 at 4:27 PM, Phan The Dai <thienthanhomenh@gmail.com>
> wrote:
> > "When searching with a query as a multi term query, users can further
> reward
> > documents matching more query terms through a coordination factor:
> > *coord-factor(q,d)
> > "
> >
> > *How we configure this factor?
> > I am needing if documents matching more term queries then their score are
> > higher.
> >
> > Please show me more details. Thanks 1
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd6e6968b878f047ea3812d--

From java-user-return-44830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 20:00:43 2010
Return-Path: <java-user-return-44830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17842 invoked from network); 2 Feb 2010 20:00:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 20:00:43 -0000
Received: (qmail 97435 invoked by uid 500); 2 Feb 2010 20:00:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97369 invoked by uid 500); 2 Feb 2010 20:00:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97359 invoked by uid 99); 2 Feb 2010 20:00:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 20:00:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of thienthanhomenh@gmail.com designates 209.85.221.189 as permitted sender)
Received: from [209.85.221.189] (HELO mail-qy0-f189.google.com) (209.85.221.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 20:00:30 +0000
Received: by qyk27 with SMTP id 27so355296qyk.13
        for <java-user@lucene.apache.org>; Tue, 02 Feb 2010 12:00:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=oq3O5Mnf3tBisv42qeyemgJd1km43Se8rvuRO0vvaHY=;
        b=P0I49gSUpGdnpIueATueH127TQm3Bc72/wbFYeWpl5uQ7yh1KjbucWkRowutJaGVPl
         mQv6IjrtpRodcM+bbe1b/HpQ7kDeiaOTQieEgbGJf6G9dkGBOeRLiGidqQIyB5fapc0n
         8KyIt28YJGGMKHMobvVJ/8fCFyh4BJFS40UBg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=LFElbJ0l6H59yQBILCfXrwTzI/BJsyXLMeM/aGc2vvy8HO3fcODnE7Hso0sgrK8zac
         O/4mohJr8For6Q84lFkeW7diHQxh/GKxc2KXx0WS6xqnuBDw4iTMPlXR3R3F34Yuj2Lf
         OLRwgwbvy2PwfDZvwCTrvhmrU4FcbPEHozHuM=
MIME-Version: 1.0
Received: by 10.224.140.132 with SMTP id i4mr3061146qau.375.1265140809226; 
	Tue, 02 Feb 2010 12:00:09 -0800 (PST)
In-Reply-To: <SNT122-W31BD4A3A2A564100488581B1580@phx.gbl>
References: <SNT122-W31BD4A3A2A564100488581B1580@phx.gbl>
From: Phan The Dai <thienthanhomenh@gmail.com>
Date: Wed, 3 Feb 2010 04:59:49 +0900
Message-ID: <3b23ce091002021159i10598263j743f9559782f5bc0@mail.gmail.com>
Subject: Re: Getting DF & IDF
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6e696865b6c047ea38c6f
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd6e696865b6c047ea38c6f
Content-Type: text/plain; charset=ISO-8859-1

with my idea,
using BooleanQuery, you can make every thing.


On Mon, Feb 1, 2010 at 10:44 PM, Asif Nawaz <asifnawaz@hotmail.com> wrote:

>
> Hi, I am new to use lucene, I have a query string of multiple terms. i) i
> want to return query string by removing stop words and stemmed version of
> the query.
> ii) second i want to get tf and idf of each term in a query, how to get it?
>
>
>
>
>
>
>
> Asif
>
>
> _________________________________________________________________
> Hotmail: Trusted email with powerful SPAM protection.
> https://signup.live.com/signup.aspx?id=60969
>

--000e0cd6e696865b6c047ea38c6f--

From java-user-return-44831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 20:56:58 2010
Return-Path: <java-user-return-44831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46595 invoked from network); 2 Feb 2010 20:56:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 20:56:58 -0000
Received: (qmail 84232 invoked by uid 500); 2 Feb 2010 20:56:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84149 invoked by uid 500); 2 Feb 2010 20:56:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84139 invoked by uid 99); 2 Feb 2010 20:56:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 20:56:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of java8964@hotmail.com designates 65.55.111.98 as permitted sender)
Received: from [65.55.111.98] (HELO blu0-omc2-s23.blu0.hotmail.com) (65.55.111.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 20:56:47 +0000
Received: from BLU140-W35 ([65.55.111.72]) by blu0-omc2-s23.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 2 Feb 2010 12:56:26 -0800
Message-ID: <BLU140-W35EB2F82F0F670EC1F323CD0570@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_7ebcc0e2-014d-4bff-848f-9c5170442fa7_"
X-Originating-IP: [208.48.154.67]
From: java8964 java8964 <java8964@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: confused by the lucene boolean query with wildcard result
Date: Tue, 2 Feb 2010 15:56:26 -0500
Importance: Normal
In-Reply-To: <3b23ce091002021159i10598263j743f9559782f5bc0@mail.gmail.com>
References:
 <SNT122-W31BD4A3A2A564100488581B1580@phx.gbl>,<3b23ce091002021159i10598263j743f9559782f5bc0@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 02 Feb 2010 20:56:26.0423 (UTC) FILETIME=[2F754470:01CAA44A]

--_7ebcc0e2-014d-4bff-848f-9c5170442fa7_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi=2C I have the following test case point to the index generated in our ap=
plication. The result is confusing me and I don't know the reason.

Lucene version: 2.9.0
JDK 1.6.0_18

public class IndexTest1 {
    public static void main(String[] args) {
        try {
            FSDirectory directory =3D FSDirectory.open(new File("/path_to_i=
ndex_files"))=3B
            IndexSearcher searcher =3D new IndexSearcher(directory=2C true)=
=3B
            PerFieldAnalyzerWrapper wrapper =3D new PerFieldAnalyzerWrapper=
(new StandardAnalyzer())=3B
            wrapper.addAnalyzer("f1string_sif"=2C new KeywordAnalyzer())=3B
            wrapper.addAnalyzer("f2string_ti"=2C new StandardAnalyzer(Versi=
on.LUCENE_CURRENT))=3B
            Query query =3D new QueryParser("f1string_sif"=2C new StandardA=
nalyzer(Version.LUCENE_CURRENT)).parse("f2string_ti:subbank*")=3B
            System.out.println("query =3D " + query)=3B
            System.out.println("hits =3D " + searcher.search(query=2C 100).=
totalHits)=3B
            searcher.close()=3B
        } catch (Exception e) {
            System.out.println(e)=3B
        }
    }
}

Output:
query =3D f2string_ti:subbank*
hits =3D 6

If I change the line to the following:

Query query =3D new QueryParser("f1string_sif"=2C new StandardAnalyzer(Vers=
ion.LUCENE_CURRENT)).parse("f2string_ti:rdmap*")=3B

Output:
query =3D f2string_ti:rdmap*
hits =3D 4

The above result are both correct based on my data.

Now if I change the line to:

Query query =3D new QueryParser("f1string_sif"=2C new StandardAnalyzer(Vers=
ion.LUCENE_CURRENT)).parse("f2string_ti:subbank* OR f2string_ti:rdmap*")=3B

Output:
query =3D f2string_ti:subbank* f2string_ti:rdmap*
hits =3D 2


I assume the count in the last result should be larger than max(6=2C4)=2C b=
ut it is 2. Any reason for that?

Thanks

 		 	   		 =20
_________________________________________________________________
Hotmail: Trusted email with powerful SPAM protection.
http://clk.atdmt.com/GBL/go/201469227/direct/01/=

--_7ebcc0e2-014d-4bff-848f-9c5170442fa7_--

From java-user-return-44832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 21:16:35 2010
Return-Path: <java-user-return-44832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56644 invoked from network); 2 Feb 2010 21:16:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 21:16:35 -0000
Received: (qmail 21295 invoked by uid 500); 2 Feb 2010 21:16:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21221 invoked by uid 500); 2 Feb 2010 21:16:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21210 invoked by uid 99); 2 Feb 2010 21:16:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 21:16:33 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 21:16:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NcQ6O-0002DU-Ke
	for java-user@lucene.apache.org; Tue, 02 Feb 2010 13:16:04 -0800
Message-ID: <27427519.post@talk.nabble.com>
Date: Tue, 2 Feb 2010 13:16:04 -0800 (PST)
From: jchang <jchangkihatest@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can't get tokenization/stop works working
In-Reply-To: <8c4e68611002010127u2645cb56v142a28af8671e9ce@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jchangkihatest@gmail.com
References: <27400546.post@talk.nabble.com> <8c4e68611002010127u2645cb56v142a28af8671e9ce@mail.gmail.com>


I am using org.apache.lucene.analysis.snowball.SnowballAnalyzer.

Looking through luke, I see that www.fubar.com was indexed, not fubar.  So,
clearly, I'm not stripping out the stop words of www and com.  Any ideas?


-- 
View this message in context: http://old.nabble.com/Can%27t-get-tokenization-stop-works-working-tp27400546p27427519.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 21:31:13 2010
Return-Path: <java-user-return-44833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66729 invoked from network); 2 Feb 2010 21:31:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 21:31:12 -0000
Received: (qmail 44863 invoked by uid 500); 2 Feb 2010 21:31:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44781 invoked by uid 500); 2 Feb 2010 21:31:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44771 invoked by uid 99); 2 Feb 2010 21:31:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 21:31:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of java8964@hotmail.com designates 65.55.111.97 as permitted sender)
Received: from [65.55.111.97] (HELO blu0-omc2-s22.blu0.hotmail.com) (65.55.111.97)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 21:30:58 +0000
Received: from BLU140-W10 ([65.55.111.73]) by blu0-omc2-s22.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 2 Feb 2010 13:30:36 -0800
Message-ID: <BLU140-W1066E80A156B02CFC6ABB6D0570@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_6de37811-02b0-4157-bd57-065eea1daa90_"
X-Originating-IP: [208.48.154.67]
From: java8964 java8964 <java8964@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: During the wild card search, will lucene 2.9.0 to convert the
 search string to lower case?
Date: Tue, 2 Feb 2010 16:30:36 -0500
Importance: Normal
In-Reply-To: <BLU140-W157692F785244E89839A1ED0580@phx.gbl>
References:
 <27348933.post@talk.nabble.com>,<359a92831001271815y532f5007le8b89845a5d7f8e1@mail.gmail.com>,<3b23ce091001272051g2ef79c7fsde1e835955b1dcad@mail.gmail.com>,<27406592.post@talk.nabble.com>,<BLU140-W13CC0DF0E167ED77FB01FBD0580@phx.gbl>,<000c01caa35d$5b071fc0$11155f40$@de>,<BLU140-W379ACA1D14F772E0B5CC6ED0580@phx.gbl>,<000f01caa36d$7927ba90$6b772fb0$@com>,<BLU140-W157692F785244E89839A1ED0580@phx.gbl>
MIME-Version: 1.0
X-OriginalArrivalTime: 02 Feb 2010 21:30:36.0297 (UTC) FILETIME=[F5473790:01CAA44E]
X-Virus-Checked: Checked by ClamAV on apache.org

--_6de37811-02b0-4157-bd57-065eea1daa90_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable


Is there an analyzer like keyword analyzer=2C but will also lowering the da=
ta from lucene? Or I have to do a customer analyzer by myself?

Thanks

> From: java8964@hotmail.com
> To: java-user@lucene.apache.org
> Subject: RE: During the wild card search=2C will lucene 2.9.0 to convert =
the search string to lower case?
> Date: Mon=2C 1 Feb 2010 14:24:00 -0500
>=20
>=20
> This is maybe something I am looking for. We are using the default value=
=2C which is true.
>=20
> Let me examine this method more.
>=20
> Thanks for your help.
>=20
> > From: digydigy@gmail.com
> > To: java-user@lucene.apache.org
> > Subject: RE: During the wild card search=2C will lucene 2.9.0 to conver=
t the search string to lower case?
> > Date: Mon=2C 1 Feb 2010 20:36:29 +0200
> >=20
> > Did you try queryParser.SetLowercaseExpandedTerms(false)?
> >=20
> > DIGY
> >=20
> > -----Original Message-----
> > From: java8964 java8964 [mailto:java8964@hotmail.com]=20
> > Sent: Monday=2C February 01=2C 2010 8:11 PM
> > To: java-user@lucene.apache.org
> > Subject: RE: During the wild card search=2C will lucene 2.9.0 to conver=
t the
> > search string to lower case?
> >=20
> >=20
> > I would like to confirm your reply. You mean that the query parse will =
lower
> > casing. In fact=2C it looks like that it only does this for wild card q=
uery=2C
> > right?
> >=20
> > For the term query=2C it didn't. As proved by if you change the line to=
:
> >=20
> >             Query query =3D new QueryParser("title"=2C
> > wrapper).parse("title:\"BBB CCC\"")=3B
> >=20
> > You will get 1 hits back. So in this case=2C the query parser class did=
 in
> > different way for term query and wild card query.
> >=20
> > We have to use the query parse in this case=2C but we have our own Quer=
y
> > parser class extends from the lucene query parser class. Anything we ca=
n do
> > to about it?
> >=20
> > Will lucense's query parser class be fixed for the above inconsistent
> > implementation?
> >=20
> > Thanks
> >=20
> >=20
> > > From: uwe@thetaphi.de
> > > To: java-user@lucene.apache.org
> > > Subject: RE: During the wild card search=2C will lucene 2.9.0 to conv=
ert the
> > search string to lower case?
> > > Date: Mon=2C 1 Feb 2010 17:41:08 +0100
> > >=20
> > > Only query parser does the lower casing. For such a special case=2C I=
 would
> > suggest to use a PrefixQuery or WildcardQuery directly and not use quer=
y
> > parser.
> > >=20
> > > -----
> > > Uwe Schindler
> > > H.-H.-Meier-Allee 63=2C D-28213 Bremen
> > > http://www.thetaphi.de
> > > eMail: uwe@thetaphi.de
> > >=20
> > > > -----Original Message-----
> > > > From: java8964 java8964 [mailto:java8964@hotmail.com]
> > > > Sent: Monday=2C February 01=2C 2010 5:27 PM
> > > > To: java-user@lucene.apache.org
> > > > Subject: During the wild card search=2C will lucene 2.9.0 to conver=
t the
> > > > search string to lower case?
> > > >=20
> > > >=20
> > > > I noticed a strange result from the following test case. For wildca=
rd
> > > > search=2C my understanding is that lucene will NOT use any analyzer=
 on
> > > > the query string. But as the following simple code to show=2C it lo=
oks
> > > > like that lucene will lower case the search query in the wildcard
> > > > search. Why? If not=2C why the following test case show the search =
hits
> > > > as one for lower case wildcard search=2C but not for the upper case=
 data?
> > > > My original data is NOT analyzed=2C so they should be stored as the
> > > > original data in the index segment=2C right?
> > > >=20
> > > > Lucene version: 2.9.0
> > > >=20
> > > > JDK version: JDK 1.6.0_17
> > > >=20
> > > >=20
> > > > public class IndexTest1 {
> > > >     public static void main(String[] args) {
> > > >         try {
> > > >             Directory directory =3D new RAMDirectory()=3B
> > > >             IndexWriter writer =3D new IndexWriter(directory=2C new
> > > > StandardAnalyzer(Version.LUCENE_CURRENT)=2C
> > > > IndexWriter.MaxFieldLength.UNLIMITED)=3B
> > > >             Document doc =3D new Document()=3B
> > > >             doc.add(new Field("title"=2C "BBB CCC"=2C Field.Store.Y=
ES=2C
> > > > Field.Index.NOT_ANALYZED))=3B
> > > >             writer.addDocument(doc)=3B
> > > >             doc =3D new Document()=3B
> > > >             doc.add(new Field("title"=2C "ddd eee"=2C Field.Store.Y=
ES=2C
> > > > Field.Index.NOT_ANALYZED))=3B
> > > >             writer.addDocument(doc)=3B
> > > >=20
> > > >             writer.close()=3B
> > > >=20
> > > >             IndexSearcher searcher =3D new IndexSearcher(directory=
=2C
> > > > true)=3B
> > > >             PerFieldAnalyzerWrapper wrapper =3D new
> > > > PerFieldAnalyzerWrapper(new StandardAnalyzer(Version.LUCENE_CURRENT=
))=3B
> > > >             wrapper.addAnalyzer("title"=2C new KeywordAnalyzer())=
=3B
> > > >             Query query =3D new QueryParser("title"=2C
> > > >                     wrapper).parse("title:BBB*")=3B
> > > >             System.out.println("hits of title =3D " +
> > > > searcher.search(query=2C 100).totalHits)=3B
> > > >             query =3D new QueryParser("title"=2C
> > > >                     wrapper).parse("title:ddd*")=3B
> > > >             System.out.println("hits of title =3D " +
> > > > searcher.search(query=2C 100).totalHits)=3B
> > > >             searcher.close()=3B
> > > >         } catch (Exception e) {
> > > >             System.out.println(e)=3B
> > > >         }
> > > >     }
> > > > }
> > > >=20
> > > > The output:
> > > > hits of title =3D 0
> > > > hits of title =3D 1
> > > >=20
> > > >=20
> > > > _________________________________________________________________
> > > > Hotmail: Trusted email with powerful SPAM protection.
> > > > http://clk.atdmt.com/GBL/go/201469227/direct/01/
> > >=20
> > >=20
> > > ---------------------------------------------------------------------
> > > To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands=2C e-mail: java-user-help@lucene.apache.org
> > >=20
> >  		 	   		 =20
> > _________________________________________________________________
> > Hotmail: Powerful Free email with security by Microsoft.
> > http://clk.atdmt.com/GBL/go/201469230/direct/01/
> >=20
> >=20
> > ---------------------------------------------------------------------
> > To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands=2C e-mail: java-user-help@lucene.apache.org
> >=20
>  		 	   		 =20
> _________________________________________________________________
> Hotmail: Trusted email with Microsoft=92s powerful SPAM protection.
> http://clk.atdmt.com/GBL/go/201469226/direct/01/
 		 	   		 =20
_________________________________________________________________
Hotmail: Powerful Free email with security by Microsoft.
http://clk.atdmt.com/GBL/go/201469230/direct/01/=

--_6de37811-02b0-4157-bd57-065eea1daa90_--

From java-user-return-44834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 02 21:47:20 2010
Return-Path: <java-user-return-44834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78319 invoked from network); 2 Feb 2010 21:47:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Feb 2010 21:47:20 -0000
Received: (qmail 77256 invoked by uid 500); 2 Feb 2010 21:47:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77176 invoked by uid 500); 2 Feb 2010 21:47:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77166 invoked by uid 99); 2 Feb 2010 21:47:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 21:47:17 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of digydigy@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Feb 2010 21:47:06 +0000
Received: by ey-out-2122.google.com with SMTP id d26so148531eyd.3
        for <java-user@lucene.apache.org>; Tue, 02 Feb 2010 13:46:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references
         :in-reply-to:subject:date:message-id:mime-version:content-type
         :x-mailer:thread-index:content-language;
        bh=xZ1Wr8zzjSbyJSVG9R1zOVC5FeWuMaJZOkXlTXHViko=;
        b=OxxR9PWgP7Abu7OSg2myDVxkW1dvcOdGMbm3K6/RXVDgnOf8LP/n0C0Zxi8x3OTJxk
         9xLZNM8ZArFgHGBVzfMHBtGPMoUvwNB7CFDidJ/+eJr2uLtGkkd4f9x67jXmQgt89ARk
         ArgjJv7Eic3WM+7HeigaojhGgtErJiXsXeTmg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:x-mailer:thread-index:content-language;
        b=tNkH80HPoJZQsfQ3gg2GfSEYof/OjAegxN6cEPP5+C+UQf9Y2Ts/nA/Tea2eUPVck5
         GY6tSn39yHOW9jSwXyYnVp3uF1RjZCO4Atq5Q4LMhgVLxWT+G7606oyj6kN6Igw5c7H+
         4lje57nSTU4Bf2wR2CGLa90yPBNrn4NjbVVEg=
Received: by 10.213.103.10 with SMTP id i10mr1220415ebo.97.1265147205946;
        Tue, 02 Feb 2010 13:46:45 -0800 (PST)
Received: from NEWPC ([81.213.206.230])
        by mx.google.com with ESMTPS id 7sm13876362eyg.1.2010.02.02.13.46.43
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 02 Feb 2010 13:46:44 -0800 (PST)
From: "Digy" <digydigy@gmail.com>
To: <java-user@lucene.apache.org>
References: <27400546.post@talk.nabble.com> <8c4e68611002010127u2645cb56v142a28af8671e9ce@mail.gmail.com> <27427519.post@talk.nabble.com>
In-Reply-To: <27427519.post@talk.nabble.com>
Subject: RE: Can't get tokenization/stop works working
Date: Tue, 2 Feb 2010 23:46:37 +0200
Message-ID: <002e01caa451$334c5ff0$99e51fd0$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_002F_01CAA461.F6D52FF0"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqkTP/TUwiwK5qtQp2ZXyHe0F2znwAAuz0A
Content-Language: tr
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_002F_01CAA461.F6D52FF0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Seeing "www.fubar.com" in the index means that your analyzer returns it as a
single token. To strip out "www" and "com", you have to use an analyzer that
returns tokens as "www", "fubar" and " com". 

Try to use a different analyzer( or write your own  as below ).

 

    //a C# example

    public class LetterOrDigitAnalyzer : Analyzer

    {

        public override TokenStream TokenStream(string fieldName,
System.IO.TextReader reader)

        {

            TokenStream t = new LetterOrDigitTokenizer(reader);

            t = new LowerCaseFilter(t);

            return t;

        }

    }

 

    public class LetterOrDigitTokenizer : CharTokenizer

    {

        public LetterOrDigitTokenizer(TextReader input) : base(input)

        {

        }

 

        protected override bool IsTokenChar(char c)

        {

            return char.IsLetterOrDigit(c);

        }

    }

 

 

DIGY

 

-----Original Message-----
From: jchang [mailto:jchangkihatest@gmail.com] 
Sent: Tuesday, February 02, 2010 11:16 PM
To: java-user@lucene.apache.org
Subject: Re: Can't get tokenization/stop works working

 

 

I am using org.apache.lucene.analysis.snowball.SnowballAnalyzer.

 

Looking through luke, I see that www.fubar.com was indexed, not fubar.  So,

clearly, I'm not stripping out the stop words of www and com.  Any ideas?

 

 

-- 

View this message in context:
http://old.nabble.com/Can%27t-get-tokenization-stop-works-working-tp27400546
p27427519.html

Sent from the Lucene - Java Users mailing list archive at Nabble.com.

 

 

---------------------------------------------------------------------

To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

For additional commands, e-mail: java-user-help@lucene.apache.org


------=_NextPart_000_002F_01CAA461.F6D52FF0--


From java-user-return-44835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 01:27:11 2010
Return-Path: <java-user-return-44835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71206 invoked from network); 3 Feb 2010 01:27:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 01:27:11 -0000
Received: (qmail 71065 invoked by uid 500); 3 Feb 2010 01:27:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70987 invoked by uid 500); 3 Feb 2010 01:27:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70977 invoked by uid 99); 3 Feb 2010 01:27:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 01:27:08 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.78] (HELO web53208.mail.re2.yahoo.com) (206.190.49.78)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 03 Feb 2010 01:27:00 +0000
Received: (qmail 47808 invoked by uid 60001); 3 Feb 2010 01:26:37 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1265160397; bh=L0wgqtzjw2R+/CIMmWwzvtCjKHpM3KukcFVF5JX8u8w=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=E9q7JxezxlPU+qX2gVHwwkqvCxqNosJg0X8x59MBPNvMsg0Rsh95CoXF0ZYaePtLK5f4GvZH8p5vIFHlJ9BUynfwo/4NHjr66re6jYJU3dCzfMXLcV1PfN/JM4zBk1oFdXD+lWtRS2e6QN00vzKDnfD5wjqA7rYbW2JSmW39u0o=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=HduHC5z8yvrmJN87I3cRLyWMNX3zBVRlohj3Q/NOuxP3c5+NCLMyZ+LRifiLUa03hxUUmiD62lBqpHlR7AhTf6V3GnxYEJQFMEKfEmBUGGN9m/7C6b2rS8baHuzirTqmOTOE//wFGnysjkEm056jpoSTX/EghU6CTvD+l1gwRMM=;
Message-ID: <805803.47041.qm@web53208.mail.re2.yahoo.com>
X-YMail-OSG: hd48EO4VM1kSnXygd2uhlguDpPfl1n6I8.KRfVloRrIau_Ypk.DX8P.JTijZah_.kZ6FbYbgz.6qS9oFnWhxlV0dbllBkxBKI4aYk7R3Mmss8T0ieC7p41fV.j.4a8irBziyL5PxEWDnmTqUjLSItjC4YH2OTDGFB4OuViRmQ_Ue_IyjPLHUkBGZqMfdkrddnz.MVTg6OVYrNLDxXqJ8UZGJk7CYi1JSx9D4ZguyRgQHzsSav8d_BhBH4b1fOSDyLUnWiiIwfWCyxw47PQr8KQF_REeN1UJqyZcKGqKPtrcl5JXDwVVMUPKr8iGZRxc3D8MR0gD3.8oF9YDq8ig.l3I-
Received: from [98.100.214.146] by web53208.mail.re2.yahoo.com via HTTP; Tue, 02 Feb 2010 17:26:37 PST
X-Mailer: YahooMailRC/272.7 YahooMailWebService/0.8.100.260964
Date: Tue, 2 Feb 2010 17:26:37 -0800 (PST)
From: Mike Polzin <mikepolzin@yahoo.com>
Subject: Limiting search result for web search engine
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1910336816-1265160397=:47041"

--0-1910336816-1265160397=:47041
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

I am working on building a web search engine and I would like to build a re=
ults page similar to what Google does. The functionality I am looking to in=
clude is what I refer to a "rolling up" sites, meaning that even if a parti=
cular site (defined by its base URL)=A0has many relevent hits on various pa=
ges=A0for the searches keywords, that site is only shown once in the result=
s listing with a link to the most relevent hit on that site. What I do not =
want is to have one site dominate a search results page. =0A=0ADoes it make=
 sense to just do the search, get the hits list and then programatically re=
move the results which, although they meet the search criteria, are not as =
relevent? Is there a way to do this through queries?=0A=0AThanks in advance=
!=0A=0AMike=0A=0A=0A      
--0-1910336816-1265160397=:47041--

From java-user-return-44836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 01:58:08 2010
Return-Path: <java-user-return-44836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86756 invoked from network); 3 Feb 2010 01:58:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 01:58:08 -0000
Received: (qmail 93848 invoked by uid 500); 3 Feb 2010 01:58:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93773 invoked by uid 500); 3 Feb 2010 01:58:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93763 invoked by uid 99); 3 Feb 2010 01:58:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 01:58:06 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.216.186 as permitted sender)
Received: from [209.85.216.186] (HELO mail-px0-f186.google.com) (209.85.216.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 01:57:57 +0000
Received: by pxi16 with SMTP id 16so774409pxi.29
        for <java-user@lucene.apache.org>; Tue, 02 Feb 2010 17:57:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=tBdJR61SQ2b0N83deqcbAm41qp7/AXp5t6l7GXb8ktg=;
        b=xK4t7GiaKfMjkWjyowsqu1MkrtsNSVDlDnZcEUVDGTtXMfwkk/D+faQ1ezUdPZRs+q
         aWTn+oG3pTgSe1ooTyY8JTM6QVX0po1XC8NrC7eu4G8yA3Izx/gZi5lT05iVvETyCkjF
         ufH7iWePrWP5GyOPMlniW6bbNDYC87MP3x7iA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=RK1X/Vm22DuHEoK33ei/o+gt+EiRKhRUWaUoddQn/Lch+9VdnpH1t4wlG9g3qJZDSb
         Q23MBitULZ8WVQn8ByAsIfQQJvq7kTtg74OqMg9QY5gKf9AKRZlepPGpucsDX6yhhXZR
         9QqLuANTjd9Kxvb+0I9mhBhgkTSL+kqDhhJBg=
MIME-Version: 1.0
Received: by 10.114.248.25 with SMTP id v25mr4597697wah.74.1265162256219; Tue, 
	02 Feb 2010 17:57:36 -0800 (PST)
In-Reply-To: <805803.47041.qm@web53208.mail.re2.yahoo.com>
References: <805803.47041.qm@web53208.mail.re2.yahoo.com>
From: Anshum <anshumg@gmail.com>
Date: Wed, 3 Feb 2010 07:27:16 +0530
Message-ID: <867513fe1002021757t53533a49he725a0dda1a77b8@mail.gmail.com>
Subject: Re: Limiting search result for web search engine
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64ddac8dd80a4047ea88a81
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64ddac8dd80a4047ea88a81
Content-Type: text/plain; charset=ISO-8859-1

Hi Mike,
Not really through queries, but you may do this by writing a custom
collector. You'd need some supporting data structure to mark/hash the
occurrence of a domain in your result set.

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Wed, Feb 3, 2010 at 6:56 AM, Mike Polzin <mikepolzin@yahoo.com> wrote:

> I am working on building a web search engine and I would like to build a
> reults page similar to what Google does. The functionality I am looking to
> include is what I refer to a "rolling up" sites, meaning that even if a
> particular site (defined by its base URL) has many relevent hits on various
> pages for the searches keywords, that site is only shown once in the results
> listing with a link to the most relevent hit on that site. What I do not
> want is to have one site dominate a search results page.
>
> Does it make sense to just do the search, get the hits list and then
> programatically remove the results which, although they meet the search
> criteria, are not as relevent? Is there a way to do this through queries?
>
> Thanks in advance!
>
> Mike
>
>
>

--0016e64ddac8dd80a4047ea88a81--

From java-user-return-44837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 09:47:10 2010
Return-Path: <java-user-return-44837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36837 invoked from network); 3 Feb 2010 09:47:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 09:47:10 -0000
Received: (qmail 99334 invoked by uid 500); 3 Feb 2010 09:47:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99261 invoked by uid 500); 3 Feb 2010 09:47:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99251 invoked by uid 99); 3 Feb 2010 09:47:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 09:47:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.214 as permitted sender)
Received: from [209.85.218.214] (HELO mail-bw0-f214.google.com) (209.85.218.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 09:47:00 +0000
Received: by bwz6 with SMTP id 6so745804bwz.11
        for <java-user@lucene.apache.org>; Wed, 03 Feb 2010 01:46:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=ljGO8095Ka4AAsmJU3HsUmRo8/itVEGfbqgqY8u2ylg=;
        b=NY9Be3yHTB4HeplRbkdTIe8hbukmDR77hgKHyeop7BcBtdjC+U0BGGe5KmWyhMTFqV
         lYtP4kxYPNOzODb/hWyQQOwdAjxMkufqZQTuWGl5cWxYboQ/A59CMYvjrlJYohCnFK09
         TG/UCOA++JGB0qu+G7Bl6RznLEQOYCpBbFHOM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=fDme1J/8N5vnHvB/FitiT1jxB3o6A1pX1AT63p7JUT9orzUKNRI1Gyv3hoW02EdV5k
         WglCDyhqfu2WuaccZOFkOslk7YuRdo9TcSZuZqAel6LQ/aDw+3Ttrpx2KBXkeUhcFkzI
         tLKDX3B1nGyjeDyeXO7lojUzZgSxUQgeXSJe4=
MIME-Version: 1.0
Received: by 10.204.6.26 with SMTP id 26mr1556135bkx.123.1265190399199; Wed, 
	03 Feb 2010 01:46:39 -0800 (PST)
In-Reply-To: <3b23ce091002021156p687708a5w48c409e7f39c66ec@mail.gmail.com>
References: <3b23ce091001290827q22bfa182v941f140ae00f00cf@mail.gmail.com> 
	<8c4e68611001290946g5b5e5d0ctc27419f7c5752c3e@mail.gmail.com> 
	<3b23ce091002021156p687708a5w48c409e7f39c66ec@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 3 Feb 2010 09:46:19 +0000
Message-ID: <8c4e68611002030146s3aa5e313kbd4251fa356aa33@mail.gmail.com>
Subject: Re: How further reward documents matching more query terms?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

If you read the javadocs and source for DefaultSimilarity you'll know
as much about it as I do, and see what the default is.  To customize
it, write your own subclass as I said before.


--
Ian.


On Tue, Feb 2, 2010 at 7:56 PM, Phan The Dai <thienthanhomenh@gmail.com> wr=
ote:
> Dear Lan Lea,
> Thanks much for your reply.
> Please tell me more details of coord.
> what is its default?
> how to customize it, why we have to define.
>
> Thank you much for understading my question.
>
> On Sat, Jan 30, 2010 at 2:46 AM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> I presume that quote is from the javadocs for Similarity.
>>
>> You can write your own Similarity class that extends DefaultSimilarity
>> and provides an implementation of public float coord(int overlap, int
>> maxOverlap) that does what you want, maybe by scaling up the value
>> returned, if I've understood the description properly.
>>
>> Tell lucene to use your class by calling
>> Similarity.setDefault(Similarity similarity).
>>
>> Warning: in my limited experience of trying to tweak lucene's scoring
>> I almost always make things worse rather than better. =A0YMMV. =A0Good
>> luck.
>>
>>
>> --
>> Ian.
>>
>>
>> On Fri, Jan 29, 2010 at 4:27 PM, Phan The Dai <thienthanhomenh@gmail.com=
>
>> wrote:
>> > "When searching with a query as a multi term query, users can further
>> reward
>> > documents matching more query terms through a coordination factor:
>> > *coord-factor(q,d)
>> > "
>> >
>> > *How we configure this factor?
>> > I am needing if documents matching more term queries then their score =
are
>> > higher.
>> >
>> > Please show me more details. Thanks 1
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 10:03:18 2010
Return-Path: <java-user-return-44838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43842 invoked from network); 3 Feb 2010 10:03:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 10:03:18 -0000
Received: (qmail 16885 invoked by uid 500); 3 Feb 2010 10:03:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16799 invoked by uid 500); 3 Feb 2010 10:03:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16789 invoked by uid 99); 3 Feb 2010 10:03:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 10:03:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.214 as permitted sender)
Received: from [209.85.218.214] (HELO mail-bw0-f214.google.com) (209.85.218.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 10:03:07 +0000
Received: by bwz6 with SMTP id 6so755900bwz.11
        for <java-user@lucene.apache.org>; Wed, 03 Feb 2010 02:02:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=cW4mCGYElJfJmsRIXxtSCmEXxZUm30+QGJJsPYH0YxU=;
        b=LH3duKi/A9fuFi+IFOWWL1PyhTo0ZE6vt6/ErBubhQjQkBYD5r5N3u6wmk2dM9YyOK
         8ujeTRLngFEzzeWnfnnXw/SfEjyjI8dPLNsUbaN0GzrQNEaQkoPMnohT/+qwD2VBdGAV
         UqzuqayPKwXTBs/Ir7kB9NVfWdK9SzOKGK4jU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=L60m972aMsa/IbFbK3DITv9E0SCkYSWeOEji5NJaFPR0ECI3zI+1yiQH7uYQeFRBb9
         h4tGsfHbHMySD1zdt3xC47/vtuWgGtmo2ouOJxi54NyEj4SCrBYwlXQPaUHxfafUVJ9Y
         nqKovOngSEchKFsPEqd2HO4OsWf9Js6M5nal0=
MIME-Version: 1.0
Received: by 10.204.23.20 with SMTP id p20mr3495280bkb.54.1265191367173; Wed, 
	03 Feb 2010 02:02:47 -0800 (PST)
In-Reply-To: <BLU140-W35EB2F82F0F670EC1F323CD0570@phx.gbl>
References: <SNT122-W31BD4A3A2A564100488581B1580@phx.gbl> <3b23ce091002021159i10598263j743f9559782f5bc0@mail.gmail.com> 
	<BLU140-W35EB2F82F0F670EC1F323CD0570@phx.gbl>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 3 Feb 2010 10:02:27 +0000
Message-ID: <8c4e68611002030202v486d78e2p6247799f75bedb3e@mail.gmail.com>
Subject: Re: confused by the lucene boolean query with wildcard result
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You should probably be using your PerFieldAnalyzerWrapper in your
calls to QueryParser but apart from that I can't see any obvious
reason.  General advice: use Luke to check what has been indexed and
read http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_no_hits_=
.2BAC8_incorrect_hits.3F

If none of these help, post again but showing what you are indexing as
well as how you are searching - the smallest possible test case or
self-contained program that shows the problem.

Or maybe someone else will spot the problem.


--
Ian.



On Tue, Feb 2, 2010 at 8:56 PM, java8964 java8964 <java8964@hotmail.com> wr=
ote:
>
> Hi, I have the following test case point to the index generated in our ap=
plication. The result is confusing me and I don't know the reason.
>
> Lucene version: 2.9.0
> JDK 1.6.0_18
>
> public class IndexTest1 {
> =A0 =A0public static void main(String[] args) {
> =A0 =A0 =A0 =A0try {
> =A0 =A0 =A0 =A0 =A0 =A0FSDirectory directory =3D FSDirectory.open(new Fil=
e("/path_to_index_files"));
> =A0 =A0 =A0 =A0 =A0 =A0IndexSearcher searcher =3D new IndexSearcher(direc=
tory, true);
> =A0 =A0 =A0 =A0 =A0 =A0PerFieldAnalyzerWrapper wrapper =3D new PerFieldAn=
alyzerWrapper(new StandardAnalyzer());
> =A0 =A0 =A0 =A0 =A0 =A0wrapper.addAnalyzer("f1string_sif", new KeywordAna=
lyzer());
> =A0 =A0 =A0 =A0 =A0 =A0wrapper.addAnalyzer("f2string_ti", new StandardAna=
lyzer(Version.LUCENE_CURRENT));
> =A0 =A0 =A0 =A0 =A0 =A0Query query =3D new QueryParser("f1string_sif", ne=
w StandardAnalyzer(Version.LUCENE_CURRENT)).parse("f2string_ti:subbank*");
> =A0 =A0 =A0 =A0 =A0 =A0System.out.println("query =3D " + query);
> =A0 =A0 =A0 =A0 =A0 =A0System.out.println("hits =3D " + searcher.search(q=
uery, 100).totalHits);
> =A0 =A0 =A0 =A0 =A0 =A0searcher.close();
> =A0 =A0 =A0 =A0} catch (Exception e) {
> =A0 =A0 =A0 =A0 =A0 =A0System.out.println(e);
> =A0 =A0 =A0 =A0}
> =A0 =A0}
> }
>
> Output:
> query =3D f2string_ti:subbank*
> hits =3D 6
>
> If I change the line to the following:
>
> Query query =3D new QueryParser("f1string_sif", new StandardAnalyzer(Vers=
ion.LUCENE_CURRENT)).parse("f2string_ti:rdmap*");
>
> Output:
> query =3D f2string_ti:rdmap*
> hits =3D 4
>
> The above result are both correct based on my data.
>
> Now if I change the line to:
>
> Query query =3D new QueryParser("f1string_sif", new StandardAnalyzer(Vers=
ion.LUCENE_CURRENT)).parse("f2string_ti:subbank* OR f2string_ti:rdmap*");
>
> Output:
> query =3D f2string_ti:subbank* f2string_ti:rdmap*
> hits =3D 2
>
>
> I assume the count in the last result should be larger than max(6,4), but=
 it is 2. Any reason for that?
>
> Thanks
>
>
> _________________________________________________________________
> Hotmail: Trusted email with powerful SPAM protection.
> http://clk.atdmt.com/GBL/go/201469227/direct/01/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 10:07:04 2010
Return-Path: <java-user-return-44839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45021 invoked from network); 3 Feb 2010 10:07:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 10:07:04 -0000
Received: (qmail 23463 invoked by uid 500); 3 Feb 2010 10:07:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23389 invoked by uid 500); 3 Feb 2010 10:07:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23378 invoked by uid 99); 3 Feb 2010 10:07:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 10:07:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.214 as permitted sender)
Received: from [209.85.218.214] (HELO mail-bw0-f214.google.com) (209.85.218.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 10:06:53 +0000
Received: by bwz6 with SMTP id 6so758400bwz.11
        for <java-user@lucene.apache.org>; Wed, 03 Feb 2010 02:06:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=6hqF3BYSm9I87+SmCZiAN/OHB841F4XVqN+SwgkiTfY=;
        b=LOWL15v0prA85kfh0Nr/octuYQmCIwCHb1Ey+lvqubKOVpq565tiQfptl9k1ouFOM9
         /iRkfzymwgyZNVU4YdYXzq3HsIows1P5evy0GS2CUQ55/HDjEVucDl6z10y33IrdWsSn
         ANeNW4jLOqbOn33hPB/MgVZipZu+PrBkbKKT4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=dObVRsRJFKslDCP6uZ6omrvyAT5isTR0zLaOvDLwAbscJEo20mCnng5qwWiQfu5Z/W
         270frWGhZ2vsk2VN824ByW0AEy6RMUU3O7yHsallkdiPJenzOqT09doI2MXr8m8USnpO
         H5TJ0zfKIEE/GkCMRiuLCzikuOP1no+GRR69Q=
MIME-Version: 1.0
Received: by 10.204.8.73 with SMTP id g9mr1882245bkg.146.1265191584173; Wed, 
	03 Feb 2010 02:06:24 -0800 (PST)
In-Reply-To: <BLU140-W1066E80A156B02CFC6ABB6D0570@phx.gbl>
References: <27348933.post@talk.nabble.com> <359a92831001271815y532f5007le8b89845a5d7f8e1@mail.gmail.com> 
	<3b23ce091001272051g2ef79c7fsde1e835955b1dcad@mail.gmail.com> 
	<27406592.post@talk.nabble.com> <BLU140-W13CC0DF0E167ED77FB01FBD0580@phx.gbl> 
	<000c01caa35d$5b071fc0$11155f40$@de> <BLU140-W379ACA1D14F772E0B5CC6ED0580@phx.gbl> 
	<000f01caa36d$7927ba90$6b772fb0$@com> <BLU140-W157692F785244E89839A1ED0580@phx.gbl> 
	<BLU140-W1066E80A156B02CFC6ABB6D0570@phx.gbl>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 3 Feb 2010 10:06:04 +0000
Message-ID: <8c4e68611002030206x6591a9d1je24801f3237173a2@mail.gmail.com>
Subject: Re: During the wild card search, will lucene 2.9.0 to convert the 
	search string to lower case?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

I think you'll have to write your own.  Or just downcase the text
yourself first.


--
Ian.


On Tue, Feb 2, 2010 at 9:30 PM, java8964 java8964 <java8964@hotmail.com> wr=
ote:
>
> Is there an analyzer like keyword analyzer, but will also lowering the da=
ta from lucene? Or I have to do a customer analyzer by myself?
>
> Thanks
>
>> From: java8964@hotmail.com
>> To: java-user@lucene.apache.org
>> Subject: RE: During the wild card search, will lucene 2.9.0 to convert t=
he search string to lower case?
>> Date: Mon, 1 Feb 2010 14:24:00 -0500
>>
>>
>> This is maybe something I am looking for. We are using the default value=
, which is true.
>>
>> Let me examine this method more.
>>
>> Thanks for your help.
>>
>> > From: digydigy@gmail.com
>> > To: java-user@lucene.apache.org
>> > Subject: RE: During the wild card search, will lucene 2.9.0 to convert=
 the search string to lower case?
>> > Date: Mon, 1 Feb 2010 20:36:29 +0200
>> >
>> > Did you try queryParser.SetLowercaseExpandedTerms(false)?
>> >
>> > DIGY
>> >
>> > -----Original Message-----
>> > From: java8964 java8964 [mailto:java8964@hotmail.com]
>> > Sent: Monday, February 01, 2010 8:11 PM
>> > To: java-user@lucene.apache.org
>> > Subject: RE: During the wild card search, will lucene 2.9.0 to convert=
 the
>> > search string to lower case?
>> >
>> >
>> > I would like to confirm your reply. You mean that the query parse will=
 lower
>> > casing. In fact, it looks like that it only does this for wild card qu=
ery,
>> > right?
>> >
>> > For the term query, it didn't. As proved by if you change the line to:
>> >
>> > =A0 =A0 =A0 =A0 =A0 =A0 Query query =3D new QueryParser("title",
>> > wrapper).parse("title:\"BBB CCC\"");
>> >
>> > You will get 1 hits back. So in this case, the query parser class did =
in
>> > different way for term query and wild card query.
>> >
>> > We have to use the query parse in this case, but we have our own Query
>> > parser class extends from the lucene query parser class. Anything we c=
an do
>> > to about it?
>> >
>> > Will lucense's query parser class be fixed for the above inconsistent
>> > implementation?
>> >
>> > Thanks
>> >
>> >
>> > > From: uwe@thetaphi.de
>> > > To: java-user@lucene.apache.org
>> > > Subject: RE: During the wild card search, will lucene 2.9.0 to conve=
rt the
>> > search string to lower case?
>> > > Date: Mon, 1 Feb 2010 17:41:08 +0100
>> > >
>> > > Only query parser does the lower casing. For such a special case, I =
would
>> > suggest to use a PrefixQuery or WildcardQuery directly and not use que=
ry
>> > parser.
>> > >
>> > > -----
>> > > Uwe Schindler
>> > > H.-H.-Meier-Allee 63, D-28213 Bremen
>> > > http://www.thetaphi.de
>> > > eMail: uwe@thetaphi.de
>> > >
>> > > > -----Original Message-----
>> > > > From: java8964 java8964 [mailto:java8964@hotmail.com]
>> > > > Sent: Monday, February 01, 2010 5:27 PM
>> > > > To: java-user@lucene.apache.org
>> > > > Subject: During the wild card search, will lucene 2.9.0 to convert=
 the
>> > > > search string to lower case?
>> > > >
>> > > >
>> > > > I noticed a strange result from the following test case. For wildc=
ard
>> > > > search, my understanding is that lucene will NOT use any analyzer =
on
>> > > > the query string. But as the following simple code to show, it loo=
ks
>> > > > like that lucene will lower case the search query in the wildcard
>> > > > search. Why? If not, why the following test case show the search h=
its
>> > > > as one for lower case wildcard search, but not for the upper case =
data?
>> > > > My original data is NOT analyzed, so they should be stored as the
>> > > > original data in the index segment, right?
>> > > >
>> > > > Lucene version: 2.9.0
>> > > >
>> > > > JDK version: JDK 1.6.0_17
>> > > >
>> > > >
>> > > > public class IndexTest1 {
>> > > > =A0 =A0 public static void main(String[] args) {
>> > > > =A0 =A0 =A0 =A0 try {
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 Directory directory =3D new RAMDirectory()=
;
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 IndexWriter writer =3D new IndexWriter(dir=
ectory, new
>> > > > StandardAnalyzer(Version.LUCENE_CURRENT),
>> > > > IndexWriter.MaxFieldLength.UNLIMITED);
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 Document doc =3D new Document();
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 doc.add(new Field("title", "BBB CCC", Fiel=
d.Store.YES,
>> > > > Field.Index.NOT_ANALYZED));
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 writer.addDocument(doc);
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 doc =3D new Document();
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 doc.add(new Field("title", "ddd eee", Fiel=
d.Store.YES,
>> > > > Field.Index.NOT_ANALYZED));
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 writer.addDocument(doc);
>> > > >
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 writer.close();
>> > > >
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 IndexSearcher searcher =3D new IndexSearch=
er(directory,
>> > > > true);
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 PerFieldAnalyzerWrapper wrapper =3D new
>> > > > PerFieldAnalyzerWrapper(new StandardAnalyzer(Version.LUCENE_CURREN=
T));
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 wrapper.addAnalyzer("title", new KeywordAn=
alyzer());
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 Query query =3D new QueryParser("title",
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 wrapper).parse("title:BBB*=
");
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 System.out.println("hits of title =3D " +
>> > > > searcher.search(query, 100).totalHits);
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 query =3D new QueryParser("title",
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 wrapper).parse("title:ddd*=
");
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 System.out.println("hits of title =3D " +
>> > > > searcher.search(query, 100).totalHits);
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 searcher.close();
>> > > > =A0 =A0 =A0 =A0 } catch (Exception e) {
>> > > > =A0 =A0 =A0 =A0 =A0 =A0 System.out.println(e);
>> > > > =A0 =A0 =A0 =A0 }
>> > > > =A0 =A0 }
>> > > > }
>> > > >
>> > > > The output:
>> > > > hits of title =3D 0
>> > > > hits of title =3D 1
>> > > >
>> > > >
>> > > > _________________________________________________________________
>> > > > Hotmail: Trusted email with powerful SPAM protection.
>> > > > http://clk.atdmt.com/GBL/go/201469227/direct/01/
>> > >
>> > >
>> > > --------------------------------------------------------------------=
-
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> >
>> > _________________________________________________________________
>> > Hotmail: Powerful Free email with security by Microsoft.
>> > http://clk.atdmt.com/GBL/go/201469230/direct/01/
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>>
>> _________________________________________________________________
>> Hotmail: Trusted email with Microsoft=92s powerful SPAM protection.
>> http://clk.atdmt.com/GBL/go/201469226/direct/01/
>
> _________________________________________________________________
> Hotmail: Powerful Free email with security by Microsoft.
> http://clk.atdmt.com/GBL/go/201469230/direct/01/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 10:18:00 2010
Return-Path: <java-user-return-44840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50959 invoked from network); 3 Feb 2010 10:17:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 10:17:59 -0000
Received: (qmail 38942 invoked by uid 500); 3 Feb 2010 10:17:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38871 invoked by uid 500); 3 Feb 2010 10:17:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38861 invoked by uid 99); 3 Feb 2010 10:17:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 10:17:57 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 10:17:47 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 287FC45FB56
	for <java-user@lucene.apache.org>; Wed,  3 Feb 2010 11:17:25 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id LR2vAOlSdOhY for <java-user@lucene.apache.org>;
	Wed,  3 Feb 2010 11:17:10 +0100 (CET)
Received: from VEGA (unknown [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 8497D45FB38
	for <java-user@lucene.apache.org>; Wed,  3 Feb 2010 11:17:10 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <27348933.post@talk.nabble.com> <359a92831001271815y532f5007le8b89845a5d7f8e1@mail.gmail.com> 	<3b23ce091001272051g2ef79c7fsde1e835955b1dcad@mail.gmail.com> 	<27406592.post@talk.nabble.com> <BLU140-W13CC0DF0E167ED77FB01FBD0580@phx.gbl> 	<000c01caa35d$5b071fc0$11155f40$@de> <BLU140-W379ACA1D14F772E0B5CC6ED0580@phx.gbl> 	<000f01caa36d$7927ba90$6b772fb0$@com> <BLU140-W157692F785244E89839A1ED0580@phx.gbl> 	<BLU140-W1066E80A156B02CFC6ABB6D0570@phx.gbl> <8c4e68611002030206x6591a9d1je24801f3237173a2@mail.gmail.com>
In-Reply-To: <8c4e68611002030206x6591a9d1je24801f3237173a2@mail.gmail.com>
Subject: RE: During the wild card search, will lucene 2.9.0 to convert the 	search string to lower case?
Date: Wed, 3 Feb 2010 11:17:27 +0100
Message-ID: <001e01caa4ba$1668a6f0$4339f4d0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqkuKhqVsIg35+1R1+RdJ2E8g4h7wAAPgIg
Content-Language: de

For specific fields using a special TokenStream chain, there is no need =
to write a separate analyzer. You can add fields to a document using a =
TokenStream as parameter: new Field(name, TokenStream).

As TokenStream just create a chain from Tokenizer and all Filters like:

TokenStream ts =3D new KeywordTokenizer(new StringReader("your text to =
index"));
ts =3D new LowercaseFilter(ts);
...
document.add("fieldname", ts);

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Ian Lea [mailto:ian.lea@gmail.com]
> Sent: Wednesday, February 03, 2010 11:06 AM
> To: java-user@lucene.apache.org
> Subject: Re: During the wild card search, will lucene 2.9.0 to convert
> the search string to lower case?
>=20
> I think you'll have to write your own.  Or just downcase the text
> yourself first.
>=20
>=20
> --
> Ian.
>=20
>=20
> On Tue, Feb 2, 2010 at 9:30 PM, java8964 java8964
> <java8964@hotmail.com> wrote:
> >
> > Is there an analyzer like keyword analyzer, but will also lowering
> the data from lucene? Or I have to do a customer analyzer by myself?
> >
> > Thanks
> >
> >> From: java8964@hotmail.com
> >> To: java-user@lucene.apache.org
> >> Subject: RE: During the wild card search, will lucene 2.9.0 to
> convert the search string to lower case?
> >> Date: Mon, 1 Feb 2010 14:24:00 -0500
> >>
> >>
> >> This is maybe something I am looking for. We are using the default
> value, which is true.
> >>
> >> Let me examine this method more.
> >>
> >> Thanks for your help.
> >>
> >> > From: digydigy@gmail.com
> >> > To: java-user@lucene.apache.org
> >> > Subject: RE: During the wild card search, will lucene 2.9.0 to
> convert the search string to lower case?
> >> > Date: Mon, 1 Feb 2010 20:36:29 +0200
> >> >
> >> > Did you try queryParser.SetLowercaseExpandedTerms(false)?
> >> >
> >> > DIGY
> >> >
> >> > -----Original Message-----
> >> > From: java8964 java8964 [mailto:java8964@hotmail.com]
> >> > Sent: Monday, February 01, 2010 8:11 PM
> >> > To: java-user@lucene.apache.org
> >> > Subject: RE: During the wild card search, will lucene 2.9.0 to
> convert the
> >> > search string to lower case?
> >> >
> >> >
> >> > I would like to confirm your reply. You mean that the query parse
> will lower
> >> > casing. In fact, it looks like that it only does this for wild
> card query,
> >> > right?
> >> >
> >> > For the term query, it didn't. As proved by if you change the =
line
> to:
> >> >
> >> >             Query query =3D new QueryParser("title",
> >> > wrapper).parse("title:\"BBB CCC\"");
> >> >
> >> > You will get 1 hits back. So in this case, the query parser class
> did in
> >> > different way for term query and wild card query.
> >> >
> >> > We have to use the query parse in this case, but we have our own
> Query
> >> > parser class extends from the lucene query parser class. Anything
> we can do
> >> > to about it?
> >> >
> >> > Will lucense's query parser class be fixed for the above
> inconsistent
> >> > implementation?
> >> >
> >> > Thanks
> >> >
> >> >
> >> > > From: uwe@thetaphi.de
> >> > > To: java-user@lucene.apache.org
> >> > > Subject: RE: During the wild card search, will lucene 2.9.0 to
> convert the
> >> > search string to lower case?
> >> > > Date: Mon, 1 Feb 2010 17:41:08 +0100
> >> > >
> >> > > Only query parser does the lower casing. For such a special
> case, I would
> >> > suggest to use a PrefixQuery or WildcardQuery directly and not =
use
> query
> >> > parser.
> >> > >
> >> > > -----
> >> > > Uwe Schindler
> >> > > H.-H.-Meier-Allee 63, D-28213 Bremen
> >> > > http://www.thetaphi.de
> >> > > eMail: uwe@thetaphi.de
> >> > >
> >> > > > -----Original Message-----
> >> > > > From: java8964 java8964 [mailto:java8964@hotmail.com]
> >> > > > Sent: Monday, February 01, 2010 5:27 PM
> >> > > > To: java-user@lucene.apache.org
> >> > > > Subject: During the wild card search, will lucene 2.9.0 to
> convert the
> >> > > > search string to lower case?
> >> > > >
> >> > > >
> >> > > > I noticed a strange result from the following test case. For
> wildcard
> >> > > > search, my understanding is that lucene will NOT use any
> analyzer on
> >> > > > the query string. But as the following simple code to show, =
it
> looks
> >> > > > like that lucene will lower case the search query in the
> wildcard
> >> > > > search. Why? If not, why the following test case show the
> search hits
> >> > > > as one for lower case wildcard search, but not for the upper
> case data?
> >> > > > My original data is NOT analyzed, so they should be stored as
> the
> >> > > > original data in the index segment, right?
> >> > > >
> >> > > > Lucene version: 2.9.0
> >> > > >
> >> > > > JDK version: JDK 1.6.0_17
> >> > > >
> >> > > >
> >> > > > public class IndexTest1 {
> >> > > >     public static void main(String[] args) {
> >> > > >         try {
> >> > > >             Directory directory =3D new RAMDirectory();
> >> > > >             IndexWriter writer =3D new IndexWriter(directory,
> new
> >> > > > StandardAnalyzer(Version.LUCENE_CURRENT),
> >> > > > IndexWriter.MaxFieldLength.UNLIMITED);
> >> > > >             Document doc =3D new Document();
> >> > > >             doc.add(new Field("title", "BBB CCC",
> Field.Store.YES,
> >> > > > Field.Index.NOT_ANALYZED));
> >> > > >             writer.addDocument(doc);
> >> > > >             doc =3D new Document();
> >> > > >             doc.add(new Field("title", "ddd eee",
> Field.Store.YES,
> >> > > > Field.Index.NOT_ANALYZED));
> >> > > >             writer.addDocument(doc);
> >> > > >
> >> > > >             writer.close();
> >> > > >
> >> > > >             IndexSearcher searcher =3D new
> IndexSearcher(directory,
> >> > > > true);
> >> > > >             PerFieldAnalyzerWrapper wrapper =3D new
> >> > > > PerFieldAnalyzerWrapper(new
> StandardAnalyzer(Version.LUCENE_CURRENT));
> >> > > >             wrapper.addAnalyzer("title", new
> KeywordAnalyzer());
> >> > > >             Query query =3D new QueryParser("title",
> >> > > >                     wrapper).parse("title:BBB*");
> >> > > >             System.out.println("hits of title =3D " +
> >> > > > searcher.search(query, 100).totalHits);
> >> > > >             query =3D new QueryParser("title",
> >> > > >                     wrapper).parse("title:ddd*");
> >> > > >             System.out.println("hits of title =3D " +
> >> > > > searcher.search(query, 100).totalHits);
> >> > > >             searcher.close();
> >> > > >         } catch (Exception e) {
> >> > > >             System.out.println(e);
> >> > > >         }
> >> > > >     }
> >> > > > }
> >> > > >
> >> > > > The output:
> >> > > > hits of title =3D 0
> >> > > > hits of title =3D 1
> >> > > >
> >> > > >
> >> > > >
> _________________________________________________________________
> >> > > > Hotmail: Trusted email with powerful SPAM protection.
> >> > > > http://clk.atdmt.com/GBL/go/201469227/direct/01/
> >> > >
> >> > >
> >> > > =
----------------------------------------------------------------
> -----
> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > > For additional commands, e-mail: java-user-
> help@lucene.apache.org
> >> > >
> >> >
> >> > _________________________________________________________________
> >> > Hotmail: Powerful Free email with security by Microsoft.
> >> > http://clk.atdmt.com/GBL/go/201469230/direct/01/
> >> >
> >> >
> >> > =
------------------------------------------------------------------
> ---
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >>
> >> _________________________________________________________________
> >> Hotmail: Trusted email with Microsoft=E2=80=99s powerful SPAM =
protection.
> >> http://clk.atdmt.com/GBL/go/201469226/direct/01/
> >
> > _________________________________________________________________
> > Hotmail: Powerful Free email with security by Microsoft.
> > http://clk.atdmt.com/GBL/go/201469230/direct/01/
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 10:39:57 2010
Return-Path: <java-user-return-44841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63762 invoked from network); 3 Feb 2010 10:39:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 10:39:56 -0000
Received: (qmail 70658 invoked by uid 500); 3 Feb 2010 10:39:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70552 invoked by uid 500); 3 Feb 2010 10:39:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70533 invoked by uid 99); 3 Feb 2010 10:39:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 10:39:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of uboness@gmail.com designates 209.85.219.218 as permitted sender)
Received: from [209.85.219.218] (HELO mail-ew0-f218.google.com) (209.85.219.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 10:39:42 +0000
Received: by ewy10 with SMTP id 10so816577ewy.11
        for <multiple recipients>; Wed, 03 Feb 2010 02:39:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type;
        bh=Bde2II3ZgITDPmrwAV5c9M0rXqevUw2pCMtIF8MsDQg=;
        b=Phf4YL7kzQRCVqFmvAEAFNGFjd1U5mMiZarfaYQu9/5mSA5JVFGVwNfZIXSqfA99nV
         2f7Hg0bvcCcOB5s3nhtllQZkcCch1xzDKItas79mDaOzmNB+tTPFOP4UyzhJWjrDa49j
         +MYCwTkZWr2UtDUmzRZNPmSoCXzsh6F2O/7To=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type;
        b=VqMF9WiAWFjoqCDWxkvRXzoF/YhZQY4g1EfrIxbY6qQwZc+K+QtxZu5kv/DNRBwTQ+
         KsIU2fMlF0/8oMJe0HciZq2Grtn08N1jewtRkxMKiZPhIKEteX82lS2qRsNqE8FVqFKs
         mimfp1YXRwuZSuRxXwwlHqElWml138K9vIkOQ=
Received: by 10.213.104.89 with SMTP id n25mr1887482ebo.78.1265193560349;
        Wed, 03 Feb 2010 02:39:20 -0800 (PST)
Received: from ?192.168.1.59? ([87.213.1.143])
        by mx.google.com with ESMTPS id 5sm2386545eyh.8.2010.02.03.02.39.18
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 03 Feb 2010 02:39:18 -0800 (PST)
Message-ID: <4B695255.4010104@gmail.com>
Date: Wed, 03 Feb 2010 11:39:17 +0100
From: Uri Boness <uboness@gmail.com>
User-Agent: Thunderbird 2.0.0.23 (X11/20090817)
MIME-Version: 1.0
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
Subject: Lucene User Group Meetup in Amsterdam
Content-Type: multipart/alternative;
 boundary="------------090100090809070007070609"

--------------090100090809070007070609
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi All,

On 17th February we'll host the first Dutch Lucene User Group Meetup. 
This meet-up will be split into two parts:

- The first part will be dedicated to the user group itself. We'll have 
an introduction to the members and have an open discussion about the 
goals of the user group and the expectations from it.

- In the second part, Anne Veling (http://www.beyondtrees.com) will give 
a session about his latest experiences with large scale Solr deployments.

Of course, you will not only get food for thought, but also food for you 
stomach - we'll have a pizza break between the parts and of course beer 
during & after.

Date:             17th February 2010
Time:             17:00
Location:       Frederiksplein 1
                      1017XK Amsterdam
                      The Netherlands

For more information or questions, please visit: 
http://www.lucene-nl.org/first_meetup

Hope to see you there!

Cheers,
Uri

--------------090100090809070007070609--

From java-user-return-44842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 11:00:07 2010
Return-Path: <java-user-return-44842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70942 invoked from network); 3 Feb 2010 11:00:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 11:00:07 -0000
Received: (qmail 6831 invoked by uid 500); 3 Feb 2010 11:00:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6753 invoked by uid 500); 3 Feb 2010 11:00:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6743 invoked by uid 99); 3 Feb 2010 11:00:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 11:00:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of asifnawaz@hotmail.com designates 65.55.90.108 as permitted sender)
Received: from [65.55.90.108] (HELO snt0-omc2-s33.snt0.hotmail.com) (65.55.90.108)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 10:59:54 +0000
Received: from SNT122-W1 ([65.55.90.72]) by snt0-omc2-s33.snt0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 3 Feb 2010 02:59:33 -0800
Message-ID: <SNT122-W18A81FC9181B3FABB6B77B1560@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_ae5d4a44-3efa-4529-ab52-961f86b0f78f_"
X-Originating-IP: [116.58.92.131]
From: Asif Nawaz <asifnawaz@hotmail.com>
To: Java Lucene <java-user@lucene.apache.org>
Subject: RE: Getting DF & IDF
Date: Wed, 3 Feb 2010 15:59:33 +0500
Importance: Normal
In-Reply-To: <3b23ce091002021159i10598263j743f9559782f5bc0@mail.gmail.com>
References:
 <SNT122-W31BD4A3A2A564100488581B1580@phx.gbl>,<3b23ce091002021159i10598263j743f9559782f5bc0@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 03 Feb 2010 10:59:33.0441 (UTC) FILETIME=[F7ABA310:01CAA4BF]

--_ae5d4a44-3efa-4529-ab52-961f86b0f78f_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable


In HotelDatabase project of lucene=2C Following code is written in performS=
earch method of SearchEngine class.

Let queryString =3D "Located in the heart of paris"

Analyzer analyzer =3D new StandardAnalyzer()=3B
IndexSearcher is =3D new IndexSearcher("index")=3B
QueryParser parser =3D new QueryParser("content"=2C analyzer)=3B
Query query =3D parser.parse(queryString)=3B
Hits hits =3D is.search(query)=3B

To be specific what i want here
i) Removing stop words from query string and use stemming=2C so new query s=
tring should become "Locate heart paris"
ii) How to get term frequency (tf) of each word in query?
iii) How to get Document Frequency(df) of each word in query?
iv) How to get Inverse Document Frequency (idf) of each word in query?


Can u please let me know some solution that give answer of all my four ques=
tions. Or can you refer me to some sample code.  I have tried boolean query=
 but unable to do this.




> From: thienthanhomenh@gmail.com
> Date: Wed=2C 3 Feb 2010 04:59:49 +0900
> Subject: Re: Getting DF & IDF
> To: java-user@lucene.apache.org
>=20
> with my idea=2C
> using BooleanQuery=2C you can make every thing.
>=20
>=20
> On Mon=2C Feb 1=2C 2010 at 10:44 PM=2C Asif Nawaz <asifnawaz@hotmail.com>=
 wrote:
>=20
> >
> > Hi=2C I am new to use lucene=2C I have a query string of multiple terms=
. i) i
> > want to return query string by removing stop words and stemmed version =
of
> > the query.
> > ii) second i want to get tf and idf of each term in a query=2C how to g=
et it?
> >
> >
> >
> >
> >
> >
> >
> > Asif
> >
> >
> > _________________________________________________________________
> > Hotmail: Trusted email with powerful SPAM protection.
> > https://signup.live.com/signup.aspx?id=3D60969
> >
 		 	   		 =20
_________________________________________________________________
Hotmail: Trusted email with Microsoft=92s powerful SPAM protection.
https://signup.live.com/signup.aspx?id=3D60969=

--_ae5d4a44-3efa-4529-ab52-961f86b0f78f_--

From java-user-return-44843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 11:00:26 2010
Return-Path: <java-user-return-44843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71033 invoked from network); 3 Feb 2010 11:00:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 11:00:26 -0000
Received: (qmail 8630 invoked by uid 500); 3 Feb 2010 11:00:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8571 invoked by uid 500); 3 Feb 2010 11:00:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8561 invoked by uid 99); 3 Feb 2010 11:00:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 11:00:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 11:00:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nccxd-00086q-TO
	for java-user@lucene.apache.org; Wed, 03 Feb 2010 02:59:53 -0800
Message-ID: <27434620.post@talk.nabble.com>
Date: Wed, 3 Feb 2010 02:59:53 -0800 (PST)
From: Suraj Parida <parida.suraj@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching compressed text using CompressionTools
In-Reply-To: <8c4e68611002010417pd7a6d36wb976c61c7bb176f3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: parida.suraj@gmail.com
References: <27402945.post@talk.nabble.com> <001d01caa334$2bae98d0$830bca70$@de> <27403169.post@talk.nabble.com> <8c4e68611002010417pd7a6d36wb976c61c7bb176f3@mail.gmail.com>


Ian,

Thanks for solving my previous problems.


Now i tested the compression with 100 docs and found:
  1. With Compression size of FS directory (on disk)=3D 10.8 KB
  2. Without Compression size of FS directory (on disk) =3D 12.0 MB

and with 500 docs:
  1. With Compression size of FS directory (on disk) =3D 45.9 KB
  2. Without Compression size of FS directory (on disk)  =3D 56.8 MB

I mean do the compression will increase my disk usage ? if so will 50,000
docs take around 6000 MB?
or please tell if am i doing wrong somewhere because i thought compression
will reduce space usage.

Regards,
Suraj=20





Ian Lea wrote:
>=20
> Please read Uwe's answers again.  I think he has already answered all
> your questions.
>=20
> The javadocs for 2.9.1 are very useful when upgrading to 3.0.0.  Read
> the entry for Field.Store.COMPRESS.
>=20
>=20
> --
> Ian.
>=20
>=20
>=20
> On Mon, Feb 1, 2010 at 12:04 PM, Suraj Parida <parida.suraj@gmail.com>
> wrote:
>>
>> Uwe,
>>
>> Thanks for the reply.
>>
>> I am confused with
>> =C2=A0 =C2=A0document.add(new Field(key, value, Field.Store.COMPRESS,
>> Field.Index.ANALYZED));
>>
>> =C2=A0My requirement is also the same, but how can i do it in 3.0 ?
>> =C2=A0i thought CompressionTools would be used for compression.
>>
>> Basically i need to compress the text which content of a document and
>> there
>> are around 50,000 documents and still increasing in number. =C2=A0If pos=
sible
>> please send a code or hint as an example.
>>
>> Regards,
>> Suraj
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> Uwe Schindler wrote:
>>>
>>> Compression is only used for *stored* fields. For indexing there is no
>>> compression available (how should that work). You must clearly
>>> differentiate between stored and indexed fields!
>>>
>>> -----
>>> Uwe Schindler
>>> H.-H.-Meier-Allee 63, D-28213 Bremen
>>> http://www.thetaphi.de
>>> eMail: uwe@thetaphi.de
>>>
>>>> -----Original Message-----
>>>> From: Suraj Parida [mailto:parida.suraj@gmail.com]
>>>> Sent: Monday, February 01, 2010 12:44 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Searching compressed text using CompressionTools
>>>>
>>>>
>>>> Hi,
>>>>
>>>> I want to compress a text field (due to its large size and spaces),
>>>> during
>>>> indexing.
>>>>
>>>> I am unable to get the same also want to search.
>>>>
>>>>
>>>> My code during compressing is as follows:
>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 String value =3D "Some large text=
 ......
>>>> ";
>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0byte[] valuesbyte =3D
>>>> CompressionTools.compress(value.getBytes());
>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0final Field f =3D new Field(key, valuesby=
te,
>>>> Field.Store.YES);
>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0f.setOmitTermFreqAndPositions(true);
>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0f.setOmitNorms(true);
>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 document.add(f);
>>>>
>>>> Please tell me how to search and display this value.
>>>>
>>>> Regards
>>>> Suraj
>>>> --
>>>> View this message in context: http://old.nabble.com/Searching-
>>>> compressed-text-using-CompressionTools-tp27402945p27402945.html
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> --
>> View this message in context:
>> http://old.nabble.com/Searching-compressed-text-using-CompressionTools-t=
p27402945p27403169.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/Searching-compressed-te=
xt-using-CompressionTools-tp27402945p27434620.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 11:02:30 2010
Return-Path: <java-user-return-44844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71958 invoked from network); 3 Feb 2010 11:02:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 11:02:30 -0000
Received: (qmail 11392 invoked by uid 500); 3 Feb 2010 11:02:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11315 invoked by uid 500); 3 Feb 2010 11:02:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11305 invoked by uid 99); 3 Feb 2010 11:02:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 11:02:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 11:02:20 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Ncczf-0008J6-Ai
	for java-user@lucene.apache.org; Wed, 03 Feb 2010 03:01:59 -0800
Message-ID: <27434651.post@talk.nabble.com>
Date: Wed, 3 Feb 2010 03:01:59 -0800 (PST)
From: Suraj Parida <parida.suraj@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching compressed text using CompressionTools
In-Reply-To: <27434620.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: parida.suraj@gmail.com
References: <27402945.post@talk.nabble.com> <001d01caa334$2bae98d0$830bca70$@de> <27403169.post@talk.nabble.com> <8c4e68611002010417pd7a6d36wb976c61c7bb176f3@mail.gmail.com> <27434620.post@talk.nabble.com>


Ian,

Small correction made ...

Thanks for solving my previous problems.


Now i tested the compression with 100 docs and found:
  1. Without Compression size of FS directory (on disk)= 10.8 KB
  2. With Compression size of FS directory (on disk) = 12.0 MB

and with 500 docs:
  1. Without Compression size of FS directory (on disk) = 45.9 KB
  2. With Compression size of FS directory (on disk)  = 56.8 MB

I mean do the compression will increase my disk usage ? if so will 50,000
docs take around 6000 MB?
or please tell if am i doing wrong somewhere because i thought compression
will reduce space usage.

Regards,
Suraj 
-- 
View this message in context: http://old.nabble.com/Searching-compressed-text-using-CompressionTools-tp27402945p27434651.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 12:11:55 2010
Return-Path: <java-user-return-44845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91842 invoked from network); 3 Feb 2010 12:11:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 12:11:55 -0000
Received: (qmail 92348 invoked by uid 500); 3 Feb 2010 12:11:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92281 invoked by uid 500); 3 Feb 2010 12:11:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92234 invoked by uid 99); 3 Feb 2010 12:11:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 12:11:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.214 as permitted sender)
Received: from [209.85.218.214] (HELO mail-bw0-f214.google.com) (209.85.218.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 12:11:43 +0000
Received: by bwz6 with SMTP id 6so842298bwz.11
        for <java-user@lucene.apache.org>; Wed, 03 Feb 2010 04:11:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=XAcbBm5Nl0EQ20la+ZvKKI53uT3v971cI9cjxyKw+7c=;
        b=G+921oEx8kHAqYB3nth3NQV5QPAxN5l2knQAK+X1r7xIq9tXcKlfz18/LAUZw73pY+
         VkUI7YKEhCYKkZsZf1GIhdBDSWwSsrYJ5NTMhs0NO/4yd8vd74rBVBtVffH4YSej8RzL
         9J8BWwLUO4MnyHv4GMIZMqKboTS9qLzPQMwVo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=bXIiLZExusanuSb53cMcvBSqu49CTqqAWaVkPZ5r0razyknp7G5ShNkk+AHM3NhnZa
         WA8YdwDc66FlPfj0zmRRX8P9FOjz2Xx6DiG25Rma4gkYDGA2lKHYt9zpNq4Giz3ukJAY
         0FOW664MNix5yI0w+mj4+WgJnMC6HPvafeRWo=
MIME-Version: 1.0
Received: by 10.204.142.7 with SMTP id o7mr511705bku.92.1265199082527; Wed, 03 
	Feb 2010 04:11:22 -0800 (PST)
In-Reply-To: <27434651.post@talk.nabble.com>
References: <27402945.post@talk.nabble.com> <001d01caa334$2bae98d0$830bca70$@de> 
	<27403169.post@talk.nabble.com> <8c4e68611002010417pd7a6d36wb976c61c7bb176f3@mail.gmail.com> 
	<27434620.post@talk.nabble.com> <27434651.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 3 Feb 2010 12:11:02 +0000
Message-ID: <8c4e68611002030411u65938924j56f2789c3693cc33@mail.gmail.com>
Subject: Re: Searching compressed text using CompressionTools
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Are you saying that by using compression your index size goes up by a
factor of more than 1024?  From c10 kilobytes to 12 megabytes?

Compressing small fields can cause the index to get bigger rather than
smaller but obviously not by that much.

--
Ian.


On Wed, Feb 3, 2010 at 11:01 AM, Suraj Parida <parida.suraj@gmail.com> wrot=
e:
>
> Ian,
>
> Small correction made ...
>
> Thanks for solving my previous problems.
>
>
> Now i tested the compression with 100 docs and found:
> =A01. Without Compression size of FS directory (on disk)=3D 10.8 KB
> =A02. With Compression size of FS directory (on disk) =3D 12.0 MB
>
> and with 500 docs:
> =A01. Without Compression size of FS directory (on disk) =3D 45.9 KB
> =A02. With Compression size of FS directory (on disk) =A0=3D 56.8 MB
>
> I mean do the compression will increase my disk usage ? if so will 50,000
> docs take around 6000 MB?
> or please tell if am i doing wrong somewhere because i thought compressio=
n
> will reduce space usage.
>
> Regards,
> Suraj
> --
> View this message in context: http://old.nabble.com/Searching-compressed-=
text-using-CompressionTools-tp27402945p27434651.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 15:07:48 2010
Return-Path: <java-user-return-44846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62451 invoked from network); 3 Feb 2010 15:07:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 15:07:48 -0000
Received: (qmail 16673 invoked by uid 500); 3 Feb 2010 15:07:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16613 invoked by uid 500); 3 Feb 2010 15:07:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16594 invoked by uid 99); 3 Feb 2010 15:07:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 15:07:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of java8964@hotmail.com designates 65.55.111.93 as permitted sender)
Received: from [65.55.111.93] (HELO blu0-omc2-s18.blu0.hotmail.com) (65.55.111.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 15:07:36 +0000
Received: from BLU140-W21 ([65.55.111.71]) by blu0-omc2-s18.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 3 Feb 2010 07:07:15 -0800
Message-ID: <BLU140-W2195853EE4D994ECA4BD55D0560@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_176fa4a8-ec6e-480f-a141-e13dc57d50c9_"
X-Originating-IP: [208.48.154.67]
From: java8964 java8964 <java8964@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: During the wild card search, will lucene 2.9.0 to convert the
 	search string to lower case?
Date: Wed, 3 Feb 2010 10:07:15 -0500
Importance: Normal
In-Reply-To: <001e01caa4ba$1668a6f0$4339f4d0$@de>
References: <27348933.post@talk.nabble.com>
 <359a92831001271815y532f5007le8b89845a5d7f8e1@mail.gmail.com>
 	<3b23ce091001272051g2ef79c7fsde1e835955b1dcad@mail.gmail.com>
 	<27406592.post@talk.nabble.com>
 <BLU140-W13CC0DF0E167ED77FB01FBD0580@phx.gbl>
 	<000c01caa35d$5b071fc0$11155f40$@de>
 <BLU140-W379ACA1D14F772E0B5CC6ED0580@phx.gbl>
 	<000f01caa36d$7927ba90$6b772fb0$@com>
 <BLU140-W157692F785244E89839A1ED0580@phx.gbl>
 	<BLU140-W1066E80A156B02CFC6ABB6D0570@phx.gbl>
 <8c4e68611002030206x6591a9d1je24801f3237173a2@mail.gmail.com>,<001e01caa4ba$1668a6f0$4339f4d0$@de>
MIME-Version: 1.0
X-OriginalArrivalTime: 03 Feb 2010 15:07:15.0331 (UTC) FILETIME=[920C1530:01CAA4E2]

--_176fa4a8-ec6e-480f-a141-e13dc57d50c9_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable


Thanks for your help.

My concern now is that the field could be defined as store. So when the use=
r receive the field data=2C we want to still show the original data=2C in u=
pper case in this case.

First=2C I don't think I can use queryParser.SetLowercaseExpandedTerms(fals=
e)=2C which will remove the wildcard search case insensitive functionality =
for tokenized field.

To handle this case=2C if the data is NOT tokenized=2C but contain upper ca=
se data=2C to be able do the wildcard search with uppercase letter=2C like =
'BB*'=2C I am thinking that I have to analyzer the non tokenized data=2C us=
ing a KeywordTokenizer plus lowercase the data.

For your suggestion=2C will the data change to lower case and stored in the=
 lucene when it being retrieved?

Thanks

> From: uwe@thetaphi.de
> To: java-user@lucene.apache.org
> Subject: RE: During the wild card search=2C will lucene 2.9.0 to convert =
the 	search string to lower case?
> Date: Wed=2C 3 Feb 2010 11:17:27 +0100
>=20
> For specific fields using a special TokenStream chain=2C there is no need=
 to write a separate analyzer. You can add fields to a document using a Tok=
enStream as parameter: new Field(name=2C TokenStream).
>=20
> As TokenStream just create a chain from Tokenizer and all Filters like:
>=20
> TokenStream ts =3D new KeywordTokenizer(new StringReader("your text to in=
dex"))=3B
> ts =3D new LowercaseFilter(ts)=3B
> ...
> document.add("fieldname"=2C ts)=3B
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63=2C D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
>=20
> > -----Original Message-----
> > From: Ian Lea [mailto:ian.lea@gmail.com]
> > Sent: Wednesday=2C February 03=2C 2010 11:06 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: During the wild card search=2C will lucene 2.9.0 to conver=
t
> > the search string to lower case?
> >=20
> > I think you'll have to write your own.  Or just downcase the text
> > yourself first.
> >=20
> >=20
> > --
> > Ian.
> >=20
> >=20
> > On Tue=2C Feb 2=2C 2010 at 9:30 PM=2C java8964 java8964
> > <java8964@hotmail.com> wrote:
> > >
> > > Is there an analyzer like keyword analyzer=2C but will also lowering
> > the data from lucene? Or I have to do a customer analyzer by myself?
> > >
> > > Thanks
> > >
> > >> From: java8964@hotmail.com
> > >> To: java-user@lucene.apache.org
> > >> Subject: RE: During the wild card search=2C will lucene 2.9.0 to
> > convert the search string to lower case?
> > >> Date: Mon=2C 1 Feb 2010 14:24:00 -0500
> > >>
> > >>
> > >> This is maybe something I am looking for. We are using the default
> > value=2C which is true.
> > >>
> > >> Let me examine this method more.
> > >>
> > >> Thanks for your help.
> > >>
> > >> > From: digydigy@gmail.com
> > >> > To: java-user@lucene.apache.org
> > >> > Subject: RE: During the wild card search=2C will lucene 2.9.0 to
> > convert the search string to lower case?
> > >> > Date: Mon=2C 1 Feb 2010 20:36:29 +0200
> > >> >
> > >> > Did you try queryParser.SetLowercaseExpandedTerms(false)?
> > >> >
> > >> > DIGY
> > >> >
> > >> > -----Original Message-----
> > >> > From: java8964 java8964 [mailto:java8964@hotmail.com]
> > >> > Sent: Monday=2C February 01=2C 2010 8:11 PM
> > >> > To: java-user@lucene.apache.org
> > >> > Subject: RE: During the wild card search=2C will lucene 2.9.0 to
> > convert the
> > >> > search string to lower case?
> > >> >
> > >> >
> > >> > I would like to confirm your reply. You mean that the query parse
> > will lower
> > >> > casing. In fact=2C it looks like that it only does this for wild
> > card query=2C
> > >> > right?
> > >> >
> > >> > For the term query=2C it didn't. As proved by if you change the li=
ne
> > to:
> > >> >
> > >> >             Query query =3D new QueryParser("title"=2C
> > >> > wrapper).parse("title:\"BBB CCC\"")=3B
> > >> >
> > >> > You will get 1 hits back. So in this case=2C the query parser clas=
s
> > did in
> > >> > different way for term query and wild card query.
> > >> >
> > >> > We have to use the query parse in this case=2C but we have our own
> > Query
> > >> > parser class extends from the lucene query parser class. Anything
> > we can do
> > >> > to about it?
> > >> >
> > >> > Will lucense's query parser class be fixed for the above
> > inconsistent
> > >> > implementation?
> > >> >
> > >> > Thanks
> > >> >
> > >> >
> > >> > > From: uwe@thetaphi.de
> > >> > > To: java-user@lucene.apache.org
> > >> > > Subject: RE: During the wild card search=2C will lucene 2.9.0 to
> > convert the
> > >> > search string to lower case?
> > >> > > Date: Mon=2C 1 Feb 2010 17:41:08 +0100
> > >> > >
> > >> > > Only query parser does the lower casing. For such a special
> > case=2C I would
> > >> > suggest to use a PrefixQuery or WildcardQuery directly and not use
> > query
> > >> > parser.
> > >> > >
> > >> > > -----
> > >> > > Uwe Schindler
> > >> > > H.-H.-Meier-Allee 63=2C D-28213 Bremen
> > >> > > http://www.thetaphi.de
> > >> > > eMail: uwe@thetaphi.de
> > >> > >
> > >> > > > -----Original Message-----
> > >> > > > From: java8964 java8964 [mailto:java8964@hotmail.com]
> > >> > > > Sent: Monday=2C February 01=2C 2010 5:27 PM
> > >> > > > To: java-user@lucene.apache.org
> > >> > > > Subject: During the wild card search=2C will lucene 2.9.0 to
> > convert the
> > >> > > > search string to lower case?
> > >> > > >
> > >> > > >
> > >> > > > I noticed a strange result from the following test case. For
> > wildcard
> > >> > > > search=2C my understanding is that lucene will NOT use any
> > analyzer on
> > >> > > > the query string. But as the following simple code to show=2C =
it
> > looks
> > >> > > > like that lucene will lower case the search query in the
> > wildcard
> > >> > > > search. Why? If not=2C why the following test case show the
> > search hits
> > >> > > > as one for lower case wildcard search=2C but not for the upper
> > case data?
> > >> > > > My original data is NOT analyzed=2C so they should be stored a=
s
> > the
> > >> > > > original data in the index segment=2C right?
> > >> > > >
> > >> > > > Lucene version: 2.9.0
> > >> > > >
> > >> > > > JDK version: JDK 1.6.0_17
> > >> > > >
> > >> > > >
> > >> > > > public class IndexTest1 {
> > >> > > >     public static void main(String[] args) {
> > >> > > >         try {
> > >> > > >             Directory directory =3D new RAMDirectory()=3B
> > >> > > >             IndexWriter writer =3D new IndexWriter(directory=
=2C
> > new
> > >> > > > StandardAnalyzer(Version.LUCENE_CURRENT)=2C
> > >> > > > IndexWriter.MaxFieldLength.UNLIMITED)=3B
> > >> > > >             Document doc =3D new Document()=3B
> > >> > > >             doc.add(new Field("title"=2C "BBB CCC"=2C
> > Field.Store.YES=2C
> > >> > > > Field.Index.NOT_ANALYZED))=3B
> > >> > > >             writer.addDocument(doc)=3B
> > >> > > >             doc =3D new Document()=3B
> > >> > > >             doc.add(new Field("title"=2C "ddd eee"=2C
> > Field.Store.YES=2C
> > >> > > > Field.Index.NOT_ANALYZED))=3B
> > >> > > >             writer.addDocument(doc)=3B
> > >> > > >
> > >> > > >             writer.close()=3B
> > >> > > >
> > >> > > >             IndexSearcher searcher =3D new
> > IndexSearcher(directory=2C
> > >> > > > true)=3B
> > >> > > >             PerFieldAnalyzerWrapper wrapper =3D new
> > >> > > > PerFieldAnalyzerWrapper(new
> > StandardAnalyzer(Version.LUCENE_CURRENT))=3B
> > >> > > >             wrapper.addAnalyzer("title"=2C new
> > KeywordAnalyzer())=3B
> > >> > > >             Query query =3D new QueryParser("title"=2C
> > >> > > >                     wrapper).parse("title:BBB*")=3B
> > >> > > >             System.out.println("hits of title =3D " +
> > >> > > > searcher.search(query=2C 100).totalHits)=3B
> > >> > > >             query =3D new QueryParser("title"=2C
> > >> > > >                     wrapper).parse("title:ddd*")=3B
> > >> > > >             System.out.println("hits of title =3D " +
> > >> > > > searcher.search(query=2C 100).totalHits)=3B
> > >> > > >             searcher.close()=3B
> > >> > > >         } catch (Exception e) {
> > >> > > >             System.out.println(e)=3B
> > >> > > >         }
> > >> > > >     }
> > >> > > > }
> > >> > > >
> > >> > > > The output:
> > >> > > > hits of title =3D 0
> > >> > > > hits of title =3D 1
> > >> > > >
> > >> > > >
> > >> > > >
> > _________________________________________________________________
> > >> > > > Hotmail: Trusted email with powerful SPAM protection.
> > >> > > > http://clk.atdmt.com/GBL/go/201469227/direct/01/
> > >> > >
> > >> > >
> > >> > > ----------------------------------------------------------------
> > -----
> > >> > > To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.or=
g
> > >> > > For additional commands=2C e-mail: java-user-
> > help@lucene.apache.org
> > >> > >
> > >> >
> > >> > _________________________________________________________________
> > >> > Hotmail: Powerful Free email with security by Microsoft.
> > >> > http://clk.atdmt.com/GBL/go/201469230/direct/01/
> > >> >
> > >> >
> > >> > ------------------------------------------------------------------
> > ---
> > >> > To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> > >> > For additional commands=2C e-mail: java-user-help@lucene.apache.or=
g
> > >> >
> > >>
> > >> _________________________________________________________________
> > >> Hotmail: Trusted email with Microsoft=92s powerful SPAM protection.
> > >> http://clk.atdmt.com/GBL/go/201469226/direct/01/
> > >
> > > _________________________________________________________________
> > > Hotmail: Powerful Free email with security by Microsoft.
> > > http://clk.atdmt.com/GBL/go/201469230/direct/01/
> >=20
> > ---------------------------------------------------------------------
> > To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands=2C e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands=2C e-mail: java-user-help@lucene.apache.org
>=20
 		 	   		 =20
_________________________________________________________________
Hotmail: Powerful Free email with security by Microsoft.
http://clk.atdmt.com/GBL/go/201469230/direct/01/=

--_176fa4a8-ec6e-480f-a141-e13dc57d50c9_--

From java-user-return-44847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 15:08:45 2010
Return-Path: <java-user-return-44847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63776 invoked from network); 3 Feb 2010 15:08:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 15:08:45 -0000
Received: (qmail 21365 invoked by uid 500); 3 Feb 2010 15:08:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21289 invoked by uid 500); 3 Feb 2010 15:08:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21279 invoked by uid 99); 3 Feb 2010 15:08:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 15:08:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of java8964@hotmail.com designates 65.55.111.76 as permitted sender)
Received: from [65.55.111.76] (HELO blu0-omc2-s1.blu0.hotmail.com) (65.55.111.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 15:08:32 +0000
Received: from BLU140-W33 ([65.55.111.73]) by blu0-omc2-s1.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 3 Feb 2010 07:08:11 -0800
Message-ID: <BLU140-W333A20DE94B77EEC651CD6D0560@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_069e486a-fde3-4e41-b004-d54eb4bb554d_"
X-Originating-IP: [208.48.154.67]
From: java8964 java8964 <java8964@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: confused by the lucene boolean query with wildcard result
Date: Wed, 3 Feb 2010 10:08:11 -0500
Importance: Normal
In-Reply-To: <8c4e68611002030202v486d78e2p6247799f75bedb3e@mail.gmail.com>
References: <SNT122-W31BD4A3A2A564100488581B1580@phx.gbl>
 <3b23ce091002021159i10598263j743f9559782f5bc0@mail.gmail.com>,<BLU140-W35EB2F82F0F670EC1F323CD0570@phx.gbl>,<8c4e68611002030202v486d78e2p6247799f75bedb3e@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 03 Feb 2010 15:08:11.0107 (UTC) FILETIME=[B34AD330:01CAA4E2]
X-Virus-Checked: Checked by ClamAV on apache.org

--_069e486a-fde3-4e41-b004-d54eb4bb554d_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Thanks for you help.

I upgrade the lucene to 2.9.1=2C the problem is gone. It looks like a boole=
an query bug in the lucene 2.9.0 and fixed in the 2.9.1

Thanks

> From: ian.lea@gmail.com
> Date: Wed=2C 3 Feb 2010 10:02:27 +0000
> Subject: Re: confused by the lucene boolean query with wildcard result
> To: java-user@lucene.apache.org
>=20
> You should probably be using your PerFieldAnalyzerWrapper in your
> calls to QueryParser but apart from that I can't see any obvious
> reason.  General advice: use Luke to check what has been indexed and
> read http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_no_hit=
s_.2BAC8_incorrect_hits.3F
>=20
> If none of these help=2C post again but showing what you are indexing as
> well as how you are searching - the smallest possible test case or
> self-contained program that shows the problem.
>=20
> Or maybe someone else will spot the problem.
>=20
>=20
> --
> Ian.
>=20
>=20
>=20
> On Tue=2C Feb 2=2C 2010 at 8:56 PM=2C java8964 java8964 <java8964@hotmail=
.com> wrote:
> >
> > Hi=2C I have the following test case point to the index generated in ou=
r application. The result is confusing me and I don't know the reason.
> >
> > Lucene version: 2.9.0
> > JDK 1.6.0_18
> >
> > public class IndexTest1 {
> >    public static void main(String[] args) {
> >        try {
> >            FSDirectory directory =3D FSDirectory.open(new File("/path_t=
o_index_files"))=3B
> >            IndexSearcher searcher =3D new IndexSearcher(directory=2C tr=
ue)=3B
> >            PerFieldAnalyzerWrapper wrapper =3D new PerFieldAnalyzerWrap=
per(new StandardAnalyzer())=3B
> >            wrapper.addAnalyzer("f1string_sif"=2C new KeywordAnalyzer())=
=3B
> >            wrapper.addAnalyzer("f2string_ti"=2C new StandardAnalyzer(Ve=
rsion.LUCENE_CURRENT))=3B
> >            Query query =3D new QueryParser("f1string_sif"=2C new Standa=
rdAnalyzer(Version.LUCENE_CURRENT)).parse("f2string_ti:subbank*")=3B
> >            System.out.println("query =3D " + query)=3B
> >            System.out.println("hits =3D " + searcher.search(query=2C 10=
0).totalHits)=3B
> >            searcher.close()=3B
> >        } catch (Exception e) {
> >            System.out.println(e)=3B
> >        }
> >    }
> > }
> >
> > Output:
> > query =3D f2string_ti:subbank*
> > hits =3D 6
> >
> > If I change the line to the following:
> >
> > Query query =3D new QueryParser("f1string_sif"=2C new StandardAnalyzer(=
Version.LUCENE_CURRENT)).parse("f2string_ti:rdmap*")=3B
> >
> > Output:
> > query =3D f2string_ti:rdmap*
> > hits =3D 4
> >
> > The above result are both correct based on my data.
> >
> > Now if I change the line to:
> >
> > Query query =3D new QueryParser("f1string_sif"=2C new StandardAnalyzer(=
Version.LUCENE_CURRENT)).parse("f2string_ti:subbank* OR f2string_ti:rdmap*"=
)=3B
> >
> > Output:
> > query =3D f2string_ti:subbank* f2string_ti:rdmap*
> > hits =3D 2
> >
> >
> > I assume the count in the last result should be larger than max(6=2C4)=
=2C but it is 2. Any reason for that?
> >
> > Thanks
> >
> >
> > _________________________________________________________________
> > Hotmail: Trusted email with powerful SPAM protection.
> > http://clk.atdmt.com/GBL/go/201469227/direct/01/
>=20
> ---------------------------------------------------------------------
> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands=2C e-mail: java-user-help@lucene.apache.org
>=20
 		 	   		 =20
_________________________________________________________________
Hotmail: Powerful Free email with security by Microsoft.
http://clk.atdmt.com/GBL/go/201469230/direct/01/=

--_069e486a-fde3-4e41-b004-d54eb4bb554d_--

From java-user-return-44848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 16:06:06 2010
Return-Path: <java-user-return-44848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87258 invoked from network); 3 Feb 2010 16:06:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 16:06:06 -0000
Received: (qmail 13021 invoked by uid 500); 3 Feb 2010 16:06:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12958 invoked by uid 500); 3 Feb 2010 16:06:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12948 invoked by uid 99); 3 Feb 2010 16:06:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 16:06:04 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 16:05:54 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 47AC645FB87
	for <java-user@lucene.apache.org>; Wed,  3 Feb 2010 17:05:32 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id FWQxGSqsiKgC for <java-user@lucene.apache.org>;
	Wed,  3 Feb 2010 17:05:21 +0100 (CET)
Received: from VEGA (unknown [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id EFE6845FB86
	for <java-user@lucene.apache.org>; Wed,  3 Feb 2010 17:05:20 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <27348933.post@talk.nabble.com> <359a92831001271815y532f5007le8b89845a5d7f8e1@mail.gmail.com> 	<3b23ce091001272051g2ef79c7fsde1e835955b1dcad@mail.gmail.com> 	<27406592.post@talk.nabble.com> <BLU140-W13CC0DF0E167ED77FB01FBD0580@phx.gbl> 	<000c01caa35d$5b071fc0$11155f40$@de> <BLU140-W379ACA1D14F772E0B5CC6ED0580@phx.gbl> 	<000f01caa36d$7927ba90$6b772fb0$@com> <BLU140-W157692F785244E89839A1ED0580@phx.gbl> 	<BLU140-W1066E80A156B02CFC6ABB6D0570@phx.gbl> <8c4e68611002030206x6591a9d1je24801f3237173a2@mail.gmail.com>,<001e01caa4ba$1668a6f0$4339f4d0$@de> <BLU140-W2195853EE4D994ECA4BD55D0560@phx.gbl>
In-Reply-To: <BLU140-W2195853EE4D994ECA4BD55D0560@phx.gbl>
Subject: RE: During the wild card search, will lucene 2.9.0 to convert the 	search string to lower case?
Date: Wed, 3 Feb 2010 17:05:37 +0100
Message-ID: <000f01caa4ea$b9d50b50$2d7f21f0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acqk4q+mzGFZvKZATWCTdRsGWK7bNwAB5/KA
Content-Language: de

Just add the field a second time with Field.Store.YES and Field.Index.NO =
in original case. For searching ad using the Tokenizer approach as =
described before using the TokenStream.

Internally this is handled exactly like this (if you enable both =
Field.Index.ANALYZED and Field.Store.YES).

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: java8964 java8964 [mailto:java8964@hotmail.com]
> Sent: Wednesday, February 03, 2010 4:07 PM
> To: java-user@lucene.apache.org
> Subject: RE: During the wild card search, will lucene 2.9.0 to convert
> the search string to lower case?
>=20
>=20
> Thanks for your help.
>=20
> My concern now is that the field could be defined as store. So when =
the
> user receive the field data, we want to still show the original data,
> in upper case in this case.
>=20
> First, I don't think I can use
> queryParser.SetLowercaseExpandedTerms(false), which will remove the
> wildcard search case insensitive functionality for tokenized field.
>=20
> To handle this case, if the data is NOT tokenized, but contain upper
> case data, to be able do the wildcard search with uppercase letter,
> like 'BB*', I am thinking that I have to analyzer the non tokenized
> data, using a KeywordTokenizer plus lowercase the data.
>=20
> For your suggestion, will the data change to lower case and stored in
> the lucene when it being retrieved?
>=20
> Thanks
>=20
> > From: uwe@thetaphi.de
> > To: java-user@lucene.apache.org
> > Subject: RE: During the wild card search, will lucene 2.9.0 to
> convert the 	search string to lower case?
> > Date: Wed, 3 Feb 2010 11:17:27 +0100
> >
> > For specific fields using a special TokenStream chain, there is no
> need to write a separate analyzer. You can add fields to a document
> using a TokenStream as parameter: new Field(name, TokenStream).
> >
> > As TokenStream just create a chain from Tokenizer and all Filters
> like:
> >
> > TokenStream ts =3D new KeywordTokenizer(new StringReader("your text =
to
> index"));
> > ts =3D new LowercaseFilter(ts);
> > ...
> > document.add("fieldname", ts);
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> > > -----Original Message-----
> > > From: Ian Lea [mailto:ian.lea@gmail.com]
> > > Sent: Wednesday, February 03, 2010 11:06 AM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: During the wild card search, will lucene 2.9.0 to
> convert
> > > the search string to lower case?
> > >
> > > I think you'll have to write your own.  Or just downcase the text
> > > yourself first.
> > >
> > >
> > > --
> > > Ian.
> > >
> > >
> > > On Tue, Feb 2, 2010 at 9:30 PM, java8964 java8964
> > > <java8964@hotmail.com> wrote:
> > > >
> > > > Is there an analyzer like keyword analyzer, but will also
> lowering
> > > the data from lucene? Or I have to do a customer analyzer by
> myself?
> > > >
> > > > Thanks
> > > >
> > > >> From: java8964@hotmail.com
> > > >> To: java-user@lucene.apache.org
> > > >> Subject: RE: During the wild card search, will lucene 2.9.0 to
> > > convert the search string to lower case?
> > > >> Date: Mon, 1 Feb 2010 14:24:00 -0500
> > > >>
> > > >>
> > > >> This is maybe something I am looking for. We are using the
> default
> > > value, which is true.
> > > >>
> > > >> Let me examine this method more.
> > > >>
> > > >> Thanks for your help.
> > > >>
> > > >> > From: digydigy@gmail.com
> > > >> > To: java-user@lucene.apache.org
> > > >> > Subject: RE: During the wild card search, will lucene 2.9.0 =
to
> > > convert the search string to lower case?
> > > >> > Date: Mon, 1 Feb 2010 20:36:29 +0200
> > > >> >
> > > >> > Did you try queryParser.SetLowercaseExpandedTerms(false)?
> > > >> >
> > > >> > DIGY
> > > >> >
> > > >> > -----Original Message-----
> > > >> > From: java8964 java8964 [mailto:java8964@hotmail.com]
> > > >> > Sent: Monday, February 01, 2010 8:11 PM
> > > >> > To: java-user@lucene.apache.org
> > > >> > Subject: RE: During the wild card search, will lucene 2.9.0 =
to
> > > convert the
> > > >> > search string to lower case?
> > > >> >
> > > >> >
> > > >> > I would like to confirm your reply. You mean that the query
> parse
> > > will lower
> > > >> > casing. In fact, it looks like that it only does this for =
wild
> > > card query,
> > > >> > right?
> > > >> >
> > > >> > For the term query, it didn't. As proved by if you change the
> line
> > > to:
> > > >> >
> > > >> >             Query query =3D new QueryParser("title",
> > > >> > wrapper).parse("title:\"BBB CCC\"");
> > > >> >
> > > >> > You will get 1 hits back. So in this case, the query parser
> class
> > > did in
> > > >> > different way for term query and wild card query.
> > > >> >
> > > >> > We have to use the query parse in this case, but we have our
> own
> > > Query
> > > >> > parser class extends from the lucene query parser class.
> Anything
> > > we can do
> > > >> > to about it?
> > > >> >
> > > >> > Will lucense's query parser class be fixed for the above
> > > inconsistent
> > > >> > implementation?
> > > >> >
> > > >> > Thanks
> > > >> >
> > > >> >
> > > >> > > From: uwe@thetaphi.de
> > > >> > > To: java-user@lucene.apache.org
> > > >> > > Subject: RE: During the wild card search, will lucene 2.9.0
> to
> > > convert the
> > > >> > search string to lower case?
> > > >> > > Date: Mon, 1 Feb 2010 17:41:08 +0100
> > > >> > >
> > > >> > > Only query parser does the lower casing. For such a special
> > > case, I would
> > > >> > suggest to use a PrefixQuery or WildcardQuery directly and =
not
> use
> > > query
> > > >> > parser.
> > > >> > >
> > > >> > > -----
> > > >> > > Uwe Schindler
> > > >> > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > >> > > http://www.thetaphi.de
> > > >> > > eMail: uwe@thetaphi.de
> > > >> > >
> > > >> > > > -----Original Message-----
> > > >> > > > From: java8964 java8964 [mailto:java8964@hotmail.com]
> > > >> > > > Sent: Monday, February 01, 2010 5:27 PM
> > > >> > > > To: java-user@lucene.apache.org
> > > >> > > > Subject: During the wild card search, will lucene 2.9.0 =
to
> > > convert the
> > > >> > > > search string to lower case?
> > > >> > > >
> > > >> > > >
> > > >> > > > I noticed a strange result from the following test case.
> For
> > > wildcard
> > > >> > > > search, my understanding is that lucene will NOT use any
> > > analyzer on
> > > >> > > > the query string. But as the following simple code to
> show, it
> > > looks
> > > >> > > > like that lucene will lower case the search query in the
> > > wildcard
> > > >> > > > search. Why? If not, why the following test case show the
> > > search hits
> > > >> > > > as one for lower case wildcard search, but not for the
> upper
> > > case data?
> > > >> > > > My original data is NOT analyzed, so they should be =
stored
> as
> > > the
> > > >> > > > original data in the index segment, right?
> > > >> > > >
> > > >> > > > Lucene version: 2.9.0
> > > >> > > >
> > > >> > > > JDK version: JDK 1.6.0_17
> > > >> > > >
> > > >> > > >
> > > >> > > > public class IndexTest1 {
> > > >> > > >     public static void main(String[] args) {
> > > >> > > >         try {
> > > >> > > >             Directory directory =3D new RAMDirectory();
> > > >> > > >             IndexWriter writer =3D new
> IndexWriter(directory,
> > > new
> > > >> > > > StandardAnalyzer(Version.LUCENE_CURRENT),
> > > >> > > > IndexWriter.MaxFieldLength.UNLIMITED);
> > > >> > > >             Document doc =3D new Document();
> > > >> > > >             doc.add(new Field("title", "BBB CCC",
> > > Field.Store.YES,
> > > >> > > > Field.Index.NOT_ANALYZED));
> > > >> > > >             writer.addDocument(doc);
> > > >> > > >             doc =3D new Document();
> > > >> > > >             doc.add(new Field("title", "ddd eee",
> > > Field.Store.YES,
> > > >> > > > Field.Index.NOT_ANALYZED));
> > > >> > > >             writer.addDocument(doc);
> > > >> > > >
> > > >> > > >             writer.close();
> > > >> > > >
> > > >> > > >             IndexSearcher searcher =3D new
> > > IndexSearcher(directory,
> > > >> > > > true);
> > > >> > > >             PerFieldAnalyzerWrapper wrapper =3D new
> > > >> > > > PerFieldAnalyzerWrapper(new
> > > StandardAnalyzer(Version.LUCENE_CURRENT));
> > > >> > > >             wrapper.addAnalyzer("title", new
> > > KeywordAnalyzer());
> > > >> > > >             Query query =3D new QueryParser("title",
> > > >> > > >                     wrapper).parse("title:BBB*");
> > > >> > > >             System.out.println("hits of title =3D " +
> > > >> > > > searcher.search(query, 100).totalHits);
> > > >> > > >             query =3D new QueryParser("title",
> > > >> > > >                     wrapper).parse("title:ddd*");
> > > >> > > >             System.out.println("hits of title =3D " +
> > > >> > > > searcher.search(query, 100).totalHits);
> > > >> > > >             searcher.close();
> > > >> > > >         } catch (Exception e) {
> > > >> > > >             System.out.println(e);
> > > >> > > >         }
> > > >> > > >     }
> > > >> > > > }
> > > >> > > >
> > > >> > > > The output:
> > > >> > > > hits of title =3D 0
> > > >> > > > hits of title =3D 1
> > > >> > > >
> > > >> > > >
> > > >> > > >
> > > _________________________________________________________________
> > > >> > > > Hotmail: Trusted email with powerful SPAM protection.
> > > >> > > > http://clk.atdmt.com/GBL/go/201469227/direct/01/
> > > >> > >
> > > >> > >
> > > >> > > =
------------------------------------------------------------
> ----
> > > -----
> > > >> > > To unsubscribe, e-mail: java-user-
> unsubscribe@lucene.apache.org
> > > >> > > For additional commands, e-mail: java-user-
> > > help@lucene.apache.org
> > > >> > >
> > > >> >
> > > >> >
> _________________________________________________________________
> > > >> > Hotmail: Powerful Free email with security by Microsoft.
> > > >> > http://clk.atdmt.com/GBL/go/201469230/direct/01/
> > > >> >
> > > >> >
> > > >> > =
--------------------------------------------------------------
> ----
> > > ---
> > > >> > To unsubscribe, e-mail: java-user-
> unsubscribe@lucene.apache.org
> > > >> > For additional commands, e-mail: java-user-
> help@lucene.apache.org
> > > >> >
> > > >>
> > > >>
> _________________________________________________________________
> > > >> Hotmail: Trusted email with Microsoft=E2=80=99s powerful SPAM
> protection.
> > > >> http://clk.atdmt.com/GBL/go/201469226/direct/01/
> > > >
> > > > =
_________________________________________________________________
> > > > Hotmail: Powerful Free email with security by Microsoft.
> > > > http://clk.atdmt.com/GBL/go/201469230/direct/01/
> > >
> > > =
-------------------------------------------------------------------
> --
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
> _________________________________________________________________
> Hotmail: Powerful Free email with security by Microsoft.
> http://clk.atdmt.com/GBL/go/201469230/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 17:44:33 2010
Return-Path: <java-user-return-44849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31321 invoked from network); 3 Feb 2010 17:44:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 17:44:33 -0000
Received: (qmail 85716 invoked by uid 500); 3 Feb 2010 17:44:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85674 invoked by uid 500); 3 Feb 2010 17:44:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85664 invoked by uid 99); 3 Feb 2010 17:44:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 17:44:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of volkanagun@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 17:44:21 +0000
Received: by fg-out-1718.google.com with SMTP id e12so63155fga.5
        for <java-user@lucene.apache.org>; Wed, 03 Feb 2010 09:44:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=tEEo8eZCpAM0VB7dmrCEpZtja8+lv03iXn8c++1Vbes=;
        b=b5oeYwK68bTDxigsLdM9gtpFDx3pA1mxXVDnG1135nBROmB64PF84ZxXSJqwZqldmA
         qB3pj+g/6ZS5CDkNz0qO13RDjDI54TafOJ5lDuKg0bAqxVF6tQSMpjpb+jRQAyhK5PEp
         VZunjhsAc9wFJUWiQMZaUxMfVd0r7aHYEqoTk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=eaMFSIh6Bo00bKhrM+OJMH2M0t+l0fvJJ/VJlM7ZIzJz4LtC3K1uUapgpfq/LyeyD5
         PZ7udSa31USbFVxm7UARIXTf0v9230WgIf7D/Olaq1LQLzXnWRiZXPs6HeESM3joDXWi
         xrvpAnYHXAhT8NRP1lHKfKEZpjNUul/wW1q2U=
Received: by 10.87.70.26 with SMTP id x26mr361642fgk.10.1265219041188;
        Wed, 03 Feb 2010 09:44:01 -0800 (PST)
Received: from ?192.168.2.2? ([88.236.68.130])
        by mx.google.com with ESMTPS id 14sm3320643fxm.7.2010.02.03.09.44.00
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 03 Feb 2010 09:44:00 -0800 (PST)
Message-ID: <4B69B5E2.3050906@gmail.com>
Date: Wed, 03 Feb 2010 18:44:02 +0100
From: Hayri <volkanagun@gmail.com>
User-Agent: Thunderbird 2.0.0.23 (X11/20090817)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Limiting search result for web search engine
References: <805803.47041.qm@web53208.mail.re2.yahoo.com>
In-Reply-To: <805803.47041.qm@web53208.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mike Polzin wrote:
> I am working on building a web search engine and I would like to build a reults page similar to what Google does. The functionality I am looking to include is what I refer to a "rolling up" sites, meaning that even if a particular site (defined by its base URL) has many relevent hits on various pages for the searches keywords, that site is only shown once in the results listing with a link to the most relevent hit on that site. What I do not want is to have one site dominate a search results page. 
>
> Does it make sense to just do the search, get the hits list and then programatically remove the results which, although they meet the search criteria, are not as relevent? Is there a way to do this through queries?
>
> Thanks in advance!
>
> Mike
>
>
>       
>   
Actually why don't you use another index for the search results. For 
example you make a search and get all the results, then index those 
documents to a RAMIndex with the matching term. Then retrieve all 
documents in the RamIndex based on hits for the search terms once.  In 
other terms you will filter the documents based on maximum term 
similarity. Is it make sense for you?


 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 18:39:54 2010
Return-Path: <java-user-return-44850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68694 invoked from network); 3 Feb 2010 18:39:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 18:39:54 -0000
Received: (qmail 68436 invoked by uid 500); 3 Feb 2010 18:39:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68379 invoked by uid 500); 3 Feb 2010 18:39:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68369 invoked by uid 99); 3 Feb 2010 18:39:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 18:39:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 18:39:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nck8J-0000P8-9p
	for java-user@lucene.apache.org; Wed, 03 Feb 2010 10:39:23 -0800
Message-ID: <27441219.post@talk.nabble.com>
Date: Wed, 3 Feb 2010 10:39:23 -0800 (PST)
From: Frank Geary <fgeary@acquiremedia.com>
To: java-user@lucene.apache.org
Subject: Re: Index corruption using Lucene 2.4.1 - thread safety issue?
In-Reply-To: <9ac0c6aa1001221308h58795ebas2c8190f634aec9e8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: fgeary@acquiremedia.com
References: <27115515.post@talk.nabble.com> <9ac0c6aa1001120101o77c9e0b9i74ad0e76b59063ad@mail.gmail.com> <27129835.post@talk.nabble.com> <9ac0c6aa1001121105s5e1b6c55h320e31cf734f1850@mail.gmail.com> <27265165.post@talk.nabble.com> <9ac0c6aa1001220014h4fdeac43uca16c056b23364e1@mail.gmail.com> <27276550.post@talk.nabble.com> <9ac0c6aa1001221308h58795ebas2c8190f634aec9e8@mail.gmail.com>


For the record - I haven't proven this yet - but here's my current theory o=
f
what is causing the problem:

1) We start with a new RAMDir IW[0] and do some deletes and adds.
2) We create at least one IndexReader based on that IW. The last of which
we'll call IndexReader[A].
3) Then we switch to using the other RAMDir IW[1].
4) While using IW[1], we clear out IW[0] and create a new IW[0].  However,
the last IndexReader, IndexReader[A], is left around.
5) Eventually, we switch to using the other newly re-created RAMDir IW[0]
again.
6) The first search that comes in against RAMDir IW[0] trys to reopen
IndexReader[A].  But IndexReader[A] has nothing to do with the newly
re-created RAMDir index[0]. =20

So my theory is that this confuses the IndexReader.reopen() code. =20
Therefore, we can perhaps fix the problem by deleting the last IndexReader
used whenever we re-create any RAMDir IW.  Furthermore, this problem may be
so infrequent because:
a) It can only happen the first time after two RAMDir swaps.
b) It may depend on what state IndexReader[A] was in when it was created.
c) It may also depend on what state the new RAMDir IW is in when that first
reopen() call is made using the old IndexReader[A]. =20
d) If the first reopen for a new IW succeeds, we're fine until the next
swap.
e) If it fails, it could fail repeatedly or only once.

I'll let you know when I determine if this theory is correct or not.

Frank

=20

Michael McCandless-2 wrote:
>=20
> It looks like each IW writes to a private log file -- could you zip up
> all such files and attach as a zip file (CC me directly because the
> list strips attachments)?  It can give me a bigger picture than just
> these fragments...
>=20
> Mike
>=20
> On Fri, Jan 22, 2010 at 12:02 PM, Frank Geary <fgeary@acquiremedia.com>
> wrote:
>>
>> Mike,
>>
>> Below are the portions of the merge log files related to the
>> setInfoStream()
>> calls during the time our exception happens. =C2=A0The ..._1... log file=
 is
>> from
>> one RAMDir index and the ..._0... log file is from the other RAMDir
>> index.
>=20
> OK
>=20
>> The time period when our Array index out of bounds exception happens is
>> 2009-12-27 19:59:51,244 (when the IndexReader.reopen() is about to be
>> called) to 2009-12-27 19:59:51,259 (when the exception is thrown from th=
e
>> MultiIndexSearch.search() call).
>=20
> I suspect the corruption happened before that, ie, somehow the
> deletions file for a segment got overwritten.  To bound the time I
> guess we have look back to the reopen before the corrupt IndexReader
> (which didn't hit the corruption).
>=20
>> As you can see from the log files below,
>> our "_1" RAMDir index is the only one being used during the time the
>> exception is thrown - not new information to me.
>=20
> Right but we need to see logs from earlier...
>=20
>> Also a merge has finished
>> at 2009-12-27 19:59:50,561 and thus it appears that nothing at all is
>> happening (with respect to merges or commits) in either RAMDir index at
>> the
>> time the problem occurs.
>=20
> Need to see all the infoStream log files to really be sure...
>=20
>> But one thing that is interesting to me - perhaps
>> you can clarify - is there is a very short commit at the very top of the
>> "_1" log file. =C2=A0Why is that commit different from the commit right =
below
>> it?
>> What does "DW: apply 1 buffered deleted terms and 0 deleted docIDs" mean=
?
>=20
> There was one delete-by-Term buffered (and no added docs) for the
> first commit, and the reverse for the 2nd case.
>=20
>> What does "commit: pendingCommit =3D=3D null; skip" mean? =C2=A0Are ther=
e
>> different
>> kinds of commit?
>=20
> It looks like the deleted Term did not in fact match a document and so
> the flush & commit were skipped.
>=20
> You should also try making new RAMDirs instead of reusing the same one
> -- if that still hits GC problems then something else is wrong: once a
> RAMDir & all readers/writers using it are closed, it should be easy to
> GC.
>=20
> Or, another thing you could try is to swap in MockRAMDirectory (from
> Lucene's tests): it will throw an exception if you attempt to close it
> when the readers/writers didn't in fact close all their files.  If you
> hit that exception you know something isn't being closed... it's a
> good way to catch bugs...
>=20
> Mike
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/Index-corruption-using-=
Lucene-2.4.1---thread-safety-issue--tp27115515p27441219.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 18:41:26 2010
Return-Path: <java-user-return-44851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69051 invoked from network); 3 Feb 2010 18:41:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 18:41:25 -0000
Received: (qmail 72420 invoked by uid 500); 3 Feb 2010 18:41:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72334 invoked by uid 500); 3 Feb 2010 18:41:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72324 invoked by uid 99); 3 Feb 2010 18:41:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 18:41:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tsuraan@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 18:41:15 +0000
Received: by qw-out-2122.google.com with SMTP id 3so19654qwe.53
        for <java-user@lucene.apache.org>; Wed, 03 Feb 2010 10:40:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=V/oyDnOk8FuqjSC3tCqOqCbU9xyJz0UVqTUgMO+VutU=;
        b=uCbBfNu96s9xv8k+TgdGSAS5M0gyJDfa8BUPZgQycctuP+O2itKvTpJOAeUw3DJc9o
         rlNQtZLNm2Bgi7+n6rWVbp5lv3WCPArP84WDFIYEdh5uu8jwTtAn9sKZZZaAV3xGeqmB
         x+KjP4T8af/kK6H+JHUdcrKas9sMwDuIfoLI8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=BbVXLxu567vhnDCZ2dZrAb2V4T/wL6/hIfb+WbkUUQpbSUOGqHkKOGo7+vGzaEXL0r
         FCQczGn30dWGal8rcZS29k7e9FNczM6m5uCZhnzIXW3I7GX5bVt/q+HxuPzLyPFqgYua
         wIzOP2jLuAC78IJprGsZhkTJwLh/cb00OOEpE=
MIME-Version: 1.0
Received: by 10.229.101.166 with SMTP id c38mr4530945qco.88.1265222446814; 
	Wed, 03 Feb 2010 10:40:46 -0800 (PST)
Date: Wed, 3 Feb 2010 12:40:46 -0600
Message-ID: <84fb38e31002031040n238909bev5f48ba71c2511778@mail.gmail.com>
Subject: Sort and Collector
From: tsuraan <tsuraan@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Is there any way to run a search where I provide a Query, a Sort, and
a Collector?  I have a case where it is sometimes, but rarely,
necessary to get all the results from a query, but usually I'm
satisfied with a smaller amount.  That part I can do with just a query
and a collector, but I'd like the results to be sorted as they are
submitted to the collector's collect method.  Is that possible?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 18:54:25 2010
Return-Path: <java-user-return-44852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75107 invoked from network); 3 Feb 2010 18:54:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 18:54:24 -0000
Received: (qmail 216 invoked by uid 500); 3 Feb 2010 18:54:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99983 invoked by uid 500); 3 Feb 2010 18:54:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99973 invoked by uid 99); 3 Feb 2010 18:54:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 18:54:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 18:54:12 +0000
Received: by ey-out-2122.google.com with SMTP id d26so409525eyd.3
        for <java-user@lucene.apache.org>; Wed, 03 Feb 2010 10:53:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=CoGk2bZkQBwkZCRfTx1AUHXZl+AP1vQW6Gi6vuSnu98=;
        b=rR57p7I1IWgOcMx6PIE+fc4rIecr/wR203X3L5GjK9V65RIolxbw5XY8jO18m5lZO4
         wsWVXj7xXiVck3tVxubAqVMGxuJNzdlVYT6LhQjSqcMownCBLQOMsC1RdMpX/NFuoNC4
         Sx6UT96HmvrXLapmEaZERva3PIwYwK8qWPtc8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=nHmyQ7hGfbEcp8WZEXYZ/VAwSjlG1Hy/9SZ/WqJjO78qmjQXpTNjrsbdkTeG7tyYhB
         4qG73TgX8R7e96HyCY0Pdo+czOAakWoITZR5ZPJ0e/3RR8gavrGXLBTDeWcolU/jFyKA
         lvyV28XrZOu6oTkhUdfaPQc/JuYmGzFPKj6VI=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.85.207 with SMTP id u57mr2174643wee.97.1265223232050; Wed, 
	03 Feb 2010 10:53:52 -0800 (PST)
In-Reply-To: <84fb38e31002031040n238909bev5f48ba71c2511778@mail.gmail.com>
References: <84fb38e31002031040n238909bev5f48ba71c2511778@mail.gmail.com>
Date: Wed, 3 Feb 2010 13:53:52 -0500
X-Google-Sender-Auth: 455e80cbc49f0f9b
Message-ID: <c68e39171002031053y724a8548jf476e132e8ea2194@mail.gmail.com>
Subject: Re: Sort and Collector
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Feb 3, 2010 at 1:40 PM, tsuraan <tsuraan@gmail.com> wrote:
> Is there any way to run a search where I provide a Query, a Sort, and
> a Collector? =A0I have a case where it is sometimes, but rarely,
> necessary to get all the results from a query, but usually I'm
> satisfied with a smaller amount. =A0That part I can do with just a query
> and a collector, but I'd like the results to be sorted as they are
> submitted to the collector's collect method. =A0Is that possible?

It's not really possible.
Lucene must iterate over all of the hits before it knows for sure that
it has the top sorted by any criteria (other than docid).
A Collector is called for every hit as it happens, and thus one can't
specify a sort order (sorting itself is actually implemented with a
sorting Collector).

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 21:03:30 2010
Return-Path: <java-user-return-44853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17128 invoked from network); 3 Feb 2010 21:03:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 21:03:30 -0000
Received: (qmail 10259 invoked by uid 500); 3 Feb 2010 21:03:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10177 invoked by uid 500); 3 Feb 2010 21:03:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10167 invoked by uid 99); 3 Feb 2010 21:03:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 21:03:27 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tsuraan@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 21:03:19 +0000
Received: by vws6 with SMTP id 6so183226vws.35
        for <java-user@lucene.apache.org>; Wed, 03 Feb 2010 13:02:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=qeIvGb89SGocxHf3z2AsgiPiQI2exoTwgst8Gqld1vI=;
        b=NF4MbfLrvKsKShZGOWmLX88xljT0OR/k7vU4dd1EYVyZIM4e+o7Zz+Ep3QE9zuye6J
         UZ/EGAxiSV/k/Prekex5z9jTK6NpSqZe9ZE9/8NPjSrhQPNfKlq9KuQ8pA6fL3C7TQt8
         iaEGRm5va34dMh/qKAKI1DA+j/UueOOfUHpog=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=RmQY+XestiFK6+ovlcrYMYHktG/c0YnoZtt96qyXY8zxYw06vdmuGpm3EJ6HAtL9la
         KJ+c/xcb5oeoNdGbop5FHGTDWRv/TmL8ATmqNlGngmHdFfsrYviyx6K7qFqm5Jv5qUcd
         rE4lpSjmE22jJUA/NbHlHkpj9/rzVnBBfn+2w=
MIME-Version: 1.0
Received: by 10.220.126.194 with SMTP id d2mr233091vcs.18.1265230978417; Wed, 
	03 Feb 2010 13:02:58 -0800 (PST)
In-Reply-To: <c68e39171002031053y724a8548jf476e132e8ea2194@mail.gmail.com>
References: <84fb38e31002031040n238909bev5f48ba71c2511778@mail.gmail.com>
	 <c68e39171002031053y724a8548jf476e132e8ea2194@mail.gmail.com>
Date: Wed, 3 Feb 2010 15:02:58 -0600
Message-ID: <84fb38e31002031302w1f7656b6g445babacc8f582d8@mail.gmail.com>
Subject: Re: Sort and Collector
From: tsuraan <tsuraan@gmail.com>
To: java-user@lucene.apache.org, yonik@lucidimagination.com
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

> It's not really possible.
> Lucene must iterate over all of the hits before it knows for sure that
> it has the top sorted by any criteria (other than docid).
> A Collector is called for every hit as it happens, and thus one can't
> specify a sort order (sorting itself is actually implemented with a
> sorting Collector).

Ok, so the sort doesn't actually affect the order in which a searcher
iterates over an index, it just gets used by a TopDocsCollector to
sort hits as they come in.  I guess that makes sense.  Thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 21:07:53 2010
Return-Path: <java-user-return-44854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19841 invoked from network); 3 Feb 2010 21:07:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 21:07:52 -0000
Received: (qmail 21821 invoked by uid 500); 3 Feb 2010 21:07:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21772 invoked by uid 500); 3 Feb 2010 21:07:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21762 invoked by uid 99); 3 Feb 2010 21:07:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 21:07:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tsuraan@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 21:07:43 +0000
Received: by vws6 with SMTP id 6so184598vws.35
        for <java-user@lucene.apache.org>; Wed, 03 Feb 2010 13:07:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=lCrm6f4Zn5qH1CLuaU7GeH4OGnnXnQl+ZyY3X3LPYjU=;
        b=uYmlJ8lExiQuOH8BWWuDyFcXfaawdPCVXacefCjUDNNf8TuHU0/CLM9Bh2EjNP/Ukn
         cR7tcI42QtfliKuvfIKyj8oGBfmDS0mFgOJ1xZhsXh8KiGIvaWBpH6JpBQY6il41ZRKt
         IX6AnxkoVAd+Maw1cr2MYPsj+wRYbj1EofKfc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=pPmWifn5NZ5e6V3HcNiCAhI+/RaS2gqx23A64lX+eh43RJT21NK/jm/Cmpm9Q5zlp5
         ZAx1OcRROGfzioORdfb/2ABOTZFr4/e48GeYmeeYt89NyMVTchLvHSPwNxnEj+OEa+MW
         gRd+9f0s+LVeP+05RJISGMgQomefeANuwgnP0=
MIME-Version: 1.0
Received: by 10.220.122.88 with SMTP id k24mr272151vcr.19.1265231240450; Wed, 
	03 Feb 2010 13:07:20 -0800 (PST)
Date: Wed, 3 Feb 2010 15:07:20 -0600
Message-ID: <84fb38e31002031307g7beef321q3b0aa567a8af0e74@mail.gmail.com>
Subject: Sort memory usage
From: tsuraan <tsuraan@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

Is the cache used by sorting on strings separated by reader, or is it
a global thing?  I'm trying to use the near-realtime search, and I
have a few indices with a million docs apiece.  If I'm opening a new
reader every minute, am I going to have every term in every sort field
read into RAM for each reader that I have open?  Or, is the cache
smarter about that, and at least the strings are interned, or does it
work completely differently from that?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 21:10:14 2010
Return-Path: <java-user-return-44855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20698 invoked from network); 3 Feb 2010 21:10:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 21:10:14 -0000
Received: (qmail 28366 invoked by uid 500); 3 Feb 2010 21:10:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28263 invoked by uid 500); 3 Feb 2010 21:10:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28187 invoked by uid 99); 3 Feb 2010 21:10:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 21:10:08 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jake.mannix@gmail.com designates 209.85.222.175 as permitted sender)
Received: from [209.85.222.175] (HELO mail-pz0-f175.google.com) (209.85.222.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 21:10:00 +0000
Received: by pzk5 with SMTP id 5so2973269pzk.29
        for <java-user@lucene.apache.org>; Wed, 03 Feb 2010 13:09:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=lkxwcdNLZOMcxeiwAjoprD//ggBf8E2/bQC0QKqNTNI=;
        b=H2KFt/5s90VCSZPRe/rTKfl1oZOObIlCfIxNi1/vIpcsT39DMFShe2eCSseLl/brUa
         OCgoLcSFtwkAu4EDcWpaR1kO+fnZ2V5mTJh1Fw7uUqM5RF3EFmAEbNOoe2IwiwsTe9Jf
         NlSpmtF6b4t9NpsO4ys90gMol++ObUY/8fuRM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=P39a/gw6wBQ5/0SRvT8Zilo8xTRll6E3BR9ztiJRhWTG4b3befAxhUsj/CwENnd+ce
         Rt+WkU9ka1QRmuYZfDXWnlHdxwbap6DY1FXYgsXShmGJJoQA3N2p/ShP2mfZOOjANT8K
         DpPS7PKxLfo5fnanljwHpGY2ZfmVyLxpPu/0U=
MIME-Version: 1.0
Received: by 10.115.87.4 with SMTP id p4mr79060wal.202.1265231378894; Wed, 03 
	Feb 2010 13:09:38 -0800 (PST)
In-Reply-To: <84fb38e31002031307g7beef321q3b0aa567a8af0e74@mail.gmail.com>
References: <84fb38e31002031307g7beef321q3b0aa567a8af0e74@mail.gmail.com>
Date: Wed, 3 Feb 2010 13:09:38 -0800
Message-ID: <4b124c311002031309i6f6f1bd3u161b79e2858b8c53@mail.gmail.com>
Subject: Re: Sort memory usage
From: Jake Mannix <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64aef46e5d2f1047eb8a215
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64aef46e5d2f1047eb8a215
Content-Type: text/plain; charset=ISO-8859-1

The FieldCache loads per segment, and the NRT reader is reloading only
new segments from disk, so yes, it's "smarter" about this caching in this
case.

  -jake

On Wed, Feb 3, 2010 at 1:07 PM, tsuraan <tsuraan@gmail.com> wrote:

> Is the cache used by sorting on strings separated by reader, or is it
> a global thing?  I'm trying to use the near-realtime search, and I
> have a few indices with a million docs apiece.  If I'm opening a new
> reader every minute, am I going to have every term in every sort field
> read into RAM for each reader that I have open?  Or, is the cache
> smarter about that, and at least the strings are interned, or does it
> work completely differently from that?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64aef46e5d2f1047eb8a215--

From java-user-return-44856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 21:34:22 2010
Return-Path: <java-user-return-44856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32721 invoked from network); 3 Feb 2010 21:34:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 21:34:22 -0000
Received: (qmail 69319 invoked by uid 500); 3 Feb 2010 21:34:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69253 invoked by uid 500); 3 Feb 2010 21:34:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69242 invoked by uid 99); 3 Feb 2010 21:34:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 21:34:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tsuraan@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 21:34:12 +0000
Received: by vws6 with SMTP id 6so192249vws.35
        for <java-user@lucene.apache.org>; Wed, 03 Feb 2010 13:33:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=rUiuR3ByWulXLvN3IROF7m/Y+B4ohQetv7+Zff17McM=;
        b=Q17oZSGWDM7TaWY6Tgkjb0q0VBaFR+Q+boMFp9q2AGoSx3MxoIGI0xAsJi8XzZcuvX
         d/tUfbMrtiQjCUCdLZdFgPTbbc098alkplnrssVD2gACogu0OZqUT86FD9hEVqGfCjLO
         SipMmbmO1Ru6upT0qNf0PQeqiVcNF7RKSbAGU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=CPXHGbe85PhPabBT0waecTl1JlZDFvOPsMZNjtGLfmPw5OtZBkKyL+4qZULY6Xg8sq
         hlSFccgCoCS5Utw06NeYv5J2WNfyyo25ALHAx0KE8sAe6aKvLQreVfquT9AA/cDNUAt1
         ptZsr4Ype5GhfekquAcmpblaah/Ug9Tt3GJIk=
MIME-Version: 1.0
Received: by 10.220.121.214 with SMTP id i22mr337809vcr.5.1265232827470; Wed, 
	03 Feb 2010 13:33:47 -0800 (PST)
In-Reply-To: <4b124c311002031309i6f6f1bd3u161b79e2858b8c53@mail.gmail.com>
References: <84fb38e31002031307g7beef321q3b0aa567a8af0e74@mail.gmail.com>
	 <4b124c311002031309i6f6f1bd3u161b79e2858b8c53@mail.gmail.com>
Date: Wed, 3 Feb 2010 15:33:47 -0600
Message-ID: <84fb38e31002031333u2f76f767na6d3a8f40f7aa362@mail.gmail.com>
Subject: Re: Sort memory usage
From: tsuraan <tsuraan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

> The FieldCache loads per segment, and the NRT reader is reloading only
> new segments from disk, so yes, it's "smarter" about this caching in this
> case.

Ok, so the cache is tied to the index, and not to any particular
reader.  The actual FieldCacheImpl keeps a mapping from Reader to its
terms, so are the cached values shared just because the Readers
actually wrap the same Indices, so the termDocs for all the readers
are actually almost entirely the same?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 03 21:39:07 2010
Return-Path: <java-user-return-44857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35562 invoked from network); 3 Feb 2010 21:39:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Feb 2010 21:39:07 -0000
Received: (qmail 79806 invoked by uid 500); 3 Feb 2010 21:39:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79736 invoked by uid 500); 3 Feb 2010 21:39:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79726 invoked by uid 99); 3 Feb 2010 21:39:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 21:39:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jake.mannix@gmail.com designates 209.85.216.186 as permitted sender)
Received: from [209.85.216.186] (HELO mail-px0-f186.google.com) (209.85.216.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Feb 2010 21:38:56 +0000
Received: by pxi16 with SMTP id 16so778422pxi.29
        for <java-user@lucene.apache.org>; Wed, 03 Feb 2010 13:38:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=DMm4W2DbpdWNS+ieYV0VB0xRCyzJ9orrymv3E7VWgSY=;
        b=x22lIqmawx8Jejo5MTwMQL9ra1zTJi9zbwfnJBE577xbVMkSahXXIGaljnrRDcgS6X
         wvoXARELGzeS2ps1cI/dt2NtZNnqEyn8fM/Sdo5fQiiBsx0iS5lZ+84ZynfZxKQMqime
         JbbqLEMcwNzwyEFTh/iGVL97o9MZgecZ/Oaj0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=AJ8kevxEBOx3+eBqxArIW1F13DHpS8vcXI/CGsV6QbqwaKsVn+vFH88yMp4NlHvtgv
         olCBuDZcQiQoWHuYwmlISrpXPVZbYrgTdfUAV7/hqAVU6Z1cd8EzMR0O2ShKoiTYXv6e
         Hhquu3FeG7CE4NgvyGwaNaniGnTi4Mi4ofe6M=
MIME-Version: 1.0
Received: by 10.115.87.4 with SMTP id p4mr99381wal.202.1265233115183; Wed, 03 
	Feb 2010 13:38:35 -0800 (PST)
In-Reply-To: <84fb38e31002031333u2f76f767na6d3a8f40f7aa362@mail.gmail.com>
References: <84fb38e31002031307g7beef321q3b0aa567a8af0e74@mail.gmail.com>
	 <4b124c311002031309i6f6f1bd3u161b79e2858b8c53@mail.gmail.com>
	 <84fb38e31002031333u2f76f767na6d3a8f40f7aa362@mail.gmail.com>
Date: Wed, 3 Feb 2010 13:38:35 -0800
Message-ID: <4b124c311002031338i4b22ccfdud0a8ad56219e317f@mail.gmail.com>
Subject: Re: Sort memory usage
From: Jake Mannix <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64aef46637b2e047eb90a01
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64aef46637b2e047eb90a01
Content-Type: text/plain; charset=ISO-8859-1

On Wed, Feb 3, 2010 at 1:33 PM, tsuraan <tsuraan@gmail.com> wrote:

> > The FieldCache loads per segment, and the NRT reader is reloading only
> > new segments from disk, so yes, it's "smarter" about this caching in this
> > case.
>
> Ok, so the cache is tied to the index, and not to any particular
> reader.  The actual FieldCacheImpl keeps a mapping from Reader to its
> terms, so are the cached values shared just because the Readers
> actually wrap the same Indices, so the termDocs for all the readers
> are actually almost entirely the same?
>

The FieldCache *is* tied to readers, but it's tied to the SegmentReaders
which
comprise an IndexReader.  When you call IndexReader.reload() or if you
call IndexWriter.getReader(), you make new SegmentReaders inside of the
outer IndexReader that you are looking at, and only the new ones need to
load up their parts of the FieldCache.  Segments which have already been
read have SegmentReader instances which stick around, and the cache
pieces which are keyed on them stay around as well.

  -jake

--0016e64aef46637b2e047eb90a01--

From java-user-return-44858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 01:58:25 2010
Return-Path: <java-user-return-44858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67963 invoked from network); 4 Feb 2010 01:58:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 01:58:25 -0000
Received: (qmail 55393 invoked by uid 500); 4 Feb 2010 01:58:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55321 invoked by uid 500); 4 Feb 2010 01:58:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55310 invoked by uid 99); 4 Feb 2010 01:58:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 01:58:22 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ihasmax@gmail.com designates 209.85.216.186 as permitted sender)
Received: from [209.85.216.186] (HELO mail-px0-f186.google.com) (209.85.216.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 01:58:14 +0000
Received: by pxi16 with SMTP id 16so1022403pxi.29
        for <java-user@lucene.apache.org>; Wed, 03 Feb 2010 17:57:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=4YT73zF7xMPXSsUEk4ik+1jH5zPvfFs+gFinELnjDdo=;
        b=h1HJ57phrFZP6dFjK+pNvuuiQ+Ah1EhGNnOi/YHiyTTaeO6epxGYNZgD3P0fXDJdUn
         fcg6av2gPSHyHH5koZ1fMKAqY1e+qcwvNUedhcfDjaDAP87F0dRt9+46mQP8AEc1J+Hq
         Z/8RkNsu6VrG4RyniL7j5SENBvAHuloB5MkEU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=P8ok84pOhk36Mld+OlNV6INRqIIj3zXCWx+AvZR/Qr/CvOaugOAUBYfSHpIP1otzfk
         QuZP3TmHFroGABqirjmncCLdqxvmGZqTUybuFtHKYyYTM+keKPDNhpFZHume9hSm/TM0
         IyBIoD19XsdpnHHJo+Wl6n7Yl31tzNy+VxTFs=
MIME-Version: 1.0
Received: by 10.141.108.21 with SMTP id k21mr319716rvm.111.1265248673234; Wed, 
	03 Feb 2010 17:57:53 -0800 (PST)
From: Max Lynch <ihasmax@gmail.com>
Date: Wed, 3 Feb 2010 19:57:33 -0600
Message-ID: <3836ec641002031757y6850e4c9vf99c203a230e313@mail.gmail.com>
Subject: Match span of capitalized words
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd13932b8899f047ebca94e
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd13932b8899f047ebca94e
Content-Type: text/plain; charset=ISO-8859-1

Hi,
I would like to do a search for "Microsoft Windows" as a span, but not match
if words before or after "Microsoft Windows" are upper cased.

For example, I want this to match: another crash for Microsoft Windows today
But not this: another crash for Microsoft Windows Server today

Is this possible?  My first attempt started with the SpanRegexQuery from the
regex contrib package, but I can't figure out how to put in a term I do want
to match but don't want to include in the final highlighting match.  Does
that make sense?

My example (using WhitespaceAnalyzer since I care about case):

 SpanRegexQuery srq1 = new SpanRegexQuery( new Term("contents", "Chase"));
 SpanRegexQuery srq2 = new SpanRegexQuery( new Term("contents",
"Bank[\\.]*"));
 SpanRegexQuery srq3 = new SpanRegexQuery( new Term("contents", "[^A-Z]*"));


Thanks,
Max

--000e0cd13932b8899f047ebca94e--

From java-user-return-44859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 03:08:05 2010
Return-Path: <java-user-return-44859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91592 invoked from network); 4 Feb 2010 03:08:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 03:08:05 -0000
Received: (qmail 10776 invoked by uid 500); 4 Feb 2010 03:08:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10586 invoked by uid 500); 4 Feb 2010 03:08:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10576 invoked by uid 99); 4 Feb 2010 03:08:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 03:08:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ryguasu@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 03:07:54 +0000
Received: by vws6 with SMTP id 6so283770vws.35
        for <java-user@lucene.apache.org>; Wed, 03 Feb 2010 19:07:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=fxzh24UQvUNnb2MU+uSbCIfsB4nATbqgbJAW7VoiHvA=;
        b=Mno4+hO43Pam/7+TU6k7YsyXt+OS2aA6jboLtwxfARyQFVBuW0NqNZ3wI41yhS5IlS
         uoHtUqZhyUyfSuHuq8F/xO8+Xg5iyrDZpxjh/QXVzx0PAgdBpxfwUltlt8+/OkyzTlrj
         IRiJbMI69+mnGNXGdyB+0xfXJqe84wf19SSqA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=TyJUJdFcMB9cEg8mjwae0ANbYUpEXdSSi92/pAeZ++FJdfZNK82QjUh1El886oal7a
         4LQWE4JjjVMP3X/Q44oWxoBzMJRTzs0yLzm+LK6lE/sL2nB72kS+1Wo4akyCqi7Ee3e/
         6fJtR+FaSRFjc0Zs+BheO/1l2tX+rltKP5mrk=
MIME-Version: 1.0
Received: by 10.220.128.17 with SMTP id i17mr712377vcs.9.1265252853072; Wed, 
	03 Feb 2010 19:07:33 -0800 (PST)
From: Chris Harris <ryguasu@gmail.com>
Date: Wed, 3 Feb 2010 19:07:13 -0800
Message-ID: <856ac15f1002031907s29e59c45pbcd089db615356ea@mail.gmail.com>
Subject: Where to download Mark Miller's Qsol Parser?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

The QSol query parser (brief overview here:
http://www.lucidimagination.com/blog/2009/02/22/exploring-query-parsers/)
used to be available at

http://myhardshadow.com/qsol.php

(there was documentation as well as a link to a SVN server) but it
looks like the myhardshadow.com has been relinquished to a domain name
squatter. Is there any other place to get a fresh copy of Qsol?

Thanks,
Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 03:40:34 2010
Return-Path: <java-user-return-44860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98630 invoked from network); 4 Feb 2010 03:40:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 03:40:34 -0000
Received: (qmail 34067 invoked by uid 500); 4 Feb 2010 03:40:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33813 invoked by uid 500); 4 Feb 2010 03:40:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33803 invoked by uid 99); 4 Feb 2010 03:40:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 03:40:31 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 03:40:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NcsZV-0004W9-W2
	for java-user@lucene.apache.org; Wed, 03 Feb 2010 19:40:01 -0800
Message-ID: <27447266.post@talk.nabble.com>
Date: Wed, 3 Feb 2010 19:40:01 -0800 (PST)
From: mpolzin <mikepolzin@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Limiting search result for web search engine
In-Reply-To: <4B69B5E2.3050906@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mikepolzin@yahoo.com
References: <805803.47041.qm@web53208.mail.re2.yahoo.com> <4B69B5E2.3050906@gmail.com>


Hi thanks for the suggestion. I am relatively new to Lucene, so I have a few
more questions on this implementation. I looked at the source code for
Lucene and found the TopDocCollector class. It appears this class derives
from the HitCollector class, so I should be able to simply extend
TopDocCollector and override the Collect method to simply check to see if I
have a document with the base URL already in collected and inserted. Here is
my psuedo code changes to the Collect method:

            if (score > 0.0f)
            {

                // Do something here to get the document base URL
(doc.BaseURL)

                if ((hq.Size() < numHits || score >= minScore)  &&
collectedBaseURLArray.Contains(doc.BaseURL))
                {
                    collectedBaseURLArray.Add(doc.BaseURL);
                    totalHits++;
                    hq.Insert(new ScoreDoc(doc, score));
                    minScore = ((ScoreDoc) hq.Top()).score; // maintain
minScore
                }
            }

Does this make sense?

How could I tell the search to use my extended version of the
TopDocCollector class? Also, how would I pull the URL from the document
inside of the loop above? I didn't see any good documentation anywhere on
how to do that. There seems to be little information out there on how to
build your own custom collector.

Thanks again,
Mike



Hayri-2 wrote:
> 
> Mike Polzin wrote:
>> I am working on building a web search engine and I would like to build a
>> reults page similar to what Google does. The functionality I am looking
>> to include is what I refer to a "rolling up" sites, meaning that even if
>> a particular site (defined by its base URL) has many relevent hits on
>> various pages for the searches keywords, that site is only shown once in
>> the results listing with a link to the most relevent hit on that site.
>> What I do not want is to have one site dominate a search results page. 
>>
>> Does it make sense to just do the search, get the hits list and then
>> programatically remove the results which, although they meet the search
>> criteria, are not as relevent? Is there a way to do this through queries?
>>
>> Thanks in advance!
>>
>> Mike
>>
>>
>>       
>>   
> Actually why don't you use another index for the search results. For 
> example you make a search and get all the results, then index those 
> documents to a RAMIndex with the matching term. Then retrieve all 
> documents in the RamIndex based on hits for the search terms once.  In 
> other terms you will filter the documents based on maximum term 
> similarity. Is it make sense for you?
> 
> 
>  
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/Limiting-search-result-for-web-search-engine-tp27430155p27447266.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 03:48:00 2010
Return-Path: <java-user-return-44861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 911 invoked from network); 4 Feb 2010 03:48:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 03:48:00 -0000
Received: (qmail 38424 invoked by uid 500); 4 Feb 2010 03:47:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38320 invoked by uid 500); 4 Feb 2010 03:47:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38310 invoked by uid 99); 4 Feb 2010 03:47:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 03:47:57 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 03:47:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Ncsgg-00055W-GD
	for java-user@lucene.apache.org; Wed, 03 Feb 2010 19:47:26 -0800
Message-ID: <27447319.post@talk.nabble.com>
Date: Wed, 3 Feb 2010 19:47:26 -0800 (PST)
From: mpolzin <mikepolzin@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Limiting search result for web search engine
In-Reply-To: <867513fe1002021757t53533a49he725a0dda1a77b8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mikepolzin@yahoo.com
References: <805803.47041.qm@web53208.mail.re2.yahoo.com> <867513fe1002021757t53533a49he725a0dda1a77b8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi thanks for the suggestion. I am relatively new to Lucene, so I have a few
more questions on this implementation. I looked at the source code for
Lucene and found the TopDocCollector class. It appears this class derives
from the HitCollector class, so I should be able to simply extend
TopDocCollector and override the Collect method to simply check to see if I
have a document with the base URL already in collected and inserted. Here is
my psuedo code changes to the Collect method: 

            if (score > 0.0f) 
            { 

                // Do something here to get the document base URL
(doc.BaseURL) 

                if ((hq.Size() < numHits || score >= minScore)  &&
collectedBaseURLArray.Contains(doc.BaseURL)) 
                { 
                    collectedBaseURLArray.Add(doc.BaseURL); 
                    totalHits++; 
                    hq.Insert(new ScoreDoc(doc, score)); 
                    minScore = ((ScoreDoc) hq.Top()).score; // maintain
minScore 
                } 
            } 

Does this make sense? 

How could I tell the search to use my extended version of the
TopDocCollector class? Also, how would I pull the URL from the document
inside of the loop above? I didn't see any good documentation anywhere on
how to do that. There seems to be little information out there on how to
build your own custom collector. 

Thanks again, 
Mike 


Anshum-2 wrote:
> 
> Hi Mike,
> Not really through queries, but you may do this by writing a custom
> collector. You'd need some supporting data structure to mark/hash the
> occurrence of a domain in your result set.
> 
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
> 
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
> 
> 
> On Wed, Feb 3, 2010 at 6:56 AM, Mike Polzin <mikepolzin@yahoo.com> wrote:
> 
>> I am working on building a web search engine and I would like to build a
>> reults page similar to what Google does. The functionality I am looking
>> to
>> include is what I refer to a "rolling up" sites, meaning that even if a
>> particular site (defined by its base URL) has many relevent hits on
>> various
>> pages for the searches keywords, that site is only shown once in the
>> results
>> listing with a link to the most relevent hit on that site. What I do not
>> want is to have one site dominate a search results page.
>>
>> Does it make sense to just do the search, get the hits list and then
>> programatically remove the results which, although they meet the search
>> criteria, are not as relevent? Is there a way to do this through queries?
>>
>> Thanks in advance!
>>
>> Mike
>>
>>
>>
> 
> 

-- 
View this message in context: http://old.nabble.com/Limiting-search-result-for-web-search-engine-tp27430155p27447319.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 05:23:43 2010
Return-Path: <java-user-return-44862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24275 invoked from network); 4 Feb 2010 05:23:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 05:23:43 -0000
Received: (qmail 8731 invoked by uid 500); 4 Feb 2010 05:23:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8470 invoked by uid 500); 4 Feb 2010 05:23:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8451 invoked by uid 99); 4 Feb 2010 05:23:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 05:23:40 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 05:23:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NcuBJ-0004KE-Fu
	for java-user@lucene.apache.org; Wed, 03 Feb 2010 21:23:09 -0800
Message-ID: <27447903.post@talk.nabble.com>
Date: Wed, 3 Feb 2010 21:23:09 -0800 (PST)
From: mpolzin <mikepolzin@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Limiting search result for web search engine
In-Reply-To: <27447319.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mikepolzin@yahoo.com
References: <805803.47041.qm@web53208.mail.re2.yahoo.com> <867513fe1002021757t53533a49he725a0dda1a77b8@mail.gmail.com> <27447319.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I changed one line below... realized I missed the ! (NOT).. corrected in
original reply.


 if ((hq.Size() < numHits || score >= minScore)  &&
!collectedBaseURLArray.Contains(doc.BaseURL)) 
                { 

mpolzin wrote:
> 
> 
>             if (score > 0.0f) 
>             { 
> 
>                 // Do something here to get the document base URL
> (doc.BaseURL) 
> 
>                 if ((hq.Size() < numHits || score >= minScore)  &&
> !collectedBaseURLArray.Contains(doc.BaseURL)) 
>                 { 
>                     collectedBaseURLArray.Add(doc.BaseURL); 
>                     totalHits++; 
>                     hq.Insert(new ScoreDoc(doc, score)); 
>                     minScore = ((ScoreDoc) hq.Top()).score; // maintain
> minScore 
>                 } 
>             } 
> 
> Does this make sense? 
> 
> How could I tell the search to use my extended version of the
> TopDocCollector class? Also, how would I pull the URL from the document
> inside of the loop above? I didn't see any good documentation anywhere on
> how to do that. There seems to be little information out there on how to
> build your own custom collector. 
> 
> Thanks again, 
> Mike 
> 
> 
> Anshum-2 wrote:
>> 
>> Hi Mike,
>> Not really through queries, but you may do this by writing a custom
>> collector. You'd need some supporting data structure to mark/hash the
>> occurrence of a domain in your result set.
>> 
>> --
>> Anshum Gupta
>> Naukri Labs!
>> http://ai-cafe.blogspot.com
>> 
>> The facts expressed here belong to everybody, the opinions to me. The
>> distinction is yours to draw............
>> 
>> 
>> On Wed, Feb 3, 2010 at 6:56 AM, Mike Polzin <mikepolzin@yahoo.com> wrote:
>> 
>>> I am working on building a web search engine and I would like to build a
>>> reults page similar to what Google does. The functionality I am looking
>>> to
>>> include is what I refer to a "rolling up" sites, meaning that even if a
>>> particular site (defined by its base URL) has many relevent hits on
>>> various
>>> pages for the searches keywords, that site is only shown once in the
>>> results
>>> listing with a link to the most relevent hit on that site. What I do not
>>> want is to have one site dominate a search results page.
>>>
>>> Does it make sense to just do the search, get the hits list and then
>>> programatically remove the results which, although they meet the search
>>> criteria, are not as relevent? Is there a way to do this through
>>> queries?
>>>
>>> Thanks in advance!
>>>
>>> Mike
>>>
>>>
>>>
>> 
>> 
> 
> 

-- 
View this message in context: http://old.nabble.com/Limiting-search-result-for-web-search-engine-tp27430155p27447903.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 06:15:01 2010
Return-Path: <java-user-return-44863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48438 invoked from network); 4 Feb 2010 06:15:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 06:15:00 -0000
Received: (qmail 55688 invoked by uid 500); 4 Feb 2010 06:14:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55501 invoked by uid 500); 4 Feb 2010 06:14:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55491 invoked by uid 99); 4 Feb 2010 06:14:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 06:14:57 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prashullegaddi@gmail.com designates 209.85.216.186 as permitted sender)
Received: from [209.85.216.186] (HELO mail-px0-f186.google.com) (209.85.216.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 06:14:49 +0000
Received: by pxi16 with SMTP id 16so1239366pxi.29
        for <java-user@lucene.apache.org>; Wed, 03 Feb 2010 22:14:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=Sv+IvVZs9l1AcHuT6M5LNSbwk5E/ebkAXDlQoyPeSuI=;
        b=L0vJNxtP4skD7OOxo7kctDjgE+0vQf61OvlOzlB86xSrFGu9GBuigik9y+nvLKYqpk
         y/o6878kScVDdpHGLetPxfk52/CPkqXYQv2ZAG/N+eFJct+8P/953UJa0mYFtQ0/pU+r
         SU0b+f2DW9yG0Cf+gYp4MDdo5gimhKEw8030I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=j8tlaCpBIP5B7Q6S8tnXffy4+WkN8I3YGGHwlo+RyAyjv3oyqShqJCJp4Brdvw7dtq
         KQxvj6FqgMMrbY/uCUQcCcTzvrpB1J0XpBl1ywsymMDvKwMS+RYRNCo1Xq5ZypkstOQm
         D7xK5pgUr7LJHYjjkK8W1P/pSxtiUjfpp6OCw=
MIME-Version: 1.0
Received: by 10.140.55.16 with SMTP id d16mr482158rva.287.1265264068567; Wed, 
	03 Feb 2010 22:14:28 -0800 (PST)
Date: Thu, 4 Feb 2010 11:44:28 +0530
Message-ID: <ac6e61fc1002032214j6bcf6302ka9e7cda5178ce0fa@mail.gmail.com>
Subject: Retrieving field information for each hit when using 
	"MultiFieldQueryParser"
From: prashant ullegaddi <prashullegaddi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636b1471c5aa30a047ec03fe5
X-Virus-Checked: Checked by ClamAV on apache.org

--001636b1471c5aa30a047ec03fe5
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I'm using MultiFieldQueryParser to search over different fields of documents
in the
index. Whenever I get a hit for a query, is it possible to know in which
field the query
match occurred? And is it possible to retrieve the field(s) for each hit?

To make things clearer, suppose I have four fields for each document (say,
"0", "1",
"2", and "3"), and for a hit let the query only occur in field "1" of that
document hit.
is it possible to retrieve this information that for that hit query term
occurred in field
"1"?

I have tried using Explanation for each document, but found it very slow. I
believe there
got to be another fast alternative to achieve the same.

-- 
Thanks and Regards,
Prashant Ullegaddi,
Search and Information Extraction Lab,
IIIT-Hyderabad, INDIA.

--001636b1471c5aa30a047ec03fe5--

From java-user-return-44864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 07:40:14 2010
Return-Path: <java-user-return-44864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78234 invoked from network); 4 Feb 2010 07:40:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 07:40:14 -0000
Received: (qmail 28965 invoked by uid 500); 4 Feb 2010 07:40:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28888 invoked by uid 500); 4 Feb 2010 07:40:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28878 invoked by uid 99); 4 Feb 2010 07:40:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 07:40:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [71.6.200.51] (HELO serve.stimulussoft.com) (71.6.200.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 07:40:02 +0000
Received: from [192.168.0.19] (196-210-246-219.dynamic.isadsl.co.za [196.210.246.219])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by serve.stimulussoft.com (Postfix) with ESMTPSA id E060A50823
	for <java-user@lucene.apache.org>; Wed,  3 Feb 2010 23:39:40 -0800 (PST)
Message-ID: <4B6A799D.3070103@stimulussoft.com>
Date: Thu, 04 Feb 2010 09:39:09 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.7) Gecko/20100111 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Unexpected Query Results
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit

Hi

I have some unexpected query results.

When attempting two queries:

1) All fields, exact phrase query returns 48 hits

(priority:" " attach:" " score:" " size:" 
" sentdate:" " archivedate:" " receiveddate:" 
" from:" " to:" " subject:" " cc:" 
" bcc:" " deliveredto:" " flag:" " 
sensitivity:" " sender:" " recipient:" " 
body:" " attachments:" " attachname:" " 
memberof:" ")

2) All fields, All words query return 0 hits

((priority: attach: score: size: sentdate: 
archivedate: receiveddate: from: to: subject: 
cc: bcc: deliveredto: flag: sensitivity: sender: 
recipient: body: attachments: attachname: memberof: 
) AND (priority: attach: score: size: sentdate: 
archivedate: receiveddate: from: to: subject: 
cc: bcc: deliveredto: flag: sensitivity: 
sender: recipient: body: attachments: 
attachname: memberof: ))

I am not sure why query 2 returns 0 hits. In my mind it should return 48 
hits as in query (1).

I am using Lucene 3.0. Is there a pseudo field for all search terms?

Thanks

Jamie





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 11:15:15 2010
Return-Path: <java-user-return-44865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53612 invoked from network); 4 Feb 2010 11:15:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 11:15:15 -0000
Received: (qmail 5180 invoked by uid 500); 4 Feb 2010 11:15:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5092 invoked by uid 500); 4 Feb 2010 11:15:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5082 invoked by uid 99); 4 Feb 2010 11:15:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 11:15:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.214 as permitted sender)
Received: from [209.85.218.214] (HELO mail-bw0-f214.google.com) (209.85.218.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 11:15:02 +0000
Received: by bwz6 with SMTP id 6so1823524bwz.11
        for <java-user@lucene.apache.org>; Thu, 04 Feb 2010 03:14:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=w96sBXj1RZgResyURsG87P/VjqukaukKZ5f38BHmXAQ=;
        b=sv3TxFTcURD/LXeACTtNVvX2tbu8BZVKM4Se9b2NqHtqIIN1TC9HyPU/hf8ytBzIry
         7sUPlrDuw53RJwyk7pK6JKzbrK+u+p16bKqmDR7WCjlFYRNtdGbR7IAUrQf0lnYx+u+T
         JGFPO6KlpTqHlxh3536DX0c5R/XE6+IN7+YbI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=hMrIVdBucXSzgCL3BuTQZsxjkMwDNMl9NtmHfPfVGzdTdxFlhzLPl3XWN6VaZ7rXZV
         TV6rW/1SJoZ5JEaHkePc7IMMy4pdbM3tijvAQy9jtMatriAYldpBpbWzhKwUzX5YFm0z
         krWUyJTICgwunn0IAYYpUsJ82lgLSW2CNT6oE=
MIME-Version: 1.0
Received: by 10.204.140.25 with SMTP id g25mr502457bku.197.1265282081279; Thu, 
	04 Feb 2010 03:14:41 -0800 (PST)
In-Reply-To: <27447903.post@talk.nabble.com>
References: <805803.47041.qm@web53208.mail.re2.yahoo.com> <867513fe1002021757t53533a49he725a0dda1a77b8@mail.gmail.com> 
	<27447319.post@talk.nabble.com> <27447903.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 4 Feb 2010 11:14:21 +0000
Message-ID: <8c4e68611002040314lf2a6cf0he7e0c62eafcb9db8@mail.gmail.com>
Subject: Re: Limiting search result for web search engine
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Writing a custom collector is pretty straightforward.  There is an
example in the javadocs for Collector.  Use it via
Searcher.search(query, collector) or search(query, filter, collector).

The docid is passed to the collect() method and you can use that to
get at the document and thus the URL, via your searcher or index
reader.  But there are performance implications to doing it this way -
you'll be looking at the URL for all hits, not just the top n that I
imagine you will be displaying.  If the index is big and you'll be
getting lots of hits that is likely to be a problem.  FieldCache might
help.

I think that I'd move your deduping logic to after the search and set
a limit on the number of hits that you check.  That way you'd also get
the best hit first.


--
Ian.


On Thu, Feb 4, 2010 at 5:23 AM, mpolzin <mikepolzin@yahoo.com> wrote:
>
> I changed one line below... realized I missed the ! (NOT).. corrected in
> original reply.
>
>
> =A0if ((hq.Size() < numHits || score >=3D minScore) =A0&&
> !collectedBaseURLArray.Contains(doc.BaseURL))
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
>
> mpolzin wrote:
>>
>>
>> =A0 =A0 =A0 =A0 =A0 =A0 if (score > 0.0f)
>> =A0 =A0 =A0 =A0 =A0 =A0 {
>>
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 // Do something here to get the document=
 base URL
>> (doc.BaseURL)
>>
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 if ((hq.Size() < numHits || score >=3D m=
inScore) =A0&&
>> !collectedBaseURLArray.Contains(doc.BaseURL))
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 {
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 collectedBaseURLArray.Add(doc.Ba=
seURL);
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 totalHits++;
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 hq.Insert(new ScoreDoc(doc, scor=
e));
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 minScore =3D ((ScoreDoc) hq.Top(=
)).score; // maintain
>> minScore
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 }
>> =A0 =A0 =A0 =A0 =A0 =A0 }
>>
>> Does this make sense?
>>
>> How could I tell the search to use my extended version of the
>> TopDocCollector class? Also, how would I pull the URL from the document
>> inside of the loop above? I didn't see any good documentation anywhere o=
n
>> how to do that. There seems to be little information out there on how to
>> build your own custom collector.
>>
>> Thanks again,
>> Mike
>>
>>
>> Anshum-2 wrote:
>>>
>>> Hi Mike,
>>> Not really through queries, but you may do this by writing a custom
>>> collector. You'd need some supporting data structure to mark/hash the
>>> occurrence of a domain in your result set.
>>>
>>> --
>>> Anshum Gupta
>>> Naukri Labs!
>>> http://ai-cafe.blogspot.com
>>>
>>> The facts expressed here belong to everybody, the opinions to me. The
>>> distinction is yours to draw............
>>>
>>>
>>> On Wed, Feb 3, 2010 at 6:56 AM, Mike Polzin <mikepolzin@yahoo.com> wrot=
e:
>>>
>>>> I am working on building a web search engine and I would like to build=
 a
>>>> reults page similar to what Google does. The functionality I am lookin=
g
>>>> to
>>>> include is what I refer to a "rolling up" sites, meaning that even if =
a
>>>> particular site (defined by its base URL) has many relevent hits on
>>>> various
>>>> pages for the searches keywords, that site is only shown once in the
>>>> results
>>>> listing with a link to the most relevent hit on that site. What I do n=
ot
>>>> want is to have one site dominate a search results page.
>>>>
>>>> Does it make sense to just do the search, get the hits list and then
>>>> programatically remove the results which, although they meet the searc=
h
>>>> criteria, are not as relevent? Is there a way to do this through
>>>> queries?
>>>>
>>>> Thanks in advance!
>>>>
>>>> Mike
>>>>
>>>>
>>>>
>>>
>>>
>>
>>
>
> --
> View this message in context: http://old.nabble.com/Limiting-search-resul=
t-for-web-search-engine-tp27430155p27447903.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 11:42:56 2010
Return-Path: <java-user-return-44866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60793 invoked from network); 4 Feb 2010 11:42:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 11:42:56 -0000
Received: (qmail 42494 invoked by uid 500); 4 Feb 2010 11:42:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42413 invoked by uid 500); 4 Feb 2010 11:42:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42403 invoked by uid 99); 4 Feb 2010 11:42:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 11:42:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jpa458@gmail.com designates 209.85.219.218 as permitted sender)
Received: from [209.85.219.218] (HELO mail-ew0-f218.google.com) (209.85.219.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 11:42:47 +0000
Received: by ewy10 with SMTP id 10so543463ewy.11
        for <java-user@lucene.apache.org>; Thu, 04 Feb 2010 03:42:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=v2IbSxmTyFpL8DED6AKppde0H0DlAHXLozglpcmpqBU=;
        b=tL6xhzNo3bKePgKs4wAU/rqXTohxozK+DqZCQhLnupplpaPnaK+l/uFITMyXk0iWka
         DGsGYu3b2o5FGGEe0YUGm1slJEwGo2ZH4RwzdnySIgSNUNH+W0W6qQDD3KJaewNySUIc
         t8GTGspERgQBymjXp55rr4dZDUtC7qyxuQodA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=TJWBgxvK3KbBdDVZf3fRdxA6RLkKYSwCBj3K6D56NiGYjFREZmPDOBJDCaz3/CbMi1
         5CyQO7Mm+zfAQ2D+V1Sf1U2CsDkWkwhkvx+XO9fiNczV4OpOxTFMwXCOa45jW8cds8ZH
         OJ3TW/W/rfLViBmC8DIro13FBfF9Q9gjC9SyI=
MIME-Version: 1.0
Received: by 10.216.85.134 with SMTP id u6mr543820wee.213.1265283745514; Thu, 
	04 Feb 2010 03:42:25 -0800 (PST)
Date: Thu, 4 Feb 2010 12:42:25 +0100
Message-ID: <a110170d1002040342l2c57cacbu6effa730a6db3009@mail.gmail.com>
Subject: Getting an incorrect spatial search - lucene 2.9.1 and 3.0
From: Julian Atkinson <jpa458@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi everyone,

I've been using lucene spatial for the last few months without
noticing any particular issues with the results...until now.

I'm posting 2 unit tests to demonstrate the issue - the first based on
2.9.1 and the other in 3.0

Could be I'm missing something obvious and would appreciate anyone's thoughts.

The unit test adds one location to a memory index and searches from
another. The distance between the 2 locations is calculated as 5ish
miles

In 2.9.1 it requires a search radius of 20 miles before the search
returns the hit.
In 3.0 its somewhat better, requiring a radius of 8 miles

The weird thing is I have seen no issue with my other test data and
both coordinates validate in Google as I can get a route plan between
them.

I'm going to start diving into how spatial is working but would
greatly appreciate any help/direction.

Cheers,
Julian

/////////// FIRST TEST 2.9.1 //////////////////////////////////////////////

package com.jpa.ispecials.dao.hibernate;

import java.io.IOException;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;

import junit.framework.TestCase;

import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.Hit;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.Sort;
import org.apache.lucene.search.SortField;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.search.function.CustomScoreQuery;
import org.apache.lucene.search.function.FieldScoreQuery;
import org.apache.lucene.search.function.FieldScoreQuery.Type;
import org.apache.lucene.spatial.geohash.GeoHashUtils;
import org.apache.lucene.spatial.tier.DistanceFieldComparatorSource;
import org.apache.lucene.spatial.tier.DistanceQueryBuilder;
import org.apache.lucene.spatial.tier.projections.CartesianTierPlotter;
import org.apache.lucene.spatial.tier.projections.IProjector;
import org.apache.lucene.spatial.tier.projections.SinusoidalProjector;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.util.NumericUtils;




public class LuceneDistanceQueryBuilderTest extends TestCase {

	private Directory directory;
	private IndexSearcher searcher;

	private List<CartesianTierPlotter> ctps = new
LinkedList<CartesianTierPlotter>();
	private String geoHashPrefix = "geohash";
	private IProjector project = new SinusoidalProjector();
	
	protected void setUp() throws IOException {
		
		directory = new RAMDirectory();
	
	    IndexWriter writer = new IndexWriter(directory, new
WhitespaceAnalyzer(), true);
	    setUpPlotter( 2, 15);
	    addData(writer);
	    searcher = new IndexSearcher(directory);
	    System.out.println("setup");
	
	}
	
	private void setUpPlotter(int base, int top) {
	    for (; base <= top; base ++){
	      ctps.add(new CartesianTierPlotter(base,project,
	          CartesianTierPlotter.DEFALT_FIELD_PREFIX));
	    }
	  }
	
	private void addPoint(IndexWriter writer, String name, double lat,
double lng) throws IOException {
	
	    Document doc = new Document();
	
	    doc.add(new Field("name", name,Field.Store.YES, Field.Index.TOKENIZED));
	    // add a default meta field to make searching all documents easy
	    doc.add(new Field("metafile", "doc",Field.Store.YES,
Field.Index.TOKENIZED));
	
	    int ctpsize = ctps.size();
	    for (int i =0; i < ctpsize; i++){
	      CartesianTierPlotter ctp = ctps.get(i);
	      doc.add(new Field(ctp.getTierFieldName(),
	          NumericUtils.doubleToPrefixCoded(ctp.getTierBoxId(lat,lng)),
	          Field.Store.YES,
	          Field.Index.NO_NORMS));
	
	      doc.add(new Field(geoHashPrefix, GeoHashUtils.encode(lat,lng),
	    		  Field.Store.YES,
	    		  Field.Index.UN_TOKENIZED));
	    }
	    writer.addDocument(doc);
	
	  }
	
	private void addData(IndexWriter writer) throws IOException {
		    addPoint(writer,"A GREAT LOCATION",52.0872846,5.1272173);
		    writer.commit();
		    writer.close();
		  }
	
	
	public void testBasicSearchHitsWithLucene() throws Exception {
		//Search point Coordinates
		final double lat = 52.1068245;
		final double lng = 5.0106074;
		
		
		//the various radius to test with
		final double[] milesToTest = new double[] {2.0, 7,   18, 20, 30};
		//and corresponding expected results
		final int[] expectedHitCount = new int[]  {0,    1,   1,  1,  1};
		
		//THE FOLLOWING PASSES
		//final int[] expectedHitCount = new int[]  {0,    0,   0,  1,  1};

		
		for(int x=0;x<expectedHitCount.length;x++) {
		    System.out.println("testing for distance : "+milesToTest[x]);
		
			final double miles = milesToTest[x];
			final DistanceQueryBuilder dq = new DistanceQueryBuilder(lat, lng, miles,
			        "geohash", CartesianTierPlotter.DEFALT_FIELD_PREFIX, true);
			
			Query query = new TermQuery(new Term("metafile","doc"));
	
			FieldScoreQuery fsQuery = new FieldScoreQuery("geo_distance", Type.FLOAT);
		    CustomScoreQuery customScore = new CustomScoreQuery(query,fsQuery) {
			
		        @Override
		          public float customScore(int doc, float subQueryScore,
float valSrcScore){
		         // System.out.println(doc);
		          if (dq.getDistanceFilter().getDistance(doc) == null)
		            return 0;
			
		          double distance = dq.getDistanceFilter().getDistance(doc);
		
		          // boost score shouldn't exceed 1
		          if (distance < 1.0d)
		            distance = 1.0d;
		          //boost by distance is invertly proportional to
		          // to distance from center point to location
		          float score = new Float((miles - distance) / miles ).floatValue();
		          return score * subQueryScore;
		        }
		      };
		
		    // Create a distance sort
		    // As the radius filter has performed the distance calculations
		    // already, pass in the filter to reuse the results.
		    //
		    DistanceFieldComparatorSource dsort = new
DistanceFieldComparatorSource(dq.getDistanceFilter());
		    Sort sort = new Sort(new SortField("geo_distance", dsort));
			
		    // Perform the search, using the term query, the serial chain
filter, and the
		    // distance sort
		    Hits hits = searcher.search(customScore, dq.getFilter());
		
		
		    Iterator iter = (Iterator) hits.iterator();
		    while (iter.hasNext()){
		    	Hit hit = (Hit) iter.next();
		    	System.out.println(hit.getId());
		    	System.out.println(dq.getDistanceFilter().getDistance(hit.getId()));
		    }
		
		    assertEquals(expectedHitCount[x], hits.length());
		
		}
		
		
	}
}


////////// SECOND TEST 3.0 ////////////////////////////////////////////

/**
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.apache.lucene.spatial.tier;

import java.io.IOException;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;

import junit.framework.TestCase;

import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.ScoreDoc;
import org.apache.lucene.search.Sort;
import org.apache.lucene.search.SortField;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.search.TopDocs;
import org.apache.lucene.search.function.CustomScoreQuery;
import org.apache.lucene.search.function.FieldScoreQuery;
import org.apache.lucene.search.function.FieldScoreQuery.Type;
import org.apache.lucene.spatial.geohash.GeoHashUtils;
import org.apache.lucene.spatial.geometry.DistanceUnits;
import org.apache.lucene.spatial.geometry.FloatLatLng;
import org.apache.lucene.spatial.geometry.LatLng;
import org.apache.lucene.spatial.tier.projections.CartesianTierPlotter;
import org.apache.lucene.spatial.tier.projections.IProjector;
import org.apache.lucene.spatial.tier.projections.SinusoidalProjector;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.util.NumericUtils;

/**
 *
 */
public class TestCartesianIssue extends TestCase{

  /**
   * @param args
   */

  private Directory directory;
  private IndexSearcher searcher;
  // reston va
  private double lat = 52.1068245;
  private double lng= 5.0106074;
  private String latField = "lat";
  private String lngField = "lng";
  private List<CartesianTierPlotter> ctps = new
LinkedList<CartesianTierPlotter>();
  private String geoHashPrefix = "_geoHash_";

  private IProjector project = new SinusoidalProjector();

  @Override
  protected void setUp() throws IOException {
    directory = new RAMDirectory();

    IndexWriter writer = new IndexWriter(directory, new
WhitespaceAnalyzer(), true, IndexWriter.MaxFieldLength.UNLIMITED);

    setUpPlotter( 2, 15);

    addData(writer);

  }

  private void setUpPlotter(int base, int top) {

    for (; base <= top; base ++){
      ctps.add(new CartesianTierPlotter(base,project,
          CartesianTierPlotter.DEFALT_FIELD_PREFIX));
    }
  }

  private void addPoint(IndexWriter writer, String name, double lat,
double lng) throws IOException{

    Document doc = new Document();

    doc.add(new Field("name", name,Field.Store.YES, Field.Index.ANALYZED));

    // convert the lat / long to lucene fields
    doc.add(new Field(latField,
NumericUtils.doubleToPrefixCoded(lat),Field.Store.YES,
Field.Index.NOT_ANALYZED));
    doc.add(new Field(lngField,
NumericUtils.doubleToPrefixCoded(lng),Field.Store.YES,
Field.Index.NOT_ANALYZED));

    // add a default meta field to make searching all documents easy
    doc.add(new Field("metafile", "doc",Field.Store.YES, Field.Index.ANALYZED));

    int ctpsize = ctps.size();
    for (int i =0; i < ctpsize; i++){
      CartesianTierPlotter ctp = ctps.get(i);
      doc.add(new Field(ctp.getTierFieldName(),
          NumericUtils.doubleToPrefixCoded(ctp.getTierBoxId(lat,lng)),
          Field.Store.YES,
          Field.Index.NOT_ANALYZED_NO_NORMS));

      doc.add(new Field(geoHashPrefix, GeoHashUtils.encode(lat,lng),
    		  Field.Store.YES,
    		  Field.Index.NOT_ANALYZED_NO_NORMS));
    }
    writer.addDocument(doc);

  }



  private void addData(IndexWriter writer) throws IOException {
    addPoint(writer,"A Great Place",52.0872846,5.1272173);

    writer.commit();
    writer.close();
  }

  public void testRange() throws IOException, InvalidGeoException {
    searcher = new IndexSearcher(directory, true);

    final double[] milesToTest = new double[] {8, 7, 6 };
    final int[] expected = new int[] {1, 1, 1 };
    //THE FOLLOWING PASSES
    //final int[] expected = new int[] {1, 0, 0 };

    for(int x=0;x<expected.length;x++) {

      final double miles = milesToTest[x];

      // create a distance query
      final DistanceQueryBuilder dq = new DistanceQueryBuilder(lat, lng, miles,

latField, lngField, CartesianTierPlotter.DEFALT_FIELD_PREFIX, true);

      System.out.println(dq);
      //create a term query to search against all documents
      Query tq = new TermQuery(new Term("metafile", "doc"));

      FieldScoreQuery fsQuery = new FieldScoreQuery("geo_distance", Type.FLOAT);

      CustomScoreQuery customScore = new
CustomScoreQuery(dq.getQuery(tq),fsQuery){

          @Override
            public float customScore(int doc, float subQueryScore,
float valSrcScore){
            //System.out.println(doc);
            if (dq.distanceFilter.getDistance(doc) == null)
              return 0;

            double distance = dq.distanceFilter.getDistance(doc);
            // boost score shouldn't exceed 1
            if (distance < 1.0d)
              distance = 1.0d;
            //boost by distance is invertly proportional to
            // to distance from center point to location
            float score = (float) ( (miles - distance) / miles );
            return score * subQueryScore;
          }
        };
      // Create a distance sort
      // As the radius filter has performed the distance calculations
      // already, pass in the filter to reuse the results.
      //
      DistanceFieldComparatorSource dsort = new
DistanceFieldComparatorSource(dq.distanceFilter);
      Sort sort = new Sort(new SortField("foo", dsort,false));

      // Perform the search, using the term query, the serial chain
filter, and the
      // distance sort
      TopDocs hits =
searcher.search(customScore.createWeight(searcher),null, 1000, sort);
      int results = hits.totalHits;
      ScoreDoc[] scoreDocs = hits.scoreDocs;

      // Get a list of distances
      Map<Integer,Double> distances = dq.distanceFilter.getDistances();

      // distances calculated from filter first pass must be less than total
      // docs, from the above test of 20 items, 12 will come from the
boundary box
      // filter, but only 5 are actually in the radius of the results.

      // Note Boundary Box filtering, is not accurate enough for most systems.


      System.out.println("Distance Filter filtered: " + distances.size());
      System.out.println("Results: " + results);
      System.out.println("=============================");
      System.out.println("Distances should be 1 "+ expected[x] + ":" +
distances.size());
      System.out.println("Results should be 1 "+ expected[x] + ":" + results);

      assertEquals(expected[x], distances.size()); // fixed a store of
only needed distances
      assertEquals(expected[x], results);
      double lastDistance = 0;
      for(int i =0 ; i < results; i++){
        Document d = searcher.doc(scoreDocs[i].doc);

        String name = d.get("name");
        double rsLat = NumericUtils.prefixCodedToDouble(d.get(latField));
        double rsLng = NumericUtils.prefixCodedToDouble(d.get(lngField));
        Double geo_distance = distances.get(scoreDocs[i].doc);

        double distance =
DistanceUtils.getInstance().getDistanceMi(lat, lng, rsLat, rsLng);
        double llm = DistanceUtils.getInstance().getLLMDistance(lat,
lng, rsLat, rsLng);
        System.out.println("Name: "+ name +", Distance "+ distance);
//(res, ortho, harvesine):"+ distance +" |"+ geo_distance +"|"+ llm +"
| score "+ hits.score(i));
        assertTrue(Math.abs((distance - llm)) < 1);
        assertTrue((distance < miles ));
        assertTrue(geo_distance > lastDistance);
        lastDistance = geo_distance;
      }
    }
  }



}

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 11:44:20 2010
Return-Path: <java-user-return-44867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61478 invoked from network); 4 Feb 2010 11:44:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 11:44:20 -0000
Received: (qmail 47748 invoked by uid 500); 4 Feb 2010 11:44:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47680 invoked by uid 500); 4 Feb 2010 11:44:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47670 invoked by uid 99); 4 Feb 2010 11:44:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 11:44:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.214 as permitted sender)
Received: from [209.85.218.214] (HELO mail-bw0-f214.google.com) (209.85.218.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 11:44:10 +0000
Received: by bwz6 with SMTP id 6so1841296bwz.11
        for <java-user@lucene.apache.org>; Thu, 04 Feb 2010 03:43:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=Ms7oS4AzasSz6Xx/qR87627QJvHmY/KHEYB+RPZj/lU=;
        b=UbiuDTI/zoAucH4KAOhIjd8QUmXFjM9sgSkO+WGqrm7430SvKwBrHMx2fPFWFpK4Zz
         Vf1HFerxQLZKWsm9ujHc7ibpa4Jyvzq0VU9aIJowoBqVzpNTZgKa4kn9IQ1/FOZ0UKhj
         yJ5jFseDHL9MPi80RkbQuEi75LX+GqwFscnV4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=utr4NyYd2h7I+BQAeqEOEQKNhOwdfKdmIZA8bDavkvo71gl4VufIvvmmKyg+rJumrR
         NiBdYYNlc2ciikvs1ZURoDX6Lul1bMQuRLHK7+WV5qj0pBzukK6JzjQqyhXok9qv2mvU
         xQ34rvBIJkFOxzfpJPNw7Ot3vMqN9keWHKuFM=
MIME-Version: 1.0
Received: by 10.204.4.207 with SMTP id 15mr638729bks.60.1265283829178; Thu, 04 
	Feb 2010 03:43:49 -0800 (PST)
In-Reply-To: <4B6A799D.3070103@stimulussoft.com>
References: <4B6A799D.3070103@stimulussoft.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 4 Feb 2010 11:43:29 +0000
Message-ID: <8c4e68611002040343x2929a299v915dd12b4ca93fbd@mail.gmail.com>
Subject: Re: Unexpected Query Results
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64

VGhlcmUgaXMgbm8gcHNldWRvIGZpZWxkIGZvciBhbGwgc2VhcmNoIHRlcm1zLiAgMiBjb21tb24g
cHJhY3RpY2VzIGFyZQp0byB1c2UgTXVsdGlGaWVsZFF1ZXJ5UGFyc2VyIG9yIHRvIGFkZCBhIGNh
dGNoLWFsbCBmaWVsZC4gIEkgdGVuZCB0bwpkbyB0aGUgbGF0dGVyLgoKQXQgYSBnbGFuY2UgSSdk
IGFncmVlIHRoYXQgdGhlIHNlY29uZCBxdWVyeSBzaG91bGQgYWxzbyByZXR1cm4gNDgKaGl0cy4g
IE1heWJlIGEgc21hbGwgc2VsZi1jb250YWluZWQgdGVzdCBjYXNlIG9yIHN0YW5kYWxvbmUgcHJv
Z3JhbQp3b3VsZCBiZSBlYXNpZXIgdG8gZGVidWcuCgoKLS0KSWFuLgoKCk9uIFRodSwgRmViIDQs
IDIwMTAgYXQgNzozOSBBTSwgSmFtaWUgPGphbWllQHN0aW11bHVzc29mdC5jb20+IHdyb3RlOgo+
IEhpCj4KPiBJIGhhdmUgc29tZSB1bmV4cGVjdGVkIHF1ZXJ5IHJlc3VsdHMuCj4KPiBXaGVuIGF0
dGVtcHRpbmcgdHdvIHF1ZXJpZXM6Cj4KPiAxKSBBbGwgZmllbGRzLCBleGFjdCBwaHJhc2UgcXVl
cnkgcmV0dXJucyA0OCBoaXRzCj4KPiAocHJpb3JpdHk6ItCx0YvQu9C+INCy0YDQtdC80Y8iIGF0
dGFjaDoi0LHRi9C70L4g0LLRgNC10LzRjyIgc2NvcmU6ItCx0YvQu9C+INCy0YDQtdC80Y8iIHNp
emU6ItCx0YvQu9C+Cj4g0LLRgNC10LzRjyIgc2VudGRhdGU6ItCx0YvQu9C+INCy0YDQtdC80Y8i
IGFyY2hpdmVkYXRlOiLQsdGL0LvQviDQstGA0LXQvNGPIiByZWNlaXZlZGRhdGU6ItCx0YvQu9C+
Cj4g0LLRgNC10LzRjyIgZnJvbToi0LHRi9C70L4g0LLRgNC10LzRjyIgdG86ItCx0YvQu9C+INCy
0YDQtdC80Y8iIHN1YmplY3Q6ItCx0YvQu9C+INCy0YDQtdC80Y8iIGNjOiLQsdGL0LvQvgo+INCy
0YDQtdC80Y8iIGJjYzoi0LHRi9C70L4g0LLRgNC10LzRjyIgZGVsaXZlcmVkdG86ItCx0YvQu9C+
INCy0YDQtdC80Y8iIGZsYWc6ItCx0YvQu9C+INCy0YDQtdC80Y8iCj4gc2Vuc2l0aXZpdHk6ItCx
0YvQu9C+INCy0YDQtdC80Y8iIHNlbmRlcjoi0LHRi9C70L4g0LLRgNC10LzRjyIgcmVjaXBpZW50
OiLQsdGL0LvQviDQstGA0LXQvNGPIgo+IGJvZHk6ItCx0YvQu9C+INCy0YDQtdC80Y8iIGF0dGFj
aG1lbnRzOiLQsdGL0LvQviDQstGA0LXQvNGPIiBhdHRhY2huYW1lOiLQsdGL0LvQviDQstGA0LXQ
vNGPIgo+IG1lbWJlcm9mOiLQsdGL0LvQviDQstGA0LXQvNGPIikKPgo+IDIpIEFsbCBmaWVsZHMs
IEFsbCB3b3JkcyBxdWVyeSByZXR1cm4gMCBoaXRzCj4KPiAoKHByaW9yaXR5OtCx0YvQu9C+IGF0
dGFjaDrQsdGL0LvQviBzY29yZTrQsdGL0LvQviBzaXplOtCx0YvQu9C+IHNlbnRkYXRlOtCx0YvQ
u9C+Cj4gYXJjaGl2ZWRhdGU60LHRi9C70L4gcmVjZWl2ZWRkYXRlOtCx0YvQu9C+IGZyb2060LHR
i9C70L4gdG860LHRi9C70L4gc3ViamVjdDrQsdGL0LvQviBjYzrQsdGL0LvQvgo+IGJjYzrQsdGL
0LvQviBkZWxpdmVyZWR0bzrQsdGL0LvQviBmbGFnOtCx0YvQu9C+IHNlbnNpdGl2aXR5OtCx0YvQ
u9C+IHNlbmRlcjrQsdGL0LvQvgo+IHJlY2lwaWVudDrQsdGL0LvQviBib2R5OtCx0YvQu9C+IGF0
dGFjaG1lbnRzOtCx0YvQu9C+IGF0dGFjaG5hbWU60LHRi9C70L4gbWVtYmVyb2Y60LHRi9C70L4g
KQo+IEFORCAocHJpb3JpdHk60LLRgNC10LzRjyBhdHRhY2g60LLRgNC10LzRjyBzY29yZTrQstGA
0LXQvNGPIHNpemU60LLRgNC10LzRjyBzZW50ZGF0ZTrQstGA0LXQvNGPCj4gYXJjaGl2ZWRhdGU6
0LLRgNC10LzRjyByZWNlaXZlZGRhdGU60LLRgNC10LzRjyBmcm9tOtCy0YDQtdC80Y8gdG860LLR
gNC10LzRjyBzdWJqZWN0OtCy0YDQtdC80Y8KPiBjYzrQstGA0LXQvNGPIGJjYzrQstGA0LXQvNGP
IGRlbGl2ZXJlZHRvOtCy0YDQtdC80Y8gZmxhZzrQstGA0LXQvNGPIHNlbnNpdGl2aXR5OtCy0YDQ
tdC80Y8KPiBzZW5kZXI60LLRgNC10LzRjyByZWNpcGllbnQ60LLRgNC10LzRjyBib2R5OtCy0YDQ
tdC80Y8gYXR0YWNobWVudHM60LLRgNC10LzRjyBhdHRhY2huYW1lOtCy0YDQtdC80Y8KPiBtZW1i
ZXJvZjrQstGA0LXQvNGPICkpCj4KPiBJIGFtIG5vdCBzdXJlIHdoeSBxdWVyeSAyIHJldHVybnMg
MCBoaXRzLiBJbiBteSBtaW5kIGl0IHNob3VsZCByZXR1cm4gNDgKPiBoaXRzIGFzIGluIHF1ZXJ5
ICgxKS4KPgo+IEkgYW0gdXNpbmcgTHVjZW5lIDMuMC4gSXMgdGhlcmUgYSBwc2V1ZG8gZmllbGQg
Zm9yIGFsbCBzZWFyY2ggdGVybXM/Cj4KPiBUaGFua3MKPgo+IEphbWllCj4KPgo+Cj4KPgo+IC0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmli
ZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGph
dmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgo=


From java-user-return-44868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 11:48:43 2010
Return-Path: <java-user-return-44868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63563 invoked from network); 4 Feb 2010 11:48:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 11:48:43 -0000
Received: (qmail 55854 invoked by uid 500); 4 Feb 2010 11:48:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55773 invoked by uid 500); 4 Feb 2010 11:48:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55762 invoked by uid 99); 4 Feb 2010 11:48:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 11:48:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 11:48:33 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nd0Bw-00030Z-Np
	for java-user@lucene.apache.org; Thu, 04 Feb 2010 03:48:12 -0800
Message-ID: <27451472.post@talk.nabble.com>
Date: Thu, 4 Feb 2010 03:48:12 -0800 (PST)
From: Suraj Parida <parida.suraj@gmail.com>
To: java-user@lucene.apache.org
Subject: org.apache.lucene.util.English
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: parida.suraj@gmail.com


Hi,

 
lucene-2.9.1-src\lucene-2.9.1\contrib\spellchecker\src\test\org\apache\lucene\search\spell

         has a file TestSpellChecker.java

    Please tell which jar file is used in it. i can't find the jar.

Regards
Suraj
-- 
View this message in context: http://old.nabble.com/org.apache.lucene.util.English-tp27451472p27451472.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 12:09:52 2010
Return-Path: <java-user-return-44869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83403 invoked from network); 4 Feb 2010 12:09:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 12:09:52 -0000
Received: (qmail 81588 invoked by uid 500); 4 Feb 2010 12:09:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81559 invoked by uid 500); 4 Feb 2010 12:09:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81549 invoked by uid 99); 4 Feb 2010 12:09:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 12:09:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 12:09:39 +0000
Received: by fg-out-1718.google.com with SMTP id 19so192073fgg.5
        for <java-user@lucene.apache.org>; Thu, 04 Feb 2010 04:09:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=ybj0kSHVGKCkPYDVsfiIsDvm2InAzjZk+uYFAIhQ/uk=;
        b=GTO3HT+HUFrihE2qcORGf35zBKFebM/RAmxZNxog3l1IKFpT26McJUE/m14lved3tT
         0DxOipCG1lKPNwRMxz/Wn3r9WJEHPumnXTbHFAQwWNkd+s705RW217FviTLIAcNnvKZj
         9FLi2fN2pVJscoG275u5nlkfSEIv74zyVzvWg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=pw7scpW9UieAKG5i4l3Y+vgjHsHRDXpJPnOW9r0DvH8+F4XcI3ozQwRUuHO8nl1iSP
         +iBORBuX25ONyXGcmmYTEXmbwxByxdOarDz5NpAdWvZ+HSpaYVMoZwDuYRsLSKFj2REU
         QS/WCvHhZ26eF+Q02bPMtWUTi6UpO/JkivDDk=
MIME-Version: 1.0
Received: by 10.239.188.139 with SMTP id p11mr108468hbh.102.1265285356566; 
	Thu, 04 Feb 2010 04:09:16 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <27451472.post@talk.nabble.com>
References: <27451472.post@talk.nabble.com>
Date: Thu, 4 Feb 2010 13:09:16 +0100
Message-ID: <f18c9dde1002040409i61b1e38anf211a4c55b6c5a67@mail.gmail.com>
Subject: Re: org.apache.lucene.util.English
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You are referring to a testcase which is not included in a any artifact.
What are you trying to do with this class?

simon

On Thu, Feb 4, 2010 at 12:48 PM, Suraj Parida <parida.suraj@gmail.com> wrot=
e:
>
> Hi,
>
>
> lucene-2.9.1-src\lucene-2.9.1\contrib\spellchecker\src\test\org\apache\lu=
cene\search\spell
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 has a file TestSpellChecker.java
>
> =C2=A0 =C2=A0Please tell which jar file is used in it. i can't find the j=
ar.
>
> Regards
> Suraj
> --
> View this message in context: http://old.nabble.com/org.apache.lucene.uti=
l.English-tp27451472p27451472.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 12:18:02 2010
Return-Path: <java-user-return-44870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85667 invoked from network); 4 Feb 2010 12:18:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 12:18:02 -0000
Received: (qmail 97769 invoked by uid 500); 4 Feb 2010 12:17:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97694 invoked by uid 500); 4 Feb 2010 12:17:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97684 invoked by uid 99); 4 Feb 2010 12:17:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 12:17:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 12:17:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nd0eI-0005dQ-Q3
	for java-user@lucene.apache.org; Thu, 04 Feb 2010 04:17:30 -0800
Message-ID: <27451835.post@talk.nabble.com>
Date: Thu, 4 Feb 2010 04:17:30 -0800 (PST)
From: Suraj Parida <parida.suraj@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: org.apache.lucene.util.English
In-Reply-To: <f18c9dde1002040409i61b1e38anf211a4c55b6c5a67@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: parida.suraj@gmail.com
References: <27451472.post@talk.nabble.com> <f18c9dde1002040409i61b1e38anf211a4c55b6c5a67@mail.gmail.com>


 Simon,

      Do you mean org.apache.lucene.util.English is not a part of 2.9.1 ?

     Actually i was trying to add spell checker in my application search. I
referred it to know how to use the same. As it is difficult to find example=
s
so I thought it is the best place to see sample codes :)


Regards,
Suraj=20



Simon Willnauer wrote:
>=20
> You are referring to a testcase which is not included in a any artifact.
> What are you trying to do with this class?
>=20
> simon
>=20
> On Thu, Feb 4, 2010 at 12:48 PM, Suraj Parida <parida.suraj@gmail.com>
> wrote:
>>
>> Hi,
>>
>>
>> lucene-2.9.1-src\lucene-2.9.1\contrib\spellchecker\src\test\org\apache\l=
ucene\search\spell
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 has a file TestSpellChecker.java
>>
>> =C2=A0 =C2=A0Please tell which jar file is used in it. i can't find the =
jar.
>>
>> Regards
>> Suraj
>> --
>> View this message in context:
>> http://old.nabble.com/org.apache.lucene.util.English-tp27451472p27451472=
.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/org.apache.lucene.util.=
English-tp27451472p27451835.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 12:27:49 2010
Return-Path: <java-user-return-44871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87844 invoked from network); 4 Feb 2010 12:27:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 12:27:49 -0000
Received: (qmail 12204 invoked by uid 500); 4 Feb 2010 12:27:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12120 invoked by uid 500); 4 Feb 2010 12:27:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12110 invoked by uid 99); 4 Feb 2010 12:27:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 12:27:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.213 as permitted sender)
Received: from [209.85.220.213] (HELO mail-fx0-f213.google.com) (209.85.220.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 12:27:37 +0000
Received: by fxm5 with SMTP id 5so2458693fxm.35
        for <java-user@lucene.apache.org>; Thu, 04 Feb 2010 04:27:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=4/613DXr/SZuqqWhpHUoTyh0N9Fc+dG1rNwaXtU6kd0=;
        b=Y65kS6QZFvNdXsUAtAPqzllc3T96GoUaDv7WGAUh4rftaecIlFZepKJBTmMN9PLOwc
         cM8o8AUNu/VCdu2iuw4ih7gyzmJHxWGGVfHidPgNaFSy7HWI4yI/RaIgZB4n3E1FHNSt
         vp29LSiztq2dW/wVwcsAIYj6QRzKPUaSjJx+U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=iB/gMC+x0GDYk8J3S6Ussw+cyX2OIhs8G/4Tjl4fcBDWx4Uoh/IAW4dAoH4iWV2YYZ
         PM2HImSvdAJDPgPO7uVeE+f4klgMRv93bIqm4ViSJVpGtncXLRmtO+bkFyBKXrJvA10p
         VBSRQaQ24Y8AdXgAT1QnXO3Abia74EuC57YuQ=
MIME-Version: 1.0
Received: by 10.239.185.81 with SMTP id b17mr102588hbh.191.1265286436075; Thu, 
	04 Feb 2010 04:27:16 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <27451835.post@talk.nabble.com>
References: <27451472.post@talk.nabble.com>
	 <f18c9dde1002040409i61b1e38anf211a4c55b6c5a67@mail.gmail.com>
	 <27451835.post@talk.nabble.com>
Date: Thu, 4 Feb 2010 13:27:16 +0100
Message-ID: <f18c9dde1002040427k1c09a396n5d4a6fdc17642682@mail.gmail.com>
Subject: Re: org.apache.lucene.util.English
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Suraj,

TestSpellChecker and English are part of the lucene test sources. If
you download the source distribution or checkout the 2.9.1 tag you
will be able to set it up in your IDE to look at the tests, compile
and run them.

In 3.1 English will be part of the core jar afaik.

simon

On Thu, Feb 4, 2010 at 1:17 PM, Suraj Parida <parida.suraj@gmail.com> wrote=
:
>
> =C2=A0Simon,
>
> =C2=A0 =C2=A0 =C2=A0Do you mean org.apache.lucene.util.English is not a p=
art of 2.9.1 ?
>
> =C2=A0 =C2=A0 Actually i was trying to add spell checker in my applicatio=
n search. I
> referred it to know how to use the same. As it is difficult to find examp=
les
> so I thought it is the best place to see sample codes :)
>
>
> Regards,
> Suraj
>
>
>
> Simon Willnauer wrote:
>>
>> You are referring to a testcase which is not included in a any artifact.
>> What are you trying to do with this class?
>>
>> simon
>>
>> On Thu, Feb 4, 2010 at 12:48 PM, Suraj Parida <parida.suraj@gmail.com>
>> wrote:
>>>
>>> Hi,
>>>
>>>
>>> lucene-2.9.1-src\lucene-2.9.1\contrib\spellchecker\src\test\org\apache\=
lucene\search\spell
>>>
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 has a file TestSpellChecker.java
>>>
>>> =C2=A0 =C2=A0Please tell which jar file is used in it. i can't find the=
 jar.
>>>
>>> Regards
>>> Suraj
>>> --
>>> View this message in context:
>>> http://old.nabble.com/org.apache.lucene.util.English-tp27451472p2745147=
2.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://old.nabble.com/org.apache.lucene.uti=
l.English-tp27451472p27451835.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 13:16:50 2010
Return-Path: <java-user-return-44872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5525 invoked from network); 4 Feb 2010 13:16:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 13:16:50 -0000
Received: (qmail 66379 invoked by uid 500); 4 Feb 2010 13:16:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66306 invoked by uid 500); 4 Feb 2010 13:16:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66296 invoked by uid 99); 4 Feb 2010 13:16:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 13:16:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.221.180 as permitted sender)
Received: from [209.85.221.180] (HELO mail-qy0-f180.google.com) (209.85.221.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 13:16:38 +0000
Received: by qyk10 with SMTP id 10so848066qyk.4
        for <java-user@lucene.apache.org>; Thu, 04 Feb 2010 05:16:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :x-enigmail-version:content-type:content-transfer-encoding;
        bh=BZHHW/AiSpJe9So2lXKgO94De/JphNlVoKOTkH3eltM=;
        b=fGKcwNmhh6kjoswEkdFg37MNxym60n7b39zjMOxm068Y9YcquGfyffe8dN7YCmE27U
         AL7JTKVxnWgLZphlkLdT8rMS+PeDwTww+aYa45+sLxw4BCrwwnfK0bHxC8B0MpdyM2Vb
         C11kXY8k1DGhhlA4I9rsrATGLb5fmldDl5GbA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:x-enigmail-version:content-type
         :content-transfer-encoding;
        b=OGtFYL8L/JUPlXemvHrse2uMimxBTjuVhL00++j3ieEmH5Z/3/AK7LHSqYK+qyDtRN
         goNfkNGv06zQS27uDfDeSI/D/B0rrK6nhnLJHMwCW+ChHORQn5I/JtisaL80CosFflpp
         isbQmoqhnSYIGvbUAu9ef1SPSf6JcUhCXLxNc=
Received: by 10.224.79.231 with SMTP id q39mr99515qak.163.1265289375966;
        Thu, 04 Feb 2010 05:16:15 -0800 (PST)
Received: from ?192.168.1.104? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 5sm436704qwg.28.2010.02.04.05.16.13
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 04 Feb 2010 05:16:13 -0800 (PST)
Message-ID: <4B6AC89C.9010204@gmail.com>
Date: Thu, 04 Feb 2010 08:16:12 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.23 (X11/20090817)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Where to download Mark Miller's Qsol Parser?
References: <856ac15f1002031907s29e59c45pbcd089db615356ea@mail.gmail.com>
In-Reply-To: <856ac15f1002031907s29e59c45pbcd089db615356ea@mail.gmail.com>
X-Enigmail-Version: 0.96.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Harris wrote:
> The QSol query parser (brief overview here:
> http://www.lucidimagination.com/blog/2009/02/22/exploring-query-parsers/)
> used to be available at
>
> http://myhardshadow.com/qsol.php
>
> (there was documentation as well as a link to a SVN server) but it
> looks like the myhardshadow.com has been relinquished to a domain name
> squatter. Is there any other place to get a fresh copy of Qsol?
>
> Thanks,
> Chris
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   
Hey Chris, sorry, I actually let that domain name expire. Its still
hosted, just no way to access it at the moment.

If you'd like, I can zip up the source and send it to you - I do plan on
registering a new domain for it, but just have not gotten around to it.

-- 
- Mark

http://www.lucidimagination.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 17:19:21 2010
Return-Path: <java-user-return-44873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96096 invoked from network); 4 Feb 2010 17:19:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 17:19:21 -0000
Received: (qmail 30099 invoked by uid 500); 4 Feb 2010 17:19:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30019 invoked by uid 500); 4 Feb 2010 17:19:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30009 invoked by uid 99); 4 Feb 2010 17:19:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 17:19:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.222.175 as permitted sender)
Received: from [209.85.222.175] (HELO mail-pz0-f175.google.com) (209.85.222.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 17:19:10 +0000
Received: by pzk5 with SMTP id 5so8331pzk.29
        for <java-user@lucene.apache.org>; Thu, 04 Feb 2010 09:18:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=4wD0PnatJlVfrqCxnilqdl9I/IkyNdZ/BvZmALKGLgo=;
        b=PVMFu5QyQ5468PzTsuhuO0AOzfYbTQg1lTt23HP+FXJCZ20iowqZfm12nivyrmhqyA
         s8kSNurRjQosva0fmw5AvjEYIRrIYCLwqLmYPBCbHZU/ZWHUYLfksi6hTwnluIgyN8zp
         8s1QUia2Q1mLxWKNZYYUX0210C6zT/eETdT88=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=k7TQKBCUAcRKrTxK+hI5cF5pC/nG6OW5Tq61JZFTsmcbR+ZskqKNVw/Bsk70P7qLF0
         KtfRuf2ffX3UCLfm8gEWUX4qGa25YvSnD8yFDLqJCI2r61oWjKNz86j6ZXgDAfZcE3+9
         PUHaH6GtNoIVrzItRxXxcwI2ADfnIY4UKi5Mo=
MIME-Version: 1.0
Received: by 10.141.188.40 with SMTP id q40mr923781rvp.82.1265303929214; Thu, 
	04 Feb 2010 09:18:49 -0800 (PST)
Date: Thu, 4 Feb 2010 09:18:49 -0800
Message-ID: <85d3c3b61002040918g2b5dc269hd350e33ede280bec@mail.gmail.com>
Subject: Analyzer for stripping non alpha-numeric characters?
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Is there an analyzer that easily strips non alpha-numeric from the end
of a token?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 17:24:15 2010
Return-Path: <java-user-return-44874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98693 invoked from network); 4 Feb 2010 17:24:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 17:24:15 -0000
Received: (qmail 36968 invoked by uid 500); 4 Feb 2010 17:24:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36879 invoked by uid 500); 4 Feb 2010 17:24:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36869 invoked by uid 99); 4 Feb 2010 17:24:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 17:24:12 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 17:24:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nd5Qd-0007n4-Ff
	for java-user@lucene.apache.org; Thu, 04 Feb 2010 09:23:43 -0800
Message-ID: <27456444.post@talk.nabble.com>
Date: Thu, 4 Feb 2010 09:23:43 -0800 (PST)
From: mpolzin <mikepolzin@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Limiting search result for web search engine
In-Reply-To: <8c4e68611002040314lf2a6cf0he7e0c62eafcb9db8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: mikepolzin@yahoo.com
References: <805803.47041.qm@web53208.mail.re2.yahoo.com> <867513fe1002021757t53533a49he725a0dda1a77b8@mail.gmail.com> <27447319.post@talk.nabble.com> <27447903.post@talk.nabble.com> <8c4e68611002040314lf2a6cf0he7e0c62eafcb9db8@mail.gmail.com>


Ian,

Yes, this makes sense, my guess is that by creating a custom collector and
in my overridden Collect method looking up each document by the docid to ge=
t
the base URL is going to create a fairly significant performance hit.  And
from the sounds of your response there is no guarantee that the documents
are being passed to the collector in order of highest score? Is that true?

If they were passed in order of highest score I could implement some code t=
o
only perform that logic for the first x documents depending on what is bein=
g
viewed (1 - 10; 11 - 20; etc). In most cases people never search past the
first few pages anyhow.

Of course this sort of logic could, as you say, easily be done once post
search, which is also the simplest approach. But then again, sometimes less
is more.

Mike


Ian Lea wrote:
>=20
> Writing a custom collector is pretty straightforward.  There is an
> example in the javadocs for Collector.  Use it via
> Searcher.search(query, collector) or search(query, filter, collector).
>=20
> The docid is passed to the collect() method and you can use that to
> get at the document and thus the URL, via your searcher or index
> reader.  But there are performance implications to doing it this way -
> you'll be looking at the URL for all hits, not just the top n that I
> imagine you will be displaying.  If the index is big and you'll be
> getting lots of hits that is likely to be a problem.  FieldCache might
> help.
>=20
> I think that I'd move your deduping logic to after the search and set
> a limit on the number of hits that you check.  That way you'd also get
> the best hit first.
>=20
>=20
> --
> Ian.
>=20
>=20
> On Thu, Feb 4, 2010 at 5:23 AM, mpolzin <mikepolzin@yahoo.com> wrote:
>>
>> I changed one line below... realized I missed the ! (NOT).. corrected in
>> original reply.
>>
>>
>> =C2=A0if ((hq.Size() < numHits || score >=3D minScore) =C2=A0&&
>> !collectedBaseURLArray.Contains(doc.BaseURL))
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0{
>>
>> mpolzin wrote:
>>>
>>>
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 if (score > 0.0f)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 {
>>>
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 // Do something=
 here to get the document base URL
>>> (doc.BaseURL)
>>>
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 if ((hq.Size() =
< numHits || score >=3D minScore) =C2=A0&&
>>> !collectedBaseURLArray.Contains(doc.BaseURL))
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 {
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 c=
ollectedBaseURLArray.Add(doc.BaseURL);
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 t=
otalHits++;
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 h=
q.Insert(new ScoreDoc(doc, score));
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 m=
inScore =3D ((ScoreDoc) hq.Top()).score; // maintain
>>> minScore
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 }
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 }
>>>
>>> Does this make sense?
>>>
>>> How could I tell the search to use my extended version of the
>>> TopDocCollector class? Also, how would I pull the URL from the document
>>> inside of the loop above? I didn't see any good documentation anywhere
>>> on
>>> how to do that. There seems to be little information out there on how t=
o
>>> build your own custom collector.
>>>
>>> Thanks again,
>>> Mike
>>>
>>>
>>> Anshum-2 wrote:
>>>>
>>>> Hi Mike,
>>>> Not really through queries, but you may do this by writing a custom
>>>> collector. You'd need some supporting data structure to mark/hash the
>>>> occurrence of a domain in your result set.
>>>>
>>>> --
>>>> Anshum Gupta
>>>> Naukri Labs!
>>>> http://ai-cafe.blogspot.com
>>>>
>>>> The facts expressed here belong to everybody, the opinions to me. The
>>>> distinction is yours to draw............
>>>>
>>>>
>>>> On Wed, Feb 3, 2010 at 6:56 AM, Mike Polzin <mikepolzin@yahoo.com>
>>>> wrote:
>>>>
>>>>> I am working on building a web search engine and I would like to buil=
d
>>>>> a
>>>>> reults page similar to what Google does. The functionality I am
>>>>> looking
>>>>> to
>>>>> include is what I refer to a "rolling up" sites, meaning that even if
>>>>> a
>>>>> particular site (defined by its base URL) has many relevent hits on
>>>>> various
>>>>> pages for the searches keywords, that site is only shown once in the
>>>>> results
>>>>> listing with a link to the most relevent hit on that site. What I do
>>>>> not
>>>>> want is to have one site dominate a search results page.
>>>>>
>>>>> Does it make sense to just do the search, get the hits list and then
>>>>> programatically remove the results which, although they meet the
>>>>> search
>>>>> criteria, are not as relevent? Is there a way to do this through
>>>>> queries?
>>>>>
>>>>> Thanks in advance!
>>>>>
>>>>> Mike
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>
>>>
>>
>> --
>> View this message in context:
>> http://old.nabble.com/Limiting-search-result-for-web-search-engine-tp274=
30155p27447903.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/Limiting-search-result-=
for-web-search-engine-tp27430155p27456444.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 17:29:27 2010
Return-Path: <java-user-return-44875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2298 invoked from network); 4 Feb 2010 17:29:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 17:29:27 -0000
Received: (qmail 48487 invoked by uid 500); 4 Feb 2010 17:29:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48412 invoked by uid 500); 4 Feb 2010 17:29:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48402 invoked by uid 99); 4 Feb 2010 17:29:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 17:29:24 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 17:29:14 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id o14HSr0n011573
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Thu, 4 Feb 2010 12:28:53 -0500
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([fe80::813b:49a2:a4d5:6367%10]) with mapi; Thu, 4
 Feb 2010 12:28:53 -0500
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 4 Feb 2010 12:28:52 -0500
Subject: RE: Unexpected Query Results
Thread-Topic: Unexpected Query Results
Thread-Index: AcqlbU2pMYhKJ46YRYGSm2oyUu/EPwAT81zw
Message-ID: <2D127F11DC79714E9B6A43AC9458147F36661F82@suex07-mbx-03.ad.syr.edu>
References: <4B6A799D.3070103@stimulussoft.com>
In-Reply-To: <4B6A799D.3070103@stimulussoft.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2010-02-04_15:2010-01-20,2010-02-04,2010-02-04 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgSmFtaWUsDQoNClNpbmNlIHBocmFzZSBxdWVyeSB0ZXJtcyBhcmVuJ3QgYW5hbHl6ZWQsIHlv
dSdyZSBnZXR0aW5nIGV4YWN0IG1hdGNoZXMgZm9yIHRlcm1zICLQsdGL0LvQviIgYW5kICLQstGA
0LXQvNGPIiwgYnV0IHdoZW4geW91IHNlYXJjaCBmb3IgdGhlbSBpbmRpdmlkdWFsbHksIHRoZXkg
YXJlIGFuYWx5emVkLCBhbmQgaXQgaXMgdGhlIGFuYWx5emVkIHF1ZXJ5IHRlcm1zIHRoYXQgZmFp
bCB0byBtYXRjaCBhZ2FpbnN0IHRoZSBpbmRleGVkIHRlcm1zLiAgU291bmRzIHRvIG1lIGxpa2Ug
eW91ciBpbmRleC10aW1lIGFuZCBxdWVyeS10aW1lIGFuYWx5emVycyBhcmUgbm90IHRoZSBzYW1l
LiAgTWF5YmUgeW91IGhhdmUgYSBzdGVtbWluZyBmaWx0ZXIgZm9yIHF1ZXJ5LXRpbWUsIGJ1dCBu
b3QgZm9yIGluZGV4LXRpbWU/DQoNClN0ZXZlDQoNCk9uIDAyLzA0LzIwMTAgYXQgMjozOSBBTSwg
SmFtaWUgd3JvdGU6DQo+IEhpDQo+IA0KPiBJIGhhdmUgc29tZSB1bmV4cGVjdGVkIHF1ZXJ5IHJl
c3VsdHMuDQo+IA0KPiBXaGVuIGF0dGVtcHRpbmcgdHdvIHF1ZXJpZXM6DQo+IA0KPiAxKSBBbGwg
ZmllbGRzLCBleGFjdCBwaHJhc2UgcXVlcnkgcmV0dXJucyA0OCBoaXRzDQo+IA0KPiAocHJpb3Jp
dHk6ItCx0YvQu9C+INCy0YDQtdC80Y8iIGF0dGFjaDoi0LHRi9C70L4g0LLRgNC10LzRjyIgc2Nv
cmU6ItCx0YvQu9C+INCy0YDQtdC80Y8iIHNpemU6ItCx0YvQu9C+DQo+INCy0YDQtdC80Y8iIHNl
bnRkYXRlOiLQsdGL0LvQviDQstGA0LXQvNGPIiBhcmNoaXZlZGF0ZToi0LHRi9C70L4g0LLRgNC1
0LzRjyIgcmVjZWl2ZWRkYXRlOiLQsdGL0LvQvg0KPiDQstGA0LXQvNGPIiBmcm9tOiLQsdGL0LvQ
viDQstGA0LXQvNGPIiB0bzoi0LHRi9C70L4g0LLRgNC10LzRjyIgc3ViamVjdDoi0LHRi9C70L4g
0LLRgNC10LzRjyIgY2M6ItCx0YvQu9C+DQo+INCy0YDQtdC80Y8iIGJjYzoi0LHRi9C70L4g0LLR
gNC10LzRjyIgZGVsaXZlcmVkdG86ItCx0YvQu9C+INCy0YDQtdC80Y8iIGZsYWc6ItCx0YvQu9C+
INCy0YDQtdC80Y8iDQo+IHNlbnNpdGl2aXR5OiLQsdGL0LvQviDQstGA0LXQvNGPIiBzZW5kZXI6
ItCx0YvQu9C+INCy0YDQtdC80Y8iIHJlY2lwaWVudDoi0LHRi9C70L4g0LLRgNC10LzRjyINCj4g
Ym9keToi0LHRi9C70L4g0LLRgNC10LzRjyIgYXR0YWNobWVudHM6ItCx0YvQu9C+INCy0YDQtdC8
0Y8iIGF0dGFjaG5hbWU6ItCx0YvQu9C+INCy0YDQtdC80Y8iDQo+IG1lbWJlcm9mOiLQsdGL0LvQ
viDQstGA0LXQvNGPIikNCj4gDQo+IDIpIEFsbCBmaWVsZHMsIEFsbCB3b3JkcyBxdWVyeSByZXR1
cm4gMCBoaXRzDQo+IA0KPiAoKHByaW9yaXR5OtCx0YvQu9C+IGF0dGFjaDrQsdGL0LvQviBzY29y
ZTrQsdGL0LvQviBzaXplOtCx0YvQu9C+IHNlbnRkYXRlOtCx0YvQu9C+DQo+IGFyY2hpdmVkYXRl
OtCx0YvQu9C+IHJlY2VpdmVkZGF0ZTrQsdGL0LvQviBmcm9tOtCx0YvQu9C+IHRvOtCx0YvQu9C+
IHN1YmplY3Q60LHRi9C70L4NCj4gY2M60LHRi9C70L4gYmNjOtCx0YvQu9C+IGRlbGl2ZXJlZHRv
OtCx0YvQu9C+IGZsYWc60LHRi9C70L4gc2Vuc2l0aXZpdHk60LHRi9C70L4gc2VuZGVyOtCx0YvQ
u9C+DQo+IHJlY2lwaWVudDrQsdGL0LvQviBib2R5OtCx0YvQu9C+IGF0dGFjaG1lbnRzOtCx0YvQ
u9C+IGF0dGFjaG5hbWU60LHRi9C70L4gbWVtYmVyb2Y60LHRi9C70L4NCj4gKSBBTkQgKHByaW9y
aXR5OtCy0YDQtdC80Y8gYXR0YWNoOtCy0YDQtdC80Y8gc2NvcmU60LLRgNC10LzRjyBzaXplOtCy
0YDQtdC80Y8gc2VudGRhdGU60LLRgNC10LzRjw0KPiBhcmNoaXZlZGF0ZTrQstGA0LXQvNGPIHJl
Y2VpdmVkZGF0ZTrQstGA0LXQvNGPIGZyb2060LLRgNC10LzRjyB0bzrQstGA0LXQvNGPIHN1Ympl
Y3Q60LLRgNC10LzRjw0KPiBjYzrQstGA0LXQvNGPIGJjYzrQstGA0LXQvNGPIGRlbGl2ZXJlZHRv
OtCy0YDQtdC80Y8gZmxhZzrQstGA0LXQvNGPIHNlbnNpdGl2aXR5OtCy0YDQtdC80Y8NCj4gc2Vu
ZGVyOtCy0YDQtdC80Y8gcmVjaXBpZW50OtCy0YDQtdC80Y8gYm9keTrQstGA0LXQvNGPIGF0dGFj
aG1lbnRzOtCy0YDQtdC80Y8NCj4gYXR0YWNobmFtZTrQstGA0LXQvNGPIG1lbWJlcm9mOtCy0YDQ
tdC80Y8gKSkNCj4gDQo+IEkgYW0gbm90IHN1cmUgd2h5IHF1ZXJ5IDIgcmV0dXJucyAwIGhpdHMu
IEluIG15IG1pbmQgaXQgc2hvdWxkIHJldHVybiA0OA0KPiBoaXRzIGFzIGluIHF1ZXJ5ICgxKS4N
Cj4gDQo+IEkgYW0gdXNpbmcgTHVjZW5lIDMuMC4gSXMgdGhlcmUgYSBwc2V1ZG8gZmllbGQgZm9y
IGFsbCBzZWFyY2ggdGVybXM/DQo+IA0KPiBUaGFua3MNCj4gDQo+IEphbWllDQo+IA0KPiANCj4g
DQo+IA0KPiANCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFRvDQo+IHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEt
dXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZyBGb3INCj4gYWRkaXRpb25hbCBjb21t
YW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KDQoNCg==


From java-user-return-44876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 19:48:16 2010
Return-Path: <java-user-return-44876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58919 invoked from network); 4 Feb 2010 19:48:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 19:48:15 -0000
Received: (qmail 11695 invoked by uid 500); 4 Feb 2010 19:48:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11569 invoked by uid 500); 4 Feb 2010 19:48:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11545 invoked by uid 99); 4 Feb 2010 19:48:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 19:48:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jzillmann@googlemail.com designates 209.85.219.218 as permitted sender)
Received: from [209.85.219.218] (HELO mail-ew0-f218.google.com) (209.85.219.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 19:47:59 +0000
Received: by ewy10 with SMTP id 10so1060429ewy.11
        for <java-user@lucene.apache.org>; Thu, 04 Feb 2010 11:47:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:from:content-type
         :content-transfer-encoding:date:subject:to:message-id:mime-version
         :x-mailer;
        bh=yL/N09OvdPMSNpeYENi2A2Yvq6PMJK3xV3LbXZU9wYc=;
        b=v/+nT70809SwmJpJ7QakGQAUTrSp7a3ef5WgU+bQAWYhFqrcYce7bZETM/VNbKR2cC
         sfJ2dhBNpa+Ufo9agit7smkCAlLud7VA3JbxFCfIW/NaorOF4odk10VpSTGFe7StDDSO
         lzNf2rNqX8YKXWxblR2xPRcUlSDaZ7d7Ycztc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=from:content-type:content-transfer-encoding:date:subject:to
         :message-id:mime-version:x-mailer;
        b=LzSj54PrOY07FsqC37JYEqkcJZjoTYYgdHEEN231CArxP0tnxqLOPSHQHsCucXmsDh
         At79wHD4u5nWQH5czHHrVwJ7OPMTlqNnwOsZGhIg5PaiYLR92yfexCJT4e29lLaWIBGm
         kfXm5ol5iByeAQ/pU5XerB1thmthssBZqi1iM=
Received: by 10.213.2.79 with SMTP id 15mr4015183ebi.59.1265312858479;
        Thu, 04 Feb 2010 11:47:38 -0800 (PST)
Received: from 83-221-82-92.dynamic.primacom.net (83-221-82-92.dynamic.primacom.net [83.221.82.92])
        by mx.google.com with ESMTPS id 10sm3031694eyd.37.2010.02.04.11.47.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 04 Feb 2010 11:47:37 -0800 (PST)
From: Johannes Zillmann <jzillmann@googlemail.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Date: Thu, 4 Feb 2010 20:47:35 +0100
Subject: [ANNOUNCE] Katta 0.6 released
To: Katta Dev <katta-developer@lists.sourceforge.net>
Message-Id: <BC2C1062-0660-4455-A365-26C99FA7FF14@googlemail.com>
Mime-Version: 1.0 (Apple Message framework v1077)
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org

Release 0.6 of Katta is now available.
Katta - Lucene (or Hadoop Mapfiles or any content which can be split =
into shards) in the cloud.
http://katta.sourceforge.net


The key changes of the 0.6 release among dozens of bug fixes:
- upgrade lucene to 3.0
- upgrade zookeeper to  3.2.2
- upgrade hadoop to 0.20.1
- generalize katta for serving shard-able content (lucene is one =
implementation, hadoop mapfiles another one)
- basic lucene field sort capability
- more robust zookeeper session expiration handling
- throttling of shard deployment (kb/sec configurable) to hava a stabe =
search while deploying
- load test facility
- monitoring facility
- alpha version of web-gui


The changes from 0.6.rc1 release:
 KATTA-120, fix listIndices for wrong file pathes
 KATTA-117, add command line option to print stacktrace on error
 KATTA-116, fix distribution of shards does not take currently deploying =
shards into account=20
 KATTA-107, fix katta execution on cygwin=20
 KATTA-112, ship build.xml in core distribution=20
 KATTA-110, use a released 0.1 version of zkclient instead of the =
snapshot


See full list of changes at
=
http://oss.101tec.com/jira/secure/ReleaseNote.jspa?projectId=3D10000&style=
Name=3DHtml&version=3D10010

Binary distribution is available at
https://sourceforge.net/projects/katta/

The Katta Team=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 20:11:33 2010
Return-Path: <java-user-return-44877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67707 invoked from network); 4 Feb 2010 20:11:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 20:11:33 -0000
Received: (qmail 50586 invoked by uid 500); 4 Feb 2010 20:11:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50535 invoked by uid 500); 4 Feb 2010 20:11:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50525 invoked by uid 99); 4 Feb 2010 20:11:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 20:11:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.214 as permitted sender)
Received: from [209.85.218.214] (HELO mail-bw0-f214.google.com) (209.85.218.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 20:11:22 +0000
Received: by bwz6 with SMTP id 6so2352564bwz.11
        for <java-user@lucene.apache.org>; Thu, 04 Feb 2010 12:11:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=nuAs1uVttkQxbzBGB7ZR8wKsOTKzDdfkhgIfCTKflr8=;
        b=Edv9AbQIwfMoZXFTV5LfLA9tnWX4E7wbdVdJ46SKhUNfpPyNkKDq/vZtlwA5uqwuBO
         Sz5Y/p1qkyiUEHzuq1iRtv3SNroSSMERr9GLcOR+rd8HXyYFurUNV6mNZDFxru2Fjqrg
         QwkGFsOKAheCeqFZye3BPYII8I4XmvA5NrWRo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=AKYAAK8m7GPpohJx1v8ffQYCRbSXPmpgPF2CkT2ceF1+5GFJTQFjVlrZ9Eog2hZ6lA
         bD2CINvSEWpYaB8XjXb4dJ+uPwW1ey7REL4uCOKJlKlOo/yRfRLxNhZLm3EbNdNBMhwy
         lV7Xd21QHJt6/Uoa9nSMg46qa7/LZF3Ndu63Q=
MIME-Version: 1.0
Received: by 10.204.156.27 with SMTP id u27mr1015780bkw.61.1265314260138; Thu, 
	04 Feb 2010 12:11:00 -0800 (PST)
In-Reply-To: <27456444.post@talk.nabble.com>
References: <805803.47041.qm@web53208.mail.re2.yahoo.com> <867513fe1002021757t53533a49he725a0dda1a77b8@mail.gmail.com> 
	<27447319.post@talk.nabble.com> <27447903.post@talk.nabble.com> 
	<8c4e68611002040314lf2a6cf0he7e0c62eafcb9db8@mail.gmail.com> 
	<27456444.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 4 Feb 2010 20:10:39 +0000
Message-ID: <8c4e68611002041210y3ec3c18dvbedf2a265caabacd@mail.gmail.com>
Subject: Re: Limiting search result for web search engine
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Mike


Documents do not get passed to Collectors in order of highest score.
It is the job of the collector to gather the top scoring docs, as is
typically required, and implemented by TopScoreDocCollector for the
most commonly used search method calls (according to the javadocs -
read the javadocs!). Other collectors can do whatever they want with
matching documents.

On the performance issue of reading document fields for each hit,
there is a specific warning against it in the javadocs for Collector.


--
Ian.


On Thu, Feb 4, 2010 at 5:23 PM, mpolzin <mikepolzin@yahoo.com> wrote:
>
> Ian,
>
> Yes, this makes sense, my guess is that by creating a custom collector an=
d
> in my overridden Collect method looking up each document by the docid to =
get
> the base URL is going to create a fairly significant performance hit. =A0=
And
> from the sounds of your response there is no guarantee that the documents
> are being passed to the collector in order of highest score? Is that true=
?
>
> If they were passed in order of highest score I could implement some code=
 to
> only perform that logic for the first x documents depending on what is be=
ing
> viewed (1 - 10; 11 - 20; etc). In most cases people never search past the
> first few pages anyhow.
>
> Of course this sort of logic could, as you say, easily be done once post
> search, which is also the simplest approach. But then again, sometimes le=
ss
> is more.
>
> Mike
>
>
> Ian Lea wrote:
>>
>> Writing a custom collector is pretty straightforward. =A0There is an
>> example in the javadocs for Collector. =A0Use it via
>> Searcher.search(query, collector) or search(query, filter, collector).
>>
>> The docid is passed to the collect() method and you can use that to
>> get at the document and thus the URL, via your searcher or index
>> reader. =A0But there are performance implications to doing it this way -
>> you'll be looking at the URL for all hits, not just the top n that I
>> imagine you will be displaying. =A0If the index is big and you'll be
>> getting lots of hits that is likely to be a problem. =A0FieldCache might
>> help.
>>
>> I think that I'd move your deduping logic to after the search and set
>> a limit on the number of hits that you check. =A0That way you'd also get
>> the best hit first.
>>
>>
>> --
>> Ian.
>>
>>
>> On Thu, Feb 4, 2010 at 5:23 AM, mpolzin <mikepolzin@yahoo.com> wrote:
>>>
>>> I changed one line below... realized I missed the ! (NOT).. corrected i=
n
>>> original reply.
>>>
>>>
>>> =A0if ((hq.Size() < numHits || score >=3D minScore) =A0&&
>>> !collectedBaseURLArray.Contains(doc.BaseURL))
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
>>>
>>> mpolzin wrote:
>>>>
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 if (score > 0.0f)
>>>> =A0 =A0 =A0 =A0 =A0 =A0 {
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 // Do something here to get the docume=
nt base URL
>>>> (doc.BaseURL)
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 if ((hq.Size() < numHits || score >=3D=
 minScore) =A0&&
>>>> !collectedBaseURLArray.Contains(doc.BaseURL))
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 {
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 collectedBaseURLArray.Add(doc.=
BaseURL);
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 totalHits++;
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 hq.Insert(new ScoreDoc(doc, sc=
ore));
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 minScore =3D ((ScoreDoc) hq.To=
p()).score; // maintain
>>>> minScore
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 }
>>>> =A0 =A0 =A0 =A0 =A0 =A0 }
>>>>
>>>> Does this make sense?
>>>>
>>>> How could I tell the search to use my extended version of the
>>>> TopDocCollector class? Also, how would I pull the URL from the documen=
t
>>>> inside of the loop above? I didn't see any good documentation anywhere
>>>> on
>>>> how to do that. There seems to be little information out there on how =
to
>>>> build your own custom collector.
>>>>
>>>> Thanks again,
>>>> Mike
>>>>
>>>>
>>>> Anshum-2 wrote:
>>>>>
>>>>> Hi Mike,
>>>>> Not really through queries, but you may do this by writing a custom
>>>>> collector. You'd need some supporting data structure to mark/hash the
>>>>> occurrence of a domain in your result set.
>>>>>
>>>>> --
>>>>> Anshum Gupta
>>>>> Naukri Labs!
>>>>> http://ai-cafe.blogspot.com
>>>>>
>>>>> The facts expressed here belong to everybody, the opinions to me. The
>>>>> distinction is yours to draw............
>>>>>
>>>>>
>>>>> On Wed, Feb 3, 2010 at 6:56 AM, Mike Polzin <mikepolzin@yahoo.com>
>>>>> wrote:
>>>>>
>>>>>> I am working on building a web search engine and I would like to bui=
ld
>>>>>> a
>>>>>> reults page similar to what Google does. The functionality I am
>>>>>> looking
>>>>>> to
>>>>>> include is what I refer to a "rolling up" sites, meaning that even i=
f
>>>>>> a
>>>>>> particular site (defined by its base URL) has many relevent hits on
>>>>>> various
>>>>>> pages for the searches keywords, that site is only shown once in the
>>>>>> results
>>>>>> listing with a link to the most relevent hit on that site. What I do
>>>>>> not
>>>>>> want is to have one site dominate a search results page.
>>>>>>
>>>>>> Does it make sense to just do the search, get the hits list and then
>>>>>> programatically remove the results which, although they meet the
>>>>>> search
>>>>>> criteria, are not as relevent? Is there a way to do this through
>>>>>> queries?
>>>>>>
>>>>>> Thanks in advance!
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>
>>> --
>>> View this message in context:
>>> http://old.nabble.com/Limiting-search-result-for-web-search-engine-tp27=
430155p27447903.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://old.nabble.com/Limiting-search-resul=
t-for-web-search-engine-tp27430155p27456444.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 20:18:57 2010
Return-Path: <java-user-return-44878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70007 invoked from network); 4 Feb 2010 20:18:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 20:18:57 -0000
Received: (qmail 68108 invoked by uid 500); 4 Feb 2010 20:18:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68027 invoked by uid 500); 4 Feb 2010 20:18:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68017 invoked by uid 99); 4 Feb 2010 20:18:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 20:18:55 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 20:18:45 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o14KIOkx017496
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Thu, 4 Feb 2010 15:18:24 -0500
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([2002:80e6:6cc3::80e6:6cc3]) with mapi; Thu, 4 Feb
 2010 15:18:23 -0500
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 4 Feb 2010 15:18:22 -0500
Subject: RE: Analyzer for stripping non alpha-numeric characters?
Thread-Topic: Analyzer for stripping non alpha-numeric characters?
Thread-Index: AcqlvjQn1c3IruIrRiOr+7frUiUm2QAGAMDA
Message-ID: <2D127F11DC79714E9B6A43AC9458147F36661F8E@suex07-mbx-03.ad.syr.edu>
References: <85d3c3b61002040918g2b5dc269hd350e33ede280bec@mail.gmail.com>
In-Reply-To: <85d3c3b61002040918g2b5dc269hd350e33ede280bec@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2010-02-04_16:2010-01-20,2010-02-04,2010-02-04 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jason,

Solr's PatternReplaceFilter(ts, "\\P{Alnum}+$", "", false) should work, cha=
ined after an appropriate tokenizer.

Steve

On 02/04/2010 at 12:18 PM, Jason Rutherglen wrote:
> Is there an analyzer that easily strips non alpha-numeric from the end
> of a token?
>=20
> --------------------------------------------------------------------- To
> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 20:25:58 2010
Return-Path: <java-user-return-44879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72202 invoked from network); 4 Feb 2010 20:25:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 20:25:58 -0000
Received: (qmail 78359 invoked by uid 500); 4 Feb 2010 20:25:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78322 invoked by uid 500); 4 Feb 2010 20:25:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78312 invoked by uid 99); 4 Feb 2010 20:25:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 20:25:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 20:25:47 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 5270771C7DF; Thu,  4 Feb 2010 12:24:05 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 5037F71C543
	for <java-user@lucene.apache.org>; Thu,  4 Feb 2010 12:24:05 -0800 (PST)
Date: Thu, 4 Feb 2010 12:24:05 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: RE: Unexpected Query Results
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F36661F82@suex07-mbx-03.ad.syr.edu>
Message-ID: <Pine.LNX.4.64.1002041222190.29580@radix.cryptio.net>
References: <4B6A799D.3070103@stimulussoft.com>
 <2D127F11DC79714E9B6A43AC9458147F36661F82@suex07-mbx-03.ad.syr.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Since phrase query terms aren't analyzed, you're getting exact matches 

quoted phrase passed to the QueryParser are analyzed -- but they are 
analyzed as complete strings, so Analyzers that treat whitespace special 
may produce differnet Terms then if the individual "words" were analyzed 
individually (which is what happens when QueryParser is given multiple 
"words" that aren't in a quoted phrase)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 21:00:52 2010
Return-Path: <java-user-return-44880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81167 invoked from network); 4 Feb 2010 21:00:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 21:00:52 -0000
Received: (qmail 18293 invoked by uid 500); 4 Feb 2010 21:00:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18232 invoked by uid 500); 4 Feb 2010 21:00:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18218 invoked by uid 99); 4 Feb 2010 21:00:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 21:00:49 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 21:00:39 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id o14L0Iln003720
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Thu, 4 Feb 2010 16:00:19 -0500
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([fe80::813b:49a2:a4d5:6367%10]) with mapi; Thu, 4
 Feb 2010 16:00:18 -0500
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 4 Feb 2010 16:00:18 -0500
Subject: RE: Unexpected Query Results
Thread-Topic: Unexpected Query Results
Thread-Index: Acql2EaTON7ZrnFCRT2waj9IrOfu+gAAb3Ew
Message-ID: <2D127F11DC79714E9B6A43AC9458147F36661F93@suex07-mbx-03.ad.syr.edu>
References: <4B6A799D.3070103@stimulussoft.com>
 <2D127F11DC79714E9B6A43AC9458147F36661F82@suex07-mbx-03.ad.syr.edu>
 <Pine.LNX.4.64.1002041222190.29580@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.64.1002041222190.29580@radix.cryptio.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2010-02-04_16:2010-01-20,2010-02-04,2010-02-04 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

On 02/04/2010 at 3:24 PM, Chris Hostetter wrote:
> : Since phrase query terms aren't analyzed, you're getting exact
> : matches
>=20
> quoted phrase passed to the QueryParser are analyzed -- but they are
> analyzed as complete strings, so Analyzers that treat whitespace
> special may produce differnet Terms then if the individual "words"
> were analyzed individually (which is what happens when QueryParser
> is given multiple "words" that aren't in a quoted phrase)

Yikes, you're right, of course (I just checked the code) - I was thinking o=
f contrib/misc/AnalyzingQueryParser, which adds analysis to fuzzy, prefix, =
range, and wildcard queries, since *those* are not analyzed by QueryParser,=
 and had added phrases to that list in my model of reality...



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 22:17:16 2010
Return-Path: <java-user-return-44881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26952 invoked from network); 4 Feb 2010 22:17:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 22:17:16 -0000
Received: (qmail 48264 invoked by uid 500); 4 Feb 2010 22:17:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48191 invoked by uid 500); 4 Feb 2010 22:17:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48172 invoked by uid 99); 4 Feb 2010 22:17:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 22:17:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.216.186 as permitted sender)
Received: from [209.85.216.186] (HELO mail-px0-f186.google.com) (209.85.216.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 22:17:02 +0000
Received: by pxi16 with SMTP id 16so515650pxi.29
        for <multiple recipients>; Thu, 04 Feb 2010 14:16:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=TiNV8rACrnz5nzKzhIv9rdEAbym8lbrYXdxOsZ+crzw=;
        b=SET8fWGlQLzdFeHAgTyYfs6NfDNQS2rfhx6BIkXnvG8WmdFOSAORrsxJEdn9g5EGaA
         4JPKQe6LKHWD8hXZyGVFE2zrQomwEezNJ10Mx4TRvCLCkCispNVbybW490pIjNGj06JC
         4L4IJ2TUgC0wgO0uDQKZSDn93WtZm/4q1Ubvc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=XcRyUxcm3wKIc7QK+6ehTNhyISyhkY9wrzQLBWkGuqjUlK6YP4VnsDAVM2Qrhj0eKy
         nvBKUAjtJQa/m38sJbKi0ybcWBlaU9puiT12WoBWcAPJucRLva+RwAGa9dbTxVeDXebr
         aRe+gCQet3lwMDa2KRITsihRweNyGuZ3oRaHg=
MIME-Version: 1.0
Received: by 10.141.107.14 with SMTP id j14mr1183734rvm.78.1265321801155; Thu, 
	04 Feb 2010 14:16:41 -0800 (PST)
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F36661F8E@suex07-mbx-03.ad.syr.edu>
References: <85d3c3b61002040918g2b5dc269hd350e33ede280bec@mail.gmail.com>
	 <2D127F11DC79714E9B6A43AC9458147F36661F8E@suex07-mbx-03.ad.syr.edu>
Date: Thu, 4 Feb 2010 14:16:41 -0800
Message-ID: <85d3c3b61002041416t30770bd6r3747fcdb5e0a749d@mail.gmail.com>
Subject: Re: Analyzer for stripping non alpha-numeric characters?
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Transferred partially to solr-user...

Steven, thanks for the reply!

I wonder if PatternReplaceFilter can output multiple tokens?  I'd like
to progressively strip the non-alphanums, for example output:

apple!&*
apple!&
apple!
apple

On Thu, Feb 4, 2010 at 12:18 PM, Steven A Rowe <sarowe@syr.edu> wrote:
> Hi Jason,
>
> Solr's PatternReplaceFilter(ts, "\\P{Alnum}+$", "", false) should work, chained after an appropriate tokenizer.
>
> Steve
>
> On 02/04/2010 at 12:18 PM, Jason Rutherglen wrote:
>> Is there an analyzer that easily strips non alpha-numeric from the end
>> of a token?
>>
>> --------------------------------------------------------------------- To
>> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
>> additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 04 23:00:53 2010
Return-Path: <java-user-return-44882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44199 invoked from network); 4 Feb 2010 23:00:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Feb 2010 23:00:53 -0000
Received: (qmail 23149 invoked by uid 500); 4 Feb 2010 23:00:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23075 invoked by uid 500); 4 Feb 2010 23:00:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23056 invoked by uid 99); 4 Feb 2010 23:00:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 23:00:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.216.186 as permitted sender)
Received: from [209.85.216.186] (HELO mail-px0-f186.google.com) (209.85.216.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Feb 2010 23:00:40 +0000
Received: by pxi16 with SMTP id 16so557156pxi.29
        for <multiple recipients>; Thu, 04 Feb 2010 15:00:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=3QgQrHOm9I8YwdirsOHc3ktQcI93ckq96gFzXBotmhE=;
        b=Mi3YtsR0W10A/Baw8PSdjOBvlUax/dw6caT2tfTYeiixbX+03jaNHLWeMYztfI4fpl
         TyoQvIIf4O3kuR39jFaoG6PjTrxLsyCqD4lN/Vx/4Sv9et7l2Hu+S+DVmG6e11TVRUPm
         RJ+ek306oXZDfLvyIPZL20Sez0Ey8neieeW00=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=sMSfqN6+UnoSeJnHMxA/bTmQF2jJOLwPMN/dXk+nfOrXs4yJm7rYYKsRIzAqzXKflM
         GvRfv7A1CGQW7L0ItTzB6115TqsZFKjXC1Kg8suwF34lrsIvL9SN5tbT3wRpFy3N1pfq
         wy3+kCEjSIILXTk9Rj9K5r3sG1pv54WCXXZSs=
MIME-Version: 1.0
Received: by 10.140.180.5 with SMTP id c5mr1207717rvf.270.1265324418545; Thu, 
	04 Feb 2010 15:00:18 -0800 (PST)
In-Reply-To: <85d3c3b61002041416t30770bd6r3747fcdb5e0a749d@mail.gmail.com>
References: <85d3c3b61002040918g2b5dc269hd350e33ede280bec@mail.gmail.com>
	 <2D127F11DC79714E9B6A43AC9458147F36661F8E@suex07-mbx-03.ad.syr.edu>
	 <85d3c3b61002041416t30770bd6r3747fcdb5e0a749d@mail.gmail.com>
Date: Thu, 4 Feb 2010 15:00:18 -0800
Message-ID: <85d3c3b61002041500x60b723daie0e529d89bb123c7@mail.gmail.com>
Subject: Re: Analyzer for stripping non alpha-numeric characters?
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Answering my own question... PatternReplaceFilter doesn't output
multiple tokens...

Which means messing with capture state...

On Thu, Feb 4, 2010 at 2:16 PM, Jason Rutherglen
<jason.rutherglen@gmail.com> wrote:
> Transferred partially to solr-user...
>
> Steven, thanks for the reply!
>
> I wonder if PatternReplaceFilter can output multiple tokens? =A0I'd like
> to progressively strip the non-alphanums, for example output:
>
> apple!&*
> apple!&
> apple!
> apple
>
> On Thu, Feb 4, 2010 at 12:18 PM, Steven A Rowe <sarowe@syr.edu> wrote:
>> Hi Jason,
>>
>> Solr's PatternReplaceFilter(ts, "\\P{Alnum}+$", "", false) should work, =
chained after an appropriate tokenizer.
>>
>> Steve
>>
>> On 02/04/2010 at 12:18 PM, Jason Rutherglen wrote:
>>> Is there an analyzer that easily strips non alpha-numeric from the end
>>> of a token?
>>>
>>> --------------------------------------------------------------------- T=
o
>>> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
>>> additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 05 01:15:40 2010
Return-Path: <java-user-return-44883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85103 invoked from network); 5 Feb 2010 01:15:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Feb 2010 01:15:40 -0000
Received: (qmail 62269 invoked by uid 500); 5 Feb 2010 01:15:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62198 invoked by uid 500); 5 Feb 2010 01:15:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62188 invoked by uid 99); 5 Feb 2010 01:15:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Feb 2010 01:15:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mhao@salesforce.com designates 64.18.3.32 as permitted sender)
Received: from [64.18.3.32] (HELO exprod8og116.obsmtp.com) (64.18.3.32)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Feb 2010 01:15:30 +0000
Received: from source ([204.14.239.238]) by exprod8ob116.postini.com ([64.18.7.12]) with SMTP
	ID DSNKS2txHUfweoIcmd8o2CF5ghpq94Xf3eco@postini.com; Thu, 04 Feb 2010 17:15:09 PST
Received: from [10.0.62.124] (10.0.62.124) by
 exsfm-hub3.internal.salesforce.com (10.1.127.7) with Microsoft SMTP Server id
 8.1.375.2; Thu, 4 Feb 2010 17:15:08 -0800
Message-ID: <4B6B711C.5000709@salesforce.com>
Date: Thu, 4 Feb 2010 17:15:08 -0800
From: Melissa Hao <mhao@salesforce.com>
User-Agent: Thunderbird 2.0.0.21 (X11/20090318)
MIME-Version: 1.0
To: <java-user@lucene.apache.org>, Melissa Hao <mhao@salesforce.com>
Subject: For a two word wildcard query like    name:john s*     , can I avoid
 expanding s* for the entire name field?
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit

Hi,

I am wondering about wildcard queries that are more than one word, such as:

    name:john s*

Note: All terms are required (default boolean operator is AND).

I know that for the query

    name:s*

The s* is expanded over all s* terms in the name field.

For the "john s*" case, is it possible to restrict documents to
documents that have "john", before expanding s*?  I know that's not how
Lucene normally works.  Lucene normally

1) Preprocesses the s* by replacing s* with (s OR sa OR sb OR sc ...).
2) Runs the query (john AND (s OR sa OR sb OR sc ...)).  For AND, Lucene
does the optimization where it figures which term is in the least number
of documents.  But the s* expansion already happened in step 1.

I'm curious because single-character wildcards are expensive for us, but
if we could somehow expand the wildcard only over the "john" documents,
that would help.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 05 09:54:27 2010
Return-Path: <java-user-return-44884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40087 invoked from network); 5 Feb 2010 09:54:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Feb 2010 09:54:27 -0000
Received: (qmail 48119 invoked by uid 500); 5 Feb 2010 09:54:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47582 invoked by uid 500); 5 Feb 2010 09:54:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47509 invoked by uid 99); 5 Feb 2010 09:54:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Feb 2010 09:54:23 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.18.2.219] (HELO exprod7og116.obsmtp.com) (64.18.2.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Feb 2010 09:54:15 +0000
Received: from source ([209.85.220.228]) by exprod7ob116.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS2vqq2aGZUswql3PO39/n4DP+qFkY3j6@postini.com; Fri, 05 Feb 2010 01:53:55 PST
Received: by mail-fx0-f228.google.com with SMTP id 28so3567943fxm.0
        for <multiple recipients>; Fri, 05 Feb 2010 01:53:47 -0800 (PST)
MIME-Version: 1.0
Received: by 10.102.207.40 with SMTP id e40mr1606595mug.86.1265363626893; Fri, 
	05 Feb 2010 01:53:46 -0800 (PST)
In-Reply-To: <4B6BE480.8070103@boozter.com>
References: <4B6BE480.8070103@boozter.com>
Date: Fri, 5 Feb 2010 10:53:46 +0100
Message-ID: <697f8381002050153s4a905a34m4f837780329cf51f@mail.gmail.com>
Subject: Re: Document Frequency for a set of documents
From: Ard Schrijvers <a.schrijvers@onehippo.com>
To: general@lucene.apache.org, java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

crossposting to the user list as I think this issue belongs there. See
my comments inline

On Fri, Feb 5, 2010 at 10:27 AM, lionel duboeuf
<lionel.duboeuf@boozter.com> wrote:
> Hi,
>
> Sorry for asking again, **I still have not found a scalable solution to g=
et
> the document frequency of a term t according a set of documents. Lucene o=
nly
> store the document frequency for the global corpus, but i would like to b=
e
> able to get the document frequency of a term according only to a subset o=
f
> documents (i.e. a user's collection of documents).
>
> I guess that querying the index to get the number of hits for each term a=
nd
> for each field, =A0filtered by a user will be to slow.
> Any idea ?

I have recently developed out-of-the-box faceted navigation exposed
over jcr (hippo repository on top of jackrabbit) where I think you are
looking for efficient faceted navigation as well, right? First of all,
I am also interested if others have something to add to my findings.

First of all, you can approach your issue in two different angles,
where I think depending on the number of results vs number of terms
(unique facets), you can best switch (runtime) between the two
approaches:

Approach (1): The lucene TermEnum is leading: if the lucene field has
*many* (say more then 100.000) unique values, it becomes slow (and
approach two might be better)

You have a BitSet matchingDocs, and you want the count for all the
terms for field 'brand' where of course one of the documents in
matchingDocs should have the term:
Suppose your field is thus 'brand', then you can do:

           TermEnum termEnum =3D indexReader.terms(new Term("brand", ""));
            // iterate through all the values of this facet and see
look at number of hits per term

            try {
                TermDocs termDocs =3D indexReader.termDocs();
                // open termDocs only once, and use seek: this is more effi=
cient
                try {
                    do {
                        Term term =3D termEnum.term();
                        int count =3D 0;
                        if (term !=3D null && term.field() =3D=3D
internalFacetName) { // interned comparison

                            termDocs.seek(term);
                            while (termDocs.next()) {
                                if (matchingDocs.get(termDocs.doc())) {
                                    count++;
                                }
                            }
                            if (count > 0) {
                                if (!"".equals(term.text())) {

facetValueCountMap.put(term.text(), new Count(count));
                                }
                            }

                        } else {
                            break;
                        }
                    } while (termEnum.next());
                } finally {
                    termDocs.close();
                }
            } finally {
                termEnum.close();
            }

Approach (2): matching docs are leading. All lucene fields that should
be useable for your facet counts, must be indexed with TermVectors.
This approach becomes slow when the matching docs grow > 100.000 hits.
Then, you rather use approach (1)

Create your own HitCollector, and have its hit method something like:

public final void collect(final int docid, final float score) {
        try {
            if (facetMap !=3D null) {
                final TermFreqVector tfv =3D
reader.getTermFreqVector(docid, internalName);
                if (tfv !=3D null) {
                    for (int i =3D 0; i < tfv.getTermFrequencies().length; =
i++) {
                        addToFacetMap(tfv.getTerms()[i]);
                    }


Note that the HitCollector's are not advised for large hit sets, also see [=
1]

This is how i currently have a really performant faceted navigation
exposed as a jcr tree. If somebody has tried more ways, or something
to add, I would be interested

Regards Ard

[1] http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/search/HitCol=
lector.html

>
>
> regards,
>
> Lionel
>
> *
> *
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 05 15:18:49 2010
Return-Path: <java-user-return-44885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66198 invoked from network); 5 Feb 2010 15:18:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Feb 2010 15:18:49 -0000
Received: (qmail 62249 invoked by uid 500); 5 Feb 2010 15:18:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62194 invoked by uid 500); 5 Feb 2010 15:18:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62184 invoked by uid 99); 5 Feb 2010 15:18:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Feb 2010 15:18:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 209.85.222.172 as permitted sender)
Received: from [209.85.222.172] (HELO mail-pz0-f172.google.com) (209.85.222.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Feb 2010 15:18:37 +0000
Received: by pzk2 with SMTP id 2so149262pzk.21
        for <java-user@lucene.apache.org>; Fri, 05 Feb 2010 07:18:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=cgpqE/BnnoFNMk9pieTu8RsTZ4JG89VJBE8Lz5nIC/U=;
        b=Ff0AI6ldAQl8g36LqKK9/Nnae9ImBpqxYF33bGm+vTRHGeoeO33Me353Tf/4VtqP1L
         Ml5NE7pDqn6SXZ7e1mAEEJ9lQ/khqoV2FnYbWmArXVAeBsI3guz/R7XZnR4hpTY8qkzx
         JlINduEU1KpbJ4UIydWJBYeZfZiIoORqpLSF8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=JbIsLFl01hlziiqjSkZSaNvTDoN9mfONBxLrtK7F5NZ9qHcqOotTJPyemE2BhgQaaz
         c4rZLg6HQMuA2fXMqKA1t47Gv0fNAyMetZAHk0475w6tg/TnTUQKIfuej1OjQhzLo0Oj
         nX6lQbL4KGrDQZ1CfUB2fXtNUO+fEiT2x2UkE=
Received: by 10.115.36.2 with SMTP id o2mr1874439waj.89.1265383095735;
        Fri, 05 Feb 2010 07:18:15 -0800 (PST)
Received: from ?192.168.1.105? (c-24-35-52-106.customer.broadstripe.net [24.35.52.106])
        by mx.google.com with ESMTPS id 22sm1526710pzk.14.2010.02.05.07.18.13
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 05 Feb 2010 07:18:14 -0800 (PST)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: Match span of capitalized words
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <3836ec641002031757y6850e4c9vf99c203a230e313@mail.gmail.com>
Date: Fri, 5 Feb 2010 10:18:11 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <C9182CCC-62E3-4E0E-92C8-7A0E2EBC78EE@apache.org>
References: <3836ec641002031757y6850e4c9vf99c203a230e313@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 3, 2010, at 8:57 PM, Max Lynch wrote:

> Hi,
> I would like to do a search for "Microsoft Windows" as a span, but not =
match
> if words before or after "Microsoft Windows" are upper cased.
>=20
> For example, I want this to match: another crash for Microsoft Windows =
today
> But not this: another crash for Microsoft Windows Server today
>=20
> Is this possible?  My first attempt started with the SpanRegexQuery =
from the
> regex contrib package, but I can't figure out how to put in a term I =
do want
> to match but don't want to include in the final highlighting match.  =
Does
> that make sense?
>=20
> My example (using WhitespaceAnalyzer since I care about case):
>=20
> SpanRegexQuery srq1 =3D new SpanRegexQuery( new Term("contents", =
"Chase"));
> SpanRegexQuery srq2 =3D new SpanRegexQuery( new Term("contents",
> "Bank[\\.]*"));
> SpanRegexQuery srq3 =3D new SpanRegexQuery( new Term("contents", =
"[^A-Z]*"));

I'm not sure it supports it, but I wonder if you could use a negative =
lookahead assertion?  Most regex languages support it.

-Grant


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 05 21:49:32 2010
Return-Path: <java-user-return-44886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22607 invoked from network); 5 Feb 2010 21:49:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Feb 2010 21:49:31 -0000
Received: (qmail 52457 invoked by uid 500); 5 Feb 2010 21:49:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52335 invoked by uid 500); 5 Feb 2010 21:49:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52325 invoked by uid 99); 5 Feb 2010 21:49:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Feb 2010 21:49:28 +0000
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.34.111.254] (HELO barmail1.idig.net) (64.34.111.254)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Feb 2010 21:49:19 +0000
Received: from cpweb10.idig.net (cpweb10.idig.net [65.39.182.10])
	by barmail1.idig.net (Spam & Virus Firewall) with ESMTP
	id B09C23E75608; Fri,  5 Feb 2010 13:48:57 -0800 (PST)
Received: from cpweb10.idig.net (cpweb10.idig.net [65.39.182.10]) by barmail1.idig.net with ESMTP id iAdJvRwpJfyp933A; Fri, 05 Feb 2010 13:48:57 -0800 (PST)
Received: from out.clearnet.com ([216.198.139.38] helo=FuadPC)
	by cpweb10.idig.net with esmtp (Exim 4.69)
	(envelope-from <fuad@efendi.ca>)
	id 1NdW2q-0005A9-Pm; Fri, 05 Feb 2010 13:48:57 -0800
From: "Fuad Efendi" <fuad@efendi.ca>
To: <general@lucene.apache.org>
Cc: <java-user@lucene.apache.org>
References: <2D088220C451EC44B520D000D22502B0645A0FBD05@pacha.corp.lechillmobile.com> 	<c7d45fc71002050844v581eb26dwe0603f32c885058b@mail.gmail.com> 	<2D088220C451EC44B520D000D22502B0645A0FBD11@pacha.corp.lechillmobile.com> 	<c7d45fc71002051142n369f593asb86e86bcc03dc38f@mail.gmail.com> 	<2D088220C451EC44B520D000D22502B0645A0FBD17@pacha.corp.lechillmobile.com> <c7d45fc71002051217n354c6751h2126ee870c3c8320@mail.gmail.com> <2D088220C451EC44B520D000D22502B0645A0FBD18@pacha.corp.lechillmobile.com>
In-Reply-To: <2D088220C451EC44B520D000D22502B0645A0FBD18@pacha.corp.lechillmobile.com>
Subject: RE: Wildcard searches????
Date: Fri, 5 Feb 2010 17:48:45 -0400
Message-ID: <06e601caa6ac$ff82fa40$fe88eec0$@ca>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqmoG7MH9ld2H9wQNulgnq6HyMbdQAAtFBAAAIPKEA=
Content-Language: en-ca
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - cpweb10.idig.net
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - efendi.ca
X-Source: 
X-Source-Args: 
X-Source-Dir: 

Niclas,

I looked at your initial post, you are creating document with field =
"abc*"
- nothing related to "wildcard query"!

Of course, query [useragents:abcdefghijklm] will return no results, and =
[q=3Duseragents:abc] no results, but [q=3Duseragents:abc*] will return =
something.

text_nav is specific SOLR type for _leading_ wildcard queries; you don't =
need it (you don't need _leading_ wildcard queries).

On indexing time, instead of
<doc>
<useragents>
                Firefox*
                Mozilla/4.0*
</useragents>
</doc>


You should index
<doc>
<useragents>
	=
Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-2.1+=
Configuration/CLDC-1.1+JavaPlatform/JP8.4.1+UP.Link/6.3.1.20.0
</useragents>
</doc>

And also, you need to choose properly SOLR type; for instance, textTight =
or textgen, or even non-tokenized string!


And, query [q=3Duseragents:moz*] will return this document (even if this =
field is nontokenized).


-Fuad


P.S. Don't use * when you create Lucene document; use it as part of =
query.




> -----Original Message-----
> From: Niclas Rothman [mailto:niro@lechill.com]
> Sent: February-05-10 4:44 PM
> To: general@lucene.apache.org
> Cc: java-user@lucene.apache.org
> Subject: RE: Wildcard searches????
>=20
> Ted im using SOLR, but I cant figure out what type of fieldtype I =
should
> use to get a query like this to work:
>=20
>=20
> q=3Duseragents: abcdefghijklm
>=20
>=20
> where I have in my index one document with value "abc" in field
> "useragents"
>=20
> That query results in 0 hits.
>=20
> If I issue this I get 1 hit of course (exact mathch)
>=20
> q=3Duseragents: Mozilla
>=20
>=20
> My document definition in SOLR looks like:
>=20
> <fields>
>     <field name=3D"id" type=3D"tint" indexed=3D"true" stored=3D"true"
> required=3D"true" />
>     <field name=3D"useragents" type=3D"text_rev" indexed=3D"true"
> stored=3D"true" required=3D"false" multiValued=3D"true" />
> </fields>
>=20
> Any clue?
>=20
> Nic
>=20
>=20
>=20
>=20
> -----Original Message-----
> From: Ted Dunning [mailto:ted.dunning@gmail.com]
> Sent: 05 February 2010 21:18
> To: general@lucene.apache.org
> Cc: java-user@lucene.apache.org
> Subject: Re: Wildcard searches????
>=20
> This is quite close.  You will have to break down the user agent that =
is
> your query into the same kinds of pieces as you did for your index.
> Lucene
> will only do exact matching of terms during searching (wildcard =
queries
> are
> handled by exploding the term into all possible variants).
>=20
> Regarding the field type, you will probably have to customize that a
> fair
> bit to make +'s be separators and such.  If you use SOLR to index and
> query
> your data, then it will make sure that your separation into tokens is
> compatible unless you are using shortened forms like you mention here.
>=20
> On Fri, Feb 5, 2010 at 12:03 PM, Niclas Rothman <niro@lechill.com>
> wrote:
>=20
> > Hi again Ted and many thanks for your efforts.
> > Ok, just to be sure that we fully understand each other:
> >
> > In my index I will store partial useragents without any wildcards *,
> e.g.
> >
> > Fire    (for Firefox)
> > Inte    (Internet Explorer)
> > Moz     (Mozill)
> >
> >
> > When I during runtime search my index for Media objects that are
> compatible
> > with a useragent,
> > e.g:
> >
> >
> >
> "Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-
> 2.1+Configuration/CLDC-1.1+JavaPlatform/JP-8.4.1+UP.Link/6.3.1.20.0"
> >
> > Hopefully lucene / solr will serve me with all Media objects that
> partially
> > math my full user agent string and also perhaps some mismatches. To =
be
> > absolutely sure that I only show Media objects that are compatible, =
I
> will
> > have to loop through the resultset in my program to do a final test
> and
> > exclude any mismatches.
> >
> > Is this what you are saying Ted, that I cant do the whole process in
> Solr /
> > Lucene, that I need to do the final test in my program (C#)?
> >
> > Also, Im using Solr 1.4, what fieldtype would you recommend to use =
for
> the
> > useragent ( tokenized)
> >
> > Okey, lets see what you have to say about this.
> > Please bear with me, im all new to lucene and solr!!
> >
> > Regards
> > Niclas
> >
> >
> >
> >
> > -----Original Message-----
> > From: Ted Dunning [mailto:ted.dunning@gmail.com]
> > Sent: 05 February 2010 20:43
> > To: general@lucene.apache.org
> > Cc: java-user@lucene.apache.org
> > Subject: Re: Wildcard searches????
> >
> > Yes.  I think you have it.
> >
> > To explain in a bit more detail, I think that you should store a
> tokenized
> > form of the user agents and should query using a tokenized form of
> your
> > user
> > agent.  This will retrieve documents that have partial matches to =
the
> user
> > agent of interest.  Many of these matches, however, may not meet the
> > requirements of the wildcard expression in the documents.  As such,
> you
> > will
> > need to look at each retrieved document to retrieve the wild
> expression
> > from
> > each one in turn to test if the original (untokenized) query =
satisfies
> the
> > wildcard.
> >
> > If your wildcards are all of a positive nature as your example is,
> then
> > this
> > should work pretty well.
> >
> > On Fri, Feb 5, 2010 at 9:09 AM, Niclas Rothman <niro@lechill.com>
> wrote:
> >
> > > Hi Ted and thanks for all your efforts.
> > > Listen im a little bit lost here trying to understand what you are
> trying
> > > to tell me :-)
> > >
> > > 1. I Store my useragents in a field that is tokenized.
> > > 2. Then when I search, you are saying that I should "scan" down =
the
> > matches
> > > via a SOLR function, or what?
> > > Are you referring to these functions in SOLR?
> > >
> > > http://wiki.apache.org/solr/FunctionQuery
> > >
> > >
> > > Sorry for not grasping immmediatley!
> > >
> > > Regards Niclas
> > >
> > > -----Original Message-----
> > > From: Ted Dunning [mailto:ted.dunning@gmail.com]
> > > Sent: 05 February 2010 17:44
> > > To: general@lucene.apache.org
> > > Cc: java-user@lucene.apache.org
> > > Subject: Re: Wildcard searches????
> > >
> > > Tokenize your user agent strings, then store the tokenized form
> > separately
> > > from the wild card.  At retrieval time, scan down the matches and
> apply
> > the
> > > wildcard from each document to your original query.  The SOLR
> function
> > > query
> > > might be useful for this as would be a custom hit collector.
> > >
> > > On Fri, Feb 5, 2010 at 7:57 AM, Niclas Rothman <niro@lechill.com>
> wrote:
> > >
> > > > Hi there, i facing a problem and would like to ask the community
> for
> > some
> > > > help.
> > > >
> > > > In my index I store browser  useragent values as "wildcarded" /
> > partial,
> > > >  which should be understood that an indexed document
> > > > should only be shown to end users if his browsers useragent
> matches a
> > > > wildcared usereragent in my document.
> > > >
> > > > So what I have Is actually a "reversed" matching, the wildcards
> are in
> > my
> > > > document and NOT in my actual query.
> > > > Does anyone know if this "setup" Is possible, e.g. to execute a
> query
> > in
> > > > style with:
> > > >
> > > > useragents:
> > > >
> > >
> > =
"Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-
> 2.1+Configuration/CLDC-1.1+JavaPlatform/JP-8.4.1+UP.Link/6.3.1.20.0"
> > > >
> > > > In this example I would have a hit because Mozilla/4.0* matches
> the
> > > > useragent.
> > > >
> > > > <doc>
> > > > <useragents>
> > > >                Firefox*
> > > >                Mozilla/4.0*
> > > > </useragents>
> > > > </doc>
> > > >
> > > >
> > > > Regards
> > > > Niclas
> > > >
> > >
> > >
> > >
> > > --
> > > Ted Dunning, CTO
> > > DeepDyve
> > >
> >
> >
> >
> > --
> > Ted Dunning, CTO
> > DeepDyve
> >
>=20
>=20
>=20
> --
> Ted Dunning, CTO
> DeepDyve



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 05 22:23:48 2010
Return-Path: <java-user-return-44887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38451 invoked from network); 5 Feb 2010 22:23:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Feb 2010 22:23:48 -0000
Received: (qmail 89150 invoked by uid 500); 5 Feb 2010 22:23:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89071 invoked by uid 500); 5 Feb 2010 22:23:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89061 invoked by uid 99); 5 Feb 2010 22:23:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Feb 2010 22:23:45 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Feb 2010 22:23:36 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o15MMwBo001826
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 5 Feb 2010 17:23:15 -0500
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([2002:80e6:6cc3::80e6:6cc3]) with mapi; Fri, 5 Feb
 2010 17:23:13 -0500
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 5 Feb 2010 17:23:12 -0500
Subject: RE: Match span of capitalized words
Thread-Topic: Match span of capitalized words
Thread-Index: AcqmdogeNrkdJd+QSEaQbCp1pdNdBwAK2A4g
Message-ID: <2D127F11DC79714E9B6A43AC9458147F36661FEE@suex07-mbx-03.ad.syr.edu>
References: <3836ec641002031757y6850e4c9vf99c203a230e313@mail.gmail.com>
 <C9182CCC-62E3-4E0E-92C8-7A0E2EBC78EE@apache.org>
In-Reply-To: <C9182CCC-62E3-4E0E-92C8-7A0E2EBC78EE@apache.org>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2010-02-05_15:2010-02-05,2010-02-05,2010-02-05 signatures=0
X-Proofpoint-Spam-Reason: safe

Hi Max,

On 02/05/2010 at 10:18 AM, Grant Ingersoll wrote:
> On Feb 3, 2010, at 8:57 PM, Max Lynch wrote:
> > Hi, I would like to do a search for "Microsoft Windows" as a span, but
> > not match if words before or after "Microsoft Windows" are upper cased.
> >=20
> > For example, I want this to match: another crash for Microsoft Windows
> > today But not this: another crash for Microsoft Windows Server today
> >=20
> > Is this possible?  My first attempt started with the SpanRegexQuery
> > from the regex contrib package, but I can't figure out how to put in a
> > term I do want to match but don't want to include in the final
> > highlighting match. Does that make sense?
> >=20
> > My example (using WhitespaceAnalyzer since I care about case):
> >=20
> > SpanRegexQuery srq1 =3D new SpanRegexQuery(new Term("contents", "Chase"=
));
> > SpanRegexQuery srq2 =3D new SpanRegexQuery(new Term("contents", "Bank[\=
\.]*"));
> > SpanRegexQuery srq3 =3D new SpanRegexQuery(new Term("contents", "[^A-Z]=
*"));
>=20
> I'm not sure it supports it, but I wonder if you could use a negative
> lookahead assertion?  Most regex languages support it.

I don't think this would work, since the input to a SpanRegexQuery regex is=
 a single Term; following Terms are not included in the input.

I *think* you can get what you want using SpanNotQuery - something like the=
 following, using your "Microsoft Windows" example:

SpanNot:
    include:
        SpanNear(in-order=3Dtrue, slop=3D0):
            SpanTerm: "Microsoft"
            SpanTerm: "Windows"
    exclude:
        SpanNear(in-order=3Dtrue, slop=3D0):
            SpanTerm: "Microsoft"
            SpanTerm: "Windows"
            SpanRegex: "^\\p{Lu}.*"

Steve
=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 05 22:25:58 2010
Return-Path: <java-user-return-44888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39369 invoked from network); 5 Feb 2010 22:25:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Feb 2010 22:25:58 -0000
Received: (qmail 91937 invoked by uid 500); 5 Feb 2010 22:25:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91801 invoked by uid 500); 5 Feb 2010 22:25:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91781 invoked by uid 99); 5 Feb 2010 22:25:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Feb 2010 22:25:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of digydigy@gmail.com designates 209.85.219.218 as permitted sender)
Received: from [209.85.219.218] (HELO mail-ew0-f218.google.com) (209.85.219.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Feb 2010 22:25:43 +0000
Received: by ewy10 with SMTP id 10so2359507ewy.11
        for <multiple recipients>; Fri, 05 Feb 2010 14:25:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:cc:references
         :in-reply-to:subject:date:message-id:mime-version:content-type
         :content-transfer-encoding:x-mailer:thread-index:content-language;
        bh=vNohJrGMdNn+RkjdwNY+bFbaATOI5FZVbkycuQxV+DU=;
        b=ZLHgYmBua3x/RNOpSb4xoyalGFrFa3l5axK52PrQmk2beRz+YwcokkhB555K5UhJuG
         IVx+hTZgmBoIigp5z7qdcFGOhLCyAX/Buvm2uFrPOYxU74FxGtf0Dlb1YYjtszSbi7rH
         l+gLWHNbjycI01iNxBqgekHZjpc3fXFGVjnyM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:cc:references:in-reply-to:subject:date:message-id
         :mime-version:content-type:content-transfer-encoding:x-mailer
         :thread-index:content-language;
        b=NisHZA42ceZ+GgRfa4Kt1BA3CZ3uXAFjBBxof/1MdkaJkEKhDE72fXe9Ox62ejqZr/
         BbHfxtLDBqDax3Pj3I4RhfOzvZzhZ2XaMTe1lWm7iyex9KUcUTjCNEVKttEckBLO0h1j
         GNeEk7/6K/vAROwydm/oe+YrX8dPYIXz8R054=
Received: by 10.213.42.79 with SMTP id r15mr1012846ebe.94.1265408722929;
        Fri, 05 Feb 2010 14:25:22 -0800 (PST)
Received: from NEWPC ([81.213.206.230])
        by mx.google.com with ESMTPS id 16sm1305004ewy.2.2010.02.05.14.25.20
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 05 Feb 2010 14:25:21 -0800 (PST)
From: "Digy" <digydigy@gmail.com>
To: <general@lucene.apache.org>
Cc: <java-user@lucene.apache.org>
References: <2D088220C451EC44B520D000D22502B0645A0FBD05@pacha.corp.lechillmobile.com> 	<c7d45fc71002050844v581eb26dwe0603f32c885058b@mail.gmail.com> 	<2D088220C451EC44B520D000D22502B0645A0FBD11@pacha.corp.lechillmobile.com> 	<c7d45fc71002051142n369f593asb86e86bcc03dc38f@mail.gmail.com> 	<2D088220C451EC44B520D000D22502B0645A0FBD17@pacha.corp.lechillmobile.com> <c7d45fc71002051217n354c6751h2126ee870c3c8320@mail.gmail.com> <2D088220C451EC44B520D000D22502B0645A0FBD18@pacha.corp.lechillmobile.com> <06e601caa6ac$ff82fa40$fe88eec0$@ca> <2D088220C451EC44B520D000D22502B0645A0FBD1A@pacha.corp.lechillmobile.com>
In-Reply-To: <2D088220C451EC44B520D000D22502B0645A0FBD1A@pacha.corp.lechillmobile.com>
Subject: RE: Wildcard searches????
Date: Sat, 6 Feb 2010 00:25:02 +0200
Message-ID: <001b01caa6b2$10b901b0$322b0510$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqmoG7MH9ld2H9wQNulgnq6HyMbdQAAtFBAAAIPKEAAAJ5HQAABBNyA
Content-Language: tr
X-Virus-Checked: Checked by ClamAV on apache.org

http://en.wikipedia.org/wiki/Crossposting

-----Original Message-----
From: Niclas Rothman [mailto:niro@lechill.com]=20
Sent: Saturday, February 06, 2010 12:12 AM
To: general@lucene.apache.org
Cc: java-user@lucene.apache.org
Subject: RE: Wildcard searches????

Hi Fuad and thanks for your reply!

The first post I know now was a wrong approach, I should not have the =
wildcard included in my index.=20

However, I can't do as you suggest, to have the full user agent in the =
index, that=E2=80=99s the whole idea actually.=20

The reason can be explained like this, device manufactures are literally =
spitting out new devices and updates all the time which generates new =
user agents that are very similar, perhaps only a small version number =
differs.=20
So what I need is to have a "generalization" of the user agent in  my =
index, to only have the start of the useragent without including the =
versions numbers.=20
This way my index are all the time "up to date" even if users with new =
version numbers access my search service, which in my app isn=E2=80=99t =
significant but instead causing my problems....=20

Example:

I have 2 Indexed documents where the documents useragent field are =
partial:
<doc>
	<id>1</id>
	<useragents>
      	Firefox
            Mozilla/4.0+SonyEricsson
	</useragents>
</doc>
<doc>
	<id>2</id>
	<useragents>
      	Firefox
            Mozilla/4.0+SonyEricsson
	</useragents>
</doc>

User A searches my app with an user agent as:=20
=09
	=
Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-2.1+=
Configuration/CLDC-1.1+JavaPlatform/JP8.4.1+UP.Link/6.3.1.20.0

The search app will display both document 1 and 2, because his user =
agent starts exactly has the user agent pattern in my document.


User B searches my app with an user agent as (Please note that this user =
agent differs in the near end from Users A (JP9.5.1 instead of =
JP8.4.1)):=20
=09
	=
Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-2.1+=
Configuration/CLDC-1.1+JavaPlatform/JP9.5.1+UP.Link/6.3.1.20.0

The search app will also display both document 1 and 2, because his user =
agent starts exactly has the user agent pattern in my document.=20
Even if the version number of the java platform differs between user A =
and  B.=20

If we now have a different index with FULL user agents, only User A =
would have documents returned, none of the documents user agents matched =
Users B user agent because of the "silly" version number!!

<doc>
	<id>1</id>
	<useragents>
      	Firefox
            =
Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-2.1+=
Configuration/CLDC-1.1+JavaPlatform/JP8.4.1+UP.Link/6.3.1.20.0
	</useragents>
</doc>
<doc>
	<id>2</id>
	<useragents>
      	Firefox
            =
Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-2.1+=
Configuration/CLDC-1.1+JavaPlatform/JP8.4.1+UP.Link/6.3.1.20.0
	</useragents>
</doc>

Can you see my problem?
So the basic thing is if I somehow can do a query saying that at match =
should take place if a document useragent starts with the value of the =
users useragent.=20

In theory, having a startsWith "function / locig are easy enough to =
implement in C# / T-SQL,  but how on earth should I do this in SolR / =
Lucene?????

Regards

Niclas














-----Original Message-----
From: Fuad Efendi [mailto:fuad@efendi.ca]=20
Sent: 05 February 2010 22:49
To: general@lucene.apache.org
Cc: java-user@lucene.apache.org
Subject: RE: Wildcard searches????

Niclas,

I looked at your initial post, you are creating document with field =
"abc*"
- nothing related to "wildcard query"!

Of course, query [useragents:abcdefghijklm] will return no results, and =
[q=3Duseragents:abc] no results, but [q=3Duseragents:abc*] will return =
something.

text_nav is specific SOLR type for _leading_ wildcard queries; you don't =
need it (you don't need _leading_ wildcard queries).

On indexing time, instead of
<doc>
<useragents>
                Firefox*
                Mozilla/4.0*
</useragents>
</doc>


You should index
<doc>
<useragents>
	=
Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-2.1+=
Configuration/CLDC-1.1+JavaPlatform/JP8.4.1+UP.Link/6.3.1.20.0
</useragents>
</doc>

And also, you need to choose properly SOLR type; for instance, textTight =
or textgen, or even non-tokenized string!


And, query [q=3Duseragents:moz*] will return this document (even if this =
field is nontokenized).


-Fuad


P.S. Don't use * when you create Lucene document; use it as part of =
query.




> -----Original Message-----
> From: Niclas Rothman [mailto:niro@lechill.com]
> Sent: February-05-10 4:44 PM
> To: general@lucene.apache.org
> Cc: java-user@lucene.apache.org
> Subject: RE: Wildcard searches????
>=20
> Ted im using SOLR, but I cant figure out what type of fieldtype I =
should
> use to get a query like this to work:
>=20
>=20
> q=3Duseragents: abcdefghijklm
>=20
>=20
> where I have in my index one document with value "abc" in field
> "useragents"
>=20
> That query results in 0 hits.
>=20
> If I issue this I get 1 hit of course (exact mathch)
>=20
> q=3Duseragents: Mozilla
>=20
>=20
> My document definition in SOLR looks like:
>=20
> <fields>
>     <field name=3D"id" type=3D"tint" indexed=3D"true" stored=3D"true"
> required=3D"true" />
>     <field name=3D"useragents" type=3D"text_rev" indexed=3D"true"
> stored=3D"true" required=3D"false" multiValued=3D"true" />
> </fields>
>=20
> Any clue?
>=20
> Nic
>=20
>=20
>=20
>=20
> -----Original Message-----
> From: Ted Dunning [mailto:ted.dunning@gmail.com]
> Sent: 05 February 2010 21:18
> To: general@lucene.apache.org
> Cc: java-user@lucene.apache.org
> Subject: Re: Wildcard searches????
>=20
> This is quite close.  You will have to break down the user agent that =
is
> your query into the same kinds of pieces as you did for your index.
> Lucene
> will only do exact matching of terms during searching (wildcard =
queries
> are
> handled by exploding the term into all possible variants).
>=20
> Regarding the field type, you will probably have to customize that a
> fair
> bit to make +'s be separators and such.  If you use SOLR to index and
> query
> your data, then it will make sure that your separation into tokens is
> compatible unless you are using shortened forms like you mention here.
>=20
> On Fri, Feb 5, 2010 at 12:03 PM, Niclas Rothman <niro@lechill.com>
> wrote:
>=20
> > Hi again Ted and many thanks for your efforts.
> > Ok, just to be sure that we fully understand each other:
> >
> > In my index I will store partial useragents without any wildcards *,
> e.g.
> >
> > Fire    (for Firefox)
> > Inte    (Internet Explorer)
> > Moz     (Mozill)
> >
> >
> > When I during runtime search my index for Media objects that are
> compatible
> > with a useragent,
> > e.g:
> >
> >
> >
> "Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-
> 2.1+Configuration/CLDC-1.1+JavaPlatform/JP-8.4.1+UP.Link/6.3.1.20.0"
> >
> > Hopefully lucene / solr will serve me with all Media objects that
> partially
> > math my full user agent string and also perhaps some mismatches. To =
be
> > absolutely sure that I only show Media objects that are compatible, =
I
> will
> > have to loop through the resultset in my program to do a final test
> and
> > exclude any mismatches.
> >
> > Is this what you are saying Ted, that I cant do the whole process in
> Solr /
> > Lucene, that I need to do the final test in my program (C#)?
> >
> > Also, Im using Solr 1.4, what fieldtype would you recommend to use =
for
> the
> > useragent ( tokenized)
> >
> > Okey, lets see what you have to say about this.
> > Please bear with me, im all new to lucene and solr!!
> >
> > Regards
> > Niclas
> >
> >
> >
> >
> > -----Original Message-----
> > From: Ted Dunning [mailto:ted.dunning@gmail.com]
> > Sent: 05 February 2010 20:43
> > To: general@lucene.apache.org
> > Cc: java-user@lucene.apache.org
> > Subject: Re: Wildcard searches????
> >
> > Yes.  I think you have it.
> >
> > To explain in a bit more detail, I think that you should store a
> tokenized
> > form of the user agents and should query using a tokenized form of
> your
> > user
> > agent.  This will retrieve documents that have partial matches to =
the
> user
> > agent of interest.  Many of these matches, however, may not meet the
> > requirements of the wildcard expression in the documents.  As such,
> you
> > will
> > need to look at each retrieved document to retrieve the wild
> expression
> > from
> > each one in turn to test if the original (untokenized) query =
satisfies
> the
> > wildcard.
> >
> > If your wildcards are all of a positive nature as your example is,
> then
> > this
> > should work pretty well.
> >
> > On Fri, Feb 5, 2010 at 9:09 AM, Niclas Rothman <niro@lechill.com>
> wrote:
> >
> > > Hi Ted and thanks for all your efforts.
> > > Listen im a little bit lost here trying to understand what you are
> trying
> > > to tell me :-)
> > >
> > > 1. I Store my useragents in a field that is tokenized.
> > > 2. Then when I search, you are saying that I should "scan" down =
the
> > matches
> > > via a SOLR function, or what?
> > > Are you referring to these functions in SOLR?
> > >
> > > http://wiki.apache.org/solr/FunctionQuery
> > >
> > >
> > > Sorry for not grasping immmediatley!
> > >
> > > Regards Niclas
> > >
> > > -----Original Message-----
> > > From: Ted Dunning [mailto:ted.dunning@gmail.com]
> > > Sent: 05 February 2010 17:44
> > > To: general@lucene.apache.org
> > > Cc: java-user@lucene.apache.org
> > > Subject: Re: Wildcard searches????
> > >
> > > Tokenize your user agent strings, then store the tokenized form
> > separately
> > > from the wild card.  At retrieval time, scan down the matches and
> apply
> > the
> > > wildcard from each document to your original query.  The SOLR
> function
> > > query
> > > might be useful for this as would be a custom hit collector.
> > >
> > > On Fri, Feb 5, 2010 at 7:57 AM, Niclas Rothman <niro@lechill.com>
> wrote:
> > >
> > > > Hi there, i facing a problem and would like to ask the community
> for
> > some
> > > > help.
> > > >
> > > > In my index I store browser  useragent values as "wildcarded" /
> > partial,
> > > >  which should be understood that an indexed document
> > > > should only be shown to end users if his browsers useragent
> matches a
> > > > wildcared usereragent in my document.
> > > >
> > > > So what I have Is actually a "reversed" matching, the wildcards
> are in
> > my
> > > > document and NOT in my actual query.
> > > > Does anyone know if this "setup" Is possible, e.g. to execute a
> query
> > in
> > > > style with:
> > > >
> > > > useragents:
> > > >
> > >
> > =
"Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-
> 2.1+Configuration/CLDC-1.1+JavaPlatform/JP-8.4.1+UP.Link/6.3.1.20.0"
> > > >
> > > > In this example I would have a hit because Mozilla/4.0* matches
> the
> > > > useragent.
> > > >
> > > > <doc>
> > > > <useragents>
> > > >                Firefox*
> > > >                Mozilla/4.0*
> > > > </useragents>
> > > > </doc>
> > > >
> > > >
> > > > Regards
> > > > Niclas
> > > >
> > >
> > >
> > >
> > > --
> > > Ted Dunning, CTO
> > > DeepDyve
> > >
> >
> >
> >
> > --
> > Ted Dunning, CTO
> > DeepDyve
> >
>=20
>=20
>=20
> --
> Ted Dunning, CTO
> DeepDyve




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 05 23:06:59 2010
Return-Path: <java-user-return-44889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51582 invoked from network); 5 Feb 2010 23:06:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Feb 2010 23:06:59 -0000
Received: (qmail 39110 invoked by uid 500); 5 Feb 2010 23:06:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39040 invoked by uid 500); 5 Feb 2010 23:06:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39030 invoked by uid 99); 5 Feb 2010 23:06:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Feb 2010 23:06:57 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ihasmax@gmail.com designates 209.85.222.172 as permitted sender)
Received: from [209.85.222.172] (HELO mail-pz0-f172.google.com) (209.85.222.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Feb 2010 23:06:50 +0000
Received: by pzk2 with SMTP id 2so609525pzk.21
        for <java-user@lucene.apache.org>; Fri, 05 Feb 2010 15:06:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=3J5AH5lkAyTLfJazQBH7E1iiDUq4DOSeIS+vER7Y1GI=;
        b=t8O8t7QACvuCJH9Rb6iCL6mM6BPfcl2IKSSZPocl5Rm8g0CHES8vgAtl9xVPG4m7f8
         6zlkqrnE6LjMiebcjdaRijYricVTYjEwRL4zdYSIlXEI+L3Bd6Kj33A24/veRfftl8Py
         mWmC3lmyjnkb+mFJeFYmm4IruHqVnr7iXGa2Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=MXeTOsDdtM4Y8XE1u5i6J80jBBV+HHKxunZeURO6TFMusjDMuW/llSyc/IcCQueYGS
         69bukSw/KbHY8w06FoZA4T4L/fXWmRyHPeVNR9m2epcX4wdXuM23W1+E8aFmQ75ZLn7O
         9IUO8YHlvcOUq2RA+c7Bg06H6X3WfYS2S+92o=
MIME-Version: 1.0
Received: by 10.141.105.4 with SMTP id h4mr2306899rvm.108.1265411190045; Fri, 
	05 Feb 2010 15:06:30 -0800 (PST)
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F36661FEE@suex07-mbx-03.ad.syr.edu>
References: <3836ec641002031757y6850e4c9vf99c203a230e313@mail.gmail.com> 
	<C9182CCC-62E3-4E0E-92C8-7A0E2EBC78EE@apache.org> <2D127F11DC79714E9B6A43AC9458147F36661FEE@suex07-mbx-03.ad.syr.edu>
From: Max Lynch <ihasmax@gmail.com>
Date: Fri, 5 Feb 2010 17:06:10 -0600
Message-ID: <3836ec641002051506j7ca72a00q68c5fb57e37809df@mail.gmail.com>
Subject: Re: Match span of capitalized words
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd138467a3d55047ee280df

--000e0cd138467a3d55047ee280df
Content-Type: text/plain; charset=ISO-8859-1

>
>
> I *think* you can get what you want using SpanNotQuery - something like the
> following, using your "Microsoft Windows" example:
>
> SpanNot:
>    include:
>        SpanNear(in-order=true, slop=0):
>            SpanTerm: "Microsoft"
>            SpanTerm: "Windows"
>    exclude:
>        SpanNear(in-order=true, slop=0):
>            SpanTerm: "Microsoft"
>            SpanTerm: "Windows"
>            SpanRegex: "^\\p{Lu}.*"
>
> Steve
>
>
>
>
This worked great, thank you guys!

-Max

--000e0cd138467a3d55047ee280df--

From java-user-return-44890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 06 04:14:54 2010
Return-Path: <java-user-return-44890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6189 invoked from network); 6 Feb 2010 04:14:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Feb 2010 04:14:54 -0000
Received: (qmail 2016 invoked by uid 500); 6 Feb 2010 04:14:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1756 invoked by uid 500); 6 Feb 2010 04:14:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1746 invoked by uid 99); 6 Feb 2010 04:14:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Feb 2010 04:14:51 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.34.111.254] (HELO barmail1.idig.net) (64.34.111.254)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Feb 2010 04:14:41 +0000
Received: from cpweb10.idig.net (cpweb10.idig.net [65.39.182.10])
	by barmail1.idig.net (Spam & Virus Firewall) with ESMTP
	id 422BE3E7A5E7; Fri,  5 Feb 2010 20:14:17 -0800 (PST)
Received: from cpweb10.idig.net (cpweb10.idig.net [65.39.182.10]) by barmail1.idig.net with ESMTP id snXu2w5GFcPdHCHS; Fri, 05 Feb 2010 20:14:17 -0800 (PST)
Received: from out.clearnet.com ([216.198.139.38] helo=FuadPC)
	by cpweb10.idig.net with esmtp (Exim 4.69)
	(envelope-from <fuad@efendi.ca>)
	id 1Ndc3k-00046Y-0m; Fri, 05 Feb 2010 20:14:17 -0800
From: "Fuad Efendi" <fuad@efendi.ca>
To: <general@lucene.apache.org>
Cc: <java-user@lucene.apache.org>
References: <2D088220C451EC44B520D000D22502B0645A0FBD05@pacha.corp.lechillmobile.com> 	<c7d45fc71002050844v581eb26dwe0603f32c885058b@mail.gmail.com> 	<2D088220C451EC44B520D000D22502B0645A0FBD11@pacha.corp.lechillmobile.com> 	<c7d45fc71002051142n369f593asb86e86bcc03dc38f@mail.gmail.com> 	<2D088220C451EC44B520D000D22502B0645A0FBD17@pacha.corp.lechillmobile.com> <c7d45fc71002051217n354c6751h2126ee870c3c8320@mail.gmail.com> <2D088220C451EC44B520D000D22502B0645A0FBD18@pacha.corp.lechillmobile.com> <06e601caa6ac$ff82fa40$fe88eec0$@ca> <2D088220C451EC44B520D000D22502B0645A0FBD1A@pacha.corp.lechillmobile.com>
In-Reply-To: <2D088220C451EC44B520D000D22502B0645A0FBD1A@pacha.corp.lechillmobile.com>
Subject: RE: Wildcard searches????
Date: Sat, 6 Feb 2010 00:14:06 -0400
Message-ID: <072201caa6e2$d4f13e00$7ed3ba00$@ca>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqmoG7MH9ld2H9wQNulgnq6HyMbdQAAtFBAAAIPKEAAAJ5HQAAM3RVg
Content-Language: en-ca
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - cpweb10.idig.net
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - efendi.ca
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Niclas,


"generalization" of the user agent "without including the versions =
numbers"...

How will you separate Mozilla/5.0 (Browser) from Mozilla/5.0 =
(Googlebot)?

And, going to the root of a problem... why do you use SOLR such a way? =
Is it search service showing different content depending on browser type =
(WAP vs. HTML)???

If it is, you are implementing so-called "business use case" =
improperly...

Search Engine Results Pages (SERP) should not have dependency on =
User-Agent HTTP Request Header.

But, raw TCP output may depend on it, and it is not SOLR/Lucene layer; =
it is upper layer... Tomcat Servlet Container, for instance, may =
generate different output depending whether it is mobile device (WAP) or =
browser (Mozilla compatible)...

I don't know your use case specifics... as Ted mentioned, it's much =
better to post SOLR-specific questions in solr-user@lucene.apache.org...


-Fuad



> -----Original Message-----
> From: Niclas Rothman [mailto:niro@lechill.com]
> Sent: February-05-10 6:12 PM
> To: general@lucene.apache.org
> Cc: java-user@lucene.apache.org
> Subject: RE: Wildcard searches????
>=20
> Hi Fuad and thanks for your reply!
>=20
> The first post I know now was a wrong approach, I should not have the
> wildcard included in my index.
>=20
> However, I can't do as you suggest, to have the full user agent in the
> index, that=E2=80=99s the whole idea actually.
>=20
> The reason can be explained like this, device manufactures are =
literally
> spitting out new devices and updates all the time which generates new
> user agents that are very similar, perhaps only a small version number
> differs.
> So what I need is to have a "generalization" of the user agent in  my
> index, to only have the start of the useragent without including the
> versions numbers.
> This way my index are all the time "up to date" even if users with new
> version numbers access my search service, which in my app =
isn=E2=80=99t
> significant but instead causing my problems....
>=20
> Example:
>=20
> I have 2 Indexed documents where the documents useragent field are
> partial:
> <doc>
> 	<id>1</id>
> 	<useragents>
>       	Firefox
>             Mozilla/4.0+SonyEricsson
> 	</useragents>
> </doc>
> <doc>
> 	<id>2</id>
> 	<useragents>
>       	Firefox
>             Mozilla/4.0+SonyEricsson
> 	</useragents>
> </doc>
>=20
> User A searches my app with an user agent as:
>=20
> 	Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MI
> DP-2.1+Configuration/CLDC-1.1+JavaPlatform/JP8.4.1+UP.Link/6.3.1.20.0
>=20
> The search app will display both document 1 and 2, because his user
> agent starts exactly has the user agent pattern in my document.
>=20
>=20
> User B searches my app with an user agent as (Please note that this =
user
> agent differs in the near end from Users A (JP9.5.1 instead of
> JP8.4.1)):
>=20
> 	Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MI
> DP-2.1+Configuration/CLDC-1.1+JavaPlatform/JP9.5.1+UP.Link/6.3.1.20.0
>=20
> The search app will also display both document 1 and 2, because his =
user
> agent starts exactly has the user agent pattern in my document.
> Even if the version number of the java platform differs between user A
> and  B.
>=20
> If we now have a different index with FULL user agents, only User A
> would have documents returned, none of the documents user agents =
matched
> Users B user agent because of the "silly" version number!!
>=20
> <doc>
> 	<id>1</id>
> 	<useragents>
>       	Firefox
>=20
> Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-
> 2.1+Configuration/CLDC-1.1+JavaPlatform/JP8.4.1+UP.Link/6.3.1.20.0
> 	</useragents>
> </doc>
> <doc>
> 	<id>2</id>
> 	<useragents>
>       	Firefox
>=20
> Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-
> 2.1+Configuration/CLDC-1.1+JavaPlatform/JP8.4.1+UP.Link/6.3.1.20.0
> 	</useragents>
> </doc>
>=20
> Can you see my problem?
> So the basic thing is if I somehow can do a query saying that at match
> should take place if a document useragent starts with the value of the
> users useragent.
>=20
> In theory, having a startsWith "function / locig are easy enough to
> implement in C# / T-SQL,  but how on earth should I do this in SolR /
> Lucene?????
>=20
> Regards
>=20
> Niclas
>=20
>=20
>=20
>=20
>=20
>=20
>=20
>=20
>=20
>=20
>=20
>=20
>=20
>=20
> -----Original Message-----
> From: Fuad Efendi [mailto:fuad@efendi.ca]
> Sent: 05 February 2010 22:49
> To: general@lucene.apache.org
> Cc: java-user@lucene.apache.org
> Subject: RE: Wildcard searches????
>=20
> Niclas,
>=20
> I looked at your initial post, you are creating document with field
> "abc*"
> - nothing related to "wildcard query"!
>=20
> Of course, query [useragents:abcdefghijklm] will return no results, =
and
> [q=3Duseragents:abc] no results, but [q=3Duseragents:abc*] will return
> something.
>=20
> text_nav is specific SOLR type for _leading_ wildcard queries; you =
don't
> need it (you don't need _leading_ wildcard queries).
>=20
> On indexing time, instead of
> <doc>
> <useragents>
>                 Firefox*
>                 Mozilla/4.0*
> </useragents>
> </doc>
>=20
>=20
> You should index
> <doc>
> <useragents>
> 	Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MI
> DP-2.1+Configuration/CLDC-1.1+JavaPlatform/JP8.4.1+UP.Link/6.3.1.20.0
> </useragents>
> </doc>
>=20
> And also, you need to choose properly SOLR type; for instance, =
textTight
> or textgen, or even non-tokenized string!
>=20
>=20
> And, query [q=3Duseragents:moz*] will return this document (even if =
this
> field is nontokenized).
>=20
>=20
> -Fuad
>=20
>=20
> P.S. Don't use * when you create Lucene document; use it as part of
> query.
>=20
>=20
>=20
>=20
> > -----Original Message-----
> > From: Niclas Rothman [mailto:niro@lechill.com]
> > Sent: February-05-10 4:44 PM
> > To: general@lucene.apache.org
> > Cc: java-user@lucene.apache.org
> > Subject: RE: Wildcard searches????
> >
> > Ted im using SOLR, but I cant figure out what type of fieldtype I
> should
> > use to get a query like this to work:
> >
> >
> > q=3Duseragents: abcdefghijklm
> >
> >
> > where I have in my index one document with value "abc" in field
> > "useragents"
> >
> > That query results in 0 hits.
> >
> > If I issue this I get 1 hit of course (exact mathch)
> >
> > q=3Duseragents: Mozilla
> >
> >
> > My document definition in SOLR looks like:
> >
> > <fields>
> >     <field name=3D"id" type=3D"tint" indexed=3D"true" =
stored=3D"true"
> > required=3D"true" />
> >     <field name=3D"useragents" type=3D"text_rev" indexed=3D"true"
> > stored=3D"true" required=3D"false" multiValued=3D"true" />
> > </fields>
> >
> > Any clue?
> >
> > Nic
> >
> >
> >
> >
> > -----Original Message-----
> > From: Ted Dunning [mailto:ted.dunning@gmail.com]
> > Sent: 05 February 2010 21:18
> > To: general@lucene.apache.org
> > Cc: java-user@lucene.apache.org
> > Subject: Re: Wildcard searches????
> >
> > This is quite close.  You will have to break down the user agent =
that
> is
> > your query into the same kinds of pieces as you did for your index.
> > Lucene
> > will only do exact matching of terms during searching (wildcard
> queries
> > are
> > handled by exploding the term into all possible variants).
> >
> > Regarding the field type, you will probably have to customize that a
> > fair
> > bit to make +'s be separators and such.  If you use SOLR to index =
and
> > query
> > your data, then it will make sure that your separation into tokens =
is
> > compatible unless you are using shortened forms like you mention =
here.
> >
> > On Fri, Feb 5, 2010 at 12:03 PM, Niclas Rothman <niro@lechill.com>
> > wrote:
> >
> > > Hi again Ted and many thanks for your efforts.
> > > Ok, just to be sure that we fully understand each other:
> > >
> > > In my index I will store partial useragents without any wildcards =
*,
> > e.g.
> > >
> > > Fire    (for Firefox)
> > > Inte    (Internet Explorer)
> > > Moz     (Mozill)
> > >
> > >
> > > When I during runtime search my index for Media objects that are
> > compatible
> > > with a useragent,
> > > e.g:
> > >
> > >
> > >
> > =
"Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-
> > 2.1+Configuration/CLDC-1.1+JavaPlatform/JP-8.4.1+UP.Link/6.3.1.20.0"
> > >
> > > Hopefully lucene / solr will serve me with all Media objects that
> > partially
> > > math my full user agent string and also perhaps some mismatches. =
To
> be
> > > absolutely sure that I only show Media objects that are =
compatible,
> I
> > will
> > > have to loop through the resultset in my program to do a final =
test
> > and
> > > exclude any mismatches.
> > >
> > > Is this what you are saying Ted, that I cant do the whole process =
in
> > Solr /
> > > Lucene, that I need to do the final test in my program (C#)?
> > >
> > > Also, Im using Solr 1.4, what fieldtype would you recommend to use
> for
> > the
> > > useragent ( tokenized)
> > >
> > > Okey, lets see what you have to say about this.
> > > Please bear with me, im all new to lucene and solr!!
> > >
> > > Regards
> > > Niclas
> > >
> > >
> > >
> > >
> > > -----Original Message-----
> > > From: Ted Dunning [mailto:ted.dunning@gmail.com]
> > > Sent: 05 February 2010 20:43
> > > To: general@lucene.apache.org
> > > Cc: java-user@lucene.apache.org
> > > Subject: Re: Wildcard searches????
> > >
> > > Yes.  I think you have it.
> > >
> > > To explain in a bit more detail, I think that you should store a
> > tokenized
> > > form of the user agents and should query using a tokenized form of
> > your
> > > user
> > > agent.  This will retrieve documents that have partial matches to
> the
> > user
> > > agent of interest.  Many of these matches, however, may not meet =
the
> > > requirements of the wildcard expression in the documents.  As =
such,
> > you
> > > will
> > > need to look at each retrieved document to retrieve the wild
> > expression
> > > from
> > > each one in turn to test if the original (untokenized) query
> satisfies
> > the
> > > wildcard.
> > >
> > > If your wildcards are all of a positive nature as your example is,
> > then
> > > this
> > > should work pretty well.
> > >
> > > On Fri, Feb 5, 2010 at 9:09 AM, Niclas Rothman <niro@lechill.com>
> > wrote:
> > >
> > > > Hi Ted and thanks for all your efforts.
> > > > Listen im a little bit lost here trying to understand what you =
are
> > trying
> > > > to tell me :-)
> > > >
> > > > 1. I Store my useragents in a field that is tokenized.
> > > > 2. Then when I search, you are saying that I should "scan" down
> the
> > > matches
> > > > via a SOLR function, or what?
> > > > Are you referring to these functions in SOLR?
> > > >
> > > > http://wiki.apache.org/solr/FunctionQuery
> > > >
> > > >
> > > > Sorry for not grasping immmediatley!
> > > >
> > > > Regards Niclas
> > > >
> > > > -----Original Message-----
> > > > From: Ted Dunning [mailto:ted.dunning@gmail.com]
> > > > Sent: 05 February 2010 17:44
> > > > To: general@lucene.apache.org
> > > > Cc: java-user@lucene.apache.org
> > > > Subject: Re: Wildcard searches????
> > > >
> > > > Tokenize your user agent strings, then store the tokenized form
> > > separately
> > > > from the wild card.  At retrieval time, scan down the matches =
and
> > apply
> > > the
> > > > wildcard from each document to your original query.  The SOLR
> > function
> > > > query
> > > > might be useful for this as would be a custom hit collector.
> > > >
> > > > On Fri, Feb 5, 2010 at 7:57 AM, Niclas Rothman =
<niro@lechill.com>
> > wrote:
> > > >
> > > > > Hi there, i facing a problem and would like to ask the =
community
> > for
> > > some
> > > > > help.
> > > > >
> > > > > In my index I store browser  useragent values as "wildcarded" =
/
> > > partial,
> > > > >  which should be understood that an indexed document
> > > > > should only be shown to end users if his browsers useragent
> > matches a
> > > > > wildcared usereragent in my document.
> > > > >
> > > > > So what I have Is actually a "reversed" matching, the =
wildcards
> > are in
> > > my
> > > > > document and NOT in my actual query.
> > > > > Does anyone know if this "setup" Is possible, e.g. to execute =
a
> > query
> > > in
> > > > > style with:
> > > > >
> > > > > useragents:
> > > > >
> > > >
> > >
> "Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-
> > 2.1+Configuration/CLDC-1.1+JavaPlatform/JP-8.4.1+UP.Link/6.3.1.20.0"
> > > > >
> > > > > In this example I would have a hit because Mozilla/4.0* =
matches
> > the
> > > > > useragent.
> > > > >
> > > > > <doc>
> > > > > <useragents>
> > > > >                Firefox*
> > > > >                Mozilla/4.0*
> > > > > </useragents>
> > > > > </doc>
> > > > >
> > > > >
> > > > > Regards
> > > > > Niclas
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Ted Dunning, CTO
> > > > DeepDyve
> > > >
> > >
> > >
> > >
> > > --
> > > Ted Dunning, CTO
> > > DeepDyve
> > >
> >
> >
> >
> > --
> > Ted Dunning, CTO
> > DeepDyve
>=20




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 06 04:29:49 2010
Return-Path: <java-user-return-44891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7656 invoked from network); 6 Feb 2010 04:29:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Feb 2010 04:29:48 -0000
Received: (qmail 5667 invoked by uid 500); 6 Feb 2010 04:29:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5307 invoked by uid 500); 6 Feb 2010 04:29:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5287 invoked by uid 99); 6 Feb 2010 04:29:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Feb 2010 04:29:44 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.34.111.254] (HELO barmail1.idig.net) (64.34.111.254)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Feb 2010 04:29:32 +0000
Received: from cpweb10.idig.net (cpweb10.idig.net [65.39.182.10])
	by barmail1.idig.net (Spam & Virus Firewall) with ESMTP
	id 2F30E383C731; Fri,  5 Feb 2010 20:29:10 -0800 (PST)
Received: from cpweb10.idig.net (cpweb10.idig.net [65.39.182.10]) by barmail1.idig.net with ESMTP id Sr1WntcBKoXnL3HB; Fri, 05 Feb 2010 20:29:10 -0800 (PST)
Received: from out.clearnet.com ([216.198.139.38] helo=FuadPC)
	by cpweb10.idig.net with esmtp (Exim 4.69)
	(envelope-from <fuad@efendi.ca>)
	id 1NdcI9-0001LT-58; Fri, 05 Feb 2010 20:29:10 -0800
From: "Fuad Efendi" <fuad@efendi.ca>
To: <general@lucene.apache.org>
Cc: <java-user@lucene.apache.org>
References: <2D088220C451EC44B520D000D22502B0645A0FBD05@pacha.corp.lechillmobile.com> 	<c7d45fc71002050844v581eb26dwe0603f32c885058b@mail.gmail.com> 	<2D088220C451EC44B520D000D22502B0645A0FBD11@pacha.corp.lechillmobile.com> 	<c7d45fc71002051142n369f593asb86e86bcc03dc38f@mail.gmail.com> 	<2D088220C451EC44B520D000D22502B0645A0FBD17@pacha.corp.lechillmobile.com> 	<c7d45fc71002051217n354c6751h2126ee870c3c8320@mail.gmail.com> 	<2D088220C451EC44B520D000D22502B0645A0FBD18@pacha.corp.lechillmobile.com> 	<06e601caa6ac$ff82fa40$fe88eec0$@ca> <2D088220C451EC44B520D000D22502B0645A0FBD1A@pacha.corp.lechillmobile.com> 	<001b01caa6b2$10b901b0$322b0510$@com> <c7d45fc71002051444x79134b1cme28f387db36c9080@mail.gmail.com>
In-Reply-To: <c7d45fc71002051444x79134b1cme28f387db36c9080@mail.gmail.com>
Subject: RE: Wildcard searches????
Date: Sat, 6 Feb 2010 00:28:59 -0400
Message-ID: <072301caa6e4$e919b1d0$bb4d1570$@ca>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqmtPZM7eJw2xn6QaOdVJsMaBC38wALki9g
Content-Language: en-ca
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - cpweb10.idig.net
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - efendi.ca
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org

I understand this:

> So what I need is to have a "generalization" of the user agent in  my
> index


So that we may end up with 5 - 10 different tokens. It has to be =
hard-coded, for instance, via synonym dictionary or something similar =
(it is very easy in SOLR). WAP, HTML, and etc. Most important agent =
attributes. It doesn't matter IE or Mozilla; what plays a role is, for =
instance, screen resolution, character encoding support, gzip support, =
and etc.; WAP or HTML is very important.

But why???

I think we are giving bad advice without knowing source of a problem =
(use case)...


Obviously:
Niclas tries to map thousands User-Agent strings to few tokens at =
indexing time, and at query time.

Question:
Why to use multivalued field? {"Mozilla", "Firefox"} - can't we have =
simple encoded value "MF"? - we need use case...


...

(better to post in SOLR; it is just configuration settings without hard =
coding...)




> -----Original Message-----
> From: Ted Dunning [mailto:ted.dunning@gmail.com]
> Sent: February-05-10 6:45 PM
> To: general@lucene.apache.org
> Cc: java-user@lucene.apache.org
> Subject: Re: Wildcard searches????
>=20
> Fuad,
>=20
> I think that you took Niclas requirements backwards.  He wants a =
reverse
> wild-card search where the wildcard is in the document and the search
> query
> is more specific.
>=20
> You are correct that leading wildcard is critical here.
>=20
> On Fri, Feb 5, 2010 at 2:25 PM, Digy <digydigy@gmail.com> wrote:
>=20
> > http://en.wikipedia.org/wiki/Crossposting
> >
> > -----Original Message-----
> > From: Niclas Rothman [mailto:niro@lechill.com]
> > Sent: Saturday, February 06, 2010 12:12 AM
> > To: general@lucene.apache.org
> > Cc: java-user@lucene.apache.org
> > Subject: RE: Wildcard searches????
> >
> > Hi Fuad and thanks for your reply!
> >
> > The first post I know now was a wrong approach, I should not have =
the
> > wildcard included in my index.
> >
> > However, I can't do as you suggest, to have the full user agent in =
the
> > index, that=E2=80=99s the whole idea actually.
> >
> > The reason can be explained like this, device manufactures are
> literally
> > spitting out new devices and updates all the time which generates =
new
> user
> > agents that are very similar, perhaps only a small version number
> differs.
> > So what I need is to have a "generalization" of the user agent in  =
my
> > index, to only have the start of the useragent without including the
> > versions numbers.
> > This way my index are all the time "up to date" even if users with =
new
> > version numbers access my search service, which in my app =
isn=E2=80=99t
> significant
> > but instead causing my problems....
> >
> > Example:
> >
> > I have 2 Indexed documents where the documents useragent field are
> partial:
> > <doc>
> >        <id>1</id>
> >        <useragents>
> >        Firefox
> >            Mozilla/4.0+SonyEricsson
> >        </useragents>
> > </doc>
> > <doc>
> >        <id>2</id>
> >        <useragents>
> >        Firefox
> >            Mozilla/4.0+SonyEricsson
> >        </useragents>
> > </doc>
> >
> > User A searches my app with an user agent as:
> >
> >
> >  =
Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-
> 2.1+Configuration/CLDC-1.1+JavaPlatform/JP8.4.1+UP.Link/6.3.1.20.0
> >
> > The search app will display both document 1 and 2, because his user
> agent
> > starts exactly has the user agent pattern in my document.
> >
> >
> > User B searches my app with an user agent as (Please note that this
> user
> > agent differs in the near end from Users A (JP9.5.1 instead of
> JP8.4.1)):
> >
> >
> >  =
Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-
> 2.1+Configuration/CLDC-1.1+JavaPlatform/JP9.5.1+UP.Link/6.3.1.20.0
> >
> > The search app will also display both document 1 and 2, because his
> user
> > agent starts exactly has the user agent pattern in my document.
> > Even if the version number of the java platform differs between user =
A
> and
> >  B.
> >
> > If we now have a different index with FULL user agents, only User A
> would
> > have documents returned, none of the documents user agents matched
> Users B
> > user agent because of the "silly" version number!!
> >
> > <doc>
> >        <id>1</id>
> >        <useragents>
> >        Firefox
> >
> >  =
Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-
> 2.1+Configuration/CLDC-1.1+JavaPlatform/JP8.4.1+UP.Link/6.3.1.20.0
> >        </useragents>
> > </doc>
> > <doc>
> >        <id>2</id>
> >        <useragents>
> >        Firefox
> >
> >  =
Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-
> 2.1+Configuration/CLDC-1.1+JavaPlatform/JP8.4.1+UP.Link/6.3.1.20.0
> >        </useragents>
> > </doc>
> >
> > Can you see my problem?
> > So the basic thing is if I somehow can do a query saying that at =
match
> > should take place if a document useragent starts with the value of =
the
> users
> > useragent.
> >
> > In theory, having a startsWith "function / locig are easy enough to
> > implement in C# / T-SQL,  but how on earth should I do this in SolR =
/
> > Lucene?????
> >
> > Regards
> >
> > Niclas
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> > -----Original Message-----
> > From: Fuad Efendi [mailto:fuad@efendi.ca]
> > Sent: 05 February 2010 22:49
> > To: general@lucene.apache.org
> > Cc: java-user@lucene.apache.org
> > Subject: RE: Wildcard searches????
> >
> > Niclas,
> >
> > I looked at your initial post, you are creating document with field
> "abc*"
> > - nothing related to "wildcard query"!
> >
> > Of course, query [useragents:abcdefghijklm] will return no results,
> and
> > [q=3Duseragents:abc] no results, but [q=3Duseragents:abc*] will =
return
> > something.
> >
> > text_nav is specific SOLR type for _leading_ wildcard queries; you
> don't
> > need it (you don't need _leading_ wildcard queries).
> >
> > On indexing time, instead of
> > <doc>
> > <useragents>
> >                Firefox*
> >                Mozilla/4.0*
> > </useragents>
> > </doc>
> >
> >
> > You should index
> > <doc>
> > <useragents>
> >
> >  =
Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-
> 2.1+Configuration/CLDC-1.1+JavaPlatform/JP8.4.1+UP.Link/6.3.1.20.0
> > </useragents>
> > </doc>
> >
> > And also, you need to choose properly SOLR type; for instance,
> textTight or
> > textgen, or even non-tokenized string!
> >
> >
> > And, query [q=3Duseragents:moz*] will return this document (even if =
this
> > field is nontokenized).
> >
> >
> > -Fuad
> >
> >
> > P.S. Don't use * when you create Lucene document; use it as part of
> query.
> >
> >
> >
> >
> > > -----Original Message-----
> > > From: Niclas Rothman [mailto:niro@lechill.com]
> > > Sent: February-05-10 4:44 PM
> > > To: general@lucene.apache.org
> > > Cc: java-user@lucene.apache.org
> > > Subject: RE: Wildcard searches????
> > >
> > > Ted im using SOLR, but I cant figure out what type of fieldtype I
> should
> > > use to get a query like this to work:
> > >
> > >
> > > q=3Duseragents: abcdefghijklm
> > >
> > >
> > > where I have in my index one document with value "abc" in field
> > > "useragents"
> > >
> > > That query results in 0 hits.
> > >
> > > If I issue this I get 1 hit of course (exact mathch)
> > >
> > > q=3Duseragents: Mozilla
> > >
> > >
> > > My document definition in SOLR looks like:
> > >
> > > <fields>
> > >     <field name=3D"id" type=3D"tint" indexed=3D"true" =
stored=3D"true"
> > > required=3D"true" />
> > >     <field name=3D"useragents" type=3D"text_rev" indexed=3D"true"
> > > stored=3D"true" required=3D"false" multiValued=3D"true" />
> > > </fields>
> > >
> > > Any clue?
> > >
> > > Nic
> > >
> > >
> > >
> > >
> > > -----Original Message-----
> > > From: Ted Dunning [mailto:ted.dunning@gmail.com]
> > > Sent: 05 February 2010 21:18
> > > To: general@lucene.apache.org
> > > Cc: java-user@lucene.apache.org
> > > Subject: Re: Wildcard searches????
> > >
> > > This is quite close.  You will have to break down the user agent
> that is
> > > your query into the same kinds of pieces as you did for your =
index.
> > > Lucene
> > > will only do exact matching of terms during searching (wildcard
> queries
> > > are
> > > handled by exploding the term into all possible variants).
> > >
> > > Regarding the field type, you will probably have to customize that =
a
> > > fair
> > > bit to make +'s be separators and such.  If you use SOLR to index
> and
> > > query
> > > your data, then it will make sure that your separation into tokens
> is
> > > compatible unless you are using shortened forms like you mention
> here.
> > >
> > > On Fri, Feb 5, 2010 at 12:03 PM, Niclas Rothman <niro@lechill.com>
> > > wrote:
> > >
> > > > Hi again Ted and many thanks for your efforts.
> > > > Ok, just to be sure that we fully understand each other:
> > > >
> > > > In my index I will store partial useragents without any =
wildcards
> *,
> > > e.g.
> > > >
> > > > Fire    (for Firefox)
> > > > Inte    (Internet Explorer)
> > > > Moz     (Mozill)
> > > >
> > > >
> > > > When I during runtime search my index for Media objects that are
> > > compatible
> > > > with a useragent,
> > > > e.g:
> > > >
> > > >
> > > >
> > >
> "Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-
> > > =
2.1+Configuration/CLDC-1.1+JavaPlatform/JP-8.4.1+UP.Link/6.3.1.20.0"
> > > >
> > > > Hopefully lucene / solr will serve me with all Media objects =
that
> > > partially
> > > > math my full user agent string and also perhaps some mismatches.
> To be
> > > > absolutely sure that I only show Media objects that are
> compatible, I
> > > will
> > > > have to loop through the resultset in my program to do a final
> test
> > > and
> > > > exclude any mismatches.
> > > >
> > > > Is this what you are saying Ted, that I cant do the whole =
process
> in
> > > Solr /
> > > > Lucene, that I need to do the final test in my program (C#)?
> > > >
> > > > Also, Im using Solr 1.4, what fieldtype would you recommend to =
use
> for
> > > the
> > > > useragent ( tokenized)
> > > >
> > > > Okey, lets see what you have to say about this.
> > > > Please bear with me, im all new to lucene and solr!!
> > > >
> > > > Regards
> > > > Niclas
> > > >
> > > >
> > > >
> > > >
> > > > -----Original Message-----
> > > > From: Ted Dunning [mailto:ted.dunning@gmail.com]
> > > > Sent: 05 February 2010 20:43
> > > > To: general@lucene.apache.org
> > > > Cc: java-user@lucene.apache.org
> > > > Subject: Re: Wildcard searches????
> > > >
> > > > Yes.  I think you have it.
> > > >
> > > > To explain in a bit more detail, I think that you should store a
> > > tokenized
> > > > form of the user agents and should query using a tokenized form =
of
> > > your
> > > > user
> > > > agent.  This will retrieve documents that have partial matches =
to
> the
> > > user
> > > > agent of interest.  Many of these matches, however, may not meet
> the
> > > > requirements of the wildcard expression in the documents.  As
> such,
> > > you
> > > > will
> > > > need to look at each retrieved document to retrieve the wild
> > > expression
> > > > from
> > > > each one in turn to test if the original (untokenized) query
> satisfies
> > > the
> > > > wildcard.
> > > >
> > > > If your wildcards are all of a positive nature as your example =
is,
> > > then
> > > > this
> > > > should work pretty well.
> > > >
> > > > On Fri, Feb 5, 2010 at 9:09 AM, Niclas Rothman =
<niro@lechill.com>
> > > wrote:
> > > >
> > > > > Hi Ted and thanks for all your efforts.
> > > > > Listen im a little bit lost here trying to understand what you
> are
> > > trying
> > > > > to tell me :-)
> > > > >
> > > > > 1. I Store my useragents in a field that is tokenized.
> > > > > 2. Then when I search, you are saying that I should "scan" =
down
> the
> > > > matches
> > > > > via a SOLR function, or what?
> > > > > Are you referring to these functions in SOLR?
> > > > >
> > > > > http://wiki.apache.org/solr/FunctionQuery
> > > > >
> > > > >
> > > > > Sorry for not grasping immmediatley!
> > > > >
> > > > > Regards Niclas
> > > > >
> > > > > -----Original Message-----
> > > > > From: Ted Dunning [mailto:ted.dunning@gmail.com]
> > > > > Sent: 05 February 2010 17:44
> > > > > To: general@lucene.apache.org
> > > > > Cc: java-user@lucene.apache.org
> > > > > Subject: Re: Wildcard searches????
> > > > >
> > > > > Tokenize your user agent strings, then store the tokenized =
form
> > > > separately
> > > > > from the wild card.  At retrieval time, scan down the matches
> and
> > > apply
> > > > the
> > > > > wildcard from each document to your original query.  The SOLR
> > > function
> > > > > query
> > > > > might be useful for this as would be a custom hit collector.
> > > > >
> > > > > On Fri, Feb 5, 2010 at 7:57 AM, Niclas Rothman
> <niro@lechill.com>
> > > wrote:
> > > > >
> > > > > > Hi there, i facing a problem and would like to ask the
> community
> > > for
> > > > some
> > > > > > help.
> > > > > >
> > > > > > In my index I store browser  useragent values as =
"wildcarded"
> /
> > > > partial,
> > > > > >  which should be understood that an indexed document
> > > > > > should only be shown to end users if his browsers useragent
> > > matches a
> > > > > > wildcared usereragent in my document.
> > > > > >
> > > > > > So what I have Is actually a "reversed" matching, the
> wildcards
> > > are in
> > > > my
> > > > > > document and NOT in my actual query.
> > > > > > Does anyone know if this "setup" Is possible, e.g. to =
execute
> a
> > > query
> > > > in
> > > > > > style with:
> > > > > >
> > > > > > useragents:
> > > > > >
> > > > >
> > > >
> "Mozilla/4.0+SonyEricssonC905v/R1DE+Browser/NetFront/3.4+Profile/MIDP-
> > > =
2.1+Configuration/CLDC-1.1+JavaPlatform/JP-8.4.1+UP.Link/6.3.1.20.0"
> > > > > >
> > > > > > In this example I would have a hit because Mozilla/4.0*
> matches
> > > the
> > > > > > useragent.
> > > > > >
> > > > > > <doc>
> > > > > > <useragents>
> > > > > >                Firefox*
> > > > > >                Mozilla/4.0*
> > > > > > </useragents>
> > > > > > </doc>
> > > > > >
> > > > > >
> > > > > > Regards
> > > > > > Niclas
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Ted Dunning, CTO
> > > > > DeepDyve
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Ted Dunning, CTO
> > > > DeepDyve
> > > >
> > >
> > >
> > >
> > > --
> > > Ted Dunning, CTO
> > > DeepDyve
> >
> >
> >
> >
>=20
>=20
> --
> Ted Dunning, CTO
> DeepDyve



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 06 13:27:57 2010
Return-Path: <java-user-return-44892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31891 invoked from network); 6 Feb 2010 13:27:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Feb 2010 13:27:57 -0000
Received: (qmail 92849 invoked by uid 500); 6 Feb 2010 13:27:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92305 invoked by uid 500); 6 Feb 2010 13:27:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92141 invoked by uid 99); 6 Feb 2010 13:27:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Feb 2010 13:27:53 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of iamrohitbanga@gmail.com designates 209.85.223.198 as permitted sender)
Received: from [209.85.223.198] (HELO mail-iw0-f198.google.com) (209.85.223.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Feb 2010 13:27:46 +0000
Received: by iwn36 with SMTP id 36so35225iwn.3
        for <java-user@lucene.apache.org>; Sat, 06 Feb 2010 05:27:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=VAcScHMoFmwADtrYdT1pjnN3NGecBgohSYXP5cjRCSQ=;
        b=XYVtXPxQjSjHyYBEHl6SJqlb7pY5NMm4wW5yFrT844og0gZyEtfR3vb2rPB0hKUN4g
         HE/+PwF0R4zXgXKyEv/du811jOfzpukAch76fVx3+0jVrtW8MrUKeRKioKFH8nV+d+tC
         D4PlIxYf4CIAp6jddit6Yz7VYIGX01aHfMRvo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=VtrCKfk2tDOgm+zVBm9EiCRh9HkFbkuGtxZbU+VtN0meLvZ9BiASjq3WBpDDBUnXsp
         3Cxo1UJTb5KAeXDeEhfCd+FxQ1WCFtwIXAz/fh+WzFChpokpCB3XE495KH5Mg+e+Q+Zp
         Eq3NItE18Ijus4euQSOuzkA5h/qVwCjYAwBbw=
MIME-Version: 1.0
Received: by 10.231.147.149 with SMTP id l21mr1290088ibv.0.1265462846117; Sat, 
	06 Feb 2010 05:27:26 -0800 (PST)
From: Rohit Banga <iamrohitbanga@gmail.com>
Date: Sat, 6 Feb 2010 18:57:06 +0530
Message-ID: <f1cb36b91002060527l40aa0cd8vcaf6c2cf647d6611@mail.gmail.com>
Subject: hit highlighting in lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64eeb586b5ab4047eee878f

--0016e64eeb586b5ab4047eee878f
Content-Type: text/plain; charset=ISO-8859-1

Hi friends

I have just started using lucene and the way i want to use it is the
following:

i have documents consisting of names of users as one field.
i have a sentence that may contain the name of some user.
i perform a search for the sentence in the index using the searcher.
if it contains the name of the user, then that user's document is listed on
top by lucene.

now i want to determine the position in the sentence where the string has
been found.

i am using fuzzy query matching by adding the character '~' to the sentence
i am searching.
so this means i cannot use the find function of the String class as is to
get the position of the match.

Thanks in advance

-- 
Rohit Banga

--0016e64eeb586b5ab4047eee878f--

From java-user-return-44893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 06 14:43:25 2010
Return-Path: <java-user-return-44893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60354 invoked from network); 6 Feb 2010 14:43:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Feb 2010 14:43:25 -0000
Received: (qmail 33821 invoked by uid 500); 6 Feb 2010 14:43:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33739 invoked by uid 500); 6 Feb 2010 14:43:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33726 invoked by uid 99); 6 Feb 2010 14:43:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Feb 2010 14:43:22 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Feb 2010 14:43:12 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 78A4445FCD3
	for <java-user@lucene.apache.org>; Sat,  6 Feb 2010 15:42:51 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Nj6TGbR1TWpp for <java-user@lucene.apache.org>;
	Sat,  6 Feb 2010 15:42:38 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id AEB4645FCD0
	for <java-user@lucene.apache.org>; Sat,  6 Feb 2010 15:42:37 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <f1cb36b91002060527l40aa0cd8vcaf6c2cf647d6611@mail.gmail.com>
In-Reply-To: <f1cb36b91002060527l40aa0cd8vcaf6c2cf647d6611@mail.gmail.com>
Subject: RE: hit highlighting in lucene
Date: Sat, 6 Feb 2010 15:42:56 +0100
Message-ID: <001601caa73a$ac403030$04c09090$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqnMDowBPn5xUL3T6q2pVswsBuX1AAClIzg
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

There are two contrib packages for highlighting in the lucene =
distribution: highlighter and fast-vector-highlighter

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Rohit Banga [mailto:iamrohitbanga@gmail.com]
> Sent: Saturday, February 06, 2010 2:27 PM
> To: java-user@lucene.apache.org
> Subject: hit highlighting in lucene
>=20
> Hi friends
>=20
> I have just started using lucene and the way i want to use it is the
> following:
>=20
> i have documents consisting of names of users as one field.
> i have a sentence that may contain the name of some user.
> i perform a search for the sentence in the index using the searcher.
> if it contains the name of the user, then that user's document is
> listed on
> top by lucene.
>=20
> now i want to determine the position in the sentence where the string
> has
> been found.
>=20
> i am using fuzzy query matching by adding the character '~' to the
> sentence
> i am searching.
> so this means i cannot use the find function of the String class as is
> to
> get the position of the match.
>=20
> Thanks in advance
>=20
> --
> Rohit Banga


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 06 15:24:43 2010
Return-Path: <java-user-return-44894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65374 invoked from network); 6 Feb 2010 15:24:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Feb 2010 15:24:43 -0000
Received: (qmail 49235 invoked by uid 500); 6 Feb 2010 15:24:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49141 invoked by uid 500); 6 Feb 2010 15:24:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49131 invoked by uid 99); 6 Feb 2010 15:24:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Feb 2010 15:24:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Feb 2010 15:24:32 +0000
Received: by wwb24 with SMTP id 24so907408wwb.35
        for <java-user@lucene.apache.org>; Sat, 06 Feb 2010 07:24:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=AzLZT1pzYPxjhOOtqv2ZS6Pj3kl/c+Ex1U6LTA7Todo=;
        b=q40CIfMCBgxMshSROK0f0HK6ceIzPm4Ny0aN4i/qTwnwouwBwD7nAkbGXTJtOF+ry8
         KOb2Iu6QRN7Y8r3/AD8ZCnYRNHn163pAxSIvktpPfgcZdA4mXV9KtkgN8HRL98RjQaAV
         7EV8I7B3N8wnx4nBgrXYoOKv87xsZW8NSKnFo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=A3YxtVz1u4BJEOuJAm7ucBaDRlZb/ZtUE4jFJBve23yhpU5Vx7pUHOVaz7INBpDTOO
         s0tcQHx2opxkKQ3bnVMIAQD1KK/mE+NWkFvSMWSafBK8YAAnGczteGybDrrfw6UmJrnm
         J15PpcpN1qAc+iHeyLPC7dUjyt5EvFEiY504I=
MIME-Version: 1.0
Received: by 10.216.88.136 with SMTP id a8mr2417325wef.77.1265469850563; Sat, 
	06 Feb 2010 07:24:10 -0800 (PST)
In-Reply-To: <27434651.post@talk.nabble.com>
References: <27402945.post@talk.nabble.com>
	 <001d01caa334$2bae98d0$830bca70$@de> <27403169.post@talk.nabble.com>
	 <8c4e68611002010417pd7a6d36wb976c61c7bb176f3@mail.gmail.com>
	 <27434620.post@talk.nabble.com> <27434651.post@talk.nabble.com>
Date: Sat, 6 Feb 2010 10:24:10 -0500
Message-ID: <359a92831002060724w15e13341p769a643e492482ec@mail.gmail.com>
Subject: Re: Searching compressed text using CompressionTools
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d64c23eab6f0047ef028e3

--0016e6d64c23eab6f0047ef028e3
Content-Type: text/plain; charset=ISO-8859-1

*assuming* that you've made a typo and aren't
really seeing a 1000X difference in size.... Did
you create your index fresh each time (or delete
the old FSDIr) before recording your sizes? If
you're appending to the current index, your
numbers are misleading....

Erick

On Wed, Feb 3, 2010 at 6:01 AM, Suraj Parida <parida.suraj@gmail.com> wrote:

>
> Ian,
>
> Small correction made ...
>
> Thanks for solving my previous problems.
>
>
> Now i tested the compression with 100 docs and found:
>   1. Without Compression size of FS directory (on disk)= 10.8 KB
>  2. With Compression size of FS directory (on disk) = 12.0 MB
>
> and with 500 docs:
>  1. Without Compression size of FS directory (on disk) = 45.9 KB
>  2. With Compression size of FS directory (on disk)  = 56.8 MB
>
> I mean do the compression will increase my disk usage ? if so will 50,000
> docs take around 6000 MB?
> or please tell if am i doing wrong somewhere because i thought compression
> will reduce space usage.
>
> Regards,
> Suraj
> --
> View this message in context:
> http://old.nabble.com/Searching-compressed-text-using-CompressionTools-tp27402945p27434651.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d64c23eab6f0047ef028e3--

From java-user-return-44895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 07 07:15:47 2010
Return-Path: <java-user-return-44895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74413 invoked from network); 7 Feb 2010 07:15:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Feb 2010 07:15:47 -0000
Received: (qmail 72782 invoked by uid 500); 7 Feb 2010 07:15:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72692 invoked by uid 500); 7 Feb 2010 07:15:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72682 invoked by uid 99); 7 Feb 2010 07:15:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 07:15:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of volsky@gmail.com designates 209.85.219.218 as permitted sender)
Received: from [209.85.219.218] (HELO mail-ew0-f218.google.com) (209.85.219.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 07:15:36 +0000
Received: by ewy10 with SMTP id 10so2970012ewy.11
        for <java-user@lucene.apache.org>; Sat, 06 Feb 2010 23:15:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=tpP3pC4kAKA+RGHj5EOuQwOoDxihEs8ujtfQ7EvGTe0=;
        b=o2qsaGN/D+pYCFMgar+8U7eG79tRt6Y8iq01diUA63voCgCKe1rzQvtkGbLVqTzUs6
         s5g62D7BYeVReGHtWWDEdzVZ9TaZkJzTej3FPmtUnQ793ZEncdUsie/Qe9i87LLu+OKQ
         PzE4qpUgxIp5Q+0gLzX826iLTYgRKUEu7uy4w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=ugOMciZaYN/wDTij015jhlf50dI4ukirzIbvMWKpAhDtwWiK/LJnVEVVISSgU/DCLn
         yEEZ1DxAJPvcHWI+VbHC6RnK/d0RnnVJAjxfu4QL/jWVSC8DXbLvf/L7WOqYFNtRGqql
         7UBTc8SLuDVUtdqTW4T9p7SfGgO/32gewjHq8=
MIME-Version: 1.0
Received: by 10.213.109.73 with SMTP id i9mr3224630ebp.52.1265526915149; Sat, 
	06 Feb 2010 23:15:15 -0800 (PST)
From: Dima Volsky <volsky@gmail.com>
Date: Sun, 7 Feb 2010 09:14:55 +0200
Message-ID: <ae5b9bdf1002062314t38f5898fp5de943b8e8d398e4@mail.gmail.com>
Subject: Managing MultiReader in multi-treaded application
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cdf93e63b3163047efd722b

--000e0cdf93e63b3163047efd722b
Content-Type: text/plain; charset=ISO-8859-1

Hi,


I'm trying run a scenario in which I have one index writer and several
readers. I use the MultiReader for searching on several indexes.
The application is multi-threaded so the MultiReader is accessed from
several threads sequentialy.


In some stage during the run I get AlreadyClosedException: this IndexReader
is closed


I wanted an advise about best practices running such a scenario.

Should I use the IncRef and the DecRef for managing the MultiReader
references?

I would be grateful if I could get some advice on this.

Thanks,

Dmitri

--000e0cdf93e63b3163047efd722b--

From java-user-return-44896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 07 10:17:46 2010
Return-Path: <java-user-return-44896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9692 invoked from network); 7 Feb 2010 10:17:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Feb 2010 10:17:46 -0000
Received: (qmail 17194 invoked by uid 500); 7 Feb 2010 10:17:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17114 invoked by uid 500); 7 Feb 2010 10:17:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17104 invoked by uid 99); 7 Feb 2010 10:17:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 10:17:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.194] (HELO mail-yx0-f194.google.com) (209.85.210.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 10:17:34 +0000
Received: by yxe32 with SMTP id 32so4277685yxe.5
        for <java-user@lucene.apache.org>; Sun, 07 Feb 2010 02:17:12 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.127.27 with SMTP id z27mr7027789ybc.104.1265537832554; 
	Sun, 07 Feb 2010 02:17:12 -0800 (PST)
In-Reply-To: <ae5b9bdf1002062314t38f5898fp5de943b8e8d398e4@mail.gmail.com>
References: <ae5b9bdf1002062314t38f5898fp5de943b8e8d398e4@mail.gmail.com>
Date: Sun, 7 Feb 2010 05:17:12 -0500
Message-ID: <9ac0c6aa1002070217t444ceccdi69e19e37a3477e6e@mail.gmail.com>
Subject: Re: Managing MultiReader in multi-treaded application
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

IncRef/DecRef is the best way to handle this: you have to ensure the
reader is not closed until 1) your app wants to close it (eg a reopen
has completed), and 2) every query in-flight, that had been using the
reader, has completed.

Lucene in Action 2 (NOTE: I'm a coauthor) has a class
(SearcherManager) that handles these details for you.  It also handles
reopening (with optional warming) the reader, including "normal"
readers and near real-time readers.  You can download the book's
source code from http://manning.com/hatcher3/.

Mike

On Sun, Feb 7, 2010 at 2:14 AM, Dima Volsky <volsky@gmail.com> wrote:
> Hi,
>
>
> I'm trying run a scenario in which I have one index writer and several
> readers. I use the MultiReader for searching on several indexes.
> The application is multi-threaded so the MultiReader is accessed from
> several threads sequentialy.
>
>
> In some stage during the run I get AlreadyClosedException: this IndexReader
> is closed
>
>
> I wanted an advise about best practices running such a scenario.
>
> Should I use the IncRef and the DecRef for managing the MultiReader
> references?
>
> I would be grateful if I could get some advice on this.
>
> Thanks,
>
> Dmitri
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 07 10:33:31 2010
Return-Path: <java-user-return-44897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15919 invoked from network); 7 Feb 2010 10:33:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Feb 2010 10:33:31 -0000
Received: (qmail 23822 invoked by uid 500); 7 Feb 2010 10:33:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23747 invoked by uid 500); 7 Feb 2010 10:33:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23737 invoked by uid 99); 7 Feb 2010 10:33:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 10:33:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of iamrohitbanga@gmail.com designates 209.85.223.200 as permitted sender)
Received: from [209.85.223.200] (HELO mail-iw0-f200.google.com) (209.85.223.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 10:33:17 +0000
Received: by iwn38 with SMTP id 38so5595482iwn.11
        for <java-user@lucene.apache.org>; Sun, 07 Feb 2010 02:32:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=FCOQSu3J/8KZSyIMaMS7rFCkXFUQrxRW1fVPpCsbLSg=;
        b=FoDVoUjQQFUepefO8dYdprUZgtzj9RDIhl7RyFs9vuSqzVV+4Mfz1rGCPusfNSzS1u
         SY1nL/68YzW5mO7WUmoQbIRSpbBB+dQKp+GGYH1yyEO2CXM77BSn6o/cnimY0Aj17ttO
         +xb9C7oWt7nU8NqMJrSZo2ba7FSLF6UxRbj/M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=vfFzPu9reQqSC71YQnaFEhL1Aouexr4UzKbABXHfNAkCzcgK4UcL5u6SHD7jnd0h0t
         Yl/RySYwrDiCxMgIv0odlthwTaTwqgm5tYTQlYBgkQhAEDyiVSr4vyNfM7Wh0+rTn4Ct
         EV1MRgnFVnSNUty8m/q7LA4P+Umi3p8XE1O0E=
MIME-Version: 1.0
Received: by 10.231.146.79 with SMTP id g15mr6008454ibv.49.1265538777150; Sun, 
	07 Feb 2010 02:32:57 -0800 (PST)
In-Reply-To: <001601caa73a$ac403030$04c09090$@de>
References: <f1cb36b91002060527l40aa0cd8vcaf6c2cf647d6611@mail.gmail.com> 
	<001601caa73a$ac403030$04c09090$@de>
From: Rohit Banga <iamrohitbanga@gmail.com>
Date: Sun, 7 Feb 2010 16:02:37 +0530
Message-ID: <f1cb36b91002070232t1992bbact52c3d6ab37a831e1@mail.gmail.com>
Subject: Re: hit highlighting in lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e647601e42f8bc047f00355c

--0016e647601e42f8bc047f00355c
Content-Type: text/plain; charset=ISO-8859-1

but what about the case in which i am using fuzzy query matching. then the
highlighter package does not work.

On Sat, Feb 6, 2010 at 8:12 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> There are two contrib packages for highlighting in the lucene distribution:
> highlighter and fast-vector-highlighter
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Rohit Banga [mailto:iamrohitbanga@gmail.com]
> > Sent: Saturday, February 06, 2010 2:27 PM
> > To: java-user@lucene.apache.org
> > Subject: hit highlighting in lucene
> >
> > Hi friends
> >
> > I have just started using lucene and the way i want to use it is the
> > following:
> >
> > i have documents consisting of names of users as one field.
> > i have a sentence that may contain the name of some user.
> > i perform a search for the sentence in the index using the searcher.
> > if it contains the name of the user, then that user's document is
> > listed on
> > top by lucene.
> >
> > now i want to determine the position in the sentence where the string
> > has
> > been found.
> >
> > i am using fuzzy query matching by adding the character '~' to the
> > sentence
> > i am searching.
> > so this means i cannot use the find function of the String class as is
> > to
> > get the position of the match.
> >
> > Thanks in advance
> >
> > --
> > Rohit Banga
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Rohit Banga

--0016e647601e42f8bc047f00355c--

From java-user-return-44898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 07 10:41:55 2010
Return-Path: <java-user-return-44898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19027 invoked from network); 7 Feb 2010 10:41:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Feb 2010 10:41:55 -0000
Received: (qmail 29823 invoked by uid 500); 7 Feb 2010 10:41:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29739 invoked by uid 500); 7 Feb 2010 10:41:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29729 invoked by uid 99); 7 Feb 2010 10:41:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 10:41:52 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 10:41:43 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 1447245FD03
	for <java-user@lucene.apache.org>; Sun,  7 Feb 2010 11:41:20 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id SIVeaOZ4I4hR for <java-user@lucene.apache.org>;
	Sun,  7 Feb 2010 11:41:08 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 4E19045FCDC
	for <java-user@lucene.apache.org>; Sun,  7 Feb 2010 11:41:08 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <f1cb36b91002060527l40aa0cd8vcaf6c2cf647d6611@mail.gmail.com> 	<001601caa73a$ac403030$04c09090$@de> <f1cb36b91002070232t1992bbact52c3d6ab37a831e1@mail.gmail.com>
In-Reply-To: <f1cb36b91002070232t1992bbact52c3d6ab37a831e1@mail.gmail.com>
Subject: RE: hit highlighting in lucene
Date: Sun, 7 Feb 2010 11:41:28 +0100
Message-ID: <000a01caa7e2$1abc8390$50358ab0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-index: Acqn4QSXLcmJm6aATJ2NtPbqXfbr9AAAQ3XA
Content-language: de

It works.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Rohit Banga [mailto:iamrohitbanga@gmail.com]
> Sent: Sunday, February 07, 2010 11:33 AM
> To: java-user@lucene.apache.org
> Subject: Re: hit highlighting in lucene
> 
> but what about the case in which i am using fuzzy query matching. then
> the
> highlighter package does not work.
> 
> On Sat, Feb 6, 2010 at 8:12 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
> 
> > There are two contrib packages for highlighting in the lucene
> distribution:
> > highlighter and fast-vector-highlighter
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> > > -----Original Message-----
> > > From: Rohit Banga [mailto:iamrohitbanga@gmail.com]
> > > Sent: Saturday, February 06, 2010 2:27 PM
> > > To: java-user@lucene.apache.org
> > > Subject: hit highlighting in lucene
> > >
> > > Hi friends
> > >
> > > I have just started using lucene and the way i want to use it is
> the
> > > following:
> > >
> > > i have documents consisting of names of users as one field.
> > > i have a sentence that may contain the name of some user.
> > > i perform a search for the sentence in the index using the
> searcher.
> > > if it contains the name of the user, then that user's document is
> > > listed on
> > > top by lucene.
> > >
> > > now i want to determine the position in the sentence where the
> string
> > > has
> > > been found.
> > >
> > > i am using fuzzy query matching by adding the character '~' to the
> > > sentence
> > > i am searching.
> > > so this means i cannot use the find function of the String class as
> is
> > > to
> > > get the position of the match.
> > >
> > > Thanks in advance
> > >
> > > --
> > > Rohit Banga
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> --
> Rohit Banga


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 07 10:53:20 2010
Return-Path: <java-user-return-44899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21320 invoked from network); 7 Feb 2010 10:53:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Feb 2010 10:53:20 -0000
Received: (qmail 35847 invoked by uid 500); 7 Feb 2010 10:53:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35760 invoked by uid 500); 7 Feb 2010 10:53:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35750 invoked by uid 99); 7 Feb 2010 10:53:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 10:53:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.225 as permitted sender)
Received: from [209.85.220.225] (HELO mail-fx0-f225.google.com) (209.85.220.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 10:53:08 +0000
Received: by fxm25 with SMTP id 25so2848879fxm.32
        for <java-user@lucene.apache.org>; Sun, 07 Feb 2010 02:52:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=pxSU9Vpf/wUe1HbHApv4ujPRUD/TpyQF+dhwdIwJAog=;
        b=J31u5w7UlfXGtWfsDHB86ZGhg+K28HEPRT0U3NMV3DW+jtTXrRtcV2BWsjdia7ehdb
         URZKjqWKwFktWXvmteRardNHcdodrmSeneNyidd/Qmgfnj3ea8KOLqaAZR6ck5Bvw0AO
         LQSuQEc+t/5ROPqpjyU5asCWPuNEgQ7vKZ8r4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=LQcXUo/kswdZfkSUUE6QGCyBeEfxjXHGf7s90lJw3uNL+OM2eMXDA1iMdvc4VVCAkg
         gDpkjyVvwz6Vwyj8Jay3ZeJL9+yAZ+yJji+L0S/heiNbtO5FpIckbhsypwZWV4j2XZDN
         qn7+T/sJv8q8SMXLUbaZE517Fp8RqNkvEBVLQ=
MIME-Version: 1.0
Received: by 10.239.151.74 with SMTP id q10mr547968hbb.202.1265539966445; Sun, 
	07 Feb 2010 02:52:46 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <f1cb36b91002070232t1992bbact52c3d6ab37a831e1@mail.gmail.com>
References: <f1cb36b91002060527l40aa0cd8vcaf6c2cf647d6611@mail.gmail.com>
	 <001601caa73a$ac403030$04c09090$@de>
	 <f1cb36b91002070232t1992bbact52c3d6ab37a831e1@mail.gmail.com>
Date: Sun, 7 Feb 2010 11:52:46 +0100
Message-ID: <f18c9dde1002070252h4476af19tced8c56a2ad4d128@mail.gmail.com>
Subject: Re: hit highlighting in lucene
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Rohit,
what kind of problems are you facing with using fuzzy query and highlighting.
could you give us more details and maybe a small code snipped which
isolates you problem?

simon

On Sun, Feb 7, 2010 at 11:32 AM, Rohit Banga <iamrohitbanga@gmail.com> wrote:
> but what about the case in which i am using fuzzy query matching. then the
> highlighter package does not work.
>
> On Sat, Feb 6, 2010 at 8:12 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
>
>> There are two contrib packages for highlighting in the lucene distribution:
>> highlighter and fast-vector-highlighter
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>
>> > -----Original Message-----
>> > From: Rohit Banga [mailto:iamrohitbanga@gmail.com]
>> > Sent: Saturday, February 06, 2010 2:27 PM
>> > To: java-user@lucene.apache.org
>> > Subject: hit highlighting in lucene
>> >
>> > Hi friends
>> >
>> > I have just started using lucene and the way i want to use it is the
>> > following:
>> >
>> > i have documents consisting of names of users as one field.
>> > i have a sentence that may contain the name of some user.
>> > i perform a search for the sentence in the index using the searcher.
>> > if it contains the name of the user, then that user's document is
>> > listed on
>> > top by lucene.
>> >
>> > now i want to determine the position in the sentence where the string
>> > has
>> > been found.
>> >
>> > i am using fuzzy query matching by adding the character '~' to the
>> > sentence
>> > i am searching.
>> > so this means i cannot use the find function of the String class as is
>> > to
>> > get the position of the match.
>> >
>> > Thanks in advance
>> >
>> > --
>> > Rohit Banga
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Rohit Banga
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 07 10:59:23 2010
Return-Path: <java-user-return-44900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22125 invoked from network); 7 Feb 2010 10:59:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Feb 2010 10:59:23 -0000
Received: (qmail 40256 invoked by uid 500); 7 Feb 2010 10:59:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40202 invoked by uid 500); 7 Feb 2010 10:59:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40192 invoked by uid 99); 7 Feb 2010 10:59:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 10:59:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of iamrohitbanga@gmail.com designates 209.85.223.200 as permitted sender)
Received: from [209.85.223.200] (HELO mail-iw0-f200.google.com) (209.85.223.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 10:59:10 +0000
Received: by iwn38 with SMTP id 38so5605204iwn.11
        for <java-user@lucene.apache.org>; Sun, 07 Feb 2010 02:58:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=UGyMw3AjGhAYFH4BTO4s8GdPt6pfuMgz898tspi/dc4=;
        b=YjLWOyKyYNCP8tEvwtZ+gD167RS/jTzBxkBiHOMJddWE09vNpVM8ojAmOAXFKKTyLQ
         IZoxu+3Zo1gnyX3i6ai1vTkK6ol4/u74y4epxfqpC9iF/tbNdSRRvLedlEgRm9n2EZOg
         98n78hF1jGcwUttR+Bt138nLEP4foH/kxua0A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=mrPj2UBxlZte3RTswmraKBWLW8bTlctHfSrXJjpWsrS+l+qe9/+qszrSAXh/M82DpS
         aZC+b8Xi8SCgWQQFPkzmzCnqb248z/xIg+QJ19K8Pi2F2oqLvz7BsSo5+UsY1pJn9rcb
         Ls+s3TYT7nPEt39W3u9GIw0qmAq5BgvsoZqaY=
MIME-Version: 1.0
Received: by 10.231.144.201 with SMTP id a9mr1176672ibv.69.1265540329131; Sun, 
	07 Feb 2010 02:58:49 -0800 (PST)
In-Reply-To: <f18c9dde1002070252h4476af19tced8c56a2ad4d128@mail.gmail.com>
References: <f1cb36b91002060527l40aa0cd8vcaf6c2cf647d6611@mail.gmail.com> 
	<001601caa73a$ac403030$04c09090$@de> <f1cb36b91002070232t1992bbact52c3d6ab37a831e1@mail.gmail.com> 
	<f18c9dde1002070252h4476af19tced8c56a2ad4d128@mail.gmail.com>
From: Rohit Banga <iamrohitbanga@gmail.com>
Date: Sun, 7 Feb 2010 16:28:29 +0530
Message-ID: <f1cb36b91002070258x7bb4d6ddhdac29e4c56f4a17f@mail.gmail.com>
Subject: Re: hit highlighting in lucene
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: multipart/alternative; boundary=001485e9a9e2c45133047f0091a2
X-Virus-Checked: Checked by ClamAV on apache.org

--001485e9a9e2c45133047f0091a2
Content-Type: text/plain; charset=ISO-8859-1

    // list of cities that has been indexed
    // each city name is a document
    public static final String[] names = {"New Delhi", "Bangalore",
"Hyderabad",
                                          "Mumbai", "Chennai", "Kolkata",
"Ahmedabad",
                                          "Kanpur", "Guwahati", "Roorkee",
"Dehradun",
                                          "Lucknow", "Bhopal", "Jaipur",
"Jodhpur",
                                          "Thiruvanthapuram", "Jammu",
"Srinagar",
                                          "Raipur", "Pathankot", "Meerut",
"Muzaffarnagar",
                                          "Agra", "Jhansi", "Gandhinagar",
"Nasik", "Nagpur",
                                          "Calicut", "Trichi", "Bharatpur",
"Nainital"
                                         };

    // i am using the standard analyzer
    void highLightWords(String qStr) throws Exception {

        Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_CURRENT);
        TokenStream stream = analyzer.tokenStream("name", new
StringReader(qStr));

        TermQuery tq = new TermQuery(new Term("name","mumbai"));
        QueryScorer scorer = new QueryScorer(tq);
        Highlighter highlighter = new Highlighter(scorer);

        String fragment = highlighter.getBestFragment(stream, qStr);
        System.out.println("\nfragment found: " + fragment);
    }


// invoking the above function
luceneTest.highLightWords("some unimportant text here Mumbai some
unimportant text there~");
fragment found: some unimportant text here <B>Mumbai</B> some unimportant
text there~

but when i change mumbai to mumbhai
then while searching lucene does return hits for the correct document the
fragment is not found by the above function.

luceneTest.highLightWords("some unimportant text here Mumbhai some
unimportant text there~");
fragment is null.

On Sun, Feb 7, 2010 at 4:22 PM, Simon Willnauer <
simon.willnauer@googlemail.com> wrote:

> Rohit,
> what kind of problems are you facing with using fuzzy query and
> highlighting.
> could you give us more details and maybe a small code snipped which
> isolates you problem?
>
> simon
>
> On Sun, Feb 7, 2010 at 11:32 AM, Rohit Banga <iamrohitbanga@gmail.com>
> wrote:
> > but what about the case in which i am using fuzzy query matching. then
> the
> > highlighter package does not work.
> >
> > On Sat, Feb 6, 2010 at 8:12 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
> >
> >> There are two contrib packages for highlighting in the lucene
> distribution:
> >> highlighter and fast-vector-highlighter
> >>
> >> -----
> >> Uwe Schindler
> >> H.-H.-Meier-Allee 63, D-28213 Bremen
> >> http://www.thetaphi.de
> >> eMail: uwe@thetaphi.de
> >>
> >>
> >> > -----Original Message-----
> >> > From: Rohit Banga [mailto:iamrohitbanga@gmail.com]
> >> > Sent: Saturday, February 06, 2010 2:27 PM
> >> > To: java-user@lucene.apache.org
> >> > Subject: hit highlighting in lucene
> >> >
> >> > Hi friends
> >> >
> >> > I have just started using lucene and the way i want to use it is the
> >> > following:
> >> >
> >> > i have documents consisting of names of users as one field.
> >> > i have a sentence that may contain the name of some user.
> >> > i perform a search for the sentence in the index using the searcher.
> >> > if it contains the name of the user, then that user's document is
> >> > listed on
> >> > top by lucene.
> >> >
> >> > now i want to determine the position in the sentence where the string
> >> > has
> >> > been found.
> >> >
> >> > i am using fuzzy query matching by adding the character '~' to the
> >> > sentence
> >> > i am searching.
> >> > so this means i cannot use the find function of the String class as is
> >> > to
> >> > get the position of the match.
> >> >
> >> > Thanks in advance
> >> >
> >> > --
> >> > Rohit Banga
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > --
> > Rohit Banga
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Rohit Banga

--001485e9a9e2c45133047f0091a2--

From java-user-return-44901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 07 11:15:07 2010
Return-Path: <java-user-return-44901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24460 invoked from network); 7 Feb 2010 11:15:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Feb 2010 11:15:07 -0000
Received: (qmail 48576 invoked by uid 500); 7 Feb 2010 11:15:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48516 invoked by uid 500); 7 Feb 2010 11:15:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48506 invoked by uid 99); 7 Feb 2010 11:15:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 11:15:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.225 as permitted sender)
Received: from [209.85.220.225] (HELO mail-fx0-f225.google.com) (209.85.220.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 11:14:53 +0000
Received: by fxm25 with SMTP id 25so2862896fxm.32
        for <java-user@lucene.apache.org>; Sun, 07 Feb 2010 03:14:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=lAM/c35foxQebsLfTQrjwKeha2lI7KhQdcOOqkNciLM=;
        b=VTIApEhY86RdqQtCC299e4QyNR1DQ37pjK6M5TQbDYaeMozKHvwqtODYKldow95yPy
         idbIzDYE2WY5W8/F2Zhtj0nmJLV7hC1+yZ+KgBCnVSYSGvAqETZOxEKtk8M18bSfrz0Y
         uII17XQe1df33F/s5cJlZQaq7Z5TtxHlC7Guo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:cc:content-type:content-transfer-encoding;
        b=Dq9B9qTMUy4oYWlCrPlA2bFwXYX9NsT/rBq2LbRcbt34CwHmr5/BuuP2jywEatwmad
         EMaSUtycU3QJ8aJ1CPVfeWBWxEkjWJnCKaUSUnSX7aorx+8BzgSZUxC+GsclzisEln4B
         L4RLBBKX+r3muGa9mpapkiLKxIwwJ7yQCGVvA=
MIME-Version: 1.0
Received: by 10.239.164.82 with SMTP id s18mr546073hbd.48.1265541272963; Sun, 
	07 Feb 2010 03:14:32 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <f1cb36b91002070258x7bb4d6ddhdac29e4c56f4a17f@mail.gmail.com>
References: <f1cb36b91002060527l40aa0cd8vcaf6c2cf647d6611@mail.gmail.com>
	 <001601caa73a$ac403030$04c09090$@de>
	 <f1cb36b91002070232t1992bbact52c3d6ab37a831e1@mail.gmail.com>
	 <f18c9dde1002070252h4476af19tced8c56a2ad4d128@mail.gmail.com>
	 <f1cb36b91002070258x7bb4d6ddhdac29e4c56f4a17f@mail.gmail.com>
Date: Sun, 7 Feb 2010 12:14:32 +0100
Message-ID: <f18c9dde1002070314k56d1aecidb713a4c4066a4f4@mail.gmail.com>
Subject: Re: hit highlighting in lucene
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: Rohit Banga <iamrohitbanga@gmail.com>
Cc: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

try
      Query tq =3D new FuzzyQuery(new Term("name","mumbai"));
instead of
      TermQuery tq =3D new TermQuery(new Term("name","mumbai"));

simon

On Sun, Feb 7, 2010 at 11:58 AM, Rohit Banga <iamrohitbanga@gmail.com> wrot=
e:
>
> =C2=A0=C2=A0=C2=A0 // list of cities that has been indexed
> =C2=A0=C2=A0=C2=A0 // each city name is a document
> =C2=A0=C2=A0=C2=A0 public static final String[] names =3D {"New Delhi", "=
Bangalore",
> "Hyderabad",
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0 "Mumbai", "Chennai", "Kolkata",
> "Ahmedabad",
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0 "Kanpur", "Guwahati", "Roorkee",
> "Dehradun",
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0 "Lucknow", "Bhopal", "Jaipur",
> "Jodhpur",
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0 "Thiruvanthapuram", "Jammu",
> "Srinagar",
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0 "Raipur", "Pathankot", "Meerut",
> "Muzaffarnagar",
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0 "Agra", "Jhansi", "Gandhinagar",
> "Nasik", "Nagpur",
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0 "Calicut", "Trichi", "Bharatpur",
> "Nainital"
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0 };
>
> =C2=A0=C2=A0=C2=A0 // i am using the standard analyzer
> =C2=A0=C2=A0=C2=A0 void highLightWords(String qStr) throws Exception {
>
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0 Analyzer analyzer =3D new Stan=
dardAnalyzer(Version.LUCENE_CURRENT);
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0 TokenStream stream =3D analyze=
r.tokenStream("name", new
> StringReader(qStr));
>
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0 TermQuery tq =3D new TermQuery=
(new Term("name","mumbai"));
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0 QueryScorer scorer =3D new Que=
ryScorer(tq);
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0 Highlighter highlighter =3D ne=
w Highlighter(scorer);
>
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0 String fragment =3D highlighte=
r.getBestFragment(stream, qStr);
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0 System.out.println("\nfragment=
 found: " + fragment);
> =C2=A0=C2=A0=C2=A0 }
>
>
> // invoking the above function
> luceneTest.highLightWords("some unimportant text here Mumbai some
> unimportant text there~");
> fragment found: some unimportant text here <B>Mumbai</B> some unimportant
> text there~
>
> but when i change mumbai to mumbhai
> then while searching lucene does return hits for the correct document the
> fragment is not found by the above function.
>
> luceneTest.highLightWords("some unimportant text here Mumbhai some
> unimportant text there~");
> fragment is null.
>
> On Sun, Feb 7, 2010 at 4:22 PM, Simon Willnauer
> <simon.willnauer@googlemail.com> wrote:
>>
>> Rohit,
>> what kind of problems are you facing with using fuzzy query and
>> highlighting.
>> could you give us more details and maybe a small code snipped which
>> isolates you problem?
>>
>> simon
>>
>> On Sun, Feb 7, 2010 at 11:32 AM, Rohit Banga <iamrohitbanga@gmail.com>
>> wrote:
>> > but what about the case in which i am using fuzzy query matching. then
>> > the
>> > highlighter package does not work.
>> >
>> > On Sat, Feb 6, 2010 at 8:12 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
>> >
>> >> There are two contrib packages for highlighting in the lucene
>> >> distribution:
>> >> highlighter and fast-vector-highlighter
>> >>
>> >> -----
>> >> Uwe Schindler
>> >> H.-H.-Meier-Allee 63, D-28213 Bremen
>> >> http://www.thetaphi.de
>> >> eMail: uwe@thetaphi.de
>> >>
>> >>
>> >> > -----Original Message-----
>> >> > From: Rohit Banga [mailto:iamrohitbanga@gmail.com]
>> >> > Sent: Saturday, February 06, 2010 2:27 PM
>> >> > To: java-user@lucene.apache.org
>> >> > Subject: hit highlighting in lucene
>> >> >
>> >> > Hi friends
>> >> >
>> >> > I have just started using lucene and the way i want to use it is th=
e
>> >> > following:
>> >> >
>> >> > i have documents consisting of names of users as one field.
>> >> > i have a sentence that may contain the name of some user.
>> >> > i perform a search for the sentence in the index using the searcher=
.
>> >> > if it contains the name of the user, then that user's document is
>> >> > listed on
>> >> > top by lucene.
>> >> >
>> >> > now i want to determine the position in the sentence where the stri=
ng
>> >> > has
>> >> > been found.
>> >> >
>> >> > i am using fuzzy query matching by adding the character '~' to the
>> >> > sentence
>> >> > i am searching.
>> >> > so this means i cannot use the find function of the String class as
>> >> > is
>> >> > to
>> >> > get the position of the match.
>> >> >
>> >> > Thanks in advance
>> >> >
>> >> > --
>> >> > Rohit Banga
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>> > --
>> > Rohit Banga
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> --
> Rohit Banga
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 07 12:13:08 2010
Return-Path: <java-user-return-44902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31428 invoked from network); 7 Feb 2010 12:13:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Feb 2010 12:13:08 -0000
Received: (qmail 65519 invoked by uid 500); 7 Feb 2010 12:13:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65448 invoked by uid 500); 7 Feb 2010 12:13:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65438 invoked by uid 99); 7 Feb 2010 12:13:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 12:13:06 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of iamrohitbanga@gmail.com designates 209.85.223.200 as permitted sender)
Received: from [209.85.223.200] (HELO mail-iw0-f200.google.com) (209.85.223.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 12:12:57 +0000
Received: by iwn38 with SMTP id 38so5635036iwn.11
        for <java-user@lucene.apache.org>; Sun, 07 Feb 2010 04:12:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:cc:content-type;
        bh=HDLHPYnK7+z3E9ZEzu+rmNkfQCGO8nki/Q1m2fC2Clw=;
        b=WAgFBQ5MQuce/1DFGdiWHWc+JD3tHldlaZCwXXprtheNA0JrOlsbwOWptEcUVDrkGk
         A0rtlBLZbXJ/oQ/CoLb+cAJP8xcZl3VZroHHBE4nfRGV3NvPdWtp98XEuOF17NdX77jl
         NfrfSNdfLPojLFruOoub6IRjmZCgP2BiGtZbM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        b=o1IvzJNlyRDbiFjdHZ7e+mKWsO148BiXn9OQShMY1k+QCGAeeUuyAWuOO3vPAqcqhd
         SlOFCYq0lKfldmh1Mb4ERvYnf0+0WBab7XZpoTMH5wSeSmg1yrmYaGtcdaab0rzVpPsJ
         w2/7N9cJbyNt4rAt7y+cOsdYwL7RvUNJDX4ss=
MIME-Version: 1.0
Received: by 10.231.191.135 with SMTP id dm7mr3519252ibb.46.1265544757113; 
	Sun, 07 Feb 2010 04:12:37 -0800 (PST)
In-Reply-To: <f18c9dde1002070314k56d1aecidb713a4c4066a4f4@mail.gmail.com>
References: <f1cb36b91002060527l40aa0cd8vcaf6c2cf647d6611@mail.gmail.com> 
	<001601caa73a$ac403030$04c09090$@de> <f1cb36b91002070232t1992bbact52c3d6ab37a831e1@mail.gmail.com> 
	<f18c9dde1002070252h4476af19tced8c56a2ad4d128@mail.gmail.com> 
	<f1cb36b91002070258x7bb4d6ddhdac29e4c56f4a17f@mail.gmail.com> 
	<f18c9dde1002070314k56d1aecidb713a4c4066a4f4@mail.gmail.com>
From: Rohit Banga <iamrohitbanga@gmail.com>
Date: Sun, 7 Feb 2010 17:42:17 +0530
Message-ID: <f1cb36b91002070412o58700888lfd21086630e08dac@mail.gmail.com>
Subject: Re: hit highlighting in lucene
To: simon.willnauer@gmail.com
Cc: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367b6f6ab1f334047f0199eb

--0016367b6f6ab1f334047f0199eb
Content-Type: text/plain; charset=ISO-8859-1

it works!!! :)

could you also offer a suggestion for the following?

please have a look at the code above. it contains a list of cities that have
been added to the index.

// this is the code for indexing
    void indexCities() throws Exception {

        IndexWriter writer = new
IndexWriter(FSDirectory.open(index_directory),
                                new
StandardAnalyzer(Version.LUCENE_CURRENT), true,
                                IndexWriter.MaxFieldLength.LIMITED);

        for (int i = 0; i < names.length; ++i) {
            Document doc = new Document();
            doc.add(new Field("name", names[i], Field.Store.YES,
Field.Index.ANALYZED));
            writer.addDocument(doc);
        }

        writer.optimize();
        writer.close();
    }

if i try
TermQuery tq = new FuzzyQuery(new Term("name","new delhi"));

i get a null because new and delhi are considered separately.

how should i change the analyzer to consider new delhi as a single term.
basically i am using lucene to find the names of all cities in the string.
because their may be spelling mistakes fuzzy matching works. that is i get
that the document with the closest matching city name as a top hit.
but since i also want to identify where in the query the match occurred, i
am using a hit highlighter. do i need to modify my analyzer to group new and
delhi into a phrase.

sorry for the noob question :(



On Sun, Feb 7, 2010 at 4:44 PM, Simon Willnauer <
simon.willnauer@googlemail.com> wrote:

> try
>      Query tq = new FuzzyQuery(new Term("name","mumbai"));
> instead of
>       TermQuery tq = new TermQuery(new Term("name","mumbai"));
>
> simon
>
> On Sun, Feb 7, 2010 at 11:58 AM, Rohit Banga <iamrohitbanga@gmail.com>
> wrote:
> >
> >     // list of cities that has been indexed
> >     // each city name is a document
> >     public static final String[] names = {"New Delhi", "Bangalore",
> > "Hyderabad",
> >                                           "Mumbai", "Chennai", "Kolkata",
> > "Ahmedabad",
> >                                           "Kanpur", "Guwahati",
> "Roorkee",
> > "Dehradun",
> >                                           "Lucknow", "Bhopal", "Jaipur",
> > "Jodhpur",
> >                                           "Thiruvanthapuram", "Jammu",
> > "Srinagar",
> >                                           "Raipur", "Pathankot",
> "Meerut",
> > "Muzaffarnagar",
> >                                           "Agra", "Jhansi",
> "Gandhinagar",
> > "Nasik", "Nagpur",
> >                                           "Calicut", "Trichi",
> "Bharatpur",
> > "Nainital"
> >                                          };
> >
> >     // i am using the standard analyzer
> >     void highLightWords(String qStr) throws Exception {
> >
> >         Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_CURRENT);
> >         TokenStream stream = analyzer.tokenStream("name", new
> > StringReader(qStr));
> >
> >         TermQuery tq = new TermQuery(new Term("name","mumbai"));
> >         QueryScorer scorer = new QueryScorer(tq);
> >         Highlighter highlighter = new Highlighter(scorer);
> >
> >         String fragment = highlighter.getBestFragment(stream, qStr);
> >         System.out.println("\nfragment found: " + fragment);
> >     }
> >
> >
> > // invoking the above function
> > luceneTest.highLightWords("some unimportant text here Mumbai some
> > unimportant text there~");
> > fragment found: some unimportant text here <B>Mumbai</B> some unimportant
> > text there~
> >
> > but when i change mumbai to mumbhai
> > then while searching lucene does return hits for the correct document the
> > fragment is not found by the above function.
> >
> > luceneTest.highLightWords("some unimportant text here Mumbhai some
> > unimportant text there~");
> > fragment is null.
> >
> > On Sun, Feb 7, 2010 at 4:22 PM, Simon Willnauer
> > <simon.willnauer@googlemail.com> wrote:
> >>
> >> Rohit,
> >> what kind of problems are you facing with using fuzzy query and
> >> highlighting.
> >> could you give us more details and maybe a small code snipped which
> >> isolates you problem?
> >>
> >> simon
> >>
> >> On Sun, Feb 7, 2010 at 11:32 AM, Rohit Banga <iamrohitbanga@gmail.com>
> >> wrote:
> >> > but what about the case in which i am using fuzzy query matching. then
> >> > the
> >> > highlighter package does not work.
> >> >
> >> > On Sat, Feb 6, 2010 at 8:12 PM, Uwe Schindler <uwe@thetaphi.de>
> wrote:
> >> >
> >> >> There are two contrib packages for highlighting in the lucene
> >> >> distribution:
> >> >> highlighter and fast-vector-highlighter
> >> >>
> >> >> -----
> >> >> Uwe Schindler
> >> >> H.-H.-Meier-Allee 63, D-28213 Bremen
> >> >> http://www.thetaphi.de
> >> >> eMail: uwe@thetaphi.de
> >> >>
> >> >>
> >> >> > -----Original Message-----
> >> >> > From: Rohit Banga [mailto:iamrohitbanga@gmail.com]
> >> >> > Sent: Saturday, February 06, 2010 2:27 PM
> >> >> > To: java-user@lucene.apache.org
> >> >> > Subject: hit highlighting in lucene
> >> >> >
> >> >> > Hi friends
> >> >> >
> >> >> > I have just started using lucene and the way i want to use it is
> the
> >> >> > following:
> >> >> >
> >> >> > i have documents consisting of names of users as one field.
> >> >> > i have a sentence that may contain the name of some user.
> >> >> > i perform a search for the sentence in the index using the
> searcher.
> >> >> > if it contains the name of the user, then that user's document is
> >> >> > listed on
> >> >> > top by lucene.
> >> >> >
> >> >> > now i want to determine the position in the sentence where the
> string
> >> >> > has
> >> >> > been found.
> >> >> >
> >> >> > i am using fuzzy query matching by adding the character '~' to the
> >> >> > sentence
> >> >> > i am searching.
> >> >> > so this means i cannot use the find function of the String class as
> >> >> > is
> >> >> > to
> >> >> > get the position of the match.
> >> >> >
> >> >> > Thanks in advance
> >> >> >
> >> >> > --
> >> >> > Rohit Banga
> >> >>
> >> >>
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >> >
> >> > --
> >> > Rohit Banga
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> >
> >
> > --
> > Rohit Banga
> >
>



-- 
Rohit Banga

--0016367b6f6ab1f334047f0199eb--

From java-user-return-44903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 07 15:37:28 2010
Return-Path: <java-user-return-44903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84161 invoked from network); 7 Feb 2010 15:37:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Feb 2010 15:37:27 -0000
Received: (qmail 33733 invoked by uid 500); 7 Feb 2010 15:37:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33663 invoked by uid 500); 7 Feb 2010 15:37:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33653 invoked by uid 99); 7 Feb 2010 15:37:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 15:37:25 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of thienthanhomenh@gmail.com designates 209.85.221.180 as permitted sender)
Received: from [209.85.221.180] (HELO mail-qy0-f180.google.com) (209.85.221.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 15:37:18 +0000
Received: by qyk10 with SMTP id 10so934206qyk.4
        for <java-user@lucene.apache.org>; Sun, 07 Feb 2010 07:36:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=n7PBpld3OdYdpQt7DdMzRuLum4DEWI4X5iSBjagT3uE=;
        b=agNWSKyQZyCttHyi/KDmJS4SGnUbMu3wAAtNRbSTYeVi6itGa3bHkStsuJTsz8jlcd
         lUfRFmjOQvvZ21TOdOuEc4225cuKYDha6O73TkKx062MykOgxKBTr4P7VuSa9SWm8uWE
         pwIJuL34dA+Ddq2aEdxnFQsyZLnyVBTDyqIiA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=E8aLfAECh329A8HLWz+NC7g/hN0udKZnvJxDUBUX0BFREHk/6CvrKKszwDZigQqCBg
         BzWLTAC5jmhXPnrAox0mIMhR6zGjK/BKZocV2vGXYHHobYi5qIb5kXNADz01bZVTeWbN
         mpe8wXNZRy6+wsi0066QKZ2KGmOe7G5ky1/Po=
MIME-Version: 1.0
Received: by 10.224.100.67 with SMTP id x3mr1960790qan.369.1265557018103; Sun, 
	07 Feb 2010 07:36:58 -0800 (PST)
From: Phan The Dai <thienthanhomenh@gmail.com>
Date: Mon, 8 Feb 2010 00:36:38 +0900
Message-ID: <3b23ce091002070736n40bacdd7x6cb53962edbe8af5@mail.gmail.com>
Subject: Recommend a example to implement an analyzer with parsing Camelcase
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000feae9b05181cf63047f047430

--000feae9b05181cf63047f047430
Content-Type: text/plain; charset=ISO-8859-1

Would you like to suggest me an example for implementing an analyzer with
parsing CamelCase !

I can overload methods with StopFilter PorterStemFilter, LowerCaseTokenizer
but with a new one different from these available filter I have not
solutions.
Thank you !

--000feae9b05181cf63047f047430--

From java-user-return-44904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 07 16:12:27 2010
Return-Path: <java-user-return-44904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88175 invoked from network); 7 Feb 2010 16:12:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Feb 2010 16:12:27 -0000
Received: (qmail 48867 invoked by uid 500); 7 Feb 2010 16:12:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48792 invoked by uid 500); 7 Feb 2010 16:12:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48782 invoked by uid 99); 7 Feb 2010 16:12:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 16:12:24 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.13] (HELO web52903.mail.re2.yahoo.com) (206.190.49.13)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 07 Feb 2010 16:12:16 +0000
Received: (qmail 17867 invoked by uid 60001); 7 Feb 2010 16:11:54 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1265559114; bh=9HG9DSDa0Y6L0IPlOwLUnuTfEfKGcC/E4Iucp+iTZNA=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=RmAYvIBJAxUhU5S7J74x3IXExU46xIZk4cVUhytGwH0JCoXihSLChP6ZYZAlsp3g803ZJMGsva6vgVf6YZ8hO2rzeMHojrwxpvF4aEhsvd/LwQR/CG3w2hhx902HvDDvu2+ARh5D6mkNpKISlyahH+53accrhm8uMDGwU5ShcuM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=U00sdx0BNXEV9wJab43JuSVVGY3yhuNKNQ422oRb7ewgp0DBGmLAsiYGw3d0JNY4Hdh8OlMVKR7Jw4AhaB7vAZBtOvxwQ69PAB7f4bSMlPS3IVcsJ9uUeQnkecD7QNyTdqDWI+NhgTDpNvz3aY46dWwGqLA1O3lfWGwKPQ4acH4=;
Message-ID: <588749.17406.qm@web52903.mail.re2.yahoo.com>
X-YMail-OSG: WUMdYO4VM1kP74zecpQ3cNikwoqNtVkyNM4f1lX6R_r49Z7efQu70L5RSPDHQqpddc9gVXp5ICknJ.zMIUPa9dF5NSNtANlTQ3WjJQtn1PL0Zf4k_eofPxw.E0VPGpFConSBZnztMqQa.M6ldkg_lyepR3sUWwej_2adViuAcVa95FFFjoHJlllw4JOpJofOvY4lQ2CmcdNNR25rvT8Qe12TK_aYAAE5MY0k4oG3doOXYvAYFlPSWfxc6c7AujPGT.VP88QcBkhcXpRF05oZ0vG1jCYjkV0NVd22xttC89J3_bJzoMIC3rP.ceE9QieOfAKpSZledLr0qoDiyHHV9vVUZdjWWZvaoPyEGSIdfahVvAuvzoA9VaUW.glZj55OxvnDTcbWlW.DalwdZUFnKUWpwF56MZb0p6NtCqSBqkgxr_ARwYXqJSxeLLE8v20aLBxiBhid
Received: from [78.168.189.43] by web52903.mail.re2.yahoo.com via HTTP; Sun, 07 Feb 2010 08:11:54 PST
X-Mailer: YahooMailClassic/9.1.10 YahooMailWebService/0.8.100.260964
Date: Sun, 7 Feb 2010 08:11:54 -0800 (PST)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Recommend a example to implement an analyzer with parsing Camelcase
To: java-user@lucene.apache.org
In-Reply-To: <3b23ce091002070736n40bacdd7x6cb53962edbe8af5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

> Would you like to suggest me an
> example for implementing an analyzer with
> parsing CamelCase !
> 
> I can overload methods with StopFilter PorterStemFilter,
> LowerCaseTokenizer
> but with a new one different from these available filter I
> have not
> solutions.
> Thank you !

You can use WordDelimiterFilterFactory[1] with splitOnCaseChange="1" 

[1]http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WordDelimiterFilterFactory

You need to consume it from solr artifacts.


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 07 16:19:34 2010
Return-Path: <java-user-return-44905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88953 invoked from network); 7 Feb 2010 16:19:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Feb 2010 16:19:34 -0000
Received: (qmail 52465 invoked by uid 500); 7 Feb 2010 16:19:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52392 invoked by uid 500); 7 Feb 2010 16:19:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52379 invoked by uid 99); 7 Feb 2010 16:19:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 16:19:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of thienthanhomenh@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 16:19:25 +0000
Received: by qw-out-2122.google.com with SMTP id 3so419517qwe.53
        for <java-user@lucene.apache.org>; Sun, 07 Feb 2010 08:19:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=XWYnut06fTOTrHboixIcUXwNJzLH9t3OislMriZBW/Q=;
        b=lW8sMror7ouStrG/a5423UDEarpADo1kqPIRJ2Wc1BPGIaRcS7iuHRCkfE7VzpsOC1
         JL/Is2VKOc1z7OSzwkShRG9srapCmjAqxt5f6tUqTxt07x+A9arxKJkM0tr1+R7uz9FJ
         Zhb03p2omlZIa5dlZ3s3aQfrzg0chIb4UBabU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=WcGMOhUjUQxzApPHDZtblRpV8pdg5K2OHDACUf/rjKFd65jJlSdIW3Wp3UT1swEXX1
         pmfb1KuP1NHBAKYjtMAkYzq7lZNcVpW9oLMDrKVZWuHKdJugJx3eFvUzn+ykpXSDVOy5
         1UnDuY9k1PxXoO9v+7PFBkDxknxUGvs1D0uv8=
MIME-Version: 1.0
Received: by 10.224.64.65 with SMTP id d1mr1215000qai.29.1265559544087; Sun, 
	07 Feb 2010 08:19:04 -0800 (PST)
In-Reply-To: <588749.17406.qm@web52903.mail.re2.yahoo.com>
References: <3b23ce091002070736n40bacdd7x6cb53962edbe8af5@mail.gmail.com> 
	<588749.17406.qm@web52903.mail.re2.yahoo.com>
From: Phan The Dai <thienthanhomenh@gmail.com>
Date: Mon, 8 Feb 2010 01:18:44 +0900
Message-ID: <3b23ce091002070818t69143cdaj1597392dff8c44d1@mail.gmail.com>
Subject: Re: Recommend a example to implement an analyzer with parsing 
	Camelcase
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64c07821144d9047f050b7c

--0016e64c07821144d9047f050b7c
Content-Type: text/plain; charset=ISO-8859-1

Hi Ahmet,
I have ever known WordDelimiterFilterFactory, but never use Solr.
But how to download this class.
Can I use it in Lucene 3.0, or extends Analyzer with overloading its
methods.
Sorry If my questions are too details.


On Mon, Feb 8, 2010 at 1:11 AM, Ahmet Arslan <iorixxx@yahoo.com> wrote:

> > Would you like to suggest me an
> > example for implementing an analyzer with
> > parsing CamelCase !
> >
> > I can overload methods with StopFilter PorterStemFilter,
> > LowerCaseTokenizer
> > but with a new one different from these available filter I
> > have not
> > solutions.
> > Thank you !
>
> You can use WordDelimiterFilterFactory[1] with splitOnCaseChange="1"
>
> [1]
> http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WordDelimiterFilterFactory
>
> You need to consume it from solr artifacts.
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64c07821144d9047f050b7c--

From java-user-return-44906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 07 16:38:26 2010
Return-Path: <java-user-return-44906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91467 invoked from network); 7 Feb 2010 16:38:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Feb 2010 16:38:26 -0000
Received: (qmail 65969 invoked by uid 500); 7 Feb 2010 16:38:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65889 invoked by uid 500); 7 Feb 2010 16:38:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65879 invoked by uid 99); 7 Feb 2010 16:38:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 16:38:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.44.33] (HELO n63.bullet.mail.sp1.yahoo.com) (98.136.44.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 07 Feb 2010 16:38:13 +0000
Received: from [216.252.122.219] by n63.bullet.mail.sp1.yahoo.com with NNFMP; 07 Feb 2010 16:37:53 -0000
Received: from [68.142.230.28] by t4.bullet.sp1.yahoo.com with NNFMP; 07 Feb 2010 16:37:53 -0000
Received: from [66.196.97.154] by t1.bullet.re2.yahoo.com with NNFMP; 07 Feb 2010 16:37:53 -0000
Received: from [127.0.0.1] by omp207.mail.re3.yahoo.com with NNFMP; 07 Feb 2010 16:37:53 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 269066.16875.bm@omp207.mail.re3.yahoo.com
Received: (qmail 17449 invoked by uid 60001); 7 Feb 2010 16:37:53 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1265560673; bh=ZMsRR87HZKP4zptraODA8qD13Hp/awqbOy+bdirKgwg=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=6si38WFdngyTe8l4ei3MZyGIb+DpKzywB84+w7UTH+4CwuF1BCOIhAuDSSvfhWEdVPDL9UbUxIyi4EK7lNJLOixs7yEi6EmnPP+JRs2m/Y63q27IVucclat0Z4idiVCwEeYmvHLeD8jMo4BngbqjYmnt52UIdm9NQOtje25i3Ws=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=rQEa9BbnnFZOoPMmvjR/IE9Db7a6CTcbPK32S1ogD2oqnegCtlNxxZNeFyZx5LdtIfwx8V3UjLINYsOwwT9dRyJRt7Bx1CSzEHmyTT3R5R7ZmjYRVg4m792FOQhzweK0n6Qkb2F1GFxvIhXQKtHtEXnx1hYc2Zn+UBFtXx0P+R0=;
Message-ID: <171605.17441.qm@web52908.mail.re2.yahoo.com>
X-YMail-OSG: EZKhaAoVM1mLW30ziNY0hTJJ1pwEgVP1YlVOvBjnL5kh5SAwQG_lnbMnmIL3RuvRy_gE7Z5KeyCyaz2CDs43KqmrOdyUXH9Nsa61uKRCZy8O8c5VNh4apymfdqpUEHvwIpt7VedSWcHdttmnH1POA7q_SldaUV9ejSQMhozoOnlIDoUCtDB.NPf4H.HdcXGy_o0mKJJCfTpsfO3MQwLWbR3Qlm.Y5rKy9BBlorDkdav8noMw3VaigY8RFjptswWS0LvouOdhr4urkuPkXbQTCwBWskvaEw1OOKK1IfmSEpDtMwE0TUHz2NPzfxqwjLUsOYwu1dW3XyygqH9Id4RhZ.ywOFQDJQO9QTcwXHzjwPdGg5J3EjK9fRYQJpptAyl4TKGRObd4haw6LxYowoPV8Ctobwxgck5wuXhbOWIpLM61ZhAcCtqZM_6LpooXnb6XviYV92qm
Received: from [78.168.189.43] by web52908.mail.re2.yahoo.com via HTTP; Sun, 07 Feb 2010 08:37:52 PST
X-Mailer: YahooMailClassic/9.1.10 YahooMailWebService/0.8.100.260964
Date: Sun, 7 Feb 2010 08:37:52 -0800 (PST)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Recommend a example to implement an analyzer with parsing  Camelcase
To: java-user@lucene.apache.org
In-Reply-To: <3b23ce091002070818t69143cdaj1597392dff8c44d1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


> Hi Ahmet,
> I have ever known WordDelimiterFilterFactory, but never use
> Solr.
> But how to download this class.

http://repo1.maven.org/maven2/org/apache/solr/solr-core/1.4.0/

> Can I use it in Lucene 3.0, or extends Analyzer with
> overloading its
> methods.

It is not using new token stream API yet, but you can use it. WordDelimiterFilter is package-private but you can use its factory as follows: 

Map<String, String> delimeterArgs = new HashMap<String, String>(9);

 delimeterArgs.put("generateWordParts", "1");
 delimeterArgs.put("generateNumberParts", "0");
 delimeterArgs.put("catenateWords", "0");
 delimeterArgs.put("catenateNumbers", "0");
 delimeterArgs.put("catenateAll", "0");
 delimeterArgs.put("splitOnCaseChange", "0");
 delimeterArgs.put("splitOnNumerics", "1");
 delimeterArgs.put("preserveOriginal", "1");
 delimeterArgs.put("stemEnglishPossessive", "0");

WordDelimiterFilterFactory wordDelimiterFactory = new WordDelimiterFilterFactory();

wordDelimiterFactory.init(delimeterArgs);

You can appned it to your analyzer chain:

result = wordDelimiterFactory.create(result);

Explanations of parameters are explained in the wiki.


      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 07 17:17:39 2010
Return-Path: <java-user-return-44907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98308 invoked from network); 7 Feb 2010 17:17:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Feb 2010 17:17:39 -0000
Received: (qmail 96345 invoked by uid 500); 7 Feb 2010 17:17:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96260 invoked by uid 500); 7 Feb 2010 17:17:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96250 invoked by uid 99); 7 Feb 2010 17:17:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 17:17:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of thienthanhomenh@gmail.com designates 209.85.221.180 as permitted sender)
Received: from [209.85.221.180] (HELO mail-qy0-f180.google.com) (209.85.221.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 17:17:27 +0000
Received: by qyk10 with SMTP id 10so959719qyk.4
        for <java-user@lucene.apache.org>; Sun, 07 Feb 2010 09:17:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=NxUvljXwBW5c2WwyFRFW7b8J0Oc3wprnnI6QQWkCAbI=;
        b=JFZic9jdkHx0xHqBMMAQZ+sNRmaCGde5YHrmY3v0rU6XmWB3k2C6iPGVmbQ2WgVjtr
         V3lXNExkYAEg9nThg1zBf/7aF/O2HG7a+2eY2ZqLhoZ8EFB8uX3apR3PXhxaB48Wa+mD
         rRnMReRXepzQkhnKdkANY7MxkSErIiFbrNHv4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=W6cmrMDFiWSW1ZftHOJL0SvY7pvok0vM09tNk1F8sMWX9S4zVwGjpw5pR8grC9yl5s
         9dYelJDi0zVx4jT4rEcSeN1L9596JS4upx3hUGsxGxa1LV6fkuAeRc1Rf2bAzCOv3Tx/
         Hqo5fXRpUOvO7O6pNyQlmA7Da7U8h//eRBJSk=
MIME-Version: 1.0
Received: by 10.224.41.75 with SMTP id n11mr2036534qae.11.1265563026143; Sun, 
	07 Feb 2010 09:17:06 -0800 (PST)
In-Reply-To: <171605.17441.qm@web52908.mail.re2.yahoo.com>
References: <3b23ce091002070818t69143cdaj1597392dff8c44d1@mail.gmail.com> 
	<171605.17441.qm@web52908.mail.re2.yahoo.com>
From: Phan The Dai <thienthanhomenh@gmail.com>
Date: Mon, 8 Feb 2010 02:16:45 +0900
Message-ID: <3b23ce091002070916n6024bca7mb0137a3339faa4bb@mail.gmail.com>
Subject: Re: Recommend a example to implement an analyzer with parsing 
	Camelcase
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000feaefba559d3c37047f05da3e
X-Virus-Checked: Checked by ClamAV on apache.org

--000feaefba559d3c37047f05da3e
Content-Type: text/plain; charset=ISO-8859-1

They are more details.
Thank you very much !

On Mon, Feb 8, 2010 at 1:37 AM, Ahmet Arslan <iorixxx@yahoo.com> wrote:

>
> > Hi Ahmet,
> > I have ever known WordDelimiterFilterFactory, but never use
> > Solr.
> > But how to download this class.
>
> http://repo1.maven.org/maven2/org/apache/solr/solr-core/1.4.0/
>
> > Can I use it in Lucene 3.0, or extends Analyzer with
> > overloading its
> > methods.
>
> It is not using new token stream API yet, but you can use it.
> WordDelimiterFilter is package-private but you can use its factory as
> follows:
>
> Map<String, String> delimeterArgs = new HashMap<String, String>(9);
>
>  delimeterArgs.put("generateWordParts", "1");
>  delimeterArgs.put("generateNumberParts", "0");
>  delimeterArgs.put("catenateWords", "0");
>  delimeterArgs.put("catenateNumbers", "0");
>  delimeterArgs.put("catenateAll", "0");
>  delimeterArgs.put("splitOnCaseChange", "0");
>  delimeterArgs.put("splitOnNumerics", "1");
>  delimeterArgs.put("preserveOriginal", "1");
>  delimeterArgs.put("stemEnglishPossessive", "0");
>
> WordDelimiterFilterFactory wordDelimiterFactory = new
> WordDelimiterFilterFactory();
>
> wordDelimiterFactory.init(delimeterArgs);
>
> You can appned it to your analyzer chain:
>
> result = wordDelimiterFactory.create(result);
>
> Explanations of parameters are explained in the wiki.
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000feaefba559d3c37047f05da3e--

From java-user-return-44908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 07 23:50:09 2010
Return-Path: <java-user-return-44908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8008 invoked from network); 7 Feb 2010 23:50:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Feb 2010 23:50:09 -0000
Received: (qmail 6704 invoked by uid 500); 7 Feb 2010 23:50:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6628 invoked by uid 500); 7 Feb 2010 23:50:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6618 invoked by uid 99); 7 Feb 2010 23:50:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Feb 2010 23:50:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.167.10] (HELO web113310.mail.gq1.yahoo.com) (98.136.167.10)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 07 Feb 2010 23:49:58 +0000
Received: (qmail 38203 invoked by uid 60001); 7 Feb 2010 23:49:37 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1265586577; bh=BcdBHPLxh0EO1EUzJ6VkYaSLEElnp99NLuQQYn2GVq4=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=FKZb3buAYJX+34W7+mMhpbsWPX4yW8vciLQUyjO+3toLCUsmYuajL07eqfuxmilx9xP1NbNcgosojeedyFy+mSjKqyh0icDLj/+S73rsalLhpmjMNIOFCaHGL014V/Hr+md8rSooUz5U7bO5/3SYq6OzrtOLicbwhsut5SzjmhM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=tm3fJ8VrmfdIgrKNeubCyShbjCpSYo28kthrDx+uJFMVMRu3IE4J0UjcROkwz7O/uB0cCph9qpMV/EcAQqd6l1aAaKJ2R8EeZSFhEDHpGLf0+UlLlfuCJpF0owPDDq/2YChjPdDGd7+JK8qyeoDrRzmMK8nZGS6AMOObnS1CrEk=;
Message-ID: <437571.36808.qm@web113310.mail.gq1.yahoo.com>
X-YMail-OSG: rkcFFicVM1lBkblhll2yE_UfAE5O.fJPC.q1DzBIQM5U_qB57UfMuH390RlG0uvL4eVFD9W5PHvOh_leuiyayqXyher5z1yw8NzevT7R9GF9XzrMQ_2vApwppsNuXlt38JLKBqYtEuwY_34yRVlCRp9DEIgK4l9ZWeIPqKdgCWsh8iHamHDqM1Z.4E5voTViXRXXIWyIeVH2KHz2m7e2KeLZwKQ9qsHkCXvQ7heSTLNeLHDXOaIp6600LobbIUbph1p_H69OHkuZrMNjKzikkJ4QTnt12nqJzv5XsbIO6NGFZNB6d_A1ldoDMVNCE1.5uRWH
Received: from [99.150.128.40] by web113310.mail.gq1.yahoo.com via HTTP; Sun, 07 Feb 2010 15:49:37 PST
X-Mailer: YahooMailClassic/9.1.10 YahooMailWebService/0.8.100.260964
Date: Sun, 7 Feb 2010 15:49:37 -0800 (PST)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: TREC Data and Topic-Specific Index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Robert, 

We are using TREC-3 data and Ad Hoc topics 151-200.  The relevance judgments list contains 97,319 entries, of which 68,559 are unique document ids.  The TIPSTER collection which was used in TREC-3 is around 750,000 documents.  

Should we (a) index the entire 750,000 document collection, or (b) the document collection of the 68,559 unique documents listed in the qrels, or (c) should we limit our index to each specific topic (about 2,000 docs) i.e. to the documents listed for a particular topic in the qrels?

Thanks,

Ivan


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 08 04:00:18 2010
Return-Path: <java-user-return-44909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70775 invoked from network); 8 Feb 2010 04:00:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Feb 2010 04:00:18 -0000
Received: (qmail 5211 invoked by uid 500); 8 Feb 2010 04:00:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5083 invoked by uid 500); 8 Feb 2010 04:00:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5073 invoked by uid 99); 8 Feb 2010 04:00:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 04:00:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.222.173 as permitted sender)
Received: from [209.85.222.173] (HELO mail-pz0-f173.google.com) (209.85.222.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 04:00:03 +0000
Received: by pzk3 with SMTP id 3so34584pzk.5
        for <java-user@lucene.apache.org>; Sun, 07 Feb 2010 19:59:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=m0re8vllPv02IuAaK9YhufAlRSUBsDT4b+LbNdociUE=;
        b=rgeflUHGlyzjuhvFAbSt1ySw6/uE/tYaRZkYUBwTsTskSZM/mGFVDzbfLwzG6UboFI
         rloFvNgZFLNStpitF4vQVMR0Wg75MBVjEIMKM137y5QShnOlZC8K5QsDHegOpY5vI7nW
         ZpiE/4f2ZkM+hXdbuN+aLhagE56AVy/0qU7uw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=W9QCfbhiSaB+VWiFL3sm07qU1kneaRRCIdCHflngjta1e0BVsiYX/qMjLWwRVIgZON
         hk1HLGzPGil6XqRMhS0bc3CFYpNszQegiNVLIseGgIvID0odICYEnOUjAxxlKCv4U+4q
         1DDMT/UovlVnaDlPo1dJCiWv6XhJnsBbvVqGY=
MIME-Version: 1.0
Received: by 10.115.64.6 with SMTP id r6mr3968877wak.85.1265601582065; Sun, 07 
	Feb 2010 19:59:42 -0800 (PST)
In-Reply-To: <437571.36808.qm@web113310.mail.gq1.yahoo.com>
References: <437571.36808.qm@web113310.mail.gq1.yahoo.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Sun, 7 Feb 2010 22:59:22 -0500
Message-ID: <8f0ad1f31002071959u391a5e3ctd3a3eabf2cbb58e4@mail.gmail.com>
Subject: Re: TREC Data and Topic-Specific Index
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64ca460b9ea0b047f0ed4af
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64ca460b9ea0b047f0ed4af
Content-Type: text/plain; charset=UTF-8

you should do (a), and pretend you know nothing about the relevance
judgements up front.

it is true you might make some change to your search engine and wonder, how
is it fair that I am bringing back possibly relevant docs that were never
judged (and thus scored implicitly as non-relevant)? i.e. the test
collection is biased against you because you did not participate in the
pooling process.

if you are concerned about this, you should still use (a), but perhaps look
at other measures such as bpref (
http://comminfo.rutgers.edu/~muresan/IR/Docs/Articles/sigirBuckley2004.pdf).

personally, I simply prefer to stick with MAP. And with all measures,
whether you look at bpref or map, my advice is to only consider large
differences only when evaluating some potential improvement!

On Sun, Feb 7, 2010 at 6:49 PM, Ivan Provalov <iprovalo@yahoo.com> wrote:

> Robert,
>
> We are using TREC-3 data and Ad Hoc topics 151-200.  The relevance
> judgments list contains 97,319 entries, of which 68,559 are unique document
> ids.  The TIPSTER collection which was used in TREC-3 is around 750,000
> documents.
>
> Should we (a) index the entire 750,000 document collection, or (b) the
> document collection of the 68,559 unique documents listed in the qrels, or
> (c) should we limit our index to each specific topic (about 2,000 docs) i.e.
> to the documents listed for a particular topic in the qrels?
>
> Thanks,
>
> Ivan
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--0016e64ca460b9ea0b047f0ed4af--

From java-user-return-44910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 08 07:10:46 2010
Return-Path: <java-user-return-44910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36098 invoked from network); 8 Feb 2010 07:10:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Feb 2010 07:10:45 -0000
Received: (qmail 25859 invoked by uid 500); 8 Feb 2010 07:10:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25495 invoked by uid 500); 8 Feb 2010 07:10:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25240 invoked by uid 99); 8 Feb 2010 07:10:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 07:10:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of naamakraus@gmail.com designates 209.85.222.173 as permitted sender)
Received: from [209.85.222.173] (HELO mail-pz0-f173.google.com) (209.85.222.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 07:10:33 +0000
Received: by pzk3 with SMTP id 3so116959pzk.5
        for <java-user@lucene.apache.org>; Sun, 07 Feb 2010 23:10:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=pEfmluJ071hrKEtqTRiaeDy6aRwMEyFN1B3VZ0Xcu5A=;
        b=QxxqNYJR0mQ2NPRmSOMET66v3Snz+dS7uRxJHH231aq+H9AIqIF0lC7dEH/BGzh0fN
         ZUHoSVrVE9W+SJIW66P4MFl9TVXQjFZFdN/sN8lcBLL/owcFt1/mCpnqdMVC6d4/Q/bO
         jQSvf8rp8XojlNrwtUrEq4Nr1huriDn+HevfI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ui1r5WW6cpXI4zTUTp6l1T1v3179ohaEro1cbbeRHcTXiJuUs6k0VvNLGf3IDkEm/E
         TDiSmXqZKxbusdrTgIJBmzKeGn14SZF7R0bzX5XifTDkEe8Mi7r0K1txhon1O7ISqdZa
         WSTAmwuIh+SZQR7obqYsXiIEDElK2njD4vDI8=
MIME-Version: 1.0
Received: by 10.141.214.25 with SMTP id r25mr60472rvq.105.1265613013099; Sun, 
	07 Feb 2010 23:10:13 -0800 (PST)
In-Reply-To: <643aa4871001071409n5e7a95bdr973fa4e1e48602b8@mail.gmail.com>
References: <643aa4871001070413x7629dc2ao5661a18880fcadc4@mail.gmail.com> 
	<359a92831001070537o205957e7nd3d14a0797f5d4ab@mail.gmail.com> 
	<643aa4871001070741t13a8a24coa4a92057bd4e27a7@mail.gmail.com> 
	<359a92831001070851s1c9c562fjf05925af1402fa3d@mail.gmail.com> 
	<9ac0c6aa1001070857i6de5c499m9611dc979f6c6110@mail.gmail.com> 
	<643aa4871001071409n5e7a95bdr973fa4e1e48602b8@mail.gmail.com>
From: Naama Kraus <naamakraus@gmail.com>
Date: Mon, 8 Feb 2010 09:09:53 +0200
Message-ID: <643aa4871002072309x44f92f9elb66836474b8d10e5@mail.gmail.com>
Subject: Re: Problems with IndexWriter#commit() on Linux
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1798e11a4ec047f117e45

--000e0cd1798e11a4ec047f117e45
Content-Type: text/plain; charset=ISO-8859-1

Hi All,

I am back to this one after some while.
It appears the file system I was using resides on software RAID disks. I ran
the same code on the same Linux machine, but on another file system residing
on SCSI disks. I didn't observe the problem there.
Both file systems are ext3.
So I am guessing the problem relates to the RAID disks.

I looked again at commit() API, and the following comment may be explaining:

"Note that this operation calls Directory.sync on the index files. That call
should not return until the file contents & metadata are on stable storage.
For FSDirectory, this calls the OS's fsync. But, beware: some hardware
devices may in fact cache writes even during fsync, and return before the
bits are actually on stable storage, to give the appearance of faster
performance. If you have such a device, and it does not have a battery
backup (for example) then on power loss it may still lose data. Lucene
cannot guarantee consistency on such devices."

Well, for me, running on the SCSI disks is just fine, I wanted to anyway
share my experience.

Naama

On Fri, Jan 8, 2010 at 12:09 AM, Naama Kraus <naamakraus@gmail.com> wrote:

> Thanks all for the hints, I'll get back to my code and do some additional
> checks.
> Naama
>
>
> On Thu, Jan 7, 2010 at 6:57 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> kill -9 is harsh, but, perfectly fine from Lucene's standpoint.
>> Likewise if the OS or JVM crashes, power is suddenly lost, the index
>> will just fallback to the last successful commit.  What will cause
>> corruption is if you have bit errors happening somewhere in the
>> machine... or if two writers are accidentally allowed to be open on
>> one index... then you're in trouble.
>>
>> What IO system (filesystem & hardware) are you using on Linux?
>> Boiling down to a smallish test case can help to isolate the
>> problem...
>>
>> Mike
>>
>> On Thu, Jan 7, 2010 at 11:51 AM, Erick Erickson <erickerickson@gmail.com>
>> wrote:
>> > Can you show us the code where you commit?
>> >
>> > And how do you kill your process? Kill -9 is...er...harsh....
>> >
>> > Yeah, I'm wondering whether the index file size *stays*
>> > changed after you kill you process. If it keeps its
>> > growing on every run (after you kill your process
>> > multiple times), then I'd suspect that you aren't
>> > adding documents like you think you are. Perhaps
>> > different fields, different analyzers, etc.
>> >
>> > Luke should show you the largest document by ID,
>> > as well as document counts. Comparing changes
>> > in the document count and the max doc ID should
>> > tell you something...
>> >
>> > Is it possible that you are updating existing docs
>> > rather than adding new ones?
>> >
>> > Best
>> > Erick
>> >
>> > On Thu, Jan 7, 2010 at 10:41 AM, Naama Kraus <naamakraus@gmail.com>
>> wrote:
>> >
>> >> Thanks dor the input.
>> >>
>> >> 1. While the process is running, I do see the index files growing on
>> disk
>> >> and the time stamps changing. Should I see a change in size right after
>> >> killing the process, is that what you mean ?
>> >> 2. Yes, same directory is being used for indexing and search.
>> >> 3. Didn't try Luke, good idea. Though I wonder, the same code runs well
>> on
>> >> Windows.
>> >>
>> >> Naama
>> >>
>> >> On Thu, Jan 7, 2010 at 3:37 PM, Erick Erickson <
>> erickerickson@gmail.com
>> >> >wrote:
>> >>
>> >> > Several questions:
>> >> > 1> are the index files larger after you kill your process?
>> >> >    Or have the timestamps changed?
>> >> > 2> are you absolutely sure that your indexer, when you
>> >> >     add documents, is pointing at the same directory your
>> >> >     search is pointing to?
>> >> > 3> Have you gotten a copy of Luke and examined your index
>> >> >     to see if, perhaps, your documents aren't being added the
>> >> >     way you think they are?
>> >> >
>> >> > Erick
>> >> >
>> >> > On Thu, Jan 7, 2010 at 7:13 AM, Naama Kraus <naamakraus@gmail.com>
>> >> wrote:
>> >> >
>> >> > > Hi,
>> >> > >
>> >> > > I am using IndexWriter#commit() methods in my program to commit
>> >> document
>> >> > > additions to the index. I do that once in a while, after a bunch of
>> >> > > documents were added. Since my indexing process is long, I want to
>> make
>> >> > > sure
>> >> > > I don't loose too many additions in case of a crash.
>> >> > > When running on Windows, things work as expected. But when running
>> my
>> >> > code
>> >> > > on Linux, seems like commit() has no effect. If I kill my program
>> and
>> >> > then
>> >> > > restart it, I don't see documents that I added and then committed
>> (they
>> >> > are
>> >> > > not returned by a search operation).
>> >> > > I am running Lucene 3.0.0
>> >> > >
>> >> > > Can anyone help ?
>> >> > >
>> >> > > Thanks, Naama
>> >> > >
>> >> > > --
>> >> > > "If you want your children to be intelligent, read them fairy
>> tales. If
>> >> > you
>> >> > > want them to be more intelligent, read them more fairy tales."
>> >> > > "What really interests me is whether God had any choice in the
>> creation
>> >> > of
>> >> > > the world."
>> >> > > (Albert Einstein)
>> >> > >
>> >> >
>> >>
>> >>
>> >>
>> >> --
>> >> "If you want your children to be intelligent, read them fairy tales. If
>> you
>> >> want them to be more intelligent, read them more fairy tales."
>> >> "What really interests me is whether God had any choice in the creation
>> of
>> >> the world."
>> >> (Albert Einstein)
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> "If you want your children to be intelligent, read them fairy tales. If you
> want them to be more intelligent, read them more fairy tales."
> "What really interests me is whether God had any choice in the creation of
> the world."
> (Albert Einstein)
>



-- 
"If you want your children to be intelligent, read them fairy tales. If you
want them to be more intelligent, read them more fairy tales."
"What really interests me is whether God had any choice in the creation of
the world."
"A table, a chair, a bowl of fruit and a violin; what else does a man need
to be happy? "
(Albert Einstein)

--000e0cd1798e11a4ec047f117e45--

From java-user-return-44911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 08 08:40:40 2010
Return-Path: <java-user-return-44911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59198 invoked from network); 8 Feb 2010 08:40:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Feb 2010 08:40:40 -0000
Received: (qmail 99663 invoked by uid 500); 8 Feb 2010 08:40:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99599 invoked by uid 500); 8 Feb 2010 08:40:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99589 invoked by uid 99); 8 Feb 2010 08:40:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 08:40:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 08:40:27 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NePA6-0003b6-U1
	for java-user@lucene.apache.org; Mon, 08 Feb 2010 00:40:07 -0800
Message-ID: <27496756.post@talk.nabble.com>
Date: Mon, 8 Feb 2010 00:40:06 -0800 (PST)
From: nithin kamath <nithinkamathm@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene document get values
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nithinkamathm@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I have a lucene document which has a field which appears repeatedly in the
document, I use doc.getFieldables(fieldName) to get the field values; when
the number of fields become huge; getting the field values is taking up a
lot of memory, is there some other way that I could get the field values
probably in a more efficient way.

thanks & regards
nithin
-- 
View this message in context: http://old.nabble.com/Lucene-document-get-values-tp27496756p27496756.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 08 08:46:02 2010
Return-Path: <java-user-return-44912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59796 invoked from network); 8 Feb 2010 08:46:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Feb 2010 08:46:02 -0000
Received: (qmail 2150 invoked by uid 500); 8 Feb 2010 08:46:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2069 invoked by uid 500); 8 Feb 2010 08:46:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2059 invoked by uid 99); 8 Feb 2010 08:46:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 08:46:00 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 08:45:52 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NePFL-0003yv-Qx
	for java-user@lucene.apache.org; Mon, 08 Feb 2010 00:45:31 -0800
Message-ID: <27496796.post@talk.nabble.com>
Date: Mon, 8 Feb 2010 00:45:31 -0800 (PST)
From: NanoE <luceneformnano@yahoo.com>
To: java-user@lucene.apache.org
Subject: Best Practice 3.0.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: luceneformnano@yahoo.com


Hello,

I am writing small library search and want to know what are the best
practice for lucene 3.0.0 for almost real time index update?

Thanks Nano
-- 
View this message in context: http://old.nabble.com/Best-Practice-3.0.0-tp27496796p27496796.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 08 08:58:02 2010
Return-Path: <java-user-return-44913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62327 invoked from network); 8 Feb 2010 08:58:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Feb 2010 08:58:02 -0000
Received: (qmail 12023 invoked by uid 500); 8 Feb 2010 08:58:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11930 invoked by uid 500); 8 Feb 2010 08:58:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11920 invoked by uid 99); 8 Feb 2010 08:58:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 08:58:00 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.212] (HELO mail-gx0-f212.google.com) (209.85.217.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 08:57:51 +0000
Received: by gxk4 with SMTP id 4so4057911gxk.5
        for <java-user@lucene.apache.org>; Mon, 08 Feb 2010 00:57:30 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.119.42 with SMTP id r42mr8273250ybc.325.1265619450034; 
	Mon, 08 Feb 2010 00:57:30 -0800 (PST)
In-Reply-To: <643aa4871002072309x44f92f9elb66836474b8d10e5@mail.gmail.com>
References: <643aa4871001070413x7629dc2ao5661a18880fcadc4@mail.gmail.com>
	 <359a92831001070537o205957e7nd3d14a0797f5d4ab@mail.gmail.com>
	 <643aa4871001070741t13a8a24coa4a92057bd4e27a7@mail.gmail.com>
	 <359a92831001070851s1c9c562fjf05925af1402fa3d@mail.gmail.com>
	 <9ac0c6aa1001070857i6de5c499m9611dc979f6c6110@mail.gmail.com>
	 <643aa4871001071409n5e7a95bdr973fa4e1e48602b8@mail.gmail.com>
	 <643aa4871002072309x44f92f9elb66836474b8d10e5@mail.gmail.com>
Date: Mon, 8 Feb 2010 03:57:30 -0500
Message-ID: <9ac0c6aa1002080057i16996395p27762a3cfb0db48d@mail.gmail.com>
Subject: Re: Problems with IndexWriter#commit() on Linux
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for sharing...

Software RAID should be perfectly fine for Lucene, in general, unless
the mount is configured to ignore fsync (I think the "data=3Dwriteback"
mount option for ext3 does so on Linux).

Can you check the mount options on your RAID filesystem?

Mike

On Mon, Feb 8, 2010 at 2:09 AM, Naama Kraus <naamakraus@gmail.com> wrote:
> Hi All,
>
> I am back to this one after some while.
> It appears the file system I was using resides on software RAID disks. I =
ran
> the same code on the same Linux machine, but on another file system resid=
ing
> on SCSI disks. I didn't observe the problem there.
> Both file systems are ext3.
> So I am guessing the problem relates to the RAID disks.
>
> I looked again at commit() API, and the following comment may be explaini=
ng:
>
> "Note that this operation calls Directory.sync on the index files. That c=
all
> should not return until the file contents & metadata are on stable storag=
e.
> For FSDirectory, this calls the OS's fsync. But, beware: some hardware
> devices may in fact cache writes even during fsync, and return before the
> bits are actually on stable storage, to give the appearance of faster
> performance. If you have such a device, and it does not have a battery
> backup (for example) then on power loss it may still lose data. Lucene
> cannot guarantee consistency on such devices."
>
> Well, for me, running on the SCSI disks is just fine, I wanted to anyway
> share my experience.
>
> Naama
>
> On Fri, Jan 8, 2010 at 12:09 AM, Naama Kraus <naamakraus@gmail.com> wrote=
:
>
>> Thanks all for the hints, I'll get back to my code and do some additiona=
l
>> checks.
>> Naama
>>
>>
>> On Thu, Jan 7, 2010 at 6:57 PM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>>
>>> kill -9 is harsh, but, perfectly fine from Lucene's standpoint.
>>> Likewise if the OS or JVM crashes, power is suddenly lost, the index
>>> will just fallback to the last successful commit. =A0What will cause
>>> corruption is if you have bit errors happening somewhere in the
>>> machine... or if two writers are accidentally allowed to be open on
>>> one index... then you're in trouble.
>>>
>>> What IO system (filesystem & hardware) are you using on Linux?
>>> Boiling down to a smallish test case can help to isolate the
>>> problem...
>>>
>>> Mike
>>>
>>> On Thu, Jan 7, 2010 at 11:51 AM, Erick Erickson <erickerickson@gmail.co=
m>
>>> wrote:
>>> > Can you show us the code where you commit?
>>> >
>>> > And how do you kill your process? Kill -9 is...er...harsh....
>>> >
>>> > Yeah, I'm wondering whether the index file size *stays*
>>> > changed after you kill you process. If it keeps its
>>> > growing on every run (after you kill your process
>>> > multiple times), then I'd suspect that you aren't
>>> > adding documents like you think you are. Perhaps
>>> > different fields, different analyzers, etc.
>>> >
>>> > Luke should show you the largest document by ID,
>>> > as well as document counts. Comparing changes
>>> > in the document count and the max doc ID should
>>> > tell you something...
>>> >
>>> > Is it possible that you are updating existing docs
>>> > rather than adding new ones?
>>> >
>>> > Best
>>> > Erick
>>> >
>>> > On Thu, Jan 7, 2010 at 10:41 AM, Naama Kraus <naamakraus@gmail.com>
>>> wrote:
>>> >
>>> >> Thanks dor the input.
>>> >>
>>> >> 1. While the process is running, I do see the index files growing on
>>> disk
>>> >> and the time stamps changing. Should I see a change in size right af=
ter
>>> >> killing the process, is that what you mean ?
>>> >> 2. Yes, same directory is being used for indexing and search.
>>> >> 3. Didn't try Luke, good idea. Though I wonder, the same code runs w=
ell
>>> on
>>> >> Windows.
>>> >>
>>> >> Naama
>>> >>
>>> >> On Thu, Jan 7, 2010 at 3:37 PM, Erick Erickson <
>>> erickerickson@gmail.com
>>> >> >wrote:
>>> >>
>>> >> > Several questions:
>>> >> > 1> are the index files larger after you kill your process?
>>> >> > =A0 =A0Or have the timestamps changed?
>>> >> > 2> are you absolutely sure that your indexer, when you
>>> >> > =A0 =A0 add documents, is pointing at the same directory your
>>> >> > =A0 =A0 search is pointing to?
>>> >> > 3> Have you gotten a copy of Luke and examined your index
>>> >> > =A0 =A0 to see if, perhaps, your documents aren't being added the
>>> >> > =A0 =A0 way you think they are?
>>> >> >
>>> >> > Erick
>>> >> >
>>> >> > On Thu, Jan 7, 2010 at 7:13 AM, Naama Kraus <naamakraus@gmail.com>
>>> >> wrote:
>>> >> >
>>> >> > > Hi,
>>> >> > >
>>> >> > > I am using IndexWriter#commit() methods in my program to commit
>>> >> document
>>> >> > > additions to the index. I do that once in a while, after a bunch=
 of
>>> >> > > documents were added. Since my indexing process is long, I want =
to
>>> make
>>> >> > > sure
>>> >> > > I don't loose too many additions in case of a crash.
>>> >> > > When running on Windows, things work as expected. But when runni=
ng
>>> my
>>> >> > code
>>> >> > > on Linux, seems like commit() has no effect. If I kill my progra=
m
>>> and
>>> >> > then
>>> >> > > restart it, I don't see documents that I added and then committe=
d
>>> (they
>>> >> > are
>>> >> > > not returned by a search operation).
>>> >> > > I am running Lucene 3.0.0
>>> >> > >
>>> >> > > Can anyone help ?
>>> >> > >
>>> >> > > Thanks, Naama
>>> >> > >
>>> >> > > --
>>> >> > > "If you want your children to be intelligent, read them fairy
>>> tales. If
>>> >> > you
>>> >> > > want them to be more intelligent, read them more fairy tales."
>>> >> > > "What really interests me is whether God had any choice in the
>>> creation
>>> >> > of
>>> >> > > the world."
>>> >> > > (Albert Einstein)
>>> >> > >
>>> >> >
>>> >>
>>> >>
>>> >>
>>> >> --
>>> >> "If you want your children to be intelligent, read them fairy tales.=
 If
>>> you
>>> >> want them to be more intelligent, read them more fairy tales."
>>> >> "What really interests me is whether God had any choice in the creat=
ion
>>> of
>>> >> the world."
>>> >> (Albert Einstein)
>>> >>
>>> >
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> --
>> "If you want your children to be intelligent, read them fairy tales. If =
you
>> want them to be more intelligent, read them more fairy tales."
>> "What really interests me is whether God had any choice in the creation =
of
>> the world."
>> (Albert Einstein)
>>
>
>
>
> --
> "If you want your children to be intelligent, read them fairy tales. If y=
ou
> want them to be more intelligent, read them more fairy tales."
> "What really interests me is whether God had any choice in the creation o=
f
> the world."
> "A table, a chair, a bowl of fruit and a violin; what else does a man nee=
d
> to be happy? "
> (Albert Einstein)
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 08 08:59:45 2010
Return-Path: <java-user-return-44914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62549 invoked from network); 8 Feb 2010 08:59:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Feb 2010 08:59:45 -0000
Received: (qmail 14169 invoked by uid 500); 8 Feb 2010 08:59:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14085 invoked by uid 500); 8 Feb 2010 08:59:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14075 invoked by uid 99); 8 Feb 2010 08:59:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 08:59:43 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 08:59:35 +0000
Received: by ywh15 with SMTP id 15so895692ywh.5
        for <java-user@lucene.apache.org>; Mon, 08 Feb 2010 00:59:14 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.251.14 with SMTP id y14mr1059200ybh.149.1265619553867; 
	Mon, 08 Feb 2010 00:59:13 -0800 (PST)
In-Reply-To: <27496796.post@talk.nabble.com>
References: <27496796.post@talk.nabble.com>
Date: Mon, 8 Feb 2010 03:59:13 -0500
Message-ID: <9ac0c6aa1002080059x1d1dff20q699a71b218742c8@mail.gmail.com>
Subject: Re: Best Practice 3.0.0
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Use IndexWriter.getReader to get a near real-time reader, after making
changes...

Mike

On Mon, Feb 8, 2010 at 3:45 AM, NanoE <luceneformnano@yahoo.com> wrote:
>
> Hello,
>
> I am writing small library search and want to know what are the best
> practice for lucene 3.0.0 for almost real time index update?
>
> Thanks Nano
> --
> View this message in context: http://old.nabble.com/Best-Practice-3.0.0-tp27496796p27496796.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 08 10:15:16 2010
Return-Path: <java-user-return-44915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89947 invoked from network); 8 Feb 2010 10:15:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Feb 2010 10:15:15 -0000
Received: (qmail 75182 invoked by uid 500); 8 Feb 2010 10:15:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75120 invoked by uid 500); 8 Feb 2010 10:15:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75110 invoked by uid 99); 8 Feb 2010 10:15:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 10:15:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.86.5.93] (HELO smtp106.mail.in.yahoo.com) (202.86.5.93)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Feb 2010 10:15:02 +0000
Received: (qmail 16823 invoked from network); 8 Feb 2010 10:14:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=JaxHxMq8CYlj2jVXqU21ueb96MoK4lnQFrpkFvLi1n5u9Aic5jt4M+ZgnzbsUHciP9UAFoiEff5yzrPP5wxJm//d3GHnxD3VBIK9uei3+rODMS7EmQrCm9sLI7yEIV/nlzJn7t6z8htGDqF86OC8STXCaOdnOkCGyzNe5p7YovI=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp106.mail.in.yahoo.com with SMTP; 08 Feb 2010 15:44:38 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: DCWlK9MVM1nj2Razlt7CY1nbC2oD732hiSw8Bw9Oi_bE9fWkwRL5GKDac49K5MLOBW6Zph0Gkszhkwq0tfCyi3ANiRZTug463JTxUP47AvlC3NyHHEBzwxAUw50sZlI7qMFsK.Le60ZJBvWSfe7.wCQHTz7t.kqKvu7ljOYcIWzK7Bs6pYdYkyjnReAF_IfPs51wphDM
X-Yahoo-Newman-Property: ymail-3
Message-ID: <6A0CD00311164615A4C67D678E1C1DBC@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Scale Out
Date: Mon, 8 Feb 2010 15:44:13 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5843
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Our indexes is growing and the sorted cache is taking huge amount of =
RAM. We want to add multiple nodes, and scale out the search.=20

Currently my applaication supports RMI interface and it return =
appliaction specific result set objects as hits. I could host multiple =
search instance in different nodes, then i may need to sort / combine =
the results.=20

Any thoughts on scaling / clustering? Whether i need to use Hadoop / =
Carrot etc...

Regards
Ganesh


Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 08 10:24:52 2010
Return-Path: <java-user-return-44916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93812 invoked from network); 8 Feb 2010 10:24:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Feb 2010 10:24:52 -0000
Received: (qmail 83848 invoked by uid 500); 8 Feb 2010 10:24:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83804 invoked by uid 500); 8 Feb 2010 10:24:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83794 invoked by uid 99); 8 Feb 2010 10:24:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 10:24:50 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of naamakraus@gmail.com designates 209.85.222.173 as permitted sender)
Received: from [209.85.222.173] (HELO mail-pz0-f173.google.com) (209.85.222.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 10:24:41 +0000
Received: by pzk3 with SMTP id 3so314523pzk.5
        for <java-user@lucene.apache.org>; Mon, 08 Feb 2010 02:24:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=Qx7l/jDwIfRLr+CI/sZqyWbQ/xoRP/zyRL3VhU8oTfk=;
        b=LEIQAYiLEU0yXkbzlrR1uKafx8SJ0jkRgyrf9SCdWzRFGOwlErTko/l9jGF8fe9yIa
         5jsUCdbEsaOprAncq+rjgXSrVNMba13/Ia5TpctEwEtKaxWw9Q8bW+BN2QMW3m5jjYt1
         T8tu3wjdSCb1vMxy1/vTc4uctjAO0roGc1eJc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=wNyAyxp3rLuA55SPTTNDwBhltu6TIkvgWOfq5mJzhAYePdDUnnCMtCMdB3KBIXnZrV
         NmdVUF3di7qlC9pseqF1fNXJVGdfHfNOzxjo2fnZie70tbniFi1g1q+W/8du40mHpZCO
         uUQ78uNVCR+TZQRVvG9hboa5zDjrDHo4CzpXU=
MIME-Version: 1.0
Received: by 10.141.89.10 with SMTP id r10mr4347778rvl.69.1265624660091; Mon, 
	08 Feb 2010 02:24:20 -0800 (PST)
In-Reply-To: <9ac0c6aa1002080057i16996395p27762a3cfb0db48d@mail.gmail.com>
References: <643aa4871001070413x7629dc2ao5661a18880fcadc4@mail.gmail.com> 
	<359a92831001070537o205957e7nd3d14a0797f5d4ab@mail.gmail.com> 
	<643aa4871001070741t13a8a24coa4a92057bd4e27a7@mail.gmail.com> 
	<359a92831001070851s1c9c562fjf05925af1402fa3d@mail.gmail.com> 
	<9ac0c6aa1001070857i6de5c499m9611dc979f6c6110@mail.gmail.com> 
	<643aa4871001071409n5e7a95bdr973fa4e1e48602b8@mail.gmail.com> 
	<643aa4871002072309x44f92f9elb66836474b8d10e5@mail.gmail.com> 
	<9ac0c6aa1002080057i16996395p27762a3cfb0db48d@mail.gmail.com>
From: Naama Kraus <naamakraus@gmail.com>
Date: Mon, 8 Feb 2010 12:24:00 +0200
Message-ID: <643aa4871002080224q2d9c8259t6a1dac2260469243@mail.gmail.com>
Subject: Re: Problems with IndexWriter#commit() on Linux
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd137ea48a26b047f1434ae
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd137ea48a26b047f1434ae
Content-Type: text/plain; charset=ISO-8859-1

Here is what I get with mount -l
/dev/mapper/lvm--raid-lvm0 on /data3 type ext3 (rw) []

Is there anything else to get more details of the mount options ?

On Mon, Feb 8, 2010 at 10:57 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Thanks for sharing...
>
> Software RAID should be perfectly fine for Lucene, in general, unless
> the mount is configured to ignore fsync (I think the "data=writeback"
> mount option for ext3 does so on Linux).
>
> Can you check the mount options on your RAID filesystem?
>
> Mike
>
> On Mon, Feb 8, 2010 at 2:09 AM, Naama Kraus <naamakraus@gmail.com> wrote:
> > Hi All,
> >
> > I am back to this one after some while.
> > It appears the file system I was using resides on software RAID disks. I
> ran
> > the same code on the same Linux machine, but on another file system
> residing
> > on SCSI disks. I didn't observe the problem there.
> > Both file systems are ext3.
> > So I am guessing the problem relates to the RAID disks.
> >
> > I looked again at commit() API, and the following comment may be
> explaining:
> >
> > "Note that this operation calls Directory.sync on the index files. That
> call
> > should not return until the file contents & metadata are on stable
> storage.
> > For FSDirectory, this calls the OS's fsync. But, beware: some hardware
> > devices may in fact cache writes even during fsync, and return before the
> > bits are actually on stable storage, to give the appearance of faster
> > performance. If you have such a device, and it does not have a battery
> > backup (for example) then on power loss it may still lose data. Lucene
> > cannot guarantee consistency on such devices."
> >
> > Well, for me, running on the SCSI disks is just fine, I wanted to anyway
> > share my experience.
> >
> > Naama
> >
> > On Fri, Jan 8, 2010 at 12:09 AM, Naama Kraus <naamakraus@gmail.com>
> wrote:
> >
> >> Thanks all for the hints, I'll get back to my code and do some
> additional
> >> checks.
> >> Naama
> >>
> >>
> >> On Thu, Jan 7, 2010 at 6:57 PM, Michael McCandless <
> >> lucene@mikemccandless.com> wrote:
> >>
> >>> kill -9 is harsh, but, perfectly fine from Lucene's standpoint.
> >>> Likewise if the OS or JVM crashes, power is suddenly lost, the index
> >>> will just fallback to the last successful commit.  What will cause
> >>> corruption is if you have bit errors happening somewhere in the
> >>> machine... or if two writers are accidentally allowed to be open on
> >>> one index... then you're in trouble.
> >>>
> >>> What IO system (filesystem & hardware) are you using on Linux?
> >>> Boiling down to a smallish test case can help to isolate the
> >>> problem...
> >>>
> >>> Mike
> >>>
> >>> On Thu, Jan 7, 2010 at 11:51 AM, Erick Erickson <
> erickerickson@gmail.com>
> >>> wrote:
> >>> > Can you show us the code where you commit?
> >>> >
> >>> > And how do you kill your process? Kill -9 is...er...harsh....
> >>> >
> >>> > Yeah, I'm wondering whether the index file size *stays*
> >>> > changed after you kill you process. If it keeps its
> >>> > growing on every run (after you kill your process
> >>> > multiple times), then I'd suspect that you aren't
> >>> > adding documents like you think you are. Perhaps
> >>> > different fields, different analyzers, etc.
> >>> >
> >>> > Luke should show you the largest document by ID,
> >>> > as well as document counts. Comparing changes
> >>> > in the document count and the max doc ID should
> >>> > tell you something...
> >>> >
> >>> > Is it possible that you are updating existing docs
> >>> > rather than adding new ones?
> >>> >
> >>> > Best
> >>> > Erick
> >>> >
> >>> > On Thu, Jan 7, 2010 at 10:41 AM, Naama Kraus <naamakraus@gmail.com>
> >>> wrote:
> >>> >
> >>> >> Thanks dor the input.
> >>> >>
> >>> >> 1. While the process is running, I do see the index files growing on
> >>> disk
> >>> >> and the time stamps changing. Should I see a change in size right
> after
> >>> >> killing the process, is that what you mean ?
> >>> >> 2. Yes, same directory is being used for indexing and search.
> >>> >> 3. Didn't try Luke, good idea. Though I wonder, the same code runs
> well
> >>> on
> >>> >> Windows.
> >>> >>
> >>> >> Naama
> >>> >>
> >>> >> On Thu, Jan 7, 2010 at 3:37 PM, Erick Erickson <
> >>> erickerickson@gmail.com
> >>> >> >wrote:
> >>> >>
> >>> >> > Several questions:
> >>> >> > 1> are the index files larger after you kill your process?
> >>> >> >    Or have the timestamps changed?
> >>> >> > 2> are you absolutely sure that your indexer, when you
> >>> >> >     add documents, is pointing at the same directory your
> >>> >> >     search is pointing to?
> >>> >> > 3> Have you gotten a copy of Luke and examined your index
> >>> >> >     to see if, perhaps, your documents aren't being added the
> >>> >> >     way you think they are?
> >>> >> >
> >>> >> > Erick
> >>> >> >
> >>> >> > On Thu, Jan 7, 2010 at 7:13 AM, Naama Kraus <naamakraus@gmail.com
> >
> >>> >> wrote:
> >>> >> >
> >>> >> > > Hi,
> >>> >> > >
> >>> >> > > I am using IndexWriter#commit() methods in my program to commit
> >>> >> document
> >>> >> > > additions to the index. I do that once in a while, after a bunch
> of
> >>> >> > > documents were added. Since my indexing process is long, I want
> to
> >>> make
> >>> >> > > sure
> >>> >> > > I don't loose too many additions in case of a crash.
> >>> >> > > When running on Windows, things work as expected. But when
> running
> >>> my
> >>> >> > code
> >>> >> > > on Linux, seems like commit() has no effect. If I kill my
> program
> >>> and
> >>> >> > then
> >>> >> > > restart it, I don't see documents that I added and then
> committed
> >>> (they
> >>> >> > are
> >>> >> > > not returned by a search operation).
> >>> >> > > I am running Lucene 3.0.0
> >>> >> > >
> >>> >> > > Can anyone help ?
> >>> >> > >
> >>> >> > > Thanks, Naama
> >>> >> > >
> >>> >> > > --
> >>> >> > > "If you want your children to be intelligent, read them fairy
> >>> tales. If
> >>> >> > you
> >>> >> > > want them to be more intelligent, read them more fairy tales."
> >>> >> > > "What really interests me is whether God had any choice in the
> >>> creation
> >>> >> > of
> >>> >> > > the world."
> >>> >> > > (Albert Einstein)
> >>> >> > >
> >>> >> >
> >>> >>
> >>> >>
> >>> >>
> >>> >> --
> >>> >> "If you want your children to be intelligent, read them fairy tales.
> If
> >>> you
> >>> >> want them to be more intelligent, read them more fairy tales."
> >>> >> "What really interests me is whether God had any choice in the
> creation
> >>> of
> >>> >> the world."
> >>> >> (Albert Einstein)
> >>> >>
> >>> >
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >>
> >> --
> >> "If you want your children to be intelligent, read them fairy tales. If
> you
> >> want them to be more intelligent, read them more fairy tales."
> >> "What really interests me is whether God had any choice in the creation
> of
> >> the world."
> >> (Albert Einstein)
> >>
> >
> >
> >
> > --
> > "If you want your children to be intelligent, read them fairy tales. If
> you
> > want them to be more intelligent, read them more fairy tales."
> > "What really interests me is whether God had any choice in the creation
> of
> > the world."
> > "A table, a chair, a bowl of fruit and a violin; what else does a man
> need
> > to be happy? "
> > (Albert Einstein)
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
"If you want your children to be intelligent, read them fairy tales. If you
want them to be more intelligent, read them more fairy tales."
"What really interests me is whether God had any choice in the creation of
the world."
"A table, a chair, a bowl of fruit and a violin; what else does a man need
to be happy? "
(Albert Einstein)

--000e0cd137ea48a26b047f1434ae--

From java-user-return-44917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 08 10:28:58 2010
Return-Path: <java-user-return-44917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95467 invoked from network); 8 Feb 2010 10:28:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Feb 2010 10:28:58 -0000
Received: (qmail 88903 invoked by uid 500); 8 Feb 2010 10:28:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88841 invoked by uid 500); 8 Feb 2010 10:28:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88831 invoked by uid 99); 8 Feb 2010 10:28:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 10:28:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 10:28:48 +0000
Received: by bwz22 with SMTP id 22so318098bwz.5
        for <java-user@lucene.apache.org>; Mon, 08 Feb 2010 02:28:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=bTwx5n5KX11X8JB75EIgoDAPYYWkoSwgBThd5Iijv7Q=;
        b=fJU7tzeOAvb8BZjx6SiiOXhkGDYx63DAw5CIY6tL234K6j3Gfo3J/5OtdGFGBerqh1
         H3X41Zvp4aOlDgTJbwjaIsnOUKE0QOSZIOu9a7rDbhO5aAAcRoUJRFMDlmtVk2JvS2OI
         tybcAPMRIdcGGJHd3BU07Ohb9RjoYmFUdUMMI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=x1dK/WHacu++4Kmj0+3pF4mNpun0lx74MPYGAPZVXmbwaIF1IgQeseIaXsb7U5to/a
         vGkg2fQ9z2ppPsXyRNA+rC6UuClp74wqFgSY9Aw3wZet/VvW+M1SETIJXsOMqUVP2q5K
         feq/OcPePaB+HCofwp/gQ7pl06oMS/cBeWiLE=
MIME-Version: 1.0
Received: by 10.204.48.136 with SMTP id r8mr351200bkf.149.1265624908146; Mon, 
	08 Feb 2010 02:28:28 -0800 (PST)
In-Reply-To: <6A0CD00311164615A4C67D678E1C1DBC@sv.us.sonicwall.com>
References: <6A0CD00311164615A4C67D678E1C1DBC@sv.us.sonicwall.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 8 Feb 2010 10:28:08 +0000
Message-ID: <8c4e68611002080228x59c42dday4687ca07b366fb44@mail.gmail.com>
Subject: Re: Scale Out
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

http://katta.sourceforge.net/ sounds well worth a look.


--
Ian.


On Mon, Feb 8, 2010 at 10:14 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> Our indexes is growing and the sorted cache is taking huge amount of RAM. We want to add multiple nodes, and scale out the search.
>
> Currently my applaication supports RMI interface and it return appliaction specific result set objects as hits. I could host multiple search instance in different nodes, then i may need to sort / combine the results.
>
> Any thoughts on scaling / clustering? Whether i need to use Hadoop / Carrot etc...
>
> Regards
> Ganesh
>
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 08 10:31:34 2010
Return-Path: <java-user-return-44918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96687 invoked from network); 8 Feb 2010 10:31:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Feb 2010 10:31:34 -0000
Received: (qmail 93747 invoked by uid 500); 8 Feb 2010 10:31:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93672 invoked by uid 500); 8 Feb 2010 10:31:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93662 invoked by uid 99); 8 Feb 2010 10:31:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 10:31:31 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zjffdu@gmail.com designates 209.85.222.173 as permitted sender)
Received: from [209.85.222.173] (HELO mail-pz0-f173.google.com) (209.85.222.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 10:31:23 +0000
Received: by pzk3 with SMTP id 3so321332pzk.5
        for <java-user@lucene.apache.org>; Mon, 08 Feb 2010 02:31:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=nxI1ooGKqLJGrLv/oescWE2V2jlX3CtiTMF2k87VCAY=;
        b=pUAM8egKyMvAs3yXuQ8s9AamE7RJCAYwQY4MgCKHU3qMlNjfztBlr7AE+VGIhe1bPn
         luAdaWS5tbHL5TSSeCfuIi/OfGIlOeN4LMV3aKvGWJYxO1WFJEsQ7WREX0HtdvQ/UJZX
         +U933JrxYmSOEx8/HRChkaJBuYDijrxG96mx8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=poZPfssqfxtwlEwk7jIuBrtRcO3K+e1P43xt5rPjmUci3ZWbPtbjvOq0nKcUOaUMhW
         7MsTKNu4OqS3Shg9C8QdR572Gm3MhoW9CM04N5l7MIkTY2BOPmBEhPky5fdNSR8knowS
         prC/YBJWebgiVQYX5bNLUvNKj0eNiaW6l4UdE=
MIME-Version: 1.0
Received: by 10.142.122.24 with SMTP id u24mr4163266wfc.53.1265625062109; Mon, 
	08 Feb 2010 02:31:02 -0800 (PST)
In-Reply-To: <6A0CD00311164615A4C67D678E1C1DBC@sv.us.sonicwall.com>
References: <6A0CD00311164615A4C67D678E1C1DBC@sv.us.sonicwall.com>
Date: Mon, 8 Feb 2010 18:31:02 +0800
Message-ID: <8211a1321002080231w3dce8043qa2a366baf8ce7646@mail.gmail.com>
Subject: Re: Scale Out
From: Jeff Zhang <zjffdu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e0b9c93ef435047f144c6a
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e0b9c93ef435047f144c6a
Content-Type: text/plain; charset=UTF-8

Solr has more powerful scalability than lucene, maybe you can try that


On Mon, Feb 8, 2010 at 6:14 PM, Ganesh <emailgane@yahoo.co.in> wrote:

> Our indexes is growing and the sorted cache is taking huge amount of RAM.
> We want to add multiple nodes, and scale out the search.
>
> Currently my applaication supports RMI interface and it return appliaction
> specific result set objects as hits. I could host multiple search instance
> in different nodes, then i may need to sort / combine the results.
>
> Any thoughts on scaling / clustering? Whether i need to use Hadoop / Carrot
> etc...
>
> Regards
> Ganesh
>
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Best Regards

Jeff Zhang

--001636e0b9c93ef435047f144c6a--

From java-user-return-44919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 08 10:34:25 2010
Return-Path: <java-user-return-44919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97922 invoked from network); 8 Feb 2010 10:34:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Feb 2010 10:34:25 -0000
Received: (qmail 95788 invoked by uid 500); 8 Feb 2010 10:34:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95709 invoked by uid 500); 8 Feb 2010 10:34:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95697 invoked by uid 99); 8 Feb 2010 10:34:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 10:34:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stachoo@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 10:34:16 +0000
Received: by ey-out-2122.google.com with SMTP id d26so1352700eyd.3
        for <java-user@lucene.apache.org>; Mon, 08 Feb 2010 02:33:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=716VRN1AQo1ZJ65qP1q+cXyyxwJZsy6Tu1VKbCi/nSg=;
        b=lCngTtE12hU+d4ELaWZzGZMTJX6V+Quy565FfrcTqbFZinOhDIdF/15XJdn1SRdtK5
         GWegt2j1jPJzGfXQsuXO0O8VqXIwPosIcwlyYeIEDg9ZL3ROM0CTXWxDFffiYW42httk
         f1xFLM9AJfzWh8DmnQ2oBH9WKSMvjUTLCMHqg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=FBjbuAVeZ8zBjq/X3LIRGR389f4R+Z3i80YGJsGTmkqIekKnUDHPDiAZ+luFBIohaV
         eERBr1KKbMyWTcIxOouCJz49f/OOpR4WZ1mxDCdA9ml9c7ymkS+SjVz0H4Icm0YwrJCu
         1BV/FkUne/EbkX74bFfAOuttl+/J1IODT9VJk=
MIME-Version: 1.0
Received: by 10.213.100.203 with SMTP id z11mr2588689ebn.51.1265625235166; 
	Mon, 08 Feb 2010 02:33:55 -0800 (PST)
In-Reply-To: <6A0CD00311164615A4C67D678E1C1DBC@sv.us.sonicwall.com>
References: <6A0CD00311164615A4C67D678E1C1DBC@sv.us.sonicwall.com>
Date: Mon, 8 Feb 2010 11:33:55 +0100
Message-ID: <5af106d61002080233qaec361btf3e1f4e50c289d25@mail.gmail.com>
Subject: Re: Scale Out
From: Stanislaw Osinski <stachoo@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5b9858f96a2047f14568c

--001636c5b9858f96a2047f14568c
Content-Type: text/plain; charset=ISO-8859-1

> Any thoughts on scaling / clustering? Whether i need to use Hadoop / Carrot
> etc...
>

Carrot2 does search results clustering (by content), while what you probably
need is server/index clustering. See the other responses in this thread for
suggestions.

S.

--001636c5b9858f96a2047f14568c--

From java-user-return-44920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 08 13:23:23 2010
Return-Path: <java-user-return-44920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48360 invoked from network); 8 Feb 2010 13:23:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Feb 2010 13:23:23 -0000
Received: (qmail 94358 invoked by uid 500); 8 Feb 2010 13:23:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94294 invoked by uid 500); 8 Feb 2010 13:23:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94284 invoked by uid 99); 8 Feb 2010 13:23:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 13:23:20 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.194] (HELO mail-yx0-f194.google.com) (209.85.210.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 13:23:14 +0000
Received: by yxe32 with SMTP id 32so4989989yxe.5
        for <java-user@lucene.apache.org>; Mon, 08 Feb 2010 05:22:52 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.117.30 with SMTP id p30mr8798442ybc.67.1265635371631; Mon, 
	08 Feb 2010 05:22:51 -0800 (PST)
In-Reply-To: <9ac0c6aa1002080057i16996395p27762a3cfb0db48d@mail.gmail.com>
References: <643aa4871001070413x7629dc2ao5661a18880fcadc4@mail.gmail.com>
	 <359a92831001070537o205957e7nd3d14a0797f5d4ab@mail.gmail.com>
	 <643aa4871001070741t13a8a24coa4a92057bd4e27a7@mail.gmail.com>
	 <359a92831001070851s1c9c562fjf05925af1402fa3d@mail.gmail.com>
	 <9ac0c6aa1001070857i6de5c499m9611dc979f6c6110@mail.gmail.com>
	 <643aa4871001071409n5e7a95bdr973fa4e1e48602b8@mail.gmail.com>
	 <643aa4871002072309x44f92f9elb66836474b8d10e5@mail.gmail.com>
	 <9ac0c6aa1002080057i16996395p27762a3cfb0db48d@mail.gmail.com>
Date: Mon, 8 Feb 2010 08:22:51 -0500
Message-ID: <9ac0c6aa1002080522y68937192vd8990a5187e772fd@mail.gmail.com>
Subject: Re: Problems with IndexWriter#commit() on Linux
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hmmm... I think that means you're using the default data mode
(ordered), which should properly preserve writes if the OS or machine
crashes.

And actually I was wrong before -- even if the mount had
data=3Dwriteback, since you are "only" kill -9ing the process (not
crashing the machine), the data mount option doesn't matter.  That
option only affects what happens on a crash...

Can you work up a small example showing the problem?  And if possible,
turn on IndexWriter's infoStream, capture the output as you index up
until the kill -9, and post that?

Mike

On Mon, Feb 8, 2010 at 3:57 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> Thanks for sharing...
>
> Software RAID should be perfectly fine for Lucene, in general, unless
> the mount is configured to ignore fsync (I think the "data=3Dwriteback"
> mount option for ext3 does so on Linux).
>
> Can you check the mount options on your RAID filesystem?
>
> Mike
>
> On Mon, Feb 8, 2010 at 2:09 AM, Naama Kraus <naamakraus@gmail.com> wrote:
>> Hi All,
>>
>> I am back to this one after some while.
>> It appears the file system I was using resides on software RAID disks. I=
 ran
>> the same code on the same Linux machine, but on another file system resi=
ding
>> on SCSI disks. I didn't observe the problem there.
>> Both file systems are ext3.
>> So I am guessing the problem relates to the RAID disks.
>>
>> I looked again at commit() API, and the following comment may be explain=
ing:
>>
>> "Note that this operation calls Directory.sync on the index files. That =
call
>> should not return until the file contents & metadata are on stable stora=
ge.
>> For FSDirectory, this calls the OS's fsync. But, beware: some hardware
>> devices may in fact cache writes even during fsync, and return before th=
e
>> bits are actually on stable storage, to give the appearance of faster
>> performance. If you have such a device, and it does not have a battery
>> backup (for example) then on power loss it may still lose data. Lucene
>> cannot guarantee consistency on such devices."
>>
>> Well, for me, running on the SCSI disks is just fine, I wanted to anyway
>> share my experience.
>>
>> Naama
>>
>> On Fri, Jan 8, 2010 at 12:09 AM, Naama Kraus <naamakraus@gmail.com> wrot=
e:
>>
>>> Thanks all for the hints, I'll get back to my code and do some addition=
al
>>> checks.
>>> Naama
>>>
>>>
>>> On Thu, Jan 7, 2010 at 6:57 PM, Michael McCandless <
>>> lucene@mikemccandless.com> wrote:
>>>
>>>> kill -9 is harsh, but, perfectly fine from Lucene's standpoint.
>>>> Likewise if the OS or JVM crashes, power is suddenly lost, the index
>>>> will just fallback to the last successful commit. =A0What will cause
>>>> corruption is if you have bit errors happening somewhere in the
>>>> machine... or if two writers are accidentally allowed to be open on
>>>> one index... then you're in trouble.
>>>>
>>>> What IO system (filesystem & hardware) are you using on Linux?
>>>> Boiling down to a smallish test case can help to isolate the
>>>> problem...
>>>>
>>>> Mike
>>>>
>>>> On Thu, Jan 7, 2010 at 11:51 AM, Erick Erickson <erickerickson@gmail.c=
om>
>>>> wrote:
>>>> > Can you show us the code where you commit?
>>>> >
>>>> > And how do you kill your process? Kill -9 is...er...harsh....
>>>> >
>>>> > Yeah, I'm wondering whether the index file size *stays*
>>>> > changed after you kill you process. If it keeps its
>>>> > growing on every run (after you kill your process
>>>> > multiple times), then I'd suspect that you aren't
>>>> > adding documents like you think you are. Perhaps
>>>> > different fields, different analyzers, etc.
>>>> >
>>>> > Luke should show you the largest document by ID,
>>>> > as well as document counts. Comparing changes
>>>> > in the document count and the max doc ID should
>>>> > tell you something...
>>>> >
>>>> > Is it possible that you are updating existing docs
>>>> > rather than adding new ones?
>>>> >
>>>> > Best
>>>> > Erick
>>>> >
>>>> > On Thu, Jan 7, 2010 at 10:41 AM, Naama Kraus <naamakraus@gmail.com>
>>>> wrote:
>>>> >
>>>> >> Thanks dor the input.
>>>> >>
>>>> >> 1. While the process is running, I do see the index files growing o=
n
>>>> disk
>>>> >> and the time stamps changing. Should I see a change in size right a=
fter
>>>> >> killing the process, is that what you mean ?
>>>> >> 2. Yes, same directory is being used for indexing and search.
>>>> >> 3. Didn't try Luke, good idea. Though I wonder, the same code runs =
well
>>>> on
>>>> >> Windows.
>>>> >>
>>>> >> Naama
>>>> >>
>>>> >> On Thu, Jan 7, 2010 at 3:37 PM, Erick Erickson <
>>>> erickerickson@gmail.com
>>>> >> >wrote:
>>>> >>
>>>> >> > Several questions:
>>>> >> > 1> are the index files larger after you kill your process?
>>>> >> > =A0 =A0Or have the timestamps changed?
>>>> >> > 2> are you absolutely sure that your indexer, when you
>>>> >> > =A0 =A0 add documents, is pointing at the same directory your
>>>> >> > =A0 =A0 search is pointing to?
>>>> >> > 3> Have you gotten a copy of Luke and examined your index
>>>> >> > =A0 =A0 to see if, perhaps, your documents aren't being added the
>>>> >> > =A0 =A0 way you think they are?
>>>> >> >
>>>> >> > Erick
>>>> >> >
>>>> >> > On Thu, Jan 7, 2010 at 7:13 AM, Naama Kraus <naamakraus@gmail.com=
>
>>>> >> wrote:
>>>> >> >
>>>> >> > > Hi,
>>>> >> > >
>>>> >> > > I am using IndexWriter#commit() methods in my program to commit
>>>> >> document
>>>> >> > > additions to the index. I do that once in a while, after a bunc=
h of
>>>> >> > > documents were added. Since my indexing process is long, I want=
 to
>>>> make
>>>> >> > > sure
>>>> >> > > I don't loose too many additions in case of a crash.
>>>> >> > > When running on Windows, things work as expected. But when runn=
ing
>>>> my
>>>> >> > code
>>>> >> > > on Linux, seems like commit() has no effect. If I kill my progr=
am
>>>> and
>>>> >> > then
>>>> >> > > restart it, I don't see documents that I added and then committ=
ed
>>>> (they
>>>> >> > are
>>>> >> > > not returned by a search operation).
>>>> >> > > I am running Lucene 3.0.0
>>>> >> > >
>>>> >> > > Can anyone help ?
>>>> >> > >
>>>> >> > > Thanks, Naama
>>>> >> > >
>>>> >> > > --
>>>> >> > > "If you want your children to be intelligent, read them fairy
>>>> tales. If
>>>> >> > you
>>>> >> > > want them to be more intelligent, read them more fairy tales."
>>>> >> > > "What really interests me is whether God had any choice in the
>>>> creation
>>>> >> > of
>>>> >> > > the world."
>>>> >> > > (Albert Einstein)
>>>> >> > >
>>>> >> >
>>>> >>
>>>> >>
>>>> >>
>>>> >> --
>>>> >> "If you want your children to be intelligent, read them fairy tales=
. If
>>>> you
>>>> >> want them to be more intelligent, read them more fairy tales."
>>>> >> "What really interests me is whether God had any choice in the crea=
tion
>>>> of
>>>> >> the world."
>>>> >> (Albert Einstein)
>>>> >>
>>>> >
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>> --
>>> "If you want your children to be intelligent, read them fairy tales. If=
 you
>>> want them to be more intelligent, read them more fairy tales."
>>> "What really interests me is whether God had any choice in the creation=
 of
>>> the world."
>>> (Albert Einstein)
>>>
>>
>>
>>
>> --
>> "If you want your children to be intelligent, read them fairy tales. If =
you
>> want them to be more intelligent, read them more fairy tales."
>> "What really interests me is whether God had any choice in the creation =
of
>> the world."
>> "A table, a chair, a bowl of fruit and a violin; what else does a man ne=
ed
>> to be happy? "
>> (Albert Einstein)
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 08 17:34:16 2010
Return-Path: <java-user-return-44921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52052 invoked from network); 8 Feb 2010 17:34:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Feb 2010 17:34:16 -0000
Received: (qmail 33893 invoked by uid 500); 8 Feb 2010 17:34:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33825 invoked by uid 500); 8 Feb 2010 17:34:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33815 invoked by uid 99); 8 Feb 2010 17:34:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 17:34:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.lu@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 17:34:04 +0000
Received: by wwb24 with SMTP id 24so1681114wwb.35
        for <java-user@lucene.apache.org>; Mon, 08 Feb 2010 09:33:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=x97hKHX+XT4MgRtb2dkYw1oSHyrcW8T6zXLdP/EV7RM=;
        b=iCbNjWhLJrWS8zozQehZ37A6atQVwHf1NYMDwnSxpWpD/+iPshGuVveBM7uO1GwUgN
         L5iHvpCW8+NaxKQla1uMaQ1T34XM8hfCd34HTS7OMtZ+VEPDFMAhEx87RnUkmrwVYdSV
         bPPh9dWduL9PZOEFnkPK3Ux+7qIxPMFniI/RY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=UInbeO7PeocxosqFmWaBQTbAswTXTdveOyM53KaLbLrGctdH0JbnchbpGenzPZkrZL
         l5qAaFR+mwB80jqwPSDVA6bIsku02KDEDiYEfmej596TnJLRCoKIeBeS6vVrhreqK1Sf
         KXx3e9Q1y9GkhTXQpZH8twXMw1hArv/kwMyGQ=
Received: by 10.216.89.5 with SMTP id b5mr230760wef.143.1265650423403;
        Mon, 08 Feb 2010 09:33:43 -0800 (PST)
Received: from ?172.16.125.107? ([209.237.61.157])
        by mx.google.com with ESMTPS id n12sm12019918gve.29.2010.02.08.09.33.39
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 08 Feb 2010 09:33:42 -0800 (PST)
Message-ID: <4B704AEE.2010806@gmail.com>
Date: Mon, 08 Feb 2010 09:33:34 -0800
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Scale Out
References: <6A0CD00311164615A4C67D678E1C1DBC@sv.us.sonicwall.com>
In-Reply-To: <6A0CD00311164615A4C67D678E1C1DBC@sv.us.sonicwall.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Since you already have RMI interface, maybe you can parallel search on 
several nodes, collect the data, pick top ones, and send back results 
via RMI.

--
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes: http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got 2.6 Million Euro funding!


Ganesh wrote:
> Our indexes is growing and the sorted cache is taking huge amount of RAM. We want to add multiple nodes, and scale out the search. 
>
> Currently my applaication supports RMI interface and it return appliaction specific result set objects as hits. I could host multiple search instance in different nodes, then i may need to sort / combine the results. 
>
> Any thoughts on scaling / clustering? Whether i need to use Hadoop / Carrot etc...
>
> Regards
> Ganesh
>
>
> Send instant messages to your online friends http://in.messenger.yahoo.com 
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 08 18:07:22 2010
Return-Path: <java-user-return-44922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73453 invoked from network); 8 Feb 2010 18:07:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Feb 2010 18:07:22 -0000
Received: (qmail 2170 invoked by uid 500); 8 Feb 2010 18:07:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2131 invoked by uid 500); 8 Feb 2010 18:07:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2121 invoked by uid 99); 8 Feb 2010 18:07:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 18:07:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jake.mannix@gmail.com designates 209.85.222.173 as permitted sender)
Received: from [209.85.222.173] (HELO mail-pz0-f173.google.com) (209.85.222.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 18:07:10 +0000
Received: by pzk3 with SMTP id 3so207248pzk.5
        for <java-user@lucene.apache.org>; Mon, 08 Feb 2010 10:06:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=m3AC78vAogBW5AH+XBehJXi4EkATIKsCDHuaZG8Rlqo=;
        b=WyI07cKKJIGBQgaqWg6DHy1qhAtQHuea1qFlxTiwEt/9QWB9oMABaDtRrH889Ss1bR
         S0PJbox5SY2cVQhTQXZVhjwaG32KmRGISY0iAFUAN7LqltOlpUNRjYehDbhsNxXt01NU
         jG5CHU0Ad4UQRpzoRfxsCKGq0mzBqrMyKZDsU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=t6nB62zzndfbQ5msKMlGwis6fy1NDXjqj0ntel1AOEGPbT8BdDvm5gp4+2pUXJ5bY6
         wWOtjHtThWvAssoCldOjnqu30FXnjbxrLspJpSjjtqI2U1wjTCHCrkwte8jVC0tU40G3
         FLZdEmylLyYZYqihOjKv6udjQ0Q/jLT3u/jOs=
MIME-Version: 1.0
Received: by 10.114.49.17 with SMTP id w17mr4571732waw.103.1265652409061; Mon, 
	08 Feb 2010 10:06:49 -0800 (PST)
In-Reply-To: <4B704AEE.2010806@gmail.com>
References: <6A0CD00311164615A4C67D678E1C1DBC@sv.us.sonicwall.com>
	 <4B704AEE.2010806@gmail.com>
Date: Mon, 8 Feb 2010 10:06:48 -0800
Message-ID: <4b124c311002081006m44f83183h9713074d0b36bcaa@mail.gmail.com>
Subject: Re: Scale Out
From: Jake Mannix <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502e36a40536f047f1aaac5
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502e36a40536f047f1aaac5
Content-Type: text/plain; charset=ISO-8859-1

On Mon, Feb 8, 2010 at 9:33 AM, Chris Lu <chris.lu@gmail.com> wrote:

> Since you already have RMI interface, maybe you can parallel search on
> several nodes, collect the data, pick top ones, and send back results via
> RMI.
>

One thing to be careful about this, which you might already be aware of:
Query (and subclasses) implement Serializable, but doesn't declare a
serialversionUID, and so when you upgrade from lucene 2.4 to 2.9 or even 3.0
to 3.0.1, you can get serialization incompatibilities between your broker
and your leaf nodes if you pass serialized Query objects over RMI (and try
to do a rolling upgrade, one node at a time).  If you pass domain-specific
objects which you control, this doesn't happen, of course.

Not the end of the world, but good to keep in mind.

  -jake

--00504502e36a40536f047f1aaac5--

From java-user-return-44923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 08 21:00:18 2010
Return-Path: <java-user-return-44923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30402 invoked from network); 8 Feb 2010 21:00:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Feb 2010 21:00:18 -0000
Received: (qmail 8446 invoked by uid 500); 8 Feb 2010 21:00:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8371 invoked by uid 500); 8 Feb 2010 21:00:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8361 invoked by uid 99); 8 Feb 2010 21:00:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 21:00:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kimchy@gmail.com designates 209.85.218.214 as permitted sender)
Received: from [209.85.218.214] (HELO mail-bw0-f214.google.com) (209.85.218.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Feb 2010 21:00:06 +0000
Received: by bwz6 with SMTP id 6so5131780bwz.11
        for <java-user@lucene.apache.org>; Mon, 08 Feb 2010 12:59:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=hPlx+WD/cIBegp8BR8kDJfeaHUuCj8HlQ5C+GQI3ZK4=;
        b=kuP/nkhFjqBtC3LhSqBxg6l+VpCAZBoaiKDUpJ67BTXYaEvTEoW3kXmM+9GyzG8tvg
         TM9tOw9YJASut/mMhAyBeoj+5enNrhZsm7BlsrIOwFRCQe8ByRxtrLF1bdVu09nKoXGe
         ukKO7IhfnM+3W/TnZSUWFMnTMJtYa9PMrG32g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=eQy4FN1uJrRUYxUGkWZLl1obMWZNm9Z/GmP+Jf8EgqsludH4aFxssbyUBG1qps5QnJ
         AHJygbXIw0MS8D25Ujg+LGlJXMdU0jlIZc6cRE6lbU9SDtIU8GAYzFrE1N7rlS/O4WIi
         dJsQjYGdRgyuyjZVQAv9tfkQ78r+0R9jm8lyE=
MIME-Version: 1.0
Received: by 10.204.34.2 with SMTP id j2mr2498616bkd.202.1265662785917; Mon, 
	08 Feb 2010 12:59:45 -0800 (PST)
From: Shay Banon <kimchy@gmail.com>
Date: Mon, 8 Feb 2010 22:57:53 +0200
Message-ID: <c48b07361002081257j2554f1ffx179a2fd6ce0e0c5d@mail.gmail.com>
Subject: ElasticSearch - An open source, distributed, search engine built on 
	top of Lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032555a116c29456047f1d1491
X-Virus-Checked: Checked by ClamAV on apache.org

--00032555a116c29456047f1d1491
Content-Type: text/plain; charset=ISO-8859-1

Hi,

   Just wanted to announce the release of a new open source project called
ElasticSearch (http://www.elasticsearch.com/). Its an open source (Apache
2), distributed, search engine built on top of Lucene. There are many
features for ElasticSearch, you can find them here:
http://www.elasticsearch.com/products/elasticsearch/.

   Thanks to all of keep investing in Lucene, and to all Lucene users. I
hope some will find it useful.

Cheers,
Shay

--00032555a116c29456047f1d1491--

From java-user-return-44924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 07:27:37 2010
Return-Path: <java-user-return-44924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64614 invoked from network); 9 Feb 2010 07:27:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 07:27:36 -0000
Received: (qmail 5165 invoked by uid 500); 9 Feb 2010 07:27:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5046 invoked by uid 500); 9 Feb 2010 07:27:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5036 invoked by uid 99); 9 Feb 2010 07:27:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 07:27:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of iamrohitbanga@gmail.com designates 209.85.223.200 as permitted sender)
Received: from [209.85.223.200] (HELO mail-iw0-f200.google.com) (209.85.223.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 07:27:26 +0000
Received: by iwn38 with SMTP id 38so7803412iwn.11
        for <java-user@lucene.apache.org>; Mon, 08 Feb 2010 23:27:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=enYds0bsLJK723xF06AArnrvTJpceQouGeg6m1M+VMw=;
        b=qaZ8OPLHr5BqVS1LvG6zw/TUArQtxNWFrestjwQPbuw/SQWvG1ful8TeX/zK8o1Tj4
         LpgTfPUHhedfDu/99hMFcnb/RUW4djVoVDDwKU6/ILO6lct2SMnzKABka84evS6zyV1V
         Ro4nWCHxbRVu65MaK8kDgmXnTiwqYyd4NY0rM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=UF4NHweoC03t013fI/UOnzOqCgrboqAV9Opju5Kq/WlZfLw7LyiooIStfHjTtOIT/l
         W8RwBIBlSc90bf3nw4xeI8rd0KUxBO3NUd7lU2PA5LlscDQFxcb4Tom7jk+hVYnJ3IKi
         kIw8zr+5xzDaHJCf3Hc19E/qIc9Gngpt8nFec=
MIME-Version: 1.0
Received: by 10.231.167.204 with SMTP id r12mr282562iby.31.1265700425746; Mon, 
	08 Feb 2010 23:27:05 -0800 (PST)
From: Rohit Banga <iamrohitbanga@gmail.com>
Date: Tue, 9 Feb 2010 12:56:45 +0530
Message-ID: <f1cb36b91002082326n27343271jdae47327a4ad73fc@mail.gmail.com>
Subject: Lucene fields not analyzed
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0050450159f444d714047f25d8f8

--0050450159f444d714047f25d8f8
Content-Type: text/plain; charset=ISO-8859-1

Hello

i have a field that stores names of people. i have used the NOT_ANALYZED
parameter to index the names.

this is what happens during indexing

    doc.add(new Field("name", "\"" + name + "\"", Field.Store.YES,
Field.Index.NOT_ANALYZED));



when i search it, i create a query parser using standardanalyzer and append
~0.5 to the search query.

the problem is that if the indexed name is "Mr. Kumar", my search does not
work for "Mr. Kumar" while it does work for "Mr.Kumar" (without the space).

// searching code
        File index_directory = new File(INDEX_DIR_PATH);
        IndexReader reader =
IndexReader.open(FSDirectory.open(index_directory), true);
        Searcher searcher = new IndexSearcher(reader);

        Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_CURRENT);

        QueryParser parser = new QueryParser(Version.LUCENE_CURRENT, "name",
analyzer);

        Query query;
        query = parser.parse(text + "~0.5");

how to make it work?

Rohit Banga

--0050450159f444d714047f25d8f8--

From java-user-return-44925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 07:36:31 2010
Return-Path: <java-user-return-44925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66970 invoked from network); 9 Feb 2010 07:36:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 07:36:31 -0000
Received: (qmail 14081 invoked by uid 500); 9 Feb 2010 07:36:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14014 invoked by uid 500); 9 Feb 2010 07:36:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14004 invoked by uid 99); 9 Feb 2010 07:36:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 07:36:29 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 07:36:19 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 1673F45FE25
	for <java-user@lucene.apache.org>; Tue,  9 Feb 2010 08:35:57 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id vrxPNIv3h+y3 for <java-user@lucene.apache.org>;
	Tue,  9 Feb 2010 08:35:47 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id B727B45FE1D
	for <java-user@lucene.apache.org>; Tue,  9 Feb 2010 08:35:46 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <f1cb36b91002082326n27343271jdae47327a4ad73fc@mail.gmail.com>
In-Reply-To: <f1cb36b91002082326n27343271jdae47327a4ad73fc@mail.gmail.com>
Subject: RE: Lucene fields not analyzed
Date: Tue, 9 Feb 2010 08:35:46 +0100
Message-ID: <000c01caa95a$7ea258c0$7be70a40$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqpWWOAjAKs42qHR6KjU9yNhV3jZAAAEPeg
Content-Language: de

QueryParser uses the given Analyzer when constructing they query, so it =
will never hit a NOT_ANALYZED term. In general, it is a bad idea to use =
QueryParser on fields that are not analyzed. There are two possibilities =
to solve the problem:

- Instantiate the query to match the not-analyzed (but indexed field) =
directly as a TermQuery.
- Use a PerFieldAnalyzerWrapper and choose a specific analyzer for this =
field that does not touch your names (e.g. KeywordAnalyzer). Use this =
wrapped analyzer for the both searching an indexing (and use =
Field.Index.ANALYZED!).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Rohit Banga [mailto:iamrohitbanga@gmail.com]
> Sent: Tuesday, February 09, 2010 8:27 AM
> To: java-user@lucene.apache.org
> Subject: Lucene fields not analyzed
>=20
> Hello
>=20
> i have a field that stores names of people. i have used the
> NOT_ANALYZED
> parameter to index the names.
>=20
> this is what happens during indexing
>=20
>     doc.add(new Field("name", "\"" + name + "\"", Field.Store.YES,
> Field.Index.NOT_ANALYZED));
>=20
>=20
>=20
> when i search it, i create a query parser using standardanalyzer and
> append
> ~0.5 to the search query.
>=20
> the problem is that if the indexed name is "Mr. Kumar", my search does
> not
> work for "Mr. Kumar" while it does work for "Mr.Kumar" (without the
> space).
>=20
> // searching code
>         File index_directory =3D new File(INDEX_DIR_PATH);
>         IndexReader reader =3D
> IndexReader.open(FSDirectory.open(index_directory), true);
>         Searcher searcher =3D new IndexSearcher(reader);
>=20
>         Analyzer analyzer =3D new
> StandardAnalyzer(Version.LUCENE_CURRENT);
>=20
>         QueryParser parser =3D new QueryParser(Version.LUCENE_CURRENT,
> "name",
> analyzer);
>=20
>         Query query;
>         query =3D parser.parse(text + "~0.5");
>=20
> how to make it work?
>=20
> Rohit Banga


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 07:36:52 2010
Return-Path: <java-user-return-44926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67074 invoked from network); 9 Feb 2010 07:36:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 07:36:52 -0000
Received: (qmail 15908 invoked by uid 500); 9 Feb 2010 07:36:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15844 invoked by uid 500); 9 Feb 2010 07:36:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15834 invoked by uid 99); 9 Feb 2010 07:36:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 07:36:50 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [77.238.184.48] (HELO smtp110.mail.ukl.yahoo.com) (77.238.184.48)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 09 Feb 2010 07:36:43 +0000
Received: (qmail 9975 invoked from network); 9 Feb 2010 07:36:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Content-Type:Mime-Version:Subject:From:In-Reply-To:Date:Content-Transfer-Encoding:Message-Id:References:To:X-Mailer;
  b=tv1i5c/GNJJggkiTpo1OAIoVPeshqDYM+FSjYXZfoxZcVKyJT5A5tsUVzA44JNCHepOzpwkfbGnPgDgm6NxQsmPNal5vm8lBeLxsnhyYR2pRvUOR1BB7KpRf8nuIo9DMqA2J4uXxZmbuKbnCV9YQbI1ZJgXmRUU3EYtBFbx/NUE=  ;
Received: from i-194-106-34-5.freedom2surf.net (markharw00d@194.106.34.5 with plain)
        by smtp110.mail.ukl.yahoo.com with SMTP; 09 Feb 2010 07:36:20 +0000 GMT
X-Yahoo-SMTP: rdTGKYaswBBzjeOz17cOw.4gNsDMDjs6
X-YMail-OSG: QjbxemAVM1lMzBOHm4x6LtTj3lFgnilyXyrShPF941CBkhjtX7UmK6zC6VzQ.8VPAGovVjUHOW7tJrptGOz6vCibbGVBJpTVs7CSMfwhc5UDDIA12jRAAvGyB.nRO2DAsguLk1CNq9gJdxO8LOEgSO01rzsglhXPmoYmjzrCYdxyzlLEGyZDSFyzrljMqZc7zfC1ClGsIC00MR6PnpfX8FTw5wXhdO6JMgrpXPvQG0fVzv.buz8cNYs5GNme51X6
X-Yahoo-Newman-Property: ymail-3
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: Lucene fields not analyzed
From: Mark Harwood <markharw00d@yahoo.co.uk>
In-Reply-To: <f1cb36b91002082326n27343271jdae47327a4ad73fc@mail.gmail.com>
Date: Tue, 9 Feb 2010 07:36:19 +0000
Content-Transfer-Encoding: quoted-printable
Message-Id: <AB92AA76-FCE8-4323-A557-93AA1EDFC943@yahoo.co.uk>
References: <f1cb36b91002082326n27343271jdae47327a4ad73fc@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)

I suspect it is because QueryParser uses space characters to separate =
different clauses in a query string while you want the space to =
represent some content in your "name" field. Try escaping the space =
character.

Cheers
Mark



On 9 Feb 2010, at 07:26, Rohit Banga wrote:

> Hello
>=20
> i have a field that stores names of people. i have used the =
NOT_ANALYZED
> parameter to index the names.
>=20
> this is what happens during indexing
>=20
>    doc.add(new Field("name", "\"" + name + "\"", Field.Store.YES,
> Field.Index.NOT_ANALYZED));
>=20
>=20
>=20
> when i search it, i create a query parser using standardanalyzer and =
append
> ~0.5 to the search query.
>=20
> the problem is that if the indexed name is "Mr. Kumar", my search does =
not
> work for "Mr. Kumar" while it does work for "Mr.Kumar" (without the =
space).
>=20
> // searching code
>        File index_directory =3D new File(INDEX_DIR_PATH);
>        IndexReader reader =3D
> IndexReader.open(FSDirectory.open(index_directory), true);
>        Searcher searcher =3D new IndexSearcher(reader);
>=20
>        Analyzer analyzer =3D new =
StandardAnalyzer(Version.LUCENE_CURRENT);
>=20
>        QueryParser parser =3D new QueryParser(Version.LUCENE_CURRENT, =
"name",
> analyzer);
>=20
>        Query query;
>        query =3D parser.parse(text + "~0.5");
>=20
> how to make it work?
>=20
> Rohit Banga


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 08:04:02 2010
Return-Path: <java-user-return-44927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74983 invoked from network); 9 Feb 2010 08:04:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 08:04:01 -0000
Received: (qmail 38419 invoked by uid 500); 9 Feb 2010 08:03:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38334 invoked by uid 500); 9 Feb 2010 08:03:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38324 invoked by uid 99); 9 Feb 2010 08:03:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 08:03:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of iamrohitbanga@gmail.com designates 209.85.223.200 as permitted sender)
Received: from [209.85.223.200] (HELO mail-iw0-f200.google.com) (209.85.223.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 08:03:52 +0000
Received: by iwn38 with SMTP id 38so7826175iwn.11
        for <java-user@lucene.apache.org>; Tue, 09 Feb 2010 00:03:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=CEYOKDpBQPaH8U1nZIB4GgPoYEepa55/z+QBJAiwUG4=;
        b=w4DFmlwbD4cvJKdgre93ISXBquYaiZjbk2pSuN+LIY4DmPF9sE45NJWQ0vkJan98n2
         YWBi2Y1EBsJPBTyHcGfMvN43n0UrEGw6HOsPfDuPX/4XrWe6RQXQftwGR8RrUDMnW0J+
         as97+uQckPY7WNrcMhzHuDTKFHguYXH9vpJCU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=BLQLD25/hKUMExmcAGJd8YQXkSYPbe/8u/pY1Zs1SqBhzI5HTnuRg7JLbG35EB3O5/
         EvfGQMHTAaxHWto2KpoTQrUJdJ+GxBFcbhpQCwvgK9jZD750xLwKGAFrtZLfM5bh/Vso
         2WOfAOjb/CvDnwtkgK5vHfqNxODPtXoxa7dxQ=
MIME-Version: 1.0
Received: by 10.231.85.198 with SMTP id p6mr975149ibl.65.1265702608143; Tue, 
	09 Feb 2010 00:03:28 -0800 (PST)
In-Reply-To: <AB92AA76-FCE8-4323-A557-93AA1EDFC943@yahoo.co.uk>
References: <f1cb36b91002082326n27343271jdae47327a4ad73fc@mail.gmail.com> 
	<AB92AA76-FCE8-4323-A557-93AA1EDFC943@yahoo.co.uk>
From: Rohit Banga <iamrohitbanga@gmail.com>
Date: Tue, 9 Feb 2010 13:33:08 +0530
Message-ID: <f1cb36b91002090003m3ff9730qa84e495cea312dfa@mail.gmail.com>
Subject: Re: Lucene fields not analyzed
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485eaffaa5987fa047f265a62

--001485eaffaa5987fa047f265a62
Content-Type: text/plain; charset=ISO-8859-1

let us assume this is the only field that is relevant (others are stored and
not indexed).
i tried termquery and it does not work.
i also tried keyword analyzer and still could not make it work.

@Mark
i cannot escape the spaces in my query as i am using Lucene to identify
occurences of names among other things in the unstructured sentence.
so while adding names to the index, i used keyword analyzer and changed the
name to be added to the index to "Mr.\\ Kumar"
but still couldn't get it to work.






Rohit Banga


On Tue, Feb 9, 2010 at 1:06 PM, Mark Harwood <markharw00d@yahoo.co.uk>wrote:

> I suspect it is because QueryParser uses space characters to separate
> different clauses in a query string while you want the space to represent
> some content in your "name" field. Try escaping the space character.
>
> Cheers
> Mark
>
>
>
> On 9 Feb 2010, at 07:26, Rohit Banga wrote:
>
> > Hello
> >
> > i have a field that stores names of people. i have used the NOT_ANALYZED
> > parameter to index the names.
> >
> > this is what happens during indexing
> >
> >    doc.add(new Field("name", "\"" + name + "\"", Field.Store.YES,
> > Field.Index.NOT_ANALYZED));
> >
> >
> >
> > when i search it, i create a query parser using standardanalyzer and
> append
> > ~0.5 to the search query.
> >
> > the problem is that if the indexed name is "Mr. Kumar", my search does
> not
> > work for "Mr. Kumar" while it does work for "Mr.Kumar" (without the
> space).
> >
> > // searching code
> >        File index_directory = new File(INDEX_DIR_PATH);
> >        IndexReader reader =
> > IndexReader.open(FSDirectory.open(index_directory), true);
> >        Searcher searcher = new IndexSearcher(reader);
> >
> >        Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_CURRENT);
> >
> >        QueryParser parser = new QueryParser(Version.LUCENE_CURRENT,
> "name",
> > analyzer);
> >
> >        Query query;
> >        query = parser.parse(text + "~0.5");
> >
> > how to make it work?
> >
> > Rohit Banga
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001485eaffaa5987fa047f265a62--

From java-user-return-44928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 08:23:51 2010
Return-Path: <java-user-return-44928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79764 invoked from network); 9 Feb 2010 08:23:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 08:23:51 -0000
Received: (qmail 54801 invoked by uid 500); 9 Feb 2010 08:23:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54752 invoked by uid 500); 9 Feb 2010 08:23:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54742 invoked by uid 99); 9 Feb 2010 08:23:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 08:23:48 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [77.238.184.54] (HELO smtp123.mail.ukl.yahoo.com) (77.238.184.54)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 09 Feb 2010 08:23:42 +0000
Received: (qmail 19036 invoked from network); 9 Feb 2010 08:23:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Content-Type:Mime-Version:Subject:From:In-Reply-To:Date:Content-Transfer-Encoding:Message-Id:References:To:X-Mailer;
  b=KNbVblHvSApm2BciM1kKYIF7oQ0htfjzYrUGKs7Dhj6FxoJEy5QRc8HoQOY9RaX6R+Ri+k0GEFdKVsJUJ0Yc/mFFWcwN1WhXQStSaFmERzIlNoZ9d5RH9EOXiF+yfbG6r7YWFfKGJw2SfAy1NY/pXb87pu7nEgNyxSy4kjdJxSw=  ;
Received: from i-194-106-34-5.freedom2surf.net (markharw00d@194.106.34.5 with plain)
        by smtp123.mail.ukl.yahoo.com with SMTP; 09 Feb 2010 08:23:19 +0000 GMT
X-Yahoo-SMTP: rdTGKYaswBBzjeOz17cOw.4gNsDMDjs6
X-YMail-OSG: 56MRoSkVM1l.apgndP7qCRqbeHIpS71WNy7xuNv5rnsSGceFJlqVP1GXMj_AeyHcZQSgm98WDHweubEgbd9PeJ5N2ARLp2ta9TYKFfhkzWGBSWujPrS.4AJd9t8lj.OkJGh1jtWM3XzjGAfmtAOg7N47kVAdLM4RTwexHdl_DrJOWjIbUqNVjTzWlMZOMIRr5RAhqU0zMNNGWMyY.n0v.I69SMh98vwai7y6EggcKTJiZxIozhWY._utXubcb_MuH2HMWPdSKtDdMEti5Yhp_4aS6DAbPbTjMwk-
X-Yahoo-Newman-Property: ymail-3
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: Lucene fields not analyzed
From: Mark Harwood <markharw00d@yahoo.co.uk>
In-Reply-To: <f1cb36b91002090003m3ff9730qa84e495cea312dfa@mail.gmail.com>
Date: Tue, 9 Feb 2010 08:23:18 +0000
Content-Transfer-Encoding: quoted-printable
Message-Id: <C9C70852-037B-4F8D-8D83-75E740A960DA@yahoo.co.uk>
References: <f1cb36b91002082326n27343271jdae47327a4ad73fc@mail.gmail.com>  <AB92AA76-FCE8-4323-A557-93AA1EDFC943@yahoo.co.uk> <f1cb36b91002090003m3ff9730qa84e495cea312dfa@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)

Use Luke.

It can show you the index contents and your parsed query and should show =
what is breaking down here.

On 9 Feb 2010, at 08:03, Rohit Banga wrote:

> let us assume this is the only field that is relevant (others are =
stored and
> not indexed).
> i tried termquery and it does not work.
> i also tried keyword analyzer and still could not make it work.
>=20
> @Mark
> i cannot escape the spaces in my query as i am using Lucene to =
identify
> occurences of names among other things in the unstructured sentence.
> so while adding names to the index, i used keyword analyzer and =
changed the
> name to be added to the index to "Mr.\\ Kumar"
> but still couldn't get it to work.
>=20
>=20
>=20
>=20
>=20
>=20
> Rohit Banga
>=20
>=20
> On Tue, Feb 9, 2010 at 1:06 PM, Mark Harwood =
<markharw00d@yahoo.co.uk>wrote:
>=20
>> I suspect it is because QueryParser uses space characters to separate
>> different clauses in a query string while you want the space to =
represent
>> some content in your "name" field. Try escaping the space character.
>>=20
>> Cheers
>> Mark
>>=20
>>=20
>>=20
>> On 9 Feb 2010, at 07:26, Rohit Banga wrote:
>>=20
>>> Hello
>>>=20
>>> i have a field that stores names of people. i have used the =
NOT_ANALYZED
>>> parameter to index the names.
>>>=20
>>> this is what happens during indexing
>>>=20
>>>   doc.add(new Field("name", "\"" + name + "\"", Field.Store.YES,
>>> Field.Index.NOT_ANALYZED));
>>>=20
>>>=20
>>>=20
>>> when i search it, i create a query parser using standardanalyzer and
>> append
>>> ~0.5 to the search query.
>>>=20
>>> the problem is that if the indexed name is "Mr. Kumar", my search =
does
>> not
>>> work for "Mr. Kumar" while it does work for "Mr.Kumar" (without the
>> space).
>>>=20
>>> // searching code
>>>       File index_directory =3D new File(INDEX_DIR_PATH);
>>>       IndexReader reader =3D
>>> IndexReader.open(FSDirectory.open(index_directory), true);
>>>       Searcher searcher =3D new IndexSearcher(reader);
>>>=20
>>>       Analyzer analyzer =3D new =
StandardAnalyzer(Version.LUCENE_CURRENT);
>>>=20
>>>       QueryParser parser =3D new QueryParser(Version.LUCENE_CURRENT,
>> "name",
>>> analyzer);
>>>=20
>>>       Query query;
>>>       query =3D parser.parse(text + "~0.5");
>>>=20
>>> how to make it work?
>>>=20
>>> Rohit Banga
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 08:28:29 2010
Return-Path: <java-user-return-44929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80831 invoked from network); 9 Feb 2010 08:28:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 08:28:29 -0000
Received: (qmail 61517 invoked by uid 500); 9 Feb 2010 08:28:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61429 invoked by uid 500); 9 Feb 2010 08:28:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61419 invoked by uid 99); 9 Feb 2010 08:28:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 08:28:26 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 08:28:17 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 541E245FD88
	for <java-user@lucene.apache.org>; Tue,  9 Feb 2010 09:27:56 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id JxGzwXyVccZq for <java-user@lucene.apache.org>;
	Tue,  9 Feb 2010 09:27:46 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 7678C45FD87
	for <java-user@lucene.apache.org>; Tue,  9 Feb 2010 09:27:45 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <f1cb36b91002082326n27343271jdae47327a4ad73fc@mail.gmail.com> 	<AB92AA76-FCE8-4323-A557-93AA1EDFC943@yahoo.co.uk> <f1cb36b91002090003m3ff9730qa84e495cea312dfa@mail.gmail.com>
In-Reply-To: <f1cb36b91002090003m3ff9730qa84e495cea312dfa@mail.gmail.com>
Subject: RE: Lucene fields not analyzed
Date: Tue, 9 Feb 2010 09:27:45 +0100
Message-ID: <001601caa961$c1b5f610$4521e230$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqpXnUXVBx+f63KQ8u4twZprqqxtQAAs9dg
Content-Language: de

If you don't get it working that way, then you have to ask you the =
question: Why do you want it indexed that way? Is it because you don't =
want to find all people in that field when you add ony "Mr." to a search =
query? It looks like you use StandardAnalyzer, and in this case, I would =
add "mr", not "mr!", to the stop word list and index the name field as =
any other field. Before doing this, it would be good to explain, what =
you are intending to do/prevent by indexing with NOT_ANALYZED, which is =
the source of your problem.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Rohit Banga [mailto:iamrohitbanga@gmail.com]
> Sent: Tuesday, February 09, 2010 9:03 AM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene fields not analyzed
>=20
> let us assume this is the only field that is relevant (others are
> stored and
> not indexed).
> i tried termquery and it does not work.
> i also tried keyword analyzer and still could not make it work.
>=20
> @Mark
> i cannot escape the spaces in my query as i am using Lucene to =
identify
> occurences of names among other things in the unstructured sentence.
> so while adding names to the index, i used keyword analyzer and =
changed
> the
> name to be added to the index to "Mr.\\ Kumar"
> but still couldn't get it to work.
>=20
>=20
>=20
>=20
>=20
>=20
> Rohit Banga
>=20
>=20
> On Tue, Feb 9, 2010 at 1:06 PM, Mark Harwood
> <markharw00d@yahoo.co.uk>wrote:
>=20
> > I suspect it is because QueryParser uses space characters to =
separate
> > different clauses in a query string while you want the space to
> represent
> > some content in your "name" field. Try escaping the space character.
> >
> > Cheers
> > Mark
> >
> >
> >
> > On 9 Feb 2010, at 07:26, Rohit Banga wrote:
> >
> > > Hello
> > >
> > > i have a field that stores names of people. i have used the
> NOT_ANALYZED
> > > parameter to index the names.
> > >
> > > this is what happens during indexing
> > >
> > >    doc.add(new Field("name", "\"" + name + "\"", Field.Store.YES,
> > > Field.Index.NOT_ANALYZED));
> > >
> > >
> > >
> > > when i search it, i create a query parser using standardanalyzer
> and
> > append
> > > ~0.5 to the search query.
> > >
> > > the problem is that if the indexed name is "Mr. Kumar", my search
> does
> > not
> > > work for "Mr. Kumar" while it does work for "Mr.Kumar" (without =
the
> > space).
> > >
> > > // searching code
> > >        File index_directory =3D new File(INDEX_DIR_PATH);
> > >        IndexReader reader =3D
> > > IndexReader.open(FSDirectory.open(index_directory), true);
> > >        Searcher searcher =3D new IndexSearcher(reader);
> > >
> > >        Analyzer analyzer =3D new
> StandardAnalyzer(Version.LUCENE_CURRENT);
> > >
> > >        QueryParser parser =3D new =
QueryParser(Version.LUCENE_CURRENT,
> > "name",
> > > analyzer);
> > >
> > >        Query query;
> > >        query =3D parser.parse(text + "~0.5");
> > >
> > > how to make it work?
> > >
> > > Rohit Banga
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 09:13:00 2010
Return-Path: <java-user-return-44930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91576 invoked from network); 9 Feb 2010 09:13:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 09:13:00 -0000
Received: (qmail 7423 invoked by uid 500); 9 Feb 2010 09:12:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7347 invoked by uid 500); 9 Feb 2010 09:12:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7336 invoked by uid 99); 9 Feb 2010 09:12:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 09:12:58 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of iamrohitbanga@gmail.com designates 209.85.223.200 as permitted sender)
Received: from [209.85.223.200] (HELO mail-iw0-f200.google.com) (209.85.223.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 09:12:47 +0000
Received: by iwn38 with SMTP id 38so7868540iwn.11
        for <java-user@lucene.apache.org>; Tue, 09 Feb 2010 01:12:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=9KYCqCWDjh9psd3ktWV5vCD3sraOIfpCKtE1n+aSo/s=;
        b=ipC2A4aDh9l6g3reBHsuWKy9eTe0qVTJqa1XAsqZSz0TdIRQX9TXzmrVNoHiidy2zK
         oD7N7eh/f7T+1KRD7Yf59xoouf6T2vlXn6gqaA3d4xjsojs3ChbF/dzrgo6PyOVeG9zj
         NNDHPL2Y8h6vZkgiutYww2mWCvUF+buRIa7HE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=UtZ5WCHnCIpJNzaclv0b8bO0zlgAt5X2jlbQOM6ZAZuOEM7Umzn3QsMfPcxuqsBqwm
         REa9b58rXFwtMe2naIdVzYV2TyeX5ytdFa4UvZ3nTcPifmcS0k4FGG1DfkEBbzB2FxzT
         xvDo0O3f1asXAhd8wOYY+pwKI7fpBOcZ9chsc=
MIME-Version: 1.0
Received: by 10.231.143.148 with SMTP id v20mr1598592ibu.14.1265706746099; 
	Tue, 09 Feb 2010 01:12:26 -0800 (PST)
In-Reply-To: <001601caa961$c1b5f610$4521e230$@de>
References: <f1cb36b91002082326n27343271jdae47327a4ad73fc@mail.gmail.com> 
	<AB92AA76-FCE8-4323-A557-93AA1EDFC943@yahoo.co.uk> <f1cb36b91002090003m3ff9730qa84e495cea312dfa@mail.gmail.com> 
	<001601caa961$c1b5f610$4521e230$@de>
From: Rohit Banga <iamrohitbanga@gmail.com>
Date: Tue, 9 Feb 2010 14:42:06 +0530
Message-ID: <f1cb36b91002090112t799cd503ve2b73ccab242a2a6@mail.gmail.com>
Subject: Re: Lucene fields not analyzed
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e647580cfdb75c047f2750ec
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e647580cfdb75c047f2750ec
Content-Type: text/plain; charset=ISO-8859-1

i'll try using Luke.

how i want to use Lucene?

there is a sentence that may contain the names of some people from among
those in a list. the names may be incomplete or may have spelling mistakes.

so i created a lucene index, with each person as a document.

eg.

Mr. Arun Kumar

with a hit highlighter i get

<B>Mr</B>. <B>Arun</B> <B>Kumar</B>

what i want is
<B>Mr. Arun Kumar</B>

even when there are spelling mistakes.


Rohit Banga


On Tue, Feb 9, 2010 at 1:57 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> If you don't get it working that way, then you have to ask you the
> question: Why do you want it indexed that way? Is it because you don't want
> to find all people in that field when you add ony "Mr." to a search query?
> It looks like you use StandardAnalyzer, and in this case, I would add "mr",
> not "mr!", to the stop word list and index the name field as any other
> field. Before doing this, it would be good to explain, what you are
> intending to do/prevent by indexing with NOT_ANALYZED, which is the source
> of your problem.
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Rohit Banga [mailto:iamrohitbanga@gmail.com]
> > Sent: Tuesday, February 09, 2010 9:03 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Lucene fields not analyzed
> >
> > let us assume this is the only field that is relevant (others are
> > stored and
> > not indexed).
> > i tried termquery and it does not work.
> > i also tried keyword analyzer and still could not make it work.
> >
> > @Mark
> > i cannot escape the spaces in my query as i am using Lucene to identify
> > occurences of names among other things in the unstructured sentence.
> > so while adding names to the index, i used keyword analyzer and changed
> > the
> > name to be added to the index to "Mr.\\ Kumar"
> > but still couldn't get it to work.
> >
> >
> >
> >
> >
> >
> > Rohit Banga
> >
> >
> > On Tue, Feb 9, 2010 at 1:06 PM, Mark Harwood
> > <markharw00d@yahoo.co.uk>wrote:
> >
> > > I suspect it is because QueryParser uses space characters to separate
> > > different clauses in a query string while you want the space to
> > represent
> > > some content in your "name" field. Try escaping the space character.
> > >
> > > Cheers
> > > Mark
> > >
> > >
> > >
> > > On 9 Feb 2010, at 07:26, Rohit Banga wrote:
> > >
> > > > Hello
> > > >
> > > > i have a field that stores names of people. i have used the
> > NOT_ANALYZED
> > > > parameter to index the names.
> > > >
> > > > this is what happens during indexing
> > > >
> > > >    doc.add(new Field("name", "\"" + name + "\"", Field.Store.YES,
> > > > Field.Index.NOT_ANALYZED));
> > > >
> > > >
> > > >
> > > > when i search it, i create a query parser using standardanalyzer
> > and
> > > append
> > > > ~0.5 to the search query.
> > > >
> > > > the problem is that if the indexed name is "Mr. Kumar", my search
> > does
> > > not
> > > > work for "Mr. Kumar" while it does work for "Mr.Kumar" (without the
> > > space).
> > > >
> > > > // searching code
> > > >        File index_directory = new File(INDEX_DIR_PATH);
> > > >        IndexReader reader =
> > > > IndexReader.open(FSDirectory.open(index_directory), true);
> > > >        Searcher searcher = new IndexSearcher(reader);
> > > >
> > > >        Analyzer analyzer = new
> > StandardAnalyzer(Version.LUCENE_CURRENT);
> > > >
> > > >        QueryParser parser = new QueryParser(Version.LUCENE_CURRENT,
> > > "name",
> > > > analyzer);
> > > >
> > > >        Query query;
> > > >        query = parser.parse(text + "~0.5");
> > > >
> > > > how to make it work?
> > > >
> > > > Rohit Banga
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e647580cfdb75c047f2750ec--

From java-user-return-44931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 09:16:55 2010
Return-Path: <java-user-return-44931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92515 invoked from network); 9 Feb 2010 09:16:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 09:16:55 -0000
Received: (qmail 13828 invoked by uid 500); 9 Feb 2010 09:16:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13765 invoked by uid 500); 9 Feb 2010 09:16:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13755 invoked by uid 99); 9 Feb 2010 09:16:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 09:16:53 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of iamrohitbanga@gmail.com designates 209.85.223.200 as permitted sender)
Received: from [209.85.223.200] (HELO mail-iw0-f200.google.com) (209.85.223.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 09:16:44 +0000
Received: by iwn38 with SMTP id 38so7870990iwn.11
        for <java-user@lucene.apache.org>; Tue, 09 Feb 2010 01:16:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=zTP99x0OhclfTP2y5LtrcfSh9wIe714u0fMKxKlwpXE=;
        b=O555zlpCPrgzoMj/AfpI2pbQBRksTU2E3FWwE+ZW/xabSNGPZJkEV4sXIVjkjTec31
         TF6gTn3HYIJhW4x7oISwsULmoIBk6TJY2UjimsIthhNXtXa73F7knbVkmbczkWp/NutL
         GcPoU0n5c+SaglVtoNCCUGHck7BvF2cnrwEXI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=eyghSAyrBKEqa8td+KuFNavkDoMb/V01heqP3vCSXM8GHMfg93laH6jZqyJVfjHwS6
         OLrxeRlX5Ck+ynfOvuD5hNHofXDK95RL67OmkDFokIVsCb0jegpl5fd4YeID/9B4vpsv
         7Xo5ZuVsP3vujNtUMBaODVG1AKZOMN8FR1B9w=
MIME-Version: 1.0
Received: by 10.231.145.70 with SMTP id c6mr4422081ibv.36.1265706983147; Tue, 
	09 Feb 2010 01:16:23 -0800 (PST)
In-Reply-To: <f1cb36b91002090112t799cd503ve2b73ccab242a2a6@mail.gmail.com>
References: <f1cb36b91002082326n27343271jdae47327a4ad73fc@mail.gmail.com> 
	<AB92AA76-FCE8-4323-A557-93AA1EDFC943@yahoo.co.uk> <f1cb36b91002090003m3ff9730qa84e495cea312dfa@mail.gmail.com> 
	<001601caa961$c1b5f610$4521e230$@de> <f1cb36b91002090112t799cd503ve2b73ccab242a2a6@mail.gmail.com>
From: Rohit Banga <iamrohitbanga@gmail.com>
Date: Tue, 9 Feb 2010 14:46:03 +0530
Message-ID: <f1cb36b91002090116v44b299c4j1148813479ac920b@mail.gmail.com>
Subject: Re: Lucene fields not analyzed
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485eb9e321ec7a9047f275f2b

--001485eb9e321ec7a9047f275f2b
Content-Type: text/plain; charset=ISO-8859-1

moreover, search for Mr. Arun Kumar also matches other names because Mr.
matches.
i am ready to use Mr. as a stop word in an analyzer.

Rohit Banga


On Tue, Feb 9, 2010 at 2:42 PM, Rohit Banga <iamrohitbanga@gmail.com> wrote:

> i'll try using Luke.
>
> how i want to use Lucene?
>
> there is a sentence that may contain the names of some people from among
> those in a list. the names may be incomplete or may have spelling mistakes.
>
> so i created a lucene index, with each person as a document.
>
> eg.
>
> Mr. Arun Kumar
>
> with a hit highlighter i get
>
> <B>Mr</B>. <B>Arun</B> <B>Kumar</B>
>
> what i want is
> <B>Mr. Arun Kumar</B>
>
> even when there are spelling mistakes.
>
>
> Rohit Banga
>
>
>
> On Tue, Feb 9, 2010 at 1:57 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
>
>> If you don't get it working that way, then you have to ask you the
>> question: Why do you want it indexed that way? Is it because you don't want
>> to find all people in that field when you add ony "Mr." to a search query?
>> It looks like you use StandardAnalyzer, and in this case, I would add "mr",
>> not "mr!", to the stop word list and index the name field as any other
>> field. Before doing this, it would be good to explain, what you are
>> intending to do/prevent by indexing with NOT_ANALYZED, which is the source
>> of your problem.
>>
>> Uwe
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>
>> > -----Original Message-----
>> > From: Rohit Banga [mailto:iamrohitbanga@gmail.com]
>> > Sent: Tuesday, February 09, 2010 9:03 AM
>> > To: java-user@lucene.apache.org
>> > Subject: Re: Lucene fields not analyzed
>> >
>> > let us assume this is the only field that is relevant (others are
>> > stored and
>> > not indexed).
>> > i tried termquery and it does not work.
>> > i also tried keyword analyzer and still could not make it work.
>> >
>> > @Mark
>> > i cannot escape the spaces in my query as i am using Lucene to identify
>> > occurences of names among other things in the unstructured sentence.
>> > so while adding names to the index, i used keyword analyzer and changed
>> > the
>> > name to be added to the index to "Mr.\\ Kumar"
>> > but still couldn't get it to work.
>> >
>> >
>> >
>> >
>> >
>> >
>> > Rohit Banga
>> >
>> >
>> > On Tue, Feb 9, 2010 at 1:06 PM, Mark Harwood
>> > <markharw00d@yahoo.co.uk>wrote:
>> >
>> > > I suspect it is because QueryParser uses space characters to separate
>> > > different clauses in a query string while you want the space to
>> > represent
>> > > some content in your "name" field. Try escaping the space character.
>> > >
>> > > Cheers
>> > > Mark
>> > >
>> > >
>> > >
>> > > On 9 Feb 2010, at 07:26, Rohit Banga wrote:
>> > >
>> > > > Hello
>> > > >
>> > > > i have a field that stores names of people. i have used the
>> > NOT_ANALYZED
>> > > > parameter to index the names.
>> > > >
>> > > > this is what happens during indexing
>> > > >
>> > > >    doc.add(new Field("name", "\"" + name + "\"", Field.Store.YES,
>> > > > Field.Index.NOT_ANALYZED));
>> > > >
>> > > >
>> > > >
>> > > > when i search it, i create a query parser using standardanalyzer
>> > and
>> > > append
>> > > > ~0.5 to the search query.
>> > > >
>> > > > the problem is that if the indexed name is "Mr. Kumar", my search
>> > does
>> > > not
>> > > > work for "Mr. Kumar" while it does work for "Mr.Kumar" (without the
>> > > space).
>> > > >
>> > > > // searching code
>> > > >        File index_directory = new File(INDEX_DIR_PATH);
>> > > >        IndexReader reader =
>> > > > IndexReader.open(FSDirectory.open(index_directory), true);
>> > > >        Searcher searcher = new IndexSearcher(reader);
>> > > >
>> > > >        Analyzer analyzer = new
>> > StandardAnalyzer(Version.LUCENE_CURRENT);
>> > > >
>> > > >        QueryParser parser = new QueryParser(Version.LUCENE_CURRENT,
>> > > "name",
>> > > > analyzer);
>> > > >
>> > > >        Query query;
>> > > >        query = parser.parse(text + "~0.5");
>> > > >
>> > > > how to make it work?
>> > > >
>> > > > Rohit Banga
>> > >
>> > >
>> > > ---------------------------------------------------------------------
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--001485eb9e321ec7a9047f275f2b--

From java-user-return-44932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 12:05:34 2010
Return-Path: <java-user-return-44932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51171 invoked from network); 9 Feb 2010 12:05:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 12:05:32 -0000
Received: (qmail 89295 invoked by uid 500); 9 Feb 2010 12:05:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89209 invoked by uid 500); 9 Feb 2010 12:05:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89199 invoked by uid 99); 9 Feb 2010 12:05:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 12:05:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 12:05:20 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ApoEALPecEsKhJ0L/2dsb2JhbADZE4RUBA
X-IronPort-AV: E=Sophos;i="4.49,435,1262563200"; 
   d="scan'208";a="10140689"
Received: from unknown (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx2.nuigalway.ie with ESMTP; 09 Feb 2010 12:04:56 +0000
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 9 Feb 2010 12:04:55 +0000
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 9 Feb 2010 12:04:55 +0000
Message-ID: <4B714F5C.2040709@deri.org>
Date: Tue, 09 Feb 2010 12:04:44 +0000
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.9pre) Gecko/20100205 Lightning/1.0pre Shredder/3.0.2pre
MIME-Version: 1.0
To: java-user <java-user@lucene.apache.org>
CC: Michael McCandless <lucene@mikemccandless.com>
Subject: Flex & Docs/AndPositionsEnum
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 09 Feb 2010 12:04:55.0475 (UTC) FILETIME=[17DD0830:01CAA980]

Hi Michael,

I have updated my lucene-1458, and I discovered there was big 
modifications in the StandardCodec interface.
I updated my own codecs to this new interface, but I encounter a 
problem. My codecs are creating DocsAndPositionsEnum subclasses that 
allow to access more information than simply the doc, freq and position 
(I have other information encoded into the Prox file).
In the code, to be able to manipulate the additional interface that my 
classes provide, I was casting the DocsAndPositionsEnum object returned 
by IndexReader#termPositionsEnum() into the correct subclass. While this 
approach was working in the previous flewx branch, this does not work 
anymore with the last committed changes. In certain cases, the 
IndexReader#termPositionsEnum() does not return the DocsAndPositionsEnum 
created by the StandardPostingsReader, but a MultiDocsAndPositionsEnum. 
However, I am not able either to subclass the MultiDocsAndPositionsEnum 
or to wrap it into a decorator because it is declared as 'private static 
final' in DirectoryReader.

Are these classes (MultiTermEnum, MultiDocsAndPositionsEnum, etc.) 
hidden in a voluntary manner ? Or is there is another way to extends 
StandardCodec without having to deal with these classes ?

Cheers
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 12:17:11 2010
Return-Path: <java-user-return-44933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54710 invoked from network); 9 Feb 2010 12:17:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 12:17:11 -0000
Received: (qmail 7436 invoked by uid 500); 9 Feb 2010 12:17:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7363 invoked by uid 500); 9 Feb 2010 12:17:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7352 invoked by uid 99); 9 Feb 2010 12:17:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 12:17:09 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 12:16:59 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 1AD6F45FD75
	for <java-user@lucene.apache.org>; Tue,  9 Feb 2010 13:16:38 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id a5OoB5z23PZ4 for <java-user@lucene.apache.org>;
	Tue,  9 Feb 2010 13:16:27 +0100 (CET)
Received: from VEGA (unknown [134.102.249.75])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id BA77845FC2F
	for <java-user@lucene.apache.org>; Tue,  9 Feb 2010 13:16:27 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4B714F5C.2040709@deri.org>
In-Reply-To: <4B714F5C.2040709@deri.org>
Subject: RE: Flex & Docs/AndPositionsEnum
Date: Tue, 9 Feb 2010 13:16:28 +0100
Message-ID: <002701caa981$b5400ef0$1fc02cd0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqpgDJnbm/vAmIHQGOOxSY+8vufNgAAJSCw
Content-Language: de

Hi Renaud,

In flex the correct way to add additional posting data to these classes =
would be the usage of custom attributes, registered in the attributes() =
AttributeSource.

Due to some limitations, there is currently no working support in =
MultiReaders to have a "view" on the underlying Enums, but we are =
working on that.

In general what you do (if it works in future):
Define an interface for your extensions based on the Attribute interface =
and also provide the implementation class. Then call =
YourEnums.attributes().addAttribute(YourInterface.class) in the ctor of =
your enum, store a local reference to the attribute and fill this on =
iteration. Any consumer of this Enum can check using =
TermPositions.attributes().hasAttribute/getAttribute/addAttribute for =
the existence of the the same and then read the attributes during =
iteration. There is no need to change the Enum class API at all.

It works in the same way like the TokenStreams since 2.9/3.0.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Renaud Delbru [mailto:renaud.delbru@deri.org]
> Sent: Tuesday, February 09, 2010 1:05 PM
> To: java-user
> Cc: Michael McCandless
> Subject: Flex & Docs/AndPositionsEnum
>=20
> Hi Michael,
>=20
> I have updated my lucene-1458, and I discovered there was big
> modifications in the StandardCodec interface.
> I updated my own codecs to this new interface, but I encounter a
> problem. My codecs are creating DocsAndPositionsEnum subclasses that
> allow to access more information than simply the doc, freq and =
position
> (I have other information encoded into the Prox file).
> In the code, to be able to manipulate the additional interface that my
> classes provide, I was casting the DocsAndPositionsEnum object =
returned
> by IndexReader#termPositionsEnum() into the correct subclass. While
> this
> approach was working in the previous flewx branch, this does not work
> anymore with the last committed changes. In certain cases, the
> IndexReader#termPositionsEnum() does not return the
> DocsAndPositionsEnum
> created by the StandardPostingsReader, but a =
MultiDocsAndPositionsEnum.
> However, I am not able either to subclass the =
MultiDocsAndPositionsEnum
> or to wrap it into a decorator because it is declared as 'private
> static
> final' in DirectoryReader.
>=20
> Are these classes (MultiTermEnum, MultiDocsAndPositionsEnum, etc.)
> hidden in a voluntary manner ? Or is there is another way to extends
> StandardCodec without having to deal with these classes ?
>=20
> Cheers
> --
> Renaud Delbru
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 12:44:42 2010
Return-Path: <java-user-return-44934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68260 invoked from network); 9 Feb 2010 12:44:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 12:44:42 -0000
Received: (qmail 34534 invoked by uid 500); 9 Feb 2010 12:44:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34448 invoked by uid 500); 9 Feb 2010 12:44:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34438 invoked by uid 99); 9 Feb 2010 12:44:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 12:44:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [140.203.201.100] (HELO mx1.nuigalway.ie) (140.203.201.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 12:44:30 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ApsEAJvncEsKhJ0L/2dsb2JhbACDMsVYkBSBL4JKWwQ
X-IronPort-AV: E=Sophos;i="4.49,436,1262563200"; 
   d="scan'208";a="132421370"
Received: from unknown (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx1.nuigalway.ie with ESMTP; 09 Feb 2010 12:44:08 +0000
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 9 Feb 2010 12:44:08 +0000
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 9 Feb 2010 12:44:08 +0000
Message-ID: <4B71588D.3060001@deri.org>
Date: Tue, 09 Feb 2010 12:43:57 +0000
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.9pre) Gecko/20100205 Lightning/1.0pre Shredder/3.0.2pre
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Flex & Docs/AndPositionsEnum
References: <4B714F5C.2040709@deri.org> <002701caa981$b5400ef0$1fc02cd0$@de>
In-Reply-To: <002701caa981$b5400ef0$1fc02cd0$@de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 09 Feb 2010 12:44:08.0101 (UTC) FILETIME=[92234550:01CAA985]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Uwe,

On 09/02/10 12:16, Uwe Schindler wrote:
> In flex the correct way to add additional posting data to these classes would be the usage of custom attributes, registered in the attributes() AttributeSource.
>    
Ok, I have changed my codes to use the AttributeSource interface.
> Due to some limitations, there is currently no working support in MultiReaders to have a "view" on the underlying Enums, but we are working on that.
>    
But, I have still the same problem, it seems that 
MultiDocsAndPositionsEnum does not have access to the underlying 
attributes added to my DocsAndPositionsEnum subclass. I got the 
following exception (IllegalArgumentException):
"This AttributeSource does not have the attribute 
'org.sindice.siren.analysis.attributes.TupleAttribute'."

Is this related to your previous comment, i.e., that MultiReaders do not 
have a view on the underlying Enums ?
> In general what you do (if it works in future):
> Define an interface for your extensions based on the Attribute interface and also provide the implementation class. Then call YourEnums.attributes().addAttribute(YourInterface.class) in the ctor of your enum, store a local reference to the attribute and fill this on iteration. Any consumer of this Enum can check using TermPositions.attributes().hasAttribute/getAttribute/addAttribute for the existence of the the same and then read the attributes during iteration. There is no need to change the Enum class API at all.
>    
Ok, it works like a charm except the problem related to MultiReaders.

Thanks
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 13:05:29 2010
Return-Path: <java-user-return-44935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76496 invoked from network); 9 Feb 2010 13:05:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 13:05:29 -0000
Received: (qmail 51706 invoked by uid 500); 9 Feb 2010 13:05:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51625 invoked by uid 500); 9 Feb 2010 13:05:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51615 invoked by uid 99); 9 Feb 2010 13:05:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 13:05:27 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 13:05:19 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 069C345FDE0
	for <java-user@lucene.apache.org>; Tue,  9 Feb 2010 14:04:58 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id xpjrT1xSVit1 for <java-user@lucene.apache.org>;
	Tue,  9 Feb 2010 14:04:55 +0100 (CET)
Received: from VEGA (unknown [134.102.249.75])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 9B50245FDE1
	for <java-user@lucene.apache.org>; Tue,  9 Feb 2010 14:04:55 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4B714F5C.2040709@deri.org> <002701caa981$b5400ef0$1fc02cd0$@de> <4B71588D.3060001@deri.org>
In-Reply-To: <4B71588D.3060001@deri.org>
Subject: RE: Flex & Docs/AndPositionsEnum
Date: Tue, 9 Feb 2010 14:04:54 +0100
Message-ID: <002801caa988$7a5c5bc0$6f151340$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqphbESuOnm1UWnRdORWmuuER5XXwAAgJWg
Content-Language: de

Hi Renaud,

=20
> On 09/02/10 12:16, Uwe Schindler wrote:
> > In flex the correct way to add additional posting data to these
> classes would be the usage of custom attributes, registered in the
> attributes() AttributeSource.
> >
> Ok, I have changed my codes to use the AttributeSource interface.
> > Due to some limitations, there is currently no working support in
> MultiReaders to have a "view" on the underlying Enums, but we are
> working on that.
> >
> But, I have still the same problem, it seems that
> MultiDocsAndPositionsEnum does not have access to the underlying
> attributes added to my DocsAndPositionsEnum subclass. I got the
> following exception (IllegalArgumentException):
> "This AttributeSource does not have the attribute
> 'org.sindice.siren.analysis.attributes.TupleAttribute'."
>=20
> Is this related to your previous comment, i.e., that MultiReaders do
> not
> have a view on the underlying Enums ?

Exactly, MultiEnums have their own attributes at the moment, there is no =
"Proxy" view on it. For this to work, proxy AttributeImpls are needed =
and there is no support at the moment.

See https://issues.apache.org/jira/browse/LUCENE-2154

The problem behind is that when a consumer gets/adds an Attribute, all =
subreaders  must use the same attribute or the =
MultiReader/DirectoryReader must proxy the attributes. For this to work =
we need dynamic proxies or you also have to implement ProxyImpls: =
Attribute, AttributeImpl, AttributeProxyImpl.

We have no progress for that at the moment, so I am sorry, we have no =
working support for attributes in MultiReaders (which all =
DirectoryReaders are, because a index could consist of more than one =
segment).

> > In general what you do (if it works in future):
> > Define an interface for your extensions based on the Attribute
> interface and also provide the implementation class. Then call
> YourEnums.attributes().addAttribute(YourInterface.class) in the ctor =
of
> your enum, store a local reference to the attribute and fill this on
> iteration. Any consumer of this Enum can check using
> TermPositions.attributes().hasAttribute/getAttribute/addAttribute for
> the existence of the the same and then read the attributes during
> iteration. There is no need to change the Enum class API at all.
> >
> Ok, it works like a charm except the problem related to MultiReaders.

See above.

But attributes are the way to go for this extended posting/prox lists.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 13:36:14 2010
Return-Path: <java-user-return-44936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91254 invoked from network); 9 Feb 2010 13:36:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 13:36:14 -0000
Received: (qmail 90226 invoked by uid 500); 9 Feb 2010 13:36:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90146 invoked by uid 500); 9 Feb 2010 13:36:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90136 invoked by uid 99); 9 Feb 2010 13:36:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 13:36:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.216.204] (HELO mail-px0-f204.google.com) (209.85.216.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 13:36:05 +0000
Received: by pxi42 with SMTP id 42so8437538pxi.5
        for <java-user@lucene.apache.org>; Tue, 09 Feb 2010 05:35:44 -0800 (PST)
MIME-Version: 1.0
Received: by 10.114.6.4 with SMTP id 4mr5488494waf.43.1265722544271; Tue, 09 
	Feb 2010 05:35:44 -0800 (PST)
In-Reply-To: <002801caa988$7a5c5bc0$6f151340$@de>
References: <4B714F5C.2040709@deri.org> <002701caa981$b5400ef0$1fc02cd0$@de>
	 <4B71588D.3060001@deri.org> <002801caa988$7a5c5bc0$6f151340$@de>
Date: Tue, 9 Feb 2010 08:35:44 -0500
Message-ID: <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com>
Subject: Re: Flex & Docs/AndPositionsEnum
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Renaud,

It's great that you're testing the flex APIs... things are still "in
flux" as you've seen.  There's another big patch pending on
LUCENE-2111...

Out of curiosity... in what circumstances do you see a Multi*Enum appearing=
?

Lucene's core always searches "by segment".  Are you doing something
external (directly using the flex APIs against a
Multi/DirectoryReader)?

Mike

On Tue, Feb 9, 2010 at 8:04 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> Hi Renaud,
>
>
>> On 09/02/10 12:16, Uwe Schindler wrote:
>> > In flex the correct way to add additional posting data to these
>> classes would be the usage of custom attributes, registered in the
>> attributes() AttributeSource.
>> >
>> Ok, I have changed my codes to use the AttributeSource interface.
>> > Due to some limitations, there is currently no working support in
>> MultiReaders to have a "view" on the underlying Enums, but we are
>> working on that.
>> >
>> But, I have still the same problem, it seems that
>> MultiDocsAndPositionsEnum does not have access to the underlying
>> attributes added to my DocsAndPositionsEnum subclass. I got the
>> following exception (IllegalArgumentException):
>> "This AttributeSource does not have the attribute
>> 'org.sindice.siren.analysis.attributes.TupleAttribute'."
>>
>> Is this related to your previous comment, i.e., that MultiReaders do
>> not
>> have a view on the underlying Enums ?
>
> Exactly, MultiEnums have their own attributes at the moment, there is no =
"Proxy" view on it. For this to work, proxy AttributeImpls are needed and t=
here is no support at the moment.
>
> See https://issues.apache.org/jira/browse/LUCENE-2154
>
> The problem behind is that when a consumer gets/adds an Attribute, all su=
breaders =A0must use the same attribute or the MultiReader/DirectoryReader =
must proxy the attributes. For this to work we need dynamic proxies or you =
also have to implement ProxyImpls: Attribute, AttributeImpl, AttributeProxy=
Impl.
>
> We have no progress for that at the moment, so I am sorry, we have no wor=
king support for attributes in MultiReaders (which all DirectoryReaders are=
, because a index could consist of more than one segment).
>
>> > In general what you do (if it works in future):
>> > Define an interface for your extensions based on the Attribute
>> interface and also provide the implementation class. Then call
>> YourEnums.attributes().addAttribute(YourInterface.class) in the ctor of
>> your enum, store a local reference to the attribute and fill this on
>> iteration. Any consumer of this Enum can check using
>> TermPositions.attributes().hasAttribute/getAttribute/addAttribute for
>> the existence of the the same and then read the attributes during
>> iteration. There is no need to change the Enum class API at all.
>> >
>> Ok, it works like a charm except the problem related to MultiReaders.
>
> See above.
>
> But attributes are the way to go for this extended posting/prox lists.
>
> Uwe
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 14:00:59 2010
Return-Path: <java-user-return-44937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6602 invoked from network); 9 Feb 2010 14:00:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 14:00:59 -0000
Received: (qmail 17120 invoked by uid 500); 9 Feb 2010 14:00:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17041 invoked by uid 500); 9 Feb 2010 14:00:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17031 invoked by uid 99); 9 Feb 2010 14:00:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 14:00:56 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [81.169.146.160] (HELO mo-p00-ob.rzone.de) (81.169.146.160)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 14:00:47 +0000
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; t=1265724024; l=194;
	s=domk; d=qboad.de;
	h=In-Reply-To:Content-Transfer-Encoding:Content-Type:MIME-Version:
	Date:Subject:References:To:From:X-RZG-CLASS-ID:X-RZG-AUTH;
	bh=3kfVTdD5x9FuI5NGujo7617ohIQ=;
	b=aU+lDVw/WZ7KxxeSQoKI/Qa0QJ8ysTO2VGHbJ9iw8RBq+xkcj2KwaeDeFtlaZ6wFRXZ
	IS+Mf+IggwA8LWorhDp7KsdALxaWICCVlfvsc8GdLU7B7MEWyYt9o1eDjNogILhppV16n
	IUBjL+9yO8yjNg98Xps1rNitV6mwiT1ezs8=
X-RZG-AUTH: :JWICemC5efBhIus+Y9brhO0rWemFfVqN1wGoDG990xuVPUZ6NqVHng==
X-RZG-CLASS-ID: mo00
Received: from marvin (p549FBFE2.dip0.t-ipconnect.de [84.159.191.226])
	by post.strato.de (mrclete mo50) (RZmta 22.6)
	with ESMTP id z05428m19Drl4U for <java-user@lucene.apache.org>;
	Tue, 9 Feb 2010 15:00:24 +0100 (MET)
From: "Marc Schwarz" <info@qboad.de>
To: <java-user@lucene.apache.org>
References: <4B714F5C.2040709@deri.org> <002701caa981$b5400ef0$1fc02cd0$@de> <4B71588D.3060001@deri.org> <002801caa988$7a5c5bc0$6f151340$@de> <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com>
Subject: Synonym map
Date: Tue, 9 Feb 2010 15:03:02 +0100
Message-ID: <008201caa990$988b2100$6f01a8c0@marvin>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcqpjNlRzZkzD0LWSoG8WP5KUd9KFAAA4J4A
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com>

Hi,

i try to implement synonyma, but i didn't exactly know how to do it 
(lucene 3.0).

Is anybody out there who has some small code snippets or a good link ?

Thanks & Greetings,
Marc




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 14:09:15 2010
Return-Path: <java-user-return-44938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11061 invoked from network); 9 Feb 2010 14:09:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 14:09:15 -0000
Received: (qmail 35206 invoked by uid 500); 9 Feb 2010 14:09:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35153 invoked by uid 500); 9 Feb 2010 14:09:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35143 invoked by uid 99); 9 Feb 2010 14:09:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 14:09:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [140.203.201.100] (HELO mx1.nuigalway.ie) (140.203.201.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 14:09:03 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ApoEAIf7cEsKhJ0L/2dsb2JhbADZdoRUBA
X-IronPort-AV: E=Sophos;i="4.49,436,1262563200"; 
   d="scan'208";a="132430247"
Received: from unknown (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx1.nuigalway.ie with ESMTP; 09 Feb 2010 14:08:43 +0000
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 9 Feb 2010 14:08:42 +0000
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 9 Feb 2010 14:08:42 +0000
Message-ID: <4B716C5F.6020907@deri.org>
Date: Tue, 09 Feb 2010 14:08:31 +0000
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.9pre) Gecko/20100205 Lightning/1.0pre Shredder/3.0.2pre
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Flex & Docs/AndPositionsEnum
References: <4B714F5C.2040709@deri.org> <002701caa981$b5400ef0$1fc02cd0$@de>	 <4B71588D.3060001@deri.org> <002801caa988$7a5c5bc0$6f151340$@de> <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com>
In-Reply-To: <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 09 Feb 2010 14:08:42.0223 (UTC) FILETIME=[628CD7F0:01CAA991]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael,

On 09/02/10 13:35, Michael McCandless wrote:
> It's great that you're testing the flex APIs... things are still "in
> flux" as you've seen.  There's another big patch pending on
> LUCENE-2111...
>    
So, does it mean that the codec interface is likely to change ? Do I 
need to be prepared to change again all my code ;o) ?
> Out of curiosity... in what circumstances do you see a Multi*Enum appearing?
>
> Lucene's core always searches "by segment".  Are you doing something
> external (directly using the flex APIs against a
> Multi/DirectoryReader)?
>    
I am using the flex API with the high level Lucene interface 
(IndexWriter and IndexReader).
I am creating a RamDirectory, register my codec into the IndexWriter, 
and index 64 documents. Then, I use the IndexReader.termPositionsEnum to 
get my own DocsAndPositionsEnum in order to check if all the information 
that have been stored in the new index data structure are correctly 
retrieved.
In that case, I got the previous errors (a MultiDocsAndPositionsEnum is 
returned). However, when I am indexing only one or two documents, the 
original DocsAndPositionsEnum is returned.

Hope that helps,
cheers
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 14:27:14 2010
Return-Path: <java-user-return-44939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20130 invoked from network); 9 Feb 2010 14:27:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 14:27:14 -0000
Received: (qmail 58267 invoked by uid 500); 9 Feb 2010 14:27:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58196 invoked by uid 500); 9 Feb 2010 14:27:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58185 invoked by uid 99); 9 Feb 2010 14:27:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 14:27:11 +0000
X-ASF-Spam-Status: No, hits=4.6 required=10.0
	tests=FS_REPLICA,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 98.129.35.7 is neither permitted nor denied by domain of yuvalf@answers.com)
Received: from [98.129.35.7] (HELO server505.appriver.com) (98.129.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 14:27:02 +0000
X-Policy: GLOBAL - answers.com
X-Primary: yuvalf@answers.com
X-Note: This Email was scanned by AppRiver SecureTide
X-ALLOW: yuvalf@answers.com ALLOWED
X-Virus-Scan: V-
X-Note: Spam Tests Failed: 
X-Country-Path: UNITED STATES->UNITED STATES->UNITED STATES
X-Note-Sending-IP: 98.129.23.15
X-Note-Reverse-DNS: ht02.exg5.exghost.com
X-Note-WHTLIST: yuvalf@answers.com
X-Note: User Rule Hits: 
X-Note: Global Rule Hits: G173 G174 G175 G176 G180 G181 G192 G279 
X-Note: Encrypt Rule Hits: 
X-Note: Mail Class: ALLOWEDSENDER
X-Note: Headers Injected
Received: from [98.129.23.15] (HELO ht02.exg5.exghost.com)
  by server505.appriver.com (CommuniGate Pro SMTP 5.3.2)
  with ESMTPS id 26877246 for java-user@lucene.apache.org; Tue, 09 Feb 2010 08:26:44 -0600
Received: from mbx03.exg5.exghost.com ([169.254.1.200]) by
 ht02.exg5.exghost.com ([98.129.23.15]) with mapi; Tue, 9 Feb 2010 08:26:40
 -0600
From: Yuval Feinstein <yuvalf@answers.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 9 Feb 2010 08:26:37 -0600
Subject: Different replicas return different scores
Thread-Topic: Different replicas return different scores
Thread-Index: Acqpk+O5Bu5BcgcuRVakVKmqC2YveA==
Message-ID: <01C4AEE04EB96243BBAA8083CB6514E860672FB8@MBX03.exg5.exghost.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_01C4AEE04EB96243BBAA8083CB6514E860672FB8MBX03exg5exghos_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_01C4AEE04EB96243BBAA8083CB6514E860672FB8MBX03exg5exghos_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

We are running a large sharded Lucene-based application.
Our configuration supports near real-time updates, by incrementally
Updating documents (using delete then add) on the shards.
Every shard is replicated to several machines in order to improve performan=
ce.
We replicate the shard by sending the same deletion and addition commands t=
o all the replicas,
Where they may be performed in a different order. (We delete a set of docum=
ents, say 1000 at a time,
Then add them one-by-one semi-asynchronously).
Lately we have noticed a subtle difference in query scores across different=
 replicas of the same shard.
Further investigation showed that the only noticeable difference between th=
e replicas was the index directory structure:
1.      Different replicas have different sets of segments - most segment f=
iles are the same, but some are different.
2.      The numbers of deleted documents are different between two replicas=
 of the same shard.
Is this a known behavior of Java Lucene?
How can we change this behavior? We want different replicas returning the e=
xact same score per query hits.
(We would rather not optimize the index as we believe this will harm perfor=
mance.)

TIA,
Yuval and Ophir



--_000_01C4AEE04EB96243BBAA8083CB6514E860672FB8MBX03exg5exghos_--

From java-user-return-44940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 16:04:48 2010
Return-Path: <java-user-return-44940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77448 invoked from network); 9 Feb 2010 16:04:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 16:04:48 -0000
Received: (qmail 43237 invoked by uid 500); 9 Feb 2010 16:04:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43168 invoked by uid 500); 9 Feb 2010 16:04:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43158 invoked by uid 99); 9 Feb 2010 16:04:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 16:04:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 16:04:36 +0000
Received: by bwz22 with SMTP id 22so612398bwz.5
        for <java-user@lucene.apache.org>; Tue, 09 Feb 2010 08:04:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=tNTEazlPlz2vvJTKaBT7qoFQE7ci4Xm7jBh1hnix5Ow=;
        b=SJyGrsVWhXRa/ol9dRS2OgOj3cGD4YIlPyjIhnOP7YkzfuqLjRkkFTfA05AYOELgts
         CNukBCONT7F3BVXHjh5Zaqo5ZdFsbGt413F1og7QucJ9BbHsCFvzDE92axlA25xUmUCJ
         sIsqtMh0lemWe/8kosONPEeAs2cMkQk3f/flY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=e8xrEpDxtluCOLRz8BbXniemVUpF1uZRis0tNGfl5WQL4m7Cr9MU5JIFOTDZbwFFJU
         oO3ATQnmMia+ZjNvr3laSgs93W7dn377ZmTQiUhiIu6Es9S1AFr3M0ZlfXVEtviQiFRq
         B0kfjKeegcAyfmrtmGDM4DisQz5Z7hPEyl08k=
MIME-Version: 1.0
Received: by 10.204.20.80 with SMTP id e16mr1772786bkb.72.1265731455632; Tue, 
	09 Feb 2010 08:04:15 -0800 (PST)
In-Reply-To: <008201caa990$988b2100$6f01a8c0@marvin>
References: <4B714F5C.2040709@deri.org> <002701caa981$b5400ef0$1fc02cd0$@de> 
	<4B71588D.3060001@deri.org> <002801caa988$7a5c5bc0$6f151340$@de> 
	<9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com> 
	<008201caa990$988b2100$6f01a8c0@marvin>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 9 Feb 2010 16:03:55 +0000
Message-ID: <8c4e68611002090803y39c9a840mb92670b5434c430e@mail.gmail.com>
Subject: Re: Synonym map
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene in Action second edition has Synonym stuff that I think will
work with lucene 3.0.

Source code available from http://www.manning.com/hatcher3/


--
Ian.


On Tue, Feb 9, 2010 at 2:03 PM, Marc Schwarz <info@qboad.de> wrote:
> Hi,
>
> i try to implement synonyma, but i didn't exactly know how to do it
> (lucene 3.0).
>
> Is anybody out there who has some small code snippets or a good link ?
>
> Thanks & Greetings,
> Marc
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 16:04:58 2010
Return-Path: <java-user-return-44941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77509 invoked from network); 9 Feb 2010 16:04:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 16:04:57 -0000
Received: (qmail 45497 invoked by uid 500); 9 Feb 2010 16:04:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45427 invoked by uid 500); 9 Feb 2010 16:04:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45417 invoked by uid 99); 9 Feb 2010 16:04:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 16:04:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.195] (HELO mail-yx0-f195.google.com) (209.85.210.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 16:04:47 +0000
Received: by yxe33 with SMTP id 33so170544yxe.5
        for <java-user@lucene.apache.org>; Tue, 09 Feb 2010 08:04:26 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.209.15 with SMTP id h15mr289323ybg.267.1265731466248; Tue, 
	09 Feb 2010 08:04:26 -0800 (PST)
In-Reply-To: <4B716C5F.6020907@deri.org>
References: <4B714F5C.2040709@deri.org> <002701caa981$b5400ef0$1fc02cd0$@de>
	 <4B71588D.3060001@deri.org> <002801caa988$7a5c5bc0$6f151340$@de>
	 <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com>
	 <4B716C5F.6020907@deri.org>
Date: Tue, 9 Feb 2010 11:04:26 -0500
Message-ID: <9ac0c6aa1002090804s19c3d6e6qc1a34bdaca5dd982@mail.gmail.com>
Subject: Re: Flex & Docs/AndPositionsEnum
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Feb 9, 2010 at 9:08 AM, Renaud Delbru <renaud.delbru@deri.org> wrot=
e:
> Hi Michael,
>
> On 09/02/10 13:35, Michael McCandless wrote:
>>
>> It's great that you're testing the flex APIs... things are still "in
>> flux" as you've seen. =A0There's another big patch pending on
>> LUCENE-2111...
>>
>
> So, does it mean that the codec interface is likely to change ? Do I need=
 to
> be prepared to change again all my code ;o) ?

This particular patch doesn't change the Codecs API -- it "only"
factors out the Multi* APIs from MultiReader.  Likely you won't need
to change your codec... but try applying the patch and see :)

However: if you consume the flex API directly, on top of multi readers
(something you shouldn't do, for performance reasons), you will have
to use MultiField's static methods to get the enums.

>> Out of curiosity... in what circumstances do you see a Multi*Enum
>> appearing?
>>
>> Lucene's core always searches "by segment". =A0Are you doing something
>> external (directly using the flex APIs against a
>> Multi/DirectoryReader)?
>
> I am using the flex API with the high level Lucene interface (IndexWriter
> and IndexReader).
> I am creating a RamDirectory, register my codec into the IndexWriter, and
> index 64 documents. Then, I use the IndexReader.termPositionsEnum to get =
my
> own DocsAndPositionsEnum in order to check if all the information that ha=
ve
> been stored in the new index data structure are correctly retrieved.
> In that case, I got the previous errors (a MultiDocsAndPositionsEnum is
> returned). However, when I am indexing only one or two documents, the
> original DocsAndPositionsEnum is returned.

Got it, so you're directly consuming the flex API in your test.
Whenever the index has > 1 segment, you'll get a multi enum.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 16:13:46 2010
Return-Path: <java-user-return-44942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80446 invoked from network); 9 Feb 2010 16:13:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 16:13:46 -0000
Received: (qmail 57423 invoked by uid 500); 9 Feb 2010 16:13:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57343 invoked by uid 500); 9 Feb 2010 16:13:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57330 invoked by uid 99); 9 Feb 2010 16:13:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 16:13:44 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FS_REPLICA,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 16:13:36 +0000
Received: by bwz22 with SMTP id 22so623183bwz.5
        for <java-user@lucene.apache.org>; Tue, 09 Feb 2010 08:13:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=yVmsPSYZAtJq8ZPglC6gAxpP2lPvGo+UO/fBTj8Bdjk=;
        b=O0JFEH32PP/I+VpDfjVP7yv/uu57wvDkuEsmAWz7Wj4rwUDaPicU4Ux1UMdBq1BEX9
         0Bo4mZksc0JOKtqGy7yjpzFK81MCnbNjgWc1QzgbYqR/ywbdLYwjZzXjsiZzrsAQCKaP
         iVsjbJnUL7L2rCLcl9dguRFk4jjasOpeZOPPk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=RfscQfZTQzpRoI9Qc40Iw0Rb55FCPxgmO+qqatxrierWWYJV1V/EaPPSKnoIUIedfB
         Co97gpieFjTG7sdY8Og/dj11ZE9R9W5xf1Qd0NdEoLS6aBbQsI99rtycR2LBQEk80sk8
         jDGT68a55+ITk0fzGdTYdUUANLnnMMvxtpNjk=
MIME-Version: 1.0
Received: by 10.204.20.80 with SMTP id e16mr1780557bkb.72.1265731995493; Tue, 
	09 Feb 2010 08:13:15 -0800 (PST)
In-Reply-To: <01C4AEE04EB96243BBAA8083CB6514E860672FB8@MBX03.exg5.exghost.com>
References: <01C4AEE04EB96243BBAA8083CB6514E860672FB8@MBX03.exg5.exghost.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 9 Feb 2010 16:12:55 +0000
Message-ID: <8c4e68611002090812s5906caadyeaad6a95b39bd376@mail.gmail.com>
Subject: Re: Different replicas return different scores
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Since the update commands may run in different order on different
shards you might get different sets of segments because merges happen
to be triggered at different points in the different batches of
updates.  But you shouldn't have different numbers of deleted docs if
you have really been applying the same updates to all the shards.
Could some updates have been missed?  Or docs added then deleted or
something?  Maybe there are other variations between the shards and
that is causing the variation in query scores.

As an alternative approach you could have one master index per shard
that takes all the updates and then send that index out to the shard
servers.  If you don't use compound file format, and don't optimize,
the file changes are typically quite small with default or sensible
merge settings and can be distributed quickly using rsync.  You can
have more control by using MergePolicy and friends.

What version of lucene are you running?


--
Ian.


On Tue, Feb 9, 2010 at 2:26 PM, Yuval Feinstein <yuvalf@answers.com> wrote:
> We are running a large sharded Lucene-based application.
> Our configuration supports near real-time updates, by incrementally
> Updating documents (using delete then add) on the shards.
> Every shard is replicated to several machines in order to improve perform=
ance.
> We replicate the shard by sending the same deletion and addition commands=
 to all the replicas,
> Where they may be performed in a different order. (We delete a set of doc=
uments, say 1000 at a time,
> Then add them one-by-one semi-asynchronously).
> Lately we have noticed a subtle difference in query scores across differe=
nt replicas of the same shard.
> Further investigation showed that the only noticeable difference between =
the replicas was the index directory structure:
> 1. =A0 =A0 =A0Different replicas have different sets of segments - most s=
egment files are the same, but some are different.
> 2. =A0 =A0 =A0The numbers of deleted documents are different between two =
replicas of the same shard.
> Is this a known behavior of Java Lucene?
> How can we change this behavior? We want different replicas returning the=
 exact same score per query hits.
> (We would rather not optimize the index as we believe this will harm perf=
ormance.)
>
> TIA,
> Yuval and Ophir
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 16:36:40 2010
Return-Path: <java-user-return-44943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89983 invoked from network); 9 Feb 2010 16:36:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 16:36:40 -0000
Received: (qmail 89830 invoked by uid 500); 9 Feb 2010 16:36:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89760 invoked by uid 500); 9 Feb 2010 16:36:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89750 invoked by uid 99); 9 Feb 2010 16:36:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 16:36:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 16:36:28 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ApoEAPsdcUsKhJ0L/2dsb2JhbADaWIRUBA
X-IronPort-AV: E=Sophos;i="4.49,437,1262563200"; 
   d="scan'208";a="10146615"
Received: from unknown (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx2.nuigalway.ie with ESMTP; 09 Feb 2010 16:36:08 +0000
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 9 Feb 2010 16:36:08 +0000
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 9 Feb 2010 16:36:07 +0000
Message-ID: <4B718EEB.3070605@deri.org>
Date: Tue, 09 Feb 2010 16:35:55 +0000
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.9pre) Gecko/20100205 Lightning/1.0pre Shredder/3.0.2pre
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Flex & Docs/AndPositionsEnum
References: <4B714F5C.2040709@deri.org> <002701caa981$b5400ef0$1fc02cd0$@de>	 <4B71588D.3060001@deri.org> <002801caa988$7a5c5bc0$6f151340$@de>	 <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com>	 <4B716C5F.6020907@deri.org> <9ac0c6aa1002090804s19c3d6e6qc1a34bdaca5dd982@mail.gmail.com>
In-Reply-To: <9ac0c6aa1002090804s19c3d6e6qc1a34bdaca5dd982@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 09 Feb 2010 16:36:07.0928 (UTC) FILETIME=[FB004F80:01CAA9A5]
X-Virus-Checked: Checked by ClamAV on apache.org

On 09/02/10 16:04, Michael McCandless wrote:
> On Tue, Feb 9, 2010 at 9:08 AM, Renaud Delbru<renaud.delbru@deri.org>  wrote:
>    
>> So, does it mean that the codec interface is likely to change ? Do I need to
>> be prepared to change again all my code ;o) ?
>>      
> This particular patch doesn't change the Codecs API -- it "only"
> factors out the Multi* APIs from MultiReader.  Likely you won't need
> to change your codec... but try applying the patch and see :)
>    
Ok, good news ;o).
> However: if you consume the flex API directly, on top of multi readers
> (something you shouldn't do, for performance reasons), you will have
> to use MultiField's static methods to get the enums.
>    
In my previous example (registering my codec in IndexWriter, and then 
use IndexReader), do I consume the flex API directly on top of the 
multi-readers directly ? If yes, how to avoid that ?

Cheers
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 16:45:29 2010
Return-Path: <java-user-return-44944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91951 invoked from network); 9 Feb 2010 16:45:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 16:45:29 -0000
Received: (qmail 4852 invoked by uid 500); 9 Feb 2010 16:45:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4790 invoked by uid 500); 9 Feb 2010 16:45:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4780 invoked by uid 99); 9 Feb 2010 16:45:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 16:45:27 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of klaus.teller@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 09 Feb 2010 16:45:18 +0000
Received: (qmail 19014 invoked by uid 0); 9 Feb 2010 16:44:56 -0000
Received: from 66.11.71.181 by www111.gmx.net with HTTP;
 Tue, 09 Feb 2010 17:44:54 +0100 (CET)
Content-Type: text/plain; charset="us-ascii"
Date: Tue, 09 Feb 2010 17:44:55 +0100
From: "Klaus Teller" <klaus.teller@gmx.net>
Message-ID: <20100209164455.41060@gmx.net>
MIME-Version: 1.0
Subject: fast Result Count
To: java-user@lucene.apache.org
X-Authenticated: #20247638
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX1++6OEiHRm+NBWa7B0zkG1crpZU1wmDy6Kwgtep7O
 uO8APGE2waxQssKEuPWSAhJCKomM11wS7ffA== 
Content-Transfer-Encoding: 7bit
X-GMX-UID: UNU7DEJ3a2AodDLCA3Uyxb46OWhhakfC
X-FuHaFi: 0.73999999999999999

Hi Guys,

Is there a way to speed up couting documents that satisfy a search query other than by using TopDocCollector.getTotalHits()? 

For instance, if there are 1000000 documents satisfying my search query, how can I count them without loading them all in memory?

Thanks,
Klaus.
-- 
Jetzt kostenlos herunterladen: Internet Explorer 8 und Mozilla Firefox 3.5 -
sicherer, schneller und einfacher! http://portal.gmx.net/de/go/atbrowser

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 16:52:06 2010
Return-Path: <java-user-return-44945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93885 invoked from network); 9 Feb 2010 16:52:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 16:52:05 -0000
Received: (qmail 16949 invoked by uid 500); 9 Feb 2010 16:52:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16905 invoked by uid 500); 9 Feb 2010 16:52:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16866 invoked by uid 99); 9 Feb 2010 16:52:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 16:52:01 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 16:51:53 +0000
Received: by ywh15 with SMTP id 15so1510576ywh.5
        for <java-user@lucene.apache.org>; Tue, 09 Feb 2010 08:51:32 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.119.17 with SMTP id r17mr476055ybc.9.1265734291933; Tue, 
	09 Feb 2010 08:51:31 -0800 (PST)
In-Reply-To: <4B718EEB.3070605@deri.org>
References: <4B714F5C.2040709@deri.org> <002701caa981$b5400ef0$1fc02cd0$@de>
	 <4B71588D.3060001@deri.org> <002801caa988$7a5c5bc0$6f151340$@de>
	 <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com>
	 <4B716C5F.6020907@deri.org>
	 <9ac0c6aa1002090804s19c3d6e6qc1a34bdaca5dd982@mail.gmail.com>
	 <4B718EEB.3070605@deri.org>
Date: Tue, 9 Feb 2010 11:51:31 -0500
Message-ID: <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com>
Subject: Re: Flex & Docs/AndPositionsEnum
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Feb 9, 2010 at 11:35 AM, Renaud Delbru <renaud.delbru@deri.org> wro=
te:

>> This particular patch doesn't change the Codecs API -- it "only"
>> factors out the Multi* APIs from MultiReader. =A0Likely you won't need
>> to change your codec... but try applying the patch and see :)
>>
>
> Ok, good news ;o).

Flex is still in flux, though :)

>> However: if you consume the flex API directly, on top of multi readers
>> (something you shouldn't do, for performance reasons), you will have
>> to use MultiField's static methods to get the enums.
>
> In my previous example (registering my codec in IndexWriter, and then use
> IndexReader), do I consume the flex API directly on top of the multi-read=
ers
> directly ? If yes, how to avoid that ?

You should (when possible/reasonable) instead use
ReaderUtil.gatherSubReaders, then iterate through those sub readers
asking each for its flex fields.

But if this is only for testing purposes, and Multi*Enum is more
convenient (and, once attrs work correctly), then Multi*Enum is
perfectly fine.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 17:05:05 2010
Return-Path: <java-user-return-44946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98104 invoked from network); 9 Feb 2010 17:05:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 17:05:05 -0000
Received: (qmail 40357 invoked by uid 500); 9 Feb 2010 17:05:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40281 invoked by uid 500); 9 Feb 2010 17:05:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40271 invoked by uid 99); 9 Feb 2010 17:05:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 17:05:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of benjamin.pasero@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 17:04:56 +0000
Received: by qw-out-2122.google.com with SMTP id 3so746806qwe.53
        for <java-user@lucene.apache.org>; Tue, 09 Feb 2010 09:04:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=Fy44kF2Lj3aYWjJTOM6bUsJ7RSbbXuwevBlw6MHgjSY=;
        b=sDtHCKeQLIbiZ04m70bQoP7Aleurfgg+vdxAnMf6HU9zsCYr8PuksF4Pt6ZWLCqEV+
         +BCU7AmYxfZz1cEzr7HWmUBvN21vqaK377vWTyR7CoN1ryBKdRpKrtGZyETjBNEl9j4a
         CI6rn9HT38hckJhjdR2rxAn8FuAgYDSJE4dP4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=an2bgB/gL/3xPqhdtY3/ltI0NwA4AqB4xkAfG8f8ybKFw3n7wNbYHYdi+xG2jJS3NI
         6uZu9uPHl8uLUzXpqI4xMyvjVA3xul9oa4VSia/aOY7m+sD/mR4SmWZ2TSJtNiASm0re
         um996FbwH8eOZKoxa/PmnCix3emFE38ivWCf8=
MIME-Version: 1.0
Received: by 10.142.150.41 with SMTP id x41mr5506296wfd.306.1265735075038; 
	Tue, 09 Feb 2010 09:04:35 -0800 (PST)
Date: Tue, 9 Feb 2010 18:04:35 +0100
Message-ID: <5381b58f1002090904l27349052p6813e13bbf0ec2e1@mail.gmail.com>
Subject: Creating a Query that matches Documents without a specific Field set?
From: Benjamin Pasero <benjamin.pasero@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi,

is there any way I can search for Documents that have a specific Field not set?

The use case is obvious: Consider you introduce a new field to your
documents but dont want to migrate all other documents,
how would you be able to write a Query that covers both old and new documents?

I was hoping that a simple TermQuery where the term value was set to
be an empty String would help me out but I was prooven
wrong.

Thanks for helping,
Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 17:21:45 2010
Return-Path: <java-user-return-44947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4100 invoked from network); 9 Feb 2010 17:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 17:21:45 -0000
Received: (qmail 60882 invoked by uid 500); 9 Feb 2010 17:21:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60833 invoked by uid 500); 9 Feb 2010 17:21:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60823 invoked by uid 99); 9 Feb 2010 17:21:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 17:21:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.11] (HELO web52901.mail.re2.yahoo.com) (206.190.49.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 09 Feb 2010 17:21:34 +0000
Received: (qmail 14135 invoked by uid 60001); 9 Feb 2010 17:21:12 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1265736072; bh=SUhvEPzbqWweRZAsDd3iJ1J2o9XYGygLta6yvmwksOo=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=P+XDKZiTuYhM6vwper4TYKSrDmUi4mVoF1VLlL1aaEawM9mpe6+MGAlYoYoDqa2dY32NItHvzjcfeUIFANgULPdev/pzVDtY05qm2q7nleTlObZ6lBB/EFQtOk2v5fgkDjaFexRFoU312RWUTmDo4fO+SiGbxhuoZ0QWI5E2Yqo=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=K8GjMP9YMcW/yftspXnf3nvzGRnpbrXR8B0dCF6L23bbRVx06Pkw7EKiKiy+bheDyqQ2QFvPUq3F9czZIvImokna/eUlhF89s2luZrfgNttVtHLyXvjZi+Hs2kYbbvNQf7fi82vjCnyYMmTBjoRJnrD18JsI3TjMUvbfDvUKGtw=;
Message-ID: <708698.13994.qm@web52901.mail.re2.yahoo.com>
X-YMail-OSG: 9y4sm00VM1m7pA4mV.nbRJQ4DuLoYlNptxPJ7u9LxzKp_EBHka3196gUiuGDGeUSJpiw9UZ.aoldAYSAtgTa7dNVhpI5MfFhzO2zhLvFFtcyowctSyPH0ciKorVZPVGSYMjjSC82FQ.IuYU9KrTlYwQInY6XMCFrecmQIqjMtiDbPTgnKAIEWplyw0g3c..StnDXhher6ZHfiIqhUuH8pv8RR9yQPEb_OTBtRtCs9swTJ36OKVEOOSGmt_CCeByAC8Z_fsK1C5eE69fv.cIPr8GH6HW_.m.6ov3U6WngCTapZPmX.k4zBi2kVBt1W.Uloe1i5IfguO3m615u95m_0g--
Received: from [78.168.189.43] by web52901.mail.re2.yahoo.com via HTTP; Tue, 09 Feb 2010 09:21:12 PST
X-Mailer: YahooMailClassic/9.1.10 YahooMailWebService/0.8.100.260964
Date: Tue, 9 Feb 2010 09:21:12 -0800 (PST)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Creating a Query that matches Documents without a specific Field set?
To: java-user@lucene.apache.org
In-Reply-To: <5381b58f1002090904l27349052p6813e13bbf0ec2e1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


> is there any way I can search for Documents that have a
> specific Field not set?

Yes. If you are using QueryParser  *:* -specificField:[* TO *]
 
> I was hoping that a simple TermQuery where the term value
> was set to be an empty String would help me out but I was prooven
> wrong.

org.apache.lucene.search.MatchAllDocsQuery combined with RangeQuery can do that if you are constructing your queries programmatically.


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 17:41:38 2010
Return-Path: <java-user-return-44948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14131 invoked from network); 9 Feb 2010 17:41:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 17:41:38 -0000
Received: (qmail 87602 invoked by uid 500); 9 Feb 2010 17:41:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87524 invoked by uid 500); 9 Feb 2010 17:41:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87513 invoked by uid 99); 9 Feb 2010 17:41:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 17:41:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.219.218 as permitted sender)
Received: from [209.85.219.218] (HELO mail-ew0-f218.google.com) (209.85.219.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 17:41:29 +0000
Received: by ewy10 with SMTP id 10so5155335ewy.11
        for <java-user@lucene.apache.org>; Tue, 09 Feb 2010 09:41:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=GGA1wLKYvvcg8fBpGWJZLylvX5kQ4SkoZpMmv2LvxtE=;
        b=Xr9U9M2Pk7m2xDIPHkrh30D8W5n+mlNK7OWunyMBz74ydk/rvE0qTZQ8rHstW5o2VM
         uyKjATz7y+CrKNWYpdjHpM9Btkm70hnF8k7g6eZl5lH90YvM84meEtF3iM8DIo5Olk3+
         ZhTcYdZqMpfX1lg14Lc+8OsQB34Jpmj41jTxM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=cdjvl5xCx/8IoI20DDoV/jDDu2taFzJmdXcKCNrJDaGYV9Hk/eLAdlzb52X+NgzhYv
         v4Zr1K9V0AfCyna6qgBDJmMdaCSip4mP+JE2vv2yZYtJFhwrar3Fr7NBjwHGPDKgKUsk
         JtHiwhIaPaevO3sKkE0LVLf5r6Vsjal00xMHw=
MIME-Version: 1.0
Received: by 10.216.91.10 with SMTP id g10mr2251519wef.217.1265737267500; Tue, 
	09 Feb 2010 09:41:07 -0800 (PST)
In-Reply-To: <20100209164455.41060@gmx.net>
References: <20100209164455.41060@gmx.net>
Date: Tue, 9 Feb 2010 12:41:07 -0500
Message-ID: <359a92831002090941se9b40dbk89413d3f731fe28f@mail.gmail.com>
Subject: Re: fast Result Count
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d77e3c35560c047f2e6c4b

--0016e6d77e3c35560c047f2e6c4b
Content-Type: text/plain; charset=ISO-8859-1

I'm not sure what you mean by "loading them all into memory".

I'm pretty sure that the numHits you specify just limits the number
of documents kept in the internal ScoreDocs, and getTotalHits
can easily be much greater than numHits. But that would be
trivial to test (you shouldn't take my word for this one <G>)...

HTH
Erick

On Tue, Feb 9, 2010 at 11:44 AM, Klaus Teller <klaus.teller@gmx.net> wrote:

> Hi Guys,
>
> Is there a way to speed up couting documents that satisfy a search query
> other than by using TopDocCollector.getTotalHits()?
>
> For instance, if there are 1000000 documents satisfying my search query,
> how can I count them without loading them all in memory?
>
> Thanks,
> Klaus.
> --
> Jetzt kostenlos herunterladen: Internet Explorer 8 und Mozilla Firefox 3.5
> -
> sicherer, schneller und einfacher! http://portal.gmx.net/de/go/atbrowser
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d77e3c35560c047f2e6c4b--

From java-user-return-44949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 18:05:29 2010
Return-Path: <java-user-return-44949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24843 invoked from network); 9 Feb 2010 18:05:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 18:05:29 -0000
Received: (qmail 14872 invoked by uid 500); 9 Feb 2010 18:05:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14827 invoked by uid 500); 9 Feb 2010 18:05:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14817 invoked by uid 99); 9 Feb 2010 18:05:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 18:05:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 18:05:19 +0000
Received: by bwz22 with SMTP id 22so753662bwz.5
        for <java-user@lucene.apache.org>; Tue, 09 Feb 2010 10:04:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=syzrV+KqLK7RYCgC3eAlKZGIaPp2n53TBfvNomlFYUM=;
        b=i7h5WI8IXakulz5mCYnIOCw9WM7bVpOQcLVyfz0jxEboVPtKJzKalSn2LjYchDQI52
         5i3gtqEL0ErS17sOBBSVkDZYo2G1LiwzWNQMJ89kYvR5HP/qdaHr1OwIcmt7bJCzfdNp
         brighIgA4gtCURmmavzBiEknRS62e9fSBJZs8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=GLA9OePplrFICKTJjPtx+kM6bXn58opC52o81Y/t4UqZI/k4GPuYQeLH1xdgKE9DZ6
         HF95kFfbAN81YZaMyBzU6RKnopChqd0X8TvHp7YlRTfz/JYNITzK+HAFXlt1AuSOEQAT
         gNq1yAiYkxJyjzsk618PPY2OH3/eAIB7UVUwM=
MIME-Version: 1.0
Received: by 10.204.25.197 with SMTP id a5mr3011559bkc.70.1265738698291; Tue, 
	09 Feb 2010 10:04:58 -0800 (PST)
In-Reply-To: <20100209164455.41060@gmx.net>
References: <20100209164455.41060@gmx.net>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 9 Feb 2010 18:04:38 +0000
Message-ID: <8c4e68611002091004i623e9ec8j328ba6f83631865f@mail.gmail.com>
Subject: Re: fast Result Count
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Write a simple Collector (read the javadocs) that has a collect(int
doc) method that does nothing except increment a counter.  Use it via
one of the search methods that takes a Collector.

btw TopDocCollector won't load them all in memory, but obviously it
will keep track of the top scoring docs.

--
Ian.

On Tue, Feb 9, 2010 at 4:44 PM, Klaus Teller <klaus.teller@gmx.net> wrote:
> Hi Guys,
>
> Is there a way to speed up couting documents that satisfy a search query other than by using TopDocCollector.getTotalHits()?
>
> For instance, if there are 1000000 documents satisfying my search query, how can I count them without loading them all in memory?
>
> Thanks,
> Klaus.
> --
> Jetzt kostenlos herunterladen: Internet Explorer 8 und Mozilla Firefox 3.5 -
> sicherer, schneller und einfacher! http://portal.gmx.net/de/go/atbrowser
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 18:13:07 2010
Return-Path: <java-user-return-44950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27923 invoked from network); 9 Feb 2010 18:13:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 18:13:07 -0000
Received: (qmail 28730 invoked by uid 500); 9 Feb 2010 18:13:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28658 invoked by uid 500); 9 Feb 2010 18:13:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28647 invoked by uid 99); 9 Feb 2010 18:13:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 18:13:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.116.39.62] (HELO rectangular.com) (68.116.39.62)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 18:12:57 +0000
Received: from marvin by rectangular.com with local (Exim 4.63)
	(envelope-from <marvin@rectangular.com>)
	id 1NeuZf-00040h-JP
	for java-user@lucene.apache.org; Tue, 09 Feb 2010 10:12:35 -0800
Date: Tue, 9 Feb 2010 10:12:35 -0800
To: java-user@lucene.apache.org
Subject: Re: Flex & Docs/AndPositionsEnum
Message-ID: <20100209181235.GA15349@rectangular.com>
References: <4B714F5C.2040709@deri.org> <002701caa981$b5400ef0$1fc02cd0$@de> <4B71588D.3060001@deri.org> <002801caa988$7a5c5bc0$6f151340$@de> <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com> <4B716C5F.6020907@deri.org> <9ac0c6aa1002090804s19c3d6e6qc1a34bdaca5dd982@mail.gmail.com> <4B718EEB.3070605@deri.org> <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com>
User-Agent: Mutt/1.5.13 (2006-08-11)
From: Marvin Humphrey <marvin@rectangular.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Feb 09, 2010 at 11:51:31AM -0500, Michael McCandless wrote:

> You should (when possible/reasonable) instead use
> ReaderUtil.gatherSubReaders, then iterate through those sub readers
> asking each for its flex fields.
> 
> But if this is only for testing purposes, and Multi*Enum is more
> convenient (and, once attrs work correctly), then Multi*Enum is
> perfectly fine.

Mike, FWIW, I've removed the ability to iterate over posting data at anything
other than the segment level from KS.  There's still a priority-queue-based
aggregator for iterating over all terms in a multi-segment index, but not for
anything lower.  

Forcing pluggable index formats to support the extra level of indirection
necessary for iterating postings from a high level both introduces
inefficiency and constrains their development.  Consider what would happen if
we tried indexed terms within a flat positions space and returned an array of
positions instead of one position at a time.  The instant you return objects
or aggregates rather than primitives, you force support for offsets down into
the low-level decoder.

It's not really necessary to iterate aggregated postings across multiple
segments, so IMO it's best to shunt users like Renaud towards the segment
level.

Marvin Humphrey


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 20:22:45 2010
Return-Path: <java-user-return-44951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84288 invoked from network); 9 Feb 2010 20:22:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 20:22:45 -0000
Received: (qmail 41454 invoked by uid 500); 9 Feb 2010 20:22:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41375 invoked by uid 500); 9 Feb 2010 20:22:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41365 invoked by uid 99); 9 Feb 2010 20:22:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 20:22:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.219 as permitted sender)
Received: from [209.85.220.219] (HELO mail-fx0-f219.google.com) (209.85.220.219)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 20:22:33 +0000
Received: by fxm19 with SMTP id 19so872787fxm.5
        for <java-user@lucene.apache.org>; Tue, 09 Feb 2010 12:22:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=0de/KzR5B0us8aF3GvZ6+Eo2PZmjGR0YTR6vmVjdFAI=;
        b=X+55ik3GWbMdJpBae4yuUhAfwDFHkfEoOOcKLiOpX1ZFbTW5qVBgfSMh//1JA5VJQL
         SVsMOkm1B2fe3lAS4LuSrZbeRR5mIMsBPgeVfpcEen4A4atDQp1KeU0KhU3Z+0mc7j96
         ocAVlJTz46EsAw6I6otP0+pYnYXWmSnz8Si1M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=uGz86oG89OtwwfjVYhH0bCGZ4QauC8T85xWG65JuU0wzFTBQN+mlJLb6aeDccHv+R+
         kMayMsUYj+H8IVJy5BWrPZacwX0QxVnpqa2YkbLKJSQfP7g16+Ye4AJ7e+sZ4OMUugBB
         fTFwPBfjv3kH19y2oHLIxtRvMUKZSqxWWE8BM=
MIME-Version: 1.0
Received: by 10.239.163.67 with SMTP id o3mr916755hbd.22.1265746932152; Tue, 
	09 Feb 2010 12:22:12 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <8c4e68611002090803y39c9a840mb92670b5434c430e@mail.gmail.com>
References: <4B714F5C.2040709@deri.org> <002701caa981$b5400ef0$1fc02cd0$@de>
	 <4B71588D.3060001@deri.org> <002801caa988$7a5c5bc0$6f151340$@de>
	 <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com>
	 <008201caa990$988b2100$6f01a8c0@marvin>
	 <8c4e68611002090803y39c9a840mb92670b5434c430e@mail.gmail.com>
Date: Tue, 9 Feb 2010 21:22:11 +0100
Message-ID: <f18c9dde1002091222o5e67ed0l1b2dfde176abb5fd@mail.gmail.com>
Subject: Re: Synonym map
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Maybe I miss something but what is wrong with SynonymTokenFilter in
contrib/wordnet?

simon

On Tue, Feb 9, 2010 at 5:03 PM, Ian Lea <ian.lea@gmail.com> wrote:
> Lucene in Action second edition has Synonym stuff that I think will
> work with lucene 3.0.
>
> Source code available from http://www.manning.com/hatcher3/
>
>
> --
> Ian.
>
>
> On Tue, Feb 9, 2010 at 2:03 PM, Marc Schwarz <info@qboad.de> wrote:
>> Hi,
>>
>> i try to implement synonyma, but i didn't exactly know how to do it
>> (lucene 3.0).
>>
>> Is anybody out there who has some small code snippets or a good link ?
>>
>> Thanks & Greetings,
>> Marc
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 20:47:52 2010
Return-Path: <java-user-return-44952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91934 invoked from network); 9 Feb 2010 20:47:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 20:47:52 -0000
Received: (qmail 82494 invoked by uid 500); 9 Feb 2010 20:47:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82421 invoked by uid 500); 9 Feb 2010 20:47:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82265 invoked by uid 99); 9 Feb 2010 20:47:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 20:47:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.195] (HELO mail-yx0-f195.google.com) (209.85.210.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 20:47:41 +0000
Received: by yxe33 with SMTP id 33so479256yxe.5
        for <java-user@lucene.apache.org>; Tue, 09 Feb 2010 12:47:19 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.5.11 with SMTP id h11mr927264ybi.93.1265748439446; Tue, 09 
	Feb 2010 12:47:19 -0800 (PST)
In-Reply-To: <20100209181235.GA15349@rectangular.com>
References: <4B714F5C.2040709@deri.org> <002701caa981$b5400ef0$1fc02cd0$@de>
	 <4B71588D.3060001@deri.org> <002801caa988$7a5c5bc0$6f151340$@de>
	 <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com>
	 <4B716C5F.6020907@deri.org>
	 <9ac0c6aa1002090804s19c3d6e6qc1a34bdaca5dd982@mail.gmail.com>
	 <4B718EEB.3070605@deri.org>
	 <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com>
	 <20100209181235.GA15349@rectangular.com>
Date: Tue, 9 Feb 2010 15:47:19 -0500
Message-ID: <9ac0c6aa1002091247j36033b9bt65c787d8703d371e@mail.gmail.com>
Subject: Re: Flex & Docs/AndPositionsEnum
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Feb 9, 2010 at 1:12 PM, Marvin Humphrey <marvin@rectangular.com> wrote:
> On Tue, Feb 09, 2010 at 11:51:31AM -0500, Michael McCandless wrote:
>
>> You should (when possible/reasonable) instead use
>> ReaderUtil.gatherSubReaders, then iterate through those sub readers
>> asking each for its flex fields.
>
>> But if this is only for testing purposes, and Multi*Enum is more
>> convenient (and, once attrs work correctly), then Multi*Enum is
>> perfectly fine.
>
> Mike, FWIW, I've removed the ability to iterate over posting data at
> anything other than the segment level from KS.  There's still a
> priority-queue-based aggregator for iterating over all terms in a
> multi-segment index, but not for anything lower.

Interesting... and segment merging just does its own private
concatenation/mapping-around-deletes of the doc/positions?

I'm torn on the Multi*Enum.... it's easy to get one "by accident"
(because you're interacting with multi reader) and as a result take a
silent performance hit.  And often the caller can easily change to
operate per segment instead.

But, then, it's very convenient when you need it and don't care about
performance.  EG in Renaud's usage, a test case that is trying to
assert that all indexed docs look right, why should you be forced to
operate per segment?  He shouldn't have to bother with the details of
which field/term/doc was indexed into which segment.

Or, I guess we could argue that this test really should create a
TermQuery and walk the matching docs... instead of using the low level
flex enum APIs.  Because searching impl already knows how to step
through the segments.

Anyway, my current patch on LUCENE-2111 reflects my torn-ness: it
makes it just a bit harder to get Multi*Enum on a multi-reader.  If
you call MultiReader.fields(), it throws
UnsupportedOperationException, and you must instead use
MultiFields.getXXXEnum to explicitly create the enum.

> Forcing pluggable index formats to support the extra level of indirection
> necessary for iterating postings from a high level both introduces
> inefficiency and constrains their development.  Consider what would happen if
> we tried indexed terms within a flat positions space and returned an array of
> positions instead of one position at a time.  The instant you return objects
> or aggregates rather than primitives, you force support for offsets down into
> the low-level decoder.

I don't understand this example -- can you give more detail?  Eg,
what's a "flat positions space"?  And "force support for offsets".
And we don't return "objects or aggregates" with Multi*Enum now...

In flex right now the codec is unware that it's being "consumed" by a
Multi*Enum.  It still returns primitives.  If instead we returned an
int[] for positions (hmm -- may be a good reason to make positions be
an Attribute, Uwe), I think it would still be OK?

> It's not really necessary to iterate aggregated postings across multiple
> segments, so IMO it's best to shunt users like Renaud towards the segment
> level.

Still torn... I think it's convenience vs performance.  But I
want convenience to be an explicit choice.  We shouldn't default our
APIs to a silent perf hit...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 09 21:44:48 2010
Return-Path: <java-user-return-44953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16530 invoked from network); 9 Feb 2010 21:44:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Feb 2010 21:44:48 -0000
Received: (qmail 51152 invoked by uid 500); 9 Feb 2010 21:44:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51068 invoked by uid 500); 9 Feb 2010 21:44:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51058 invoked by uid 99); 9 Feb 2010 21:44:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 21:44:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.116.39.62] (HELO rectangular.com) (68.116.39.62)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Feb 2010 21:44:38 +0000
Received: from marvin by rectangular.com with local (Exim 4.63)
	(envelope-from <marvin@rectangular.com>)
	id 1NexsW-0004cD-5W
	for java-user@lucene.apache.org; Tue, 09 Feb 2010 13:44:16 -0800
Date: Tue, 9 Feb 2010 13:44:16 -0800
To: java-user@lucene.apache.org
Subject: Re: Flex & Docs/AndPositionsEnum
Message-ID: <20100209214416.GA17405@rectangular.com>
References: <002701caa981$b5400ef0$1fc02cd0$@de> <4B71588D.3060001@deri.org> <002801caa988$7a5c5bc0$6f151340$@de> <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com> <4B716C5F.6020907@deri.org> <9ac0c6aa1002090804s19c3d6e6qc1a34bdaca5dd982@mail.gmail.com> <4B718EEB.3070605@deri.org> <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com> <20100209181235.GA15349@rectangular.com> <9ac0c6aa1002091247j36033b9bt65c787d8703d371e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <9ac0c6aa1002091247j36033b9bt65c787d8703d371e@mail.gmail.com>
User-Agent: Mutt/1.5.13 (2006-08-11)
From: Marvin Humphrey <marvin@rectangular.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Feb 09, 2010 at 03:47:19PM -0500, Michael McCandless wrote:

> Interesting... and segment merging just does its own private
> concatenation/mapping-around-deletes of the doc/positions?

I think the answer is yes, but I'm not sure I understand the question
completely since I'm not sure why you'd ask that in this context.

> what's a "flat positions space"?  

It's something Google once used.  Instead of positions starting with 0 at each
document, they just keep going.

  doc 1:  "Three Blind Mice"           - positions 0, 1, 2
  doc 2:  "Peter Peter Pumpkin Eater"  - positions 3, 4, 5, 6

> And we don't return "objects or aggregates" with Multi*Enum now...

Yeah, this is different.  In KS right now, we use a generic PostingList, which
conveys different information depending on what class of Posting it contains.

> In flex right now the codec is unware that it's being "consumed" by a
> Multi*Enum.  

Right, but in KinoSearch's case PostingList had to be aware of that because
the Posting object could be consumed at either the segment level or the index
level -- so it needed a setDocBase(offset) method which adjusted the doc num in
the Posting.  It was messy.

The change I made was to eliminate PolyPostingList and PolyPostingListReader,
which made it possible to remove the setDocBase() method from SegPostingList.

> It still returns primitives.  If instead we returned an int[] for positions
> (hmm -- may be a good reason to make positions be an Attribute, Uwe), I
> think it would still be OK?

In the flat positions space example, it would be necessary to add an offset to
each of the positions in that array.  Each segment would have a "positions
max" analogous to maxDoc(); these would be summed to obtain the positions
offset the same way we add up maxDoc() now to obtain the doc id offset.

That example may not be a deal breaker for you, but I'm not willing to
guarantee that Lucy will always return primitives from these enums, now and
forever, one per method call.

> Still torn... I think it's convenience vs performance.  

But convenience for the posting format plugin developer matters too, right?
Are you confident that a generic aggregator can support all possible codecs,
or will plugin developers be forced to ensure that aggregation works because
you've guaranteed to users like Renaud that it will?

Marvin Humphrey


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 06:59:40 2010
Return-Path: <java-user-return-44954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31592 invoked from network); 10 Feb 2010 06:59:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 06:59:40 -0000
Received: (qmail 97519 invoked by uid 500); 10 Feb 2010 06:59:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97454 invoked by uid 500); 10 Feb 2010 06:59:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97444 invoked by uid 99); 10 Feb 2010 06:59:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 06:59:36 +0000
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=FS_REPLICA,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 98.129.35.5 is neither permitted nor denied by domain of yuvalf@answers.com)
Received: from [98.129.35.5] (HELO server505.appriver.com) (98.129.35.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 06:59:26 +0000
X-Policy: GLOBAL - answers.com
X-Primary: yuvalf@answers.com
X-Note: This Email was scanned by AppRiver SecureTide
X-ALLOW: yuvalf@answers.com ALLOWED
X-Virus-Scan: V-
X-Note: Spam Tests Failed: 
X-Country-Path: UNITED STATES->UNITED STATES->UNITED STATES
X-Note-Sending-IP: 98.129.23.14
X-Note-Reverse-DNS: ht01.exg5.exghost.com
X-Note-WHTLIST: yuvalf@answers.com
X-Note: User Rule Hits: 
X-Note: Global Rule Hits: G173 G174 G175 G176 G180 G181 G192 G279 
X-Note: Encrypt Rule Hits: 
X-Note: Mail Class: ALLOWEDSENDER
X-Note: Headers Injected
Received: from [98.129.23.14] (HELO ht01.exg5.exghost.com)
  by server505.appriver.com (CommuniGate Pro SMTP 5.3.2)
  with ESMTPS id 23331937 for java-user@lucene.apache.org; Wed, 10 Feb 2010 00:59:03 -0600
Received: from mbx03.exg5.exghost.com ([169.254.1.200]) by
 ht01.exg5.exghost.com ([98.129.23.14]) with mapi; Wed, 10 Feb 2010 00:59:04
 -0600
From: Yuval Feinstein <yuvalf@answers.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 10 Feb 2010 00:59:01 -0600
Subject: RE: Different replicas return different scores
Thread-Topic: Different replicas return different scores
Thread-Index: Acqpot97X8OAQCgmQu2Pj/TSkkhzkAAekusA
Message-ID: <01C4AEE04EB96243BBAA8083CB6514E860673509@MBX03.exg5.exghost.com>
References: <01C4AEE04EB96243BBAA8083CB6514E860672FB8@MBX03.exg5.exghost.com>
 <8c4e68611002090812s5906caadyeaad6a95b39bd376@mail.gmail.com>
In-Reply-To: <8c4e68611002090812s5906caadyeaad6a95b39bd376@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for these directions, Ian.
We are running Lucene 2.9.1 on CentOs 5 64-bit machines.
We do use compound file format, and will look into replacing it with the si=
mple files,
although I believe this will create too many files.=20
We will also consider the rsync option.
Thanks again,
-- Yuval

-----Original Message-----
From: Ian Lea [mailto:ian.lea@gmail.com]=20
Sent: Tuesday, February 09, 2010 6:13 PM
To: java-user@lucene.apache.org
Subject: Re: Different replicas return different scores

Since the update commands may run in different order on different
shards you might get different sets of segments because merges happen
to be triggered at different points in the different batches of
updates.  But you shouldn't have different numbers of deleted docs if
you have really been applying the same updates to all the shards.
Could some updates have been missed?  Or docs added then deleted or
something?  Maybe there are other variations between the shards and
that is causing the variation in query scores.

As an alternative approach you could have one master index per shard
that takes all the updates and then send that index out to the shard
servers.  If you don't use compound file format, and don't optimize,
the file changes are typically quite small with default or sensible
merge settings and can be distributed quickly using rsync.  You can
have more control by using MergePolicy and friends.

What version of lucene are you running?


--
Ian.


On Tue, Feb 9, 2010 at 2:26 PM, Yuval Feinstein <yuvalf@answers.com> wrote:
> We are running a large sharded Lucene-based application.
> Our configuration supports near real-time updates, by incrementally
> Updating documents (using delete then add) on the shards.
> Every shard is replicated to several machines in order to improve perform=
ance.
> We replicate the shard by sending the same deletion and addition commands=
 to all the replicas,
> Where they may be performed in a different order. (We delete a set of doc=
uments, say 1000 at a time,
> Then add them one-by-one semi-asynchronously).
> Lately we have noticed a subtle difference in query scores across differe=
nt replicas of the same shard.
> Further investigation showed that the only noticeable difference between =
the replicas was the index directory structure:
> 1. =A0 =A0 =A0Different replicas have different sets of segments - most s=
egment files are the same, but some are different.
> 2. =A0 =A0 =A0The numbers of deleted documents are different between two =
replicas of the same shard.
> Is this a known behavior of Java Lucene?
> How can we change this behavior? We want different replicas returning the=
 exact same score per query hits.
> (We would rather not optimize the index as we believe this will harm perf=
ormance.)
>
> TIA,
> Yuval and Ophir
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 09:17:47 2010
Return-Path: <java-user-return-44955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69491 invoked from network); 10 Feb 2010 09:17:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 09:17:47 -0000
Received: (qmail 16887 invoked by uid 500); 10 Feb 2010 09:17:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16816 invoked by uid 500); 10 Feb 2010 09:17:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16806 invoked by uid 99); 10 Feb 2010 09:17:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 09:17:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [71.6.200.51] (HELO serve.stimulussoft.com) (71.6.200.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 09:17:34 +0000
Received: from [192.168.0.19] (196-210-161-180-tbnb-esr-2.dynamic.isadsl.co.za [196.210.161.180])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by serve.stimulussoft.com (Postfix) with ESMTPSA id 37B0350828
	for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 01:17:11 -0800 (PST)
Message-ID: <4B727972.2040500@stimulussoft.com>
Date: Wed, 10 Feb 2010 11:16:34 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.7) Gecko/20100111 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Contrib Lucene Analyzers & Stemming
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi There

We are having problems with some of the Lucene analyzers in the 
contributions package. For instance, it appears that the Russian 
analyzer supports stemming, although, when we test it it does not. Is 
there a specific switch that we must enable to enable the stemming of 
words? When we using Lucene 2.9.1, stemming appeared to work and after 
having upgraded to Lucene 3.0, it does not.

Thanks in advance

Jamie



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 09:25:21 2010
Return-Path: <java-user-return-44956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72213 invoked from network); 10 Feb 2010 09:25:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 09:25:20 -0000
Received: (qmail 30728 invoked by uid 500); 10 Feb 2010 09:25:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30660 invoked by uid 500); 10 Feb 2010 09:25:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30650 invoked by uid 99); 10 Feb 2010 09:25:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 09:25:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.204 as permitted sender)
Received: from [61.135.132.204] (HELO relay.mail.sohu.com) (61.135.132.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 09:25:07 +0000
Received: from mx16.mail.sohu.com (unknown [192.168.95.243])
	by relay.mail.sohu.com (Postfix) with ESMTP id B86B9F28745
	for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 17:24:51 +0800 (CST)
Received: from mx16.mail.sohu.com (localhost.localdomain [127.0.0.1])
	by mx16.mail.sohu.com (Postfix) with ESMTP id 2856228428D
	for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 17:24:38 +0800 (CST)
To: "java-user" <java-user@lucene.apache.org>
Message-ID: <1265793878.dcef5c4cfd7848efb4c04fa354cc8728.luocan19826164@sohu.com>
Subject: problem:lucene did not delete old index file after optimize method called
Date: Wed, 10 Feb 2010 09:24:38 GMT
MIME-Version: 1.0
X-SHIP: 219.133.62.73
Reference: <4B727972.2040500@stimulussoft.com>
In-Reply-To: <4B727972.2040500@stimulussoft.com>
From: luocan19826164@sohu.com
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_000_a89827f6d8784381a79f38ddb3e20912"
X-SOHU-Antispam-Bayes: 0

------_=_NextPart_000_a89827f6d8784381a79f38ddb3e20912
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

DQoNCg0KDQpsdWNlbmUgZGlkIG5vdCBkZWxldGUgb2xkIGluZGV4IGZpbGUgYWZ0ZXIgb3B0aW1p
emUgbWV0aG9kIGNhbGxlZC4NCnBzOkkgY2FsbCBJbmRleFdyaXRlci5nZXRSZWFkZXIoKSBhbmQg
dGhlbiBjYWxsIG9sZCBJbmRleFJlYWRlci5jbG9zZSgpIGV2ZXJ5IDEgbWludXRlLA0KYSBsb25n
IHRpbWUgcGFzcywgSSB3YXRjaGUgb2xkIGluZGV4IGZpbGUgZGlkIG5vdCBkaXNhcHBlYXIuDQph
ZnRlciBJIHJlc3RhcnQgbXkgcHJvZ3JhbSwgb3B0aW1pemUgaW5kZXggZmlsZSBkaXNhcHBlYXIs
YnV0IG9sZCBpbmRleCBmaWxlIHN0YXkhIQ==

------_=_NextPart_000_a89827f6d8784381a79f38ddb3e20912--



From java-user-return-44957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 09:47:57 2010
Return-Path: <java-user-return-44957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84051 invoked from network); 10 Feb 2010 09:47:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 09:47:57 -0000
Received: (qmail 65779 invoked by uid 500); 10 Feb 2010 09:47:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65702 invoked by uid 500); 10 Feb 2010 09:47:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65692 invoked by uid 99); 10 Feb 2010 09:47:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 09:47:54 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 09:47:46 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 5B4A045FE57
	for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 10:47:23 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id y4xC4KZ5diTo for <java-user@lucene.apache.org>;
	Wed, 10 Feb 2010 10:47:14 +0100 (CET)
Received: from VEGA (unknown [134.102.249.75])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 9C28945FE58
	for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 10:47:14 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <002701caa981$b5400ef0$1fc02cd0$@de> <4B71588D.3060001@deri.org> <002801caa988$7a5c5bc0$6f151340$@de> <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com> <4B716C5F.6020907@deri.org> <9ac0c6aa1002090804s19c3d6e6qc1a34bdaca5dd982@mail.gmail.com> <4B718EEB.3070605@deri.org> <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com> <20100209181235.GA15349@rectangular.com> <9ac0c6aa1002091247j36033b9bt65c787d8703d371e@mail.gmail.com> <20100209214416.GA17405@rectangular.com>
In-Reply-To: <20100209214416.GA17405@rectangular.com>
Subject: RE: Flex & Docs/AndPositionsEnum
Date: Wed, 10 Feb 2010 10:47:15 +0100
Message-ID: <000c01caaa36$073c7900$15b56b00$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acqp0R6X3li446DCRDyzY6SIDH3fNQAYn93Q
Content-Language: de

> > And we don't return "objects or aggregates" with Multi*Enum now...
>=20
> Yeah, this is different.  In KS right now, we use a generic
> PostingList, which
> conveys different information depending on what class of Posting it
> contains.
>=20
> > In flex right now the codec is unware that it's being "consumed" by =
a
> > Multi*Enum.
>=20
> Right, but in KinoSearch's case PostingList had to be aware of that
> because
> the Posting object could be consumed at either the segment level or =
the
> index
> level -- so it needed a setDocBase(offset) method which adjusted the
> doc num in
> the Posting.  It was messy.

The doc base adaption is done in the MultiDocsEnum in Lucene.

> The change I made was to eliminate PolyPostingList and
> PolyPostingListReader,
> which made it possible to remove the setDocBase() method from
> SegPostingList.
>=20
> > It still returns primitives.  If instead we returned an int[] for
> positions
> > (hmm -- may be a good reason to make positions be an Attribute, =
Uwe),
> I
> > think it would still be OK?

Positions as attributes would be good. For positions we need a new =
Attribute (not PositionIncrement), but e.g. for offsets and payloads we =
can use the standard attributes from the analysis, which is really cool. =
This would also make it possible to add all custom attributes from the =
analysis phase to the posting list and make them visible in the TermDocs =
enum. In my opinion, there should be no DocsEnum, DocsAndPositionsEnum =
and so on enums, just one class, which only differes in provided =
attributes. So if you want the payloads, ask for a standard DocsEnum and =
pass the requested attribute classes as parameter):
	IndexReader.termDocsEnum(Bits skipDocs, String field, BytesRef term, =
Class<? extends Attribute>... atts)

If somebody wants offsets and payloads:
	reader.termDocsEnum(skipDocs, "field", term, OffsetAttribute.class, =
PayloadAttribute.class);

But before we can implement this for MultiEnums we need the Proxy =
attributes or we need to copy them around (and the MultiEnums get their =
own AttributeSource). For this to work I will add a =
AttributeSource.copyTo(AttributeSource), which is on my todolist, but =
still missing. For some TokenStreams this method may also be convenient =
(e.g. concenating TokenStreams).

On the other hand: with Proxy attributes, concenating TokenStreams are =
easy (and very performant!), too.

> > You should (when possible/reasonable) instead use
> > ReaderUtil.gatherSubReaders, then iterate through those sub readers
> > asking each for its flex fields.
> >
> > But if this is only for testing purposes, and Multi*Enum is more
> > convenient (and, once attrs work correctly), then Multi*Enum is
> > perfectly fine.
>=20
> Mike, FWIW, I've removed the ability to iterate over posting data at
> anything
> other than the segment level from KS.  There's still a priority-queue-
> based
> aggregator for iterating over all terms in a multi-segment index, but
> not for
> anything lower.

I am not sure if this is very good in Lucene as it would break lots of =
apps. E.g. simple autocompletes use a PrefixTerm(s)Enums, but must use =
the top-level reader or they have to emulate merging of all TermsEnums =
themselves. A second problem (currently) is rewrites (e.g. Fuzzy) to =
BooleanQuery for MTQs. They operate on the top level reader.

So I propose "simple" and not so performant Enums for MultiReaders. In =
my opinion, it would also be possible without ProxyAttributes, if we =
simply copy them around. It=E2=80=99s a performance problem, but if =
somebody needs speed, segment-level enums should be used (and search =
does this by the way).

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 09:58:43 2010
Return-Path: <java-user-return-44958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88552 invoked from network); 10 Feb 2010 09:58:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 09:58:43 -0000
Received: (qmail 83016 invoked by uid 500); 10 Feb 2010 09:58:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82943 invoked by uid 500); 10 Feb 2010 09:58:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82933 invoked by uid 99); 10 Feb 2010 09:58:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 09:58:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.173] (HELO mail-yx0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 09:58:33 +0000
Received: by yxe3 with SMTP id 3so5941972yxe.20
        for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 01:58:12 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.237.14 with SMTP id k14mr1916125ybh.29.1265795892225; Wed, 
	10 Feb 2010 01:58:12 -0800 (PST)
In-Reply-To: <1265793878.dcef5c4cfd7848efb4c04fa354cc8728.luocan19826164@sohu.com>
References: <4B727972.2040500@stimulussoft.com>
	 <1265793878.dcef5c4cfd7848efb4c04fa354cc8728.luocan19826164@sohu.com>
Date: Wed, 10 Feb 2010 04:58:12 -0500
Message-ID: <9ac0c6aa1002100158l3a77546dxaee5eaaaa703980f@mail.gmail.com>
Subject: Re: problem:lucene did not delete old index file after optimize 
	method called
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

This happens, on Windows, when there is an IndexReader still reading
those files.  IndexWriter will periodically (after a merge completes
or a new segment is flushed) retry deleting those files, but it won't
succeed until no reader has a given file open anymore.

IW also deletes unreferenced files when it's first opened.  So if you
want to force it to try to delete, close your current IW and open a
new one (with create=false).

Mike

On Wed, Feb 10, 2010 at 4:24 AM,  <luocan19826164@sohu.com> wrote:
>
>
>
>
> lucene did not delete old index file after optimize method called.
> ps:I call IndexWriter.getReader() and then call old IndexReader.close() every 1 minute,
> a long time pass, I watche old index file did not disappear.
> after I restart my program, optimize index file disappear,but old index file stay!!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 10:36:19 2010
Return-Path: <java-user-return-44959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8693 invoked from network); 10 Feb 2010 10:36:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 10:36:19 -0000
Received: (qmail 32609 invoked by uid 500); 10 Feb 2010 10:36:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32541 invoked by uid 500); 10 Feb 2010 10:36:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32531 invoked by uid 99); 10 Feb 2010 10:36:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 10:36:16 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.86 as permitted sender)
Received: from [61.135.132.86] (HELO relay.mail.sohu.com) (61.135.132.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 10:36:04 +0000
Received: from mx16.mail.sohu.com (unknown [192.168.95.243])
	by relay.mail.sohu.com (Postfix) with ESMTP id 5AAA9698390
	for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 18:35:31 +0800 (CST)
Received: from mx16.mail.sohu.com (localhost.localdomain [127.0.0.1])
	by mx16.mail.sohu.com (Postfix) with ESMTP id 89AFB28428D
	for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 18:35:32 +0800 (CST)
To: "java-user" <java-user@lucene.apache.org>
Message-ID: <1265798132.8af71373f34644dabe1c31357eaa3c86.luocan19826164@sohu.com>
Subject: Re: problem:lucene did not delete old index file after optimize method called
Date: Wed, 10 Feb 2010 10:35:32 GMT
MIME-Version: 1.0
X-SHIP: 219.133.62.73
Reference: <1265793878.dcef5c4cfd7848efb4c04fa354cc8728.luocan19826164@sohu.com>,
	<4B727972.2040500@stimulussoft.com>,
	<9ac0c6aa1002100158l3a77546dxaee5eaaaa703980f@mail.gmail.com>
In-Reply-To: <9ac0c6aa1002100158l3a77546dxaee5eaaaa703980f@mail.gmail.com>
From: luocan19826164@sohu.com
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_000_d428366530ff4feca37fd54829eb1dc0"
X-SOHU-Antispam-Bayes: 0

------_=_NextPart_000_d428366530ff4feca37fd54829eb1dc0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

dGhhbmtzIGZvciB5b3VyIHJlcGx5IQ0KYnV0IEkgZG9uJ3QgdGhpbmsgdGhlcmUgaXMgYW4gSW5k
ZXhSZWFkZXIgc3RpbGwgcmVhZGluZyB0aG9zZSBmaWxlcyxiZWNhdXNlIEkgY2FsbCBpbmRleFJl
YWRlciBjbG9zZQ0KYW5kIHJlb3BlbiBldmVyeSAxIG1pbnV0ZSAuDQombmJzcDsNCklXIGFsc28g
ZGVsZXRlcyB1bnJlZmVyZW5jZWQgZmlsZXMsYnV0IHdoeSBpdCBkZWxldGUgdGhlIG9wdGltaXpl
IGZpbGUsbm90IGRlbGV0ZSB0aGUgb2xkIGluZGV4IGZpbGUuDQp0aGUgbWVyZ2VkIGZpbGUgaXMg
d2hhdCBJIHdhbnRlZC4NCiZuYnNwOw0KKChhZnRlciBJIHJlc3RhcnQgbXkgcHJvZ3JhbSwgb3B0
aW1pemUgaW5kZXggZmlsZSBkaXNhcHBlYXIsYnV0IG9sZCBpbmRleCBmaWxlIHN0YXkpKQ0KJm5i
c3A7DQombmJzcDsNCg0KDQoNCi0tLS0tIOWOn+aWhyAtLS0tLSDlj5Hku7bkuro6IE1pY2hhZWwg
TWNDYW5kbGVzcyDkuLvjgIDpopg6IFJlOiBwcm9ibGVtOmx1Y2VuZSBkaWQgbm90IGRlbGV0ZSBv
bGQgaW5kZXggZmlsZSBhZnRlciBvcHRpbWl6ZSBtZXRob2QgY2FsbGVk5pe244CA6Ze0OiAyMDEw
5bm0MuaciDEw5pelIDE3OjU4OjEyDQpUaGlzIGhhcHBlbnMsIG9uIFdpbmRvd3MsIHdoZW4gdGhl
cmUgaXMgYW4gSW5kZXhSZWFkZXIgc3RpbGwgcmVhZGluZ3Rob3NlIGZpbGVzLiBJbmRleFdyaXRl
ciB3aWxsIHBlcmlvZGljYWxseSAoYWZ0ZXIgYSBtZXJnZSBjb21wbGV0ZXNvciBhIG5ldyBzZWdt
ZW50IGlzIGZsdXNoZWQpIHJldHJ5IGRlbGV0aW5nIHRob3NlIGZpbGVzLCBidXQgaXQgd29uJ3Rz
dWNjZWVkIHVudGlsIG5vIHJlYWRlciBoYXMgYSBnaXZlbiBmaWxlIG9wZW4gYW55bW9yZS5JVyBh
bHNvIGRlbGV0ZXMgdW5yZWZlcmVuY2VkIGZpbGVzIHdoZW4gaXQncyBmaXJzdCBvcGVuZWQuIFNv
IGlmIHlvdXdhbnQgdG8gZm9yY2UgaXQgdG8gdHJ5IHRvIGRlbGV0ZSwgY2xvc2UgeW91ciBjdXJy
ZW50IElXIGFuZCBvcGVuIGFuZXcgb25lICh3aXRoIGNyZWF0ZT1mYWxzZSkuTWlrZU9uIFdlZCwg
RmViIDEwLCAyMDEwIGF0IDQ6MjQgQU0sICZsdDtsdW9jYW4xOTgyNjE2NEBzb2h1LmNvbSZndDsg
d3JvdGU6Jmd0OyZndDsmZ3Q7Jmd0OyZndDsgbHVjZW5lIGRpZCBub3QgZGVsZXRlIG9sZCBpbmRl
eCBmaWxlIGFmdGVyIG9wdGltaXplIG1ldGhvZCBjYWxsZWQuJmd0OyBwczpJIGNhbGwgSW5kZXhX
cml0ZXIuZ2V0UmVhZGVyKCkgYW5kIHRoZW4gY2FsbCBvbGQgSW5kZXhSZWFkZXIuY2xvc2UoKSBl
dmVyeSAxIG1pbnV0ZSwmZ3Q7IGEgbG9uZyB0aW1lIHBhc3MsIEkgd2F0Y2hlIG9sZCBpbmRleCBm
aWxlIGRpZCBub3QgZGlzYXBwZWFyLiZndDsgYWZ0ZXIgSSByZXN0YXJ0IG15IHByb2dyYW0sIG9w
dGltaXplIGluZGV4IGZpbGUgZGlzYXBwZWFyLGJ1dCBvbGQgaW5kZXggZmlsZSBzdGF5ISEtLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS1UbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVj
ZW5lLmFwYWNoZS5vcmdGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXIt
aGVscEBsdWNlbmUuYXBhY2hlLm9yZw==

------_=_NextPart_000_d428366530ff4feca37fd54829eb1dc0--



From java-user-return-44960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 10:40:16 2010
Return-Path: <java-user-return-44960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10412 invoked from network); 10 Feb 2010 10:40:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 10:40:16 -0000
Received: (qmail 36154 invoked by uid 500); 10 Feb 2010 10:40:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36101 invoked by uid 500); 10 Feb 2010 10:40:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36063 invoked by uid 99); 10 Feb 2010 10:40:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 10:40:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.217.212] (HELO mail-gx0-f212.google.com) (209.85.217.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 10:40:04 +0000
Received: by gxk4 with SMTP id 4so6376348gxk.5
        for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 02:39:43 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.117.30 with SMTP id p30mr2022271ybc.67.1265798382857; Wed, 
	10 Feb 2010 02:39:42 -0800 (PST)
In-Reply-To: <1265798132.8af71373f34644dabe1c31357eaa3c86.luocan19826164@sohu.com>
References: <9ac0c6aa1002100158l3a77546dxaee5eaaaa703980f@mail.gmail.com>
	 <1265798132.8af71373f34644dabe1c31357eaa3c86.luocan19826164@sohu.com>
Date: Wed, 10 Feb 2010 05:39:42 -0500
Message-ID: <9ac0c6aa1002100239v33355b28n2e25fa391d53f8d4@mail.gmail.com>
Subject: Re: problem:lucene did not delete old index file after optimize 
	method called
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

My guess is there is accidentally still a reader open, at the time
that IW tries to delete these unreferenced files.

Eg if you close & reopen your reader, always, then there is always a
reader open on the index.

Try closing all readers, then close IW, then open & close a new IW,
and see if the files are deleted.

Or... can you make this happen in a small test case?

Mike

On Wed, Feb 10, 2010 at 5:35 AM,  <luocan19826164@sohu.com> wrote:
> thanks for your reply!
> but I don't think there is an IndexReader still reading those files,becau=
se I call indexReader close
> and reopen every 1 minute .
> &nbsp;
> IW also deletes unreferenced files,but why it delete the optimize file,no=
t delete the old index file.
> the merged file is what I wanted.
> &nbsp;
> ((after I restart my program, optimize index file disappear,but old index=
 file stay))
> &nbsp;
> &nbsp;
>
>
>
> ----- =D4=AD=CE=C4 ----- =B7=A2=BC=FE=C8=CB: Michael McCandless =D6=F7=A1=
=A1=CC=E2: Re: problem:lucene did not delete old index file after optimize =
method called=CA=B1=A1=A1=BC=E4: 2010=C4=EA2=D4=C210=C8=D5 17:58:12
> This happens, on Windows, when there is an IndexReader still readingthose=
 files. IndexWriter will periodically (after a merge completesor a new segm=
ent is flushed) retry deleting those files, but it won'tsucceed until no re=
ader has a given file open anymore.IW also deletes unreferenced files when =
it's first opened. So if youwant to force it to try to delete, close your c=
urrent IW and open anew one (with create=3Dfalse).MikeOn Wed, Feb 10, 2010 =
at 4:24 AM, &lt;luocan19826164@sohu.com&gt; wrote:&gt;&gt;&gt;&gt;&gt; luce=
ne did not delete old index file after optimize method called.&gt; ps:I cal=
l IndexWriter.getReader() and then call old IndexReader.close() every 1 min=
ute,&gt; a long time pass, I watche old index file did not disappear.&gt; a=
fter I restart my program, optimize index file disappear,but old index file=
 stay!!--------------------------------------------------------------------=
-To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.orgFor additio=
nal commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 11:37:26 2010
Return-Path: <java-user-return-44961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28342 invoked from network); 10 Feb 2010 11:37:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 11:37:26 -0000
Received: (qmail 12227 invoked by uid 500); 10 Feb 2010 11:37:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12153 invoked by uid 500); 10 Feb 2010 11:37:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12143 invoked by uid 99); 10 Feb 2010 11:37:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 11:37:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of naamakraus@gmail.com designates 209.85.222.196 as permitted sender)
Received: from [209.85.222.196] (HELO mail-pz0-f196.google.com) (209.85.222.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 11:37:17 +0000
Received: by pzk34 with SMTP id 34so1610888pzk.20
        for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 03:36:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=C41ZnNA2rUKnFvBjzjiA8CDg6h3UMRX3CohCdvuXOBw=;
        b=dnipK0lc96Q95ZiPr0E9/PXvsUOKOZ2blKoowjbXCyVm5EZhj8cRcRmSwJxVhcrBsz
         82FKEGDe4Hk7KqJQBrxll1uLUt3W7t0k29qp7ro6O2TWLIIeLLXvGEdY45ziM7fApBMa
         6Fnv5qtnu2ph1xAvXsNI29VyVK7A3ZEssBb/U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Uund0ersXnUbamKrVSnujp7CUh76natfzMEcItdhoQC0O4tnskwPt2fSce8Acvj4Xl
         fX8pbYxqt+24MN898bQnOPQMqvGIlBc3Ebes6nQuxMXsUsEw3LbFYV8PscL+yetVhcyd
         iu1H2Zg2sDWVoZ08Nr0MUTTIBxZmPr8cBSM4I=
MIME-Version: 1.0
Received: by 10.141.187.5 with SMTP id o5mr67469rvp.59.1265801817177; Wed, 10 
	Feb 2010 03:36:57 -0800 (PST)
In-Reply-To: <9ac0c6aa1002080522y68937192vd8990a5187e772fd@mail.gmail.com>
References: <643aa4871001070413x7629dc2ao5661a18880fcadc4@mail.gmail.com> 
	<359a92831001070537o205957e7nd3d14a0797f5d4ab@mail.gmail.com> 
	<643aa4871001070741t13a8a24coa4a92057bd4e27a7@mail.gmail.com> 
	<359a92831001070851s1c9c562fjf05925af1402fa3d@mail.gmail.com> 
	<9ac0c6aa1001070857i6de5c499m9611dc979f6c6110@mail.gmail.com> 
	<643aa4871001071409n5e7a95bdr973fa4e1e48602b8@mail.gmail.com> 
	<643aa4871002072309x44f92f9elb66836474b8d10e5@mail.gmail.com> 
	<9ac0c6aa1002080057i16996395p27762a3cfb0db48d@mail.gmail.com> 
	<9ac0c6aa1002080522y68937192vd8990a5187e772fd@mail.gmail.com>
From: Naama Kraus <naamakraus@gmail.com>
Date: Wed, 10 Feb 2010 13:36:37 +0200
Message-ID: <643aa4871002100336t15f586f5vbbd530a2c5741292@mail.gmail.com>
Subject: Re: Problems with IndexWriter#commit() on Linux
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1ab54ab3f03047f3d73d2

--000e0cd1ab54ab3f03047f3d73d2
Content-Type: text/plain; charset=ISO-8859-1

Do you mean by calling

IndexWriter#*setInfoStream*(PrintStream
<http://java.sun.com/j2se/1.5/docs/api/java/io/PrintStream.html>
infoStream)

?

Naama


On Mon, Feb 8, 2010 at 3:22 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Hmmm... I think that means you're using the default data mode
> (ordered), which should properly preserve writes if the OS or machine
> crashes.
>
> And actually I was wrong before -- even if the mount had
> data=writeback, since you are "only" kill -9ing the process (not
> crashing the machine), the data mount option doesn't matter.  That
> option only affects what happens on a crash...
>
> Can you work up a small example showing the problem?  And if possible,
> turn on IndexWriter's infoStream, capture the output as you index up
> until the kill -9, and post that?
>
> Mike
>
> On Mon, Feb 8, 2010 at 3:57 AM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
> > Thanks for sharing...
> >
> > Software RAID should be perfectly fine for Lucene, in general, unless
> > the mount is configured to ignore fsync (I think the "data=writeback"
> > mount option for ext3 does so on Linux).
> >
> > Can you check the mount options on your RAID filesystem?
> >
> > Mike
> >
> > On Mon, Feb 8, 2010 at 2:09 AM, Naama Kraus <naamakraus@gmail.com>
> wrote:
> >> Hi All,
> >>
> >> I am back to this one after some while.
> >> It appears the file system I was using resides on software RAID disks. I
> ran
> >> the same code on the same Linux machine, but on another file system
> residing
> >> on SCSI disks. I didn't observe the problem there.
> >> Both file systems are ext3.
> >> So I am guessing the problem relates to the RAID disks.
> >>
> >> I looked again at commit() API, and the following comment may be
> explaining:
> >>
> >> "Note that this operation calls Directory.sync on the index files. That
> call
> >> should not return until the file contents & metadata are on stable
> storage.
> >> For FSDirectory, this calls the OS's fsync. But, beware: some hardware
> >> devices may in fact cache writes even during fsync, and return before
> the
> >> bits are actually on stable storage, to give the appearance of faster
> >> performance. If you have such a device, and it does not have a battery
> >> backup (for example) then on power loss it may still lose data. Lucene
> >> cannot guarantee consistency on such devices."
> >>
> >> Well, for me, running on the SCSI disks is just fine, I wanted to anyway
> >> share my experience.
> >>
> >> Naama
> >>
> >> On Fri, Jan 8, 2010 at 12:09 AM, Naama Kraus <naamakraus@gmail.com>
> wrote:
> >>
> >>> Thanks all for the hints, I'll get back to my code and do some
> additional
> >>> checks.
> >>> Naama
> >>>
> >>>
> >>> On Thu, Jan 7, 2010 at 6:57 PM, Michael McCandless <
> >>> lucene@mikemccandless.com> wrote:
> >>>
> >>>> kill -9 is harsh, but, perfectly fine from Lucene's standpoint.
> >>>> Likewise if the OS or JVM crashes, power is suddenly lost, the index
> >>>> will just fallback to the last successful commit.  What will cause
> >>>> corruption is if you have bit errors happening somewhere in the
> >>>> machine... or if two writers are accidentally allowed to be open on
> >>>> one index... then you're in trouble.
> >>>>
> >>>> What IO system (filesystem & hardware) are you using on Linux?
> >>>> Boiling down to a smallish test case can help to isolate the
> >>>> problem...
> >>>>
> >>>> Mike
> >>>>
> >>>> On Thu, Jan 7, 2010 at 11:51 AM, Erick Erickson <
> erickerickson@gmail.com>
> >>>> wrote:
> >>>> > Can you show us the code where you commit?
> >>>> >
> >>>> > And how do you kill your process? Kill -9 is...er...harsh....
> >>>> >
> >>>> > Yeah, I'm wondering whether the index file size *stays*
> >>>> > changed after you kill you process. If it keeps its
> >>>> > growing on every run (after you kill your process
> >>>> > multiple times), then I'd suspect that you aren't
> >>>> > adding documents like you think you are. Perhaps
> >>>> > different fields, different analyzers, etc.
> >>>> >
> >>>> > Luke should show you the largest document by ID,
> >>>> > as well as document counts. Comparing changes
> >>>> > in the document count and the max doc ID should
> >>>> > tell you something...
> >>>> >
> >>>> > Is it possible that you are updating existing docs
> >>>> > rather than adding new ones?
> >>>> >
> >>>> > Best
> >>>> > Erick
> >>>> >
> >>>> > On Thu, Jan 7, 2010 at 10:41 AM, Naama Kraus <naamakraus@gmail.com>
> >>>> wrote:
> >>>> >
> >>>> >> Thanks dor the input.
> >>>> >>
> >>>> >> 1. While the process is running, I do see the index files growing
> on
> >>>> disk
> >>>> >> and the time stamps changing. Should I see a change in size right
> after
> >>>> >> killing the process, is that what you mean ?
> >>>> >> 2. Yes, same directory is being used for indexing and search.
> >>>> >> 3. Didn't try Luke, good idea. Though I wonder, the same code runs
> well
> >>>> on
> >>>> >> Windows.
> >>>> >>
> >>>> >> Naama
> >>>> >>
> >>>> >> On Thu, Jan 7, 2010 at 3:37 PM, Erick Erickson <
> >>>> erickerickson@gmail.com
> >>>> >> >wrote:
> >>>> >>
> >>>> >> > Several questions:
> >>>> >> > 1> are the index files larger after you kill your process?
> >>>> >> >    Or have the timestamps changed?
> >>>> >> > 2> are you absolutely sure that your indexer, when you
> >>>> >> >     add documents, is pointing at the same directory your
> >>>> >> >     search is pointing to?
> >>>> >> > 3> Have you gotten a copy of Luke and examined your index
> >>>> >> >     to see if, perhaps, your documents aren't being added the
> >>>> >> >     way you think they are?
> >>>> >> >
> >>>> >> > Erick
> >>>> >> >
> >>>> >> > On Thu, Jan 7, 2010 at 7:13 AM, Naama Kraus <
> naamakraus@gmail.com>
> >>>> >> wrote:
> >>>> >> >
> >>>> >> > > Hi,
> >>>> >> > >
> >>>> >> > > I am using IndexWriter#commit() methods in my program to commit
> >>>> >> document
> >>>> >> > > additions to the index. I do that once in a while, after a
> bunch of
> >>>> >> > > documents were added. Since my indexing process is long, I want
> to
> >>>> make
> >>>> >> > > sure
> >>>> >> > > I don't loose too many additions in case of a crash.
> >>>> >> > > When running on Windows, things work as expected. But when
> running
> >>>> my
> >>>> >> > code
> >>>> >> > > on Linux, seems like commit() has no effect. If I kill my
> program
> >>>> and
> >>>> >> > then
> >>>> >> > > restart it, I don't see documents that I added and then
> committed
> >>>> (they
> >>>> >> > are
> >>>> >> > > not returned by a search operation).
> >>>> >> > > I am running Lucene 3.0.0
> >>>> >> > >
> >>>> >> > > Can anyone help ?
> >>>> >> > >
> >>>> >> > > Thanks, Naama
> >>>> >> > >
> >>>> >> > > --
> >>>> >> > > "If you want your children to be intelligent, read them fairy
> >>>> tales. If
> >>>> >> > you
> >>>> >> > > want them to be more intelligent, read them more fairy tales."
> >>>> >> > > "What really interests me is whether God had any choice in the
> >>>> creation
> >>>> >> > of
> >>>> >> > > the world."
> >>>> >> > > (Albert Einstein)
> >>>> >> > >
> >>>> >> >
> >>>> >>
> >>>> >>
> >>>> >>
> >>>> >> --
> >>>> >> "If you want your children to be intelligent, read them fairy
> tales. If
> >>>> you
> >>>> >> want them to be more intelligent, read them more fairy tales."
> >>>> >> "What really interests me is whether God had any choice in the
> creation
> >>>> of
> >>>> >> the world."
> >>>> >> (Albert Einstein)
> >>>> >>
> >>>> >
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>
> >>>
> >>> --
> >>> "If you want your children to be intelligent, read them fairy tales. If
> you
> >>> want them to be more intelligent, read them more fairy tales."
> >>> "What really interests me is whether God had any choice in the creation
> of
> >>> the world."
> >>> (Albert Einstein)
> >>>
> >>
> >>
> >>
> >> --
> >> "If you want your children to be intelligent, read them fairy tales. If
> you
> >> want them to be more intelligent, read them more fairy tales."
> >> "What really interests me is whether God had any choice in the creation
> of
> >> the world."
> >> "A table, a chair, a bowl of fruit and a violin; what else does a man
> need
> >> to be happy? "
> >> (Albert Einstein)
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
"If you want your children to be intelligent, read them fairy tales. If you
want them to be more intelligent, read them more fairy tales."
"What really interests me is whether God had any choice in the creation of
the world."
"A table, a chair, a bowl of fruit and a violin; what else does a man need
to be happy? "
(Albert Einstein)

--000e0cd1ab54ab3f03047f3d73d2--

From java-user-return-44962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 11:58:32 2010
Return-Path: <java-user-return-44962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31504 invoked from network); 10 Feb 2010 11:58:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 11:58:32 -0000
Received: (qmail 29177 invoked by uid 500); 10 Feb 2010 11:58:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29105 invoked by uid 500); 10 Feb 2010 11:58:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29095 invoked by uid 99); 10 Feb 2010 11:58:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 11:58:30 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 11:58:22 +0000
Received: by ywh15 with SMTP id 15so9915ywh.5
        for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 03:58:01 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.3.21 with SMTP id f21mr2160674ybi.171.1265803081159; Wed, 
	10 Feb 2010 03:58:01 -0800 (PST)
In-Reply-To: <20100209214416.GA17405@rectangular.com>
References: <002701caa981$b5400ef0$1fc02cd0$@de>
	 <002801caa988$7a5c5bc0$6f151340$@de>
	 <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com>
	 <4B716C5F.6020907@deri.org>
	 <9ac0c6aa1002090804s19c3d6e6qc1a34bdaca5dd982@mail.gmail.com>
	 <4B718EEB.3070605@deri.org>
	 <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com>
	 <20100209181235.GA15349@rectangular.com>
	 <9ac0c6aa1002091247j36033b9bt65c787d8703d371e@mail.gmail.com>
	 <20100209214416.GA17405@rectangular.com>
Date: Wed, 10 Feb 2010 06:58:01 -0500
Message-ID: <9ac0c6aa1002100358v5e51c743q65054b81e9da5067@mail.gmail.com>
Subject: Re: Flex & Docs/AndPositionsEnum
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On Tue, Feb 9, 2010 at 4:44 PM, Marvin Humphrey <marvin@rectangular.com> wrote:

>> Interesting... and segment merging just does its own private
>> concatenation/mapping-around-deletes of the doc/positions?
>
> I think the answer is yes, but I'm not sure I understand the
> question completely since I'm not sure why you'd ask that in this
> context.

Segment merging is one place that "legitimately" needs to append
docs/positions enum of multiple sub readers... but obviously it can
just do this itself (and it must, since it renumbers the docIDs).

>> what's a "flat positions space"?
>
> It's something Google once used.  Instead of positions starting with
> 0 at each document, they just keep going.
>
>  doc 1:  "Three Blind Mice"           - positions 0, 1, 2
>  doc 2:  "Peter Peter Pumpkin Eater"  - positions 3, 4, 5, 6
>
>> And we don't return "objects or aggregates" with Multi*Enum now...
>
> Yeah, this is different.  In KS right now, we use a generic
> PostingList, which conveys different information depending on what
> class of Posting it contains.

OK

>> In flex right now the codec is unware that it's being "consumed" by
>> a Multi*Enum.
>
> Right, but in KinoSearch's case PostingList had to be aware of that
> because the Posting object could be consumed at either the segment
> level or the index level -- so it needed a setDocBase(offset) method
> which adjusted the doc num in the Posting.  It was messy.
>
> The change I made was to eliminate PolyPostingList and
> PolyPostingListReader, which made it possible to remove the
> setDocBase() method from SegPostingList.

But why didn't you have the Multi*Enums layer add the offset (so that
the codec need not know who's consuming it)?  Performance?

>> It still returns primitives.  If instead we returned an int[] for
>> positions (hmm -- may be a good reason to make positions be an
>> Attribute, Uwe), I think it would still be OK?
>
> In the flat positions space example, it would be necessary to add an
> offset to each of the positions in that array.  Each segment would
> have a "positions max" analogous to maxDoc(); these would be summed
> to obtain the positions offset the same way we add up maxDoc() now
> to obtain the doc id offset.

OK, but [so far] we don't have that problem with the flex APIs -- the
codec is not aware that there's a multi enum layer consuming it.

> That example may not be a deal breaker for you, but I'm not willing
> to guarantee that Lucy will always return primitives from these
> enums, now and forever, one per method call.

But it'd be a major API change down the road to change this, for
Lucy/KS?  Ie this example seems not to apply to Lucene, and even for
KS/Lucy seems contrived -- neither Lucene nor KS/Lucy would/could up
and make such a major API change to the enums, once "committed".

Also, this is why we're adding Attribute* to all the postings enums,
with flex -- any codec & consumer can use their own private
attributes.  The attrs pass through Multi*Enum.

>> Still torn... I think it's convenience vs performance.
>
> But convenience for the posting format plugin developer matters too,
> right?

Right but the existince of Multi*Enums isn't affecting the codec dev
(so far, I think).

> Are you confident that a generic aggregator can support all possible
> codecs, or will plugin developers be forced to ensure that
> aggregation works because you've guaranteed to users like Renaud
> that it will?

Well... pretty confident.  So far, at least?  We have an existence
proof :) The codec API really should not (and, should not have to)
bake in details of who's consuming it.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 12:01:51 2010
Return-Path: <java-user-return-44963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32432 invoked from network); 10 Feb 2010 12:01:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 12:01:51 -0000
Received: (qmail 32629 invoked by uid 500); 10 Feb 2010 12:01:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32555 invoked by uid 500); 10 Feb 2010 12:01:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32545 invoked by uid 99); 10 Feb 2010 12:01:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 12:01:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.217.212] (HELO mail-gx0-f212.google.com) (209.85.217.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 12:01:42 +0000
Received: by gxk4 with SMTP id 4so6418794gxk.5
        for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 04:01:21 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.214.9 with SMTP id m9mr2152098ybg.214.1265803273031; Wed, 
	10 Feb 2010 04:01:13 -0800 (PST)
In-Reply-To: <643aa4871002100336t15f586f5vbbd530a2c5741292@mail.gmail.com>
References: <643aa4871001070413x7629dc2ao5661a18880fcadc4@mail.gmail.com>
	 <359a92831001070537o205957e7nd3d14a0797f5d4ab@mail.gmail.com>
	 <643aa4871001070741t13a8a24coa4a92057bd4e27a7@mail.gmail.com>
	 <359a92831001070851s1c9c562fjf05925af1402fa3d@mail.gmail.com>
	 <9ac0c6aa1001070857i6de5c499m9611dc979f6c6110@mail.gmail.com>
	 <643aa4871001071409n5e7a95bdr973fa4e1e48602b8@mail.gmail.com>
	 <643aa4871002072309x44f92f9elb66836474b8d10e5@mail.gmail.com>
	 <9ac0c6aa1002080057i16996395p27762a3cfb0db48d@mail.gmail.com>
	 <9ac0c6aa1002080522y68937192vd8990a5187e772fd@mail.gmail.com>
	 <643aa4871002100336t15f586f5vbbd530a2c5741292@mail.gmail.com>
Date: Wed, 10 Feb 2010 07:01:12 -0500
Message-ID: <9ac0c6aa1002100401w3108ebafj5356db2aeed240a0@mail.gmail.com>
Subject: Re: Problems with IndexWriter#commit() on Linux
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Yes.

Mike

On Wed, Feb 10, 2010 at 6:36 AM, Naama Kraus <naamakraus@gmail.com> wrote:
> Do you mean by calling
>
> IndexWriter#*setInfoStream*(PrintStream
> <http://java.sun.com/j2se/1.5/docs/api/java/io/PrintStream.html>
> infoStream)
>
> ?
>
> Naama
>
>
> On Mon, Feb 8, 2010 at 3:22 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> Hmmm... I think that means you're using the default data mode
>> (ordered), which should properly preserve writes if the OS or machine
>> crashes.
>>
>> And actually I was wrong before -- even if the mount had
>> data=3Dwriteback, since you are "only" kill -9ing the process (not
>> crashing the machine), the data mount option doesn't matter. =A0That
>> option only affects what happens on a crash...
>>
>> Can you work up a small example showing the problem? =A0And if possible,
>> turn on IndexWriter's infoStream, capture the output as you index up
>> until the kill -9, and post that?
>>
>> Mike
>>
>> On Mon, Feb 8, 2010 at 3:57 AM, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>> > Thanks for sharing...
>> >
>> > Software RAID should be perfectly fine for Lucene, in general, unless
>> > the mount is configured to ignore fsync (I think the "data=3Dwriteback=
"
>> > mount option for ext3 does so on Linux).
>> >
>> > Can you check the mount options on your RAID filesystem?
>> >
>> > Mike
>> >
>> > On Mon, Feb 8, 2010 at 2:09 AM, Naama Kraus <naamakraus@gmail.com>
>> wrote:
>> >> Hi All,
>> >>
>> >> I am back to this one after some while.
>> >> It appears the file system I was using resides on software RAID disks=
. I
>> ran
>> >> the same code on the same Linux machine, but on another file system
>> residing
>> >> on SCSI disks. I didn't observe the problem there.
>> >> Both file systems are ext3.
>> >> So I am guessing the problem relates to the RAID disks.
>> >>
>> >> I looked again at commit() API, and the following comment may be
>> explaining:
>> >>
>> >> "Note that this operation calls Directory.sync on the index files. Th=
at
>> call
>> >> should not return until the file contents & metadata are on stable
>> storage.
>> >> For FSDirectory, this calls the OS's fsync. But, beware: some hardwar=
e
>> >> devices may in fact cache writes even during fsync, and return before
>> the
>> >> bits are actually on stable storage, to give the appearance of faster
>> >> performance. If you have such a device, and it does not have a batter=
y
>> >> backup (for example) then on power loss it may still lose data. Lucen=
e
>> >> cannot guarantee consistency on such devices."
>> >>
>> >> Well, for me, running on the SCSI disks is just fine, I wanted to any=
way
>> >> share my experience.
>> >>
>> >> Naama
>> >>
>> >> On Fri, Jan 8, 2010 at 12:09 AM, Naama Kraus <naamakraus@gmail.com>
>> wrote:
>> >>
>> >>> Thanks all for the hints, I'll get back to my code and do some
>> additional
>> >>> checks.
>> >>> Naama
>> >>>
>> >>>
>> >>> On Thu, Jan 7, 2010 at 6:57 PM, Michael McCandless <
>> >>> lucene@mikemccandless.com> wrote:
>> >>>
>> >>>> kill -9 is harsh, but, perfectly fine from Lucene's standpoint.
>> >>>> Likewise if the OS or JVM crashes, power is suddenly lost, the inde=
x
>> >>>> will just fallback to the last successful commit. =A0What will caus=
e
>> >>>> corruption is if you have bit errors happening somewhere in the
>> >>>> machine... or if two writers are accidentally allowed to be open on
>> >>>> one index... then you're in trouble.
>> >>>>
>> >>>> What IO system (filesystem & hardware) are you using on Linux?
>> >>>> Boiling down to a smallish test case can help to isolate the
>> >>>> problem...
>> >>>>
>> >>>> Mike
>> >>>>
>> >>>> On Thu, Jan 7, 2010 at 11:51 AM, Erick Erickson <
>> erickerickson@gmail.com>
>> >>>> wrote:
>> >>>> > Can you show us the code where you commit?
>> >>>> >
>> >>>> > And how do you kill your process? Kill -9 is...er...harsh....
>> >>>> >
>> >>>> > Yeah, I'm wondering whether the index file size *stays*
>> >>>> > changed after you kill you process. If it keeps its
>> >>>> > growing on every run (after you kill your process
>> >>>> > multiple times), then I'd suspect that you aren't
>> >>>> > adding documents like you think you are. Perhaps
>> >>>> > different fields, different analyzers, etc.
>> >>>> >
>> >>>> > Luke should show you the largest document by ID,
>> >>>> > as well as document counts. Comparing changes
>> >>>> > in the document count and the max doc ID should
>> >>>> > tell you something...
>> >>>> >
>> >>>> > Is it possible that you are updating existing docs
>> >>>> > rather than adding new ones?
>> >>>> >
>> >>>> > Best
>> >>>> > Erick
>> >>>> >
>> >>>> > On Thu, Jan 7, 2010 at 10:41 AM, Naama Kraus <naamakraus@gmail.co=
m>
>> >>>> wrote:
>> >>>> >
>> >>>> >> Thanks dor the input.
>> >>>> >>
>> >>>> >> 1. While the process is running, I do see the index files growin=
g
>> on
>> >>>> disk
>> >>>> >> and the time stamps changing. Should I see a change in size righ=
t
>> after
>> >>>> >> killing the process, is that what you mean ?
>> >>>> >> 2. Yes, same directory is being used for indexing and search.
>> >>>> >> 3. Didn't try Luke, good idea. Though I wonder, the same code ru=
ns
>> well
>> >>>> on
>> >>>> >> Windows.
>> >>>> >>
>> >>>> >> Naama
>> >>>> >>
>> >>>> >> On Thu, Jan 7, 2010 at 3:37 PM, Erick Erickson <
>> >>>> erickerickson@gmail.com
>> >>>> >> >wrote:
>> >>>> >>
>> >>>> >> > Several questions:
>> >>>> >> > 1> are the index files larger after you kill your process?
>> >>>> >> > =A0 =A0Or have the timestamps changed?
>> >>>> >> > 2> are you absolutely sure that your indexer, when you
>> >>>> >> > =A0 =A0 add documents, is pointing at the same directory your
>> >>>> >> > =A0 =A0 search is pointing to?
>> >>>> >> > 3> Have you gotten a copy of Luke and examined your index
>> >>>> >> > =A0 =A0 to see if, perhaps, your documents aren't being added =
the
>> >>>> >> > =A0 =A0 way you think they are?
>> >>>> >> >
>> >>>> >> > Erick
>> >>>> >> >
>> >>>> >> > On Thu, Jan 7, 2010 at 7:13 AM, Naama Kraus <
>> naamakraus@gmail.com>
>> >>>> >> wrote:
>> >>>> >> >
>> >>>> >> > > Hi,
>> >>>> >> > >
>> >>>> >> > > I am using IndexWriter#commit() methods in my program to com=
mit
>> >>>> >> document
>> >>>> >> > > additions to the index. I do that once in a while, after a
>> bunch of
>> >>>> >> > > documents were added. Since my indexing process is long, I w=
ant
>> to
>> >>>> make
>> >>>> >> > > sure
>> >>>> >> > > I don't loose too many additions in case of a crash.
>> >>>> >> > > When running on Windows, things work as expected. But when
>> running
>> >>>> my
>> >>>> >> > code
>> >>>> >> > > on Linux, seems like commit() has no effect. If I kill my
>> program
>> >>>> and
>> >>>> >> > then
>> >>>> >> > > restart it, I don't see documents that I added and then
>> committed
>> >>>> (they
>> >>>> >> > are
>> >>>> >> > > not returned by a search operation).
>> >>>> >> > > I am running Lucene 3.0.0
>> >>>> >> > >
>> >>>> >> > > Can anyone help ?
>> >>>> >> > >
>> >>>> >> > > Thanks, Naama
>> >>>> >> > >
>> >>>> >> > > --
>> >>>> >> > > "If you want your children to be intelligent, read them fair=
y
>> >>>> tales. If
>> >>>> >> > you
>> >>>> >> > > want them to be more intelligent, read them more fairy tales=
."
>> >>>> >> > > "What really interests me is whether God had any choice in t=
he
>> >>>> creation
>> >>>> >> > of
>> >>>> >> > > the world."
>> >>>> >> > > (Albert Einstein)
>> >>>> >> > >
>> >>>> >> >
>> >>>> >>
>> >>>> >>
>> >>>> >>
>> >>>> >> --
>> >>>> >> "If you want your children to be intelligent, read them fairy
>> tales. If
>> >>>> you
>> >>>> >> want them to be more intelligent, read them more fairy tales."
>> >>>> >> "What really interests me is whether God had any choice in the
>> creation
>> >>>> of
>> >>>> >> the world."
>> >>>> >> (Albert Einstein)
>> >>>> >>
>> >>>> >
>> >>>>
>> >>>> -------------------------------------------------------------------=
--
>> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>>
>> >>>>
>> >>>
>> >>>
>> >>> --
>> >>> "If you want your children to be intelligent, read them fairy tales.=
 If
>> you
>> >>> want them to be more intelligent, read them more fairy tales."
>> >>> "What really interests me is whether God had any choice in the creat=
ion
>> of
>> >>> the world."
>> >>> (Albert Einstein)
>> >>>
>> >>
>> >>
>> >>
>> >> --
>> >> "If you want your children to be intelligent, read them fairy tales. =
If
>> you
>> >> want them to be more intelligent, read them more fairy tales."
>> >> "What really interests me is whether God had any choice in the creati=
on
>> of
>> >> the world."
>> >> "A table, a chair, a bowl of fruit and a violin; what else does a man
>> need
>> >> to be happy? "
>> >> (Albert Einstein)
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> "If you want your children to be intelligent, read them fairy tales. If y=
ou
> want them to be more intelligent, read them more fairy tales."
> "What really interests me is whether God had any choice in the creation o=
f
> the world."
> "A table, a chair, a bowl of fruit and a violin; what else does a man nee=
d
> to be happy? "
> (Albert Einstein)
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 12:22:38 2010
Return-Path: <java-user-return-44964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38751 invoked from network); 10 Feb 2010 12:22:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 12:22:38 -0000
Received: (qmail 54577 invoked by uid 500); 10 Feb 2010 12:22:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54493 invoked by uid 500); 10 Feb 2010 12:22:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54483 invoked by uid 99); 10 Feb 2010 12:22:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 12:22:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.222.196 as permitted sender)
Received: from [209.85.222.196] (HELO mail-pz0-f196.google.com) (209.85.222.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 12:22:27 +0000
Received: by pzk34 with SMTP id 34so1655056pzk.20
        for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 04:22:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=7UAlJ13ZV/uMnNNrhqyaQ+7Hi9EXdFdsCp2b6clx/fA=;
        b=JMcNeUB+Ys7OzSkF42ndO5hv5EJsLO0ZMazuL5LAzLl+zjei7DyyezWG7bCzA/WLmY
         3jypeGPUlzPJk7eN+zJ/uRNd4HZKEHz9CJcfRZsRiSh///xCi29ihhSMpXxRNZi14pLq
         CSGmYrScsWc3zzFxJsrf+IafpTVPEFEUHLyMo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Z9PtDxhfApuQd2reVwf8vxBaldMS0h7g2Ik3EVh0tcCtWdxzV6v9If3sx2+DDcDX24
         3+r8X3M21RZ6XYUbXtwMUV6bFwSB3tmokWWl8XP5cuIm7iyYf6ghckFtm4kUAnSskqrY
         4CuXfJnBqRxlkM//0bewAJl6fmkOAfPUTNZu4=
MIME-Version: 1.0
Received: by 10.115.101.25 with SMTP id d25mr70712wam.204.1265804524229; Wed, 
	10 Feb 2010 04:22:04 -0800 (PST)
In-Reply-To: <4B727972.2040500@stimulussoft.com>
References: <4B727972.2040500@stimulussoft.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 10 Feb 2010 07:21:44 -0500
Message-ID: <8f0ad1f31002100421l3f49a046o39875f9c43790c0b@mail.gmail.com>
Subject: Re: Contrib Lucene Analyzers & Stemming
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64b92dc059661047f3e1574
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64b92dc059661047f3e1574
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

hi, what does your test code look like?

The Russian stemmer still stems as of 3.0:
assertAnalyzesToReuse(a, "=D0=9D=D0=BE =D0=B7=D0=BD=D0=B0=D0=BD=D0=B8=D0=B5=
 =D1=8D=D1=82=D0=BE =D1=85=D1=80=D0=B0=D0=BD=D0=B8=D0=BB=D0=BE=D1=81=D1=8C =
=D0=B2 =D1=82=D0=B0=D0=B9=D0=BD=D0=B5",
          new String[] { "=D0=B7=D0=BD=D0=B0=D0=BD", "=D1=85=D1=80=D0=B0=D0=
=BD", "=D1=82=D0=B0=D0=B9=D0=BD" });

On Wed, Feb 10, 2010 at 4:16 AM, Jamie <jamie@stimulussoft.com> wrote:

> Hi There
>
> We are having problems with some of the Lucene analyzers in the
> contributions package. For instance, it appears that the Russian analyzer
> supports stemming, although, when we test it it does not. Is there a
> specific switch that we must enable to enable the stemming of words? When=
 we
> using Lucene 2.9.1, stemming appeared to work and after having upgraded t=
o
> Lucene 3.0, it does not.
>
> Thanks in advance
>
> Jamie
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Robert Muir
rcmuir@gmail.com

--0016e64b92dc059661047f3e1574--

From java-user-return-44965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 12:46:13 2010
Return-Path: <java-user-return-44965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50956 invoked from network); 10 Feb 2010 12:46:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 12:46:13 -0000
Received: (qmail 80935 invoked by uid 500); 10 Feb 2010 12:46:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80859 invoked by uid 500); 10 Feb 2010 12:46:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80849 invoked by uid 99); 10 Feb 2010 12:46:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 12:46:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 12:46:02 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AvsEAJM5cksKhJ0L/2dsb2JhbACaXnS7C4RVBA
X-IronPort-AV: E=Sophos;i="4.49,443,1262563200"; 
   d="scan'208";a="10163884"
Received: from unknown (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx2.nuigalway.ie with ESMTP; 10 Feb 2010 12:45:19 +0000
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 10 Feb 2010 12:45:19 +0000
Received: from [10.196.2.166] ([140.203.154.5]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 10 Feb 2010 12:45:18 +0000
Message-ID: <4B72AA4F.70104@deri.org>
Date: Wed, 10 Feb 2010 12:45:03 +0000
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.9pre) Gecko/20100205 Lightning/1.0pre Shredder/3.0.2pre
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Flex & Docs/AndPositionsEnum
References: <4B714F5C.2040709@deri.org> <002701caa981$b5400ef0$1fc02cd0$@de>	 <4B71588D.3060001@deri.org> <002801caa988$7a5c5bc0$6f151340$@de>	 <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com>	 <4B716C5F.6020907@deri.org>	 <9ac0c6aa1002090804s19c3d6e6qc1a34bdaca5dd982@mail.gmail.com>	 <4B718EEB.3070605@deri.org>	 <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com>	 <20100209181235.GA15349@rectangular.com> <9ac0c6aa1002091247j36033b9bt65c787d8703d371e@mail.gmail.com>
In-Reply-To: <9ac0c6aa1002091247j36033b9bt65c787d8703d371e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 10 Feb 2010 12:45:18.0896 (UTC) FILETIME=[E6BF7B00:01CAAA4E]

Hi Michael,

On 09/02/10 20:47, Michael McCandless wrote:
> But, then, it's very convenient when you need it and don't care about
> performance.  EG in Renaud's usage, a test case that is trying to
> assert that all indexed docs look right, why should you be forced to
> operate per segment?  He shouldn't have to bother with the details of
> which field/term/doc was indexed into which segment.
>
> Or, I guess we could argue that this test really should create a
> TermQuery and walk the matching docs... instead of using the low level
> flex enum APIs.  Because searching impl already knows how to step
> through the segments.
>    
In fact, I care about performance, but I was using the 
IndexReader.termPositionsEnum to mimic the implementation of the 
different query scorers (e.g., TermScorer).
I have already reimplemented many of the original Lucene Scorers to use 
my particular index structure. From what I have seen, the main low level 
scorers (e.g., TermScorer, PhraseScorer) are using the DocsEnum 
interface, and not a segment-level enum. From what I understand, these 
scorers are not aware if they are using a segment-level enum or a 
Multi*Enum. So, there is a loss of performance in this case ? Or do I 
miss something ?

I'll try to clarify my usage of the Flex API, maybe it can highlight you 
certain aspects.
In the ideal world, what I would like to do is the following:
1) write my own codec,
2) register my codec in the IndexWriter, and tell him to use this codec 
for one or more fields (similar to the PerFieldCodecWrapper),
3) write query operators that are compatible with my codec,
4) at search time, use these query operators with the fields that use my 
codec.

If by error, I am using the query operators which are not compatible 
with a field (and its related codec), an exception is thrown telling me 
that I am not able to use these query operators with this field.

So, in my current use case, I don't think it is necessary to be aware of 
that fact that I am manipulating multiple segments or only one segment. 
I think this should be hidden.

But what you were suggesting is to create my own "MultiReader" that is 
optimised for my codec. Is that right ? A MultiReader that just iterates 
over the subreaders, checks if they are using my codec (and therefore 
associated fields), and uses them to iterate over my own postings ?
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 12:59:03 2010
Return-Path: <java-user-return-44966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53148 invoked from network); 10 Feb 2010 12:59:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 12:59:03 -0000
Received: (qmail 3747 invoked by uid 500); 10 Feb 2010 12:59:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3690 invoked by uid 500); 10 Feb 2010 12:59:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3680 invoked by uid 99); 10 Feb 2010 12:59:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 12:59:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 12:58:51 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Av0EAOo7cksKhJ0L/2dsb2JhbACDCpdUdKsKkAqBL4JLWwQ
X-IronPort-AV: E=Sophos;i="4.49,443,1262563200"; 
   d="scan'208";a="10164169"
Received: from unknown (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx2.nuigalway.ie with ESMTP; 10 Feb 2010 12:58:31 +0000
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 10 Feb 2010 12:58:31 +0000
Received: from [10.196.2.166] ([140.203.154.5]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 10 Feb 2010 12:58:31 +0000
Message-ID: <4B72AD6C.5080602@deri.org>
Date: Wed, 10 Feb 2010 12:58:20 +0000
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.9pre) Gecko/20100205 Lightning/1.0pre Shredder/3.0.2pre
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Flex & Docs/AndPositionsEnum
References: <002701caa981$b5400ef0$1fc02cd0$@de> <4B71588D.3060001@deri.org> <002801caa988$7a5c5bc0$6f151340$@de> <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com> <4B716C5F.6020907@deri.org> <9ac0c6aa1002090804s19c3d6e6qc1a34bdaca5dd982@mail.gmail.com> <4B718EEB.3070605@deri.org> <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com> <20100209181235.GA15349@rectangular.com> <9ac0c6aa1002091247j36033b9bt65c787d8703d371e@mail.gmail.com> <20100209214416.GA17405@rectangular.com> <000c01caaa36$073c7900$15b56b00$@de>
In-Reply-To: <000c01caaa36$073c7900$15b56b00$@de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-OriginalArrivalTime: 10 Feb 2010 12:58:31.0147 (UTC) FILETIME=[BEF763B0:01CAAA50]
X-Virus-Checked: Checked by ClamAV on apache.org

On 10/02/10 09:47, Uwe Schindler wrote:
> Positions as attributes would be good. For positions we need a new Attribute (not PositionIncrement), but e.g. for offsets and payloads we can use the standard attributes from the analysis, which is really cool. This would also make it possible to add all custom attributes from the analysis phase to the posting list and make them visible in the TermDocs enum. In my opinion, there should be no DocsEnum, DocsAndPositionsEnum and so on enums, just one class, which only differes in provided attributes. So if you want the payloads, ask for a standard DocsEnum and pass the requested attribute classes as parameter):
> 	IndexReader.termDocsEnum(Bits skipDocs, String field, BytesRef term, Class<? extends Attribute>... atts)
>
> If somebody wants offsets and payloads:
> 	reader.termDocsEnum(skipDocs, "field", term, OffsetAttribute.class, PayloadAttribute.class);
>    
I kind of like this idea. This interface to iterate over the postings 
looks more flexible, and imho it will be easy to use this interface with 
any "home-brewed" codec.
Read optimisations based on the user need such as the current 
termDocsEnum and termPositionsEnum (where one is reading only the freq 
file, the second one is also reading the prox file) will be done under 
the hood by the respective PostingReader. Given the set of Attribute 
class received, the PostingReader knows what he needs to read, and what 
he does not need to read. So, there is also a simplification of the 
interface for the user. It does not have to take care of choosing the 
right enum.
> I am not sure if this is very good in Lucene as it would break lots of apps. E.g. simple autocompletes use a PrefixTerm(s)Enums, but must use the top-level reader or they have to emulate merging of all TermsEnums themselves. A second problem (currently) is rewrites (e.g. Fuzzy) to BooleanQuery for MTQs. They operate on the top level reader.
>
> So I propose "simple" and not so performant Enums for MultiReaders. In my opinion, it would also be possible without ProxyAttributes, if we simply copy them around. Its a performance problem, but if somebody needs speed, segment-level enums should be used (and search does this by the way).
>    
Could you provide pointers to search code that uses the segment-level 
enum ?
As I explained in my last answer to Michael, the TermScorer is using the 
DocsEnum interface, and therefore do not know if it manipulates 
segment-level enum or a Multi*Enums. What search (or query operators) in 
Lucene is using segment-level enums ?

Cheers
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 13:15:58 2010
Return-Path: <java-user-return-44967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62395 invoked from network); 10 Feb 2010 13:15:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 13:15:58 -0000
Received: (qmail 32296 invoked by uid 500); 10 Feb 2010 13:15:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32238 invoked by uid 500); 10 Feb 2010 13:15:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32228 invoked by uid 99); 10 Feb 2010 13:15:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 13:15:56 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 13:15:47 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 0778845FE32
	for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 14:15:27 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Og0LpcLcT33x for <java-user@lucene.apache.org>;
	Wed, 10 Feb 2010 14:15:24 +0100 (CET)
Received: from VEGA (unknown [134.102.249.75])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id C623645FE39
	for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 14:15:24 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <002701caa981$b5400ef0$1fc02cd0$@de> <4B71588D.3060001@deri.org> <002801caa988$7a5c5bc0$6f151340$@de> <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com> <4B716C5F.6020907@deri.org> <9ac0c6aa1002090804s19c3d6e6qc1a34bdaca5dd982@mail.gmail.com> <4B718EEB.3070605@deri.org> <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com> <20100209181235.GA15349@rectangular.com> <9ac0c6aa1002091247j36033b9bt65c787d8703d371e@mail.gmail.com> <20100209214416.GA17405@rectangular.com> <000c01caaa36$073c7900$15b56b00$@de> <4B72AD6C.5080602@deri.org>
In-Reply-To: <4B72AD6C.5080602@deri.org>
Subject: RE: Flex & Docs/AndPositionsEnum
Date: Wed, 10 Feb 2010 14:15:23 +0100
Message-ID: <002501caaa53$1be8f5a0$53bae0e0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqqUODamhdwx8hBQYODbGGUpB429wAAaZ8g
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

> Could you provide pointers to search code that uses the segment-level
> enum ?
> As I explained in my last answer to Michael, the TermScorer is using
> the
> DocsEnum interface, and therefore do not know if it manipulates
> segment-level enum or a Multi*Enums. What search (or query operators)
> in
> Lucene is using segment-level enums ?

All of them, only rewrites are currently done on the top-level reader. =
IndexSearcher since 2.9 creates Scorers in separate for each segment and =
merges the results in its collector. Because of that we have a modified =
Collector interface that has setNextReader() methods and so on.

So you can assume that every Scorer uses a SegmentReader, but legacy =
code may behave different (like if somebody instantiates a TermScorer =
and passes the top level reader to it). Also Solr is not yet completely =
free of global readers (as far as I know).


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 13:17:47 2010
Return-Path: <java-user-return-44968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62622 invoked from network); 10 Feb 2010 13:17:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 13:17:46 -0000
Received: (qmail 34318 invoked by uid 500); 10 Feb 2010 13:17:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34241 invoked by uid 500); 10 Feb 2010 13:17:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34227 invoked by uid 99); 10 Feb 2010 13:17:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 13:17:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of iamrohitbanga@gmail.com designates 209.85.223.198 as permitted sender)
Received: from [209.85.223.198] (HELO mail-iw0-f198.google.com) (209.85.223.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 13:17:37 +0000
Received: by iwn36 with SMTP id 36so1534257iwn.3
        for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 05:17:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=arXjt+vTEco0BPfCgKGEE7scFhD1o0q01BXYlYNA0kg=;
        b=SwHhdjaUnjRGcjEvfTMxrs81Z+mXpXvpDlRkbjNiQZ/pdgBYmMDcrS2G5Ti4XyVRfE
         7O55fo4qlBwLybfUX9ADm+0QhI9lgDxAwskrji7s0ZtIO7pA7AVg7RuGSOVCWtYFwZkm
         dKidGANbhpRS5kVacqlFjGMHiMoniHrSAGCh8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=XdMIhBfVaYQhRqB8A9RcKC1eDHMrK/gf/2awHUkoV9vnqeSpq5k8LzWwkMX7qAm1zI
         npchplMTSh7gzxjeyxeseht7na8Cku4IXNTyVlVYljETtgIR2bbPBa+TV0wJjXvZDlvh
         huE2wylCqt0uWMPPYFfGkd6r4XeterX4feQvE=
MIME-Version: 1.0
Received: by 10.231.145.148 with SMTP id d20mr468532ibv.3.1265807837085; Wed, 
	10 Feb 2010 05:17:17 -0800 (PST)
From: Rohit Banga <iamrohitbanga@gmail.com>
Date: Wed, 10 Feb 2010 18:46:57 +0530
Message-ID: <f1cb36b91002100516j34162773scc335fd307c769a9@mail.gmail.com>
Subject: read more tokens during analysis
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485ec0f347bc1ec047f3eda8e

--001485ec0f347bc1ec047f3eda8e
Content-Type: text/plain; charset=ISO-8859-1

i want to consider the current word & the next as a single term.

when analyzing "Arun Kumar"

i want my analyzer to consider "Arun",  "Arun Kumar" as synonyms.

in the tokenstream method, how do we read the next token "Kumar"
i am going through the setPositionIncrements method for considering them as
synonyms, but i don't understand how to implement look ahead in the
analyzer.



Rohit Banga

--001485ec0f347bc1ec047f3eda8e--

From java-user-return-44969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 13:28:16 2010
Return-Path: <java-user-return-44969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68021 invoked from network); 10 Feb 2010 13:28:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 13:28:16 -0000
Received: (qmail 44873 invoked by uid 500); 10 Feb 2010 13:28:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44775 invoked by uid 500); 10 Feb 2010 13:28:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44765 invoked by uid 99); 10 Feb 2010 13:28:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 13:28:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.116.39.62] (HELO rectangular.com) (68.116.39.62)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 13:28:06 +0000
Received: from marvin by rectangular.com with local (Exim 4.63)
	(envelope-from <marvin@rectangular.com>)
	id 1NfCbX-0003dO-Oo
	for java-user@lucene.apache.org; Wed, 10 Feb 2010 05:27:43 -0800
Date: Wed, 10 Feb 2010 05:27:43 -0800
To: java-user@lucene.apache.org
Subject: Re: Flex & Docs/AndPositionsEnum
Message-ID: <20100210132743.GA13836@rectangular.com>
References: <002801caa988$7a5c5bc0$6f151340$@de> <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com> <4B716C5F.6020907@deri.org> <9ac0c6aa1002090804s19c3d6e6qc1a34bdaca5dd982@mail.gmail.com> <4B718EEB.3070605@deri.org> <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com> <20100209181235.GA15349@rectangular.com> <9ac0c6aa1002091247j36033b9bt65c787d8703d371e@mail.gmail.com> <20100209214416.GA17405@rectangular.com> <9ac0c6aa1002100358v5e51c743q65054b81e9da5067@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <9ac0c6aa1002100358v5e51c743q65054b81e9da5067@mail.gmail.com>
User-Agent: Mutt/1.5.13 (2006-08-11)
From: Marvin Humphrey <marvin@rectangular.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Feb 10, 2010 at 06:58:01AM -0500, Michael McCandless wrote:
> But why didn't you have the Multi*Enums layer add the offset (so that
> the codec need not know who's consuming it)?  Performance?

That would have involved something like this within the aggregator:
    
    posting.setDocID(posting.getDodID() + docBase).

The problem is that that's the docID the SegPostingList is using for its
deltas.  If the SegPostingList skips during a call to advance(), it needs to
reset that docID to the what the skip data says -- but if the aggregator layer
doesn't tell it that it needs to account for a docBase, the new docID will
lose the offset.  Can't solve that problem at the aggregator level either --
the aggregator doesn't know when skipping is occurring, so it can't intervene
on an as-needed basis. 

The fix was to make SegPostingList aware of a docBase, so that on skipping it
could add it to the docID in the skip data and land at the right docID from
the perspective of the consumer.  Messy.

I suppose another possibility would have been to have the aggregator keep its
own Posting and copy all data over from the SegPostingList's Posting on each
iteration then add its offset.  However, that would have been a lot less
efficient, and it still wouldn't have worked for the "flat positions space"
example because the generic aggregator would not have known about the needs of
the specific codec.

> > That example may not be a deal breaker for you, but I'm not willing
> > to guarantee that Lucy will always return primitives from these
> > enums, now and forever, one per method call.
> 
> But it'd be a major API change down the road to change this, for
> Lucy/KS?  

I suppose so.  It's either foreclose on the possibility of aggregating (Lucy),
or foreclose on the possibility of using properties that cannot be aggregated
(Lucene).

> Also, this is why we're adding Attribute* to all the postings enums,
> with flex -- any codec & consumer can use their own private
> attributes.  The attrs pass through Multi*Enum.

Hmm.  Does that mean that the consumer needs to refresh the attributes with
each iteration?  Because what happens when you switch sub-enums within the
Multi*Enum?  Don't those attributes go stale, as they belong to a sub-enum
that has finished?

Marvin Humphrey


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 13:34:18 2010
Return-Path: <java-user-return-44970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70985 invoked from network); 10 Feb 2010 13:34:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 13:34:18 -0000
Received: (qmail 48689 invoked by uid 500); 10 Feb 2010 13:34:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48607 invoked by uid 500); 10 Feb 2010 13:34:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48597 invoked by uid 99); 10 Feb 2010 13:34:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 13:34:16 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of iamrohitbanga@gmail.com designates 209.85.223.198 as permitted sender)
Received: from [209.85.223.198] (HELO mail-iw0-f198.google.com) (209.85.223.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 13:34:07 +0000
Received: by iwn36 with SMTP id 36so1550448iwn.3
        for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 05:33:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=NPk+NcjxlgqLN/5rjqMLZwFwR99KPO8Z5h45o5EYOTo=;
        b=ntFnwTw8zuWr2xAMj7khV91yShA9zKpmbIdabd2zFGCl8E4PNpupyf/OoZCn/i29pE
         0QMzWIzMgFDx09cBFS9rcNYzgj95xR4X7+sgCG4kn3L0qr7doN+FMK9wefyys0XndpGw
         IOBw6k1q7hOSNc4AhQYd/03GXJHTBA48QxHQ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=jir3QyL47FBwyDJMQsgX1savoWdJaKHvhC4mQZECXdcoqfjYUMvT208a8KkoSRidmZ
         BcGomh354CbB7XgMfCbKxlyt5TqUc79btK9zKxEYDWZACo878aSIGTUkXiwk9HQKkYJ0
         b9DYOWGLpbZLpWHGkFQZ82xs/3cYyhRjBMsrQ=
MIME-Version: 1.0
Received: by 10.231.148.205 with SMTP id q13mr445096ibv.47.1265808826213; Wed, 
	10 Feb 2010 05:33:46 -0800 (PST)
In-Reply-To: <f1cb36b91002100516j34162773scc335fd307c769a9@mail.gmail.com>
References: <f1cb36b91002100516j34162773scc335fd307c769a9@mail.gmail.com>
From: Rohit Banga <iamrohitbanga@gmail.com>
Date: Wed, 10 Feb 2010 19:03:26 +0530
Message-ID: <f1cb36b91002100533i358d785bn86cc05852dfa1a64@mail.gmail.com>
Subject: Re: read more tokens during analysis
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485ea3c1470a8bb047f3f15d9
X-Virus-Checked: Checked by ClamAV on apache.org

--001485ea3c1470a8bb047f3f15d9
Content-Type: text/plain; charset=ISO-8859-1

basically i want to use my own filter wrapping around a standard analyzer.

the kind explained on page 166 of Lucene in Action, uses input.next() which
is perhaps not available in lucene 3.0

what is the substitute method.

Rohit Banga


On Wed, Feb 10, 2010 at 6:46 PM, Rohit Banga <iamrohitbanga@gmail.com>wrote:

> i want to consider the current word & the next as a single term.
>
> when analyzing "Arun Kumar"
>
> i want my analyzer to consider "Arun",  "Arun Kumar" as synonyms.
>
> in the tokenstream method, how do we read the next token "Kumar"
> i am going through the setPositionIncrements method for considering them as
> synonyms, but i don't understand how to implement look ahead in the
> analyzer.
>
>
>
> Rohit Banga
>

--001485ea3c1470a8bb047f3f15d9--

From java-user-return-44971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 14:15:09 2010
Return-Path: <java-user-return-44971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96414 invoked from network); 10 Feb 2010 14:15:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 14:15:09 -0000
Received: (qmail 96636 invoked by uid 500); 10 Feb 2010 14:15:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96568 invoked by uid 500); 10 Feb 2010 14:15:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96558 invoked by uid 99); 10 Feb 2010 14:15:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 14:15:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.167.19] (HELO web113319.mail.gq1.yahoo.com) (98.136.167.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 10 Feb 2010 14:14:57 +0000
Received: (qmail 57987 invoked by uid 60001); 10 Feb 2010 14:14:37 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1265811277; bh=5d8gr2v9QXQ1Bc780dejrOZg6CDmRzDnzymweINMLd4=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=Jwp/81Rn4ozLZf88J43w3ln9TwdAlCuSDIBjeZYcrYJDoVKh8PXcZNNMHjekgv10/HtUb/qw5ceC2Nx/Cw6+A64TAkS5sJAYp9oxH8rxCyG+Zk2gqi/AnSljsFsooisftrM3syN80lki2mL+rEmYRso3497enagY3jVYd9Cna4s=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=w7YV2akYDTixiIkHO8LxUb9v2B9KOSYaw4OY1GimAeaZGe5oPx4JUmjab/+0el1YPdewaFwZgcfojdfjQE0W7PZgq+Rg+I3H2cmb++0R/6ymlWZVGIT31bpY8o+vC4rReACaYwhDP3zHEUxhIL/H4wb/YAfoqoOyT0NyUeAvC6w=;
Message-ID: <3005.56566.qm@web113319.mail.gq1.yahoo.com>
X-YMail-OSG: agX7Zw4VM1kd7xWtih_r0vGM7EbG.qGWKb8MaHK8y_s4nvciWiXWgrNdVZKFv8qT3l1BSoQ0y07R.b0EicWnao2YWQqrVb9iu0EhFRx17mQDXXn135uTFDbGnp8h3NbKcpIUj_VKmeih9FgfiUlF.1Qq4cuWIKypscv3JznmCj.ut0.4NYDUdhHKIvDWgA3wBcNdA1WVDsDyXc7jPSVPYocn5ztaDNPumBL3i8TeVIcMeH3168FXZr80s2las9KMYfjMCwgBSMN4F1CbNY50bv6SSu6J3T1JNmXZ3rk2b9ZYRktkZKOzWY.FpsWFrIEqPo3K8S4IgbFwXU0nJFbBYWQojlox7afpwAu3CIDCePoHt4dIm_b3.2YgXq8HyL_12OaFMl1lXZFImCkYDHavFFp6BqhBOcSjkS0VKL64VMWU1hoEyeiD5vAS6r7ry2qOQuDR57eZDDzZj5SZ75acIQnkRJFFB_HtFZ_U60iCZFA-
Received: from [99.60.195.9] by web113319.mail.gq1.yahoo.com via HTTP; Wed, 10 Feb 2010 06:14:36 PST
X-Mailer: YahooMailClassic/9.1.10 YahooMailWebService/0.8.100.260964
Date: Wed, 10 Feb 2010 06:14:36 -0800 (PST)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: TREC Data and Topic-Specific Index
To: java-user@lucene.apache.org
In-Reply-To: <8f0ad1f31002071959u391a5e3ctd3a3eabf2cbb58e4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Robert,=0A=0AThank you for your reply.  What would be considered a large di=
fference?  We started applying the Sweet Spot Similarity.  It gives us an i=
mprovement of 0.163-0.141=3D0.022 MAP so far.  LnbLtcSimilarity gets us mor=
e improvement: 0.175-0.141=3D0.034.=0A=0AThanks,=0A=0AIvan=0A=0A--- On Sun,=
 2/7/10, Robert Muir <rcmuir@gmail.com> wrote:=0A=0A> From: Robert Muir <rc=
muir@gmail.com>=0A> Subject: Re: TREC Data and Topic-Specific Index=0A> To:=
 java-user@lucene.apache.org=0A> Date: Sunday, February 7, 2010, 10:59 PM=
=0A> you should do (a), and pretend you=0A> know nothing about the relevanc=
e=0A> judgements up front.=0A> =0A> it is true you might make some change t=
o your search engine=0A> and wonder, how=0A> is it fair that I am bringing =
back possibly relevant docs=0A> that were never=0A> judged (and thus scored=
 implicitly as non-relevant)? i.e.=0A> the test=0A> collection is biased ag=
ainst you because you did not=0A> participate in the=0A> pooling process.=
=0A> =0A> if you are concerned about this, you should still use (a),=0A> bu=
t perhaps look=0A> at other measures such as bpref (=0A> http://comminfo.ru=
tgers.edu/~muresan/IR/Docs/Articles/sigirBuckley2004.pdf).=0A> =0A> persona=
lly, I simply prefer to stick with MAP. And with all=0A> measures,=0A> whet=
her you look at bpref or map, my advice is to only=0A> consider large=0A> d=
ifferences only when evaluating some potential=0A> improvement!=0A> =0A> On=
 Sun, Feb 7, 2010 at 6:49 PM, Ivan Provalov <iprovalo@yahoo.com>=0A> wrote:=
=0A> =0A> > Robert,=0A> >=0A> > We are using TREC-3 data and Ad Hoc topics=
=0A> 151-200.=A0 The relevance=0A> > judgments list contains 97,319 entries=
, of which=0A> 68,559 are unique document=0A> > ids.=A0 The TIPSTER collect=
ion which was used in=0A> TREC-3 is around 750,000=0A> > documents.=0A> >=
=0A> > Should we (a) index the entire 750,000 document=0A> collection, or (=
b) the=0A> > document collection of the 68,559 unique documents=0A> listed =
in the qrels, or=0A> > (c) should we limit our index to each specific topic=
=0A> (about 2,000 docs) i.e.=0A> > to the documents listed for a particular=
 topic in the=0A> qrels?=0A> >=0A> > Thanks,=0A> >=0A> > Ivan=0A> >=0A> >=
=0A> >=0A> >=0A> >=0A> ----------------------------------------------------=
-----------------=0A> > To unsubscribe, e-mail: java-user-unsubscribe@lucen=
e.apache.org=0A> > For additional commands, e-mail: java-user-help@lucene.a=
pache.org=0A> >=0A> >=0A> =0A> =0A> -- =0A> Robert Muir=0A> rcmuir@gmail.co=
m=0A> =0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 14:24:49 2010
Return-Path: <java-user-return-44972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1849 invoked from network); 10 Feb 2010 14:24:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 14:24:49 -0000
Received: (qmail 9089 invoked by uid 500); 10 Feb 2010 14:24:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9026 invoked by uid 500); 10 Feb 2010 14:24:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9016 invoked by uid 99); 10 Feb 2010 14:24:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 14:24:47 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.216.204 as permitted sender)
Received: from [209.85.216.204] (HELO mail-px0-f204.google.com) (209.85.216.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 14:24:37 +0000
Received: by pxi42 with SMTP id 42so19958pxi.5
        for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 06:24:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=GJODLiIGZGleiaEWtp3IFp4wkAJa9WuxkxdWlXW61Hk=;
        b=XZD5nTkD558VWs3rkzPbyneLgyXgwTQlFVYpyHu3R0WLgmEnzOuutmNBT/OM11VIXd
         4ojcmoxkcJFQrfMTgsa5R5ikxRereT19T9yyMzCBo+5oN/bNA6w+cFmyRERmpIb5+VFH
         YWodH+WHg2fivpu9+Li1GswI+aproWm0gZ/kg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=x7fr2fZYMC1Wp4ZWMDw4w/PxPNcceAWg3lSowevQVSiY+Ad4tmPx0II6UC4ody6Au0
         4nqMUWPrKBog2YATtl96F914cCiEZX8fa9e1UBCi6uQpINlFAlx/GEcgH1gkX2Z72u7L
         4CbcLXmV6baHYwLEJBE3DcKv0WkINT5i8d6EM=
MIME-Version: 1.0
Received: by 10.114.163.19 with SMTP id l19mr166745wae.170.1265811857121; Wed, 
	10 Feb 2010 06:24:17 -0800 (PST)
In-Reply-To: <3005.56566.qm@web113319.mail.gq1.yahoo.com>
References: <8f0ad1f31002071959u391a5e3ctd3a3eabf2cbb58e4@mail.gmail.com> 
	<3005.56566.qm@web113319.mail.gq1.yahoo.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 10 Feb 2010 09:23:57 -0500
Message-ID: <8f0ad1f31002100623h7516140p4c2e6f469a6d5794@mail.gmail.com>
Subject: Re: TREC Data and Topic-Specific Index
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502f58618a41f047f3fca52

--00504502f58618a41f047f3fca52
Content-Type: text/plain; charset=UTF-8

Hi, so you mean around 15% and 24% respectively? i think you could fairly
say either of these is an improvement over your baseline of 0.141

what i mean by large difference, is while I think its safe to say that using
either of these methods improves over your baseline, i am not sure you can
conclude that either improvement is better than the other,

you can apply various statistical tests to try to figure this out, but
because you didn't participate in the pool with these runs, you would have
to be careful about drawing conclusions as to which similarity is best, as
there is some bias and error involved.

On Wed, Feb 10, 2010 at 9:14 AM, Ivan Provalov <iprovalo@yahoo.com> wrote:

> Robert,
>
> Thank you for your reply.  What would be considered a large difference?  We
> started applying the Sweet Spot Similarity.  It gives us an improvement of
> 0.163-0.141=0.022 MAP so far.  LnbLtcSimilarity gets us more improvement:
> 0.175-0.141=0.034.
>
> Thanks,
>
> Ivan
>
> --- On Sun, 2/7/10, Robert Muir <rcmuir@gmail.com> wrote:
>
> > From: Robert Muir <rcmuir@gmail.com>
> > Subject: Re: TREC Data and Topic-Specific Index
> > To: java-user@lucene.apache.org
> > Date: Sunday, February 7, 2010, 10:59 PM
> > you should do (a), and pretend you
> > know nothing about the relevance
> > judgements up front.
> >
> > it is true you might make some change to your search engine
> > and wonder, how
> > is it fair that I am bringing back possibly relevant docs
> > that were never
> > judged (and thus scored implicitly as non-relevant)? i.e.
> > the test
> > collection is biased against you because you did not
> > participate in the
> > pooling process.
> >
> > if you are concerned about this, you should still use (a),
> > but perhaps look
> > at other measures such as bpref (
> >
> http://comminfo.rutgers.edu/~muresan/IR/Docs/Articles/sigirBuckley2004.pdf<http://comminfo.rutgers.edu/%7Emuresan/IR/Docs/Articles/sigirBuckley2004.pdf>
> ).
> >
> > personally, I simply prefer to stick with MAP. And with all
> > measures,
> > whether you look at bpref or map, my advice is to only
> > consider large
> > differences only when evaluating some potential
> > improvement!
> >
> > On Sun, Feb 7, 2010 at 6:49 PM, Ivan Provalov <iprovalo@yahoo.com>
> > wrote:
> >
> > > Robert,
> > >
> > > We are using TREC-3 data and Ad Hoc topics
> > 151-200.  The relevance
> > > judgments list contains 97,319 entries, of which
> > 68,559 are unique document
> > > ids.  The TIPSTER collection which was used in
> > TREC-3 is around 750,000
> > > documents.
> > >
> > > Should we (a) index the entire 750,000 document
> > collection, or (b) the
> > > document collection of the 68,559 unique documents
> > listed in the qrels, or
> > > (c) should we limit our index to each specific topic
> > (about 2,000 docs) i.e.
> > > to the documents listed for a particular topic in the
> > qrels?
> > >
> > > Thanks,
> > >
> > > Ivan
> > >
> > >
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--00504502f58618a41f047f3fca52--

From java-user-return-44973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 14:36:18 2010
Return-Path: <java-user-return-44973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8036 invoked from network); 10 Feb 2010 14:36:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 14:36:18 -0000
Received: (qmail 24939 invoked by uid 500); 10 Feb 2010 14:36:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24883 invoked by uid 500); 10 Feb 2010 14:36:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24873 invoked by uid 99); 10 Feb 2010 14:36:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 14:36:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 209.85.210.173 as permitted sender)
Received: from [209.85.210.173] (HELO mail-yx0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 14:36:05 +0000
Received: by yxe3 with SMTP id 3so50486yxe.20
        for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 06:35:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=pAdvk2Ln3/uEWAr/HB5nlRPv1btjBjpqSTfhLCFAHnU=;
        b=qF9/y7jAXgcFu/CVuuP0bdh/ACdZA/9r8VgIF6EcjsJgi23NT/FpqdYEIB9HWM/Mvk
         zZiyCv2yfNqDhjWeIKCnqYS69z7GY63rayg7l3rgoKtAHkblEMlvR99Q6+tH68FNV8+n
         cMpjsgW6s99d8MTfqrpBySC9bs0p+862TyAD0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=vEKCvIDZ/TrkWdoLzMvFRHDD/0IObcvpu9D7sUw13IhsoyPPWoqoWVnB03NyZCsowU
         FbFs6iZFTsZXAHRisHTfj07vAyRQovZGsBcw65ui2+CSiEEL6tdEWWNj6yB8zMB77JLZ
         CM+xYQfw3suIKLUNSJsVMKRlFFgL0Bj25USHg=
Received: by 10.101.3.4 with SMTP id f4mr324237ani.10.1265812544474;
        Wed, 10 Feb 2010 06:35:44 -0800 (PST)
Received: from ?10.0.0.77? (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 4sm463267ywd.29.2010.02.10.06.35.43
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 10 Feb 2010 06:35:43 -0800 (PST)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: read more tokens during analysis
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <f1cb36b91002100533i358d785bn86cc05852dfa1a64@mail.gmail.com>
Date: Wed, 10 Feb 2010 09:35:42 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <9F30E17B-6D8E-4A78-8143-09CF4CE1B6BD@apache.org>
References: <f1cb36b91002100516j34162773scc335fd307c769a9@mail.gmail.com> <f1cb36b91002100533i358d785bn86cc05852dfa1a64@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 10, 2010, at 8:33 AM, Rohit Banga wrote:

> basically i want to use my own filter wrapping around a standard =
analyzer.
>=20
> the kind explained on page 166 of Lucene in Action, uses input.next() =
which
> is perhaps not available in lucene 3.0
>=20
> what is the substitute method.

captureState() and restoreState() are the new versions in 3.0.  There =
are several examples of how they work in contrib/analyzers.



--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem using Solr/Lucene: =
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 14:48:29 2010
Return-Path: <java-user-return-44974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14340 invoked from network); 10 Feb 2010 14:48:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 14:48:28 -0000
Received: (qmail 45441 invoked by uid 500); 10 Feb 2010 14:48:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45361 invoked by uid 500); 10 Feb 2010 14:48:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45351 invoked by uid 99); 10 Feb 2010 14:48:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 14:48:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 14:48:17 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Av0EALJVcksKhJ0L/2dsb2JhbACDCpdUdKpnj32BL4JLWwQ
X-IronPort-AV: E=Sophos;i="4.49,443,1262563200"; 
   d="scan'208";a="10166180"
Received: from unknown (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx2.nuigalway.ie with ESMTP; 10 Feb 2010 14:47:57 +0000
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 10 Feb 2010 14:47:56 +0000
Received: from [10.196.2.166] ([140.203.154.5]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 10 Feb 2010 14:47:56 +0000
Message-ID: <4B72C711.5030204@deri.org>
Date: Wed, 10 Feb 2010 14:47:45 +0000
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.9pre) Gecko/20100205 Lightning/1.0pre Shredder/3.0.2pre
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Flex & Docs/AndPositionsEnum
References: <002701caa981$b5400ef0$1fc02cd0$@de> <4B71588D.3060001@deri.org> <002801caa988$7a5c5bc0$6f151340$@de> <9ac0c6aa1002090535s2757d07fj2e17bfc244aebf5b@mail.gmail.com> <4B716C5F.6020907@deri.org> <9ac0c6aa1002090804s19c3d6e6qc1a34bdaca5dd982@mail.gmail.com> <4B718EEB.3070605@deri.org> <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com> <20100209181235.GA15349@rectangular.com> <9ac0c6aa1002091247j36033b9bt65c787d8703d371e@mail.gmail.com> <20100209214416.GA17405@rectangular.com> <000c01caaa36$073c7900$15b56b00$@de> <4B72AD6C.5080602@deri.org> <002501caaa53$1be8f5a0$53bae0e0$@de>
In-Reply-To: <002501caaa53$1be8f5a0$53bae0e0$@de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 10 Feb 2010 14:47:56.0489 (UTC) FILETIME=[08371390:01CAAA60]
X-Virus-Checked: Checked by ClamAV on apache.org

On 10/02/10 13:15, Uwe Schindler wrote:
>> Could you provide pointers to search code that uses the segment-level
>> enum ?
>> As I explained in my last answer to Michael, the TermScorer is using
>> the
>> DocsEnum interface, and therefore do not know if it manipulates
>> segment-level enum or a Multi*Enums. What search (or query operators)
>> in
>> Lucene is using segment-level enums ?
>>      
> All of them, only rewrites are currently done on the top-level reader. IndexSearcher since 2.9 creates Scorers in separate for each segment and merges the results in its collector. Because of that we have a modified Collector interface that has setNextReader() methods and so on.
>    
Ok, so for example, in TermQuery$TermWeight#scorer(reader, 
scoreDocsInOrder, topScorer), the reader passed as parameter is one of 
the subscorer ? Is that right ?

If this is the case, now I understand why Michael was saying that the 
way I am testing the postings (using termPositionsEnum on the top-level 
reader) was not really the proper way to test it, and that the correct 
way will be instead to use directly a TermQuery.

Thanks for the clarification.
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 14:50:02 2010
Return-Path: <java-user-return-44975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14930 invoked from network); 10 Feb 2010 14:50:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 14:50:02 -0000
Received: (qmail 48561 invoked by uid 500); 10 Feb 2010 14:49:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48487 invoked by uid 500); 10 Feb 2010 14:49:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48477 invoked by uid 99); 10 Feb 2010 14:49:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 14:49:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.136 as permitted sender)
Received: from [61.135.132.136] (HELO relay.mail.sohu.com) (61.135.132.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 14:49:48 +0000
Received: from mx16.mail.sohu.com (unknown [192.168.95.243])
	by relay.mail.sohu.com (Postfix) with ESMTP id CF1403A59A9E
	for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 22:49:24 +0800 (CST)
Received: from mx16.mail.sohu.com (localhost.localdomain [127.0.0.1])
	by mx16.mail.sohu.com (Postfix) with ESMTP id 7B7C828428D
	for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 22:49:13 +0800 (CST)
To: "java-user" <java-user@lucene.apache.org>
Message-ID: <1265813353.5c69a47653a94306a5cbca3aaffc0ce0.luocan19826164@sohu.com>
Subject: RE: here a small test case problem:lucene did not delete old index file
 after optimize method called
Date: Wed, 10 Feb 2010 14:49:13 GMT
MIME-Version: 1.0
X-SHIP: 116.24.168.136
Reference: <2D088220C451EC44B520D000D22502B0645A0FBD1A@pacha.corp.lechillmobile.com>,
	<06e601caa6ac$ff82fa40$fe88eec0$@ca>,
	<2D088220C451EC44B520D000D22502B0645A0FBD18@pacha.corp.lechillmobile.com>,
	<c7d45fc71002051217n354c6751h2126ee870c3c8320@mail.gmail.com>,
	<2D088220C451EC44B520D000D22502B0645A0FBD17@pacha.corp.lechillmobile.com>,
	<c7d45fc71002051142n369f593asb86e86bcc03dc38f@mail.gmail.com>,
	<2D088220C451EC44B520D000D22502B0645A0FBD11@pacha.corp.lechillmobile.com>,
	<c7d45fc71002050844v581eb26dwe0603f32c885058b@mail.gmail.com>,
	<2D088220C451EC44B520D000D22502B0645A0FBD05@pacha.corp.lechillmobile.com>,
	<001b01caa6b2$10b901b0$322b0510$@com>
In-Reply-To: <001b01caa6b2$10b901b0$322b0510$@com>
From: luocan19826164@sohu.com
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_000_df9b0a5dea1f4c1fb8cc4c613d839415"
X-SOHU-Antispam-Bayes: 0

------_=_NextPart_000_df9b0a5dea1f4c1fb8cc4c613d839415
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

SSB3YXRjaGVkIHRoZXJlIGFyZSB0aHJlZSBjb21wb3VuZCBmaWxlcy4gDQowLmNmcyZuYnNwOyA2
Nzg2a2INCjEuY2ZzJm5ic3A7IDIwNDRrYg0KMi5jZnMmbmJzcDsgODc5MGtiKHRoZSBvcHRpbWl6
ZSBmaWxlKQ0KSSB0aGluayBpbiB0aGlzIHRlc3RjYXNlIG9ubHkgMi5jZnMgbGVmdCh0aGUgb3B0
aW1pemUgZmlsZSBsZWZ0KSxJcyB0aGF0IHJpZ2h0Pz8NCjw/eG1sOm5hbWVzcGFjZSBwcmVmaXgg
PSBvIG5zID0gInVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206b2ZmaWNlOm9mZmljZSIgLz48bzpw
PiZuYnNwOzwvbzpwPg0KaW1wb3J0IGphdmEuaW8uRmlsZTsNCmltcG9ydCBqYXZhLmlvLklPRXhj
ZXB0aW9uOw0KPG86cD4mbmJzcDs8L286cD4NCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFs
eXNpcy5zdGFuZGFyZC5TdGFuZGFyZEFuYWx5emVyOw0KaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5l
LmRvY3VtZW50LkRvY3VtZW50Ow0KaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkZp
ZWxkOyBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRmllbGRhYmxlOw0KaW1wb3J0
IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkNvcnJ1cHRJbmRleEV4Y2VwdGlvbjsNCmltcG9ydCBv
cmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFJlYWRlcjsNCmltcG9ydCBvcmcuYXBhY2hlLmx1
Y2VuZS5pbmRleC5JbmRleFdyaXRlcjsNCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5G
U0RpcmVjdG9yeTsNCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5Mb2NrT2J0YWluRmFp
bGVkRXhjZXB0aW9uOw0KaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLnV0aWwuVmVyc2lvbjsNCjxv
OnA+Jm5ic3A7PC9vOnA+DQpwdWJsaWMgY2xhc3MgUmVvcGVuVGVzdCB7DQombmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsgSW5kZXhXcml0ZXIgd3JpdGVyOw0K
PG86cD4mbmJzcDs8L286cD4NCiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB0aHJvd3Mg
Q29ycnVwdEluZGV4RXhjZXB0aW9uLA0KJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7IExvY2tPYnRhaW5GYWlsZWRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHsN
CiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyBmaW5h
bCBJbmRleFdyaXRlciB3cml0ZXIgPSBuZXcNCkluZGV4V3JpdGVyKEZTRGlyZWN0b3J5Lm9wZW4o
bmV3IEZpbGUoDQombmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsg
ImRhdGEiKSksIG5ldw0KU3RhbmRhcmRBbmFseXplcihWZXJzaW9uLkxVQ0VORV9DVVJSRU5UKSwN
CiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyBJbmRleFdyaXRl
ci5NYXhGaWVsZExlbmd0aC5MSU1JVEVEKTsNCiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyB3cml0ZXIuc2V0TWVyZ2VGYWN0b3IoMTYpOw0KPG86cD4m
bmJzcDs8L286cD4NCiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyBUaHJlYWQgd3JpdGVUaHJlYWQgPSBuZXcgVGhyZWFkKG5ldyBSdW5uYWJsZSgpIHsN
CiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyBAT3ZlcnJp
ZGUNCiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyBwdWJs
aWMgdm9pZCBydW4oKSB7DQombmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsgLy8gd3JpdGUgdGVzdCBkYXRhDQombmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsgdHJ5IHsNCiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyBmb3IgKGludCBpID0gMDsgaSAmbHQ7IDEwMDAwMDA7IGkrKykgew0KJm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IERvY3VtZW50IGRvYyA9
IG5ldw0KRG9jdW1lbnQoKTsNCiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyBGaWVsZGFibGUgaXRlbUlEID0gbmV3DQpGaWVsZCgiSXRlbUlEIiwgU3RyaW5nDQom
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsgLnZhbHVlT2YoaSks
DQpGaWVsZC5TdG9yZS5ZRVMsDQombmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsgRmllbGQuSW5kZXguDQpBTkFMWVpFRCk7DQo8bzpwPiZuYnNwOzwvbzpwPg0KJm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IHdyaXRlci5hZGREb2N1
bWVudChkb2MpOw0KJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7IH0NCjxvOnA+Jm5ic3A7PC9vOnA+DQombmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsgVGhyZWFkLmN1cnJlbnRUaHJlYWQoKS5zbGVlcCgxMDAwMCk7DQom
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsgU3lzdGVtLm91
dC5wcmludGxuKCJvcHRpbWl6ZQ0KYmVnaW4iKTsNCiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyB3cml0ZXIub3B0aW1pemUoKTsNCiZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyBTeXN0ZW0ub3V0LnByaW50bG4oIm9w
dGltaXplIGVuZCIpOw0KJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7IH0gY2F0Y2ggKENvcnJ1cHRJbmRleEV4Y2VwdGlvbiBlKSB7DQombmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsgZS5wcmludFN0YWNrVHJhY2UoKTsNCiZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyB9IGNhdGNoIChJT0V4
Y2VwdGlvbiBlKSB7DQombmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsgZS5wcmludFN0YWNrVHJhY2UoKTsNCiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7DQombmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsgZS5wcmludFN0YWNr
VHJhY2UoKTsNCiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyB9
DQo8bzpwPiZuYnNwOzwvbzpwPg0KJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7IH0NCiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyB9KTsNCjxvOnA+Jm5ic3A7PC9vOnA+DQombmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsgd3JpdGVUaHJlYWQuc3RhcnQoKTsNCiZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyANCiZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyANCiZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyBUaHJlYWQgcmVvcGVuVGhy
ZWFkID0gbmV3IFRocmVhZChuZXcgUnVubmFibGUoKSB7DQombmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsgcHVibGljIHZvaWQgcnVuKCkgew0KJm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IHRyeSB7DQombmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsgSW5kZXhSZWFkZXIgcmVhZGVyID0N
CndyaXRlci5nZXRSZWFkZXIoKTsNCiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyB3aGlsZSAodHJ1ZSkgew0KJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IA0KVGhyZWFkLmN1cnJlbnRUaHJlYWQoKS5zbGVlcCgxMDAw
KTsNCiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyBJbmRleFJl
YWRlciBuZXdSZWFkZXIgPQ0Kd3JpdGVyLmdldFJlYWRlcigpOw0KJm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IGlmIChuZXdSZWFkZXIgIT0gcmVhZGVyKSB7DQom
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsgcmVhZGVyLmNsb3NlKCk7
DQombmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsgcmVhZGVyID0gbmV3
UmVhZGVyOw0KJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IH0N
CiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyBTeXN0ZW0ub3V0
LnByaW50bG4oIjEzMiIpOw0KJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7IH0NCjxvOnA+Jm5ic3A7PC9vOnA+DQombmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgew0K
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IGUucHJpbnRT
dGFja1RyYWNlKCk7DQombmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkgew0KJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IGUucHJpbnRTdGFja1RyYWNlKCk7DQombmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsgfQ0KJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7
Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5i
c3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IH0NCjxvOnA+Jm5ic3A7PC9vOnA+DQombmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsgfSk7DQombmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsgDQombmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsgcmVvcGVuVGhyZWFkLnN0
YXJ0KCk7DQombmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsg
fQ0KPG86cD4mbmJzcDs8L286cD4NCn0NCiZuYnNwOw==

------_=_NextPart_000_df9b0a5dea1f4c1fb8cc4c613d839415--



From java-user-return-44976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 14:54:57 2010
Return-Path: <java-user-return-44976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16546 invoked from network); 10 Feb 2010 14:54:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 14:54:56 -0000
Received: (qmail 60359 invoked by uid 500); 10 Feb 2010 14:54:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60299 invoked by uid 500); 10 Feb 2010 14:54:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60289 invoked by uid 99); 10 Feb 2010 14:54:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 14:54:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.136 as permitted sender)
Received: from [61.135.132.136] (HELO relay.mail.sohu.com) (61.135.132.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 14:54:46 +0000
Received: from 85737ec54efc4e1 (unknown [116.24.168.136])
	by relay.mail.sohu.com (Postfix) with ESMTPA id C8BFF3A59DAF
	for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 22:54:25 +0800 (CST)
From: "luocanrao" <luocan19826164@sohu.com>
To: <java-user@lucene.apache.org>
Subject: RE: problem:lucene did not delete old index file after optimize method called
Date: Wed, 10 Feb 2010 22:54:11 +0800
Message-ID: <004d01caaa60$ee958880$cbc09980$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqqYE5Bxq9zlP+pR/W44KjmzjAmdwAAGQ1A
Content-Language: zh-cn
X-SOHU-Antispam-Bayes: 0

here a small test case I watched there are three compound files.=20
0.cfs    6786kb
1.cfs    2044kb
2.cfs    8790kb(the optimize file)
I think in this testcase only 2.cfs left(the optimize file left),Is that =
right??

import java.io.File;
import java.io.IOException;

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.Fieldable;
import org.apache.lucene.index.CorruptIndexException;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.store.LockObtainFailedException;
import org.apache.lucene.util.Version;

public class ReopenTest {
	IndexWriter writer;

	public static void main(String[] args) throws CorruptIndexException,
			LockObtainFailedException, IOException {
		final IndexWriter writer =3D new IndexWriter(FSDirectory.open(new =
File(
				"data")), new StandardAnalyzer(Version.LUCENE_CURRENT),
				IndexWriter.MaxFieldLength.LIMITED);
		writer.setMergeFactor(16);

		Thread writeThread =3D new Thread(new Runnable() {
			@Override
			public void run() {
				// write test data
				try {
					for (int i =3D 0; i < 1000000; i++) {
						Document doc =3D new Document();
						Fieldable itemID =3D new Field("ItemID", String
								.valueOf(i), Field.Store.YES,
								Field.Index.ANALYZED);

						writer.addDocument(doc);
					}

					Thread.currentThread().sleep(10000);
					System.out.println("optimize begin");
					writer.optimize();
					System.out.println("optimize end");
				} catch (CorruptIndexException e) {
					e.printStackTrace();
				} catch (IOException e) {
					e.printStackTrace();
				} catch (InterruptedException e) {
					e.printStackTrace();
				}

			}
		});

		writeThread.start();
	=09
	=09
		Thread reopenThread =3D new Thread(new Runnable() {
			public void run() {
				try {
					IndexReader reader =3D writer.getReader();
					while (true) {
						Thread.currentThread().sleep(1000);
						IndexReader newReader =3D writer.getReader();
						if (newReader !=3D reader) {
							reader.close();
							reader =3D newReader;
						}
						System.out.println("132");
					}

				} catch (InterruptedException e) {
					e.printStackTrace();
				} catch (IOException e) {
					e.printStackTrace();
				}
			}

		});
	=09
		reopenThread.start();
	}

}

-----=E9=82=AE=E4=BB=B6=E5=8E=9F=E4=BB=B6-----
=E5=8F=91=E4=BB=B6=E4=BA=BA: luocan19826164@sohu.com =
[mailto:luocan19826164@sohu.com]=20
=E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2010=E5=B9=B42=E6=9C=8810=E6=97=A5 =
22:49
=E6=94=B6=E4=BB=B6=E4=BA=BA: java-user
=E4=B8=BB=E9=A2=98: RE: here a small test case problem:lucene did not =
delete old index file after optimize method called

I watched there are three compound files.=20
0.cfs&nbsp; 6786kb
1.cfs&nbsp; 2044kb
2.cfs&nbsp; 8790kb(the optimize file)
I think in this testcase only 2.cfs left(the optimize file left),Is that =
right??
<?xml:namespace prefix =3D o ns =3D =
"urn:schemas-microsoft-com:office:office" /><o:p>&nbsp;</o:p>
import java.io.File;
import java.io.IOException;
<o:p>&nbsp;</o:p>
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field; import =
org.apache.lucene.document.Fieldable;
import org.apache.lucene.index.CorruptIndexException;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.store.LockObtainFailedException;
import org.apache.lucene.util.Version;
<o:p>&nbsp;</o:p>
public class ReopenTest {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IndexWriter writer;
<o:p>&nbsp;</o:p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static void =
main(String[] args) throws CorruptIndexException,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp; LockObtainFailedException, IOException {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; final IndexWriter writer =3D new
IndexWriter(FSDirectory.open(new File(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
"data")), new
StandardAnalyzer(Version.LUCENE_CURRENT),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
IndexWriter.MaxFieldLength.LIMITED);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; writer.setMergeFactor(16);
<o:p>&nbsp;</o:p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Thread writeThread =3D new =
Thread(new Runnable() {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp; @Override
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp; public void run() {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
// write test data
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
try {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i =3D =
0; i &lt; 1000000; i++) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Document doc =3D new
Document();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Fieldable itemID =3D new
Field("ItemID", String
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; .valueOf(i),
Field.Store.YES,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; Field.Index.
ANALYZED);
<o:p>&nbsp;</o:p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; writer.addDocument(doc);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
<o:p>&nbsp;</o:p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
Thread.currentThread().sleep(10000);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
System.out.println("optimize
begin");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
writer.optimize();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
System.out.println("optimize end");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } =
catch (CorruptIndexException e) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
e.printStackTrace();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } =
catch (IOException e) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
e.printStackTrace();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } =
catch (InterruptedException e) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
e.printStackTrace();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
<o:p>&nbsp;</o:p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });
<o:p>&nbsp;</o:p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; writeThread.start();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Thread reopenThread =3D new =
Thread(new Runnable() {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp; public void run() {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
try {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IndexReader =
reader =3D
writer.getReader();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while (true) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
Thread.currentThread().sleep(1000);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IndexReader newReader =3D
writer.getReader();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (newReader !=3D reader) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; reader.close();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; reader =3D newReader;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("132");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
<o:p>&nbsp;</o:p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } =
catch (InterruptedException e) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
e.printStackTrace();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } =
catch (IOException e) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
e.printStackTrace();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp; }
<o:p>&nbsp;</o:p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; reopenThread.start();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
<o:p>&nbsp;</o:p>
}
&nbsp;


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 15:35:48 2010
Return-Path: <java-user-return-44977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34088 invoked from network); 10 Feb 2010 15:35:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 15:35:48 -0000
Received: (qmail 13818 invoked by uid 500); 10 Feb 2010 15:35:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13733 invoked by uid 500); 10 Feb 2010 15:35:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13723 invoked by uid 99); 10 Feb 2010 15:35:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 15:35:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.173] (HELO mail-yx0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 15:35:39 +0000
Received: by yxe3 with SMTP id 3so113858yxe.20
        for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 07:35:17 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.164.14 with SMTP id m14mr2649096ybe.18.1265816117529; Wed, 
	10 Feb 2010 07:35:17 -0800 (PST)
In-Reply-To: <004d01caaa60$ee958880$cbc09980$@com>
References: <004d01caaa60$ee958880$cbc09980$@com>
Date: Wed, 10 Feb 2010 10:35:17 -0500
Message-ID: <9ac0c6aa1002100735s49ceefe5s342d872dcbd019a6@mail.gmail.com>
Subject: Re: problem:lucene did not delete old index file after optimize 
	method called
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

>From this test, I would expect all 3 files to be left, because
IndexWriter never gets another chance to remove the files.

IndexWriter only attempts to remove unreferenced files in roughly 3 places:

  * On open
  * On flushing a new segment
  * On finishing a merge

So, the moment your optimize finished, IndexWriter wanted to delete
0.cfs and 1.cfs, but could not, because the currently open reader was
using them.  Then, because you don't close/open a new IndexWriter, no
further attempt is made to delete.

In a normal app, as you continue adding docs, normal merges kick off,
etc, these unreferenced files would eventually be removed.

It's just taking longer than it should, because IndexWriter doesn't
know exactly when the reader was closed.

I think we should add an explicit
IndexWriter.removeUnreferencedFiles() method, so apps can control the
immediacy if they want to.  I'll open an issue.

For your tests, if you add code to stop both threads, close the
writer, then open & close a new writer, you should see 0.cfs and 1.cfs
removed.

Mike

On Wed, Feb 10, 2010 at 9:54 AM, luocanrao <luocan19826164@sohu.com> wrote:
> here a small test case I watched there are three compound files.
> 0.cfs    6786kb
> 1.cfs    2044kb
> 2.cfs    8790kb(the optimize file)
> I think in this testcase only 2.cfs left(the optimize file left),Is that =
right??
>
> import java.io.File;
> import java.io.IOException;
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.document.Fieldable;
> import org.apache.lucene.index.CorruptIndexException;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.store.FSDirectory;
> import org.apache.lucene.store.LockObtainFailedException;
> import org.apache.lucene.util.Version;
>
> public class ReopenTest {
>        IndexWriter writer;
>
>        public static void main(String[] args) throws CorruptIndexExceptio=
n,
>                        LockObtainFailedException, IOException {
>                final IndexWriter writer =3D new IndexWriter(FSDirectory.o=
pen(new File(
>                                "data")), new StandardAnalyzer(Version.LUC=
ENE_CURRENT),
>                                IndexWriter.MaxFieldLength.LIMITED);
>                writer.setMergeFactor(16);
>
>                Thread writeThread =3D new Thread(new Runnable() {
>                        @Override
>                        public void run() {
>                                // write test data
>                                try {
>                                        for (int i =3D 0; i < 1000000; i++=
) {
>                                                Document doc =3D new Docum=
ent();
>                                                Fieldable itemID =3D new F=
ield("ItemID", String
>                                                                .valueOf(i=
), Field.Store.YES,
>                                                                Field.Inde=
x.ANALYZED);
>
>                                                writer.addDocument(doc);
>                                        }
>
>                                        Thread.currentThread().sleep(10000=
);
>                                        System.out.println("optimize begin=
");
>                                        writer.optimize();
>                                        System.out.println("optimize end")=
;
>                                } catch (CorruptIndexException e) {
>                                        e.printStackTrace();
>                                } catch (IOException e) {
>                                        e.printStackTrace();
>                                } catch (InterruptedException e) {
>                                        e.printStackTrace();
>                                }
>
>                        }
>                });
>
>                writeThread.start();
>
>
>                Thread reopenThread =3D new Thread(new Runnable() {
>                        public void run() {
>                                try {
>                                        IndexReader reader =3D writer.getR=
eader();
>                                        while (true) {
>                                                Thread.currentThread().sle=
ep(1000);
>                                                IndexReader newReader =3D =
writer.getReader();
>                                                if (newReader !=3D reader)=
 {
>                                                        reader.close();
>                                                        reader =3D newRead=
er;
>                                                }
>                                                System.out.println("132");
>                                        }
>
>                                } catch (InterruptedException e) {
>                                        e.printStackTrace();
>                                } catch (IOException e) {
>                                        e.printStackTrace();
>                                }
>                        }
>
>                });
>
>                reopenThread.start();
>        }
>
> }
>
> -----=D3=CA=BC=FE=D4=AD=BC=FE-----
> =B7=A2=BC=FE=C8=CB: luocan19826164@sohu.com [mailto:luocan19826164@sohu.c=
om]
> =B7=A2=CB=CD=CA=B1=BC=E4: 2010=C4=EA2=D4=C210=C8=D5 22:49
> =CA=D5=BC=FE=C8=CB: java-user
> =D6=F7=CC=E2: RE: here a small test case problem:lucene did not delete ol=
d index file after optimize method called
>
> I watched there are three compound files.
> 0.cfs&nbsp; 6786kb
> 1.cfs&nbsp; 2044kb
> 2.cfs&nbsp; 8790kb(the optimize file)
> I think in this testcase only 2.cfs left(the optimize file left),Is that =
right??
> <?xml:namespace prefix =3D o ns =3D "urn:schemas-microsoft-com:office:off=
ice" /><o:p>&nbsp;</o:p>
> import java.io.File;
> import java.io.IOException;
> <o:p>&nbsp;</o:p>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field; import org.apache.lucene.documen=
t.Fieldable;
> import org.apache.lucene.index.CorruptIndexException;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.store.FSDirectory;
> import org.apache.lucene.store.LockObtainFailedException;
> import org.apache.lucene.util.Version;
> <o:p>&nbsp;</o:p>
> public class ReopenTest {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IndexWriter writer;
> <o:p>&nbsp;</o:p>
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static void main(=
String[] args) throws CorruptIndexException,
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp; LockObtainFailedException, IOException {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; final IndexWriter writer =3D new
> IndexWriter(FSDirectory.open(new File(
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "data"=
)), new
> StandardAnalyzer(Version.LUCENE_CURRENT),
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IndexW=
riter.MaxFieldLength.LIMITED);
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; writer.setMergeFactor(16);
> <o:p>&nbsp;</o:p>
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Thread writeThread =3D new Thread(new R=
unnable() {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp; @Override
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp; public void run() {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // wri=
te test data
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i =3D 0; i &=
lt; 1000000; i++) {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Document doc =3D new
> Document();
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Fieldable itemID =3D new
> Field("ItemID", String
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .va=
lueOf(i),
> Field.Store.YES,
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Fie=
ld.Index.
> ANALYZED);
> <o:p>&nbsp;</o:p>
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; writer.addDocument(doc);
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
> <o:p>&nbsp;</o:p>
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Thread.currentThread(=
).sleep(10000);
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("o=
ptimize
> begin");
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; writer.optimize();
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("o=
ptimize end");
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catc=
h (CorruptIndexException e) {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catc=
h (IOException e) {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catc=
h (InterruptedException e) {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
> <o:p>&nbsp;</o:p>
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp; }
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });
> <o:p>&nbsp;</o:p>
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; writeThread.start();
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Thread reopenThread =3D new Thread(new =
Runnable() {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp; public void run() {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IndexReader reader =
=3D
> writer.getReader();
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while (true) {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
> Thread.currentThread().sleep(1000);
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IndexReader newReader =3D
> writer.getReader();
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (newReader !=3D reader) {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; reader.close();
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; reader =3D newReader;
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("132");
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
> <o:p>&nbsp;</o:p>
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catc=
h (InterruptedException e) {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catc=
h (IOException e) {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp; }
> <o:p>&nbsp;</o:p>
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; reopenThread.start();
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
> <o:p>&nbsp;</o:p>
> }
> &nbsp;
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 16:27:54 2010
Return-Path: <java-user-return-44978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54380 invoked from network); 10 Feb 2010 16:27:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 16:27:54 -0000
Received: (qmail 84087 invoked by uid 500); 10 Feb 2010 16:27:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84038 invoked by uid 500); 10 Feb 2010 16:27:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84028 invoked by uid 99); 10 Feb 2010 16:27:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 16:27:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.173] (HELO mail-yx0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 16:27:45 +0000
Received: by yxe3 with SMTP id 3so169589yxe.20
        for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 08:27:24 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.130.8 with SMTP id h8mr2672500ybn.195.1265819243733; Wed, 
	10 Feb 2010 08:27:23 -0800 (PST)
In-Reply-To: <9ac0c6aa1002100735s49ceefe5s342d872dcbd019a6@mail.gmail.com>
References: <004d01caaa60$ee958880$cbc09980$@com>
	 <9ac0c6aa1002100735s49ceefe5s342d872dcbd019a6@mail.gmail.com>
Date: Wed, 10 Feb 2010 11:27:23 -0500
Message-ID: <9ac0c6aa1002100827w6669cb83na5463d04d25bedc0@mail.gmail.com>
Subject: Re: problem:lucene did not delete old index file after optimize 
	method called
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

OK I opened this issue:

  https://issues.apache.org/jira/browse/LUCENE-2259

And put a patch on.  If you can try the patch, that'd be great :)  You
should be able to apply the patch, build a new jar, then run your test
again unmodified, and 0.cfs, 1.cfs should then be removed.

Mike

2010/2/10 Michael McCandless <lucene@mikemccandless.com>:
> From this test, I would expect all 3 files to be left, because
> IndexWriter never gets another chance to remove the files.
>
> IndexWriter only attempts to remove unreferenced files in roughly 3 place=
s:
>
>  * On open
>  * On flushing a new segment
>  * On finishing a merge
>
> So, the moment your optimize finished, IndexWriter wanted to delete
> 0.cfs and 1.cfs, but could not, because the currently open reader was
> using them.  Then, because you don't close/open a new IndexWriter, no
> further attempt is made to delete.
>
> In a normal app, as you continue adding docs, normal merges kick off,
> etc, these unreferenced files would eventually be removed.
>
> It's just taking longer than it should, because IndexWriter doesn't
> know exactly when the reader was closed.
>
> I think we should add an explicit
> IndexWriter.removeUnreferencedFiles() method, so apps can control the
> immediacy if they want to.  I'll open an issue.
>
> For your tests, if you add code to stop both threads, close the
> writer, then open & close a new writer, you should see 0.cfs and 1.cfs
> removed.
>
> Mike
>
> On Wed, Feb 10, 2010 at 9:54 AM, luocanrao <luocan19826164@sohu.com> wrot=
e:
>> here a small test case I watched there are three compound files.
>> 0.cfs    6786kb
>> 1.cfs    2044kb
>> 2.cfs    8790kb(the optimize file)
>> I think in this testcase only 2.cfs left(the optimize file left),Is that=
 right??
>>
>> import java.io.File;
>> import java.io.IOException;
>>
>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>> import org.apache.lucene.document.Document;
>> import org.apache.lucene.document.Field;
>> import org.apache.lucene.document.Fieldable;
>> import org.apache.lucene.index.CorruptIndexException;
>> import org.apache.lucene.index.IndexReader;
>> import org.apache.lucene.index.IndexWriter;
>> import org.apache.lucene.store.FSDirectory;
>> import org.apache.lucene.store.LockObtainFailedException;
>> import org.apache.lucene.util.Version;
>>
>> public class ReopenTest {
>>        IndexWriter writer;
>>
>>        public static void main(String[] args) throws CorruptIndexExcepti=
on,
>>                        LockObtainFailedException, IOException {
>>                final IndexWriter writer =3D new IndexWriter(FSDirectory.=
open(new File(
>>                                "data")), new StandardAnalyzer(Version.LU=
CENE_CURRENT),
>>                                IndexWriter.MaxFieldLength.LIMITED);
>>                writer.setMergeFactor(16);
>>
>>                Thread writeThread =3D new Thread(new Runnable() {
>>                        @Override
>>                        public void run() {
>>                                // write test data
>>                                try {
>>                                        for (int i =3D 0; i < 1000000; i+=
+) {
>>                                                Document doc =3D new Docu=
ment();
>>                                                Fieldable itemID =3D new =
Field("ItemID", String
>>                                                                .valueOf(=
i), Field.Store.YES,
>>                                                                Field.Ind=
ex.ANALYZED);
>>
>>                                                writer.addDocument(doc);
>>                                        }
>>
>>                                        Thread.currentThread().sleep(1000=
0);
>>                                        System.out.println("optimize begi=
n");
>>                                        writer.optimize();
>>                                        System.out.println("optimize end"=
);
>>                                } catch (CorruptIndexException e) {
>>                                        e.printStackTrace();
>>                                } catch (IOException e) {
>>                                        e.printStackTrace();
>>                                } catch (InterruptedException e) {
>>                                        e.printStackTrace();
>>                                }
>>
>>                        }
>>                });
>>
>>                writeThread.start();
>>
>>
>>                Thread reopenThread =3D new Thread(new Runnable() {
>>                        public void run() {
>>                                try {
>>                                        IndexReader reader =3D writer.get=
Reader();
>>                                        while (true) {
>>                                                Thread.currentThread().sl=
eep(1000);
>>                                                IndexReader newReader =3D=
 writer.getReader();
>>                                                if (newReader !=3D reader=
) {
>>                                                        reader.close();
>>                                                        reader =3D newRea=
der;
>>                                                }
>>                                                System.out.println("132")=
;
>>                                        }
>>
>>                                } catch (InterruptedException e) {
>>                                        e.printStackTrace();
>>                                } catch (IOException e) {
>>                                        e.printStackTrace();
>>                                }
>>                        }
>>
>>                });
>>
>>                reopenThread.start();
>>        }
>>
>> }
>>
>> -----=D3=CA=BC=FE=D4=AD=BC=FE-----
>> =B7=A2=BC=FE=C8=CB: luocan19826164@sohu.com [mailto:luocan19826164@sohu.=
com]
>> =B7=A2=CB=CD=CA=B1=BC=E4: 2010=C4=EA2=D4=C210=C8=D5 22:49
>> =CA=D5=BC=FE=C8=CB: java-user
>> =D6=F7=CC=E2: RE: here a small test case problem:lucene did not delete o=
ld index file after optimize method called
>>
>> I watched there are three compound files.
>> 0.cfs&nbsp; 6786kb
>> 1.cfs&nbsp; 2044kb
>> 2.cfs&nbsp; 8790kb(the optimize file)
>> I think in this testcase only 2.cfs left(the optimize file left),Is that=
 right??
>> <?xml:namespace prefix =3D o ns =3D "urn:schemas-microsoft-com:office:of=
fice" /><o:p>&nbsp;</o:p>
>> import java.io.File;
>> import java.io.IOException;
>> <o:p>&nbsp;</o:p>
>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>> import org.apache.lucene.document.Document;
>> import org.apache.lucene.document.Field; import org.apache.lucene.docume=
nt.Fieldable;
>> import org.apache.lucene.index.CorruptIndexException;
>> import org.apache.lucene.index.IndexReader;
>> import org.apache.lucene.index.IndexWriter;
>> import org.apache.lucene.store.FSDirectory;
>> import org.apache.lucene.store.LockObtainFailedException;
>> import org.apache.lucene.util.Version;
>> <o:p>&nbsp;</o:p>
>> public class ReopenTest {
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IndexWriter writer;
>> <o:p>&nbsp;</o:p>
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static void main=
(String[] args) throws CorruptIndexException,
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; LockObtainFailedException, IOException {
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; final IndexWriter writer =3D new
>> IndexWriter(FSDirectory.open(new File(
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "data=
")), new
>> StandardAnalyzer(Version.LUCENE_CURRENT),
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Index=
Writer.MaxFieldLength.LIMITED);
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; writer.setMergeFactor(16);
>> <o:p>&nbsp;</o:p>
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Thread writeThread =3D new Thread(new =
Runnable() {
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; @Override
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; public void run() {
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // wr=
ite test data
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i =3D 0; i =
&lt; 1000000; i++) {
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Document doc =3D new
>> Document();
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Fieldable itemID =3D new
>> Field("ItemID", String
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .v=
alueOf(i),
>> Field.Store.YES,
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Fi=
eld.Index.
>> ANALYZED);
>> <o:p>&nbsp;</o:p>
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; writer.addDocument(doc);
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
>> <o:p>&nbsp;</o:p>
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Thread.currentThread=
().sleep(10000);
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("=
optimize
>> begin");
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; writer.optimize();
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("=
optimize end");
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } cat=
ch (CorruptIndexException e) {
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } cat=
ch (IOException e) {
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } cat=
ch (InterruptedException e) {
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
>> <o:p>&nbsp;</o:p>
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; }
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });
>> <o:p>&nbsp;</o:p>
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; writeThread.start();
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Thread reopenThread =3D new Thread(new=
 Runnable() {
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; public void run() {
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IndexReader reader =
=3D
>> writer.getReader();
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while (true) {
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
>> Thread.currentThread().sleep(1000);
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IndexReader newReader =3D
>> writer.getReader();
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (newReader !=3D reader) {
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp; reader.close();
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp; reader =3D newReader;
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("132");
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
>> <o:p>&nbsp;</o:p>
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } cat=
ch (InterruptedException e) {
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } cat=
ch (IOException e) {
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.printStackTrace();
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; }
>> <o:p>&nbsp;</o:p>
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; reopenThread.start();
>> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
>> <o:p>&nbsp;</o:p>
>> }
>> &nbsp;
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 17:20:50 2010
Return-Path: <java-user-return-44979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74091 invoked from network); 10 Feb 2010 17:20:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 17:20:50 -0000
Received: (qmail 75686 invoked by uid 500); 10 Feb 2010 17:20:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75605 invoked by uid 500); 10 Feb 2010 17:20:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75595 invoked by uid 99); 10 Feb 2010 17:20:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 17:20:47 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.212] (HELO mail-gx0-f212.google.com) (209.85.217.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 17:20:39 +0000
Received: by gxk4 with SMTP id 4so243454gxk.5
        for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 09:20:18 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.170.15 with SMTP id s15mr2872626ybe.2.1265822418128; Wed, 
	10 Feb 2010 09:20:18 -0800 (PST)
In-Reply-To: <4B72C711.5030204@deri.org>
References: <002701caa981$b5400ef0$1fc02cd0$@de> <4B718EEB.3070605@deri.org>
	 <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com>
	 <20100209181235.GA15349@rectangular.com>
	 <9ac0c6aa1002091247j36033b9bt65c787d8703d371e@mail.gmail.com>
	 <20100209214416.GA17405@rectangular.com>
	 <000c01caaa36$073c7900$15b56b00$@de> <4B72AD6C.5080602@deri.org>
	 <002501caaa53$1be8f5a0$53bae0e0$@de> <4B72C711.5030204@deri.org>
Date: Wed, 10 Feb 2010 12:20:18 -0500
Message-ID: <9ac0c6aa1002100920x6389a053x2cdcd5f2d70dada0@mail.gmail.com>
Subject: Re: Flex & Docs/AndPositionsEnum
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Feb 10, 2010 at 9:47 AM, Renaud Delbru <renaud.delbru@deri.org> wrote:
> On 10/02/10 13:15, Uwe Schindler wrote:
>>>
>>> Could you provide pointers to search code that uses the segment-level
>>> enum ?
>>> As I explained in my last answer to Michael, the TermScorer is using
>>> the
>>> DocsEnum interface, and therefore do not know if it manipulates
>>> segment-level enum or a Multi*Enums. What search (or query operators)
>>> in
>>> Lucene is using segment-level enums ?
>>>
>>
>> All of them, only rewrites are currently done on the top-level reader.
>> IndexSearcher since 2.9 creates Scorers in separate for each segment and
>> merges the results in its collector. Because of that we have a modified
>> Collector interface that has setNextReader() methods and so on.
>>
>
> Ok, so for example, in TermQuery$TermWeight#scorer(reader, scoreDocsInOrder,
> topScorer), the reader passed as parameter is one of the subscorer ? Is that
> right ?

Right, it will be a SegmentReader.

But, you're right -- the scorer method will also accept a
Multi/DirectoryReader, and iterate a Multi*Enum in that case.  It's
just less performant, so, Lucene doesn't do that when it creates
scorers.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 17:33:58 2010
Return-Path: <java-user-return-44980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83746 invoked from network); 10 Feb 2010 17:33:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 17:33:58 -0000
Received: (qmail 971 invoked by uid 500); 10 Feb 2010 17:33:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 894 invoked by uid 500); 10 Feb 2010 17:33:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 884 invoked by uid 99); 10 Feb 2010 17:33:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 17:33:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.217.212] (HELO mail-gx0-f212.google.com) (209.85.217.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 17:33:49 +0000
Received: by gxk4 with SMTP id 4so257749gxk.5
        for <java-user@lucene.apache.org>; Wed, 10 Feb 2010 09:33:28 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.20.6 with SMTP id x6mr2864056ybi.144.1265823207709; Wed, 
	10 Feb 2010 09:33:27 -0800 (PST)
In-Reply-To: <20100210132743.GA13836@rectangular.com>
References: <002801caa988$7a5c5bc0$6f151340$@de> <4B716C5F.6020907@deri.org>
	 <9ac0c6aa1002090804s19c3d6e6qc1a34bdaca5dd982@mail.gmail.com>
	 <4B718EEB.3070605@deri.org>
	 <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com>
	 <20100209181235.GA15349@rectangular.com>
	 <9ac0c6aa1002091247j36033b9bt65c787d8703d371e@mail.gmail.com>
	 <20100209214416.GA17405@rectangular.com>
	 <9ac0c6aa1002100358v5e51c743q65054b81e9da5067@mail.gmail.com>
	 <20100210132743.GA13836@rectangular.com>
Date: Wed, 10 Feb 2010 12:33:27 -0500
Message-ID: <9ac0c6aa1002100933g2f97801fy6c3e7b0064fe4ddf@mail.gmail.com>
Subject: Re: Flex & Docs/AndPositionsEnum
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On Wed, Feb 10, 2010 at 8:27 AM, Marvin Humphrey <marvin@rectangular.com> wrote:

>> But why didn't you have the Multi*Enums layer add the offset (so
>> that the codec need not know who's consuming it)?  Performance?
>
> That would have involved something like this within the aggregator:
>
>    posting.setDocID(posting.getDodID() + docBase).
>
> The problem is that that's the docID the SegPostingList is using for
> its deltas.  If the SegPostingList skips during a call to advance(),
> it needs to reset that docID to the what the skip data says -- but
> if the aggregator layer doesn't tell it that it needs to account for
> a docBase, the new docID will lose the offset.  Can't solve that
> problem at the aggregator level either -- the aggregator doesn't
> know when skipping is occurring, so it can't intervene on an
> as-needed basis.

In Lucene, skipping is done through the aggregator, so it knows that
it's skipping, and in fact skips whole segments at a time until it
gets to the segment that may contain the doc.

> The fix was to make SegPostingList aware of a docBase, so that on
> skipping it could add it to the docID in the skip data and land at
> the right docID from the perspective of the consumer.  Messy.

OK

> I suppose another possibility would have been to have the aggregator
> keep its own Posting and copy all data over from the
> SegPostingList's Posting on each iteration then add its offset.

I think this is what Lucene does (?).  EG the aggregator holds its own
"int doc" which it must copy to (adding the offset) from the
underlying sub enum.

> However, that would have been a lot less efficient, and it still
> wouldn't have worked for the "flat positions space" example because
> the generic aggregator would not have known about the needs of the
> specific codec.

But aggregator could also add the positions offset on each
nextPosition() call, in Lucene.  Like that use case could be made to
work, if Lucene had used a flat position space.

>> > That example may not be a deal breaker for you, but I'm not
>> > willing to guarantee that Lucy will always return primitives from
>> > these enums, now and forever, one per method call.
>>
>> But it'd be a major API change down the road to change this, for
>> Lucy/KS?
>
> I suppose so.  It's either foreclose on the possibility of aggregating (Lucy),
> or foreclose on the possibility of using properties that cannot be aggregated
> (Lucene).

Right, though... if this even happens in practice for some future app,
that app can choose to avoid Multi*Enum.  Lucene internally doesn't
use Multi*Enum (except during merging, which your codec can
override, as of flex).

>> Also, this is why we're adding Attribute* to all the postings enums,
>> with flex -- any codec & consumer can use their own private
>> attributes.  The attrs pass through Multi*Enum.
>
> Hmm.  Does that mean that the consumer needs to refresh the attributes with
> each iteration?  Because what happens when you switch sub-enums within the
> Multi*Enum?  Don't those attributes go stale, as they belong to a sub-enum
> that has finished?

Switching sub-enums is indeed tricky (we're iterating on this in
LUCENE-2154).  Our current plan is to pass an attr source (maps attr
interface to an actual instance that implements it) to each sub-enum,
meaning, all codecs being aggregated must be able to use the same attr
impl.

So consumer gets a single instance for TupleAttribute, next's through
the enum, calling TupleAttribute.get() each time, regardless of
whether it's an aggreggated or non-aggregated enum.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 10 19:42:59 2010
Return-Path: <java-user-return-44981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63151 invoked from network); 10 Feb 2010 19:42:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Feb 2010 19:42:59 -0000
Received: (qmail 85387 invoked by uid 500); 10 Feb 2010 19:42:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85300 invoked by uid 500); 10 Feb 2010 19:42:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85290 invoked by uid 99); 10 Feb 2010 19:42:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 19:42:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.116.39.62] (HELO rectangular.com) (68.116.39.62)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Feb 2010 19:42:49 +0000
Received: from marvin by rectangular.com with local (Exim 4.63)
	(envelope-from <marvin@rectangular.com>)
	id 1NfISB-0004yk-Fg
	for java-user@lucene.apache.org; Wed, 10 Feb 2010 11:42:27 -0800
Date: Wed, 10 Feb 2010 11:42:27 -0800
To: java-user@lucene.apache.org
Subject: Re: Flex & Docs/AndPositionsEnum
Message-ID: <20100210194227.GA18842@rectangular.com>
References: <4B716C5F.6020907@deri.org> <9ac0c6aa1002090804s19c3d6e6qc1a34bdaca5dd982@mail.gmail.com> <4B718EEB.3070605@deri.org> <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com> <20100209181235.GA15349@rectangular.com> <9ac0c6aa1002091247j36033b9bt65c787d8703d371e@mail.gmail.com> <20100209214416.GA17405@rectangular.com> <9ac0c6aa1002100358v5e51c743q65054b81e9da5067@mail.gmail.com> <20100210132743.GA13836@rectangular.com> <9ac0c6aa1002100933g2f97801fy6c3e7b0064fe4ddf@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <9ac0c6aa1002100933g2f97801fy6c3e7b0064fe4ddf@mail.gmail.com>
User-Agent: Mutt/1.5.13 (2006-08-11)
From: Marvin Humphrey <marvin@rectangular.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Feb 10, 2010 at 12:33:27PM -0500, Michael McCandless wrote:

> In Lucene, skipping is done through the aggregator,

I had a look at MultiDocsEnum in the flex blanch.  It doesn't know when
sub-enum is reading skip data.

> > I suppose another possibility would have been to have the aggregator
> > keep its own Posting and copy all data over from the
> > SegPostingList's Posting on each iteration then add its offset.
> 
> I think this is what Lucene does (?).  EG the aggregator holds its own
> "int doc" which it must copy to (adding the offset) from the
> underlying sub enum.

That's fine for a *primitive* type.  Modifying an int returned by a sub-enum
doesn't affect the sub-enum.  :)

The problem arises when there's an opaque *object* conveying data to the
consumer.  The aggregator knows everything there is to know about an int, but
it doesn't know what it needs to do to prepare an opaque object owned by the
sub-enum for consumption at the aggregate level.

> > However, that would have been a lot less efficient, and it still
> > wouldn't have worked for the "flat positions space" example because
> > the generic aggregator would not have known about the needs of the
> > specific codec.
> 
> But aggregator could also add the positions offset on each
> nextPosition() call, in Lucene.  Like that use case could be made to
> work, if Lucene had used a flat position space.

A generic aggregator wouldn't know that it needed to do that.  The postings
codec developer would be forced to write aggregation code in addition to
segment-level code.

Marvin Humphrey


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 11 07:35:35 2010
Return-Path: <java-user-return-44982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46871 invoked from network); 11 Feb 2010 07:35:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Feb 2010 07:35:35 -0000
Received: (qmail 2755 invoked by uid 500); 11 Feb 2010 07:35:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2694 invoked by uid 500); 11 Feb 2010 07:35:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2684 invoked by uid 99); 11 Feb 2010 07:35:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 07:35:31 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 98.129.35.5 is neither permitted nor denied by domain of yuvalf@answers.com)
Received: from [98.129.35.5] (HELO server505.appriver.com) (98.129.35.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 07:35:23 +0000
X-Policy: GLOBAL - answers.com
X-Primary: yuvalf@answers.com
X-Note: This Email was scanned by AppRiver SecureTide
X-ALLOW: yuvalf@answers.com ALLOWED
X-Virus-Scan: V-
X-Note: Spam Tests Failed: 
X-Country-Path: UNITED STATES->UNITED STATES->UNITED STATES
X-Note-Sending-IP: 98.129.23.14
X-Note-Reverse-DNS: ht01.exg5.exghost.com
X-Note-WHTLIST: yuvalf@answers.com
X-Note: User Rule Hits: 
X-Note: Global Rule Hits: G173 G174 G175 G176 G180 G181 G192 G279 
X-Note: Encrypt Rule Hits: 
X-Note: Mail Class: ALLOWEDSENDER
X-Note: Headers Injected
Received: from [98.129.23.14] (HELO ht01.exg5.exghost.com)
  by server505.appriver.com (CommuniGate Pro SMTP 5.3.2)
  with ESMTPS id 23498747 for java-user@lucene.apache.org; Thu, 11 Feb 2010 01:35:02 -0600
Received: from mbx03.exg5.exghost.com ([169.254.1.200]) by
 ht01.exg5.exghost.com ([98.129.23.14]) with mapi; Thu, 11 Feb 2010 01:35:01
 -0600
From: Yuval Feinstein <yuvalf@answers.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 11 Feb 2010 01:34:56 -0600
Subject: Do deleted documents affect scores?
Thread-Topic: Do deleted documents affect scores?
Thread-Index: Acqpot97X8OAQCgmQu2Pj/TSkkhzkAAekusAADOhgwA=
Message-ID: <01C4AEE04EB96243BBAA8083CB6514E86067393C@MBX03.exg5.exghost.com>
References: <01C4AEE04EB96243BBAA8083CB6514E860672FB8@MBX03.exg5.exghost.com>
 <8c4e68611002090812s5906caadyeaad6a95b39bd376@mail.gmail.com>
 <01C4AEE04EB96243BBAA8083CB6514E860673509@MBX03.exg5.exghost.com>
In-Reply-To: <01C4AEE04EB96243BBAA8083CB6514E860673509@MBX03.exg5.exghost.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-cr-hashedpuzzle: AnM4 BjLJ CFY7 CgYT DJCQ EOsm Ec8y E04E FdlG GHsl HN3Q
 HR5r IZM2 IfAz KWQR
 KlUt;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{6757FAA8-54C2-4CCA-9719-D86652A80D72};eQB1AHYAYQBsAGYAQABhAG4AcwB3AGUAcgBzAC4AYwBvAG0A;Thu,
 11 Feb 2010 07:34:56
 GMT;RABvACAAZABlAGwAZQB0AGUAZAAgAGQAbwBjAHUAbQBlAG4AdABzACAAYQBmAGYAZQBjAHQAIABzAGMAbwByAGUAcwA/AA==
x-cr-puzzleid: {6757FAA8-54C2-4CCA-9719-D86652A80D72}
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

I want to focus my previous question.
Say we have two Lucene indexes: A and B.
Index A contains documents a and b.
Index B used to contain documents a, b and c,
But c was deleted.
All documents share some vocabulary.
If we search using terms common to documents b and c,
Can we get a different score for document b in index A and index B?
Note that both indexes are identical with regard to the non-deleted documen=
ts,
And only differ by the deleted document c.
Thanks,
Yuval


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 11 13:30:45 2010
Return-Path: <java-user-return-44983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62807 invoked from network); 11 Feb 2010 13:30:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Feb 2010 13:30:45 -0000
Received: (qmail 80344 invoked by uid 500); 11 Feb 2010 13:30:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80264 invoked by uid 500); 11 Feb 2010 13:30:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80254 invoked by uid 99); 11 Feb 2010 13:30:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 13:30:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.217.212] (HELO mail-gx0-f212.google.com) (209.85.217.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 13:30:35 +0000
Received: by gxk4 with SMTP id 4so645548gxk.5
        for <java-user@lucene.apache.org>; Thu, 11 Feb 2010 05:30:14 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.92.5 with SMTP id u5mr186631ybl.114.1265895014690; Thu, 11 
	Feb 2010 05:30:14 -0800 (PST)
In-Reply-To: <20100210194227.GA18842@rectangular.com>
References: <4B716C5F.6020907@deri.org> <4B718EEB.3070605@deri.org>
	 <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com>
	 <20100209181235.GA15349@rectangular.com>
	 <9ac0c6aa1002091247j36033b9bt65c787d8703d371e@mail.gmail.com>
	 <20100209214416.GA17405@rectangular.com>
	 <9ac0c6aa1002100358v5e51c743q65054b81e9da5067@mail.gmail.com>
	 <20100210132743.GA13836@rectangular.com>
	 <9ac0c6aa1002100933g2f97801fy6c3e7b0064fe4ddf@mail.gmail.com>
	 <20100210194227.GA18842@rectangular.com>
Date: Thu, 11 Feb 2010 08:30:14 -0500
Message-ID: <9ac0c6aa1002110530k756d0f57rdd5aad89430ca716@mail.gmail.com>
Subject: Re: Flex & Docs/AndPositionsEnum
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On Wed, Feb 10, 2010 at 2:42 PM, Marvin Humphrey <marvin@rectangular.com> wrote:
> On Wed, Feb 10, 2010 at 12:33:27PM -0500, Michael McCandless wrote:
>
>> In Lucene, skipping is done through the aggregator,
>
> I had a look at MultiDocsEnum in the flex blanch.  It doesn't know when
> sub-enum is reading skip data.

I'm confused -- the MultiDocsEnum's advance method impl is the only
place where we invoke advance on the sub readers.  Oh you're saying we
don't know if the underlying enum actually skipped vs just scanned?

Isn't the skip data also based on deltas?  So even if real skipping
happened, Lucy/KS would not "lose" the offset that the aggregator had
previously added?  Or maybe I'm lost on what the issue is here...

>> > I suppose another possibility would have been to have the aggregator
>> > keep its own Posting and copy all data over from the
>> > SegPostingList's Posting on each iteration then add its offset.
>>
>> I think this is what Lucene does (?).  EG the aggregator holds its own
>> "int doc" which it must copy to (adding the offset) from the
>> underlying sub enum.
>
> That's fine for a *primitive* type.  Modifying an int returned by a sub-enum
> doesn't affect the sub-enum.  :)
>
> The problem arises when there's an opaque *object* conveying data to the
> consumer.  The aggregator knows everything there is to know about an int, but
> it doesn't know what it needs to do to prepare an opaque object owned by the
> sub-enum for consumption at the aggregate level.

OK.

>> > However, that would have been a lot less efficient, and it still
>> > wouldn't have worked for the "flat positions space" example because
>> > the generic aggregator would not have known about the needs of the
>> > specific codec.
>>
>> But aggregator could also add the positions offset on each
>> nextPosition() call, in Lucene.  Like that use case could be made to
>> work, if Lucene had used a flat position space.
>
> A generic aggregator wouldn't know that it needed to do that.  The postings
> codec developer would be forced to write aggregation code in addition to
> segment-level code.

Right, if position were not primitive but contained within an opaque
(to the aggregator) object.  And, you were doing the flat positions
space.

I guess... this restriction still seems academic... ie, not a real
issue in Lucene.  We use primitives in Lucene for doc/position, which
we can remap as needed.  We then require that opaque stuff (using
attributes) "survive", unchanged, when passed through the aggregator.
Either that, or, you enum segment by segment in the code.  I don't [yet]
see this as an issue for Lucene...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 11 14:51:47 2010
Return-Path: <java-user-return-44984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7105 invoked from network); 11 Feb 2010 14:51:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Feb 2010 14:51:47 -0000
Received: (qmail 18768 invoked by uid 500); 11 Feb 2010 14:51:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18696 invoked by uid 500); 11 Feb 2010 14:51:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18686 invoked by uid 99); 11 Feb 2010 14:51:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 14:51:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gudumba.smith@gmail.com designates 216.239.58.186 as permitted sender)
Received: from [216.239.58.186] (HELO gv-out-0910.google.com) (216.239.58.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 14:51:37 +0000
Received: by gv-out-0910.google.com with SMTP id r4so104133gve.23
        for <java-user@lucene.apache.org>; Thu, 11 Feb 2010 06:51:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=v+D5M220Jov2hNkgSpjRukZ0bX8FgnbbMRpPJyHCGts=;
        b=vOgTiBsbeYtmoMdJRyaSqavPxtbvggHtmWoM8IVT0xHwUmZ6p5BgN+/Vd1ICINYswj
         pOcBOlM+2EzgdjAk6bN303qw9z4V60DMFKELDhh8NuBOL/l4K34JbQJCgDWLbVwYbUM6
         1/gMnp9AfqEvC7foxNQmjX9Di1wev/cGBY5Ik=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=OFdNzPQBjuKbtOq+V/p8tWbPsCFJb65OPAHEDFEWvjFJdPBcpvqw69pUKv+sAUbsia
         8cnpjkNTVCNWSUJSqeUzrpUPJiLOmo+gW7plrxYs1Q1angiCSaAwFsgSzoMQWZASSGHX
         hZ4+zgI2FLAZl6Qn0bvYjpwDMbrAnRUYJfRM0=
MIME-Version: 1.0
Received: by 10.102.204.2 with SMTP id b2mr1377900mug.80.1265899875463; Thu, 
	11 Feb 2010 06:51:15 -0800 (PST)
Date: Thu, 11 Feb 2010 15:51:15 +0100
Message-ID: <171c79531002110651p5035147btd5f76d9a625e1c3e@mail.gmail.com>
Subject: question regarding BooleanQuery:equals() method
From: Smith G <gudumba.smith@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hello All,
            I am writing some test cases for a custom-class which
modifies incoming TermQuery and adds some other Terms and returns a
BooleanQuery. As always I have used assertEquals(), which apparently
uses equals() method. I found out that following two queries are
different from each other if we use BooleanQuery.equals() if the
positions of the terms are inconsistent.

For Ex :

1) BooleanQuery bq1 = new BooleanQuery();

    bq1.add(new TermQuery(new Term("fiedl_1", "value_1")),
BooleanClause.Occur.MUST);

    bq1.add(new TermQuery(new Term("fiedl_2", "value_2")),
BooleanClause.Occur.MUST_NOT);


2) BooleanQuery bq2 = new BooleanQuery();

    bq2.add(new TermQuery(new Term("fiedl_2", "value_2")),
BooleanClause.Occur.MUST_NOT);

    bq2.add(new TermQuery(new Term("fiedl_1", "value_1")),
BooleanClause.Occur.MUST);


3) BooleanQuery bq3 = new BooleanQuery();

    bq3.add(new TermQuery(new Term("fiedl_1", "value_1")),
BooleanClause.Occur.MUST);

    bq3.add(new TermQuery(new Term("fiedl_2", "value_2")),
BooleanClause.Occur.MUST_NOT);

I have observed following...
 A)  bq1.equals(bq2) returns FALSE;
 B)  bq1.equals(bq3) returns  TRUE

     The issue is that we never know the order of terms populated in
the retunred BooleanQuery by the method. As according to the method
queries are not equal if the term's position changes, i.e I can not
prepare expected result.   So I would be glad to know the point here?
"Are they really different?". If yes, Can you suggest me an
alternative which is conventionally used to test this kind of cases.

(NOTE :: If you find any inconsistency in the field values (spellings,
etc) or in the code, Just assume that they are typing mistakes.)
Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 11 15:48:20 2010
Return-Path: <java-user-return-44985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33834 invoked from network); 11 Feb 2010 15:48:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Feb 2010 15:48:20 -0000
Received: (qmail 27381 invoked by uid 500); 11 Feb 2010 15:48:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27300 invoked by uid 500); 11 Feb 2010 15:48:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27290 invoked by uid 99); 11 Feb 2010 15:48:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 15:48:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.136.167.19] (HELO web113319.mail.gq1.yahoo.com) (98.136.167.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Feb 2010 15:48:06 +0000
Received: (qmail 85673 invoked by uid 60001); 11 Feb 2010 15:47:44 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1265903263; bh=79P6ovG+Tr18IhZPHtK6jBCqEElQvtHj+Jgt4QP4SQQ=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=jgvHbkPHIaNvL75i15XZghKAgU89NEBz8NKRo7WpNsXdDdBYkoak2lgn8nAt7BcU8JDjIf2KcUobLmnWj5RDQ7pJTOAJBCd0lWD8zp40DaTV2rRyIXdw/Fw8Wd4ZUInnBhUPY/e1pyyubvrENttq81MuYQ8RlfMYjiNGpZIItj8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=jENomiQzZydDD9y84CB9qsq+rtrB265MtQgKa166eJvNCl+w8Ck6usABR0eVCgrC7dwxe3uG6xdbLp2cmwEo5jSwrdA4pbFjGMuGCcZwcZgDN1ZXj+0DvjUuh5qDEDmb0Q+enKypwTYxXLdSXIvW6kx0fkcdNkBq/mJKSP4gVKw=;
Message-ID: <984233.85251.qm@web113319.mail.gq1.yahoo.com>
X-YMail-OSG: KuK1znkVM1l.lMaM.TzpCmsCGblsdnTGgU5Sp3ZuWljRkwfKjKt09GTpz1fS1iQq0xlgslBsE2XwsB_zgK3PZtB0glgcMcqIMMCqHRNHSltoxGe1cAQ4X49rsNmES1djI1e6OHluNX9fAgEh.9NDnd3NmNcJsIWFDeJzZEFN8hQYHGmmaayCjssjSgf9.oomOPI9.NcIpM1yOj8y8273JLQ42FiRNzNCcxVy88xGvJSNRx_ugfYBKR_ZoXPUNIoMi0mb6Vm_5ACqHvXoxzlWuIv6lYY8NnGad3BTpj1GjYEt7O6yLPEJeRKsnUeuk21My1DGD6EFLPGVqA86TIbE71dOjD2.a08FJdv9xO._.Xo2CYbzJ75nJ1ATUuhx0yh.FhaIhXSX.ZxYLiLcE63EuepfjpSm1IdjgMXXTX755hXbvC2H.gYDRWDs42F58JGkZ7fZCEPXqpg6w7E_hF3bUXAmTeXAjX9gdA5pc71w
Received: from [140.244.128.12] by web113319.mail.gq1.yahoo.com via HTTP; Thu, 11 Feb 2010 07:47:43 PST
X-Mailer: YahooMailClassic/9.1.10 YahooMailWebService/0.8.100.260964
Date: Thu, 11 Feb 2010 07:47:43 -0800 (PST)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: TREC Data and Topic-Specific Index
To: java-user@lucene.apache.org
In-Reply-To: <8f0ad1f31002100623h7516140p4c2e6f469a6d5794@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you, Robert.=0A=0A--- On Wed, 2/10/10, Robert Muir <rcmuir@gmail.com>=
 wrote:=0A=0A> From: Robert Muir <rcmuir@gmail.com>=0A> Subject: Re: TREC D=
ata and Topic-Specific Index=0A> To: java-user@lucene.apache.org=0A> Date: =
Wednesday, February 10, 2010, 9:23 AM=0A> Hi, so you mean around 15% and 24=
%=0A> respectively? i think you could fairly=0A> say either of these is an =
improvement over your baseline of=0A> 0.141=0A> =0A> what i mean by large d=
ifference, is while I think its safe=0A> to say that using=0A> either of th=
ese methods improves over your baseline, i am=0A> not sure you can=0A> conc=
lude that either improvement is better than the other,=0A> =0A> you can app=
ly various statistical tests to try to figure=0A> this out, but=0A> because=
 you didn't participate in the pool with these runs,=0A> you would have=0A>=
 to be careful about drawing conclusions as to which=0A> similarity is best=
, as=0A> there is some bias and error involved.=0A> =0A> On Wed, Feb 10, 20=
10 at 9:14 AM, Ivan Provalov <iprovalo@yahoo.com>=0A> wrote:=0A> =0A> > Rob=
ert,=0A> >=0A> > Thank you for your reply.=A0 What would be=0A> considered =
a large difference?=A0 We=0A> > started applying the Sweet Spot Similarity.=
=A0 It=0A> gives us an improvement of=0A> > 0.163-0.141=3D0.022 MAP so far.=
=A0 LnbLtcSimilarity=0A> gets us more improvement:=0A> > 0.175-0.141=3D0.03=
4.=0A> >=0A> > Thanks,=0A> >=0A> > Ivan=0A> >=0A> > --- On Sun, 2/7/10, Rob=
ert Muir <rcmuir@gmail.com>=0A> wrote:=0A> >=0A> > > From: Robert Muir <rcm=
uir@gmail.com>=0A> > > Subject: Re: TREC Data and Topic-Specific Index=0A> =
> > To: java-user@lucene.apache.org=0A> > > Date: Sunday, February 7, 2010,=
 10:59 PM=0A> > > you should do (a), and pretend you=0A> > > know nothing a=
bout the relevance=0A> > > judgements up front.=0A> > >=0A> > > it is true =
you might make some change to your=0A> search engine=0A> > > and wonder, ho=
w=0A> > > is it fair that I am bringing back possibly=0A> relevant docs=0A>=
 > > that were never=0A> > > judged (and thus scored implicitly as=0A> non-=
relevant)? i.e.=0A> > > the test=0A> > > collection is biased against you b=
ecause you did=0A> not=0A> > > participate in the=0A> > > pooling process.=
=0A> > >=0A> > > if you are concerned about this, you should still=0A> use =
(a),=0A> > > but perhaps look=0A> > > at other measures such as bpref (=0A>=
 > >=0A> > http://comminfo.rutgers.edu/~muresan/IR/Docs/Articles/sigirBuckl=
ey2004.pdf<http://comminfo.rutgers.edu/%7Emuresan/IR/Docs/Articles/sigirBuc=
kley2004.pdf>=0A> > ).=0A> > >=0A> > > personally, I simply prefer to stick=
 with MAP.=0A> And with all=0A> > > measures,=0A> > > whether you look at b=
pref or map, my advice is to=0A> only=0A> > > consider large=0A> > > differ=
ences only when evaluating some potential=0A> > > improvement!=0A> > >=0A> =
> > On Sun, Feb 7, 2010 at 6:49 PM, Ivan Provalov=0A> <iprovalo@yahoo.com>=
=0A> > > wrote:=0A> > >=0A> > > > Robert,=0A> > > >=0A> > > > We are using =
TREC-3 data and Ad Hoc topics=0A> > > 151-200.=A0 The relevance=0A> > > > j=
udgments list contains 97,319 entries, of=0A> which=0A> > > 68,559 are uniq=
ue document=0A> > > > ids.=A0 The TIPSTER collection which was=0A> used in=
=0A> > > TREC-3 is around 750,000=0A> > > > documents.=0A> > > >=0A> > > > =
Should we (a) index the entire 750,000=0A> document=0A> > > collection, or =
(b) the=0A> > > > document collection of the 68,559 unique=0A> documents=0A=
> > > listed in the qrels, or=0A> > > > (c) should we limit our index to ea=
ch=0A> specific topic=0A> > > (about 2,000 docs) i.e.=0A> > > > to the docu=
ments listed for a particular=0A> topic in the=0A> > > qrels?=0A> > > >=0A>=
 > > > Thanks,=0A> > > >=0A> > > > Ivan=0A> > > >=0A> > > >=0A> > > >=0A> >=
 > >=0A> > > >=0A> > >=0A> ------------------------------------------------=
---------------------=0A> > > > To unsubscribe, e-mail: java-user-unsubscri=
be@lucene.apache.org=0A> > > > For additional commands, e-mail: java-user-h=
elp@lucene.apache.org=0A> > > >=0A> > > >=0A> > >=0A> > >=0A> > > --=0A> > =
> Robert Muir=0A> > > rcmuir@gmail.com=0A> > >=0A> >=0A> >=0A> >=0A> >=0A> =
>=0A> ---------------------------------------------------------------------=
=0A> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> =
> For additional commands, e-mail: java-user-help@lucene.apache.org=0A> >=
=0A> >=0A> =0A> =0A> -- =0A> Robert Muir=0A> rcmuir@gmail.com=0A> =0A=0A=0A=
      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 11 16:30:02 2010
Return-Path: <java-user-return-44986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52417 invoked from network); 11 Feb 2010 16:30:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Feb 2010 16:30:02 -0000
Received: (qmail 26028 invoked by uid 500); 11 Feb 2010 16:29:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25958 invoked by uid 500); 11 Feb 2010 16:29:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25948 invoked by uid 99); 11 Feb 2010 16:29:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 16:29:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 16:29:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nfbuz-0000Pj-Hq
	for java-user@lucene.apache.org; Thu, 11 Feb 2010 08:29:29 -0800
Message-ID: <27550134.post@talk.nabble.com>
Date: Thu, 11 Feb 2010 08:29:29 -0800 (PST)
From: mored <mored@gmx.net>
To: java-user@lucene.apache.org
Subject: Retrieve fields that are not empty
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: mored@gmx.net
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

is there a way query syntax fo rretrieving fields which have a value?
Something like myfield:NOT EMPTY. I searched the lucene docu, but didn=C2=
=B4t
found anything for this issue.

Thanks in advance.

chris
--=20
View this message in context: http://old.nabble.com/Retrieve-fields-that-ar=
e-not-empty-tp27550134p27550134.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 11 16:33:38 2010
Return-Path: <java-user-return-44987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54737 invoked from network); 11 Feb 2010 16:33:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Feb 2010 16:33:38 -0000
Received: (qmail 37546 invoked by uid 500); 11 Feb 2010 16:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37495 invoked by uid 500); 11 Feb 2010 16:33:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37476 invoked by uid 99); 11 Feb 2010 16:33:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 16:33:36 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 16:33:25 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 45751D36002
	for <java-user@lucene.apache.org>; Thu, 11 Feb 2010 17:33:05 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 16bcpdf3-Sor for <java-user@lucene.apache.org>;
	Thu, 11 Feb 2010 17:32:55 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id B3053D36001
	for <java-user@lucene.apache.org>; Thu, 11 Feb 2010 17:32:54 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <27550134.post@talk.nabble.com>
In-Reply-To: <27550134.post@talk.nabble.com>
Subject: RE: Retrieve fields that are not empty
Date: Thu, 11 Feb 2010 17:32:56 +0100
Message-ID: <006c01caab37$de07bb00$9a173100$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqrN3sU1Tp5gb+JR3i3pLEWReXZGQAADLuw
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Chris,

its only possible with TermRangeQuery/NumericRangeQuery (depending on =
data type, corresponding filters can also be used) with both ends null. =
E.g., Solr does it that way.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: mored [mailto:mored@gmx.net]
> Sent: Thursday, February 11, 2010 5:29 PM
> To: java-user@lucene.apache.org
> Subject: Retrieve fields that are not empty
>=20
>=20
> Hello,
>=20
> is there a way query syntax fo rretrieving fields which have a value?
> Something like myfield:NOT EMPTY. I searched the lucene docu, but
> didn=C2=B4t
> found anything for this issue.
>=20
> Thanks in advance.
>=20
> chris
> --
> View this message in context: http://old.nabble.com/Retrieve-fields-
> that-are-not-empty-tp27550134p27550134.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 11 16:36:03 2010
Return-Path: <java-user-return-44988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55493 invoked from network); 11 Feb 2010 16:36:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Feb 2010 16:36:03 -0000
Received: (qmail 41777 invoked by uid 500); 11 Feb 2010 16:36:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41703 invoked by uid 500); 11 Feb 2010 16:36:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41693 invoked by uid 99); 11 Feb 2010 16:36:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 16:36:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.214 as permitted sender)
Received: from [209.85.218.214] (HELO mail-bw0-f214.google.com) (209.85.218.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 16:35:52 +0000
Received: by bwz6 with SMTP id 6so1188302bwz.11
        for <java-user@lucene.apache.org>; Thu, 11 Feb 2010 08:35:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=Ty+kOsGlKor0+NP2pOb3xPV2zKJU2MOC5P9aMvzvWnY=;
        b=aRTgP3AokEdx9qdZypQ2iTXKZfvN3ztn+5QYN0TEslpMNn/vyOkX/3CmEDzo7MntrJ
         Gap7ZRBn+nCRO/KC3rpM8whAVPS3N3JVyaEpkYnO9iYDSeF2QQO8lKnFdUUfCkh62AbX
         LARKFLTzCveREoCI99LxW2WjB1Ni34oARGr1k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=E9yMDfSyibLPe0kry3HjU2hFvt/wZOTzblQe0gIuSqEUkwgWiFSxEyq/U6P7FTuUYq
         5/ahj53eowd18iGhwXYdpj9sOE4W2nGRczb/Ke29xnj50liumPv/mNVn8iDo/sHefBhq
         MhzHW77A/ajtABCQnhzg689D2gZxXMrCCw8l8=
MIME-Version: 1.0
Received: by 10.204.16.66 with SMTP id n2mr65110bka.67.1265906132240; Thu, 11 
	Feb 2010 08:35:32 -0800 (PST)
In-Reply-To: <01C4AEE04EB96243BBAA8083CB6514E86067393C@MBX03.exg5.exghost.com>
References: <01C4AEE04EB96243BBAA8083CB6514E860672FB8@MBX03.exg5.exghost.com> 
	<8c4e68611002090812s5906caadyeaad6a95b39bd376@mail.gmail.com> 
	<01C4AEE04EB96243BBAA8083CB6514E860673509@MBX03.exg5.exghost.com> 
	<01C4AEE04EB96243BBAA8083CB6514E86067393C@MBX03.exg5.exghost.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 11 Feb 2010 16:35:12 +0000
Message-ID: <8c4e68611002110835l40ed87d0xb717d74b5074090f@mail.gmail.com>
Subject: Re: Do deleted documents affect scores?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I'm pretty sure that the answer is no and a quick test on a small
index with/without deleted docs showed no difference in the scores,
using 3.0.  But that was hardly a rigorous test and I don't know
enough about lucene internals and scoring to give a definitive answer.

Shouldn't be too hard for you to verify or disprove: build an index
and throw loads of updates and deletes at it, checking scores as you
go.


--
Ian.


On Thu, Feb 11, 2010 at 7:34 AM, Yuval Feinstein <yuvalf@answers.com> wrote:
> I want to focus my previous question.
> Say we have two Lucene indexes: A and B.
> Index A contains documents a and b.
> Index B used to contain documents a, b and c,
> But c was deleted.
> All documents share some vocabulary.
> If we search using terms common to documents b and c,
> Can we get a different score for document b in index A and index B?
> Note that both indexes are identical with regard to the non-deleted documents,
> And only differ by the deleted document c.
> Thanks,
> Yuval
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 11 16:54:38 2010
Return-Path: <java-user-return-44989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64253 invoked from network); 11 Feb 2010 16:54:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Feb 2010 16:54:38 -0000
Received: (qmail 76921 invoked by uid 500); 11 Feb 2010 16:54:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76845 invoked by uid 500); 11 Feb 2010 16:54:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76835 invoked by uid 99); 11 Feb 2010 16:54:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 16:54:36 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.202.165.39] (HELO smtpauth14.prod.mesa1.secureserver.net) (64.202.165.39)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Feb 2010 16:54:26 +0000
Received: (qmail 19546 invoked from network); 11 Feb 2010 16:54:04 -0000
Received: from unknown (81.219.54.251)
  by smtpauth14.prod.mesa1.secureserver.net (64.202.165.39) with ESMTP; 11 Feb 2010 16:54:02 -0000
Message-ID: <4B743611.6060707@getopt.org>
Date: Thu, 11 Feb 2010 17:53:37 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.7) Gecko/20100111 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Do deleted documents affect scores?
References: <01C4AEE04EB96243BBAA8083CB6514E860672FB8@MBX03.exg5.exghost.com> 	<8c4e68611002090812s5906caadyeaad6a95b39bd376@mail.gmail.com> 	<01C4AEE04EB96243BBAA8083CB6514E860673509@MBX03.exg5.exghost.com> 	<01C4AEE04EB96243BBAA8083CB6514E86067393C@MBX03.exg5.exghost.com> <8c4e68611002110835l40ed87d0xb717d74b5074090f@mail.gmail.com>
In-Reply-To: <8c4e68611002110835l40ed87d0xb717d74b5074090f@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 2010-02-11 17:35, Ian Lea wrote:
> I'm pretty sure that the answer is no and a quick test on a small
> index with/without deleted docs showed no difference in the scores,
> using 3.0.  But that was hardly a rigorous test and I don't know
> enough about lucene internals and scoring to give a definitive answer.
>
> Shouldn't be too hard for you to verify or disprove: build an index
> and throw loads of updates and deletes at it, checking scores as you
> go.

Actually, deleted docs do affect scoring for a time - IDF of a term is 
not updated until you optimize (or when Lucene decides to merge segments).


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 11 17:17:51 2010
Return-Path: <java-user-return-44990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77768 invoked from network); 11 Feb 2010 17:17:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Feb 2010 17:17:51 -0000
Received: (qmail 25020 invoked by uid 500); 11 Feb 2010 17:17:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24948 invoked by uid 500); 11 Feb 2010 17:17:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24938 invoked by uid 99); 11 Feb 2010 17:17:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 17:17:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.116.39.62] (HELO rectangular.com) (68.116.39.62)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 17:17:40 +0000
Received: from marvin by rectangular.com with local (Exim 4.63)
	(envelope-from <marvin@rectangular.com>)
	id 1NfcfG-0006C0-JS
	for java-user@lucene.apache.org; Thu, 11 Feb 2010 09:17:18 -0800
Date: Thu, 11 Feb 2010 09:17:18 -0800
To: java-user@lucene.apache.org
Subject: Re: Flex & Docs/AndPositionsEnum
Message-ID: <20100211171718.GA23630@rectangular.com>
References: <4B718EEB.3070605@deri.org> <9ac0c6aa1002090851v1183e96fybbcd61f1a277b00a@mail.gmail.com> <20100209181235.GA15349@rectangular.com> <9ac0c6aa1002091247j36033b9bt65c787d8703d371e@mail.gmail.com> <20100209214416.GA17405@rectangular.com> <9ac0c6aa1002100358v5e51c743q65054b81e9da5067@mail.gmail.com> <20100210132743.GA13836@rectangular.com> <9ac0c6aa1002100933g2f97801fy6c3e7b0064fe4ddf@mail.gmail.com> <20100210194227.GA18842@rectangular.com> <9ac0c6aa1002110530k756d0f57rdd5aad89430ca716@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <9ac0c6aa1002110530k756d0f57rdd5aad89430ca716@mail.gmail.com>
User-Agent: Mutt/1.5.13 (2006-08-11)
From: Marvin Humphrey <marvin@rectangular.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Feb 11, 2010 at 08:30:14AM -0500, Michael McCandless wrote:
> Oh you're saying we don't know if the underlying enum actually skipped vs
> just scanned?

Yep.

> Isn't the skip data also based on deltas?  

Yes, but that's internal to the skip reader, in both Lucene and Lucy/KS.  When
it comes time to skip, the skip reader's doc id is assigned directly, in both
libraries.  From StandardPostingsReaderImpl.java:

          doc = skipper.getDoc();

Trying to apply the skip reader's doc id information as a delta would get
quite complicated.  (A delta against...  what?)  I'm not sure that's even
possible.

> So even if real skipping happened, Lucy/KS would not "lose" the offset that
> the aggregator had previously added?  Or maybe I'm lost on what the issue is
> here...

It would indeed "lose" the offset, because the skip reader's doc id
information gets assigned directly rather than applied as a delta.

And since the aggregator layer is not aware of when this occurs, it cannot
intervene to re-apply the offset.

Having driven down this dead-end, turned around and come back, I've become
persuaded that requiring the segment-level postings iterator to be aware of
its consumer is not a good idea.

> > A generic aggregator wouldn't know that it needed to do that.  The postings
> > codec developer would be forced to write aggregation code in addition to
> > segment-level code.
> 
> Right, if position were not primitive but contained within an opaque
> (to the aggregator) object.  And, you were doing the flat positions
> space.
> 
> I guess... this restriction still seems academic... ie, not a real
> issue in Lucene.  

Not for the standard posting formats that Lucene offers.  But the point of
flex is to provide an extension framework, I thought.

Well, whatever.  It's just another place where Lucy and Lucene will part ways.

Marvin Humphrey


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 11 18:55:44 2010
Return-Path: <java-user-return-44991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50867 invoked from network); 11 Feb 2010 18:55:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Feb 2010 18:55:43 -0000
Received: (qmail 18024 invoked by uid 500); 11 Feb 2010 18:55:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17951 invoked by uid 500); 11 Feb 2010 18:55:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17941 invoked by uid 99); 11 Feb 2010 18:55:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 18:55:41 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 98.129.35.4 is neither permitted nor denied by domain of yuvalf@answers.com)
Received: from [98.129.35.4] (HELO server505.appriver.com) (98.129.35.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 18:55:32 +0000
X-Policy: GLOBAL - answers.com
X-Primary: yuvalf@answers.com
X-Note: This Email was scanned by AppRiver SecureTide
X-ALLOW: yuvalf@answers.com ALLOWED
X-Virus-Scan: V-
X-Note: Spam Tests Failed: 
X-Country-Path: UNITED STATES->UNITED STATES->UNITED STATES
X-Note-Sending-IP: 98.129.23.45
X-Note-Reverse-DNS: ht03.exg5.exghost.com
X-Note-WHTLIST: yuvalf@answers.com
X-Note: User Rule Hits: 
X-Note: Global Rule Hits: G173 G174 G175 G176 G180 G181 G192 G279 
X-Note: Encrypt Rule Hits: 
X-Note: Mail Class: ALLOWEDSENDER
X-Note: Headers Injected
Received: from [98.129.23.45] (HELO HT03.exg5.exghost.com)
  by server505.appriver.com (CommuniGate Pro SMTP 5.3.2)
  with ESMTPS id 27356088 for java-user@lucene.apache.org; Thu, 11 Feb 2010 12:55:11 -0600
Received: from mbx03.exg5.exghost.com ([169.254.1.200]) by
 HT03.exg5.exghost.com ([10.242.228.75]) with mapi; Thu, 11 Feb 2010 12:55:10
 -0600
From: Yuval Feinstein <yuvalf@answers.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 11 Feb 2010 12:54:01 -0600
Subject: RE: Do deleted documents affect scores?
Thread-Topic: Do deleted documents affect scores?
Thread-Index: AcqrOugwdeDBMYvTQWKk9glWK57g6wAEKrk8
Message-ID: <01C4AEE04EB96243BBAA8083CB6514E8606E6E41@MBX03.exg5.exghost.com>
References: <01C4AEE04EB96243BBAA8083CB6514E860672FB8@MBX03.exg5.exghost.com>
 	<8c4e68611002090812s5906caadyeaad6a95b39bd376@mail.gmail.com>
 	<01C4AEE04EB96243BBAA8083CB6514E860673509@MBX03.exg5.exghost.com>
 	<01C4AEE04EB96243BBAA8083CB6514E86067393C@MBX03.exg5.exghost.com>
 <8c4e68611002110835l40ed87d0xb717d74b5074090f@mail.gmail.com>,<4B743611.6060707@getopt.org>
In-Reply-To: <4B743611.6060707@getopt.org>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Thanks Ian and Andrzej.
You solved a mystery for us.
-- Yuval

________________________________________
From: Andrzej Bialecki [ab@getopt.org]
Sent: Thursday, February 11, 2010 6:53 PM
To: java-user@lucene.apache.org
Subject: Re: Do deleted documents affect scores?

On 2010-02-11 17:35, Ian Lea wrote:
> I'm pretty sure that the answer is no and a quick test on a small
> index with/without deleted docs showed no difference in the scores,
> using 3.0.  But that was hardly a rigorous test and I don't know
> enough about lucene internals and scoring to give a definitive answer.
>
> Shouldn't be too hard for you to verify or disprove: build an index
> and throw loads of updates and deletes at it, checking scores as you
> go.

Actually, deleted docs do affect scoring for a time - IDF of a term is
not updated until you optimize (or when Lucene decides to merge segments).


--
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 11 20:50:55 2010
Return-Path: <java-user-return-44992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89020 invoked from network); 11 Feb 2010 20:50:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Feb 2010 20:50:55 -0000
Received: (qmail 79082 invoked by uid 500); 11 Feb 2010 20:50:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79023 invoked by uid 500); 11 Feb 2010 20:50:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79013 invoked by uid 99); 11 Feb 2010 20:50:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 20:50:53 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of akaris@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 20:50:43 +0000
Received: by ywh15 with SMTP id 15so1602727ywh.5
        for <java-user@lucene.apache.org>; Thu, 11 Feb 2010 12:50:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=aHyivgNCDoB7GlpQqmvxjJZ263U+JRmbKf/nmhSwmbs=;
        b=pDKIJThYxoJBpNhRlLwutoc90ExrHDP5r2+v/p7oisZQNlStd2dGI2UIrWBBkYAPXi
         bOVS3IgoWM6uqTs4V8L/8zB5PdAgF5YlYuKFkNQgTr7dJjEY/sHVUTsbO2aNhpRUYuu9
         1d7BaZyPYp8hYfmML5NaF5OItz6fWe59C4s+w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=nWlL3splFP34CIIPe6ozeyzwshq6HyNR/L/qBTOflrD0jRcrjtAE3PyEnApe+J6Vlf
         BAe0egV2kZgCWs6H8hUYStG2eGWICM5SHfy0dZ2C0rQRYFNLjT9rv77OhEiYEfVqGvkh
         yw2c1DSngzEM1kSxMx0xynqMq4jQXw+jpUiuk=
MIME-Version: 1.0
Received: by 10.101.184.31 with SMTP id l31mr663875anp.159.1265921422126; Thu, 
	11 Feb 2010 12:50:22 -0800 (PST)
From: Michel Nadeau <akaris@gmail.com>
Date: Thu, 11 Feb 2010 15:50:02 -0500
Message-ID: <962c93f61002111250j10b48a5ah5a23e72e10c72e40@mail.gmail.com>
Subject: ConstantScoreQuery without filters
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368e2d78adee77047f594cb4
X-Virus-Checked: Checked by ClamAV on apache.org

--0016368e2d78adee77047f594cb4
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I use ConstantScoreQuery to find all documents in an index like this:

td = searcher.search(new ConstantScoreQuery(cluCF), null, md, cluSort);

* cluCF is a Filter
* md is int = 999
* cluSort is a Sort

My problem is that I don't always have a filter (cluCF) - so sometimes its
value is 'null' - and Lucene crashes with a "java.lang.NullPointerException"
error.

Any idea how I can search in ALL documents without a filter?

- Mike
akaris@gmail.com


On Thu, Feb 11, 2010 at 1:54 PM, Yuval Feinstein <yuvalf@answers.com> wrote:

> Thanks Ian and Andrzej.
> You solved a mystery for us.
> -- Yuval
>
> ________________________________________
> From: Andrzej Bialecki [ab@getopt.org]
> Sent: Thursday, February 11, 2010 6:53 PM
> To: java-user@lucene.apache.org
> Subject: Re: Do deleted documents affect scores?
>
> On 2010-02-11 17:35, Ian Lea wrote:
> > I'm pretty sure that the answer is no and a quick test on a small
> > index with/without deleted docs showed no difference in the scores,
> > using 3.0.  But that was hardly a rigorous test and I don't know
> > enough about lucene internals and scoring to give a definitive answer.
> >
> > Shouldn't be too hard for you to verify or disprove: build an index
> > and throw loads of updates and deletes at it, checking scores as you
> > go.
>
> Actually, deleted docs do affect scoring for a time - IDF of a term is
> not updated until you optimize (or when Lucene decides to merge segments).
>
>
> --
> Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016368e2d78adee77047f594cb4--

From java-user-return-44993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 11 21:11:22 2010
Return-Path: <java-user-return-44993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96627 invoked from network); 11 Feb 2010 21:11:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Feb 2010 21:11:21 -0000
Received: (qmail 3447 invoked by uid 500); 11 Feb 2010 21:11:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3363 invoked by uid 500); 11 Feb 2010 21:11:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3353 invoked by uid 99); 11 Feb 2010 21:11:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 21:11:19 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of akaris@gmail.com designates 209.85.210.204 as permitted sender)
Received: from [209.85.210.204] (HELO mail-yx0-f204.google.com) (209.85.210.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 21:11:11 +0000
Received: by yxe42 with SMTP id 42so1557600yxe.22
        for <java-user@lucene.apache.org>; Thu, 11 Feb 2010 13:10:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=FGHDmEEp+cC+EsdKsQqji7J54zA2wRKmXE77j6QIOuw=;
        b=NmdFLwc0t4igL8+ym/zvxomBdB0liQF+ibTRaK1DAogrdiAUAzT3Fh/WjaX4fjVcAQ
         DPAeQzsP5Q8bZ4xjGt04EfO4z+RExf3kbiCnZOCA7+tp9sDTYUk2VTGR8Fp9Y3JAoe3u
         TPo3kvh1iVM65gKMxtbvn24/gTbC2ltlhDqu0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Tyrz/pswPLnCvLtgqgcl+YsDYSpG/9HNb3VDEllhy5U+KYf8bRBWCRp7nVokhhJFMF
         eQLFRiQHF9Hb3a4sEUfIoVcLIPnCr83Gztzk5QkmQzdBZG9dUebfmXIVikhbkTSIUlyH
         6MTczVAldZqegRF8OvrFGICU01VmXERrE0zpM=
MIME-Version: 1.0
Received: by 10.101.126.10 with SMTP id d10mr743267ann.96.1265922650100; Thu, 
	11 Feb 2010 13:10:50 -0800 (PST)
In-Reply-To: <962c93f61002111250j10b48a5ah5a23e72e10c72e40@mail.gmail.com>
References: <962c93f61002111250j10b48a5ah5a23e72e10c72e40@mail.gmail.com>
From: Michel Nadeau <akaris@gmail.com>
Date: Thu, 11 Feb 2010 16:10:30 -0500
Message-ID: <962c93f61002111310k9f55f51l4c110061f8e980cb@mail.gmail.com>
Subject: Re: ConstantScoreQuery without filters
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636ed6b5ddf5376047f599509

--001636ed6b5ddf5376047f599509
Content-Type: text/plain; charset=ISO-8859-1

I think I solved my problem - used MatchAllDocsQuery() - is that the best
solution ?

- Mike
akaris@gmail.com


On Thu, Feb 11, 2010 at 3:50 PM, Michel Nadeau <akaris@gmail.com> wrote:

> Hi,
>
> I use ConstantScoreQuery to find all documents in an index like this:
>
> td = searcher.search(new ConstantScoreQuery(cluCF), null, md, cluSort);
>
> * cluCF is a Filter
> * md is int = 999
> * cluSort is a Sort
>
> My problem is that I don't always have a filter (cluCF) - so sometimes its
> value is 'null' - and Lucene crashes with a "java.lang.NullPointerException"
> error.
>
> Any idea how I can search in ALL documents without a filter?
>
> - Mike
> akaris@gmail.com
>
>
> On Thu, Feb 11, 2010 at 1:54 PM, Yuval Feinstein <yuvalf@answers.com>wrote:
>
>> Thanks Ian and Andrzej.
>> You solved a mystery for us.
>> -- Yuval
>>
>> ________________________________________
>> From: Andrzej Bialecki [ab@getopt.org]
>> Sent: Thursday, February 11, 2010 6:53 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Do deleted documents affect scores?
>>
>> On 2010-02-11 17:35, Ian Lea wrote:
>> > I'm pretty sure that the answer is no and a quick test on a small
>> > index with/without deleted docs showed no difference in the scores,
>> > using 3.0.  But that was hardly a rigorous test and I don't know
>> > enough about lucene internals and scoring to give a definitive answer.
>> >
>> > Shouldn't be too hard for you to verify or disprove: build an index
>> > and throw loads of updates and deletes at it, checking scores as you
>> > go.
>>
>> Actually, deleted docs do affect scoring for a time - IDF of a term is
>> not updated until you optimize (or when Lucene decides to merge segments).
>>
>>
>> --
>> Best regards,
>> Andrzej Bialecki     <><
>>  ___. ___ ___ ___ _ _   __________________________________
>> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
>> ___|||__||  \|  ||  |  Embedded Unix, System Integration
>> http://www.sigram.com  Contact: info at sigram dot com
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--001636ed6b5ddf5376047f599509--

From java-user-return-44994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 11 21:26:49 2010
Return-Path: <java-user-return-44994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 347 invoked from network); 11 Feb 2010 21:26:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Feb 2010 21:26:49 -0000
Received: (qmail 27505 invoked by uid 500); 11 Feb 2010 21:26:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27431 invoked by uid 500); 11 Feb 2010 21:26:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27421 invoked by uid 99); 11 Feb 2010 21:26:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 21:26:47 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Feb 2010 21:26:36 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 51349D36003
	for <java-user@lucene.apache.org>; Thu, 11 Feb 2010 22:26:16 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dQYiaEWrcdM9 for <java-user@lucene.apache.org>;
	Thu, 11 Feb 2010 22:26:01 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id C2EABD36001
	for <java-user@lucene.apache.org>; Thu, 11 Feb 2010 22:26:00 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <962c93f61002111250j10b48a5ah5a23e72e10c72e40@mail.gmail.com> <962c93f61002111310k9f55f51l4c110061f8e980cb@mail.gmail.com>
In-Reply-To: <962c93f61002111310k9f55f51l4c110061f8e980cb@mail.gmail.com>
Subject: RE: ConstantScoreQuery without filters
Date: Thu, 11 Feb 2010 22:26:02 +0100
Message-ID: <000601caab60$d023aed0$706b0c70$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqrXsjxwTlkRSyxTP+APcf9DkLHjAAAd/xg
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, the fastest to get *all* documents, as it simply iterates over =
global TermDocs(null) without intersecting with a filter.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Michel Nadeau [mailto:akaris@gmail.com]
> Sent: Thursday, February 11, 2010 10:11 PM
> To: java-user@lucene.apache.org
> Subject: Re: ConstantScoreQuery without filters
>=20
> I think I solved my problem - used MatchAllDocsQuery() - is that the
> best
> solution ?
>=20
> - Mike
> akaris@gmail.com
>=20
>=20
> On Thu, Feb 11, 2010 at 3:50 PM, Michel Nadeau <akaris@gmail.com>
> wrote:
>=20
> > Hi,
> >
> > I use ConstantScoreQuery to find all documents in an index like =
this:
> >
> > td =3D searcher.search(new ConstantScoreQuery(cluCF), null, md,
> cluSort);
> >
> > * cluCF is a Filter
> > * md is int =3D 999
> > * cluSort is a Sort
> >
> > My problem is that I don't always have a filter (cluCF) - so
> sometimes its
> > value is 'null' - and Lucene crashes with a
> "java.lang.NullPointerException"
> > error.
> >
> > Any idea how I can search in ALL documents without a filter?
> >
> > - Mike
> > akaris@gmail.com
> >
> >
> > On Thu, Feb 11, 2010 at 1:54 PM, Yuval Feinstein
> <yuvalf@answers.com>wrote:
> >
> >> Thanks Ian and Andrzej.
> >> You solved a mystery for us.
> >> -- Yuval
> >>
> >> ________________________________________
> >> From: Andrzej Bialecki [ab@getopt.org]
> >> Sent: Thursday, February 11, 2010 6:53 PM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Do deleted documents affect scores?
> >>
> >> On 2010-02-11 17:35, Ian Lea wrote:
> >> > I'm pretty sure that the answer is no and a quick test on a small
> >> > index with/without deleted docs showed no difference in the
> scores,
> >> > using 3.0.  But that was hardly a rigorous test and I don't know
> >> > enough about lucene internals and scoring to give a definitive
> answer.
> >> >
> >> > Shouldn't be too hard for you to verify or disprove: build an
> index
> >> > and throw loads of updates and deletes at it, checking scores as
> you
> >> > go.
> >>
> >> Actually, deleted docs do affect scoring for a time - IDF of a term
> is
> >> not updated until you optimize (or when Lucene decides to merge
> segments).
> >>
> >>
> >> --
> >> Best regards,
> >> Andrzej Bialecki     <><
> >>  ___. ___ ___ ___ _ _   __________________________________
> >> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> >> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> >> http://www.sigram.com  Contact: info at sigram dot com
> >>
> >>
> >> =
--------------------------------------------------------------------
> -
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> =
--------------------------------------------------------------------
> -
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 12 17:09:26 2010
Return-Path: <java-user-return-44995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21950 invoked from network); 12 Feb 2010 17:09:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Feb 2010 17:09:26 -0000
Received: (qmail 4896 invoked by uid 500); 12 Feb 2010 17:09:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4802 invoked by uid 500); 12 Feb 2010 17:09:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4787 invoked by uid 99); 12 Feb 2010 17:09:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Feb 2010 17:09:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.11] (HELO web52901.mail.re2.yahoo.com) (206.190.49.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 12 Feb 2010 17:09:14 +0000
Received: (qmail 40022 invoked by uid 60001); 12 Feb 2010 17:08:53 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1265994533; bh=9GNovD7bFLbzywoc1VpNt+6eKgwqXs187MCZjFNrCOk=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=WJbGfa0mEVLlWtJa082S4mKoG2e27hcasw9nVtYCPNBfugfSKO9y0yk85OnNECjqNX1PqgdnnH4nfe9AWSI4DUcZc5JkkGkKYIhN5BneJOCH4FOtvLmMn3XHskE34aHCVEKxx9Bh4266gZwbO/hC2CRSeDHDkWPCzsTa6aswqI8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Lb/SryHOb+uwuTJtF77M46ljp0LbQ0VQRUIXwL/PhRpiodzA+b244++CSFeSLbHNUtrUKp1KTFgqqDX1Z8XFMFKAErO+OMOC/0yLmiUeFCquuLLne67OnSIach1ufHln10pDIE3Usa+n1jDl4H6mmIg6HN54CF4247erWAGaMKo=;
Message-ID: <100383.40018.qm@web52901.mail.re2.yahoo.com>
X-YMail-OSG: 7s_OQYAVM1kjyPX.8ARogpBuUQ84S0ZQ.uUZVN1yX2Cs5KCr8MtYyup7cOFZKujoONVRZKj5uawiG5Ho6nB7ERWh3i0AWvNVzqYEyakBFj.8XWKZdWIiVntW7Gyw4rXt5MYyaD4d_h4uDEQkU_A7RFes_2t1IIxzV33adVuciRSY7IqyDUX0I.seciCQyRz4SDssf.jDg.zx07o5Gbln.TPZKaAfdIjqRpJgW1L9rk4Rk7fzDBCZyR1lRPhOzwkTKVATGla_YycJUeDVRVJNGeww73sjeiZd42.BBQjGQM6CTl5fHdVxtJGinR3_r_vaDMHCs1np9.vyrIEgLANMcHPR3k59
Received: from [78.168.189.43] by web52901.mail.re2.yahoo.com via HTTP; Fri, 12 Feb 2010 09:08:52 PST
X-Mailer: YahooMailClassic/9.1.10 YahooMailWebService/0.8.100.260964
Date: Fri, 12 Feb 2010 09:08:52 -0800 (PST)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: read more tokens during analysis
To: java-user@lucene.apache.org
In-Reply-To: <f1cb36b91002100516j34162773scc335fd307c769a9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0A> i want to consider the current word=0A> & the next as a single term.=
=0A> =0A> when analyzing "Arun Kumar"=0A> =0A> i want my analyzer to consid=
er "Arun",=A0 "Arun Kumar"=0A> as synonyms.=0A> =0A> in the tokenstream met=
hod, how do we read the next token=0A> "Kumar"=0A> i am going through the s=
etPositionIncrements method for=0A> considering them as=0A> synonyms, but i=
 don't understand how to implement look=0A> ahead in the=0A> analyzer.=0A=
=0ACan we say that you want to implement a synonym filter that takes a list=
 of custom synonyms?=0AIf yes why not use Solr's SynonymFilterFactory[1] th=
at does this automatically? It can handle multi-words synonym like "Arun",=
=A0 "Arun Kumar"=0AI can share the code to integrate it into Lucene if you =
want.=0A=0A[1]http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#s=
olr.SynonymFilterFactory=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 13 01:21:07 2010
Return-Path: <java-user-return-44996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23938 invoked from network); 13 Feb 2010 01:21:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Feb 2010 01:21:07 -0000
Received: (qmail 95409 invoked by uid 500); 13 Feb 2010 01:21:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95367 invoked by uid 500); 13 Feb 2010 01:21:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95357 invoked by uid 99); 13 Feb 2010 01:21:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Feb 2010 01:21:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ryguasu@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Feb 2010 01:20:56 +0000
Received: by vws7 with SMTP id 7so554909vws.35
        for <java-user@lucene.apache.org>; Fri, 12 Feb 2010 17:20:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=p8QUjSNIGRzdBoRibyEQUvfmikWcUFlOVt8PfkfPPzE=;
        b=ZimnYvXdKxGGJPRnsAkegsfqWSo+CuHT68SL1N3F6pPejkAU+OOo4hVDs0UZW1EQJS
         whYmaPcu/8IeNVzfu4a1HwE8eHXm/Q61Z25sg8WGzTcQU6q0YkukphPG5x1Vd65Lnahv
         Q3l0Q96I5BnxX7hNPx8OhwLATx7HAY8q6hynI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=xzZ9HRZuYtVhf2Jmq4yEKXYsslfM7yZArdzpMwZ8aMU3OBk/RbOrKlDdlQtxoobfsF
         NxUENNUIckADNX/98jzysJsaIdbDzXDF2VzgVBGXJsFXVqIwpyb1gn9+TUdgCRBVEqWO
         8TAfx/cm/O8jnzfPCWD19FYdpWh6kR+j76pmo=
MIME-Version: 1.0
Received: by 10.220.127.24 with SMTP id e24mr1393737vcs.154.1266024035145; 
	Fri, 12 Feb 2010 17:20:35 -0800 (PST)
From: Chris Harris <ryguasu@gmail.com>
Date: Fri, 12 Feb 2010 17:20:15 -0800
Message-ID: <856ac15f1002121720i4202bd2aw8863fe85a91bb02@mail.gmail.com>
Subject: Can you use reduced sized test indexes to predict performance gains 
	for a larger index?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I'd like to try some experiments to see if I can improve search
performance by changing analysis (e.g. adding/removing word bigrams or
commongrams), or by changing how I map my source records into Lucene
documents. The problem is that my index currently is about 1TB in size
and takes about 2-3 weeks to build, so if I have to rebuild the entire
index in order to test each potential improvement, then I'm going to
be waiting around a lot.

One option is to test potential performance improvements by building
indexes not for the full dataset, but rather for, say, a 1% sample of
the full dataset. (That is, I'll just index 1% of the source records.)
I would build one small control index, and then n small test indexes,
one for each intervention I wish to try. The hope would be that, if an
indexing intervention significantly improves performance for the small
indexes, then it would also significantly improve performance of the
full dataset. (Similarly, you'd hope that if an intervention *didn't*
significantly improve performance on the small indexes, then it would
*not* significantly improve performance of the full dataset.) This
would allow me to quickly accept and reject interventions (as least
provisionally), and only try applying the most obviously promising
ones to the full dataset.

Any thoughts on how naive this is? Does it sound more like a way to
save time, or like a way to waste time misleading myself?

Cheers,
Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 13 06:03:51 2010
Return-Path: <java-user-return-44997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21494 invoked from network); 13 Feb 2010 06:03:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Feb 2010 06:03:51 -0000
Received: (qmail 28693 invoked by uid 500); 13 Feb 2010 06:03:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28625 invoked by uid 500); 13 Feb 2010 06:03:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28615 invoked by uid 99); 13 Feb 2010 06:03:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Feb 2010 06:03:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of iamrohitbanga@gmail.com designates 209.85.223.194 as permitted sender)
Received: from [209.85.223.194] (HELO mail-iw0-f194.google.com) (209.85.223.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Feb 2010 06:03:41 +0000
Received: by iwn32 with SMTP id 32so4538731iwn.14
        for <java-user@lucene.apache.org>; Fri, 12 Feb 2010 22:03:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=R/MmbzfeAb6ipdwLrUdEfbTZkKsKxT2CjszBN4xAUTA=;
        b=QH+Gfj1lV8iXjJEpR+iRl3/zB0KA0ugvNQybi0Ty64D8T0wiCa0YKxSbPPyZ5mI8nd
         Y2/Ce/+TcBaRvtW0HA4+DrANqYK7ug4EdFwsk4L4DMd+f0HJ8ET1vB0UOy254fokh62X
         U3xgHoqA+mvPvyqdwB9Hz8wznqOoIdIRInSwY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=wdZQftBXebZCR99MR7xbS/L8oRAtmsZmuphpTVkt41S7WwGsmJE/Wm1q+O8u1WecKr
         zKUOEJgGtShzRG/qFVsCbPeu/eK0hJKYgdY7kYhQj3DRzMxj4VNdefxa0TsjfkpgK3eU
         92zfteuzumahkVEOpXoSkumo7Fef0NZykm8fk=
MIME-Version: 1.0
Received: by 10.231.167.4 with SMTP id o4mr838469iby.66.1266041001109; Fri, 12 
	Feb 2010 22:03:21 -0800 (PST)
In-Reply-To: <100383.40018.qm@web52901.mail.re2.yahoo.com>
References: <f1cb36b91002100516j34162773scc335fd307c769a9@mail.gmail.com> 
	<100383.40018.qm@web52901.mail.re2.yahoo.com>
From: Rohit Banga <iamrohitbanga@gmail.com>
Date: Sat, 13 Feb 2010 11:33:01 +0530
Message-ID: <f1cb36b91002122203ge9e67ferddf42b38bbb03c59@mail.gmail.com>
Subject: Re: read more tokens during analysis
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=005045015ea7246e97047f75241b

--005045015ea7246e97047f75241b
Content-Type: text/plain; charset=ISO-8859-1

thanks

will try the code and get back if i have any problems.

Rohit Banga


On Fri, Feb 12, 2010 at 10:38 PM, Ahmet Arslan <iorixxx@yahoo.com> wrote:

>
> > i want to consider the current word
> > & the next as a single term.
> >
> > when analyzing "Arun Kumar"
> >
> > i want my analyzer to consider "Arun",  "Arun Kumar"
> > as synonyms.
> >
> > in the tokenstream method, how do we read the next token
> > "Kumar"
> > i am going through the setPositionIncrements method for
> > considering them as
> > synonyms, but i don't understand how to implement look
> > ahead in the
> > analyzer.
>
> Can we say that you want to implement a synonym filter that takes a list of
> custom synonyms?
> If yes why not use Solr's SynonymFilterFactory[1] that does this
> automatically? It can handle multi-words synonym like "Arun",  "Arun Kumar"
> I can share the code to integrate it into Lucene if you want.
>
> [1]
> http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.SynonymFilterFactory
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--005045015ea7246e97047f75241b--

From java-user-return-44998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 15 17:59:54 2010
Return-Path: <java-user-return-44998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17697 invoked from network); 15 Feb 2010 05:20:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Feb 2010 05:20:02 -0000
Received: (qmail 84147 invoked by uid 500); 15 Feb 2010 05:19:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84047 invoked by uid 500); 15 Feb 2010 05:19:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84037 invoked by uid 99); 15 Feb 2010 05:19:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 05:19:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 05:19:48 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NgtMl-00064G-3C
	for java-user@lucene.apache.org; Sun, 14 Feb 2010 21:19:27 -0800
Message-ID: <27589728.post@talk.nabble.com>
Date: Sun, 14 Feb 2010 21:19:27 -0800 (PST)
From: micmit <mitiaguin@gmail.com>
To: java-user@lucene.apache.org
Subject: Further refinement of search results - distinguishing hits with
 exact phrase match from the rest
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mitiaguin@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I run a query, say, NAME:"John Smith"^1.5 OR NAME:(Jo* Smith).

Once I get the result set, is there an efficient way to identify those hits
that match: a) "John Smith" b) Jo* Smith  ---?

or perhaps to change the original query somehow ?  
-- 
View this message in context: http://old.nabble.com/Further-refinement-of-search-results---distinguishing-hits-with-exact-phrase-match-from-the-rest-tp27589728p27589728.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 15 18:18:22 2010
Return-Path: <java-user-return-45001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69344 invoked from network); 15 Feb 2010 18:18:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Feb 2010 18:18:22 -0000
Received: (qmail 82400 invoked by uid 500); 15 Feb 2010 14:14:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82314 invoked by uid 500); 15 Feb 2010 14:14:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82287 invoked by uid 99); 15 Feb 2010 14:14:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 14:14:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 14:14:12 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nh1hw-0005ON-Ae
	for java-user@lucene.apache.org; Mon, 15 Feb 2010 06:13:52 -0800
Message-ID: <27594371.post@talk.nabble.com>
Date: Mon, 15 Feb 2010 06:13:52 -0800 (PST)
From: stefcl <stefatwork@gmail.com>
To: java-user@lucene.apache.org
Subject: Strange Fuzzyquery results scoring when using a low minimal
 distance
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: stefatwork@gmail.com


Hello,

I'm using Lucene v3.=20
Please consider the following spellings=20

Lucene
Luc=C3=A9ne
luc=C3=A9ne
Lucane
Lucen

When searching for "luc=C3=A9ne" among those words using a FuzzyQuery (with=
 0.5
edit distance), results show :

1. Lucene 1.0259752
2. Lucane 1.0259752
3. Luc=C3=A9ne 0.95660806
4. luc=C3=A9ne 0.95660806
5. Lucen 0.30779266

#4 is an exact match, why does it receive a lower score than "Lucane" which
contains one incorrect letter?

Also, if you raise min similarity a bit higher (0.6 of above), everything
becomes normal :

1. Luc=C3=A9ne 1.0438477
2. luc=C3=A9ne 1.0438477
3. Lucene 0.97959816
4. Lucane 0.97959816


Any idea?
Thanks in advance...


The code I use :

   /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws IOException,
ParseException
    {

        StandardAnalyzer analyzer =3D new
StandardAnalyzer(Version.LUCENE_CURRENT);

        // TODO code application logic here
        Directory index =3D new RAMDirectory();
        IndexWriter w =3D new IndexWriter(index, analyzer, true,
IndexWriter.MaxFieldLength.UNLIMITED);

        addDoc(w, "Lucene");
        addDoc(w, "Luc=C3=A9ne");
        addDoc(w, "luc=C3=A9ne");
        addDoc(w, "Lucane");
        addDoc(w, "Lucen");

        w.close();

        FuzzyQuery q =3D  new FuzzyQuery( new Term("title", "luc=C3=A9ne") =
, 0.5f
);
       =20
        // 3. search
        IndexSearcher searcher =3D new IndexSearcher(index);
       =20
        TopDocs collector =3D searcher.search(q, 10);
        ScoreDoc[] hits =3D collector.scoreDocs;

        // 4. display results
        System.out.println("Found " + hits.length + " hits.");
        for(int i =3D 0 ; i < hits.length; i++)
        {
              Document d =3D searcher.doc(hits[i].doc);
              System.out.println((i + 1) + ". " + d.get("title") + " " +=20
hits[i].score );
        }

        // searcher can only be closed when there
        // is no need to access the documents any more.
        searcher.close();
    }


    private static void addDoc(IndexWriter w, String value) throws
IOException
    {
        Document doc =3D new Document();
        doc.add(new Field("title", value, Field.Store.YES,
Field.Index.ANALYZED));
        w.addDocument(doc);
    }
--=20
View this message in context: http://old.nabble.com/Strange-Fuzzyquery-resu=
lts-scoring-when-using-a-low-minimal-distance-tp27594371p27594371.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 15 18:20:23 2010
Return-Path: <java-user-return-45004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74545 invoked from network); 15 Feb 2010 18:20:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Feb 2010 18:20:23 -0000
Received: (qmail 19619 invoked by uid 500); 15 Feb 2010 15:30:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19562 invoked by uid 500); 15 Feb 2010 15:30:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19538 invoked by uid 99); 15 Feb 2010 15:30:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 15:30:22 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of peterlkeegan@gmail.com designates 209.85.216.185 as permitted sender)
Received: from [209.85.216.185] (HELO mail-px0-f185.google.com) (209.85.216.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 15:30:14 +0000
Received: by pxi15 with SMTP id 15so80757pxi.21
        for <java-user@lucene.apache.org>; Mon, 15 Feb 2010 07:29:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=JPH3xkf/sPvZiRA/rvpjd+Gd23UhAhBQTyCGbMHIIDA=;
        b=jCeqV66hs5zFzMBQ7LZjGhlEEZsJPXFEMvJdyx72M46Y4PZK34tcT1U/1bJptCts0h
         KdIS9R8vf2NjPWxOETZEdlDjkppbnG5YPltp52szA+O6k0vmCKWGVS8L33139owrX6uT
         KW13i54wOhdnU0TgoH80PtFt5jC8Lpv+tWb4U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=lgh0XOcnCbBSJO/KNqufGz1bldX1JRwx8WgmnuII0aVLgH76HA0o+x/HVUhZFcXCwc
         rci9219YdxMUk/HykAgebfp+GNcW/Ie3utgWVwNgBzrWfVZjVmA4x8EUhdeYn5EuW7fj
         /5uwTaO/Y3THw6tgH0en+MlnsqcFvU+8PuX4A=
MIME-Version: 1.0
Received: by 10.142.5.39 with SMTP id 39mr3513807wfe.196.1266247793411; Mon, 
	15 Feb 2010 07:29:53 -0800 (PST)
Date: Mon, 15 Feb 2010 10:29:53 -0500
Message-ID: <e994873a1002150729k7a008cd4s5b2ad92510264f8c@mail.gmail.com>
Subject: PayloadNearSpanScorer explain method
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=00504502b1c1ec8523047fa54931
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502b1c1ec8523047fa54931
Content-Type: text/plain; charset=ISO-8859-1

The 'explain' method in PayloadNearSpanScorer assumes the
AveragePayloadFunction was used. I don't see an easy way to override this
because 'payloadsSeen' and 'payloadScore' are private/protected. It seems
like the 'PayloadFunction' interface should have an 'explain' method that
the Scorer could call. Any thoughts?

Peter

--00504502b1c1ec8523047fa54931--

From java-user-return-45002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 15 18:34:03 2010
Return-Path: <java-user-return-45002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3864 invoked from network); 15 Feb 2010 18:34:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Feb 2010 18:34:03 -0000
Received: (qmail 3618 invoked by uid 500); 15 Feb 2010 14:30:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3560 invoked by uid 500); 15 Feb 2010 14:30:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3550 invoked by uid 99); 15 Feb 2010 14:30:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 14:30:02 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.82.104.176] (HELO web24703.mail.ird.yahoo.com) (212.82.104.176)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Feb 2010 14:29:52 +0000
Received: (qmail 37524 invoked by uid 60001); 15 Feb 2010 14:29:28 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1266244168; bh=4klh6dNTStXwHKaqJctzng73xN2KuCltxErvWIZWkt8=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=lszNCz5NZc+mtKtAFCqfje2c0knGdNon4ccWuB2WeM7+sP7A1/VEAZLYUayEYxxEaPJpfVh2w7+yGuN027Q7JwqO179SqYavw9pn7c7au+ZbKex3JOKdZqDnOZZoxnFzoK8t9Yc1LKv6ZGK7xwwkzCNhYuoMRXQKr5zyRiEO4U8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=PBeXVRyf6NMpu+WjyNiFSiNuHLijnZufxs2h16IUxTVJ42RkZYsgxt2gV38vqq3/01ZPwC8/v3JGU+Wlbhig0kVm4Vuh1+Pf9dLkQluvaiI/azs3bqbaCLg0ndzJ3HFfNyZY7qgqbJaTp1SMGhjaIjBqgnNRy+cCe0xk4M0eDno=;
Message-ID: <559052.37168.qm@web24703.mail.ird.yahoo.com>
X-YMail-OSG: 9RvCgfwVM1kYHb.n7k7_pkSRGJIl5oRdgyQ8wKSffcUAD3SXFOlyV2vdvHCZT2_Bb6sf1mzsExo0uV.W3nlMqTM4oyVzInxrfQytrcvN1pG0V1aKk6S5iFxeFdMVTsnoOtHam45poAWGfKNB7xDG3CtPbr8iqkcDaMoF4cm.mYQgo3qe2Vr3EmIfFFznERALJy_oBdJE67KT1_03V9DLmovWmgdHRpIa5zTFGIRCjw7ZbKTMxcY_QNlzVU9b_oO9OLsjV405S61BDupZYod9ywaaVCeExmSJzjyo7d0oLMM7f0rPnpXpSPfNWv_0YuH7ag--
Received: from [193.36.230.96] by web24703.mail.ird.yahoo.com via HTTP; Mon, 15 Feb 2010 14:29:28 GMT
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
References: <27594371.post@talk.nabble.com>
Date: Mon, 15 Feb 2010 14:29:28 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Strange Fuzzyquery results scoring when using a low minimal distance
To: java-user@lucene.apache.org
In-Reply-To: <27594371.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

This could be down to IDF ie "Lucane" is ranked higher because it is rarer =
despite having worse edit distance.=0AThis is arguably a bug.=0ASee http://=
issues.apache.org/jira/browse/LUCENE-329 which discusses this. You could tr=
y subclass QueryParser and override newFuzzyQuery to return FuzzyLikeThisQu=
ery (found in "contrib/queries")=0A=0ACheers=0AMark=0A=0A=0A=0A----- Origin=
al Message ----=0AFrom: stefcl <stefatwork@gmail.com>=0ATo: java-user@lucen=
e.apache.org=0ASent: Mon, 15 February, 2010 14:13:52=0ASubject: Strange Fuz=
zyquery results scoring when using a low minimal distance=0A=0A=0AHello,=0A=
=0AI'm using Lucene v3. =0APlease consider the following spellings =0A=0ALu=
cene=0ALuc=E9ne=0Aluc=E9ne=0ALucane=0ALucen=0A=0AWhen searching for "luc=E9=
ne" among those words using a FuzzyQuery (with 0.5=0Aedit distance), result=
s show :=0A=0A1. Lucene 1.0259752=0A2. Lucane 1.0259752=0A3. Luc=E9ne 0.956=
60806=0A4. luc=E9ne 0.95660806=0A5. Lucen 0.30779266=0A=0A#4 is an exact ma=
tch, why does it receive a lower score than "Lucane" which=0Acontains one i=
ncorrect letter?=0A=0AAlso, if you raise min similarity a bit higher (0.6 o=
f above), everything=0Abecomes normal :=0A=0A1. Luc=E9ne 1.0438477=0A2. luc=
=E9ne 1.0438477=0A3. Lucene 0.97959816=0A4. Lucane 0.97959816=0A=0A=0AAny i=
dea?=0AThanks in advance...=0A=0A=0AThe code I use :=0A=0A   /**=0A     * @=
param args the command line arguments=0A     */=0A    public static void ma=
in(String[] args) throws IOException,=0AParseException=0A    {=0A=0A       =
 StandardAnalyzer analyzer =3D new=0AStandardAnalyzer(Version.LUCENE_CURREN=
T);=0A=0A        // TODO code application logic here=0A        Directory in=
dex =3D new RAMDirectory();=0A        IndexWriter w =3D new IndexWriter(ind=
ex, analyzer, true,=0AIndexWriter.MaxFieldLength.UNLIMITED);=0A=0A        a=
ddDoc(w, "Lucene");=0A        addDoc(w, "Luc=E9ne");=0A        addDoc(w, "l=
uc=E9ne");=0A        addDoc(w, "Lucane");=0A        addDoc(w, "Lucen");=0A=
=0A        w.close();=0A=0A        FuzzyQuery q =3D  new FuzzyQuery( new Te=
rm("title", "luc=E9ne") , 0.5f=0A);=0A        =0A        // 3. search=0A   =
     IndexSearcher searcher =3D new IndexSearcher(index);=0A        =0A    =
    TopDocs collector =3D searcher.search(q, 10);=0A        ScoreDoc[] hits=
 =3D collector.scoreDocs;=0A=0A        // 4. display results=0A        Syst=
em.out.println("Found " + hits.length + " hits.");=0A        for(int i =3D =
0 ; i < hits.length; i++)=0A        {=0A              Document d =3D search=
er.doc(hits[i].doc);=0A              System.out.println((i + 1) + ". " + d.=
get("title") + " " + =0Ahits[i].score );=0A        }=0A=0A        // search=
er can only be closed when there=0A        // is no need to access the docu=
ments any more.=0A        searcher.close();=0A    }=0A=0A=0A    private sta=
tic void addDoc(IndexWriter w, String value) throws=0AIOException=0A    {=
=0A        Document doc =3D new Document();=0A        doc.add(new Field("ti=
tle", value, Field.Store.YES,=0AField.Index.ANALYZED));=0A        w.addDocu=
ment(doc);=0A    }=0A-- =0AView this message in context: http://old.nabble.=
com/Strange-Fuzzyquery-results-scoring-when-using-a-low-minimal-distance-tp=
27594371p27594371.html=0ASent from the Lucene - Java Users mailing list arc=
hive at Nabble.com.=0A=0A=0A-----------------------------------------------=
----------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@luce=
ne.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.apac=
he.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 15 18:39:51 2010
Return-Path: <java-user-return-45003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20401 invoked from network); 15 Feb 2010 18:39:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Feb 2010 18:39:51 -0000
Received: (qmail 13270 invoked by uid 500); 15 Feb 2010 14:35:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13224 invoked by uid 500); 15 Feb 2010 14:35:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13214 invoked by uid 99); 15 Feb 2010 14:35:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 14:35:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gudumba.smith@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 14:35:44 +0000
Received: by fg-out-1718.google.com with SMTP id e21so310652fga.5
        for <java-user@lucene.apache.org>; Mon, 15 Feb 2010 06:35:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=7xNVgmaTzM/M4RDwbIcg8Bi7m+8YqLGsEGyzzFQcf+w=;
        b=CFoM2ik0GCiNc4wVwteiaVsQCoWuBuIMHWJoW4eyxbH9QPlIPrTO/YbTrCkubE/cDK
         9qoFfHr5zwOI0kkPM0o8XYkzVDUSzTLM6aawncAs2R9WbxSgyYY/HtjW50Hb3G/Fj/5d
         xxaToO5RhA1wKsjn9H8eG6iMBeOCJlGcKGS5c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=a9j6W66ssfAFeuAaQFZsmPljFmaHUpeAxEQR7/PA+hS6kb4fkGPkJEdRe+TI6C/bOq
         fLUiLr97JFzs9HEOQDd47/iWBkNkyk9uRu0pCdQ5mzPtixMqcdlTrHlBkahuTKHb8fSy
         yn44ZGeaKjCJ5b7yBT02x/8E3AG1DHQcK9fAg=
MIME-Version: 1.0
Received: by 10.102.196.33 with SMTP id t33mr3926871muf.2.1266244522327; Mon, 
	15 Feb 2010 06:35:22 -0800 (PST)
In-Reply-To: <171c79531002110651p5035147btd5f76d9a625e1c3e@mail.gmail.com>
References: <171c79531002110651p5035147btd5f76d9a625e1c3e@mail.gmail.com>
Date: Mon, 15 Feb 2010 15:35:22 +0100
Message-ID: <171c79531002150635o43204943o340cf4e5e6206819@mail.gmail.com>
Subject: Re: question regarding BooleanQuery:equals() method
From: Smith G <gudumba.smith@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello All,
                 I am really sorry for not following the rules and
bringing it to the top. It is important at the moment.
Thanks.

On 11 February 2010 15:51, Smith G <gudumba.smith@gmail.com> wrote:
> Hello All,
> =A0 =A0 =A0 =A0 =A0 =A0I am writing some test cases for a custom-class wh=
ich
> modifies incoming TermQuery and adds some other Terms and returns a
> BooleanQuery. As always I have used assertEquals(), which apparently
> uses equals() method. I found out that following two queries are
> different from each other if we use BooleanQuery.equals() if the
> positions of the terms are inconsistent.
>
> For Ex :
>
> 1) BooleanQuery bq1 =3D new BooleanQuery();
>
> =A0 =A0bq1.add(new TermQuery(new Term("fiedl_1", "value_1")),
> BooleanClause.Occur.MUST);
>
> =A0 =A0bq1.add(new TermQuery(new Term("fiedl_2", "value_2")),
> BooleanClause.Occur.MUST_NOT);
>
>
> 2) BooleanQuery bq2 =3D new BooleanQuery();
>
> =A0 =A0bq2.add(new TermQuery(new Term("fiedl_2", "value_2")),
> BooleanClause.Occur.MUST_NOT);
>
> =A0 =A0bq2.add(new TermQuery(new Term("fiedl_1", "value_1")),
> BooleanClause.Occur.MUST);
>
>
> 3) BooleanQuery bq3 =3D new BooleanQuery();
>
> =A0 =A0bq3.add(new TermQuery(new Term("fiedl_1", "value_1")),
> BooleanClause.Occur.MUST);
>
> =A0 =A0bq3.add(new TermQuery(new Term("fiedl_2", "value_2")),
> BooleanClause.Occur.MUST_NOT);
>
> I have observed following...
> =A0A) =A0bq1.equals(bq2) returns FALSE;
> =A0B) =A0bq1.equals(bq3) returns =A0TRUE
>
> =A0 =A0 The issue is that we never know the order of terms populated in
> the retunred BooleanQuery by the method. As according to the method
> queries are not equal if the term's position changes, i.e I can not
> prepare expected result. =A0 So I would be glad to know the point here?
> "Are they really different?". If yes, Can you suggest me an
> alternative which is conventionally used to test this kind of cases.
>
> (NOTE :: If you find any inconsistency in the field values (spellings,
> etc) or in the code, Just assume that they are typing mistakes.)
> Thanks.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 15 19:10:04 2010
Return-Path: <java-user-return-44999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64312 invoked from network); 15 Feb 2010 19:10:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Feb 2010 19:10:04 -0000
Received: (qmail 61398 invoked by uid 500); 15 Feb 2010 10:04:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61325 invoked by uid 500); 15 Feb 2010 10:04:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61314 invoked by uid 99); 15 Feb 2010 10:04:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 10:04:02 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.197] (HELO mail-yw0-f197.google.com) (209.85.211.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 10:03:52 +0000
Received: by ywh35 with SMTP id 35so3699918ywh.21
        for <java-user@lucene.apache.org>; Mon, 15 Feb 2010 02:03:31 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.89.35 with SMTP id r35mr9446373ybl.183.1266228210425; Mon, 
	15 Feb 2010 02:03:30 -0800 (PST)
In-Reply-To: <27589728.post@talk.nabble.com>
References: <27589728.post@talk.nabble.com>
Date: Mon, 15 Feb 2010 05:03:30 -0500
Message-ID: <9ac0c6aa1002150203u30dde135i78b7641ec9607081@mail.gmail.com>
Subject: Re: Further refinement of search results - distinguishing hits with 
	exact phrase match from the rest
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I don't think Lucene makes this easy, today, out of the box.  The
scoring process for a boolean query doesn't track which sub-clause had
matched.

Though, it does track the number of clauses that matched (coord).  EG
you'd be able to tell that a given hit had both clauses match, vs only
1 (just not which one).  But coord is not current exposed - you'd have
to modify BooleanScorer/2 to make that available per hit.

Alternatively, you could make a simple custom query that delegates all
scoring to another query, but tracks whether it matched a given
document.  Then, you'd make your own custom Collector that, on seeing
a competitive hit, also records which clause of the query had matched.

Mike

On Mon, Feb 15, 2010 at 12:19 AM, micmit <mitiaguin@gmail.com> wrote:
>
> I run a query, say, NAME:"John Smith"^1.5 OR NAME:(Jo* Smith).
>
> Once I get the result set, is there an efficient way to identify those hi=
ts
> that match: a) "John Smith" b) Jo* Smith =A0---?
>
> or perhaps to change the original query somehow ?
> --
> View this message in context: http://old.nabble.com/Further-refinement-of=
-search-results---distinguishing-hits-with-exact-phrase-match-from-the-rest=
-tp27589728p27589728.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 15 19:17:43 2010
Return-Path: <java-user-return-45005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69803 invoked from network); 15 Feb 2010 19:17:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Feb 2010 19:17:42 -0000
Received: (qmail 23833 invoked by uid 500); 15 Feb 2010 19:17:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23767 invoked by uid 500); 15 Feb 2010 19:17:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23757 invoked by uid 99); 15 Feb 2010 19:17:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 19:17:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 19:17:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nh6RR-00086t-6n
	for java-user@lucene.apache.org; Mon, 15 Feb 2010 11:17:09 -0800
Message-ID: <27598602.post@talk.nabble.com>
Date: Mon, 15 Feb 2010 11:17:09 -0800 (PST)
From: Tom Burton-West <tburtonwest@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can you use reduced sized test indexes to predict performance
 gains  for a larger index?
In-Reply-To: <856ac15f1002121720i4202bd2aw8863fe85a91bb02@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: tburtonwest@gmail.com
References: <856ac15f1002121720i4202bd2aw8863fe85a91bb02@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Chris,

In our experience with large indexes (about 200-300GB) , we found most of
our bottlenecks involved disk I/O.  We found that if our experimental
indexes were too small, that much  of the index could fit in cache, and so
our test results  were not applicable to our larger indexes.  On the other
hand, once we started building our test indexes so they were significantly
larger than the amount of memory available for OS disk caching, we could see
results that extrapolated out to the large index. 

Tom Burton-West
www.hathitrust.org


ryguasu wrote:
> 
> I'd like to try some experiments to see if I can improve search
> performance by changing analysis (e.g. adding/removing word bigrams or
> commongrams), or by changing how I map my source records into Lucene
> documents. The problem is that my index currently is about 1TB in size
> and takes about 2-3 weeks to build, so if I have to rebuild the entire
> index in order to test each potential improvement, then I'm going to
> be waiting around a lot.
> 
> One option is to test potential performance improvements by building
> indexes not for the full dataset, but rather for, say, a 1% sample of
> the full dataset. (That is, I'll just index 1% of the source records.)
> I would build one small control index, and then n small test indexes,
> one for each intervention I wish to try. The hope would be that, if an
> indexing intervention significantly improves performance for the small
> indexes, then it would also significantly improve performance of the
> full dataset. (Similarly, you'd hope that if an intervention *didn't*
> significantly improve performance on the small indexes, then it would
> *not* significantly improve performance of the full dataset.) This
> would allow me to quickly accept and reject interventions (as least
> provisionally), and only try applying the most obviously promising
> ones to the full dataset.
> 
> Any thoughts on how naive this is? Does it sound more like a way to
> save time, or like a way to waste time misleading myself?
> 
> Cheers,
> Chris
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/Can-you-use-reduced-sized-test-indexes-to-predict-performance-gains--for-a-larger-index--tp27571524p27598602.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 15 19:35:51 2010
Return-Path: <java-user-return-45000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86695 invoked from network); 15 Feb 2010 19:35:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Feb 2010 19:35:51 -0000
Received: (qmail 87051 invoked by uid 500); 15 Feb 2010 10:29:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86994 invoked by uid 500); 15 Feb 2010 10:29:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86984 invoked by uid 99); 15 Feb 2010 10:29:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 10:29:49 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.82.104.183] (HELO web24710.mail.ird.yahoo.com) (212.82.104.183)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Feb 2010 10:29:38 +0000
Received: (qmail 91906 invoked by uid 60001); 15 Feb 2010 10:29:17 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1266229757; bh=O0lW1dRhWBASf2uIj2yRxj1TirTNi3K21h/3Ca6TxvE=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=34cgor07STkZpSMnpkWHtM9ljLOFEnQx64YzqNdRB5cPbEJ/X1o/hjmM7uvEFjLXa6mc8675tN/yi8HkYfQOX1EcxRABKpwxSX0lfQYKNhqG6/CxSEcSVgde4N4e/2jT7kvwuClGRGIcys0PMdwazp5W1GRDjnaTfhkNlLS65kI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=KOce8cDpM/xTJW80t8WJJUREuQ7LD6y8K3cIomuPBc5kRiqx7IseajZiHbQG4lpiCYQhjQ2+v5/cO1RUvj/BLH0gkRGHpEDrprvpC15PXkc3bZweIXwBItStuHKkzd10ogGlNUDen1tuWeZSXMeT+EzZu5pzY5kidkmvLGVJuUQ=;
Message-ID: <425737.91815.qm@web24710.mail.ird.yahoo.com>
X-YMail-OSG: .LjONCUVM1ktK42_AJLsjJOZcPs63RXvL0KEK6XZOq5naIUJ2PLzJw3Mdi.WDNZDZLIfrmHc2omYpIB7H.xkfNCdzmGUkfptCyQtryhXTODlfRf3TMt2Uu30kr4WPvUZqKmY0N3ludLhV8kbNUOMcFz0BzgmDwMTOexIQZNvuScIQ.9pjSfHPY4zb9Dmk1yyWP6VmqzHYFKx1A5sE_pqCJKN3jQzcgTXrNHZMTonFKraXL6QZIlcvDryrN5PBAoPR3KLbZwzGz1N3z..x8UG43H7_I1VAkjBzbtLsnAYUWo710nX8SL33C17yZQ_KIwVVCn7ynz29Ace
Received: from [193.36.230.96] by web24710.mail.ird.yahoo.com via HTTP; Mon, 15 Feb 2010 10:29:17 GMT
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
References: <27589728.post@talk.nabble.com> <9ac0c6aa1002150203u30dde135i78b7641ec9607081@mail.gmail.com>
Date: Mon, 15 Feb 2010 10:29:17 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Further refinement of search results - distinguishing hits with  exact phrase match from the rest
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa1002150203u30dde135i78b7641ec9607081@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Re Mike's delegating custom query suggestion - see https://issues.apache.or=
g/jira/browse/LUCENE-1999=0A=0A=0A=0A=0A----- Original Message ----=0AFrom:=
 Michael McCandless <lucene@mikemccandless.com>=0ATo: java-user@lucene.apac=
he.org=0ASent: Mon, 15 February, 2010 10:03:30=0ASubject: Re: Further refin=
ement of search results - distinguishing hits with  exact phrase match from=
 the rest=0A=0AI don't think Lucene makes this easy, today, out of the box.=
  The=0Ascoring process for a boolean query doesn't track which sub-clause =
had=0Amatched.=0A=0AThough, it does track the number of clauses that matche=
d (coord).  EG=0Ayou'd be able to tell that a given hit had both clauses ma=
tch, vs only=0A1 (just not which one).  But coord is not current exposed - =
you'd have=0Ato modify BooleanScorer/2 to make that available per hit.=0A=
=0AAlternatively, you could make a simple custom query that delegates all=
=0Ascoring to another query, but tracks whether it matched a given=0Adocume=
nt.  Then, you'd make your own custom Collector that, on seeing=0Aa competi=
tive hit, also records which clause of the query had matched.=0A=0AMike=0A=
=0AOn Mon, Feb 15, 2010 at 12:19 AM, micmit <mitiaguin@gmail.com> wrote:=0A=
>=0A> I run a query, say, NAME:"John Smith"^1.5 OR NAME:(Jo* Smith).=0A>=0A=
> Once I get the result set, is there an efficient way to identify those hi=
ts=0A> that match: a) "John Smith" b) Jo* Smith  ---?=0A>=0A> or perhaps to=
 change the original query somehow ?=0A> --=0A> View this message in contex=
t: http://old.nabble.com/Further-refinement-of-search-results---distinguish=
ing-hits-with-exact-phrase-match-from-the-rest-tp27589728p27589728.html=0A>=
 Sent from the Lucene - Java Users mailing list archive at Nabble.com.=0A>=
=0A>=0A> ------------------------------------------------------------------=
---=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A>=
 For additional commands, e-mail: java-user-help@lucene.apache.org=0A>=0A>=
=0A=0A---------------------------------------------------------------------=
=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor ad=
ditional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 15 21:28:35 2010
Return-Path: <java-user-return-45006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34119 invoked from network); 15 Feb 2010 21:28:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Feb 2010 21:28:35 -0000
Received: (qmail 56642 invoked by uid 500); 15 Feb 2010 21:28:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56559 invoked by uid 500); 15 Feb 2010 21:28:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56549 invoked by uid 99); 15 Feb 2010 21:28:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 21:28:32 +0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 21:28:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nh8U8-00039w-Dp
	for java-user@lucene.apache.org; Mon, 15 Feb 2010 13:28:04 -0800
Message-ID: <27600274.post@talk.nabble.com>
Date: Mon, 15 Feb 2010 13:28:04 -0800 (PST)
From: maxSchlein <m_schlein@hotmail.com>
To: java-user@lucene.apache.org
Subject: Controlling what is indexed /  normalizing our index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m_schlein@hotmail.com


We have a list of keywords with aliases (Example:  keyword = "ms access"
aliases = "microsoft access", "msaccess", "m.s. access"  )

We would like to intercept the aliases prior to them being indexed, and have
the keyword indexed instead.  We can do this with a CustomFilter for single
word aliases.  (Example: in filter token = "access", we change value to
"msaccess").  Our problem is when the token equals microsoft, we need to
find out if the next token is access or not, that is, does it match one of
our aliases.

Has anyone had an issue like?  Any and all help is appreciated.  Thanx.
-- 
View this message in context: http://old.nabble.com/Controlling-what-is-indexed----normalizing-our-index-tp27600274p27600274.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 15 21:39:24 2010
Return-Path: <java-user-return-45007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40710 invoked from network); 15 Feb 2010 21:39:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Feb 2010 21:39:24 -0000
Received: (qmail 72946 invoked by uid 500); 15 Feb 2010 21:39:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72890 invoked by uid 500); 15 Feb 2010 21:39:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72880 invoked by uid 99); 15 Feb 2010 21:39:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Feb 2010 21:39:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.13] (HELO web52903.mail.re2.yahoo.com) (206.190.49.13)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Feb 2010 21:39:12 +0000
Received: (qmail 97082 invoked by uid 60001); 15 Feb 2010 21:38:51 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1266269930; bh=AbQcn68JDMQMwxOazQo795LTc4sM9G0toJCtaMVMmtk=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=FyZArxrDRUW+cr9FNGp3Kv8dLfSyrjkL931645RmdcuCgXgxTmQib8D6FG6IpSreO/wkKc6/puzMFHanjyWQaEjUiwMBQFFO4QGnxNSAqERwFGf5WQYfdM9vGIfKwQziwO7zuaj4vhFHCpR1ik9djSUvyRc+ukATDtYIjLq91fM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=UBzu7dfP0rLn7MiJx7VO87iTj62zUqNRkvQ6OOlx30ZWzZHkEpQQm56u2OiQ/bmfXFlRAQn5zmZhBPcO3VUlWhIC3qTsd/2f8UXCu0cULxo0m8KOliRS6MLurmDd88FTaGZklSOdChU8O4+uXWE4lwVd7Og1145n9CpIXarDSEw=;
Message-ID: <960140.95601.qm@web52903.mail.re2.yahoo.com>
X-YMail-OSG: 2cVYnKcVM1l7rbdbE_ya_lfIogg4EkGz9LOrvVrkdxYO3HIAuAXThFXcrDgdIWQsll8f1j.YJj_V60S_Tuo7rNRs8ZCpZfLvduJRv3Dk9qPJWgqBTqrHY0HKoadCgqgErXJ8Vd8OftONENQ_Z7PrtpaNeJ7HM6Li4yFgl..19q.tn8.2NhX4I5k7AeEPw9UkmPMGQlgjytjK0zFZud29YNxJj3GWDc28X1EMTAryvf4HKAtYfrUhe4QyfJf.72i7KjSynJQ6bM8fcvWU3bi4qkroP_FjUsN5XtJTBBG26.cRXb09OrY5p9AWM1b.VEioFoIPw_z9VRH_.6wgz0OBnz.jKYIP6ZJ0owffu.5XOsnxFBesiZHdQA9MLHyY_keYFaaj
Received: from [78.168.189.43] by web52903.mail.re2.yahoo.com via HTTP; Mon, 15 Feb 2010 13:38:50 PST
X-Mailer: YahooMailClassic/9.1.10 YahooMailWebService/0.8.100.260964
Date: Mon, 15 Feb 2010 13:38:50 -0800 (PST)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Controlling what is indexed /  normalizing our index
To: java-user@lucene.apache.org
In-Reply-To: <27600274.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0A> We have a list of keywords with aliases (Example:=A0=0A> keyword =3D "=
ms access"=0A> aliases =3D "microsoft access", "msaccess", "m.s.=0A> access=
"=A0 )=0A> =0A> We would like to intercept the aliases prior to them being=
=0A> indexed, and have=0A> the keyword indexed instead.=A0 We can do this w=
ith a=0A> CustomFilter for single=0A> word aliases.=A0 (Example: in filter =
token =3D "access",=0A> we change value to=0A> "msaccess").=A0 Our problem =
is when the token equals=0A> microsoft, we need to=0A> find out if the next=
 token is access or not, that is, does=0A> it match one of=0A> our aliases.=
=0A> =0A> Has anyone had an issue like?=A0 Any and all help is=0A> apprecia=
ted.=A0 Thanx.=0A=0AVery similar discussion has been made short time ago:=
=0A=0Ahttp://www.lucidimagination.com/search/document/6a2725ae6de611b3/read=
_more_tokens_during_analysis#ded44745457549ed=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 01:57:57 2010
Return-Path: <java-user-return-45008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58130 invoked from network); 16 Feb 2010 01:57:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 01:57:57 -0000
Received: (qmail 72946 invoked by uid 500); 16 Feb 2010 01:57:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72891 invoked by uid 500); 16 Feb 2010 01:57:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72881 invoked by uid 99); 16 Feb 2010 01:57:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 01:57:55 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 01:57:46 +0000
Received: by pwi7 with SMTP id 7so585130pwi.35
        for <java-user@lucene.apache.org>; Mon, 15 Feb 2010 17:57:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=arDmnHDsQX+Y1yd8nH0i6MgRxAmD93wmIjgmnM0Apx4=;
        b=PFnz2VZfzTczpMmcxj8inyhxc/8iSWar73Wt1+ZJbXCYYgjMo/r1v4tQDyGK/dSMTz
         1K/t49IIhwivCobzlFDK8+CNuXtKgnuPv1CJmPevjzr9AAPyYOks9b9RBlYKqw0/JC0p
         a9VAg6PNPk0tI2Ej1xdzlP6czXEl/PIbYRCrM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=o+d2qX5WCjbhd2Zd47Ucduu2nFPIuw/EM4JKNO2iTwvpFa6clrw9REdnk+GlMms4NR
         zse6jjcVN/2BuLRf7+lxtbTJ7i362l8IoDqS0PmTHuRgFSgnFftnxRKFDM0ffK/jLeun
         +HjEi6+gL4L2E6RIVZPNMQbc7FW/VQt7M1q8g=
MIME-Version: 1.0
Received: by 10.143.21.5 with SMTP id y5mr483476wfi.324.1266285446040; Mon, 15 
	Feb 2010 17:57:26 -0800 (PST)
In-Reply-To: <27598602.post@talk.nabble.com>
References: <856ac15f1002121720i4202bd2aw8863fe85a91bb02@mail.gmail.com>
	 <27598602.post@talk.nabble.com>
Date: Mon, 15 Feb 2010 20:57:25 -0500
Message-ID: <e994873a1002151757n7eced78bh548e2833b798d981@mail.gmail.com>
Subject: Re: Can you use reduced sized test indexes to predict performance 
	gains for a larger index?
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502c5cd320e65047fae0e11

--00504502c5cd320e65047fae0e11
Content-Type: text/plain; charset=ISO-8859-1

Same experience here as Tom. Disk I/O becomes bottleneck with large indexes
(or multiple shards per server) with less memory. Frequent updates to
indexes can make the I/O bottleneck worse.

Peter

On Mon, Feb 15, 2010 at 2:17 PM, Tom Burton-West <tburtonwest@gmail.com>wrote:

>
> Hi Chris,
>
> In our experience with large indexes (about 200-300GB) , we found most of
> our bottlenecks involved disk I/O.  We found that if our experimental
> indexes were too small, that much  of the index could fit in cache, and so
> our test results  were not applicable to our larger indexes.  On the other
> hand, once we started building our test indexes so they were significantly
> larger than the amount of memory available for OS disk caching, we could
> see
> results that extrapolated out to the large index.
>
> Tom Burton-West
> www.hathitrust.org
>
>
> ryguasu wrote:
> >
> > I'd like to try some experiments to see if I can improve search
> > performance by changing analysis (e.g. adding/removing word bigrams or
> > commongrams), or by changing how I map my source records into Lucene
> > documents. The problem is that my index currently is about 1TB in size
> > and takes about 2-3 weeks to build, so if I have to rebuild the entire
> > index in order to test each potential improvement, then I'm going to
> > be waiting around a lot.
> >
> > One option is to test potential performance improvements by building
> > indexes not for the full dataset, but rather for, say, a 1% sample of
> > the full dataset. (That is, I'll just index 1% of the source records.)
> > I would build one small control index, and then n small test indexes,
> > one for each intervention I wish to try. The hope would be that, if an
> > indexing intervention significantly improves performance for the small
> > indexes, then it would also significantly improve performance of the
> > full dataset. (Similarly, you'd hope that if an intervention *didn't*
> > significantly improve performance on the small indexes, then it would
> > *not* significantly improve performance of the full dataset.) This
> > would allow me to quickly accept and reject interventions (as least
> > provisionally), and only try applying the most obviously promising
> > ones to the full dataset.
> >
> > Any thoughts on how naive this is? Does it sound more like a way to
> > save time, or like a way to waste time misleading myself?
> >
> > Cheers,
> > Chris
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://old.nabble.com/Can-you-use-reduced-sized-test-indexes-to-predict-performance-gains--for-a-larger-index--tp27571524p27598602.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00504502c5cd320e65047fae0e11--

From java-user-return-45009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 09:11:38 2010
Return-Path: <java-user-return-45009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6100 invoked from network); 16 Feb 2010 09:11:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 09:11:38 -0000
Received: (qmail 40338 invoked by uid 500); 16 Feb 2010 09:11:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40246 invoked by uid 500); 16 Feb 2010 09:11:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39872 invoked by uid 99); 16 Feb 2010 09:11:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 09:11:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 09:11:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NhJSU-0005s6-0B
	for java-user@lucene.apache.org; Tue, 16 Feb 2010 01:11:06 -0800
Message-ID: <27605395.post@talk.nabble.com>
Date: Tue, 16 Feb 2010 01:11:06 -0800 (PST)
From: stefcl <stefatwork@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Strange Fuzzyquery results scoring when using a low minimal
 distance
In-Reply-To: <559052.37168.qm@web24703.mail.ird.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: stefatwork@gmail.com
References: <27594371.post@talk.nabble.com> <559052.37168.qm@web24703.mail.ird.yahoo.com>


Thanksa lot,
But I still don't understand why raising a little bit the min similarity
change the ordering...



markharw00d wrote:
>=20
> This could be down to IDF ie "Lucane" is ranked higher because it is rare=
r
> despite having worse edit distance.
> This is arguably a bug.
> See http://issues.apache.org/jira/browse/LUCENE-329 which discusses this.
> You could try subclass QueryParser and override newFuzzyQuery to return
> FuzzyLikeThisQuery (found in "contrib/queries")
>=20
> Cheers
> Mark
>=20
>=20
>=20
> ----- Original Message ----
> From: stefcl <stefatwork@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Mon, 15 February, 2010 14:13:52
> Subject: Strange Fuzzyquery results scoring when using a low minimal
> distance
>=20
>=20
> Hello,
>=20
> I'm using Lucene v3.=20
> Please consider the following spellings=20
>=20
> Lucene
> Luc=C3=A9ne
> luc=C3=A9ne
> Lucane
> Lucen
>=20
> When searching for "luc=C3=A9ne" among those words using a FuzzyQuery (wi=
th 0.5
> edit distance), results show :
>=20
> 1. Lucene 1.0259752
> 2. Lucane 1.0259752
> 3. Luc=C3=A9ne 0.95660806
> 4. luc=C3=A9ne 0.95660806
> 5. Lucen 0.30779266
>=20
> #4 is an exact match, why does it receive a lower score than "Lucane"
> which
> contains one incorrect letter?
>=20
> Also, if you raise min similarity a bit higher (0.6 of above), everything
> becomes normal :
>=20
> 1. Luc=C3=A9ne 1.0438477
> 2. luc=C3=A9ne 1.0438477
> 3. Lucene 0.97959816
> 4. Lucane 0.97959816
>=20
>=20
> Any idea?
> Thanks in advance...
>=20
>=20
> The code I use :
>=20
>    /**
>      * @param args the command line arguments
>      */
>     public static void main(String[] args) throws IOException,
> ParseException
>     {
>=20
>         StandardAnalyzer analyzer =3D new
> StandardAnalyzer(Version.LUCENE_CURRENT);
>=20
>         // TODO code application logic here
>         Directory index =3D new RAMDirectory();
>         IndexWriter w =3D new IndexWriter(index, analyzer, true,
> IndexWriter.MaxFieldLength.UNLIMITED);
>=20
>         addDoc(w, "Lucene");
>         addDoc(w, "Luc=C3=A9ne");
>         addDoc(w, "luc=C3=A9ne");
>         addDoc(w, "Lucane");
>         addDoc(w, "Lucen");
>=20
>         w.close();
>=20
>         FuzzyQuery q =3D  new FuzzyQuery( new Term("title", "luc=C3=A9ne"=
) , 0.5f
> );
>        =20
>         // 3. search
>         IndexSearcher searcher =3D new IndexSearcher(index);
>        =20
>         TopDocs collector =3D searcher.search(q, 10);
>         ScoreDoc[] hits =3D collector.scoreDocs;
>=20
>         // 4. display results
>         System.out.println("Found " + hits.length + " hits.");
>         for(int i =3D 0 ; i < hits.length; i++)
>         {
>               Document d =3D searcher.doc(hits[i].doc);
>               System.out.println((i + 1) + ". " + d.get("title") + " " +=
=20
> hits[i].score );
>         }
>=20
>         // searcher can only be closed when there
>         // is no need to access the documents any more.
>         searcher.close();
>     }
>=20
>=20
>     private static void addDoc(IndexWriter w, String value) throws
> IOException
>     {
>         Document doc =3D new Document();
>         doc.add(new Field("title", value, Field.Store.YES,
> Field.Index.ANALYZED));
>         w.addDocument(doc);
>     }
> --=20
> View this message in context:
> http://old.nabble.com/Strange-Fuzzyquery-results-scoring-when-using-a-low=
-minimal-distance-tp27594371p27594371.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/Strange-Fuzzyquery-resu=
lts-scoring-when-using-a-low-minimal-distance-tp27594371p27605395.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 09:50:20 2010
Return-Path: <java-user-return-45010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23696 invoked from network); 16 Feb 2010 09:50:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 09:50:20 -0000
Received: (qmail 84177 invoked by uid 500); 16 Feb 2010 09:50:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84094 invoked by uid 500); 16 Feb 2010 09:50:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84084 invoked by uid 99); 16 Feb 2010 09:50:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 09:50:17 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 09:50:06 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 72E0B45FFD1
	for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 10:49:46 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id n0FkPqslo6-z for <java-user@lucene.apache.org>;
	Tue, 16 Feb 2010 10:49:38 +0100 (CET)
Received: from VEGA (unknown [134.102.249.84])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id D3DEE45FFC9
	for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 10:49:37 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <27594371.post@talk.nabble.com> <559052.37168.qm@web24703.mail.ird.yahoo.com> <27605395.post@talk.nabble.com>
In-Reply-To: <27605395.post@talk.nabble.com>
Subject: RE: Strange Fuzzyquery results scoring when using a low minimal distance
Date: Tue, 16 Feb 2010 10:49:42 +0100
Message-ID: <004a01caaeed$5d7b14f0$18713ed0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-index: Acqu6A5bOiPxJmclRAihjRcdtuLtdwAA+EVw
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

The problem ist he following:
The docFreq of the term "luc=C3=A9ne" is 2, all other terms have 1 =
(because StandardAnalyzer lowercases everything). What happens is, that =
terms with lower docFreq get a higher score in TermQuery. This score =
overweighs the boosting done by FuzzyQuery (because you index is so =
small).

If you raise the minSimilarity a little bit, your query matches less =
terms and the rewritten BooleanQuery contains less clauses. At some =
point the score overweigh of the less frequent terms is no longer =
relevant for the final score.=20

By the way, you can always look at the explain() results which informs =
you about the scoring done.

The fix is (applies only to trunk, see issue =
https://issues.apache.org/jira/browse/LUCENE-124) to ignore scoring of =
the TermQueries generated by Fuzzy and only look at the edit distance =
(implemented by another MTQ.RewriteMode), that can be set with =
FuzzyQuery.setRewriteMode().

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: stefcl [mailto:stefatwork@gmail.com]
> Sent: Tuesday, February 16, 2010 10:11 AM
> To: java-user@lucene.apache.org
> Subject: Re: Strange Fuzzyquery results scoring when using a low
> minimal distance
>=20
>=20
> Thanksa lot,
> But I still don't understand why raising a little bit the min
> similarity
> change the ordering...
>=20
>=20
>=20
> markharw00d wrote:
> >
> > This could be down to IDF ie "Lucane" is ranked higher because it is
> rarer
> > despite having worse edit distance.
> > This is arguably a bug.
> > See http://issues.apache.org/jira/browse/LUCENE-329 which discusses
> this.
> > You could try subclass QueryParser and override newFuzzyQuery to
> return
> > FuzzyLikeThisQuery (found in "contrib/queries")
> >
> > Cheers
> > Mark
> >
> >
> >
> > ----- Original Message ----
> > From: stefcl <stefatwork@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Mon, 15 February, 2010 14:13:52
> > Subject: Strange Fuzzyquery results scoring when using a low minimal
> > distance
> >
> >
> > Hello,
> >
> > I'm using Lucene v3.
> > Please consider the following spellings
> >
> > Lucene
> > Luc=C3=A9ne
> > luc=C3=A9ne
> > Lucane
> > Lucen
> >
> > When searching for "luc=C3=A9ne" among those words using a =
FuzzyQuery
> (with 0.5
> > edit distance), results show :
> >
> > 1. Lucene 1.0259752
> > 2. Lucane 1.0259752
> > 3. Luc=C3=A9ne 0.95660806
> > 4. luc=C3=A9ne 0.95660806
> > 5. Lucen 0.30779266
> >
> > #4 is an exact match, why does it receive a lower score than =
"Lucane"
> > which
> > contains one incorrect letter?
> >
> > Also, if you raise min similarity a bit higher (0.6 of above),
> everything
> > becomes normal :
> >
> > 1. Luc=C3=A9ne 1.0438477
> > 2. luc=C3=A9ne 1.0438477
> > 3. Lucene 0.97959816
> > 4. Lucane 0.97959816
> >
> >
> > Any idea?
> > Thanks in advance...
> >
> >
> > The code I use :
> >
> >    /**
> >      * @param args the command line arguments
> >      */
> >     public static void main(String[] args) throws IOException,
> > ParseException
> >     {
> >
> >         StandardAnalyzer analyzer =3D new
> > StandardAnalyzer(Version.LUCENE_CURRENT);
> >
> >         // TODO code application logic here
> >         Directory index =3D new RAMDirectory();
> >         IndexWriter w =3D new IndexWriter(index, analyzer, true,
> > IndexWriter.MaxFieldLength.UNLIMITED);
> >
> >         addDoc(w, "Lucene");
> >         addDoc(w, "Luc=C3=A9ne");
> >         addDoc(w, "luc=C3=A9ne");
> >         addDoc(w, "Lucane");
> >         addDoc(w, "Lucen");
> >
> >         w.close();
> >
> >         FuzzyQuery q =3D  new FuzzyQuery( new Term("title", =
"luc=C3=A9ne") ,
> 0.5f
> > );
> >
> >         // 3. search
> >         IndexSearcher searcher =3D new IndexSearcher(index);
> >
> >         TopDocs collector =3D searcher.search(q, 10);
> >         ScoreDoc[] hits =3D collector.scoreDocs;
> >
> >         // 4. display results
> >         System.out.println("Found " + hits.length + " hits.");
> >         for(int i =3D 0 ; i < hits.length; i++)
> >         {
> >               Document d =3D searcher.doc(hits[i].doc);
> >               System.out.println((i + 1) + ". " + d.get("title") + "
> " +
> > hits[i].score );
> >         }
> >
> >         // searcher can only be closed when there
> >         // is no need to access the documents any more.
> >         searcher.close();
> >     }
> >
> >
> >     private static void addDoc(IndexWriter w, String value) throws
> > IOException
> >     {
> >         Document doc =3D new Document();
> >         doc.add(new Field("title", value, Field.Store.YES,
> > Field.Index.ANALYZED));
> >         w.addDocument(doc);
> >     }
> > --
> > View this message in context:
> > http://old.nabble.com/Strange-Fuzzyquery-results-scoring-when-using-
> a-low-minimal-distance-tp27594371p27594371.html
> > Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>=20
> --
> View this message in context: =
http://old.nabble.com/Strange-Fuzzyquery-
> results-scoring-when-using-a-low-minimal-distance-
> tp27594371p27605395.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 10:48:03 2010
Return-Path: <java-user-return-45011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52409 invoked from network); 16 Feb 2010 10:48:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 10:48:03 -0000
Received: (qmail 36728 invoked by uid 500); 16 Feb 2010 10:48:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36670 invoked by uid 500); 16 Feb 2010 10:48:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36660 invoked by uid 99); 16 Feb 2010 10:48:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 10:48:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmuguruza@gmail.com designates 209.85.220.228 as permitted sender)
Received: from [209.85.220.228] (HELO mail-fx0-f228.google.com) (209.85.220.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 10:47:54 +0000
Received: by fxm28 with SMTP id 28so1507645fxm.11
        for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 02:47:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=rvNJrE0WVO3kuJa8k9ztFbR7JXYjgXW1Thk+xQJ9Jtk=;
        b=ZAtd3VPr4Ps6gTqq4x8DXc+7XVj0FQjZ68WecqMoflBV3pQqWjc6qKgzP5qHcMAj/n
         TWiSxMvYyCR+6WoK2743Xpvr5HdQsfVrNNQlFuknj9HsyovoZWlGih/0zge/3RQiPkzN
         T5n0T+MfmJ0PPTKPyc1BscwuFTEDvvyTutJ6M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=KKNric251GmV3gwClc4tSqSIiIXekMF4fI84NoWBe+NcmkWvcfo2iWLE3aTFQfPpLr
         5lkh581Y2bGZkHGF30Tmcxgork1h8+9aulhhmNTBhJtljNUROeknW114EWJEz3bEnYJI
         U3cG8FF89Wjk638X7OBSdY8Z+nY3n2XFsPgm4=
MIME-Version: 1.0
Received: by 10.223.77.85 with SMTP id f21mr7573752fak.40.1266317252949; Tue, 
	16 Feb 2010 02:47:32 -0800 (PST)
Date: Tue, 16 Feb 2010 11:47:32 +0100
Message-ID: <f071061b1002160247n60b12fbdk5917f43ac478b6fa@mail.gmail.com>
Subject: questions on upgrading to 3.0: Version.LUCENE_* and 
	Field.setOmitNorms()
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

previously I was using 2.9 (upgraded from 2.4 but did not fix warnings
etc). Now I have upgraded to 3.0, so I had to fix all deprecated
methods etc. My question is with=A0Version type parameter in some
Token* classes.

Some of our customers have our product with lucene 2.4 (some upgraded
from 2.3), and some have a newer version with lucene 2.9 (with
warnings etc). What Version value should I use now? The smallest say
Version.LUCENE_23 ? Any concern when they upgrade to the next of our
version with lucene 3.0?

Also I was using Field.Index.TOKENIZED and Field.Index.UN_TOKENIZED,
but all fields had field.setOmitNorms(true);
Now I see there is Field.Index.NOT_ANALYZED_NO_NORMS, I guess I can
just use Field.Index.ANALYZED/Field.Index.NOT_ANALYZED and continue
calling field.setOmitNorms(true) on all fields right?

many thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 14:08:25 2010
Return-Path: <java-user-return-45012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44760 invoked from network); 16 Feb 2010 14:08:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 14:08:25 -0000
Received: (qmail 60563 invoked by uid 500); 16 Feb 2010 14:08:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60499 invoked by uid 500); 16 Feb 2010 14:08:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60489 invoked by uid 99); 16 Feb 2010 14:08:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 14:08:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 14:08:15 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AvsEAFM1eksKhJ0L/2dsb2JhbACbGnS9U4RbBA
X-IronPort-AV: E=Sophos;i="4.49,484,1262563200"; 
   d="scan'208";a="10272325"
Received: from unknown (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx2.nuigalway.ie with ESMTP; 16 Feb 2010 14:07:53 +0000
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 16 Feb 2010 14:07:52 +0000
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 16 Feb 2010 14:07:51 +0000
Message-ID: <4B7AA6AC.60703@deri.org>
Date: Tue, 16 Feb 2010 14:07:40 +0000
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.9pre) Gecko/20100216 Lightning/1.0pre Shredder/3.0.2pre
MIME-Version: 1.0
To: java-user <java-user@lucene.apache.org>
Subject: Flex & Segment Merging
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 16 Feb 2010 14:07:51.0844 (UTC) FILETIME=[6D69DE40:01CAAF11]

Hi,

I would like to start creating a codec with my own set of index files 
(instead of using the ones from the Standard codec). I have multiple 
questions (I haven't yet found answers by myself) like:
how to specify how these files should be merged ? Is it automatically 
done by the Codec interface ? How is it working currently ?
Is there some restrictions on how segments can be merged ?
Is there a way to extend easily the mechanism on how segments are merged ?

Cheers,
-- 
Renaud Delbru



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 14:47:08 2010
Return-Path: <java-user-return-45013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62922 invoked from network); 16 Feb 2010 14:47:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 14:47:08 -0000
Received: (qmail 28619 invoked by uid 500); 16 Feb 2010 14:47:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28546 invoked by uid 500); 16 Feb 2010 14:47:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28534 invoked by uid 99); 16 Feb 2010 14:47:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 14:47:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.136.167.2] (HELO web113302.mail.gq1.yahoo.com) (98.136.167.2)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 16 Feb 2010 14:46:56 +0000
Received: (qmail 52652 invoked by uid 60001); 16 Feb 2010 14:46:35 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1266331594; bh=lbtI/vuTQroJnGF3Cq0aGYzb1tPspyWq3ndmRDs648I=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=4vz5Lm6ciQusNSS6yduC2QscvLDxkuvMjcOii4bRyH5Ru/2SCv8K0+2KRuhkC+by85xEqQ0FqHsxPjhx5A4PoSMMySIDN7q6wg9M6zqQvr2i0YkY53IG1ZfHHs4btakxmwNQ7hWuBWZqqD1Dpn/uyuC3Z4xz9ovVPLfB0OozamU=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=v6cYtI2Yv6FGOqzHLWRg1yVTvn2cwtm4QMkmRqdpNo8NTHbY84vPOaUZjVe6JL4PfYar/sza8hfdgnBaSmEjYJz2lg7U3cwRfar9euATbJHOmAFK9V3+rCYEPsPZExwvG3LPFRnFegjtahSGliJT0Gqzf31oMwxbHHiKtnbdf+E=;
Message-ID: <997976.50040.qm@web113302.mail.gq1.yahoo.com>
X-YMail-OSG: q1VAVQQVM1mlukoIW_PnHhAN1fSJtxpK3qLa72HYzV9Y6RwST7dAmd9j74k53.Js2A1CdboZoy2ooE7FxhMqRWVcIJ5MfB9wkWmihYniHGrAy5UIkDtz2qyzQn7i19t6TF_5gaWiqsEU6AQplHJD_GbLpz8AaREEJKpEeoMPjIn2.4lJF8kVjVAobdDs0FGfKbkwicLSLQrxvcFlElS_QBAWtelJNlS5k5o7PQFl49q5jvdEhmiFk7nPX_8ns_5x.t7fUa_c9NY2A55zK2mzN0WI5RpVIQTrEDtMqTqL0XWoCe6TQJpD72qCwqzYtphI2jWy1VEXf7MXwMDCHYoAqaZ8OfYs3P6laqjTpFAfye1AsW7p.oPSTRJlnQ--
Received: from [140.244.128.12] by web113302.mail.gq1.yahoo.com via HTTP; Tue, 16 Feb 2010 06:46:34 PST
X-Mailer: YahooMailClassic/9.2.12 YahooMailWebService/0.8.100.260964
Date: Tue, 16 Feb 2010 06:46:34 -0800 (PST)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: BM25 Scoring Patch
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

I applied the Lucene patch mentioned in https://issues.apache.org/jira/browse/LUCENE-2091 and ran the MAP numbers on TREC-3 collection using topics 151-200.  I am not getting worse results comparing to Lucene DefaultSimilarity.  I suspect, I am not using it correctly.  I have single field documents.  This is the process I use:

1. During the indexing, I am setting the similarity to BM25 as such:

IndexWriter writer = new IndexWriter(dir, new StandardAnalyzer(
                Version.LUCENE_CURRENT), true,
                IndexWriter.MaxFieldLength.UNLIMITED);
writer.setSimilarity(new BM25Similarity());

2. During the Precision/Recall measurements, I am using a SimpleBM25QQParser extension I added to the benchmark:

QualityQueryParser qqParser = new SimpleBM25QQParser("title", "TEXT");


3. Here is the parser code (I set an avg doc length here):

public Query parse(QualityQuery qq) throws ParseException {
    BM25Parameters.setAverageLength(indexField, 798.30f);//avg doc length
    BM25Parameters.setB(0.5f);//tried default values
    BM25Parameters.setK1(2f);
    return query = new BM25BooleanQuery(qq.getValue(qqName), indexField, new StandardAnalyzer(Version.LUCENE_CURRENT));
}

4. The searcher is using BM25 similarity:

Searcher searcher = new IndexSearcher(dir, true);
searcher.setSimilarity(sim);

Am I missing some steps?  Does anyone have experience with this code?

Thanks,

Ivan


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 16:19:01 2010
Return-Path: <java-user-return-45014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10819 invoked from network); 16 Feb 2010 16:19:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 16:19:01 -0000
Received: (qmail 53596 invoked by uid 500); 16 Feb 2010 16:18:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53564 invoked by uid 500); 16 Feb 2010 16:18:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53554 invoked by uid 99); 16 Feb 2010 16:18:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 16:18:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 16:18:50 +0000
Received: by pwi7 with SMTP id 7so736663pwi.35
        for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 08:18:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=3BxFsfy4TMGmob/KyTaY4KfODvcQrladtyZpyzUCAHs=;
        b=mEgPU0RGukgPfr1bBwJDsB90jCwCmuSZKBHJioyYtt916P+j4e47Ii5wNNgyUh8Pqr
         S534isVTyR/ijRw4BBTIrQoSZGxcFaT33vsubJM+xYS5DK6X42ZyBbaAj0SKy93dtbUq
         UNOJn9F31FdXWXsMkSvuynrXAzP1VYlVBKDcM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=uOlUorLvCq2SYy4rqmx121lxzS1agCcCRHvC6ZusgCojPaIO8mqj+85nvB55CXNtBu
         sbCV6Ul6k8kMwLfzgzl6/nuTRwE6kZawN8frdevZLeXgsk4f/ztQ3lYQkvT2ZlFGpLaC
         gXjnQcuVZdSgFC+tnhKidsmhD14Jxjkw8GHII=
MIME-Version: 1.0
Received: by 10.114.248.25 with SMTP id v25mr4516368wah.74.1266337109104; Tue, 
	16 Feb 2010 08:18:29 -0800 (PST)
In-Reply-To: <997976.50040.qm@web113302.mail.gq1.yahoo.com>
References: <997976.50040.qm@web113302.mail.gq1.yahoo.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 16 Feb 2010 11:18:09 -0500
Message-ID: <8f0ad1f31002160818s137a9eacmdd276fd2e650fd36@mail.gmail.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64ddac88dd825047fba153a
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64ddac88dd825047fba153a
Content-Type: text/plain; charset=UTF-8

Hi Ivan, I've seen many cases where BM25 performs worse than Lucene's
default Similarity. Perhaps this is just another one?

Again while I have not worked with this particular collection, I looked at
the statistics and noted that its composed of several 'sub-collections': for
example the PAT documents on disk 3 have an average doc length of 3543, but
the AP documents on disk 1 have an avg doc length of 353.

I have found on other collections that any advantages of BM25's document
length normalization fall apart when 'average document length' doesn't make
a whole lot of sense (cases like this).

For this same reason, I've only found a few collections where BM25's doc
length normalization is really significantly better than Lucene's.

In my opinion, the results on a particular test collection or 2 have perhaps
been taken too far and created a myth that BM25 is always superior to
Lucene's scoring... this is not true!

On Tue, Feb 16, 2010 at 9:46 AM, Ivan Provalov <iprovalo@yahoo.com> wrote:

> I applied the Lucene patch mentioned in
> https://issues.apache.org/jira/browse/LUCENE-2091 and ran the MAP numbers
> on TREC-3 collection using topics 151-200.  I am not getting worse results
> comparing to Lucene DefaultSimilarity.  I suspect, I am not using it
> correctly.  I have single field documents.  This is the process I use:
>
> 1. During the indexing, I am setting the similarity to BM25 as such:
>
> IndexWriter writer = new IndexWriter(dir, new StandardAnalyzer(
>                Version.LUCENE_CURRENT), true,
>                IndexWriter.MaxFieldLength.UNLIMITED);
> writer.setSimilarity(new BM25Similarity());
>
> 2. During the Precision/Recall measurements, I am using a
> SimpleBM25QQParser extension I added to the benchmark:
>
> QualityQueryParser qqParser = new SimpleBM25QQParser("title", "TEXT");
>
>
> 3. Here is the parser code (I set an avg doc length here):
>
> public Query parse(QualityQuery qq) throws ParseException {
>    BM25Parameters.setAverageLength(indexField, 798.30f);//avg doc length
>    BM25Parameters.setB(0.5f);//tried default values
>    BM25Parameters.setK1(2f);
>    return query = new BM25BooleanQuery(qq.getValue(qqName), indexField, new
> StandardAnalyzer(Version.LUCENE_CURRENT));
> }
>
> 4. The searcher is using BM25 similarity:
>
> Searcher searcher = new IndexSearcher(dir, true);
> searcher.setSimilarity(sim);
>
> Am I missing some steps?  Does anyone have experience with this code?
>
> Thanks,
>
> Ivan
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--0016e64ddac88dd825047fba153a--

From java-user-return-45015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 16:26:45 2010
Return-Path: <java-user-return-45015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14216 invoked from network); 16 Feb 2010 16:26:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 16:26:45 -0000
Received: (qmail 69420 invoked by uid 500); 16 Feb 2010 16:26:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69343 invoked by uid 500); 16 Feb 2010 16:26:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69333 invoked by uid 99); 16 Feb 2010 16:26:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 16:26:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of joaquin.perez@lsi.uned.es designates 62.204.192.107 as permitted sender)
Received: from [62.204.192.107] (HELO hermes-siete.uned.es) (62.204.192.107)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 16:26:31 +0000
Received: from hermes-siete.uned.es (localhost.localdomain [127.0.0.1])
	by localhost.uned.es (Postfix) with ESMTP id E22ED1E3864
	for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 17:26:09 +0100 (CET)
Received: from [62.204.207.17] (bubastis.lsi.uned.es [62.204.207.17])
	by hermes-siete.uned.es (Postfix) with ESMTP id 96C4F1E3863
	for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 17:26:09 +0100 (CET)
Message-ID: <4B7AC64E.1000505@lsi.uned.es>
Date: Tue, 16 Feb 2010 17:22:38 +0100
From: Joaquin Perez Iglesias <joaquin.perez@lsi.uned.es>
Reply-To: joaquin.perez@lsi.uned.es
Organization: LSI UNED
User-Agent: Thunderbird 2.0.0.23 (X11/20090817)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: BM25 Scoring Patch
References: <997976.50040.qm@web113302.mail.gq1.yahoo.com> <8f0ad1f31002160818s137a9eacmdd276fd2e650fd36@mail.gmail.com>
In-Reply-To: <8f0ad1f31002160818s137a9eacmdd276fd2e650fd36@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ivan,

You shouldn't set the BM25Similarity for indexing or searching.
Please try removing the lines:
    writer.setSimilarity(new BM25Similarity());
    searcher.setSimilarity(sim);

Please let us/me know if you improve your results with these changes.


Robert Muir escribi:
> Hi Ivan, I've seen many cases where BM25 performs worse than Lucene's
> default Similarity. Perhaps this is just another one?
> 
> Again while I have not worked with this particular collection, I looked at
> the statistics and noted that its composed of several 'sub-collections': for
> example the PAT documents on disk 3 have an average doc length of 3543, but
> the AP documents on disk 1 have an avg doc length of 353.
> 
> I have found on other collections that any advantages of BM25's document
> length normalization fall apart when 'average document length' doesn't make
> a whole lot of sense (cases like this).
> 
> For this same reason, I've only found a few collections where BM25's doc
> length normalization is really significantly better than Lucene's.
> 
> In my opinion, the results on a particular test collection or 2 have perhaps
> been taken too far and created a myth that BM25 is always superior to
> Lucene's scoring... this is not true!
> 
> On Tue, Feb 16, 2010 at 9:46 AM, Ivan Provalov <iprovalo@yahoo.com> wrote:
> 
>> I applied the Lucene patch mentioned in
>> https://issues.apache.org/jira/browse/LUCENE-2091 and ran the MAP numbers
>> on TREC-3 collection using topics 151-200.  I am not getting worse results
>> comparing to Lucene DefaultSimilarity.  I suspect, I am not using it
>> correctly.  I have single field documents.  This is the process I use:
>>
>> 1. During the indexing, I am setting the similarity to BM25 as such:
>>
>> IndexWriter writer = new IndexWriter(dir, new StandardAnalyzer(
>>                Version.LUCENE_CURRENT), true,
>>                IndexWriter.MaxFieldLength.UNLIMITED);
>> writer.setSimilarity(new BM25Similarity());
>>
>> 2. During the Precision/Recall measurements, I am using a
>> SimpleBM25QQParser extension I added to the benchmark:
>>
>> QualityQueryParser qqParser = new SimpleBM25QQParser("title", "TEXT");
>>
>>
>> 3. Here is the parser code (I set an avg doc length here):
>>
>> public Query parse(QualityQuery qq) throws ParseException {
>>    BM25Parameters.setAverageLength(indexField, 798.30f);//avg doc length
>>    BM25Parameters.setB(0.5f);//tried default values
>>    BM25Parameters.setK1(2f);
>>    return query = new BM25BooleanQuery(qq.getValue(qqName), indexField, new
>> StandardAnalyzer(Version.LUCENE_CURRENT));
>> }
>>
>> 4. The searcher is using BM25 similarity:
>>
>> Searcher searcher = new IndexSearcher(dir, true);
>> searcher.setSimilarity(sim);
>>
>> Am I missing some steps?  Does anyone have experience with this code?
>>
>> Thanks,
>>
>> Ivan
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
-----------------------------------------------------------
Joaqun Prez Iglesias
Dpto. Lenguajes y Sistemas Informticos
E.T.S.I. Informtica (UNED)
Ciudad Universitaria
C/ Juan del Rosal n 16
28040 Madrid - Spain
Phone. +34 91 398 89 19
Fax    +34 91 398 65 35
Office  2.11
Email: joaquin.perez@lsi.uned.es
web:   http://nlp.uned.es/~jperezi/
-----------------------------------------------------------

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 16:37:38 2010
Return-Path: <java-user-return-45016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19027 invoked from network); 16 Feb 2010 16:37:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 16:37:38 -0000
Received: (qmail 90827 invoked by uid 500); 16 Feb 2010 16:37:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90759 invoked by uid 500); 16 Feb 2010 16:37:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90749 invoked by uid 99); 16 Feb 2010 16:37:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 16:37:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 16:37:26 +0000
Received: by pwi7 with SMTP id 7so741265pwi.35
        for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 08:37:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=2x29udnMA9Wm0UXlw1+82jNInGn5EZnZCki9hPCovM8=;
        b=fMi3vUve5t9ZzMtB4GqX133Sx91Sk5ygrowG5J/1Nj+UvAb2mQRYWzbl/HJeoFXDRy
         VPqSARyPgKMSwUp8jHVWvdeEc9zg2XMeFuPAo3TKIzzBJtmgXGsEWQtFzCE72MfqV0um
         QIoTu4S85hpsHrxcnlIdpzOHlW+ieay7z8/pM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Wgb5FFyJ0KJwiaBRXu3rG+kJmiMeO8u0H+WwKPt8kH6WqOytEKL5HIBYwyNgDdzK/5
         VyP/KVb0hQKysookERfrI02sLx+xfwbSLtC78kzJNFr947bOyhNPBopxiVDp2VPbu4Xl
         +p6Bs9TBno3VbiPrBfYu4cxpdQNuveRlbthVs=
MIME-Version: 1.0
Received: by 10.114.49.7 with SMTP id w7mr4564565waw.34.1266338226123; Tue, 16 
	Feb 2010 08:37:06 -0800 (PST)
In-Reply-To: <4B7AC64E.1000505@lsi.uned.es>
References: <997976.50040.qm@web113302.mail.gq1.yahoo.com> 
	<8f0ad1f31002160818s137a9eacmdd276fd2e650fd36@mail.gmail.com> 
	<4B7AC64E.1000505@lsi.uned.es>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 16 Feb 2010 11:36:46 -0500
Message-ID: <8f0ad1f31002160836k76c0cabboa5a27b03e9b35845@mail.gmail.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502e2d82234e0047fba5899

--00504502e2d82234e0047fba5899
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

yes Ivan, if possible please report back any findings you can on the
experiments you are doing!

On Tue, Feb 16, 2010 at 11:22 AM, Joaquin Perez Iglesias <
joaquin.perez@lsi.uned.es> wrote:

> Hi Ivan,
>
> You shouldn't set the BM25Similarity for indexing or searching.
> Please try removing the lines:
>   writer.setSimilarity(new BM25Similarity());
>   searcher.setSimilarity(sim);
>
> Please let us/me know if you improve your results with these changes.
>
>
> Robert Muir escribi=C3=B3:
>
>  Hi Ivan, I've seen many cases where BM25 performs worse than Lucene's
>> default Similarity. Perhaps this is just another one?
>>
>> Again while I have not worked with this particular collection, I looked =
at
>> the statistics and noted that its composed of several 'sub-collections':
>> for
>> example the PAT documents on disk 3 have an average doc length of 3543,
>> but
>> the AP documents on disk 1 have an avg doc length of 353.
>>
>> I have found on other collections that any advantages of BM25's document
>> length normalization fall apart when 'average document length' doesn't
>> make
>> a whole lot of sense (cases like this).
>>
>> For this same reason, I've only found a few collections where BM25's doc
>> length normalization is really significantly better than Lucene's.
>>
>> In my opinion, the results on a particular test collection or 2 have
>> perhaps
>> been taken too far and created a myth that BM25 is always superior to
>> Lucene's scoring... this is not true!
>>
>> On Tue, Feb 16, 2010 at 9:46 AM, Ivan Provalov <iprovalo@yahoo.com>
>> wrote:
>>
>>  I applied the Lucene patch mentioned in
>>> https://issues.apache.org/jira/browse/LUCENE-2091 and ran the MAP
>>> numbers
>>> on TREC-3 collection using topics 151-200.  I am not getting worse
>>> results
>>> comparing to Lucene DefaultSimilarity.  I suspect, I am not using it
>>> correctly.  I have single field documents.  This is the process I use:
>>>
>>> 1. During the indexing, I am setting the similarity to BM25 as such:
>>>
>>> IndexWriter writer =3D new IndexWriter(dir, new StandardAnalyzer(
>>>               Version.LUCENE_CURRENT), true,
>>>               IndexWriter.MaxFieldLength.UNLIMITED);
>>> writer.setSimilarity(new BM25Similarity());
>>>
>>> 2. During the Precision/Recall measurements, I am using a
>>> SimpleBM25QQParser extension I added to the benchmark:
>>>
>>> QualityQueryParser qqParser =3D new SimpleBM25QQParser("title", "TEXT")=
;
>>>
>>>
>>> 3. Here is the parser code (I set an avg doc length here):
>>>
>>> public Query parse(QualityQuery qq) throws ParseException {
>>>   BM25Parameters.setAverageLength(indexField, 798.30f);//avg doc length
>>>   BM25Parameters.setB(0.5f);//tried default values
>>>   BM25Parameters.setK1(2f);
>>>   return query =3D new BM25BooleanQuery(qq.getValue(qqName), indexField=
,
>>> new
>>> StandardAnalyzer(Version.LUCENE_CURRENT));
>>> }
>>>
>>> 4. The searcher is using BM25 similarity:
>>>
>>> Searcher searcher =3D new IndexSearcher(dir, true);
>>> searcher.setSimilarity(sim);
>>>
>>> Am I missing some steps?  Does anyone have experience with this code?
>>>
>>> Thanks,
>>>
>>> Ivan
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
> --
> -----------------------------------------------------------
> Joaqu=C3=ADn P=C3=A9rez Iglesias
> Dpto. Lenguajes y Sistemas Inform=C3=A1ticos
> E.T.S.I. Inform=C3=A1tica (UNED)
> Ciudad Universitaria
> C/ Juan del Rosal n=C2=BA 16
> 28040 Madrid - Spain
> Phone. +34 91 398 89 19
> Fax    +34 91 398 65 35
> Office  2.11
> Email: joaquin.perez@lsi.uned.es
> web:   http://nlp.uned.es/~jperezi/ <http://nlp.uned.es/%7Ejperezi/>
> -----------------------------------------------------------
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Robert Muir
rcmuir@gmail.com

--00504502e2d82234e0047fba5899--

From java-user-return-45017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 16:41:10 2010
Return-Path: <java-user-return-45017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20507 invoked from network); 16 Feb 2010 16:41:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 16:41:10 -0000
Received: (qmail 646 invoked by uid 500); 16 Feb 2010 16:41:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 558 invoked by uid 500); 16 Feb 2010 16:41:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 548 invoked by uid 99); 16 Feb 2010 16:41:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 16:41:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 16:40:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NhQTX-0003ea-Fh
	for java-user@lucene.apache.org; Tue, 16 Feb 2010 08:40:39 -0800
Message-ID: <27611202.post@talk.nabble.com>
Date: Tue, 16 Feb 2010 08:40:39 -0800 (PST)
From: luciusvorenus <lucius.vorenus@hotmail.de>
To: java-user@lucene.apache.org
Subject: lucene webinterface
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lucius.vorenus@hotmail.de


Hello
how can I build a  webinterface for my aplication ?  I read something with
HTML table and php but i had no idea?
 Can anobody help me?

Than u

Lucius 
-- 
View this message in context: http://old.nabble.com/lucene-webinterface-tp27611202p27611202.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 17:16:02 2010
Return-Path: <java-user-return-45018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38143 invoked from network); 16 Feb 2010 17:16:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 17:16:01 -0000
Received: (qmail 94882 invoked by uid 500); 16 Feb 2010 17:15:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94823 invoked by uid 500); 16 Feb 2010 17:15:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94813 invoked by uid 99); 16 Feb 2010 17:15:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 17:15:59 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.167.2] (HELO web113302.mail.gq1.yahoo.com) (98.136.167.2)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 16 Feb 2010 17:15:49 +0000
Received: (qmail 26590 invoked by uid 60001); 16 Feb 2010 17:15:28 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1266340528; bh=KY0Xa4ViwwoxAj6CxG6rzzBZzjB9aIVFhnSywaz1avg=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=vO9RebfWt6nMfPCnIH39geB8UrKJmAM5FC/K8i4WLddyWq0q4wFJ8Xz2Jpyl9Wp/ZaZXYcq8C7iTJs/FZGA6DY1c/JB2Jlw6ybuBx5yQaD7vOSzbp+oQ6TUJD7Cc41CG7D1Z7+1oYcwoJ++KgQCP3jx51UV3eI0l/c34Zc1iHUw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=WSPWo8uZw7HqXRD00x6LRmR2ZXvu0ZZ4zPEvJgXi/yV43WbEO+gacAek6bG4v5NGadsaNzcxmbK/dRQRJu4465xjKkqjeGMYT8BY8gmRDuMRKnMMEUPZVpc2z6AHPqjRgZM2Rv6g9jiTKGHEuKLier+2kmagKwDGMaYe21t9X+s=;
Message-ID: <245804.25778.qm@web113302.mail.gq1.yahoo.com>
X-YMail-OSG: TXvwXiQVM1klJayHsc61fbv.dC.iV.S2BA8la0sWYEA.gmivNSgAG19_x4DzDRXeQFVd7.1jVQWdGk3_tBxcQgnCcGflmhyXIrKALzrw2scNCnNSlNnLcA5hStH4VMCuRVSGjdKEABurIemloA5uBhGilECvMr9h33FsNKUfpVMRT7Svojv7XmC2NHrG.C0qCk03eETNnj0uo6HN3RvxA8UaxFcDu.afLlfJpMk4a8OB3tnnqICWS4cHi4jk3UywlQ56ya91gijAkn_cI.jDbSC2BGtLGqoklPO6nHQndjS5tYpPV8ZQzPORhyLzK2uLOB4xjsHtOdonbTYRmjZIDiy2dOWm._IkIYCkIVa1Su.x7Cp3.lDL
Received: from [140.244.128.12] by web113302.mail.gq1.yahoo.com via HTTP; Tue, 16 Feb 2010 09:15:28 PST
X-Mailer: YahooMailClassic/9.2.12 YahooMailWebService/0.8.100.260964
Date: Tue, 16 Feb 2010 09:15:28 -0800 (PST)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
In-Reply-To: <8f0ad1f31002160836k76c0cabboa5a27b03e9b35845@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Joaquin, Robert,=0A=0AI followed Joaquin's recommendation and removed the c=
all to set similarity to BM25 explicitly (indexer, searcher).  The results =
showed 55% improvement for the MAP score (0.141->0.219) over default simila=
rity.  =0A=0AJoaquin, how would setting the similarity to BM25 explicitly m=
ake the score worse?=0A=0AThank you,=0A=0AIvan=0A=0A=0A=0A--- On Tue, 2/16/=
10, Robert Muir <rcmuir@gmail.com> wrote:=0A=0A> From: Robert Muir <rcmuir@=
gmail.com>=0A> Subject: Re: BM25 Scoring Patch=0A> To: java-user@lucene.apa=
che.org=0A> Date: Tuesday, February 16, 2010, 11:36 AM=0A> yes Ivan, if pos=
sible please report=0A> back any findings you can on the=0A> experiments yo=
u are doing!=0A> =0A> On Tue, Feb 16, 2010 at 11:22 AM, Joaquin Perez Igles=
ias=0A> <=0A> joaquin.perez@lsi.uned.es>=0A> wrote:=0A> =0A> > Hi Ivan,=0A>=
 >=0A> > You shouldn't set the BM25Similarity for indexing or=0A> searching=
.=0A> > Please try removing the lines:=0A> >=A0=A0=A0writer.setSimilarity(n=
ew=0A> BM25Similarity());=0A> >=A0=A0=A0searcher.setSimilarity(sim);=0A> >=
=0A> > Please let us/me know if you improve your results with=0A> these cha=
nges.=0A> >=0A> >=0A> > Robert Muir escribi=F3:=0A> >=0A> >=A0 Hi Ivan, I'v=
e seen many cases where BM25=0A> performs worse than Lucene's=0A> >> defaul=
t Similarity. Perhaps this is just another=0A> one?=0A> >>=0A> >> Again whi=
le I have not worked with this particular=0A> collection, I looked at=0A> >=
> the statistics and noted that its composed of=0A> several 'sub-collection=
s':=0A> >> for=0A> >> example the PAT documents on disk 3 have an=0A> avera=
ge doc length of 3543,=0A> >> but=0A> >> the AP documents on disk 1 have an=
 avg doc length=0A> of 353.=0A> >>=0A> >> I have found on other collections=
 that any=0A> advantages of BM25's document=0A> >> length normalization fal=
l apart when 'average=0A> document length' doesn't=0A> >> make=0A> >> a who=
le lot of sense (cases like this).=0A> >>=0A> >> For this same reason, I've=
 only found a few=0A> collections where BM25's doc=0A> >> length normalizat=
ion is really significantly=0A> better than Lucene's.=0A> >>=0A> >> In my o=
pinion, the results on a particular test=0A> collection or 2 have=0A> >> pe=
rhaps=0A> >> been taken too far and created a myth that BM25 is=0A> always =
superior to=0A> >> Lucene's scoring... this is not true!=0A> >>=0A> >> On T=
ue, Feb 16, 2010 at 9:46 AM, Ivan Provalov=0A> <iprovalo@yahoo.com>=0A> >> =
wrote:=0A> >>=0A> >>=A0 I applied the Lucene patch mentioned in=0A> >>> htt=
ps://issues.apache.org/jira/browse/LUCENE-2091 and=0A> ran the MAP=0A> >>> =
numbers=0A> >>> on TREC-3 collection using topics=0A> 151-200.=A0 I am not =
getting worse=0A> >>> results=0A> >>> comparing to Lucene DefaultSimilarity=
.=A0 I=0A> suspect, I am not using it=0A> >>> correctly.=A0 I have single f=
ield=0A> documents.=A0 This is the process I use:=0A> >>>=0A> >>> 1. During=
 the indexing, I am setting the=0A> similarity to BM25 as such:=0A> >>>=0A>=
 >>> IndexWriter writer =3D new IndexWriter(dir, new=0A> StandardAnalyzer(=
=0A> >>>=A0 =A0 =A0 =A0 =A0 =A0=0A> =A0=A0=A0Version.LUCENE_CURRENT), true,=
=0A> >>>=A0 =A0 =A0 =A0 =A0 =A0=0A> =A0=A0=A0IndexWriter.MaxFieldLength.UNL=
IMITED);=0A> >>> writer.setSimilarity(new BM25Similarity());=0A> >>>=0A> >>=
> 2. During the Precision/Recall measurements, I=0A> am using a=0A> >>> Sim=
pleBM25QQParser extension I added to the=0A> benchmark:=0A> >>>=0A> >>> Qua=
lityQueryParser qqParser =3D new=0A> SimpleBM25QQParser("title", "TEXT");=
=0A> >>>=0A> >>>=0A> >>> 3. Here is the parser code (I set an avg doc=0A> l=
ength here):=0A> >>>=0A> >>> public Query parse(QualityQuery qq) throws=0A>=
 ParseException {=0A> >>>=A0=A0=A0BM25Parameters.setAverageLength(indexFiel=
d,=0A> 798.30f);//avg doc length=0A> >>>=A0=A0=A0BM25Parameters.setB(0.5f);=
//tried=0A> default values=0A> >>>=A0=A0=A0BM25Parameters.setK1(2f);=0A> >>=
>=A0=A0=A0return query =3D new=0A> BM25BooleanQuery(qq.getValue(qqName), in=
dexField,=0A> >>> new=0A> >>> StandardAnalyzer(Version.LUCENE_CURRENT));=0A=
> >>> }=0A> >>>=0A> >>> 4. The searcher is using BM25 similarity:=0A> >>>=
=0A> >>> Searcher searcher =3D new IndexSearcher(dir,=0A> true);=0A> >>> se=
archer.setSimilarity(sim);=0A> >>>=0A> >>> Am I missing some steps?=A0 Does=
 anyone=0A> have experience with this code?=0A> >>>=0A> >>> Thanks,=0A> >>>=
=0A> >>> Ivan=0A> >>>=0A> >>>=0A> >>>=0A> >>>=0A> >>>=0A> -----------------=
----------------------------------------------------=0A> >>> To unsubscribe=
, e-mail: java-user-unsubscribe@lucene.apache.org=0A> >>> For additional co=
mmands, e-mail: java-user-help@lucene.apache.org=0A> >>>=0A> >>>=0A> >>>=0A=
> >>=0A> >>=0A> > --=0A> >=0A> --------------------------------------------=
---------------=0A> > Joaqu=EDn P=E9rez Iglesias=0A> > Dpto. Lenguajes y Si=
stemas Inform=E1ticos=0A> > E.T.S.I. Inform=E1tica (UNED)=0A> > Ciudad Univ=
ersitaria=0A> > C/ Juan del Rosal n=BA 16=0A> > 28040 Madrid - Spain=0A> > =
Phone. +34 91 398 89 19=0A> > Fax=A0 =A0 +34 91 398 65 35=0A> > Office=A0 2=
.11=0A> > Email: joaquin.perez@lsi.uned.es=0A> > web:=A0=A0=A0http://nlp.un=
ed.es/~jperezi/ <http://nlp.uned.es/%7Ejperezi/>=0A> >=0A> ----------------=
-------------------------------------------=0A> >=0A> >=0A> >=0A> ---------=
------------------------------------------------------------=0A> > To unsub=
scribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> > For additiona=
l commands, e-mail: java-user-help@lucene.apache.org=0A> >=0A> >=0A> =0A> =
=0A> -- =0A> Robert Muir=0A> rcmuir@gmail.com=0A> =0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 17:23:49 2010
Return-Path: <java-user-return-45019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43593 invoked from network); 16 Feb 2010 17:23:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 17:23:49 -0000
Received: (qmail 8369 invoked by uid 500); 16 Feb 2010 17:23:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8301 invoked by uid 500); 16 Feb 2010 17:23:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8287 invoked by uid 99); 16 Feb 2010 17:23:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 17:23:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 17:23:37 +0000
Received: by pwi7 with SMTP id 7so752370pwi.35
        for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 09:23:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=tOQB6nRlVSUfF/+0c7IftbJGa0OG6XEX6g6b1IZjnjQ=;
        b=irHJsJPa+4ODT/fu0erUbT9GpukY6b8eQNgkeolb3PHkCN5xgaOBMesogCYMz/C5M5
         97Hjl0qTum2Q7rvR9TvIuUlEzn+3Eo7vWWnvN9G5eJ+A0/zuIFUkM5SuhRgQJLrWkGf4
         rf3liIKi2uTJNcglaMrss7xHYA0NFEjqUM2IM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=t2Cqmn8NKVCWIgfTKQ3dT3lkToOIBecjPXpT+JOmAH/exX7e1yANevltwCOPsbl0b/
         /rVBKv0NWVYkr0KskzHQXGpUl7KBl6VM7KvbLMLU6zBWSYBA08XsDDpZG0ksNdik8eNR
         Lop3s6Dv2Of60/HQyFaThNR1cIDpSZVCar5Uw=
MIME-Version: 1.0
Received: by 10.114.214.2 with SMTP id m2mr4544677wag.62.1266340996491; Tue, 
	16 Feb 2010 09:23:16 -0800 (PST)
In-Reply-To: <245804.25778.qm@web113302.mail.gq1.yahoo.com>
References: <8f0ad1f31002160836k76c0cabboa5a27b03e9b35845@mail.gmail.com> 
	<245804.25778.qm@web113302.mail.gq1.yahoo.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 16 Feb 2010 12:22:56 -0500
Message-ID: <8f0ad1f31002160922i4b5e3dfeqfd3130cafa28abe7@mail.gmail.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64b0c1242ac20047fbafdb4

--0016e64b0c1242ac20047fbafdb4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

cool! i saw you were using StandardAnalyzer too, maybe you want to try usin=
g
stemming also (as this analyzer does not do stemming)... usually helps.

On Tue, Feb 16, 2010 at 12:15 PM, Ivan Provalov <iprovalo@yahoo.com> wrote:

> Joaquin, Robert,
>
> I followed Joaquin's recommendation and removed the call to set similarit=
y
> to BM25 explicitly (indexer, searcher).  The results showed 55% improveme=
nt
> for the MAP score (0.141->0.219) over default similarity.
>
> Joaquin, how would setting the similarity to BM25 explicitly make the sco=
re
> worse?
>
> Thank you,
>
> Ivan
>
>
>
> --- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com> wrote:
>
> > From: Robert Muir <rcmuir@gmail.com>
> > Subject: Re: BM25 Scoring Patch
> > To: java-user@lucene.apache.org
> > Date: Tuesday, February 16, 2010, 11:36 AM
> > yes Ivan, if possible please report
> > back any findings you can on the
> > experiments you are doing!
> >
> > On Tue, Feb 16, 2010 at 11:22 AM, Joaquin Perez Iglesias
> > <
> > joaquin.perez@lsi.uned.es>
> > wrote:
> >
> > > Hi Ivan,
> > >
> > > You shouldn't set the BM25Similarity for indexing or
> > searching.
> > > Please try removing the lines:
> > >   writer.setSimilarity(new
> > BM25Similarity());
> > >   searcher.setSimilarity(sim);
> > >
> > > Please let us/me know if you improve your results with
> > these changes.
> > >
> > >
> > > Robert Muir escribi=C3=B3:
> > >
> > >  Hi Ivan, I've seen many cases where BM25
> > performs worse than Lucene's
> > >> default Similarity. Perhaps this is just another
> > one?
> > >>
> > >> Again while I have not worked with this particular
> > collection, I looked at
> > >> the statistics and noted that its composed of
> > several 'sub-collections':
> > >> for
> > >> example the PAT documents on disk 3 have an
> > average doc length of 3543,
> > >> but
> > >> the AP documents on disk 1 have an avg doc length
> > of 353.
> > >>
> > >> I have found on other collections that any
> > advantages of BM25's document
> > >> length normalization fall apart when 'average
> > document length' doesn't
> > >> make
> > >> a whole lot of sense (cases like this).
> > >>
> > >> For this same reason, I've only found a few
> > collections where BM25's doc
> > >> length normalization is really significantly
> > better than Lucene's.
> > >>
> > >> In my opinion, the results on a particular test
> > collection or 2 have
> > >> perhaps
> > >> been taken too far and created a myth that BM25 is
> > always superior to
> > >> Lucene's scoring... this is not true!
> > >>
> > >> On Tue, Feb 16, 2010 at 9:46 AM, Ivan Provalov
> > <iprovalo@yahoo.com>
> > >> wrote:
> > >>
> > >>  I applied the Lucene patch mentioned in
> > >>> https://issues.apache.org/jira/browse/LUCENE-2091 and
> > ran the MAP
> > >>> numbers
> > >>> on TREC-3 collection using topics
> > 151-200.  I am not getting worse
> > >>> results
> > >>> comparing to Lucene DefaultSimilarity.  I
> > suspect, I am not using it
> > >>> correctly.  I have single field
> > documents.  This is the process I use:
> > >>>
> > >>> 1. During the indexing, I am setting the
> > similarity to BM25 as such:
> > >>>
> > >>> IndexWriter writer =3D new IndexWriter(dir, new
> > StandardAnalyzer(
> > >>>
> >    Version.LUCENE_CURRENT), true,
> > >>>
> >    IndexWriter.MaxFieldLength.UNLIMITED);
> > >>> writer.setSimilarity(new BM25Similarity());
> > >>>
> > >>> 2. During the Precision/Recall measurements, I
> > am using a
> > >>> SimpleBM25QQParser extension I added to the
> > benchmark:
> > >>>
> > >>> QualityQueryParser qqParser =3D new
> > SimpleBM25QQParser("title", "TEXT");
> > >>>
> > >>>
> > >>> 3. Here is the parser code (I set an avg doc
> > length here):
> > >>>
> > >>> public Query parse(QualityQuery qq) throws
> > ParseException {
> > >>>   BM25Parameters.setAverageLength(indexField,
> > 798.30f);//avg doc length
> > >>>   BM25Parameters.setB(0.5f);//tried
> > default values
> > >>>   BM25Parameters.setK1(2f);
> > >>>   return query =3D new
> > BM25BooleanQuery(qq.getValue(qqName), indexField,
> > >>> new
> > >>> StandardAnalyzer(Version.LUCENE_CURRENT));
> > >>> }
> > >>>
> > >>> 4. The searcher is using BM25 similarity:
> > >>>
> > >>> Searcher searcher =3D new IndexSearcher(dir,
> > true);
> > >>> searcher.setSimilarity(sim);
> > >>>
> > >>> Am I missing some steps?  Does anyone
> > have experience with this code?
> > >>>
> > >>> Thanks,
> > >>>
> > >>> Ivan
> > >>>
> > >>>
> > >>>
> > >>>
> > >>>
> > ---------------------------------------------------------------------
> > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>>
> > >>>
> > >>>
> > >>
> > >>
> > > --
> > >
> > -----------------------------------------------------------
> > > Joaqu=C3=ADn P=C3=A9rez Iglesias
> > > Dpto. Lenguajes y Sistemas Inform=C3=A1ticos
> > > E.T.S.I. Inform=C3=A1tica (UNED)
> > > Ciudad Universitaria
> > > C/ Juan del Rosal n=C2=BA 16
> > > 28040 Madrid - Spain
> > > Phone. +34 91 398 89 19
> > > Fax    +34 91 398 65 35
> > > Office  2.11
> > > Email: joaquin.perez@lsi.uned.es
> > > web:   http://nlp.uned.es/~jperezi/ <http://nlp.uned.es/%7Ejperezi/> =
<
> http://nlp.uned.es/%7Ejperezi/>
> > >
> > -----------------------------------------------------------
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Robert Muir
rcmuir@gmail.com

--0016e64b0c1242ac20047fbafdb4--

From java-user-return-45020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 17:58:39 2010
Return-Path: <java-user-return-45020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63887 invoked from network); 16 Feb 2010 17:58:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 17:58:39 -0000
Received: (qmail 66516 invoked by uid 500); 16 Feb 2010 17:58:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66459 invoked by uid 500); 16 Feb 2010 17:58:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66445 invoked by uid 99); 16 Feb 2010 17:58:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 17:58:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of joaquin.perez@lsi.uned.es designates 62.204.192.103 as permitted sender)
Received: from [62.204.192.103] (HELO hermes-tres.uned.es) (62.204.192.103)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 17:58:24 +0000
Received: from hermes-tres.uned.es (localhost.localdomain [127.0.0.1])
	by localhost.uned.es (Postfix) with ESMTP id AEF281E33EA
	for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 18:58:03 +0100 (CET)
Received: from correo.uned.es (bm103103-8.uned.es [10.103.103.8])
	by hermes-tres.uned.es (Postfix) with ESMTP id 73E281E33CC
	for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 18:58:03 +0100 (CET)
Received: from 87.222.27.219
        by correo.uned.es with HTTP;
        Tue, 16 Feb 2010 18:58:03 +0100
Message-ID: <141ee80356de1891826922a8185f4317.squirrel@correo.uned.es>
In-Reply-To: <245804.25778.qm@web113302.mail.gq1.yahoo.com>
References: <245804.25778.qm@web113302.mail.gq1.yahoo.com>
Date: Tue, 16 Feb 2010 18:58:03 +0100
Subject: Re: BM25 Scoring Patch
From: "JOAQUIN PEREZ IGLESIAS" <joaquin.perez@lsi.uned.es>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.19
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ivan,

the problem is that unfortunately BM25
cannot be implemented overwriting
the Similarity interface. Therefore BM25Similarity
only computes the classic probabilistic IDF (what is
interesting only at search time).
If you set BM25Similarity at indexing time
some basic stats are not stored
correctly in the segments (like docs length).

When you use BM25BooleanQuery this class
will set automatically the BM25Similarity for you,
therefore you don't need to do this explicitly.

I tried to make this implementation with the focus on
not interfering on the typical use of Lucene (so no changing
DefaultSimilarity).

> Joaquin, Robert,
>
> I followed Joaquin's recommendation and removed the call to set similarity
> to BM25 explicitly (indexer, searcher).  The results showed 55%
> improvement for the MAP score (0.141->0.219) over default similarity.
>
> Joaquin, how would setting the similarity to BM25 explicitly make the
> score worse?
>
> Thank you,
>
> Ivan
>
>
>
> --- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com> wrote:
>
>> From: Robert Muir <rcmuir@gmail.com>
>> Subject: Re: BM25 Scoring Patch
>> To: java-user@lucene.apache.org
>> Date: Tuesday, February 16, 2010, 11:36 AM
>> yes Ivan, if possible please report
>> back any findings you can on the
>> experiments you are doing!
>>
>> On Tue, Feb 16, 2010 at 11:22 AM, Joaquin Perez Iglesias
>> <
>> joaquin.perez@lsi.uned.es>
>> wrote:
>>
>> > Hi Ivan,
>> >
>> > You shouldn't set the BM25Similarity for indexing or
>> searching.
>> > Please try removing the lines:
>> >   writer.setSimilarity(new
>> BM25Similarity());
>> >   searcher.setSimilarity(sim);
>> >
>> > Please let us/me know if you improve your results with
>> these changes.
>> >
>> >
>> > Robert Muir escribi:
>> >
>> >  Hi Ivan, I've seen many cases where BM25
>> performs worse than Lucene's
>> >> default Similarity. Perhaps this is just another
>> one?
>> >>
>> >> Again while I have not worked with this particular
>> collection, I looked at
>> >> the statistics and noted that its composed of
>> several 'sub-collections':
>> >> for
>> >> example the PAT documents on disk 3 have an
>> average doc length of 3543,
>> >> but
>> >> the AP documents on disk 1 have an avg doc length
>> of 353.
>> >>
>> >> I have found on other collections that any
>> advantages of BM25's document
>> >> length normalization fall apart when 'average
>> document length' doesn't
>> >> make
>> >> a whole lot of sense (cases like this).
>> >>
>> >> For this same reason, I've only found a few
>> collections where BM25's doc
>> >> length normalization is really significantly
>> better than Lucene's.
>> >>
>> >> In my opinion, the results on a particular test
>> collection or 2 have
>> >> perhaps
>> >> been taken too far and created a myth that BM25 is
>> always superior to
>> >> Lucene's scoring... this is not true!
>> >>
>> >> On Tue, Feb 16, 2010 at 9:46 AM, Ivan Provalov
>> <iprovalo@yahoo.com>
>> >> wrote:
>> >>
>> >>  I applied the Lucene patch mentioned in
>> >>> https://issues.apache.org/jira/browse/LUCENE-2091 and
>> ran the MAP
>> >>> numbers
>> >>> on TREC-3 collection using topics
>> 151-200.  I am not getting worse
>> >>> results
>> >>> comparing to Lucene DefaultSimilarity.  I
>> suspect, I am not using it
>> >>> correctly.  I have single field
>> documents.  This is the process I use:
>> >>>
>> >>> 1. During the indexing, I am setting the
>> similarity to BM25 as such:
>> >>>
>> >>> IndexWriter writer = new IndexWriter(dir, new
>> StandardAnalyzer(
>> >>>
>>    Version.LUCENE_CURRENT), true,
>> >>>
>>    IndexWriter.MaxFieldLength.UNLIMITED);
>> >>> writer.setSimilarity(new BM25Similarity());
>> >>>
>> >>> 2. During the Precision/Recall measurements, I
>> am using a
>> >>> SimpleBM25QQParser extension I added to the
>> benchmark:
>> >>>
>> >>> QualityQueryParser qqParser = new
>> SimpleBM25QQParser("title", "TEXT");
>> >>>
>> >>>
>> >>> 3. Here is the parser code (I set an avg doc
>> length here):
>> >>>
>> >>> public Query parse(QualityQuery qq) throws
>> ParseException {
>> >>>   BM25Parameters.setAverageLength(indexField,
>> 798.30f);//avg doc length
>> >>>   BM25Parameters.setB(0.5f);//tried
>> default values
>> >>>   BM25Parameters.setK1(2f);
>> >>>   return query = new
>> BM25BooleanQuery(qq.getValue(qqName), indexField,
>> >>> new
>> >>> StandardAnalyzer(Version.LUCENE_CURRENT));
>> >>> }
>> >>>
>> >>> 4. The searcher is using BM25 similarity:
>> >>>
>> >>> Searcher searcher = new IndexSearcher(dir,
>> true);
>> >>> searcher.setSimilarity(sim);
>> >>>
>> >>> Am I missing some steps?  Does anyone
>> have experience with this code?
>> >>>
>> >>> Thanks,
>> >>>
>> >>> Ivan
>> >>>
>> >>>
>> >>>
>> >>>
>> >>>
>> ---------------------------------------------------------------------
>> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>
>> >>>
>> >>>
>> >>
>> >>
>> > --
>> >
>> -----------------------------------------------------------
>> > Joaqun Prez Iglesias
>> > Dpto. Lenguajes y Sistemas Informticos
>> > E.T.S.I. Informtica (UNED)
>> > Ciudad Universitaria
>> > C/ Juan del Rosal n 16
>> > 28040 Madrid - Spain
>> > Phone. +34 91 398 89 19
>> > Fax    +34 91 398 65 35
>> > Office  2.11
>> > Email: joaquin.perez@lsi.uned.es
>> > web:   http://nlp.uned.es/~jperezi/ <http://nlp.uned.es/%7Ejperezi/>
>> >
>> -----------------------------------------------------------
>> >
>> >
>> >
>> ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 18:13:29 2010
Return-Path: <java-user-return-45021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74004 invoked from network); 16 Feb 2010 18:13:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 18:13:29 -0000
Received: (qmail 88630 invoked by uid 500); 16 Feb 2010 18:13:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88559 invoked by uid 500); 16 Feb 2010 18:13:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88549 invoked by uid 99); 16 Feb 2010 18:13:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 18:13:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gsiasf@gmail.com designates 209.85.211.193 as permitted sender)
Received: from [209.85.211.193] (HELO mail-yw0-f193.google.com) (209.85.211.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 18:13:18 +0000
Received: by ywh31 with SMTP id 31so162759ywh.20
        for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 10:12:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=orwm2UnPQ1VHPCFT+buTeCxdE4ZhvDQA7dNbFzzWdMg=;
        b=JzK7/k942/pU3s7Yy9OirXRemo4d7YHkNoErC6slCfMnxGB+9seJ6K9wElR49h3xhU
         8HwsGYm2RHlNi49Y6f5DsMRrZdajfgZUtnjmwK87Y24urM+dhr2PPF8qsSDik1288KHP
         REjsm9uO+gN1qf+n2oF0v/k0jNFIvWgpXgTEY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=ATIgrTBcFwo9kJAoppi0eGPXHx9FAsPQER5MsINdoSFoDTPFL/BLkeUrhDokk1R0i3
         46N5AYKxiit9rxDdvsl96ic7/AzedW2cvBar/xfDupdyvzYZvYhdDtFFajcYZFb4vdsx
         bzYnNtzFE1lAxzh7bSbq/dlyqN2HxCtxK3uZc=
Received: by 10.101.209.21 with SMTP id l21mr4885934anq.174.1266343977902;
        Tue, 16 Feb 2010 10:12:57 -0800 (PST)
Received: from ?10.0.0.77? (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 4sm2907920ywd.44.2010.02.16.10.12.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 16 Feb 2010 10:12:56 -0800 (PST)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: PayloadNearSpanScorer explain method
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <e994873a1002150729k7a008cd4s5b2ad92510264f8c@mail.gmail.com>
Date: Tue, 16 Feb 2010 13:12:55 -0500
Content-Transfer-Encoding: 7bit
Message-Id: <18BA7A25-1EEA-4819-89E5-0D6AF04E1A64@apache.org>
References: <e994873a1002150729k7a008cd4s5b2ad92510264f8c@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)

That sounds reasonable.  Patch?

On Feb 15, 2010, at 10:29 AM, Peter Keegan wrote:

> The 'explain' method in PayloadNearSpanScorer assumes the
> AveragePayloadFunction was used. I don't see an easy way to override this
> because 'payloadsSeen' and 'payloadScore' are private/protected. It seems
> like the 'PayloadFunction' interface should have an 'explain' method that
> the Scorer could call. Any thoughts?
> 
> Peter



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 18:15:15 2010
Return-Path: <java-user-return-45022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74959 invoked from network); 16 Feb 2010 18:15:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 18:15:15 -0000
Received: (qmail 95960 invoked by uid 500); 16 Feb 2010 18:15:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95904 invoked by uid 500); 16 Feb 2010 18:15:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95894 invoked by uid 99); 16 Feb 2010 18:15:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 18:15:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.216.187 as permitted sender)
Received: from [209.85.216.187] (HELO mail-px0-f187.google.com) (209.85.216.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 18:15:03 +0000
Received: by pxi17 with SMTP id 17so2686239pxi.11
        for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 10:14:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=fVG6P3N3zrc6cJXzpdc7Rq/W8h2rxEQk9hiw/XI/dgk=;
        b=iy/VjRi2d2ljZ3j5kSdnU689/zd53GgMufokiUXeFAsTSd+kKXtAO/dXGONuFpHRg6
         rkSE89PizshBvOAN+j1HpML1B+oYPbNsIxQz3i52Y7eyfLyv/W68EM5d6uTjPHfefqR2
         4OrmVqGGJM5z9z8oMuPacJTYKsKlkyaVkOWTs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=jBZtBIU1uY+X5pK1v1YRbw7yi5PvkKxjuspZxVNAfRtYuGipq6xzC6TU/tG09bXVSi
         IsBTclV8li5KG/DmhMYkmeVdrmk4bRDK63YMYQeVwYeZ7CgSOIMo3RUHisV67iGFhed9
         gYkdcCuRcDBxNsxFnvQCsWVeFWY+DCjBUn6Sk=
MIME-Version: 1.0
Received: by 10.114.237.35 with SMTP id k35mr4563811wah.138.1266344083060; 
	Tue, 16 Feb 2010 10:14:43 -0800 (PST)
In-Reply-To: <245804.25778.qm@web113302.mail.gq1.yahoo.com>
References: <8f0ad1f31002160836k76c0cabboa5a27b03e9b35845@mail.gmail.com> 
	<245804.25778.qm@web113302.mail.gq1.yahoo.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 16 Feb 2010 13:14:23 -0500
Message-ID: <8f0ad1f31002161014r53b9ab00pac71479d9a33682c@mail.gmail.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6434c6e3bf75c047fbbb5bf

--0016e6434c6e3bf75c047fbbb5bf
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Ivan just a little more food for thought to help you with this:

I'm glad you got improved results, yet I stand by my original statement of
'be careful' interpreting too much from one collection.

eg. had you chosen TREC-4 instead of TREC-3, you would see different
results, as vector-space with non-cosine doc length norm (LUCENE-2187)
performed better than BM25 there:
http://trec.nist.gov/pubs/trec4/overview.ps.gz

in truth its hard to 'reuse' a pooled test collection to compare methods
that were not part of the pool:
http://www.ir.uwaterloo.ca/slides/buettcher_reliable_evaluation.pdf

This might help explain why you see such a difference in MAP score!

On Tue, Feb 16, 2010 at 12:15 PM, Ivan Provalov <iprovalo@yahoo.com> wrote:

> Joaquin, Robert,
>
> I followed Joaquin's recommendation and removed the call to set similarit=
y
> to BM25 explicitly (indexer, searcher).  The results showed 55% improveme=
nt
> for the MAP score (0.141->0.219) over default similarity.
>
> Joaquin, how would setting the similarity to BM25 explicitly make the sco=
re
> worse?
>
> Thank you,
>
> Ivan
>
>
>
> --- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com> wrote:
>
> > From: Robert Muir <rcmuir@gmail.com>
> > Subject: Re: BM25 Scoring Patch
> > To: java-user@lucene.apache.org
> > Date: Tuesday, February 16, 2010, 11:36 AM
> > yes Ivan, if possible please report
> > back any findings you can on the
> > experiments you are doing!
> >
> > On Tue, Feb 16, 2010 at 11:22 AM, Joaquin Perez Iglesias
> > <
> > joaquin.perez@lsi.uned.es>
> > wrote:
> >
> > > Hi Ivan,
> > >
> > > You shouldn't set the BM25Similarity for indexing or
> > searching.
> > > Please try removing the lines:
> > >   writer.setSimilarity(new
> > BM25Similarity());
> > >   searcher.setSimilarity(sim);
> > >
> > > Please let us/me know if you improve your results with
> > these changes.
> > >
> > >
> > > Robert Muir escribi=C3=B3:
> > >
> > >  Hi Ivan, I've seen many cases where BM25
> > performs worse than Lucene's
> > >> default Similarity. Perhaps this is just another
> > one?
> > >>
> > >> Again while I have not worked with this particular
> > collection, I looked at
> > >> the statistics and noted that its composed of
> > several 'sub-collections':
> > >> for
> > >> example the PAT documents on disk 3 have an
> > average doc length of 3543,
> > >> but
> > >> the AP documents on disk 1 have an avg doc length
> > of 353.
> > >>
> > >> I have found on other collections that any
> > advantages of BM25's document
> > >> length normalization fall apart when 'average
> > document length' doesn't
> > >> make
> > >> a whole lot of sense (cases like this).
> > >>
> > >> For this same reason, I've only found a few
> > collections where BM25's doc
> > >> length normalization is really significantly
> > better than Lucene's.
> > >>
> > >> In my opinion, the results on a particular test
> > collection or 2 have
> > >> perhaps
> > >> been taken too far and created a myth that BM25 is
> > always superior to
> > >> Lucene's scoring... this is not true!
> > >>
> > >> On Tue, Feb 16, 2010 at 9:46 AM, Ivan Provalov
> > <iprovalo@yahoo.com>
> > >> wrote:
> > >>
> > >>  I applied the Lucene patch mentioned in
> > >>> https://issues.apache.org/jira/browse/LUCENE-2091 and
> > ran the MAP
> > >>> numbers
> > >>> on TREC-3 collection using topics
> > 151-200.  I am not getting worse
> > >>> results
> > >>> comparing to Lucene DefaultSimilarity.  I
> > suspect, I am not using it
> > >>> correctly.  I have single field
> > documents.  This is the process I use:
> > >>>
> > >>> 1. During the indexing, I am setting the
> > similarity to BM25 as such:
> > >>>
> > >>> IndexWriter writer =3D new IndexWriter(dir, new
> > StandardAnalyzer(
> > >>>
> >    Version.LUCENE_CURRENT), true,
> > >>>
> >    IndexWriter.MaxFieldLength.UNLIMITED);
> > >>> writer.setSimilarity(new BM25Similarity());
> > >>>
> > >>> 2. During the Precision/Recall measurements, I
> > am using a
> > >>> SimpleBM25QQParser extension I added to the
> > benchmark:
> > >>>
> > >>> QualityQueryParser qqParser =3D new
> > SimpleBM25QQParser("title", "TEXT");
> > >>>
> > >>>
> > >>> 3. Here is the parser code (I set an avg doc
> > length here):
> > >>>
> > >>> public Query parse(QualityQuery qq) throws
> > ParseException {
> > >>>   BM25Parameters.setAverageLength(indexField,
> > 798.30f);//avg doc length
> > >>>   BM25Parameters.setB(0.5f);//tried
> > default values
> > >>>   BM25Parameters.setK1(2f);
> > >>>   return query =3D new
> > BM25BooleanQuery(qq.getValue(qqName), indexField,
> > >>> new
> > >>> StandardAnalyzer(Version.LUCENE_CURRENT));
> > >>> }
> > >>>
> > >>> 4. The searcher is using BM25 similarity:
> > >>>
> > >>> Searcher searcher =3D new IndexSearcher(dir,
> > true);
> > >>> searcher.setSimilarity(sim);
> > >>>
> > >>> Am I missing some steps?  Does anyone
> > have experience with this code?
> > >>>
> > >>> Thanks,
> > >>>
> > >>> Ivan
> > >>>
> > >>>
> > >>>
> > >>>
> > >>>
> > ---------------------------------------------------------------------
> > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>>
> > >>>
> > >>>
> > >>
> > >>
> > > --
> > >
> > -----------------------------------------------------------
> > > Joaqu=C3=ADn P=C3=A9rez Iglesias
> > > Dpto. Lenguajes y Sistemas Inform=C3=A1ticos
> > > E.T.S.I. Inform=C3=A1tica (UNED)
> > > Ciudad Universitaria
> > > C/ Juan del Rosal n=C2=BA 16
> > > 28040 Madrid - Spain
> > > Phone. +34 91 398 89 19
> > > Fax    +34 91 398 65 35
> > > Office  2.11
> > > Email: joaquin.perez@lsi.uned.es
> > > web:   http://nlp.uned.es/~jperezi/ <http://nlp.uned.es/%7Ejperezi/> =
<
> http://nlp.uned.es/%7Ejperezi/>
> > >
> > -----------------------------------------------------------
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Robert Muir
rcmuir@gmail.com

--0016e6434c6e3bf75c047fbbb5bf--

From java-user-return-45023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 18:54:31 2010
Return-Path: <java-user-return-45023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 936 invoked from network); 16 Feb 2010 18:54:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 18:54:31 -0000
Received: (qmail 54487 invoked by uid 500); 16 Feb 2010 18:54:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54409 invoked by uid 500); 16 Feb 2010 18:54:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54399 invoked by uid 99); 16 Feb 2010 18:54:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 18:54:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of joaquin.perez@lsi.uned.es designates 62.204.192.103 as permitted sender)
Received: from [62.204.192.103] (HELO hermes-tres.uned.es) (62.204.192.103)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 18:54:17 +0000
Received: from hermes-tres.uned.es (localhost.localdomain [127.0.0.1])
	by localhost.uned.es (Postfix) with ESMTP id F0D041E36FC
	for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 19:53:56 +0100 (CET)
Received: from correo.uned.es (bm103103-2.uned.es [10.103.103.2])
	by hermes-tres.uned.es (Postfix) with ESMTP id B23CC1E36CB
	for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 19:53:56 +0100 (CET)
Received: from 87.222.27.219
        by correo.uned.es with HTTP;
        Tue, 16 Feb 2010 19:53:56 +0100
Message-ID: <833c7a901e04c6f6287f2a439cdb4d35.squirrel@correo.uned.es>
In-Reply-To: <141ee80356de1891826922a8185f4317.squirrel@correo.uned.es>
References: <245804.25778.qm@web113302.mail.gq1.yahoo.com>
    <141ee80356de1891826922a8185f4317.squirrel@correo.uned.es>
Date: Tue, 16 Feb 2010 19:53:56 +0100
Subject: Re: BM25 Scoring Patch
From: "JOAQUIN PEREZ IGLESIAS" <joaquin.perez@lsi.uned.es>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.19
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

By the way,

I don't want to start a flame war VSM vs BM25, but I really believe that I
have to express my opinion as Robert has done. In my experience, I have
never found a case where VSM improves significantly BM25. Maybe you can
find some cases under some very specific collection characteristics, (as
average length of 300 vs 3000) or a bad usage of BM25 (not proper
parameters) where it can happen.

BM25 is not just only a different way of length normalization, it is based
strongly in the probabilistic framework, and parametrises frequencies and
length. This is probably the most successful ranking model of the last
years in Information Retrieval.

I have never read a paper where VSM  improves any of the state-of-the-art
ranking models (Language Models, DFR, BM25,...),  although the VSM with
pivoted normalisation length can obtain nice results. This can be proved
checking the last years of the TREC competition.

Honestly to say that is a myth that BM25 improves VSM breaks the last 10
or 15 years of research on Information Retrieval, and I really believe
that is not accurate.

The good thing of Information Retrieval is that you can always make your
owns experiments and you can use the experience of a lot of years of
research.

PS: This opinion is based on experiments on TREC and CLEF collections,
obviously we can start a debate about the suitability of this type of
experimentation (concept of relevance, pooling, relevance judgements), but
this is a much more complex topic and I believe is far from what we are
dealing here.

PS2: In relation with TREC4 Cornell used a pivoted length normalisation
and they were applying pseudo-relevance feedback, what honestly makes much
more difficult the analysis of the results. Obviously their results were
part of the pool.

Sorry for the huge mail :-))))

> Hi Ivan,
>
> the problem is that unfortunately BM25
> cannot be implemented overwriting
> the Similarity interface. Therefore BM25Similarity
> only computes the classic probabilistic IDF (what is
> interesting only at search time).
> If you set BM25Similarity at indexing time
> some basic stats are not stored
> correctly in the segments (like docs length).
>
> When you use BM25BooleanQuery this class
> will set automatically the BM25Similarity for you,
> therefore you don't need to do this explicitly.
>
> I tried to make this implementation with the focus on
> not interfering on the typical use of Lucene (so no changing
> DefaultSimilarity).
>
>> Joaquin, Robert,
>>
>> I followed Joaquin's recommendation and removed the call to set
>> similarity
>> to BM25 explicitly (indexer, searcher).  The results showed 55%
>> improvement for the MAP score (0.141->0.219) over default similarity.
>>
>> Joaquin, how would setting the similarity to BM25 explicitly make the
>> score worse?
>>
>> Thank you,
>>
>> Ivan
>>
>>
>>
>> --- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com> wrote:
>>
>>> From: Robert Muir <rcmuir@gmail.com>
>>> Subject: Re: BM25 Scoring Patch
>>> To: java-user@lucene.apache.org
>>> Date: Tuesday, February 16, 2010, 11:36 AM
>>> yes Ivan, if possible please report
>>> back any findings you can on the
>>> experiments you are doing!
>>>
>>> On Tue, Feb 16, 2010 at 11:22 AM, Joaquin Perez Iglesias
>>> <
>>> joaquin.perez@lsi.uned.es>
>>> wrote:
>>>
>>> > Hi Ivan,
>>> >
>>> > You shouldn't set the BM25Similarity for indexing or
>>> searching.
>>> > Please try removing the lines:
>>> >   writer.setSimilarity(new
>>> BM25Similarity());
>>> >   searcher.setSimilarity(sim);
>>> >
>>> > Please let us/me know if you improve your results with
>>> these changes.
>>> >
>>> >
>>> > Robert Muir escribi:
>>> >
>>> >  Hi Ivan, I've seen many cases where BM25
>>> performs worse than Lucene's
>>> >> default Similarity. Perhaps this is just another
>>> one?
>>> >>
>>> >> Again while I have not worked with this particular
>>> collection, I looked at
>>> >> the statistics and noted that its composed of
>>> several 'sub-collections':
>>> >> for
>>> >> example the PAT documents on disk 3 have an
>>> average doc length of 3543,
>>> >> but
>>> >> the AP documents on disk 1 have an avg doc length
>>> of 353.
>>> >>
>>> >> I have found on other collections that any
>>> advantages of BM25's document
>>> >> length normalization fall apart when 'average
>>> document length' doesn't
>>> >> make
>>> >> a whole lot of sense (cases like this).
>>> >>
>>> >> For this same reason, I've only found a few
>>> collections where BM25's doc
>>> >> length normalization is really significantly
>>> better than Lucene's.
>>> >>
>>> >> In my opinion, the results on a particular test
>>> collection or 2 have
>>> >> perhaps
>>> >> been taken too far and created a myth that BM25 is
>>> always superior to
>>> >> Lucene's scoring... this is not true!
>>> >>
>>> >> On Tue, Feb 16, 2010 at 9:46 AM, Ivan Provalov
>>> <iprovalo@yahoo.com>
>>> >> wrote:
>>> >>
>>> >>  I applied the Lucene patch mentioned in
>>> >>> https://issues.apache.org/jira/browse/LUCENE-2091 and
>>> ran the MAP
>>> >>> numbers
>>> >>> on TREC-3 collection using topics
>>> 151-200.  I am not getting worse
>>> >>> results
>>> >>> comparing to Lucene DefaultSimilarity.  I
>>> suspect, I am not using it
>>> >>> correctly.  I have single field
>>> documents.  This is the process I use:
>>> >>>
>>> >>> 1. During the indexing, I am setting the
>>> similarity to BM25 as such:
>>> >>>
>>> >>> IndexWriter writer = new IndexWriter(dir, new
>>> StandardAnalyzer(
>>> >>>
>>>    Version.LUCENE_CURRENT), true,
>>> >>>
>>>    IndexWriter.MaxFieldLength.UNLIMITED);
>>> >>> writer.setSimilarity(new BM25Similarity());
>>> >>>
>>> >>> 2. During the Precision/Recall measurements, I
>>> am using a
>>> >>> SimpleBM25QQParser extension I added to the
>>> benchmark:
>>> >>>
>>> >>> QualityQueryParser qqParser = new
>>> SimpleBM25QQParser("title", "TEXT");
>>> >>>
>>> >>>
>>> >>> 3. Here is the parser code (I set an avg doc
>>> length here):
>>> >>>
>>> >>> public Query parse(QualityQuery qq) throws
>>> ParseException {
>>> >>>   BM25Parameters.setAverageLength(indexField,
>>> 798.30f);//avg doc length
>>> >>>   BM25Parameters.setB(0.5f);//tried
>>> default values
>>> >>>   BM25Parameters.setK1(2f);
>>> >>>   return query = new
>>> BM25BooleanQuery(qq.getValue(qqName), indexField,
>>> >>> new
>>> >>> StandardAnalyzer(Version.LUCENE_CURRENT));
>>> >>> }
>>> >>>
>>> >>> 4. The searcher is using BM25 similarity:
>>> >>>
>>> >>> Searcher searcher = new IndexSearcher(dir,
>>> true);
>>> >>> searcher.setSimilarity(sim);
>>> >>>
>>> >>> Am I missing some steps?  Does anyone
>>> have experience with this code?
>>> >>>
>>> >>> Thanks,
>>> >>>
>>> >>> Ivan
>>> >>>
>>> >>>
>>> >>>
>>> >>>
>>> >>>
>>> ---------------------------------------------------------------------
>>> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>>
>>> >>>
>>> >>>
>>> >>
>>> >>
>>> > --
>>> >
>>> -----------------------------------------------------------
>>> > Joaqun Prez Iglesias
>>> > Dpto. Lenguajes y Sistemas Informticos
>>> > E.T.S.I. Informtica (UNED)
>>> > Ciudad Universitaria
>>> > C/ Juan del Rosal n 16
>>> > 28040 Madrid - Spain
>>> > Phone. +34 91 398 89 19
>>> > Fax    +34 91 398 65 35
>>> > Office  2.11
>>> > Email: joaquin.perez@lsi.uned.es
>>> > web:   http://nlp.uned.es/~jperezi/ <http://nlp.uned.es/%7Ejperezi/>
>>> >
>>> -----------------------------------------------------------
>>> >
>>> >
>>> >
>>> ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >
>>> >
>>>
>>>
>>> --
>>> Robert Muir
>>> rcmuir@gmail.com
>>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 19:02:05 2010
Return-Path: <java-user-return-45024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4433 invoked from network); 16 Feb 2010 19:02:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 19:02:05 -0000
Received: (qmail 66163 invoked by uid 500); 16 Feb 2010 19:02:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66099 invoked by uid 500); 16 Feb 2010 19:02:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66089 invoked by uid 99); 16 Feb 2010 19:02:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 19:02:02 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.167.15] (HELO web113315.mail.gq1.yahoo.com) (98.136.167.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 16 Feb 2010 19:01:53 +0000
Received: (qmail 99831 invoked by uid 60001); 16 Feb 2010 19:01:31 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1266346891; bh=/e3Wq6UAliYCtL9sD3a6DPF11R9fFV4hPJ6xav1EXZI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=PzpPQjxm0daDDmE5NpOFXxzb/DwjqqEze0D5KrgP4YNLLuPe6aBJtI+q0vv4cwSAmfsiKVvR3ZXw4Wcns0nnixTVyfsxvNzHj8+vsBHLKYhl24nrXEG3xXyQI/M6VVXnSLd0uRnXHo/QOzY/fqrLibWuTa950ZpCrSGtkymxk1c=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=0JycrYYLNVrFKe0x+k3Tm9o7jVi0paiZl6Vp0kA/vz9l/ne63IdH9VRE73GLV3fBd1MtiD0BOT9zrtyE5oRNSwguJ03ZR7hJz9UEG162nab8orsonhzH/AETQAdeJG7lU+tlRSq+MvJcTd/MZyhveSW5FHRAS/frb260W0skUhk=;
Message-ID: <866966.86809.qm@web113315.mail.gq1.yahoo.com>
X-YMail-OSG: 4XOEGYkVM1mbTEkbNdV6Ri7wpjTkoNDN3UzBWd9C3W3TBvv_bZw2vaZ7XYKFxkNVnDfyeYnV5B.6yk0IpRn7N7seJz_SK3C5mLgzXaXbOJrpytmBgpDCxSSmDxqydQDd6lzPD86cHAsYJptvQrxbEmUfdJ2PndGfcvVvDAXmjyU9U0aaa2FlPnp9QdbqSH3EOixV5Xd42_uBylPGlSAMtSYUpqX7T_lp79iu8fAh0B3w5BF0AhF_Dn1JCpzQrKHP6UM8q8SiEYgh9aPhItQzDsQKircbooa7UX0_9Ide13OtSnCtKHA1WDLX2ImgNfLRFZG55mME.X331y_tAw0NBXJMSbZ9gjo8tDgg1UR6P2qWlpPX8tZt
Received: from [140.244.128.12] by web113315.mail.gq1.yahoo.com via HTTP; Tue, 16 Feb 2010 11:01:31 PST
X-Mailer: YahooMailClassic/9.2.12 YahooMailWebService/0.8.100.260964
Date: Tue, 16 Feb 2010 11:01:31 -0800 (PST)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
In-Reply-To: <8f0ad1f31002161014r53b9ab00pac71479d9a33682c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Robert, Joaquin,=0A=0ASorry, I made an error reporting the results.  The pr=
eliminary improvement is around 21% (it's a reduced collection).  I will ha=
ve to run another test to get the final numbers on the complete collection.=
  =0A=0AWe are planning to also apply the stemming.  Right now we are tryin=
g to isolate each improvement experiment.=0A=0AThanks,=0A=0AIvan=0A=0A=0A=
=0A--- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com> wrote:=0A=0A> From: =
Robert Muir <rcmuir@gmail.com>=0A> Subject: Re: BM25 Scoring Patch=0A> To: =
java-user@lucene.apache.org=0A> Date: Tuesday, February 16, 2010, 1:14 PM=
=0A> Ivan just a little more food for=0A> thought to help you with this:=0A=
> =0A> I'm glad you got improved results, yet I stand by my=0A> original st=
atement of=0A> 'be careful' interpreting too much from one collection.=0A> =
=0A> eg. had you chosen TREC-4 instead of TREC-3, you would see=0A> differe=
nt=0A> results, as vector-space with non-cosine doc length norm=0A> (LUCENE=
-2187)=0A> performed better than BM25 there:=0A> http://trec.nist.gov/pubs/=
trec4/overview.ps.gz=0A> =0A> in truth its hard to 'reuse' a pooled test co=
llection to=0A> compare methods=0A> that were not part of the pool:=0A> htt=
p://www.ir.uwaterloo.ca/slides/buettcher_reliable_evaluation.pdf=0A> =0A> T=
his might help explain why you see such a difference in=0A> MAP score!=0A> =
=0A> On Tue, Feb 16, 2010 at 12:15 PM, Ivan Provalov <iprovalo@yahoo.com>=
=0A> wrote:=0A> =0A> > Joaquin, Robert,=0A> >=0A> > I followed Joaquin's re=
commendation and removed the=0A> call to set similarity=0A> > to BM25 expli=
citly (indexer, searcher).=A0 The=0A> results showed 55% improvement=0A> > =
for the MAP score (0.141->0.219) over default=0A> similarity.=0A> >=0A> > J=
oaquin, how would setting the similarity to BM25=0A> explicitly make the sc=
ore=0A> > worse?=0A> >=0A> > Thank you,=0A> >=0A> > Ivan=0A> >=0A> >=0A> >=
=0A> > --- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com>=0A> wrote:=0A> >=
=0A> > > From: Robert Muir <rcmuir@gmail.com>=0A> > > Subject: Re: BM25 Sco=
ring Patch=0A> > > To: java-user@lucene.apache.org=0A> > > Date: Tuesday, F=
ebruary 16, 2010, 11:36 AM=0A> > > yes Ivan, if possible please report=0A> =
> > back any findings you can on the=0A> > > experiments you are doing!=0A>=
 > >=0A> > > On Tue, Feb 16, 2010 at 11:22 AM, Joaquin Perez=0A> Iglesias=
=0A> > > <=0A> > > joaquin.perez@lsi.uned.es>=0A> > > wrote:=0A> > >=0A> > =
> > Hi Ivan,=0A> > > >=0A> > > > You shouldn't set the BM25Similarity for=
=0A> indexing or=0A> > > searching.=0A> > > > Please try removing the lines=
:=0A> > > >=A0=A0=A0writer.setSimilarity(new=0A> > > BM25Similarity());=0A>=
 > >=0A> >=A0=A0=A0searcher.setSimilarity(sim);=0A> > > >=0A> > > > Please =
let us/me know if you improve your=0A> results with=0A> > > these changes.=
=0A> > > >=0A> > > >=0A> > > > Robert Muir escribi=F3:=0A> > > >=0A> > > >=
=A0 Hi Ivan, I've seen many cases where=0A> BM25=0A> > > performs worse tha=
n Lucene's=0A> > > >> default Similarity. Perhaps this is just=0A> another=
=0A> > > one?=0A> > > >>=0A> > > >> Again while I have not worked with this=
=0A> particular=0A> > > collection, I looked at=0A> > > >> the statistics a=
nd noted that its=0A> composed of=0A> > > several 'sub-collections':=0A> > =
> >> for=0A> > > >> example the PAT documents on disk 3 have=0A> an=0A> > >=
 average doc length of 3543,=0A> > > >> but=0A> > > >> the AP documents on =
disk 1 have an avg=0A> doc length=0A> > > of 353.=0A> > > >>=0A> > > >> I h=
ave found on other collections that=0A> any=0A> > > advantages of BM25's do=
cument=0A> > > >> length normalization fall apart when=0A> 'average=0A> > >=
 document length' doesn't=0A> > > >> make=0A> > > >> a whole lot of sense (=
cases like this).=0A> > > >>=0A> > > >> For this same reason, I've only fou=
nd a=0A> few=0A> > > collections where BM25's doc=0A> > > >> length normali=
zation is really=0A> significantly=0A> > > better than Lucene's.=0A> > > >>=
=0A> > > >> In my opinion, the results on a=0A> particular test=0A> > > col=
lection or 2 have=0A> > > >> perhaps=0A> > > >> been taken too far and crea=
ted a myth=0A> that BM25 is=0A> > > always superior to=0A> > > >> Lucene's =
scoring... this is not true!=0A> > > >>=0A> > > >> On Tue, Feb 16, 2010 at =
9:46 AM, Ivan=0A> Provalov=0A> > > <iprovalo@yahoo.com>=0A> > > >> wrote:=
=0A> > > >>=0A> > > >>=A0 I applied the Lucene patch=0A> mentioned in=0A> >=
 > >>> https://issues.apache.org/jira/browse/LUCENE-2091 and=0A> > > ran th=
e MAP=0A> > > >>> numbers=0A> > > >>> on TREC-3 collection using topics=0A>=
 > > 151-200.=A0 I am not getting worse=0A> > > >>> results=0A> > > >>> com=
paring to Lucene=0A> DefaultSimilarity.=A0 I=0A> > > suspect, I am not usin=
g it=0A> > > >>> correctly.=A0 I have single=0A> field=0A> > > documents.=
=A0 This is the process I use:=0A> > > >>>=0A> > > >>> 1. During the indexi=
ng, I am setting=0A> the=0A> > > similarity to BM25 as such:=0A> > > >>>=0A=
> > > >>> IndexWriter writer =3D new=0A> IndexWriter(dir, new=0A> > > Stand=
ardAnalyzer(=0A> > > >>>=0A> > >=A0 =A0 Version.LUCENE_CURRENT), true,=0A> =
> > >>>=0A> > >=A0 =A0=0A> IndexWriter.MaxFieldLength.UNLIMITED);=0A> > > >=
>> writer.setSimilarity(new=0A> BM25Similarity());=0A> > > >>>=0A> > > >>> =
2. During the Precision/Recall=0A> measurements, I=0A> > > am using a=0A> >=
 > >>> SimpleBM25QQParser extension I added=0A> to the=0A> > > benchmark:=
=0A> > > >>>=0A> > > >>> QualityQueryParser qqParser =3D new=0A> > > Simple=
BM25QQParser("title", "TEXT");=0A> > > >>>=0A> > > >>>=0A> > > >>> 3. Here =
is the parser code (I set an=0A> avg doc=0A> > > length here):=0A> > > >>>=
=0A> > > >>> public Query parse(QualityQuery qq)=0A> throws=0A> > > ParseEx=
ception {=0A> > >=0A> >>>=A0=A0=A0BM25Parameters.setAverageLength(indexFiel=
d,=0A> > > 798.30f);//avg doc length=0A> > >=0A> >>>=A0=A0=A0BM25Parameters=
.setB(0.5f);//tried=0A> > > default values=0A> > >=0A> >>>=A0=A0=A0BM25Para=
meters.setK1(2f);=0A> > > >>>=A0=A0=A0return query =3D new=0A> > > BM25Bool=
eanQuery(qq.getValue(qqName),=0A> indexField,=0A> > > >>> new=0A> > > >>>=
=0A> StandardAnalyzer(Version.LUCENE_CURRENT));=0A> > > >>> }=0A> > > >>>=
=0A> > > >>> 4. The searcher is using BM25=0A> similarity:=0A> > > >>>=0A> =
> > >>> Searcher searcher =3D new=0A> IndexSearcher(dir,=0A> > > true);=0A>=
 > > >>> searcher.setSimilarity(sim);=0A> > > >>>=0A> > > >>> Am I missing =
some steps?=A0 Does=0A> anyone=0A> > > have experience with this code?=0A> =
> > >>>=0A> > > >>> Thanks,=0A> > > >>>=0A> > > >>> Ivan=0A> > > >>>=0A> > =
> >>>=0A> > > >>>=0A> > > >>>=0A> > > >>>=0A> > >=0A> ---------------------=
------------------------------------------------=0A> > > >>> To unsubscribe=
, e-mail: java-user-unsubscribe@lucene.apache.org=0A> > > >>> For additiona=
l commands, e-mail: java-user-help@lucene.apache.org=0A> > > >>>=0A> > > >>=
>=0A> > > >>>=0A> > > >>=0A> > > >>=0A> > > > --=0A> > > >=0A> > >=0A> ----=
-------------------------------------------------------=0A> > > > Joaqu=EDn=
 P=E9rez Iglesias=0A> > > > Dpto. Lenguajes y Sistemas Inform=E1ticos=0A> >=
 > > E.T.S.I. Inform=E1tica (UNED)=0A> > > > Ciudad Universitaria=0A> > > >=
 C/ Juan del Rosal n=BA 16=0A> > > > 28040 Madrid - Spain=0A> > > > Phone. =
+34 91 398 89 19=0A> > > > Fax=A0 =A0 +34 91 398 65 35=0A> > > > Office=A0 =
2.11=0A> > > > Email: joaquin.perez@lsi.uned.es=0A> > > > web:=A0=A0=A0http=
://nlp.uned.es/~jperezi/ <http://nlp.uned.es/%7Ejperezi/> <=0A> > http://nl=
p.uned.es/%7Ejperezi/>=0A> > > >=0A> > >=0A> ------------------------------=
-----------------------------=0A> > > >=0A> > > >=0A> > > >=0A> > >=0A> ---=
------------------------------------------------------------------=0A> > > =
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> > > >=
 For additional commands, e-mail: java-user-help@lucene.apache.org=0A> > > =
>=0A> > > >=0A> > >=0A> > >=0A> > > --=0A> > > Robert Muir=0A> > > rcmuir@g=
mail.com=0A> > >=0A> >=0A> >=0A> >=0A> >=0A> >=0A> ------------------------=
---------------------------------------------=0A> > To unsubscribe, e-mail:=
 java-user-unsubscribe@lucene.apache.org=0A> > For additional commands, e-m=
ail: java-user-help@lucene.apache.org=0A> >=0A> >=0A> =0A> =0A> -- =0A> Rob=
ert Muir=0A> rcmuir@gmail.com=0A> =0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 19:08:01 2010
Return-Path: <java-user-return-45025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8758 invoked from network); 16 Feb 2010 19:08:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 19:08:01 -0000
Received: (qmail 74224 invoked by uid 500); 16 Feb 2010 19:07:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74166 invoked by uid 500); 16 Feb 2010 19:07:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74156 invoked by uid 99); 16 Feb 2010 19:07:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 19:07:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 19:07:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NhSld-0000fi-Ki
	for java-user@lucene.apache.org; Tue, 16 Feb 2010 11:07:29 -0800
Message-ID: <27613452.post@talk.nabble.com>
Date: Tue, 16 Feb 2010 11:07:29 -0800 (PST)
From: Raimon Bosch <raimon.bosch@gmail.com>
To: java-user@lucene.apache.org
Subject: CompareBottom in FieldComparator
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: raimon.bosch@gmail.com



Hi,

Which is the exactly objective of compareBottom and setBottom functions. I
am using a higher numHits to create TopScoreDocCollectors and
TopFieldCollectors because I don't understand properly this function.

I think that is a filter to send less documents to sort in comparators, but
I don't get a way to maximize this amount of documents without forcing
numHits. If we use a simple comparation the sorter is always sorting our
most relevant document, so maybe we need a pseudo-random function? We are
interested in sort a big amount of documents.

Thanks in advance,
Raimon Bosch.

PD: See
http://lucene.apache.org/java/2_9_1/api/all/org/apache/lucene/search/TopFieldCollector.html

-- 
View this message in context: http://old.nabble.com/CompareBottom-in-FieldComparator-tp27613452p27613452.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 19:08:11 2010
Return-Path: <java-user-return-45026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8939 invoked from network); 16 Feb 2010 19:08:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 19:08:11 -0000
Received: (qmail 77690 invoked by uid 500); 16 Feb 2010 19:08:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77637 invoked by uid 500); 16 Feb 2010 19:08:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77589 invoked by uid 99); 16 Feb 2010 19:08:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 19:08:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.222.174 as permitted sender)
Received: from [209.85.222.174] (HELO mail-pz0-f174.google.com) (209.85.222.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 19:07:55 +0000
Received: by pzk4 with SMTP id 4so431789pzk.5
        for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 11:07:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=MhMQa4FivQSKeJBYF93iI387uHMo7Nl+xrjlM96jGN0=;
        b=B17kt8LcjCq7P7i+fVplIbzLlp3DQucEDhAb7Xr4v+haLMBpwoa3LGrRW77gT2+22X
         OAmBFfUpqgGpkWuOeSIG7JqxOdM7vnXPXtWSgSH9F8VivNEviCMJ/z2XJtYy1OkkaE0D
         K0Xsa9AlE7YtooSi2GYiuVNIF+kHnmt4H4hlo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Pz95Hm3p3mlemTm+QX1t1WpGIkWXWJClbolRhG5KSeD5myvm74AeUtpuNXEzd+7XYA
         hWbFoj4ds9cUkoBpCt/HqWYj5a5xVvjh6+eX1NFunqyTb3zD+8gYEJyr6oiDrv2fv986
         QnwOQ+srNSqjNk6XmI/nO1lJJw0B7VxLYZ5gw=
MIME-Version: 1.0
Received: by 10.114.3.2 with SMTP id 2mr4633815wac.156.1266347254148; Tue, 16 
	Feb 2010 11:07:34 -0800 (PST)
In-Reply-To: <833c7a901e04c6f6287f2a439cdb4d35.squirrel@correo.uned.es>
References: <245804.25778.qm@web113302.mail.gq1.yahoo.com> 
	<141ee80356de1891826922a8185f4317.squirrel@correo.uned.es> 
	<833c7a901e04c6f6287f2a439cdb4d35.squirrel@correo.uned.es>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 16 Feb 2010 14:07:14 -0500
Message-ID: <8f0ad1f31002161107l26b503fjec173e9c0e7c5f46@mail.gmail.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502f5973eef49047fbc72b5
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502f5973eef49047fbc72b5
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

I don't think its really a competition, I think preferably we should have
the flexibility to change the scoring model in lucene actually?

I have found lots of cases where VSM improves on BM25, but then again I
don't work with TREC stuff, as I work with non-english collections.

It doesn't contradict years of research to say that VSM isn't a
state-of-the-art model, besides the TREC-4 results, there are CLEF results
where VSM models perform competitively or exceed (Finnish, Russian, etc)
BM25/DFR/etc.

It depends on the collection, there isn't a 'best retrieval formula'.

Note: I have no bias against BM-25, but its definitely a myth to say there
is a single retrieval formula that is the 'best' across the board.


On Tue, Feb 16, 2010 at 1:53 PM, JOAQUIN PEREZ IGLESIAS <
joaquin.perez@lsi.uned.es> wrote:

> By the way,
>
> I don't want to start a flame war VSM vs BM25, but I really believe that =
I
> have to express my opinion as Robert has done. In my experience, I have
> never found a case where VSM improves significantly BM25. Maybe you can
> find some cases under some very specific collection characteristics, (as
> average length of 300 vs 3000) or a bad usage of BM25 (not proper
> parameters) where it can happen.
>
> BM25 is not just only a different way of length normalization, it is base=
d
> strongly in the probabilistic framework, and parametrises frequencies and
> length. This is probably the most successful ranking model of the last
> years in Information Retrieval.
>
> I have never read a paper where VSM  improves any of the state-of-the-art
> ranking models (Language Models, DFR, BM25,...),  although the VSM with
> pivoted normalisation length can obtain nice results. This can be proved
> checking the last years of the TREC competition.
>
> Honestly to say that is a myth that BM25 improves VSM breaks the last 10
> or 15 years of research on Information Retrieval, and I really believe
> that is not accurate.
>
> The good thing of Information Retrieval is that you can always make your
> owns experiments and you can use the experience of a lot of years of
> research.
>
> PS: This opinion is based on experiments on TREC and CLEF collections,
> obviously we can start a debate about the suitability of this type of
> experimentation (concept of relevance, pooling, relevance judgements), bu=
t
> this is a much more complex topic and I believe is far from what we are
> dealing here.
>
> PS2: In relation with TREC4 Cornell used a pivoted length normalisation
> and they were applying pseudo-relevance feedback, what honestly makes muc=
h
> more difficult the analysis of the results. Obviously their results were
> part of the pool.
>
> Sorry for the huge mail :-))))
>
> > Hi Ivan,
> >
> > the problem is that unfortunately BM25
> > cannot be implemented overwriting
> > the Similarity interface. Therefore BM25Similarity
> > only computes the classic probabilistic IDF (what is
> > interesting only at search time).
> > If you set BM25Similarity at indexing time
> > some basic stats are not stored
> > correctly in the segments (like docs length).
> >
> > When you use BM25BooleanQuery this class
> > will set automatically the BM25Similarity for you,
> > therefore you don't need to do this explicitly.
> >
> > I tried to make this implementation with the focus on
> > not interfering on the typical use of Lucene (so no changing
> > DefaultSimilarity).
> >
> >> Joaquin, Robert,
> >>
> >> I followed Joaquin's recommendation and removed the call to set
> >> similarity
> >> to BM25 explicitly (indexer, searcher).  The results showed 55%
> >> improvement for the MAP score (0.141->0.219) over default similarity.
> >>
> >> Joaquin, how would setting the similarity to BM25 explicitly make the
> >> score worse?
> >>
> >> Thank you,
> >>
> >> Ivan
> >>
> >>
> >>
> >> --- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com> wrote:
> >>
> >>> From: Robert Muir <rcmuir@gmail.com>
> >>> Subject: Re: BM25 Scoring Patch
> >>> To: java-user@lucene.apache.org
> >>> Date: Tuesday, February 16, 2010, 11:36 AM
> >>> yes Ivan, if possible please report
> >>> back any findings you can on the
> >>> experiments you are doing!
> >>>
> >>> On Tue, Feb 16, 2010 at 11:22 AM, Joaquin Perez Iglesias
> >>> <
> >>> joaquin.perez@lsi.uned.es>
> >>> wrote:
> >>>
> >>> > Hi Ivan,
> >>> >
> >>> > You shouldn't set the BM25Similarity for indexing or
> >>> searching.
> >>> > Please try removing the lines:
> >>> >   writer.setSimilarity(new
> >>> BM25Similarity());
> >>> >   searcher.setSimilarity(sim);
> >>> >
> >>> > Please let us/me know if you improve your results with
> >>> these changes.
> >>> >
> >>> >
> >>> > Robert Muir escribi=C3=B3:
> >>> >
> >>> >  Hi Ivan, I've seen many cases where BM25
> >>> performs worse than Lucene's
> >>> >> default Similarity. Perhaps this is just another
> >>> one?
> >>> >>
> >>> >> Again while I have not worked with this particular
> >>> collection, I looked at
> >>> >> the statistics and noted that its composed of
> >>> several 'sub-collections':
> >>> >> for
> >>> >> example the PAT documents on disk 3 have an
> >>> average doc length of 3543,
> >>> >> but
> >>> >> the AP documents on disk 1 have an avg doc length
> >>> of 353.
> >>> >>
> >>> >> I have found on other collections that any
> >>> advantages of BM25's document
> >>> >> length normalization fall apart when 'average
> >>> document length' doesn't
> >>> >> make
> >>> >> a whole lot of sense (cases like this).
> >>> >>
> >>> >> For this same reason, I've only found a few
> >>> collections where BM25's doc
> >>> >> length normalization is really significantly
> >>> better than Lucene's.
> >>> >>
> >>> >> In my opinion, the results on a particular test
> >>> collection or 2 have
> >>> >> perhaps
> >>> >> been taken too far and created a myth that BM25 is
> >>> always superior to
> >>> >> Lucene's scoring... this is not true!
> >>> >>
> >>> >> On Tue, Feb 16, 2010 at 9:46 AM, Ivan Provalov
> >>> <iprovalo@yahoo.com>
> >>> >> wrote:
> >>> >>
> >>> >>  I applied the Lucene patch mentioned in
> >>> >>> https://issues.apache.org/jira/browse/LUCENE-2091 and
> >>> ran the MAP
> >>> >>> numbers
> >>> >>> on TREC-3 collection using topics
> >>> 151-200.  I am not getting worse
> >>> >>> results
> >>> >>> comparing to Lucene DefaultSimilarity.  I
> >>> suspect, I am not using it
> >>> >>> correctly.  I have single field
> >>> documents.  This is the process I use:
> >>> >>>
> >>> >>> 1. During the indexing, I am setting the
> >>> similarity to BM25 as such:
> >>> >>>
> >>> >>> IndexWriter writer =3D new IndexWriter(dir, new
> >>> StandardAnalyzer(
> >>> >>>
> >>>    Version.LUCENE_CURRENT), true,
> >>> >>>
> >>>    IndexWriter.MaxFieldLength.UNLIMITED);
> >>> >>> writer.setSimilarity(new BM25Similarity());
> >>> >>>
> >>> >>> 2. During the Precision/Recall measurements, I
> >>> am using a
> >>> >>> SimpleBM25QQParser extension I added to the
> >>> benchmark:
> >>> >>>
> >>> >>> QualityQueryParser qqParser =3D new
> >>> SimpleBM25QQParser("title", "TEXT");
> >>> >>>
> >>> >>>
> >>> >>> 3. Here is the parser code (I set an avg doc
> >>> length here):
> >>> >>>
> >>> >>> public Query parse(QualityQuery qq) throws
> >>> ParseException {
> >>> >>>   BM25Parameters.setAverageLength(indexField,
> >>> 798.30f);//avg doc length
> >>> >>>   BM25Parameters.setB(0.5f);//tried
> >>> default values
> >>> >>>   BM25Parameters.setK1(2f);
> >>> >>>   return query =3D new
> >>> BM25BooleanQuery(qq.getValue(qqName), indexField,
> >>> >>> new
> >>> >>> StandardAnalyzer(Version.LUCENE_CURRENT));
> >>> >>> }
> >>> >>>
> >>> >>> 4. The searcher is using BM25 similarity:
> >>> >>>
> >>> >>> Searcher searcher =3D new IndexSearcher(dir,
> >>> true);
> >>> >>> searcher.setSimilarity(sim);
> >>> >>>
> >>> >>> Am I missing some steps?  Does anyone
> >>> have experience with this code?
> >>> >>>
> >>> >>> Thanks,
> >>> >>>
> >>> >>> Ivan
> >>> >>>
> >>> >>>
> >>> >>>
> >>> >>>
> >>> >>>
> >>> ---------------------------------------------------------------------
> >>> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>> >>>
> >>> >>>
> >>> >>>
> >>> >>
> >>> >>
> >>> > --
> >>> >
> >>> -----------------------------------------------------------
> >>> > Joaqu=C3=ADn P=C3=A9rez Iglesias
> >>> > Dpto. Lenguajes y Sistemas Inform=C3=A1ticos
> >>> > E.T.S.I. Inform=C3=A1tica (UNED)
> >>> > Ciudad Universitaria
> >>> > C/ Juan del Rosal n=C2=BA 16
> >>> > 28040 Madrid - Spain
> >>> > Phone. +34 91 398 89 19
> >>> > Fax    +34 91 398 65 35
> >>> > Office  2.11
> >>> > Email: joaquin.perez@lsi.uned.es
> >>> > web:   http://nlp.uned.es/~jperezi/ <http://nlp.uned.es/%7Ejperezi/=
><
> http://nlp.uned.es/%7Ejperezi/>
> >>> >
> >>> -----------------------------------------------------------
> >>> >
> >>> >
> >>> >
> >>> ---------------------------------------------------------------------
> >>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >>> >
> >>> >
> >>>
> >>>
> >>> --
> >>> Robert Muir
> >>> rcmuir@gmail.com
> >>>
> >>
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Robert Muir
rcmuir@gmail.com

--00504502f5973eef49047fbc72b5--

From java-user-return-45027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 19:12:42 2010
Return-Path: <java-user-return-45027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10200 invoked from network); 16 Feb 2010 19:12:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 19:12:42 -0000
Received: (qmail 87030 invoked by uid 500); 16 Feb 2010 19:12:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86957 invoked by uid 500); 16 Feb 2010 19:12:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86947 invoked by uid 99); 16 Feb 2010 19:12:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 19:12:39 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.216.187 as permitted sender)
Received: from [209.85.216.187] (HELO mail-px0-f187.google.com) (209.85.216.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 19:12:27 +0000
Received: by pxi17 with SMTP id 17so2725571pxi.11
        for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 11:12:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=ivqwwrF978zZjN42znPL7KngKKOlVlmYJYnsswGbs0Q=;
        b=k8K8DLNoTtK1A87p4tBMtbHJUXrM7IhL0YIlHYrPuMMsjtdqgtEbOO67LrVpZVTUrG
         gzc/ASn2CvyvyJ6Xu5VKHQm0ZgzwATDycQjww1ZTs/vQsmQMCDpN6oLIETxXhp1pif7K
         Fj+8+hGre0wQmAb3pzG5qaQZEj4nVCsb1fZeM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=MSuj0AISncaTaH5bRQ9BwFUVFco+ZuKC5JLdWSlcz+Dnj5inSCYKQ//0qbzM3hCHha
         CBm1cGgkso+1gR/f2kxebAauhNJr+VpuNwxVIG5vUcIr03BSDutdSvaMeorDrlend/Xz
         all1/6tuymy28a1u7lqKjC3DoGVZJUaIDynSM=
MIME-Version: 1.0
Received: by 10.114.70.4 with SMTP id s4mr4615141waa.31.1266347526128; Tue, 16 
	Feb 2010 11:12:06 -0800 (PST)
In-Reply-To: <866966.86809.qm@web113315.mail.gq1.yahoo.com>
References: <8f0ad1f31002161014r53b9ab00pac71479d9a33682c@mail.gmail.com> 
	<866966.86809.qm@web113315.mail.gq1.yahoo.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 16 Feb 2010 14:11:46 -0500
Message-ID: <8f0ad1f31002161111n4ecc6debl5e1e73f0cfb3d2e8@mail.gmail.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502965175042f047fbc820e
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502965175042f047fbc820e
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Ivan, ok. it would be cool if you can list the map and bpref for the
different approaches you try (default lucene, lnb.ltc, bm25), with or
without stemming.

as you reported previously you got a 24% improvement with lnb.btc (right?) =
I
am guessing that we won't be able to draw many conclusions at all due to
bias.

On Tue, Feb 16, 2010 at 2:01 PM, Ivan Provalov <iprovalo@yahoo.com> wrote:

> Robert, Joaquin,
>
> Sorry, I made an error reporting the results.  The preliminary improvemen=
t
> is around 21% (it's a reduced collection).  I will have to run another te=
st
> to get the final numbers on the complete collection.
>
> We are planning to also apply the stemming.  Right now we are trying to
> isolate each improvement experiment.
>
> Thanks,
>
> Ivan
>
>
>
> --- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com> wrote:
>
> > From: Robert Muir <rcmuir@gmail.com>
> > Subject: Re: BM25 Scoring Patch
> > To: java-user@lucene.apache.org
> > Date: Tuesday, February 16, 2010, 1:14 PM
> > Ivan just a little more food for
> > thought to help you with this:
> >
> > I'm glad you got improved results, yet I stand by my
> > original statement of
> > 'be careful' interpreting too much from one collection.
> >
> > eg. had you chosen TREC-4 instead of TREC-3, you would see
> > different
> > results, as vector-space with non-cosine doc length norm
> > (LUCENE-2187)
> > performed better than BM25 there:
> > http://trec.nist.gov/pubs/trec4/overview.ps.gz
> >
> > in truth its hard to 'reuse' a pooled test collection to
> > compare methods
> > that were not part of the pool:
> > http://www.ir.uwaterloo.ca/slides/buettcher_reliable_evaluation.pdf
> >
> > This might help explain why you see such a difference in
> > MAP score!
> >
> > On Tue, Feb 16, 2010 at 12:15 PM, Ivan Provalov <iprovalo@yahoo.com>
> > wrote:
> >
> > > Joaquin, Robert,
> > >
> > > I followed Joaquin's recommendation and removed the
> > call to set similarity
> > > to BM25 explicitly (indexer, searcher).  The
> > results showed 55% improvement
> > > for the MAP score (0.141->0.219) over default
> > similarity.
> > >
> > > Joaquin, how would setting the similarity to BM25
> > explicitly make the score
> > > worse?
> > >
> > > Thank you,
> > >
> > > Ivan
> > >
> > >
> > >
> > > --- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com>
> > wrote:
> > >
> > > > From: Robert Muir <rcmuir@gmail.com>
> > > > Subject: Re: BM25 Scoring Patch
> > > > To: java-user@lucene.apache.org
> > > > Date: Tuesday, February 16, 2010, 11:36 AM
> > > > yes Ivan, if possible please report
> > > > back any findings you can on the
> > > > experiments you are doing!
> > > >
> > > > On Tue, Feb 16, 2010 at 11:22 AM, Joaquin Perez
> > Iglesias
> > > > <
> > > > joaquin.perez@lsi.uned.es>
> > > > wrote:
> > > >
> > > > > Hi Ivan,
> > > > >
> > > > > You shouldn't set the BM25Similarity for
> > indexing or
> > > > searching.
> > > > > Please try removing the lines:
> > > > >   writer.setSimilarity(new
> > > > BM25Similarity());
> > > >
> > >   searcher.setSimilarity(sim);
> > > > >
> > > > > Please let us/me know if you improve your
> > results with
> > > > these changes.
> > > > >
> > > > >
> > > > > Robert Muir escribi=C3=B3:
> > > > >
> > > > >  Hi Ivan, I've seen many cases where
> > BM25
> > > > performs worse than Lucene's
> > > > >> default Similarity. Perhaps this is just
> > another
> > > > one?
> > > > >>
> > > > >> Again while I have not worked with this
> > particular
> > > > collection, I looked at
> > > > >> the statistics and noted that its
> > composed of
> > > > several 'sub-collections':
> > > > >> for
> > > > >> example the PAT documents on disk 3 have
> > an
> > > > average doc length of 3543,
> > > > >> but
> > > > >> the AP documents on disk 1 have an avg
> > doc length
> > > > of 353.
> > > > >>
> > > > >> I have found on other collections that
> > any
> > > > advantages of BM25's document
> > > > >> length normalization fall apart when
> > 'average
> > > > document length' doesn't
> > > > >> make
> > > > >> a whole lot of sense (cases like this).
> > > > >>
> > > > >> For this same reason, I've only found a
> > few
> > > > collections where BM25's doc
> > > > >> length normalization is really
> > significantly
> > > > better than Lucene's.
> > > > >>
> > > > >> In my opinion, the results on a
> > particular test
> > > > collection or 2 have
> > > > >> perhaps
> > > > >> been taken too far and created a myth
> > that BM25 is
> > > > always superior to
> > > > >> Lucene's scoring... this is not true!
> > > > >>
> > > > >> On Tue, Feb 16, 2010 at 9:46 AM, Ivan
> > Provalov
> > > > <iprovalo@yahoo.com>
> > > > >> wrote:
> > > > >>
> > > > >>  I applied the Lucene patch
> > mentioned in
> > > > >>> https://issues.apache.org/jira/browse/LUCENE-2091 and
> > > > ran the MAP
> > > > >>> numbers
> > > > >>> on TREC-3 collection using topics
> > > > 151-200.  I am not getting worse
> > > > >>> results
> > > > >>> comparing to Lucene
> > DefaultSimilarity.  I
> > > > suspect, I am not using it
> > > > >>> correctly.  I have single
> > field
> > > > documents.  This is the process I use:
> > > > >>>
> > > > >>> 1. During the indexing, I am setting
> > the
> > > > similarity to BM25 as such:
> > > > >>>
> > > > >>> IndexWriter writer =3D new
> > IndexWriter(dir, new
> > > > StandardAnalyzer(
> > > > >>>
> > > >    Version.LUCENE_CURRENT), true,
> > > > >>>
> > > >
> > IndexWriter.MaxFieldLength.UNLIMITED);
> > > > >>> writer.setSimilarity(new
> > BM25Similarity());
> > > > >>>
> > > > >>> 2. During the Precision/Recall
> > measurements, I
> > > > am using a
> > > > >>> SimpleBM25QQParser extension I added
> > to the
> > > > benchmark:
> > > > >>>
> > > > >>> QualityQueryParser qqParser =3D new
> > > > SimpleBM25QQParser("title", "TEXT");
> > > > >>>
> > > > >>>
> > > > >>> 3. Here is the parser code (I set an
> > avg doc
> > > > length here):
> > > > >>>
> > > > >>> public Query parse(QualityQuery qq)
> > throws
> > > > ParseException {
> > > >
> > >>>   BM25Parameters.setAverageLength(indexField,
> > > > 798.30f);//avg doc length
> > > >
> > >>>   BM25Parameters.setB(0.5f);//tried
> > > > default values
> > > >
> > >>>   BM25Parameters.setK1(2f);
> > > > >>>   return query =3D new
> > > > BM25BooleanQuery(qq.getValue(qqName),
> > indexField,
> > > > >>> new
> > > > >>>
> > StandardAnalyzer(Version.LUCENE_CURRENT));
> > > > >>> }
> > > > >>>
> > > > >>> 4. The searcher is using BM25
> > similarity:
> > > > >>>
> > > > >>> Searcher searcher =3D new
> > IndexSearcher(dir,
> > > > true);
> > > > >>> searcher.setSimilarity(sim);
> > > > >>>
> > > > >>> Am I missing some steps?  Does
> > anyone
> > > > have experience with this code?
> > > > >>>
> > > > >>> Thanks,
> > > > >>>
> > > > >>> Ivan
> > > > >>>
> > > > >>>
> > > > >>>
> > > > >>>
> > > > >>>
> > > >
> > ---------------------------------------------------------------------
> > > > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > >>> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > >>>
> > > > >>>
> > > > >>>
> > > > >>
> > > > >>
> > > > > --
> > > > >
> > > >
> > -----------------------------------------------------------
> > > > > Joaqu=C3=ADn P=C3=A9rez Iglesias
> > > > > Dpto. Lenguajes y Sistemas Inform=C3=A1ticos
> > > > > E.T.S.I. Inform=C3=A1tica (UNED)
> > > > > Ciudad Universitaria
> > > > > C/ Juan del Rosal n=C2=BA 16
> > > > > 28040 Madrid - Spain
> > > > > Phone. +34 91 398 89 19
> > > > > Fax    +34 91 398 65 35
> > > > > Office  2.11
> > > > > Email: joaquin.perez@lsi.uned.es
> > > > > web:   http://nlp.uned.es/~jperezi/<http://nlp.uned.es/%7Ejperezi=
/><
> http://nlp.uned.es/%7Ejperezi/> <
> > > http://nlp.uned.es/%7Ejperezi/>
> > > > >
> > > >
> > -----------------------------------------------------------
> > > > >
> > > > >
> > > > >
> > > >
> > ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > > >
> > > > --
> > > > Robert Muir
> > > > rcmuir@gmail.com
> > > >
> > >
> > >
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Robert Muir
rcmuir@gmail.com

--00504502965175042f047fbc820e--

From java-user-return-45028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 19:17:23 2010
Return-Path: <java-user-return-45028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11469 invoked from network); 16 Feb 2010 19:17:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 19:17:23 -0000
Received: (qmail 92831 invoked by uid 500); 16 Feb 2010 19:17:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92751 invoked by uid 500); 16 Feb 2010 19:17:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92739 invoked by uid 99); 16 Feb 2010 19:17:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 19:17:21 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.167.1] (HELO web113301.mail.gq1.yahoo.com) (98.136.167.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 16 Feb 2010 19:17:11 +0000
Received: (qmail 51026 invoked by uid 60001); 16 Feb 2010 19:16:50 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1266347810; bh=TdYTAqe/mcR0G4YK36MRR0ir4JWcYAVxnSIBei/PjRM=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=AbucUZu4YtB0e/uLPMfkFSrIdv+f7DZKz8gB5NXIk+EgnVj6v+1CDBWpTAE2hcERxEQeOm2pebdfOVSO+zOn4ZrsNC09hNb0zKw29Yue7tyw8/D3zex/k4PmBe0iLP/DlIAwuTjfh6nhtkbnlzr31AUjr1LHQBW0U+Dy0XiZR3g=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=xKlWvYmJLWDBWqmcVIcpcAzcvo/snQ3wnOC8rDwnery9GOj4JV5LniW5uaXJlX+SL1fuMc6fJFabWGJjynlSRwgnfaq0EScQnxSv1Avln4fU5KKIWDU3ySoLjYdluPuMQkjEdvamP9rkHkpL3JHaa/p3b/nomxf0YRKfuEmhGmw=;
Message-ID: <818986.50963.qm@web113301.mail.gq1.yahoo.com>
X-YMail-OSG: j1p1p5MVM1k.XzdDzICtdTfN2xlQNBJZ1_8UgVmx15qFe289YQnGXNn81cGq.TzmvSQvexpVkIRvuFGo0cvUrGof.V794eT9JPGTycto64OcrfnO3TnCxVbmwQg4F822XCiGtY5JDTeqoois_8lNE42r1_WdJQJEWsF0bGkBCPNQ8HjPcwJ_tdr50aHJZQy5OMqJtBYVAbhNQ6bmHJugmCeIJqDeBm.3fTxbp6_JmBCcACSeghZ4pbDrci7RCCSgUKnAF4u3pRaWiDgckwqEYJFLH8GPfJTOVKdx0Z8P1KCZXvmZzv2PaPgjlmXdKybJjoIdtQYtrLGHhHpfwsliwLj7yOaCQ9cxBaU5od9Jt3P2VuMgqjox
Received: from [140.244.128.12] by web113301.mail.gq1.yahoo.com via HTTP; Tue, 16 Feb 2010 11:16:50 PST
X-Mailer: YahooMailClassic/9.2.12 YahooMailWebService/0.8.100.260964
Date: Tue, 16 Feb 2010 11:16:50 -0800 (PST)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
In-Reply-To: <8f0ad1f31002161111n4ecc6debl5e1e73f0cfb3d2e8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

By the end of the week, I will publish the results once we run the experime=
nts on a full collection.  Are you talking about the bias caused by using a=
 sub-collection?=0A=0AThanks,=0A=0AIvan=0A=0A--- On Tue, 2/16/10, Robert Mu=
ir <rcmuir@gmail.com> wrote:=0A=0A> From: Robert Muir <rcmuir@gmail.com>=0A=
> Subject: Re: BM25 Scoring Patch=0A> To: java-user@lucene.apache.org=0A> D=
ate: Tuesday, February 16, 2010, 2:11 PM=0A> Ivan, ok. it would be cool if =
you can=0A> list the map and bpref for the=0A> different approaches you try=
 (default lucene, lnb.ltc,=0A> bm25), with or=0A> without stemming.=0A> =0A=
> as you reported previously you got a 24% improvement with=0A> lnb.btc (ri=
ght?) I=0A> am guessing that we won't be able to draw many conclusions=0A> =
at all due to=0A> bias.=0A> =0A> On Tue, Feb 16, 2010 at 2:01 PM, Ivan Prov=
alov <iprovalo@yahoo.com>=0A> wrote:=0A> =0A> > Robert, Joaquin,=0A> >=0A> =
> Sorry, I made an error reporting the results.=A0=0A> The preliminary impr=
ovement=0A> > is around 21% (it's a reduced collection).=A0 I=0A> will have=
 to run another test=0A> > to get the final numbers on the complete collect=
ion.=0A> >=0A> > We are planning to also apply the stemming.=A0=0A> Right n=
ow we are trying to=0A> > isolate each improvement experiment.=0A> >=0A> > =
Thanks,=0A> >=0A> > Ivan=0A> >=0A> >=0A> >=0A> > --- On Tue, 2/16/10, Rober=
t Muir <rcmuir@gmail.com>=0A> wrote:=0A> >=0A> > > From: Robert Muir <rcmui=
r@gmail.com>=0A> > > Subject: Re: BM25 Scoring Patch=0A> > > To: java-user@=
lucene.apache.org=0A> > > Date: Tuesday, February 16, 2010, 1:14 PM=0A> > >=
 Ivan just a little more food for=0A> > > thought to help you with this:=0A=
> > >=0A> > > I'm glad you got improved results, yet I stand by=0A> my=0A> =
> > original statement of=0A> > > 'be careful' interpreting too much from o=
ne=0A> collection.=0A> > >=0A> > > eg. had you chosen TREC-4 instead of TRE=
C-3, you=0A> would see=0A> > > different=0A> > > results, as vector-space w=
ith non-cosine doc=0A> length norm=0A> > > (LUCENE-2187)=0A> > > performed =
better than BM25 there:=0A> > > http://trec.nist.gov/pubs/trec4/overview.ps=
.gz=0A> > >=0A> > > in truth its hard to 'reuse' a pooled test=0A> collecti=
on to=0A> > > compare methods=0A> > > that were not part of the pool:=0A> >=
 > http://www.ir.uwaterloo.ca/slides/buettcher_reliable_evaluation.pdf=0A> =
> >=0A> > > This might help explain why you see such a=0A> difference in=0A=
> > > MAP score!=0A> > >=0A> > > On Tue, Feb 16, 2010 at 12:15 PM, Ivan Pro=
valov=0A> <iprovalo@yahoo.com>=0A> > > wrote:=0A> > >=0A> > > > Joaquin, Ro=
bert,=0A> > > >=0A> > > > I followed Joaquin's recommendation and=0A> remov=
ed the=0A> > > call to set similarity=0A> > > > to BM25 explicitly (indexer=
,=0A> searcher).=A0 The=0A> > > results showed 55% improvement=0A> > > > fo=
r the MAP score (0.141->0.219) over=0A> default=0A> > > similarity.=0A> > >=
 >=0A> > > > Joaquin, how would setting the similarity to=0A> BM25=0A> > > =
explicitly make the score=0A> > > > worse?=0A> > > >=0A> > > > Thank you,=
=0A> > > >=0A> > > > Ivan=0A> > > >=0A> > > >=0A> > > >=0A> > > > --- On Tu=
e, 2/16/10, Robert Muir <rcmuir@gmail.com>=0A> > > wrote:=0A> > > >=0A> > >=
 > > From: Robert Muir <rcmuir@gmail.com>=0A> > > > > Subject: Re: BM25 Sco=
ring Patch=0A> > > > > To: java-user@lucene.apache.org=0A> > > > > Date: Tu=
esday, February 16, 2010, 11:36=0A> AM=0A> > > > > yes Ivan, if possible pl=
ease report=0A> > > > > back any findings you can on the=0A> > > > > experi=
ments you are doing!=0A> > > > >=0A> > > > > On Tue, Feb 16, 2010 at 11:22 =
AM,=0A> Joaquin Perez=0A> > > Iglesias=0A> > > > > <=0A> > > > > joaquin.pe=
rez@lsi.uned.es>=0A> > > > > wrote:=0A> > > > >=0A> > > > > > Hi Ivan,=0A> =
> > > > >=0A> > > > > > You shouldn't set the=0A> BM25Similarity for=0A> > =
> indexing or=0A> > > > > searching.=0A> > > > > > Please try removing the =
lines:=0A> > > > >=0A> >=A0=A0=A0writer.setSimilarity(new=0A> > > > > BM25S=
imilarity());=0A> > > > >=0A> > >=0A> >=A0=A0=A0searcher.setSimilarity(sim)=
;=0A> > > > > >=0A> > > > > > Please let us/me know if you=0A> improve your=
=0A> > > results with=0A> > > > > these changes.=0A> > > > > >=0A> > > > > =
>=0A> > > > > > Robert Muir escribi=F3:=0A> > > > > >=0A> > > > > >=A0 Hi I=
van, I've seen many=0A> cases where=0A> > > BM25=0A> > > > > performs worse=
 than Lucene's=0A> > > > > >> default Similarity. Perhaps=0A> this is just=
=0A> > > another=0A> > > > > one?=0A> > > > > >>=0A> > > > > >> Again while=
 I have not worked=0A> with this=0A> > > particular=0A> > > > > collection,=
 I looked at=0A> > > > > >> the statistics and noted that=0A> its=0A> > > c=
omposed of=0A> > > > > several 'sub-collections':=0A> > > > > >> for=0A> > =
> > > >> example the PAT documents on=0A> disk 3 have=0A> > > an=0A> > > > =
> average doc length of 3543,=0A> > > > > >> but=0A> > > > > >> the AP docu=
ments on disk 1=0A> have an avg=0A> > > doc length=0A> > > > > of 353.=0A> =
> > > > >>=0A> > > > > >> I have found on other=0A> collections that=0A> > =
> any=0A> > > > > advantages of BM25's document=0A> > > > > >> length norma=
lization fall=0A> apart when=0A> > > 'average=0A> > > > > document length' =
doesn't=0A> > > > > >> make=0A> > > > > >> a whole lot of sense (cases=0A> =
like this).=0A> > > > > >>=0A> > > > > >> For this same reason, I've=0A> on=
ly found a=0A> > > few=0A> > > > > collections where BM25's doc=0A> > > > >=
 >> length normalization is=0A> really=0A> > > significantly=0A> > > > > be=
tter than Lucene's.=0A> > > > > >>=0A> > > > > >> In my opinion, the result=
s on=0A> a=0A> > > particular test=0A> > > > > collection or 2 have=0A> > >=
 > > >> perhaps=0A> > > > > >> been taken too far and created=0A> a myth=0A=
> > > that BM25 is=0A> > > > > always superior to=0A> > > > > >> Lucene's s=
coring... this is=0A> not true!=0A> > > > > >>=0A> > > > > >> On Tue, Feb 1=
6, 2010 at 9:46=0A> AM, Ivan=0A> > > Provalov=0A> > > > > <iprovalo@yahoo.c=
om>=0A> > > > > >> wrote:=0A> > > > > >>=0A> > > > > >>=A0 I applied the Lu=
cene=0A> patch=0A> > > mentioned in=0A> > > > > >>> https://issues.apache.o=
rg/jira/browse/LUCENE-2091 and=0A> > > > > ran the MAP=0A> > > > > >>> numb=
ers=0A> > > > > >>> on TREC-3 collection using=0A> topics=0A> > > > > 151-2=
00.=A0 I am not getting worse=0A> > > > > >>> results=0A> > > > > >>> compa=
ring to Lucene=0A> > > DefaultSimilarity.=A0 I=0A> > > > > suspect, I am no=
t using it=0A> > > > > >>> correctly.=A0 I have=0A> single=0A> > > field=0A=
> > > > > documents.=A0 This is the process I=0A> use:=0A> > > > > >>>=0A> =
> > > > >>> 1. During the indexing, I=0A> am setting=0A> > > the=0A> > > > =
> similarity to BM25 as such:=0A> > > > > >>>=0A> > > > > >>> IndexWriter w=
riter =3D new=0A> > > IndexWriter(dir, new=0A> > > > > StandardAnalyzer(=0A=
> > > > > >>>=0A> > > > >=A0 =A0 Version.LUCENE_CURRENT),=0A> true,=0A> > >=
 > > >>>=0A> > > > >=0A> > > IndexWriter.MaxFieldLength.UNLIMITED);=0A> > >=
 > > >>> writer.setSimilarity(new=0A> > > BM25Similarity());=0A> > > > > >>=
>=0A> > > > > >>> 2. During the=0A> Precision/Recall=0A> > > measurements, =
I=0A> > > > > am using a=0A> > > > > >>> SimpleBM25QQParser=0A> extension I=
 added=0A> > > to the=0A> > > > > benchmark:=0A> > > > > >>>=0A> > > > > >>=
> QualityQueryParser=0A> qqParser =3D new=0A> > > > > SimpleBM25QQParser("t=
itle", "TEXT");=0A> > > > > >>>=0A> > > > > >>>=0A> > > > > >>> 3. Here is =
the parser code=0A> (I set an=0A> > > avg doc=0A> > > > > length here):=0A>=
 > > > > >>>=0A> > > > > >>> public Query=0A> parse(QualityQuery qq)=0A> > =
> throws=0A> > > > > ParseException {=0A> > > > >=0A> > >=0A> >>>=A0=A0=A0B=
M25Parameters.setAverageLength(indexField,=0A> > > > > 798.30f);//avg doc l=
ength=0A> > > > >=0A> > >=0A> >>>=A0=A0=A0BM25Parameters.setB(0.5f);//tried=
=0A> > > > > default values=0A> > > > >=0A> > >=0A> >>>=A0=A0=A0BM25Paramet=
ers.setK1(2f);=0A> > > > > >>>=A0=A0=A0return=0A> query =3D new=0A> > > > >=
 BM25BooleanQuery(qq.getValue(qqName),=0A> > > indexField,=0A> > > > > >>> =
new=0A> > > > > >>>=0A> > > StandardAnalyzer(Version.LUCENE_CURRENT));=0A> =
> > > > >>> }=0A> > > > > >>>=0A> > > > > >>> 4. The searcher is using=0A> =
BM25=0A> > > similarity:=0A> > > > > >>>=0A> > > > > >>> Searcher searcher =
=3D new=0A> > > IndexSearcher(dir,=0A> > > > > true);=0A> > > > > >>>=0A> s=
earcher.setSimilarity(sim);=0A> > > > > >>>=0A> > > > > >>> Am I missing so=
me=0A> steps?=A0 Does=0A> > > anyone=0A> > > > > have experience with this =
code?=0A> > > > > >>>=0A> > > > > >>> Thanks,=0A> > > > > >>>=0A> > > > > >=
>> Ivan=0A> > > > > >>>=0A> > > > > >>>=0A> > > > > >>>=0A> > > > > >>>=0A>=
 > > > > >>>=0A> > > > >=0A> > >=0A> --------------------------------------=
-------------------------------=0A> > > > > >>> To unsubscribe, e-mail: jav=
a-user-unsubscribe@lucene.apache.org=0A> > > > > >>> For additional command=
s,=0A> e-mail:=0A> > java-user-help@lucene.apache.org=0A> > > > > >>>=0A> >=
 > > > >>>=0A> > > > > >>>=0A> > > > > >>=0A> > > > > >>=0A> > > > > > --=
=0A> > > > > >=0A> > > > >=0A> > >=0A> ------------------------------------=
-----------------------=0A> > > > > > Joaqu=EDn P=E9rez Iglesias=0A> > > > =
> > Dpto. Lenguajes y Sistemas=0A> Inform=E1ticos=0A> > > > > > E.T.S.I. In=
form=E1tica (UNED)=0A> > > > > > Ciudad Universitaria=0A> > > > > > C/ Juan=
 del Rosal n=BA 16=0A> > > > > > 28040 Madrid - Spain=0A> > > > > > Phone. =
+34 91 398 89 19=0A> > > > > > Fax=A0 =A0 +34 91 398 65 35=0A> > > > > > Of=
fice=A0 2.11=0A> > > > > > Email: joaquin.perez@lsi.uned.es=0A> > > > > > w=
eb:=A0=A0=A0http://nlp.uned.es/~jperezi/<http://nlp.uned.es/%7Ejperezi/><=
=0A> > http://nlp.uned.es/%7Ejperezi/> <=0A> > > > http://nlp.uned.es/%7Ejp=
erezi/>=0A> > > > > >=0A> > > > >=0A> > >=0A> -----------------------------=
------------------------------=0A> > > > > >=0A> > > > > >=0A> > > > > >=0A=
> > > > >=0A> > >=0A> -----------------------------------------------------=
----------------=0A> > > > > > To unsubscribe, e-mail: java-user-unsubscrib=
e@lucene.apache.org=0A> > > > > > For additional commands, e-mail:=0A> java=
-user-help@lucene.apache.org=0A> > > > > >=0A> > > > > >=0A> > > > >=0A> > =
> > >=0A> > > > > --=0A> > > > > Robert Muir=0A> > > > > rcmuir@gmail.com=
=0A> > > > >=0A> > > >=0A> > > >=0A> > > >=0A> > > >=0A> > > >=0A> > >=0A> =
---------------------------------------------------------------------=0A> >=
 > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> > =
> > For additional commands, e-mail: java-user-help@lucene.apache.org=0A> >=
 > >=0A> > > >=0A> > >=0A> > >=0A> > > --=0A> > > Robert Muir=0A> > > rcmui=
r@gmail.com=0A> > >=0A> >=0A> >=0A> >=0A> >=0A> >=0A> ---------------------=
------------------------------------------------=0A> > To unsubscribe, e-ma=
il: java-user-unsubscribe@lucene.apache.org=0A> > For additional commands, =
e-mail: java-user-help@lucene.apache.org=0A> >=0A> >=0A> =0A> =0A> -- =0A> =
Robert Muir=0A> rcmuir@gmail.com=0A> =0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 19:23:16 2010
Return-Path: <java-user-return-45029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13687 invoked from network); 16 Feb 2010 19:23:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 19:23:16 -0000
Received: (qmail 2501 invoked by uid 500); 16 Feb 2010 19:23:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2425 invoked by uid 500); 16 Feb 2010 19:23:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2415 invoked by uid 99); 16 Feb 2010 19:23:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 19:23:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.216.187 as permitted sender)
Received: from [209.85.216.187] (HELO mail-px0-f187.google.com) (209.85.216.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 19:23:04 +0000
Received: by pxi17 with SMTP id 17so2732937pxi.11
        for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 11:22:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=dqgvyK9iKt8dOFbvIZtZkEZSfd53oWoUYODhsGDSaMs=;
        b=l8qR0f9aZDu0Y+XB8OBRaSCw+XlMEjhWuKPSPSPdzgecv4tqwk7kB80TiUG+tVKzY3
         khvQ9gGzFYj39rHYvfzx+ro8+KudqXGfDOtt9oVAT9UkdYpCWV170ei9HTh2i38k59yM
         3lQ/MGe6jVSHjib7HZGxP3o/VBrDulTHif8sU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Elyt8dBHmDtp31ba0k2r1NuIxrCZZrA25M33TNk0G299voWohLkVgQHs8fOO9PFWzv
         /zEFC5p6HsChsHOYd2+QPoWAMHk4mPi6hdkQbqi8IICcdqVEOhG1rYkYqkGsohEMdl/0
         OJM/fQ4JtQj43Ns3ccceLJXqh1YrrTPyVWuD8=
MIME-Version: 1.0
Received: by 10.115.64.5 with SMTP id r5mr4661019wak.183.1266348163109; Tue, 
	16 Feb 2010 11:22:43 -0800 (PST)
In-Reply-To: <818986.50963.qm@web113301.mail.gq1.yahoo.com>
References: <8f0ad1f31002161111n4ecc6debl5e1e73f0cfb3d2e8@mail.gmail.com> 
	<818986.50963.qm@web113301.mail.gq1.yahoo.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 16 Feb 2010 14:22:23 -0500
Message-ID: <8f0ad1f31002161122n1f76188bxa7d6e47da9690f5@mail.gmail.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64cc51c6c931f047fbca8ac

--0016e64cc51c6c931f047fbca8ac
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

no i mean that gathering your previous emails you have supplied these MAP
improvements:

SweetSpot: 15%
lnb.ltc: 24%
bm25: 21%

these are close enough that given the bias from a pooled collection (
http://www.ir.uwaterloo.ca/slides/buettcher_reliable_evaluation.pdf) I
wouldn't want to say for sure that any is better than the other for this
collection, but its probably safe to say they are all an improvement for
this collection... this is assuming your SweetSpot/lnb.btc calculations wer=
e
correct?

On Tue, Feb 16, 2010 at 2:16 PM, Ivan Provalov <iprovalo@yahoo.com> wrote:

> By the end of the week, I will publish the results once we run the
> experiments on a full collection.  Are you talking about the bias caused =
by
> using a sub-collection?
>
> Thanks,
>
> Ivan
>
> --- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com> wrote:
>
> > From: Robert Muir <rcmuir@gmail.com>
> > Subject: Re: BM25 Scoring Patch
> > To: java-user@lucene.apache.org
> > Date: Tuesday, February 16, 2010, 2:11 PM
> > Ivan, ok. it would be cool if you can
> > list the map and bpref for the
> > different approaches you try (default lucene, lnb.ltc,
> > bm25), with or
> > without stemming.
> >
> > as you reported previously you got a 24% improvement with
> > lnb.btc (right?) I
> > am guessing that we won't be able to draw many conclusions
> > at all due to
> > bias.
> >
> > On Tue, Feb 16, 2010 at 2:01 PM, Ivan Provalov <iprovalo@yahoo.com>
> > wrote:
> >
> > > Robert, Joaquin,
> > >
> > > Sorry, I made an error reporting the results.
> > The preliminary improvement
> > > is around 21% (it's a reduced collection).  I
> > will have to run another test
> > > to get the final numbers on the complete collection.
> > >
> > > We are planning to also apply the stemming.
> > Right now we are trying to
> > > isolate each improvement experiment.
> > >
> > > Thanks,
> > >
> > > Ivan
> > >
> > >
> > >
> > > --- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com>
> > wrote:
> > >
> > > > From: Robert Muir <rcmuir@gmail.com>
> > > > Subject: Re: BM25 Scoring Patch
> > > > To: java-user@lucene.apache.org
> > > > Date: Tuesday, February 16, 2010, 1:14 PM
> > > > Ivan just a little more food for
> > > > thought to help you with this:
> > > >
> > > > I'm glad you got improved results, yet I stand by
> > my
> > > > original statement of
> > > > 'be careful' interpreting too much from one
> > collection.
> > > >
> > > > eg. had you chosen TREC-4 instead of TREC-3, you
> > would see
> > > > different
> > > > results, as vector-space with non-cosine doc
> > length norm
> > > > (LUCENE-2187)
> > > > performed better than BM25 there:
> > > > http://trec.nist.gov/pubs/trec4/overview.ps.gz
> > > >
> > > > in truth its hard to 'reuse' a pooled test
> > collection to
> > > > compare methods
> > > > that were not part of the pool:
> > > > http://www.ir.uwaterloo.ca/slides/buettcher_reliable_evaluation.pdf
> > > >
> > > > This might help explain why you see such a
> > difference in
> > > > MAP score!
> > > >
> > > > On Tue, Feb 16, 2010 at 12:15 PM, Ivan Provalov
> > <iprovalo@yahoo.com>
> > > > wrote:
> > > >
> > > > > Joaquin, Robert,
> > > > >
> > > > > I followed Joaquin's recommendation and
> > removed the
> > > > call to set similarity
> > > > > to BM25 explicitly (indexer,
> > searcher).  The
> > > > results showed 55% improvement
> > > > > for the MAP score (0.141->0.219) over
> > default
> > > > similarity.
> > > > >
> > > > > Joaquin, how would setting the similarity to
> > BM25
> > > > explicitly make the score
> > > > > worse?
> > > > >
> > > > > Thank you,
> > > > >
> > > > > Ivan
> > > > >
> > > > >
> > > > >
> > > > > --- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com>
> > > > wrote:
> > > > >
> > > > > > From: Robert Muir <rcmuir@gmail.com>
> > > > > > Subject: Re: BM25 Scoring Patch
> > > > > > To: java-user@lucene.apache.org
> > > > > > Date: Tuesday, February 16, 2010, 11:36
> > AM
> > > > > > yes Ivan, if possible please report
> > > > > > back any findings you can on the
> > > > > > experiments you are doing!
> > > > > >
> > > > > > On Tue, Feb 16, 2010 at 11:22 AM,
> > Joaquin Perez
> > > > Iglesias
> > > > > > <
> > > > > > joaquin.perez@lsi.uned.es>
> > > > > > wrote:
> > > > > >
> > > > > > > Hi Ivan,
> > > > > > >
> > > > > > > You shouldn't set the
> > BM25Similarity for
> > > > indexing or
> > > > > > searching.
> > > > > > > Please try removing the lines:
> > > > > >
> > >   writer.setSimilarity(new
> > > > > > BM25Similarity());
> > > > > >
> > > >
> > >   searcher.setSimilarity(sim);
> > > > > > >
> > > > > > > Please let us/me know if you
> > improve your
> > > > results with
> > > > > > these changes.
> > > > > > >
> > > > > > >
> > > > > > > Robert Muir escribi=C3=B3:
> > > > > > >
> > > > > > >  Hi Ivan, I've seen many
> > cases where
> > > > BM25
> > > > > > performs worse than Lucene's
> > > > > > >> default Similarity. Perhaps
> > this is just
> > > > another
> > > > > > one?
> > > > > > >>
> > > > > > >> Again while I have not worked
> > with this
> > > > particular
> > > > > > collection, I looked at
> > > > > > >> the statistics and noted that
> > its
> > > > composed of
> > > > > > several 'sub-collections':
> > > > > > >> for
> > > > > > >> example the PAT documents on
> > disk 3 have
> > > > an
> > > > > > average doc length of 3543,
> > > > > > >> but
> > > > > > >> the AP documents on disk 1
> > have an avg
> > > > doc length
> > > > > > of 353.
> > > > > > >>
> > > > > > >> I have found on other
> > collections that
> > > > any
> > > > > > advantages of BM25's document
> > > > > > >> length normalization fall
> > apart when
> > > > 'average
> > > > > > document length' doesn't
> > > > > > >> make
> > > > > > >> a whole lot of sense (cases
> > like this).
> > > > > > >>
> > > > > > >> For this same reason, I've
> > only found a
> > > > few
> > > > > > collections where BM25's doc
> > > > > > >> length normalization is
> > really
> > > > significantly
> > > > > > better than Lucene's.
> > > > > > >>
> > > > > > >> In my opinion, the results on
> > a
> > > > particular test
> > > > > > collection or 2 have
> > > > > > >> perhaps
> > > > > > >> been taken too far and created
> > a myth
> > > > that BM25 is
> > > > > > always superior to
> > > > > > >> Lucene's scoring... this is
> > not true!
> > > > > > >>
> > > > > > >> On Tue, Feb 16, 2010 at 9:46
> > AM, Ivan
> > > > Provalov
> > > > > > <iprovalo@yahoo.com>
> > > > > > >> wrote:
> > > > > > >>
> > > > > > >>  I applied the Lucene
> > patch
> > > > mentioned in
> > > > > > >>> https://issues.apache.org/jira/browse/LUCENE-2091 and
> > > > > > ran the MAP
> > > > > > >>> numbers
> > > > > > >>> on TREC-3 collection using
> > topics
> > > > > > 151-200.  I am not getting worse
> > > > > > >>> results
> > > > > > >>> comparing to Lucene
> > > > DefaultSimilarity.  I
> > > > > > suspect, I am not using it
> > > > > > >>> correctly.  I have
> > single
> > > > field
> > > > > > documents.  This is the process I
> > use:
> > > > > > >>>
> > > > > > >>> 1. During the indexing, I
> > am setting
> > > > the
> > > > > > similarity to BM25 as such:
> > > > > > >>>
> > > > > > >>> IndexWriter writer =3D new
> > > > IndexWriter(dir, new
> > > > > > StandardAnalyzer(
> > > > > > >>>
> > > > > >    Version.LUCENE_CURRENT),
> > true,
> > > > > > >>>
> > > > > >
> > > > IndexWriter.MaxFieldLength.UNLIMITED);
> > > > > > >>> writer.setSimilarity(new
> > > > BM25Similarity());
> > > > > > >>>
> > > > > > >>> 2. During the
> > Precision/Recall
> > > > measurements, I
> > > > > > am using a
> > > > > > >>> SimpleBM25QQParser
> > extension I added
> > > > to the
> > > > > > benchmark:
> > > > > > >>>
> > > > > > >>> QualityQueryParser
> > qqParser =3D new
> > > > > > SimpleBM25QQParser("title", "TEXT");
> > > > > > >>>
> > > > > > >>>
> > > > > > >>> 3. Here is the parser code
> > (I set an
> > > > avg doc
> > > > > > length here):
> > > > > > >>>
> > > > > > >>> public Query
> > parse(QualityQuery qq)
> > > > throws
> > > > > > ParseException {
> > > > > >
> > > >
> > >>>   BM25Parameters.setAverageLength(indexField,
> > > > > > 798.30f);//avg doc length
> > > > > >
> > > >
> > >>>   BM25Parameters.setB(0.5f);//tried
> > > > > > default values
> > > > > >
> > > >
> > >>>   BM25Parameters.setK1(2f);
> > > > > > >>>   return
> > query =3D new
> > > > > > BM25BooleanQuery(qq.getValue(qqName),
> > > > indexField,
> > > > > > >>> new
> > > > > > >>>
> > > > StandardAnalyzer(Version.LUCENE_CURRENT));
> > > > > > >>> }
> > > > > > >>>
> > > > > > >>> 4. The searcher is using
> > BM25
> > > > similarity:
> > > > > > >>>
> > > > > > >>> Searcher searcher =3D new
> > > > IndexSearcher(dir,
> > > > > > true);
> > > > > > >>>
> > searcher.setSimilarity(sim);
> > > > > > >>>
> > > > > > >>> Am I missing some
> > steps?  Does
> > > > anyone
> > > > > > have experience with this code?
> > > > > > >>>
> > > > > > >>> Thanks,
> > > > > > >>>
> > > > > > >>> Ivan
> > > > > > >>>
> > > > > > >>>
> > > > > > >>>
> > > > > > >>>
> > > > > > >>>
> > > > > >
> > > >
> > ---------------------------------------------------------------------
> > > > > > >>> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > > > > >>> For additional commands,
> > e-mail:
> > > java-user-help@lucene.apache.org
> > > > > > >>>
> > > > > > >>>
> > > > > > >>>
> > > > > > >>
> > > > > > >>
> > > > > > > --
> > > > > > >
> > > > > >
> > > >
> > -----------------------------------------------------------
> > > > > > > Joaqu=C3=ADn P=C3=A9rez Iglesias
> > > > > > > Dpto. Lenguajes y Sistemas
> > Inform=C3=A1ticos
> > > > > > > E.T.S.I. Inform=C3=A1tica (UNED)
> > > > > > > Ciudad Universitaria
> > > > > > > C/ Juan del Rosal n=C2=BA 16
> > > > > > > 28040 Madrid - Spain
> > > > > > > Phone. +34 91 398 89 19
> > > > > > > Fax    +34 91 398 65 35
> > > > > > > Office  2.11
> > > > > > > Email: joaquin.perez@lsi.uned.es
> > > > > > > web:   http://nlp.uned.es/~jperezi/<http://nlp.uned.es/%7Ejpe=
rezi/>
> <http://nlp.uned.es/%7Ejperezi/><
> > > http://nlp.uned.es/%7Ejperezi/> <
> > > > > http://nlp.uned.es/%7Ejperezi/>
> > > > > > >
> > > > > >
> > > >
> > -----------------------------------------------------------
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > >
> > > >
> > ---------------------------------------------------------------------
> > > > > > > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > > > > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > > > > > >
> > > > > > >
> > > > > >
> > > > > >
> > > > > > --
> > > > > > Robert Muir
> > > > > > rcmuir@gmail.com
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > >
> > ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > > >
> > > > --
> > > > Robert Muir
> > > > rcmuir@gmail.com
> > > >
> > >
> > >
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Robert Muir
rcmuir@gmail.com

--0016e64cc51c6c931f047fbca8ac--

From java-user-return-45030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 19:40:42 2010
Return-Path: <java-user-return-45030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17386 invoked from network); 16 Feb 2010 19:40:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 19:40:42 -0000
Received: (qmail 24098 invoked by uid 500); 16 Feb 2010 19:40:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24019 invoked by uid 500); 16 Feb 2010 19:40:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24009 invoked by uid 99); 16 Feb 2010 19:40:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 19:40:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of joaquin.perez@lsi.uned.es designates 62.204.192.107 as permitted sender)
Received: from [62.204.192.107] (HELO hermes-siete.uned.es) (62.204.192.107)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 19:40:28 +0000
Received: from hermes-siete.uned.es (localhost.localdomain [127.0.0.1])
	by localhost.uned.es (Postfix) with ESMTP id 6766E1E392B
	for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 20:40:07 +0100 (CET)
Received: from correo.uned.es (bm103103-8.uned.es [10.103.103.8])
	by hermes-siete.uned.es (Postfix) with ESMTP id BD3CB1E38E5
	for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 20:40:06 +0100 (CET)
Received: from 87.222.27.219
        by correo.uned.es with HTTP;
        Tue, 16 Feb 2010 20:40:06 +0100
Message-ID: <83b692afc347b683f7f0b4263879b342.squirrel@correo.uned.es>
In-Reply-To: <8f0ad1f31002161107l26b503fjec173e9c0e7c5f46@mail.gmail.com>
References: <245804.25778.qm@web113302.mail.gq1.yahoo.com>
    <141ee80356de1891826922a8185f4317.squirrel@correo.uned.es>
    <833c7a901e04c6f6287f2a439cdb4d35.squirrel@correo.uned.es>
    <8f0ad1f31002161107l26b503fjec173e9c0e7c5f46@mail.gmail.com>
Date: Tue, 16 Feb 2010 20:40:06 +0100
Subject: Re: BM25 Scoring Patch
From: "JOAQUIN PEREZ IGLESIAS" <joaquin.perez@lsi.uned.es>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.19
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Just some final comments (as I said I'm not interested in flame wars),

If I obtain better results there are not problem with pooling otherwise it
is biased.
The only important thing (in my opinion) is that it cannot be said that
BM25 is a myth.
Yes, you are right there is not an only ranking model that beats the rest,
but there are models that generally show a better performance in more
cases.

About CLEF I have had the same experience (VSM vs BM25) on Spanish and
English (WebCLEF) and Q&A (ResPubliQA)

Ivan checks the parameters (b and k1), probably you can improve your
results. (that's the bad part of BM25).

Finally we are just speaking of personal experience, so obviously you
should use the best model for your data and your own experience, on IR
there are not myths neither best ranking models. If any of us is able to
find the &#8220;best&#8221;  ranking model, or is able to prove that any
state-of-the art is a myth he should send these results to the SIGIR
conference.

Ivan, Robert good luck with your experiments, as I said the good part of
IR is that you can always make experiments on your own.

> I don't think its really a competition, I think preferably we should have
> the flexibility to change the scoring model in lucene actually?
>
> I have found lots of cases where VSM improves on BM25, but then again I
> don't work with TREC stuff, as I work with non-english collections.
>
> It doesn't contradict years of research to say that VSM isn't a
> state-of-the-art model, besides the TREC-4 results, there are CLEF results
> where VSM models perform competitively or exceed (Finnish, Russian, etc)
> BM25/DFR/etc.
>
> It depends on the collection, there isn't a 'best retrieval formula'.
>
> Note: I have no bias against BM-25, but its definitely a myth to say there
> is a single retrieval formula that is the 'best' across the board.
>
>
> On Tue, Feb 16, 2010 at 1:53 PM, JOAQUIN PEREZ IGLESIAS <
> joaquin.perez@lsi.uned.es> wrote:
>
>> By the way,
>>
>> I don't want to start a flame war VSM vs BM25, but I really believe that
>> I
>> have to express my opinion as Robert has done. In my experience, I have
>> never found a case where VSM improves significantly BM25. Maybe you can
>> find some cases under some very specific collection characteristics, (as
>> average length of 300 vs 3000) or a bad usage of BM25 (not proper
>> parameters) where it can happen.
>>
>> BM25 is not just only a different way of length normalization, it is
>> based
>> strongly in the probabilistic framework, and parametrises frequencies
>> and
>> length. This is probably the most successful ranking model of the last
>> years in Information Retrieval.
>>
>> I have never read a paper where VSM  improves any of the
>> state-of-the-art
>> ranking models (Language Models, DFR, BM25,...),  although the VSM with
>> pivoted normalisation length can obtain nice results. This can be proved
>> checking the last years of the TREC competition.
>>
>> Honestly to say that is a myth that BM25 improves VSM breaks the last 10
>> or 15 years of research on Information Retrieval, and I really believe
>> that is not accurate.
>>
>> The good thing of Information Retrieval is that you can always make your
>> owns experiments and you can use the experience of a lot of years of
>> research.
>>
>> PS: This opinion is based on experiments on TREC and CLEF collections,
>> obviously we can start a debate about the suitability of this type of
>> experimentation (concept of relevance, pooling, relevance judgements),
>> but
>> this is a much more complex topic and I believe is far from what we are
>> dealing here.
>>
>> PS2: In relation with TREC4 Cornell used a pivoted length normalisation
>> and they were applying pseudo-relevance feedback, what honestly makes
>> much
>> more difficult the analysis of the results. Obviously their results were
>> part of the pool.
>>
>> Sorry for the huge mail :-))))
>>
>> > Hi Ivan,
>> >
>> > the problem is that unfortunately BM25
>> > cannot be implemented overwriting
>> > the Similarity interface. Therefore BM25Similarity
>> > only computes the classic probabilistic IDF (what is
>> > interesting only at search time).
>> > If you set BM25Similarity at indexing time
>> > some basic stats are not stored
>> > correctly in the segments (like docs length).
>> >
>> > When you use BM25BooleanQuery this class
>> > will set automatically the BM25Similarity for you,
>> > therefore you don't need to do this explicitly.
>> >
>> > I tried to make this implementation with the focus on
>> > not interfering on the typical use of Lucene (so no changing
>> > DefaultSimilarity).
>> >
>> >> Joaquin, Robert,
>> >>
>> >> I followed Joaquin's recommendation and removed the call to set
>> >> similarity
>> >> to BM25 explicitly (indexer, searcher).  The results showed 55%
>> >> improvement for the MAP score (0.141->0.219) over default similarity.
>> >>
>> >> Joaquin, how would setting the similarity to BM25 explicitly make the
>> >> score worse?
>> >>
>> >> Thank you,
>> >>
>> >> Ivan
>> >>
>> >>
>> >>
>> >> --- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com> wrote:
>> >>
>> >>> From: Robert Muir <rcmuir@gmail.com>
>> >>> Subject: Re: BM25 Scoring Patch
>> >>> To: java-user@lucene.apache.org
>> >>> Date: Tuesday, February 16, 2010, 11:36 AM
>> >>> yes Ivan, if possible please report
>> >>> back any findings you can on the
>> >>> experiments you are doing!
>> >>>
>> >>> On Tue, Feb 16, 2010 at 11:22 AM, Joaquin Perez Iglesias
>> >>> <
>> >>> joaquin.perez@lsi.uned.es>
>> >>> wrote:
>> >>>
>> >>> > Hi Ivan,
>> >>> >
>> >>> > You shouldn't set the BM25Similarity for indexing or
>> >>> searching.
>> >>> > Please try removing the lines:
>> >>> >   writer.setSimilarity(new
>> >>> BM25Similarity());
>> >>> >   searcher.setSimilarity(sim);
>> >>> >
>> >>> > Please let us/me know if you improve your results with
>> >>> these changes.
>> >>> >
>> >>> >
>> >>> > Robert Muir escribi:
>> >>> >
>> >>> >  Hi Ivan, I've seen many cases where BM25
>> >>> performs worse than Lucene's
>> >>> >> default Similarity. Perhaps this is just another
>> >>> one?
>> >>> >>
>> >>> >> Again while I have not worked with this particular
>> >>> collection, I looked at
>> >>> >> the statistics and noted that its composed of
>> >>> several 'sub-collections':
>> >>> >> for
>> >>> >> example the PAT documents on disk 3 have an
>> >>> average doc length of 3543,
>> >>> >> but
>> >>> >> the AP documents on disk 1 have an avg doc length
>> >>> of 353.
>> >>> >>
>> >>> >> I have found on other collections that any
>> >>> advantages of BM25's document
>> >>> >> length normalization fall apart when 'average
>> >>> document length' doesn't
>> >>> >> make
>> >>> >> a whole lot of sense (cases like this).
>> >>> >>
>> >>> >> For this same reason, I've only found a few
>> >>> collections where BM25's doc
>> >>> >> length normalization is really significantly
>> >>> better than Lucene's.
>> >>> >>
>> >>> >> In my opinion, the results on a particular test
>> >>> collection or 2 have
>> >>> >> perhaps
>> >>> >> been taken too far and created a myth that BM25 is
>> >>> always superior to
>> >>> >> Lucene's scoring... this is not true!
>> >>> >>
>> >>> >> On Tue, Feb 16, 2010 at 9:46 AM, Ivan Provalov
>> >>> <iprovalo@yahoo.com>
>> >>> >> wrote:
>> >>> >>
>> >>> >>  I applied the Lucene patch mentioned in
>> >>> >>> https://issues.apache.org/jira/browse/LUCENE-2091 and
>> >>> ran the MAP
>> >>> >>> numbers
>> >>> >>> on TREC-3 collection using topics
>> >>> 151-200.  I am not getting worse
>> >>> >>> results
>> >>> >>> comparing to Lucene DefaultSimilarity.  I
>> >>> suspect, I am not using it
>> >>> >>> correctly.  I have single field
>> >>> documents.  This is the process I use:
>> >>> >>>
>> >>> >>> 1. During the indexing, I am setting the
>> >>> similarity to BM25 as such:
>> >>> >>>
>> >>> >>> IndexWriter writer = new IndexWriter(dir, new
>> >>> StandardAnalyzer(
>> >>> >>>
>> >>>    Version.LUCENE_CURRENT), true,
>> >>> >>>
>> >>>    IndexWriter.MaxFieldLength.UNLIMITED);
>> >>> >>> writer.setSimilarity(new BM25Similarity());
>> >>> >>>
>> >>> >>> 2. During the Precision/Recall measurements, I
>> >>> am using a
>> >>> >>> SimpleBM25QQParser extension I added to the
>> >>> benchmark:
>> >>> >>>
>> >>> >>> QualityQueryParser qqParser = new
>> >>> SimpleBM25QQParser("title", "TEXT");
>> >>> >>>
>> >>> >>>
>> >>> >>> 3. Here is the parser code (I set an avg doc
>> >>> length here):
>> >>> >>>
>> >>> >>> public Query parse(QualityQuery qq) throws
>> >>> ParseException {
>> >>> >>>   BM25Parameters.setAverageLength(indexField,
>> >>> 798.30f);//avg doc length
>> >>> >>>   BM25Parameters.setB(0.5f);//tried
>> >>> default values
>> >>> >>>   BM25Parameters.setK1(2f);
>> >>> >>>   return query = new
>> >>> BM25BooleanQuery(qq.getValue(qqName), indexField,
>> >>> >>> new
>> >>> >>> StandardAnalyzer(Version.LUCENE_CURRENT));
>> >>> >>> }
>> >>> >>>
>> >>> >>> 4. The searcher is using BM25 similarity:
>> >>> >>>
>> >>> >>> Searcher searcher = new IndexSearcher(dir,
>> >>> true);
>> >>> >>> searcher.setSimilarity(sim);
>> >>> >>>
>> >>> >>> Am I missing some steps?  Does anyone
>> >>> have experience with this code?
>> >>> >>>
>> >>> >>> Thanks,
>> >>> >>>
>> >>> >>> Ivan
>> >>> >>>
>> >>> >>>
>> >>> >>>
>> >>> >>>
>> >>> >>>
>> >>> ---------------------------------------------------------------------
>> >>> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>> >>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>> >>> >>>
>> >>> >>>
>> >>> >>>
>> >>> >>
>> >>> >>
>> >>> > --
>> >>> >
>> >>> -----------------------------------------------------------
>> >>> > Joaqun Prez Iglesias
>> >>> > Dpto. Lenguajes y Sistemas Informticos
>> >>> > E.T.S.I. Informtica (UNED)
>> >>> > Ciudad Universitaria
>> >>> > C/ Juan del Rosal n 16
>> >>> > 28040 Madrid - Spain
>> >>> > Phone. +34 91 398 89 19
>> >>> > Fax    +34 91 398 65 35
>> >>> > Office  2.11
>> >>> > Email: joaquin.perez@lsi.uned.es
>> >>> > web:   http://nlp.uned.es/~jperezi/
>> <http://nlp.uned.es/%7Ejperezi/><
>> http://nlp.uned.es/%7Ejperezi/>
>> >>> >
>> >>> -----------------------------------------------------------
>> >>> >
>> >>> >
>> >>> >
>> >>> ---------------------------------------------------------------------
>> >>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>> >
>> >>> >
>> >>>
>> >>>
>> >>> --
>> >>> Robert Muir
>> >>> rcmuir@gmail.com
>> >>>
>> >>
>> >>
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 19:48:21 2010
Return-Path: <java-user-return-45031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20443 invoked from network); 16 Feb 2010 19:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 19:48:21 -0000
Received: (qmail 35625 invoked by uid 500); 16 Feb 2010 19:48:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35544 invoked by uid 500); 16 Feb 2010 19:48:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35534 invoked by uid 99); 16 Feb 2010 19:48:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 19:48:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.216.187 as permitted sender)
Received: from [209.85.216.187] (HELO mail-px0-f187.google.com) (209.85.216.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 19:48:08 +0000
Received: by pxi17 with SMTP id 17so2750150pxi.11
        for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 11:47:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=kz5fXCXVpjMK6+9rfNdTcN4QTHl0OfKw3u8WSnYerqw=;
        b=akPU36/hK2gmFuI2H8p2wXuRveWn+Q5ZgcIjO6CoE/Oq5HhwF+DG0QT+YbCNvP0/OT
         d+r9I/VoOQcK4nCYvLyztXJPPsuiQcGlNYGrSn1ZlJt1oCmZf+YK6VIc/70JnPNNFvFm
         SV3m7BCrxf6A8BtMGWfdh/8k174QlOUN6fENc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=SUCnWLgz6WMLXIFWiXR87UgxTgrMhHlkQ6WMXkBg/kq7MTWPSDlpkV6b3u+6njhCZD
         RL96XnIYee4ElxmL0/vZCtk+KOfcdG3BwEXj1gPrpal4eVxxAUGKKiLZbR5yh/mBirP1
         1MLJdaI1Tqnjfg653k0zNd3feBtpqMBVaNTO8=
MIME-Version: 1.0
Received: by 10.115.144.20 with SMTP id w20mr4679705wan.102.1266349668125; 
	Tue, 16 Feb 2010 11:47:48 -0800 (PST)
In-Reply-To: <83b692afc347b683f7f0b4263879b342.squirrel@correo.uned.es>
References: <245804.25778.qm@web113302.mail.gq1.yahoo.com> 
	<141ee80356de1891826922a8185f4317.squirrel@correo.uned.es> 
	<833c7a901e04c6f6287f2a439cdb4d35.squirrel@correo.uned.es> 
	<8f0ad1f31002161107l26b503fjec173e9c0e7c5f46@mail.gmail.com> 
	<83b692afc347b683f7f0b4263879b342.squirrel@correo.uned.es>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 16 Feb 2010 14:47:28 -0500
Message-ID: <8f0ad1f31002161147v4e1991edubf7f22978728168d@mail.gmail.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163646cdfe214b99047fbd02cc

--00163646cdfe214b99047fbd02cc
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Joaquin, I don't see this as a flame war? First of all I'd like to
personally thank you for your excellent BM25 implementation!

I think the selection of a retrieval model depends highly on the
language/indexing approach, i.e. if we were talking East Asian languages I
think we want a probabilistic model: no argument there!

All i said was that it is a myth that BM25 is "always" better than Lucene's
scoring model, it really depends on what you are trying to do, how you are
indexing your text, properties of your corpus, how your queries are running=
.

I don't even want to come across as advocating the lnb.ltc approach either,
sure I wrote the patch, but this means nothing. I only like it as its
currently a simple integration into Lucene, but long-term its best if we ca=
n
support other models also!

Finally I think there is something to be said for Lucene's default retrieva=
l
model, which in my (non-english) findings across the board isn't terrible a=
t
all... then again I am working with languages where analysis is really the
thing holding Lucene back, not scoring.

On Tue, Feb 16, 2010 at 2:40 PM, JOAQUIN PEREZ IGLESIAS <
joaquin.perez@lsi.uned.es> wrote:

> Just some final comments (as I said I'm not interested in flame wars),
>
> If I obtain better results there are not problem with pooling otherwise i=
t
> is biased.
> The only important thing (in my opinion) is that it cannot be said that
> BM25 is a myth.
> Yes, you are right there is not an only ranking model that beats the rest=
,
> but there are models that generally show a better performance in more
> cases.
>
> About CLEF I have had the same experience (VSM vs BM25) on Spanish and
> English (WebCLEF) and Q&A (ResPubliQA)
>
> Ivan checks the parameters (b and k1), probably you can improve your
> results. (that's the bad part of BM25).
>
> Finally we are just speaking of personal experience, so obviously you
> should use the best model for your data and your own experience, on IR
> there are not myths neither best ranking models. If any of us is able to
> find the &#8220;best&#8221;  ranking model, or is able to prove that any
> state-of-the art is a myth he should send these results to the SIGIR
> conference.
>
> Ivan, Robert good luck with your experiments, as I said the good part of
> IR is that you can always make experiments on your own.
>
> > I don't think its really a competition, I think preferably we should ha=
ve
> > the flexibility to change the scoring model in lucene actually?
> >
> > I have found lots of cases where VSM improves on BM25, but then again I
> > don't work with TREC stuff, as I work with non-english collections.
> >
> > It doesn't contradict years of research to say that VSM isn't a
> > state-of-the-art model, besides the TREC-4 results, there are CLEF
> results
> > where VSM models perform competitively or exceed (Finnish, Russian, etc=
)
> > BM25/DFR/etc.
> >
> > It depends on the collection, there isn't a 'best retrieval formula'.
> >
> > Note: I have no bias against BM-25, but its definitely a myth to say
> there
> > is a single retrieval formula that is the 'best' across the board.
> >
> >
> > On Tue, Feb 16, 2010 at 1:53 PM, JOAQUIN PEREZ IGLESIAS <
> > joaquin.perez@lsi.uned.es> wrote:
> >
> >> By the way,
> >>
> >> I don't want to start a flame war VSM vs BM25, but I really believe th=
at
> >> I
> >> have to express my opinion as Robert has done. In my experience, I hav=
e
> >> never found a case where VSM improves significantly BM25. Maybe you ca=
n
> >> find some cases under some very specific collection characteristics, (=
as
> >> average length of 300 vs 3000) or a bad usage of BM25 (not proper
> >> parameters) where it can happen.
> >>
> >> BM25 is not just only a different way of length normalization, it is
> >> based
> >> strongly in the probabilistic framework, and parametrises frequencies
> >> and
> >> length. This is probably the most successful ranking model of the last
> >> years in Information Retrieval.
> >>
> >> I have never read a paper where VSM  improves any of the
> >> state-of-the-art
> >> ranking models (Language Models, DFR, BM25,...),  although the VSM wit=
h
> >> pivoted normalisation length can obtain nice results. This can be prov=
ed
> >> checking the last years of the TREC competition.
> >>
> >> Honestly to say that is a myth that BM25 improves VSM breaks the last =
10
> >> or 15 years of research on Information Retrieval, and I really believe
> >> that is not accurate.
> >>
> >> The good thing of Information Retrieval is that you can always make yo=
ur
> >> owns experiments and you can use the experience of a lot of years of
> >> research.
> >>
> >> PS: This opinion is based on experiments on TREC and CLEF collections,
> >> obviously we can start a debate about the suitability of this type of
> >> experimentation (concept of relevance, pooling, relevance judgements),
> >> but
> >> this is a much more complex topic and I believe is far from what we ar=
e
> >> dealing here.
> >>
> >> PS2: In relation with TREC4 Cornell used a pivoted length normalisatio=
n
> >> and they were applying pseudo-relevance feedback, what honestly makes
> >> much
> >> more difficult the analysis of the results. Obviously their results we=
re
> >> part of the pool.
> >>
> >> Sorry for the huge mail :-))))
> >>
> >> > Hi Ivan,
> >> >
> >> > the problem is that unfortunately BM25
> >> > cannot be implemented overwriting
> >> > the Similarity interface. Therefore BM25Similarity
> >> > only computes the classic probabilistic IDF (what is
> >> > interesting only at search time).
> >> > If you set BM25Similarity at indexing time
> >> > some basic stats are not stored
> >> > correctly in the segments (like docs length).
> >> >
> >> > When you use BM25BooleanQuery this class
> >> > will set automatically the BM25Similarity for you,
> >> > therefore you don't need to do this explicitly.
> >> >
> >> > I tried to make this implementation with the focus on
> >> > not interfering on the typical use of Lucene (so no changing
> >> > DefaultSimilarity).
> >> >
> >> >> Joaquin, Robert,
> >> >>
> >> >> I followed Joaquin's recommendation and removed the call to set
> >> >> similarity
> >> >> to BM25 explicitly (indexer, searcher).  The results showed 55%
> >> >> improvement for the MAP score (0.141->0.219) over default similarit=
y.
> >> >>
> >> >> Joaquin, how would setting the similarity to BM25 explicitly make t=
he
> >> >> score worse?
> >> >>
> >> >> Thank you,
> >> >>
> >> >> Ivan
> >> >>
> >> >>
> >> >>
> >> >> --- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com> wrote:
> >> >>
> >> >>> From: Robert Muir <rcmuir@gmail.com>
> >> >>> Subject: Re: BM25 Scoring Patch
> >> >>> To: java-user@lucene.apache.org
> >> >>> Date: Tuesday, February 16, 2010, 11:36 AM
> >> >>> yes Ivan, if possible please report
> >> >>> back any findings you can on the
> >> >>> experiments you are doing!
> >> >>>
> >> >>> On Tue, Feb 16, 2010 at 11:22 AM, Joaquin Perez Iglesias
> >> >>> <
> >> >>> joaquin.perez@lsi.uned.es>
> >> >>> wrote:
> >> >>>
> >> >>> > Hi Ivan,
> >> >>> >
> >> >>> > You shouldn't set the BM25Similarity for indexing or
> >> >>> searching.
> >> >>> > Please try removing the lines:
> >> >>> >   writer.setSimilarity(new
> >> >>> BM25Similarity());
> >> >>> >   searcher.setSimilarity(sim);
> >> >>> >
> >> >>> > Please let us/me know if you improve your results with
> >> >>> these changes.
> >> >>> >
> >> >>> >
> >> >>> > Robert Muir escribi=C3=B3:
> >> >>> >
> >> >>> >  Hi Ivan, I've seen many cases where BM25
> >> >>> performs worse than Lucene's
> >> >>> >> default Similarity. Perhaps this is just another
> >> >>> one?
> >> >>> >>
> >> >>> >> Again while I have not worked with this particular
> >> >>> collection, I looked at
> >> >>> >> the statistics and noted that its composed of
> >> >>> several 'sub-collections':
> >> >>> >> for
> >> >>> >> example the PAT documents on disk 3 have an
> >> >>> average doc length of 3543,
> >> >>> >> but
> >> >>> >> the AP documents on disk 1 have an avg doc length
> >> >>> of 353.
> >> >>> >>
> >> >>> >> I have found on other collections that any
> >> >>> advantages of BM25's document
> >> >>> >> length normalization fall apart when 'average
> >> >>> document length' doesn't
> >> >>> >> make
> >> >>> >> a whole lot of sense (cases like this).
> >> >>> >>
> >> >>> >> For this same reason, I've only found a few
> >> >>> collections where BM25's doc
> >> >>> >> length normalization is really significantly
> >> >>> better than Lucene's.
> >> >>> >>
> >> >>> >> In my opinion, the results on a particular test
> >> >>> collection or 2 have
> >> >>> >> perhaps
> >> >>> >> been taken too far and created a myth that BM25 is
> >> >>> always superior to
> >> >>> >> Lucene's scoring... this is not true!
> >> >>> >>
> >> >>> >> On Tue, Feb 16, 2010 at 9:46 AM, Ivan Provalov
> >> >>> <iprovalo@yahoo.com>
> >> >>> >> wrote:
> >> >>> >>
> >> >>> >>  I applied the Lucene patch mentioned in
> >> >>> >>> https://issues.apache.org/jira/browse/LUCENE-2091 and
> >> >>> ran the MAP
> >> >>> >>> numbers
> >> >>> >>> on TREC-3 collection using topics
> >> >>> 151-200.  I am not getting worse
> >> >>> >>> results
> >> >>> >>> comparing to Lucene DefaultSimilarity.  I
> >> >>> suspect, I am not using it
> >> >>> >>> correctly.  I have single field
> >> >>> documents.  This is the process I use:
> >> >>> >>>
> >> >>> >>> 1. During the indexing, I am setting the
> >> >>> similarity to BM25 as such:
> >> >>> >>>
> >> >>> >>> IndexWriter writer =3D new IndexWriter(dir, new
> >> >>> StandardAnalyzer(
> >> >>> >>>
> >> >>>    Version.LUCENE_CURRENT), true,
> >> >>> >>>
> >> >>>    IndexWriter.MaxFieldLength.UNLIMITED);
> >> >>> >>> writer.setSimilarity(new BM25Similarity());
> >> >>> >>>
> >> >>> >>> 2. During the Precision/Recall measurements, I
> >> >>> am using a
> >> >>> >>> SimpleBM25QQParser extension I added to the
> >> >>> benchmark:
> >> >>> >>>
> >> >>> >>> QualityQueryParser qqParser =3D new
> >> >>> SimpleBM25QQParser("title", "TEXT");
> >> >>> >>>
> >> >>> >>>
> >> >>> >>> 3. Here is the parser code (I set an avg doc
> >> >>> length here):
> >> >>> >>>
> >> >>> >>> public Query parse(QualityQuery qq) throws
> >> >>> ParseException {
> >> >>> >>>   BM25Parameters.setAverageLength(indexField,
> >> >>> 798.30f);//avg doc length
> >> >>> >>>   BM25Parameters.setB(0.5f);//tried
> >> >>> default values
> >> >>> >>>   BM25Parameters.setK1(2f);
> >> >>> >>>   return query =3D new
> >> >>> BM25BooleanQuery(qq.getValue(qqName), indexField,
> >> >>> >>> new
> >> >>> >>> StandardAnalyzer(Version.LUCENE_CURRENT));
> >> >>> >>> }
> >> >>> >>>
> >> >>> >>> 4. The searcher is using BM25 similarity:
> >> >>> >>>
> >> >>> >>> Searcher searcher =3D new IndexSearcher(dir,
> >> >>> true);
> >> >>> >>> searcher.setSimilarity(sim);
> >> >>> >>>
> >> >>> >>> Am I missing some steps?  Does anyone
> >> >>> have experience with this code?
> >> >>> >>>
> >> >>> >>> Thanks,
> >> >>> >>>
> >> >>> >>> Ivan
> >> >>> >>>
> >> >>> >>>
> >> >>> >>>
> >> >>> >>>
> >> >>> >>>
> >> >>>
> ---------------------------------------------------------------------
> >> >>> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g
> >> >>> >>> For additional commands, e-mail:
> >> java-user-help@lucene.apache.org
> >> >>> >>>
> >> >>> >>>
> >> >>> >>>
> >> >>> >>
> >> >>> >>
> >> >>> > --
> >> >>> >
> >> >>> -----------------------------------------------------------
> >> >>> > Joaqu=C3=ADn P=C3=A9rez Iglesias
> >> >>> > Dpto. Lenguajes y Sistemas Inform=C3=A1ticos
> >> >>> > E.T.S.I. Inform=C3=A1tica (UNED)
> >> >>> > Ciudad Universitaria
> >> >>> > C/ Juan del Rosal n=C2=BA 16
> >> >>> > 28040 Madrid - Spain
> >> >>> > Phone. +34 91 398 89 19
> >> >>> > Fax    +34 91 398 65 35
> >> >>> > Office  2.11
> >> >>> > Email: joaquin.perez@lsi.uned.es
> >> >>> > web:   http://nlp.uned.es/~jperezi/<http://nlp.uned.es/%7Ejperez=
i/>
> >> <http://nlp.uned.es/%7Ejperezi/><
> >> http://nlp.uned.es/%7Ejperezi/>
> >> >>> >
> >> >>> -----------------------------------------------------------
> >> >>> >
> >> >>> >
> >> >>> >
> >> >>>
> ---------------------------------------------------------------------
> >> >>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >>> > For additional commands, e-mail: java-user-help@lucene.apache.or=
g
> >> >>> >
> >> >>> >
> >> >>>
> >> >>>
> >> >>> --
> >> >>> Robert Muir
> >> >>> rcmuir@gmail.com
> >> >>>
> >> >>
> >> >>
> >> >>
> >> >>
> >> >> -------------------------------------------------------------------=
--
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >> >
> >> >
> >> > --------------------------------------------------------------------=
-
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Robert Muir
rcmuir@gmail.com

--00163646cdfe214b99047fbd02cc--

From java-user-return-45032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 20:24:34 2010
Return-Path: <java-user-return-45032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36700 invoked from network); 16 Feb 2010 20:24:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 20:24:34 -0000
Received: (qmail 85344 invoked by uid 500); 16 Feb 2010 20:24:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85285 invoked by uid 500); 16 Feb 2010 20:24:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85275 invoked by uid 99); 16 Feb 2010 20:24:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 20:24:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of joaquin.perez@lsi.uned.es designates 62.204.192.107 as permitted sender)
Received: from [62.204.192.107] (HELO hermes-siete.uned.es) (62.204.192.107)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 20:24:21 +0000
Received: from hermes-siete.uned.es (localhost.localdomain [127.0.0.1])
	by localhost.uned.es (Postfix) with ESMTP id C122B1E3635
	for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 21:23:58 +0100 (CET)
Received: from correo.uned.es (bm103103-6.uned.es [10.103.103.6])
	by hermes-siete.uned.es (Postfix) with ESMTP id E92531E3636
	for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 21:23:57 +0100 (CET)
Received: from 87.222.27.219
        by correo.uned.es with HTTP;
        Tue, 16 Feb 2010 21:23:58 +0100
Message-ID: <f6c9640e38b683d37da6d5275631f025.squirrel@correo.uned.es>
In-Reply-To: <8f0ad1f31002161147v4e1991edubf7f22978728168d@mail.gmail.com>
References: <245804.25778.qm@web113302.mail.gq1.yahoo.com>
    <141ee80356de1891826922a8185f4317.squirrel@correo.uned.es>
    <833c7a901e04c6f6287f2a439cdb4d35.squirrel@correo.uned.es>
    <8f0ad1f31002161107l26b503fjec173e9c0e7c5f46@mail.gmail.com>
    <83b692afc347b683f7f0b4263879b342.squirrel@correo.uned.es>
    <8f0ad1f31002161147v4e1991edubf7f22978728168d@mail.gmail.com>
Date: Tue, 16 Feb 2010 21:23:58 +0100
Subject: Re: BM25 Scoring Patch
From: "JOAQUIN PEREZ IGLESIAS" <joaquin.perez@lsi.uned.es>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.19
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal

Ok,

I'm not advocating the BM25 patch neither, unfortunately BM25 was not my
idea :-))), and I'm sure that the implementation can be improved.

When you use the BM25 implementation, are you optimising the parameters
specifically per collection? (It is a key factor for improving BM25
performance).

Why do you think that BM25 works better for English than in other
languages (apart of experiments). What are your intuitions?

I dont't have too much experience on languages moreover of Spanish and
English, and it sounds pretty interesting.

Kind Regards.

P.S: Maybe this is not a topic for this list???


> Joaquin, I don't see this as a flame war? First of all I'd like to
> personally thank you for your excellent BM25 implementation!
>
> I think the selection of a retrieval model depends highly on the
> language/indexing approach, i.e. if we were talking East Asian languages I
> think we want a probabilistic model: no argument there!
>
> All i said was that it is a myth that BM25 is "always" better than
> Lucene's
> scoring model, it really depends on what you are trying to do, how you are
> indexing your text, properties of your corpus, how your queries are
> running.
>
> I don't even want to come across as advocating the lnb.ltc approach
> either,
> sure I wrote the patch, but this means nothing. I only like it as its
> currently a simple integration into Lucene, but long-term its best if we
> can
> support other models also!
>
> Finally I think there is something to be said for Lucene's default
> retrieval
> model, which in my (non-english) findings across the board isn't terrible
> at
> all... then again I am working with languages where analysis is really the
> thing holding Lucene back, not scoring.
>
> On Tue, Feb 16, 2010 at 2:40 PM, JOAQUIN PEREZ IGLESIAS <
> joaquin.perez@lsi.uned.es> wrote:
>
>> Just some final comments (as I said I'm not interested in flame wars),
>>
>> If I obtain better results there are not problem with pooling otherwise
>> it
>> is biased.
>> The only important thing (in my opinion) is that it cannot be said that
>> BM25 is a myth.
>> Yes, you are right there is not an only ranking model that beats the
>> rest,
>> but there are models that generally show a better performance in more
>> cases.
>>
>> About CLEF I have had the same experience (VSM vs BM25) on Spanish and
>> English (WebCLEF) and Q&A (ResPubliQA)
>>
>> Ivan checks the parameters (b and k1), probably you can improve your
>> results. (that's the bad part of BM25).
>>
>> Finally we are just speaking of personal experience, so obviously you
>> should use the best model for your data and your own experience, on IR
>> there are not myths neither best ranking models. If any of us is able to
>> find the &#8220;best&#8221;  ranking model, or is able to prove that any
>> state-of-the art is a myth he should send these results to the SIGIR
>> conference.
>>
>> Ivan, Robert good luck with your experiments, as I said the good part of
>> IR is that you can always make experiments on your own.
>>
>> > I don't think its really a competition, I think preferably we should
>> have
>> > the flexibility to change the scoring model in lucene actually?
>> >
>> > I have found lots of cases where VSM improves on BM25, but then again
>> I
>> > don't work with TREC stuff, as I work with non-english collections.
>> >
>> > It doesn't contradict years of research to say that VSM isn't a
>> > state-of-the-art model, besides the TREC-4 results, there are CLEF
>> results
>> > where VSM models perform competitively or exceed (Finnish, Russian,
>> etc)
>> > BM25/DFR/etc.
>> >
>> > It depends on the collection, there isn't a 'best retrieval formula'.
>> >
>> > Note: I have no bias against BM-25, but its definitely a myth to say
>> there
>> > is a single retrieval formula that is the 'best' across the board.
>> >
>> >
>> > On Tue, Feb 16, 2010 at 1:53 PM, JOAQUIN PEREZ IGLESIAS <
>> > joaquin.perez@lsi.uned.es> wrote:
>> >
>> >> By the way,
>> >>
>> >> I don't want to start a flame war VSM vs BM25, but I really believe
>> that
>> >> I
>> >> have to express my opinion as Robert has done. In my experience, I
>> have
>> >> never found a case where VSM improves significantly BM25. Maybe you
>> can
>> >> find some cases under some very specific collection characteristics,
>> (as
>> >> average length of 300 vs 3000) or a bad usage of BM25 (not proper
>> >> parameters) where it can happen.
>> >>
>> >> BM25 is not just only a different way of length normalization, it is
>> >> based
>> >> strongly in the probabilistic framework, and parametrises frequencies
>> >> and
>> >> length. This is probably the most successful ranking model of the
>> last
>> >> years in Information Retrieval.
>> >>
>> >> I have never read a paper where VSM  improves any of the
>> >> state-of-the-art
>> >> ranking models (Language Models, DFR, BM25,...),  although the VSM
>> with
>> >> pivoted normalisation length can obtain nice results. This can be
>> proved
>> >> checking the last years of the TREC competition.
>> >>
>> >> Honestly to say that is a myth that BM25 improves VSM breaks the last
>> 10
>> >> or 15 years of research on Information Retrieval, and I really
>> believe
>> >> that is not accurate.
>> >>
>> >> The good thing of Information Retrieval is that you can always make
>> your
>> >> owns experiments and you can use the experience of a lot of years of
>> >> research.
>> >>
>> >> PS: This opinion is based on experiments on TREC and CLEF
>> collections,
>> >> obviously we can start a debate about the suitability of this type of
>> >> experimentation (concept of relevance, pooling, relevance
>> judgements),
>> >> but
>> >> this is a much more complex topic and I believe is far from what we
>> are
>> >> dealing here.
>> >>
>> >> PS2: In relation with TREC4 Cornell used a pivoted length
>> normalisation
>> >> and they were applying pseudo-relevance feedback, what honestly makes
>> >> much
>> >> more difficult the analysis of the results. Obviously their results
>> were
>> >> part of the pool.
>> >>
>> >> Sorry for the huge mail :-))))
>> >>
>> >> > Hi Ivan,
>> >> >
>> >> > the problem is that unfortunately BM25
>> >> > cannot be implemented overwriting
>> >> > the Similarity interface. Therefore BM25Similarity
>> >> > only computes the classic probabilistic IDF (what is
>> >> > interesting only at search time).
>> >> > If you set BM25Similarity at indexing time
>> >> > some basic stats are not stored
>> >> > correctly in the segments (like docs length).
>> >> >
>> >> > When you use BM25BooleanQuery this class
>> >> > will set automatically the BM25Similarity for you,
>> >> > therefore you don't need to do this explicitly.
>> >> >
>> >> > I tried to make this implementation with the focus on
>> >> > not interfering on the typical use of Lucene (so no changing
>> >> > DefaultSimilarity).
>> >> >
>> >> >> Joaquin, Robert,
>> >> >>
>> >> >> I followed Joaquin's recommendation and removed the call to set
>> >> >> similarity
>> >> >> to BM25 explicitly (indexer, searcher).  The results showed 55%
>> >> >> improvement for the MAP score (0.141->0.219) over default
>> similarity.
>> >> >>
>> >> >> Joaquin, how would setting the similarity to BM25 explicitly make
>> the
>> >> >> score worse?
>> >> >>
>> >> >> Thank you,
>> >> >>
>> >> >> Ivan
>> >> >>
>> >> >>
>> >> >>
>> >> >> --- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com> wrote:
>> >> >>
>> >> >>> From: Robert Muir <rcmuir@gmail.com>
>> >> >>> Subject: Re: BM25 Scoring Patch
>> >> >>> To: java-user@lucene.apache.org
>> >> >>> Date: Tuesday, February 16, 2010, 11:36 AM
>> >> >>> yes Ivan, if possible please report
>> >> >>> back any findings you can on the
>> >> >>> experiments you are doing!
>> >> >>>
>> >> >>> On Tue, Feb 16, 2010 at 11:22 AM, Joaquin Perez Iglesias
>> >> >>> <
>> >> >>> joaquin.perez@lsi.uned.es>
>> >> >>> wrote:
>> >> >>>
>> >> >>> > Hi Ivan,
>> >> >>> >
>> >> >>> > You shouldn't set the BM25Similarity for indexing or
>> >> >>> searching.
>> >> >>> > Please try removing the lines:
>> >> >>> >   writer.setSimilarity(new
>> >> >>> BM25Similarity());
>> >> >>> >   searcher.setSimilarity(sim);
>> >> >>> >
>> >> >>> > Please let us/me know if you improve your results with
>> >> >>> these changes.
>> >> >>> >
>> >> >>> >
>> >> >>> > Robert Muir escribi:
>> >> >>> >
>> >> >>> >  Hi Ivan, I've seen many cases where BM25
>> >> >>> performs worse than Lucene's
>> >> >>> >> default Similarity. Perhaps this is just another
>> >> >>> one?
>> >> >>> >>
>> >> >>> >> Again while I have not worked with this particular
>> >> >>> collection, I looked at
>> >> >>> >> the statistics and noted that its composed of
>> >> >>> several 'sub-collections':
>> >> >>> >> for
>> >> >>> >> example the PAT documents on disk 3 have an
>> >> >>> average doc length of 3543,
>> >> >>> >> but
>> >> >>> >> the AP documents on disk 1 have an avg doc length
>> >> >>> of 353.
>> >> >>> >>
>> >> >>> >> I have found on other collections that any
>> >> >>> advantages of BM25's document
>> >> >>> >> length normalization fall apart when 'average
>> >> >>> document length' doesn't
>> >> >>> >> make
>> >> >>> >> a whole lot of sense (cases like this).
>> >> >>> >>
>> >> >>> >> For this same reason, I've only found a few
>> >> >>> collections where BM25's doc
>> >> >>> >> length normalization is really significantly
>> >> >>> better than Lucene's.
>> >> >>> >>
>> >> >>> >> In my opinion, the results on a particular test
>> >> >>> collection or 2 have
>> >> >>> >> perhaps
>> >> >>> >> been taken too far and created a myth that BM25 is
>> >> >>> always superior to
>> >> >>> >> Lucene's scoring... this is not true!
>> >> >>> >>
>> >> >>> >> On Tue, Feb 16, 2010 at 9:46 AM, Ivan Provalov
>> >> >>> <iprovalo@yahoo.com>
>> >> >>> >> wrote:
>> >> >>> >>
>> >> >>> >>  I applied the Lucene patch mentioned in
>> >> >>> >>> https://issues.apache.org/jira/browse/LUCENE-2091 and
>> >> >>> ran the MAP
>> >> >>> >>> numbers
>> >> >>> >>> on TREC-3 collection using topics
>> >> >>> 151-200.  I am not getting worse
>> >> >>> >>> results
>> >> >>> >>> comparing to Lucene DefaultSimilarity.  I
>> >> >>> suspect, I am not using it
>> >> >>> >>> correctly.  I have single field
>> >> >>> documents.  This is the process I use:
>> >> >>> >>>
>> >> >>> >>> 1. During the indexing, I am setting the
>> >> >>> similarity to BM25 as such:
>> >> >>> >>>
>> >> >>> >>> IndexWriter writer = new IndexWriter(dir, new
>> >> >>> StandardAnalyzer(
>> >> >>> >>>
>> >> >>>    Version.LUCENE_CURRENT), true,
>> >> >>> >>>
>> >> >>>    IndexWriter.MaxFieldLength.UNLIMITED);
>> >> >>> >>> writer.setSimilarity(new BM25Similarity());
>> >> >>> >>>
>> >> >>> >>> 2. During the Precision/Recall measurements, I
>> >> >>> am using a
>> >> >>> >>> SimpleBM25QQParser extension I added to the
>> >> >>> benchmark:
>> >> >>> >>>
>> >> >>> >>> QualityQueryParser qqParser = new
>> >> >>> SimpleBM25QQParser("title", "TEXT");
>> >> >>> >>>
>> >> >>> >>>
>> >> >>> >>> 3. Here is the parser code (I set an avg doc
>> >> >>> length here):
>> >> >>> >>>
>> >> >>> >>> public Query parse(QualityQuery qq) throws
>> >> >>> ParseException {
>> >> >>> >>>   BM25Parameters.setAverageLength(indexField,
>> >> >>> 798.30f);//avg doc length
>> >> >>> >>>   BM25Parameters.setB(0.5f);//tried
>> >> >>> default values
>> >> >>> >>>   BM25Parameters.setK1(2f);
>> >> >>> >>>   return query = new
>> >> >>> BM25BooleanQuery(qq.getValue(qqName), indexField,
>> >> >>> >>> new
>> >> >>> >>> StandardAnalyzer(Version.LUCENE_CURRENT));
>> >> >>> >>> }
>> >> >>> >>>
>> >> >>> >>> 4. The searcher is using BM25 similarity:
>> >> >>> >>>
>> >> >>> >>> Searcher searcher = new IndexSearcher(dir,
>> >> >>> true);
>> >> >>> >>> searcher.setSimilarity(sim);
>> >> >>> >>>
>> >> >>> >>> Am I missing some steps?  Does anyone
>> >> >>> have experience with this code?
>> >> >>> >>>
>> >> >>> >>> Thanks,
>> >> >>> >>>
>> >> >>> >>> Ivan
>> >> >>> >>>
>> >> >>> >>>
>> >> >>> >>>
>> >> >>> >>>
>> >> >>> >>>
>> >> >>>
>> ---------------------------------------------------------------------
>> >> >>> >>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> >> >>> >>> For additional commands, e-mail:
>> >> java-user-help@lucene.apache.org
>> >> >>> >>>
>> >> >>> >>>
>> >> >>> >>>
>> >> >>> >>
>> >> >>> >>
>> >> >>> > --
>> >> >>> >
>> >> >>> -----------------------------------------------------------
>> >> >>> > Joaqun Prez Iglesias
>> >> >>> > Dpto. Lenguajes y Sistemas Informticos
>> >> >>> > E.T.S.I. Informtica (UNED)
>> >> >>> > Ciudad Universitaria
>> >> >>> > C/ Juan del Rosal n 16
>> >> >>> > 28040 Madrid - Spain
>> >> >>> > Phone. +34 91 398 89 19
>> >> >>> > Fax    +34 91 398 65 35
>> >> >>> > Office  2.11
>> >> >>> > Email: joaquin.perez@lsi.uned.es
>> >> >>> > web:
>> http://nlp.uned.es/~jperezi/<http://nlp.uned.es/%7Ejperezi/>
>> >> <http://nlp.uned.es/%7Ejperezi/><
>> >> http://nlp.uned.es/%7Ejperezi/>
>> >> >>> >
>> >> >>> -----------------------------------------------------------
>> >> >>> >
>> >> >>> >
>> >> >>> >
>> >> >>>
>> ---------------------------------------------------------------------
>> >> >>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >>> > For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>> >> >>> >
>> >> >>> >
>> >> >>>
>> >> >>>
>> >> >>> --
>> >> >>> Robert Muir
>> >> >>> rcmuir@gmail.com
>> >> >>>
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >> ---------------------------------------------------------------------
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >>
>> >> >>
>> >> >
>> >> >
>> >> >
>> >> > ---------------------------------------------------------------------
>> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >>
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>> > --
>> > Robert Muir
>> > rcmuir@gmail.com
>> >
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 20:27:33 2010
Return-Path: <java-user-return-45033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37342 invoked from network); 16 Feb 2010 20:27:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 20:27:33 -0000
Received: (qmail 89404 invoked by uid 500); 16 Feb 2010 20:27:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89356 invoked by uid 500); 16 Feb 2010 20:27:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89346 invoked by uid 99); 16 Feb 2010 20:27:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 20:27:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 20:27:21 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by imss.7 (Postfix) with ESMTP id 9B342316F9
	for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 21:26:58 +0100 (CET)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 7BE2D312CD
	for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 21:26:58 +0100 (CET)
Received: from AMor01.home (AAnnecy-256-1-140-121.w83-201.abo.wanadoo.fr [83.201.67.121])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id 1A4B3310AC
	for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 21:26:57 +0100 (CET)
Message-Id: <74B66D90-6AB4-4AA8-B744-FE029E0D9575@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <27611202.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: lucene webinterface
Date: Tue, 16 Feb 2010 21:26:56 +0100
References: <27611202.post@talk.nabble.com>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org


On 16-f=E9vr.-10, at 17:40, luciusvorenus wrote:
> how can I build a  webinterface for my aplication ?  I read =20
> something with
> HTML table and php but i had no idea?
> Can anobody help me?

Lucius,

try solr.

paul=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 20:38:46 2010
Return-Path: <java-user-return-45034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39769 invoked from network); 16 Feb 2010 20:38:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 20:38:46 -0000
Received: (qmail 12546 invoked by uid 500); 16 Feb 2010 20:38:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12475 invoked by uid 500); 16 Feb 2010 20:38:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12464 invoked by uid 99); 16 Feb 2010 20:38:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 20:38:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.222.196 as permitted sender)
Received: from [209.85.222.196] (HELO mail-pz0-f196.google.com) (209.85.222.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 20:38:31 +0000
Received: by pzk34 with SMTP id 34so755578pzk.20
        for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 12:38:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=3uCVVjb7nTqXaX5fD8XxUz6VEWe5XMZMvVpKxZRqfvc=;
        b=rCMW8V/IVZwLQ9Z7gE+ik0d2kdIyjKWWXAHtoswMObOV33EYKHiooVbXtuoRL0CF2A
         S9ADbRM/7+8f3hlsKz5osZdCD7E6W6ZTplVwa8tbazPUcAz6ZDsWZTBiPHMwcwbAqoZL
         ZATRRsXnab2Qs8kn50P86vZ5QnlRhfpaqH1PY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=x/POWyF2e8okU/q0iAwg5XodyE8XOIHONRFE+1TmEwq2832krGSfgVHDcJ+cbhO0nJ
         HkcxGgiId03MGFEEDAgcZ3p5cOyHkYn1GNd3oRI36VDG11/KN/mNMKtwQRtbEcqcVOro
         Fxaa1BaEnuz3hmF+xcuPiZcgnglY43raN6PDI=
MIME-Version: 1.0
Received: by 10.115.103.28 with SMTP id f28mr4743978wam.52.1266352683104; Tue, 
	16 Feb 2010 12:38:03 -0800 (PST)
In-Reply-To: <f6c9640e38b683d37da6d5275631f025.squirrel@correo.uned.es>
References: <245804.25778.qm@web113302.mail.gq1.yahoo.com> 
	<141ee80356de1891826922a8185f4317.squirrel@correo.uned.es> 
	<833c7a901e04c6f6287f2a439cdb4d35.squirrel@correo.uned.es> 
	<8f0ad1f31002161107l26b503fjec173e9c0e7c5f46@mail.gmail.com> 
	<83b692afc347b683f7f0b4263879b342.squirrel@correo.uned.es> 
	<8f0ad1f31002161147v4e1991edubf7f22978728168d@mail.gmail.com> 
	<f6c9640e38b683d37da6d5275631f025.squirrel@correo.uned.es>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 16 Feb 2010 15:37:43 -0500
Message-ID: <8f0ad1f31002161237r70e3b9act33c81c15e645b3ad@mail.gmail.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64cc9c2d63ccd047fbdb590
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64cc9c2d63ccd047fbdb590
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Joaquin, I have a typical methodology where I don't optimize any scoring
params: be it BM25 params (I stick with your defaults), or lnb.ltc params (=
i
stick with default slope). When doing query expansion i don't modify the
defaults for MoreLikeThis either.

I've found that changing these params can have a significant difference in
retrieval performance, which is interesting, but I'm typically focused on
text analysis (how is the text indexed?/stemming/stopwords). I also feel
that such things are corpus-specific, which i generally try to avoid in my
work...

for example, in analysis work,  the text collection often has a majority of
text in a specific tense (i.e. news), so i don't at all try to tune any par=
t
of analysis as I worry this would be corpus-specific... I do the same with
scoring.

As far as why some models perform better than others for certain languages,
I think this is a million-dollar question. But my intuition (I don't have
references or anything to back this up), is that probabilistic models
outperform vector-space models when you are using approaches like n-grams:
you don't have nice stopwords lists, stemming, decompounding etc.

This is particularly interesting to me, as probabilistic model + ngram is a
very general multilingual approach that I would like to have working well i=
n
Lucene, its also important as a "default" when we don't have a nicely tuned
analyzer available that will work well with a vector space model. In my
opinion, vector-space tends to fall apart without good language support.


On Tue, Feb 16, 2010 at 3:23 PM, JOAQUIN PEREZ IGLESIAS <
joaquin.perez@lsi.uned.es> wrote:

> Ok,
>
> I'm not advocating the BM25 patch neither, unfortunately BM25 was not my
> idea :-))), and I'm sure that the implementation can be improved.
>
> When you use the BM25 implementation, are you optimising the parameters
> specifically per collection? (It is a key factor for improving BM25
> performance).
>
> Why do you think that BM25 works better for English than in other
> languages (apart of experiments). What are your intuitions?
>
> I dont't have too much experience on languages moreover of Spanish and
> English, and it sounds pretty interesting.
>
> Kind Regards.
>
> P.S: Maybe this is not a topic for this list???
>
>
> > Joaquin, I don't see this as a flame war? First of all I'd like to
> > personally thank you for your excellent BM25 implementation!
> >
> > I think the selection of a retrieval model depends highly on the
> > language/indexing approach, i.e. if we were talking East Asian language=
s
> I
> > think we want a probabilistic model: no argument there!
> >
> > All i said was that it is a myth that BM25 is "always" better than
> > Lucene's
> > scoring model, it really depends on what you are trying to do, how you
> are
> > indexing your text, properties of your corpus, how your queries are
> > running.
> >
> > I don't even want to come across as advocating the lnb.ltc approach
> > either,
> > sure I wrote the patch, but this means nothing. I only like it as its
> > currently a simple integration into Lucene, but long-term its best if w=
e
> > can
> > support other models also!
> >
> > Finally I think there is something to be said for Lucene's default
> > retrieval
> > model, which in my (non-english) findings across the board isn't terrib=
le
> > at
> > all... then again I am working with languages where analysis is really
> the
> > thing holding Lucene back, not scoring.
> >
> > On Tue, Feb 16, 2010 at 2:40 PM, JOAQUIN PEREZ IGLESIAS <
> > joaquin.perez@lsi.uned.es> wrote:
> >
> >> Just some final comments (as I said I'm not interested in flame wars),
> >>
> >> If I obtain better results there are not problem with pooling otherwis=
e
> >> it
> >> is biased.
> >> The only important thing (in my opinion) is that it cannot be said tha=
t
> >> BM25 is a myth.
> >> Yes, you are right there is not an only ranking model that beats the
> >> rest,
> >> but there are models that generally show a better performance in more
> >> cases.
> >>
> >> About CLEF I have had the same experience (VSM vs BM25) on Spanish and
> >> English (WebCLEF) and Q&A (ResPubliQA)
> >>
> >> Ivan checks the parameters (b and k1), probably you can improve your
> >> results. (that's the bad part of BM25).
> >>
> >> Finally we are just speaking of personal experience, so obviously you
> >> should use the best model for your data and your own experience, on IR
> >> there are not myths neither best ranking models. If any of us is able =
to
> >> find the &#8220;best&#8221;  ranking model, or is able to prove that a=
ny
> >> state-of-the art is a myth he should send these results to the SIGIR
> >> conference.
> >>
> >> Ivan, Robert good luck with your experiments, as I said the good part =
of
> >> IR is that you can always make experiments on your own.
> >>
> >> > I don't think its really a competition, I think preferably we should
> >> have
> >> > the flexibility to change the scoring model in lucene actually?
> >> >
> >> > I have found lots of cases where VSM improves on BM25, but then agai=
n
> >> I
> >> > don't work with TREC stuff, as I work with non-english collections.
> >> >
> >> > It doesn't contradict years of research to say that VSM isn't a
> >> > state-of-the-art model, besides the TREC-4 results, there are CLEF
> >> results
> >> > where VSM models perform competitively or exceed (Finnish, Russian,
> >> etc)
> >> > BM25/DFR/etc.
> >> >
> >> > It depends on the collection, there isn't a 'best retrieval formula'=
.
> >> >
> >> > Note: I have no bias against BM-25, but its definitely a myth to say
> >> there
> >> > is a single retrieval formula that is the 'best' across the board.
> >> >
> >> >
> >> > On Tue, Feb 16, 2010 at 1:53 PM, JOAQUIN PEREZ IGLESIAS <
> >> > joaquin.perez@lsi.uned.es> wrote:
> >> >
> >> >> By the way,
> >> >>
> >> >> I don't want to start a flame war VSM vs BM25, but I really believe
> >> that
> >> >> I
> >> >> have to express my opinion as Robert has done. In my experience, I
> >> have
> >> >> never found a case where VSM improves significantly BM25. Maybe you
> >> can
> >> >> find some cases under some very specific collection characteristics=
,
> >> (as
> >> >> average length of 300 vs 3000) or a bad usage of BM25 (not proper
> >> >> parameters) where it can happen.
> >> >>
> >> >> BM25 is not just only a different way of length normalization, it i=
s
> >> >> based
> >> >> strongly in the probabilistic framework, and parametrises frequenci=
es
> >> >> and
> >> >> length. This is probably the most successful ranking model of the
> >> last
> >> >> years in Information Retrieval.
> >> >>
> >> >> I have never read a paper where VSM  improves any of the
> >> >> state-of-the-art
> >> >> ranking models (Language Models, DFR, BM25,...),  although the VSM
> >> with
> >> >> pivoted normalisation length can obtain nice results. This can be
> >> proved
> >> >> checking the last years of the TREC competition.
> >> >>
> >> >> Honestly to say that is a myth that BM25 improves VSM breaks the la=
st
> >> 10
> >> >> or 15 years of research on Information Retrieval, and I really
> >> believe
> >> >> that is not accurate.
> >> >>
> >> >> The good thing of Information Retrieval is that you can always make
> >> your
> >> >> owns experiments and you can use the experience of a lot of years o=
f
> >> >> research.
> >> >>
> >> >> PS: This opinion is based on experiments on TREC and CLEF
> >> collections,
> >> >> obviously we can start a debate about the suitability of this type =
of
> >> >> experimentation (concept of relevance, pooling, relevance
> >> judgements),
> >> >> but
> >> >> this is a much more complex topic and I believe is far from what we
> >> are
> >> >> dealing here.
> >> >>
> >> >> PS2: In relation with TREC4 Cornell used a pivoted length
> >> normalisation
> >> >> and they were applying pseudo-relevance feedback, what honestly mak=
es
> >> >> much
> >> >> more difficult the analysis of the results. Obviously their results
> >> were
> >> >> part of the pool.
> >> >>
> >> >> Sorry for the huge mail :-))))
> >> >>
> >> >> > Hi Ivan,
> >> >> >
> >> >> > the problem is that unfortunately BM25
> >> >> > cannot be implemented overwriting
> >> >> > the Similarity interface. Therefore BM25Similarity
> >> >> > only computes the classic probabilistic IDF (what is
> >> >> > interesting only at search time).
> >> >> > If you set BM25Similarity at indexing time
> >> >> > some basic stats are not stored
> >> >> > correctly in the segments (like docs length).
> >> >> >
> >> >> > When you use BM25BooleanQuery this class
> >> >> > will set automatically the BM25Similarity for you,
> >> >> > therefore you don't need to do this explicitly.
> >> >> >
> >> >> > I tried to make this implementation with the focus on
> >> >> > not interfering on the typical use of Lucene (so no changing
> >> >> > DefaultSimilarity).
> >> >> >
> >> >> >> Joaquin, Robert,
> >> >> >>
> >> >> >> I followed Joaquin's recommendation and removed the call to set
> >> >> >> similarity
> >> >> >> to BM25 explicitly (indexer, searcher).  The results showed 55%
> >> >> >> improvement for the MAP score (0.141->0.219) over default
> >> similarity.
> >> >> >>
> >> >> >> Joaquin, how would setting the similarity to BM25 explicitly mak=
e
> >> the
> >> >> >> score worse?
> >> >> >>
> >> >> >> Thank you,
> >> >> >>
> >> >> >> Ivan
> >> >> >>
> >> >> >>
> >> >> >>
> >> >> >> --- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com> wrote:
> >> >> >>
> >> >> >>> From: Robert Muir <rcmuir@gmail.com>
> >> >> >>> Subject: Re: BM25 Scoring Patch
> >> >> >>> To: java-user@lucene.apache.org
> >> >> >>> Date: Tuesday, February 16, 2010, 11:36 AM
> >> >> >>> yes Ivan, if possible please report
> >> >> >>> back any findings you can on the
> >> >> >>> experiments you are doing!
> >> >> >>>
> >> >> >>> On Tue, Feb 16, 2010 at 11:22 AM, Joaquin Perez Iglesias
> >> >> >>> <
> >> >> >>> joaquin.perez@lsi.uned.es>
> >> >> >>> wrote:
> >> >> >>>
> >> >> >>> > Hi Ivan,
> >> >> >>> >
> >> >> >>> > You shouldn't set the BM25Similarity for indexing or
> >> >> >>> searching.
> >> >> >>> > Please try removing the lines:
> >> >> >>> >   writer.setSimilarity(new
> >> >> >>> BM25Similarity());
> >> >> >>> >   searcher.setSimilarity(sim);
> >> >> >>> >
> >> >> >>> > Please let us/me know if you improve your results with
> >> >> >>> these changes.
> >> >> >>> >
> >> >> >>> >
> >> >> >>> > Robert Muir escribi=C3=B3:
> >> >> >>> >
> >> >> >>> >  Hi Ivan, I've seen many cases where BM25
> >> >> >>> performs worse than Lucene's
> >> >> >>> >> default Similarity. Perhaps this is just another
> >> >> >>> one?
> >> >> >>> >>
> >> >> >>> >> Again while I have not worked with this particular
> >> >> >>> collection, I looked at
> >> >> >>> >> the statistics and noted that its composed of
> >> >> >>> several 'sub-collections':
> >> >> >>> >> for
> >> >> >>> >> example the PAT documents on disk 3 have an
> >> >> >>> average doc length of 3543,
> >> >> >>> >> but
> >> >> >>> >> the AP documents on disk 1 have an avg doc length
> >> >> >>> of 353.
> >> >> >>> >>
> >> >> >>> >> I have found on other collections that any
> >> >> >>> advantages of BM25's document
> >> >> >>> >> length normalization fall apart when 'average
> >> >> >>> document length' doesn't
> >> >> >>> >> make
> >> >> >>> >> a whole lot of sense (cases like this).
> >> >> >>> >>
> >> >> >>> >> For this same reason, I've only found a few
> >> >> >>> collections where BM25's doc
> >> >> >>> >> length normalization is really significantly
> >> >> >>> better than Lucene's.
> >> >> >>> >>
> >> >> >>> >> In my opinion, the results on a particular test
> >> >> >>> collection or 2 have
> >> >> >>> >> perhaps
> >> >> >>> >> been taken too far and created a myth that BM25 is
> >> >> >>> always superior to
> >> >> >>> >> Lucene's scoring... this is not true!
> >> >> >>> >>
> >> >> >>> >> On Tue, Feb 16, 2010 at 9:46 AM, Ivan Provalov
> >> >> >>> <iprovalo@yahoo.com>
> >> >> >>> >> wrote:
> >> >> >>> >>
> >> >> >>> >>  I applied the Lucene patch mentioned in
> >> >> >>> >>> https://issues.apache.org/jira/browse/LUCENE-2091 and
> >> >> >>> ran the MAP
> >> >> >>> >>> numbers
> >> >> >>> >>> on TREC-3 collection using topics
> >> >> >>> 151-200.  I am not getting worse
> >> >> >>> >>> results
> >> >> >>> >>> comparing to Lucene DefaultSimilarity.  I
> >> >> >>> suspect, I am not using it
> >> >> >>> >>> correctly.  I have single field
> >> >> >>> documents.  This is the process I use:
> >> >> >>> >>>
> >> >> >>> >>> 1. During the indexing, I am setting the
> >> >> >>> similarity to BM25 as such:
> >> >> >>> >>>
> >> >> >>> >>> IndexWriter writer =3D new IndexWriter(dir, new
> >> >> >>> StandardAnalyzer(
> >> >> >>> >>>
> >> >> >>>    Version.LUCENE_CURRENT), true,
> >> >> >>> >>>
> >> >> >>>    IndexWriter.MaxFieldLength.UNLIMITED);
> >> >> >>> >>> writer.setSimilarity(new BM25Similarity());
> >> >> >>> >>>
> >> >> >>> >>> 2. During the Precision/Recall measurements, I
> >> >> >>> am using a
> >> >> >>> >>> SimpleBM25QQParser extension I added to the
> >> >> >>> benchmark:
> >> >> >>> >>>
> >> >> >>> >>> QualityQueryParser qqParser =3D new
> >> >> >>> SimpleBM25QQParser("title", "TEXT");
> >> >> >>> >>>
> >> >> >>> >>>
> >> >> >>> >>> 3. Here is the parser code (I set an avg doc
> >> >> >>> length here):
> >> >> >>> >>>
> >> >> >>> >>> public Query parse(QualityQuery qq) throws
> >> >> >>> ParseException {
> >> >> >>> >>>   BM25Parameters.setAverageLength(indexField,
> >> >> >>> 798.30f);//avg doc length
> >> >> >>> >>>   BM25Parameters.setB(0.5f);//tried
> >> >> >>> default values
> >> >> >>> >>>   BM25Parameters.setK1(2f);
> >> >> >>> >>>   return query =3D new
> >> >> >>> BM25BooleanQuery(qq.getValue(qqName), indexField,
> >> >> >>> >>> new
> >> >> >>> >>> StandardAnalyzer(Version.LUCENE_CURRENT));
> >> >> >>> >>> }
> >> >> >>> >>>
> >> >> >>> >>> 4. The searcher is using BM25 similarity:
> >> >> >>> >>>
> >> >> >>> >>> Searcher searcher =3D new IndexSearcher(dir,
> >> >> >>> true);
> >> >> >>> >>> searcher.setSimilarity(sim);
> >> >> >>> >>>
> >> >> >>> >>> Am I missing some steps?  Does anyone
> >> >> >>> have experience with this code?
> >> >> >>> >>>
> >> >> >>> >>> Thanks,
> >> >> >>> >>>
> >> >> >>> >>> Ivan
> >> >> >>> >>>
> >> >> >>> >>>
> >> >> >>> >>>
> >> >> >>> >>>
> >> >> >>> >>>
> >> >> >>>
> >> ---------------------------------------------------------------------
> >> >> >>> >>> To unsubscribe, e-mail:
> >> java-user-unsubscribe@lucene.apache.org
> >> >> >>> >>> For additional commands, e-mail:
> >> >> java-user-help@lucene.apache.org
> >> >> >>> >>>
> >> >> >>> >>>
> >> >> >>> >>>
> >> >> >>> >>
> >> >> >>> >>
> >> >> >>> > --
> >> >> >>> >
> >> >> >>> -----------------------------------------------------------
> >> >> >>> > Joaqu=C3=ADn P=C3=A9rez Iglesias
> >> >> >>> > Dpto. Lenguajes y Sistemas Inform=C3=A1ticos
> >> >> >>> > E.T.S.I. Inform=C3=A1tica (UNED)
> >> >> >>> > Ciudad Universitaria
> >> >> >>> > C/ Juan del Rosal n=C2=BA 16
> >> >> >>> > 28040 Madrid - Spain
> >> >> >>> > Phone. +34 91 398 89 19
> >> >> >>> > Fax    +34 91 398 65 35
> >> >> >>> > Office  2.11
> >> >> >>> > Email: joaquin.perez@lsi.uned.es
> >> >> >>> > web:
> >> http://nlp.uned.es/~jperezi/ <http://nlp.uned.es/%7Ejperezi/><
> http://nlp.uned.es/%7Ejperezi/>
> >> >> <http://nlp.uned.es/%7Ejperezi/><
> >> >> http://nlp.uned.es/%7Ejperezi/>
> >> >> >>> >
> >> >> >>> -----------------------------------------------------------
> >> >> >>> >
> >> >> >>> >
> >> >> >>> >
> >> >> >>>
> >> ---------------------------------------------------------------------
> >> >> >>> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> >> >> >>> > For additional commands, e-mail:
> >> java-user-help@lucene.apache.org
> >> >> >>> >
> >> >> >>> >
> >> >> >>>
> >> >> >>>
> >> >> >>> --
> >> >> >>> Robert Muir
> >> >> >>> rcmuir@gmail.com
> >> >> >>>
> >> >> >>
> >> >> >>
> >> >> >>
> >> >> >>
> >> >> >>
> ---------------------------------------------------------------------
> >> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> >> For additional commands, e-mail: java-user-help@lucene.apache.or=
g
> >> >> >>
> >> >> >>
> >> >> >
> >> >> >
> >> >> >
> >> >> >
> ---------------------------------------------------------------------
> >> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >> >
> >> >> >
> >> >>
> >> >>
> >> >>
> >> >> -------------------------------------------------------------------=
--
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >> >
> >> > --
> >> > Robert Muir
> >> > rcmuir@gmail.com
> >> >
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Robert Muir
rcmuir@gmail.com

--0016e64cc9c2d63ccd047fbdb590--

From java-user-return-45035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 22:01:06 2010
Return-Path: <java-user-return-45035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74691 invoked from network); 16 Feb 2010 22:01:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 22:01:06 -0000
Received: (qmail 52617 invoked by uid 500); 16 Feb 2010 22:01:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52554 invoked by uid 500); 16 Feb 2010 22:01:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52544 invoked by uid 99); 16 Feb 2010 22:01:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 22:01:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.184] (HELO mail-yx0-f184.google.com) (209.85.210.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 22:00:55 +0000
Received: by yxe14 with SMTP id 14so5438023yxe.20
        for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 14:00:34 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.32.5 with SMTP id k5mr4069731ybj.178.1266357634481; Tue, 
	16 Feb 2010 14:00:34 -0800 (PST)
In-Reply-To: <4B7AA6AC.60703@deri.org>
References: <4B7AA6AC.60703@deri.org>
Date: Tue, 16 Feb 2010 17:00:34 -0500
Message-ID: <9ac0c6aa1002161400x230c3e7dt9dadf4d11d83e386@mail.gmail.com>
Subject: Re: Flex & Segment Merging
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Renaud,

You should be able to do your own merging by overriding the merge
method of Fields/Terms/PostingsConsumer classes, in your codec.  Each
of these classes has a default impl for merge, which just does the
normal postings merging (fields/terms are merged,
docs/positions/payloads are concatenated, mapping around deletions).

Please give feedback how it goes!  These are very new and still very
malleable APIs...

Mike

On Tue, Feb 16, 2010 at 9:07 AM, Renaud Delbru <renaud.delbru@deri.org> wrote:
> Hi,
>
> I would like to start creating a codec with my own set of index files
> (instead of using the ones from the Standard codec). I have multiple
> questions (I haven't yet found answers by myself) like:
> how to specify how these files should be merged ? Is it automatically done
> by the Codec interface ? How is it working currently ?
> Is there some restrictions on how segments can be merged ?
> Is there a way to extend easily the mechanism on how segments are merged ?
>
> Cheers,
> --
> Renaud Delbru
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 16 22:28:59 2010
Return-Path: <java-user-return-45036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95936 invoked from network); 16 Feb 2010 22:28:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Feb 2010 22:28:59 -0000
Received: (qmail 6533 invoked by uid 500); 16 Feb 2010 22:28:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6482 invoked by uid 500); 16 Feb 2010 22:28:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6472 invoked by uid 99); 16 Feb 2010 22:28:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 22:28:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.211.193] (HELO mail-yw0-f193.google.com) (209.85.211.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Feb 2010 22:28:48 +0000
Received: by ywh31 with SMTP id 31so405692ywh.20
        for <java-user@lucene.apache.org>; Tue, 16 Feb 2010 14:28:27 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.243.12 with SMTP id q12mr10083398ybh.233.1266359305742; 
	Tue, 16 Feb 2010 14:28:25 -0800 (PST)
In-Reply-To: <27613452.post@talk.nabble.com>
References: <27613452.post@talk.nabble.com>
Date: Tue, 16 Feb 2010 17:28:25 -0500
Message-ID: <9ac0c6aa1002161428g40c0e73epc54f00a875624c37@mail.gmail.com>
Subject: Re: CompareBottom in FieldComparator
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

The API is definitely confusing.

setBottom is called by Lucene to notify your FieldComparator which
slot holds the "weakest" entry.  You  can at that point cache that
entry (eg IntComparator stores the bottom int value at that point),
or, simply store that bottom slot in an instance variable.

Then, compareBottom is just like compare except compareBottom uses the
bottom slot instead of slot1.

So the simplest and correct thing to do in your comparator is
something like this (note: not tested!):

  int bottomSlot;

  public void setBottom(int slot) {
    bottomSlot = slot;
  }
  public int compareBottom(int slot) {
    return compare(bottomSlot, slot);
  }

Mike

On Tue, Feb 16, 2010 at 2:07 PM, Raimon Bosch <raimon.bosch@gmail.com> wrote:
>
>
> Hi,
>
> Which is the exactly objective of compareBottom and setBottom functions. I
> am using a higher numHits to create TopScoreDocCollectors and
> TopFieldCollectors because I don't understand properly this function.
>
> I think that is a filter to send less documents to sort in comparators, but
> I don't get a way to maximize this amount of documents without forcing
> numHits. If we use a simple comparation the sorter is always sorting our
> most relevant document, so maybe we need a pseudo-random function? We are
> interested in sort a big amount of documents.
>
> Thanks in advance,
> Raimon Bosch.
>
> PD: See
> http://lucene.apache.org/java/2_9_1/api/all/org/apache/lucene/search/TopFieldCollector.html
>
> --
> View this message in context: http://old.nabble.com/CompareBottom-in-FieldComparator-tp27613452p27613452.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 02:10:24 2010
Return-Path: <java-user-return-45037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 295 invoked from network); 17 Feb 2010 02:10:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 02:10:24 -0000
Received: (qmail 49277 invoked by uid 500); 17 Feb 2010 02:10:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49122 invoked by uid 500); 17 Feb 2010 02:10:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49057 invoked by uid 99); 17 Feb 2010 02:10:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 02:10:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bradfordstephens@gmail.com designates 209.85.211.193 as permitted sender)
Received: from [209.85.211.193] (HELO mail-yw0-f193.google.com) (209.85.211.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 02:10:08 +0000
Received: by ywh31 with SMTP id 31so559779ywh.20
        for <multiple recipients>; Tue, 16 Feb 2010 18:09:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=MpliFHfWRUFTKQGbh1zqBlqf1YEWn3LUl0gnVN0TFLY=;
        b=XfAOLrsPmSuiU57L4ibxtFYH8F7kykFgdah4wsnicDEzc9xb5PK69B1pZYsxo/PIc5
         NwW7gUOIqR6I+c8XAKmvO5Kd6Zk0bERhQqTndnddFrv+mWQQGjQKQXVEMhYo8STfsbQs
         B3uU+p/2gvkfaoYCvZeybOCM5nTI+rd0akkHI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=XYIi6k3q1l+BRzf6a7capcF145kFCOa1UdC5wqRXbAgFKls3QmDnR7LEKpb8ACMnel
         zFcC7qvDhJxt8fr/OV/ZpvZgsahm/f4AyuJvCmrKxTQaGtevGQFHm2YgJzm31K6X4Jee
         eW3F+AS/5JFXnsm9CxUEkF/Vcve1wOKXSRH2E=
MIME-Version: 1.0
Received: by 10.90.15.14 with SMTP id 14mr436045ago.2.1266372586690; Tue, 16 
	Feb 2010 18:09:46 -0800 (PST)
Date: Tue, 16 Feb 2010 18:09:46 -0800
Message-ID: <860544ed1002161809u4c768a3ja87dda017ca3428c@mail.gmail.com>
Subject: Seattle Hadoop/Lucene/NoSQL Meetup; Wed Feb 24th, Feat. MongoDB
From: Bradford Stephens <bradfordstephens@gmail.com>
To: core-user@hadoop.apache.org, nosql-discussion@googlegroups.com, 
	solr-user@lucene.apache.org, java-user@lucene.apache.org, 
	hbase-user@hadoop.apache.org, pig-user@hadoop.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Greetings,

It's time for another awesome Seattle Hadoop/Lucene/Scalability/NoSQL Meetup!

As always, it's at the University of Washington, Allen Computer
Science building, Room 303 at 6:45pm. You can find a map here:
http://www.washington.edu/home/maps/southcentral.html?cse

Last month, we had a great talk from Steve McPherson of Razorfish on
their usage of Hadoop. This month, we'll have Richard Kreuter from
MongoDB talking about, well, MongoDB. As well as assorted discussion
on the Hadoop ecosystem.

If you can, please RSVP here (not required, but very nice):
http://www.meetup.com/Seattle-Hadoop-HBase-NoSQL-Meetup/

My cell # is 904-415-3009 if you have questions/get lost.

Cheers,
Bradford

-- 
http://www.drawntoscalehq.com -- Big Data for all. The Big Data Platform.

http://www.roadtofailure.com -- The Fringes of Scalability, Social
Media, and Computer Science

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 08:37:01 2010
Return-Path: <java-user-return-45038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56881 invoked from network); 17 Feb 2010 08:37:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 08:37:01 -0000
Received: (qmail 62168 invoked by uid 500); 17 Feb 2010 08:36:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62069 invoked by uid 500); 17 Feb 2010 08:36:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62059 invoked by uid 99); 17 Feb 2010 08:36:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 08:36:57 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 98.129.35.9 is neither permitted nor denied by domain of yuvalf@answers.com)
Received: from [98.129.35.9] (HELO server505.appriver.com) (98.129.35.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 08:36:46 +0000
X-Policy: GLOBAL - answers.com
X-Primary: yuvalf@answers.com
X-Note: This Email was scanned by AppRiver SecureTide
X-ALLOW: yuvalf@answers.com ALLOWED
X-Virus-Scan: V-
X-Note: Spam Tests Failed: 
X-Country-Path: UNITED STATES->UNITED STATES->UNITED STATES
X-Note-Sending-IP: 98.129.23.14
X-Note-Reverse-DNS: ht01.exg5.exghost.com
X-Note-WHTLIST: yuvalf@answers.com
X-Note: User Rule Hits: 
X-Note: Global Rule Hits: G173 G174 G175 G176 G180 G181 G192 G279 
X-Note: Encrypt Rule Hits: 
X-Note: Mail Class: ALLOWEDSENDER
X-Note: Headers Injected
Received: from [98.129.23.14] (HELO ht01.exg5.exghost.com)
  by server505.appriver.com (CommuniGate Pro SMTP 5.3.2)
  with ESMTPS id 24373778 for java-user@lucene.apache.org; Wed, 17 Feb 2010 02:36:25 -0600
Received: from mbx03.exg5.exghost.com ([169.254.1.200]) by
 ht01.exg5.exghost.com ([98.129.23.14]) with mapi; Wed, 17 Feb 2010 02:36:25
 -0600
From: Yuval Feinstein <yuvalf@answers.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 17 Feb 2010 02:36:19 -0600
Subject: RE: BM25 Scoring Patch
Thread-Topic: BM25 Scoring Patch
Thread-Index: Acqvqtp8PaLeIrA9Q9C3MIt7XhjF3wAAFVPg
Message-ID: <01C4AEE04EB96243BBAA8083CB6514E86070CD8B@MBX03.exg5.exghost.com>
References: <245804.25778.qm@web113302.mail.gq1.yahoo.com>
 	<141ee80356de1891826922a8185f4317.squirrel@correo.uned.es>
 	<833c7a901e04c6f6287f2a439cdb4d35.squirrel@correo.uned.es>
 	<8f0ad1f31002161107l26b503fjec173e9c0e7c5f46@mail.gmail.com>
 	<83b692afc347b683f7f0b4263879b342.squirrel@correo.uned.es>
 	<8f0ad1f31002161147v4e1991edubf7f22978728168d@mail.gmail.com>
 	<f6c9640e38b683d37da6d5275631f025.squirrel@correo.uned.es>
 <8f0ad1f31002161237r70e3b9act33c81c15e645b3ad@mail.gmail.com>
In-Reply-To: <8f0ad1f31002161237r70e3b9act33c81c15e645b3ad@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

VGhpcyBpcyB2ZXJ5IGludGVyZXN0aW5nIGFuZCBtdWNoIGZyaWVuZGxpZXIgdGhhbiBhIGZsYW1l
IHdhci4NCk15IHByYWN0aWNhbCBxdWVzdGlvbiBmb3IgUm9iZXJ0IGlzOg0KSG93IGNhbiB3ZSBt
b2RpZnkgdGhlIEJNMjUgcGF0Y2ggc28gdGhhdCBpdDoNCmEpIEJlY29tZXMgcGFydCBvZiBMdWNl
bmUgY29udHJpYi4NCmIpIEJlIGVhc2llciB0byB1c2UgKHByZXZlbnRpbmcgbWlzdGFrZXMgIHN1
Y2ggYXMgSXZhbidzIHVzaW5nIHRoZSBCTTI1IHNpbWlsYXJpdHkgZHVyaW5nIGluZGV4aW5nKS4N
CmMpIFByb2NlZWRzIHRvd2FyZHMgYSBwbHVnZ2FibGUgc2NvcmluZyBmb3JtdWxhIChJZGVhbGx5
LCB3ZSBzaG91bGQgaGF2ZSBhbiBJbmRleFJlYWRlci9JbmRleFNlYXJjaGVyL0luZGV4V3JpdGVy
DQpjb25zdHJ1Y3RvciBlbmFibGluZyBzcGVjaWZ5aW5nIGEgc2NvcmluZyBtb2RlbCB0aHJvdWdo
IGFuIGVudW0sIHdpdGggdGhlIGRlZmF1bHQgYmVpbmcsIHdlbGwsIEx1Y2VuZSdzIGRlZmF1bHQg
c2NvcmluZyBtb2RlbCk/DQpUaGUgZWFzaWVyIGl0IGlzIHRvIHVzZSwgdGhlIG1vcmUgZXhwZXJp
bWVudHMgcGVvcGxlIGNhbiBtYWtlLCBhbmQgc2VlIGhvdyBpdCB3b3JrcyBmb3IgdGhlbS4NCkEg
ZnV0dXJlICJtYXJrZXRpbmciIHN0ZXAgY291bGQgYmUgYWRkaW5nIEJNMjUgdG8gU29sciwgdG8g
ZnVydGhlciBlYXNlIGV4cGVyaW1lbnRhdGlvbi4NClRJQSwNCll1dmFsDQoNCg0KLS0tLS1Pcmln
aW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IFJvYmVydCBNdWlyIFttYWlsdG86cmNtdWlyQGdtYWls
LmNvbV0NClNlbnQ6IFR1ZXNkYXksIEZlYnJ1YXJ5IDE2LCAyMDEwIDEwOjM4IFBNDQpUbzogamF2
YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpTdWJqZWN0OiBSZTogQk0yNSBTY29yaW5nIFBhdGNo
DQoNCkpvYXF1aW4sIEkgaGF2ZSBhIHR5cGljYWwgbWV0aG9kb2xvZ3kgd2hlcmUgSSBkb24ndCBv
cHRpbWl6ZSBhbnkgc2NvcmluZw0KcGFyYW1zOiBiZSBpdCBCTTI1IHBhcmFtcyAoSSBzdGljayB3
aXRoIHlvdXIgZGVmYXVsdHMpLCBvciBsbmIubHRjIHBhcmFtcyAoaQ0Kc3RpY2sgd2l0aCBkZWZh
dWx0IHNsb3BlKS4gV2hlbiBkb2luZyBxdWVyeSBleHBhbnNpb24gaSBkb24ndCBtb2RpZnkgdGhl
DQpkZWZhdWx0cyBmb3IgTW9yZUxpa2VUaGlzIGVpdGhlci4NCg0KSSd2ZSBmb3VuZCB0aGF0IGNo
YW5naW5nIHRoZXNlIHBhcmFtcyBjYW4gaGF2ZSBhIHNpZ25pZmljYW50IGRpZmZlcmVuY2UgaW4N
CnJldHJpZXZhbCBwZXJmb3JtYW5jZSwgd2hpY2ggaXMgaW50ZXJlc3RpbmcsIGJ1dCBJJ20gdHlw
aWNhbGx5IGZvY3VzZWQgb24NCnRleHQgYW5hbHlzaXMgKGhvdyBpcyB0aGUgdGV4dCBpbmRleGVk
Py9zdGVtbWluZy9zdG9wd29yZHMpLiBJIGFsc28gZmVlbA0KdGhhdCBzdWNoIHRoaW5ncyBhcmUg
Y29ycHVzLXNwZWNpZmljLCB3aGljaCBpIGdlbmVyYWxseSB0cnkgdG8gYXZvaWQgaW4gbXkNCndv
cmsuLi4NCg0KZm9yIGV4YW1wbGUsIGluIGFuYWx5c2lzIHdvcmssICB0aGUgdGV4dCBjb2xsZWN0
aW9uIG9mdGVuIGhhcyBhIG1ham9yaXR5IG9mDQp0ZXh0IGluIGEgc3BlY2lmaWMgdGVuc2UgKGku
ZS4gbmV3cyksIHNvIGkgZG9uJ3QgYXQgYWxsIHRyeSB0byB0dW5lIGFueSBwYXJ0DQpvZiBhbmFs
eXNpcyBhcyBJIHdvcnJ5IHRoaXMgd291bGQgYmUgY29ycHVzLXNwZWNpZmljLi4uIEkgZG8gdGhl
IHNhbWUgd2l0aA0Kc2NvcmluZy4NCg0KQXMgZmFyIGFzIHdoeSBzb21lIG1vZGVscyBwZXJmb3Jt
IGJldHRlciB0aGFuIG90aGVycyBmb3IgY2VydGFpbiBsYW5ndWFnZXMsDQpJIHRoaW5rIHRoaXMg
aXMgYSBtaWxsaW9uLWRvbGxhciBxdWVzdGlvbi4gQnV0IG15IGludHVpdGlvbiAoSSBkb24ndCBo
YXZlDQpyZWZlcmVuY2VzIG9yIGFueXRoaW5nIHRvIGJhY2sgdGhpcyB1cCksIGlzIHRoYXQgcHJv
YmFiaWxpc3RpYyBtb2RlbHMNCm91dHBlcmZvcm0gdmVjdG9yLXNwYWNlIG1vZGVscyB3aGVuIHlv
dSBhcmUgdXNpbmcgYXBwcm9hY2hlcyBsaWtlIG4tZ3JhbXM6DQp5b3UgZG9uJ3QgaGF2ZSBuaWNl
IHN0b3B3b3JkcyBsaXN0cywgc3RlbW1pbmcsIGRlY29tcG91bmRpbmcgZXRjLg0KDQpUaGlzIGlz
IHBhcnRpY3VsYXJseSBpbnRlcmVzdGluZyB0byBtZSwgYXMgcHJvYmFiaWxpc3RpYyBtb2RlbCAr
IG5ncmFtIGlzIGENCnZlcnkgZ2VuZXJhbCBtdWx0aWxpbmd1YWwgYXBwcm9hY2ggdGhhdCBJIHdv
dWxkIGxpa2UgdG8gaGF2ZSB3b3JraW5nIHdlbGwgaW4NCkx1Y2VuZSwgaXRzIGFsc28gaW1wb3J0
YW50IGFzIGEgImRlZmF1bHQiIHdoZW4gd2UgZG9uJ3QgaGF2ZSBhIG5pY2VseSB0dW5lZA0KYW5h
bHl6ZXIgYXZhaWxhYmxlIHRoYXQgd2lsbCB3b3JrIHdlbGwgd2l0aCBhIHZlY3RvciBzcGFjZSBt
b2RlbC4gSW4gbXkNCm9waW5pb24sIHZlY3Rvci1zcGFjZSB0ZW5kcyB0byBmYWxsIGFwYXJ0IHdp
dGhvdXQgZ29vZCBsYW5ndWFnZSBzdXBwb3J0Lg0KDQoNCk9uIFR1ZSwgRmViIDE2LCAyMDEwIGF0
IDM6MjMgUE0sIEpPQVFVSU4gUEVSRVogSUdMRVNJQVMgPA0Kam9hcXVpbi5wZXJlekBsc2kudW5l
ZC5lcz4gd3JvdGU6DQoNCj4gT2ssDQo+DQo+IEknbSBub3QgYWR2b2NhdGluZyB0aGUgQk0yNSBw
YXRjaCBuZWl0aGVyLCB1bmZvcnR1bmF0ZWx5IEJNMjUgd2FzIG5vdCBteQ0KPiBpZGVhIDotKSkp
LCBhbmQgSSdtIHN1cmUgdGhhdCB0aGUgaW1wbGVtZW50YXRpb24gY2FuIGJlIGltcHJvdmVkLg0K
Pg0KPiBXaGVuIHlvdSB1c2UgdGhlIEJNMjUgaW1wbGVtZW50YXRpb24sIGFyZSB5b3Ugb3B0aW1p
c2luZyB0aGUgcGFyYW1ldGVycw0KPiBzcGVjaWZpY2FsbHkgcGVyIGNvbGxlY3Rpb24/IChJdCBp
cyBhIGtleSBmYWN0b3IgZm9yIGltcHJvdmluZyBCTTI1DQo+IHBlcmZvcm1hbmNlKS4NCj4NCj4g
V2h5IGRvIHlvdSB0aGluayB0aGF0IEJNMjUgd29ya3MgYmV0dGVyIGZvciBFbmdsaXNoIHRoYW4g
aW4gb3RoZXINCj4gbGFuZ3VhZ2VzIChhcGFydCBvZiBleHBlcmltZW50cykuIFdoYXQgYXJlIHlv
dXIgaW50dWl0aW9ucz8NCj4NCj4gSSBkb250J3QgaGF2ZSB0b28gbXVjaCBleHBlcmllbmNlIG9u
IGxhbmd1YWdlcyBtb3Jlb3ZlciBvZiBTcGFuaXNoIGFuZA0KPiBFbmdsaXNoLCBhbmQgaXQgc291
bmRzIHByZXR0eSBpbnRlcmVzdGluZy4NCj4NCj4gS2luZCBSZWdhcmRzLg0KPg0KPiBQLlM6IE1h
eWJlIHRoaXMgaXMgbm90IGEgdG9waWMgZm9yIHRoaXMgbGlzdD8/Pw0KPg0KPg0KPiA+IEpvYXF1
aW4sIEkgZG9uJ3Qgc2VlIHRoaXMgYXMgYSBmbGFtZSB3YXI/IEZpcnN0IG9mIGFsbCBJJ2QgbGlr
ZSB0bw0KPiA+IHBlcnNvbmFsbHkgdGhhbmsgeW91IGZvciB5b3VyIGV4Y2VsbGVudCBCTTI1IGlt
cGxlbWVudGF0aW9uIQ0KPiA+DQo+ID4gSSB0aGluayB0aGUgc2VsZWN0aW9uIG9mIGEgcmV0cmll
dmFsIG1vZGVsIGRlcGVuZHMgaGlnaGx5IG9uIHRoZQ0KPiA+IGxhbmd1YWdlL2luZGV4aW5nIGFw
cHJvYWNoLCBpLmUuIGlmIHdlIHdlcmUgdGFsa2luZyBFYXN0IEFzaWFuIGxhbmd1YWdlcw0KPiBJ
DQo+ID4gdGhpbmsgd2Ugd2FudCBhIHByb2JhYmlsaXN0aWMgbW9kZWw6IG5vIGFyZ3VtZW50IHRo
ZXJlIQ0KPiA+DQo+ID4gQWxsIGkgc2FpZCB3YXMgdGhhdCBpdCBpcyBhIG15dGggdGhhdCBCTTI1
IGlzICJhbHdheXMiIGJldHRlciB0aGFuDQo+ID4gTHVjZW5lJ3MNCj4gPiBzY29yaW5nIG1vZGVs
LCBpdCByZWFsbHkgZGVwZW5kcyBvbiB3aGF0IHlvdSBhcmUgdHJ5aW5nIHRvIGRvLCBob3cgeW91
DQo+IGFyZQ0KPiA+IGluZGV4aW5nIHlvdXIgdGV4dCwgcHJvcGVydGllcyBvZiB5b3VyIGNvcnB1
cywgaG93IHlvdXIgcXVlcmllcyBhcmUNCj4gPiBydW5uaW5nLg0KPiA+DQo+ID4gSSBkb24ndCBl
dmVuIHdhbnQgdG8gY29tZSBhY3Jvc3MgYXMgYWR2b2NhdGluZyB0aGUgbG5iLmx0YyBhcHByb2Fj
aA0KPiA+IGVpdGhlciwNCj4gPiBzdXJlIEkgd3JvdGUgdGhlIHBhdGNoLCBidXQgdGhpcyBtZWFu
cyBub3RoaW5nLiBJIG9ubHkgbGlrZSBpdCBhcyBpdHMNCj4gPiBjdXJyZW50bHkgYSBzaW1wbGUg
aW50ZWdyYXRpb24gaW50byBMdWNlbmUsIGJ1dCBsb25nLXRlcm0gaXRzIGJlc3QgaWYgd2UNCj4g
PiBjYW4NCj4gPiBzdXBwb3J0IG90aGVyIG1vZGVscyBhbHNvIQ0KPiA+DQo+ID4gRmluYWxseSBJ
IHRoaW5rIHRoZXJlIGlzIHNvbWV0aGluZyB0byBiZSBzYWlkIGZvciBMdWNlbmUncyBkZWZhdWx0
DQo+ID4gcmV0cmlldmFsDQo+ID4gbW9kZWwsIHdoaWNoIGluIG15IChub24tZW5nbGlzaCkgZmlu
ZGluZ3MgYWNyb3NzIHRoZSBib2FyZCBpc24ndCB0ZXJyaWJsZQ0KPiA+IGF0DQo+ID4gYWxsLi4u
IHRoZW4gYWdhaW4gSSBhbSB3b3JraW5nIHdpdGggbGFuZ3VhZ2VzIHdoZXJlIGFuYWx5c2lzIGlz
IHJlYWxseQ0KPiB0aGUNCj4gPiB0aGluZyBob2xkaW5nIEx1Y2VuZSBiYWNrLCBub3Qgc2Nvcmlu
Zy4NCj4gPg0KPiA+IE9uIFR1ZSwgRmViIDE2LCAyMDEwIGF0IDI6NDAgUE0sIEpPQVFVSU4gUEVS
RVogSUdMRVNJQVMgPA0KPiA+IGpvYXF1aW4ucGVyZXpAbHNpLnVuZWQuZXM+IHdyb3RlOg0KPiA+
DQo+ID4+IEp1c3Qgc29tZSBmaW5hbCBjb21tZW50cyAoYXMgSSBzYWlkIEknbSBub3QgaW50ZXJl
c3RlZCBpbiBmbGFtZSB3YXJzKSwNCj4gPj4NCj4gPj4gSWYgSSBvYnRhaW4gYmV0dGVyIHJlc3Vs
dHMgdGhlcmUgYXJlIG5vdCBwcm9ibGVtIHdpdGggcG9vbGluZyBvdGhlcndpc2UNCj4gPj4gaXQN
Cj4gPj4gaXMgYmlhc2VkLg0KPiA+PiBUaGUgb25seSBpbXBvcnRhbnQgdGhpbmcgKGluIG15IG9w
aW5pb24pIGlzIHRoYXQgaXQgY2Fubm90IGJlIHNhaWQgdGhhdA0KPiA+PiBCTTI1IGlzIGEgbXl0
aC4NCj4gPj4gWWVzLCB5b3UgYXJlIHJpZ2h0IHRoZXJlIGlzIG5vdCBhbiBvbmx5IHJhbmtpbmcg
bW9kZWwgdGhhdCBiZWF0cyB0aGUNCj4gPj4gcmVzdCwNCj4gPj4gYnV0IHRoZXJlIGFyZSBtb2Rl
bHMgdGhhdCBnZW5lcmFsbHkgc2hvdyBhIGJldHRlciBwZXJmb3JtYW5jZSBpbiBtb3JlDQo+ID4+
IGNhc2VzLg0KPiA+Pg0KPiA+PiBBYm91dCBDTEVGIEkgaGF2ZSBoYWQgdGhlIHNhbWUgZXhwZXJp
ZW5jZSAoVlNNIHZzIEJNMjUpIG9uIFNwYW5pc2ggYW5kDQo+ID4+IEVuZ2xpc2ggKFdlYkNMRUYp
IGFuZCBRJkEgKFJlc1B1YmxpUUEpDQo+ID4+DQo+ID4+IEl2YW4gY2hlY2tzIHRoZSBwYXJhbWV0
ZXJzIChiIGFuZCBrMSksIHByb2JhYmx5IHlvdSBjYW4gaW1wcm92ZSB5b3VyDQo+ID4+IHJlc3Vs
dHMuICh0aGF0J3MgdGhlIGJhZCBwYXJ0IG9mIEJNMjUpLg0KPiA+Pg0KPiA+PiBGaW5hbGx5IHdl
IGFyZSBqdXN0IHNwZWFraW5nIG9mIHBlcnNvbmFsIGV4cGVyaWVuY2UsIHNvIG9idmlvdXNseSB5
b3UNCj4gPj4gc2hvdWxkIHVzZSB0aGUgYmVzdCBtb2RlbCBmb3IgeW91ciBkYXRhIGFuZCB5b3Vy
IG93biBleHBlcmllbmNlLCBvbiBJUg0KPiA+PiB0aGVyZSBhcmUgbm90IG15dGhzIG5laXRoZXIg
YmVzdCByYW5raW5nIG1vZGVscy4gSWYgYW55IG9mIHVzIGlzIGFibGUgdG8NCj4gPj4gZmluZCB0
aGUgJiM4MjIwO2Jlc3QmIzgyMjE7ICByYW5raW5nIG1vZGVsLCBvciBpcyBhYmxlIHRvIHByb3Zl
IHRoYXQgYW55DQo+ID4+IHN0YXRlLW9mLXRoZSBhcnQgaXMgYSBteXRoIGhlIHNob3VsZCBzZW5k
IHRoZXNlIHJlc3VsdHMgdG8gdGhlIFNJR0lSDQo+ID4+IGNvbmZlcmVuY2UuDQo+ID4+DQo+ID4+
IEl2YW4sIFJvYmVydCBnb29kIGx1Y2sgd2l0aCB5b3VyIGV4cGVyaW1lbnRzLCBhcyBJIHNhaWQg
dGhlIGdvb2QgcGFydCBvZg0KPiA+PiBJUiBpcyB0aGF0IHlvdSBjYW4gYWx3YXlzIG1ha2UgZXhw
ZXJpbWVudHMgb24geW91ciBvd24uDQo+ID4+DQo+ID4+ID4gSSBkb24ndCB0aGluayBpdHMgcmVh
bGx5IGEgY29tcGV0aXRpb24sIEkgdGhpbmsgcHJlZmVyYWJseSB3ZSBzaG91bGQNCj4gPj4gaGF2
ZQ0KPiA+PiA+IHRoZSBmbGV4aWJpbGl0eSB0byBjaGFuZ2UgdGhlIHNjb3JpbmcgbW9kZWwgaW4g
bHVjZW5lIGFjdHVhbGx5Pw0KPiA+PiA+DQo+ID4+ID4gSSBoYXZlIGZvdW5kIGxvdHMgb2YgY2Fz
ZXMgd2hlcmUgVlNNIGltcHJvdmVzIG9uIEJNMjUsIGJ1dCB0aGVuIGFnYWluDQo+ID4+IEkNCj4g
Pj4gPiBkb24ndCB3b3JrIHdpdGggVFJFQyBzdHVmZiwgYXMgSSB3b3JrIHdpdGggbm9uLWVuZ2xp
c2ggY29sbGVjdGlvbnMuDQo+ID4+ID4NCj4gPj4gPiBJdCBkb2Vzbid0IGNvbnRyYWRpY3QgeWVh
cnMgb2YgcmVzZWFyY2ggdG8gc2F5IHRoYXQgVlNNIGlzbid0IGENCj4gPj4gPiBzdGF0ZS1vZi10
aGUtYXJ0IG1vZGVsLCBiZXNpZGVzIHRoZSBUUkVDLTQgcmVzdWx0cywgdGhlcmUgYXJlIENMRUYN
Cj4gPj4gcmVzdWx0cw0KPiA+PiA+IHdoZXJlIFZTTSBtb2RlbHMgcGVyZm9ybSBjb21wZXRpdGl2
ZWx5IG9yIGV4Y2VlZCAoRmlubmlzaCwgUnVzc2lhbiwNCj4gPj4gZXRjKQ0KPiA+PiA+IEJNMjUv
REZSL2V0Yy4NCj4gPj4gPg0KPiA+PiA+IEl0IGRlcGVuZHMgb24gdGhlIGNvbGxlY3Rpb24sIHRo
ZXJlIGlzbid0IGEgJ2Jlc3QgcmV0cmlldmFsIGZvcm11bGEnLg0KPiA+PiA+DQo+ID4+ID4gTm90
ZTogSSBoYXZlIG5vIGJpYXMgYWdhaW5zdCBCTS0yNSwgYnV0IGl0cyBkZWZpbml0ZWx5IGEgbXl0
aCB0byBzYXkNCj4gPj4gdGhlcmUNCj4gPj4gPiBpcyBhIHNpbmdsZSByZXRyaWV2YWwgZm9ybXVs
YSB0aGF0IGlzIHRoZSAnYmVzdCcgYWNyb3NzIHRoZSBib2FyZC4NCj4gPj4gPg0KPiA+PiA+DQo+
ID4+ID4gT24gVHVlLCBGZWIgMTYsIDIwMTAgYXQgMTo1MyBQTSwgSk9BUVVJTiBQRVJFWiBJR0xF
U0lBUyA8DQo+ID4+ID4gam9hcXVpbi5wZXJlekBsc2kudW5lZC5lcz4gd3JvdGU6DQo+ID4+ID4N
Cj4gPj4gPj4gQnkgdGhlIHdheSwNCj4gPj4gPj4NCj4gPj4gPj4gSSBkb24ndCB3YW50IHRvIHN0
YXJ0IGEgZmxhbWUgd2FyIFZTTSB2cyBCTTI1LCBidXQgSSByZWFsbHkgYmVsaWV2ZQ0KPiA+PiB0
aGF0DQo+ID4+ID4+IEkNCj4gPj4gPj4gaGF2ZSB0byBleHByZXNzIG15IG9waW5pb24gYXMgUm9i
ZXJ0IGhhcyBkb25lLiBJbiBteSBleHBlcmllbmNlLCBJDQo+ID4+IGhhdmUNCj4gPj4gPj4gbmV2
ZXIgZm91bmQgYSBjYXNlIHdoZXJlIFZTTSBpbXByb3ZlcyBzaWduaWZpY2FudGx5IEJNMjUuIE1h
eWJlIHlvdQ0KPiA+PiBjYW4NCj4gPj4gPj4gZmluZCBzb21lIGNhc2VzIHVuZGVyIHNvbWUgdmVy
eSBzcGVjaWZpYyBjb2xsZWN0aW9uIGNoYXJhY3RlcmlzdGljcywNCj4gPj4gKGFzDQo+ID4+ID4+
IGF2ZXJhZ2UgbGVuZ3RoIG9mIDMwMCB2cyAzMDAwKSBvciBhIGJhZCB1c2FnZSBvZiBCTTI1IChu
b3QgcHJvcGVyDQo+ID4+ID4+IHBhcmFtZXRlcnMpIHdoZXJlIGl0IGNhbiBoYXBwZW4uDQo+ID4+
ID4+DQo+ID4+ID4+IEJNMjUgaXMgbm90IGp1c3Qgb25seSBhIGRpZmZlcmVudCB3YXkgb2YgbGVu
Z3RoIG5vcm1hbGl6YXRpb24sIGl0IGlzDQo+ID4+ID4+IGJhc2VkDQo+ID4+ID4+IHN0cm9uZ2x5
IGluIHRoZSBwcm9iYWJpbGlzdGljIGZyYW1ld29yaywgYW5kIHBhcmFtZXRyaXNlcyBmcmVxdWVu
Y2llcw0KPiA+PiA+PiBhbmQNCj4gPj4gPj4gbGVuZ3RoLiBUaGlzIGlzIHByb2JhYmx5IHRoZSBt
b3N0IHN1Y2Nlc3NmdWwgcmFua2luZyBtb2RlbCBvZiB0aGUNCj4gPj4gbGFzdA0KPiA+PiA+PiB5
ZWFycyBpbiBJbmZvcm1hdGlvbiBSZXRyaWV2YWwuDQo+ID4+ID4+DQo+ID4+ID4+IEkgaGF2ZSBu
ZXZlciByZWFkIGEgcGFwZXIgd2hlcmUgVlNNICBpbXByb3ZlcyBhbnkgb2YgdGhlDQo+ID4+ID4+
IHN0YXRlLW9mLXRoZS1hcnQNCj4gPj4gPj4gcmFua2luZyBtb2RlbHMgKExhbmd1YWdlIE1vZGVs
cywgREZSLCBCTTI1LC4uLiksICBhbHRob3VnaCB0aGUgVlNNDQo+ID4+IHdpdGgNCj4gPj4gPj4g
cGl2b3RlZCBub3JtYWxpc2F0aW9uIGxlbmd0aCBjYW4gb2J0YWluIG5pY2UgcmVzdWx0cy4gVGhp
cyBjYW4gYmUNCj4gPj4gcHJvdmVkDQo+ID4+ID4+IGNoZWNraW5nIHRoZSBsYXN0IHllYXJzIG9m
IHRoZSBUUkVDIGNvbXBldGl0aW9uLg0KPiA+PiA+Pg0KPiA+PiA+PiBIb25lc3RseSB0byBzYXkg
dGhhdCBpcyBhIG15dGggdGhhdCBCTTI1IGltcHJvdmVzIFZTTSBicmVha3MgdGhlIGxhc3QNCj4g
Pj4gMTANCj4gPj4gPj4gb3IgMTUgeWVhcnMgb2YgcmVzZWFyY2ggb24gSW5mb3JtYXRpb24gUmV0
cmlldmFsLCBhbmQgSSByZWFsbHkNCj4gPj4gYmVsaWV2ZQ0KPiA+PiA+PiB0aGF0IGlzIG5vdCBh
Y2N1cmF0ZS4NCj4gPj4gPj4NCj4gPj4gPj4gVGhlIGdvb2QgdGhpbmcgb2YgSW5mb3JtYXRpb24g
UmV0cmlldmFsIGlzIHRoYXQgeW91IGNhbiBhbHdheXMgbWFrZQ0KPiA+PiB5b3VyDQo+ID4+ID4+
IG93bnMgZXhwZXJpbWVudHMgYW5kIHlvdSBjYW4gdXNlIHRoZSBleHBlcmllbmNlIG9mIGEgbG90
IG9mIHllYXJzIG9mDQo+ID4+ID4+IHJlc2VhcmNoLg0KPiA+PiA+Pg0KPiA+PiA+PiBQUzogVGhp
cyBvcGluaW9uIGlzIGJhc2VkIG9uIGV4cGVyaW1lbnRzIG9uIFRSRUMgYW5kIENMRUYNCj4gPj4g
Y29sbGVjdGlvbnMsDQo+ID4+ID4+IG9idmlvdXNseSB3ZSBjYW4gc3RhcnQgYSBkZWJhdGUgYWJv
dXQgdGhlIHN1aXRhYmlsaXR5IG9mIHRoaXMgdHlwZSBvZg0KPiA+PiA+PiBleHBlcmltZW50YXRp
b24gKGNvbmNlcHQgb2YgcmVsZXZhbmNlLCBwb29saW5nLCByZWxldmFuY2UNCj4gPj4ganVkZ2Vt
ZW50cyksDQo+ID4+ID4+IGJ1dA0KPiA+PiA+PiB0aGlzIGlzIGEgbXVjaCBtb3JlIGNvbXBsZXgg
dG9waWMgYW5kIEkgYmVsaWV2ZSBpcyBmYXIgZnJvbSB3aGF0IHdlDQo+ID4+IGFyZQ0KPiA+PiA+
PiBkZWFsaW5nIGhlcmUuDQo+ID4+ID4+DQo+ID4+ID4+IFBTMjogSW4gcmVsYXRpb24gd2l0aCBU
UkVDNCBDb3JuZWxsIHVzZWQgYSBwaXZvdGVkIGxlbmd0aA0KPiA+PiBub3JtYWxpc2F0aW9uDQo+
ID4+ID4+IGFuZCB0aGV5IHdlcmUgYXBwbHlpbmcgcHNldWRvLXJlbGV2YW5jZSBmZWVkYmFjaywg
d2hhdCBob25lc3RseSBtYWtlcw0KPiA+PiA+PiBtdWNoDQo+ID4+ID4+IG1vcmUgZGlmZmljdWx0
IHRoZSBhbmFseXNpcyBvZiB0aGUgcmVzdWx0cy4gT2J2aW91c2x5IHRoZWlyIHJlc3VsdHMNCj4g
Pj4gd2VyZQ0KPiA+PiA+PiBwYXJ0IG9mIHRoZSBwb29sLg0KPiA+PiA+Pg0KPiA+PiA+PiBTb3Jy
eSBmb3IgdGhlIGh1Z2UgbWFpbCA6LSkpKSkNCj4gPj4gPj4NCj4gPj4gPj4gPiBIaSBJdmFuLA0K
PiA+PiA+PiA+DQo+ID4+ID4+ID4gdGhlIHByb2JsZW0gaXMgdGhhdCB1bmZvcnR1bmF0ZWx5IEJN
MjUNCj4gPj4gPj4gPiBjYW5ub3QgYmUgaW1wbGVtZW50ZWQgb3ZlcndyaXRpbmcNCj4gPj4gPj4g
PiB0aGUgU2ltaWxhcml0eSBpbnRlcmZhY2UuIFRoZXJlZm9yZSBCTTI1U2ltaWxhcml0eQ0KPiA+
PiA+PiA+IG9ubHkgY29tcHV0ZXMgdGhlIGNsYXNzaWMgcHJvYmFiaWxpc3RpYyBJREYgKHdoYXQg
aXMNCj4gPj4gPj4gPiBpbnRlcmVzdGluZyBvbmx5IGF0IHNlYXJjaCB0aW1lKS4NCj4gPj4gPj4g
PiBJZiB5b3Ugc2V0IEJNMjVTaW1pbGFyaXR5IGF0IGluZGV4aW5nIHRpbWUNCj4gPj4gPj4gPiBz
b21lIGJhc2ljIHN0YXRzIGFyZSBub3Qgc3RvcmVkDQo+ID4+ID4+ID4gY29ycmVjdGx5IGluIHRo
ZSBzZWdtZW50cyAobGlrZSBkb2NzIGxlbmd0aCkuDQo+ID4+ID4+ID4NCj4gPj4gPj4gPiBXaGVu
IHlvdSB1c2UgQk0yNUJvb2xlYW5RdWVyeSB0aGlzIGNsYXNzDQo+ID4+ID4+ID4gd2lsbCBzZXQg
YXV0b21hdGljYWxseSB0aGUgQk0yNVNpbWlsYXJpdHkgZm9yIHlvdSwNCj4gPj4gPj4gPiB0aGVy
ZWZvcmUgeW91IGRvbid0IG5lZWQgdG8gZG8gdGhpcyBleHBsaWNpdGx5Lg0KPiA+PiA+PiA+DQo+
ID4+ID4+ID4gSSB0cmllZCB0byBtYWtlIHRoaXMgaW1wbGVtZW50YXRpb24gd2l0aCB0aGUgZm9j
dXMgb24NCj4gPj4gPj4gPiBub3QgaW50ZXJmZXJpbmcgb24gdGhlIHR5cGljYWwgdXNlIG9mIEx1
Y2VuZSAoc28gbm8gY2hhbmdpbmcNCj4gPj4gPj4gPiBEZWZhdWx0U2ltaWxhcml0eSkuDQo+ID4+
ID4+ID4NCj4gPj4gPj4gPj4gSm9hcXVpbiwgUm9iZXJ0LA0KPiA+PiA+PiA+Pg0KPiA+PiA+PiA+
PiBJIGZvbGxvd2VkIEpvYXF1aW4ncyByZWNvbW1lbmRhdGlvbiBhbmQgcmVtb3ZlZCB0aGUgY2Fs
bCB0byBzZXQNCj4gPj4gPj4gPj4gc2ltaWxhcml0eQ0KPiA+PiA+PiA+PiB0byBCTTI1IGV4cGxp
Y2l0bHkgKGluZGV4ZXIsIHNlYXJjaGVyKS4gIFRoZSByZXN1bHRzIHNob3dlZCA1NSUNCj4gPj4g
Pj4gPj4gaW1wcm92ZW1lbnQgZm9yIHRoZSBNQVAgc2NvcmUgKDAuMTQxLT4wLjIxOSkgb3ZlciBk
ZWZhdWx0DQo+ID4+IHNpbWlsYXJpdHkuDQo+ID4+ID4+ID4+DQo+ID4+ID4+ID4+IEpvYXF1aW4s
IGhvdyB3b3VsZCBzZXR0aW5nIHRoZSBzaW1pbGFyaXR5IHRvIEJNMjUgZXhwbGljaXRseSBtYWtl
DQo+ID4+IHRoZQ0KPiA+PiA+PiA+PiBzY29yZSB3b3JzZT8NCj4gPj4gPj4gPj4NCj4gPj4gPj4g
Pj4gVGhhbmsgeW91LA0KPiA+PiA+PiA+Pg0KPiA+PiA+PiA+PiBJdmFuDQo+ID4+ID4+ID4+DQo+
ID4+ID4+ID4+DQo+ID4+ID4+ID4+DQo+ID4+ID4+ID4+IC0tLSBPbiBUdWUsIDIvMTYvMTAsIFJv
YmVydCBNdWlyIDxyY211aXJAZ21haWwuY29tPiB3cm90ZToNCj4gPj4gPj4gPj4NCj4gPj4gPj4g
Pj4+IEZyb206IFJvYmVydCBNdWlyIDxyY211aXJAZ21haWwuY29tPg0KPiA+PiA+PiA+Pj4gU3Vi
amVjdDogUmU6IEJNMjUgU2NvcmluZyBQYXRjaA0KPiA+PiA+PiA+Pj4gVG86IGphdmEtdXNlckBs
dWNlbmUuYXBhY2hlLm9yZw0KPiA+PiA+PiA+Pj4gRGF0ZTogVHVlc2RheSwgRmVicnVhcnkgMTYs
IDIwMTAsIDExOjM2IEFNDQo+ID4+ID4+ID4+PiB5ZXMgSXZhbiwgaWYgcG9zc2libGUgcGxlYXNl
IHJlcG9ydA0KPiA+PiA+PiA+Pj4gYmFjayBhbnkgZmluZGluZ3MgeW91IGNhbiBvbiB0aGUNCj4g
Pj4gPj4gPj4+IGV4cGVyaW1lbnRzIHlvdSBhcmUgZG9pbmchDQo+ID4+ID4+ID4+Pg0KPiA+PiA+
PiA+Pj4gT24gVHVlLCBGZWIgMTYsIDIwMTAgYXQgMTE6MjIgQU0sIEpvYXF1aW4gUGVyZXogSWds
ZXNpYXMNCj4gPj4gPj4gPj4+IDwNCj4gPj4gPj4gPj4+IGpvYXF1aW4ucGVyZXpAbHNpLnVuZWQu
ZXM+DQo+ID4+ID4+ID4+PiB3cm90ZToNCj4gPj4gPj4gPj4+DQo+ID4+ID4+ID4+PiA+IEhpIEl2
YW4sDQo+ID4+ID4+ID4+PiA+DQo+ID4+ID4+ID4+PiA+IFlvdSBzaG91bGRuJ3Qgc2V0IHRoZSBC
TTI1U2ltaWxhcml0eSBmb3IgaW5kZXhpbmcgb3INCj4gPj4gPj4gPj4+IHNlYXJjaGluZy4NCj4g
Pj4gPj4gPj4+ID4gUGxlYXNlIHRyeSByZW1vdmluZyB0aGUgbGluZXM6DQo+ID4+ID4+ID4+PiA+
ICAgd3JpdGVyLnNldFNpbWlsYXJpdHkobmV3DQo+ID4+ID4+ID4+PiBCTTI1U2ltaWxhcml0eSgp
KTsNCj4gPj4gPj4gPj4+ID4gICBzZWFyY2hlci5zZXRTaW1pbGFyaXR5KHNpbSk7DQo+ID4+ID4+
ID4+PiA+DQo+ID4+ID4+ID4+PiA+IFBsZWFzZSBsZXQgdXMvbWUga25vdyBpZiB5b3UgaW1wcm92
ZSB5b3VyIHJlc3VsdHMgd2l0aA0KPiA+PiA+PiA+Pj4gdGhlc2UgY2hhbmdlcy4NCj4gPj4gPj4g
Pj4+ID4NCj4gPj4gPj4gPj4+ID4NCj4gPj4gPj4gPj4+ID4gUm9iZXJ0IE11aXIgZXNjcmliacOz
Og0KPiA+PiA+PiA+Pj4gPg0KPiA+PiA+PiA+Pj4gPiAgSGkgSXZhbiwgSSd2ZSBzZWVuIG1hbnkg
Y2FzZXMgd2hlcmUgQk0yNQ0KPiA+PiA+PiA+Pj4gcGVyZm9ybXMgd29yc2UgdGhhbiBMdWNlbmUn
cw0KPiA+PiA+PiA+Pj4gPj4gZGVmYXVsdCBTaW1pbGFyaXR5LiBQZXJoYXBzIHRoaXMgaXMganVz
dCBhbm90aGVyDQo+ID4+ID4+ID4+PiBvbmU/DQo+ID4+ID4+ID4+PiA+Pg0KPiA+PiA+PiA+Pj4g
Pj4gQWdhaW4gd2hpbGUgSSBoYXZlIG5vdCB3b3JrZWQgd2l0aCB0aGlzIHBhcnRpY3VsYXINCj4g
Pj4gPj4gPj4+IGNvbGxlY3Rpb24sIEkgbG9va2VkIGF0DQo+ID4+ID4+ID4+PiA+PiB0aGUgc3Rh
dGlzdGljcyBhbmQgbm90ZWQgdGhhdCBpdHMgY29tcG9zZWQgb2YNCj4gPj4gPj4gPj4+IHNldmVy
YWwgJ3N1Yi1jb2xsZWN0aW9ucyc6DQo+ID4+ID4+ID4+PiA+PiBmb3INCj4gPj4gPj4gPj4+ID4+
IGV4YW1wbGUgdGhlIFBBVCBkb2N1bWVudHMgb24gZGlzayAzIGhhdmUgYW4NCj4gPj4gPj4gPj4+
IGF2ZXJhZ2UgZG9jIGxlbmd0aCBvZiAzNTQzLA0KPiA+PiA+PiA+Pj4gPj4gYnV0DQo+ID4+ID4+
ID4+PiA+PiB0aGUgQVAgZG9jdW1lbnRzIG9uIGRpc2sgMSBoYXZlIGFuIGF2ZyBkb2MgbGVuZ3Ro
DQo+ID4+ID4+ID4+PiBvZiAzNTMuDQo+ID4+ID4+ID4+PiA+Pg0KPiA+PiA+PiA+Pj4gPj4gSSBo
YXZlIGZvdW5kIG9uIG90aGVyIGNvbGxlY3Rpb25zIHRoYXQgYW55DQo+ID4+ID4+ID4+PiBhZHZh
bnRhZ2VzIG9mIEJNMjUncyBkb2N1bWVudA0KPiA+PiA+PiA+Pj4gPj4gbGVuZ3RoIG5vcm1hbGl6
YXRpb24gZmFsbCBhcGFydCB3aGVuICdhdmVyYWdlDQo+ID4+ID4+ID4+PiBkb2N1bWVudCBsZW5n
dGgnIGRvZXNuJ3QNCj4gPj4gPj4gPj4+ID4+IG1ha2UNCj4gPj4gPj4gPj4+ID4+IGEgd2hvbGUg
bG90IG9mIHNlbnNlIChjYXNlcyBsaWtlIHRoaXMpLg0KPiA+PiA+PiA+Pj4gPj4NCj4gPj4gPj4g
Pj4+ID4+IEZvciB0aGlzIHNhbWUgcmVhc29uLCBJJ3ZlIG9ubHkgZm91bmQgYSBmZXcNCj4gPj4g
Pj4gPj4+IGNvbGxlY3Rpb25zIHdoZXJlIEJNMjUncyBkb2MNCj4gPj4gPj4gPj4+ID4+IGxlbmd0
aCBub3JtYWxpemF0aW9uIGlzIHJlYWxseSBzaWduaWZpY2FudGx5DQo+ID4+ID4+ID4+PiBiZXR0
ZXIgdGhhbiBMdWNlbmUncy4NCj4gPj4gPj4gPj4+ID4+DQo+ID4+ID4+ID4+PiA+PiBJbiBteSBv
cGluaW9uLCB0aGUgcmVzdWx0cyBvbiBhIHBhcnRpY3VsYXIgdGVzdA0KPiA+PiA+PiA+Pj4gY29s
bGVjdGlvbiBvciAyIGhhdmUNCj4gPj4gPj4gPj4+ID4+IHBlcmhhcHMNCj4gPj4gPj4gPj4+ID4+
IGJlZW4gdGFrZW4gdG9vIGZhciBhbmQgY3JlYXRlZCBhIG15dGggdGhhdCBCTTI1IGlzDQo+ID4+
ID4+ID4+PiBhbHdheXMgc3VwZXJpb3IgdG8NCj4gPj4gPj4gPj4+ID4+IEx1Y2VuZSdzIHNjb3Jp
bmcuLi4gdGhpcyBpcyBub3QgdHJ1ZSENCj4gPj4gPj4gPj4+ID4+DQo+ID4+ID4+ID4+PiA+PiBP
biBUdWUsIEZlYiAxNiwgMjAxMCBhdCA5OjQ2IEFNLCBJdmFuIFByb3ZhbG92DQo+ID4+ID4+ID4+
PiA8aXByb3ZhbG9AeWFob28uY29tPg0KPiA+PiA+PiA+Pj4gPj4gd3JvdGU6DQo+ID4+ID4+ID4+
PiA+Pg0KPiA+PiA+PiA+Pj4gPj4gIEkgYXBwbGllZCB0aGUgTHVjZW5lIHBhdGNoIG1lbnRpb25l
ZCBpbg0KPiA+PiA+PiA+Pj4gPj4+IGh0dHBzOi8vaXNzdWVzLmFwYWNoZS5vcmcvamlyYS9icm93
c2UvTFVDRU5FLTIwOTEgYW5kDQo+ID4+ID4+ID4+PiByYW4gdGhlIE1BUA0KPiA+PiA+PiA+Pj4g
Pj4+IG51bWJlcnMNCj4gPj4gPj4gPj4+ID4+PiBvbiBUUkVDLTMgY29sbGVjdGlvbiB1c2luZyB0
b3BpY3MNCj4gPj4gPj4gPj4+IDE1MS0yMDAuICBJIGFtIG5vdCBnZXR0aW5nIHdvcnNlDQo+ID4+
ID4+ID4+PiA+Pj4gcmVzdWx0cw0KPiA+PiA+PiA+Pj4gPj4+IGNvbXBhcmluZyB0byBMdWNlbmUg
RGVmYXVsdFNpbWlsYXJpdHkuICBJDQo+ID4+ID4+ID4+PiBzdXNwZWN0LCBJIGFtIG5vdCB1c2lu
ZyBpdA0KPiA+PiA+PiA+Pj4gPj4+IGNvcnJlY3RseS4gIEkgaGF2ZSBzaW5nbGUgZmllbGQNCj4g
Pj4gPj4gPj4+IGRvY3VtZW50cy4gIFRoaXMgaXMgdGhlIHByb2Nlc3MgSSB1c2U6DQo+ID4+ID4+
ID4+PiA+Pj4NCj4gPj4gPj4gPj4+ID4+PiAxLiBEdXJpbmcgdGhlIGluZGV4aW5nLCBJIGFtIHNl
dHRpbmcgdGhlDQo+ID4+ID4+ID4+PiBzaW1pbGFyaXR5IHRvIEJNMjUgYXMgc3VjaDoNCj4gPj4g
Pj4gPj4+ID4+Pg0KPiA+PiA+PiA+Pj4gPj4+IEluZGV4V3JpdGVyIHdyaXRlciA9IG5ldyBJbmRl
eFdyaXRlcihkaXIsIG5ldw0KPiA+PiA+PiA+Pj4gU3RhbmRhcmRBbmFseXplcigNCj4gPj4gPj4g
Pj4+ID4+Pg0KPiA+PiA+PiA+Pj4gICAgVmVyc2lvbi5MVUNFTkVfQ1VSUkVOVCksIHRydWUsDQo+
ID4+ID4+ID4+PiA+Pj4NCj4gPj4gPj4gPj4+ICAgIEluZGV4V3JpdGVyLk1heEZpZWxkTGVuZ3Ro
LlVOTElNSVRFRCk7DQo+ID4+ID4+ID4+PiA+Pj4gd3JpdGVyLnNldFNpbWlsYXJpdHkobmV3IEJN
MjVTaW1pbGFyaXR5KCkpOw0KPiA+PiA+PiA+Pj4gPj4+DQo+ID4+ID4+ID4+PiA+Pj4gMi4gRHVy
aW5nIHRoZSBQcmVjaXNpb24vUmVjYWxsIG1lYXN1cmVtZW50cywgSQ0KPiA+PiA+PiA+Pj4gYW0g
dXNpbmcgYQ0KPiA+PiA+PiA+Pj4gPj4+IFNpbXBsZUJNMjVRUVBhcnNlciBleHRlbnNpb24gSSBh
ZGRlZCB0byB0aGUNCj4gPj4gPj4gPj4+IGJlbmNobWFyazoNCj4gPj4gPj4gPj4+ID4+Pg0KPiA+
PiA+PiA+Pj4gPj4+IFF1YWxpdHlRdWVyeVBhcnNlciBxcVBhcnNlciA9IG5ldw0KPiA+PiA+PiA+
Pj4gU2ltcGxlQk0yNVFRUGFyc2VyKCJ0aXRsZSIsICJURVhUIik7DQo+ID4+ID4+ID4+PiA+Pj4N
Cj4gPj4gPj4gPj4+ID4+Pg0KPiA+PiA+PiA+Pj4gPj4+IDMuIEhlcmUgaXMgdGhlIHBhcnNlciBj
b2RlIChJIHNldCBhbiBhdmcgZG9jDQo+ID4+ID4+ID4+PiBsZW5ndGggaGVyZSk6DQo+ID4+ID4+
ID4+PiA+Pj4NCj4gPj4gPj4gPj4+ID4+PiBwdWJsaWMgUXVlcnkgcGFyc2UoUXVhbGl0eVF1ZXJ5
IHFxKSB0aHJvd3MNCj4gPj4gPj4gPj4+IFBhcnNlRXhjZXB0aW9uIHsNCj4gPj4gPj4gPj4+ID4+
PiAgIEJNMjVQYXJhbWV0ZXJzLnNldEF2ZXJhZ2VMZW5ndGgoaW5kZXhGaWVsZCwNCj4gPj4gPj4g
Pj4+IDc5OC4zMGYpOy8vYXZnIGRvYyBsZW5ndGgNCj4gPj4gPj4gPj4+ID4+PiAgIEJNMjVQYXJh
bWV0ZXJzLnNldEIoMC41Zik7Ly90cmllZA0KPiA+PiA+PiA+Pj4gZGVmYXVsdCB2YWx1ZXMNCj4g
Pj4gPj4gPj4+ID4+PiAgIEJNMjVQYXJhbWV0ZXJzLnNldEsxKDJmKTsNCj4gPj4gPj4gPj4+ID4+
PiAgIHJldHVybiBxdWVyeSA9IG5ldw0KPiA+PiA+PiA+Pj4gQk0yNUJvb2xlYW5RdWVyeShxcS5n
ZXRWYWx1ZShxcU5hbWUpLCBpbmRleEZpZWxkLA0KPiA+PiA+PiA+Pj4gPj4+IG5ldw0KPiA+PiA+
PiA+Pj4gPj4+IFN0YW5kYXJkQW5hbHl6ZXIoVmVyc2lvbi5MVUNFTkVfQ1VSUkVOVCkpOw0KPiA+
PiA+PiA+Pj4gPj4+IH0NCj4gPj4gPj4gPj4+ID4+Pg0KPiA+PiA+PiA+Pj4gPj4+IDQuIFRoZSBz
ZWFyY2hlciBpcyB1c2luZyBCTTI1IHNpbWlsYXJpdHk6DQo+ID4+ID4+ID4+PiA+Pj4NCj4gPj4g
Pj4gPj4+ID4+PiBTZWFyY2hlciBzZWFyY2hlciA9IG5ldyBJbmRleFNlYXJjaGVyKGRpciwNCj4g
Pj4gPj4gPj4+IHRydWUpOw0KPiA+PiA+PiA+Pj4gPj4+IHNlYXJjaGVyLnNldFNpbWlsYXJpdHko
c2ltKTsNCj4gPj4gPj4gPj4+ID4+Pg0KPiA+PiA+PiA+Pj4gPj4+IEFtIEkgbWlzc2luZyBzb21l
IHN0ZXBzPyAgRG9lcyBhbnlvbmUNCj4gPj4gPj4gPj4+IGhhdmUgZXhwZXJpZW5jZSB3aXRoIHRo
aXMgY29kZT8NCj4gPj4gPj4gPj4+ID4+Pg0KPiA+PiA+PiA+Pj4gPj4+IFRoYW5rcywNCj4gPj4g
Pj4gPj4+ID4+Pg0KPiA+PiA+PiA+Pj4gPj4+IEl2YW4NCj4gPj4gPj4gPj4+ID4+Pg0KPiA+PiA+
PiA+Pj4gPj4+DQo+ID4+ID4+ID4+PiA+Pj4NCj4gPj4gPj4gPj4+ID4+Pg0KPiA+PiA+PiA+Pj4g
Pj4+DQo+ID4+ID4+ID4+Pg0KPiA+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gPj4gPj4gPj4+ID4+PiBUbyB1
bnN1YnNjcmliZSwgZS1tYWlsOg0KPiA+PiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFw
YWNoZS5vcmcNCj4gPj4gPj4gPj4+ID4+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWls
Og0KPiA+PiA+PiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+PiA+PiA+Pj4g
Pj4+DQo+ID4+ID4+ID4+PiA+Pj4NCj4gPj4gPj4gPj4+ID4+Pg0KPiA+PiA+PiA+Pj4gPj4NCj4g
Pj4gPj4gPj4+ID4+DQo+ID4+ID4+ID4+PiA+IC0tDQo+ID4+ID4+ID4+PiA+DQo+ID4+ID4+ID4+
PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQ0KPiA+PiA+PiA+Pj4gPiBKb2FxdcOtbiBQw6lyZXogSWdsZXNpYXMNCj4gPj4gPj4gPj4+
ID4gRHB0by4gTGVuZ3VhamVzIHkgU2lzdGVtYXMgSW5mb3Jtw6F0aWNvcw0KPiA+PiA+PiA+Pj4g
PiBFLlQuUy5JLiBJbmZvcm3DoXRpY2EgKFVORUQpDQo+ID4+ID4+ID4+PiA+IENpdWRhZCBVbml2
ZXJzaXRhcmlhDQo+ID4+ID4+ID4+PiA+IEMvIEp1YW4gZGVsIFJvc2FsIG7CuiAxNg0KPiA+PiA+
PiA+Pj4gPiAyODA0MCBNYWRyaWQgLSBTcGFpbg0KPiA+PiA+PiA+Pj4gPiBQaG9uZS4gKzM0IDkx
IDM5OCA4OSAxOQ0KPiA+PiA+PiA+Pj4gPiBGYXggICAgKzM0IDkxIDM5OCA2NSAzNQ0KPiA+PiA+
PiA+Pj4gPiBPZmZpY2UgIDIuMTENCj4gPj4gPj4gPj4+ID4gRW1haWw6IGpvYXF1aW4ucGVyZXpA
bHNpLnVuZWQuZXMNCj4gPj4gPj4gPj4+ID4gd2ViOg0KPiA+PiBodHRwOi8vbmxwLnVuZWQuZXMv
fmpwZXJlemkvIDxodHRwOi8vbmxwLnVuZWQuZXMvJTdFanBlcmV6aS8+PA0KPiBodHRwOi8vbmxw
LnVuZWQuZXMvJTdFanBlcmV6aS8+DQo+ID4+ID4+IDxodHRwOi8vbmxwLnVuZWQuZXMvJTdFanBl
cmV6aS8+PA0KPiA+PiA+PiBodHRwOi8vbmxwLnVuZWQuZXMvJTdFanBlcmV6aS8+DQo+ID4+ID4+
ID4+PiA+DQo+ID4+ID4+ID4+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiA+PiA+PiA+Pj4gPg0KPiA+PiA+PiA+Pj4gPg0KPiA+
PiA+PiA+Pj4gPg0KPiA+PiA+PiA+Pj4NCj4gPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+ID4+ID4+ID4+PiA+
IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6DQo+IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUu
YXBhY2hlLm9yZw0KPiA+PiA+PiA+Pj4gPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWls
Og0KPiA+PiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+PiA+PiA+Pj4gPg0K
PiA+PiA+PiA+Pj4gPg0KPiA+PiA+PiA+Pj4NCj4gPj4gPj4gPj4+DQo+ID4+ID4+ID4+PiAtLQ0K
PiA+PiA+PiA+Pj4gUm9iZXJ0IE11aXINCj4gPj4gPj4gPj4+IHJjbXVpckBnbWFpbC5jb20NCj4g
Pj4gPj4gPj4+DQo+ID4+ID4+ID4+DQo+ID4+ID4+ID4+DQo+ID4+ID4+ID4+DQo+ID4+ID4+ID4+
DQo+ID4+ID4+ID4+DQo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiA+PiA+PiA+PiBUbyB1bnN1YnNjcmliZSwg
ZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPj4gPj4g
Pj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5l
LmFwYWNoZS5vcmcNCj4gPj4gPj4gPj4NCj4gPj4gPj4gPj4NCj4gPj4gPj4gPg0KPiA+PiA+PiA+
DQo+ID4+ID4+ID4NCj4gPj4gPj4gPg0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gPj4gPj4gPiBUbyB1bnN1
YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcN
Cj4gPj4gPj4gPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVs
cEBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+PiA+PiA+DQo+ID4+ID4+ID4NCj4gPj4gPj4NCj4gPj4g
Pj4NCj4gPj4gPj4NCj4gPj4gPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+ID4+ID4+IFRvIHVuc3Vic2NyaWJl
LCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+PiA+
PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUu
YXBhY2hlLm9yZw0KPiA+PiA+Pg0KPiA+PiA+Pg0KPiA+PiA+DQo+ID4+ID4NCj4gPj4gPiAtLQ0K
PiA+PiA+IFJvYmVydCBNdWlyDQo+ID4+ID4gcmNtdWlyQGdtYWlsLmNvbQ0KPiA+PiA+DQo+ID4+
DQo+ID4+DQo+ID4+DQo+ID4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiA+PiBUbyB1bnN1YnNjcmliZSwgZS1t
YWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPj4gRm9yIGFk
ZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5v
cmcNCj4gPj4NCj4gPj4NCj4gPg0KPiA+DQo+ID4gLS0NCj4gPiBSb2JlcnQgTXVpcg0KPiA+IHJj
bXVpckBnbWFpbC5jb20NCj4gPg0KPg0KPg0KPg0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJz
Y3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+
IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5h
cGFjaGUub3JnDQo+DQo+DQoNCg0KLS0NClJvYmVydCBNdWlyDQpyY211aXJAZ21haWwuY29tDQo=


From java-user-return-45039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 10:06:32 2010
Return-Path: <java-user-return-45039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97742 invoked from network); 17 Feb 2010 10:06:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 10:06:32 -0000
Received: (qmail 80967 invoked by uid 500); 17 Feb 2010 10:06:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80880 invoked by uid 500); 17 Feb 2010 10:06:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80870 invoked by uid 99); 17 Feb 2010 10:06:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 10:06:30 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=HTML_MESSAGE,HTML_OBFUSCATE_05_10,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.222.196 as permitted sender)
Received: from [209.85.222.196] (HELO mail-pz0-f196.google.com) (209.85.222.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 10:06:23 +0000
Received: by pzk34 with SMTP id 34so1446499pzk.20
        for <java-user@lucene.apache.org>; Wed, 17 Feb 2010 02:06:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=bsYoG0v1P4odMdL9dGNIL+RXwKXJgclAkYhov0eLHOY=;
        b=j9wqgs97AIO9pztc29fvFBW4FSl+Hq8oUhC3rh3NdNXU+bUBesChurkO3jmeA8YqGu
         1Bw0pgpv8TxXt4nSEXARQ8V5BlJ9lLo2WoCK1U5fsdcj+/RC7KgNbuge6mkRGG+BQ340
         ry97KREfS/7fxSV5VcgUuIgEHZys2O9upbJzI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=Hq7gI4R7Jb/VTvoclqKYJeYSbDQscxhM6ddawi8bErQthcUEvsVamVuUUsjzLZJzrU
         hRNioXX45cm0YwzsUgDuSFYQ3NdL0TIOdVSPQXj/kus22e1Xjp8wjeKRAy4l8Bj4BHno
         2eFvGavEfRGNnj3vD3H2QGm8RKoP5Xcy/rFC0=
MIME-Version: 1.0
Received: by 10.115.39.26 with SMTP id r26mr5210504waj.29.1266401163115; Wed, 
	17 Feb 2010 02:06:03 -0800 (PST)
From: Anshum <anshumg@gmail.com>
Date: Wed, 17 Feb 2010 15:35:43 +0530
Message-ID: <867513fe1002170205u3672e1dapa5a042d615ea95d@mail.gmail.com>
Subject: Lucene India Users/Developers
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64cc594787f82047fc8ff4f

--0016e64cc594787f82047fc8ff4f
Content-Type: text/plain; charset=ISO-8859-1

Hi,
After looking for a long time and feeling the need to I'd like to invite
people to a Lucene India user/developer group. There is no such thing
existing at the moment where we could interact and organize
meet-ups/discussion events for Lucene developers based in India.
Please visit* http://groups.google.com/group/luceneindia* to join and share!


--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............

--0016e64cc594787f82047fc8ff4f--

From java-user-return-45040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 10:48:53 2010
Return-Path: <java-user-return-45040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18557 invoked from network); 17 Feb 2010 10:48:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 10:48:53 -0000
Received: (qmail 43241 invoked by uid 500); 17 Feb 2010 10:48:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43174 invoked by uid 500); 17 Feb 2010 10:48:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43164 invoked by uid 99); 17 Feb 2010 10:48:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 10:48:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 10:48:42 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NhhS9-0008C2-FO
	for java-user@lucene.apache.org; Wed, 17 Feb 2010 02:48:21 -0800
Message-ID: <27621946.post@talk.nabble.com>
Date: Wed, 17 Feb 2010 02:48:21 -0800 (PST)
From: luciusvorenus <lucius.vorenus@hotmail.de>
To: java-user@lucene.apache.org
Subject: Re: lucene webinterface
In-Reply-To: <74B66D90-6AB4-4AA8-B744-FE029E0D9575@activemath.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: lucius.vorenus@hotmail.de
References: <27611202.post@talk.nabble.com> <74B66D90-6AB4-4AA8-B744-FE029E0D9575@activemath.org>
X-Virus-Checked: Checked by ClamAV on apache.org



I already have the data indexed (a database table) and also  i have  class
to search.. just simple
I would like just a search box ...

Thank u


polx wrote:
>=20
>=20
> On 16-f=C3=A9vr.-10, at 17:40, luciusvorenus wrote:
>> how can I build a  webinterface for my aplication ?  I read =20
>> something with
>> HTML table and php but i had no idea?
>> Can anobody help me?
>=20
> Lucius,
>=20
> try solr.
>=20
> paul
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/lucene-webinterface-tp2=
7611202p27621946.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 11:26:28 2010
Return-Path: <java-user-return-45041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32673 invoked from network); 17 Feb 2010 11:26:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 11:26:28 -0000
Received: (qmail 90459 invoked by uid 500); 17 Feb 2010 11:26:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90381 invoked by uid 500); 17 Feb 2010 11:26:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90369 invoked by uid 99); 17 Feb 2010 11:26:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 11:26:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 11:26:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nhi2V-0002u4-Nr
	for java-user@lucene.apache.org; Wed, 17 Feb 2010 03:25:55 -0800
Message-ID: <27622297.post@talk.nabble.com>
Date: Wed, 17 Feb 2010 03:25:55 -0800 (PST)
From: Raimon Bosch <raimon.bosch@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CompareBottom in FieldComparator
In-Reply-To: <9ac0c6aa1002161428g40c0e73epc54f00a875624c37@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: raimon.bosch@gmail.com
References: <27613452.post@talk.nabble.com> <9ac0c6aa1002161428g40c0e73epc54f00a875624c37@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Hi Michael,

I've seen that our main problem is that copy() method is always sending
documents in the same order (between two queries with same content in
different time). So it is a problem if we use compareBottom a lot because
the documents at the begining of the queue recieve more comparations than
the documents at the end of the queue. It works well with standard
ordenations, but not with pseudo-random ordenations.

Is there a way to do a shuffle to the docs to copy before starting
ordenation for each query? If not, the best way to work would be to have a
high numHits when we create the TopFieldCollectors.

Regards,
Raimon Bosch.


Michael McCandless-2 wrote:
> 
> The API is definitely confusing.
> 
> setBottom is called by Lucene to notify your FieldComparator which
> slot holds the "weakest" entry.  You  can at that point cache that
> entry (eg IntComparator stores the bottom int value at that point),
> or, simply store that bottom slot in an instance variable.
> 
> Then, compareBottom is just like compare except compareBottom uses the
> bottom slot instead of slot1.
> 
> So the simplest and correct thing to do in your comparator is
> something like this (note: not tested!):
> 
>   int bottomSlot;
> 
>   public void setBottom(int slot) {
>     bottomSlot = slot;
>   }
>   public int compareBottom(int slot) {
>     return compare(bottomSlot, slot);
>   }
> 
> Mike
> 
> On Tue, Feb 16, 2010 at 2:07 PM, Raimon Bosch <raimon.bosch@gmail.com>
> wrote:
>>
>>
>> Hi,
>>
>> Which is the exactly objective of compareBottom and setBottom functions.
>> I
>> am using a higher numHits to create TopScoreDocCollectors and
>> TopFieldCollectors because I don't understand properly this function.
>>
>> I think that is a filter to send less documents to sort in comparators,
>> but
>> I don't get a way to maximize this amount of documents without forcing
>> numHits. If we use a simple comparation the sorter is always sorting our
>> most relevant document, so maybe we need a pseudo-random function? We are
>> interested in sort a big amount of documents.
>>
>> Thanks in advance,
>> Raimon Bosch.
>>
>> PD: See
>> http://lucene.apache.org/java/2_9_1/api/all/org/apache/lucene/search/TopFieldCollector.html
>>
>> --
>> View this message in context:
>> http://old.nabble.com/CompareBottom-in-FieldComparator-tp27613452p27613452.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/CompareBottom-in-FieldComparator-tp27613452p27622297.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 11:29:04 2010
Return-Path: <java-user-return-45042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33962 invoked from network); 17 Feb 2010 11:29:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 11:29:04 -0000
Received: (qmail 7194 invoked by uid 500); 17 Feb 2010 11:29:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7139 invoked by uid 500); 17 Feb 2010 11:29:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7129 invoked by uid 99); 17 Feb 2010 11:29:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 11:29:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 11:28:54 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nhi53-00035E-Hv
	for java-user@lucene.apache.org; Wed, 17 Feb 2010 03:28:33 -0800
Message-ID: <27622297.post@talk.nabble.com>
Date: Wed, 17 Feb 2010 03:28:33 -0800 (PST)
From: Raimon Bosch <raimon.bosch@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CompareBottom in FieldComparator
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: raimon.bosch@gmail.com


Hi Michael,

I've seen that our main problem is that copy() method is always sending
documents in the same order (between two queries with same content in
different time). So it is a problem if we use compareBottom a lot because
the documents at the begining of the queue recieve more comparations than
the documents at the end of the queue. It works well with standard
ordenations, but not with pseudo-random ordenations.

Is there a way to do a shuffle to the docs to copy before starting
ordenation for each query? If not, the best way to work would be to have a
high numHits when we create the TopFieldCollectors to avoid the use of
CompareBottom.

Regards,
Raimon Bosch.


Michael McCandless-2 wrote:
> 
> The API is definitely confusing.
> 
> setBottom is called by Lucene to notify your FieldComparator which
> slot holds the "weakest" entry.  You  can at that point cache that
> entry (eg IntComparator stores the bottom int value at that point),
> or, simply store that bottom slot in an instance variable.
> 
> Then, compareBottom is just like compare except compareBottom uses the
> bottom slot instead of slot1.
> 
> So the simplest and correct thing to do in your comparator is
> something like this (note: not tested!):
> 
>   int bottomSlot;
> 
>   public void setBottom(int slot) {
>     bottomSlot = slot;
>   }
>   public int compareBottom(int slot) {
>     return compare(bottomSlot, slot);
>   }
> 
> Mike
> 
> On Tue, Feb 16, 2010 at 2:07 PM, Raimon Bosch <raimon.bosch@gmail.com>
> wrote:
>>
>>
>> Hi,
>>
>> Which is the exactly objective of compareBottom and setBottom functions.
>> I
>> am using a higher numHits to create TopScoreDocCollectors and
>> TopFieldCollectors because I don't understand properly this function.
>>
>> I think that is a filter to send less documents to sort in comparators,
>> but
>> I don't get a way to maximize this amount of documents without forcing
>> numHits. If we use a simple comparation the sorter is always sorting our
>> most relevant document, so maybe we need a pseudo-random function? We are
>> interested in sort a big amount of documents.
>>
>> Thanks in advance,
>> Raimon Bosch.
>>
>> PD: See
>> http://lucene.apache.org/java/2_9_1/api/all/org/apache/lucene/search/TopFieldCollector.html
>>
>> --
>> View this message in context:
>> http://old.nabble.com/CompareBottom-in-FieldComparator-tp27613452p27613452.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/CompareBottom-in-FieldComparator-tp27613452p27622297.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 13:01:24 2010
Return-Path: <java-user-return-45043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68348 invoked from network); 17 Feb 2010 13:01:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 13:01:24 -0000
Received: (qmail 25963 invoked by uid 500); 17 Feb 2010 13:01:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25891 invoked by uid 500); 17 Feb 2010 13:01:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25879 invoked by uid 99); 17 Feb 2010 13:01:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 13:01:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erik.hatcher@gmail.com designates 209.85.221.188 as permitted sender)
Received: from [209.85.221.188] (HELO mail-qy0-f188.google.com) (209.85.221.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 13:01:12 +0000
Received: by qyk26 with SMTP id 26so2854096qyk.12
        for <java-user@lucene.apache.org>; Wed, 17 Feb 2010 05:00:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=jGAKjS6M9WT21EZUJBWDi5Vn713foL7ADL6mF+EUlR4=;
        b=dYECqMMGFCWKYXFtIFZCaCBJVIvzntDaDAbY3cffMOeCZRsuULywmOSi1RQ056DTfz
         plmecNR7uZ4HSpHUfahFAcZYeq0nV+uSD4EhLgeG6Bupbcr/R/iyP3KhTCO8CVG3Ex7Z
         z4YF5FmsoETbXd12BZgDYpGyjWSMwBAH3DyPE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=HfV9WVORTwmvsCQy5l3ji/Glk4p2K+z5R0h+DVABzXWPfCPUkpNuPj5Z7uRT6N+GW5
         k9IjJmx2UGtm/UEnNXzIqFdthIuESW9GZyLXOPlzM9bbRBZoPOrzscXemDViCcSAaxgd
         mg4gD55VZWWntWPSO45A4n2xoMuCJAykPNOiw=
Received: by 10.224.87.159 with SMTP id w31mr1597168qal.50.1266411651746;
        Wed, 17 Feb 2010 05:00:51 -0800 (PST)
Received: from ?10.0.1.69? (c-71-63-2-238.hsd1.va.comcast.net [71.63.2.238])
        by mx.google.com with ESMTPS id 5sm25080396qwg.28.2010.02.17.05.00.49
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 17 Feb 2010 05:00:49 -0800 (PST)
Message-Id: <77294CF3-A50A-4582-A0E1-E40814B4569E@gmail.com>
From: Erik Hatcher <erik.hatcher@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <27621946.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: lucene webinterface
Date: Wed, 17 Feb 2010 08:00:47 -0500
References: <27611202.post@talk.nabble.com> <74B66D90-6AB4-4AA8-B744-FE029E0D9575@activemath.org> <27621946.post@talk.nabble.com>
X-Mailer: Apple Mail (2.936)

Solr can front your Lucene index, and via Solritas[1] it can provide a =20=

simple and customizable basic UI.

Though to stick with pure Lucene, give LIMO[2] a try.

	Erik

[1] =
http://www.lucidimagination.com/blog/2009/11/04/solritas-solr-1-4s-hidden-=
gem/

[2] http://limo.sourceforge.net/


On Feb 17, 2010, at 5:48 AM, luciusvorenus wrote:
> I already have the data indexed (a database table) and also  i have  =20=

> class
> to search.. just simple
> I would like just a search box ...
>
> Thank u
>
>
> polx wrote:
>>
>>
>> On 16-f=E9vr.-10, at 17:40, luciusvorenus wrote:
>>> how can I build a  webinterface for my aplication ?  I read
>>> something with
>>> HTML table and php but i had no idea?
>>> Can anobody help me?
>>
>> Lucius,
>>
>> try solr.
>>
>> paul
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --=20
> View this message in context: =
http://old.nabble.com/lucene-webinterface-tp27611202p27621946.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 13:50:21 2010
Return-Path: <java-user-return-45044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89661 invoked from network); 17 Feb 2010 13:50:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 13:50:21 -0000
Received: (qmail 95800 invoked by uid 500); 17 Feb 2010 13:50:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95727 invoked by uid 500); 17 Feb 2010 13:50:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95717 invoked by uid 99); 17 Feb 2010 13:50:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 13:50:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 13:50:10 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NhkHl-0006j4-Fg
	for java-user@lucene.apache.org; Wed, 17 Feb 2010 05:49:49 -0800
Message-ID: <27623897.post@talk.nabble.com>
Date: Wed, 17 Feb 2010 05:49:49 -0800 (PST)
From: luciusvorenus <lucius.vorenus@hotmail.de>
To: java-user@lucene.apache.org
Subject: Re: lucene webinterface
In-Reply-To: <77294CF3-A50A-4582-A0E1-E40814B4569E@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: lucius.vorenus@hotmail.de
References: <27611202.post@talk.nabble.com> <74B66D90-6AB4-4AA8-B744-FE029E0D9575@activemath.org> <27621946.post@talk.nabble.com> <77294CF3-A50A-4582-A0E1-E40814B4569E@gmail.com>




Thank u
 I will try


Erik Hatcher-4 wrote:
>=20
> Solr can front your Lucene index, and via Solritas[1] it can provide a =
=20
> simple and customizable basic UI.
>=20
> Though to stick with pure Lucene, give LIMO[2] a try.
>=20
> =09Erik
>=20
> [1]
> http://www.lucidimagination.com/blog/2009/11/04/solritas-solr-1-4s-hidden=
-gem/
>=20
> [2] http://limo.sourceforge.net/
>=20
>=20
> On Feb 17, 2010, at 5:48 AM, luciusvorenus wrote:
>> I already have the data indexed (a database table) and also  i have  =20
>> class
>> to search.. just simple
>> I would like just a search box ...
>>
>> Thank u
>>
>>
>> polx wrote:
>>>
>>>
>>> On 16-f=C3=A9vr.-10, at 17:40, luciusvorenus wrote:
>>>> how can I build a  webinterface for my aplication ?  I read
>>>> something with
>>>> HTML table and php but i had no idea?
>>>> Can anobody help me?
>>>
>>> Lucius,
>>>
>>> try solr.
>>>
>>> paul
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> --=20
>> View this message in context:
>> http://old.nabble.com/lucene-webinterface-tp27611202p27621946.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/lucene-webinterface-tp2=
7611202p27623897.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 14:18:52 2010
Return-Path: <java-user-return-45045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7246 invoked from network); 17 Feb 2010 14:18:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 14:18:52 -0000
Received: (qmail 52475 invoked by uid 500); 17 Feb 2010 14:18:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52394 invoked by uid 500); 17 Feb 2010 14:18:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52384 invoked by uid 99); 17 Feb 2010 14:18:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 14:18:49 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of michael@loot.co.za designates 41.204.193.132 as permitted sender)
Received: from [41.204.193.132] (HELO mail.loot.co.za) (41.204.193.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 14:18:42 +0000
Received: from sun.loot.co.za (sun.loot.co.za [192.168.0.14])
	by mail.loot.co.za (8.13.8/8.13.8) with SMTP id o1HEIIId014688
	for <java-user@lucene.apache.org>; Wed, 17 Feb 2010 16:18:18 +0200
Received: (qmail 23160 invoked by uid 7791); 17 Feb 2010 14:18:06 -0000
Received: from unknown (HELO sun) (192.168.0.14)
  by 0 with SMTP; 17 Feb 2010 14:18:06 -0000
Received: FROM [127.0.0.1] ([192.168.0.2]) BY sun WITH ESMTP ; Wed, 17 Feb 2010 16:18:05 +0200
Message-ID: <4B7BFA9D.4030809@loot.co.za>
Date: Wed, 17 Feb 2010 16:18:05 +0200
From: Michael van Rooyen <michael@loot.co.za>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.1.7) Gecko/20100111 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: java.io.IOException: read past EOF since migration to 2.9.1
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 3.0.2 (2004-11-16) on sun.loot.co.za
X-Spam-Level: 
X-Old-Spam-Status: No, score=-4.8 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	RATWARE_GECKO_BUILD autolearn=ham version=3.0.2

Hello all!

We've been using Lucene for a few years and it's worked without a 
murmur.  I recently upgraded from version 2.3.2 to 2.9.1.  We didn't 
need to make any code changes for the upgrade - apart from the 
deprecation warnings, the code compiled cleanly and 2.9.1 worked fine in 
testing.

Since going live a few days ago, however, we've twice had read past EOF 
exceptions.  The first time it happened, I checked the index and an 
error had crept into the deleted docs count on the main segment:

Segments file=segments_cefg numSegments=4 version=FORMAT_DIAGNOSTICS 
[Lucene 2.9]
   1 of 4: name=_abtf8 docCount=9710072
     compound=true
     hasProx=true
     numFiles=2
     size (MB)=4,254.56
     has deletions [delFileName=_abtf8_df.del]
     test: open reader.........FAILED
     WARNING: fixIndex() would remove reference to this segment; full 
exception:
java.lang.RuntimeException: delete count mismatch: info=263213 vs 
deletedDocs.count()=260032
         at 
org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:499)
         at org.apache.lucene.index.CheckIndex.main(CheckIndex.java:903)

I checked the logs for the our process that updates the index and there 
were no exceptions logged.  I then optimized the index and checked it 
again and it was all okay, so obviously the optimize / merge process is 
happy to work on an index where the deletions file is in error.

Today, we got the second read past EOF exception.  This time I checked 
the index again and no errors were detected.  I think that whatever 
error there was that led to the EOF exception was on a small segment 
file that got merged into a larger one as more updates were made, before 
I had time to check the index.

Does anyone have any ideas as to what could cause this, or what we could 
do to avoid it happening?  The stack trace for the EOF exception is below.

Thanks,
Michael.

Caused by: java.io.IOException: read past EOF
	org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:245)
	org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:157)
	org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
	org.apache.lucene.store.IndexInput.readInt(IndexInput.java:70)
	org.apache.lucene.store.IndexInput.readLong(IndexInput.java:93)
	org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:210)
	org.apache.lucene.index.SegmentReader.document(SegmentReader.java:948)
	org.apache.lucene.index.DirectoryReader.document(DirectoryReader.java:506)
	org.apache.lucene.index.IndexReader.document(IndexReader.java:947)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 15:32:17 2010
Return-Path: <java-user-return-45046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51213 invoked from network); 17 Feb 2010 15:32:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 15:32:17 -0000
Received: (qmail 91185 invoked by uid 500); 17 Feb 2010 15:32:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91113 invoked by uid 500); 17 Feb 2010 15:32:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91103 invoked by uid 99); 17 Feb 2010 15:32:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 15:32:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.216.185 as permitted sender)
Received: from [209.85.216.185] (HELO mail-px0-f185.google.com) (209.85.216.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 15:32:02 +0000
Received: by pxi15 with SMTP id 15so1585409pxi.21
        for <java-user@lucene.apache.org>; Wed, 17 Feb 2010 07:31:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=+LsDmu+kZOR8Q4v0vgOUsP4Rv/Lcq5pymbRXgqVzJRg=;
        b=uNjJQ1Fw9RVD0/nttqfvXj7IcJBSoZHcKfGrri/lWeXKP5tWW/WSBnkxL2jO+swlr0
         z0lh+/a8d2oDKxHXJfk/rTx4cPs62zq8mjjykxzmi7BNds5LD3ZTcCPcWeW/F6U/lRKz
         Tuh+0//DzxtSsZahK1lLVLU8kQ+3Cz8rRWy6M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=GwJuaFcIQXwxIR/VxhR61j06mQY1IMisq+1J5qRTvTKmdtBm/Qn23kl3clR+D4FBSU
         jGl9liSGuWqhYXBC9u6LE7/uE+m3wVerLlqy1B/VmaMJDP6jySudTOR7jqL9x3sC31Qf
         HXZKWo8uTMA81T/pI9jtyOGqnICUyfuI6a6nQ=
MIME-Version: 1.0
Received: by 10.114.248.16 with SMTP id v16mr5426880wah.161.1266420699242; 
	Wed, 17 Feb 2010 07:31:39 -0800 (PST)
In-Reply-To: <01C4AEE04EB96243BBAA8083CB6514E86070CD8B@MBX03.exg5.exghost.com>
References: <245804.25778.qm@web113302.mail.gq1.yahoo.com> 
	<141ee80356de1891826922a8185f4317.squirrel@correo.uned.es> 
	<833c7a901e04c6f6287f2a439cdb4d35.squirrel@correo.uned.es> 
	<8f0ad1f31002161107l26b503fjec173e9c0e7c5f46@mail.gmail.com> 
	<83b692afc347b683f7f0b4263879b342.squirrel@correo.uned.es> 
	<8f0ad1f31002161147v4e1991edubf7f22978728168d@mail.gmail.com> 
	<f6c9640e38b683d37da6d5275631f025.squirrel@correo.uned.es> 
	<8f0ad1f31002161237r70e3b9act33c81c15e645b3ad@mail.gmail.com> 
	<01C4AEE04EB96243BBAA8083CB6514E86070CD8B@MBX03.exg5.exghost.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 17 Feb 2010 10:31:19 -0500
Message-ID: <8f0ad1f31002170731p11c7d456r506a7cdff913c6a9@mail.gmail.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64c2e24ea235c047fcd8b10
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64c2e24ea235c047fcd8b10
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Yuval, i apologize for not having an intelligent response for your question
(if i did i would try to formulate it as a patch), but I too would like for
it to be extremely easy... maybe we can iterate on the patch.

below is how i feel about it:

i guess theoretically, the use of Similarity is how we would implement a
pluggable scoring formula, i think already supported by Solr. it would be
nice if BM25 could be just another Similarity, but i'm not even sure thats
realistic in the near future.

yet if we don't do the hard work up front to make it easy to plug in things
like BM25, then no one will implement additional scoring formulas for
Lucene, we currently make it terribly difficult to do this.

in the BM25 case we are just lucky, as Joaquin went thru a lot of
work/jumped thru a lot of hoops to make it happen.

On Wed, Feb 17, 2010 at 3:36 AM, Yuval Feinstein <yuvalf@answers.com> wrote=
:

> This is very interesting and much friendlier than a flame war.
> My practical question for Robert is:
> How can we modify the BM25 patch so that it:
> a) Becomes part of Lucene contrib.
> b) Be easier to use (preventing mistakes  such as Ivan's using the BM25
> similarity during indexing).
> c) Proceeds towards a pluggable scoring formula (Ideally, we should have =
an
> IndexReader/IndexSearcher/IndexWriter
> constructor enabling specifying a scoring model through an enum, with the
> default being, well, Lucene's default scoring model)?
> The easier it is to use, the more experiments people can make, and see ho=
w
> it works for them.
> A future "marketing" step could be adding BM25 to Solr, to further ease
> experimentation.
> TIA,
> Yuval
>
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Tuesday, February 16, 2010 10:38 PM
> To: java-user@lucene.apache.org
> Subject: Re: BM25 Scoring Patch
>
> Joaquin, I have a typical methodology where I don't optimize any scoring
> params: be it BM25 params (I stick with your defaults), or lnb.ltc params
> (i
> stick with default slope). When doing query expansion i don't modify the
> defaults for MoreLikeThis either.
>
> I've found that changing these params can have a significant difference i=
n
> retrieval performance, which is interesting, but I'm typically focused on
> text analysis (how is the text indexed?/stemming/stopwords). I also feel
> that such things are corpus-specific, which i generally try to avoid in m=
y
> work...
>
> for example, in analysis work,  the text collection often has a majority =
of
> text in a specific tense (i.e. news), so i don't at all try to tune any
> part
> of analysis as I worry this would be corpus-specific... I do the same wit=
h
> scoring.
>
> As far as why some models perform better than others for certain language=
s,
> I think this is a million-dollar question. But my intuition (I don't have
> references or anything to back this up), is that probabilistic models
> outperform vector-space models when you are using approaches like n-grams=
:
> you don't have nice stopwords lists, stemming, decompounding etc.
>
> This is particularly interesting to me, as probabilistic model + ngram is=
 a
> very general multilingual approach that I would like to have working well
> in
> Lucene, its also important as a "default" when we don't have a nicely tun=
ed
> analyzer available that will work well with a vector space model. In my
> opinion, vector-space tends to fall apart without good language support.
>
>
> On Tue, Feb 16, 2010 at 3:23 PM, JOAQUIN PEREZ IGLESIAS <
> joaquin.perez@lsi.uned.es> wrote:
>
> > Ok,
> >
> > I'm not advocating the BM25 patch neither, unfortunately BM25 was not m=
y
> > idea :-))), and I'm sure that the implementation can be improved.
> >
> > When you use the BM25 implementation, are you optimising the parameters
> > specifically per collection? (It is a key factor for improving BM25
> > performance).
> >
> > Why do you think that BM25 works better for English than in other
> > languages (apart of experiments). What are your intuitions?
> >
> > I dont't have too much experience on languages moreover of Spanish and
> > English, and it sounds pretty interesting.
> >
> > Kind Regards.
> >
> > P.S: Maybe this is not a topic for this list???
> >
> >
> > > Joaquin, I don't see this as a flame war? First of all I'd like to
> > > personally thank you for your excellent BM25 implementation!
> > >
> > > I think the selection of a retrieval model depends highly on the
> > > language/indexing approach, i.e. if we were talking East Asian
> languages
> > I
> > > think we want a probabilistic model: no argument there!
> > >
> > > All i said was that it is a myth that BM25 is "always" better than
> > > Lucene's
> > > scoring model, it really depends on what you are trying to do, how yo=
u
> > are
> > > indexing your text, properties of your corpus, how your queries are
> > > running.
> > >
> > > I don't even want to come across as advocating the lnb.ltc approach
> > > either,
> > > sure I wrote the patch, but this means nothing. I only like it as its
> > > currently a simple integration into Lucene, but long-term its best if
> we
> > > can
> > > support other models also!
> > >
> > > Finally I think there is something to be said for Lucene's default
> > > retrieval
> > > model, which in my (non-english) findings across the board isn't
> terrible
> > > at
> > > all... then again I am working with languages where analysis is reall=
y
> > the
> > > thing holding Lucene back, not scoring.
> > >
> > > On Tue, Feb 16, 2010 at 2:40 PM, JOAQUIN PEREZ IGLESIAS <
> > > joaquin.perez@lsi.uned.es> wrote:
> > >
> > >> Just some final comments (as I said I'm not interested in flame wars=
),
> > >>
> > >> If I obtain better results there are not problem with pooling
> otherwise
> > >> it
> > >> is biased.
> > >> The only important thing (in my opinion) is that it cannot be said
> that
> > >> BM25 is a myth.
> > >> Yes, you are right there is not an only ranking model that beats the
> > >> rest,
> > >> but there are models that generally show a better performance in mor=
e
> > >> cases.
> > >>
> > >> About CLEF I have had the same experience (VSM vs BM25) on Spanish a=
nd
> > >> English (WebCLEF) and Q&A (ResPubliQA)
> > >>
> > >> Ivan checks the parameters (b and k1), probably you can improve your
> > >> results. (that's the bad part of BM25).
> > >>
> > >> Finally we are just speaking of personal experience, so obviously yo=
u
> > >> should use the best model for your data and your own experience, on =
IR
> > >> there are not myths neither best ranking models. If any of us is abl=
e
> to
> > >> find the &#8220;best&#8221;  ranking model, or is able to prove that
> any
> > >> state-of-the art is a myth he should send these results to the SIGIR
> > >> conference.
> > >>
> > >> Ivan, Robert good luck with your experiments, as I said the good par=
t
> of
> > >> IR is that you can always make experiments on your own.
> > >>
> > >> > I don't think its really a competition, I think preferably we shou=
ld
> > >> have
> > >> > the flexibility to change the scoring model in lucene actually?
> > >> >
> > >> > I have found lots of cases where VSM improves on BM25, but then
> again
> > >> I
> > >> > don't work with TREC stuff, as I work with non-english collections=
.
> > >> >
> > >> > It doesn't contradict years of research to say that VSM isn't a
> > >> > state-of-the-art model, besides the TREC-4 results, there are CLEF
> > >> results
> > >> > where VSM models perform competitively or exceed (Finnish, Russian=
,
> > >> etc)
> > >> > BM25/DFR/etc.
> > >> >
> > >> > It depends on the collection, there isn't a 'best retrieval
> formula'.
> > >> >
> > >> > Note: I have no bias against BM-25, but its definitely a myth to s=
ay
> > >> there
> > >> > is a single retrieval formula that is the 'best' across the board.
> > >> >
> > >> >
> > >> > On Tue, Feb 16, 2010 at 1:53 PM, JOAQUIN PEREZ IGLESIAS <
> > >> > joaquin.perez@lsi.uned.es> wrote:
> > >> >
> > >> >> By the way,
> > >> >>
> > >> >> I don't want to start a flame war VSM vs BM25, but I really belie=
ve
> > >> that
> > >> >> I
> > >> >> have to express my opinion as Robert has done. In my experience, =
I
> > >> have
> > >> >> never found a case where VSM improves significantly BM25. Maybe y=
ou
> > >> can
> > >> >> find some cases under some very specific collection
> characteristics,
> > >> (as
> > >> >> average length of 300 vs 3000) or a bad usage of BM25 (not proper
> > >> >> parameters) where it can happen.
> > >> >>
> > >> >> BM25 is not just only a different way of length normalization, it
> is
> > >> >> based
> > >> >> strongly in the probabilistic framework, and parametrises
> frequencies
> > >> >> and
> > >> >> length. This is probably the most successful ranking model of the
> > >> last
> > >> >> years in Information Retrieval.
> > >> >>
> > >> >> I have never read a paper where VSM  improves any of the
> > >> >> state-of-the-art
> > >> >> ranking models (Language Models, DFR, BM25,...),  although the VS=
M
> > >> with
> > >> >> pivoted normalisation length can obtain nice results. This can be
> > >> proved
> > >> >> checking the last years of the TREC competition.
> > >> >>
> > >> >> Honestly to say that is a myth that BM25 improves VSM breaks the
> last
> > >> 10
> > >> >> or 15 years of research on Information Retrieval, and I really
> > >> believe
> > >> >> that is not accurate.
> > >> >>
> > >> >> The good thing of Information Retrieval is that you can always ma=
ke
> > >> your
> > >> >> owns experiments and you can use the experience of a lot of years
> of
> > >> >> research.
> > >> >>
> > >> >> PS: This opinion is based on experiments on TREC and CLEF
> > >> collections,
> > >> >> obviously we can start a debate about the suitability of this typ=
e
> of
> > >> >> experimentation (concept of relevance, pooling, relevance
> > >> judgements),
> > >> >> but
> > >> >> this is a much more complex topic and I believe is far from what =
we
> > >> are
> > >> >> dealing here.
> > >> >>
> > >> >> PS2: In relation with TREC4 Cornell used a pivoted length
> > >> normalisation
> > >> >> and they were applying pseudo-relevance feedback, what honestly
> makes
> > >> >> much
> > >> >> more difficult the analysis of the results. Obviously their resul=
ts
> > >> were
> > >> >> part of the pool.
> > >> >>
> > >> >> Sorry for the huge mail :-))))
> > >> >>
> > >> >> > Hi Ivan,
> > >> >> >
> > >> >> > the problem is that unfortunately BM25
> > >> >> > cannot be implemented overwriting
> > >> >> > the Similarity interface. Therefore BM25Similarity
> > >> >> > only computes the classic probabilistic IDF (what is
> > >> >> > interesting only at search time).
> > >> >> > If you set BM25Similarity at indexing time
> > >> >> > some basic stats are not stored
> > >> >> > correctly in the segments (like docs length).
> > >> >> >
> > >> >> > When you use BM25BooleanQuery this class
> > >> >> > will set automatically the BM25Similarity for you,
> > >> >> > therefore you don't need to do this explicitly.
> > >> >> >
> > >> >> > I tried to make this implementation with the focus on
> > >> >> > not interfering on the typical use of Lucene (so no changing
> > >> >> > DefaultSimilarity).
> > >> >> >
> > >> >> >> Joaquin, Robert,
> > >> >> >>
> > >> >> >> I followed Joaquin's recommendation and removed the call to se=
t
> > >> >> >> similarity
> > >> >> >> to BM25 explicitly (indexer, searcher).  The results showed 55=
%
> > >> >> >> improvement for the MAP score (0.141->0.219) over default
> > >> similarity.
> > >> >> >>
> > >> >> >> Joaquin, how would setting the similarity to BM25 explicitly
> make
> > >> the
> > >> >> >> score worse?
> > >> >> >>
> > >> >> >> Thank you,
> > >> >> >>
> > >> >> >> Ivan
> > >> >> >>
> > >> >> >>
> > >> >> >>
> > >> >> >> --- On Tue, 2/16/10, Robert Muir <rcmuir@gmail.com> wrote:
> > >> >> >>
> > >> >> >>> From: Robert Muir <rcmuir@gmail.com>
> > >> >> >>> Subject: Re: BM25 Scoring Patch
> > >> >> >>> To: java-user@lucene.apache.org
> > >> >> >>> Date: Tuesday, February 16, 2010, 11:36 AM
> > >> >> >>> yes Ivan, if possible please report
> > >> >> >>> back any findings you can on the
> > >> >> >>> experiments you are doing!
> > >> >> >>>
> > >> >> >>> On Tue, Feb 16, 2010 at 11:22 AM, Joaquin Perez Iglesias
> > >> >> >>> <
> > >> >> >>> joaquin.perez@lsi.uned.es>
> > >> >> >>> wrote:
> > >> >> >>>
> > >> >> >>> > Hi Ivan,
> > >> >> >>> >
> > >> >> >>> > You shouldn't set the BM25Similarity for indexing or
> > >> >> >>> searching.
> > >> >> >>> > Please try removing the lines:
> > >> >> >>> >   writer.setSimilarity(new
> > >> >> >>> BM25Similarity());
> > >> >> >>> >   searcher.setSimilarity(sim);
> > >> >> >>> >
> > >> >> >>> > Please let us/me know if you improve your results with
> > >> >> >>> these changes.
> > >> >> >>> >
> > >> >> >>> >
> > >> >> >>> > Robert Muir escribi=C3=B3:
> > >> >> >>> >
> > >> >> >>> >  Hi Ivan, I've seen many cases where BM25
> > >> >> >>> performs worse than Lucene's
> > >> >> >>> >> default Similarity. Perhaps this is just another
> > >> >> >>> one?
> > >> >> >>> >>
> > >> >> >>> >> Again while I have not worked with this particular
> > >> >> >>> collection, I looked at
> > >> >> >>> >> the statistics and noted that its composed of
> > >> >> >>> several 'sub-collections':
> > >> >> >>> >> for
> > >> >> >>> >> example the PAT documents on disk 3 have an
> > >> >> >>> average doc length of 3543,
> > >> >> >>> >> but
> > >> >> >>> >> the AP documents on disk 1 have an avg doc length
> > >> >> >>> of 353.
> > >> >> >>> >>
> > >> >> >>> >> I have found on other collections that any
> > >> >> >>> advantages of BM25's document
> > >> >> >>> >> length normalization fall apart when 'average
> > >> >> >>> document length' doesn't
> > >> >> >>> >> make
> > >> >> >>> >> a whole lot of sense (cases like this).
> > >> >> >>> >>
> > >> >> >>> >> For this same reason, I've only found a few
> > >> >> >>> collections where BM25's doc
> > >> >> >>> >> length normalization is really significantly
> > >> >> >>> better than Lucene's.
> > >> >> >>> >>
> > >> >> >>> >> In my opinion, the results on a particular test
> > >> >> >>> collection or 2 have
> > >> >> >>> >> perhaps
> > >> >> >>> >> been taken too far and created a myth that BM25 is
> > >> >> >>> always superior to
> > >> >> >>> >> Lucene's scoring... this is not true!
> > >> >> >>> >>
> > >> >> >>> >> On Tue, Feb 16, 2010 at 9:46 AM, Ivan Provalov
> > >> >> >>> <iprovalo@yahoo.com>
> > >> >> >>> >> wrote:
> > >> >> >>> >>
> > >> >> >>> >>  I applied the Lucene patch mentioned in
> > >> >> >>> >>> https://issues.apache.org/jira/browse/LUCENE-2091 and
> > >> >> >>> ran the MAP
> > >> >> >>> >>> numbers
> > >> >> >>> >>> on TREC-3 collection using topics
> > >> >> >>> 151-200.  I am not getting worse
> > >> >> >>> >>> results
> > >> >> >>> >>> comparing to Lucene DefaultSimilarity.  I
> > >> >> >>> suspect, I am not using it
> > >> >> >>> >>> correctly.  I have single field
> > >> >> >>> documents.  This is the process I use:
> > >> >> >>> >>>
> > >> >> >>> >>> 1. During the indexing, I am setting the
> > >> >> >>> similarity to BM25 as such:
> > >> >> >>> >>>
> > >> >> >>> >>> IndexWriter writer =3D new IndexWriter(dir, new
> > >> >> >>> StandardAnalyzer(
> > >> >> >>> >>>
> > >> >> >>>    Version.LUCENE_CURRENT), true,
> > >> >> >>> >>>
> > >> >> >>>    IndexWriter.MaxFieldLength.UNLIMITED);
> > >> >> >>> >>> writer.setSimilarity(new BM25Similarity());
> > >> >> >>> >>>
> > >> >> >>> >>> 2. During the Precision/Recall measurements, I
> > >> >> >>> am using a
> > >> >> >>> >>> SimpleBM25QQParser extension I added to the
> > >> >> >>> benchmark:
> > >> >> >>> >>>
> > >> >> >>> >>> QualityQueryParser qqParser =3D new
> > >> >> >>> SimpleBM25QQParser("title", "TEXT");
> > >> >> >>> >>>
> > >> >> >>> >>>
> > >> >> >>> >>> 3. Here is the parser code (I set an avg doc
> > >> >> >>> length here):
> > >> >> >>> >>>
> > >> >> >>> >>> public Query parse(QualityQuery qq) throws
> > >> >> >>> ParseException {
> > >> >> >>> >>>   BM25Parameters.setAverageLength(indexField,
> > >> >> >>> 798.30f);//avg doc length
> > >> >> >>> >>>   BM25Parameters.setB(0.5f);//tried
> > >> >> >>> default values
> > >> >> >>> >>>   BM25Parameters.setK1(2f);
> > >> >> >>> >>>   return query =3D new
> > >> >> >>> BM25BooleanQuery(qq.getValue(qqName), indexField,
> > >> >> >>> >>> new
> > >> >> >>> >>> StandardAnalyzer(Version.LUCENE_CURRENT));
> > >> >> >>> >>> }
> > >> >> >>> >>>
> > >> >> >>> >>> 4. The searcher is using BM25 similarity:
> > >> >> >>> >>>
> > >> >> >>> >>> Searcher searcher =3D new IndexSearcher(dir,
> > >> >> >>> true);
> > >> >> >>> >>> searcher.setSimilarity(sim);
> > >> >> >>> >>>
> > >> >> >>> >>> Am I missing some steps?  Does anyone
> > >> >> >>> have experience with this code?
> > >> >> >>> >>>
> > >> >> >>> >>> Thanks,
> > >> >> >>> >>>
> > >> >> >>> >>> Ivan
> > >> >> >>> >>>
> > >> >> >>> >>>
> > >> >> >>> >>>
> > >> >> >>> >>>
> > >> >> >>> >>>
> > >> >> >>>
> > >> --------------------------------------------------------------------=
-
> > >> >> >>> >>> To unsubscribe, e-mail:
> > >> java-user-unsubscribe@lucene.apache.org
> > >> >> >>> >>> For additional commands, e-mail:
> > >> >> java-user-help@lucene.apache.org
> > >> >> >>> >>>
> > >> >> >>> >>>
> > >> >> >>> >>>
> > >> >> >>> >>
> > >> >> >>> >>
> > >> >> >>> > --
> > >> >> >>> >
> > >> >> >>> -----------------------------------------------------------
> > >> >> >>> > Joaqu=C3=ADn P=C3=A9rez Iglesias
> > >> >> >>> > Dpto. Lenguajes y Sistemas Inform=C3=A1ticos
> > >> >> >>> > E.T.S.I. Inform=C3=A1tica (UNED)
> > >> >> >>> > Ciudad Universitaria
> > >> >> >>> > C/ Juan del Rosal n=C2=BA 16
> > >> >> >>> > 28040 Madrid - Spain
> > >> >> >>> > Phone. +34 91 398 89 19
> > >> >> >>> > Fax    +34 91 398 65 35
> > >> >> >>> > Office  2.11
> > >> >> >>> > Email: joaquin.perez@lsi.uned.es
> > >> >> >>> > web:
> > >> http://nlp.uned.es/~jperezi/ <http://nlp.uned.es/%7Ejperezi/> <
> http://nlp.uned.es/%7Ejperezi/><
> > http://nlp.uned.es/%7Ejperezi/>
> > >> >> <http://nlp.uned.es/%7Ejperezi/><
> > >> >> http://nlp.uned.es/%7Ejperezi/>
> > >> >> >>> >
> > >> >> >>> -----------------------------------------------------------
> > >> >> >>> >
> > >> >> >>> >
> > >> >> >>> >
> > >> >> >>>
> > >> --------------------------------------------------------------------=
-
> > >> >> >>> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > >> >> >>> > For additional commands, e-mail:
> > >> java-user-help@lucene.apache.org
> > >> >> >>> >
> > >> >> >>> >
> > >> >> >>>
> > >> >> >>>
> > >> >> >>> --
> > >> >> >>> Robert Muir
> > >> >> >>> rcmuir@gmail.com
> > >> >> >>>
> > >> >> >>
> > >> >> >>
> > >> >> >>
> > >> >> >>
> > >> >> >>
> > ---------------------------------------------------------------------
> > >> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g
> > >> >> >> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > >> >> >>
> > >> >> >>
> > >> >> >
> > >> >> >
> > >> >> >
> > >> >> >
> > ---------------------------------------------------------------------
> > >> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> >> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > >> >> >
> > >> >> >
> > >> >>
> > >> >>
> > >> >>
> > >> >>
> ---------------------------------------------------------------------
> > >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >> >>
> > >> >>
> > >> >
> > >> >
> > >> > --
> > >> > Robert Muir
> > >> > rcmuir@gmail.com
> > >> >
> > >>
> > >>
> > >>
> > >> --------------------------------------------------------------------=
-
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >
> > >
> > > --
> > > Robert Muir
> > > rcmuir@gmail.com
> > >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>



--=20
Robert Muir
rcmuir@gmail.com

--0016e64c2e24ea235c047fcd8b10--

From java-user-return-45047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 15:39:33 2010
Return-Path: <java-user-return-45047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53945 invoked from network); 17 Feb 2010 15:39:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 15:39:32 -0000
Received: (qmail 3526 invoked by uid 500); 17 Feb 2010 15:39:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3460 invoked by uid 500); 17 Feb 2010 15:39:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3450 invoked by uid 99); 17 Feb 2010 15:39:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 15:39:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 15:39:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NhlzS-0000CA-5J
	for java-user@lucene.apache.org; Wed, 17 Feb 2010 07:39:02 -0800
Message-ID: <27625646.post@talk.nabble.com>
Date: Wed, 17 Feb 2010 07:39:02 -0800 (PST)
From: AlisonCallahan <alison.callahan@gmail.com>
To: java-user@lucene.apache.org
Subject: PrefixQuery returning 0 results
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: alison.callahan@gmail.com


I have indexed RDF in N-triple format (with three fields -- "subject",
"predicate", "object") and now am trying to query the index with a
PrefixQuery on the "subject" field. My test case is to get back all
documents whose subject field starts with the prefix "<http", and I would
expect to get back all documents. Instead, the PrefixQuery returns 0
documents. I have read and can't see why the PrefixQuery is returning 0
results. 

Here is the relevant code:

	IndexReader n3reader = IndexReader.open(FSDirectory.open(new File(index)),
true);	
	Searcher searcher = new IndexSearcher(n3reader);
	Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_CURRENT);

	String test = "<http";

	Query nsQuery = new PrefixQuery(new Term("subject", test));
	
	TopDocs hits = searcher.search(nsQuery, 10);

	System.out.println("Hits: "+hits.totalHits);

This code prints out '0' hits ... Any suggestions for why this isn't
working?? Thanks,

Alison Callahan
-- 
View this message in context: http://old.nabble.com/PrefixQuery-returning-0-results-tp27625646p27625646.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 16:01:03 2010
Return-Path: <java-user-return-45048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62851 invoked from network); 17 Feb 2010 16:01:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 16:01:02 -0000
Received: (qmail 35190 invoked by uid 500); 17 Feb 2010 16:00:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35118 invoked by uid 500); 17 Feb 2010 16:00:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35108 invoked by uid 99); 17 Feb 2010 16:00:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 16:00:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 16:00:52 +0000
Received: from [172.18.239.216] (172.18.239.216) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.393.1; Wed, 17 Feb 2010 17:00:30 +0100
Subject: Re: java.io.IOException: read past EOF since migration to 2.9.1
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <4B7BFA9D.4030809@loot.co.za>
References: <4B7BFA9D.4030809@loot.co.za>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Wed, 17 Feb 2010 17:00:25 +0100
Message-ID: <1266422425.4644.92.camel@te-laptop>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.1 
Content-Transfer-Encoding: 7bit

On Wed, 2010-02-17 at 15:18 +0100, Michael van Rooyen wrote:
> I recently upgraded from version 2.3.2 to 2.9.1. [...]
> Since going live a few days ago, however, we've twice had read past EOF 
> exceptions.

The first thing to do is check the Java version. If you're using Sun JRE
1.6.0, you might have encountered a nasty bug in the JVM:
http://issues.apache.org/jira/browse/LUCENE-1282


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 16:01:58 2010
Return-Path: <java-user-return-45049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64076 invoked from network); 17 Feb 2010 16:01:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 16:01:58 -0000
Received: (qmail 41089 invoked by uid 500); 17 Feb 2010 16:01:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41016 invoked by uid 500); 17 Feb 2010 16:01:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41006 invoked by uid 99); 17 Feb 2010 16:01:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 16:01:55 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 16:01:45 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id BBCD9D36002
	for <java-user@lucene.apache.org>; Wed, 17 Feb 2010 17:01:24 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id s4zNXKY-Dr49 for <java-user@lucene.apache.org>;
	Wed, 17 Feb 2010 17:01:22 +0100 (CET)
Received: from VEGA (unknown [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 54CBFD36001
	for <java-user@lucene.apache.org>; Wed, 17 Feb 2010 17:01:22 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <27625646.post@talk.nabble.com>
In-Reply-To: <27625646.post@talk.nabble.com>
Subject: RE: PrefixQuery returning 0 results
Date: Wed, 17 Feb 2010 17:01:28 +0100
Message-ID: <000d01caafea$770e62c0$652b2840$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acqv521T5S+WG1PFQLSFE2BV1yF5PgAAuxMw
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

How is "subject indexed"?

I fit is indexed with ANALYZED not as keyword only, StandardAnalyzer =
will remove <, lowercase and so on.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: AlisonCallahan [mailto:alison.callahan@gmail.com]
> Sent: Wednesday, February 17, 2010 4:39 PM
> To: java-user@lucene.apache.org
> Subject: PrefixQuery returning 0 results
>=20
>=20
> I have indexed RDF in N-triple format (with three fields -- "subject",
> "predicate", "object") and now am trying to query the index with a
> PrefixQuery on the "subject" field. My test case is to get back all
> documents whose subject field starts with the prefix "<http", and I
> would
> expect to get back all documents. Instead, the PrefixQuery returns 0
> documents. I have read and can't see why the PrefixQuery is returning =
0
> results.
>=20
> Here is the relevant code:
>=20
> 	IndexReader n3reader =3D IndexReader.open(FSDirectory.open(new
> File(index)),
> true);
> 	Searcher searcher =3D new IndexSearcher(n3reader);
> 	Analyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_CURRENT);
>=20
> 	String test =3D "<http";
>=20
> 	Query nsQuery =3D new PrefixQuery(new Term("subject", test));
>=20
> 	TopDocs hits =3D searcher.search(nsQuery, 10);
>=20
> 	System.out.println("Hits: "+hits.totalHits);
>=20
> This code prints out '0' hits ... Any suggestions for why this isn't
> working?? Thanks,
>=20
> Alison Callahan
> --
> View this message in context: http://old.nabble.com/PrefixQuery-
> returning-0-results-tp27625646p27625646.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 16:16:16 2010
Return-Path: <java-user-return-45050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74115 invoked from network); 17 Feb 2010 16:16:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 16:16:15 -0000
Received: (qmail 71933 invoked by uid 500); 17 Feb 2010 16:16:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71850 invoked by uid 500); 17 Feb 2010 16:16:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71840 invoked by uid 99); 17 Feb 2010 16:16:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 16:16:13 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.167.15] (HELO web113315.mail.gq1.yahoo.com) (98.136.167.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Feb 2010 16:16:03 +0000
Received: (qmail 98740 invoked by uid 60001); 17 Feb 2010 16:15:42 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1266423342; bh=p0IiuDbqpYi9lxQ2PMvlVV+eRyCd1yYZV6jnDKG7esw=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=UtvLj5H8xA2dBSKirV2Ke5akNOimEfEI3pOLcF34TKF8bwjAQ55yTFMM+QXNbguWpjNScF2rcqJxIPPYG55M9WvmnGVnRFyeFzZZTDdfr0FPhp4aSq9CPmV5scqSHYAIo8+JpaX1OGkFUFBboUq2Wk9FkHzR+3QtIDH26JuMcdw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=tuUadt3JFY81tOC0+TR5RNQjWkka4q3h92FS5lFuUCXIfkLS3cTR5NXmSW84/oXBylnV+zzgHbPS3KFPGX0JLvidYHkj/hBm1K8MgjipFK0RgDTP97HrJBum3kGGDFd/IZFa3d79PkD30zFOh3wpo4rXFDJbhO3xlOlHxLMImW8=;
Message-ID: <203784.98707.qm@web113315.mail.gq1.yahoo.com>
X-YMail-OSG: eYm62EAVM1nilsY.N_5hRpUOR7NDstDmqCHV9B6Q4E4eGS5Jxo0Hb5gU2uySDNdUbqeCvO2fwpNTTMCEiZJyEhzTJN4NgGBYFYlw6VZvnNU2L2820aBxEsaPgYS5IJ2xds4PRAtl8HjivjEZmMMSyF.bAPkBJ0gjyUXmhPxOog30BUN17Tf3_I9kgxaUDgvAT6dzQ9rPClM4mto3qOwqExTWOQQEZx_GyEcI0jN.UNoPllq6HPkOSRQ_7StzavNa59TkkXF6_iUAfgeRELhZfWyABI7Mpyu1rOw7Ku_eOYKR3D4Rss2hC74k5Zf8pTSoQAQANYZsYOqZ3IHII7y8yHf8AoMX2klSPgaacAZIsWCGNeIBSy9h
Received: from [140.244.128.12] by web113315.mail.gq1.yahoo.com via HTTP; Wed, 17 Feb 2010 08:15:42 PST
X-Mailer: YahooMailClassic/9.2.12 YahooMailWebService/0.8.100.260964
Date: Wed, 17 Feb 2010 08:15:42 -0800 (PST)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
In-Reply-To: <8f0ad1f31002170731p11c7d456r506a7cdff913c6a9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Another example of plugging in different score mechanism is getting average=
 term frequency for the TF normalization described in IBM's http://trec.nis=
t.gov/pubs/trec16/papers/ibm-haifa.mq.final.pdf=0A=0AWe opened up the TermS=
corer class for that.=0A=0AThanks,=0A=0AIvan=0A=0A--- On Wed, 2/17/10, Robe=
rt Muir <rcmuir@gmail.com> wrote:=0A=0A> From: Robert Muir <rcmuir@gmail.co=
m>=0A> Subject: Re: BM25 Scoring Patch=0A> To: java-user@lucene.apache.org=
=0A> Date: Wednesday, February 17, 2010, 10:31 AM=0A> Yuval, i apologize fo=
r not having an=0A> intelligent response for your question=0A> (if i did i =
would try to formulate it as a patch), but I=0A> too would like for=0A> it =
to be extremely easy... maybe we can iterate on the=0A> patch.=0A> =0A> bel=
ow is how i feel about it:=0A> =0A> i guess theoretically, the use of Simil=
arity is how we=0A> would implement a=0A> pluggable scoring formula, i thin=
k already supported by=0A> Solr. it would be=0A> nice if BM25 could be just=
 another Similarity, but i'm not=0A> even sure thats=0A> realistic in the n=
ear future.=0A> =0A> yet if we don't do the hard work up front to make it e=
asy=0A> to plug in things=0A> like BM25, then no one will implement additio=
nal scoring=0A> formulas for=0A> Lucene, we currently make it terribly diff=
icult to do=0A> this.=0A> =0A> in the BM25 case we are just lucky, as Joaqu=
in went thru a=0A> lot of=0A> work/jumped thru a lot of hoops to make it ha=
ppen.=0A> =0A> On Wed, Feb 17, 2010 at 3:36 AM, Yuval Feinstein <yuvalf@ans=
wers.com>=0A> wrote:=0A> =0A> > This is very interesting and much friendlie=
r than a=0A> flame war.=0A> > My practical question for Robert is:=0A> > Ho=
w can we modify the BM25 patch so that it:=0A> > a) Becomes part of Lucene =
contrib.=0A> > b) Be easier to use (preventing mistakes=C2=A0 such as=0A> I=
van's using the BM25=0A> > similarity during indexing).=0A> > c) Proceeds t=
owards a pluggable scoring formula=0A> (Ideally, we should have an=0A> > In=
dexReader/IndexSearcher/IndexWriter=0A> > constructor enabling specifying a=
 scoring model=0A> through an enum, with the=0A> > default being, well, Luc=
ene's default scoring model)?=0A> > The easier it is to use, the more exper=
iments people=0A> can make, and see how=0A> > it works for them.=0A> > A fu=
ture "marketing" step could be adding BM25 to=0A> Solr, to further ease=0A>=
 > experimentation.=0A> > TIA,=0A> > Yuval=0A> >=0A> >=0A> > -----Original =
Message-----=0A> > From: Robert Muir [mailto:rcmuir@gmail.com]=0A> > Sent: =
Tuesday, February 16, 2010 10:38 PM=0A> > To: java-user@lucene.apache.org=
=0A> > Subject: Re: BM25 Scoring Patch=0A> >=0A> > Joaquin, I have a typica=
l methodology where I don't=0A> optimize any scoring=0A> > params: be it BM=
25 params (I stick with your=0A> defaults), or lnb.ltc params=0A> > (i=0A> =
> stick with default slope). When doing query expansion=0A> i don't modify =
the=0A> > defaults for MoreLikeThis either.=0A> >=0A> > I've found that cha=
nging these params can have a=0A> significant difference in=0A> > retrieval=
 performance, which is interesting, but I'm=0A> typically focused on=0A> > =
text analysis (how is the text=0A> indexed?/stemming/stopwords). I also fee=
l=0A> > that such things are corpus-specific, which i=0A> generally try to =
avoid in my=0A> > work...=0A> >=0A> > for example, in analysis work,=C2=A0 =
the text=0A> collection often has a majority of=0A> > text in a specific te=
nse (i.e. news), so i don't at=0A> all try to tune any=0A> > part=0A> > of =
analysis as I worry this would be=0A> corpus-specific... I do the same with=
=0A> > scoring.=0A> >=0A> > As far as why some models perform better than o=
thers=0A> for certain languages,=0A> > I think this is a million-dollar que=
stion. But my=0A> intuition (I don't have=0A> > references or anything to b=
ack this up), is that=0A> probabilistic models=0A> > outperform vector-spac=
e models when you are using=0A> approaches like n-grams:=0A> > you don't ha=
ve nice stopwords lists, stemming,=0A> decompounding etc.=0A> >=0A> > This =
is particularly interesting to me, as=0A> probabilistic model + ngram is a=
=0A> > very general multilingual approach that I would like=0A> to have wor=
king well=0A> > in=0A> > Lucene, its also important as a "default" when we=
=0A> don't have a nicely tuned=0A> > analyzer available that will work well=
 with a vector=0A> space model. In my=0A> > opinion, vector-space tends to =
fall apart without good=0A> language support.=0A> >=0A> >=0A> > On Tue, Feb=
 16, 2010 at 3:23 PM, JOAQUIN PEREZ=0A> IGLESIAS <=0A> > joaquin.perez@lsi.=
uned.es>=0A> wrote:=0A> >=0A> > > Ok,=0A> > >=0A> > > I'm not advocating th=
e BM25 patch neither,=0A> unfortunately BM25 was not my=0A> > > idea :-))),=
 and I'm sure that the implementation=0A> can be improved.=0A> > >=0A> > > =
When you use the BM25 implementation, are you=0A> optimising the parameters=
=0A> > > specifically per collection? (It is a key factor=0A> for improving=
 BM25=0A> > > performance).=0A> > >=0A> > > Why do you think that BM25 work=
s better for=0A> English than in other=0A> > > languages (apart of experime=
nts). What are your=0A> intuitions?=0A> > >=0A> > > I dont't have too much =
experience on languages=0A> moreover of Spanish and=0A> > > English, and it=
 sounds pretty interesting.=0A> > >=0A> > > Kind Regards.=0A> > >=0A> > > P=
.S: Maybe this is not a topic for this list???=0A> > >=0A> > >=0A> > > > Jo=
aquin, I don't see this as a flame war?=0A> First of all I'd like to=0A> > =
> > personally thank you for your excellent BM25=0A> implementation!=0A> > =
> >=0A> > > > I think the selection of a retrieval model=0A> depends highly=
 on the=0A> > > > language/indexing approach, i.e. if we were=0A> talking E=
ast Asian=0A> > languages=0A> > > I=0A> > > > think we want a probabilistic=
 model: no=0A> argument there!=0A> > > >=0A> > > > All i said was that it i=
s a myth that BM25=0A> is "always" better than=0A> > > > Lucene's=0A> > > >=
 scoring model, it really depends on what you=0A> are trying to do, how you=
=0A> > > are=0A> > > > indexing your text, properties of your=0A> corpus, h=
ow your queries are=0A> > > > running.=0A> > > >=0A> > > > I don't even wan=
t to come across as=0A> advocating the lnb.ltc approach=0A> > > > either,=
=0A> > > > sure I wrote the patch, but this means=0A> nothing. I only like =
it as its=0A> > > > currently a simple integration into Lucene,=0A> but lon=
g-term its best if=0A> > we=0A> > > > can=0A> > > > support other models al=
so!=0A> > > >=0A> > > > Finally I think there is something to be=0A> said f=
or Lucene's default=0A> > > > retrieval=0A> > > > model, which in my (non-e=
nglish) findings=0A> across the board isn't=0A> > terrible=0A> > > > at=0A>=
 > > > all... then again I am working with=0A> languages where analysis is =
really=0A> > > the=0A> > > > thing holding Lucene back, not scoring.=0A> > =
> >=0A> > > > On Tue, Feb 16, 2010 at 2:40 PM, JOAQUIN=0A> PEREZ IGLESIAS <=
=0A> > > > joaquin.perez@lsi.uned.es>=0A> wrote:=0A> > > >=0A> > > >> Just =
some final comments (as I said I'm=0A> not interested in flame wars),=0A> >=
 > >>=0A> > > >> If I obtain better results there are not=0A> problem with =
pooling=0A> > otherwise=0A> > > >> it=0A> > > >> is biased.=0A> > > >> The =
only important thing (in my opinion)=0A> is that it cannot be said=0A> > th=
at=0A> > > >> BM25 is a myth.=0A> > > >> Yes, you are right there is not an=
 only=0A> ranking model that beats the=0A> > > >> rest,=0A> > > >> but ther=
e are models that generally show=0A> a better performance in more=0A> > > >=
> cases.=0A> > > >>=0A> > > >> About CLEF I have had the same=0A> experienc=
e (VSM vs BM25) on Spanish and=0A> > > >> English (WebCLEF) and Q&A=0A> (Re=
sPubliQA)=0A> > > >>=0A> > > >> Ivan checks the parameters (b and k1),=0A> =
probably you can improve your=0A> > > >> results. (that's the bad part of B=
M25).=0A> > > >>=0A> > > >> Finally we are just speaking of personal=0A> ex=
perience, so obviously you=0A> > > >> should use the best model for your da=
ta=0A> and your own experience, on IR=0A> > > >> there are not myths neithe=
r best ranking=0A> models. If any of us is able=0A> > to=0A> > > >> find th=
e =E2=80=9Cbest=E2=80=9D=C2=A0=0A> ranking model, or is able to prove that=
=0A> > any=0A> > > >> state-of-the art is a myth he should=0A> send these r=
esults to the SIGIR=0A> > > >> conference.=0A> > > >>=0A> > > >> Ivan, Robe=
rt good luck with your=0A> experiments, as I said the good part=0A> > of=0A=
> > > >> IR is that you can always make=0A> experiments on your own.=0A> > =
> >>=0A> > > >> > I don't think its really a=0A> competition, I think prefe=
rably we should=0A> > > >> have=0A> > > >> > the flexibility to change the=
=0A> scoring model in lucene actually?=0A> > > >> >=0A> > > >> > I have fou=
nd lots of cases where=0A> VSM improves on BM25, but then=0A> > again=0A> >=
 > >> I=0A> > > >> > don't work with TREC stuff, as I=0A> work with non-eng=
lish collections.=0A> > > >> >=0A> > > >> > It doesn't contradict years of=
=0A> research to say that VSM isn't a=0A> > > >> > state-of-the-art model, =
besides the=0A> TREC-4 results, there are CLEF=0A> > > >> results=0A> > > >=
> > where VSM models perform=0A> competitively or exceed (Finnish, Russian,=
=0A> > > >> etc)=0A> > > >> > BM25/DFR/etc.=0A> > > >> >=0A> > > >> > It de=
pends on the collection, there=0A> isn't a 'best retrieval=0A> > formula'.=
=0A> > > >> >=0A> > > >> > Note: I have no bias against BM-25,=0A> but its =
definitely a myth to say=0A> > > >> there=0A> > > >> > is a single retrieva=
l formula that=0A> is the 'best' across the board.=0A> > > >> >=0A> > > >> =
>=0A> > > >> > On Tue, Feb 16, 2010 at 1:53 PM,=0A> JOAQUIN PEREZ IGLESIAS =
<=0A> > > >> > joaquin.perez@lsi.uned.es>=0A> wrote:=0A> > > >> >=0A> > > >=
> >> By the way,=0A> > > >> >>=0A> > > >> >> I don't want to start a flame=
=0A> war VSM vs BM25, but I really believe=0A> > > >> that=0A> > > >> >> I=
=0A> > > >> >> have to express my opinion as=0A> Robert has done. In my exp=
erience, I=0A> > > >> have=0A> > > >> >> never found a case where VSM=0A> i=
mproves significantly BM25. Maybe you=0A> > > >> can=0A> > > >> >> find som=
e cases under some very=0A> specific collection=0A> > characteristics,=0A> =
> > >> (as=0A> > > >> >> average length of 300 vs 3000)=0A> or a bad usage =
of BM25 (not proper=0A> > > >> >> parameters) where it can=0A> happen.=0A> =
> > >> >>=0A> > > >> >> BM25 is not just only a=0A> different way of length=
 normalization, it=0A> > is=0A> > > >> >> based=0A> > > >> >> strongly in t=
he probabilistic=0A> framework, and parametrises=0A> > frequencies=0A> > > =
>> >> and=0A> > > >> >> length. This is probably the=0A> most successful ra=
nking model of the=0A> > > >> last=0A> > > >> >> years in Information=0A> R=
etrieval.=0A> > > >> >>=0A> > > >> >> I have never read a paper where=0A> V=
SM=C2=A0 improves any of the=0A> > > >> >> state-of-the-art=0A> > > >> >> r=
anking models (Language=0A> Models, DFR, BM25,...),=C2=A0 although the VSM=
=0A> > > >> with=0A> > > >> >> pivoted normalisation length=0A> can obtain =
nice results. This can be=0A> > > >> proved=0A> > > >> >> checking the last=
 years of the=0A> TREC competition.=0A> > > >> >>=0A> > > >> >> Honestly to=
 say that is a myth=0A> that BM25 improves VSM breaks the=0A> > last=0A> > =
> >> 10=0A> > > >> >> or 15 years of research on=0A> Information Retrieval,=
 and I really=0A> > > >> believe=0A> > > >> >> that is not accurate.=0A> > =
> >> >>=0A> > > >> >> The good thing of Information=0A> Retrieval is that y=
ou can always make=0A> > > >> your=0A> > > >> >> owns experiments and you c=
an=0A> use the experience of a lot of years=0A> > of=0A> > > >> >> research=
.=0A> > > >> >>=0A> > > >> >> PS: This opinion is based on=0A> experiments =
on TREC and CLEF=0A> > > >> collections,=0A> > > >> >> obviously we can sta=
rt a debate=0A> about the suitability of this type=0A> > of=0A> > > >> >> e=
xperimentation (concept of=0A> relevance, pooling, relevance=0A> > > >> jud=
gements),=0A> > > >> >> but=0A> > > >> >> this is a much more complex=0A> t=
opic and I believe is far from what we=0A> > > >> are=0A> > > >> >> dealing=
 here.=0A> > > >> >>=0A> > > >> >> PS2: In relation with TREC4=0A> Cornell =
used a pivoted length=0A> > > >> normalisation=0A> > > >> >> and they were =
applying=0A> pseudo-relevance feedback, what honestly=0A> > makes=0A> > > >=
> >> much=0A> > > >> >> more difficult the analysis of=0A> the results. Obv=
iously their results=0A> > > >> were=0A> > > >> >> part of the pool.=0A> > =
> >> >>=0A> > > >> >> Sorry for the huge mail :-))))=0A> > > >> >>=0A> > > =
>> >> > Hi Ivan,=0A> > > >> >> >=0A> > > >> >> > the problem is that=0A> un=
fortunately BM25=0A> > > >> >> > cannot be implemented=0A> overwriting=0A> =
> > >> >> > the Similarity interface.=0A> Therefore BM25Similarity=0A> > > =
>> >> > only computes the classic=0A> probabilistic IDF (what is=0A> > > >>=
 >> > interesting only at search=0A> time).=0A> > > >> >> > If you set BM25=
Similarity=0A> at indexing time=0A> > > >> >> > some basic stats are not=0A=
> stored=0A> > > >> >> > correctly in the segments=0A> (like docs length).=
=0A> > > >> >> >=0A> > > >> >> > When you use=0A> BM25BooleanQuery this cla=
ss=0A> > > >> >> > will set automatically the=0A> BM25Similarity for you,=
=0A> > > >> >> > therefore you don't need=0A> to do this explicitly.=0A> > =
> >> >> >=0A> > > >> >> > I tried to make this=0A> implementation with the =
focus on=0A> > > >> >> > not interfering on the=0A> typical use of Lucene (=
so no changing=0A> > > >> >> > DefaultSimilarity).=0A> > > >> >> >=0A> > > =
>> >> >> Joaquin, Robert,=0A> > > >> >> >>=0A> > > >> >> >> I followed Joaq=
uin's=0A> recommendation and removed the call to set=0A> > > >> >> >> simil=
arity=0A> > > >> >> >> to BM25 explicitly=0A> (indexer, searcher).=C2=A0 Th=
e results showed 55%=0A> > > >> >> >> improvement for the=0A> MAP score (0.=
141->0.219) over default=0A> > > >> similarity.=0A> > > >> >> >>=0A> > > >>=
 >> >> Joaquin, how would=0A> setting the similarity to BM25 explicitly=0A>=
 > make=0A> > > >> the=0A> > > >> >> >> score worse?=0A> > > >> >> >>=0A> >=
 > >> >> >> Thank you,=0A> > > >> >> >>=0A> > > >> >> >> Ivan=0A> > > >> >>=
 >>=0A> > > >> >> >>=0A> > > >> >> >>=0A> > > >> >> >> --- On Tue, 2/16/10,=
=0A> Robert Muir <rcmuir@gmail.com>=0A> wrote:=0A> > > >> >> >>=0A> > > >> =
>> >>> From: Robert Muir=0A> <rcmuir@gmail.com>=0A> > > >> >> >>> Subject: =
Re: BM25=0A> Scoring Patch=0A> > > >> >> >>> To: java-user@lucene.apache.or=
g=0A> > > >> >> >>> Date: Tuesday,=0A> February 16, 2010, 11:36 AM=0A> > > =
>> >> >>> yes Ivan, if=0A> possible please report=0A> > > >> >> >>> back an=
y findings=0A> you can on the=0A> > > >> >> >>> experiments you=0A> are doi=
ng!=0A> > > >> >> >>>=0A> > > >> >> >>> On Tue, Feb 16,=0A> 2010 at 11:22 A=
M, Joaquin Perez Iglesias=0A> > > >> >> >>> <=0A> > > >> >> >>> joaquin.per=
ez@lsi.uned.es>=0A> > > >> >> >>> wrote:=0A> > > >> >> >>>=0A> > > >> >> >>=
> > Hi Ivan,=0A> > > >> >> >>> >=0A> > > >> >> >>> > You shouldn't=0A> set =
the BM25Similarity for indexing or=0A> > > >> >> >>> searching.=0A> > > >> =
>> >>> > Please try=0A> removing the lines:=0A> > > >> >> >>>=0A> >=C2=A0=
=C2=A0=C2=A0writer.setSimilarity(new=0A> > > >> >> >>>=0A> BM25Similarity()=
);=0A> > > >> >> >>>=0A> >=C2=A0=C2=A0=C2=A0searcher.setSimilarity(sim);=0A=
> > > >> >> >>> >=0A> > > >> >> >>> > Please let=0A> us/me know if you impr=
ove your results with=0A> > > >> >> >>> these changes.=0A> > > >> >> >>> >=
=0A> > > >> >> >>> >=0A> > > >> >> >>> > Robert Muir=0A> escribi=C3=B3:=0A>=
 > > >> >> >>> >=0A> > > >> >> >>> >=C2=A0 Hi=0A> Ivan, I've seen many case=
s where BM25=0A> > > >> >> >>> performs worse=0A> than Lucene's=0A> > > >> =
>> >>> >> default=0A> Similarity. Perhaps this is just another=0A> > > >> >=
> >>> one?=0A> > > >> >> >>> >>=0A> > > >> >> >>> >> Again=0A> while I have=
 not worked with this particular=0A> > > >> >> >>> collection, I=0A> looked=
 at=0A> > > >> >> >>> >> the=0A> statistics and noted that its composed of=
=0A> > > >> >> >>> several=0A> 'sub-collections':=0A> > > >> >> >>> >> for=
=0A> > > >> >> >>> >> example=0A> the PAT documents on disk 3 have an=0A> >=
 > >> >> >>> average doc length=0A> of 3543,=0A> > > >> >> >>> >> but=0A> >=
 > >> >> >>> >> the AP=0A> documents on disk 1 have an avg doc length=0A> >=
 > >> >> >>> of 353.=0A> > > >> >> >>> >>=0A> > > >> >> >>> >> I have=0A> f=
ound on other collections that any=0A> > > >> >> >>> advantages of=0A> BM25=
's document=0A> > > >> >> >>> >> length=0A> normalization fall apart when '=
average=0A> > > >> >> >>> document length'=0A> doesn't=0A> > > >> >> >>> >>=
 make=0A> > > >> >> >>> >> a whole=0A> lot of sense (cases like this).=0A> =
> > >> >> >>> >>=0A> > > >> >> >>> >> For this=0A> same reason, I've only f=
ound a few=0A> > > >> >> >>> collections where=0A> BM25's doc=0A> > > >> >>=
 >>> >> length=0A> normalization is really significantly=0A> > > >> >> >>> =
better than=0A> Lucene's.=0A> > > >> >> >>> >>=0A> > > >> >> >>> >> In my=
=0A> opinion, the results on a particular test=0A> > > >> >> >>> collection=
 or 2=0A> have=0A> > > >> >> >>> >> perhaps=0A> > > >> >> >>> >> been=0A> t=
aken too far and created a myth that BM25 is=0A> > > >> >> >>> always super=
ior=0A> to=0A> > > >> >> >>> >> Lucene's=0A> scoring... this is not true!=
=0A> > > >> >> >>> >>=0A> > > >> >> >>> >> On Tue,=0A> Feb 16, 2010 at 9:46=
 AM, Ivan Provalov=0A> > > >> >> >>> <iprovalo@yahoo.com>=0A> > > >> >> >>>=
 >> wrote:=0A> > > >> >> >>> >>=0A> > > >> >> >>> >>=C2=A0 I=0A> applied th=
e Lucene patch mentioned in=0A> > > >> >> >>> >>> https://issues.apache.org=
/jira/browse/LUCENE-2091 and=0A> > > >> >> >>> ran the MAP=0A> > > >> >> >>=
> >>>=0A> numbers=0A> > > >> >> >>> >>> on=0A> TREC-3 collection using topi=
cs=0A> > > >> >> >>> 151-200.=C2=A0 I=0A> am not getting worse=0A> > > >> >=
> >>> >>>=0A> results=0A> > > >> >> >>> >>>=0A> comparing to Lucene Default=
Similarity.=C2=A0 I=0A> > > >> >> >>> suspect, I am not=0A> using it=0A> > =
> >> >> >>> >>>=0A> correctly.=C2=A0 I have single field=0A> > > >> >> >>> =
documents.=C2=A0=0A> This is the process I use:=0A> > > >> >> >>> >>>=0A> >=
 > >> >> >>> >>> 1.=0A> During the indexing, I am setting the=0A> > > >> >>=
 >>> similarity to BM25=0A> as such:=0A> > > >> >> >>> >>>=0A> > > >> >> >>=
> >>>=0A> IndexWriter writer =3D new IndexWriter(dir, new=0A> > > >> >> >>>=
 StandardAnalyzer(=0A> > > >> >> >>> >>>=0A> > > >> >> >>>=C2=A0 =C2=A0=0A>=
 Version.LUCENE_CURRENT), true,=0A> > > >> >> >>> >>>=0A> > > >> >> >>>=C2=
=A0 =C2=A0=0A> IndexWriter.MaxFieldLength.UNLIMITED);=0A> > > >> >> >>> >>>=
=0A> writer.setSimilarity(new BM25Similarity());=0A> > > >> >> >>> >>>=0A> =
> > >> >> >>> >>> 2.=0A> During the Precision/Recall measurements, I=0A> > =
> >> >> >>> am using a=0A> > > >> >> >>> >>>=0A> SimpleBM25QQParser extensi=
on I added to the=0A> > > >> >> >>> benchmark:=0A> > > >> >> >>> >>>=0A> > =
> >> >> >>> >>>=0A> QualityQueryParser qqParser =3D new=0A> > > >> >> >>>=
=0A> SimpleBM25QQParser("title", "TEXT");=0A> > > >> >> >>> >>>=0A> > > >> =
>> >>> >>>=0A> > > >> >> >>> >>> 3.=0A> Here is the parser code (I set an a=
vg doc=0A> > > >> >> >>> length here):=0A> > > >> >> >>> >>>=0A> > > >> >> =
>>> >>>=0A> public Query parse(QualityQuery qq) throws=0A> > > >> >> >>> Pa=
rseException {=0A> > > >> >> >>>=0A> >>>=C2=A0=C2=A0=C2=A0BM25Parameters.se=
tAverageLength(indexField,=0A> > > >> >> >>> 798.30f);//avg doc=0A> length=
=0A> > > >> >> >>>=0A> >>>=C2=A0=C2=A0=C2=A0BM25Parameters.setB(0.5f);//tri=
ed=0A> > > >> >> >>> default values=0A> > > >> >> >>>=0A> >>>=C2=A0=C2=A0=
=C2=A0BM25Parameters.setK1(2f);=0A> > > >> >> >>>=0A> >>>=C2=A0=C2=A0=C2=A0=
return query =3D new=0A> > > >> >> >>>=0A> BM25BooleanQuery(qq.getValue(qqN=
ame), indexField,=0A> > > >> >> >>> >>> new=0A> > > >> >> >>> >>>=0A> Stand=
ardAnalyzer(Version.LUCENE_CURRENT));=0A> > > >> >> >>> >>> }=0A> > > >> >>=
 >>> >>>=0A> > > >> >> >>> >>> 4.=0A> The searcher is using BM25 similarity=
:=0A> > > >> >> >>> >>>=0A> > > >> >> >>> >>>=0A> Searcher searcher =3D new=
 IndexSearcher(dir,=0A> > > >> >> >>> true);=0A> > > >> >> >>> >>>=0A> sear=
cher.setSimilarity(sim);=0A> > > >> >> >>> >>>=0A> > > >> >> >>> >>> Am I=
=0A> missing some steps?=C2=A0 Does anyone=0A> > > >> >> >>> have experienc=
e=0A> with this code?=0A> > > >> >> >>> >>>=0A> > > >> >> >>> >>>=0A> Thank=
s,=0A> > > >> >> >>> >>>=0A> > > >> >> >>> >>> Ivan=0A> > > >> >> >>> >>>=
=0A> > > >> >> >>> >>>=0A> > > >> >> >>> >>>=0A> > > >> >> >>> >>>=0A> > > =
>> >> >>> >>>=0A> > > >> >> >>>=0A> > > >>=0A> ----------------------------=
-----------------------------------------=0A> > > >> >> >>> >>> To=0A> unsu=
bscribe, e-mail:=0A> > > >> java-user-unsubscribe@lucene.apache.org=0A> > >=
 >> >> >>> >>> For=0A> additional commands, e-mail:=0A> > > >> >> java-user=
-help@lucene.apache.org=0A> > > >> >> >>> >>>=0A> > > >> >> >>> >>>=0A> > >=
 >> >> >>> >>>=0A> > > >> >> >>> >>=0A> > > >> >> >>> >>=0A> > > >> >> >>> =
> --=0A> > > >> >> >>> >=0A> > > >> >> >>>=0A> ----------------------------=
-------------------------------=0A> > > >> >> >>> > Joaqu=C3=ADn=0A> P=C3=
=A9rez Iglesias=0A> > > >> >> >>> > Dpto.=0A> Lenguajes y Sistemas Inform=
=C3=A1ticos=0A> > > >> >> >>> > E.T.S.I.=0A> Inform=C3=A1tica (UNED)=0A> > =
> >> >> >>> > Ciudad=0A> Universitaria=0A> > > >> >> >>> > C/ Juan del=0A> =
Rosal n=C2=BA 16=0A> > > >> >> >>> > 28040 Madrid=0A> - Spain=0A> > > >> >>=
 >>> > Phone. +34 91=0A> 398 89 19=0A> > > >> >> >>> > Fax=C2=A0=0A> =C2=A0=
 +34 91 398 65 35=0A> > > >> >> >>> > Office=C2=A0=0A> 2.11=0A> > > >> >> >=
>> > Email: joaquin.perez@lsi.uned.es=0A> > > >> >> >>> > web:=0A> > > >> h=
ttp://nlp.uned.es/~jperezi/ <http://nlp.uned.es/%7Ejperezi/> <=0A> > http:/=
/nlp.uned.es/%7Ejperezi/><=0A> > > http://nlp.uned.es/%7Ejperezi/>=0A> > > =
>> >> <http://nlp.uned.es/%7Ejperezi/><=0A> > > >> >> http://nlp.uned.es/%7=
Ejperezi/>=0A> > > >> >> >>> >=0A> > > >> >> >>>=0A> ----------------------=
-------------------------------------=0A> > > >> >> >>> >=0A> > > >> >> >>>=
 >=0A> > > >> >> >>> >=0A> > > >> >> >>>=0A> > > >>=0A> -------------------=
--------------------------------------------------=0A> > > >> >> >>> > To=
=0A> unsubscribe, e-mail:=0A> > > java-user-unsubscribe@lucene.apache.org=
=0A> > > >> >> >>> > For=0A> additional commands, e-mail:=0A> > > >> java-u=
ser-help@lucene.apache.org=0A> > > >> >> >>> >=0A> > > >> >> >>> >=0A> > > =
>> >> >>>=0A> > > >> >> >>>=0A> > > >> >> >>> --=0A> > > >> >> >>> Robert M=
uir=0A> > > >> >> >>> rcmuir@gmail.com=0A> > > >> >> >>>=0A> > > >> >> >>=
=0A> > > >> >> >>=0A> > > >> >> >>=0A> > > >> >> >>=0A> > > >> >> >>=0A> > =
>=0A> ---------------------------------------------------------------------=
=0A> > > >> >> >> To unsubscribe,=0A> e-mail: java-user-unsubscribe@lucene.=
apache.org=0A> > > >> >> >> For additional=0A> commands, e-mail:=0A> > java=
-user-help@lucene.apache.org=0A> > > >> >> >>=0A> > > >> >> >>=0A> > > >> >=
> >=0A> > > >> >> >=0A> > > >> >> >=0A> > > >> >> >=0A> > >=0A> -----------=
----------------------------------------------------------=0A> > > >> >> > =
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> > > >> =
>> > For additional commands,=0A> e-mail:=0A> > java-user-help@lucene.apach=
e.org=0A> > > >> >> >=0A> > > >> >> >=0A> > > >> >>=0A> > > >> >>=0A> > > >=
> >>=0A> > > >> >>=0A> >=0A> ----------------------------------------------=
-----------------------=0A> > > >> >> To unsubscribe, e-mail: java-user-uns=
ubscribe@lucene.apache.org=0A> > > >> >> For additional commands,=0A> e-mai=
l: java-user-help@lucene.apache.org=0A> > > >> >>=0A> > > >> >>=0A> > > >> =
>=0A> > > >> >=0A> > > >> > --=0A> > > >> > Robert Muir=0A> > > >> > rcmuir=
@gmail.com=0A> > > >> >=0A> > > >>=0A> > > >>=0A> > > >>=0A> > > >>=0A> ---=
------------------------------------------------------------------=0A> > > =
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> > > =
>> For additional commands, e-mail: java-user-help@lucene.apache.org=0A> > =
> >>=0A> > > >>=0A> > > >=0A> > > >=0A> > > > --=0A> > > > Robert Muir=0A> =
> > > rcmuir@gmail.com=0A> > > >=0A> > >=0A> > >=0A> > >=0A> > >=0A> ------=
---------------------------------------------------------------=0A> > > To =
unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> > > For ad=
ditional commands, e-mail: java-user-help@lucene.apache.org=0A> > >=0A> > >=
=0A> >=0A> >=0A> > --=0A> > Robert Muir=0A> > rcmuir@gmail.com=0A> >=0A> =
=0A> =0A> =0A> -- =0A> Robert Muir=0A> rcmuir@gmail.com=0A> =0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 16:18:26 2010
Return-Path: <java-user-return-45051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74679 invoked from network); 17 Feb 2010 16:18:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 16:18:26 -0000
Received: (qmail 75935 invoked by uid 500); 17 Feb 2010 16:18:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75857 invoked by uid 500); 17 Feb 2010 16:18:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75847 invoked by uid 99); 17 Feb 2010 16:18:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 16:18:24 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 16:18:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nhmb4-0003uN-Vc
	for java-user@lucene.apache.org; Wed, 17 Feb 2010 08:17:54 -0800
Message-ID: <27626268.post@talk.nabble.com>
Date: Wed, 17 Feb 2010 08:17:54 -0800 (PST)
From: AlisonCallahan <alison.callahan@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: PrefixQuery returning 0 results
In-Reply-To: <000d01caafea$770e62c0$652b2840$@de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: alison.callahan@gmail.com
References: <27625646.post@talk.nabble.com> <000d01caafea$770e62c0$652b2840$@de>


Originally "subject" was indexed with ANALYZED ... I changed it to
NOT_ANALYZED (there was no "keyword" option for indexing in Lucene 3.0.0),
and I am still having the same problem.

Thanks,

Alison Callahan


Uwe Schindler wrote:
> 
> How is "subject indexed"?
> 
> I fit is indexed with ANALYZED not as keyword only, StandardAnalyzer will
> remove <, lowercase and so on.
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
> 
>> -----Original Message-----
>> From: AlisonCallahan [mailto:alison.callahan@gmail.com]
>> Sent: Wednesday, February 17, 2010 4:39 PM
>> To: java-user@lucene.apache.org
>> Subject: PrefixQuery returning 0 results
>> 
>> 
>> I have indexed RDF in N-triple format (with three fields -- "subject",
>> "predicate", "object") and now am trying to query the index with a
>> PrefixQuery on the "subject" field. My test case is to get back all
>> documents whose subject field starts with the prefix "<http", and I
>> would
>> expect to get back all documents. Instead, the PrefixQuery returns 0
>> documents. I have read and can't see why the PrefixQuery is returning 0
>> results.
>> 
>> Here is the relevant code:
>> 
>> 	IndexReader n3reader = IndexReader.open(FSDirectory.open(new
>> File(index)),
>> true);
>> 	Searcher searcher = new IndexSearcher(n3reader);
>> 	Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_CURRENT);
>> 
>> 	String test = "<http";
>> 
>> 	Query nsQuery = new PrefixQuery(new Term("subject", test));
>> 
>> 	TopDocs hits = searcher.search(nsQuery, 10);
>> 
>> 	System.out.println("Hits: "+hits.totalHits);
>> 
>> This code prints out '0' hits ... Any suggestions for why this isn't
>> working?? Thanks,
>> 
>> Alison Callahan
>> --
>> View this message in context: http://old.nabble.com/PrefixQuery-
>> returning-0-results-tp27625646p27625646.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/PrefixQuery-returning-0-results-tp27625646p27626268.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 16:21:36 2010
Return-Path: <java-user-return-45052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75475 invoked from network); 17 Feb 2010 16:21:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 16:21:36 -0000
Received: (qmail 85412 invoked by uid 500); 17 Feb 2010 16:21:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85349 invoked by uid 500); 17 Feb 2010 16:21:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85339 invoked by uid 99); 17 Feb 2010 16:21:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 16:21:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 16:21:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nhme7-0004C3-Cr
	for java-user@lucene.apache.org; Wed, 17 Feb 2010 08:21:03 -0800
Message-ID: <27626321.post@talk.nabble.com>
Date: Wed, 17 Feb 2010 08:21:03 -0800 (PST)
From: AlisonCallahan <alison.callahan@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: PrefixQuery returning 0 results
In-Reply-To: <27626268.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: alison.callahan@gmail.com
References: <27625646.post@talk.nabble.com> <000d01caafea$770e62c0$652b2840$@de> <27626268.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Nevermind ... I wrote too soon ... It works!! Thank you Uwe Schindler!

Alison Callahan

AlisonCallahan wrote:
> 
> Originally "subject" was indexed with ANALYZED ... I changed it to
> NOT_ANALYZED (there was no "keyword" option for indexing in Lucene 3.0.0),
> and I am still having the same problem.
> 
> Thanks,
> 
> Alison Callahan
> 
> 
> Uwe Schindler wrote:
>> 
>> How is "subject indexed"?
>> 
>> I fit is indexed with ANALYZED not as keyword only, StandardAnalyzer will
>> remove <, lowercase and so on.
>> 
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>> 
>> 
>>> -----Original Message-----
>>> From: AlisonCallahan [mailto:alison.callahan@gmail.com]
>>> Sent: Wednesday, February 17, 2010 4:39 PM
>>> To: java-user@lucene.apache.org
>>> Subject: PrefixQuery returning 0 results
>>> 
>>> 
>>> I have indexed RDF in N-triple format (with three fields -- "subject",
>>> "predicate", "object") and now am trying to query the index with a
>>> PrefixQuery on the "subject" field. My test case is to get back all
>>> documents whose subject field starts with the prefix "<http", and I
>>> would
>>> expect to get back all documents. Instead, the PrefixQuery returns 0
>>> documents. I have read and can't see why the PrefixQuery is returning 0
>>> results.
>>> 
>>> Here is the relevant code:
>>> 
>>> 	IndexReader n3reader = IndexReader.open(FSDirectory.open(new
>>> File(index)),
>>> true);
>>> 	Searcher searcher = new IndexSearcher(n3reader);
>>> 	Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_CURRENT);
>>> 
>>> 	String test = "<http";
>>> 
>>> 	Query nsQuery = new PrefixQuery(new Term("subject", test));
>>> 
>>> 	TopDocs hits = searcher.search(nsQuery, 10);
>>> 
>>> 	System.out.println("Hits: "+hits.totalHits);
>>> 
>>> This code prints out '0' hits ... Any suggestions for why this isn't
>>> working?? Thanks,
>>> 
>>> Alison Callahan
>>> --
>>> View this message in context: http://old.nabble.com/PrefixQuery-
>>> returning-0-results-tp27625646p27625646.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>> 
>>> 
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://old.nabble.com/PrefixQuery-returning-0-results-tp27625646p27626321.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 16:29:27 2010
Return-Path: <java-user-return-45053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77459 invoked from network); 17 Feb 2010 16:29:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 16:29:27 -0000
Received: (qmail 96995 invoked by uid 500); 17 Feb 2010 16:29:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96920 invoked by uid 500); 17 Feb 2010 16:29:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96910 invoked by uid 99); 17 Feb 2010 16:29:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 16:29:25 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 16:29:12 +0000
Received: by pwi6 with SMTP id 6so160895pwi.35
        for <java-user@lucene.apache.org>; Wed, 17 Feb 2010 08:28:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=ClXC+M0FBmuO2Vdje0bOkjyYBcJRpzJA1E+gyOwN260=;
        b=m/OONHmJ4zovN+wrcuvTV/XZ7szQdrf8GBNQnTAfhQYd66zNv+1XTYHDxqDbsw8Amf
         4wB8z2BxcflSj93ks+RACxwIY8fekYqGMoJhRHIsq1FBTFKAjh++McIdUZNK/gRelDMF
         6QM1hCh2qVAz5KzmDJvZT+pv01rFqqyAt9KxI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=YMQ1bMaKQPM47XXl0l8BfjlN2DWQ0xl/l7m5qMdqpK8Uq6PzYy1cruah4G6sFFxwJr
         kBEQtBDlaQfMgkbEisdssREK+nQ4ZnchP0e/SSD0NnxU3dP/V1ihRxY8IjjRgkJThoe9
         gwtY+nBL2YG9wGqxfB+AFnPprhoXcS1vMewoE=
MIME-Version: 1.0
Received: by 10.115.101.3 with SMTP id d3mr5480806wam.129.1266424130112; Wed, 
	17 Feb 2010 08:28:50 -0800 (PST)
In-Reply-To: <203784.98707.qm@web113315.mail.gq1.yahoo.com>
References: <8f0ad1f31002170731p11c7d456r506a7cdff913c6a9@mail.gmail.com> 
	<203784.98707.qm@web113315.mail.gq1.yahoo.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 17 Feb 2010 11:28:30 -0500
Message-ID: <8f0ad1f31002170828t738a520fq22dd8d0a038d962f@mail.gmail.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64dbbd4690e77047fce5800
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64dbbd4690e77047fce5800
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

right, that is basically lnu.ltc, we should support that model too.

i experimented with this for some work i was doing, and hacked it in with
similarity by exposing this stuff to FieldInvertState and shoving it in the
norm, not the best as its just a byte and already storing the length norm
too, but it somewhat works.

On Wed, Feb 17, 2010 at 11:15 AM, Ivan Provalov <iprovalo@yahoo.com> wrote:

> Another example of plugging in different score mechanism is getting avera=
ge
> term frequency for the TF normalization described in IBM's
> http://trec.nist.gov/pubs/trec16/papers/ibm-haifa.mq.final.pdf
>
> We opened up the TermScorer class for that.
>
> Thanks,
>
> Ivan
>
> --- On Wed, 2/17/10, Robert Muir <rcmuir@gmail.com> wrote:
>
> > From: Robert Muir <rcmuir@gmail.com>
> > Subject: Re: BM25 Scoring Patch
> > To: java-user@lucene.apache.org
> > Date: Wednesday, February 17, 2010, 10:31 AM
> > Yuval, i apologize for not having an
> > intelligent response for your question
> > (if i did i would try to formulate it as a patch), but I
> > too would like for
> > it to be extremely easy... maybe we can iterate on the
> > patch.
> >
> > below is how i feel about it:
> >
> > i guess theoretically, the use of Similarity is how we
> > would implement a
> > pluggable scoring formula, i think already supported by
> > Solr. it would be
> > nice if BM25 could be just another Similarity, but i'm not
> > even sure thats
> > realistic in the near future.
> >
> > yet if we don't do the hard work up front to make it easy
> > to plug in things
> > like BM25, then no one will implement additional scoring
> > formulas for
> > Lucene, we currently make it terribly difficult to do
> > this.
> >
> > in the BM25 case we are just lucky, as Joaquin went thru a
> > lot of
> > work/jumped thru a lot of hoops to make it happen.
> >
> > On Wed, Feb 17, 2010 at 3:36 AM, Yuval Feinstein <yuvalf@answers.com>
> > wrote:
> >
> > > This is very interesting and much friendlier than a
> > flame war.
> > > My practical question for Robert is:
> > > How can we modify the BM25 patch so that it:
> > > a) Becomes part of Lucene contrib.
> > > b) Be easier to use (preventing mistakes  such as
> > Ivan's using the BM25
> > > similarity during indexing).
> > > c) Proceeds towards a pluggable scoring formula
> > (Ideally, we should have an
> > > IndexReader/IndexSearcher/IndexWriter
> > > constructor enabling specifying a scoring model
> > through an enum, with the
> > > default being, well, Lucene's default scoring model)?
> > > The easier it is to use, the more experiments people
> > can make, and see how
> > > it works for them.
> > > A future "marketing" step could be adding BM25 to
> > Solr, to further ease
> > > experimentation.
> > > TIA,
> > > Yuval
> > >
> > >
> > > -----Original Message-----
> > > From: Robert Muir [mailto:rcmuir@gmail.com]
> > > Sent: Tuesday, February 16, 2010 10:38 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: BM25 Scoring Patch
> > >
> > > Joaquin, I have a typical methodology where I don't
> > optimize any scoring
> > > params: be it BM25 params (I stick with your
> > defaults), or lnb.ltc params
> > > (i
> > > stick with default slope). When doing query expansion
> > i don't modify the
> > > defaults for MoreLikeThis either.
> > >
> > > I've found that changing these params can have a
> > significant difference in
> > > retrieval performance, which is interesting, but I'm
> > typically focused on
> > > text analysis (how is the text
> > indexed?/stemming/stopwords). I also feel
> > > that such things are corpus-specific, which i
> > generally try to avoid in my
> > > work...
> > >
> > > for example, in analysis work,  the text
> > collection often has a majority of
> > > text in a specific tense (i.e. news), so i don't at
> > all try to tune any
> > > part
> > > of analysis as I worry this would be
> > corpus-specific... I do the same with
> > > scoring.
> > >
> > > As far as why some models perform better than others
> > for certain languages,
> > > I think this is a million-dollar question. But my
> > intuition (I don't have
> > > references or anything to back this up), is that
> > probabilistic models
> > > outperform vector-space models when you are using
> > approaches like n-grams:
> > > you don't have nice stopwords lists, stemming,
> > decompounding etc.
> > >
> > > This is particularly interesting to me, as
> > probabilistic model + ngram is a
> > > very general multilingual approach that I would like
> > to have working well
> > > in
> > > Lucene, its also important as a "default" when we
> > don't have a nicely tuned
> > > analyzer available that will work well with a vector
> > space model. In my
> > > opinion, vector-space tends to fall apart without good
> > language support.
> > >
> > >
> > > On Tue, Feb 16, 2010 at 3:23 PM, JOAQUIN PEREZ
> > IGLESIAS <
> > > joaquin.perez@lsi.uned.es>
> > wrote:
> > >
> > > > Ok,
> > > >
> > > > I'm not advocating the BM25 patch neither,
> > unfortunately BM25 was not my
> > > > idea :-))), and I'm sure that the implementation
> > can be improved.
> > > >
> > > > When you use the BM25 implementation, are you
> > optimising the parameters
> > > > specifically per collection? (It is a key factor
> > for improving BM25
> > > > performance).
> > > >
> > > > Why do you think that BM25 works better for
> > English than in other
> > > > languages (apart of experiments). What are your
> > intuitions?
> > > >
> > > > I dont't have too much experience on languages
> > moreover of Spanish and
> > > > English, and it sounds pretty interesting.
> > > >
> > > > Kind Regards.
> > > >
> > > > P.S: Maybe this is not a topic for this list???
> > > >
> > > >
> > > > > Joaquin, I don't see this as a flame war?
> > First of all I'd like to
> > > > > personally thank you for your excellent BM25
> > implementation!
> > > > >
> > > > > I think the selection of a retrieval model
> > depends highly on the
> > > > > language/indexing approach, i.e. if we were
> > talking East Asian
> > > languages
> > > > I
> > > > > think we want a probabilistic model: no
> > argument there!
> > > > >
> > > > > All i said was that it is a myth that BM25
> > is "always" better than
> > > > > Lucene's
> > > > > scoring model, it really depends on what you
> > are trying to do, how you
> > > > are
> > > > > indexing your text, properties of your
> > corpus, how your queries are
> > > > > running.
> > > > >
> > > > > I don't even want to come across as
> > advocating the lnb.ltc approach
> > > > > either,
> > > > > sure I wrote the patch, but this means
> > nothing. I only like it as its
> > > > > currently a simple integration into Lucene,
> > but long-term its best if
> > > we
> > > > > can
> > > > > support other models also!
> > > > >
> > > > > Finally I think there is something to be
> > said for Lucene's default
> > > > > retrieval
> > > > > model, which in my (non-english) findings
> > across the board isn't
> > > terrible
> > > > > at
> > > > > all... then again I am working with
> > languages where analysis is really
> > > > the
> > > > > thing holding Lucene back, not scoring.
> > > > >
> > > > > On Tue, Feb 16, 2010 at 2:40 PM, JOAQUIN
> > PEREZ IGLESIAS <
> > > > > joaquin.perez@lsi.uned.es>
> > wrote:
> > > > >
> > > > >> Just some final comments (as I said I'm
> > not interested in flame wars),
> > > > >>
> > > > >> If I obtain better results there are not
> > problem with pooling
> > > otherwise
> > > > >> it
> > > > >> is biased.
> > > > >> The only important thing (in my opinion)
> > is that it cannot be said
> > > that
> > > > >> BM25 is a myth.
> > > > >> Yes, you are right there is not an only
> > ranking model that beats the
> > > > >> rest,
> > > > >> but there are models that generally show
> > a better performance in more
> > > > >> cases.
> > > > >>
> > > > >> About CLEF I have had the same
> > experience (VSM vs BM25) on Spanish and
> > > > >> English (WebCLEF) and Q&A
> > (ResPubliQA)
> > > > >>
> > > > >> Ivan checks the parameters (b and k1),
> > probably you can improve your
> > > > >> results. (that's the bad part of BM25).
> > > > >>
> > > > >> Finally we are just speaking of personal
> > experience, so obviously you
> > > > >> should use the best model for your data
> > and your own experience, on IR
> > > > >> there are not myths neither best ranking
> > models. If any of us is able
> > > to
> > > > >> find the =E2=80=9Cbest=E2=80=9D
> > ranking model, or is able to prove that
> > > any
> > > > >> state-of-the art is a myth he should
> > send these results to the SIGIR
> > > > >> conference.
> > > > >>
> > > > >> Ivan, Robert good luck with your
> > experiments, as I said the good part
> > > of
> > > > >> IR is that you can always make
> > experiments on your own.
> > > > >>
> > > > >> > I don't think its really a
> > competition, I think preferably we should
> > > > >> have
> > > > >> > the flexibility to change the
> > scoring model in lucene actually?
> > > > >> >
> > > > >> > I have found lots of cases where
> > VSM improves on BM25, but then
> > > again
> > > > >> I
> > > > >> > don't work with TREC stuff, as I
> > work with non-english collections.
> > > > >> >
> > > > >> > It doesn't contradict years of
> > research to say that VSM isn't a
> > > > >> > state-of-the-art model, besides the
> > TREC-4 results, there are CLEF
> > > > >> results
> > > > >> > where VSM models perform
> > competitively or exceed (Finnish, Russian,
> > > > >> etc)
> > > > >> > BM25/DFR/etc.
> > > > >> >
> > > > >> > It depends on the collection, there
> > isn't a 'best retrieval
> > > formula'.
> > > > >> >
> > > > >> > Note: I have no bias against BM-25,
> > but its definitely a myth to say
> > > > >> there
> > > > >> > is a single retrieval formula that
> > is the 'best' across the board.
> > > > >> >
> > > > >> >
> > > > >> > On Tue, Feb 16, 2010 at 1:53 PM,
> > JOAQUIN PEREZ IGLESIAS <
> > > > >> > joaquin.perez@lsi.uned.es>
> > wrote:
> > > > >> >
> > > > >> >> By the way,
> > > > >> >>
> > > > >> >> I don't want to start a flame
> > war VSM vs BM25, but I really believe
> > > > >> that
> > > > >> >> I
> > > > >> >> have to express my opinion as
> > Robert has done. In my experience, I
> > > > >> have
> > > > >> >> never found a case where VSM
> > improves significantly BM25. Maybe you
> > > > >> can
> > > > >> >> find some cases under some very
> > specific collection
> > > characteristics,
> > > > >> (as
> > > > >> >> average length of 300 vs 3000)
> > or a bad usage of BM25 (not proper
> > > > >> >> parameters) where it can
> > happen.
> > > > >> >>
> > > > >> >> BM25 is not just only a
> > different way of length normalization, it
> > > is
> > > > >> >> based
> > > > >> >> strongly in the probabilistic
> > framework, and parametrises
> > > frequencies
> > > > >> >> and
> > > > >> >> length. This is probably the
> > most successful ranking model of the
> > > > >> last
> > > > >> >> years in Information
> > Retrieval.
> > > > >> >>
> > > > >> >> I have never read a paper where
> > VSM  improves any of the
> > > > >> >> state-of-the-art
> > > > >> >> ranking models (Language
> > Models, DFR, BM25,...),  although the VSM
> > > > >> with
> > > > >> >> pivoted normalisation length
> > can obtain nice results. This can be
> > > > >> proved
> > > > >> >> checking the last years of the
> > TREC competition.
> > > > >> >>
> > > > >> >> Honestly to say that is a myth
> > that BM25 improves VSM breaks the
> > > last
> > > > >> 10
> > > > >> >> or 15 years of research on
> > Information Retrieval, and I really
> > > > >> believe
> > > > >> >> that is not accurate.
> > > > >> >>
> > > > >> >> The good thing of Information
> > Retrieval is that you can always make
> > > > >> your
> > > > >> >> owns experiments and you can
> > use the experience of a lot of years
> > > of
> > > > >> >> research.
> > > > >> >>
> > > > >> >> PS: This opinion is based on
> > experiments on TREC and CLEF
> > > > >> collections,
> > > > >> >> obviously we can start a debate
> > about the suitability of this type
> > > of
> > > > >> >> experimentation (concept of
> > relevance, pooling, relevance
> > > > >> judgements),
> > > > >> >> but
> > > > >> >> this is a much more complex
> > topic and I believe is far from what we
> > > > >> are
> > > > >> >> dealing here.
> > > > >> >>
> > > > >> >> PS2: In relation with TREC4
> > Cornell used a pivoted length
> > > > >> normalisation
> > > > >> >> and they were applying
> > pseudo-relevance feedback, what honestly
> > > makes
> > > > >> >> much
> > > > >> >> more difficult the analysis of
> > the results. Obviously their results
> > > > >> were
> > > > >> >> part of the pool.
> > > > >> >>
> > > > >> >> Sorry for the huge mail :-))))
> > > > >> >>
> > > > >> >> > Hi Ivan,
> > > > >> >> >
> > > > >> >> > the problem is that
> > unfortunately BM25
> > > > >> >> > cannot be implemented
> > overwriting
> > > > >> >> > the Similarity interface.
> > Therefore BM25Similarity
> > > > >> >> > only computes the classic
> > probabilistic IDF (what is
> > > > >> >> > interesting only at search
> > time).
> > > > >> >> > If you set BM25Similarity
> > at indexing time
> > > > >> >> > some basic stats are not
> > stored
> > > > >> >> > correctly in the segments
> > (like docs length).
> > > > >> >> >
> > > > >> >> > When you use
> > BM25BooleanQuery this class
> > > > >> >> > will set automatically the
> > BM25Similarity for you,
> > > > >> >> > therefore you don't need
> > to do this explicitly.
> > > > >> >> >
> > > > >> >> > I tried to make this
> > implementation with the focus on
> > > > >> >> > not interfering on the
> > typical use of Lucene (so no changing
> > > > >> >> > DefaultSimilarity).
> > > > >> >> >
> > > > >> >> >> Joaquin, Robert,
> > > > >> >> >>
> > > > >> >> >> I followed Joaquin's
> > recommendation and removed the call to set
> > > > >> >> >> similarity
> > > > >> >> >> to BM25 explicitly
> > (indexer, searcher).  The results showed 55%
> > > > >> >> >> improvement for the
> > MAP score (0.141->0.219) over default
> > > > >> similarity.
> > > > >> >> >>
> > > > >> >> >> Joaquin, how would
> > setting the similarity to BM25 explicitly
> > > make
> > > > >> the
> > > > >> >> >> score worse?
> > > > >> >> >>
> > > > >> >> >> Thank you,
> > > > >> >> >>
> > > > >> >> >> Ivan
> > > > >> >> >>
> > > > >> >> >>
> > > > >> >> >>
> > > > >> >> >> --- On Tue, 2/16/10,
> > Robert Muir <rcmuir@gmail.com>
> > wrote:
> > > > >> >> >>
> > > > >> >> >>> From: Robert Muir
> > <rcmuir@gmail.com>
> > > > >> >> >>> Subject: Re: BM25
> > Scoring Patch
> > > > >> >> >>> To: java-user@lucene.apache.org
> > > > >> >> >>> Date: Tuesday,
> > February 16, 2010, 11:36 AM
> > > > >> >> >>> yes Ivan, if
> > possible please report
> > > > >> >> >>> back any findings
> > you can on the
> > > > >> >> >>> experiments you
> > are doing!
> > > > >> >> >>>
> > > > >> >> >>> On Tue, Feb 16,
> > 2010 at 11:22 AM, Joaquin Perez Iglesias
> > > > >> >> >>> <
> > > > >> >> >>> joaquin.perez@lsi.uned.es>
> > > > >> >> >>> wrote:
> > > > >> >> >>>
> > > > >> >> >>> > Hi Ivan,
> > > > >> >> >>> >
> > > > >> >> >>> > You shouldn't
> > set the BM25Similarity for indexing or
> > > > >> >> >>> searching.
> > > > >> >> >>> > Please try
> > removing the lines:
> > > > >> >> >>>
> > >   writer.setSimilarity(new
> > > > >> >> >>>
> > BM25Similarity());
> > > > >> >> >>>
> > >   searcher.setSimilarity(sim);
> > > > >> >> >>> >
> > > > >> >> >>> > Please let
> > us/me know if you improve your results with
> > > > >> >> >>> these changes.
> > > > >> >> >>> >
> > > > >> >> >>> >
> > > > >> >> >>> > Robert Muir
> > escribi=C3=B3:
> > > > >> >> >>> >
> > > > >> >> >>> >  Hi
> > Ivan, I've seen many cases where BM25
> > > > >> >> >>> performs worse
> > than Lucene's
> > > > >> >> >>> >> default
> > Similarity. Perhaps this is just another
> > > > >> >> >>> one?
> > > > >> >> >>> >>
> > > > >> >> >>> >> Again
> > while I have not worked with this particular
> > > > >> >> >>> collection, I
> > looked at
> > > > >> >> >>> >> the
> > statistics and noted that its composed of
> > > > >> >> >>> several
> > 'sub-collections':
> > > > >> >> >>> >> for
> > > > >> >> >>> >> example
> > the PAT documents on disk 3 have an
> > > > >> >> >>> average doc length
> > of 3543,
> > > > >> >> >>> >> but
> > > > >> >> >>> >> the AP
> > documents on disk 1 have an avg doc length
> > > > >> >> >>> of 353.
> > > > >> >> >>> >>
> > > > >> >> >>> >> I have
> > found on other collections that any
> > > > >> >> >>> advantages of
> > BM25's document
> > > > >> >> >>> >> length
> > normalization fall apart when 'average
> > > > >> >> >>> document length'
> > doesn't
> > > > >> >> >>> >> make
> > > > >> >> >>> >> a whole
> > lot of sense (cases like this).
> > > > >> >> >>> >>
> > > > >> >> >>> >> For this
> > same reason, I've only found a few
> > > > >> >> >>> collections where
> > BM25's doc
> > > > >> >> >>> >> length
> > normalization is really significantly
> > > > >> >> >>> better than
> > Lucene's.
> > > > >> >> >>> >>
> > > > >> >> >>> >> In my
> > opinion, the results on a particular test
> > > > >> >> >>> collection or 2
> > have
> > > > >> >> >>> >> perhaps
> > > > >> >> >>> >> been
> > taken too far and created a myth that BM25 is
> > > > >> >> >>> always superior
> > to
> > > > >> >> >>> >> Lucene's
> > scoring... this is not true!
> > > > >> >> >>> >>
> > > > >> >> >>> >> On Tue,
> > Feb 16, 2010 at 9:46 AM, Ivan Provalov
> > > > >> >> >>> <iprovalo@yahoo.com>
> > > > >> >> >>> >> wrote:
> > > > >> >> >>> >>
> > > > >> >> >>> >>  I
> > applied the Lucene patch mentioned in
> > > > >> >> >>> >>> https://issues.apache.org/jira/browse/LUCENE-2091 and
> > > > >> >> >>> ran the MAP
> > > > >> >> >>> >>>
> > numbers
> > > > >> >> >>> >>> on
> > TREC-3 collection using topics
> > > > >> >> >>> 151-200.  I
> > am not getting worse
> > > > >> >> >>> >>>
> > results
> > > > >> >> >>> >>>
> > comparing to Lucene DefaultSimilarity.  I
> > > > >> >> >>> suspect, I am not
> > using it
> > > > >> >> >>> >>>
> > correctly.  I have single field
> > > > >> >> >>> documents.
> > This is the process I use:
> > > > >> >> >>> >>>
> > > > >> >> >>> >>> 1.
> > During the indexing, I am setting the
> > > > >> >> >>> similarity to BM25
> > as such:
> > > > >> >> >>> >>>
> > > > >> >> >>> >>>
> > IndexWriter writer =3D new IndexWriter(dir, new
> > > > >> >> >>> StandardAnalyzer(
> > > > >> >> >>> >>>
> > > > >> >> >>>
> > Version.LUCENE_CURRENT), true,
> > > > >> >> >>> >>>
> > > > >> >> >>>
> > IndexWriter.MaxFieldLength.UNLIMITED);
> > > > >> >> >>> >>>
> > writer.setSimilarity(new BM25Similarity());
> > > > >> >> >>> >>>
> > > > >> >> >>> >>> 2.
> > During the Precision/Recall measurements, I
> > > > >> >> >>> am using a
> > > > >> >> >>> >>>
> > SimpleBM25QQParser extension I added to the
> > > > >> >> >>> benchmark:
> > > > >> >> >>> >>>
> > > > >> >> >>> >>>
> > QualityQueryParser qqParser =3D new
> > > > >> >> >>>
> > SimpleBM25QQParser("title", "TEXT");
> > > > >> >> >>> >>>
> > > > >> >> >>> >>>
> > > > >> >> >>> >>> 3.
> > Here is the parser code (I set an avg doc
> > > > >> >> >>> length here):
> > > > >> >> >>> >>>
> > > > >> >> >>> >>>
> > public Query parse(QualityQuery qq) throws
> > > > >> >> >>> ParseException {
> > > > >> >> >>>
> > >>>   BM25Parameters.setAverageLength(indexField,
> > > > >> >> >>> 798.30f);//avg doc
> > length
> > > > >> >> >>>
> > >>>   BM25Parameters.setB(0.5f);//tried
> > > > >> >> >>> default values
> > > > >> >> >>>
> > >>>   BM25Parameters.setK1(2f);
> > > > >> >> >>>
> > >>>   return query =3D new
> > > > >> >> >>>
> > BM25BooleanQuery(qq.getValue(qqName), indexField,
> > > > >> >> >>> >>> new
> > > > >> >> >>> >>>
> > StandardAnalyzer(Version.LUCENE_CURRENT));
> > > > >> >> >>> >>> }
> > > > >> >> >>> >>>
> > > > >> >> >>> >>> 4.
> > The searcher is using BM25 similarity:
> > > > >> >> >>> >>>
> > > > >> >> >>> >>>
> > Searcher searcher =3D new IndexSearcher(dir,
> > > > >> >> >>> true);
> > > > >> >> >>> >>>
> > searcher.setSimilarity(sim);
> > > > >> >> >>> >>>
> > > > >> >> >>> >>> Am I
> > missing some steps?  Does anyone
> > > > >> >> >>> have experience
> > with this code?
> > > > >> >> >>> >>>
> > > > >> >> >>> >>>
> > Thanks,
> > > > >> >> >>> >>>
> > > > >> >> >>> >>> Ivan
> > > > >> >> >>> >>>
> > > > >> >> >>> >>>
> > > > >> >> >>> >>>
> > > > >> >> >>> >>>
> > > > >> >> >>> >>>
> > > > >> >> >>>
> > > > >>
> > ---------------------------------------------------------------------
> > > > >> >> >>> >>> To
> > unsubscribe, e-mail:
> > > > >> java-user-unsubscribe@lucene.apache.org
> > > > >> >> >>> >>> For
> > additional commands, e-mail:
> > > > >> >> java-user-help@lucene.apache.org
> > > > >> >> >>> >>>
> > > > >> >> >>> >>>
> > > > >> >> >>> >>>
> > > > >> >> >>> >>
> > > > >> >> >>> >>
> > > > >> >> >>> > --
> > > > >> >> >>> >
> > > > >> >> >>>
> > -----------------------------------------------------------
> > > > >> >> >>> > Joaqu=C3=ADn
> > P=C3=A9rez Iglesias
> > > > >> >> >>> > Dpto.
> > Lenguajes y Sistemas Inform=C3=A1ticos
> > > > >> >> >>> > E.T.S.I.
> > Inform=C3=A1tica (UNED)
> > > > >> >> >>> > Ciudad
> > Universitaria
> > > > >> >> >>> > C/ Juan del
> > Rosal n=C2=BA 16
> > > > >> >> >>> > 28040 Madrid
> > - Spain
> > > > >> >> >>> > Phone. +34 91
> > 398 89 19
> > > > >> >> >>> > Fax
> >   +34 91 398 65 35
> > > > >> >> >>> > Office
> > 2.11
> > > > >> >> >>> > Email: joaquin.perez@lsi.uned.es
> > > > >> >> >>> > web:
> > > > >> http://nlp.uned.es/~jperezi/ <http://nlp.uned.es/%7Ejperezi/> <
> http://nlp.uned.es/%7Ejperezi/> <
> > > http://nlp.uned.es/%7Ejperezi/><
> > > > http://nlp.uned.es/%7Ejperezi/>
> > > > >> >> <http://nlp.uned.es/%7Ejperezi/><
> > > > >> >> http://nlp.uned.es/%7Ejperezi/>
> > > > >> >> >>> >
> > > > >> >> >>>
> > -----------------------------------------------------------
> > > > >> >> >>> >
> > > > >> >> >>> >
> > > > >> >> >>> >
> > > > >> >> >>>
> > > > >>
> > ---------------------------------------------------------------------
> > > > >> >> >>> > To
> > unsubscribe, e-mail:
> > > > java-user-unsubscribe@lucene.apache.org
> > > > >> >> >>> > For
> > additional commands, e-mail:
> > > > >> java-user-help@lucene.apache.org
> > > > >> >> >>> >
> > > > >> >> >>> >
> > > > >> >> >>>
> > > > >> >> >>>
> > > > >> >> >>> --
> > > > >> >> >>> Robert Muir
> > > > >> >> >>> rcmuir@gmail.com
> > > > >> >> >>>
> > > > >> >> >>
> > > > >> >> >>
> > > > >> >> >>
> > > > >> >> >>
> > > > >> >> >>
> > > >
> > ---------------------------------------------------------------------
> > > > >> >> >> To unsubscribe,
> > e-mail: java-user-unsubscribe@lucene.apache.org
> > > > >> >> >> For additional
> > commands, e-mail:
> > > java-user-help@lucene.apache.org
> > > > >> >> >>
> > > > >> >> >>
> > > > >> >> >
> > > > >> >> >
> > > > >> >> >
> > > > >> >> >
> > > >
> > ---------------------------------------------------------------------
> > > > >> >> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > > >> >> > For additional commands,
> > e-mail:
> > > java-user-help@lucene.apache.org
> > > > >> >> >
> > > > >> >> >
> > > > >> >>
> > > > >> >>
> > > > >> >>
> > > > >> >>
> > >
> > ---------------------------------------------------------------------
> > > > >> >> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > > >> >> For additional commands,
> > e-mail: java-user-help@lucene.apache.org
> > > > >> >>
> > > > >> >>
> > > > >> >
> > > > >> >
> > > > >> > --
> > > > >> > Robert Muir
> > > > >> > rcmuir@gmail.com
> > > > >> >
> > > > >>
> > > > >>
> > > > >>
> > > > >>
> > ---------------------------------------------------------------------
> > > > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > >> For additional commands, e-mail: java-user-help@lucene.apache.or=
g
> > > > >>
> > > > >>
> > > > >
> > > > >
> > > > > --
> > > > > Robert Muir
> > > > > rcmuir@gmail.com
> > > > >
> > > >
> > > >
> > > >
> > > >
> > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > > --
> > > Robert Muir
> > > rcmuir@gmail.com
> > >
> >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Robert Muir
rcmuir@gmail.com

--0016e64dbbd4690e77047fce5800--

From java-user-return-45054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 16:39:51 2010
Return-Path: <java-user-return-45054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82100 invoked from network); 17 Feb 2010 16:39:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 16:39:51 -0000
Received: (qmail 16258 invoked by uid 500); 17 Feb 2010 16:39:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16184 invoked by uid 500); 17 Feb 2010 16:39:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16174 invoked by uid 99); 17 Feb 2010 16:39:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 16:39:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.116.39.62] (HELO rectangular.com) (68.116.39.62)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 16:39:42 +0000
Received: from marvin by rectangular.com with local (Exim 4.63)
	(envelope-from <marvin@rectangular.com>)
	id 1Nhmvo-0005B4-V1
	for java-user@lucene.apache.org; Wed, 17 Feb 2010 08:39:20 -0800
Date: Wed, 17 Feb 2010 08:39:20 -0800
To: java-user@lucene.apache.org
Subject: Re: BM25 Scoring Patch
Message-ID: <20100217163920.GA19787@rectangular.com>
References: <245804.25778.qm@web113302.mail.gq1.yahoo.com> <141ee80356de1891826922a8185f4317.squirrel@correo.uned.es> <833c7a901e04c6f6287f2a439cdb4d35.squirrel@correo.uned.es> <8f0ad1f31002161107l26b503fjec173e9c0e7c5f46@mail.gmail.com> <83b692afc347b683f7f0b4263879b342.squirrel@correo.uned.es> <8f0ad1f31002161147v4e1991edubf7f22978728168d@mail.gmail.com> <f6c9640e38b683d37da6d5275631f025.squirrel@correo.uned.es> <8f0ad1f31002161237r70e3b9act33c81c15e645b3ad@mail.gmail.com> <01C4AEE04EB96243BBAA8083CB6514E86070CD8B@MBX03.exg5.exghost.com> <8f0ad1f31002170731p11c7d456r506a7cdff913c6a9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <8f0ad1f31002170731p11c7d456r506a7cdff913c6a9@mail.gmail.com>
User-Agent: Mutt/1.5.13 (2006-08-11)
From: Marvin Humphrey <marvin@rectangular.com>

On Wed, Feb 17, 2010 at 10:31:19AM -0500, Robert Muir wrote:
> yet if we don't do the hard work up front to make it easy to plug in things
> like BM25, then no one will implement additional scoring formulas for
> Lucene, we currently make it terribly difficult to do this.

FWIW... Similarity and posting format spec are so closely tied that I'm
considering linking them in Lucy.  

  Schema schema = new Schema();
  FullTextType bm25Type = new FullTextType(new BM25Similarity());
  schema.specField("content", bm25Type);
  schema.specField("title", bm25Type);
  StringType matchType = new StringType(new MatchSimilarity());
  schema.specField("category", matchType);

That way, custom scoring implementations can guarantee that they always have
the posting information they need available to make their similarity
judgments.  Similarity also becomes a more generalized notion, with the
TF/IDF-specific functionality moving into a subclass.

Maybe something similar could be made to work in Lucene.  Dunno how McCandless
has things set up for spec'ing codecs on the flex branch.

Marvin Humphrey


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 16:47:20 2010
Return-Path: <java-user-return-45055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85216 invoked from network); 17 Feb 2010 16:47:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 16:47:20 -0000
Received: (qmail 35747 invoked by uid 500); 17 Feb 2010 16:47:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35676 invoked by uid 500); 17 Feb 2010 16:47:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35665 invoked by uid 99); 17 Feb 2010 16:47:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 16:47:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f48.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 16:47:11 +0000
Received: by pva18 with SMTP id 18so20700pva.35
        for <java-user@lucene.apache.org>; Wed, 17 Feb 2010 08:46:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=Wxd2ln0Ph6LMBRx0MBe+Hs99oFDnOLvwUImNSPivh4c=;
        b=P6lsuax+SevTCEYanvHUIzIdWBadhCO/hJcyrWtyXswz+MRBjJDQBqYHgEyvp5K/1H
         8syiMK9L/VuU1GZSNvWB+vjhyiStqt389jeiviQZMqwlNohvVTzJd0cD1EXZZ3b0uGac
         PcAlLlFVV0nJjMQCtDDPhB50yN1+DdiMk8qOI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=sEPS8Mcc2TybyiLCKTjxZt/G+5SKjAf8Oa+36PGXtEsgNarEddfoSEfQGoSdHane24
         mNehcWPP0CHhF2AZyClUqgPwztMDKKwEwKY6ZQzsPkrQcxVL6CVjXJ/qbXq8kghKgAUz
         HrTtDoFDUHhVAIum7jv1y8nI5xqdagyg5pfEo=
MIME-Version: 1.0
Received: by 10.114.248.16 with SMTP id v16mr5496221wah.161.1266425211077; 
	Wed, 17 Feb 2010 08:46:51 -0800 (PST)
In-Reply-To: <20100217163920.GA19787@rectangular.com>
References: <245804.25778.qm@web113302.mail.gq1.yahoo.com> 
	<833c7a901e04c6f6287f2a439cdb4d35.squirrel@correo.uned.es> 
	<8f0ad1f31002161107l26b503fjec173e9c0e7c5f46@mail.gmail.com> 
	<83b692afc347b683f7f0b4263879b342.squirrel@correo.uned.es> 
	<8f0ad1f31002161147v4e1991edubf7f22978728168d@mail.gmail.com> 
	<f6c9640e38b683d37da6d5275631f025.squirrel@correo.uned.es> 
	<8f0ad1f31002161237r70e3b9act33c81c15e645b3ad@mail.gmail.com> 
	<01C4AEE04EB96243BBAA8083CB6514E86070CD8B@MBX03.exg5.exghost.com> 
	<8f0ad1f31002170731p11c7d456r506a7cdff913c6a9@mail.gmail.com> 
	<20100217163920.GA19787@rectangular.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 17 Feb 2010 11:46:31 -0500
Message-ID: <8f0ad1f31002170846p1ef36987w7c7c7387fc109665@mail.gmail.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64c2e24d74441047fce9816

--0016e64c2e24d74441047fce9816
Content-Type: text/plain; charset=UTF-8

I tend to agree with you Marvin, you are right, the different scoring
mechanisms need different information available and this is the problem.

although last I checked, one hard part of BM25 rotates around fields versus
documents... e.g. BM25's IDF calculation.

but maybe this is just an extreme form of your example :)

On Wed, Feb 17, 2010 at 11:39 AM, Marvin Humphrey <marvin@rectangular.com>wrote:

> On Wed, Feb 17, 2010 at 10:31:19AM -0500, Robert Muir wrote:
> > yet if we don't do the hard work up front to make it easy to plug in
> things
> > like BM25, then no one will implement additional scoring formulas for
> > Lucene, we currently make it terribly difficult to do this.
>
> FWIW... Similarity and posting format spec are so closely tied that I'm
> considering linking them in Lucy.
>
>  Schema schema = new Schema();
>  FullTextType bm25Type = new FullTextType(new BM25Similarity());
>  schema.specField("content", bm25Type);
>  schema.specField("title", bm25Type);
>  StringType matchType = new StringType(new MatchSimilarity());
>  schema.specField("category", matchType);
>
> That way, custom scoring implementations can guarantee that they always
> have
> the posting information they need available to make their similarity
> judgments.  Similarity also becomes a more generalized notion, with the
> TF/IDF-specific functionality moving into a subclass.
>
> Maybe something similar could be made to work in Lucene.  Dunno how
> McCandless
> has things set up for spec'ing codecs on the flex branch.
>
> Marvin Humphrey
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--0016e64c2e24d74441047fce9816--

From java-user-return-45056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 18:45:17 2010
Return-Path: <java-user-return-45056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56742 invoked from network); 17 Feb 2010 18:45:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 18:45:17 -0000
Received: (qmail 12605 invoked by uid 500); 17 Feb 2010 18:45:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12537 invoked by uid 500); 17 Feb 2010 18:45:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12527 invoked by uid 99); 17 Feb 2010 18:45:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 18:45:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.100] (HELO web50702.mail.re2.yahoo.com) (206.190.38.100)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Feb 2010 18:45:05 +0000
Received: (qmail 5714 invoked by uid 60001); 17 Feb 2010 18:44:44 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1266432284; bh=mAHuzexzA6uSYTDbEc59P2VYx4Q0d6xD5aeK85qC+QU=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=kHEyk1kAnRkWi7s0JWbaAZhgKadR4Y6jBOP01Moi9aSVWvbCec+x0CR6i4Ob8OyI6Eoao4dsjWSaNCaZpIQzuoVhUU44LevgnDL6z98PVoZ9oZoSZQ7h2464qToXqYTPTNWeN/JH/x4CXWMtvX7omS9w/F/RWpt9IZveISaU/vo=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=HuH/nCrDmkFEMIfgl0OYYinYNe00Sfn0SeUNt+PT4qtnYQb2BJ9I6Y8cFUaqWI23Br+kPtX7Toim1H7wMhVYgQG7mXLvq+c+4UPJiT6kPlp/l9sP9zevKswiKXgxFodowbwJwth93AHAYRr7WDbpd9HvhVYvOuhgYowXsJd0u8E=;
Message-ID: <608978.5252.qm@web50702.mail.re2.yahoo.com>
X-YMail-OSG: wjqLuLAVM1llEYoyL2MNBEy3auqA7Iavss578sR_dujVeyfqJp.1IVOyglxb6exfFXoKSkpqyF6zJonCSWGkuQ9jqDuMza8_cb.ss8i3Ei8KnqfHgn8Z8zLBCsRkil1FSCRlgFpkV3fMNv2TCypKOEuydofwZBn4cvn3j5KDqyEMbLDeSVR17dRrfgg4GixCAfh5sHMmWEVB8uG3Nlc6MleVHXT5bPeaewYsl.niYEZgYkJbHiUZd6_HP4Eu.9uiQzblhCwiHI3_A99t3Z42vedw1n0SL3mdoJ_b9BEaJOKQsyBnyMBpxDCivlZcKU4BJFeH_v6d02iHutEUqK9NXz0-
Received: from [24.128.191.32] by web50702.mail.re2.yahoo.com via HTTP; Wed, 17 Feb 2010 10:44:44 PST
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
Date: Wed, 17 Feb 2010 10:44:44 -0800 (PST)
From: Aaron Schon <aaron_schon@yahoo.com>
Subject: Query about Query.ToString()
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all, I know that persisting a Lucene query by query ToString() method. I=
s there any way of reconstructing the query from the string itself?=0AThe u=
secase is that I will be storing a library of queries as strings and load t=
he appropriate query (from the string)=A0based on some conditions.=0A=0AIs =
this possible? Could you share a code snippet?=0A=0Ap.s. apologies for the =
double posting (I had asked this on Lucene general and was asked to ask her=
e instead)=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 18:56:03 2010
Return-Path: <java-user-return-45057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64215 invoked from network); 17 Feb 2010 18:56:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 18:56:03 -0000
Received: (qmail 33183 invoked by uid 500); 17 Feb 2010 18:56:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33123 invoked by uid 500); 17 Feb 2010 18:56:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33113 invoked by uid 99); 17 Feb 2010 18:56:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 18:56:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.219.210 as permitted sender)
Received: from [209.85.219.210] (HELO mail-ew0-f210.google.com) (209.85.219.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 18:55:53 +0000
Received: by ewy2 with SMTP id 2so8492159ewy.5
        for <java-user@lucene.apache.org>; Wed, 17 Feb 2010 10:55:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=G/vh9ZrBEoSzUR3Wm2jzu16/W1UiZVIo+Z2zRRZf8Us=;
        b=C1kEQ2hOD7ErEKQHhEysUb3/YPZmcaifhI6/Li/Y0P7YgTJREJUbPAw6AYyvaSnHl5
         QaV96OsIDplxbVSVw75sznTtl+/r0fExdpWtad8qSCFxw22Gv+RPoeNYgOmNPtzVHPHl
         gmeTEq3JO1ZVpWBkeFG7feWEvBVbqwkiC2v7M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=BZ42xwG7KgbGWoYGhkOiEtFfTUgH+u5oj9MuCOPJ2umBFFl+wQs7Ma/m2W0QF8DRt2
         lfvPA2TUbz3IYBJJ6B9974vt4sMy1Td2ErMFINLYm7YqoWvKOsfJHxSjuIG/GHA3fwy3
         s6mOfXBTqlLhrBqLByCWA5HmZrRgrR9dK+Frk=
MIME-Version: 1.0
Received: by 10.216.85.14 with SMTP id t14mr487817wee.222.1266432932565; Wed, 
	17 Feb 2010 10:55:32 -0800 (PST)
In-Reply-To: <608978.5252.qm@web50702.mail.re2.yahoo.com>
References: <608978.5252.qm@web50702.mail.re2.yahoo.com>
Date: Wed, 17 Feb 2010 13:55:32 -0500
Message-ID: <359a92831002171055q3223e8deha6da7312c923bea6@mail.gmail.com>
Subject: Re: Query about Query.ToString()
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d6410913d2fa047fd06578
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d6410913d2fa047fd06578
Content-Type: text/plain; charset=ISO-8859-1

Well, Query *does* implement the Serializable interface, so that
might work. WARNING: I haven't personally used the Serializable
interface on Query, so I have no real clue whether it's applicable!

Taking the results of query.toString() and pumping it back through
the parser is not guaranteed to produce an equivalent query though.

But if you're creating a library of queries, why not just code up the
queries
as strings and store/reuse those?

I'd think about forming a query that I can send through the query parsing,
then storing that string for later reuse (i.e. the string you parsed). This
has
problems if you're constructing the query programatically (say assembling
a BooleanQuery in the lucene code) though.

not much help I know
Erick


On Wed, Feb 17, 2010 at 1:44 PM, Aaron Schon <aaron_schon@yahoo.com> wrote:

> Hi all, I know that persisting a Lucene query by query ToString() method.
> Is there any way of reconstructing the query from the string itself?
> The usecase is that I will be storing a library of queries as strings and
> load the appropriate query (from the string) based on some conditions.
>
> Is this possible? Could you share a code snippet?
>
> p.s. apologies for the double posting (I had asked this on Lucene general
> and was asked to ask here instead)
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d6410913d2fa047fd06578--

From java-user-return-45058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 19:02:18 2010
Return-Path: <java-user-return-45058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67599 invoked from network); 17 Feb 2010 19:02:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 19:02:17 -0000
Received: (qmail 40703 invoked by uid 500); 17 Feb 2010 19:02:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40631 invoked by uid 500); 17 Feb 2010 19:02:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40621 invoked by uid 99); 17 Feb 2010 19:02:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 19:02:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jake.mannix@gmail.com designates 209.85.222.196 as permitted sender)
Received: from [209.85.222.196] (HELO mail-pz0-f196.google.com) (209.85.222.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 19:02:08 +0000
Received: by pzk34 with SMTP id 34so1981667pzk.20
        for <java-user@lucene.apache.org>; Wed, 17 Feb 2010 11:01:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=00hUz9i8b4QFNzMN5WYGh0P9G8NTW8fgCROElBQzI/w=;
        b=riEHwBuVSZ0RgNy7tyrhNdzm0uB/veFt9UW5INXGicBZCtlFZ9yOYQuGyNJDTwL5xy
         NoxggMuu15BVZnbTucz/R46jGx49i8IH3lHw//8lLZD6gZvoKpMQeTsmWqSMEegILFZa
         /bz+HI8qhCbUwbx3DCNhbmezP0qYcKN/mCRMM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=u8Ye2/zh5vP879N9dY0J3r8uMYLlMH8M/JKqhjJKJxYOcwDB41ZS4JAxwD0HXVRIkI
         98UERKG8pQqf+XzNVS1xWUK7cYZT4eclCLEtrPyIlUoFNpAItTP0LuA3ZvQT3aojQETR
         Gf1iCcmUY7CTDwhVfIwESHqMnNNlGP6EPEkg4=
MIME-Version: 1.0
Received: by 10.114.189.23 with SMTP id m23mr3963006waf.157.1266433307890; 
	Wed, 17 Feb 2010 11:01:47 -0800 (PST)
In-Reply-To: <359a92831002171055q3223e8deha6da7312c923bea6@mail.gmail.com>
References: <608978.5252.qm@web50702.mail.re2.yahoo.com>
	 <359a92831002171055q3223e8deha6da7312c923bea6@mail.gmail.com>
Date: Wed, 17 Feb 2010 11:01:47 -0800
Message-ID: <4b124c311002171101g5d1fbeaehb047d376f33f4092@mail.gmail.com>
Subject: Re: Query about Query.ToString()
From: Jake Mannix <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64cd62a730dac047fd07b58

--0016e64cd62a730dac047fd07b58
Content-Type: text/plain; charset=ISO-8859-1

On Wed, Feb 17, 2010 at 10:55 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> Well, Query *does* implement the Serializable interface, so that
> might work. WARNING: I haven't personally used the Serializable
> interface on Query, so I have no real clue whether it's applicable!
>

Query is serializable (lots of people use raw java serialization for
Query),
but warning: no core Lucene Query subclasses
define serialversionUID, so while they will transmit over the wire
fine now, but both ends (server and client) need to be on the exact
same Lucene version.  This can cause headaches during Lucene
upgrades if you have an "always running" distributed system.

   -jake

--0016e64cd62a730dac047fd07b58--

From java-user-return-45059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 19:03:08 2010
Return-Path: <java-user-return-45059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67787 invoked from network); 17 Feb 2010 19:03:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 19:03:08 -0000
Received: (qmail 42851 invoked by uid 500); 17 Feb 2010 19:03:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42790 invoked by uid 500); 17 Feb 2010 19:03:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42780 invoked by uid 99); 17 Feb 2010 19:03:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 19:03:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [149.8.64.32] (HELO mclmx2.mail.saic.com) (149.8.64.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 19:02:58 +0000
Received: from 0015-its-sbg02.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx2.mail.saic.com with ESMTP id BT-MMP-1829586 for java-user@lucene.apache.org; Wed, 17 Feb 2010 14:02:28 -0500
X-AuditID: 9508407d-b7ca9ae0000009aa-a9-4b7c3d4474be
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg02.saic.com (Symantec Brightmail Gateway) with SMTP id C4.65.02474.44D3C7B4; Wed, 17 Feb 2010 14:02:28 -0500 (EST)
Received: from 0015-its-exmb04.us.saic.com ([10.43.229.20]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 17 Feb 2010 14:02:28 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01CAB003.B712FF15"
Subject: RE: Query about Query.ToString()
Date: Wed, 17 Feb 2010 13:59:56 -0500
Message-Id: <3B01AF82880E6947A069AA17FF5CFE1503D2693B@0015-its-exmb04.us.saic.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <3B01AF82880E6947A069AA17FF5CFE1503D2693B@0015-its-exmb04.us.saic.com>
Thread-Topic: Query about Query.ToString()
Thread-Index: AcqwAuhPWsrBRtr7Tf6KowLP8pIlhAAAHz+k
References: <608978.5252.qm@web50702.mail.re2.yahoo.com> <359a92831002171055q3223e8deha6da7312c923bea6@mail.gmail.com>
From: "Goddard, Michael J." <MICHAEL.J.GODDARD@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 17 Feb 2010 19:02:28.0070 (UTC) FILETIME=[BFADA860:01CAB003]
X-Brightmail-Tracker: AAAAAQPmCRA=

------_=_NextPart_001_01CAB003.B712FF15
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I recently had the same need, for a utility to get me from the Query =
toString() output back to the Java code to construct that specific query =
in Lucene.  The reason for my interest is that our query syntax differs =
significantly from the standard Lucene query syntax, so having something =
like this would be useful.

If I build it, I'll post it (but I'm currently doing this all by hand so =
I can post some questions to this list, so I probably won't).

  Mike


-----Original Message-----
From: =
java-user-return-45057-MICHAEL.J.GODDARD=3Dsaic.com@lucene.apache.org on =
behalf of Erick Erickson
Sent: Wed 2/17/2010 1:55 PM
To: java-user@lucene.apache.org
Subject: Re: Query about Query.ToString()
=20
Well, Query *does* implement the Serializable interface, so that
might work. WARNING: I haven't personally used the Serializable
interface on Query, so I have no real clue whether it's applicable!

Taking the results of query.toString() and pumping it back through
the parser is not guaranteed to produce an equivalent query though.

But if you're creating a library of queries, why not just code up the
queries
as strings and store/reuse those?

I'd think about forming a query that I can send through the query =
parsing,
then storing that string for later reuse (i.e. the string you parsed). =
This
has
problems if you're constructing the query programatically (say =
assembling
a BooleanQuery in the lucene code) though.

not much help I know
Erick


On Wed, Feb 17, 2010 at 1:44 PM, Aaron Schon <aaron_schon@yahoo.com> =
wrote:

> Hi all, I know that persisting a Lucene query by query ToString() =
method.
> Is there any way of reconstructing the query from the string itself?
> The usecase is that I will be storing a library of queries as strings =
and
> load the appropriate query (from the string) based on some conditions.
>
> Is this possible? Could you share a code snippet?
>
> p.s. apologies for the double posting (I had asked this on Lucene =
general
> and was asked to ask here instead)
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



------_=_NextPart_001_01CAB003.B712FF15
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01CAB003.B712FF15--

From java-user-return-45060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 19:12:22 2010
Return-Path: <java-user-return-45060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73785 invoked from network); 17 Feb 2010 19:12:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 19:12:22 -0000
Received: (qmail 57000 invoked by uid 500); 17 Feb 2010 19:12:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56940 invoked by uid 500); 17 Feb 2010 19:12:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56930 invoked by uid 99); 17 Feb 2010 19:12:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 19:12:19 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [149.8.64.32] (HELO mclmx2.mail.saic.com) (149.8.64.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 19:12:11 +0000
Received: from 0015-its-sbg03.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx2.mail.saic.com with ESMTP id BT-MMP-1836070 for java-user@lucene.apache.org; Wed, 17 Feb 2010 14:11:37 -0500
X-AuditID: 95084018-b7cceae000000ea8-4b-4b7c3f694e59
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg03.saic.com (Symantec Brightmail Gateway) with SMTP id 58.C3.03752.96F3C7B4; Wed, 17 Feb 2010 14:11:37 -0500 (EST)
Received: from 0015-its-exmb04.us.saic.com ([10.43.229.20]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 17 Feb 2010 14:11:35 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CAB004.F38D0D01"
Subject: Question on highlighting of nested SpanQuery instances
Date: Wed, 17 Feb 2010 14:11:04 -0500
Message-Id: <3B01AF82880E6947A069AA17FF5CFE1503D2693C@0015-its-exmb04.us.saic.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Question on highlighting of nested SpanQuery instances
Thread-Index: AcqwBPOI+y3Jb+dBRDiwziMWUSIbyg==
From: "Goddard, Michael J." <MICHAEL.J.GODDARD@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 17 Feb 2010 19:11:35.0974 (UTC) FILETIME=[06412C60:01CAB005]
X-Brightmail-Tracker: AAAAAA==

------_=_NextPart_001_01CAB004.F38D0D01
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello,

I'm seeking some help with a highlighting issue involving the SpanQuery =
family.  To illustrate my issue, I added a test to the existing =
HighlighterTest (see diff, below, against tags/lucene_2_9_1).  When this =
test runs, it fails and the System.out.println yields this:

Expected: "Sam dislikes most of the food and has to order <B>fish</B> =
and <B>chips</B> - however the fish is <B>frozen</B>, not fresh.
Observed: "Sam dislikes most of the food and has to order <B>fish</B> =
and <B>chips</B> - however the <B>fish</B> is <B>frozen</B>, not fresh.

That second "fish" doesn't satisfy the query, so I don't expect it to be =
highlighted.  Can anyone out there offer a good starting point on this =
one?

Regards,

  Mike


Index: =
contrib/highlighter/src/test/org/apache/lucene/search/highlight/Highlight=
erTest.java
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
--- =
contrib/highlighter/src/test/org/apache/lucene/search/highlight/Highlight=
erTest.java	(revision 908726)
+++ =
contrib/highlighter/src/test/org/apache/lucene/search/highlight/Highlight=
erTest.java	(working copy)
@@ -173,7 +173,40 @@
         "Query in a named field does not result in highlighting when =
that field isn't in the query",
         s1, highlightField(q, FIELD_NAME, s1));
   }
+ =20
+  /*
+   * TODO: Why is that second instance of the term "fish" highlighted?  =
It is not
+   * followed by the term "chips", so it should not be highlighted.
+   */
+  public void testHighlightingNestedSpans() throws Exception {
=20
+	    String pubText =3D "Sam dislikes most of the food and has to =
order"
+			+ " fish and chips - however the fish is frozen, not fresh.";
+	   =20
+	    String fieldName =3D "SOME_FIELD_NAME";
+
+	    SpanOrQuery spanOr =3D new SpanOrQuery(
+				new SpanTermQuery[] {
+						new SpanTermQuery(new Term(fieldName, "fish")),
+						new SpanTermQuery(new Term(fieldName, "term1")),
+						new SpanTermQuery(new Term(fieldName, "term2")),
+						new SpanTermQuery(new Term(fieldName, "term3")) });
+	   =20
+		SpanNearQuery innerSpanNear =3D new SpanNearQuery(new SpanQuery[] {
+				spanOr,
+				new SpanTermQuery(new Term(fieldName, "chips")) }, 2, true);
+	=09
+		SpanNearQuery query =3D new SpanNearQuery(new SpanQuery[] {
+				innerSpanNear,
+				new SpanTermQuery(new Term(fieldName, "frozen")) }, 8, true);
+	=09
+	    String expected =3D "Sam dislikes most of the food and has to =
order"
+			+ " <B>fish</B> and <B>chips</B> - however the fish is =
<B>frozen</B>, not fresh.";
+	    String observed =3D highlightField(query, fieldName, pubText);
+	    System.out.println("Expected: \"" + expected + "\n" + "Observed: =
\"" + observed);
+	    assertEquals("Why is that second instance of the term \"fish\" =
highlighted?", expected, observed);
+  }
+
   /**
    * This method intended for use with =
<tt>testHighlightingWithDefaultField()</tt>
  * @throws InvalidTokenOffsetsException=20

------_=_NextPart_001_01CAB004.F38D0D01--

From java-user-return-45061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 17 19:31:44 2010
Return-Path: <java-user-return-45061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83653 invoked from network); 17 Feb 2010 19:31:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Feb 2010 19:31:44 -0000
Received: (qmail 81760 invoked by uid 500); 17 Feb 2010 19:31:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81692 invoked by uid 500); 17 Feb 2010 19:31:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81503 invoked by uid 99); 17 Feb 2010 19:31:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Feb 2010 19:31:40 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [77.238.184.55] (HELO smtp124.mail.ukl.yahoo.com) (77.238.184.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Feb 2010 19:31:31 +0000
Received: (qmail 78115 invoked from network); 17 Feb 2010 19:31:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Content-Type:Mime-Version:Subject:From:In-Reply-To:Date:Content-Transfer-Encoding:Message-Id:References:To:X-Mailer;
  b=E/K5HTjWNAlYBz8BSE9lK9VY3tym2ErkPwsKfi5NQuxXBXRFgNmelt6kUvZYsjBa1+oB5TV2x5dzgFcjBJJiugLKto5ZJLlYI4e7JlZPLrnO/2+ILcu6VYh5qZ83wI7xQTGHmCcDhiUjKvDp9uIQi3mVTLXjHrTO9un8ohSdwg4=  ;
Received: from i-194-106-34-5.freedom2surf.net (markharw00d@194.106.34.5 with plain)
        by smtp124.mail.ukl.yahoo.com with SMTP; 17 Feb 2010 19:31:09 +0000 GMT
X-Yahoo-SMTP: rdTGKYaswBBzjeOz17cOw.4gNsDMDjs6
X-YMail-OSG: euyVObMVM1mOmnnaYBENOJELWMmhiYZSwsFrXH0goO6yML21QUIH9D5ho04jvdJbt0yRQk3zP9Z.YUNWJeXDgei7cRKgKWYmdABWF7ko3odkwpVf34y_7PziCVWytpAj7TfKj8o01jQqSxfPQBW4yqW5kGOiZcvdgPOaopbgIbVIstn_dVVPLp9zPTw31V02D7hDBZq3TzCqYpuaHxaLNPMF4Y_eBgzEBIaYUxFJlxCPEMrAZqbwaE4duZO.65ul6AhM3mpuSg3o1I0fPwfUuYSARxV3MhWV
X-Yahoo-Newman-Property: ymail-3
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: Query about Query.ToString()
From: Mark Harwood <markharw00d@yahoo.co.uk>
In-Reply-To: <608978.5252.qm@web50702.mail.re2.yahoo.com>
Date: Wed, 17 Feb 2010 19:31:08 +0000
Content-Transfer-Encoding: quoted-printable
Message-Id: <F4C57A43-E933-42A4-BFA7-CCE97DF6B71C@yahoo.co.uk>
References: <608978.5252.qm@web50702.mail.re2.yahoo.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)

This was part of the rationale for creating the XMLQueryParser which can =
be found in contrib.

See here for the background: =
http://marc.info/?l=3Dlucene-dev&m=3D113355526731460&w=3D2


On 17 Feb 2010, at 18:44, Aaron Schon wrote:

> Hi all, I know that persisting a Lucene query by query ToString() =
method. Is there any way of reconstructing the query from the string =
itself?
> The usecase is that I will be storing a library of queries as strings =
and load the appropriate query (from the string) based on some =
conditions.
>=20
> Is this possible? Could you share a code snippet?
>=20
> p.s. apologies for the double posting (I had asked this on Lucene =
general and was asked to ask here instead)
>=20
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 01:40:46 2010
Return-Path: <java-user-return-45062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27833 invoked from network); 18 Feb 2010 01:40:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 01:40:46 -0000
Received: (qmail 80090 invoked by uid 500); 18 Feb 2010 01:40:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80020 invoked by uid 500); 18 Feb 2010 01:40:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80009 invoked by uid 99); 18 Feb 2010 01:40:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 01:40:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.216.185 as permitted sender)
Received: from [209.85.216.185] (HELO mail-px0-f185.google.com) (209.85.216.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 01:40:36 +0000
Received: by pxi15 with SMTP id 15so1987503pxi.21
        for <java-user@lucene.apache.org>; Wed, 17 Feb 2010 17:40:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=8w70lmBYp4TRhpPe6kjEF22KjnCuF5+14K8JOgVcTBs=;
        b=DmUYdW0o/eFpmCd0ZdUB94QpXf3Gc5Rh5mOFTDvqbaKmyP/fxhZt3KDWMksr38xZw7
         fvkaWuVqNT2CPfWTQyo9hI9/l3Dy6YmE2Y+zOAXBrP9NMuxZsuZhFUtcqy5epNUMYSEw
         No9BUeuOF1UGTzvVyWK2o0ZoRN8TfvWTR/pcE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Gp3DeVsF86tduefurvG+GwaDInNLVFIqlcAHBttpBxTAYGGxyBQUeIWR/Ee9ziVWEg
         vbAL5j2STj3AoAfBeLcS1thPJ6cnVB121I1cMpX6Ba6zc1PQqev2pguCwHvXEO0C+eIK
         3E6aBVzvt4Lil8QfMoN88lMlYaPKs/3XvF1BI=
MIME-Version: 1.0
Received: by 10.142.9.3 with SMTP id 3mr5926304wfi.237.1266457216728; Wed, 17 
	Feb 2010 17:40:16 -0800 (PST)
In-Reply-To: <18BA7A25-1EEA-4819-89E5-0D6AF04E1A64@apache.org>
References: <e994873a1002150729k7a008cd4s5b2ad92510264f8c@mail.gmail.com>
	 <18BA7A25-1EEA-4819-89E5-0D6AF04E1A64@apache.org>
Date: Wed, 17 Feb 2010 20:40:16 -0500
Message-ID: <e994873a1002171740n316fd47av630f6803f68a0076@mail.gmail.com>
Subject: Re: PayloadNearSpanScorer explain method
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502afdf86c057047fd60c56

--00504502afdf86c057047fd60c56
Content-Type: text/plain; charset=ISO-8859-1

Yes, I will provide a patch. Our new proxy server has broken my access to
the svn repository, though :-(

On Tue, Feb 16, 2010 at 1:12 PM, Grant Ingersoll <gsingers@apache.org>wrote:

> That sounds reasonable.  Patch?
>
> On Feb 15, 2010, at 10:29 AM, Peter Keegan wrote:
>
> > The 'explain' method in PayloadNearSpanScorer assumes the
> > AveragePayloadFunction was used. I don't see an easy way to override this
> > because 'payloadsSeen' and 'payloadScore' are private/protected. It seems
> > like the 'PayloadFunction' interface should have an 'explain' method that
> > the Scorer could call. Any thoughts?
> >
> > Peter
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00504502afdf86c057047fd60c56--

From java-user-return-45063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 02:13:03 2010
Return-Path: <java-user-return-45063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42263 invoked from network); 18 Feb 2010 02:13:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 02:13:02 -0000
Received: (qmail 98477 invoked by uid 500); 18 Feb 2010 02:13:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98406 invoked by uid 500); 18 Feb 2010 02:13:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98396 invoked by uid 99); 18 Feb 2010 02:13:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 02:13:00 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.lu@gmail.com designates 209.85.217.212 as permitted sender)
Received: from [209.85.217.212] (HELO mail-gx0-f212.google.com) (209.85.217.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 02:12:50 +0000
Received: by gxk4 with SMTP id 4so1681529gxk.5
        for <java-user@lucene.apache.org>; Wed, 17 Feb 2010 18:12:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type;
        bh=6yt62Bu8G5WRIK4aW9LP1Nc/8qhnLi1tF0bzNuQNJBI=;
        b=MEQFDw30f65Ei/yvozCLnLWr0Ui43bb4t0S3S40ho6Sxxx5zUkQ/IDkeqMsNQHWeFW
         RgF9mOxrLrs9oZ/Vnma21PjzxDBI00c/o1ShhWx2J+Y7ei8JDS6DxdSGtR4o9ALxaYgG
         rzc9eFsgvrXHXQq4PoUkKFSUJqq3a71pOY82s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type;
        b=iuyViod88slyWij7+36L3MAyue+m0XMCf+AExsyIMPnp4S0geRYGBtgyfos34Anin/
         aJV8H3ixs7dq6c26zAxaPs9vwg+wVAXUzsmDPPE9vSRiE7fznjHOKrruXTZaP0cwV4P1
         Qcu7/lqfktsLD5HkWeOLNdck2MCAw2m5KhcEk=
Received: by 10.101.118.5 with SMTP id v5mr8141402anm.99.1266459149028;
        Wed, 17 Feb 2010 18:12:29 -0800 (PST)
Received: from ?192.168.1.100? (c-71-202-137-93.hsd1.ca.comcast.net [71.202.137.93])
        by mx.google.com with ESMTPS id 5sm3545832yxd.17.2010.02.17.18.12.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 17 Feb 2010 18:12:26 -0800 (PST)
Message-ID: <4B7CA206.507@gmail.com>
Date: Wed, 17 Feb 2010 18:12:22 -0800
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Query about Query.ToString()
References: <608978.5252.qm@web50702.mail.re2.yahoo.com> <F4C57A43-E933-42A4-BFA7-CCE97DF6B71C@yahoo.co.uk>
In-Reply-To: <F4C57A43-E933-42A4-BFA7-CCE97DF6B71C@yahoo.co.uk>
Content-Type: multipart/alternative;
 boundary="------------000506060803010403020005"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------000506060803010403020005
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

XMLQueryParser is pretty good start. However, is it being maintained 
recently?

I noticed many Query class are not supported, like PrefixQuery, or even 
PhraseQuery.
Is it for some particular reason or simply lack of resource?

--
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes: http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got 2.6 Million Euro funding!


Mark Harwood wrote:
> This was part of the rationale for creating the XMLQueryParser which can be found in contrib.
>
> See here for the background: http://marc.info/?l=lucene-dev&m=113355526731460&w=2
>
>
> On 17 Feb 2010, at 18:44, Aaron Schon wrote:
>
>   
>> Hi all, I know that persisting a Lucene query by query ToString() method. Is there any way of reconstructing the query from the string itself?
>> The usecase is that I will be storing a library of queries as strings and load the appropriate query (from the string) based on some conditions.
>>
>> Is this possible? Could you share a code snippet?
>>
>> p.s. apologies for the double posting (I had asked this on Lucene general and was asked to ask here instead)
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>     
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

--------------000506060803010403020005--

From java-user-return-45064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 05:23:04 2010
Return-Path: <java-user-return-45064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92097 invoked from network); 18 Feb 2010 05:23:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 05:23:03 -0000
Received: (qmail 93089 invoked by uid 500); 18 Feb 2010 05:23:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92946 invoked by uid 500); 18 Feb 2010 05:23:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92931 invoked by uid 99); 18 Feb 2010 05:22:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 05:22:59 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of michael@loot.co.za designates 41.204.193.132 as permitted sender)
Received: from [41.204.193.132] (HELO mail.loot.co.za) (41.204.193.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 05:22:52 +0000
Received: from sun.loot.co.za (sun.loot.co.za [192.168.0.14])
	by mail.loot.co.za (8.13.8/8.13.8) with SMTP id o1I5MSLS026271
	for <java-user@lucene.apache.org>; Thu, 18 Feb 2010 07:22:29 +0200
Received: (qmail 12922 invoked by uid 7791); 18 Feb 2010 05:22:16 -0000
Received: from unknown (HELO sun) (192.168.0.14)
  by 0 with SMTP; 18 Feb 2010 05:22:15 -0000
Received: FROM [10.2.2.6] ([10.2.2.6]) BY sun WITH ESMTP ; Thu, 18 Feb 2010 07:22:13 +0200
Message-ID: <4B7CCE84.6020709@loot.co.za>
Date: Thu, 18 Feb 2010 07:22:12 +0200
From: Michael van Rooyen <michael@loot.co.za>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: read past EOF since migration to 2.9.1
References: <4B7BFA9D.4030809@loot.co.za> <1266422425.4644.92.camel@te-laptop>
In-Reply-To: <1266422425.4644.92.camel@te-laptop>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 3.0.2 (2004-11-16) on sun.loot.co.za
X-Spam-Level: 
X-Old-Spam-Status: No, score=-5.0 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.2

Toke Eskildsen wrote:
> On Wed, 2010-02-17 at 15:18 +0100, Michael van Rooyen wrote:
>   
>> I recently upgraded from version 2.3.2 to 2.9.1. [...]
>> Since going live a few days ago, however, we've twice had read past EOF 
>> exceptions.
>>     
>
> The first thing to do is check the Java version. If you're using Sun JRE
> 1.6.0, you might have encountered a nasty bug in the JVM:
> http://issues.apache.org/jira/browse/LUCENE-1282
>   
We're still using 1.5.0_06, and have been using it for ages.  When doing 
these kind of updates, I tend to change only one component at a time.  
In this case, all our code and the JVM stayed the same and all that 
changed was Lucene 2.3.2 to 2.9.1, then the EOF errors started occurring...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 05:42:15 2010
Return-Path: <java-user-return-45065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98547 invoked from network); 18 Feb 2010 05:42:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 05:42:15 -0000
Received: (qmail 1952 invoked by uid 500); 18 Feb 2010 05:42:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1874 invoked by uid 500); 18 Feb 2010 05:42:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1859 invoked by uid 99); 18 Feb 2010 05:42:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 05:42:10 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of michael@loot.co.za designates 41.204.193.132 as permitted sender)
Received: from [41.204.193.132] (HELO mail.loot.co.za) (41.204.193.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 05:42:02 +0000
Received: from sun.loot.co.za (sun.loot.co.za [192.168.0.14])
	by mail.loot.co.za (8.13.8/8.13.8) with SMTP id o1I5feIp028924
	for <java-user@lucene.apache.org>; Thu, 18 Feb 2010 07:41:40 +0200
Received: (qmail 15642 invoked by uid 7791); 18 Feb 2010 05:41:27 -0000
Received: from unknown (HELO sun) (192.168.0.14)
  by 0 with SMTP; 18 Feb 2010 05:41:27 -0000
Received: FROM [127.0.0.1] ([192.168.0.2]) BY sun WITH ESMTP ; Thu, 18 Feb 2010 07:41:26 +0200
Message-ID: <4B7CD305.4010800@loot.co.za>
Date: Thu, 18 Feb 2010 07:41:25 +0200
From: Michael van Rooyen <michael@loot.co.za>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.1.7) Gecko/20100111 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: read past EOF since migration to 2.9.1
References: <4B7BFA9D.4030809@loot.co.za> <1266422425.4644.92.camel@te-laptop> <4B7CCE84.6020709@loot.co.za>
In-Reply-To: <4B7CCE84.6020709@loot.co.za>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 3.0.2 (2004-11-16) on sun.loot.co.za
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.5 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	RATWARE_GECKO_BUILD autolearn=ham version=3.0.2


> Toke Eskildsen wrote:
>> On Wed, 2010-02-17 at 15:18 +0100, Michael van Rooyen wrote:
>>> I recently upgraded from version 2.3.2 to 2.9.1. [...]
>>> Since going live a few days ago, however, we've twice had read past 
>>> EOF exceptions.
>>
>> The first thing to do is check the Java version. If you're using Sun JRE
>> 1.6.0, you might have encountered a nasty bug in the JVM:
>> http://issues.apache.org/jira/browse/LUCENE-1282
> We're still using 1.5.0_06, and have been using it for ages.  When 
> doing these kind of updates, I tend to change only one component at a 
> time.  In this case, all our code and the JVM stayed the same and all 
> that changed was Lucene 2.3.2 to 2.9.1, then the EOF errors started 
> occurring...
>
Just looking at that bug report, the links provided show that those 
errors occurred with Lucene 2.3.x on JRE 1.6.0.  If it were that JRE bug 
causing the EOF problem, I would have expected to get errors while we 
were using 2.3.2, but we used that for over a year on the same JVM 
(1.5.0_06) without a single error.

What's interesting is that whatever error was in the index will 
disappear once the faulty segment is merged in the next cycle, so it's 
quite possible (and perhaps likely in a heavily updated index) that by 
the time the index is checked, the corruption will be gone.  In this 
case, it may be reported as an EOF exception on a good index, and I've 
seen a few of those in the mail archives.  I suspect that if the merge 
process were more pedantic in not merging segments unless they are 
completely without error (including the deleted docs counts), then a lot 
more users might start encountering this problem.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 07:32:44 2010
Return-Path: <java-user-return-45066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42570 invoked from network); 18 Feb 2010 07:32:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 07:32:44 -0000
Received: (qmail 62460 invoked by uid 500); 18 Feb 2010 07:32:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62380 invoked by uid 500); 18 Feb 2010 07:32:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62370 invoked by uid 99); 18 Feb 2010 07:32:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 07:32:41 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [87.248.110.140] (HELO n23.bullet.mail.ukl.yahoo.com) (87.248.110.140)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Feb 2010 07:32:30 +0000
Received: from [217.12.4.215] by n23.bullet.mail.ukl.yahoo.com with NNFMP; 18 Feb 2010 07:32:09 -0000
Received: from [87.248.110.206] by t2.bullet.ukl.yahoo.com with NNFMP; 18 Feb 2010 07:32:07 -0000
Received: from [127.0.0.1] by omp236.mail.ukl.yahoo.com with NNFMP; 18 Feb 2010 07:32:05 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 661910.92675.bm@omp236.mail.ukl.yahoo.com
Received: (qmail 41883 invoked by uid 60001); 18 Feb 2010 07:32:05 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1266478325; bh=CX/cFXEbJZnMBSv239kGB55Ph/4Le9HyXGIzfa6GZW4=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=i/N3T/f5emuqWOw1hjCafqdOcJzC9mGFhRf62AaYpmTYVrmLb8ClmmPaIlWmByAes8QkTBedbbKR3LLmy053qB4yQe88YTxkL8xc8KaUJJnGLAyR+OHEAbhD4txa5yLZ+sF1vSwkJh9EsUyilvsJ15MKp4q8dnw2avSc5j5tggM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=2jpzoQ3L6OAvnCvMe037h3lw+MSmktPoIgB0bdG9XAky903yPaTukS1buLYZ64kfFqg1eU+P9diRs8O5FQext55yLtIo1M8D+brQDkdfWKiHlmncYd6he/oNwhMRAp1w8SjxCx9JwN7ltLqO5ya9+WyHQtxef+6qmBrw1+Pt31E=;
Message-ID: <490191.41271.qm@web24712.mail.ird.yahoo.com>
X-YMail-OSG: .MmFBm8VM1mo.6d8eeyFaWL8x_iIPAU794EBY2FWwBD5iEL
 1wGCog7KDYuvDNEhvbJY23hbc1GSYC_WsETlh.lUmezsDl8TlWnPiIeVwizI
 Gap7fHLsX_Lyg21yRtUARTw3gBZFbMrCe.LyMJpw9yMdeAz7ltq8YAJ0.JVZ
 I5SvV_NHmJtHRaP8RwMNSFaKMX.uy.a6CzaYESBjQwPbevWdmQrdzQMDsllF
 t4Tx0CAss95PSfOH6JaUlBEBw3Ge74G5UV4blPQocK4vR4Do6nJJp_wChO65
 2HUePdD6WZTC.7e.v1i1ies8IyAUuK_lu.Zn7Zs_1rx8mpfojPkybnlM-
Received: from [68.142.242.113] by web24712.mail.ird.yahoo.com via HTTP; Thu, 18 Feb 2010 07:32:05 GMT
X-Mailer: YahooMailWebService/0.8.100.260964
Date: Thu, 18 Feb 2010 07:32:05 +0000 (GMT)
From: Mark Harwood <markharw00d@yahoo.co.uk>
Subject: Re: Query about Query.ToString()
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Yes it is being maintained and I have it in production on many large system=
s. =0APhrase prefix wildcard etc can be supported using the "UserQuery" tag=
 which hands off to the regular Lucene QueryParser. It would be easy to add=
 XML tags for these types but these clauses tend to be provided by users an=
yway as part of free-text fields. The other XML syntax tends to be useful f=
or capturing all the other structured input eg date ranges, checkboxes etc =
as filters or caches filters. =0AI intend to give it a 3.0 refresh to add g=
eo etc soon=0A---------------------------------------=0A=0AOn 18 Feb 2010, =
at 02:12, Chris Lu <chris.lu@gmail.com> wrote:=0A=0AXMLQueryParser is prett=
y good start. However, is it being maintained recently?=0A=0AI noticed many=
 Query class are not supported, like PrefixQuery, or even PhraseQuery.=0AIs=
 it for some particular reason or simply lack of resource?=0A=0A--=0AChris =
Lu=0A-------------------------=0AInstant Scalable Full-Text Search On Any D=
atabase/Application=0Asite: http://www.dbsight.net=0Ademo: http://search.db=
sight.com=0ALucene Database Search in 3 minutes: http://wiki.dbsight.com/in=
dex.php?title=3DCreate_Lucene_Database_Search_in_3_minutes=0ADBSight custom=
er, a shopping comparison site, (anonymous per request) got 2.6 Million Eur=
o funding!=0A=0A=0AMark Harwood wrote:=0AThis was part of the rationale for=
 creating the XMLQueryParser which can be found in contrib.=0A=0ASee here f=
or the background: http://marc.info/?l=3Dlucene-dev&m=3D113355526731460&w=
=3D2=0A=0A=0AOn 17 Feb 2010, at 18:44, Aaron Schon wrote:=0A=0A =0AHi all, =
I know that persisting a Lucene query by query ToString() method. Is there =
any way of reconstructing the query from the string itself?=0AThe usecase i=
s that I will be storing a library of queries as strings and load the appro=
priate query (from the string) based on some conditions.=0A=0AIs this possi=
ble? Could you share a code snippet?=0A=0Ap.s. apologies for the double pos=
ting (I had asked this on Lucene general and was asked to ask here instead)=
=0A=0A=0A=0A=0A=0A---------------------------------------------------------=
------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.=
org=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=0A=
=0A   =0A=0A=0A------------------------------------------------------------=
---------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A =
=0A=0A=0A=0A      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 07:48:37 2010
Return-Path: <java-user-return-45067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44987 invoked from network); 18 Feb 2010 07:48:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 07:48:36 -0000
Received: (qmail 76203 invoked by uid 500); 18 Feb 2010 07:48:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76116 invoked by uid 500); 18 Feb 2010 07:48:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76106 invoked by uid 99); 18 Feb 2010 07:48:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 07:48:34 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 07:48:25 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 8E7EDD36004
	for <java-user@lucene.apache.org>; Thu, 18 Feb 2010 08:48:03 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id AGVc3039Yk61 for <java-user@lucene.apache.org>;
	Thu, 18 Feb 2010 08:47:59 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id DD3CAD36002
	for <java-user@lucene.apache.org>; Thu, 18 Feb 2010 08:47:58 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <490191.41271.qm@web24712.mail.ird.yahoo.com>
In-Reply-To: <490191.41271.qm@web24712.mail.ird.yahoo.com>
Subject: RE: Query about Query.ToString()
Date: Thu, 18 Feb 2010 08:48:04 +0100
Message-ID: <005901cab06e$b46576c0$1d306440$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqwbJg03fg4HjPtRVqRW0yzEp2/pAAAg1/g
Content-Language: de

Don't forget to add the new *RangeQuery classes! :-)

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Mark Harwood [mailto:markharw00d@yahoo.co.uk]
> Sent: Thursday, February 18, 2010 8:32 AM
> To: java-user@lucene.apache.org
> Subject: Re: Query about Query.ToString()
> 
> Yes it is being maintained and I have it in production on many large
> systems.
> Phrase prefix wildcard etc can be supported using the "UserQuery" tag
> which hands off to the regular Lucene QueryParser. It would be easy to
> add XML tags for these types but these clauses tend to be provided by
> users anyway as part of free-text fields. The other XML syntax tends to
> be useful for capturing all the other structured input eg date ranges,
> checkboxes etc as filters or caches filters.
> I intend to give it a 3.0 refresh to add geo etc soon
> ---------------------------------------
> 
> On 18 Feb 2010, at 02:12, Chris Lu <chris.lu@gmail.com> wrote:
> 
> XMLQueryParser is pretty good start. However, is it being maintained
> recently?
> 
> I noticed many Query class are not supported, like PrefixQuery, or even
> PhraseQuery.
> Is it for some particular reason or simply lack of resource?
> 
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_i
> n_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request)
> got 2.6 Million Euro funding!
> 
> 
> Mark Harwood wrote:
> This was part of the rationale for creating the XMLQueryParser which
> can be found in contrib.
> 
> See here for the background: http://marc.info/?l=lucene-
> dev&m=113355526731460&w=2
> 
> 
> On 17 Feb 2010, at 18:44, Aaron Schon wrote:
> 
> 
> Hi all, I know that persisting a Lucene query by query ToString()
> method. Is there any way of reconstructing the query from the string
> itself?
> The usecase is that I will be storing a library of queries as strings
> and load the appropriate query (from the string) based on some
> conditions.
> 
> Is this possible? Could you share a code snippet?
> 
> p.s. apologies for the double posting (I had asked this on Lucene
> general and was asked to ask here instead)
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 08:45:56 2010
Return-Path: <java-user-return-45068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59926 invoked from network); 18 Feb 2010 08:45:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 08:45:56 -0000
Received: (qmail 45044 invoked by uid 500); 18 Feb 2010 08:45:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44981 invoked by uid 500); 18 Feb 2010 08:45:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44971 invoked by uid 99); 18 Feb 2010 08:45:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 08:45:53 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 98.129.35.9 is neither permitted nor denied by domain of yuvalf@answers.com)
Received: from [98.129.35.9] (HELO server505.appriver.com) (98.129.35.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 08:45:43 +0000
X-Policy: GLOBAL - answers.com
X-Primary: yuvalf@answers.com
X-Note: This Email was scanned by AppRiver SecureTide
X-ALLOW: yuvalf@answers.com ALLOWED
X-Virus-Scan: V-
X-Note: Spam Tests Failed: 
X-Country-Path: UNITED STATES->UNITED STATES->UNITED STATES
X-Note-Sending-IP: 98.129.23.45
X-Note-Reverse-DNS: ht03.exg5.exghost.com
X-Note-WHTLIST: yuvalf@answers.com
X-Note: User Rule Hits: 
X-Note: Global Rule Hits: G173 G174 G175 G176 G180 G181 G192 G279 
X-Note: Encrypt Rule Hits: 
X-Note: Mail Class: ALLOWEDSENDER
X-Note: Headers Injected
Received: from [98.129.23.45] (HELO HT03.exg5.exghost.com)
  by server505.appriver.com (CommuniGate Pro SMTP 5.3.2)
  with ESMTPS id 24554125 for java-user@lucene.apache.org; Thu, 18 Feb 2010 02:45:20 -0600
Received: from mbx03.exg5.exghost.com ([169.254.1.200]) by
 HT03.exg5.exghost.com ([10.242.228.75]) with mapi; Thu, 18 Feb 2010 02:45:21
 -0600
From: Yuval Feinstein <yuvalf@answers.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 18 Feb 2010 02:45:18 -0600
Subject: RE: BM25 Scoring Patch
Thread-Topic: BM25 Scoring Patch
Thread-Index: Acqv8OBx1+IPnt8CQqSAsSHq1zTgZQAhE4UA
Message-ID: <01C4AEE04EB96243BBAA8083CB6514E86070D20C@MBX03.exg5.exghost.com>
References: <245804.25778.qm@web113302.mail.gq1.yahoo.com>
 	<833c7a901e04c6f6287f2a439cdb4d35.squirrel@correo.uned.es>
 	<8f0ad1f31002161107l26b503fjec173e9c0e7c5f46@mail.gmail.com>
 	<83b692afc347b683f7f0b4263879b342.squirrel@correo.uned.es>
 	<8f0ad1f31002161147v4e1991edubf7f22978728168d@mail.gmail.com>
 	<f6c9640e38b683d37da6d5275631f025.squirrel@correo.uned.es>
 	<8f0ad1f31002161237r70e3b9act33c81c15e645b3ad@mail.gmail.com>
 	<01C4AEE04EB96243BBAA8083CB6514E86070CD8B@MBX03.exg5.exghost.com>
 	<8f0ad1f31002170731p11c7d456r506a7cdff913c6a9@mail.gmail.com>
 	<20100217163920.GA19787@rectangular.com>
 <8f0ad1f31002170846p1ef36987w7c7c7387fc109665@mail.gmail.com>
In-Reply-To: <8f0ad1f31002170846p1ef36987w7c7c7387fc109665@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

V2UgY291bGQgc29sdmUgdGhpcyBieSBzYXlpbmcgd2Ugb25seSBpbmNvcnBvcmF0ZSBCTTI1RiBp
bnRvIEx1Y2VuZS4NClRoaXMgaXMgYSBmaWVsZC1iYXNlZCBzY29yaW5nIG1ldGhvZCwgc28gaXQg
c2F2ZXMgdXMgdGhlIG5lZWQgdG8gZGVhbCB3aXRoIGRvY3VtZW50cy4NCkJ1aWxkaW5nIG9uIEpv
YXF1aW4ncyB3b3JrLCB0aGUgZXh0cmEgcGFydHMgbmVlZGVkIElNTyBhcmU6DQphLiBTdXBwb3J0
IGZvciBzdG9yaW5nIGF2ZXJhZ2UgbGVuZ3RoIHBlciBmaWVsZCBkdXJpbmcgaW5kZXhpbmcuIEkg
dGhpbmsgSSBzYXcgc29tZSByZWZlcmVuY2UgdG8gdGhpcw0Kd2hlbiBHcmFudCBkZXNjcmliZWQg
dGhlIG5ldyBmZWF0dXJlcyBpbiBMdWNlbmUgMi45LiBXZSBuZWVkIHRvIHN0b3JlIHR3byBudW1i
ZXJzIChzYXkNCm51bWJlciBvZiBkb2N1bWVudHMgY29udGFpbmluZyB0aGUgZmllbGQgYW5kIGF2
ZXJhZ2UgbGVuZ3RoKSB0byBzdXBwb3J0IGluY3JlbWVudGFsIGluZGV4aW5nLg0KYi4gRWFzeSBp
bnRlZ3JhdGlvbiBvZiBCTTI1RiBzaW1pbGFyaXR5IC0gZGVmYXVsdCBwYXJhbWV0ZXIgdmFsdWVz
LCB3b3JraW5nIHdpdGggcmVndWxhciBMdWNlbmUgY2xhc3MgaGllcmFyY2h5Lg0KYy4gU3VwcG9y
dCBmb3IgYWxsIHJlZ3VsYXIgcXVlcnkgdHlwZXMgLSBQaHJhc2VRdWVyeSwgRnV6enlRdWVyeSBl
dGMuIChXZSBjb3VsZCBkbyB0aGlzIGluY3JlbWVudGFsbHksDQp0aHJvd2luZyBhbiAiVW5zdXBw
b3J0ZWRPcGVyYXRpb25FeGNlcHRpb24iIGluIHRoZSBtZWFudGltZSkuDQpkLiBTb21lIHdvcmsg
b24gcnVuLXRpbWUgZWZmaWNpZW5jeSwgdG8gYmUgbmVhciB0aGUgZWZmaWNpZW5jeSBvZiB0aGUg
ZGVmYXVsdCBzY29yaW5nLg0KSSBjb3VsZCBkbyBzb21lIG9mIHRoaXMgd29yayBteXNlbGYsIGJ1
dCBndWlkYW5jZSBmcm9tIGEgTHVjZW5lIHNjb3JpbmcgZ3VydSB3b3VsZCBiZSBhIGdyZWF0IGhl
bHAuDQpUaGFua3MsDQpZdXZhbA0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTog
Um9iZXJ0IE11aXIgW21haWx0bzpyY211aXJAZ21haWwuY29tXSANClNlbnQ6IFdlZG5lc2RheSwg
RmVicnVhcnkgMTcsIDIwMTAgNjo0NyBQTQ0KVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9y
Zw0KU3ViamVjdDogUmU6IEJNMjUgU2NvcmluZyBQYXRjaA0KDQpJIHRlbmQgdG8gYWdyZWUgd2l0
aCB5b3UgTWFydmluLCB5b3UgYXJlIHJpZ2h0LCB0aGUgZGlmZmVyZW50IHNjb3JpbmcNCm1lY2hh
bmlzbXMgbmVlZCBkaWZmZXJlbnQgaW5mb3JtYXRpb24gYXZhaWxhYmxlIGFuZCB0aGlzIGlzIHRo
ZSBwcm9ibGVtLg0KDQphbHRob3VnaCBsYXN0IEkgY2hlY2tlZCwgb25lIGhhcmQgcGFydCBvZiBC
TTI1IHJvdGF0ZXMgYXJvdW5kIGZpZWxkcyB2ZXJzdXMNCmRvY3VtZW50cy4uLiBlLmcuIEJNMjUn
cyBJREYgY2FsY3VsYXRpb24uDQoNCmJ1dCBtYXliZSB0aGlzIGlzIGp1c3QgYW4gZXh0cmVtZSBm
b3JtIG9mIHlvdXIgZXhhbXBsZSA6KQ0KDQpPbiBXZWQsIEZlYiAxNywgMjAxMCBhdCAxMTozOSBB
TSwgTWFydmluIEh1bXBocmV5IDxtYXJ2aW5AcmVjdGFuZ3VsYXIuY29tPndyb3RlOg0KDQo+IE9u
IFdlZCwgRmViIDE3LCAyMDEwIGF0IDEwOjMxOjE5QU0gLTA1MDAsIFJvYmVydCBNdWlyIHdyb3Rl
Og0KPiA+IHlldCBpZiB3ZSBkb24ndCBkbyB0aGUgaGFyZCB3b3JrIHVwIGZyb250IHRvIG1ha2Ug
aXQgZWFzeSB0byBwbHVnIGluDQo+IHRoaW5ncw0KPiA+IGxpa2UgQk0yNSwgdGhlbiBubyBvbmUg
d2lsbCBpbXBsZW1lbnQgYWRkaXRpb25hbCBzY29yaW5nIGZvcm11bGFzIGZvcg0KPiA+IEx1Y2Vu
ZSwgd2UgY3VycmVudGx5IG1ha2UgaXQgdGVycmlibHkgZGlmZmljdWx0IHRvIGRvIHRoaXMuDQo+
DQo+IEZXSVcuLi4gU2ltaWxhcml0eSBhbmQgcG9zdGluZyBmb3JtYXQgc3BlYyBhcmUgc28gY2xv
c2VseSB0aWVkIHRoYXQgSSdtDQo+IGNvbnNpZGVyaW5nIGxpbmtpbmcgdGhlbSBpbiBMdWN5Lg0K
Pg0KPiAgU2NoZW1hIHNjaGVtYSA9IG5ldyBTY2hlbWEoKTsNCj4gIEZ1bGxUZXh0VHlwZSBibTI1
VHlwZSA9IG5ldyBGdWxsVGV4dFR5cGUobmV3IEJNMjVTaW1pbGFyaXR5KCkpOw0KPiAgc2NoZW1h
LnNwZWNGaWVsZCgiY29udGVudCIsIGJtMjVUeXBlKTsNCj4gIHNjaGVtYS5zcGVjRmllbGQoInRp
dGxlIiwgYm0yNVR5cGUpOw0KPiAgU3RyaW5nVHlwZSBtYXRjaFR5cGUgPSBuZXcgU3RyaW5nVHlw
ZShuZXcgTWF0Y2hTaW1pbGFyaXR5KCkpOw0KPiAgc2NoZW1hLnNwZWNGaWVsZCgiY2F0ZWdvcnki
LCBtYXRjaFR5cGUpOw0KPg0KPiBUaGF0IHdheSwgY3VzdG9tIHNjb3JpbmcgaW1wbGVtZW50YXRp
b25zIGNhbiBndWFyYW50ZWUgdGhhdCB0aGV5IGFsd2F5cw0KPiBoYXZlDQo+IHRoZSBwb3N0aW5n
IGluZm9ybWF0aW9uIHRoZXkgbmVlZCBhdmFpbGFibGUgdG8gbWFrZSB0aGVpciBzaW1pbGFyaXR5
DQo+IGp1ZGdtZW50cy4gIFNpbWlsYXJpdHkgYWxzbyBiZWNvbWVzIGEgbW9yZSBnZW5lcmFsaXpl
ZCBub3Rpb24sIHdpdGggdGhlDQo+IFRGL0lERi1zcGVjaWZpYyBmdW5jdGlvbmFsaXR5IG1vdmlu
ZyBpbnRvIGEgc3ViY2xhc3MuDQo+DQo+IE1heWJlIHNvbWV0aGluZyBzaW1pbGFyIGNvdWxkIGJl
IG1hZGUgdG8gd29yayBpbiBMdWNlbmUuICBEdW5ubyBob3cNCj4gTWNDYW5kbGVzcw0KPiBoYXMg
dGhpbmdzIHNldCB1cCBmb3Igc3BlYydpbmcgY29kZWNzIG9uIHRoZSBmbGV4IGJyYW5jaC4NCj4N
Cj4gTWFydmluIEh1bXBocmV5DQo+DQo+DQo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiBUbyB1bnN1YnNjcmli
ZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gRm9y
IGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNo
ZS5vcmcNCj4NCj4NCg0KDQotLSANClJvYmVydCBNdWlyDQpyY211aXJAZ21haWwuY29tDQo=


From java-user-return-45069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 09:23:01 2010
Return-Path: <java-user-return-45069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71284 invoked from network); 18 Feb 2010 09:23:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 09:23:01 -0000
Received: (qmail 80719 invoked by uid 500); 18 Feb 2010 09:22:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80642 invoked by uid 500); 18 Feb 2010 09:22:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80632 invoked by uid 99); 18 Feb 2010 09:22:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 09:22:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jmuguruza@gmail.com designates 209.85.220.227 as permitted sender)
Received: from [209.85.220.227] (HELO mail-fx0-f227.google.com) (209.85.220.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 09:22:50 +0000
Received: by fxm27 with SMTP id 27so1704057fxm.5
        for <java-user@lucene.apache.org>; Thu, 18 Feb 2010 01:22:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=eiWbPhq0TgTgCkAWa1sRHl+zzov1EiuAgCTQK2v4kYg=;
        b=c98ub0ujD6ME2pKHM/tdyauDYZn1LCCiJwSXTr8xNYSkHAVAysEeZOv+yLuA+kyESv
         6LmZhVaf+URGvTvp3rAvP2EaaMygSxN0tjAWvHFiHKwbSKLgnRkroXTpp9OrjUl6pdE7
         fRJGMYISILE48nNVBZ2aGX0xQIsJCmM4B372k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=YQYVF/xI0NDkZm1vRWSnwFcTEiX3aOTQW4v5O5jk+FAAK6xTVGLAL3rwl0uNeeBxkm
         MbuAWTolGbMXa/a+Y5F3SxlOd/Lo6t3bhH8bgORs2w7nuqwZJLdrbuFsJv51ZYNQJ24+
         tRPHf87DEKwD9ji/1ICCcnATf/aphx/8Oq1AM=
MIME-Version: 1.0
Received: by 10.223.75.156 with SMTP id y28mr1779191faj.30.1266484950597; Thu, 
	18 Feb 2010 01:22:30 -0800 (PST)
In-Reply-To: <f071061b1002160247n60b12fbdk5917f43ac478b6fa@mail.gmail.com>
References: <f071061b1002160247n60b12fbdk5917f43ac478b6fa@mail.gmail.com>
Date: Thu, 18 Feb 2010 10:22:30 +0100
Message-ID: <f071061b1002180122j66e4c8f7v351868b9762d99fe@mail.gmail.com>
Subject: Re: questions on upgrading to 3.0: Version.LUCENE_* and 
	Field.setOmitNorms()
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

someone?

On Tue, Feb 16, 2010 at 11:47 AM, jm <jmuguruza@gmail.com> wrote:
> Hi,
>
> previously I was using 2.9 (upgraded from 2.4 but did not fix warnings
> etc). Now I have upgraded to 3.0, so I had to fix all deprecated
> methods etc. My question is with=A0Version type parameter in some
> Token* classes.
>
> Some of our customers have our product with lucene 2.4 (some upgraded
> from 2.3), and some have a newer version with lucene 2.9 (with
> warnings etc). What Version value should I use now? The smallest say
> Version.LUCENE_23 ? Any concern when they upgrade to the next of our
> version with lucene 3.0?
>
> Also I was using Field.Index.TOKENIZED and Field.Index.UN_TOKENIZED,
> but all fields had field.setOmitNorms(true);
> Now I see there is Field.Index.NOT_ANALYZED_NO_NORMS, I guess I can
> just use Field.Index.ANALYZED/Field.Index.NOT_ANALYZED and continue
> calling field.setOmitNorms(true) on all fields right?
>
> many thanks
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 11:43:34 2010
Return-Path: <java-user-return-45070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33256 invoked from network); 18 Feb 2010 11:43:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 11:43:34 -0000
Received: (qmail 27996 invoked by uid 500); 18 Feb 2010 11:43:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27909 invoked by uid 500); 18 Feb 2010 11:43:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27899 invoked by uid 99); 18 Feb 2010 11:43:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 11:43:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.220 as permitted sender)
Received: from [209.85.218.220] (HELO mail-bw0-f220.google.com) (209.85.218.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 11:43:24 +0000
Received: by bwz20 with SMTP id 20so37378bwz.11
        for <java-user@lucene.apache.org>; Thu, 18 Feb 2010 03:43:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=Sc3KgEvE9oW+zq5Io6ponB+ryskUy/IRbqBSgQ6x1+0=;
        b=rI6TNi4Z32vRqfBCORCkdlnZMoD41udqyMMhSkbCiQQvFcKb+65jYRR/idrjEjhk3F
         wdcgMHG0aVvrBqNzxLSJXfAJ10/H/MBcH55y0tuGAGwii+fLvOi4A5RmJhuR/XtcEHFL
         qkUcMbglG5tlUTt+3Q+zQ341YmKcDMXJiRGEE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=m+8/Kd5ES7BdkOtPeVhskdSUqNgHynmtmq9jXJL0YZjNf7/n34HgbmhCpni8y+LRhZ
         RLZKSLoYm6uxIv5oRwd9huWecxvL0u7GW/J2XwRaxJNZ+kPEn9Cg0DCbITT+I1FQgrB8
         5HIMNgqto0oCCSbU1UBKJC48hX1msEInokivo=
MIME-Version: 1.0
Received: by 10.204.33.135 with SMTP id h7mr2099310bkd.186.1266493384199; Thu, 
	18 Feb 2010 03:43:04 -0800 (PST)
In-Reply-To: <f071061b1002160247n60b12fbdk5917f43ac478b6fa@mail.gmail.com>
References: <f071061b1002160247n60b12fbdk5917f43ac478b6fa@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 18 Feb 2010 11:42:44 +0000
Message-ID: <8c4e68611002180342w642f44b2ud18d7dc7842a1d1@mail.gmail.com>
Subject: Re: questions on upgrading to 3.0: Version.LUCENE_* and 
	Field.setOmitNorms()
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> previously I was using 2.9 (upgraded from 2.4 but did not fix warnings
> etc). Now I have upgraded to 3.0, so I had to fix all deprecated
> methods etc. My question is with=A0Version type parameter in some
> Token* classes.
>
> Some of our customers have our product with lucene 2.4 (some upgraded
> from 2.3), and some have a newer version with lucene 2.9 (with
> warnings etc). What Version value should I use now? The smallest say
> Version.LUCENE_23 ? Any concern when they upgrade to the next of our
> version with lucene 3.0?

Unless you are relying on quirks in particular versions of lucene
setting it to LUCENE_CURRENT is probably best.

> Also I was using Field.Index.TOKENIZED and Field.Index.UN_TOKENIZED,
> but all fields had field.setOmitNorms(true);
> Now I see there is Field.Index.NOT_ANALYZED_NO_NORMS, I guess I can
> just use Field.Index.ANALYZED/Field.Index.NOT_ANALYZED and continue
> calling field.setOmitNorms(true) on all fields right?

Yes, I think so, but probably best to use ANALYZED_NO_NORMS and
NOT_ANALYZED_NO_NORMS.  Read the javadocs on NOT_ANALYZED_NO_NORMS.


--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 13:09:33 2010
Return-Path: <java-user-return-45071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72245 invoked from network); 18 Feb 2010 13:09:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 13:09:33 -0000
Received: (qmail 23312 invoked by uid 500); 18 Feb 2010 13:09:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23228 invoked by uid 500); 18 Feb 2010 13:09:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23216 invoked by uid 99); 18 Feb 2010 13:09:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 13:09:30 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.222.196 as permitted sender)
Received: from [209.85.222.196] (HELO mail-pz0-f196.google.com) (209.85.222.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 13:09:22 +0000
Received: by pzk34 with SMTP id 34so2978433pzk.20
        for <java-user@lucene.apache.org>; Thu, 18 Feb 2010 05:09:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=VC/bW2qMgD8yR5nn7VjZ8bPphZ0QsXvo9/YPemPZKkg=;
        b=QpcQPMHsxYiiqPhbWcY99TzpAX2K/4e9oMCZCUhkxh7VwOiRPj9jAc6mQtg5z5IQvi
         MenVJvgMu/pFsuZmMFjHU1/u4K+L223CZ0clcBO5lGnrDZvSIr84k4VetTJLZSeUQXbH
         +J/kgdpFF0x79WdTtixQMUBL/Wm6JmlGD+pvs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=x3OWVQ5VEA4lfXHLdmacyzTgaRRu4zg36VJ+ilGClvFS+N00NnBRHhow9kBWcoH01R
         nXLB7MaPl7v5oAg4R7HwhH1zIJ8MK2rTm6sftiFMNLsDWceXvI+WYP5ghXR2Jbor31eh
         F9wY/aEMJEs6I1wRhr3tpUKwH4nBdOgcnHb+0=
MIME-Version: 1.0
Received: by 10.114.21.2 with SMTP id 2mr2496940wau.109.1266498541168; Thu, 18 
	Feb 2010 05:09:01 -0800 (PST)
In-Reply-To: <01C4AEE04EB96243BBAA8083CB6514E86070D20C@MBX03.exg5.exghost.com>
References: <245804.25778.qm@web113302.mail.gq1.yahoo.com> 
	<83b692afc347b683f7f0b4263879b342.squirrel@correo.uned.es> 
	<8f0ad1f31002161147v4e1991edubf7f22978728168d@mail.gmail.com> 
	<f6c9640e38b683d37da6d5275631f025.squirrel@correo.uned.es> 
	<8f0ad1f31002161237r70e3b9act33c81c15e645b3ad@mail.gmail.com> 
	<01C4AEE04EB96243BBAA8083CB6514E86070CD8B@MBX03.exg5.exghost.com> 
	<8f0ad1f31002170731p11c7d456r506a7cdff913c6a9@mail.gmail.com> 
	<20100217163920.GA19787@rectangular.com> <8f0ad1f31002170846p1ef36987w7c7c7387fc109665@mail.gmail.com> 
	<01C4AEE04EB96243BBAA8083CB6514E86070D20C@MBX03.exg5.exghost.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 18 Feb 2010 08:08:40 -0500
Message-ID: <8f0ad1f31002180508m53193025vb90c579947b04612@mail.gmail.com>
Subject: Re: BM25 Scoring Patch
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502e275a7aa46047fdfab5c
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502e275a7aa46047fdfab5c
Content-Type: text/plain; charset=UTF-8

Yuval, don't we still need this 'document-level IDF' for BM25f?

On Thu, Feb 18, 2010 at 3:45 AM, Yuval Feinstein <yuvalf@answers.com> wrote:

> We could solve this by saying we only incorporate BM25F into Lucene.
> This is a field-based scoring method, so it saves us the need to deal with
> documents.
> Building on Joaquin's work, the extra parts needed IMO are:
> a. Support for storing average length per field during indexing. I think I
> saw some reference to this
> when Grant described the new features in Lucene 2.9. We need to store two
> numbers (say
> number of documents containing the field and average length) to support
> incremental indexing.
> b. Easy integration of BM25F similarity - default parameter values, working
> with regular Lucene class hierarchy.
> c. Support for all regular query types - PhraseQuery, FuzzyQuery etc. (We
> could do this incrementally,
> throwing an "UnsupportedOperationException" in the meantime).
> d. Some work on run-time efficiency, to be near the efficiency of the
> default scoring.
> I could do some of this work myself, but guidance from a Lucene scoring
> guru would be a great help.
> Thanks,
> Yuval
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Wednesday, February 17, 2010 6:47 PM
> To: java-user@lucene.apache.org
> Subject: Re: BM25 Scoring Patch
>
> I tend to agree with you Marvin, you are right, the different scoring
> mechanisms need different information available and this is the problem.
>
> although last I checked, one hard part of BM25 rotates around fields versus
> documents... e.g. BM25's IDF calculation.
>
> but maybe this is just an extreme form of your example :)
>
> On Wed, Feb 17, 2010 at 11:39 AM, Marvin Humphrey <marvin@rectangular.com
> >wrote:
>
> > On Wed, Feb 17, 2010 at 10:31:19AM -0500, Robert Muir wrote:
> > > yet if we don't do the hard work up front to make it easy to plug in
> > things
> > > like BM25, then no one will implement additional scoring formulas for
> > > Lucene, we currently make it terribly difficult to do this.
> >
> > FWIW... Similarity and posting format spec are so closely tied that I'm
> > considering linking them in Lucy.
> >
> >  Schema schema = new Schema();
> >  FullTextType bm25Type = new FullTextType(new BM25Similarity());
> >  schema.specField("content", bm25Type);
> >  schema.specField("title", bm25Type);
> >  StringType matchType = new StringType(new MatchSimilarity());
> >  schema.specField("category", matchType);
> >
> > That way, custom scoring implementations can guarantee that they always
> > have
> > the posting information they need available to make their similarity
> > judgments.  Similarity also becomes a more generalized notion, with the
> > TF/IDF-specific functionality moving into a subclass.
> >
> > Maybe something similar could be made to work in Lucene.  Dunno how
> > McCandless
> > has things set up for spec'ing codecs on the flex branch.
> >
> > Marvin Humphrey
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>



-- 
Robert Muir
rcmuir@gmail.com

--00504502e275a7aa46047fdfab5c--

From java-user-return-45072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 13:21:01 2010
Return-Path: <java-user-return-45072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86522 invoked from network); 18 Feb 2010 13:20:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 13:20:55 -0000
Received: (qmail 37851 invoked by uid 500); 18 Feb 2010 13:20:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37770 invoked by uid 500); 18 Feb 2010 13:20:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37760 invoked by uid 99); 18 Feb 2010 13:20:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 13:20:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 13:20:44 +0000
Received: by pwi6 with SMTP id 6so402228pwi.35
        for <java-user@lucene.apache.org>; Thu, 18 Feb 2010 05:20:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=gUMXdnTsomUEJvlu+rsnMv9RC05Jl+DKDuh7dqT4x9I=;
        b=IsKUwoqV8YXuHLJRoMW1AY1XNmu+aToz/EJfkeZ6NDtWGI+tFSOwF3JuI16Uelhlxl
         RNQxI62HH7fh5w9YPSK3d29G0twb9cET94Gh9LqDa7lcbAtaIsqJdW+5pN5mIW7RWlTm
         fFcPNCIrdZ8vJ1CiWq5WfrW4CxuVJ4B//upIs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=CvGfT2XkSNWmBSdQ3TvkhW9nWfJKz3GIKan2i624B6+rmEyLsJu5lfYcHwIB+7Ygzh
         cX44e9MZn9BzONfZCQl8bxZ3YSOO7EJzCgGPUcz3Z4k5Dtgyhr6qhjTQLsfmx64vWCL6
         A3lPdfpW67Lz4GR3qlMdqA4qcI35W39ZTDzMo=
MIME-Version: 1.0
Received: by 10.114.49.7 with SMTP id w7mr6491882waw.34.1266499223554; Thu, 18 
	Feb 2010 05:20:23 -0800 (PST)
In-Reply-To: <8c4e68611002180342w642f44b2ud18d7dc7842a1d1@mail.gmail.com>
References: <f071061b1002160247n60b12fbdk5917f43ac478b6fa@mail.gmail.com> 
	<8c4e68611002180342w642f44b2ud18d7dc7842a1d1@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 18 Feb 2010 08:20:03 -0500
Message-ID: <8f0ad1f31002180520s11b53ee0o8e8a8ead75597cfc@mail.gmail.com>
Subject: Re: questions on upgrading to 3.0: Version.LUCENE_* and 
	Field.setOmitNorms()
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502e2d8540b72047fdfd438
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502e2d8540b72047fdfd438
Content-Type: text/plain; charset=UTF-8

Only use LUCENE_CURRENT if you do not care about backwards compatibility at
all: e.g. you are perfectly happy re-indexing all data when you upgrade the
lucene jar file in future.

its not about relying on quirks in previous versions of lucene, its about
being compatible with changes in future versions, you set it to LUCENE_30 or
whatever so that you can upgrade to 3.1 jar, without reindexing.

On Thu, Feb 18, 2010 at 6:42 AM, Ian Lea <ian.lea@gmail.com> wrote:

>
> Unless you are relying on quirks in particular versions of lucene
> setting it to LUCENE_CURRENT is probably best.
>
>
-- 
Robert Muir
rcmuir@gmail.com

--00504502e2d8540b72047fdfd438--

From java-user-return-45073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 14:24:51 2010
Return-Path: <java-user-return-45073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22945 invoked from network); 18 Feb 2010 14:24:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 14:24:51 -0000
Received: (qmail 46712 invoked by uid 500); 18 Feb 2010 14:24:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46628 invoked by uid 500); 18 Feb 2010 14:24:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46618 invoked by uid 99); 18 Feb 2010 14:24:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 14:24:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 14:24:41 +0000
Received: by bwz9 with SMTP id 9so177292bwz.5
        for <java-user@lucene.apache.org>; Thu, 18 Feb 2010 06:24:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=C7dDYkU3Zz+TgTXbwHZXIObVnU7W0ntolqesG17mjRs=;
        b=wJCJJOAcYbCGoabVs7uIZo/Yx7/5nBeKg+BVDVTBvz++t8aQV5OAMSpVO0n2s5TYqR
         Uoavzly7UJJLJlDsQs1NQktWZwOhdpkRfDA0LJBRmpxreVwLOIET+KxkcVm2ko2qyc7D
         LEIwi9+lz0Q0vOTfpkS6HnM7DM8Oxwu4yN2bs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=K/uiAl6lNxYD5LgKUWbYS3XffPDYWBX0XSfMFEMKCTqAwC5UqEbGWpAR0KSVLFMJtz
         gQ4NxSI4XJvQwboCdd7qRU08035nzbaN2v9/LezkIh9S92xnI9iQk0vUN3Ky5x7gJ72z
         EZDRFWovn813p6Jru1U9gSYeDhNYKZf8pc4cc=
MIME-Version: 1.0
Received: by 10.204.130.84 with SMTP id r20mr2193140bks.20.1266503061219; Thu, 
	18 Feb 2010 06:24:21 -0800 (PST)
In-Reply-To: <8f0ad1f31002180520s11b53ee0o8e8a8ead75597cfc@mail.gmail.com>
References: <f071061b1002160247n60b12fbdk5917f43ac478b6fa@mail.gmail.com> 
	<8c4e68611002180342w642f44b2ud18d7dc7842a1d1@mail.gmail.com> 
	<8f0ad1f31002180520s11b53ee0o8e8a8ead75597cfc@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 18 Feb 2010 14:24:01 +0000
Message-ID: <8c4e68611002180624p13656818u9c37df8ea22f1a29@mail.gmail.com>
Subject: Re: questions on upgrading to 3.0: Version.LUCENE_* and 
	Field.setOmitNorms()
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

But typically you wouldn't need to reindex, would you?  From the 3.0
javadocs for LUCENE_CURRENT:

WARNING: if you use this setting, and then upgrade to a newer release
of Lucene, sizable changes may happen. If precise back compatibility
is important then you should instead explicitly specify an actual
version.

I read this as meaning that it is safe to use it unless you want
precise back compatibility and are prepared to accept the risk that
you may have to reindex.  When upgrading my code and indexes to 3.0
I've used LUCENE_CURRENT and haven't reindexed, and haven't noticed
any problems.


--
Ian.



On Thu, Feb 18, 2010 at 1:20 PM, Robert Muir <rcmuir@gmail.com> wrote:
> Only use LUCENE_CURRENT if you do not care about backwards compatibility at
> all: e.g. you are perfectly happy re-indexing all data when you upgrade the
> lucene jar file in future.
>
> its not about relying on quirks in previous versions of lucene, its about
> being compatible with changes in future versions, you set it to LUCENE_30 or
> whatever so that you can upgrade to 3.1 jar, without reindexing.
>
> On Thu, Feb 18, 2010 at 6:42 AM, Ian Lea <ian.lea@gmail.com> wrote:
>
>>
>> Unless you are relying on quirks in particular versions of lucene
>> setting it to LUCENE_CURRENT is probably best.
>>
>>
> --
> Robert Muir
> rcmuir@gmail.com
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 14:36:17 2010
Return-Path: <java-user-return-45074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30256 invoked from network); 18 Feb 2010 14:36:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 14:36:16 -0000
Received: (qmail 79366 invoked by uid 500); 18 Feb 2010 14:36:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79296 invoked by uid 500); 18 Feb 2010 14:36:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79286 invoked by uid 99); 18 Feb 2010 14:36:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 14:36:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 14:36:06 +0000
Received: by pwi6 with SMTP id 6so428605pwi.35
        for <java-user@lucene.apache.org>; Thu, 18 Feb 2010 06:35:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=CJfWBS97MyfOKDoRKvvPo7JZAFGyK8XwhDIWJi9e9+I=;
        b=CMJZBbh2Vhy+xB+T9DrV4TKmafPaeWX6J0ohxFLjWGvsV1OjeRuXZtm0cnb0oWYoM2
         Dr84a4QWtMJnfWVZ8DmmMGOKdZWJ50GsTS4JKEjwmk0DBU786Dxesnctarbj7AHEiihQ
         opL9JYM1zzt3tyb8nn4w44ctL8prUgd7GwSbY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=fnTS5Zlbsshkn6DJeduk8b7vwU5rqfnGe3/lr8JVffG1gwY8b9JwNHqkizBfb1mk4e
         HgSCia5O00wBXs1WPgaUXg0CJTNi1kczqCW3+Oug5BrQKRxYqztbSLX6ZwqWdtnF0KMc
         x744xJZlToiaH959rV/pMc6AX/+xrvXlVIZGM=
MIME-Version: 1.0
Received: by 10.114.189.27 with SMTP id m27mr6449088waf.221.1266503744242; 
	Thu, 18 Feb 2010 06:35:44 -0800 (PST)
In-Reply-To: <8c4e68611002180624p13656818u9c37df8ea22f1a29@mail.gmail.com>
References: <f071061b1002160247n60b12fbdk5917f43ac478b6fa@mail.gmail.com> 
	<8c4e68611002180342w642f44b2ud18d7dc7842a1d1@mail.gmail.com> 
	<8f0ad1f31002180520s11b53ee0o8e8a8ead75597cfc@mail.gmail.com> 
	<8c4e68611002180624p13656818u9c37df8ea22f1a29@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 18 Feb 2010 09:35:24 -0500
Message-ID: <8f0ad1f31002180635va25d3dh13a69f146c97370a@mail.gmail.com>
Subject: Re: questions on upgrading to 3.0: Version.LUCENE_* and 
	Field.setOmitNorms()
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64cd7e8c845de047fe0e1e9
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64cd7e8c845de047fe0e1e9
Content-Type: text/plain; charset=UTF-8

yes, if you use LUCENE_CURRENT, you may have to reindex (if any
analyzers/tokenizers you are using have changed).

if you use an actual version (for example LUCENE_30), you can upgrade your
jar file to say a future 3.1 jar without reindexing, then later at your
leisure (after testing/qa whatever you want), you can bump your version to
LUCENE_31 and reindex.

On Thu, Feb 18, 2010 at 9:24 AM, Ian Lea <ian.lea@gmail.com> wrote:

> But typically you wouldn't need to reindex, would you?  From the 3.0
> javadocs for LUCENE_CURRENT:
>
> WARNING: if you use this setting, and then upgrade to a newer release
> of Lucene, sizable changes may happen. If precise back compatibility
> is important then you should instead explicitly specify an actual
> version.
>
> I read this as meaning that it is safe to use it unless you want
> precise back compatibility and are prepared to accept the risk that
> you may have to reindex.  When upgrading my code and indexes to 3.0
> I've used LUCENE_CURRENT and haven't reindexed, and haven't noticed
> any problems.
>
>
> --
> Ian.
>
>
>
> On Thu, Feb 18, 2010 at 1:20 PM, Robert Muir <rcmuir@gmail.com> wrote:
> > Only use LUCENE_CURRENT if you do not care about backwards compatibility
> at
> > all: e.g. you are perfectly happy re-indexing all data when you upgrade
> the
> > lucene jar file in future.
> >
> > its not about relying on quirks in previous versions of lucene, its about
> > being compatible with changes in future versions, you set it to LUCENE_30
> or
> > whatever so that you can upgrade to 3.1 jar, without reindexing.
> >
> > On Thu, Feb 18, 2010 at 6:42 AM, Ian Lea <ian.lea@gmail.com> wrote:
> >
> >>
> >> Unless you are relying on quirks in particular versions of lucene
> >> setting it to LUCENE_CURRENT is probably best.
> >>
> >>
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--0016e64cd7e8c845de047fe0e1e9--

From java-user-return-45075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 15:01:04 2010
Return-Path: <java-user-return-45075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45935 invoked from network); 18 Feb 2010 15:01:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 15:01:04 -0000
Received: (qmail 23556 invoked by uid 500); 18 Feb 2010 15:01:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23481 invoked by uid 500); 18 Feb 2010 15:01:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23471 invoked by uid 99); 18 Feb 2010 15:01:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 15:01:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jmuguruza@gmail.com designates 209.85.220.227 as permitted sender)
Received: from [209.85.220.227] (HELO mail-fx0-f227.google.com) (209.85.220.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 15:00:53 +0000
Received: by fxm27 with SMTP id 27so2045933fxm.5
        for <java-user@lucene.apache.org>; Thu, 18 Feb 2010 07:00:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=1/UG5tL9OW9hSr3rw3eMqfk7ipemub7q5mXoSyDuTr8=;
        b=jSrlxDjdL4nmkYDfvLKXNluCpCX4MwKJpYjqIpZQbFNpBG/3tc+U/knmSRdblFMSd2
         ZPrfRiUmz9iahRlj8lc2My83PWCFH6Du8X7oy7T+obAvly6TpDi1ZL3tQIfUpddhm/tO
         IS7kYaapxSPjnZhAw6u0L30XnFG/yIUEHp84c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=Njhagoyapc6AUHx8GIep44QtWLn6zwvEHLggMamPDFgP3E1CnArW5ND9qOUQ0oN4pp
         22P/VFV7grim+jny0MraaWmTefnmJITDyiZziE6vVL470G6I5BJj3IRKRgY2oEJ5sQIX
         MRJ28R+sPhaVIGjOb9m+3XoYo+fEUfQwTVqSM=
MIME-Version: 1.0
Received: by 10.223.6.156 with SMTP id 28mr12026259faz.33.1266505233004; Thu, 
	18 Feb 2010 07:00:33 -0800 (PST)
In-Reply-To: <8f0ad1f31002180635va25d3dh13a69f146c97370a@mail.gmail.com>
References: <f071061b1002160247n60b12fbdk5917f43ac478b6fa@mail.gmail.com>
	 <8c4e68611002180342w642f44b2ud18d7dc7842a1d1@mail.gmail.com>
	 <8f0ad1f31002180520s11b53ee0o8e8a8ead75597cfc@mail.gmail.com>
	 <8c4e68611002180624p13656818u9c37df8ea22f1a29@mail.gmail.com>
	 <8f0ad1f31002180635va25d3dh13a69f146c97370a@mail.gmail.com>
Date: Thu, 18 Feb 2010 16:00:32 +0100
Message-ID: <f071061b1002180700v62c8c689w344a5ae3ff50e646@mail.gmail.com>
Subject: Re: questions on upgrading to 3.0: Version.LUCENE_* and 
	Field.setOmitNorms()
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the replies Ian and Robert. In my case, I am in a bit of a
uneasy position, cannot reindex, original docs are gone...

What would you recommend? I have to choose one value, and some
customers started using our system with lucene 2.3, others with lucene
2.4 and others with 2.9.
My usage of problematic classes are (in the older code):

public final class CustomStopAnalyzer extends Analyzer {
    private Set stopWords;
    public CustomStopAnalyzer() {
        this.stopWords =3D
CustomStopFilter.makeStopSet(StopWordCustomList.getStopwords());
    }
    public TokenStream tokenStream(String fieldName, Reader reader) {
        return new CustomStopFilter(new
LowerCaseLetterNumberTokenizer(reader), stopWords);
    }
    public static CustomStopAnalyzer getTestCustomAnalyzer(String lang) {
        CustomStopAnalyzer ca =3D new CustomStopAnalyzer(lang);
        return ca;
    }
}

public class CustomStopFilter extends TokenFilter {...}
public final class LowerCaseLetterNumberTokenizer extends LetterTokenizer {
    public LowerCaseLetterNumberTokenizer(Reader in) {
        super(in);
    }

    protected boolean isTokenChar(char c) {
        return Character.isLetterOrDigit(c);
    }

    protected char normalize(char c) {
        return Character.toLowerCase(c);
    }
}

javi

On Thu, Feb 18, 2010 at 3:35 PM, Robert Muir <rcmuir@gmail.com> wrote:
> yes, if you use LUCENE_CURRENT, you may have to reindex (if any
> analyzers/tokenizers you are using have changed).
>
> if you use an actual version (for example LUCENE_30), you can upgrade you=
r
> jar file to say a future 3.1 jar without reindexing, then later at your
> leisure (after testing/qa whatever you want), you can bump your version t=
o
> LUCENE_31 and reindex.
>
> On Thu, Feb 18, 2010 at 9:24 AM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> But typically you wouldn't need to reindex, would you? =A0From the 3.0
>> javadocs for LUCENE_CURRENT:
>>
>> WARNING: if you use this setting, and then upgrade to a newer release
>> of Lucene, sizable changes may happen. If precise back compatibility
>> is important then you should instead explicitly specify an actual
>> version.
>>
>> I read this as meaning that it is safe to use it unless you want
>> precise back compatibility and are prepared to accept the risk that
>> you may have to reindex. =A0When upgrading my code and indexes to 3.0
>> I've used LUCENE_CURRENT and haven't reindexed, and haven't noticed
>> any problems.
>>
>>
>> --
>> Ian.
>>
>>
>>
>> On Thu, Feb 18, 2010 at 1:20 PM, Robert Muir <rcmuir@gmail.com> wrote:
>> > Only use LUCENE_CURRENT if you do not care about backwards compatibili=
ty
>> at
>> > all: e.g. you are perfectly happy re-indexing all data when you upgrad=
e
>> the
>> > lucene jar file in future.
>> >
>> > its not about relying on quirks in previous versions of lucene, its ab=
out
>> > being compatible with changes in future versions, you set it to LUCENE=
_30
>> or
>> > whatever so that you can upgrade to 3.1 jar, without reindexing.
>> >
>> > On Thu, Feb 18, 2010 at 6:42 AM, Ian Lea <ian.lea@gmail.com> wrote:
>> >
>> >>
>> >> Unless you are relying on quirks in particular versions of lucene
>> >> setting it to LUCENE_CURRENT is probably best.
>> >>
>> >>
>> > --
>> > Robert Muir
>> > rcmuir@gmail.com
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 15:55:23 2010
Return-Path: <java-user-return-45076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70222 invoked from network); 18 Feb 2010 15:55:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 15:55:23 -0000
Received: (qmail 28152 invoked by uid 500); 18 Feb 2010 15:55:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28092 invoked by uid 500); 18 Feb 2010 15:55:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28082 invoked by uid 99); 18 Feb 2010 15:55:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 15:55:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 15:55:13 +0000
Received: by bwz9 with SMTP id 9so274392bwz.5
        for <java-user@lucene.apache.org>; Thu, 18 Feb 2010 07:54:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=sVkEjfEeF/kk8N0yEIMSNsnMvpLUefdZ0vpCKn8imR0=;
        b=u5mrXmeHVqE7QGB2sdIO2q3389R6Nkorhk+tkFUfYcQsWJrADtR3k/lUHffQqL/a4B
         4S4THmnaZrFCLcsW0+zMj85zPM/ukBS4Lrc42d3ypqjJQU36Tu5XwJBO8qWFm2JMq8JO
         mvMXPQ5nHas/jzZ9WDNK9HTUHA49CdCbIERRs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=VWDAXTnrH2FbawhGSABjXV18fSAKS6PDMvmAHYIlfObm2ZoQc7a23klbmdCaMelu38
         5SGybaFCDGDgKP3upwtEOlvHncv/JESbPpVQiDfkvjNUrcLNBcziwms4GnL8R/2htj2i
         hVkUfo2MDgQ/IJb4X3jUSKGZF7960wg2b9Dyw=
MIME-Version: 1.0
Received: by 10.204.34.75 with SMTP id k11mr3899245bkd.152.1266508492854; Thu, 
	18 Feb 2010 07:54:52 -0800 (PST)
In-Reply-To: <f071061b1002180700v62c8c689w344a5ae3ff50e646@mail.gmail.com>
References: <f071061b1002160247n60b12fbdk5917f43ac478b6fa@mail.gmail.com> 
	<8c4e68611002180342w642f44b2ud18d7dc7842a1d1@mail.gmail.com> 
	<8f0ad1f31002180520s11b53ee0o8e8a8ead75597cfc@mail.gmail.com> 
	<8c4e68611002180624p13656818u9c37df8ea22f1a29@mail.gmail.com> 
	<8f0ad1f31002180635va25d3dh13a69f146c97370a@mail.gmail.com> 
	<f071061b1002180700v62c8c689w344a5ae3ff50e646@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 18 Feb 2010 15:54:32 +0000
Message-ID: <8c4e68611002180754x72dd298fxd02d7a0b7d693a83@mail.gmail.com>
Subject: Re: questions on upgrading to 3.0: Version.LUCENE_* and 
	Field.setOmitNorms()
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

For the classes you show I don't think that it matters.  It certainly
can matter if you are using StandardAnalyzer or some other lucene
supplied classes - see the javadocs.  In my opinion you should review
the lucene analyzers that you use and see if you rely on any of the
behaviour that is version dependent.

Or just go for LUCENE_CURRENT and hope for the best.

Or figure out a way to set the Version per customer.


Good luck.


--
Ian.


On Thu, Feb 18, 2010 at 3:00 PM, jm <jmuguruza@gmail.com> wrote:
> Thanks for the replies Ian and Robert. In my case, I am in a bit of a
> uneasy position, cannot reindex, original docs are gone...
>
> What would you recommend? I have to choose one value, and some
> customers started using our system with lucene 2.3, others with lucene
> 2.4 and others with 2.9.
> My usage of problematic classes are (in the older code):
>
> public final class CustomStopAnalyzer extends Analyzer {
> =A0 =A0private Set stopWords;
> =A0 =A0public CustomStopAnalyzer() {
> =A0 =A0 =A0 =A0this.stopWords =3D
> CustomStopFilter.makeStopSet(StopWordCustomList.getStopwords());
> =A0 =A0}
> =A0 =A0public TokenStream tokenStream(String fieldName, Reader reader) {
> =A0 =A0 =A0 =A0return new CustomStopFilter(new
> LowerCaseLetterNumberTokenizer(reader), stopWords);
> =A0 =A0}
> =A0 =A0public static CustomStopAnalyzer getTestCustomAnalyzer(String lang=
) {
> =A0 =A0 =A0 =A0CustomStopAnalyzer ca =3D new CustomStopAnalyzer(lang);
> =A0 =A0 =A0 =A0return ca;
> =A0 =A0}
> }
>
> public class CustomStopFilter extends TokenFilter {...}
> public final class LowerCaseLetterNumberTokenizer extends LetterTokenizer=
 {
> =A0 =A0public LowerCaseLetterNumberTokenizer(Reader in) {
> =A0 =A0 =A0 =A0super(in);
> =A0 =A0}
>
> =A0 =A0protected boolean isTokenChar(char c) {
> =A0 =A0 =A0 =A0return Character.isLetterOrDigit(c);
> =A0 =A0}
>
> =A0 =A0protected char normalize(char c) {
> =A0 =A0 =A0 =A0return Character.toLowerCase(c);
> =A0 =A0}
> }
>
> javi
>
> On Thu, Feb 18, 2010 at 3:35 PM, Robert Muir <rcmuir@gmail.com> wrote:
>> yes, if you use LUCENE_CURRENT, you may have to reindex (if any
>> analyzers/tokenizers you are using have changed).
>>
>> if you use an actual version (for example LUCENE_30), you can upgrade yo=
ur
>> jar file to say a future 3.1 jar without reindexing, then later at your
>> leisure (after testing/qa whatever you want), you can bump your version =
to
>> LUCENE_31 and reindex.
>>
>> On Thu, Feb 18, 2010 at 9:24 AM, Ian Lea <ian.lea@gmail.com> wrote:
>>
>>> But typically you wouldn't need to reindex, would you? =A0From the 3.0
>>> javadocs for LUCENE_CURRENT:
>>>
>>> WARNING: if you use this setting, and then upgrade to a newer release
>>> of Lucene, sizable changes may happen. If precise back compatibility
>>> is important then you should instead explicitly specify an actual
>>> version.
>>>
>>> I read this as meaning that it is safe to use it unless you want
>>> precise back compatibility and are prepared to accept the risk that
>>> you may have to reindex. =A0When upgrading my code and indexes to 3.0
>>> I've used LUCENE_CURRENT and haven't reindexed, and haven't noticed
>>> any problems.
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>>
>>> On Thu, Feb 18, 2010 at 1:20 PM, Robert Muir <rcmuir@gmail.com> wrote:
>>> > Only use LUCENE_CURRENT if you do not care about backwards compatibil=
ity
>>> at
>>> > all: e.g. you are perfectly happy re-indexing all data when you upgra=
de
>>> the
>>> > lucene jar file in future.
>>> >
>>> > its not about relying on quirks in previous versions of lucene, its a=
bout
>>> > being compatible with changes in future versions, you set it to LUCEN=
E_30
>>> or
>>> > whatever so that you can upgrade to 3.1 jar, without reindexing.
>>> >
>>> > On Thu, Feb 18, 2010 at 6:42 AM, Ian Lea <ian.lea@gmail.com> wrote:
>>> >
>>> >>
>>> >> Unless you are relying on quirks in particular versions of lucene
>>> >> setting it to LUCENE_CURRENT is probably best.
>>> >>
>>> >>
>>> > --
>>> > Robert Muir
>>> > rcmuir@gmail.com
>>> >
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 16:21:09 2010
Return-Path: <java-user-return-45077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81436 invoked from network); 18 Feb 2010 16:21:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 16:21:08 -0000
Received: (qmail 74658 invoked by uid 500); 18 Feb 2010 16:21:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74587 invoked by uid 500); 18 Feb 2010 16:21:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74577 invoked by uid 99); 18 Feb 2010 16:21:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 16:21:06 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 98.129.35.5 is neither permitted nor denied by domain of yuvalf@answers.com)
Received: from [98.129.35.5] (HELO server505.appriver.com) (98.129.35.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 16:20:56 +0000
X-Policy: GLOBAL - answers.com
X-Primary: yuvalf@answers.com
X-Note: This Email was scanned by AppRiver SecureTide
X-ALLOW: yuvalf@answers.com ALLOWED
X-Virus-Scan: V-
X-Note: Spam Tests Failed: 
X-Country-Path: UNITED STATES->UNITED STATES->UNITED STATES
X-Note-Sending-IP: 98.129.23.15
X-Note-Reverse-DNS: ht02.exg5.exghost.com
X-Note-WHTLIST: yuvalf@answers.com
X-Note: User Rule Hits: 
X-Note: Global Rule Hits: G173 G174 G175 G176 G180 G181 G192 G279 
X-Note: Encrypt Rule Hits: 
X-Note: Mail Class: ALLOWEDSENDER
X-Note: Headers Injected
Received: from [98.129.23.15] (HELO ht02.exg5.exghost.com)
  by server505.appriver.com (CommuniGate Pro SMTP 5.3.2)
  with ESMTPS id 24601535 for java-user@lucene.apache.org; Thu, 18 Feb 2010 10:20:40 -0600
Received: from mbx03.exg5.exghost.com ([169.254.1.200]) by
 ht02.exg5.exghost.com ([98.129.23.15]) with mapi; Thu, 18 Feb 2010 10:20:34
 -0600
From: Yuval Feinstein <yuvalf@answers.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 18 Feb 2010 10:20:29 -0600
Subject: RE: BM25 Scoring Patch
Thread-Topic: BM25 Scoring Patch
Thread-Index: Acqwm6Bs35JC7G2GTxyUOIncV5LBhQAGkBUg
Message-ID: <01C4AEE04EB96243BBAA8083CB6514E86082AED3@MBX03.exg5.exghost.com>
References: <245804.25778.qm@web113302.mail.gq1.yahoo.com>
 	<83b692afc347b683f7f0b4263879b342.squirrel@correo.uned.es>
 	<8f0ad1f31002161147v4e1991edubf7f22978728168d@mail.gmail.com>
 	<f6c9640e38b683d37da6d5275631f025.squirrel@correo.uned.es>
 	<8f0ad1f31002161237r70e3b9act33c81c15e645b3ad@mail.gmail.com>
 	<01C4AEE04EB96243BBAA8083CB6514E86070CD8B@MBX03.exg5.exghost.com>
 	<8f0ad1f31002170731p11c7d456r506a7cdff913c6a9@mail.gmail.com>
 	<20100217163920.GA19787@rectangular.com>
 <8f0ad1f31002170846p1ef36987w7c7c7387fc109665@mail.gmail.com>
 	<01C4AEE04EB96243BBAA8083CB6514E86070D20C@MBX03.exg5.exghost.com>
 <8f0ad1f31002180508m53193025vb90c579947b04612@mail.gmail.com>
In-Reply-To: <8f0ad1f31002180508m53193025vb90c579947b04612@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

LS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IFJvYmVydCBNdWlyIFttYWlsdG86cmNt
dWlyQGdtYWlsLmNvbV0gDQpTZW50OiBUaHVyc2RheSwgRmVicnVhcnkgMTgsIDIwMTAgMzowOSBQ
TQ0KVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUmU6IEJNMjUgU2Nv
cmluZyBQYXRjaA0KDQpZdXZhbCwgZG9uJ3Qgd2Ugc3RpbGwgbmVlZCB0aGlzICdkb2N1bWVudC1s
ZXZlbCBJREYnIGZvciBCTTI1Zj8NCg0KLSBZZXMsIHdlIGRvIG5lZWQgJ2RvY3VtZW50LWxldmVs
IElERicgZm9yIEJNMjVmLiAgDQotIEpvYXF1aW4gdHJpZWQgdG8gYnlwYXNzIHRoaXMgYnkgdXNp
bmcgdGhlIElERiBvZiB0aGUgZmllbGQgaGF2aW5nIHRoZSBsb25nZXN0IGF2ZXJhZ2UgbGVuZ3Ro
IGluc3RlYWQNCi0gb2YgdGhlIGRvY3VtZW50J3MgSURGLg0KLSBUaGlzIGludHJvZHVjZXMgc29t
ZSBiaWFzIGludG8gdGhlIHNjb3JpbmcgZm9ybXVsYSwgYnV0IG1heWJlIGl0IGlzIG5vdCB0b28g
bGFyZ2UuLi4NCg0KT24gVGh1LCBGZWIgMTgsIDIwMTAgYXQgMzo0NSBBTSwgWXV2YWwgRmVpbnN0
ZWluIDx5dXZhbGZAYW5zd2Vycy5jb20+IHdyb3RlOg0KDQo+IFdlIGNvdWxkIHNvbHZlIHRoaXMg
Ynkgc2F5aW5nIHdlIG9ubHkgaW5jb3Jwb3JhdGUgQk0yNUYgaW50byBMdWNlbmUuDQo+IFRoaXMg
aXMgYSBmaWVsZC1iYXNlZCBzY29yaW5nIG1ldGhvZCwgc28gaXQgc2F2ZXMgdXMgdGhlIG5lZWQg
dG8gZGVhbCB3aXRoDQo+IGRvY3VtZW50cy4NCj4gQnVpbGRpbmcgb24gSm9hcXVpbidzIHdvcmss
IHRoZSBleHRyYSBwYXJ0cyBuZWVkZWQgSU1PIGFyZToNCj4gYS4gU3VwcG9ydCBmb3Igc3Rvcmlu
ZyBhdmVyYWdlIGxlbmd0aCBwZXIgZmllbGQgZHVyaW5nIGluZGV4aW5nLiBJIHRoaW5rIEkNCj4g
c2F3IHNvbWUgcmVmZXJlbmNlIHRvIHRoaXMNCj4gd2hlbiBHcmFudCBkZXNjcmliZWQgdGhlIG5l
dyBmZWF0dXJlcyBpbiBMdWNlbmUgMi45LiBXZSBuZWVkIHRvIHN0b3JlIHR3bw0KPiBudW1iZXJz
IChzYXkNCj4gbnVtYmVyIG9mIGRvY3VtZW50cyBjb250YWluaW5nIHRoZSBmaWVsZCBhbmQgYXZl
cmFnZSBsZW5ndGgpIHRvIHN1cHBvcnQNCj4gaW5jcmVtZW50YWwgaW5kZXhpbmcuDQo+IGIuIEVh
c3kgaW50ZWdyYXRpb24gb2YgQk0yNUYgc2ltaWxhcml0eSAtIGRlZmF1bHQgcGFyYW1ldGVyIHZh
bHVlcywgd29ya2luZw0KPiB3aXRoIHJlZ3VsYXIgTHVjZW5lIGNsYXNzIGhpZXJhcmNoeS4NCj4g
Yy4gU3VwcG9ydCBmb3IgYWxsIHJlZ3VsYXIgcXVlcnkgdHlwZXMgLSBQaHJhc2VRdWVyeSwgRnV6
enlRdWVyeSBldGMuIChXZQ0KPiBjb3VsZCBkbyB0aGlzIGluY3JlbWVudGFsbHksDQo+IHRocm93
aW5nIGFuICJVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiIgaW4gdGhlIG1lYW50aW1lKS4N
Cj4gZC4gU29tZSB3b3JrIG9uIHJ1bi10aW1lIGVmZmljaWVuY3ksIHRvIGJlIG5lYXIgdGhlIGVm
ZmljaWVuY3kgb2YgdGhlDQo+IGRlZmF1bHQgc2NvcmluZy4NCj4gSSBjb3VsZCBkbyBzb21lIG9m
IHRoaXMgd29yayBteXNlbGYsIGJ1dCBndWlkYW5jZSBmcm9tIGEgTHVjZW5lIHNjb3JpbmcNCj4g
Z3VydSB3b3VsZCBiZSBhIGdyZWF0IGhlbHAuDQo+IFRoYW5rcywNCj4gWXV2YWwNCj4NCg==


From java-user-return-45078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 19:05:43 2010
Return-Path: <java-user-return-45078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70833 invoked from network); 18 Feb 2010 19:05:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 19:05:42 -0000
Received: (qmail 45630 invoked by uid 500); 18 Feb 2010 19:05:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45546 invoked by uid 500); 18 Feb 2010 19:05:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45535 invoked by uid 99); 18 Feb 2010 19:05:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 19:05:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 19:05:31 +0000
Received: by ey-out-2122.google.com with SMTP id 9so1520138eyd.5
        for <java-user@lucene.apache.org>; Thu, 18 Feb 2010 11:05:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=2Nqi//TWiEJQJ1DvJkd9c2Wvz8kvF1jucUutCZZWkT8=;
        b=qpDN+GFe5qJTtIf6tuthrzyuhRarJWCA9qwXJECwXRajOs1l9d9wuYskVhfxYFI+c9
         qyNIQFX/7ZUYkKL+TKdtJh4PYjQEF6GB9t43eTii48Ab614mLvofr5vfmB654X3M+Oqa
         y8fjwJKMcTQ8dmRXToyb/Lb9SGgrKvyX5yANk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=Td5HbHwjE0msW+cZLkVQclfvuiunBQijnyyBQEEv8AtghjC5JXO/Ax9kNcr/7asDSW
         nGPTqeSL2V9XXDif4BnCcjXTXJ7QE/w/IknABLREnqL20pWzkDWgxba7GI2VyEoCOzU/
         +zkdaJ6ngq4PnUp7Kh/wsZTUEmHyUCrD+yCq4=
Received: by 10.216.93.79 with SMTP id k57mr2373756wef.161.1266519910066;
        Thu, 18 Feb 2010 11:05:10 -0800 (PST)
Received: from ?10.1.1.125? (hq.compositesw.com [209.237.61.131])
        by mx.google.com with ESMTPS id i6sm5851175gve.5.2010.02.18.11.05.07
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 18 Feb 2010 11:05:08 -0800 (PST)
Message-ID: <4B7D8F5D.7000608@gmail.com>
Date: Thu, 18 Feb 2010 11:05:01 -0800
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Query about Query.ToString()
References: <490191.41271.qm@web24712.mail.ird.yahoo.com>
In-Reply-To: <490191.41271.qm@web24712.mail.ird.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

It's great that this is supported. I have 3 questions:

1) XML query parser just focuses on the "difficult" queries, left the 
"simple" ones to the standard query parser.
I think it'll be good to support all of the queries. Makes it easier to 
implement, rather than combine two different parser together.
2) Another side point is the lack of examples in the Javadoc. Currently 
I need to dig into the unit test part to find some examples.
3) Can this be "standardized" into Lucene trunk? Is it possible to 
support other serialization forms, like google protocol buffer? 
Hopefully I only need to serialize it via query.toXML() or 
query.toBytes()  and the parser can recognize the serialized forms.

--
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes: http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got 2.6 Million Euro funding!



Mark Harwood wrote:
> Yes it is being maintained and I have it in production on many large systems. 
> Phrase prefix wildcard etc can be supported using the "UserQuery" tag which hands off to the regular Lucene QueryParser. It would be easy to add XML tags for these types but these clauses tend to be provided by users anyway as part of free-text fields. The other XML syntax tends to be useful for capturing all the other structured input eg date ranges, checkboxes etc as filters or caches filters. 
> I intend to give it a 3.0 refresh to add geo etc soon
> ---------------------------------------
>
> On 18 Feb 2010, at 02:12, Chris Lu <chris.lu@gmail.com> wrote:
>
> XMLQueryParser is pretty good start. However, is it being maintained recently?
>
> I noticed many Query class are not supported, like PrefixQuery, or even PhraseQuery.
> Is it for some particular reason or simply lack of resource?
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes: http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got 2.6 Million Euro funding!
>
>
> Mark Harwood wrote:
> This was part of the rationale for creating the XMLQueryParser which can be found in contrib.
>
> See here for the background: http://marc.info/?l=lucene-dev&m=113355526731460&w=2
>
>
> On 17 Feb 2010, at 18:44, Aaron Schon wrote:
>
>  
> Hi all, I know that persisting a Lucene query by query ToString() method. Is there any way of reconstructing the query from the string itself?
> The usecase is that I will be storing a library of queries as strings and load the appropriate query (from the string) based on some conditions.
>
> Is this possible? Could you share a code snippet?
>
> p.s. apologies for the double posting (I had asked this on Lucene general and was asked to ask here instead)
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>
>
>
>       
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 18 20:10:35 2010
Return-Path: <java-user-return-45079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10365 invoked from network); 18 Feb 2010 20:10:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Feb 2010 20:10:35 -0000
Received: (qmail 57539 invoked by uid 500); 18 Feb 2010 20:10:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57468 invoked by uid 500); 18 Feb 2010 20:10:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57458 invoked by uid 99); 18 Feb 2010 20:10:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Feb 2010 20:10:32 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [77.238.184.61] (HELO smtp130.mail.ukl.yahoo.com) (77.238.184.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Feb 2010 20:10:22 +0000
Received: (qmail 1536 invoked from network); 18 Feb 2010 20:10:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Content-Type:Mime-Version:Subject:From:In-Reply-To:Date:Content-Transfer-Encoding:Message-Id:References:To:X-Mailer;
  b=rdKnKh0PB8PDOJ+zKR7TXxdphlvv/GZO5c+5wmG7q2BhuEtfhfSqQdzeOk+33XRGQoLG1hpwwtVvme5YI7kr9HC0dTJ1j34KRxzwmi4xpgRjae7bz7DGQitFIapzinXE629uLiS/zl9CZD4vBAiAlzFKAoZkeTXXSg9OijjtS4k=  ;
Received: from i-194-106-34-5.freedom2surf.net (markharw00d@194.106.34.5 with plain)
        by smtp130.mail.ukl.yahoo.com with SMTP; 18 Feb 2010 20:09:59 +0000 GMT
X-Yahoo-SMTP: rdTGKYaswBBzjeOz17cOw.4gNsDMDjs6
X-YMail-OSG: sA7poWAVM1kSsm9gF7esa8czhumud_XvdhVqO8wMGAC37GbIuSZUFWz6.jvjN.vpoJFSLyZTEae8dGWg32YBnRld1ARuyLAQsp9ZPapAuBpxIeoIoqTBatDii.JzuIbZL8Vm1SNnK2odRXd4YirePJ6i692XiUTY02Ng522efhYj2QLBf1rf0cLw4i.YHJFs_adhI8lE17DaqnseSd1ZGHLRa17LarSsuLoKid0kVzV8ebmeE6mwT_lt.ZjFE8J_yUyQtKcuLhuhRgoUjZAddYnczxfPLP7PSFk-
X-Yahoo-Newman-Property: ymail-3
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: Query about Query.ToString()
From: Mark Harwood <markharw00d@yahoo.co.uk>
In-Reply-To: <4B7D8F5D.7000608@gmail.com>
Date: Thu, 18 Feb 2010 20:09:58 +0000
Content-Transfer-Encoding: quoted-printable
Message-Id: <A12C96EE-CFB6-42A7-93F5-F09D119A0593@yahoo.co.uk>
References: <490191.41271.qm@web24712.mail.ird.yahoo.com> <4B7D8F5D.7000608@gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org


> I have 3 questions:
>=20
> 1) XML query parser just focuses on the "difficult" queries, left the =
"simple" ones to the standard query parser.
> I think it'll be good to support all of the queries. Makes it easier =
to implement, rather than combine two different parser together.

"Lucene in Action 2" contains a section on XML query parser with an =
example that is typical of its use. An HTML form for a job search is =
mapped to an XML query via XSL. The free-text field for a job =
description accepts standard Lucene query syntax and gets mapped to a =
<UserQuery> tag - the other form content is all structured e.g date =
ranges, salary bands, contract/permanent choices and location choices - =
these all get mapped to  specialised tags in the XML. Phrase, Wildcard =
etc are happily handled by the UserQuery tag and it makes perfect sense =
for these elements to mix in the same XML. I could easily add Phrase, =
wildcard etc as explicit XML tags but there's not a great deal of demand =
for that so far and it may give people the wrong ideas.


> 2) Another side point is the lack of examples in the Javadoc. =
Currently I need to dig into the unit test part to find some examples.

In the source distro the contrib/xml-query-parser/docs directory has =
extensive docs with examples. These are generated from comments held in =
a formal DTD


> 3) Can this be "standardized" into Lucene trunk? Is it possible to =
support other serialization forms, like google protocol buffer? =
Hopefully I only need to serialize it via query.toXML() or =
query.toBytes()  and the parser can recognize the serialized forms.


I'm not sure about requiring query objects to serialize to XML or =
putting in trunk. It seems like a bit of a burden to place on core code =
for all query objects. It also enforces a single XML representation =
whereas the parser has been designed to support multiple new tags easily =
e.g. you can plug in simple tag handlers for tags like <All> ...</All> =
or <Any>....</Any> if you wanted a simplified form of expressing Boolean =
logic containers in the XML.


Cheers
Mark




>=20
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes: =
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in=
_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) =
got 2.6 Million Euro funding!
>=20
>=20
>=20
> Mark Harwood wrote:
>> Yes it is being maintained and I have it in production on many large =
systems. Phrase prefix wildcard etc can be supported using the =
"UserQuery" tag which hands off to the regular Lucene QueryParser. It =
would be easy to add XML tags for these types but these clauses tend to =
be provided by users anyway as part of free-text fields. The other XML =
syntax tends to be useful for capturing all the other structured input =
eg date ranges, checkboxes etc as filters or caches filters. I intend to =
give it a 3.0 refresh to add geo etc soon
>> ---------------------------------------
>>=20
>> On 18 Feb 2010, at 02:12, Chris Lu <chris.lu@gmail.com> wrote:
>>=20
>> XMLQueryParser is pretty good start. However, is it being maintained =
recently?
>>=20
>> I noticed many Query class are not supported, like PrefixQuery, or =
even PhraseQuery.
>> Is it for some particular reason or simply lack of resource?
>>=20
>> --
>> Chris Lu
>> -------------------------
>> Instant Scalable Full-Text Search On Any Database/Application
>> site: http://www.dbsight.net
>> demo: http://search.dbsight.com
>> Lucene Database Search in 3 minutes: =
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in=
_3_minutes
>> DBSight customer, a shopping comparison site, (anonymous per request) =
got 2.6 Million Euro funding!
>>=20
>>=20
>> Mark Harwood wrote:
>> This was part of the rationale for creating the XMLQueryParser which =
can be found in contrib.
>>=20
>> See here for the background: =
http://marc.info/?l=3Dlucene-dev&m=3D113355526731460&w=3D2
>>=20
>>=20
>> On 17 Feb 2010, at 18:44, Aaron Schon wrote:
>>=20
>> Hi all, I know that persisting a Lucene query by query ToString() =
method. Is there any way of reconstructing the query from the string =
itself?
>> The usecase is that I will be storing a library of queries as strings =
and load the appropriate query (from the string) based on some =
conditions.
>>=20
>> Is this possible? Could you share a code snippet?
>>=20
>> p.s. apologies for the double posting (I had asked this on Lucene =
general and was asked to ask here instead)
>>=20
>>=20
>>=20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>  =20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>>=20
>>     =20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>> =20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 19 11:03:03 2010
Return-Path: <java-user-return-45080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40209 invoked from network); 19 Feb 2010 11:03:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Feb 2010 11:03:03 -0000
Received: (qmail 6781 invoked by uid 500); 19 Feb 2010 11:03:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6697 invoked by uid 500); 19 Feb 2010 11:03:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6687 invoked by uid 99); 19 Feb 2010 11:03:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 11:03:00 +0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 11:02:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NiQcw-00089i-FR
	for java-user@lucene.apache.org; Fri, 19 Feb 2010 03:02:30 -0800
Message-ID: <27652362.post@talk.nabble.com>
Date: Fri, 19 Feb 2010 03:02:30 -0800 (PST)
From: kevinkilroy <kevinkilroy@hotmail.com>
To: java-user@lucene.apache.org
Subject: Sorting case insensitive wildcard queries
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kevinkilroy@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I have an AnalyzerDefinition:

@AnalyzerDef(name = "CustomAnalyzer", 
             tokenizer = @TokenizerDef(factory =
StandardTokenizerFactory.class),
             filters = { @TokenFilterDef(factory =
LowerCaseFilterFactory.class) }
            )

This works well, as I can do case insensitive searches, however, I sort my
results, but lowercase names remain at the end of the list of results. For
example:

Name
Mobile phone 
Monitor 
Searching
Testing
mobile defib

I would like to sort case insensitively, so mobile defib would appear
between Name & Mobile phone.

note, I am using wildcard queries for the search.

Is this possible?

Thanks in advance,

Kevin.


-- 
View this message in context: http://old.nabble.com/Sorting-case-insensitive-wildcard-queries-tp27652362p27652362.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 19 13:34:04 2010
Return-Path: <java-user-return-45081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92612 invoked from network); 19 Feb 2010 13:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Feb 2010 13:34:04 -0000
Received: (qmail 59547 invoked by uid 500); 19 Feb 2010 13:34:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59477 invoked by uid 500); 19 Feb 2010 13:34:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59467 invoked by uid 99); 19 Feb 2010 13:34:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 13:34:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f48.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 13:33:51 +0000
Received: by wyf22 with SMTP id 22so5934wyf.35
        for <java-user@lucene.apache.org>; Fri, 19 Feb 2010 05:33:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=99wjV11JIk3N1cI6L9k8Uj8Rvzv6YTyhXHHQ2oRKkhU=;
        b=t95HSGdRx3Q0JeIfF9nTLzLBYqJJSu+3nhdlBXRiA1buQn71rfH01PETWE0M39pYsg
         TWuXZISbQkICzM2pk+po9klqVE0APruZTa/x6KGxGcshmRxat1UKWWU3AYUf1UaaOw3o
         thEHUIrAu5L7IH9358HYEwW7fKz8uaGChujeg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=VoT+6D3DCyAklNVErt/YGtTL65FtVc0sll005pkh8xLzBy9Xrp2AfIfisnl03B2VPZ
         NszT6A3DN6WyrkDQOYgT0k6vtcCDPn/jpQYB7lgHhfPTrVIXOIRNQJURAZt9IGizQowz
         /bwORZ7FLDODrbwf8fMTi+vKtLTwpqtNsLmuQ=
MIME-Version: 1.0
Received: by 10.216.176.143 with SMTP id b15mr2631733wem.155.1266586411434; 
	Fri, 19 Feb 2010 05:33:31 -0800 (PST)
In-Reply-To: <27652362.post@talk.nabble.com>
References: <27652362.post@talk.nabble.com>
Date: Fri, 19 Feb 2010 08:33:31 -0500
Message-ID: <359a92831002190533r7b4dd072mffa1d86586168e1b@mail.gmail.com>
Subject: Re: Sorting case insensitive wildcard queries
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016365eec82218376047ff42146
X-Virus-Checked: Checked by ClamAV on apache.org

--0016365eec82218376047ff42146
Content-Type: text/plain; charset=ISO-8859-1

You can index (but not store) the field you want to sort on
in a separate field then sort on that field.

How are you sorting anyway? Your message leaves open
the possibility that you're sorting on a tokenized field, which
is unsupported. Fields you use to sort should be
untokenized.

HTH
Erick

On Fri, Feb 19, 2010 at 6:02 AM, kevinkilroy <kevinkilroy@hotmail.com>wrote:

>
> Hi,
>
> I have an AnalyzerDefinition:
>
> @AnalyzerDef(name = "CustomAnalyzer",
>             tokenizer = @TokenizerDef(factory =
> StandardTokenizerFactory.class),
>             filters = { @TokenFilterDef(factory =
> LowerCaseFilterFactory.class) }
>            )
>
> This works well, as I can do case insensitive searches, however, I sort my
> results, but lowercase names remain at the end of the list of results. For
> example:
>
> Name
> Mobile phone
> Monitor
> Searching
> Testing
> mobile defib
>
> I would like to sort case insensitively, so mobile defib would appear
> between Name & Mobile phone.
>
> note, I am using wildcard queries for the search.
>
> Is this possible?
>
> Thanks in advance,
>
> Kevin.
>
>
> --
> View this message in context:
> http://old.nabble.com/Sorting-case-insensitive-wildcard-queries-tp27652362p27652362.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016365eec82218376047ff42146--

From java-user-return-45082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 19 14:19:27 2010
Return-Path: <java-user-return-45082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20630 invoked from network); 19 Feb 2010 14:19:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Feb 2010 14:19:27 -0000
Received: (qmail 27572 invoked by uid 500); 19 Feb 2010 14:19:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27503 invoked by uid 500); 19 Feb 2010 14:19:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27493 invoked by uid 99); 19 Feb 2010 14:19:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 14:19:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cmeyerb@googlemail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 14:19:15 +0000
Received: by bwz9 with SMTP id 9so84696bwz.5
        for <java-user@lucene.apache.org>; Fri, 19 Feb 2010 06:18:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=fTujbei297Z/ckgfKAKuw4D5aVuSaVVy4CuuHDIo9EU=;
        b=CK6VSUPXD5PxMwXdxRvKxpqV3WLFAqEo84Y1d1eBS6M2530dkbMbti4rx3Qnb9GaIi
         qh0Id2j+WEjFBnrviRUCzCcfUJ0iHlLPc7efeMRXIHWscNP/XD0XjPjAVBmwCp341VUN
         3hDd83utuXP0ytW5i5vz/1YPUQEAmj2ViR3oM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=OLPpxx3VaxUybrHG8DNcbtF+UdrAfS+IBWh2UW9QAMWlnVZIf1n+Ph5alz771UQBla
         AgmZzdqbhCQyxwXcPWlOmpsaUJiIoyh9/I2qUkSr2kD8IJc+Jxfmi7kEFuPUxmV8AT4N
         oJmKXF+DKwQLwT7ga36FmQ1wVkLWFvgRTgUxM=
MIME-Version: 1.0
Received: by 10.103.125.37 with SMTP id c37mr8150902mun.3.1266589133421; Fri, 
	19 Feb 2010 06:18:53 -0800 (PST)
Date: Fri, 19 Feb 2010 15:18:53 +0100
Message-ID: <5b81df6c1002190618q6d438dbm160173feb639cb1b@mail.gmail.com>
Subject: RAMDirectory and inner Structure
From: Clarissa Meyer <cmeyerb@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e65bc1c05fbe54047ff4c371

--0016e65bc1c05fbe54047ff4c371
Content-Type: text/plain; charset=ISO-8859-1

Hi,

currently I'm working on a students project including a lucene index. It's a


kind of search engine working on extracted data from the web.
It's working pretty good, but now I'm curious about two things:
- when is it usefull to use a RAMDirectory? Is there a number of documents
in an index that will make it too slow when not using a RAMDirectory or is
there any other hint?
- how are lucene indexes build behind the curtain? How is one organized
inside? I could not find anything about its inner structure.

Thanks for any answers
Clarissa

--0016e65bc1c05fbe54047ff4c371--

From java-user-return-45083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 19 14:40:13 2010
Return-Path: <java-user-return-45083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30528 invoked from network); 19 Feb 2010 14:40:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Feb 2010 14:40:12 -0000
Received: (qmail 71321 invoked by uid 500); 19 Feb 2010 14:40:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71287 invoked by uid 500); 19 Feb 2010 14:40:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71277 invoked by uid 99); 19 Feb 2010 14:40:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 14:40:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 14:40:02 +0000
Received: by bwz9 with SMTP id 9so104242bwz.5
        for <java-user@lucene.apache.org>; Fri, 19 Feb 2010 06:39:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=+gHh34b0twWCwyQ+sI+3tF7SOzV235byovKmVX/eHcE=;
        b=PqSbbkVU0b52lqpLLfkmMhDQXnpFm8BilbKWZIQ4Ag8az74FyyXm1JWcKxNeFRNVLQ
         eJz2fTxpK0PJmQioCnpKg5V/hHwT8gai3rTxqX66HFUa/3NOFKYGUtAZLk0YqBY7CtcB
         gKy/AxQF6fIkNn5WPOVxQrnsJiKlgYQ9CkqqI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=o/3QeYkKFrG1I+D8fxbkTztdgzkiG8y8iK5nUJlzV55jrcai07PTGjQeSZSTQQ8Z/T
         a2ymGLNhblL9aKo+tXjUXqalDmaOtSuAjf2T6D1Fm0CYol/yv5mAhouVshvPASrjQtUR
         H7fd+LnZjdQaT3aa7fiGCt5snZp5r00r3UoJQ=
MIME-Version: 1.0
Received: by 10.204.29.17 with SMTP id o17mr3357189bkc.184.1266590381141; Fri, 
	19 Feb 2010 06:39:41 -0800 (PST)
In-Reply-To: <5b81df6c1002190618q6d438dbm160173feb639cb1b@mail.gmail.com>
References: <5b81df6c1002190618q6d438dbm160173feb639cb1b@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 19 Feb 2010 14:39:16 +0000
Message-ID: <8c4e68611002190639w2a1e5d1dgcb354a9cb7ae8472@mail.gmail.com>
Subject: Re: RAMDirectory and inner Structure
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

> currently I'm working on a students project including a lucene index. It's a
> kind of search engine working on extracted data from the web.
> It's working pretty good, but now I'm curious about two things:
> - when is it usefull to use a RAMDirectory? Is there a number of documents
> in an index that will make it too slow when not using a RAMDirectory or is
> there any other hint?

Lucene is rarely too slow!  Basically you can use RAMDirectory for
transient indexes that fit in RAM.
Anything else and you'll need to look elsewhere, presumably to
FSDirectory or maybe MMapDirectory

> - how are lucene indexes build behind the curtain? How is one organized
> inside? I could not find anything about its inner structure.

See http://lucene.apache.org/java/3_0_0/fileformats.html


--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 19 18:06:39 2010
Return-Path: <java-user-return-45084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16917 invoked from network); 19 Feb 2010 18:06:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Feb 2010 18:06:38 -0000
Received: (qmail 29569 invoked by uid 500); 19 Feb 2010 18:06:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29511 invoked by uid 500); 19 Feb 2010 18:06:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29501 invoked by uid 99); 19 Feb 2010 18:06:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 18:06:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 18:06:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NiXEr-0007dR-PN
	for java-user@lucene.apache.org; Fri, 19 Feb 2010 10:06:05 -0800
Message-ID: <27658061.post@talk.nabble.com>
Date: Fri, 19 Feb 2010 10:06:05 -0800 (PST)
From: jchang <jchangkihatest@gmail.com>
To: java-user@lucene.apache.org
Subject: Can Zoie (or something else) help me to write/update/delete to
 sharded index?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jchangkihatest@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I want to shard my index, which is currently a Lucene 3.0.0 solution with my
own service wrapper around it.  Looking at Katta and Solr, I can see how to
do this pretty easily, but Katta and Solr don't seem to offer any help for
managing the index (write, update, delete).  With Solor, it seems I'm
totally on my own for writing the shards.  

With Katta, I can add an index, but I then can't update it with deletes and
updates, which is a must.  I can add index "FOO" with documents 1-100, but
then I can't update index "FOO" any longer; there just seems to be an add
index method, and if I re-add under the name "FOO" I get errors.  I could
just keep adding unique index names ("FOO", "FOO_1", "FOO_2", etc), and then
search against them all.  But the problem is that if I need to update or
delete a doc in an index, I don't have a way to do it.  Even if I remembered
which index it is in (which would be a pain I'd hope to avoid), I still have
no way of getting back to that specific index to update its contents.

Can Zoie help me here?  Can it help me manage a sharded index with updates
and deletes?  If not zoie, anybody know what could?  I do prefer the
solution offer near-real-time searching of new docs, but a certain amount of
lag time would be acceptable.
-- 
View this message in context: http://old.nabble.com/Can-Zoie-%28or-something-else%29-help-me-to-write-update-delete-to-sharded-index--tp27658061p27658061.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 19 19:06:06 2010
Return-Path: <java-user-return-45085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56941 invoked from network); 19 Feb 2010 19:06:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Feb 2010 19:06:06 -0000
Received: (qmail 13603 invoked by uid 500); 19 Feb 2010 19:06:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13573 invoked by uid 500); 19 Feb 2010 19:06:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13563 invoked by uid 99); 19 Feb 2010 19:06:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 19:06:03 +0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 19:05:55 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NiYAR-0003p6-G7
	for java-user@lucene.apache.org; Fri, 19 Feb 2010 11:05:35 -0800
Message-ID: <27658845.post@talk.nabble.com>
Date: Fri, 19 Feb 2010 11:05:35 -0800 (PST)
From: kevinkilroy <kevinkilroy@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting case insensitive wildcard queries
In-Reply-To: <359a92831002190533r7b4dd072mffa1d86586168e1b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kevinkilroy@hotmail.com
References: <27652362.post@talk.nabble.com> <359a92831002190533r7b4dd072mffa1d86586168e1b@mail.gmail.com>


Hi Erick, 

Thanks for your input. I have 2 annotation fields (Sorry, I don't have
access to the code at the moment to paste in).
but basically, I am sorting on an un-tokenized field.

The problem I have is that I am using wildcard queries, & from what I
believe they don't get the filters applied from the Analyzer that I have
defined. 

By implementing a SortComparator I was able to sort correctly, however, if
there were some empty values, then a NullPointerException would be thrown.

After reading through the mailing list I see other people have had this
problem but I couldn't find a solution.

Does anybody know of a solution to stop the NullPointerException being
thrown when some of the fields dont have values for a custom SortComparator?

Thanks in advance,

Kevin.

Erick Erickson wrote:
> 
> You can index (but not store) the field you want to sort on
> in a separate field then sort on that field.
> 
> How are you sorting anyway? Your message leaves open
> the possibility that you're sorting on a tokenized field, which
> is unsupported. Fields you use to sort should be
> untokenized.
> 
> HTH
> Erick
> 
> On Fri, Feb 19, 2010 at 6:02 AM, kevinkilroy
> <kevinkilroy@hotmail.com>wrote:
> 
>>
>> Hi,
>>
>> I have an AnalyzerDefinition:
>>
>> @AnalyzerDef(name = "CustomAnalyzer",
>>             tokenizer = @TokenizerDef(factory =
>> StandardTokenizerFactory.class),
>>             filters = { @TokenFilterDef(factory =
>> LowerCaseFilterFactory.class) }
>>            )
>>
>> This works well, as I can do case insensitive searches, however, I sort
>> my
>> results, but lowercase names remain at the end of the list of results.
>> For
>> example:
>>
>> Name
>> Mobile phone
>> Monitor
>> Searching
>> Testing
>> mobile defib
>>
>> I would like to sort case insensitively, so mobile defib would appear
>> between Name & Mobile phone.
>>
>> note, I am using wildcard queries for the search.
>>
>> Is this possible?
>>
>> Thanks in advance,
>>
>> Kevin.
>>
>>
>> --
>> View this message in context:
>> http://old.nabble.com/Sorting-case-insensitive-wildcard-queries-tp27652362p27652362.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://old.nabble.com/Sorting-case-insensitive-wildcard-queries-tp27652362p27658845.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 19 19:41:54 2010
Return-Path: <java-user-return-45086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68220 invoked from network); 19 Feb 2010 19:41:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Feb 2010 19:41:54 -0000
Received: (qmail 73982 invoked by uid 500); 19 Feb 2010 19:41:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73913 invoked by uid 500); 19 Feb 2010 19:41:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73903 invoked by uid 99); 19 Feb 2010 19:41:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 19:41:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 19:41:42 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NiYj4-0006Ua-0t
	for java-user@lucene.apache.org; Fri, 19 Feb 2010 11:41:22 -0800
Message-ID: <27659293.post@talk.nabble.com>
Date: Fri, 19 Feb 2010 11:41:22 -0800 (PST)
From: luciusvorenus <lucius.vorenus@hotmail.de>
To: java-user@lucene.apache.org
Subject: Re: lucene webinterface
In-Reply-To: <27621946.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: lucius.vorenus@hotmail.de
References: <27611202.post@talk.nabble.com> <74B66D90-6AB4-4AA8-B744-FE029E0D9575@activemath.org> <27621946.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


no success with solr

Anybody another suggestion ?=20



luciusvorenus wrote:
>=20
>=20
> I already have the data indexed (a database table) and also  i have  clas=
s
> to search.. just simple
> I would like just a search box ...
>=20
> Thank u
>=20
>=20
> polx wrote:
>>=20
>>=20
>> On 16-f=C3=A9vr.-10, at 17:40, luciusvorenus wrote:
>>> how can I build a  webinterface for my aplication ?  I read =20
>>> something with
>>> HTML table and php but i had no idea?
>>> Can anobody help me?
>>=20
>> Lucius,
>>=20
>> try solr.
>>=20
>> paul
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/lucene-webinterface-tp2=
7611202p27659293.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 19 19:55:54 2010
Return-Path: <java-user-return-45087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71962 invoked from network); 19 Feb 2010 19:55:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Feb 2010 19:55:53 -0000
Received: (qmail 96345 invoked by uid 500); 19 Feb 2010 19:55:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96279 invoked by uid 500); 19 Feb 2010 19:55:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96269 invoked by uid 99); 19 Feb 2010 19:55:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 19:55:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erik.hatcher@gmail.com designates 74.125.92.27 as permitted sender)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 19:55:41 +0000
Received: by qw-out-2122.google.com with SMTP id 3so37647qwe.53
        for <java-user@lucene.apache.org>; Fri, 19 Feb 2010 11:55:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=TJ160NiGypvRv307FGFWHJx8x0Z11nsl5AimvPbu8bc=;
        b=lDbBf5snvn9TCMG+ojO1A/nwQ3GP6wDsZS/vYFsRxx83gO0r4y4yaJLqGZ6unfAuBs
         fCUs0kxiySSgtyLGwTow1rrvfRXEebjyzhxgieiLHNwUcq7u9yETs9w1ODpmS2NYJVUP
         oAdZyPHZONERl92lYHhm+SfLrBcgHENx+Edhs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=k509tG6aL0PBnWurf2T+6zQ+Q699F8KXwKmeHHYw8lw/JbPjInGATVnK60+iY1jEkZ
         Gkzz7sz1p4dJPRXa6Kw9TFe1JOtQJCbkth1FyR4lkw/DGuH7xio4mjMyZxPGiEe6mUzK
         RqZB/6G2kzlRSvLwXLSDoaTgXTzjm/Si1fP5E=
Received: by 10.229.242.85 with SMTP id lh21mr2051867qcb.67.1266609320229;
        Fri, 19 Feb 2010 11:55:20 -0800 (PST)
Received: from ?10.0.1.69? (va-76-1-144-214.dhcp.embarqhsd.net [76.1.144.214])
        by mx.google.com with ESMTPS id 20sm309022qyk.9.2010.02.19.11.55.17
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 19 Feb 2010 11:55:18 -0800 (PST)
Message-Id: <7ECE6E35-9FD4-442B-9A06-5232A519125C@gmail.com>
From: Erik Hatcher <erik.hatcher@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <27659293.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: lucene webinterface
Date: Fri, 19 Feb 2010 14:55:15 -0500
References: <27611202.post@talk.nabble.com> <74B66D90-6AB4-4AA8-B744-FE029E0D9575@activemath.org> <27621946.post@talk.nabble.com> <27659293.post@talk.nabble.com>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org

Again, try LIMO.

But what do you mean, no success with Solr?  Please elaborate on the =20
issues you encountered and what you tried.

	Erik

On Feb 19, 2010, at 2:41 PM, luciusvorenus wrote:

>
> no success with solr
>
> Anybody another suggestion ?
>
>
>
> luciusvorenus wrote:
>>
>>
>> I already have the data indexed (a database table) and also  i =20
>> have  class
>> to search.. just simple
>> I would like just a search box ...
>>
>> Thank u
>>
>>
>> polx wrote:
>>>
>>>
>>> On 16-f=E9vr.-10, at 17:40, luciusvorenus wrote:
>>>> how can I build a  webinterface for my aplication ?  I read
>>>> something with
>>>> HTML table and php but i had no idea?
>>>> Can anobody help me?
>>>
>>> Lucius,
>>>
>>> try solr.
>>>
>>> paul
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>
> --=20
> View this message in context: =
http://old.nabble.com/lucene-webinterface-tp27611202p27659293.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 19 20:04:09 2010
Return-Path: <java-user-return-45088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76619 invoked from network); 19 Feb 2010 20:04:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Feb 2010 20:04:09 -0000
Received: (qmail 12893 invoked by uid 500); 19 Feb 2010 20:04:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12830 invoked by uid 500); 19 Feb 2010 20:04:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 1121 invoked by uid 99); 19 Feb 2010 19:59:53 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ndimiduk@gmail.com designates 209.85.216.204 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=X33j3S0b9kFS37J2xUsKRKIJUFyugP64K7g67lm01FU=;
        b=EtkVULGRmGrVXGYMW2DkYnDkQD6d+YpMKQ+v+gLNLALj7nAJnnpEcmYXRxjAyK30EB
         YSKa8j28WEvnOr7oV/6d+j5HLebhwZ5bfRMpvdQLvm8PiJfyM/LtuC1YpnkGHVjeHwhO
         PFg/kQCDudt5IEBsSmnq3+wt+Uudz+uPS92Oc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=NI/hKUFQWajI9SW9tYAAmqkWQZHkMTKfDtdO4e9uMN+mCpmwRIWer5jbigreuv62Zj
         HFuNoloB+j6WJYHBfv+BYSbxJ7I4F2216bjBQqlTV3lTsOImp2ibgG2M/x5zdVVPeXBP
         KcdYoFfR4arS4eCvLuz7RjiqrCT8AntmAMQS8=
MIME-Version: 1.0
In-Reply-To: <860544ed1002161809u4c768a3ja87dda017ca3428c@mail.gmail.com>
References: <860544ed1002161809u4c768a3ja87dda017ca3428c@mail.gmail.com>
Date: Fri, 19 Feb 2010 11:59:24 -0800
Message-ID: <86e557c1002191159g74494d5ai7e2a5483deeedc2f@mail.gmail.com>
Subject: Re: Seattle Hadoop/Lucene/NoSQL Meetup; Wed Feb 24th, Feat. MongoDB
From: Nick Dimiduk <ndimiduk@gmail.com>
To: solr-user@lucene.apache.org, core-user@hadoop.apache.org, 
	nosql-discussion@googlegroups.com, java-user@lucene.apache.org, 
	hbase-user@hadoop.apache.org, pig-user@hadoop.apache.org, 
	cascading-user@googlegroups.com
Content-Type: multipart/alternative; boundary=00504502b22322a934047ff985c2

--00504502b22322a934047ff985c2
Content-Type: text/plain; charset=UTF-8

Reminder: this month's Seattle Hadoop Meetup is this Wednesday. Don't forget
to RSVP!

On Tue, Feb 16, 2010 at 6:09 PM, Bradford Stephens <
bradfordstephens@gmail.com> wrote:

> Greetings,
>
> It's time for another awesome Seattle Hadoop/Lucene/Scalability/NoSQL
> Meetup!
>
> As always, it's at the University of Washington, Allen Computer
> Science building, Room 303 at 6:45pm. You can find a map here:
> http://www.washington.edu/home/maps/southcentral.html?cse
>
> Last month, we had a great talk from Steve McPherson of Razorfish on
> their usage of Hadoop. This month, we'll have Richard Kreuter from
> MongoDB talking about, well, MongoDB. As well as assorted discussion
> on the Hadoop ecosystem.
>
> If you can, please RSVP here (not required, but very nice):
> http://www.meetup.com/Seattle-Hadoop-HBase-NoSQL-Meetup/
>
> My cell # is 904-415-3009 if you have questions/get lost.
>
> Cheers,
> Bradford
>
> --
> http://www.drawntoscalehq.com -- Big Data for all. The Big Data Platform.
>
> http://www.roadtofailure.com -- The Fringes of Scalability, Social
> Media, and Computer Science
>

--00504502b22322a934047ff985c2--

From java-user-return-45089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 19 20:12:18 2010
Return-Path: <java-user-return-45089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82120 invoked from network); 19 Feb 2010 20:12:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Feb 2010 20:12:17 -0000
Received: (qmail 27087 invoked by uid 500); 19 Feb 2010 20:12:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26996 invoked by uid 500); 19 Feb 2010 20:12:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26986 invoked by uid 99); 19 Feb 2010 20:12:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 20:12:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 20:12:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NiZCS-0000Wv-UJ
	for java-user@lucene.apache.org; Fri, 19 Feb 2010 12:11:44 -0800
Message-ID: <27659682.post@talk.nabble.com>
Date: Fri, 19 Feb 2010 12:11:44 -0800 (PST)
From: luciusvorenus <lucius.vorenus@hotmail.de>
To: java-user@lucene.apache.org
Subject: Re: lucene webinterface
In-Reply-To: <7ECE6E35-9FD4-442B-9A06-5232A519125C@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: lucius.vorenus@hotmail.de
References: <27611202.post@talk.nabble.com> <74B66D90-6AB4-4AA8-B744-FE029E0D9575@activemath.org> <27621946.post@talk.nabble.com> <27659293.post@talk.nabble.com> <7ECE6E35-9FD4-442B-9A06-5232A519125C@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org



With LIMO

""
  </context-param>

   <context-param>
   <param-name>Docu</param-name>
   <param-value>/home/lucius/../.../..../index</param-value>
   <description>This param info is used by LIMO</description>
 </context-param>
"""

and i get this mesagge

org.apache.jasper.JasperException: java.security.AccessControlException:
access denied (java.io.FilePermission /home/lucius/.././.../index/segments
read)

org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWr=
apper.java:522)

org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:=
416)
=09org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)
=09org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
=09javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
=09sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:5=
7)

sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImp=
l.java:43)
=09java.lang.reflect.Method.invoke(Method.java:616)
=09org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)
=09java.security.AccessController.doPrivileged(Native Method)
=09javax.security.auth.Subject.doAsPrivileged(Subject.java:537)
=09org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:301)

org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:1=
62

Erik Hatcher-4 wrote:
>=20
>=20
> I do not know how  can i deal with solr..=20
>=20
> :((
>=20
>=20
> Again, try LIMO.
>=20
> But what do you mean, no success with Solr?  Please elaborate on the =20
> issues you encountered and what you tried.
>=20
> =09Erik
>=20
> On Feb 19, 2010, at 2:41 PM, luciusvorenus wrote:
>=20
>>
>> no success with solr
>>
>> Anybody another suggestion ?
>>
>>
>>
>> luciusvorenus wrote:
>>>
>>>
>>> I already have the data indexed (a database table) and also  i =20
>>> have  class
>>> to search.. just simple
>>> I would like just a search box ...
>>>
>>> Thank u
>>>
>>>
>>> polx wrote:
>>>>
>>>>
>>>> On 16-f=C3=A9vr.-10, at 17:40, luciusvorenus wrote:
>>>>> how can I build a  webinterface for my aplication ?  I read
>>>>> something with
>>>>> HTML table and php but i had no idea?
>>>>> Can anobody help me?
>>>>
>>>> Lucius,
>>>>
>>>> try solr.
>>>>
>>>> paul
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>>
>>
>> --=20
>> View this message in context:
>> http://old.nabble.com/lucene-webinterface-tp27611202p27659293.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/lucene-webinterface-tp2=
7611202p27659682.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 19 22:44:09 2010
Return-Path: <java-user-return-45090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44214 invoked from network); 19 Feb 2010 22:44:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Feb 2010 22:44:09 -0000
Received: (qmail 24822 invoked by uid 500); 19 Feb 2010 22:44:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24749 invoked by uid 500); 19 Feb 2010 22:44:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24739 invoked by uid 99); 19 Feb 2010 22:44:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 22:44:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Lisheng.Zhang@broadvision.com designates 139.56.8.26 as permitted sender)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 22:43:58 +0000
X-ASG-Debug-ID: 1266619414-7743006b0000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id 4FCEB8F9ED
	for <java-user@lucene.apache.org>; Fri, 19 Feb 2010 14:43:34 -0800 (PST)
Received: from RW-EX2003.BROADVISION.COM (rw-ex2003.broadvision.com [10.10.160.33]) by mail-fw.broadvision.com with ESMTP id GpXnzVn2JCxx0axL for <java-user@lucene.apache.org>; Fri, 19 Feb 2010 14:43:34 -0800 (PST)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: Improving Zend lucene search - general guidance?
Subject: Improving Zend lucene search - general guidance?
Date: Fri, 19 Feb 2010 14:43:34 -0800
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB1269@rw-ex2003.BROADVISION.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Improving Zend lucene search - general guidance?
Thread-Index: AcqxtPgEO/7FANoLSm2tcp+0TKkS4A==
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: rw-ex2003.broadvision.com[10.10.160.33]
X-Barracuda-Start-Time: 1266619414
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I have been using Java/lucene for a few years and it works well for me.

Recently we started to use PHP/lucene from Zend, I found some problems, =
especially
that for each query, it immediately loads whole term id/score (other =
info..) array into=20
memory, this would cause memory exhausion if there are many docs and =
query is based
on a common term.

I plan to improve PHP lucene query implementation based on Java lucene =
(I know Java
lucene code reasonably OK), but it seems that a lot of changes are =
needed, I would just=20
like a high level guidance: is this doable within a week, have other =
people already had similar=20
experiences?

Thanks very much for helps, Lisheng

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 19 23:15:11 2010
Return-Path: <java-user-return-45091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57430 invoked from network); 19 Feb 2010 23:15:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Feb 2010 23:15:10 -0000
Received: (qmail 63097 invoked by uid 500); 19 Feb 2010 23:15:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63028 invoked by uid 500); 19 Feb 2010 23:15:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63018 invoked by uid 99); 19 Feb 2010 23:15:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 23:15:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.lu@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f48.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Feb 2010 23:14:58 +0000
Received: by wyf22 with SMTP id 22so52814wyf.35
        for <java-user@lucene.apache.org>; Fri, 19 Feb 2010 15:14:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=e94aT5hZSAUFEIEwUbjhLO68h7U6pDx5Xc6mfSgk1+Q=;
        b=b+Nj234ZkMqsenXC1yqurFAksQbnD34e6qHgRdsSfJFEtfzM4IvZ2JeAo25eC9vaq8
         A03ungy124DyjUb4KjPUh0vRksyuS41WgMfMczLhPnX+4znNdvMZxvQ88th0wcQCY61L
         iHbP/cY0y7F7846acPvpRWQZJvFvf7P3khVKs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=dkjXx4kgiw445H8bJPgckksH1QrLJJw5igHXepj5sCgj7dsjBD1qfxPUB8n+/g7p/0
         lVSyTcXx4jcPQd5r24uCrYsxY3H/dtxvJ9WL4NFt5xuONcuGgJ+rJ5m7o9tZ4IavrKFw
         3EFtlsDpS8dvkXVDPX2zwAiD5uEgCh6G8eDKY=
Received: by 10.216.90.4 with SMTP id d4mr504867wef.135.1266621278279;
        Fri, 19 Feb 2010 15:14:38 -0800 (PST)
Received: from ?10.1.1.125? (hq.compositesw.com [209.237.61.131])
        by mx.google.com with ESMTPS id q9sm1877018gve.4.2010.02.19.15.14.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 19 Feb 2010 15:14:37 -0800 (PST)
Message-ID: <4B7F1B59.7060601@gmail.com>
Date: Fri, 19 Feb 2010 15:14:33 -0800
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Improving Zend lucene search - general guidance?
References: <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB1269@rw-ex2003.BROADVISION.COM>
In-Reply-To: <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB1269@rw-ex2003.BROADVISION.COM>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

PHP doesn't have java like "static" variables, right? They are "stateless".
All the information like term info that's loaded in the memory will be 
gone for the next search.

You should use DBSight if you just have one week.

--

Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes: http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got 2.6 Million Euro funding!


Zhang, Lisheng wrote:
> Hi,
>
> I have been using Java/lucene for a few years and it works well for me.
>
> Recently we started to use PHP/lucene from Zend, I found some problems, especially
> that for each query, it immediately loads whole term id/score (other info..) array into 
> memory, this would cause memory exhausion if there are many docs and query is based
> on a common term.
>
> I plan to improve PHP lucene query implementation based on Java lucene (I know Java
> lucene code reasonably OK), but it seems that a lot of changes are needed, I would just 
> like a high level guidance: is this doable within a week, have other people already had similar 
> experiences?
>
> Thanks very much for helps, Lisheng
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 20 00:30:01 2010
Return-Path: <java-user-return-45092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78611 invoked from network); 20 Feb 2010 00:30:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Feb 2010 00:30:01 -0000
Received: (qmail 29349 invoked by uid 500); 20 Feb 2010 00:29:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29268 invoked by uid 500); 20 Feb 2010 00:29:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29258 invoked by uid 99); 20 Feb 2010 00:29:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Feb 2010 00:29:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Lisheng.Zhang@broadvision.com designates 139.56.8.26 as permitted sender)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Feb 2010 00:29:51 +0000
X-ASG-Debug-ID: 1266625770-48d200300000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id 88203C8DDB
	for <java-user@lucene.apache.org>; Fri, 19 Feb 2010 16:29:30 -0800 (PST)
Received: from RW-EX2003.BROADVISION.COM (rw-ex2003.broadvision.com [10.10.160.33]) by mail-fw.broadvision.com with ESMTP id nkb1RlqH16WB92pQ for <java-user@lucene.apache.org>; Fri, 19 Feb 2010 16:29:30 -0800 (PST)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: RE: Improving Zend lucene search - general guidance?
Subject: RE: Improving Zend lucene search - general guidance?
Date: Fri, 19 Feb 2010 16:29:30 -0800
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB126B@rw-ex2003.BROADVISION.COM>
In-Reply-To: <4B7F1B59.7060601@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Improving Zend lucene search - general guidance?
Thread-Index: AcqxuWKXBP3F90SZQF2hiYwtKdnObwACgbrw
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: rw-ex2003.broadvision.com[10.10.160.33]
X-Barracuda-Start-Time: 1266625770
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com

Hi, Thanks very much for reply! Yes, PHP is stateless, just like
old CGI. All I can do is to get result efficiently within the
given query.

But we already got into PHP, I will see what the best I can do.

Best regards, Lisheng

-----Original Message-----
From: Chris Lu [mailto:chris.lu@gmail.com]
Sent: Friday, February 19, 2010 3:15 PM
To: java-user@lucene.apache.org
Subject: Re: Improving Zend lucene search - general guidance?


PHP doesn't have java like "static" variables, right? They are =
"stateless".
All the information like term info that's loaded in the memory will be=20
gone for the next search.

You should use DBSight if you just have one week.

--

Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes: =
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) =
got 2.6 Million Euro funding!


Zhang, Lisheng wrote:
> Hi,
>
> I have been using Java/lucene for a few years and it works well for =
me.
>
> Recently we started to use PHP/lucene from Zend, I found some =
problems, especially
> that for each query, it immediately loads whole term id/score (other =
info..) array into=20
> memory, this would cause memory exhausion if there are many docs and =
query is based
> on a common term.
>
> I plan to improve PHP lucene query implementation based on Java lucene =
(I know Java
> lucene code reasonably OK), but it seems that a lot of changes are =
needed, I would just=20
> like a high level guidance: is this doable within a week, have other =
people already had similar=20
> experiences?
>
> Thanks very much for helps, Lisheng
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 20 16:15:59 2010
Return-Path: <java-user-return-45093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99189 invoked from network); 20 Feb 2010 16:15:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Feb 2010 16:15:59 -0000
Received: (qmail 67358 invoked by uid 500); 20 Feb 2010 16:15:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67280 invoked by uid 500); 20 Feb 2010 16:15:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67270 invoked by uid 99); 20 Feb 2010 16:15:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Feb 2010 16:15:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Feb 2010 16:15:46 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NirzJ-00013u-5P
	for java-user@lucene.apache.org; Sat, 20 Feb 2010 08:15:25 -0800
Message-ID: <27667153.post@talk.nabble.com>
Date: Sat, 20 Feb 2010 08:15:25 -0800 (PST)
From: luciusvorenus <lucius.vorenus@hotmail.de>
To: java-user@lucene.apache.org
Subject: Re: lucene webinterface
In-Reply-To: <27659682.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: lucius.vorenus@hotmail.de
References: <27611202.post@talk.nabble.com> <74B66D90-6AB4-4AA8-B744-FE029E0D9575@activemath.org> <27621946.post@talk.nabble.com> <27659293.post@talk.nabble.com> <7ECE6E35-9FD4-442B-9A06-5232A519125C@gmail.com> <27659682.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org




ok  i will try one more time

thank u


luciusvorenus wrote:
>=20
>=20
> With LIMO
>=20
> ""
>   </context-param>
>=20
>    <context-param>
>    <param-name>Docu</param-name>
>    <param-value>/home/lucius/../.../..../index</param-value>
>    <description>This param info is used by LIMO</description>
>  </context-param>
> """
>=20
> and i get this mesagge
>=20
> org.apache.jasper.JasperException: java.security.AccessControlException:
> access denied (java.io.FilePermission /home/lucius/.././.../index/segment=
s
> read)
>=20
> org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServlet=
Wrapper.java:522)
>=20
> org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.jav=
a:416)
> =09org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:34=
2)
> =09org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
> =09javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
> =09sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>=20
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java=
:57)
>=20
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorI=
mpl.java:43)
> =09java.lang.reflect.Method.invoke(Method.java:616)
> =09org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)
> =09java.security.AccessController.doPrivileged(Native Method)
> =09javax.security.auth.Subject.doAsPrivileged(Subject.java:537)
> =09org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:30=
1)
>=20
> org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java=
:162
>=20
> Erik Hatcher-4 wrote:
>>=20
>>=20
>> I do not know how  can i deal with solr..=20
>>=20
>> :((
>>=20
>>=20
>> Again, try LIMO.
>>=20
>> But what do you mean, no success with Solr?  Please elaborate on the =20
>> issues you encountered and what you tried.
>>=20
>> =09Erik
>>=20
>> On Feb 19, 2010, at 2:41 PM, luciusvorenus wrote:
>>=20
>>>
>>> no success with solr
>>>
>>> Anybody another suggestion ?
>>>
>>>
>>>
>>> luciusvorenus wrote:
>>>>
>>>>
>>>> I already have the data indexed (a database table) and also  i =20
>>>> have  class
>>>> to search.. just simple
>>>> I would like just a search box ...
>>>>
>>>> Thank u
>>>>
>>>>
>>>> polx wrote:
>>>>>
>>>>>
>>>>> On 16-f=C3=A9vr.-10, at 17:40, luciusvorenus wrote:
>>>>>> how can I build a  webinterface for my aplication ?  I read
>>>>>> something with
>>>>>> HTML table and php but i had no idea?
>>>>>> Can anobody help me?
>>>>>
>>>>> Lucius,
>>>>>
>>>>> try solr.
>>>>>
>>>>> paul
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>
>>> --=20
>>> View this message in context:
>>> http://old.nabble.com/lucene-webinterface-tp27611202p27659293.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/lucene-webinterface-tp2=
7611202p27667153.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 20 21:24:13 2010
Return-Path: <java-user-return-45094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90883 invoked from network); 20 Feb 2010 21:24:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Feb 2010 21:24:13 -0000
Received: (qmail 45491 invoked by uid 500); 20 Feb 2010 21:24:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45441 invoked by uid 500); 20 Feb 2010 21:24:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45431 invoked by uid 99); 20 Feb 2010 21:24:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Feb 2010 21:24:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mail.apoorv@gmail.com designates 209.85.223.186 as permitted sender)
Received: from [209.85.223.186] (HELO mail-iw0-f186.google.com) (209.85.223.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Feb 2010 21:24:03 +0000
Received: by iwn16 with SMTP id 16so1372885iwn.20
        for <java-user@lucene.apache.org>; Sat, 20 Feb 2010 13:23:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=3vKjQxi/D6HSE/CsfsBWuJJxcPuI1zhNMUVUuzo1q7o=;
        b=lsBfrRh9TclhHFZjwjen+6atLDdzGqhgzgTk7eKcW2czSs95MoYPDDwBOpRJXY9ljs
         dntvXuJ8sXFCoOIt2NMX8tfkI6PpiBW8PqHHxjj+6ItvPfU9jML+pNiS+p/ZT8XmuDNq
         uVJrB529TD8wYqPV/hCNetQebSVgpQnhymJMA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=vZHBZ980CkO1kg36PhQfr1spRg2oOtEnzChi7a61W9tHIIhZA/VOpSFVhQdK08fTIi
         RT2P9YqbYBDX+CqbhJmWueVPBf9RrL5JspBc63WrvuUCNqiFaE0c+W7mRar6szduqyOo
         dX9mHIVyi07r7qD8WRDmuU42NOkiWkDq8WCMc=
MIME-Version: 1.0
Received: by 10.231.146.67 with SMTP id g3mr83887ibv.59.1266701023404; Sat, 20 
	Feb 2010 13:23:43 -0800 (PST)
Date: Sun, 21 Feb 2010 02:53:43 +0530
Message-ID: <d260a65b1002201323s16e5d837g5d1cdd4da3047ee6@mail.gmail.com>
Subject: Counting entries in an index
From: Apoorv Sharma <mail.apoorv@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64eae508964a904800ed0f0

--0016e64eae508964a904800ed0f0
Content-Type: text/plain; charset=ISO-8859-1

Hello,

I am trying to count the total of number of posting entries for terms having
a given prefix in an index. Also count the number of such terms in the
index.

The following is the code I am using for that. The problem is the result is
not as expected.


Can you point out if what am I doing something wrong:


ASSUMPTION:

Index has had no deletions.

INPUT:

prefix: the prefix that terms should match.

VARIABLES:

set:         a set of unique terms found in the index having given prefix
wordcount:          the number of unique terms in the index having given
prefix
termFreqCount:           final result which will be returned


CODE:

public long countTotalPositingEntriesInIndex(String prefix) {
int wordCount = 0;
int documentId = -1;
long termFreqCount = 0;

HashSet<String> set = new HashSet<String>();

for (int i = 0; i < index.length; i++) {
while (documentId < index[i].getIndexReader().maxDoc() - 1) {
documentId++;

try {
TermFreqVector tfv[] = index[i].getIndexReader()
.getTermFreqVectors(documentId);
if (tfv == null)
continue;
for (int fieldCount = 0; fieldCount < tfv.length; fieldCount++) {
String terms[] = tfv[fieldCount].getTerms();
int termFreq[] = tfv[fieldCount].getTermFrequencies();
for (int termCount = 0; termCount < terms.length; termCount++) {
if (terms[termCount].toLowerCase().startsWith(
prefix.toLowerCase()))
{
if( !set.contains(terms[termCount]))
{
wordCount++;
set.add(terms[termCount].toLowerCase());
}
termFreqCount += termFreq[termCount];
}
}

}
} catch (IOException e) {
e.printStackTrace();
}
}
}
return termFreqCount;
}

--0016e64eae508964a904800ed0f0--

From java-user-return-45095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 20 22:25:38 2010
Return-Path: <java-user-return-45095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17640 invoked from network); 20 Feb 2010 22:25:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Feb 2010 22:25:38 -0000
Received: (qmail 88362 invoked by uid 500); 20 Feb 2010 22:25:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88275 invoked by uid 500); 20 Feb 2010 22:25:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88265 invoked by uid 99); 20 Feb 2010 22:25:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Feb 2010 22:25:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Feb 2010 22:25:27 +0000
Received: by wwb34 with SMTP id 34so159975wwb.35
        for <java-user@lucene.apache.org>; Sat, 20 Feb 2010 14:25:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=13fAHgPHNHXx/Vp75ADrOX0t5nbzPxL5Ky4pw8sIF5s=;
        b=VFwolSkONhKFXw4xuY03QrGKK5F9b7ZDuSqTm++CLUziIx8d6vA7NKeuK5zuCg2k0N
         v6oiZKL+8yH8mOGw971ogDWr2g3avtzVG0GkSlAAC24QvIIh72TSGc9Yfx/I+OoYWsiS
         ooPzcL4tbEipd9iLEJPTJqJBAr03fBdRJrMh0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Jl/ypXt61ELYNimNtRS/N+5J/KnNWekIJbXPIcxa15Nh4MxtfDDEr1Z5ng+zrHwzqN
         5rN113Pc6EUGfv+9pLQa2LsrVLCmvSL409KYy/HbhPV2ZMnfHtFtbFYTBgLHXoQOUVm6
         zb1RzHxFqclmMK1wdu+kIco60xQDSNKPqALI4=
MIME-Version: 1.0
Received: by 10.216.89.193 with SMTP id c43mr5436718wef.221.1266704707445; 
	Sat, 20 Feb 2010 14:25:07 -0800 (PST)
In-Reply-To: <d260a65b1002201323s16e5d837g5d1cdd4da3047ee6@mail.gmail.com>
References: <d260a65b1002201323s16e5d837g5d1cdd4da3047ee6@mail.gmail.com>
Date: Sat, 20 Feb 2010 17:25:07 -0500
Message-ID: <359a92831002201425u49b9bdf2s1eadc03820ba4605@mail.gmail.com>
Subject: Re: Counting entries in an index
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d46d7d1f68f204800fac7e
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d46d7d1f68f204800fac7e
Content-Type: text/plain; charset=ISO-8859-1

what is the behavior you're seeing? It's hard to answer "what's wrong"
without any information on what expectation you have that's not being met.
Are you getting 0? a number that seems wrong? Have you examined your index
with Luke to see if terms that start with your prefix actually are in the
index? Are you getting an exception?

What are you seeing when you step through in the debugger?

Best
Erick

On Sat, Feb 20, 2010 at 4:23 PM, Apoorv Sharma <mail.apoorv@gmail.com>wrote:

> Hello,
>
> I am trying to count the total of number of posting entries for terms
> having
> a given prefix in an index. Also count the number of such terms in the
> index.
>
> The following is the code I am using for that. The problem is the result is
> not as expected.
>
>
> Can you point out if what am I doing something wrong:
>
>
> ASSUMPTION:
>
> Index has had no deletions.
>
> INPUT:
>
> prefix: the prefix that terms should match.
>
> VARIABLES:
>
> set:         a set of unique terms found in the index having given prefix
> wordcount:          the number of unique terms in the index having given
> prefix
> termFreqCount:           final result which will be returned
>
>
> CODE:
>
> public long countTotalPositingEntriesInIndex(String prefix) {
> int wordCount = 0;
> int documentId = -1;
> long termFreqCount = 0;
>
> HashSet<String> set = new HashSet<String>();
>
> for (int i = 0; i < index.length; i++) {
> while (documentId < index[i].getIndexReader().maxDoc() - 1) {
> documentId++;
>
> try {
> TermFreqVector tfv[] = index[i].getIndexReader()
> .getTermFreqVectors(documentId);
> if (tfv == null)
> continue;
> for (int fieldCount = 0; fieldCount < tfv.length; fieldCount++) {
> String terms[] = tfv[fieldCount].getTerms();
> int termFreq[] = tfv[fieldCount].getTermFrequencies();
> for (int termCount = 0; termCount < terms.length; termCount++) {
> if (terms[termCount].toLowerCase().startsWith(
> prefix.toLowerCase()))
> {
> if( !set.contains(terms[termCount]))
> {
> wordCount++;
> set.add(terms[termCount].toLowerCase());
> }
> termFreqCount += termFreq[termCount];
> }
> }
>
> }
> } catch (IOException e) {
> e.printStackTrace();
> }
> }
> }
> return termFreqCount;
> }
>

--0016e6d46d7d1f68f204800fac7e--

From java-user-return-45096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 08:54:33 2010
Return-Path: <java-user-return-45096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73549 invoked from network); 22 Feb 2010 08:54:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 08:54:33 -0000
Received: (qmail 45177 invoked by uid 500); 22 Feb 2010 08:54:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45089 invoked by uid 500); 22 Feb 2010 08:54:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45079 invoked by uid 99); 22 Feb 2010 08:54:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 08:54:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 08:54:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NjU3G-0001rd-51
	for java-user@lucene.apache.org; Mon, 22 Feb 2010 00:54:02 -0800
Message-ID: <27684388.post@talk.nabble.com>
Date: Mon, 22 Feb 2010 00:54:02 -0800 (PST)
From: pdaures <patrick.daures@gmail.com>
To: java-user@lucene.apache.org
Subject: Boost Problem (again), need example !
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: patrick.daures@gmail.com


Hi,
I know that there are many topics about scoring issues, but I didn't find an
answer in the topics.
This is the problem :
Imagine I'm a teacher, and I have to index all the results, comments and
score about students.

Student :
String name (eg : John Smith)
String comments : (eg: John is a good student, but he needs to be more self
confident bla bla bla)
float score (eg : 98)

I have to index all the students and when I use the search class, I want to
get first the best students. So, if John Smith is a better student than John
Mickael, when I search "John" I want to have John Smith BEFORE John Mickeal.

To do that, I'm using BooleanQuery to search in name and comment fields.

First, I thought I could use the function Document.setBoost(float boost)
while indexing student, with boost = Student.score. But the result was not
what I was expected, it didn't work correctly.

Then I thought I could use a FunctionQuery to search :
FunctionQuery functionQuery = new FunctionQuery(new
ReverseOrdFieldSource("score"));
But the result was still incorrect.

I don't know what I'm doing wrong. Could you help me to find a solution ?
Thank you :)
-- 
View this message in context: http://old.nabble.com/Boost-Problem-%28again%29%2C-need-example-%21-tp27684388p27684388.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 09:33:28 2010
Return-Path: <java-user-return-45097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88384 invoked from network); 22 Feb 2010 09:33:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 09:33:27 -0000
Received: (qmail 82473 invoked by uid 500); 22 Feb 2010 09:33:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82397 invoked by uid 500); 22 Feb 2010 09:33:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82387 invoked by uid 99); 22 Feb 2010 09:33:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 09:33:25 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 09:33:18 +0000
Received: by bwz9 with SMTP id 9so1441190bwz.5
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 01:32:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=18KTQY97Fk2dkyczqjUAQkYr0hWU0Ey93gFRNxO9800=;
        b=w/puN1UOgcl7hIJwR4/dufRxDzoEceyANxt9YtnrdMicXnAfC+sUcMXrQI1lKODCJG
         iPIb7n2PZxveYV6H7u32VIbGHY+oPZoeYzKsuKqb5HlBAySvxjFZsprchMmR45RL5z+i
         Fp18V6mXSViGfRUXCOJiuNBR7VfsmwMV9y694=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=qwSt2RZdrOYuD+Y6dfUShVEe5sBBhkRAaEIJlj8lCh0qVNDNRf0VRGzOoOQimg2xdH
         LvOVO8Typxwnm06zlyVY7T1DhxpWIhoQeINIR3/s2PWDbKhJ2NNunTb3MKXFTmWgKSb+
         TKoOU5vKSKF9LVpq1qbKhPpu7k2dd6/LS/CeM=
MIME-Version: 1.0
Received: by 10.204.144.130 with SMTP id z2mr10435bku.55.1266831174159; Mon, 
	22 Feb 2010 01:32:54 -0800 (PST)
In-Reply-To: <27684388.post@talk.nabble.com>
References: <27684388.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 22 Feb 2010 09:32:34 +0000
Message-ID: <8c4e68611002220132l6719a4b5s4b7e663e12cd0cf3@mail.gmail.com>
Subject: Re: Boost Problem (again), need example !
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Can't you simply sort by descending score (your score, not lucene's)?
Seems to me that would give you what you are asking for.

The setBoost() method is unlikely to work consistently because it only
infuences the score rather than setting it.  If your John Mickeal doc
happens to have a higher lucene score, because of the normal
idf/tf/etc stuff, then the setBoost() with a higher value for John
Smith may well not be enough to force John Smith to the top.

I don't know enough about function queries to help you much there but
FieldScoreQuery might work.  I can't see any sign of class
FunctionQuery in the 3.0.0 core package so am not clear what that is.


--
Ian.



On Mon, Feb 22, 2010 at 8:54 AM, pdaures <patrick.daures@gmail.com> wrote:
>
> Hi,
> I know that there are many topics about scoring issues, but I didn't find an
> answer in the topics.
> This is the problem :
> Imagine I'm a teacher, and I have to index all the results, comments and
> score about students.
>
> Student :
> String name (eg : John Smith)
> String comments : (eg: John is a good student, but he needs to be more self
> confident bla bla bla)
> float score (eg : 98)
>
> I have to index all the students and when I use the search class, I want to
> get first the best students. So, if John Smith is a better student than John
> Mickael, when I search "John" I want to have John Smith BEFORE John Mickeal.
>
> To do that, I'm using BooleanQuery to search in name and comment fields.
>
> First, I thought I could use the function Document.setBoost(float boost)
> while indexing student, with boost = Student.score. But the result was not
> what I was expected, it didn't work correctly.
>
> Then I thought I could use a FunctionQuery to search :
> FunctionQuery functionQuery = new FunctionQuery(new
> ReverseOrdFieldSource("score"));
> But the result was still incorrect.
>
> I don't know what I'm doing wrong. Could you help me to find a solution ?
> Thank you :)
> --
> View this message in context: http://old.nabble.com/Boost-Problem-%28again%29%2C-need-example-%21-tp27684388p27684388.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 09:43:58 2010
Return-Path: <java-user-return-45098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92012 invoked from network); 22 Feb 2010 09:43:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 09:43:58 -0000
Received: (qmail 91532 invoked by uid 500); 22 Feb 2010 09:43:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91472 invoked by uid 500); 22 Feb 2010 09:43:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91462 invoked by uid 99); 22 Feb 2010 09:43:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 09:43:56 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 09:43:47 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 7ED38D3600C
	for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 10:43:24 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id XozbgYgDABE6 for <java-user@lucene.apache.org>;
	Mon, 22 Feb 2010 10:43:21 +0100 (CET)
Received: from VEGA (gate2.marum.de [134.102.237.2])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 81778D36008
	for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 10:43:21 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <27684388.post@talk.nabble.com> <8c4e68611002220132l6719a4b5s4b7e663e12cd0cf3@mail.gmail.com>
In-Reply-To: <8c4e68611002220132l6719a4b5s4b7e663e12cd0cf3@mail.gmail.com>
Subject: RE: Boost Problem (again), need example !
Date: Mon, 22 Feb 2010 10:43:30 +0100
Message-ID: <000901cab3a3$7deb8a70$79c29f50$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqzohkPk0BXhfZGTQiLCKo9hnLQ0gAAPsyg
Content-Language: de

It's CustomScoreQuery in 2.9 and 3.0.

Please wait for 2.9.2 and 3.0.1 for an important API change in this =
experimental query type to work correct with the new per-segment-search! =
You can test the release artifacts of both new versions here: =
http://people.apache.org/~uschindler/staging-area/lucene-292-301-take2-re=
v912433/

With e.g. ValueSourceQuery you can score your documents using a separate =
numeric field from your documents (it uses FieldCache).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Ian Lea [mailto:ian.lea@gmail.com]
> Sent: Monday, February 22, 2010 10:33 AM
> To: java-user@lucene.apache.org
> Subject: Re: Boost Problem (again), need example !
>=20
> Can't you simply sort by descending score (your score, not lucene's)?
> Seems to me that would give you what you are asking for.
>=20
> The setBoost() method is unlikely to work consistently because it only
> infuences the score rather than setting it.  If your John Mickeal doc
> happens to have a higher lucene score, because of the normal
> idf/tf/etc stuff, then the setBoost() with a higher value for John
> Smith may well not be enough to force John Smith to the top.
>=20
> I don't know enough about function queries to help you much there but
> FieldScoreQuery might work.  I can't see any sign of class
> FunctionQuery in the 3.0.0 core package so am not clear what that is.
>=20
>=20
> --
> Ian.
>=20
>=20
>=20
> On Mon, Feb 22, 2010 at 8:54 AM, pdaures <patrick.daures@gmail.com>
> wrote:
> >
> > Hi,
> > I know that there are many topics about scoring issues, but I didn't
> find an
> > answer in the topics.
> > This is the problem :
> > Imagine I'm a teacher, and I have to index all the results, comments
> and
> > score about students.
> >
> > Student :
> > String name (eg : John Smith)
> > String comments : (eg: John is a good student, but he needs to be
> more self
> > confident bla bla bla)
> > float score (eg : 98)
> >
> > I have to index all the students and when I use the search class, I
> want to
> > get first the best students. So, if John Smith is a better student
> than John
> > Mickael, when I search "John" I want to have John Smith BEFORE John
> Mickeal.
> >
> > To do that, I'm using BooleanQuery to search in name and comment
> fields.
> >
> > First, I thought I could use the function Document.setBoost(float
> boost)
> > while indexing student, with boost =3D Student.score. But the result
> was not
> > what I was expected, it didn't work correctly.
> >
> > Then I thought I could use a FunctionQuery to search :
> > FunctionQuery functionQuery =3D new FunctionQuery(new
> > ReverseOrdFieldSource("score"));
> > But the result was still incorrect.
> >
> > I don't know what I'm doing wrong. Could you help me to find a
> solution ?
> > Thank you :)
> > --
> > View this message in context: http://old.nabble.com/Boost-Problem-
> %28again%29%2C-need-example-%21-tp27684388p27684388.html
> > Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 10:26:44 2010
Return-Path: <java-user-return-45099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8325 invoked from network); 22 Feb 2010 10:26:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 10:26:43 -0000
Received: (qmail 14393 invoked by uid 500); 22 Feb 2010 10:26:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14305 invoked by uid 500); 22 Feb 2010 10:26:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14295 invoked by uid 99); 22 Feb 2010 10:26:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 10:26:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gudumba.smith@gmail.com designates 209.85.220.221 as permitted sender)
Received: from [209.85.220.221] (HELO mail-fx0-f221.google.com) (209.85.220.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 10:26:33 +0000
Received: by fxm21 with SMTP id 21so359112fxm.5
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 02:26:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=UZ2tDIRNg/lDMhXn2IS7XSsZKniAiismw88h33N0UgE=;
        b=YDQLWC86HhZOOmSlxLTZ9VE3tP9PsczMzjxtHVvtCFhKrcIjgcJR0tGTm98xkDID7u
         NAiI6GSfbh2TWDvqr8qSTGoXRGemYoyd9OUbVl7F2sz2kooT9ZKyBbSyFCo5kWHr81u2
         mHa3kjlMZHrJnCrmHne8vJbh9q2NygfWUWllk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=cEUOh2P6UwicRUzree41t613RjOGA+fp/s3CASlZMfXfNLqSzv672NMk9Xi5vxr9k+
         7WB89M99Uy9Cc9H6jluzMJC/OEkM6O10Hj/J68vaOUPDKAVACMtkQ/WD4lD6yjZVZVV/
         FtCwvzwRvJNslD0gGTHb3QZ5rB24MAypblMtk=
MIME-Version: 1.0
Received: by 10.102.171.21 with SMTP id t21mr3481536mue.53.1266834372872; Mon, 
	22 Feb 2010 02:26:12 -0800 (PST)
Date: Mon, 22 Feb 2010 11:26:12 +0100
Message-ID: <171c79531002220226l1ba194c8k748622c2adc7bd2@mail.gmail.com>
Subject: range of scores : queryNorm()
From: Smith G <gudumba.smith@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hello ,
          I have observed that even if we change boosting
drastically, scores are being normalized at the end because of
queryNorm value. Is there anything ( regarding to the queryNorm) that
we can rely on ? like score will always be under 10 or some fixed
value ? The main objective is to provide scores in a fixed range to
the partner. So have you been experienced anything like this? Is it
possible to do so ?.
   Have you been experienced any strange situation like for a
particular query, result scores were really high compared to routine?
if yes,I would like to know  the factor that effected scores
drastically, because it may help me to proceed or understand the
cases.
Thanks

(NOTE : I am sorry, I have also posted in solr group, there were no
replies and also I feel this place is even more apt.).

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 11:01:26 2010
Return-Path: <java-user-return-45100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21455 invoked from network); 22 Feb 2010 11:01:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 11:01:26 -0000
Received: (qmail 46889 invoked by uid 500); 22 Feb 2010 11:01:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46829 invoked by uid 500); 22 Feb 2010 11:01:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46819 invoked by uid 99); 22 Feb 2010 11:01:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 11:01:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 11:01:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NjW22-0001Ho-8Z
	for java-user@lucene.apache.org; Mon, 22 Feb 2010 03:00:54 -0800
Message-ID: <27685594.post@talk.nabble.com>
Date: Mon, 22 Feb 2010 03:00:54 -0800 (PST)
From: pdaures <patrick.daures@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Boost Problem (again), need example !
In-Reply-To: <000901cab3a3$7deb8a70$79c29f50$@de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: patrick.daures@gmail.com
References: <27684388.post@talk.nabble.com> <8c4e68611002220132l6719a4b5s4b7e663e12cd0cf3@mail.gmail.com> <000901cab3a3$7deb8a70$79c29f50$@de>
X-Virus-Checked: Checked by ClamAV on apache.org


HI !
Thank you for your help.
I think I don't use CustomScoreQuery correctly when I do a "search".

BooleanQuery combinedQuery = new BooleanQuery();
combinedQuery.add(textQuery, Occur.MUST);
combinedQuery.add(titleQuery, Occur.MUST);

CustomScoreQuery customQuery = new CustomScoreQuery(combinedQuery,new
FieldScoreQuery(BOOST_FIELD,Type.INT));

indexSearcher.search(..., customQuery, ....).

in order to index the BOOST_FIELD, I do that :
Field boostField = new Field(BOOST_FIELD, Integer.toString(boost),
Field.Store.YES, Field.Index.ANALYZED.NO);


Is that correct ?
Thank you




Uwe Schindler wrote:
> 
> It's CustomScoreQuery in 2.9 and 3.0.
> 
> Please wait for 2.9.2 and 3.0.1 for an important API change in this
> experimental query type to work correct with the new per-segment-search!
> You can test the release artifacts of both new versions here:
> http://people.apache.org/~uschindler/staging-area/lucene-292-301-take2-rev912433/
> 
> With e.g. ValueSourceQuery you can score your documents using a separate
> numeric field from your documents (it uses FieldCache).
> 
> Uwe
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
>> -----Original Message-----
>> From: Ian Lea [mailto:ian.lea@gmail.com]
>> Sent: Monday, February 22, 2010 10:33 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Boost Problem (again), need example !
>> 
>> Can't you simply sort by descending score (your score, not lucene's)?
>> Seems to me that would give you what you are asking for.
>> 
>> The setBoost() method is unlikely to work consistently because it only
>> infuences the score rather than setting it.  If your John Mickeal doc
>> happens to have a higher lucene score, because of the normal
>> idf/tf/etc stuff, then the setBoost() with a higher value for John
>> Smith may well not be enough to force John Smith to the top.
>> 
>> I don't know enough about function queries to help you much there but
>> FieldScoreQuery might work.  I can't see any sign of class
>> FunctionQuery in the 3.0.0 core package so am not clear what that is.
>> 
>> 
>> --
>> Ian.
>> 
>> 
>> 
>> On Mon, Feb 22, 2010 at 8:54 AM, pdaures <patrick.daures@gmail.com>
>> wrote:
>> >
>> > Hi,
>> > I know that there are many topics about scoring issues, but I didn't
>> find an
>> > answer in the topics.
>> > This is the problem :
>> > Imagine I'm a teacher, and I have to index all the results, comments
>> and
>> > score about students.
>> >
>> > Student :
>> > String name (eg : John Smith)
>> > String comments : (eg: John is a good student, but he needs to be
>> more self
>> > confident bla bla bla)
>> > float score (eg : 98)
>> >
>> > I have to index all the students and when I use the search class, I
>> want to
>> > get first the best students. So, if John Smith is a better student
>> than John
>> > Mickael, when I search "John" I want to have John Smith BEFORE John
>> Mickeal.
>> >
>> > To do that, I'm using BooleanQuery to search in name and comment
>> fields.
>> >
>> > First, I thought I could use the function Document.setBoost(float
>> boost)
>> > while indexing student, with boost = Student.score. But the result
>> was not
>> > what I was expected, it didn't work correctly.
>> >
>> > Then I thought I could use a FunctionQuery to search :
>> > FunctionQuery functionQuery = new FunctionQuery(new
>> > ReverseOrdFieldSource("score"));
>> > But the result was still incorrect.
>> >
>> > I don't know what I'm doing wrong. Could you help me to find a
>> solution ?
>> > Thank you :)
>> > --
>> > View this message in context: http://old.nabble.com/Boost-Problem-
>> %28again%29%2C-need-example-%21-tp27684388p27684388.html
>> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/Boost-Problem-%28again%29%2C-need-example-%21-tp27684388p27685594.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 11:26:31 2010
Return-Path: <java-user-return-45101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31311 invoked from network); 22 Feb 2010 11:26:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 11:26:31 -0000
Received: (qmail 71424 invoked by uid 500); 22 Feb 2010 11:26:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71348 invoked by uid 500); 22 Feb 2010 11:26:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71338 invoked by uid 99); 22 Feb 2010 11:26:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 11:26:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 11:26:21 +0000
Received: by bwz9 with SMTP id 9so1504993bwz.5
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 03:26:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=CkzFllR842zRc4cLk4iM8vFtrvL2a2te7+/eGdAQDsI=;
        b=cTg/z5ar2mdRsk229ATuIoDoUbAU5wcejjsm7rSjk+2pfWOBQhqCHIqE2zBAUwqG4P
         z37YtGrrwreDVHPnh0xtzfkiQU0gV931QOFsyQY2PoVpwhaJWW5KON+9C0SDQ+l2bhws
         /ILovmmmBmMT6WLMLDvlr7G5jA4G3HsBAMIL4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=JPc51lBYnJ6GafLE7eIwRZFzRu2/Kv1POdEMCSJR7cwKe3DMeTKhh2sNBsLSl0NDvE
         v159zVuZQCcWRWyT9ZHAlzxAUUzGE8fgb7ONhoAL4WXhUB+EoVIbzwmUAft+/14atLB1
         JaE4IlqfBWZE1aTYcQqNDpecVm6IvBAIJcKfM=
MIME-Version: 1.0
Received: by 10.204.141.135 with SMTP id m7mr891573bku.183.1266837959167; Mon, 
	22 Feb 2010 03:25:59 -0800 (PST)
In-Reply-To: <27685594.post@talk.nabble.com>
References: <27684388.post@talk.nabble.com> <8c4e68611002220132l6719a4b5s4b7e663e12cd0cf3@mail.gmail.com> 
	<000901cab3a3$7deb8a70$79c29f50$@de> <27685594.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 22 Feb 2010 11:25:39 +0000
Message-ID: <8c4e68611002220325y7001834dhd3a5eb2867f1109e@mail.gmail.com>
Subject: Re: Boost Problem (again), need example !
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

boostField needs to be indexed to be used in the FieldScoreQuery.

Are you now using one of the the latest releases that Uwe mentioned,
with fixes for CustomScoreQuery?

And unless you provide your own implementation of
CustomScoreQuery.customScore() I think that you are still not
guaranteed to get what you want since the default implementation is to
calculate the score as subQueryScore * valSrcScore.


--
Ian.


On Mon, Feb 22, 2010 at 11:00 AM, pdaures <patrick.daures@gmail.com> wrote:
>
> HI !
> Thank you for your help.
> I think I don't use CustomScoreQuery correctly when I do a "search".
>
> BooleanQuery combinedQuery =3D new BooleanQuery();
> combinedQuery.add(textQuery, Occur.MUST);
> combinedQuery.add(titleQuery, Occur.MUST);
>
> CustomScoreQuery customQuery =3D new CustomScoreQuery(combinedQuery,new
> FieldScoreQuery(BOOST_FIELD,Type.INT));
>
> indexSearcher.search(..., customQuery, ....).
>
> in order to index the BOOST_FIELD, I do that :
> Field boostField =3D new Field(BOOST_FIELD, Integer.toString(boost),
> Field.Store.YES, Field.Index.ANALYZED.NO);
>
>
> Is that correct ?
> Thank you
>
>
>
>
> Uwe Schindler wrote:
>>
>> It's CustomScoreQuery in 2.9 and 3.0.
>>
>> Please wait for 2.9.2 and 3.0.1 for an important API change in this
>> experimental query type to work correct with the new per-segment-search!
>> You can test the release artifacts of both new versions here:
>> http://people.apache.org/~uschindler/staging-area/lucene-292-301-take2-r=
ev912433/
>>
>> With e.g. ValueSourceQuery you can score your documents using a separate
>> numeric field from your documents (it uses FieldCache).
>>
>> Uwe
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>> -----Original Message-----
>>> From: Ian Lea [mailto:ian.lea@gmail.com]
>>> Sent: Monday, February 22, 2010 10:33 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Boost Problem (again), need example !
>>>
>>> Can't you simply sort by descending score (your score, not lucene's)?
>>> Seems to me that would give you what you are asking for.
>>>
>>> The setBoost() method is unlikely to work consistently because it only
>>> infuences the score rather than setting it. =A0If your John Mickeal doc
>>> happens to have a higher lucene score, because of the normal
>>> idf/tf/etc stuff, then the setBoost() with a higher value for John
>>> Smith may well not be enough to force John Smith to the top.
>>>
>>> I don't know enough about function queries to help you much there but
>>> FieldScoreQuery might work. =A0I can't see any sign of class
>>> FunctionQuery in the 3.0.0 core package so am not clear what that is.
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>>
>>> On Mon, Feb 22, 2010 at 8:54 AM, pdaures <patrick.daures@gmail.com>
>>> wrote:
>>> >
>>> > Hi,
>>> > I know that there are many topics about scoring issues, but I didn't
>>> find an
>>> > answer in the topics.
>>> > This is the problem :
>>> > Imagine I'm a teacher, and I have to index all the results, comments
>>> and
>>> > score about students.
>>> >
>>> > Student :
>>> > String name (eg : John Smith)
>>> > String comments : (eg: John is a good student, but he needs to be
>>> more self
>>> > confident bla bla bla)
>>> > float score (eg : 98)
>>> >
>>> > I have to index all the students and when I use the search class, I
>>> want to
>>> > get first the best students. So, if John Smith is a better student
>>> than John
>>> > Mickael, when I search "John" I want to have John Smith BEFORE John
>>> Mickeal.
>>> >
>>> > To do that, I'm using BooleanQuery to search in name and comment
>>> fields.
>>> >
>>> > First, I thought I could use the function Document.setBoost(float
>>> boost)
>>> > while indexing student, with boost =3D Student.score. But the result
>>> was not
>>> > what I was expected, it didn't work correctly.
>>> >
>>> > Then I thought I could use a FunctionQuery to search :
>>> > FunctionQuery functionQuery =3D new FunctionQuery(new
>>> > ReverseOrdFieldSource("score"));
>>> > But the result was still incorrect.
>>> >
>>> > I don't know what I'm doing wrong. Could you help me to find a
>>> solution ?
>>> > Thank you :)
>>> > --
>>> > View this message in context: http://old.nabble.com/Boost-Problem-
>>> %28again%29%2C-need-example-%21-tp27684388p27684388.html
>>> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>> >
>>> >
>>> > ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >
>>> >
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://old.nabble.com/Boost-Problem-%28agai=
n%29%2C-need-example-%21-tp27684388p27685594.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 11:35:34 2010
Return-Path: <java-user-return-45102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33879 invoked from network); 22 Feb 2010 11:35:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 11:35:34 -0000
Received: (qmail 81732 invoked by uid 500); 22 Feb 2010 11:35:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81673 invoked by uid 500); 22 Feb 2010 11:35:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81658 invoked by uid 99); 22 Feb 2010 11:35:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 11:35:31 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 11:35:22 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id E2241D3600C
	for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 12:35:01 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id lOvL-9zllRm8 for <java-user@lucene.apache.org>;
	Mon, 22 Feb 2010 12:34:59 +0100 (CET)
Received: from VEGA (gate2.marum.de [134.102.237.2])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id E5C59D36008
	for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 12:34:58 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <27684388.post@talk.nabble.com> <8c4e68611002220132l6719a4b5s4b7e663e12cd0cf3@mail.gmail.com> 	<000901cab3a3$7deb8a70$79c29f50$@de> <27685594.post@talk.nabble.com> <8c4e68611002220325y7001834dhd3a5eb2867f1109e@mail.gmail.com>
In-Reply-To: <8c4e68611002220325y7001834dhd3a5eb2867f1109e@mail.gmail.com>
Subject: RE: Boost Problem (again), need example !
Date: Mon, 22 Feb 2010 12:35:07 +0100
Message-ID: <001001cab3b3$15e72c30$41b58490$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqzselovIIi3plKR62IyQc/QLqvsQAAKOHA
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

The simple fix for that is to wrap the subQuery using: new =
ConstantScoreQuery(new QueryWrapperFilter(query)) - after that its score =
is constant and the ValueSource only scores.

I recommend to use NumericField for indexing this boost (no storing =
needed, only indexing, precisionStep=3DInteger.MAX_VALUE). Else (if =
using standard Field) the boost field does not need to be "stored", it =
must be indexed as NOT_ANALYZED.=20

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Ian Lea [mailto:ian.lea@gmail.com]
> Sent: Monday, February 22, 2010 12:26 PM
> To: java-user@lucene.apache.org
> Subject: Re: Boost Problem (again), need example !
>=20
> boostField needs to be indexed to be used in the FieldScoreQuery.
>=20
> Are you now using one of the the latest releases that Uwe mentioned,
> with fixes for CustomScoreQuery?
>=20
> And unless you provide your own implementation of
> CustomScoreQuery.customScore() I think that you are still not
> guaranteed to get what you want since the default implementation is to
> calculate the score as subQueryScore * valSrcScore.
>=20
>=20
> --
> Ian.
>=20
>=20
> On Mon, Feb 22, 2010 at 11:00 AM, pdaures <patrick.daures@gmail.com>
> wrote:
> >
> > HI !
> > Thank you for your help.
> > I think I don't use CustomScoreQuery correctly when I do a "search".
> >
> > BooleanQuery combinedQuery =3D new BooleanQuery();
> > combinedQuery.add(textQuery, Occur.MUST);
> > combinedQuery.add(titleQuery, Occur.MUST);
> >
> > CustomScoreQuery customQuery =3D new =
CustomScoreQuery(combinedQuery,new
> > FieldScoreQuery(BOOST_FIELD,Type.INT));
> >
> > indexSearcher.search(..., customQuery, ....).
> >
> > in order to index the BOOST_FIELD, I do that :
> > Field boostField =3D new Field(BOOST_FIELD, Integer.toString(boost),
> > Field.Store.YES, Field.Index.ANALYZED.NO);
> >
> >
> > Is that correct ?
> > Thank you
> >
> >
> >
> >
> > Uwe Schindler wrote:
> >>
> >> It's CustomScoreQuery in 2.9 and 3.0.
> >>
> >> Please wait for 2.9.2 and 3.0.1 for an important API change in this
> >> experimental query type to work correct with the new per-segment-
> search!
> >> You can test the release artifacts of both new versions here:
> >> http://people.apache.org/~uschindler/staging-area/lucene-292-301-
> take2-rev912433/
> >>
> >> With e.g. ValueSourceQuery you can score your documents using a
> separate
> >> numeric field from your documents (it uses FieldCache).
> >>
> >> Uwe
> >>
> >> -----
> >> Uwe Schindler
> >> H.-H.-Meier-Allee 63, D-28213 Bremen
> >> http://www.thetaphi.de
> >> eMail: uwe@thetaphi.de
> >>
> >>> -----Original Message-----
> >>> From: Ian Lea [mailto:ian.lea@gmail.com]
> >>> Sent: Monday, February 22, 2010 10:33 AM
> >>> To: java-user@lucene.apache.org
> >>> Subject: Re: Boost Problem (again), need example !
> >>>
> >>> Can't you simply sort by descending score (your score, not
> lucene's)?
> >>> Seems to me that would give you what you are asking for.
> >>>
> >>> The setBoost() method is unlikely to work consistently because it
> only
> >>> infuences the score rather than setting it.  If your John Mickeal
> doc
> >>> happens to have a higher lucene score, because of the normal
> >>> idf/tf/etc stuff, then the setBoost() with a higher value for John
> >>> Smith may well not be enough to force John Smith to the top.
> >>>
> >>> I don't know enough about function queries to help you much there
> but
> >>> FieldScoreQuery might work.  I can't see any sign of class
> >>> FunctionQuery in the 3.0.0 core package so am not clear what that
> is.
> >>>
> >>>
> >>> --
> >>> Ian.
> >>>
> >>>
> >>>
> >>> On Mon, Feb 22, 2010 at 8:54 AM, pdaures =
<patrick.daures@gmail.com>
> >>> wrote:
> >>> >
> >>> > Hi,
> >>> > I know that there are many topics about scoring issues, but I
> didn't
> >>> find an
> >>> > answer in the topics.
> >>> > This is the problem :
> >>> > Imagine I'm a teacher, and I have to index all the results,
> comments
> >>> and
> >>> > score about students.
> >>> >
> >>> > Student :
> >>> > String name (eg : John Smith)
> >>> > String comments : (eg: John is a good student, but he needs to =
be
> >>> more self
> >>> > confident bla bla bla)
> >>> > float score (eg : 98)
> >>> >
> >>> > I have to index all the students and when I use the search =
class,
> I
> >>> want to
> >>> > get first the best students. So, if John Smith is a better
> student
> >>> than John
> >>> > Mickael, when I search "John" I want to have John Smith BEFORE
> John
> >>> Mickeal.
> >>> >
> >>> > To do that, I'm using BooleanQuery to search in name and comment
> >>> fields.
> >>> >
> >>> > First, I thought I could use the function =
Document.setBoost(float
> >>> boost)
> >>> > while indexing student, with boost =3D Student.score. But the
> result
> >>> was not
> >>> > what I was expected, it didn't work correctly.
> >>> >
> >>> > Then I thought I could use a FunctionQuery to search :
> >>> > FunctionQuery functionQuery =3D new FunctionQuery(new
> >>> > ReverseOrdFieldSource("score"));
> >>> > But the result was still incorrect.
> >>> >
> >>> > I don't know what I'm doing wrong. Could you help me to find a
> >>> solution ?
> >>> > Thank you :)
> >>> > --
> >>> > View this message in context: http://old.nabble.com/Boost-
> Problem-
> >>> %28again%29%2C-need-example-%21-tp27684388p27684388.html
> >>> > Sent from the Lucene - Java Users mailing list archive at
> Nabble.com.
> >>> >
> >>> >
> >>> > =
-----------------------------------------------------------------
> ----
> >>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> > For additional commands, e-mail: =
java-user-help@lucene.apache.org
> >>> >
> >>> >
> >>>
> >>> =
-------------------------------------------------------------------
> --
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >> =
--------------------------------------------------------------------
> -
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> > --
> > View this message in context: http://old.nabble.com/Boost-Problem-
> %28again%29%2C-need-example-%21-tp27684388p27685594.html
> > Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 13:20:25 2010
Return-Path: <java-user-return-45103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73991 invoked from network); 22 Feb 2010 13:20:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 13:20:25 -0000
Received: (qmail 98873 invoked by uid 500); 22 Feb 2010 13:20:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98797 invoked by uid 500); 22 Feb 2010 13:20:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98787 invoked by uid 99); 22 Feb 2010 13:20:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 13:20:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 13:20:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NjYCW-0001mJ-Ki
	for java-user@lucene.apache.org; Mon, 22 Feb 2010 05:19:52 -0800
Message-ID: <27687065.post@talk.nabble.com>
Date: Mon, 22 Feb 2010 05:19:52 -0800 (PST)
From: pdaures <patrick.daures@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Boost Problem (again), need example !
In-Reply-To: <001001cab3b3$15e72c30$41b58490$@de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: patrick.daures@gmail.com
References: <27684388.post@talk.nabble.com> <8c4e68611002220132l6719a4b5s4b7e663e12cd0cf3@mail.gmail.com> <000901cab3a3$7deb8a70$79c29f50$@de> <27685594.post@talk.nabble.com> <8c4e68611002220325y7001834dhd3a5eb2867f1109e@mail.gmail.com> <001001cab3b3$15e72c30$41b58490$@de>
X-Virus-Checked: Checked by ClamAV on apache.org


It WORKS !

Thank you so much, I spent a lot of time trying to do that, thank you again
!


Uwe Schindler wrote:
> 
> The simple fix for that is to wrap the subQuery using: new
> ConstantScoreQuery(new QueryWrapperFilter(query)) - after that its score
> is constant and the ValueSource only scores.
> 
> I recommend to use NumericField for indexing this boost (no storing
> needed, only indexing, precisionStep=Integer.MAX_VALUE). Else (if using
> standard Field) the boost field does not need to be "stored", it must be
> indexed as NOT_ANALYZED. 
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
> 
>> -----Original Message-----
>> From: Ian Lea [mailto:ian.lea@gmail.com]
>> Sent: Monday, February 22, 2010 12:26 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Boost Problem (again), need example !
>> 
>> boostField needs to be indexed to be used in the FieldScoreQuery.
>> 
>> Are you now using one of the the latest releases that Uwe mentioned,
>> with fixes for CustomScoreQuery?
>> 
>> And unless you provide your own implementation of
>> CustomScoreQuery.customScore() I think that you are still not
>> guaranteed to get what you want since the default implementation is to
>> calculate the score as subQueryScore * valSrcScore.
>> 
>> 
>> --
>> Ian.
>> 
>> 
>> On Mon, Feb 22, 2010 at 11:00 AM, pdaures <patrick.daures@gmail.com>
>> wrote:
>> >
>> > HI !
>> > Thank you for your help.
>> > I think I don't use CustomScoreQuery correctly when I do a "search".
>> >
>> > BooleanQuery combinedQuery = new BooleanQuery();
>> > combinedQuery.add(textQuery, Occur.MUST);
>> > combinedQuery.add(titleQuery, Occur.MUST);
>> >
>> > CustomScoreQuery customQuery = new CustomScoreQuery(combinedQuery,new
>> > FieldScoreQuery(BOOST_FIELD,Type.INT));
>> >
>> > indexSearcher.search(..., customQuery, ....).
>> >
>> > in order to index the BOOST_FIELD, I do that :
>> > Field boostField = new Field(BOOST_FIELD, Integer.toString(boost),
>> > Field.Store.YES, Field.Index.ANALYZED.NO);
>> >
>> >
>> > Is that correct ?
>> > Thank you
>> >
>> >
>> >
>> >
>> > Uwe Schindler wrote:
>> >>
>> >> It's CustomScoreQuery in 2.9 and 3.0.
>> >>
>> >> Please wait for 2.9.2 and 3.0.1 for an important API change in this
>> >> experimental query type to work correct with the new per-segment-
>> search!
>> >> You can test the release artifacts of both new versions here:
>> >> http://people.apache.org/~uschindler/staging-area/lucene-292-301-
>> take2-rev912433/
>> >>
>> >> With e.g. ValueSourceQuery you can score your documents using a
>> separate
>> >> numeric field from your documents (it uses FieldCache).
>> >>
>> >> Uwe
>> >>
>> >> -----
>> >> Uwe Schindler
>> >> H.-H.-Meier-Allee 63, D-28213 Bremen
>> >> http://www.thetaphi.de
>> >> eMail: uwe@thetaphi.de
>> >>
>> >>> -----Original Message-----
>> >>> From: Ian Lea [mailto:ian.lea@gmail.com]
>> >>> Sent: Monday, February 22, 2010 10:33 AM
>> >>> To: java-user@lucene.apache.org
>> >>> Subject: Re: Boost Problem (again), need example !
>> >>>
>> >>> Can't you simply sort by descending score (your score, not
>> lucene's)?
>> >>> Seems to me that would give you what you are asking for.
>> >>>
>> >>> The setBoost() method is unlikely to work consistently because it
>> only
>> >>> infuences the score rather than setting it.  If your John Mickeal
>> doc
>> >>> happens to have a higher lucene score, because of the normal
>> >>> idf/tf/etc stuff, then the setBoost() with a higher value for John
>> >>> Smith may well not be enough to force John Smith to the top.
>> >>>
>> >>> I don't know enough about function queries to help you much there
>> but
>> >>> FieldScoreQuery might work.  I can't see any sign of class
>> >>> FunctionQuery in the 3.0.0 core package so am not clear what that
>> is.
>> >>>
>> >>>
>> >>> --
>> >>> Ian.
>> >>>
>> >>>
>> >>>
>> >>> On Mon, Feb 22, 2010 at 8:54 AM, pdaures <patrick.daures@gmail.com>
>> >>> wrote:
>> >>> >
>> >>> > Hi,
>> >>> > I know that there are many topics about scoring issues, but I
>> didn't
>> >>> find an
>> >>> > answer in the topics.
>> >>> > This is the problem :
>> >>> > Imagine I'm a teacher, and I have to index all the results,
>> comments
>> >>> and
>> >>> > score about students.
>> >>> >
>> >>> > Student :
>> >>> > String name (eg : John Smith)
>> >>> > String comments : (eg: John is a good student, but he needs to be
>> >>> more self
>> >>> > confident bla bla bla)
>> >>> > float score (eg : 98)
>> >>> >
>> >>> > I have to index all the students and when I use the search class,
>> I
>> >>> want to
>> >>> > get first the best students. So, if John Smith is a better
>> student
>> >>> than John
>> >>> > Mickael, when I search "John" I want to have John Smith BEFORE
>> John
>> >>> Mickeal.
>> >>> >
>> >>> > To do that, I'm using BooleanQuery to search in name and comment
>> >>> fields.
>> >>> >
>> >>> > First, I thought I could use the function Document.setBoost(float
>> >>> boost)
>> >>> > while indexing student, with boost = Student.score. But the
>> result
>> >>> was not
>> >>> > what I was expected, it didn't work correctly.
>> >>> >
>> >>> > Then I thought I could use a FunctionQuery to search :
>> >>> > FunctionQuery functionQuery = new FunctionQuery(new
>> >>> > ReverseOrdFieldSource("score"));
>> >>> > But the result was still incorrect.
>> >>> >
>> >>> > I don't know what I'm doing wrong. Could you help me to find a
>> >>> solution ?
>> >>> > Thank you :)
>> >>> > --
>> >>> > View this message in context: http://old.nabble.com/Boost-
>> Problem-
>> >>> %28again%29%2C-need-example-%21-tp27684388p27684388.html
>> >>> > Sent from the Lucene - Java Users mailing list archive at
>> Nabble.com.
>> >>> >
>> >>> >
>> >>> > -----------------------------------------------------------------
>> ----
>> >>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>> >
>> >>> >
>> >>>
>> >>> -------------------------------------------------------------------
>> --
>> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >>
>> >> --------------------------------------------------------------------
>> -
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >>
>> >
>> > --
>> > View this message in context: http://old.nabble.com/Boost-Problem-
>> %28again%29%2C-need-example-%21-tp27684388p27685594.html
>> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/Boost-Problem-%28again%29%2C-need-example-%21-tp27684388p27687065.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 13:48:17 2010
Return-Path: <java-user-return-45104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88741 invoked from network); 22 Feb 2010 13:48:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 13:48:17 -0000
Received: (qmail 26247 invoked by uid 500); 22 Feb 2010 13:48:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26178 invoked by uid 500); 22 Feb 2010 13:48:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26168 invoked by uid 99); 22 Feb 2010 13:48:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 13:48:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of peterlkeegan@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 13:48:06 +0000
Received: by pwi6 with SMTP id 6so2418467pwi.35
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 05:47:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=JMxavQsE0Cm3fXcc63JfwyA5HKE0mYZSiAKg1AoQbBo=;
        b=rQlQJNlfqtOfnnAkr+5HNYXsbObdHjnhc04L2DJeiDmhi5zTmdMsA2fNsHZ8rmKBie
         R1vudLu0YZZ9ZgBBKHQSRhJMGik71+PS3RMVCLsNLkw0HMze12WDSc3J/f3+FlxW4FFL
         yTD67PRamlySxfQUowZ4vuFklENu3GwZk3lOQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=P07hB5GYUAjrn70VBLElCNOqXcwpcbLgQQ7jXO11b+i9R1nro7q2FfJlgezXM4/6E1
         pDBkjLQ+JZqMsx/tb4YuksHwDrRJVvTnKXhpC3l4i7ZiPIjjdeEPPWRQ7iXTDIYeSrGr
         hPK7b3Xlfo4gbU20+qyJAC3+XWIGSexF1wtV4=
MIME-Version: 1.0
Received: by 10.142.61.23 with SMTP id j23mr1597993wfa.322.1266846465238; Mon, 
	22 Feb 2010 05:47:45 -0800 (PST)
In-Reply-To: <e994873a1002171740n316fd47av630f6803f68a0076@mail.gmail.com>
References: <e994873a1002150729k7a008cd4s5b2ad92510264f8c@mail.gmail.com>
	 <18BA7A25-1EEA-4819-89E5-0D6AF04E1A64@apache.org>
	 <e994873a1002171740n316fd47av630f6803f68a0076@mail.gmail.com>
Date: Mon, 22 Feb 2010 08:47:45 -0500
Message-ID: <e994873a1002220547v7767b9b3h4d374c5597023723@mail.gmail.com>
Subject: Re: PayloadNearSpanScorer explain method
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e1f73d8ba5c4048030ad93
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e1f73d8ba5c4048030ad93
Content-Type: text/plain; charset=ISO-8859-1

Patch is in JIRA: LUCENE-2272

On Wed, Feb 17, 2010 at 8:40 PM, Peter Keegan <peterlkeegan@gmail.com>wrote:

> Yes, I will provide a patch. Our new proxy server has broken my access to
> the svn repository, though :-(
>
>
> On Tue, Feb 16, 2010 at 1:12 PM, Grant Ingersoll <gsingers@apache.org>wrote:
>
>> That sounds reasonable.  Patch?
>>
>> On Feb 15, 2010, at 10:29 AM, Peter Keegan wrote:
>>
>> > The 'explain' method in PayloadNearSpanScorer assumes the
>> > AveragePayloadFunction was used. I don't see an easy way to override
>> this
>> > because 'payloadsSeen' and 'payloadScore' are private/protected. It
>> seems
>> > like the 'PayloadFunction' interface should have an 'explain' method
>> that
>> > the Scorer could call. Any thoughts?
>> >
>> > Peter
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--001636e1f73d8ba5c4048030ad93--

From java-user-return-45105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 14:08:31 2010
Return-Path: <java-user-return-45105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99674 invoked from network); 22 Feb 2010 14:08:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 14:08:31 -0000
Received: (qmail 58621 invoked by uid 500); 22 Feb 2010 14:08:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58559 invoked by uid 500); 22 Feb 2010 14:08:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58549 invoked by uid 99); 22 Feb 2010 14:08:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 14:08:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 14:08:21 +0000
Received: by ey-out-2122.google.com with SMTP id d26so560418eyd.3
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 06:07:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Q51zn29aM754ZIvYFjDy/ouBjrdkBy8WAwDTCxAwG4k=;
        b=Y/lUacSOoVl/BvJzApPvJs/46vQUxIVJ1mbBu5HkEBoRIt9uG7LF6BFfLZ9TWrr96R
         urt8Y0t56R2Lot/+ViYmSypTFIii9doQdxLZUweN3xrwwU93XyTgozc7VE1ta1FG2gAm
         hQ3iWBlFXMFWEdPBYap6wPTLtzU/HYOOGpBso=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=h3izuMz2hIyFMp4tzLRFeoqvQe2HZ0gigU9sgwQ0RqD2UkktgO3rVsZi3xeWXQ/J9W
         xf7gJlwlX1QxeyCACct3bZdjtu+uPC8jCPL2fzadUCHu7KiV0l6NrNPABDj0VPf8Z1D5
         EJeOFlNcTr4dbWwrWcddduCtz+bzbEjPaFhGY=
MIME-Version: 1.0
Received: by 10.216.91.18 with SMTP id g18mr1012388wef.203.1266847678843; Mon, 
	22 Feb 2010 06:07:58 -0800 (PST)
In-Reply-To: <27687065.post@talk.nabble.com>
References: <27684388.post@talk.nabble.com>
	 <8c4e68611002220132l6719a4b5s4b7e663e12cd0cf3@mail.gmail.com>
	 <000901cab3a3$7deb8a70$79c29f50$@de> <27685594.post@talk.nabble.com>
	 <8c4e68611002220325y7001834dhd3a5eb2867f1109e@mail.gmail.com>
	 <001001cab3b3$15e72c30$41b58490$@de> <27687065.post@talk.nabble.com>
Date: Mon, 22 Feb 2010 09:07:58 -0500
Message-ID: <359a92831002220607x4fea1f0g566f25504adfe574@mail.gmail.com>
Subject: Re: Boost Problem (again), need example !
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d58f7fe1cf83048030f5a4

--0016e6d58f7fe1cf83048030f5a4
Content-Type: text/plain; charset=ISO-8859-1

I still don't understand why a simple sort as suggested by Ian wouldn't
work.
It'd be a lot more reliable than fiddling with doc scores if you want a
strict
ordering on a particular field (make sure it's untokenized though).

Erick

On Mon, Feb 22, 2010 at 8:19 AM, pdaures <patrick.daures@gmail.com> wrote:

>
> It WORKS !
>
> Thank you so much, I spent a lot of time trying to do that, thank you again
> !
>
>
> Uwe Schindler wrote:
> >
> > The simple fix for that is to wrap the subQuery using: new
> > ConstantScoreQuery(new QueryWrapperFilter(query)) - after that its score
> > is constant and the ValueSource only scores.
> >
> > I recommend to use NumericField for indexing this boost (no storing
> > needed, only indexing, precisionStep=Integer.MAX_VALUE). Else (if using
> > standard Field) the boost field does not need to be "stored", it must be
> > indexed as NOT_ANALYZED.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> >> -----Original Message-----
> >> From: Ian Lea [mailto:ian.lea@gmail.com]
> >> Sent: Monday, February 22, 2010 12:26 PM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Boost Problem (again), need example !
> >>
> >> boostField needs to be indexed to be used in the FieldScoreQuery.
> >>
> >> Are you now using one of the the latest releases that Uwe mentioned,
> >> with fixes for CustomScoreQuery?
> >>
> >> And unless you provide your own implementation of
> >> CustomScoreQuery.customScore() I think that you are still not
> >> guaranteed to get what you want since the default implementation is to
> >> calculate the score as subQueryScore * valSrcScore.
> >>
> >>
> >> --
> >> Ian.
> >>
> >>
> >> On Mon, Feb 22, 2010 at 11:00 AM, pdaures <patrick.daures@gmail.com>
> >> wrote:
> >> >
> >> > HI !
> >> > Thank you for your help.
> >> > I think I don't use CustomScoreQuery correctly when I do a "search".
> >> >
> >> > BooleanQuery combinedQuery = new BooleanQuery();
> >> > combinedQuery.add(textQuery, Occur.MUST);
> >> > combinedQuery.add(titleQuery, Occur.MUST);
> >> >
> >> > CustomScoreQuery customQuery = new CustomScoreQuery(combinedQuery,new
> >> > FieldScoreQuery(BOOST_FIELD,Type.INT));
> >> >
> >> > indexSearcher.search(..., customQuery, ....).
> >> >
> >> > in order to index the BOOST_FIELD, I do that :
> >> > Field boostField = new Field(BOOST_FIELD, Integer.toString(boost),
> >> > Field.Store.YES, Field.Index.ANALYZED.NO);
> >> >
> >> >
> >> > Is that correct ?
> >> > Thank you
> >> >
> >> >
> >> >
> >> >
> >> > Uwe Schindler wrote:
> >> >>
> >> >> It's CustomScoreQuery in 2.9 and 3.0.
> >> >>
> >> >> Please wait for 2.9.2 and 3.0.1 for an important API change in this
> >> >> experimental query type to work correct with the new per-segment-
> >> search!
> >> >> You can test the release artifacts of both new versions here:
> >> >> http://people.apache.org/~uschindler/staging-area/lucene-292-301-
> >> take2-rev912433/
> >> >>
> >> >> With e.g. ValueSourceQuery you can score your documents using a
> >> separate
> >> >> numeric field from your documents (it uses FieldCache).
> >> >>
> >> >> Uwe
> >> >>
> >> >> -----
> >> >> Uwe Schindler
> >> >> H.-H.-Meier-Allee 63, D-28213 Bremen
> >> >> http://www.thetaphi.de
> >> >> eMail: uwe@thetaphi.de
> >> >>
> >> >>> -----Original Message-----
> >> >>> From: Ian Lea [mailto:ian.lea@gmail.com]
> >> >>> Sent: Monday, February 22, 2010 10:33 AM
> >> >>> To: java-user@lucene.apache.org
> >> >>> Subject: Re: Boost Problem (again), need example !
> >> >>>
> >> >>> Can't you simply sort by descending score (your score, not
> >> lucene's)?
> >> >>> Seems to me that would give you what you are asking for.
> >> >>>
> >> >>> The setBoost() method is unlikely to work consistently because it
> >> only
> >> >>> infuences the score rather than setting it.  If your John Mickeal
> >> doc
> >> >>> happens to have a higher lucene score, because of the normal
> >> >>> idf/tf/etc stuff, then the setBoost() with a higher value for John
> >> >>> Smith may well not be enough to force John Smith to the top.
> >> >>>
> >> >>> I don't know enough about function queries to help you much there
> >> but
> >> >>> FieldScoreQuery might work.  I can't see any sign of class
> >> >>> FunctionQuery in the 3.0.0 core package so am not clear what that
> >> is.
> >> >>>
> >> >>>
> >> >>> --
> >> >>> Ian.
> >> >>>
> >> >>>
> >> >>>
> >> >>> On Mon, Feb 22, 2010 at 8:54 AM, pdaures <patrick.daures@gmail.com>
> >> >>> wrote:
> >> >>> >
> >> >>> > Hi,
> >> >>> > I know that there are many topics about scoring issues, but I
> >> didn't
> >> >>> find an
> >> >>> > answer in the topics.
> >> >>> > This is the problem :
> >> >>> > Imagine I'm a teacher, and I have to index all the results,
> >> comments
> >> >>> and
> >> >>> > score about students.
> >> >>> >
> >> >>> > Student :
> >> >>> > String name (eg : John Smith)
> >> >>> > String comments : (eg: John is a good student, but he needs to be
> >> >>> more self
> >> >>> > confident bla bla bla)
> >> >>> > float score (eg : 98)
> >> >>> >
> >> >>> > I have to index all the students and when I use the search class,
> >> I
> >> >>> want to
> >> >>> > get first the best students. So, if John Smith is a better
> >> student
> >> >>> than John
> >> >>> > Mickael, when I search "John" I want to have John Smith BEFORE
> >> John
> >> >>> Mickeal.
> >> >>> >
> >> >>> > To do that, I'm using BooleanQuery to search in name and comment
> >> >>> fields.
> >> >>> >
> >> >>> > First, I thought I could use the function Document.setBoost(float
> >> >>> boost)
> >> >>> > while indexing student, with boost = Student.score. But the
> >> result
> >> >>> was not
> >> >>> > what I was expected, it didn't work correctly.
> >> >>> >
> >> >>> > Then I thought I could use a FunctionQuery to search :
> >> >>> > FunctionQuery functionQuery = new FunctionQuery(new
> >> >>> > ReverseOrdFieldSource("score"));
> >> >>> > But the result was still incorrect.
> >> >>> >
> >> >>> > I don't know what I'm doing wrong. Could you help me to find a
> >> >>> solution ?
> >> >>> > Thank you :)
> >> >>> > --
> >> >>> > View this message in context: http://old.nabble.com/Boost-
> >> Problem-
> >> >>> %28again%29%2C-need-example-%21-tp27684388p27684388.html
> >> >>> > Sent from the Lucene - Java Users mailing list archive at
> >> Nabble.com.
> >> >>> >
> >> >>> >
> >> >>> > -----------------------------------------------------------------
> >> ----
> >> >>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >>> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>> >
> >> >>> >
> >> >>>
> >> >>> -------------------------------------------------------------------
> >> --
> >> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >>
> >> >> --------------------------------------------------------------------
> >> -
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >>
> >> >
> >> > --
> >> > View this message in context: http://old.nabble.com/Boost-Problem-
> >> %28again%29%2C-need-example-%21-tp27684388p27685594.html
> >> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >> >
> >> >
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://old.nabble.com/Boost-Problem-%28again%29%2C-need-example-%21-tp27684388p27687065.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d58f7fe1cf83048030f5a4--

From java-user-return-45106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 15:22:24 2010
Return-Path: <java-user-return-45106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36292 invoked from network); 22 Feb 2010 15:22:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 15:22:24 -0000
Received: (qmail 65630 invoked by uid 500); 22 Feb 2010 15:22:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65559 invoked by uid 500); 22 Feb 2010 15:22:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65549 invoked by uid 99); 22 Feb 2010 15:22:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 15:22:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 15:22:14 +0000
Received: by bwz9 with SMTP id 9so1698753bwz.5
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 07:21:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=Nz8ya2auM1rV95+mmmiT7a5e8ohxBZ3DV92kZ+Tk6bw=;
        b=f70EK8hCU+b76uzsjHth1gQgiqRhVdnbAw8shTc1X5VB2/7VwPGVXDn7JMuwC5zvyz
         hc7tQhL+zIXrzoQt4E+nM0l+pLx+PuEzir71UGe0pCGdqAYsm8Umqgsm8xOEkYnY0ZKv
         sjXWESByDHSjt6uUkp0LHFZvxSXctEu5aZZ6M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=mCJWc6zgrBHKtdTTqfAFj+Pa53lFwAKBZpPyWtF8/KgFyG73COUAMaS8H68cJuB3sz
         lPvAyGYtq3VY4zqyn7sI1hABzlXSz0Yc3FBh+xNQXMTsmALb9qapMLBzjPIp3MjXq7gn
         +p3RKwwPJSd4JANMBJ8SjGkZ2sz/ZcRWx8Ztg=
MIME-Version: 1.0
Received: by 10.204.4.207 with SMTP id 15mr2047536bks.60.1266852113728; Mon, 
	22 Feb 2010 07:21:53 -0800 (PST)
In-Reply-To: <171c79531002220226l1ba194c8k748622c2adc7bd2@mail.gmail.com>
References: <171c79531002220226l1ba194c8k748622c2adc7bd2@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 22 Feb 2010 15:21:33 +0000
Message-ID: <8c4e68611002220721w6bbb09d5u70af98e27b9994f7@mail.gmail.com>
Subject: Re: range of scores : queryNorm()
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

> I have observed that even if we change boosting
> drastically, scores are being normalized at the end because of
> queryNorm value. Is there anything ( regarding to the queryNorm) that
> we can rely on ?

Dunno.

> like score will always be under 10

No.

> or some fixed  value ?

I think not.

> The main objective is to provide scores in a fixed range to
> the partner. So have you been experienced anything like this? Is it
> possible to do so ?.

You could normalize the scores yourself, probably most easily in a
pass through them once the search has completed.  Beware of comparing
scores across searches and indexes.

> Have you been experienced any strange situation like for a
> particular query, result scores were really high compared to routine?

Not me, but I rarely look at scores directly.  I just care that the
right docs get found.


--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 15:33:28 2010
Return-Path: <java-user-return-45107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42726 invoked from network); 22 Feb 2010 15:33:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 15:33:28 -0000
Received: (qmail 94073 invoked by uid 500); 22 Feb 2010 15:33:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94018 invoked by uid 500); 22 Feb 2010 15:33:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94007 invoked by uid 99); 22 Feb 2010 15:33:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 15:33:25 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 15:33:17 +0000
Received: by wwb34 with SMTP id 34so391133wwb.35
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 07:32:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=My3wfzKkuCJY9Ka473xHJ9NSKXWHYz2kOEzkrpiW6Hc=;
        b=MmykbTnU47R7H7ZUTZzSU532OSShLXeM/G5qZd95Cj6ohAkurW2+GfxBohIDBUpmFg
         X67m5q5IC0zmtTihT/cnMds+jaU9o+PEpbU220MmLK7wLeBC+Zrk0S+yHRwLEf61NrbJ
         6lyEylnsdn2SIOMIyMyIwr45CXs+exbBEQa+k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MK29FCOJ6sF+b1IaH4wYth6DIW3sm/hMMkLbWqfpOezZX3xyzjGPVSbGjSSkOA6mJG
         XWiaEcI4azKCZYuhwQ3tOrv5aW8AWGozLdzm1I7buNFcQr3T4b6FZtFxd9wv+Mv1sUbJ
         nTGMlcngB1I0b1btI4KiKDuy/swtlfLXkP82E=
MIME-Version: 1.0
Received: by 10.216.88.202 with SMTP id a52mr1282395wef.101.1266852777011; 
	Mon, 22 Feb 2010 07:32:57 -0800 (PST)
In-Reply-To: <171c79531002220226l1ba194c8k748622c2adc7bd2@mail.gmail.com>
References: <171c79531002220226l1ba194c8k748622c2adc7bd2@mail.gmail.com>
Date: Mon, 22 Feb 2010 10:32:56 -0500
Message-ID: <359a92831002220732o995b4cbn2aa47a9ba79d111b@mail.gmail.com>
Subject: Re: range of scores : queryNorm()
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d99acec1adeb0480322596
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d99acec1adeb0480322596
Content-Type: text/plain; charset=ISO-8859-1

Could you back up a step and tell us what the upper-level
task you're trying to accomplish is? That is, why the partner
wants the number?

Because the raw score in Lucene is only relevant within that
single query, and then only for ranking. The normalized score
*is* in a fixed range already, between 0 and 1. Would it serve
to just modify that and send it back to the partner?

Erick

On Mon, Feb 22, 2010 at 5:26 AM, Smith G <gudumba.smith@gmail.com> wrote:

> Hello ,
>          I have observed that even if we change boosting
> drastically, scores are being normalized at the end because of
> queryNorm value. Is there anything ( regarding to the queryNorm) that
> we can rely on ? like score will always be under 10 or some fixed
> value ? The main objective is to provide scores in a fixed range to
> the partner. So have you been experienced anything like this? Is it
> possible to do so ?.
>   Have you been experienced any strange situation like for a
> particular query, result scores were really high compared to routine?
> if yes,I would like to know  the factor that effected scores
> drastically, because it may help me to proceed or understand the
> cases.
> Thanks
>
> (NOTE : I am sorry, I have also posted in solr group, there were no
> replies and also I feel this place is even more apt.).
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d99acec1adeb0480322596--

From java-user-return-45108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 16:30:12 2010
Return-Path: <java-user-return-45108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63995 invoked from network); 22 Feb 2010 16:30:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 16:30:12 -0000
Received: (qmail 78987 invoked by uid 500); 22 Feb 2010 16:30:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78911 invoked by uid 500); 22 Feb 2010 16:30:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78896 invoked by uid 99); 22 Feb 2010 16:30:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 16:30:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nigelspleen@gmail.com designates 216.239.58.184 as permitted sender)
Received: from [216.239.58.184] (HELO gv-out-0910.google.com) (216.239.58.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 16:30:02 +0000
Received: by gv-out-0910.google.com with SMTP id n40so64799gve.23
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 08:29:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=lKXQsr9FMh+Ztnmm3QfBEK2NiQRow/l7iXaFw2rmU84=;
        b=Q+nn+BE60w0iyAEv+6h/FPKCK2o7Cve5N/FodNwWj6lDKewcW9v9MpTdP4IVAvuK5x
         nznWMLNRZc5stNd99kt8l735ywy1c/Fie8QinQDDUba6vMVfNr9jaCGMUXPo/Y4Fa5wf
         5XgNjgkLasYswdI1r7NkUB8WFfJpjPbJ66jOU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=H6uVcuOjZEEWb/V1VaNbp2bjVv+z3lHTXvrjsxeiJQR6/1rr1szp6r+1zlebTpA5d8
         5SzkTcTKKprMPiXE7+hda1fYiHa+U2ZC/U3OnD1eqndgwwYBVYRL9TWfWCZeDLnVqaRO
         QnZTm3HvwAOLDVTUuwWKz5gDUskqwT8/ntwOM=
MIME-Version: 1.0
Received: by 10.102.169.17 with SMTP id r17mr60346mue.123.1266856181371; Mon, 
	22 Feb 2010 08:29:41 -0800 (PST)
Date: Mon, 22 Feb 2010 11:29:41 -0500
Message-ID: <843920a31002220829v24cfcd96uabce0fb5c32b8106@mail.gmail.com>
Subject: Scanning docs at index time
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163641798fac1538048032f075
X-Virus-Checked: Checked by ClamAV on apache.org

--00163641798fac1538048032f075
Content-Type: text/plain; charset=ISO-8859-1

I'd like to scan documents as they're being indexed, to find out immediately
if any of them match certain queries.  The goal is to find out of there are
any new hits for these queries as soon as possible, without re-searching the
index over and over (which would be inefficient, and higher latency).  The
documents still need to be indexed (not just scanned) so they can be
searched later with different queries not known at index time.

The indexing throughput is in the tens of millions per day, and there are
maybe a thousand queries or so to be matched.  So this has to work pretty
fast.  (-:  Fortunately the number and size of fields are both fairly small.

This scanning could of course be completely decoupled from the indexing
process.  But my thinking was that since we already have the documents in
hand, and we'll be analyzing various fields in the course of indexing, we
could ideally reuse those token streams somehow for this on-the-fly scanning
process.

I took a look at the org.apache.lucene.index.memory.MemoryIndex class in
contrib.  It looks like that would work, but I'm not sure if it's the most
appropriate solution (for one thing, it would have to re-analyze all the
fields).  Has anyone here done something similar and/or know of other
classes that would be suitable?

Thanks,
Chris

--00163641798fac1538048032f075--

From java-user-return-45109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 16:43:56 2010
Return-Path: <java-user-return-45109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70572 invoked from network); 22 Feb 2010 16:43:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 16:43:56 -0000
Received: (qmail 8971 invoked by uid 500); 22 Feb 2010 16:43:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8930 invoked by uid 500); 22 Feb 2010 16:43:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8920 invoked by uid 99); 22 Feb 2010 16:43:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 16:43:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of peterlkeegan@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 16:43:46 +0000
Received: by pwi6 with SMTP id 6so2558105pwi.35
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 08:43:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=4E5Ef1yWGo5qg5JSsiLJjbwgmnULKobqLdSqvXTygKI=;
        b=I8zIPUCKwGNMk6OQ1X5HucQQgRu0329ovnSrHcEWHf/nmd5knSzGqN3jUNJX4ma3tV
         u/9JzDvZ3Gz2nk3exNS1Ky7KZRaMbh1QyaAyXtY9ZVz3LtHk1g3Ws7Ouim1Vpl0pRzpF
         724L3lJ4k9JnFAfTrbAIS5vobQFyLo23+uOzY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=N1QHOIsc9/k2TJHNyQDXBLogjGKw/R+mxKLwtj5mw6emQWG0BfbAfrgBlKUpif+Gk8
         F2WoSkPvjp3Ksnru1Mm7YPfW6HIGZo3qx3tDFDcMKiTbRVO0sRskNi8ariMUboCUr/Wu
         EPeFjvl++BYa6zGnQHyU/+zoQbSbDixDo0isI=
MIME-Version: 1.0
Received: by 10.142.7.37 with SMTP id 37mr89975wfg.320.1266857005025; Mon, 22 
	Feb 2010 08:43:25 -0800 (PST)
Date: Mon, 22 Feb 2010 11:43:24 -0500
Message-ID: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
Subject: IndexWriter.getReader.getVersion behavior
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=00504502bd2cc409b504803321ab
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502bd2cc409b504803321ab
Content-Type: text/plain; charset=ISO-8859-1

Using Lucene 2.9.1, I have the following pseudocode which gets repeated at
regular intervals:

1. FSDirectory dir = FSDirectory.open(java.io.File);
2. dir.setLockFactory(new SingleInstanceLockFactory());
3. IndexWriter writer = new IndexWriter(dir, Analyzer, false, maxFieldLen)
4. writer.getReader().getVersion();
5. writer.prepareCommit();
6. writer.getReader().getVersion();
7. writer.commit();
8. writer.close();

I'm using the version number to keep external data in synch with the index.
Usually, the version number from (6) is 1 greater than from (4) and the
version from (4) equals the version from the previous (6). At least once a
day, however, the version from (4) is 1 greater than from the previous (6).
What would explain this sporadic behavior of version numbers?

Thanks,
Peter

--00504502bd2cc409b504803321ab--

From java-user-return-45110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 17:22:55 2010
Return-Path: <java-user-return-45110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87370 invoked from network); 22 Feb 2010 17:22:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 17:22:55 -0000
Received: (qmail 76775 invoked by uid 500); 22 Feb 2010 17:22:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76735 invoked by uid 500); 22 Feb 2010 17:22:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76725 invoked by uid 99); 22 Feb 2010 17:22:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 17:22:53 +0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=INVALID_DATE_TZ_ABSURD,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.222.195 as permitted sender)
Received: from [209.85.222.195] (HELO mail-pz0-f195.google.com) (209.85.222.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 17:22:46 +0000
Received: by pzk33 with SMTP id 33so131198pzk.5
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 09:22:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=65s81oRRkwLjBLGTijb6trhv7Y5GZlZO5lIkaGqPdlw=;
        b=nds+FtZa1gGB/wFvYnaQz/gqFa7Rrtpi+bWigXHpgN3DCrBfd2gVgeaAV1bLrXyr9d
         ueqqa8uqPahajVHSZlnv+1/Knl2bVI/rZbERPvKTVoauodaHTRKOqhbGjiJeG2OxIrpZ
         OxIe2JgdmRKAynaybq2M+w+MbB6ry8mh66ss8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=KBLO1oilN7wCAi/aZN9KszagQ8DHDFrr99QfXWDBFTBAa+qFF5GWj/5diquNd3WqyG
         eoq2Q7Cx1E5P41To/7+k3UcBptotbAoTZHUb7Awfe8ZMOz/zPwMGvuVFVSHRZQMRJtvh
         6lGPrCmYodoVBs4Mkw0Z34NMLqr91uniKSxZw=
MIME-Version: 1.0
Received: by 10.141.2.6 with SMTP id e6mr6603423rvi.86.1266859346123; Mon, 22 
	Feb 2010 09:22:26 -0800 (PST)
In-Reply-To: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
References: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
Date: Tue, 23 Feb 2010 11:22:26 +1800
Message-ID: <85d3c3b61002220922m174c8311yfa83f3262d4673d7@mail.gmail.com>
Subject: Re: IndexWriter.getReader.getVersion behavior
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Peter,

Perhaps other concurrent operations?

Jason

On Tue, Feb 23, 2010 at 10:43 AM, Peter Keegan <peterlkeegan@gmail.com> wrote:
> Using Lucene 2.9.1, I have the following pseudocode which gets repeated at
> regular intervals:
>
> 1. FSDirectory dir = FSDirectory.open(java.io.File);
> 2. dir.setLockFactory(new SingleInstanceLockFactory());
> 3. IndexWriter writer = new IndexWriter(dir, Analyzer, false, maxFieldLen)
> 4. writer.getReader().getVersion();
> 5. writer.prepareCommit();
> 6. writer.getReader().getVersion();
> 7. writer.commit();
> 8. writer.close();
>
> I'm using the version number to keep external data in synch with the index.
> Usually, the version number from (6) is 1 greater than from (4) and the
> version from (4) equals the version from the previous (6). At least once a
> day, however, the version from (4) is 1 greater than from the previous (6).
> What would explain this sporadic behavior of version numbers?
>
> Thanks,
> Peter
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 17:24:55 2010
Return-Path: <java-user-return-45111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88370 invoked from network); 22 Feb 2010 17:24:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 17:24:55 -0000
Received: (qmail 80793 invoked by uid 500); 22 Feb 2010 17:24:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80727 invoked by uid 500); 22 Feb 2010 17:24:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80717 invoked by uid 99); 22 Feb 2010 17:24:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 17:24:53 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 17:24:45 +0000
Received: by ywh15 with SMTP id 15so100769ywh.20
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 09:24:23 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.71.1 with SMTP id t1mr2552863yba.255.1266859462990; Mon, 
	22 Feb 2010 09:24:22 -0800 (PST)
In-Reply-To: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
References: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
Date: Mon, 22 Feb 2010 12:24:22 -0500
Message-ID: <9ac0c6aa1002220924q75da08a4s741376ff876ed20c@mail.gmail.com>
Subject: Re: IndexWriter.getReader.getVersion behavior
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

That's curious.

It's only on prepareCommit (or, commit, if you didn't first prepare,
since that will call prepareCommit internally) that this version
should increase.

Is there only 1 thread doing this?

Oh, and, are you passing false for autoCommit?

Mike

On Mon, Feb 22, 2010 at 11:43 AM, Peter Keegan <peterlkeegan@gmail.com> wrote:
> Using Lucene 2.9.1, I have the following pseudocode which gets repeated at
> regular intervals:
>
> 1. FSDirectory dir = FSDirectory.open(java.io.File);
> 2. dir.setLockFactory(new SingleInstanceLockFactory());
> 3. IndexWriter writer = new IndexWriter(dir, Analyzer, false, maxFieldLen)
> 4. writer.getReader().getVersion();
> 5. writer.prepareCommit();
> 6. writer.getReader().getVersion();
> 7. writer.commit();
> 8. writer.close();
>
> I'm using the version number to keep external data in synch with the index.
> Usually, the version number from (6) is 1 greater than from (4) and the
> version from (4) equals the version from the previous (6). At least once a
> day, however, the version from (4) is 1 greater than from the previous (6).
> What would explain this sporadic behavior of version numbers?
>
> Thanks,
> Peter
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 17:36:10 2010
Return-Path: <java-user-return-45112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93907 invoked from network); 22 Feb 2010 17:36:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 17:36:10 -0000
Received: (qmail 94801 invoked by uid 500); 22 Feb 2010 17:36:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94743 invoked by uid 500); 22 Feb 2010 17:36:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94733 invoked by uid 99); 22 Feb 2010 17:36:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 17:36:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of peterlkeegan@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 17:35:59 +0000
Received: by pwi6 with SMTP id 6so2598211pwi.35
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 09:35:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=3v76yRdOl/SAsW2aoiX+XpBvuLayyBtRdKFUx1HowB8=;
        b=m9HX04UWVbvIkgWOk0akOPeBhIECcXBBvE5RJYdCUuE/KW99P3PFBxNLUnppPxoX/A
         WIUflRYFjaV9CSfUaw27itUwDXljrk3wVpouyG1z+jzou4IcYEdYZmZUSTiSAkZydQds
         SBDxsRxDyWDVo3sc4FNUWbApr7n5MImvrF5xQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ilmiPC7hIshPgutac7i9kxfKobjq6WD7ZkECTAr8tEsXhvfCESjUKctVZ4Fttrcjvg
         vRkbgRy7RvCX3xTTCq9cn2H+IJvGlaQBQC36tUsRWsh77KNXDCbL0NDMQlNWX6wegL/m
         X7aSE9E5pYswJ/naWjfnYYGrkvnN3eKGgQUn4=
MIME-Version: 1.0
Received: by 10.142.59.15 with SMTP id h15mr412450wfa.132.1266860138454; Mon, 
	22 Feb 2010 09:35:38 -0800 (PST)
In-Reply-To: <9ac0c6aa1002220924q75da08a4s741376ff876ed20c@mail.gmail.com>
References: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
	 <9ac0c6aa1002220924q75da08a4s741376ff876ed20c@mail.gmail.com>
Date: Mon, 22 Feb 2010 12:35:38 -0500
Message-ID: <e994873a1002220935q1394a3dau13fab93dc43fd293@mail.gmail.com>
Subject: Re: IndexWriter.getReader.getVersion behavior
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636b2be31886108048033dc58
X-Virus-Checked: Checked by ClamAV on apache.org

--001636b2be31886108048033dc58
Content-Type: text/plain; charset=ISO-8859-1

Only one writer thread and one writer process.
I'm calling IndexWriter(Directory d, Analyzer a, boolean create,
MaxFieldLength mfl), which sets autocommit=false.

Peter

On Mon, Feb 22, 2010 at 12:24 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> That's curious.
>
> It's only on prepareCommit (or, commit, if you didn't first prepare,
> since that will call prepareCommit internally) that this version
> should increase.
>
> Is there only 1 thread doing this?
>
> Oh, and, are you passing false for autoCommit?
>
> Mike
>
> On Mon, Feb 22, 2010 at 11:43 AM, Peter Keegan <peterlkeegan@gmail.com>
> wrote:
> > Using Lucene 2.9.1, I have the following pseudocode which gets repeated
> at
> > regular intervals:
> >
> > 1. FSDirectory dir = FSDirectory.open(java.io.File);
> > 2. dir.setLockFactory(new SingleInstanceLockFactory());
> > 3. IndexWriter writer = new IndexWriter(dir, Analyzer, false,
> maxFieldLen)
> > 4. writer.getReader().getVersion();
> > 5. writer.prepareCommit();
> > 6. writer.getReader().getVersion();
> > 7. writer.commit();
> > 8. writer.close();
> >
> > I'm using the version number to keep external data in synch with the
> index.
> > Usually, the version number from (6) is 1 greater than from (4) and the
> > version from (4) equals the version from the previous (6). At least once
> a
> > day, however, the version from (4) is 1 greater than from the previous
> (6).
> > What would explain this sporadic behavior of version numbers?
> >
> > Thanks,
> > Peter
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636b2be31886108048033dc58--

From java-user-return-45113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 19:30:46 2010
Return-Path: <java-user-return-45113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60324 invoked from network); 22 Feb 2010 19:30:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 19:30:46 -0000
Received: (qmail 85188 invoked by uid 500); 22 Feb 2010 19:30:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85140 invoked by uid 500); 22 Feb 2010 19:30:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85130 invoked by uid 99); 22 Feb 2010 19:30:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 19:30:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.217.213] (HELO mail-gx0-f213.google.com) (209.85.217.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 19:30:36 +0000
Received: by gxk5 with SMTP id 5so805118gxk.6
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 11:30:15 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.95.13 with SMTP id x13mr5329125ybl.30.1266867015466; Mon, 
	22 Feb 2010 11:30:15 -0800 (PST)
In-Reply-To: <e994873a1002220935q1394a3dau13fab93dc43fd293@mail.gmail.com>
References: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
	 <9ac0c6aa1002220924q75da08a4s741376ff876ed20c@mail.gmail.com>
	 <e994873a1002220935q1394a3dau13fab93dc43fd293@mail.gmail.com>
Date: Mon, 22 Feb 2010 14:30:15 -0500
Message-ID: <9ac0c6aa1002221130w3aa9c59dq2fe627e85c22bcf3@mail.gmail.com>
Subject: Re: IndexWriter.getReader.getVersion behavior
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Well I'm at a loss then.  The version should only increment on commit.

Can you make it all happen when infoStream is on, and post back?

Mike

On Mon, Feb 22, 2010 at 12:35 PM, Peter Keegan <peterlkeegan@gmail.com> wrote:
> Only one writer thread and one writer process.
> I'm calling IndexWriter(Directory d, Analyzer a, boolean create,
> MaxFieldLength mfl), which sets autocommit=false.
>
> Peter
>
> On Mon, Feb 22, 2010 at 12:24 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> That's curious.
>>
>> It's only on prepareCommit (or, commit, if you didn't first prepare,
>> since that will call prepareCommit internally) that this version
>> should increase.
>>
>> Is there only 1 thread doing this?
>>
>> Oh, and, are you passing false for autoCommit?
>>
>> Mike
>>
>> On Mon, Feb 22, 2010 at 11:43 AM, Peter Keegan <peterlkeegan@gmail.com>
>> wrote:
>> > Using Lucene 2.9.1, I have the following pseudocode which gets repeated
>> at
>> > regular intervals:
>> >
>> > 1. FSDirectory dir = FSDirectory.open(java.io.File);
>> > 2. dir.setLockFactory(new SingleInstanceLockFactory());
>> > 3. IndexWriter writer = new IndexWriter(dir, Analyzer, false,
>> maxFieldLen)
>> > 4. writer.getReader().getVersion();
>> > 5. writer.prepareCommit();
>> > 6. writer.getReader().getVersion();
>> > 7. writer.commit();
>> > 8. writer.close();
>> >
>> > I'm using the version number to keep external data in synch with the
>> index.
>> > Usually, the version number from (6) is 1 greater than from (4) and the
>> > version from (4) equals the version from the previous (6). At least once
>> a
>> > day, however, the version from (4) is 1 greater than from the previous
>> (6).
>> > What would explain this sporadic behavior of version numbers?
>> >
>> > Thanks,
>> > Peter
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 20:58:52 2010
Return-Path: <java-user-return-45114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21976 invoked from network); 22 Feb 2010 20:58:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 20:58:52 -0000
Received: (qmail 34541 invoked by uid 500); 22 Feb 2010 20:58:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34477 invoked by uid 500); 22 Feb 2010 20:58:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34466 invoked by uid 99); 22 Feb 2010 20:58:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 20:58:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.216.185 as permitted sender)
Received: from [209.85.216.185] (HELO mail-px0-f185.google.com) (209.85.216.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 20:58:42 +0000
Received: by pxi15 with SMTP id 15so1319164pxi.21
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 12:58:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=QYgxHAG3Av/slApq43NhfrTE1WmXJqJJVdG+WWeGwX8=;
        b=YfldXyWgo+XnB0Ao8qOBj0P/z7YO0LmF/o6bzJEgknUZ/TsVdI4VpvTeUoxJZ1o5On
         SlvAhxCxa5W6WGuqRZn4b7jVcVmvmo2quz7BPHvGzmuf2ouKhh3/Ua88Iu9gFOa9AEhO
         ZQPEvEvlyb4dxJzcLNtO/gWervq16tu27fgws=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=AIwKTUqc7Mmd0X4gSw16bWBHoqc1gaLa6M3plYWMTcF429NR6xYxeaiDyOetWj6mHZ
         Up8dkwVyRMUst1OUm2vrY4RZSuCJ757eO8D5PV8Ap9gY2sKhfN0tGDjTi2Ty7bRggw5x
         PcWjCRcrckD2Man/EvXZqHJSN1JsgfasCmLTI=
MIME-Version: 1.0
Received: by 10.143.27.11 with SMTP id e11mr260239wfj.280.1266872302782; Mon, 
	22 Feb 2010 12:58:22 -0800 (PST)
In-Reply-To: <9ac0c6aa1002221130w3aa9c59dq2fe627e85c22bcf3@mail.gmail.com>
References: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
	 <9ac0c6aa1002220924q75da08a4s741376ff876ed20c@mail.gmail.com>
	 <e994873a1002220935q1394a3dau13fab93dc43fd293@mail.gmail.com>
	 <9ac0c6aa1002221130w3aa9c59dq2fe627e85c22bcf3@mail.gmail.com>
Date: Mon, 22 Feb 2010 15:58:22 -0500
Message-ID: <e994873a1002221258y1cfba96atfb1fbb2c7dc65c90@mail.gmail.com>
Subject: Re: IndexWriter.getReader.getVersion behavior
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502cc0d95489c048036b140

--00504502cc0d95489c048036b140
Content-Type: text/plain; charset=ISO-8859-1

I'm pretty sure there are flushes and segment merges going on, but as you
said, that shouldn't affect the version increment. I'll see what I can do to
get infoStream output.

Thanks,
Peter

On Mon, Feb 22, 2010 at 2:30 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Well I'm at a loss then.  The version should only increment on commit.
>
> Can you make it all happen when infoStream is on, and post back?
>
> Mike
>
> On Mon, Feb 22, 2010 at 12:35 PM, Peter Keegan <peterlkeegan@gmail.com>
> wrote:
> > Only one writer thread and one writer process.
> > I'm calling IndexWriter(Directory d, Analyzer a, boolean create,
> > MaxFieldLength mfl), which sets autocommit=false.
> >
> > Peter
> >
> > On Mon, Feb 22, 2010 at 12:24 PM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >> That's curious.
> >>
> >> It's only on prepareCommit (or, commit, if you didn't first prepare,
> >> since that will call prepareCommit internally) that this version
> >> should increase.
> >>
> >> Is there only 1 thread doing this?
> >>
> >> Oh, and, are you passing false for autoCommit?
> >>
> >> Mike
> >>
> >> On Mon, Feb 22, 2010 at 11:43 AM, Peter Keegan <peterlkeegan@gmail.com>
> >> wrote:
> >> > Using Lucene 2.9.1, I have the following pseudocode which gets
> repeated
> >> at
> >> > regular intervals:
> >> >
> >> > 1. FSDirectory dir = FSDirectory.open(java.io.File);
> >> > 2. dir.setLockFactory(new SingleInstanceLockFactory());
> >> > 3. IndexWriter writer = new IndexWriter(dir, Analyzer, false,
> >> maxFieldLen)
> >> > 4. writer.getReader().getVersion();
> >> > 5. writer.prepareCommit();
> >> > 6. writer.getReader().getVersion();
> >> > 7. writer.commit();
> >> > 8. writer.close();
> >> >
> >> > I'm using the version number to keep external data in synch with the
> >> index.
> >> > Usually, the version number from (6) is 1 greater than from (4) and
> the
> >> > version from (4) equals the version from the previous (6). At least
> once
> >> a
> >> > day, however, the version from (4) is 1 greater than from the previous
> >> (6).
> >> > What would explain this sporadic behavior of version numbers?
> >> >
> >> > Thanks,
> >> > Peter
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00504502cc0d95489c048036b140--

From java-user-return-45115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 21:27:15 2010
Return-Path: <java-user-return-45115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36343 invoked from network); 22 Feb 2010 21:27:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 21:27:14 -0000
Received: (qmail 430 invoked by uid 500); 22 Feb 2010 21:27:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 349 invoked by uid 500); 22 Feb 2010 21:27:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 332 invoked by uid 99); 22 Feb 2010 21:27:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 21:27:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 21:27:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Njfne-0008JD-WF
	for java-user@lucene.apache.org; Mon, 22 Feb 2010 13:26:43 -0800
Message-ID: <27694763.post@talk.nabble.com>
Date: Mon, 22 Feb 2010 13:26:42 -0800 (PST)
From: jchang <jchangkihatest@gmail.com>
To: java-user@lucene.apache.org
Subject: can IndexWriter.addIndexes de-dupe documents?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jchangkihatest@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


When I call IndexWriter.addIndexes, is there anything I can do to make it
filter out duplicates based a certain field (or group of fields)?   If I
know that the id field of the document is unique, can I make addIndexes know
that if it finds a new document bat the same id, the new one is valid and
the old one should be overwritten (or deleted and the new one added in its
place)?

I don't see anything like unique constraint in the Field class; I know
Lucene is not a SQL database, but i just wanted to check to make sure I'm
not missing anything.


-- 
View this message in context: http://old.nabble.com/can-IndexWriter.addIndexes-de-dupe-documents--tp27694763p27694763.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 22:03:01 2010
Return-Path: <java-user-return-45116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55731 invoked from network); 22 Feb 2010 22:03:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 22:03:01 -0000
Received: (qmail 48314 invoked by uid 500); 22 Feb 2010 22:02:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48238 invoked by uid 500); 22 Feb 2010 22:02:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48228 invoked by uid 99); 22 Feb 2010 22:02:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 22:02:58 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 22:02:51 +0000
Received: by ywh15 with SMTP id 15so339292ywh.20
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 14:02:29 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.29.19 with SMTP id c19mr7675278ybc.13.1266876149656; Mon, 
	22 Feb 2010 14:02:29 -0800 (PST)
In-Reply-To: <27694763.post@talk.nabble.com>
References: <27694763.post@talk.nabble.com>
Date: Mon, 22 Feb 2010 17:02:29 -0500
Message-ID: <9ac0c6aa1002221402y4a4ae313h299d7b9da3a04c02@mail.gmail.com>
Subject: Re: can IndexWriter.addIndexes de-dupe documents?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

addIndexes doesn't make this possible.

Maybe add the indexes but then make a 2nd pass to dedup?

Mike

On Mon, Feb 22, 2010 at 4:26 PM, jchang <jchangkihatest@gmail.com> wrote:
>
> When I call IndexWriter.addIndexes, is there anything I can do to make it
> filter out duplicates based a certain field (or group of fields)? =A0 If =
I
> know that the id field of the document is unique, can I make addIndexes k=
now
> that if it finds a new document bat the same id, the new one is valid and
> the old one should be overwritten (or deleted and the new one added in it=
s
> place)?
>
> I don't see anything like unique constraint in the Field class; I know
> Lucene is not a SQL database, but i just wanted to check to make sure I'm
> not missing anything.
>
>
> --
> View this message in context: http://old.nabble.com/can-IndexWriter.addIn=
dexes-de-dupe-documents--tp27694763p27694763.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 22 23:18:27 2010
Return-Path: <java-user-return-45117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95905 invoked from network); 22 Feb 2010 23:18:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Feb 2010 23:18:27 -0000
Received: (qmail 40705 invoked by uid 500); 22 Feb 2010 23:18:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40633 invoked by uid 500); 22 Feb 2010 23:18:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40623 invoked by uid 99); 22 Feb 2010 23:18:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 23:18:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Feb 2010 23:18:17 +0000
Received: by wyf22 with SMTP id 22so348061wyf.35
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 15:17:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=p31iK8joYSigaF1LSqXC5H9COC9vqGUmVF4p8lSCVAU=;
        b=e3XLqobc4ZYbanFobHnp1YUUcX1HE6IrIrapG9d02BiuN+M3CDzfw1afuhdalyPduK
         PmXKzTEnQE5Rnlieh6mik/B18fDBpMB9KOLY2MhGTCxYkwKMsGXiBhah6tWN/3A7Qf9f
         oc9o2eBykJKXmtxBQGB1ap904q19cnANjETlc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=N7L9gCy1UHWA+alpiHMukvoBAVaOoNE54En6any2vlreKnH4YgskTbnVT90/vFwBn4
         jxqagidZFvCllS2t2ft+MMcHb89KoElyE1hKbGm1kWB0qsN9dVHrgAYrIFtWYs2nbKd6
         ZlHYyYlLkjPZ/UZnsq9hPW4ytQ6iGhaI+1kgs=
MIME-Version: 1.0
Received: by 10.216.162.202 with SMTP id y52mr2799230wek.76.1266880675593; 
	Mon, 22 Feb 2010 15:17:55 -0800 (PST)
In-Reply-To: <9ac0c6aa1002221402y4a4ae313h299d7b9da3a04c02@mail.gmail.com>
References: <27694763.post@talk.nabble.com>
	 <9ac0c6aa1002221402y4a4ae313h299d7b9da3a04c02@mail.gmail.com>
Date: Mon, 22 Feb 2010 18:17:55 -0500
Message-ID: <359a92831002221517p3180d05cwf42a5e83120818d2@mail.gmail.com>
Subject: Re: can IndexWriter.addIndexes de-dupe documents?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636416dd1a43dff048038a488

--001636416dd1a43dff048038a488
Content-Type: text/plain; charset=ISO-8859-1

What sorts of rules would govern which one should be
kept? Say you were adding three indexes and there
was a document in each that was identical. Which one
should be kept?

I suspect any rule would be wrong at least part of
the time....

FWIW
Erick

On Mon, Feb 22, 2010 at 5:02 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> addIndexes doesn't make this possible.
>
> Maybe add the indexes but then make a 2nd pass to dedup?
>
> Mike
>
> On Mon, Feb 22, 2010 at 4:26 PM, jchang <jchangkihatest@gmail.com> wrote:
> >
> > When I call IndexWriter.addIndexes, is there anything I can do to make it
> > filter out duplicates based a certain field (or group of fields)?   If I
> > know that the id field of the document is unique, can I make addIndexes
> know
> > that if it finds a new document bat the same id, the new one is valid and
> > the old one should be overwritten (or deleted and the new one added in
> its
> > place)?
> >
> > I don't see anything like unique constraint in the Field class; I know
> > Lucene is not a SQL database, but i just wanted to check to make sure I'm
> > not missing anything.
> >
> >
> > --
> > View this message in context:
> http://old.nabble.com/can-IndexWriter.addIndexes-de-dupe-documents--tp27694763p27694763.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636416dd1a43dff048038a488--

From java-user-return-45118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 23 07:48:17 2010
Return-Path: <java-user-return-45118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95711 invoked from network); 23 Feb 2010 07:48:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Feb 2010 07:48:17 -0000
Received: (qmail 97802 invoked by uid 500); 23 Feb 2010 07:48:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97762 invoked by uid 500); 23 Feb 2010 07:48:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97752 invoked by uid 99); 23 Feb 2010 07:48:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 07:48:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mail.apoorv@gmail.com designates 209.85.223.186 as permitted sender)
Received: from [209.85.223.186] (HELO mail-iw0-f186.google.com) (209.85.223.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 07:48:05 +0000
Received: by iwn16 with SMTP id 16so210401iwn.20
        for <java-user@lucene.apache.org>; Mon, 22 Feb 2010 23:47:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=8lNsCQygYG8oVamHa1zN4mQ7YBvLHAXhHXQSZ0othvk=;
        b=Icuns6+YWMLwdgO6/JYd25SAddgpiaU5onkrl0+RSq6N5Iw8BoN6E1qRlNoZ9NZUBF
         JBzaLdBAzGTQN6HwVSs3qbZ2+MYOUppLnUU4/ZS4ebnCnsTqwoYHCQokUHCUTeJWLnRj
         A+iDBAMFG/mZ9BDF7IjlGequQWbdE3OCl4Dsg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=E/JvXiuisGjJrncWKvwOo9PZwF8xt+vrbg3iIJmifIobznpbaTDxSHTCmAwm+uxHG+
         tuNUpK6oiiq0nDudF6LiuFGA+8aW8mvkx7qvpcgllXQfsKZjK/NawWzm0jKJCU0elNtV
         MSF0I4nCNhic48guwzLRY+nx2UIL+YbDEsh3E=
MIME-Version: 1.0
Received: by 10.231.157.68 with SMTP id a4mr572304ibx.78.1266911264944; Mon, 
	22 Feb 2010 23:47:44 -0800 (PST)
In-Reply-To: <843920a31002220829v24cfcd96uabce0fb5c32b8106@mail.gmail.com>
References: <843920a31002220829v24cfcd96uabce0fb5c32b8106@mail.gmail.com>
Date: Tue, 23 Feb 2010 13:17:44 +0530
Message-ID: <d260a65b1002222347s44ebc600oac8b3c7631d17e57@mail.gmail.com>
Subject: Re: Scanning docs at index time
From: Apoorv Sharma <mail.apoorv@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0050450169e5e8b30204803fc39d
X-Virus-Checked: Checked by ClamAV on apache.org

--0050450169e5e8b30204803fc39d
Content-Type: text/plain; charset=ISO-8859-1

I don't know of classes which will be suitable but if they are ordered
queries a simple code could easily be written.

On Mon, Feb 22, 2010 at 9:59 PM, Nigel <nigelspleen@gmail.com> wrote:

> I'd like to scan documents as they're being indexed, to find out
> immediately
> if any of them match certain queries.  The goal is to find out of there are
> any new hits for these queries as soon as possible, without re-searching
> the
> index over and over (which would be inefficient, and higher latency).  The
> documents still need to be indexed (not just scanned) so they can be
> searched later with different queries not known at index time.
>
> The indexing throughput is in the tens of millions per day, and there are
> maybe a thousand queries or so to be matched.  So this has to work pretty
> fast.  (-:  Fortunately the number and size of fields are both fairly
> small.
>
> This scanning could of course be completely decoupled from the indexing
> process.  But my thinking was that since we already have the documents in
> hand, and we'll be analyzing various fields in the course of indexing, we
> could ideally reuse those token streams somehow for this on-the-fly
> scanning
> process.
>
> I took a look at the org.apache.lucene.index.memory.MemoryIndex class in
> contrib.  It looks like that would work, but I'm not sure if it's the most
> appropriate solution (for one thing, it would have to re-analyze all the
> fields).  Has anyone here done something similar and/or know of other
> classes that would be suitable?
>
> Thanks,
> Chris
>

--0050450169e5e8b30204803fc39d--

From java-user-return-45119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 23 11:42:22 2010
Return-Path: <java-user-return-45119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88595 invoked from network); 23 Feb 2010 11:42:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Feb 2010 11:42:21 -0000
Received: (qmail 57218 invoked by uid 500); 23 Feb 2010 11:42:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57157 invoked by uid 500); 23 Feb 2010 11:42:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57147 invoked by uid 99); 23 Feb 2010 11:42:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 11:42:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gudumba.smith@gmail.com designates 209.85.220.221 as permitted sender)
Received: from [209.85.220.221] (HELO mail-fx0-f221.google.com) (209.85.220.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 11:42:11 +0000
Received: by fxm21 with SMTP id 21so495637fxm.5
        for <java-user@lucene.apache.org>; Tue, 23 Feb 2010 03:41:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=7MAIRYHa5qp6yhBCVvxbOtl2qo67OvxWK7+rhRlYiGs=;
        b=tWr0Ej8qKsE4egw5IxPXRxQnWXlg4S0bmMsHWU+Lzy43d9mNnuM1NbVlweLxx0Im6P
         m9VqgQL92pCrAeQsYOz99Hj0TiXaFhDhm4NY5hgRdp2/2/Od+ni5FhNjv5R8MWIMAi8a
         KoEi8fAbeojB9tel5Zv3ins35hU7xI3Dfq+T0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=PeCIG8IPMwXaWhLohxlKeX9bO2TUJ+I1jO5Aadt1OQzpA1NZYGamVKi6DGjEIFUrw3
         1Cve93dUZka+BqCCTq6nAaqjThNwMJESN5iEObIIeC7Lb0f8DFJi0BrZf3DAW+bohdb6
         gfHzMxgY/3BWQVSFrHSGEzlfetSG5fja0zuNk=
MIME-Version: 1.0
Received: by 10.102.207.1 with SMTP id e1mr4052412mug.100.1266925310887; Tue, 
	23 Feb 2010 03:41:50 -0800 (PST)
In-Reply-To: <359a92831002220732o995b4cbn2aa47a9ba79d111b@mail.gmail.com>
References: <171c79531002220226l1ba194c8k748622c2adc7bd2@mail.gmail.com>
	 <359a92831002220732o995b4cbn2aa47a9ba79d111b@mail.gmail.com>
Date: Tue, 23 Feb 2010 12:41:50 +0100
Message-ID: <171c79531002230341w74ff210fr9e34dccb86f863f3@mail.gmail.com>
Subject: Re: range of scores : queryNorm()
From: Smith G <gudumba.smith@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello ,

 > Could you back up a step and tell us what the upper-level
> task you're trying to accomplish is? That is, why the partner
> wants the number?

 I am not sure, I was assigned to do this task. It must be related to
furthur tweaks of the result-set which is based on scores.

>  The normalized score
> *is* in a fixed range already, between 0 and 1. Would it serve
> to just modify that and send it back to the partner?

    But, I have got some results whose score is above 1. I do not know
whether I met your conditions (default) .
For ex..

3.0334244 =3D (MATCH) fieldWeight(freeTextField:england in 7083017), produc=
t of:
  2.236068 =3D tf(termFreq(freeTextField:england)=3D5)
  7.235139 =3D idf(docFreq=3D14539, maxDocs=3D7420800)
  0.1875 =3D fieldNorm(field=3DfreeTextField, doc=3D7083017)

Thanks.




On 22 February 2010 16:32, Erick Erickson <erickerickson@gmail.com> wrote:
> Could you back up a step and tell us what the upper-level
> task you're trying to accomplish is? That is, why the partner
> wants the number?
>
> Because the raw score in Lucene is only relevant within that
> single query, and then only for ranking. The normalized score
> *is* in a fixed range already, between 0 and 1. Would it serve
> to just modify that and send it back to the partner?
>
> Erick
>
> On Mon, Feb 22, 2010 at 5:26 AM, Smith G <gudumba.smith@gmail.com> wrote:
>
>> Hello ,
>> =A0 =A0 =A0 =A0 =A0I have observed that even if we change boosting
>> drastically, scores are being normalized at the end because of
>> queryNorm value. Is there anything ( regarding to the queryNorm) that
>> we can rely on ? like score will always be under 10 or some fixed
>> value ? The main objective is to provide scores in a fixed range to
>> the partner. So have you been experienced anything like this? Is it
>> possible to do so ?.
>> =A0 Have you been experienced any strange situation like for a
>> particular query, result scores were really high compared to routine?
>> if yes,I would like to know =A0the factor that effected scores
>> drastically, because it may help me to proceed or understand the
>> cases.
>> Thanks
>>
>> (NOTE : I am sorry, I have also posted in solr group, there were no
>> replies and also I feel this place is even more apt.).
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 23 13:00:48 2010
Return-Path: <java-user-return-45120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23821 invoked from network); 23 Feb 2010 13:00:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Feb 2010 13:00:48 -0000
Received: (qmail 73572 invoked by uid 500); 23 Feb 2010 13:00:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73491 invoked by uid 500); 23 Feb 2010 13:00:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73481 invoked by uid 99); 23 Feb 2010 13:00:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 13:00:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 13:00:36 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NjuN5-0005tO-1g
	for java-user@lucene.apache.org; Tue, 23 Feb 2010 05:00:15 -0800
Message-ID: <27702921.post@talk.nabble.com>
Date: Tue, 23 Feb 2010 05:00:15 -0800 (PST)
From: stefcl <stefatwork@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Strange Fuzzyquery results scoring when using a low minimal
 distance
In-Reply-To: <004a01caaeed$5d7b14f0$18713ed0$@de>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: stefatwork@gmail.com
References: <27594371.post@talk.nabble.com> <559052.37168.qm@web24703.mail.ird.yahoo.com> <27605395.post@talk.nabble.com> <004a01caaeed$5d7b14f0$18713ed0$@de>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the very detailed answer.
Using fuzzylikethis solves the problem.



Uwe Schindler wrote:
>=20
> The problem ist he following:
> The docFreq of the term "luc=C3=A9ne" is 2, all other terms have 1 (becau=
se
> StandardAnalyzer lowercases everything). What happens is, that terms with
> lower docFreq get a higher score in TermQuery. This score overweighs the
> boosting done by FuzzyQuery (because you index is so small).
>=20
> If you raise the minSimilarity a little bit, your query matches less term=
s
> and the rewritten BooleanQuery contains less clauses. At some point the
> score overweigh of the less frequent terms is no longer relevant for the
> final score.=20
>=20
> By the way, you can always look at the explain() results which informs yo=
u
> about the scoring done.
>=20
> The fix is (applies only to trunk, see issue
> https://issues.apache.org/jira/browse/LUCENE-124) to ignore scoring of th=
e
> TermQueries generated by Fuzzy and only look at the edit distance
> (implemented by another MTQ.RewriteMode), that can be set with
> FuzzyQuery.setRewriteMode().
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
>=20
>> -----Original Message-----
>> From: stefcl [mailto:stefatwork@gmail.com]
>> Sent: Tuesday, February 16, 2010 10:11 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Strange Fuzzyquery results scoring when using a low
>> minimal distance
>>=20
>>=20
>> Thanksa lot,
>> But I still don't understand why raising a little bit the min
>> similarity
>> change the ordering...
>>=20
>>=20
>>=20
>> markharw00d wrote:
>> >
>> > This could be down to IDF ie "Lucane" is ranked higher because it is
>> rarer
>> > despite having worse edit distance.
>> > This is arguably a bug.
>> > See http://issues.apache.org/jira/browse/LUCENE-329 which discusses
>> this.
>> > You could try subclass QueryParser and override newFuzzyQuery to
>> return
>> > FuzzyLikeThisQuery (found in "contrib/queries")
>> >
>> > Cheers
>> > Mark
>> >
>> >
>> >
>> > ----- Original Message ----
>> > From: stefcl <stefatwork@gmail.com>
>> > To: java-user@lucene.apache.org
>> > Sent: Mon, 15 February, 2010 14:13:52
>> > Subject: Strange Fuzzyquery results scoring when using a low minimal
>> > distance
>> >
>> >
>> > Hello,
>> >
>> > I'm using Lucene v3.
>> > Please consider the following spellings
>> >
>> > Lucene
>> > Luc=C3=A9ne
>> > luc=C3=A9ne
>> > Lucane
>> > Lucen
>> >
>> > When searching for "luc=C3=A9ne" among those words using a FuzzyQuery
>> (with 0.5
>> > edit distance), results show :
>> >
>> > 1. Lucene 1.0259752
>> > 2. Lucane 1.0259752
>> > 3. Luc=C3=A9ne 0.95660806
>> > 4. luc=C3=A9ne 0.95660806
>> > 5. Lucen 0.30779266
>> >
>> > #4 is an exact match, why does it receive a lower score than "Lucane"
>> > which
>> > contains one incorrect letter?
>> >
>> > Also, if you raise min similarity a bit higher (0.6 of above),
>> everything
>> > becomes normal :
>> >
>> > 1. Luc=C3=A9ne 1.0438477
>> > 2. luc=C3=A9ne 1.0438477
>> > 3. Lucene 0.97959816
>> > 4. Lucane 0.97959816
>> >
>> >
>> > Any idea?
>> > Thanks in advance...
>> >
>> >
>> > The code I use :
>> >
>> >    /**
>> >      * @param args the command line arguments
>> >      */
>> >     public static void main(String[] args) throws IOException,
>> > ParseException
>> >     {
>> >
>> >         StandardAnalyzer analyzer =3D new
>> > StandardAnalyzer(Version.LUCENE_CURRENT);
>> >
>> >         // TODO code application logic here
>> >         Directory index =3D new RAMDirectory();
>> >         IndexWriter w =3D new IndexWriter(index, analyzer, true,
>> > IndexWriter.MaxFieldLength.UNLIMITED);
>> >
>> >         addDoc(w, "Lucene");
>> >         addDoc(w, "Luc=C3=A9ne");
>> >         addDoc(w, "luc=C3=A9ne");
>> >         addDoc(w, "Lucane");
>> >         addDoc(w, "Lucen");
>> >
>> >         w.close();
>> >
>> >         FuzzyQuery q =3D  new FuzzyQuery( new Term("title", "luc=C3=A9=
ne") ,
>> 0.5f
>> > );
>> >
>> >         // 3. search
>> >         IndexSearcher searcher =3D new IndexSearcher(index);
>> >
>> >         TopDocs collector =3D searcher.search(q, 10);
>> >         ScoreDoc[] hits =3D collector.scoreDocs;
>> >
>> >         // 4. display results
>> >         System.out.println("Found " + hits.length + " hits.");
>> >         for(int i =3D 0 ; i < hits.length; i++)
>> >         {
>> >               Document d =3D searcher.doc(hits[i].doc);
>> >               System.out.println((i + 1) + ". " + d.get("title") + "
>> " +
>> > hits[i].score );
>> >         }
>> >
>> >         // searcher can only be closed when there
>> >         // is no need to access the documents any more.
>> >         searcher.close();
>> >     }
>> >
>> >
>> >     private static void addDoc(IndexWriter w, String value) throws
>> > IOException
>> >     {
>> >         Document doc =3D new Document();
>> >         doc.add(new Field("title", value, Field.Store.YES,
>> > Field.Index.ANALYZED));
>> >         w.addDocument(doc);
>> >     }
>> > --
>> > View this message in context:
>> > http://old.nabble.com/Strange-Fuzzyquery-results-scoring-when-using-
>> a-low-minimal-distance-tp27594371p27594371.html
>> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>>=20
>> --
>> View this message in context: http://old.nabble.com/Strange-Fuzzyquery-
>> results-scoring-when-using-a-low-minimal-distance-
>> tp27594371p27605395.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/Strange-Fuzzyquery-resu=
lts-scoring-when-using-a-low-minimal-distance-tp27594371p27702921.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 23 16:23:16 2010
Return-Path: <java-user-return-45121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26582 invoked from network); 23 Feb 2010 16:23:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Feb 2010 16:23:16 -0000
Received: (qmail 51009 invoked by uid 500); 23 Feb 2010 16:23:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50938 invoked by uid 500); 23 Feb 2010 16:23:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50928 invoked by uid 99); 23 Feb 2010 16:23:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 16:23:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmuguruza@gmail.com designates 209.85.220.221 as permitted sender)
Received: from [209.85.220.221] (HELO mail-fx0-f221.google.com) (209.85.220.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 16:23:07 +0000
Received: by fxm21 with SMTP id 21so786987fxm.5
        for <java-user@lucene.apache.org>; Tue, 23 Feb 2010 08:22:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=13XEn5xMl7QCvD1mXt7mNszNRqrLDd9m0ivlfkhL6bM=;
        b=xANIR+c2ePm7oNXvXQGCYX9X0UoJUVZdcPIW9ySKUg5NThFnkte/dZIvcLBKphEQ07
         4RUkdiFEjXma63c4vvqHKWOUwxHJxCbtBPzpZo/ejyN/LgAMrQUwXpLChtsF49Up65V5
         p/m8RrJAv4A3ZzbE6OPU0+0Eg56hNG+nEWNHQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=f0/WqiBd+huOhp1/ta7npbs/K9/wL4sGXFEEKEDFrs4bH5s6Bk6crcw2PggKBJRIGr
         VFDGyy+5hgXSoJETMGw0L0B4FWdTMhw6tDwT/ptNkICHpwAUN27pWlO2UP37ABxs7pJy
         hD3NRI75DsaASpELXJGyBaYSm3OFKhUr/lXIw=
MIME-Version: 1.0
Received: by 10.223.77.66 with SMTP id f2mr6272967fak.84.1266942166074; Tue, 
	23 Feb 2010 08:22:46 -0800 (PST)
Date: Tue, 23 Feb 2010 17:22:46 +0100
Message-ID: <f071061b1002230822sc9abd45qf49808887091ea65@mail.gmail.com>
Subject: get the total number of hits of a query
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I need to find out how many hits a query will get, is this a valid
way? (Lucene 3.0)

        Query lucquery = ...;
        IndexSearcher[] indexes = ...
        MultiSearcher ms = new MultiSearcher(indexes);
        TopDocs tp = ms.search(lucquery, Integer.MAX_VALUE);
        int hits = tp.totalHits;

Then depending on the number of hits I will run it again to get all
results or not.

I have found some posts talking about something similar but I could
not see a clear answer...

thanks
javi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 23 16:28:26 2010
Return-Path: <java-user-return-45122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28317 invoked from network); 23 Feb 2010 16:28:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Feb 2010 16:28:26 -0000
Received: (qmail 61900 invoked by uid 500); 23 Feb 2010 16:28:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61835 invoked by uid 500); 23 Feb 2010 16:28:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61825 invoked by uid 99); 23 Feb 2010 16:28:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 16:28:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cristian.vat@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 16:28:15 +0000
Received: by pvd12 with SMTP id 12so367641pvd.35
        for <java-user@lucene.apache.org>; Tue, 23 Feb 2010 08:27:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=EcXMAocUyNkv5AwZLsoYnG/XDa3FIf/WrPTX2kO5a9w=;
        b=c6uaetxBOOzgtBRqCxPKkLpZiefgKfWQlrXeCQwRHcsFmydEcVikHK9JH15o8NltBF
         JlpyvBrGbJ6TGaNNlyFj3mfx1IrWrwqLkU1eJ+D16x5cF5wWEqMN5U3lP+U4l140Gv+1
         nsITss9WHUE99EBePfULxxPSiewG03AYCYzic=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=rg7r71vyza25Q5OAv0ab/9iynM9+PKM/8/R0dg7IkITegZ6bAS3/t991n5FtnhNUPh
         cCRZ0ME7F3S2YG6CVgsgAck4uReroy4b/tUkK3sZpmsJbRcvP1IWzHAtcf2tHUQwUdGe
         kcjWLBpxRdgHU925dGhIfraeP8m8qdTSNkkvU=
MIME-Version: 1.0
Received: by 10.141.107.17 with SMTP id j17mr109964rvm.108.1266942474067; Tue, 
	23 Feb 2010 08:27:54 -0800 (PST)
In-Reply-To: <f071061b1002230822sc9abd45qf49808887091ea65@mail.gmail.com>
References: <f071061b1002230822sc9abd45qf49808887091ea65@mail.gmail.com>
Date: Tue, 23 Feb 2010 18:27:54 +0200
Message-ID: <e47923e71002230827p164b18h24db56678d312566@mail.gmail.com>
Subject: Re: get the total number of hits of a query
From: Cristian Vat <cristian.vat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd13b621e1e6a048047086c
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd13b621e1e6a048047086c
Content-Type: text/plain; charset=ISO-8859-1

You shouldn't set the number of documents wanted to Integer.MAX_VALUE.
The number of documents to the search method gives the size of the hit queue
where the results are stored so you would end up consuming a lot of memory.

Much easier to set it to something very small. Lucene must traverse all the
hits in any case to give you the highest scoring documents so totalHits
should be correct.

-
Cristian Vat

On Tue, Feb 23, 2010 at 18:22, jm <jmuguruza@gmail.com> wrote:

> Hi,
>
> I need to find out how many hits a query will get, is this a valid
> way? (Lucene 3.0)
>
>        Query lucquery = ...;
>        IndexSearcher[] indexes = ...
>        MultiSearcher ms = new MultiSearcher(indexes);
>        TopDocs tp = ms.search(lucquery, Integer.MAX_VALUE);
>        int hits = tp.totalHits;
>
> Then depending on the number of hits I will run it again to get all
> results or not.
>
> I have found some posts talking about something similar but I could
> not see a clear answer...
>
> thanks
> javi
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd13b621e1e6a048047086c--

From java-user-return-45123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 23 16:29:10 2010
Return-Path: <java-user-return-45123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28664 invoked from network); 23 Feb 2010 16:29:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Feb 2010 16:29:10 -0000
Received: (qmail 64272 invoked by uid 500); 23 Feb 2010 16:29:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64192 invoked by uid 500); 23 Feb 2010 16:29:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64182 invoked by uid 99); 23 Feb 2010 16:29:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 16:29:08 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 16:28:59 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 62062D36005
	for <java-user@lucene.apache.org>; Tue, 23 Feb 2010 17:28:36 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id K0c5HkqYBq9S for <java-user@lucene.apache.org>;
	Tue, 23 Feb 2010 17:28:29 +0100 (CET)
Received: from VEGA (gate2.marum.de [134.102.237.2])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 4922ED36002
	for <java-user@lucene.apache.org>; Tue, 23 Feb 2010 17:28:29 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <f071061b1002230822sc9abd45qf49808887091ea65@mail.gmail.com>
In-Reply-To: <f071061b1002230822sc9abd45qf49808887091ea65@mail.gmail.com>
Subject: RE: get the total number of hits of a query
Date: Tue, 23 Feb 2010 17:28:39 +0100
Message-ID: <000d01cab4a5$41a44a90$c4ecdfb0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-index: Acq0pIJ3hIncm15eRgeI0CifxehWzwAAI4Nw
Content-language: de

Hi,

TopDocs tp =3D ms.search(lucquery, Integer.MAX_VALUE);

^^^This will crash and throw OutOfMemoryException

The simpliest way ist:
TopDocs tp =3D ms.search(lucquery, 1);
And then the total count is in tp.totalHits -- simple. The above query =
will still count all hits, but return only 1. Adjust according to your =
needs (e.g. 10).

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: jm [mailto:jmuguruza@gmail.com]
> Sent: Tuesday, February 23, 2010 5:23 PM
> To: java-user@lucene.apache.org
> Subject: get the total number of hits of a query
>=20
> Hi,
>=20
> I need to find out how many hits a query will get, is this a valid
> way? (Lucene 3.0)
>=20
>         Query lucquery =3D ...;
>         IndexSearcher[] indexes =3D ...
>         MultiSearcher ms =3D new MultiSearcher(indexes);
>         TopDocs tp =3D ms.search(lucquery, Integer.MAX_VALUE);
>         int hits =3D tp.totalHits;
>=20
> Then depending on the number of hits I will run it again to get all
> results or not.
>=20
> I have found some posts talking about something similar but I could
> not see a clear answer...
>=20
> thanks
> javi
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 23 16:49:48 2010
Return-Path: <java-user-return-45124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36396 invoked from network); 23 Feb 2010 16:49:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Feb 2010 16:49:48 -0000
Received: (qmail 3729 invoked by uid 500); 23 Feb 2010 16:49:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3662 invoked by uid 500); 23 Feb 2010 16:49:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3652 invoked by uid 99); 23 Feb 2010 16:49:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 16:49:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jmuguruza@gmail.com designates 209.85.220.221 as permitted sender)
Received: from [209.85.220.221] (HELO mail-fx0-f221.google.com) (209.85.220.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 16:49:36 +0000
Received: by fxm21 with SMTP id 21so814852fxm.5
        for <java-user@lucene.apache.org>; Tue, 23 Feb 2010 08:49:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=GjG1qGwlsu/V5FZ9pSLTV2XYDWpsLqv0/IWy5MengQs=;
        b=rFhpKlm2QxiCzVVFlncjASEIU9DL27zrgTkgWNYjfu6pnpiPEyb6h47cjiZ0b7lKY5
         hh1RDVlEZoTEX99QxYG5ZFy5UmouWE4sa3L2QvaMlkBSnCiAh3gUIcGAOdTrBCPBNdW1
         KvXWcPVMcpN3d9aZs+G+xAYirOf0Oz+GtYjEA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=cakPqYgVq47sLzBYi6vQMxIhb9IJsnuC9YBm/tQyV07OzR7UwlsMeHdTvSRt9FHTHa
         IvrWgXJ5tg2ta/kv/MGixZfOah/Hm8dVfj/8Io9N0PmlUGe8mKOZFU/XjY24tCvdXIbA
         wnpNxGCA3sz7/DJc3idHS8P5XOlKTPRT1U2VM=
MIME-Version: 1.0
Received: by 10.223.4.217 with SMTP id 25mr7028070fas.82.1266943749501; Tue, 
	23 Feb 2010 08:49:09 -0800 (PST)
In-Reply-To: <000d01cab4a5$41a44a90$c4ecdfb0$@de>
References: <f071061b1002230822sc9abd45qf49808887091ea65@mail.gmail.com>
	 <000d01cab4a5$41a44a90$c4ecdfb0$@de>
Date: Tue, 23 Feb 2010 17:49:09 +0100
Message-ID: <f071061b1002230849x26fbd346w60c6047e70a79a7b@mail.gmail.com>
Subject: Re: get the total number of hits of a query
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

perfect, thanks guys

On Tue, Feb 23, 2010 at 5:28 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
> Hi,
>
> TopDocs tp =3D ms.search(lucquery, Integer.MAX_VALUE);
>
> ^^^This will crash and throw OutOfMemoryException
>
> The simpliest way ist:
> TopDocs tp =3D ms.search(lucquery, 1);
> And then the total count is in tp.totalHits -- simple. The above query wi=
ll still count all hits, but return only 1. Adjust according to your needs =
(e.g. 10).
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: jm [mailto:jmuguruza@gmail.com]
>> Sent: Tuesday, February 23, 2010 5:23 PM
>> To: java-user@lucene.apache.org
>> Subject: get the total number of hits of a query
>>
>> Hi,
>>
>> I need to find out how many hits a query will get, is this a valid
>> way? (Lucene 3.0)
>>
>> =A0 =A0 =A0 =A0 Query lucquery =3D ...;
>> =A0 =A0 =A0 =A0 IndexSearcher[] indexes =3D ...
>> =A0 =A0 =A0 =A0 MultiSearcher ms =3D new MultiSearcher(indexes);
>> =A0 =A0 =A0 =A0 TopDocs tp =3D ms.search(lucquery, Integer.MAX_VALUE);
>> =A0 =A0 =A0 =A0 int hits =3D tp.totalHits;
>>
>> Then depending on the number of hits I will run it again to get all
>> results or not.
>>
>> I have found some posts talking about something similar but I could
>> not see a clear answer...
>>
>> thanks
>> javi
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 23 20:20:36 2010
Return-Path: <java-user-return-45125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58522 invoked from network); 23 Feb 2010 20:20:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Feb 2010 20:20:36 -0000
Received: (qmail 48019 invoked by uid 500); 23 Feb 2010 20:20:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47935 invoked by uid 500); 23 Feb 2010 20:20:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47925 invoked by uid 99); 23 Feb 2010 20:20:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 20:20:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 20:20:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nk1Ek-0004fd-CV
	for java-user@lucene.apache.org; Tue, 23 Feb 2010 12:20:06 -0800
Message-ID: <27709797.post@talk.nabble.com>
Date: Tue, 23 Feb 2010 12:20:06 -0800 (PST)
From: halbtuerderschwarze <halbtuerderschwarze@web.de>
To: java-user@lucene.apache.org
Subject: FastVectorHighlighter truncated queries
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: halbtuerderschwarze@web.de


Hi,

I just changed from Lucene 2.4.1 to Lucene 3.0.0 to use the
FastVectorHighlighter, because I've large documents to search and hope for
better highlighting performance.
If I call the getBestFragments method I didn't get fragments for truncated
queries (f.e. Ipod*), simple none truncated queries are still working fine.

Thanks in advance,
Arne
-- 
View this message in context: http://old.nabble.com/FastVectorHighlighter-truncated-queries-tp27709797p27709797.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 23 21:47:25 2010
Return-Path: <java-user-return-45126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96923 invoked from network); 23 Feb 2010 21:47:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Feb 2010 21:47:25 -0000
Received: (qmail 9566 invoked by uid 500); 23 Feb 2010 21:47:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9498 invoked by uid 500); 23 Feb 2010 21:47:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9488 invoked by uid 99); 23 Feb 2010 21:47:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 21:47:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Feb 2010 21:47:15 +0000
Received: by wyf22 with SMTP id 22so752594wyf.35
        for <java-user@lucene.apache.org>; Tue, 23 Feb 2010 13:46:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=AY8xlDmCYWqnbvwYA1a1yzIzYewd0Ioe60xSSqZlXHo=;
        b=tn5pvCnnJEhh7/yxrIMB7xMXX3BYTVjNCvEWmQkywxAn2itgW0FqdD2+RPN77ehdhs
         vk6Smk9Wa4EuNBkRzLCz0aRvgp5UdSoX5ho2DS+jXKIsYnahJZ1Pi+ziVKtDY+kNUDyA
         h58kr5HXvGnHS61HcfQx63JMIlGYpFutfJdb0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=tw40/cNOoTFXY1651MvgChcFk20cAGjfC8Pf2qg7mNyX94glDTZQri+eNu2N9JkLT9
         02cXXyEumrNShHnR2IqnKzy0ioOmU9meb+2GyNu3SIywDs6mhiHZFiCR/KAnhiSKItJM
         Luulluqgm8sns0ic+wxAOb5Ya7zGKZcHYP6L0=
Received: by 10.216.154.70 with SMTP id g48mr1122483wek.109.1266961614466;
        Tue, 23 Feb 2010 13:46:54 -0800 (PST)
Received: from ?10.1.1.132? (hq.compositesw.com [209.237.61.131])
        by mx.google.com with ESMTPS id g9sm19861486gvc.18.2010.02.23.13.46.52
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 23 Feb 2010 13:46:53 -0800 (PST)
Message-ID: <4B844CC2.8020809@gmail.com>
Date: Tue, 23 Feb 2010 13:46:42 -0800
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: FastVectorHighlighter truncated queries
References: <27709797.post@talk.nabble.com>
In-Reply-To: <27709797.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

This should be a common wildcard query highlighting problem.
You will need to query.rewrite() first, and pass the result to the 
highlighter.

--
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes: http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got 2.6 Million Euro funding!


halbtuerderschwarze wrote:
> Hi,
>
> I just changed from Lucene 2.4.1 to Lucene 3.0.0 to use the
> FastVectorHighlighter, because I've large documents to search and hope for
> better highlighting performance.
> If I call the getBestFragments method I didn't get fragments for truncated
> queries (f.e. Ipod*), simple none truncated queries are still working fine.
>
> Thanks in advance,
> Arne
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 08:23:12 2010
Return-Path: <java-user-return-45127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58379 invoked from network); 24 Feb 2010 08:23:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 08:23:12 -0000
Received: (qmail 33369 invoked by uid 500); 24 Feb 2010 08:23:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33248 invoked by uid 500); 24 Feb 2010 08:23:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33238 invoked by uid 99); 24 Feb 2010 08:23:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 08:23:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 08:23:00 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NkCVz-0000so-5u
	for java-user@lucene.apache.org; Wed, 24 Feb 2010 00:22:39 -0800
Message-ID: <27714123.post@talk.nabble.com>
Date: Wed, 24 Feb 2010 00:22:39 -0800 (PST)
From: halbtuerderschwarze <halbtuerderschwarze@web.de>
To: java-user@lucene.apache.org
Subject: Re: FastVectorHighlighter truncated queries
In-Reply-To: <4B844CC2.8020809@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: halbtuerderschwarze@web.de
References: <27709797.post@talk.nabble.com> <4B844CC2.8020809@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


query.rewrite() didn't help, for queries like ipod* or *ipod I still didn't
get fragments.

Arne



chrislusf wrote:
> 
> This should be a common wildcard query highlighting problem.
> You will need to query.rewrite() first, and pass the result to the 
> highlighter.
> 
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
> 
> 
> halbtuerderschwarze wrote:
>> Hi,
>>
>> I just changed from Lucene 2.4.1 to Lucene 3.0.0 to use the
>> FastVectorHighlighter, because I've large documents to search and hope
>> for
>> better highlighting performance.
>> If I call the getBestFragments method I didn't get fragments for
>> truncated
>> queries (f.e. Ipod*), simple none truncated queries are still working
>> fine.
>>
>> Thanks in advance,
>> Arne
>>   
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/FastVectorHighlighter-truncated-queries-tp27709797p27714123.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 09:46:56 2010
Return-Path: <java-user-return-45128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89609 invoked from network); 24 Feb 2010 09:46:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 09:46:55 -0000
Received: (qmail 53750 invoked by uid 500); 24 Feb 2010 09:46:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53708 invoked by uid 500); 24 Feb 2010 09:46:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53658 invoked by uid 99); 24 Feb 2010 09:46:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 09:46:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 09:46:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NkDp2-0007GM-Ct
	for java-user@lucene.apache.org; Wed, 24 Feb 2010 01:46:24 -0800
Message-ID: <27714123.post@talk.nabble.com>
Date: Wed, 24 Feb 2010 01:46:24 -0800 (PST)
From: halbtuerderschwarze <halbtuerderschwarze@web.de>
To: java-user@lucene.apache.org
Subject: Re: FastVectorHighlighter truncated queries
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: halbtuerderschwarze@web.de


query.rewrite() didn't help, for queries like ipod* or *ipod I still didn't
get fragments.

Arne



chrislusf wrote:
> 
> This should be a common wildcard query highlighting problem.
> You will need to query.rewrite() first, and pass the result to the 
> highlighter.
> 
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
> 
> 
> halbtuerderschwarze wrote:
>> Hi,
>>
>> I just changed from Lucene 2.4.1 to Lucene 3.0.0 to use the
>> FastVectorHighlighter, because I've large documents to search and hope
>> for
>> better highlighting performance.
>> If I call the getBestFragments method I didn't get fragments for
>> truncated
>> queries (f.e. Ipod*), simple none truncated queries are still working
>> fine.
>>
>> Thanks in advance,
>> Arne
>>   
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/FastVectorHighlighter-truncated-queries-tp27709797p27714123.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 11:41:14 2010
Return-Path: <java-user-return-45129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40310 invoked from network); 24 Feb 2010 11:41:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 11:41:14 -0000
Received: (qmail 65357 invoked by uid 500); 24 Feb 2010 11:41:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65293 invoked by uid 500); 24 Feb 2010 11:41:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65283 invoked by uid 99); 24 Feb 2010 11:41:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 11:41:11 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 59.106.19.174 is neither permitted nor denied by domain of koji@r.email.ne.jp)
Received: from [59.106.19.174] (HELO www724.sakura.ne.jp) (59.106.19.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 11:41:02 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	(authenticated bits=0)
	by www724.sakura.ne.jp (8.14.3/8.14.3) with ESMTP id o1OBeewH008574
	for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 20:40:40 +0900 (JST)
	(envelope-from koji@r.email.ne.jp)
Message-ID: <4B851038.6090708@r.email.ne.jp>
Date: Wed, 24 Feb 2010 20:40:40 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: FastVectorHighlighter truncated queries
References: <27709797.post@talk.nabble.com> <4B844CC2.8020809@gmail.com> <27714123.post@talk.nabble.com>
In-Reply-To: <27714123.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

halbtuerderschwarze wrote:
> query.rewrite() didn't help, for queries like ipod* or *ipod I still didn't
> get fragments.
>
> Arne
>
>   
You're right. This is still an open issue:

https://issues.apache.org/jira/browse/LUCENE-1889

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 13:18:42 2010
Return-Path: <java-user-return-45130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75982 invoked from network); 24 Feb 2010 13:18:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 13:18:42 -0000
Received: (qmail 2674 invoked by uid 500); 24 Feb 2010 13:18:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2595 invoked by uid 500); 24 Feb 2010 13:18:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2585 invoked by uid 99); 24 Feb 2010 13:18:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 13:18:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 13:18:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NkH7y-0007tk-A7
	for java-user@lucene.apache.org; Wed, 24 Feb 2010 05:18:10 -0800
Message-ID: <27714198.post@talk.nabble.com>
Date: Wed, 24 Feb 2010 05:18:10 -0800 (PST)
From: -Arne- <arne.ballay@googlemail.com>
To: java-user@lucene.apache.org
Subject: Highlighting large documents (Lucene 3.0.0)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: arne.ballay@googlemail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I'm using Lucene 3.0.0 and have large documents to search (logfiles
0,5-20MB). For better search results the query tokens are truncated left and
right. A search for "user" is made to "*user*". The performance of searching
even complex queries with more than one searchterm is quite good. But
highlighting the search results took quite a while. I have tried the default
Highlighter, which doesn't seemed to be fast enough and the
FastVectorHighlighter, which seems to be fast enought, but didn't return
fragments for truncated queries, for not truncated query I got fragments.
Could anybode please tell me what is the best way to highlight large
documents and, if the FastVectorHighlighter is the solution for faster
highlighting, how to highlight truncated search queries.

Thanks in advance,
-Arne-
-- 
View this message in context: http://old.nabble.com/Highlighting-large-documents-%28Lucene-3.0.0%29-tp27714198p27714198.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 13:42:34 2010
Return-Path: <java-user-return-45131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88895 invoked from network); 24 Feb 2010 13:42:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 13:42:34 -0000
Received: (qmail 40551 invoked by uid 500); 24 Feb 2010 13:42:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40482 invoked by uid 500); 24 Feb 2010 13:42:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40472 invoked by uid 99); 24 Feb 2010 13:42:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 13:42:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gsiasf@gmail.com designates 209.85.210.188 as permitted sender)
Received: from [209.85.210.188] (HELO mail-yx0-f188.google.com) (209.85.210.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 13:42:23 +0000
Received: by yxe26 with SMTP id 26so1167584yxe.29
        for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 05:42:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:from:content-type
         :content-transfer-encoding:subject:date:message-id:to:mime-version
         :x-mailer;
        bh=ddzL9sjjm7bRLZSQu0CveErJ556LZ6FGA2UFr3VwJaE=;
        b=sDPnL0DzzwSgRSQJzKwuQegPkHn79e/IYaIMrqX6urFRmR+D479ljCRf4Ak3M9D8gh
         qrzsPPh6LkaYkT5z7HtpuCOpTSeSW5kVvCXnJ4mXSrRotV6hQCe9EPnTR1dH/04hhJI8
         181rAIqfmZoQblmELgRy9b2TMMQbf4WVQcuss=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:from:content-type:content-transfer-encoding:subject:date
         :message-id:to:mime-version:x-mailer;
        b=IDawwH+q9zbMa+I8diCRSDh5cvBaYvTLuTX89WSVQQJeO8isWIXI1PwXnpbjZDAMC4
         SEM2120xd4lYg8uqnoYUuAv6Xefe3Uv7hjWQb+9ou2QcJLkZCbhLypjMIiXhbSsHcUe0
         hddmXxup2gWTuFqkrg9fRVqIVyDeahEd+wCrQ=
Received: by 10.150.180.9 with SMTP id c9mr2524366ybf.268.1267018923015;
        Wed, 24 Feb 2010 05:42:03 -0800 (PST)
Received: from ?10.0.0.77? (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 21sm736296yxe.38.2010.02.24.05.42.02
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 24 Feb 2010 05:42:02 -0800 (PST)
Sender: Grant Ingersoll <gsiasf@gmail.com>
From: Grant Ingersoll <gsingers@apache.org>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Subject: If you could have one feature in Lucene...
Date: Wed, 24 Feb 2010 08:42:02 -0500
Message-Id: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1077)
X-Mailer: Apple Mail (2.1077)

What would it be?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 14:22:12 2010
Return-Path: <java-user-return-45132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14915 invoked from network); 24 Feb 2010 14:22:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 14:22:12 -0000
Received: (qmail 24828 invoked by uid 500); 24 Feb 2010 14:22:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24747 invoked by uid 500); 24 Feb 2010 14:22:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24737 invoked by uid 99); 24 Feb 2010 14:22:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 14:22:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 14:22:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NkI7R-0005Sd-KB
	for java-user@lucene.apache.org; Wed, 24 Feb 2010 06:21:41 -0800
Message-ID: <27714198.post@talk.nabble.com>
Date: Wed, 24 Feb 2010 06:21:41 -0800 (PST)
From: -Arne- <arne.ballay@googlemail.com>
To: java-user@lucene.apache.org
Subject: Highlighting large documents (Lucene 3.0.0)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: arne.ballay@googlemail.com


Hi,

I'm using Lucene 3.0.0 and have large documents to search (logfiles
0,5-20MB). For better search results the query tokens are truncated left and
right. A search for "user" is made to "*user*". The performance of searching
even complex queries with more than one searchterm is quite good. But
highlighting the search results took quite a while. I have tried the default
Highlighter, which doesn't seemed to be fast enough and the
FastVectorHighlighter, which seems to be fast enought, but didn't return
fragments for truncated queries, for not truncated query I got fragments.
Could anybode please tell me what is the best way to highlight large
documents and, if the FastVectorHighlighter is the solution for faster
highlighting, how to highlight truncated search queries.

Thanks in advance,
-Arne-
-- 
View this message in context: http://old.nabble.com/Highlighting-large-documents-%28Lucene-3.0.0%29-tp27714198p27714198.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 16:33:48 2010
Return-Path: <java-user-return-45133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77219 invoked from network); 24 Feb 2010 16:33:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 16:33:48 -0000
Received: (qmail 34380 invoked by uid 500); 24 Feb 2010 16:33:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34315 invoked by uid 500); 24 Feb 2010 16:33:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34305 invoked by uid 99); 24 Feb 2010 16:33:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 16:33:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [149.8.64.32] (HELO mclmx2.mail.saic.com) (149.8.64.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 16:33:36 +0000
Received: from 0015-its-sbg02.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx2.mail.saic.com with ESMTP id BT-MMP-2936608 for java-user@lucene.apache.org; Wed, 24 Feb 2010 11:33:10 -0500
X-AuditID: 9508407d-b7ca9ae0000009aa-90-4b8554c6e620
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg02.saic.com (Symantec Brightmail Gateway) with SMTP id 6F.76.02474.6C4558B4; Wed, 24 Feb 2010 11:33:10 -0500 (EST)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 24 Feb 2010 11:33:10 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CAB56F.0D2F0FDB"
Subject: StandardAnalyzer and comma
Date: Wed, 24 Feb 2010 11:33:09 -0500
Message-Id: <002052E02A48964A8035D9B6E8A1647DAF9202@0015-its-exmb01.us.saic.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: StandardAnalyzer and comma
Thread-Index: Acq1bwoqrBHUkHIvR9SrHgyKtat7MA==
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Feb 2010 16:33:10.0221 (UTC) FILETIME=[0D469FD0:01CAB56F]
X-Brightmail-Tracker: AAAAAA==
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CAB56F.0D2F0FDB
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm using Lucene 2.9.  How do I make a comma behave like a regular
character using the StandardAnalyzer?  Example:

=20

I have a field called "choice" and some field values:

=20

groupA, morning=20

groupB, noon

groupC, night

morning

noon

night

=20

So a query choice:night returns "groupC, night" and "night".  Well, I
only wanted "night".  The StandardAnalyzer strips the commas from
phrases and splits on whitespace.  A phrase query choice:"night"
produces the same results.  I think indexing the field values as
NOT_ANALYZED and making the comma behave as a regular character will
solve this.

=20

Of course I have thought about choice:(night -groupC).  That is not an
option because the contents of the index are hidden from the front end
where queries are made by users.  I looked into changing
StandardTokenizerImpl punctuation, but I'm hoping for a more simple
solution.  Also, changing analyzers is not an option.  I could possibly
extend the StandardAnalyzer, but how do I set the punctuation settings?
Any help here would be great.  This seems like it should be an easy fix
so I hope I've missed something simple.

=20

Thanks,

Paul=20

=20


------_=_NextPart_001_01CAB56F.0D2F0FDB--

From java-user-return-45134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 16:43:03 2010
Return-Path: <java-user-return-45134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80367 invoked from network); 24 Feb 2010 16:43:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 16:43:03 -0000
Received: (qmail 57315 invoked by uid 500); 24 Feb 2010 16:43:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57239 invoked by uid 500); 24 Feb 2010 16:43:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57229 invoked by uid 99); 24 Feb 2010 16:43:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 16:43:00 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ihasmax@gmail.com designates 209.85.216.194 as permitted sender)
Received: from [209.85.216.194] (HELO mail-px0-f194.google.com) (209.85.216.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 16:42:53 +0000
Received: by pxi32 with SMTP id 32so222301pxi.3
        for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 08:42:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=++8mbFUbskxjTRpGu8fqphLuT382NIAd8Lk2ALQl+dQ=;
        b=thvLLPND73DDAYIWwohAoxmkTVAUDbw31KDBidasDxpDEcgDb7MnHmxMBUr7q7EQfb
         IB6DJyqSVePbB5R+ckchwhvkTV3rcDAUhehXiyk3OHpmbnXqofLzPacvSc52Ji1OJU+S
         XsffRaUaBoFDB6zd1X4D/p07ds6MG57pYWECE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=LJzRYQgnQxY5jG7cnGRikAQiCyVTfBwZaGA8dFzXELpqEhsZmUMdkxqgcKMP/MqruN
         pl7FAgViKtBZKVtCZPgyTAeCmZYwwTwbrw7nln1roQeozq0+NnJtWGYVeXylFNyDP/KG
         ff9k7KhwlyW105Qgh+p9P3z2BMSNFedHNyp1I=
MIME-Version: 1.0
Received: by 10.141.124.12 with SMTP id b12mr26258rvn.55.1267029753570; Wed, 
	24 Feb 2010 08:42:33 -0800 (PST)
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DAF9202@0015-its-exmb01.us.saic.com>
References: <002052E02A48964A8035D9B6E8A1647DAF9202@0015-its-exmb01.us.saic.com>
From: Max Lynch <ihasmax@gmail.com>
Date: Wed, 24 Feb 2010 10:42:13 -0600
Message-ID: <3836ec641002240842j4ae74472k8d56c6b40c3993d3@mail.gmail.com>
Subject: Re: StandardAnalyzer and comma
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325560e2e61a66504805b5aa4

--000325560e2e61a66504805b5aa4
Content-Type: text/plain; charset=ISO-8859-1

Personally punctuation matters in my queries so I use WhitespaceAnalyzer.  I
also only want exact hits, so that analyzer works well for me.

Also, AFAIK you don't set NOT_ANALYZED if you want to search through it.

On Wed, Feb 24, 2010 at 10:33 AM, Murdoch, Paul <PAUL.B.MURDOCH@saic.com>wrote:

> I'm using Lucene 2.9.  How do I make a comma behave like a regular
> character using the StandardAnalyzer?  Example:
>
>
>
> I have a field called "choice" and some field values:
>
>
>
> groupA, morning
>
> groupB, noon
>
> groupC, night
>
> morning
>
> noon
>
> night
>
>
>
> So a query choice:night returns "groupC, night" and "night".  Well, I
> only wanted "night".  The StandardAnalyzer strips the commas from
> phrases and splits on whitespace.  A phrase query choice:"night"
> produces the same results.  I think indexing the field values as
> NOT_ANALYZED and making the comma behave as a regular character will
> solve this.
>
>
>
> Of course I have thought about choice:(night -groupC).  That is not an
> option because the contents of the index are hidden from the front end
> where queries are made by users.  I looked into changing
> StandardTokenizerImpl punctuation, but I'm hoping for a more simple
> solution.  Also, changing analyzers is not an option.  I could possibly
> extend the StandardAnalyzer, but how do I set the punctuation settings?
> Any help here would be great.  This seems like it should be an easy fix
> so I hope I've missed something simple.
>
>
>
> Thanks,
>
> Paul
>
>
>
>

--000325560e2e61a66504805b5aa4--

From java-user-return-45135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 17:01:39 2010
Return-Path: <java-user-return-45135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96479 invoked from network); 24 Feb 2010 17:01:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 17:01:39 -0000
Received: (qmail 15524 invoked by uid 500); 24 Feb 2010 17:01:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15457 invoked by uid 500); 24 Feb 2010 17:01:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15446 invoked by uid 99); 24 Feb 2010 17:01:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 17:01:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.lu@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 17:01:27 +0000
Received: by bwz9 with SMTP id 9so3669348bwz.5
        for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 09:01:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=1wpdX2w0xAVKMkZKi4HtyR6xmBUzixvNbX0FaJoQXLM=;
        b=VnMn7qnNAOIF1hCSTA6GxWJaEWs2qoKVA7ZvHJvmbxP4tBqsrTHAwxuAH5rDFrvw2W
         o20XgU0V5RZKnHRjH/iO/VqmGupe4gXnA/SvbkU7Ra/kxTVdNX9MauFkngRbDr/wJyvy
         6q071oXlaG0SYB+cHXD4Xrg9Ox8xm1ECwMqsg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=AoPl+QQzTXWt3zvfIycA4ix4ERyKJcgvZCWSqxlOQiGFaiNG4W+vQaEVb2fMMCOrpx
         voy/qKIdGsUGKXJSiIzl2+ibTXOeSEMXl/x1q3F2GyWZ0MngDxxITHvda/qcpB5MJJqu
         yEisqz44uG/lqssl7mUpHDqNK48CF3kT8t75w=
Received: by 10.204.155.69 with SMTP id r5mr65167bkw.0.1267030867166;
        Wed, 24 Feb 2010 09:01:07 -0800 (PST)
Received: from ?192.168.1.100? (c-71-202-137-93.hsd1.ca.comcast.net [71.202.137.93])
        by mx.google.com with ESMTPS id 15sm2787543bwz.4.2010.02.24.09.01.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 24 Feb 2010 09:01:06 -0800 (PST)
Message-ID: <4B855B44.4090900@gmail.com>
Date: Wed, 24 Feb 2010 09:00:52 -0800
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: If you could have one feature in Lucene...
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
In-Reply-To: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

2 features: Search.... and serializeable Query class in java 
serializable object format, or XML, or json format.

--
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes: http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got 2.6 Million Euro funding!



Grant Ingersoll wrote:
> What would it be?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 17:11:24 2010
Return-Path: <java-user-return-45136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6489 invoked from network); 24 Feb 2010 17:11:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 17:11:23 -0000
Received: (qmail 40143 invoked by uid 500); 24 Feb 2010 17:11:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40088 invoked by uid 500); 24 Feb 2010 17:11:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40078 invoked by uid 99); 24 Feb 2010 17:11:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 17:11:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [149.8.64.10] (HELO mclmx.mail.saic.com) (149.8.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 17:11:11 +0000
Received: from 0015-its-sbg02.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx.mail.saic.com with ESMTP id BT-MMP-2980349 for java-user@lucene.apache.org; Wed, 24 Feb 2010 12:10:45 -0500
X-AuditID: 9508407d-b7ca9ae0000009aa-7c-4b855d958f41
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg02.saic.com (Symantec Brightmail Gateway) with SMTP id 53.5A.02474.59D558B4; Wed, 24 Feb 2010 12:10:45 -0500 (EST)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 24 Feb 2010 12:10:45 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: StandardAnalyzer and comma
Date: Wed, 24 Feb 2010 12:10:44 -0500
Message-Id: <002052E02A48964A8035D9B6E8A1647DAF926D@0015-its-exmb01.us.saic.com>
In-Reply-To: <3836ec641002240842j4ae74472k8d56c6b40c3993d3@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: StandardAnalyzer and comma
Thread-Index: Acq1cHm2Lejq4q7YTCOVwEYO3lFZXAAAmUFg
References: <002052E02A48964A8035D9B6E8A1647DAF9202@0015-its-exmb01.us.saic.com> <3836ec641002240842j4ae74472k8d56c6b40c3993d3@mail.gmail.com>
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Feb 2010 17:10:45.0497 (UTC) FILETIME=[4D866E90:01CAB574]
X-Brightmail-Tracker: AAAAAA==
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the input.  I'll give the WhitespaceAnalyzer a shot.  Also,
AFAIK, Field.Index.NOT_ANALYZED means that the content you index is not
split into separate tokens so it is searchable, but only for exact
matches.  I may be able to get what I want with the WhitespaceAnalyzer
and Field.Index.NOT_ANALYZED.  Thanks again.

Paul=20

-----Original Message-----
From: java-user-return-45134-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.org
[mailto:java-user-return-45134-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.or=
g
] On Behalf Of Max Lynch
Sent: Wednesday, February 24, 2010 11:42 AM
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer and comma

Personally punctuation matters in my queries so I use
WhitespaceAnalyzer.  I
also only want exact hits, so that analyzer works well for me.

Also, AFAIK you don't set NOT_ANALYZED if you want to search through it.

On Wed, Feb 24, 2010 at 10:33 AM, Murdoch, Paul
<PAUL.B.MURDOCH@saic.com>wrote:

> I'm using Lucene 2.9.  How do I make a comma behave like a regular
> character using the StandardAnalyzer?  Example:
>
>
>
> I have a field called "choice" and some field values:
>
>
>
> groupA, morning
>
> groupB, noon
>
> groupC, night
>
> morning
>
> noon
>
> night
>
>
>
> So a query choice:night returns "groupC, night" and "night".  Well, I
> only wanted "night".  The StandardAnalyzer strips the commas from
> phrases and splits on whitespace.  A phrase query choice:"night"
> produces the same results.  I think indexing the field values as
> NOT_ANALYZED and making the comma behave as a regular character will
> solve this.
>
>
>
> Of course I have thought about choice:(night -groupC).  That is not an
> option because the contents of the index are hidden from the front end
> where queries are made by users.  I looked into changing
> StandardTokenizerImpl punctuation, but I'm hoping for a more simple
> solution.  Also, changing analyzers is not an option.  I could
possibly
> extend the StandardAnalyzer, but how do I set the punctuation
settings?
> Any help here would be great.  This seems like it should be an easy
fix
> so I hope I've missed something simple.
>
>
>
> Thanks,
>
> Paul
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 18:40:25 2010
Return-Path: <java-user-return-45137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64216 invoked from network); 24 Feb 2010 18:40:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 18:40:25 -0000
Received: (qmail 19301 invoked by uid 500); 24 Feb 2010 18:40:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19246 invoked by uid 500); 24 Feb 2010 18:40:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19236 invoked by uid 99); 24 Feb 2010 18:40:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 18:40:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 18:40:14 +0000
Received: by wwb34 with SMTP id 34so1333873wwb.35
        for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 10:39:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=CmJXzPkCaDmucddgEdpNphaSEe2m8I6zpONGIZwdRNY=;
        b=hoIft1mn3Z3MJxHlsBcuVv0Db4nAVaQbB2fRZmJQMYE+uTIAhNKPCEFbhvjF4OZP2P
         cS2EgjjsJtIIjpIPBHtf2gkRfoaEaj5XTjOlvI71yOYd7gE8WvXQX8Tx0zJTmnn2w8dW
         ZmQ05pHok6tohGch2TdTVMBgafgX1R23Oo/Rc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=NbsJiaw91mf2HTjNl4jTAqu2sQBZwBPuN7y3g8+5nGcAfSm/2Z6Lc8RDZl52jEBfYx
         k9WwhAifb0x2Ijdc8WPG9cu2GUhXkrdUmqsyJESVILCs2mOwh5FKKRmAKWviDbYnwbXD
         XXznOk3h7e5Er8afdzU/HeqJNA+eKOF7KR6Nk=
MIME-Version: 1.0
Received: by 10.216.90.4 with SMTP id d4mr114384wef.135.1267036793287; Wed, 24 
	Feb 2010 10:39:53 -0800 (PST)
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DAF926D@0015-its-exmb01.us.saic.com>
References: <002052E02A48964A8035D9B6E8A1647DAF9202@0015-its-exmb01.us.saic.com>
	 <3836ec641002240842j4ae74472k8d56c6b40c3993d3@mail.gmail.com>
	 <002052E02A48964A8035D9B6E8A1647DAF926D@0015-its-exmb01.us.saic.com>
Date: Wed, 24 Feb 2010 13:39:53 -0500
Message-ID: <359a92831002241039w7d66975bn96b7b447827a16b6@mail.gmail.com>
Subject: Re: StandardAnalyzer and comma
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d64815fb381f04805cfd10
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d64815fb381f04805cfd10
Content-Type: text/plain; charset=ISO-8859-1

OK, I'm confused. In your original message, you said that
changing analyzers is NOT an option. Then you said you'll
give WhitespaceAnalyzer a shot....

Assuming your original constraint is accurate,
why isn't changing analyzers an option? Are you aware of
PerFieldAnalyzerWrapper which allows you to specify different
analyzers for different fields? If absolutely necessary, you could
copy the field indicated into another field that you use for this case,
which would isolate this change from any other part of your index.

Be aware that WhitespaceAnalyzer does NOT fold case, so
groupc would not match groupC.

But it's easy to fix this. You can either take care to lowercase
your input and query streams, or compose your own analyzer
from, say, lowerCaseFilter and WhiteSpaceTokenizer to handle
all that automatically.

HTH
Erick

On Wed, Feb 24, 2010 at 12:10 PM, Murdoch, Paul <PAUL.B.MURDOCH@saic.com>wrote:

> Thanks for the input.  I'll give the WhitespaceAnalyzer a shot.  Also,
> AFAIK, Field.Index.NOT_ANALYZED means that the content you index is not
> split into separate tokens so it is searchable, but only for exact
> matches.  I may be able to get what I want with the WhitespaceAnalyzer
> and Field.Index.NOT_ANALYZED.  Thanks again.
>
> Paul
>
> -----Original Message-----
> From: java-user-return-45134-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> [mailto:java-user-return-45134-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> ] On Behalf Of Max Lynch
> Sent: Wednesday, February 24, 2010 11:42 AM
> To: java-user@lucene.apache.org
> Subject: Re: StandardAnalyzer and comma
>
> Personally punctuation matters in my queries so I use
> WhitespaceAnalyzer.  I
> also only want exact hits, so that analyzer works well for me.
>
> Also, AFAIK you don't set NOT_ANALYZED if you want to search through it.
>
> On Wed, Feb 24, 2010 at 10:33 AM, Murdoch, Paul
> <PAUL.B.MURDOCH@saic.com>wrote:
>
> > I'm using Lucene 2.9.  How do I make a comma behave like a regular
> > character using the StandardAnalyzer?  Example:
> >
> >
> >
> > I have a field called "choice" and some field values:
> >
> >
> >
> > groupA, morning
> >
> > groupB, noon
> >
> > groupC, night
> >
> > morning
> >
> > noon
> >
> > night
> >
> >
> >
> > So a query choice:night returns "groupC, night" and "night".  Well, I
> > only wanted "night".  The StandardAnalyzer strips the commas from
> > phrases and splits on whitespace.  A phrase query choice:"night"
> > produces the same results.  I think indexing the field values as
> > NOT_ANALYZED and making the comma behave as a regular character will
> > solve this.
> >
> >
> >
> > Of course I have thought about choice:(night -groupC).  That is not an
> > option because the contents of the index are hidden from the front end
> > where queries are made by users.  I looked into changing
> > StandardTokenizerImpl punctuation, but I'm hoping for a more simple
> > solution.  Also, changing analyzers is not an option.  I could
> possibly
> > extend the StandardAnalyzer, but how do I set the punctuation
> settings?
> > Any help here would be great.  This seems like it should be an easy
> fix
> > so I hope I've missed something simple.
> >
> >
> >
> > Thanks,
> >
> > Paul
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d64815fb381f04805cfd10--

From java-user-return-45138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 19:11:11 2010
Return-Path: <java-user-return-45138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84519 invoked from network); 24 Feb 2010 19:11:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 19:11:11 -0000
Received: (qmail 75419 invoked by uid 500); 24 Feb 2010 19:11:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75335 invoked by uid 500); 24 Feb 2010 19:11:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75325 invoked by uid 99); 24 Feb 2010 19:11:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 19:11:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [149.8.64.32] (HELO mclmx2.mail.saic.com) (149.8.64.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 19:11:00 +0000
Received: from 0015-its-sbg03.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx2.mail.saic.com with ESMTP id BT-MMP-2978506 for java-user@lucene.apache.org; Wed, 24 Feb 2010 14:10:26 -0500
X-AuditID: 95084018-b7cceae000000ea8-98-4b8579a20a1f
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg03.saic.com (Symantec Brightmail Gateway) with SMTP id FD.47.03752.2A9758B4; Wed, 24 Feb 2010 14:10:26 -0500 (EST)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 24 Feb 2010 14:10:26 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: StandardAnalyzer and comma
Date: Wed, 24 Feb 2010 14:10:24 -0500
Message-Id: <002052E02A48964A8035D9B6E8A1647DAF93E2@0015-its-exmb01.us.saic.com>
In-Reply-To: <359a92831002241039w7d66975bn96b7b447827a16b6@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: StandardAnalyzer and comma
Thread-Index: Acq1gN8H2P+m5/yNQV2shQ0JNFGEqgAAEZsg
References: <002052E02A48964A8035D9B6E8A1647DAF9202@0015-its-exmb01.us.saic.com> <3836ec641002240842j4ae74472k8d56c6b40c3993d3@mail.gmail.com> <002052E02A48964A8035D9B6E8A1647DAF926D@0015-its-exmb01.us.saic.com> <359a92831002241039w7d66975bn96b7b447827a16b6@mail.gmail.com>
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Feb 2010 19:10:26.0587 (UTC) FILETIME=[05C9CEB0:01CAB585]
X-Brightmail-Tracker: AAAAAA==

I manually change all indexed and searched content to lowercase.  The
whole groupC thing was just for the example...sorry.  My main problem is
with the comma and whitespace.  I would like to query for "night" and
only get the one hit.  The only reason changing StandardAnalyzer "may"
:-) not be an option is due to project scheduling constraints.  However,
if another analyzer solves my problem and passes all of our unit tests
within those constraints then I'm all for it.  I looked at the
PerFieldAnalyzerWrapper some time ago.  I like it, but my index has
hundreds of fields so I'm looking for a more generic approach instead of
handling them on a case by case basis.

I tried the WhitespaceAnalyzer and liked the way the comma (among other
punctuation) was preserved.  I'm running tests with that right now.
Unfortunately, if I want to look for "groupC" I have to append the comma
which won't make sense to a user.  Also the query choice:"groupC, night"
didn't give me a hit.  Does the WhitespaceAnalyzer split on whitespaces
in phrases?

Thanks,
Paul



-----Original Message-----
From: java-user-return-45137-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.org
[mailto:java-user-return-45137-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.or=
g
] On Behalf Of Erick Erickson
Sent: Wednesday, February 24, 2010 1:40 PM
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer and comma

OK, I'm confused. In your original message, you said that
changing analyzers is NOT an option. Then you said you'll
give WhitespaceAnalyzer a shot....

Assuming your original constraint is accurate,
why isn't changing analyzers an option? Are you aware of
PerFieldAnalyzerWrapper which allows you to specify different
analyzers for different fields? If absolutely necessary, you could
copy the field indicated into another field that you use for this case,
which would isolate this change from any other part of your index.

Be aware that WhitespaceAnalyzer does NOT fold case, so
groupc would not match groupC.

But it's easy to fix this. You can either take care to lowercase
your input and query streams, or compose your own analyzer
from, say, lowerCaseFilter and WhiteSpaceTokenizer to handle
all that automatically.

HTH
Erick

On Wed, Feb 24, 2010 at 12:10 PM, Murdoch, Paul
<PAUL.B.MURDOCH@saic.com>wrote:

> Thanks for the input.  I'll give the WhitespaceAnalyzer a shot.  Also,
> AFAIK, Field.Index.NOT_ANALYZED means that the content you index is
not
> split into separate tokens so it is searchable, but only for exact
> matches.  I may be able to get what I want with the WhitespaceAnalyzer
> and Field.Index.NOT_ANALYZED.  Thanks again.
>
> Paul
>
> -----Original Message-----
> From: =
java-user-return-45134-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.org
>
[mailto:java-user-return-45134-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.or=
g
> ] On Behalf Of Max Lynch
> Sent: Wednesday, February 24, 2010 11:42 AM
> To: java-user@lucene.apache.org
> Subject: Re: StandardAnalyzer and comma
>
> Personally punctuation matters in my queries so I use
> WhitespaceAnalyzer.  I
> also only want exact hits, so that analyzer works well for me.
>
> Also, AFAIK you don't set NOT_ANALYZED if you want to search through
it.
>
> On Wed, Feb 24, 2010 at 10:33 AM, Murdoch, Paul
> <PAUL.B.MURDOCH@saic.com>wrote:
>
> > I'm using Lucene 2.9.  How do I make a comma behave like a regular
> > character using the StandardAnalyzer?  Example:
> >
> >
> >
> > I have a field called "choice" and some field values:
> >
> >
> >
> > groupA, morning
> >
> > groupB, noon
> >
> > groupC, night
> >
> > morning
> >
> > noon
> >
> > night
> >
> >
> >
> > So a query choice:night returns "groupC, night" and "night".  Well,
I
> > only wanted "night".  The StandardAnalyzer strips the commas from
> > phrases and splits on whitespace.  A phrase query choice:"night"
> > produces the same results.  I think indexing the field values as
> > NOT_ANALYZED and making the comma behave as a regular character will
> > solve this.
> >
> >
> >
> > Of course I have thought about choice:(night -groupC).  That is not
an
> > option because the contents of the index are hidden from the front
end
> > where queries are made by users.  I looked into changing
> > StandardTokenizerImpl punctuation, but I'm hoping for a more simple
> > solution.  Also, changing analyzers is not an option.  I could
> possibly
> > extend the StandardAnalyzer, but how do I set the punctuation
> settings?
> > Any help here would be great.  This seems like it should be an easy
> fix
> > so I hope I've missed something simple.
> >
> >
> >
> > Thanks,
> >
> > Paul
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 19:20:32 2010
Return-Path: <java-user-return-45139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88312 invoked from network); 24 Feb 2010 19:20:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 19:20:32 -0000
Received: (qmail 98864 invoked by uid 500); 24 Feb 2010 19:20:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98799 invoked by uid 500); 24 Feb 2010 19:20:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98789 invoked by uid 99); 24 Feb 2010 19:20:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 19:20:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ihasmax@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 19:20:21 +0000
Received: by pwi6 with SMTP id 6so4617854pwi.35
        for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 11:20:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=7O2C6sO3wYrGIuz0nqFCWPjhXWlNEW+z7BnQtLdpkD0=;
        b=H5yWcCzomz8FhbfTpiEUa7d9tzVSph/mhbk/ZZ+UZlOBipk5AOgXMevcIUgcJdudrk
         2St2pYLccjhRwDOup9KsaJOn+mcvAAy5c+/hYyyy0AhGFKjYpvNihrJFlyVKqNQ2YPJq
         XOzwFM0MzSSaqujGOB9DFnZgQSuTSxTNOQXvE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=t2Ji03Dxk3ohCDj01QtWZLVpIjfp2gVxOPdwDIB+LFtybOLdfP844C9+ZLUz8m9SNs
         7g9GooGWx68yeMFQSELCM8JCaIKZWcxJhXbhJNOvUp+8EDmWXrsOd+XGwlE2/y7qM0Kc
         O5kp7Y77uxla3TfyQyuutMPZibvjBXxspg6zo=
MIME-Version: 1.0
Received: by 10.141.124.13 with SMTP id b13mr132613rvn.124.1267039200082; Wed, 
	24 Feb 2010 11:20:00 -0800 (PST)
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DAF93E2@0015-its-exmb01.us.saic.com>
References: <002052E02A48964A8035D9B6E8A1647DAF9202@0015-its-exmb01.us.saic.com> 
	<3836ec641002240842j4ae74472k8d56c6b40c3993d3@mail.gmail.com> 
	<002052E02A48964A8035D9B6E8A1647DAF926D@0015-its-exmb01.us.saic.com> 
	<359a92831002241039w7d66975bn96b7b447827a16b6@mail.gmail.com> 
	<002052E02A48964A8035D9B6E8A1647DAF93E2@0015-its-exmb01.us.saic.com>
From: Max Lynch <ihasmax@gmail.com>
Date: Wed, 24 Feb 2010 13:19:40 -0600
Message-ID: <3836ec641002241119m4f2cbf8fm3a630264f93651c9@mail.gmail.com>
Subject: Re: StandardAnalyzer and comma
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325564dfa6ffdc804805d8d77
X-Virus-Checked: Checked by ClamAV on apache.org

--000325564dfa6ffdc804805d8d77
Content-Type: text/plain; charset=ISO-8859-1

>
> I tried the WhitespaceAnalyzer and liked the way the comma (among other
> punctuation) was preserved.  I'm running tests with that right now.
> Unfortunately, if I want to look for "groupC" I have to append the comma
> which won't make sense to a user.  Also the query choice:"groupC, night"
> didn't give me a hit.  Does the WhitespaceAnalyzer split on whitespaces
> in phrases?
>

The reason I used Whitespace Analyzer was so I could match full names like
"Max Lynch".  With StandardAnalyzer this would match: "Max. Lynch" which
wasn't acceptable.  Of course, as I am pretty inexperienced with Lucene, I
could be doing something really convoluted by querying for "Max Lynch.",
"Max Lynch,", "Max Lynch:", etc., but I couldn't find a way to both 1) not
match when punctuation separated parts of my phrase and 2) Match against
punctuation at the end of the phrase, without using WhitespaceAnalyzer and
explicitly adding the various punctuations at the end.

I really hope there is a better way of doing this as I'm sure it would
improve the performance of my queries (users don't search themselves, this
is all automated script stuff).

--000325564dfa6ffdc804805d8d77--

From java-user-return-45140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 20:00:44 2010
Return-Path: <java-user-return-45140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1104 invoked from network); 24 Feb 2010 20:00:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 20:00:44 -0000
Received: (qmail 59542 invoked by uid 500); 24 Feb 2010 20:00:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59466 invoked by uid 500); 24 Feb 2010 20:00:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59456 invoked by uid 99); 24 Feb 2010 20:00:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 20:00:41 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.138.248.236] (HELO thegestalt.org) (82.138.248.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 20:00:35 +0000
Received: from simon by thegestalt.org with local (Exim 4.67 (FreeBSD))
	(envelope-from <simon@thegestalt.org>)
	id 1NkNP3-000GWu-F2
	for java-user@lucene.apache.org; Wed, 24 Feb 2010 20:00:13 +0000
Date: Wed, 24 Feb 2010 20:00:13 +0000
From: Simon Wistow <simon@thegestalt.org>
To: java-user@lucene.apache.org
Subject: Re: If you could have one feature in Lucene...
Message-ID: <20100224200012.GA12746@thegestalt.org>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
User-Agent: Mutt/1.5.16 (2007-06-09)

On Wed, Feb 24, 2010 at 08:42:02AM -0500, Grant Ingersoll said:
> What would it be?

Adding, deleting and updating of individual fields in a document.





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 20:10:21 2010
Return-Path: <java-user-return-45141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6937 invoked from network); 24 Feb 2010 20:10:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 20:10:21 -0000
Received: (qmail 72127 invoked by uid 500); 24 Feb 2010 20:10:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72052 invoked by uid 500); 24 Feb 2010 20:10:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72042 invoked by uid 99); 24 Feb 2010 20:10:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 20:10:19 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 98.129.35.4 is neither permitted nor denied by domain of yuvalf@answers.com)
Received: from [98.129.35.4] (HELO server505.appriver.com) (98.129.35.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 20:10:10 +0000
X-Policy: GLOBAL - answers.com
X-Primary: yuvalf@answers.com
X-Note: This Email was scanned by AppRiver SecureTide
X-ALLOW: yuvalf@answers.com ALLOWED
X-Virus-Scan: V-
X-Note: Spam Tests Failed: 
X-Country-Path: UNITED STATES->UNITED STATES->UNITED STATES
X-Note-Sending-IP: 98.129.23.14
X-Note-Reverse-DNS: ht01.exg5.exghost.com
X-Note-WHTLIST: yuvalf@answers.com
X-Note: User Rule Hits: 
X-Note: Global Rule Hits: G173 G174 G175 G176 G180 G181 G192 G279 
X-Note: Encrypt Rule Hits: 
X-Note: Mail Class: ALLOWEDSENDER
X-Note: Headers Injected
Received: from [98.129.23.14] (HELO ht01.exg5.exghost.com)
  by server505.appriver.com (CommuniGate Pro SMTP 5.3.2)
  with ESMTPS id 29400030 for java-user@lucene.apache.org; Wed, 24 Feb 2010 14:09:46 -0600
Received: from mbx03.exg5.exghost.com ([169.254.1.200]) by
 ht01.exg5.exghost.com ([98.129.23.14]) with mapi; Wed, 24 Feb 2010 14:09:46
 -0600
From: Yuval Feinstein <yuvalf@answers.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 24 Feb 2010 14:09:42 -0600
Subject: RE: If you could have one feature in Lucene...
Thread-Topic: If you could have one feature in Lucene...
Thread-Index: Acq1VziGqm0W/6olQt+VBSoJyoQivQANe15Q
Message-ID: <01C4AEE04EB96243BBAA8083CB6514E86206EB19@MBX03.exg5.exghost.com>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
In-Reply-To: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

A pluggable scoring model that can incorporate BM25, TF/IDF and other varia=
nts of scoring.

-----Original Message-----
From: Grant Ingersoll [mailto:gsiasf@gmail.com] On Behalf Of Grant Ingersol=
l
Sent: Wednesday, February 24, 2010 3:42 PM
To: java-user@lucene.apache.org
Subject: If you could have one feature in Lucene...

What would it be?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 20:16:19 2010
Return-Path: <java-user-return-45142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8939 invoked from network); 24 Feb 2010 20:16:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 20:16:19 -0000
Received: (qmail 80526 invoked by uid 500); 24 Feb 2010 20:16:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80456 invoked by uid 500); 24 Feb 2010 20:16:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80446 invoked by uid 99); 24 Feb 2010 20:16:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 20:16:16 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 20:16:07 +0000
Received: by ey-out-2122.google.com with SMTP id 9so31670eyd.3
        for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 12:15:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=19e1R3htFau9+P4IgCZWU/7M4ObMaaPO9IsgfyHh4qc=;
        b=kEASil7Cxu707n0jpkBxbGZUWrpCWGj3RfFmLdQ4unSpzzeRSeQJeu7xTUhh6VSghR
         VESWIwG1L8MqPqE3EcZcz1zO3bfB1TOARYPMxK+lTVaLC2WCo0xFIJh4c91Y2+rOuFBT
         zPV52aokvrBzUFB4TokIIriHZB7/AUQJn2oJ4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=tYSBLAZ83/oyYy1FtpGkzNBN690mx9WbOGMwKPx7egt6NAMA8J+9ZNOGa2beSXMkPI
         aMW6GifOdkWiCO662ntnES8RuOKipCxCqSFN3TcTiK36M4bBI8kp26tHUNZOhKCWtXpv
         EP3Cw7wr/jsmv+KK2hTynsYRah7h/d3TUhj2I=
MIME-Version: 1.0
Received: by 10.216.89.11 with SMTP id b11mr155871wef.171.1267042547005; Wed, 
	24 Feb 2010 12:15:47 -0800 (PST)
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DAF93E2@0015-its-exmb01.us.saic.com>
References: <002052E02A48964A8035D9B6E8A1647DAF9202@0015-its-exmb01.us.saic.com>
	 <3836ec641002240842j4ae74472k8d56c6b40c3993d3@mail.gmail.com>
	 <002052E02A48964A8035D9B6E8A1647DAF926D@0015-its-exmb01.us.saic.com>
	 <359a92831002241039w7d66975bn96b7b447827a16b6@mail.gmail.com>
	 <002052E02A48964A8035D9B6E8A1647DAF93E2@0015-its-exmb01.us.saic.com>
Date: Wed, 24 Feb 2010 15:15:46 -0500
Message-ID: <359a92831002241215q2e4aed4dm9e1d2e119ca98573@mail.gmail.com>
Subject: Re: StandardAnalyzer and comma
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d643faedf97304805e546c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d643faedf97304805e546c
Content-Type: text/plain; charset=ISO-8859-1

It sounds to me like you'll have to pre-process your text, then use
something
like KeywordAnalyzer. The idea here is to do something like lowercase the
strings (both index and query), and remove all non-letter (or whatever)
characters, normalize whitespace (e.g. remove leading and trailing, turn
all sequences of whitespace into a single space, etc) and go from there.

HTH
Erick

On Wed, Feb 24, 2010 at 2:10 PM, Murdoch, Paul <PAUL.B.MURDOCH@saic.com>wrote:

> I manually change all indexed and searched content to lowercase.  The
> whole groupC thing was just for the example...sorry.  My main problem is
> with the comma and whitespace.  I would like to query for "night" and
> only get the one hit.  The only reason changing StandardAnalyzer "may"
> :-) not be an option is due to project scheduling constraints.  However,
> if another analyzer solves my problem and passes all of our unit tests
> within those constraints then I'm all for it.  I looked at the
> PerFieldAnalyzerWrapper some time ago.  I like it, but my index has
> hundreds of fields so I'm looking for a more generic approach instead of
> handling them on a case by case basis.
>
> I tried the WhitespaceAnalyzer and liked the way the comma (among other
> punctuation) was preserved.  I'm running tests with that right now.
> Unfortunately, if I want to look for "groupC" I have to append the comma
> which won't make sense to a user.  Also the query choice:"groupC, night"
> didn't give me a hit.  Does the WhitespaceAnalyzer split on whitespaces
> in phrases?
>
> Thanks,
> Paul
>
>
>
> -----Original Message-----
> From: java-user-return-45137-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> [mailto:java-user-return-45137-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> ] On Behalf Of Erick Erickson
> Sent: Wednesday, February 24, 2010 1:40 PM
> To: java-user@lucene.apache.org
> Subject: Re: StandardAnalyzer and comma
>
> OK, I'm confused. In your original message, you said that
> changing analyzers is NOT an option. Then you said you'll
> give WhitespaceAnalyzer a shot....
>
> Assuming your original constraint is accurate,
> why isn't changing analyzers an option? Are you aware of
> PerFieldAnalyzerWrapper which allows you to specify different
> analyzers for different fields? If absolutely necessary, you could
> copy the field indicated into another field that you use for this case,
> which would isolate this change from any other part of your index.
>
> Be aware that WhitespaceAnalyzer does NOT fold case, so
> groupc would not match groupC.
>
> But it's easy to fix this. You can either take care to lowercase
> your input and query streams, or compose your own analyzer
> from, say, lowerCaseFilter and WhiteSpaceTokenizer to handle
> all that automatically.
>
> HTH
> Erick
>
> On Wed, Feb 24, 2010 at 12:10 PM, Murdoch, Paul
> <PAUL.B.MURDOCH@saic.com>wrote:
>
> > Thanks for the input.  I'll give the WhitespaceAnalyzer a shot.  Also,
> > AFAIK, Field.Index.NOT_ANALYZED means that the content you index is
> not
> > split into separate tokens so it is searchable, but only for exact
> > matches.  I may be able to get what I want with the WhitespaceAnalyzer
> > and Field.Index.NOT_ANALYZED.  Thanks again.
> >
> > Paul
> >
> > -----Original Message-----
> > From: java-user-return-45134-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> >
> [mailto:java-user-return-45134-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> > ] On Behalf Of Max Lynch
> > Sent: Wednesday, February 24, 2010 11:42 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: StandardAnalyzer and comma
> >
> > Personally punctuation matters in my queries so I use
> > WhitespaceAnalyzer.  I
> > also only want exact hits, so that analyzer works well for me.
> >
> > Also, AFAIK you don't set NOT_ANALYZED if you want to search through
> it.
> >
> > On Wed, Feb 24, 2010 at 10:33 AM, Murdoch, Paul
> > <PAUL.B.MURDOCH@saic.com>wrote:
> >
> > > I'm using Lucene 2.9.  How do I make a comma behave like a regular
> > > character using the StandardAnalyzer?  Example:
> > >
> > >
> > >
> > > I have a field called "choice" and some field values:
> > >
> > >
> > >
> > > groupA, morning
> > >
> > > groupB, noon
> > >
> > > groupC, night
> > >
> > > morning
> > >
> > > noon
> > >
> > > night
> > >
> > >
> > >
> > > So a query choice:night returns "groupC, night" and "night".  Well,
> I
> > > only wanted "night".  The StandardAnalyzer strips the commas from
> > > phrases and splits on whitespace.  A phrase query choice:"night"
> > > produces the same results.  I think indexing the field values as
> > > NOT_ANALYZED and making the comma behave as a regular character will
> > > solve this.
> > >
> > >
> > >
> > > Of course I have thought about choice:(night -groupC).  That is not
> an
> > > option because the contents of the index are hidden from the front
> end
> > > where queries are made by users.  I looked into changing
> > > StandardTokenizerImpl punctuation, but I'm hoping for a more simple
> > > solution.  Also, changing analyzers is not an option.  I could
> > possibly
> > > extend the StandardAnalyzer, but how do I set the punctuation
> > settings?
> > > Any help here would be great.  This seems like it should be an easy
> > fix
> > > so I hope I've missed something simple.
> > >
> > >
> > >
> > > Thanks,
> > >
> > > Paul
> > >
> > >
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d643faedf97304805e546c--

From java-user-return-45143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 20:18:59 2010
Return-Path: <java-user-return-45143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10013 invoked from network); 24 Feb 2010 20:18:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 20:18:59 -0000
Received: (qmail 87213 invoked by uid 500); 24 Feb 2010 20:18:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87142 invoked by uid 500); 24 Feb 2010 20:18:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87132 invoked by uid 99); 24 Feb 2010 20:18:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 20:18:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of arosenschein@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 20:18:48 +0000
Received: by pwi6 with SMTP id 6so4650341pwi.35
        for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 12:18:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=zRTkyIo84e2PDSTrP1XRFANTAEgcfyU4wYLS+MZGKLE=;
        b=t73JlKmcH/LldKdyOVsSACwDUFWsrTb6TWmYnryTfLqBkJhrQiv5uzv7H1WufadMr5
         IvE6PggZ1Un/DcDFRP6Mk34ltl+v5pWJcF9NVZOB6zF4pcSkmV9pmVSbC0Yr62amdyiu
         chXTQKFpO/At0EjkAH7u0uKyMMRFzltqIsO18=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=TW8v5vqSCjabyUsNZFwxKBGAUGnTQPVVd21EeRgzAGhpSe2fA2W/Uu5RsItuvG8cVQ
         Tea9ElU0ZRq4AKaQMNh4aaIo9dnlp3RoXCzYNyMoa1EZYTWtC9vmofrWayYA4ayrbPwO
         U8wFFfxEAlbOmRsEHuqh9PQJW3A2VLl3OPF/E=
MIME-Version: 1.0
Received: by 10.141.124.12 with SMTP id b12mr178581rvn.55.1267042707594; Wed, 
	24 Feb 2010 12:18:27 -0800 (PST)
In-Reply-To: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
Date: Wed, 24 Feb 2010 22:18:27 +0200
Message-ID: <698f0de11002241218q1e5dd106x10e2c385cb8de536@mail.gmail.com>
Subject: Re: If you could have one feature in Lucene...
From: Avi Rosenschein <arosenschein@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325560e2e805dfa04805e5ee8
X-Virus-Checked: Checked by ClamAV on apache.org

--000325560e2e805dfa04805e5ee8
Content-Type: text/plain; charset=UTF-8

On Wed, Feb 24, 2010 at 3:42 PM, Grant Ingersoll <gsingers@apache.org>wrote:

> What would it be?
>

For scoring to take into account the non-analyzed token stream.

That is, if a field is analyzed (stemmed, lowercased, maybe even stop words
removed), that is fine for indexing. But tokens in the query matching the
original form could still get a higher score than those that only match when
analyzed.

Also, this would maybe allow a flexible, run-time, decision of what
analyzers to include. For example, I might want stemming turned on for
normal search, but not for a PhraseQuery.

--000325560e2e805dfa04805e5ee8--

From java-user-return-45144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 20:23:34 2010
Return-Path: <java-user-return-45144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12903 invoked from network); 24 Feb 2010 20:23:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 20:23:34 -0000
Received: (qmail 95465 invoked by uid 500); 24 Feb 2010 20:23:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95392 invoked by uid 500); 24 Feb 2010 20:23:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95382 invoked by uid 99); 24 Feb 2010 20:23:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 20:23:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.221.200 as permitted sender)
Received: from [209.85.221.200] (HELO mail-qy0-f200.google.com) (209.85.221.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 20:23:22 +0000
Received: by qyk38 with SMTP id 38so739439qyk.21
        for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 12:23:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=kHjeGcd30PDBIAvV+t+11RkIdMogqks65lmVZnRcoCo=;
        b=MtnXOm8PrGTT0S/ZBLkhqO5V1gBT4jIksViu2pmILwqUCzTSjEk4JjGvPYCO5FK6Cp
         3JWQv1k8/8yf048ZQDzCkVZLCKX3I5dfxv4zniEMx+NInQrqcjElY8zR7oQ9JYMhAgJV
         t9RpqAuWWWTvz6Rm9xlscoeCfuaGyvO1lFAc8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=RcqaR+U4T7mOgiF7hnPvOKCjgp2Y+/hhwXl3NyUC8l0BzoXOm/hWlqHbf91nkfXRNz
         iM083/yeDYrOkTxclh1l4R62mbrmT8CV161QULH37mSIkxhWQGfe9hODyhs/WK2Wf1x0
         cTnAvTTSDfP6jFWSJd+JZP+9d2EEHVbSIEn7A=
MIME-Version: 1.0
Received: by 10.224.12.141 with SMTP id x13mr18435qax.173.1267042980697; Wed, 
	24 Feb 2010 12:23:00 -0800 (PST)
In-Reply-To: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
Date: Wed, 24 Feb 2010 17:23:00 -0300
Message-ID: <126142c1002241223u162d9bfp949efaafafe48f1b@mail.gmail.com>
Subject: Re: If you could have one feature in Lucene...
From: Marcelo Ochoa <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

> What would it be?
  An extended query parser syntax
(http://lucene.apache.org/java/2_9_1/queryparsersyntax.html) including
geo-location search.
  For example:
    hsin (great circle):                              name:Minneapolis
AND _val_:"recip(hsin(0.78, -1.6, lat_rad, lon_rad, 3963.205), 1, 1,
0)"^100
    dist (Euclidean, Manhattan, p-norm):   name:Minneapolis AND
_val_:"recip(dist(2, lat, lon, 44.794, -93.2696), 1, 1, 0)"^100
    sqedist (Squared Euclidean):              name:Minneapolis AND
_val_:"recip(sqedist(lat, lon, 44.794, -93.2696), 1, 1, 0)"^100
    ghhdist (Geohash Haversine):             name:Minneapolis AND
_val_:"recip (ghhsin(geohash(44.79, -93), geohash, 3963.205), 1, 1,
0)"^100
  source:
    http://www.ibm.com/developerworks/java/library/j-spatial/index.html
  Best regards, Marcelo.
-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Want to integrate Lucene and Oracle?
http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
Is Oracle 11g REST ready?
http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 20:25:51 2010
Return-Path: <java-user-return-45145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13505 invoked from network); 24 Feb 2010 20:25:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 20:25:51 -0000
Received: (qmail 155 invoked by uid 500); 24 Feb 2010 20:25:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99971 invoked by uid 500); 24 Feb 2010 20:25:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99961 invoked by uid 99); 24 Feb 2010 20:25:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 20:25:48 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of michael@loot.co.za designates 41.204.193.132 as permitted sender)
Received: from [41.204.193.132] (HELO mail.loot.co.za) (41.204.193.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 20:25:42 +0000
Received: from sun.loot.co.za (sun.loot.co.za [192.168.0.14])
	by mail.loot.co.za (8.13.8/8.13.8) with SMTP id o1OKPIUe021353
	for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 22:25:18 +0200
Received: (qmail 17051 invoked by uid 7791); 24 Feb 2010 20:25:06 -0000
Received: from unknown (HELO sun) (192.168.0.14)
  by 0 with SMTP; 24 Feb 2010 20:25:06 -0000
Received: FROM [127.0.0.1] ([192.168.0.2]) BY sun WITH ESMTP ; Wed, 24 Feb 2010 22:25:05 +0200
Message-ID: <4B858B21.1070507@loot.co.za>
Date: Wed, 24 Feb 2010 22:25:05 +0200
From: Michael van Rooyen <michael@loot.co.za>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.1.7) Gecko/20100111 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: If you could have one feature in Lucene...
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
In-Reply-To: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 3.0.2 (2004-11-16) on sun.loot.co.za
X-Spam-Level: 
X-Old-Spam-Status: No, score=-4.3 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	RATWARE_GECKO_BUILD autolearn=ham version=3.0.2

On 2010/02/24 03:42 PM, Grant Ingersoll wrote:
> What would it be?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    
Stop words counting when in a phrase query (this is probably possible, 
but I'm not sure how :)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 20:52:12 2010
Return-Path: <java-user-return-45146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20885 invoked from network); 24 Feb 2010 20:52:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 20:52:12 -0000
Received: (qmail 27417 invoked by uid 500); 24 Feb 2010 20:52:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27345 invoked by uid 500); 24 Feb 2010 20:52:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27335 invoked by uid 99); 24 Feb 2010 20:52:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 20:52:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [149.8.64.10] (HELO mclmx.mail.saic.com) (149.8.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 20:52:01 +0000
Received: from 0015-its-sbg02.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx.mail.saic.com with ESMTP id BT-MMP-3044263 for java-user@lucene.apache.org; Wed, 24 Feb 2010 15:51:27 -0500
X-AuditID: 9508407d-b7ca9ae0000009aa-14-4b85914fc8b9
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg02.saic.com (Symantec Brightmail Gateway) with SMTP id 8A.00.02474.F41958B4; Wed, 24 Feb 2010 15:51:27 -0500 (EST)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 24 Feb 2010 15:51:27 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CAB593.223B1793"
Subject: Phrase Search and NOT_ANALYZED
Date: Wed, 24 Feb 2010 15:51:24 -0500
Message-Id: <002052E02A48964A8035D9B6E8A1647DAF94CB@0015-its-exmb01.us.saic.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Phrase Search and NOT_ANALYZED
Thread-Index: Acq1kx0A5NbyPhZsTd26oERipdC5hg==
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Feb 2010 20:51:27.0524 (UTC) FILETIME=[22636640:01CAB593]
X-Brightmail-Tracker: AAAAAA==

------_=_NextPart_001_01CAB593.223B1793
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I'm indexing a field using the StandardAnalyzer 2.9.

=20

field =3D new Field(fieldName, fieldValue, Field.Store.YES,
Field.Index.NOT_ANALYZED);

=20

Let's say fieldName is "name" and fieldValue is "something in the
index".  When I perform the query...

=20

name:"something in the index"

=20

... I don't get a hit.  I'm using the StandardAnalyzer for searching.
I've tested this with Luke and it doesn't work there either.  What am I
missing?

=20

Thanks,

=20

Paul

=20


------_=_NextPart_001_01CAB593.223B1793--

From java-user-return-45147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 21:21:28 2010
Return-Path: <java-user-return-45147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31977 invoked from network); 24 Feb 2010 21:21:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 21:21:28 -0000
Received: (qmail 70784 invoked by uid 500); 24 Feb 2010 21:21:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70708 invoked by uid 500); 24 Feb 2010 21:21:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70698 invoked by uid 99); 24 Feb 2010 21:21:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 21:21:25 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of asl2@panix.com designates 166.84.1.73 as permitted sender)
Received: from [166.84.1.73] (HELO mail2.panix.com) (166.84.1.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 21:21:15 +0000
Received: from panix5.panix.com (panix5.panix.com [166.84.1.5])
	by mail2.panix.com (Postfix) with ESMTP id DA38B38E5D;
	Wed, 24 Feb 2010 16:20:54 -0500 (EST)
Received: by panix5.panix.com (Postfix, from userid 19385)
	id C598124203; Wed, 24 Feb 2010 16:20:54 -0500 (EST)
Date: Wed, 24 Feb 2010 16:20:54 -0500
From: Aaron Lav <asl2@pobox.com>
To: java-user@lucene.apache.org
Cc: asl2@pobox.com
Subject: boosts for unstemmed matches (was Re: If you could have one
	feature in Lucene...)
Message-ID: <20100224212054.GA10200@panix.com>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org> <698f0de11002241218q1e5dd106x10e2c385cb8de536@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <698f0de11002241218q1e5dd106x10e2c385cb8de536@mail.gmail.com>
User-Agent: Mutt/1.5.18 (2008-05-17)
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Feb 24, 2010 at 10:18:27PM +0200, Avi Rosenschein wrote:
> On Wed, Feb 24, 2010 at 3:42 PM, Grant Ingersoll <gsingers@apache.org>wrote:
> 
> > What would it be?
> >
> 
> For scoring to take into account the non-analyzed token stream.
> 
> That is, if a field is analyzed (stemmed, lowercased, maybe even stop words
> removed), that is fine for indexing. But tokens in the query matching the
> original form could still get a higher score than those that only match when
> analyzed.

You can get some of that effect by indexing stemmed and unstemmed
forms, and letting IDF boost unstemmed results.  (I picked this
idea up from http://lingpipe-blog.com/2007/03/21/to-stem-or-not-to-stem/)

> Also, this would maybe allow a flexible, run-time, decision of what
> analyzers to include. For example, I might want stemming turned on for
> normal search, but not for a PhraseQuery.

That's harder - different field names for the different analyses might
work, but not for run-time decisions.  I think the way Sun's Minion does
it is morphologically-based query expansion (see http://blogs.sun.com/searchguy/entry/lightweight_morphology_vs_stemming), and you might be able to
implement that via query rewriting.

     Aaron Lav (asl2@pobox.com)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 21:22:50 2010
Return-Path: <java-user-return-45148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32588 invoked from network); 24 Feb 2010 21:22:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 21:22:50 -0000
Received: (qmail 74786 invoked by uid 500); 24 Feb 2010 21:22:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74702 invoked by uid 500); 24 Feb 2010 21:22:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74692 invoked by uid 99); 24 Feb 2010 21:22:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 21:22:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 21:22:39 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by imss.7 (Postfix) with ESMTP id DADE0313D7
	for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 22:22:15 +0100 (CET)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id C9AB831344
	for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 22:22:15 +0100 (CET)
Received: from [78.250.201.155] (unknown [78.250.201.155])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id 42A8D3111D
	for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 22:22:12 +0100 (CET)
Message-Id: <BC61C0F6-3D11-454B-983E-7A40534935B0@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
Content-Type: multipart/signed; boundary=Apple-Mail-4-976520899; micalg=sha1; protocol="application/pkcs7-signature"
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: If you could have one feature in Lucene...
Date: Wed, 24 Feb 2010 22:22:09 +0100
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
X-Mailer: Apple Mail (2.936)

--Apple-Mail-4-976520899
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed
Content-Transfer-Encoding: quoted-printable

I would wish a highlighting feature that's fully integrated.

paul


On 24-f=E9vr.-10, at 14:42, Grant Ingersoll wrote:

> What would it be?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


--Apple-Mail-4-976520899
Content-Disposition: attachment;
	filename=smime.p7s
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Transfer-Encoding: base64

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIDDzCCAwsw
ggJ0oAMCAQICECfgYPDm3JFN4mPGdyWyyVgwDQYJKoZIhvcNAQEFBQAwYjELMAkGA1UEBhMCWkEx
JTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQ
ZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMB4XDTA5MDUyNjA3MzIzNloXDTEwMDUyNjA3MzIz
NlowcDEaMBgGA1UEBBMRTGliYnJlY2h0IEdvdXJkZXQxDTALBgNVBCoTBFBhdWwxHzAdBgNVBAMT
FlBhdWwgTGliYnJlY2h0IEdvdXJkZXQxIjAgBgkqhkiG9w0BCQEWE3BhdWxAYWN0aXZlbWF0aC5v
cmcwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDeZiQTdNavFBrVY7WMNWscajCzBRZF
cWhrkQyh2V0CCrwx7ElHEM0asrD/FbmK+eor0aeav4u/3RKj3qOsV/HV8VRiM2zHaaErrp+/boPw
FapmxhPk0TXLceFJAgL5ZA1RsfpcIxGzE/AQ5ic+MqZXp2tZkH6RNeOwoUTURZb2bOZWX5fA1G+L
G+IVs20vAN6i/Kdud3JUe9ElfHWfJTl2eO42Hea5MVLnk2IkmCqzxC3CcEchOgOzIrnEjaj/JLPB
ZZkDv6sTyEouG4qQHr4trSZCe5anTM2HoPVtmAoaz+Acyt2+0cwIUIPGDjk1K0mvrnCbVIOUNlUe
FVJu0svnAgMBAAGjMDAuMB4GA1UdEQQXMBWBE3BhdWxAYWN0aXZlbWF0aC5vcmcwDAYDVR0TAQH/
BAIwADANBgkqhkiG9w0BAQUFAAOBgQDC0P6qlhvM4E2XepLgrDWLj7yp9obwKr2tZBvM3lXGCIyx
edzPOMRQABPH3eBbvhKyMb64AoCttJ0vt+QcBLLtc9TkBxPyHyaRHmi4NUMlJJyy1z6pLNc0Ipec
U+qv5ck7Cl2SUs7ZQps9ZSW++s4LKKrcdsEs9HD4myt1YusWKTGCAxAwggMMAgEBMHYwYjELMAkG
A1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMT
I1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAhAn4GDw5tyRTeJjxnclsslYMAkG
BSsOAwIaBQCgggFvMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTEw
MDIyNDIxMjIxMFowIwYJKoZIhvcNAQkEMRYEFEX5DydRNswbtgUoAtGMoGEKINUyMIGFBgkrBgEE
AYI3EAQxeDB2MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5
KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIQJ+Bg
8ObckU3iY8Z3JbLJWDCBhwYLKoZIhvcNAQkQAgsxeKB2MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQK
ExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwg
RnJlZW1haWwgSXNzdWluZyBDQQIQJ+Bg8ObckU3iY8Z3JbLJWDANBgkqhkiG9w0BAQEFAASCAQCd
LS+QhP5rGHo98rZYC1DhcVB82eq0R3IabQgPSmQgRY9fkH/mDSuUMw3sE09xuSHWvGnyyG9Npc62
k8YbCGrdHLp+DGqMI8irzbCftxRxkKW8qRpc+VR+2uv/ZrXHiJo1fTru0z+EoBxSjV8vmGuy3dXD
w3eilDOJodGHYmyjq3Vn4dPMz81hxbmEIJg0eAS7zAL+lKpUv8wyClYY7PQl0RBjiO18CA99VlUl
0HITbUijmosQlrw4gEX2uICKqjfs01c1pxP0mfrrG5+BZJ8rupmlXoS9M8Hj1N6n/z7csc1cUlqn
fUJa4E1XbHJmI24lIif3S9J//hBCII/HLGhiAAAAAAAA

--Apple-Mail-4-976520899--

From java-user-return-45149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 21:23:22 2010
Return-Path: <java-user-return-45149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32907 invoked from network); 24 Feb 2010 21:23:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 21:23:22 -0000
Received: (qmail 79309 invoked by uid 500); 24 Feb 2010 21:23:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79246 invoked by uid 500); 24 Feb 2010 21:23:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79236 invoked by uid 99); 24 Feb 2010 21:23:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 21:23:19 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 21:23:12 +0000
Received: by wyf22 with SMTP id 22so1328947wyf.35
        for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 13:22:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=9TgcaVjEnZI2RvV9KUYyYDgTQtu3FUzhMTM7Pli62/o=;
        b=QilGGcE+GQp4z20V9Q6iSVXuav1T0cGo6ZL4/mQlUzZz0GbfvLZLzQCjQmNw+NjZVZ
         amN9wPnYlhJKWP1iQNSszJaq/95Sz/1nFh75qlVJzeVcE6q6EzXGHpl5Gc6FeW2upYkW
         T9FIs0a8M1BLNnhI2pEeTxxAv9b5OUu4ZUzKM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=e9RmH+VdyQ4RSscccJvto5xOVYE0ljlldxaBliLBvTnEFZIxyVoJAcuS1h43VhumYh
         H8uqEHv4bLeTZ6sQ7BFmOfjbQqCBVtGDj1ed9RC6mMFQaqTL4bMdqN5W4k0dNs9qEBYm
         rFkBkauHSeI9p9fdI3R/ZeDpiVYwj+NnXAL6c=
MIME-Version: 1.0
Received: by 10.216.88.148 with SMTP id a20mr191396wef.124.1267046571401; Wed, 
	24 Feb 2010 13:22:51 -0800 (PST)
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DAF94CB@0015-its-exmb01.us.saic.com>
References: <002052E02A48964A8035D9B6E8A1647DAF94CB@0015-its-exmb01.us.saic.com>
Date: Wed, 24 Feb 2010 16:22:51 -0500
Message-ID: <359a92831002241322o5477944ck60d87e6eb0415eb0@mail.gmail.com>
Subject: Re: Phrase Search and NOT_ANALYZED
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d78421cd636604805f444c

--0016e6d78421cd636604805f444c
Content-Type: text/plain; charset=ISO-8859-1

What does Luke's explain show you? That'll show you a lot about how
the query gets transformed......

My first guess is that stop words are messing you up....

Erick

On Wed, Feb 24, 2010 at 3:51 PM, Murdoch, Paul <PAUL.B.MURDOCH@saic.com>wrote:

> Hi,
>
>
>
> I'm indexing a field using the StandardAnalyzer 2.9.
>
>
>
> field = new Field(fieldName, fieldValue, Field.Store.YES,
> Field.Index.NOT_ANALYZED);
>
>
>
> Let's say fieldName is "name" and fieldValue is "something in the
> index".  When I perform the query...
>
>
>
> name:"something in the index"
>
>
>
> ... I don't get a hit.  I'm using the StandardAnalyzer for searching.
> I've tested this with Luke and it doesn't work there either.  What am I
> missing?
>
>
>
> Thanks,
>
>
>
> Paul
>
>
>
>

--0016e6d78421cd636604805f444c--

From java-user-return-45150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 21:39:09 2010
Return-Path: <java-user-return-45150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40758 invoked from network); 24 Feb 2010 21:39:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 21:39:09 -0000
Received: (qmail 96803 invoked by uid 500); 24 Feb 2010 21:39:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96724 invoked by uid 500); 24 Feb 2010 21:39:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96714 invoked by uid 99); 24 Feb 2010 21:39:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 21:39:06 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of arosenschein@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 21:38:57 +0000
Received: by pvd12 with SMTP id 12so906742pvd.35
        for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 13:38:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=AjWzXLx1pMjN19HdSeJpJWmZb2OOYsBsKUDMu8OOBlI=;
        b=U70o+PPL40jh++B5CmwI+qrARg0xEkVv/pWV7ww00bMh6y5KKHdv0rHf2PM47puFo8
         nLmhsO/r9oI65Ux3+ho26ouS5yAVNZExtLD8SyL6Lv7TSQ/VKFJ0DeCt1m35jPmixhVX
         xx1VWAWY3JZ+HwqGUsVbrOx2v0P988NCVq5GM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=NvBpmLVUWiH2fCdw2XExGgaiDFFCEmxfR2mf2XnKohUX19XaXGTzru6rAmznoMlbYP
         71CvQ5oNo1rqMaIKnjIfwuA24Sb8w9nK/O+gSbQRRxcxw3BlulAQHmQUttSQaVRhy+Fa
         KlnKYmEncNuZMqPWxphRsKja+ZUMBmMPqIzh0=
MIME-Version: 1.0
Received: by 10.141.124.12 with SMTP id b12mr216882rvn.55.1267047515580; Wed, 
	24 Feb 2010 13:38:35 -0800 (PST)
In-Reply-To: <20100224212054.GA10200@panix.com>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
	 <698f0de11002241218q1e5dd106x10e2c385cb8de536@mail.gmail.com>
	 <20100224212054.GA10200@panix.com>
Date: Wed, 24 Feb 2010 23:38:35 +0200
Message-ID: <698f0de11002241338y2b619e87r36c507920ab61233@mail.gmail.com>
Subject: Re: boosts for unstemmed matches (was Re: If you could have one 
	feature in Lucene...)
From: Avi Rosenschein <arosenschein@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325560e2e146c3004805f7d16
X-Virus-Checked: Checked by ClamAV on apache.org

--000325560e2e146c3004805f7d16
Content-Type: text/plain; charset=UTF-8

On Wed, Feb 24, 2010 at 11:20 PM, Aaron Lav <asl2@pobox.com> wrote:

> On Wed, Feb 24, 2010 at 10:18:27PM +0200, Avi Rosenschein wrote:
> > On Wed, Feb 24, 2010 at 3:42 PM, Grant Ingersoll <gsingers@apache.org
> >wrote:
> >
> > > What would it be?
> > >
> >
> > For scoring to take into account the non-analyzed token stream.
> >
> > That is, if a field is analyzed (stemmed, lowercased, maybe even stop
> words
> > removed), that is fine for indexing. But tokens in the query matching the
> > original form could still get a higher score than those that only match
> when
> > analyzed.
>
> You can get some of that effect by indexing stemmed and unstemmed
> forms, and letting IDF boost unstemmed results.  (I picked this
> idea up from http://lingpipe-blog.com/2007/03/21/to-stem-or-not-to-stem/)
>

This is not quite the same (either in relevance or efficiency). I would like
the infrastructure for this to be built into Lucene, so that  queries and
scorers could take advantage of it.


> > Also, this would maybe allow a flexible, run-time, decision of what
> > analyzers to include. For example, I might want stemming turned on for
> > normal search, but not for a PhraseQuery.
>
> That's harder - different field names for the different analyses might
> work, but not for run-time decisions.  I think the way Sun's Minion does
> it is morphologically-based query expansion (see
> http://blogs.sun.com/searchguy/entry/lightweight_morphology_vs_stemming),
> and you might be able to
> implement that via query rewriting.
>

Again, rather than forcing me to store a separate field for every possible
type of query I might want to build, Lucene should be able to efficiently
store the original information in a form conducive to using at query time.

--000325560e2e146c3004805f7d16--

From java-user-return-45151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 21:45:54 2010
Return-Path: <java-user-return-45151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44180 invoked from network); 24 Feb 2010 21:45:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 21:45:54 -0000
Received: (qmail 6152 invoked by uid 500); 24 Feb 2010 21:45:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6091 invoked by uid 500); 24 Feb 2010 21:45:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6081 invoked by uid 99); 24 Feb 2010 21:45:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 21:45:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of digydigy@gmail.com designates 209.85.219.217 as permitted sender)
Received: from [209.85.219.217] (HELO mail-ew0-f217.google.com) (209.85.219.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 21:45:42 +0000
Received: by ewy9 with SMTP id 9so189322ewy.11
        for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 13:45:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references
         :in-reply-to:subject:date:message-id:mime-version:content-type
         :content-transfer-encoding:x-mailer:thread-index:content-language;
        bh=mvfzqyTJuwTGj7mlI6drjTfWWrQ899kDnKbqLSBUsDo=;
        b=KWBOkK670DFcYia1lDnzqQOG8Kb/QkhwEVEqCm7OYFTvYPQjoT0m9EWj2iuRJ1Pz/n
         IvSPkPdwMA5FswIpDsTKo6z0XGsCB0D75bsTYQRmSS46EHY90dqEVGha94FeOT24e+LH
         HRRPbwp3CvNKFX8tZTOVlIa84091mm09OC9/s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:thread-index
         :content-language;
        b=YXW88/AFjjoZaZRdcEZuV7Gjpc2XXF+FU/jHX1ZNw+5ssQRe3b9gutnXG3Lv3rwxXP
         UGZ+/Mp7qTNnBZKq07Pr7tuU9EBgWuiZ0eYOeu7fFHsbwOZ0pKJQPgQtwO2yAOhQF52C
         +ncfeGiRFiHuJW4RHORX/iHoyD4rmxN0nS4Vk=
Received: by 10.213.25.78 with SMTP id y14mr758380ebb.26.1267047921799;
        Wed, 24 Feb 2010 13:45:21 -0800 (PST)
Received: from NEWPC ([81.213.206.230])
        by mx.google.com with ESMTPS id 16sm1126428ewy.7.2010.02.24.13.45.20
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 24 Feb 2010 13:45:21 -0800 (PST)
From: "Digy" <digydigy@gmail.com>
To: <java-user@lucene.apache.org>
References: <002052E02A48964A8035D9B6E8A1647DAF94CB@0015-its-exmb01.us.saic.com>
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DAF94CB@0015-its-exmb01.us.saic.com>
Subject: RE: Phrase Search and NOT_ANALYZED
Date: Wed, 24 Feb 2010 23:45:14 +0200
Message-ID: <005201cab59a$a706c430$f5144c90$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acq1kx0A5NbyPhZsTd26oERipdC5hgAB1sXg
Content-Language: tr
X-Virus-Checked: Checked by ClamAV on apache.org

Since it is not analyzed, your text is stored as a single term in the index
[something in the index].
But the query 
	name:"something in the index"
is translated as :
  find 4 consecutive terms which have values "something", "in","the" and
"index"  respectively.
or if stop words are removed 
  find 2 consecutive terms which have values "something" and "index"

You should either index it ANALYZED or use TermQuery while searching.

DIGY

-----Original Message-----
From: Murdoch, Paul [mailto:PAUL.B.MURDOCH@saic.com] 
Sent: Wednesday, February 24, 2010 10:51 PM
To: java-user@lucene.apache.org
Subject: Phrase Search and NOT_ANALYZED

Hi,

 

I'm indexing a field using the StandardAnalyzer 2.9.

 

field = new Field(fieldName, fieldValue, Field.Store.YES,
Field.Index.NOT_ANALYZED);

 

Let's say fieldName is "name" and fieldValue is "something in the
index".  When I perform the query...

 

name:"something in the index"

 

... I don't get a hit.  I'm using the StandardAnalyzer for searching.
I've tested this with Luke and it doesn't work there either.  What am I
missing?

 

Thanks,

 

Paul

 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 21:51:49 2010
Return-Path: <java-user-return-45152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46575 invoked from network); 24 Feb 2010 21:51:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 21:51:49 -0000
Received: (qmail 18501 invoked by uid 500); 24 Feb 2010 21:51:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18426 invoked by uid 500); 24 Feb 2010 21:51:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18416 invoked by uid 99); 24 Feb 2010 21:51:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 21:51:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [149.8.64.32] (HELO mclmx2.mail.saic.com) (149.8.64.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 21:51:38 +0000
Received: from 0015-its-sbg01.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx2.mail.saic.com with ESMTP id BT-MMP-3015009 for java-user@lucene.apache.org; Wed, 24 Feb 2010 16:51:07 -0500
X-AuditID: 9508401a-b7c69ae000000d5c-d0-4b859f4bd692
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg01.saic.com (Symantec Brightmail Gateway) with SMTP id BD.B8.03420.B4F958B4; Wed, 24 Feb 2010 16:51:07 -0500 (EST)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 24 Feb 2010 16:51:07 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Phrase Search and NOT_ANALYZED
Date: Wed, 24 Feb 2010 16:51:05 -0500
Message-Id: <002052E02A48964A8035D9B6E8A1647DAF953D@0015-its-exmb01.us.saic.com>
In-Reply-To: <359a92831002241322o5477944ck60d87e6eb0415eb0@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Phrase Search and NOT_ANALYZED
Thread-Index: Acq1l5vXmRSLApKeTEKI9gh52OTfUAAAm44w
References: <002052E02A48964A8035D9B6E8A1647DAF94CB@0015-its-exmb01.us.saic.com> <359a92831002241322o5477944ck60d87e6eb0415eb0@mail.gmail.com>
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Feb 2010 21:51:07.0615 (UTC) FILETIME=[7849EEF0:01CAB59B]
X-Brightmail-Tracker: AAAAAA==

It still happens if there are no stop words in the fieldValue. For
instance if fieldValue was "paul murdoch", Luke would show the query as
name:"paul murdoch" but no hits are returned.  If I change to
Field.Index.ANALYZED it works.  The problem with ANALYZED is that there
is a possibility of picking up false positive hits.  With queries
like...

name:murdoch	// assume "murdoch" is another separate field value

Obviously here I just want "murdoch" but since "paul murdoch" was
indexed ANALYZED that will be returned as well.  Using quotes with
Field.Index.NOT_ANALYZED isn't working for me. I'm thinking maybe it's
the QueryParser so I'm going trying a PhraseQuery instead.

Thanks,

Paul=20


-----Original Message-----
From: java-user-return-45149-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.org
[mailto:java-user-return-45149-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.or=
g
] On Behalf Of Erick Erickson
Sent: Wednesday, February 24, 2010 4:23 PM
To: java-user@lucene.apache.org
Subject: Re: Phrase Search and NOT_ANALYZED

What does Luke's explain show you? That'll show you a lot about how
the query gets transformed......

My first guess is that stop words are messing you up....

Erick

On Wed, Feb 24, 2010 at 3:51 PM, Murdoch, Paul
<PAUL.B.MURDOCH@saic.com>wrote:

> Hi,
>
>
>
> I'm indexing a field using the StandardAnalyzer 2.9.
>
>
>
> field =3D new Field(fieldName, fieldValue, Field.Store.YES,
> Field.Index.NOT_ANALYZED);
>
>
>
> Let's say fieldName is "name" and fieldValue is "something in the
> index".  When I perform the query...
>
>
>
> name:"something in the index"
>
>
>
> ... I don't get a hit.  I'm using the StandardAnalyzer for searching.
> I've tested this with Luke and it doesn't work there either.  What am
I
> missing?
>
>
>
> Thanks,
>
>
>
> Paul
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 21:53:49 2010
Return-Path: <java-user-return-45153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47693 invoked from network); 24 Feb 2010 21:53:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 21:53:49 -0000
Received: (qmail 24663 invoked by uid 500); 24 Feb 2010 21:53:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24574 invoked by uid 500); 24 Feb 2010 21:53:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24564 invoked by uid 99); 24 Feb 2010 21:53:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 21:53:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [149.8.64.32] (HELO mclmx2.mail.saic.com) (149.8.64.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 21:53:38 +0000
Received: from 0015-its-sbg02.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx2.mail.saic.com with ESMTP id BT-MMP-3015502 for java-user@lucene.apache.org; Wed, 24 Feb 2010 16:53:10 -0500
X-AuditID: 9508407d-b7ca9ae0000009aa-ec-4b859fc74c5d
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg02.saic.com (Symantec Brightmail Gateway) with SMTP id ED.26.02474.7CF958B4; Wed, 24 Feb 2010 16:53:11 -0500 (EST)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 24 Feb 2010 16:53:11 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Phrase Search and NOT_ANALYZED
Date: Wed, 24 Feb 2010 16:53:09 -0500
Message-Id: <002052E02A48964A8035D9B6E8A1647DAF953E@0015-its-exmb01.us.saic.com>
In-Reply-To: <005201cab59a$a706c430$f5144c90$@com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Phrase Search and NOT_ANALYZED
Thread-Index: Acq1kx0A5NbyPhZsTd26oERipdC5hgAB1sXgAABHALA=
References: <002052E02A48964A8035D9B6E8A1647DAF94CB@0015-its-exmb01.us.saic.com> <005201cab59a$a706c430$f5144c90$@com>
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Feb 2010 21:53:11.0212 (UTC) FILETIME=[C1F556C0:01CAB59B]
X-Brightmail-Tracker: AAAAAA==

It still fails even when there are no stop words.  I'm going to try a
PhraseQuery instead of relying on the QueryParser.

Regards,

Paul=20


-----Original Message-----
From: java-user-return-45151-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.org
[mailto:java-user-return-45151-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.or=
g
] On Behalf Of Digy
Sent: Wednesday, February 24, 2010 4:45 PM
To: java-user@lucene.apache.org
Subject: RE: Phrase Search and NOT_ANALYZED

Since it is not analyzed, your text is stored as a single term in the
index
[something in the index].
But the query=20
	name:"something in the index"
is translated as :
  find 4 consecutive terms which have values "something", "in","the" and
"index"  respectively.
or if stop words are removed=20
  find 2 consecutive terms which have values "something" and "index"

You should either index it ANALYZED or use TermQuery while searching.

DIGY

-----Original Message-----
From: Murdoch, Paul [mailto:PAUL.B.MURDOCH@saic.com]=20
Sent: Wednesday, February 24, 2010 10:51 PM
To: java-user@lucene.apache.org
Subject: Phrase Search and NOT_ANALYZED

Hi,

=20

I'm indexing a field using the StandardAnalyzer 2.9.

=20

field =3D new Field(fieldName, fieldValue, Field.Store.YES,
Field.Index.NOT_ANALYZED);

=20

Let's say fieldName is "name" and fieldValue is "something in the
index".  When I perform the query...

=20

name:"something in the index"

=20

... I don't get a hit.  I'm using the StandardAnalyzer for searching.
I've tested this with Luke and it doesn't work there either.  What am I
missing?

=20

Thanks,

=20

Paul

=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 21:56:08 2010
Return-Path: <java-user-return-45154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48915 invoked from network); 24 Feb 2010 21:56:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 21:56:08 -0000
Received: (qmail 30334 invoked by uid 500); 24 Feb 2010 21:56:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30242 invoked by uid 500); 24 Feb 2010 21:56:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30232 invoked by uid 99); 24 Feb 2010 21:56:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 21:56:06 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 21:55:58 +0000
Received: by pvd12 with SMTP id 12so911993pvd.35
        for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 13:55:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=l+To2ZcLlWbwYMA681yzkD+tbbYoUjq4kqJLZmBKvUs=;
        b=UZefzmqAahgi8a6k/13YAr/qfx1s+rT44bxzsO5GtN9ftxuFjdeVje29eoBRC6oPWt
         FAaIoLogf+QpJwxdv6GPJAMpodnVbL40692SQSlSCEW/y0ZrnMEmwIHI3DKF80Ueuwaq
         uE635IR4gSQhm/bNT2lLVEmYW+3zff6CMlngY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=aTZ7ZIDXDxe+ZYxIpZ6JOCtm2d6+fZc0StUAxIeoYQYr0qo4eWzoCv1beRa/yCZW1c
         UR+2louWpYho2llf1a7goHE4bO3nYcarOEdVMpak74OEbEgHJC9z5yEWK4X+JrK046hK
         z6SDAJ2w2rfG/BNWEymRcYMW3U411t7SXkxnI=
MIME-Version: 1.0
Received: by 10.114.6.17 with SMTP id 17mr220154waf.96.1267048538427; Wed, 24 
	Feb 2010 13:55:38 -0800 (PST)
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DAF953D@0015-its-exmb01.us.saic.com>
References: <002052E02A48964A8035D9B6E8A1647DAF94CB@0015-its-exmb01.us.saic.com> 
	<359a92831002241322o5477944ck60d87e6eb0415eb0@mail.gmail.com> 
	<002052E02A48964A8035D9B6E8A1647DAF953D@0015-its-exmb01.us.saic.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 24 Feb 2010 16:55:18 -0500
Message-ID: <8f0ad1f31002241355m49f8fc99l99361f6ea29531@mail.gmail.com>
Subject: Re: Phrase Search and NOT_ANALYZED
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364571520bd24d04805fba04

--0016364571520bd24d04805fba04
Content-Type: text/plain; charset=UTF-8

check out KeywordAnalyzer!

On Wed, Feb 24, 2010 at 4:51 PM, Murdoch, Paul <PAUL.B.MURDOCH@saic.com>wrote:

> It still happens if there are no stop words in the fieldValue. For
> instance if fieldValue was "paul murdoch", Luke would show the query as
> name:"paul murdoch" but no hits are returned.  If I change to
> Field.Index.ANALYZED it works.  The problem with ANALYZED is that there
> is a possibility of picking up false positive hits.  With queries
> like...
>
> name:murdoch    // assume "murdoch" is another separate field value
>
> Obviously here I just want "murdoch" but since "paul murdoch" was
> indexed ANALYZED that will be returned as well.  Using quotes with
> Field.Index.NOT_ANALYZED isn't working for me. I'm thinking maybe it's
> the QueryParser so I'm going trying a PhraseQuery instead.
>
> Thanks,
>
> Paul
>
>
> -----Original Message-----
> From: java-user-return-45149-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> [mailto:java-user-return-45149-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> ] On Behalf Of Erick Erickson
> Sent: Wednesday, February 24, 2010 4:23 PM
> To: java-user@lucene.apache.org
> Subject: Re: Phrase Search and NOT_ANALYZED
>
> What does Luke's explain show you? That'll show you a lot about how
> the query gets transformed......
>
> My first guess is that stop words are messing you up....
>
> Erick
>
> On Wed, Feb 24, 2010 at 3:51 PM, Murdoch, Paul
> <PAUL.B.MURDOCH@saic.com>wrote:
>
> > Hi,
> >
> >
> >
> > I'm indexing a field using the StandardAnalyzer 2.9.
> >
> >
> >
> > field = new Field(fieldName, fieldValue, Field.Store.YES,
> > Field.Index.NOT_ANALYZED);
> >
> >
> >
> > Let's say fieldName is "name" and fieldValue is "something in the
> > index".  When I perform the query...
> >
> >
> >
> > name:"something in the index"
> >
> >
> >
> > ... I don't get a hit.  I'm using the StandardAnalyzer for searching.
> > I've tested this with Luke and it doesn't work there either.  What am
> I
> > missing?
> >
> >
> >
> > Thanks,
> >
> >
> >
> > Paul
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--0016364571520bd24d04805fba04--

From java-user-return-45155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 22:02:01 2010
Return-Path: <java-user-return-45155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53665 invoked from network); 24 Feb 2010 22:02:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 22:02:00 -0000
Received: (qmail 45294 invoked by uid 500); 24 Feb 2010 22:01:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45232 invoked by uid 500); 24 Feb 2010 22:01:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45222 invoked by uid 99); 24 Feb 2010 22:01:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 22:01:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [149.8.64.10] (HELO mclmx.mail.saic.com) (149.8.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 22:01:50 +0000
Received: from 0015-its-sbg02.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx.mail.saic.com with ESMTP id BT-MMP-3062974 for java-user@lucene.apache.org; Wed, 24 Feb 2010 17:01:18 -0500
X-AuditID: 9508407d-b7ca9ae0000009aa-20-4b85a1ae5923
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg02.saic.com (Symantec Brightmail Gateway) with SMTP id 4A.D6.02474.EA1A58B4; Wed, 24 Feb 2010 17:01:18 -0500 (EST)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 24 Feb 2010 17:01:18 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: Phrase Search and NOT_ANALYZED
Date: Wed, 24 Feb 2010 17:01:17 -0500
Message-Id: <002052E02A48964A8035D9B6E8A1647DAF9543@0015-its-exmb01.us.saic.com>
In-Reply-To: <8f0ad1f31002241355m49f8fc99l99361f6ea29531@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Phrase Search and NOT_ANALYZED
Thread-Index: Acq1nDHiYO9Lbf8MQ/2mb58CHN5tlgAAGJvw
References: <002052E02A48964A8035D9B6E8A1647DAF94CB@0015-its-exmb01.us.saic.com> <359a92831002241322o5477944ck60d87e6eb0415eb0@mail.gmail.com> <002052E02A48964A8035D9B6E8A1647DAF953D@0015-its-exmb01.us.saic.com> <8f0ad1f31002241355m49f8fc99l99361f6ea29531@mail.gmail.com>
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Feb 2010 22:01:18.0834 (UTC) FILETIME=[E49A8D20:01CAB59C]
X-Brightmail-Tracker: AAAAAA==

VGhhbmtzLA0KDQpJJ3ZlIGJlZW4gbG9va2luZyBhdCB0aGF0IG9uZSB0b28uICBJJ20gdHJ5aW5n
IHRvIG1ha2UgaXQgaGFwcGVuIHdpdGggdGhlIFN0YW5kYXJkQW5hbHl6ZXIuICBVbmZvcnR1bmF0
ZWx5LCBJIHRoaW5rIEkgc2VlIHNvbWUgcmVkZXNpZ24gZm9yIG1vcmUgcm9idXN0bmVzcyBpbiB0
aGUgZnV0dXJlLg0KDQpDaGVlcnMsDQoNClBhdWwgDQoNCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdl
LS0tLS0NCkZyb206IGphdmEtdXNlci1yZXR1cm4tNDUxNTQtUEFVTC5CLk1VUkRPQ0g9c2FpYy5j
b21AbHVjZW5lLmFwYWNoZS5vcmcgW21haWx0bzpqYXZhLXVzZXItcmV0dXJuLTQ1MTU0LVBBVUwu
Qi5NVVJET0NIPXNhaWMuY29tQGx1Y2VuZS5hcGFjaGUub3JnXSBPbiBCZWhhbGYgT2YgUm9iZXJ0
IE11aXINClNlbnQ6IFdlZG5lc2RheSwgRmVicnVhcnkgMjQsIDIwMTAgNDo1NSBQTQ0KVG86IGph
dmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUmU6IFBocmFzZSBTZWFyY2ggYW5k
IE5PVF9BTkFMWVpFRA0KDQpjaGVjayBvdXQgS2V5d29yZEFuYWx5emVyIQ0KDQpPbiBXZWQsIEZl
YiAyNCwgMjAxMCBhdCA0OjUxIFBNLCBNdXJkb2NoLCBQYXVsIDxQQVVMLkIuTVVSRE9DSEBzYWlj
LmNvbT53cm90ZToNCg0KPiBJdCBzdGlsbCBoYXBwZW5zIGlmIHRoZXJlIGFyZSBubyBzdG9wIHdv
cmRzIGluIHRoZSBmaWVsZFZhbHVlLiBGb3INCj4gaW5zdGFuY2UgaWYgZmllbGRWYWx1ZSB3YXMg
InBhdWwgbXVyZG9jaCIsIEx1a2Ugd291bGQgc2hvdyB0aGUgcXVlcnkgYXMNCj4gbmFtZToicGF1
bCBtdXJkb2NoIiBidXQgbm8gaGl0cyBhcmUgcmV0dXJuZWQuICBJZiBJIGNoYW5nZSB0bw0KPiBG
aWVsZC5JbmRleC5BTkFMWVpFRCBpdCB3b3Jrcy4gIFRoZSBwcm9ibGVtIHdpdGggQU5BTFlaRUQg
aXMgdGhhdCB0aGVyZQ0KPiBpcyBhIHBvc3NpYmlsaXR5IG9mIHBpY2tpbmcgdXAgZmFsc2UgcG9z
aXRpdmUgaGl0cy4gIFdpdGggcXVlcmllcw0KPiBsaWtlLi4uDQo+DQo+IG5hbWU6bXVyZG9jaCAg
ICAvLyBhc3N1bWUgIm11cmRvY2giIGlzIGFub3RoZXIgc2VwYXJhdGUgZmllbGQgdmFsdWUNCj4N
Cj4gT2J2aW91c2x5IGhlcmUgSSBqdXN0IHdhbnQgIm11cmRvY2giIGJ1dCBzaW5jZSAicGF1bCBt
dXJkb2NoIiB3YXMNCj4gaW5kZXhlZCBBTkFMWVpFRCB0aGF0IHdpbGwgYmUgcmV0dXJuZWQgYXMg
d2VsbC4gIFVzaW5nIHF1b3RlcyB3aXRoDQo+IEZpZWxkLkluZGV4Lk5PVF9BTkFMWVpFRCBpc24n
dCB3b3JraW5nIGZvciBtZS4gSSdtIHRoaW5raW5nIG1heWJlIGl0J3MNCj4gdGhlIFF1ZXJ5UGFy
c2VyIHNvIEknbSBnb2luZyB0cnlpbmcgYSBQaHJhc2VRdWVyeSBpbnN0ZWFkLg0KPg0KPiBUaGFu
a3MsDQo+DQo+IFBhdWwNCj4NCj4NCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJv
bTogamF2YS11c2VyLXJldHVybi00NTE0OS1QQVVMLkIuTVVSRE9DSD1zYWljLmNvbUBsdWNlbmUu
YXBhY2hlLm9yZw0KPiBbbWFpbHRvOmphdmEtdXNlci1yZXR1cm4tNDUxNDktUEFVTC5CLk1VUkRP
Q0g9c2FpYy5jb21AbHVjZW5lLmFwYWNoZS5vcmcNCj4gXSBPbiBCZWhhbGYgT2YgRXJpY2sgRXJp
Y2tzb24NCj4gU2VudDogV2VkbmVzZGF5LCBGZWJydWFyeSAyNCwgMjAxMCA0OjIzIFBNDQo+IFRv
OiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogUmU6IFBocmFzZSBTZWFy
Y2ggYW5kIE5PVF9BTkFMWVpFRA0KPg0KPiBXaGF0IGRvZXMgTHVrZSdzIGV4cGxhaW4gc2hvdyB5
b3U/IFRoYXQnbGwgc2hvdyB5b3UgYSBsb3QgYWJvdXQgaG93DQo+IHRoZSBxdWVyeSBnZXRzIHRy
YW5zZm9ybWVkLi4uLi4uDQo+DQo+IE15IGZpcnN0IGd1ZXNzIGlzIHRoYXQgc3RvcCB3b3JkcyBh
cmUgbWVzc2luZyB5b3UgdXAuLi4uDQo+DQo+IEVyaWNrDQo+DQo+IE9uIFdlZCwgRmViIDI0LCAy
MDEwIGF0IDM6NTEgUE0sIE11cmRvY2gsIFBhdWwNCj4gPFBBVUwuQi5NVVJET0NIQHNhaWMuY29t
Pndyb3RlOg0KPg0KPiA+IEhpLA0KPiA+DQo+ID4NCj4gPg0KPiA+IEknbSBpbmRleGluZyBhIGZp
ZWxkIHVzaW5nIHRoZSBTdGFuZGFyZEFuYWx5emVyIDIuOS4NCj4gPg0KPiA+DQo+ID4NCj4gPiBm
aWVsZCA9IG5ldyBGaWVsZChmaWVsZE5hbWUsIGZpZWxkVmFsdWUsIEZpZWxkLlN0b3JlLllFUywN
Cj4gPiBGaWVsZC5JbmRleC5OT1RfQU5BTFlaRUQpOw0KPiA+DQo+ID4NCj4gPg0KPiA+IExldCdz
IHNheSBmaWVsZE5hbWUgaXMgIm5hbWUiIGFuZCBmaWVsZFZhbHVlIGlzICJzb21ldGhpbmcgaW4g
dGhlDQo+ID4gaW5kZXgiLiAgV2hlbiBJIHBlcmZvcm0gdGhlIHF1ZXJ5Li4uDQo+ID4NCj4gPg0K
PiA+DQo+ID4gbmFtZToic29tZXRoaW5nIGluIHRoZSBpbmRleCINCj4gPg0KPiA+DQo+ID4NCj4g
PiAuLi4gSSBkb24ndCBnZXQgYSBoaXQuICBJJ20gdXNpbmcgdGhlIFN0YW5kYXJkQW5hbHl6ZXIg
Zm9yIHNlYXJjaGluZy4NCj4gPiBJJ3ZlIHRlc3RlZCB0aGlzIHdpdGggTHVrZSBhbmQgaXQgZG9l
c24ndCB3b3JrIHRoZXJlIGVpdGhlci4gIFdoYXQgYW0NCj4gSQ0KPiA+IG1pc3Npbmc/DQo+ID4N
Cj4gPg0KPiA+DQo+ID4gVGhhbmtzLA0KPiA+DQo+ID4NCj4gPg0KPiA+IFBhdWwNCj4gPg0KPiA+
DQo+ID4NCj4gPg0KPg0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDog
amF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFs
IGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+DQo+
DQoNCg0KLS0gDQpSb2JlcnQgTXVpcg0KcmNtdWlyQGdtYWlsLmNvbQ0K


From java-user-return-45156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 22:11:16 2010
Return-Path: <java-user-return-45156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60993 invoked from network); 24 Feb 2010 22:11:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 22:11:16 -0000
Received: (qmail 53852 invoked by uid 500); 24 Feb 2010 22:11:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53782 invoked by uid 500); 24 Feb 2010 22:11:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53772 invoked by uid 99); 24 Feb 2010 22:11:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 22:11:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [149.8.64.10] (HELO mclmx.mail.saic.com) (149.8.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 22:11:06 +0000
Received: from 0015-its-sbg03.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx.mail.saic.com with ESMTP id BT-MMP-3064978 for java-user@lucene.apache.org; Wed, 24 Feb 2010 17:10:33 -0500
X-AuditID: 95084018-b7cceae000000ea8-06-4b85a3d96991
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg03.saic.com (Symantec Brightmail Gateway) with SMTP id E2.A7.03752.9D3A58B4; Wed, 24 Feb 2010 17:10:33 -0500 (EST)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 24 Feb 2010 17:10:33 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: Phrase Search and NOT_ANALYZED
Date: Wed, 24 Feb 2010 17:10:32 -0500
Message-Id: <002052E02A48964A8035D9B6E8A1647DAF954C@0015-its-exmb01.us.saic.com>
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DAF9543@0015-its-exmb01.us.saic.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Phrase Search and NOT_ANALYZED
Thread-Index: Acq1nDHiYO9Lbf8MQ/2mb58CHN5tlgAAGJvwAABiHrA=
References: <002052E02A48964A8035D9B6E8A1647DAF94CB@0015-its-exmb01.us.saic.com> <359a92831002241322o5477944ck60d87e6eb0415eb0@mail.gmail.com> <002052E02A48964A8035D9B6E8A1647DAF953D@0015-its-exmb01.us.saic.com> <8f0ad1f31002241355m49f8fc99l99361f6ea29531@mail.gmail.com> <002052E02A48964A8035D9B6E8A1647DAF9543@0015-its-exmb01.us.saic.com>
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Feb 2010 22:10:33.0708 (UTC) FILETIME=[2F559AC0:01CAB59E]
X-Brightmail-Tracker: AAAAAA==

UGhyYXNlUXVlcnkgYXBwZWFycyB0byBiZSB3b3JraW5nLiAgVGhhbmtzIHRvIGFsbC4NCg0KUGF1
bCANCg0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogamF2YS11c2VyLXJldHVy
bi00NTE1NS1QQVVMLkIuTVVSRE9DSD1zYWljLmNvbUBsdWNlbmUuYXBhY2hlLm9yZyBbbWFpbHRv
OmphdmEtdXNlci1yZXR1cm4tNDUxNTUtUEFVTC5CLk1VUkRPQ0g9c2FpYy5jb21AbHVjZW5lLmFw
YWNoZS5vcmddIE9uIEJlaGFsZiBPZiBNdXJkb2NoLCBQYXVsDQpTZW50OiBXZWRuZXNkYXksIEZl
YnJ1YXJ5IDI0LCAyMDEwIDU6MDEgUE0NClRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcN
ClN1YmplY3Q6IFJFOiBQaHJhc2UgU2VhcmNoIGFuZCBOT1RfQU5BTFlaRUQNCg0KVGhhbmtzLA0K
DQpJJ3ZlIGJlZW4gbG9va2luZyBhdCB0aGF0IG9uZSB0b28uICBJJ20gdHJ5aW5nIHRvIG1ha2Ug
aXQgaGFwcGVuIHdpdGggdGhlIFN0YW5kYXJkQW5hbHl6ZXIuICBVbmZvcnR1bmF0ZWx5LCBJIHRo
aW5rIEkgc2VlIHNvbWUgcmVkZXNpZ24gZm9yIG1vcmUgcm9idXN0bmVzcyBpbiB0aGUgZnV0dXJl
Lg0KDQpDaGVlcnMsDQoNClBhdWwgDQoNCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZy
b206IGphdmEtdXNlci1yZXR1cm4tNDUxNTQtUEFVTC5CLk1VUkRPQ0g9c2FpYy5jb21AbHVjZW5l
LmFwYWNoZS5vcmcgW21haWx0bzpqYXZhLXVzZXItcmV0dXJuLTQ1MTU0LVBBVUwuQi5NVVJET0NI
PXNhaWMuY29tQGx1Y2VuZS5hcGFjaGUub3JnXSBPbiBCZWhhbGYgT2YgUm9iZXJ0IE11aXINClNl
bnQ6IFdlZG5lc2RheSwgRmVicnVhcnkgMjQsIDIwMTAgNDo1NSBQTQ0KVG86IGphdmEtdXNlckBs
dWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUmU6IFBocmFzZSBTZWFyY2ggYW5kIE5PVF9BTkFM
WVpFRA0KDQpjaGVjayBvdXQgS2V5d29yZEFuYWx5emVyIQ0KDQpPbiBXZWQsIEZlYiAyNCwgMjAx
MCBhdCA0OjUxIFBNLCBNdXJkb2NoLCBQYXVsIDxQQVVMLkIuTVVSRE9DSEBzYWljLmNvbT53cm90
ZToNCg0KPiBJdCBzdGlsbCBoYXBwZW5zIGlmIHRoZXJlIGFyZSBubyBzdG9wIHdvcmRzIGluIHRo
ZSBmaWVsZFZhbHVlLiBGb3INCj4gaW5zdGFuY2UgaWYgZmllbGRWYWx1ZSB3YXMgInBhdWwgbXVy
ZG9jaCIsIEx1a2Ugd291bGQgc2hvdyB0aGUgcXVlcnkgYXMNCj4gbmFtZToicGF1bCBtdXJkb2No
IiBidXQgbm8gaGl0cyBhcmUgcmV0dXJuZWQuICBJZiBJIGNoYW5nZSB0bw0KPiBGaWVsZC5JbmRl
eC5BTkFMWVpFRCBpdCB3b3Jrcy4gIFRoZSBwcm9ibGVtIHdpdGggQU5BTFlaRUQgaXMgdGhhdCB0
aGVyZQ0KPiBpcyBhIHBvc3NpYmlsaXR5IG9mIHBpY2tpbmcgdXAgZmFsc2UgcG9zaXRpdmUgaGl0
cy4gIFdpdGggcXVlcmllcw0KPiBsaWtlLi4uDQo+DQo+IG5hbWU6bXVyZG9jaCAgICAvLyBhc3N1
bWUgIm11cmRvY2giIGlzIGFub3RoZXIgc2VwYXJhdGUgZmllbGQgdmFsdWUNCj4NCj4gT2J2aW91
c2x5IGhlcmUgSSBqdXN0IHdhbnQgIm11cmRvY2giIGJ1dCBzaW5jZSAicGF1bCBtdXJkb2NoIiB3
YXMNCj4gaW5kZXhlZCBBTkFMWVpFRCB0aGF0IHdpbGwgYmUgcmV0dXJuZWQgYXMgd2VsbC4gIFVz
aW5nIHF1b3RlcyB3aXRoDQo+IEZpZWxkLkluZGV4Lk5PVF9BTkFMWVpFRCBpc24ndCB3b3JraW5n
IGZvciBtZS4gSSdtIHRoaW5raW5nIG1heWJlIGl0J3MNCj4gdGhlIFF1ZXJ5UGFyc2VyIHNvIEkn
bSBnb2luZyB0cnlpbmcgYSBQaHJhc2VRdWVyeSBpbnN0ZWFkLg0KPg0KPiBUaGFua3MsDQo+DQo+
IFBhdWwNCj4NCj4NCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogamF2YS11
c2VyLXJldHVybi00NTE0OS1QQVVMLkIuTVVSRE9DSD1zYWljLmNvbUBsdWNlbmUuYXBhY2hlLm9y
Zw0KPiBbbWFpbHRvOmphdmEtdXNlci1yZXR1cm4tNDUxNDktUEFVTC5CLk1VUkRPQ0g9c2FpYy5j
b21AbHVjZW5lLmFwYWNoZS5vcmcNCj4gXSBPbiBCZWhhbGYgT2YgRXJpY2sgRXJpY2tzb24NCj4g
U2VudDogV2VkbmVzZGF5LCBGZWJydWFyeSAyNCwgMjAxMCA0OjIzIFBNDQo+IFRvOiBqYXZhLXVz
ZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogUmU6IFBocmFzZSBTZWFyY2ggYW5kIE5P
VF9BTkFMWVpFRA0KPg0KPiBXaGF0IGRvZXMgTHVrZSdzIGV4cGxhaW4gc2hvdyB5b3U/IFRoYXQn
bGwgc2hvdyB5b3UgYSBsb3QgYWJvdXQgaG93DQo+IHRoZSBxdWVyeSBnZXRzIHRyYW5zZm9ybWVk
Li4uLi4uDQo+DQo+IE15IGZpcnN0IGd1ZXNzIGlzIHRoYXQgc3RvcCB3b3JkcyBhcmUgbWVzc2lu
ZyB5b3UgdXAuLi4uDQo+DQo+IEVyaWNrDQo+DQo+IE9uIFdlZCwgRmViIDI0LCAyMDEwIGF0IDM6
NTEgUE0sIE11cmRvY2gsIFBhdWwNCj4gPFBBVUwuQi5NVVJET0NIQHNhaWMuY29tPndyb3RlOg0K
Pg0KPiA+IEhpLA0KPiA+DQo+ID4NCj4gPg0KPiA+IEknbSBpbmRleGluZyBhIGZpZWxkIHVzaW5n
IHRoZSBTdGFuZGFyZEFuYWx5emVyIDIuOS4NCj4gPg0KPiA+DQo+ID4NCj4gPiBmaWVsZCA9IG5l
dyBGaWVsZChmaWVsZE5hbWUsIGZpZWxkVmFsdWUsIEZpZWxkLlN0b3JlLllFUywNCj4gPiBGaWVs
ZC5JbmRleC5OT1RfQU5BTFlaRUQpOw0KPiA+DQo+ID4NCj4gPg0KPiA+IExldCdzIHNheSBmaWVs
ZE5hbWUgaXMgIm5hbWUiIGFuZCBmaWVsZFZhbHVlIGlzICJzb21ldGhpbmcgaW4gdGhlDQo+ID4g
aW5kZXgiLiAgV2hlbiBJIHBlcmZvcm0gdGhlIHF1ZXJ5Li4uDQo+ID4NCj4gPg0KPiA+DQo+ID4g
bmFtZToic29tZXRoaW5nIGluIHRoZSBpbmRleCINCj4gPg0KPiA+DQo+ID4NCj4gPiAuLi4gSSBk
b24ndCBnZXQgYSBoaXQuICBJJ20gdXNpbmcgdGhlIFN0YW5kYXJkQW5hbHl6ZXIgZm9yIHNlYXJj
aGluZy4NCj4gPiBJJ3ZlIHRlc3RlZCB0aGlzIHdpdGggTHVrZSBhbmQgaXQgZG9lc24ndCB3b3Jr
IHRoZXJlIGVpdGhlci4gIFdoYXQgYW0NCj4gSQ0KPiA+IG1pc3Npbmc/DQo+ID4NCj4gPg0KPiA+
DQo+ID4gVGhhbmtzLA0KPiA+DQo+ID4NCj4gPg0KPiA+IFBhdWwNCj4gPg0KPiA+DQo+ID4NCj4g
Pg0KPg0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2Vy
LXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRz
LCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+DQo+DQoNCg0KLS0g
DQpSb2JlcnQgTXVpcg0KcmNtdWlyQGdtYWlsLmNvbQ0K


From java-user-return-45157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 22:16:37 2010
Return-Path: <java-user-return-45157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64123 invoked from network); 24 Feb 2010 22:16:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 22:16:36 -0000
Received: (qmail 71188 invoked by uid 500); 24 Feb 2010 22:16:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71078 invoked by uid 500); 24 Feb 2010 22:16:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71047 invoked by uid 99); 24 Feb 2010 22:16:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 22:16:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bradfordstephens@gmail.com designates 209.85.210.188 as permitted sender)
Received: from [209.85.210.188] (HELO mail-yx0-f188.google.com) (209.85.210.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 22:16:20 +0000
Received: by yxe26 with SMTP id 26so124671yxe.29
        for <multiple recipients>; Wed, 24 Feb 2010 14:16:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=tnYpSDcMZaP1MAlhaF9ny8uhtb/j6kynioukjO5D3hI=;
        b=pw9YCkcOKIOl16lLfOjN0og6rboe1atUyGUet6eJPz2XKaTiko4HlZt2NZz4AMDqXy
         DZ95/qijChrLga85OfAyqIcfliTChYYxm+piFqoISAXybve84mHx70E+PLJp61uwULd6
         4oVulw3lsHptTknT8LinIMKgvf5P4GRwJh2y8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=TYS3HEA52jM3sCM3SNX4BpzOF6HMQfLjQ6W8jPIRtEhYU+5jfYmGf/wflppwR3Efk8
         5iKuEWLmw4IqaYO5+6lN5ZWsPaiALdMX+cZeRgKLlCt0zkSQbYJi4ARSMQK3gJAMd/vl
         qqV/EnjeZIKOZNkWOSyzmrSmYcrCYG0T189Sw=
MIME-Version: 1.0
Received: by 10.90.183.7 with SMTP id g7mr669980agf.42.1267049759857; Wed, 24 
	Feb 2010 14:15:59 -0800 (PST)
Date: Wed, 24 Feb 2010 14:15:59 -0800
Message-ID: <860544ed1002241415s7b6d0b2fya9a5ebbc27e9cebd@mail.gmail.com>
Subject: Seattle Hadoop/Scalability/NoSQL Meetup Tonight!
From: Bradford Stephens <bradfordstephens@gmail.com>
To: hbase-user@hadoop.apache.org, core-user@hadoop.apache.org, 
	solr-user@lucene.apache.org, java-user@lucene.apache.org, 
	pig-user@hadoop.apache.org, nutch-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

The Seattle Hadoop/Scalability/NoSQL (yeah, we vary the title) meetup
is tonight! We're going to have a guest speaker from MongoDB :)

As always, it's at the University of Washington, Allen Computer
Science building, Room 303 at 6:45pm. You can find a map here:
http://www.washington.edu/home/maps/southcentral.html?cse

If you can, please RSVP here (not required, but very nice):
http://www.meetup.com/Seattle-Hadoop-HBase-NoSQL-Meetup/

--
http://www.drawntoscalehq.com -- =A0The intuitive, cloud-scale data
solution. Process, store, query, search, and serve all your data.

http://www.roadtofailure.com -- The Fringes of Scalability, Social
Media, and Computer Science

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 23:42:24 2010
Return-Path: <java-user-return-45158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7702 invoked from network); 24 Feb 2010 23:42:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 23:42:23 -0000
Received: (qmail 62805 invoked by uid 500); 24 Feb 2010 23:42:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62659 invoked by uid 500); 24 Feb 2010 23:42:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62651 invoked by uid 99); 24 Feb 2010 23:42:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 23:42:20 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [198.147.195.5] (HELO flicker.bmc.com) (198.147.195.5)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Feb 2010 23:42:12 +0000
Received: by flicker.bmc.com (Postfix, from userid 13749)
	id 1B9941E6609; Wed, 24 Feb 2010 16:43:57 -0700 (MST)
Received: from PHX-HTPRD-01.adprod.bmc.com (phx-htprd-01.adprod.bmc.com [172.24.32.7])
	by flicker.bmc.com (Postfix) with ESMTP id 13C021E6578
	for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 16:43:57 -0700 (MST)
Received: from PHXCCRPRD02.adprod.bmc.com ([172.24.32.181]) by
 PHX-HTPRD-01.adprod.bmc.com ([172.24.32.7]) with mapi; Wed, 24 Feb 2010
 16:40:50 -0700
From: "Woolf, Ross" <Ross_Woolf@BMC.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 24 Feb 2010 16:40:07 -0700
Subject: Not getting any highlighter results when using wildcards
Thread-Topic: Not getting any highlighter results when using wildcards
Thread-Index: Acq1nuBkjSZtQZKDQ2KW/7vCVNxkxgAChmzw
Message-ID: <492379B6AA909E4FAF672AACCA0EADC24A3DD45FFA@PHXCCRPRD02.adprod.bmc.com>
References: <860544ed1002241415s7b6d0b2fya9a5ebbc27e9cebd@mail.gmail.com>
In-Reply-To: <860544ed1002241415s7b6d0b2fya9a5ebbc27e9cebd@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-cr-hashedpuzzle: AGzt AJwD A45v BaHL DT/N Dlpg E6VT Gv0F HdOd HzNN IOdz
 IXUB IqXP ItV4 KBgm
 KzyI;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{C3013F9C-6481-4E9E-AC3F-BBD4327067E5};cgBvAHMAcwBfAHcAbwBvAGwAZgBAAGIAbQBjAC4AYwBvAG0A;Wed,
 24 Feb 2010 23:40:08
 GMT;TgBvAHQAIABnAGUAdAB0AGkAbgBnACAAYQBuAHkAIABoAGkAZwBoAGwAaQBnAGgAdABlAHIAIAByAGUAcwB1AGwAdABzACAAdwBoAGUAbgAgAHUAcwBpAG4AZwAgAHcAaQBsAGQAYwBhAHIAZABzAA==
x-cr-puzzleid: {C3013F9C-6481-4E9E-AC3F-BBD4327067E5}
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

When I use a WildcardQuery with the highlighter, I don't get any fragments =
back, I get null returned to strBetText.  If I just use a term query then i=
t works. =20

TokenStream tokenStream =3D TokenSources.getTokenStream(indexReader, docId,=
 strFieldName);
QueryScorer scorer =3D new QueryScorer(query, strFieldName);
Fragmenter fragmenter =3D new SimpleSpanFragmenter(scorer);
SimpleHTMLFormatter formatter =3D new SimpleHTMLFormatter("[", "]");
Highlighter highlighter =3D new Highlighter(formatter, scorer);
highlighter.setTextFragmenter(fragmenter);
String strBestText =3D null;
strBestText =3D highlighter.getBestFragment(tokenStream, strText);

In the Lucene In Action book it mentions that if you are using wildcard tha=
t you need to call rewrite on query before using it.  I have tried doing th=
is but in my debugger I still see the query with the wildcard and it does n=
ot look as if it has rewritten it. =20

Is there a problem using wildcards in the highlighter, or am I not using re=
write on my query correctly? (why would code inside the highlighter not cal=
l the rewrite automatically?). =20

Any help would be appreciated.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 24 23:54:49 2010
Return-Path: <java-user-return-45159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10650 invoked from network); 24 Feb 2010 23:54:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Feb 2010 23:54:49 -0000
Received: (qmail 75974 invoked by uid 500); 24 Feb 2010 23:54:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75934 invoked by uid 500); 24 Feb 2010 23:54:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75926 invoked by uid 99); 24 Feb 2010 23:54:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 23:54:47 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of andrew.bruno@gmail.com designates 209.85.223.186 as permitted sender)
Received: from [209.85.223.186] (HELO mail-iw0-f186.google.com) (209.85.223.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Feb 2010 23:54:39 +0000
Received: by iwn16 with SMTP id 16so1856744iwn.20
        for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 15:54:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=q6sM1Xw6X7Tw0cADlE3Dh7nGeBXdycIyu9eU/3Uv3mQ=;
        b=tRTYqJYI0HGuoiGkSHku1hLMBpWRmhmf8OW2en7nMp+7EnsWONNOXW/2WX8O/Sx4gS
         WHqIiqtItfHT7I0XEK57L/J9Y0PeFrowOpj7MogY1z7l+iWIWpMdAPe/CoCPnYRywXuF
         ZV5SLyHcLn14Nmx/qVCC83vErk+Nm2Kr5nTz8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=kXmx7EzjxlIWbSRZSNZT7afsQgUSSHUU4F/MXhZpM8CPdrWY5oG2Nt/gt2BA0fUKaA
         Kar/LLQfEnz+0Dh6/KHebbfCFAXRVhjLydDn45GWIb8z+vWBZ5vNgUsOv4TMha0s3SzR
         B8/OzJGVOYaw9R1XqbGgjTgz1yajwhwbzn8Pc=
MIME-Version: 1.0
Received: by 10.231.192.131 with SMTP id dq3mr227149ibb.61.1267055658326; Wed, 
	24 Feb 2010 15:54:18 -0800 (PST)
Date: Thu, 25 Feb 2010 10:54:18 +1100
Message-ID: <9b906c961002241554x7a3e5225q3aa856bc1f99ebbe@mail.gmail.com>
Subject: NAS vs SAN vs Server Disk RAID
From: Andrew Bruno <andrew.bruno@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367d6ff46cdbd00480616270
X-Virus-Checked: Checked by ClamAV on apache.org

--0016367d6ff46cdbd00480616270
Content-Type: text/plain; charset=ISO-8859-1

Hello,

I am working with an application that offers its customers their own index,
primary two indexes for different needs per customer.

As our business is growing and growing, I now have a situation where the web
application has its customer's index on one volume, and its getting close to
1Tbyte.

There are lots of updates and inserts, and plenty of searches.  As you can
imagine, the application is starting to slow down heavily, especially during
high traffic time when documents (PDF, DOCs, etc) are indexed.

Since the disk IO on the server is high, our datacenter engineers suggested
we look at NAS or SAN, for performance gain, and for future growth.

Has anyone had any experience in running Lucene2.0/Compass in these
environments?  Do you know of any case studies, whitepapers, web sites?

Thanks
Andrew

--0016367d6ff46cdbd00480616270--

From java-user-return-45160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 01:29:01 2010
Return-Path: <java-user-return-45160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65007 invoked from network); 25 Feb 2010 01:29:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 01:29:01 -0000
Received: (qmail 60034 invoked by uid 500); 25 Feb 2010 01:28:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59999 invoked by uid 500); 25 Feb 2010 01:28:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59991 invoked by uid 99); 25 Feb 2010 01:28:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 01:28:59 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kaykay.unique@gmail.com designates 209.85.219.221 as permitted sender)
Received: from [209.85.219.221] (HELO mail-ew0-f221.google.com) (209.85.219.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 01:28:51 +0000
Received: by ewy21 with SMTP id 21so1350343ewy.5
        for <java-user@lucene.apache.org>; Wed, 24 Feb 2010 17:28:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=SCtMwin6bdXD+6SLdfJm29T2FirdKX1QeaX+EltUezo=;
        b=WnP+wJbjeix6eNwtRo6Cy3e3Dko13H+YXIzoJ/HHnQrTa/3aowQvIw9746RyrskTAz
         ZapbcKkkg3spAeqS4XQlrIdHLGYaKZ0HxDv3eUN92NUCiR3B/+DiG4+pg+V+VaoncqfR
         xC3Hj00y2a6FQ+cfBJtiWxsTiAc6yvcHiR58U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=uOERgCFzMhu2c6AfZ0ppt2cxDFtZAbJRMEeDv7V2P+atX/xDzFsbVGrNLYmv4ImsRv
         +ex9Vi257lHfiwk4xYpyF/tTM5wPxqfq4vI4CykGgSzCepbeNVszVlhshLCAzdnuagEs
         QgvnNp+newV820j7EX5+VcijeFmQ+2qsntjXU=
Received: by 10.213.104.69 with SMTP id n5mr878553ebo.20.1267061309830;
        Wed, 24 Feb 2010 17:28:29 -0800 (PST)
Received: from KayKayVoldeMort.local ([38.99.42.113])
        by mx.google.com with ESMTPS id 13sm1240530ewy.5.2010.02.24.17.28.27
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 24 Feb 2010 17:28:28 -0800 (PST)
Message-ID: <4B85D351.6030708@gmail.com>
Date: Wed, 24 Feb 2010 17:33:05 -0800
From: Kay Kay <kaykay.unique@gmail.com>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.1.7) Gecko/20100111 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: NAS vs SAN vs Server Disk RAID
References: <9b906c961002241554x7a3e5225q3aa856bc1f99ebbe@mail.gmail.com>
In-Reply-To: <9b906c961002241554x7a3e5225q3aa856bc1f99ebbe@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

It might be useful to check out katta , from an infrastructure perspective.


On 2/24/10 3:54 PM, Andrew Bruno wrote:
> Hello,
>
> I am working with an application that offers its customers their own index,
> primary two indexes for different needs per customer.
>
> As our business is growing and growing, I now have a situation where the web
> application has its customer's index on one volume, and its getting close to
> 1Tbyte.
>
> There are lots of updates and inserts, and plenty of searches.  As you can
> imagine, the application is starting to slow down heavily, especially during
> high traffic time when documents (PDF, DOCs, etc) are indexed.
>
> Since the disk IO on the server is high, our datacenter engineers suggested
> we look at NAS or SAN, for performance gain, and for future growth.
>
> Has anyone had any experience in running Lucene2.0/Compass in these
> environments?  Do you know of any case studies, whitepapers, web sites?
>
> Thanks
> Andrew
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 04:14:52 2010
Return-Path: <java-user-return-45161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25978 invoked from network); 25 Feb 2010 04:14:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 04:14:52 -0000
Received: (qmail 56904 invoked by uid 500); 25 Feb 2010 04:14:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56807 invoked by uid 500); 25 Feb 2010 04:14:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56799 invoked by uid 99); 25 Feb 2010 04:14:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 04:14:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 04:14:42 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NkV7F-0004tl-SZ
	for java-user@lucene.apache.org; Wed, 24 Feb 2010 20:14:21 -0800
Message-ID: <27714347.post@talk.nabble.com>
Date: Wed, 24 Feb 2010 20:14:21 -0800 (PST)
From: PlusPlus <r.shahidinejad@gmail.com>
To: java-user@lucene.apache.org
Subject: Fuzzy membership of a term to the document
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: r.shahidinejad@gmail.com


Hi,

   I want to change the Lucene's similarity in a way that I can add Fuzzy
memberships to the terms of a document. Thus, TF value of a term in one
document is not always 1, it can add 0.7 to the value of the TF ( (In my
application, each term is contained in a document at most once). This
membership value is available before index time.

   On the other hand, each occurrence of a word will not be considered as 1
documentfrequency for the IDF formula. 

   I was wondering if I can change the TF and IDF values of the terms like
this. So far, I know that I can change the impact of TF values on the
scoring, but not this thing that I'm looking for. 

Best,
Reza


-- 
View this message in context: http://old.nabble.com/Fuzzy-membership-of-a-term-to-the-document-tp27714347p27714347.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 05:41:49 2010
Return-Path: <java-user-return-45162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49838 invoked from network); 25 Feb 2010 05:41:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 05:41:49 -0000
Received: (qmail 13891 invoked by uid 500); 25 Feb 2010 05:41:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13842 invoked by uid 500); 25 Feb 2010 05:41:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13834 invoked by uid 99); 25 Feb 2010 05:41:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 05:41:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.86.5.36] (HELO smtp109.mail.in.yahoo.com) (202.86.5.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Feb 2010 05:41:37 +0000
Received: (qmail 64318 invoked from network); 25 Feb 2010 05:41:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=A8I2HQEXj4I2FgHY9iB58r40a/PS9BSJ8KJid1hPx8iJ9OwrjddRau0WOIL+ivDbHxgK94e4TWjXG1aThAj4Ulmf6JZ4+ih7PipB5+zEI1wdh8LLNDkadqScBXBPlcUNiGzPrNrYHeCgxi6K2mcJKESgI1I3Jk+7OIRjMkkzUMg=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp109.mail.in.yahoo.com with SMTP; 25 Feb 2010 11:11:12 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: sI3btbEVM1nwitzViHgaYf7ONneYJ7kOS1EU4czmplxUTY4w4EGo0mqS_3JbipY0jHu.Vj6OtGuo8qrou54D9Ilwov1eSVZNwNVZn0HcwYMeQntNm4ap9RsANF5iNYfcHPLoDDRLct74qKp0gshIzOWr.IKB1D21Wcj8bbLUC8pBzNXp.hxQh_uBfGaQBlj2FBZAHAAP69ImStJGVwu8QCvVPUKlDnLOU1nms.IqZZo-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <6D0771BCC06B4995A4707D52BFC39A50@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
Subject: Re: If you could have one feature in Lucene...
Date: Thu, 25 Feb 2010 11:11:08 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5843
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579


1. Payload per document which could be updated without a need to update =
the entire document.=20
Usecase: The state of our indexed content will change based on the User =
action (Created/ Viewed/Deleted etc) and we are using Lucene as our =
database and we cannot use relational database only for this feature.=20

2. Offload fieldcache to disk
   As every one knows sorting consumes huge memory, there is a need to =
offload it to disk using external caching mechanism. There is lot of =
discussion on sorting memory consumption in the group and this would be =
in everone's wishlist.

3. Custom fieldcache
Currently fieldcache is created  with number of documents available in =
the index. In our case we are using single index having multiple tables, =
and it is differentiated by the "Type" field. Only one type is required =
to sort and others is just stored data and not participating in the =
sort. This will certanily reduce the memory consumption. We cannot =
create one index for each table, which will be difficult to maintain.

Regards
Ganesh =20


----- Original Message -----=20
From: "Grant Ingersoll" <gsingers@apache.org>
To: <java-user@lucene.apache.org>
Sent: Wednesday, February 24, 2010 7:12 PM
Subject: If you could have one feature in Lucene...


> What would it be?
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 08:01:17 2010
Return-Path: <java-user-return-45163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6470 invoked from network); 25 Feb 2010 08:01:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 08:01:17 -0000
Received: (qmail 29164 invoked by uid 500); 25 Feb 2010 08:01:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29055 invoked by uid 500); 25 Feb 2010 08:01:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29009 invoked by uid 99); 25 Feb 2010 08:01:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 08:01:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bradfordstephens@gmail.com designates 209.85.210.188 as permitted sender)
Received: from [209.85.210.188] (HELO mail-yx0-f188.google.com) (209.85.210.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 08:00:56 +0000
Received: by yxe26 with SMTP id 26so321982yxe.29
        for <multiple recipients>; Thu, 25 Feb 2010 00:00:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=qtT4iRV5B8nafV6CckJdO/br+/5JrmWE+9o00r4q/JI=;
        b=IxT/HP0PdmfpgyIlDa9pA7JY8MDvHP73hfFiPWCnbx9b+9t4mUKjyKcswcPx70qSzT
         Tz68jPWwTksT1lY1Hl0lGpRWfCV+/a2P/SksZLkjheD+irC+EjqTbVEGMJbsQyUf30wS
         A3lzpUKxJyBbf9icjNVjdhe+uTSzKwrCenVUs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=TbgGMSSL9r2f1n5CdBfl82zm4CDO7wqOzVuSLRCjU0gaqEbJrfModHfQsxAR1JjiNA
         UlAIE8FUfH/ErKbJEgpQmPgjottM79Yh7tsRpmbrugrvVGGcks5GxnGwfsQUfs7YUS8A
         83LkVB208HliCPUuO8j99ZA1kAi8Kj/Twb7Rw=
MIME-Version: 1.0
Received: by 10.90.40.4 with SMTP id n4mr393627agn.44.1267084830192; Thu, 25 
	Feb 2010 00:00:30 -0800 (PST)
In-Reply-To: <860544ed1002241415s7b6d0b2fya9a5ebbc27e9cebd@mail.gmail.com>
References: <860544ed1002241415s7b6d0b2fya9a5ebbc27e9cebd@mail.gmail.com>
Date: Thu, 25 Feb 2010 00:00:29 -0800
Message-ID: <860544ed1002250000u12e46812rfaf1eefef4167f24@mail.gmail.com>
Subject: Re: Seattle Hadoop/Scalability/NoSQL Meetup Tonight!
From: Bradford Stephens <bradfordstephens@gmail.com>
To: hbase-user@hadoop.apache.org, core-user@hadoop.apache.org, 
	solr-user@lucene.apache.org, java-user@lucene.apache.org, 
	pig-user@hadoop.apache.org, nutch-user@lucene.apache.org, 
	nosql-discussion@googlegroups.com
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for coming, everyone! We had around 25 people. A *huge*
success, for Seattle. And a big thanks to 10gen for sending Richard.

Can't wait to see you all next month.

On Wed, Feb 24, 2010 at 2:15 PM, Bradford Stephens
<bradfordstephens@gmail.com> wrote:
> The Seattle Hadoop/Scalability/NoSQL (yeah, we vary the title) meetup
> is tonight! We're going to have a guest speaker from MongoDB :)
>
> As always, it's at the University of Washington, Allen Computer
> Science building, Room 303 at 6:45pm. You can find a map here:
> http://www.washington.edu/home/maps/southcentral.html?cse
>
> If you can, please RSVP here (not required, but very nice):
> http://www.meetup.com/Seattle-Hadoop-HBase-NoSQL-Meetup/
>
> --
> http://www.drawntoscalehq.com -- =A0The intuitive, cloud-scale data
> solution. Process, store, query, search, and serve all your data.
>
> http://www.roadtofailure.com -- The Fringes of Scalability, Social
> Media, and Computer Science
>



--=20
http://www.drawntoscalehq.com --  The intuitive, cloud-scale data
solution. Process, store, query, search, and serve all your data.

http://www.roadtofailure.com -- The Fringes of Scalability, Social
Media, and Computer Science

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 08:15:58 2010
Return-Path: <java-user-return-45164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12537 invoked from network); 25 Feb 2010 08:15:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 08:15:57 -0000
Received: (qmail 50805 invoked by uid 500); 25 Feb 2010 08:15:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50773 invoked by uid 500); 25 Feb 2010 08:15:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50765 invoked by uid 99); 25 Feb 2010 08:15:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 08:15:55 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.136 as permitted sender)
Received: from [61.135.132.136] (HELO relay.mail.sohu.com) (61.135.132.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 08:15:45 +0000
Received: from mx16.mail.sohu.com (unknown [192.168.95.243])
	by relay.mail.sohu.com (Postfix) with ESMTP id 019673A59812
	for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 16:15:23 +0800 (CST)
Received: from mx16.mail.sohu.com (localhost.localdomain [127.0.0.1])
	by mx16.mail.sohu.com (Postfix) with ESMTP id EADDC28428D
	for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 16:15:14 +0800 (CST)
To: "java-user" <java-user@lucene.apache.org>
Message-ID: <1267085714.dc842d9fba134e76aca39fafb7b20144.luocan19826164@sohu.com>
Subject: problem about backup index file
Date: Thu, 25 Feb 2010 08:15:14 GMT
MIME-Version: 1.0
X-SHIP: 219.133.62.73
Reference: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>,
	<6D0771BCC06B4995A4707D52BFC39A50@sv.us.sonicwall.com>
In-Reply-To: <6D0771BCC06B4995A4707D52BFC39A50@sv.us.sonicwall.com>
From: luocan19826164@sohu.com
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_000_697a5978a5a443949e45cab9469ae6b2"
X-SOHU-Antispam-Bayes: 0

------_=_NextPart_000_697a5978a5a443949e45cab9469ae6b2
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

SSB3YW50IGJhY2t1cCBteSBpbmRleCBmaWxlLGJ1dCBJIGdldCB0aGUgZm9sbG93IGVycm9yLg0K
amF2YS5pby5JT0V4Y2VwdGlvbjombmJzcDthbm90aGVyIHByb2dyYW0gbG9jayB0aGUgZmlsZSEm
bmJzcDthdCBqYXZhLmlvLkZpbGVJbnB1dFN0cmVhbS5yZWFkQnl0ZXMoTmF0aXZlIE1ldGhvZCkm
bmJzcDthdCBqYXZhLmlvLkZpbGVJbnB1dFN0cmVhbS5yZWFkKFVua25vd24gU291cmNlKSZuYnNw
O2F0IGNvbS5jb21tb24uVXRpbHMuY29weURpcmVjdG9yeShVdGlscy5qYXZhOjE0OSkmbmJzcDth
dCBjb20uY29tbW9uLlV0aWxzLmNvcHlEaXJlY3RvcnkoVXRpbHMuamF2YToxMzgpJm5ic3A7YXQg
Y29tLmNvbW1vbi5VdGlscy5jb3B5RGlyZWN0b3J5KFV0aWxzLmphdmE6MTM4KSZuYnNwO2F0IGNv
bS5pbmRleC5JbmRleE1hbmFnZXIuYmFja0RhdGFQb2xpY3koSW5kZXhNYW5hZ2VyLmphdmE6Mzk4
KSZuYnNwO2F0IGNvbS5pbmRleC5JbmRleE1hbmFnZXIuaW5kZXhMb29wKEluZGV4TWFuYWdlci5q
YXZhOjIyMikmbmJzcDthdCBjb20uTWFpbiQxLnJ1bihNYWluLmphdmE6NDgpJm5ic3A7YXQgamF2
YS5sYW5nLlRocmVhZC5ydW4oVW5rbm93biBTb3VyY2UpDQombmJzcDsNCkhvdyBjYW4gSSBiYWNr
dXAgbHVjZW5lIGZpbGUgaW4gSVIgdGhyZWFkLg==

------_=_NextPart_000_697a5978a5a443949e45cab9469ae6b2--



From java-user-return-45165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 08:20:18 2010
Return-Path: <java-user-return-45165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13274 invoked from network); 25 Feb 2010 08:20:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 08:20:18 -0000
Received: (qmail 53208 invoked by uid 500); 25 Feb 2010 08:20:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53156 invoked by uid 500); 25 Feb 2010 08:20:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53148 invoked by uid 99); 25 Feb 2010 08:20:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 08:20:16 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 08:20:07 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by gateway1.messagingengine.com (Postfix) with ESMTP id E3585E2215
	for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 03:19:46 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Thu, 25 Feb 2010 03:19:46 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=2qPblAwrm/24hUP/HOwGqd4DJzI=; b=A3tgneDF06Gv2V4qnuE0s5Lpt7PWo8GIW6tKd75yiJ7BOF8TSzSY4ZSjl2ocx1dLIBBF06BPJ2bZa+aUW+wthwRJxaGMB0JdxGwFxIAgoYOLJ77DSBsOUNDiVY16LiVEmxr/G5aIxSN0j+XiXXsz+umMqf5XLEorxeRYR2seM8M=
X-Sasl-enc: oAVx+Eld8eZglOfhSF9T6JiWhO8mXQC5NASll4IEwGvS 1267085986
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 6401F4B49DF
	for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 03:19:46 -0500 (EST)
Message-ID: <4B8632A1.1030201@fastmail.fm>
Date: Thu, 25 Feb 2010 08:19:45 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: If you could have one feature in Lucene...
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
In-Reply-To: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Grant Ingersoll wrote:
> What would it be?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   
Similarity can only be set per index, but I  want to adjust scoring 
behaviour at a field level, to faciliate this could we pass make field 
name available to all score methods.
Currently it is only passed to some such as lengthNorm() but not others 
such as tf()

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 08:30:27 2010
Return-Path: <java-user-return-45166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16279 invoked from network); 25 Feb 2010 08:30:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 08:30:27 -0000
Received: (qmail 71499 invoked by uid 500); 25 Feb 2010 08:30:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71475 invoked by uid 500); 25 Feb 2010 08:30:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71467 invoked by uid 99); 25 Feb 2010 08:30:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 08:30:25 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 08:30:16 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id C1046D36004
	for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 09:29:53 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Ou7lLspHzpdG for <java-user@lucene.apache.org>;
	Thu, 25 Feb 2010 09:29:51 +0100 (CET)
Received: from VEGA (unknown [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 232ADD36002
	for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 09:29:51 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <6D0771BCC06B4995A4707D52BFC39A50@sv.us.sonicwall.com> <1267085714.dc842d9fba134e76aca39fafb7b20144.luocan19826164@sohu.com>
In-Reply-To: <1267085714.dc842d9fba134e76aca39fafb7b20144.luocan19826164@sohu.com>
Subject: RE: problem about backup index file
Date: Thu, 25 Feb 2010 09:30:02 +0100
Message-ID: <008701cab5f4$b9b78420$2d268c60$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acq18sQWS7i/x4aVTtWwoItczl1oFgAAd27Q
Content-Language: de

In Windows you have no chance to do that without closing all =
IndexWriters and IndexReaders that modify indexes.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: luocan19826164@sohu.com [mailto:luocan19826164@sohu.com]
> Sent: Thursday, February 25, 2010 9:15 AM
> To: java-user
> Subject: problem about backup index file
>=20
> I want backup my index file,but I get the follow error.
> java.io.IOException:&nbsp;another program lock the file!&nbsp;at
> java.io.FileInputStream.readBytes(Native Method)&nbsp;at
> java.io.FileInputStream.read(Unknown Source)&nbsp;at
> com.common.Utils.copyDirectory(Utils.java:149)&nbsp;at
> com.common.Utils.copyDirectory(Utils.java:138)&nbsp;at
> com.common.Utils.copyDirectory(Utils.java:138)&nbsp;at
> com.index.IndexManager.backDataPolicy(IndexManager.java:398)&nbsp;at
> com.index.IndexManager.indexLoop(IndexManager.java:222)&nbsp;at
> com.Main$1.run(Main.java:48)&nbsp;at java.lang.Thread.run(Unknown
> Source)
> &nbsp;
> How can I backup lucene file in IR thread.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 09:45:45 2010
Return-Path: <java-user-return-45167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47449 invoked from network); 25 Feb 2010 09:45:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 09:45:45 -0000
Received: (qmail 71943 invoked by uid 500); 25 Feb 2010 09:45:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71912 invoked by uid 500); 25 Feb 2010 09:45:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71904 invoked by uid 99); 25 Feb 2010 09:45:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 09:45:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of arosenschein@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 09:45:36 +0000
Received: by pvd12 with SMTP id 12so1080164pvd.35
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 01:45:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=mGFxuhLsZ+XzuSG/724c2QGLSSC900PKBu4vs5e9LFg=;
        b=tSbipHNAMlZghneyq/GDqpcDs2VLvoSg7H+6rshs00OI/DKLBpoqzToFT5eC09q7vl
         BJcg6kmuFd/RBoJ9OtEae2Uy4j/BqUOslAklRrk3GbhqXDKiQaYKauWdLVTqQIy4UUV/
         CnnR865uFQFlq+Zh3kdZF16Go9sgou7o/t1wQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=d+rtDHDxnV0/Lwk6YzsPhsZqbqyIzBmzDIfkVNBbCZDZmiJtkGXLW2W8dqTzuHKRuU
         54a6pzuQcnxnlWT5UYSDnzpHUfu/lvER6bMxorHjFtjufSmNfE1Vwc2c9BY7ie8pGI7p
         l2i9PTr8w3H7laA0Z1gejxdRXT9DarMKoCUx0=
MIME-Version: 1.0
Received: by 10.141.106.15 with SMTP id i15mr415861rvm.252.1267091113819; Thu, 
	25 Feb 2010 01:45:13 -0800 (PST)
In-Reply-To: <4B8632A1.1030201@fastmail.fm>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
	 <4B8632A1.1030201@fastmail.fm>
Date: Thu, 25 Feb 2010 11:45:13 +0200
Message-ID: <698f0de11002250145v74add479yb08b1b62a79cede3@mail.gmail.com>
Subject: Re: If you could have one feature in Lucene...
From: Avi Rosenschein <arosenschein@gmail.com>
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Content-Type: multipart/alternative; boundary=000e0cd13bf0bcc09b048069a398

--000e0cd13bf0bcc09b048069a398
Content-Type: text/plain; charset=UTF-8

>
> Similarity can only be set per index, but I  want to adjust scoring
> behaviour at a field level, to faciliate this could we pass make field name
> available to all score methods.
> Currently it is only passed to some such as lengthNorm() but not others
> such as tf()
>
> +1

-- Avi

--000e0cd13bf0bcc09b048069a398--

From java-user-return-45168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 09:54:55 2010
Return-Path: <java-user-return-45168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50906 invoked from network); 25 Feb 2010 09:54:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 09:54:55 -0000
Received: (qmail 81967 invoked by uid 500); 25 Feb 2010 09:54:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81866 invoked by uid 500); 25 Feb 2010 09:54:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81857 invoked by uid 99); 25 Feb 2010 09:54:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 09:54:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 09:54:45 +0000
Received: by bwz9 with SMTP id 9so4234522bwz.5
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 01:54:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=Rix+POUkgQGnHL529JbCw/5ssX7zZVTd2GQF0oM22ZE=;
        b=rYwseSzktRprB9u8TW/Yl4GbMbT+QT8O1FyNGh0OAcThPuhVHoZZP5qslLxEyCLW1R
         lJqfK2zrADk5Sg3ojCBq5aK7FL3vB8OhG0g9VspHSm4WG0CjSa9b6tNBSagPxuBrEU+1
         f6BaOARas4pC5D2KjneJMw8JvEOQJ5OZJdOE8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=bxxdmUC7CBVaB7yGuWuyWZBLESpCFyroK6ntsbJfG64BsbU5QjojLahzX0wgWb/PWD
         c3F90pxoFVvWFv7ciFB9/s6MyUlQTC0/lUxnEhjg/DHrpAJJifMJ8jaE+B/h6ij0DBtL
         44MFb9MAA9ag8ovcgUJEIBwPjoy4JQrlccDBM=
MIME-Version: 1.0
Received: by 10.204.128.82 with SMTP id j18mr526331bks.133.1267091665182; Thu, 
	25 Feb 2010 01:54:25 -0800 (PST)
In-Reply-To: <9b906c961002241554x7a3e5225q3aa856bc1f99ebbe@mail.gmail.com>
References: <9b906c961002241554x7a3e5225q3aa856bc1f99ebbe@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 25 Feb 2010 09:54:05 +0000
Message-ID: <8c4e68611002250154m15b47531l748bc8e6e97cea42@mail.gmail.com>
Subject: Re: NAS vs SAN vs Server Disk RAID
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

We've run lucene on NAS, although not with indexes anything like as
large as 1Tb, and gave up because NFS and lucene don't really work
very well together. Google for "lucene nfs" for some details, and some
workarounds.

I'd second Kay Kay's suggestion to look at a distributed solution such as K=
atta.


--
Ian.


On Wed, Feb 24, 2010 at 11:54 PM, Andrew Bruno <andrew.bruno@gmail.com> wro=
te:
> Hello,
>
> I am working with an application that offers its customers their own inde=
x,
> primary two indexes for different needs per customer.
>
> As our business is growing and growing, I now have a situation where the =
web
> application has its customer's index on one volume, and its getting close=
 to
> 1Tbyte.
>
> There are lots of updates and inserts, and plenty of searches. =A0As you =
can
> imagine, the application is starting to slow down heavily, especially dur=
ing
> high traffic time when documents (PDF, DOCs, etc) are indexed.
>
> Since the disk IO on the server is high, our datacenter engineers suggest=
ed
> we look at NAS or SAN, for performance gain, and for future growth.
>
> Has anyone had any experience in running Lucene2.0/Compass in these
> environments? =A0Do you know of any case studies, whitepapers, web sites?
>
> Thanks
> Andrew
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 11:07:02 2010
Return-Path: <java-user-return-45169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88315 invoked from network); 25 Feb 2010 11:07:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 11:07:02 -0000
Received: (qmail 74003 invoked by uid 500); 25 Feb 2010 11:07:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73953 invoked by uid 500); 25 Feb 2010 11:07:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73945 invoked by uid 99); 25 Feb 2010 11:07:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 11:07:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmuguruza@gmail.com designates 209.85.220.221 as permitted sender)
Received: from [209.85.220.221] (HELO mail-fx0-f221.google.com) (209.85.220.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 11:06:53 +0000
Received: by fxm21 with SMTP id 21so504256fxm.5
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 03:06:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=BNxWm9p/xQubfYApb4TUti+3uVVyJfA2Cw2DZsCQU88=;
        b=uHSF1MpklLC1HRyHKRRKmI3vZmnPQ7BQkwe0jKZ4WcS9aJjeVKleWi5JreS3k09NmR
         xt3Bj7RafXI4Z17eXmmhXXgpHAsEsuDVAIzzbKmjJUL1vF+w2lwBxA4/fe6WZkcFrdA5
         p+yqW6NH3ZQBIuwp1t5eeg0yEULZkG0cToR3k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=B85YwC0LxK/35i49HdRW7eQROD3vB0qCN147TqRd4XOmCS7WJbCwD41rCzvuHamCWT
         Y3nktMVe1SvMfZD3VxSxs93WraqLhHLlK/PeMpqhtIuMTlJ19VI3BnAuhC5n0Suv4zIP
         kgCja21MTHvL9TkbtWlXh8n5jukulRQ/+igZc=
MIME-Version: 1.0
Received: by 10.223.100.207 with SMTP id z15mr963719fan.78.1267095992315; Thu, 
	25 Feb 2010 03:06:32 -0800 (PST)
Date: Thu, 25 Feb 2010 12:06:31 +0100
Message-ID: <f071061b1002250306v26ebc6bqf63ed514daa6535@mail.gmail.com>
Subject: AnalyzerUtils.getLoggingAnalyzer changing the way the inner analyzer 
	works?
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

I have an issue with my custom analyzer...see the following code:

    public static Analyzer getAnalyzer() {
        // cache the analyzer
        if (analyzer == null) {
            analyzer = new CustomStopAnalyzer(); //does some basic
customization, nothing too fancy
            //test
            //analyzer = AnalyzerUtils.getLoggingAnalyzer(new
CustomStopAnalyzer(), System.out, "debug");
        }
        return analyzer;
    }

The thing is, the content in the index is different if I index with
one analyzer or the other. AnalyzerUtils.getLoggingAnalyzer() is from
contrib, lucene 3.0. I assume by the doc that
AnalyzerUtils.getLoggingAnalyzer does not change the workings of the
inner analyzer, but by using luke I can see this is happening! At
least it looks like.
I index a word like: mail44. With new CustomStopAnalyzer() I get
'mail' indexed, and with AnalyzerUtils.getLoggingAnalyzer I get
'mail44' (that is what should be indexed).

Anyone has a clue??
thanks
javi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 11:47:40 2010
Return-Path: <java-user-return-45170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97076 invoked from network); 25 Feb 2010 11:47:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 11:47:40 -0000
Received: (qmail 20445 invoked by uid 500); 25 Feb 2010 11:47:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20414 invoked by uid 500); 25 Feb 2010 11:47:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20406 invoked by uid 99); 25 Feb 2010 11:47:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 11:47:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.204 as permitted sender)
Received: from [61.135.132.204] (HELO relay.mail.sohu.com) (61.135.132.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 11:47:27 +0000
Received: from 85737ec54efc4e1 (unknown [116.25.157.14])
	by relay.mail.sohu.com (Postfix) with ESMTPA id A6190F28923
	for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 19:47:16 +0800 (CST)
From: "luocanrao" <luocan19826164@sohu.com>
To: <java-user@lucene.apache.org>
References: <6D0771BCC06B4995A4707D52BFC39A50@sv.us.sonicwall.com> <1267085714.dc842d9fba134e76aca39fafb7b20144.luocan19826164@sohu.com> <008701cab5f4$b9b78420$2d268c60$@de>
In-Reply-To: <008701cab5f4$b9b78420$2d268c60$@de>
Subject: =?UTF-8?Q?=E7=AD=94=E5=A4=8D:_problem_about_backup_index_f?=
	=?UTF-8?Q?ile?=
Date: Thu, 25 Feb 2010 19:47:02 +0800
Message-ID: <006501cab610$3f7f74d0$be7e5e70$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acq18sQWS7i/x4aVTtWwoItczl1oFgAAd27QAAbeVaA=
Content-Language: zh-cn
X-SOHU-Antispam-Bayes: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks ,Uwe Schindler
In linux,it works fine!
I

-----=E9=82=AE=E4=BB=B6=E5=8E=9F=E4=BB=B6-----
=E5=8F=91=E4=BB=B6=E4=BA=BA: Uwe Schindler [mailto:uwe@thetaphi.de]=20
=E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2010=E5=B9=B42=E6=9C=8825=E6=97=A5 =
16:30
=E6=94=B6=E4=BB=B6=E4=BA=BA: java-user@lucene.apache.org
=E4=B8=BB=E9=A2=98: RE: problem about backup index file

In Windows you have no chance to do that without closing all =
IndexWriters and IndexReaders that modify indexes.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: luocan19826164@sohu.com [mailto:luocan19826164@sohu.com]
> Sent: Thursday, February 25, 2010 9:15 AM
> To: java-user
> Subject: problem about backup index file
>=20
> I want backup my index file,but I get the follow error.
> java.io.IOException:&nbsp;another program lock the file!&nbsp;at
> java.io.FileInputStream.readBytes(Native Method)&nbsp;at
> java.io.FileInputStream.read(Unknown Source)&nbsp;at
> com.common.Utils.copyDirectory(Utils.java:149)&nbsp;at
> com.common.Utils.copyDirectory(Utils.java:138)&nbsp;at
> com.common.Utils.copyDirectory(Utils.java:138)&nbsp;at
> com.index.IndexManager.backDataPolicy(IndexManager.java:398)&nbsp;at
> com.index.IndexManager.indexLoop(IndexManager.java:222)&nbsp;at
> com.Main$1.run(Main.java:48)&nbsp;at java.lang.Thread.run(Unknown
> Source)
> &nbsp;
> How can I backup lucene file in IR thread.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 12:01:44 2010
Return-Path: <java-user-return-45171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99950 invoked from network); 25 Feb 2010 12:01:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 12:01:44 -0000
Received: (qmail 33138 invoked by uid 500); 25 Feb 2010 12:01:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33111 invoked by uid 500); 25 Feb 2010 12:01:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33103 invoked by uid 99); 25 Feb 2010 12:01:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 12:01:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 12:01:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NkcP2-0002AC-2T
	for java-user@lucene.apache.org; Thu, 25 Feb 2010 04:01:12 -0800
Message-ID: <27714404.post@talk.nabble.com>
Date: Thu, 25 Feb 2010 04:01:12 -0800 (PST)
From: tejz <gummaditeja@gmail.com>
To: java-user@lucene.apache.org
Subject: how to display text with \n,\r in jsp from textarea?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gummaditeja@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am wondering as how all these sites (like this Expert-Exchange, hotmail,
etc etc) works which are able to show all 

kind of chars (KEEPING format) in your mail/postings. All these data are
entered in the TextField (like this one, 

where a I am typing this content), which goes to some database (like Oracle
in mycase). And then they are able to 

show the whole data back in some TextArea without any problem. I think if I
start taking care of each special char 

for me (like new line, ', " etc) then there could be no end for my code. I
believe there should be some mechanism by 

which whatever data you get from DB (Oracle) --> JSP Java String object -->
HTML TextArea and Vice-Versa without 

loosing any data and preventing the "Unterminated string constant". I
believe that some sort of encoding and 

decoding need to be done, but what those are? How all these sites do it.

Textarae:------

<tr>
<td>NOTES :-</td>
<td>&nbsp;&nbsp;&nbsp;<TEXTAREA Name="notes" rows="4"
cols="30"></TEXTAREA></td>
</tr>

JavaScript:----

var notes=document.Form.notes.value;
notes = notes.replace(/\n\r?/g, '<BR/>');

and saving it in db...as string..
and again retrivewing from db:------
notes = resultset.getString("notes"); 
notes = notes.replace("<BR/>","\n"); <--- is it corerect?

and displaying in jsp:----
<%
String notes =request.getAttribute("notes").toString();
out.println(notes);
%>


upto here ok....when i am edittng that notes in jsp as below:--
<tr>
<td>NOTES</td>
<td>:&nbsp;&nbsp;<html:textarea rows="6" 

cols="30"name="searchPrfForm" property="fprofilevo.notes"
styleId="notes"/></td>
</tr>

here also showing correct ,..but when i was click submit button..it was
showing error as unterminated string constant error..

on svae function:---
var notes=document.getElementById("notes").value;
notes = notes.replace(/\n\r?/g, '<BR/>'); 

plz tell me ..where i have to modify it?
how to display text with \n,\r in jsp from textarea? 

-- 
View this message in context: http://old.nabble.com/how-to-display-text-with-%5Cn%2C%5Cr-in-jsp-from-textarea--tp27714404p27714404.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 13:50:38 2010
Return-Path: <java-user-return-45172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44876 invoked from network); 25 Feb 2010 13:50:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 13:50:38 -0000
Received: (qmail 97171 invoked by uid 500); 25 Feb 2010 13:50:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97139 invoked by uid 500); 25 Feb 2010 13:50:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97131 invoked by uid 99); 25 Feb 2010 13:50:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 13:50:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [149.8.64.10] (HELO mclmx.mail.saic.com) (149.8.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 13:50:26 +0000
Received: from 0015-its-sbg01.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx.mail.saic.com with ESMTP id BT-MMP-3136397 for java-user@lucene.apache.org; Thu, 25 Feb 2010 08:49:51 -0500
X-AuditID: 9508401a-b7c69ae000000d5c-1d-4b867fff768a
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg01.saic.com (Symantec Brightmail Gateway) with SMTP id A2.F5.03420.FFF768B4; Thu, 25 Feb 2010 08:49:51 -0500 (EST)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 25 Feb 2010 08:49:51 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: Phrase Search and NOT_ANALYZED
Date: Thu, 25 Feb 2010 08:49:46 -0500
Message-Id: <002052E02A48964A8035D9B6E8A1647DAF9698@0015-its-exmb01.us.saic.com>
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DAF954C@0015-its-exmb01.us.saic.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Phrase Search and NOT_ANALYZED
Thread-Index: Acq1nDHiYO9Lbf8MQ/2mb58CHN5tlgAAGJvwAABiHrAAIK9NAA==
References: <002052E02A48964A8035D9B6E8A1647DAF94CB@0015-its-exmb01.us.saic.com> <359a92831002241322o5477944ck60d87e6eb0415eb0@mail.gmail.com> <002052E02A48964A8035D9B6E8A1647DAF953D@0015-its-exmb01.us.saic.com> <8f0ad1f31002241355m49f8fc99l99361f6ea29531@mail.gmail.com> <002052E02A48964A8035D9B6E8A1647DAF9543@0015-its-exmb01.us.saic.com> <002052E02A48964A8035D9B6E8A1647DAF954C@0015-its-exmb01.us.saic.com>
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 25 Feb 2010 13:49:51.0384 (UTC) FILETIME=[67208180:01CAB621]
X-Brightmail-Tracker: AAAAAA==
X-Virus-Checked: Checked by ClamAV on apache.org

SSB3b3VsZCBzdGlsbCBiZSBpbnRlcmVzdGVkIGluIGtub3dpbmcgd2h5IHRoZSBjb21iaW5hdGlv
biBvZiB0aGUgU3RhbmRhcmRBbmFseXplciwgYSBwaHJhc2UgYnVpbHQgdXNpbmcgZG91YmxlIHF1
b3RlcyB3aXRoIG5vIHN0b3Agd29yZHMsIGFuZCB0aGUgUXVlcnlQYXJzZXIgZG9lc24ndCByZXR1
cm4gaGl0cyB3aGlsZSBidWlsZGluZyB0aGUgc2FtZSBxdWVyeSB3aXRoIHRoZSBTdGFkYXJkQW5h
bHl6ZXIgYW5kIGEgUGhyYXNlUXVlcnkgZG9lcz8NCg0KVGhhbmtzLA0KDQpQYXVsDQoNCi0tLS0t
T3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBqYXZhLXVzZXItcmV0dXJuLTQ1MTU2LVBBVUwu
Qi5NVVJET0NIPXNhaWMuY29tQGx1Y2VuZS5hcGFjaGUub3JnIFttYWlsdG86amF2YS11c2VyLXJl
dHVybi00NTE1Ni1QQVVMLkIuTVVSRE9DSD1zYWljLmNvbUBsdWNlbmUuYXBhY2hlLm9yZ10gT24g
QmVoYWxmIE9mIE11cmRvY2gsIFBhdWwNClNlbnQ6IFdlZG5lc2RheSwgRmVicnVhcnkgMjQsIDIw
MTAgNToxMSBQTQ0KVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUkU6
IFBocmFzZSBTZWFyY2ggYW5kIE5PVF9BTkFMWVpFRA0KDQpQaHJhc2VRdWVyeSBhcHBlYXJzIHRv
IGJlIHdvcmtpbmcuICBUaGFua3MgdG8gYWxsLg0KDQpQYXVsIA0KDQoNCi0tLS0tT3JpZ2luYWwg
TWVzc2FnZS0tLS0tDQpGcm9tOiBqYXZhLXVzZXItcmV0dXJuLTQ1MTU1LVBBVUwuQi5NVVJET0NI
PXNhaWMuY29tQGx1Y2VuZS5hcGFjaGUub3JnIFttYWlsdG86amF2YS11c2VyLXJldHVybi00NTE1
NS1QQVVMLkIuTVVSRE9DSD1zYWljLmNvbUBsdWNlbmUuYXBhY2hlLm9yZ10gT24gQmVoYWxmIE9m
IE11cmRvY2gsIFBhdWwNClNlbnQ6IFdlZG5lc2RheSwgRmVicnVhcnkgMjQsIDIwMTAgNTowMSBQ
TQ0KVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUkU6IFBocmFzZSBT
ZWFyY2ggYW5kIE5PVF9BTkFMWVpFRA0KDQpUaGFua3MsDQoNCkkndmUgYmVlbiBsb29raW5nIGF0
IHRoYXQgb25lIHRvby4gIEknbSB0cnlpbmcgdG8gbWFrZSBpdCBoYXBwZW4gd2l0aCB0aGUgU3Rh
bmRhcmRBbmFseXplci4gIFVuZm9ydHVuYXRlbHksIEkgdGhpbmsgSSBzZWUgc29tZSByZWRlc2ln
biBmb3IgbW9yZSByb2J1c3RuZXNzIGluIHRoZSBmdXR1cmUuDQoNCkNoZWVycywNCg0KUGF1bCAN
Cg0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogamF2YS11c2VyLXJldHVybi00
NTE1NC1QQVVMLkIuTVVSRE9DSD1zYWljLmNvbUBsdWNlbmUuYXBhY2hlLm9yZyBbbWFpbHRvOmph
dmEtdXNlci1yZXR1cm4tNDUxNTQtUEFVTC5CLk1VUkRPQ0g9c2FpYy5jb21AbHVjZW5lLmFwYWNo
ZS5vcmddIE9uIEJlaGFsZiBPZiBSb2JlcnQgTXVpcg0KU2VudDogV2VkbmVzZGF5LCBGZWJydWFy
eSAyNCwgMjAxMCA0OjU1IFBNDQpUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpTdWJq
ZWN0OiBSZTogUGhyYXNlIFNlYXJjaCBhbmQgTk9UX0FOQUxZWkVEDQoNCmNoZWNrIG91dCBLZXl3
b3JkQW5hbHl6ZXIhDQoNCk9uIFdlZCwgRmViIDI0LCAyMDEwIGF0IDQ6NTEgUE0sIE11cmRvY2gs
IFBhdWwgPFBBVUwuQi5NVVJET0NIQHNhaWMuY29tPndyb3RlOg0KDQo+IEl0IHN0aWxsIGhhcHBl
bnMgaWYgdGhlcmUgYXJlIG5vIHN0b3Agd29yZHMgaW4gdGhlIGZpZWxkVmFsdWUuIEZvcg0KPiBp
bnN0YW5jZSBpZiBmaWVsZFZhbHVlIHdhcyAicGF1bCBtdXJkb2NoIiwgTHVrZSB3b3VsZCBzaG93
IHRoZSBxdWVyeSBhcw0KPiBuYW1lOiJwYXVsIG11cmRvY2giIGJ1dCBubyBoaXRzIGFyZSByZXR1
cm5lZC4gIElmIEkgY2hhbmdlIHRvDQo+IEZpZWxkLkluZGV4LkFOQUxZWkVEIGl0IHdvcmtzLiAg
VGhlIHByb2JsZW0gd2l0aCBBTkFMWVpFRCBpcyB0aGF0IHRoZXJlDQo+IGlzIGEgcG9zc2liaWxp
dHkgb2YgcGlja2luZyB1cCBmYWxzZSBwb3NpdGl2ZSBoaXRzLiAgV2l0aCBxdWVyaWVzDQo+IGxp
a2UuLi4NCj4NCj4gbmFtZTptdXJkb2NoICAgIC8vIGFzc3VtZSAibXVyZG9jaCIgaXMgYW5vdGhl
ciBzZXBhcmF0ZSBmaWVsZCB2YWx1ZQ0KPg0KPiBPYnZpb3VzbHkgaGVyZSBJIGp1c3Qgd2FudCAi
bXVyZG9jaCIgYnV0IHNpbmNlICJwYXVsIG11cmRvY2giIHdhcw0KPiBpbmRleGVkIEFOQUxZWkVE
IHRoYXQgd2lsbCBiZSByZXR1cm5lZCBhcyB3ZWxsLiAgVXNpbmcgcXVvdGVzIHdpdGgNCj4gRmll
bGQuSW5kZXguTk9UX0FOQUxZWkVEIGlzbid0IHdvcmtpbmcgZm9yIG1lLiBJJ20gdGhpbmtpbmcg
bWF5YmUgaXQncw0KPiB0aGUgUXVlcnlQYXJzZXIgc28gSSdtIGdvaW5nIHRyeWluZyBhIFBocmFz
ZVF1ZXJ5IGluc3RlYWQuDQo+DQo+IFRoYW5rcywNCj4NCj4gUGF1bA0KPg0KPg0KPiAtLS0tLU9y
aWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBqYXZhLXVzZXItcmV0dXJuLTQ1MTQ5LVBBVUwu
Qi5NVVJET0NIPXNhaWMuY29tQGx1Y2VuZS5hcGFjaGUub3JnDQo+IFttYWlsdG86amF2YS11c2Vy
LXJldHVybi00NTE0OS1QQVVMLkIuTVVSRE9DSD1zYWljLmNvbUBsdWNlbmUuYXBhY2hlLm9yZw0K
PiBdIE9uIEJlaGFsZiBPZiBFcmljayBFcmlja3Nvbg0KPiBTZW50OiBXZWRuZXNkYXksIEZlYnJ1
YXJ5IDI0LCAyMDEwIDQ6MjMgUE0NCj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0K
PiBTdWJqZWN0OiBSZTogUGhyYXNlIFNlYXJjaCBhbmQgTk9UX0FOQUxZWkVEDQo+DQo+IFdoYXQg
ZG9lcyBMdWtlJ3MgZXhwbGFpbiBzaG93IHlvdT8gVGhhdCdsbCBzaG93IHlvdSBhIGxvdCBhYm91
dCBob3cNCj4gdGhlIHF1ZXJ5IGdldHMgdHJhbnNmb3JtZWQuLi4uLi4NCj4NCj4gTXkgZmlyc3Qg
Z3Vlc3MgaXMgdGhhdCBzdG9wIHdvcmRzIGFyZSBtZXNzaW5nIHlvdSB1cC4uLi4NCj4NCj4gRXJp
Y2sNCj4NCj4gT24gV2VkLCBGZWIgMjQsIDIwMTAgYXQgMzo1MSBQTSwgTXVyZG9jaCwgUGF1bA0K
PiA8UEFVTC5CLk1VUkRPQ0hAc2FpYy5jb20+d3JvdGU6DQo+DQo+ID4gSGksDQo+ID4NCj4gPg0K
PiA+DQo+ID4gSSdtIGluZGV4aW5nIGEgZmllbGQgdXNpbmcgdGhlIFN0YW5kYXJkQW5hbHl6ZXIg
Mi45Lg0KPiA+DQo+ID4NCj4gPg0KPiA+IGZpZWxkID0gbmV3IEZpZWxkKGZpZWxkTmFtZSwgZmll
bGRWYWx1ZSwgRmllbGQuU3RvcmUuWUVTLA0KPiA+IEZpZWxkLkluZGV4Lk5PVF9BTkFMWVpFRCk7
DQo+ID4NCj4gPg0KPiA+DQo+ID4gTGV0J3Mgc2F5IGZpZWxkTmFtZSBpcyAibmFtZSIgYW5kIGZp
ZWxkVmFsdWUgaXMgInNvbWV0aGluZyBpbiB0aGUNCj4gPiBpbmRleCIuICBXaGVuIEkgcGVyZm9y
bSB0aGUgcXVlcnkuLi4NCj4gPg0KPiA+DQo+ID4NCj4gPiBuYW1lOiJzb21ldGhpbmcgaW4gdGhl
IGluZGV4Ig0KPiA+DQo+ID4NCj4gPg0KPiA+IC4uLiBJIGRvbid0IGdldCBhIGhpdC4gIEknbSB1
c2luZyB0aGUgU3RhbmRhcmRBbmFseXplciBmb3Igc2VhcmNoaW5nLg0KPiA+IEkndmUgdGVzdGVk
IHRoaXMgd2l0aCBMdWtlIGFuZCBpdCBkb2Vzbid0IHdvcmsgdGhlcmUgZWl0aGVyLiAgV2hhdCBh
bQ0KPiBJDQo+ID4gbWlzc2luZz8NCj4gPg0KPiA+DQo+ID4NCj4gPiBUaGFua3MsDQo+ID4NCj4g
Pg0KPiA+DQo+ID4gUGF1bA0KPiA+DQo+ID4NCj4gPg0KPiA+DQo+DQo+IC0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0K
PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFw
YWNoZS5vcmcNCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhl
bHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4NCj4NCg0KDQotLSANClJvYmVydCBNdWlyDQpyY211aXJA
Z21haWwuY29tDQo=


From java-user-return-45173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 15:15:44 2010
Return-Path: <java-user-return-45173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90392 invoked from network); 25 Feb 2010 15:15:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 15:15:43 -0000
Received: (qmail 61903 invoked by uid 500); 25 Feb 2010 15:15:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61855 invoked by uid 500); 25 Feb 2010 15:15:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61847 invoked by uid 99); 25 Feb 2010 15:15:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 15:15:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 15:15:34 +0000
Received: by wwb34 with SMTP id 34so1879014wwb.35
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 07:15:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=YF5nQAWKikK7yHuCuh/LmWcwCxbevU+TYtYvtETaGYQ=;
        b=VVro+5e48WKxveJvEPuYOLWsUr21FrVQ/tevFrWCWQP4TpDyeQ+oZyxrK+sSV8LPU8
         It0dFzaf7o9PYtP/tEMpAU/zJfgaTWODdDng6tH1So35iQrAVLkuaBvqEGKEHE0cnOi7
         jkQEj7OY8BOYEQekQiZYYn/NXzCduRfZtj4u8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=DKXfQ+RkO5jxFx5G3X9WJLzYtZ7JuMpUCaNqRrHHp77WxoHDrkrakKyrLx/YLLVTaW
         Po9V8pf5pSuka/MHXg4lU/ZOv52vJFmjek4FaqbpbUlndd3tx0MLrOvwadAMxgGudG62
         vZHINxzjkvdrCm6G4Tx2qBucRpi+FaxgrKGpM=
MIME-Version: 1.0
Received: by 10.216.85.130 with SMTP id u2mr789114wee.49.1267110911792; Thu, 
	25 Feb 2010 07:15:11 -0800 (PST)
In-Reply-To: <27714404.post@talk.nabble.com>
References: <27714404.post@talk.nabble.com>
Date: Thu, 25 Feb 2010 10:15:11 -0500
Message-ID: <359a92831002250715i5340989ag97bac8430af4074b@mail.gmail.com>
Subject: Re: how to display text with \n,\r in jsp from textarea?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d64082c9d77e04806e3fdc

--0016e6d64082c9d77e04806e3fdc
Content-Type: text/plain; charset=ISO-8859-1

Uhhhmmm, I admit I just scanned the first part of this e-mail, but is
the Lucene users list an appropriate venue for this?

Erick

On Thu, Feb 25, 2010 at 7:01 AM, tejz <gummaditeja@gmail.com> wrote:

>
> I am wondering as how all these sites (like this Expert-Exchange, hotmail,
> etc etc) works which are able to show all
>
> kind of chars (KEEPING format) in your mail/postings. All these data are
> entered in the TextField (like this one,
>
> where a I am typing this content), which goes to some database (like Oracle
> in mycase). And then they are able to
>
> show the whole data back in some TextArea without any problem. I think if I
> start taking care of each special char
>
> for me (like new line, ', " etc) then there could be no end for my code. I
> believe there should be some mechanism by
>
> which whatever data you get from DB (Oracle) --> JSP Java String object -->
> HTML TextArea and Vice-Versa without
>
> loosing any data and preventing the "Unterminated string constant". I
> believe that some sort of encoding and
>
> decoding need to be done, but what those are? How all these sites do it.
>
> Textarae:------
>
> <tr>
> <td>NOTES :-</td>
> <td>&nbsp;&nbsp;&nbsp;<TEXTAREA Name="notes" rows="4"
> cols="30"></TEXTAREA></td>
> </tr>
>
> JavaScript:----
>
> var notes=document.Form.notes.value;
> notes = notes.replace(/\n\r?/g, '<BR/>');
>
> and saving it in db...as string..
> and again retrivewing from db:------
> notes = resultset.getString("notes");
> notes = notes.replace("<BR/>","\n"); <--- is it corerect?
>
> and displaying in jsp:----
> <%
> String notes =request.getAttribute("notes").toString();
> out.println(notes);
> %>
>
>
> upto here ok....when i am edittng that notes in jsp as below:--
> <tr>
> <td>NOTES</td>
> <td>:&nbsp;&nbsp;<html:textarea rows="6"
>
> cols="30"name="searchPrfForm" property="fprofilevo.notes"
> styleId="notes"/></td>
> </tr>
>
> here also showing correct ,..but when i was click submit button..it was
> showing error as unterminated string constant error..
>
> on svae function:---
> var notes=document.getElementById("notes").value;
> notes = notes.replace(/\n\r?/g, '<BR/>');
>
> plz tell me ..where i have to modify it?
> how to display text with \n,\r in jsp from textarea?
>
> --
> View this message in context:
> http://old.nabble.com/how-to-display-text-with-%5Cn%2C%5Cr-in-jsp-from-textarea--tp27714404p27714404.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d64082c9d77e04806e3fdc--

From java-user-return-45174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 15:20:31 2010
Return-Path: <java-user-return-45174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92994 invoked from network); 25 Feb 2010 15:20:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 15:20:31 -0000
Received: (qmail 75496 invoked by uid 500); 25 Feb 2010 15:20:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75461 invoked by uid 500); 25 Feb 2010 15:20:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75453 invoked by uid 99); 25 Feb 2010 15:20:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 15:20:29 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 15:20:21 +0000
Received: by gwb11 with SMTP id 11so10850gwb.35
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 07:19:59 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.1.4 with SMTP id 4mr1757714yba.317.1267111199729; Thu, 25 
	Feb 2010 07:19:59 -0800 (PST)
In-Reply-To: <1267085714.dc842d9fba134e76aca39fafb7b20144.luocan19826164@sohu.com>
References: <6D0771BCC06B4995A4707D52BFC39A50@sv.us.sonicwall.com>
	 <1267085714.dc842d9fba134e76aca39fafb7b20144.luocan19826164@sohu.com>
Date: Thu, 25 Feb 2010 10:19:59 -0500
Message-ID: <9ac0c6aa1002250719i5c0c5fa2hf050533c1d58ba54@mail.gmail.com>
Subject: Re: problem about backup index file
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

This is likely happening because you're attempting to copy a file that
IndexWriter is currently writing?

You shouldn't do that (copy files that are still being written) --
that just wastes bytes (they aren't used by the index), and causes
this failure on Windows.

Instead, you should use SnapshotDeletionPolicy -- it tells you
specifically which files make up the latest commit point.  Those files
will not be opened for writing (only for reading, if you have an
IndexReader open on that commit) and they should copy just fine on
windows.

The "Hot backups with Lucene" article (NOTE: I'm the author) in
upcoming Lucene in Action 2 revision shows how to do this -- it's
available for download from http://manning.com/hatcher3.

Mike

On Thu, Feb 25, 2010 at 3:15 AM,  <luocan19826164@sohu.com> wrote:
> I want backup my index file,but I get the follow error.
> java.io.IOException:&nbsp;another program lock the file!&nbsp;at java.io.=
FileInputStream.readBytes(Native Method)&nbsp;at java.io.FileInputStream.re=
ad(Unknown Source)&nbsp;at com.common.Utils.copyDirectory(Utils.java:149)&n=
bsp;at com.common.Utils.copyDirectory(Utils.java:138)&nbsp;at com.common.Ut=
ils.copyDirectory(Utils.java:138)&nbsp;at com.index.IndexManager.backDataPo=
licy(IndexManager.java:398)&nbsp;at com.index.IndexManager.indexLoop(IndexM=
anager.java:222)&nbsp;at com.Main$1.run(Main.java:48)&nbsp;at java.lang.Thr=
ead.run(Unknown Source)
> &nbsp;
> How can I backup lucene file in IR thread.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 15:22:41 2010
Return-Path: <java-user-return-45175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94021 invoked from network); 25 Feb 2010 15:22:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 15:22:41 -0000
Received: (qmail 78760 invoked by uid 500); 25 Feb 2010 15:22:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78715 invoked by uid 500); 25 Feb 2010 15:22:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78706 invoked by uid 99); 25 Feb 2010 15:22:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 15:22:39 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 15:22:32 +0000
Received: by pwi6 with SMTP id 6so5222698pwi.35
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 07:22:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=eDTc6PaAKUkQrmGM7Ch+5szKITOGdAFjoGo6ONPqrHM=;
        b=cZylL4reezVtdigPDd5sUbQ/waqORvEgfsACXJMoCXAZt6y7wtKYcDELuPosdsivdK
         xEuhbiqa7FN4Biq3KcOEjBOAGfeQT30kP8Rhr5NuF78I62LEX0Vz8EESr8gHz3C81RJb
         t85V6gKLz9tkjNIzmbJZviaYF1161BUwWaGkM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=QZvzkQ5aiN7OFMeSp6p8Dnkwg2z/y6ncckkhkSXcxRh1SgF1dabqybOBKap4B8lnPM
         QD7TsV6VoHxaX67cTNB4Qm6bsuPKGhVRKMI3TLenp65ew9XUmYgEual0kGIor38pAfn2
         l1IpPA/t4HJl3k1sraZaCc11u2cisn53tyGeU=
MIME-Version: 1.0
Received: by 10.142.61.19 with SMTP id j19mr645135wfa.69.1267111332254; Thu, 
	25 Feb 2010 07:22:12 -0800 (PST)
In-Reply-To: <e994873a1002221258y1cfba96atfb1fbb2c7dc65c90@mail.gmail.com>
References: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
	 <9ac0c6aa1002220924q75da08a4s741376ff876ed20c@mail.gmail.com>
	 <e994873a1002220935q1394a3dau13fab93dc43fd293@mail.gmail.com>
	 <9ac0c6aa1002221130w3aa9c59dq2fe627e85c22bcf3@mail.gmail.com>
	 <e994873a1002221258y1cfba96atfb1fbb2c7dc65c90@mail.gmail.com>
Date: Thu, 25 Feb 2010 10:22:12 -0500
Message-ID: <e994873a1002250722n5d0cf7e7xb6cc9b9d8b0ae5d8@mail.gmail.com>
Subject: Re: IndexWriter.getReader.getVersion behavior
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e0a6b2d994a904806e58e4

--001636e0a6b2d994a904806e58e4
Content-Type: text/plain; charset=ISO-8859-1

I've reproduced this and I have a bunch of infoStream log files. Since the
messages have no timestamps, it's hard to tell where the relevant entries
are. What should I be looking for?

Peter

On Mon, Feb 22, 2010 at 3:58 PM, Peter Keegan <peterlkeegan@gmail.com>wrote:

> I'm pretty sure there are flushes and segment merges going on, but as you
> said, that shouldn't affect the version increment. I'll see what I can do to
> get infoStream output.
>
> Thanks,
> Peter
>
>
> On Mon, Feb 22, 2010 at 2:30 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> Well I'm at a loss then.  The version should only increment on commit.
>>
>> Can you make it all happen when infoStream is on, and post back?
>>
>> Mike
>>
>> On Mon, Feb 22, 2010 at 12:35 PM, Peter Keegan <peterlkeegan@gmail.com>
>> wrote:
>> > Only one writer thread and one writer process.
>> > I'm calling IndexWriter(Directory d, Analyzer a, boolean create,
>> > MaxFieldLength mfl), which sets autocommit=false.
>> >
>> > Peter
>> >
>> > On Mon, Feb 22, 2010 at 12:24 PM, Michael McCandless <
>> > lucene@mikemccandless.com> wrote:
>> >
>> >> That's curious.
>> >>
>> >> It's only on prepareCommit (or, commit, if you didn't first prepare,
>> >> since that will call prepareCommit internally) that this version
>> >> should increase.
>> >>
>> >> Is there only 1 thread doing this?
>> >>
>> >> Oh, and, are you passing false for autoCommit?
>> >>
>> >> Mike
>> >>
>> >> On Mon, Feb 22, 2010 at 11:43 AM, Peter Keegan <peterlkeegan@gmail.com
>> >
>> >> wrote:
>> >> > Using Lucene 2.9.1, I have the following pseudocode which gets
>> repeated
>> >> at
>> >> > regular intervals:
>> >> >
>> >> > 1. FSDirectory dir = FSDirectory.open(java.io.File);
>> >> > 2. dir.setLockFactory(new SingleInstanceLockFactory());
>> >> > 3. IndexWriter writer = new IndexWriter(dir, Analyzer, false,
>> >> maxFieldLen)
>> >> > 4. writer.getReader().getVersion();
>> >> > 5. writer.prepareCommit();
>> >> > 6. writer.getReader().getVersion();
>> >> > 7. writer.commit();
>> >> > 8. writer.close();
>> >> >
>> >> > I'm using the version number to keep external data in synch with the
>> >> index.
>> >> > Usually, the version number from (6) is 1 greater than from (4) and
>> the
>> >> > version from (4) equals the version from the previous (6). At least
>> once
>> >> a
>> >> > day, however, the version from (4) is 1 greater than from the
>> previous
>> >> (6).
>> >> > What would explain this sporadic behavior of version numbers?
>> >> >
>> >> > Thanks,
>> >> > Peter
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--001636e0a6b2d994a904806e58e4--

From java-user-return-45176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 17:22:05 2010
Return-Path: <java-user-return-45176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42048 invoked from network); 25 Feb 2010 17:22:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 17:22:05 -0000
Received: (qmail 97596 invoked by uid 500); 25 Feb 2010 17:22:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97564 invoked by uid 500); 25 Feb 2010 17:22:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97556 invoked by uid 99); 25 Feb 2010 17:22:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 17:22:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of glen.newton@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 17:21:55 +0000
Received: by ywh15 with SMTP id 15so583299ywh.20
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 09:21:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=jqgf/6dVMCf0KK7w9qfFl1h2HBb40IOSAyiGZITOwTE=;
        b=FCSPV2mqVzTPyk8wl6gORX3saPafytO++JDwtw2GRF6yH1q0FBS6eiNAXnXpK1jbj3
         KYLF3lDYgzeNQ2Ref+ZHX9DQQNMD1ZR/eAU/+PjunJ+eRO11PslQmsiYUuogPO7JNInF
         834lvOaZRrfA8FmYISTxIm2/lxUqODcRXClbI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type:content-transfer-encoding;
        b=Aehp0f0YWlu/LtJhj/wSAI0ybdiKL40/++UuBFmnk9X31qkKcyzCKlEMU9k4G3Tswx
         r9AzS4lOfyNSoiUNl2/TcW7jdmJbgNxEQ17V874VmSfRsbnk5HITk+pms4xB30swQeky
         rUZBJsps8eHwgEMTgia+ihDT5LipP6Z5DtEbk=
MIME-Version: 1.0
Received: by 10.101.155.19 with SMTP id h19mr2164691ano.43.1267118494761; Thu, 
	25 Feb 2010 09:21:34 -0800 (PST)
In-Reply-To: <698f0de11002250145v74add479yb08b1b62a79cede3@mail.gmail.com>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
	 <4B8632A1.1030201@fastmail.fm>
	 <698f0de11002250145v74add479yb08b1b62a79cede3@mail.gmail.com>
Date: Thu, 25 Feb 2010 12:21:34 -0500
Message-ID: <5e76f3841002250921n5faae137s13e99686699e2de4@mail.gmail.com>
Subject: Re: If you could have one feature in Lucene...
From: Glen Newton <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Cc: paul_t100@fastmail.fm
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

+2

On 25 February 2010 04:45, Avi Rosenschein <arosenschein@gmail.com> wrote:
>>
>> Similarity can only be set per index, but I =C2=A0want to adjust scoring
>> behaviour at a field level, to faciliate this could we pass make field n=
ame
>> available to all score methods.
>> Currently it is only passed to some such as lengthNorm() but not others
>> such as tf()
>>
>> +1
>
> -- Avi
>



--=20

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 17:52:21 2010
Return-Path: <java-user-return-45177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58511 invoked from network); 25 Feb 2010 17:52:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 17:52:21 -0000
Received: (qmail 55324 invoked by uid 500); 25 Feb 2010 17:52:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55166 invoked by uid 500); 25 Feb 2010 17:52:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55156 invoked by uid 99); 25 Feb 2010 17:52:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 17:52:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 17:52:11 +0000
Received: by pvd12 with SMTP id 12so1205311pvd.35
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 09:51:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=hMb2D6+Kwu4/ffA2nEqu+Ib152wRH7OpmEo+0jN6uR8=;
        b=QZi/mItoNjiJAfJiKzkqefUs4SQw4FRIIFNWEwWRV5IsBpQljPzenuXYKB/tfLrwNb
         IBnNIC3exnRhRiK8oX0tEDRvIzNc98FgzDrIbHo4T1TXtYDmLyglSpmRrkqyNnsTh4G4
         ILGZLPkPa+9TQreK5JikWNO/7lDlfv4iFHOHE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=QIISYqFTwIEPjJWbT71Gc/MXwv2Rshfz7tI4fx/4IyVPjNT7g5d9tNYaZqJ8ZcZRXE
         Ma5vOmxxxp/p1/iVL03Qh4Yj3npNPT7XC0o23nuCTKrJHJlDc1DFhi3HROh93hrlXlJ6
         EE8u6+q3VCn88JhvWIa0SLWiH3foazvEvg0FU=
MIME-Version: 1.0
Received: by 10.140.237.14 with SMTP id k14mr762638rvh.3.1267120309660; Thu, 
	25 Feb 2010 09:51:49 -0800 (PST)
In-Reply-To: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
Date: Thu, 25 Feb 2010 09:51:49 -0800
Message-ID: <85d3c3b61002250951u1499e083h75ee3a3f6e595aaa@mail.gmail.com>
Subject: Re: If you could have one feature in Lucene...
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

It'd be great to see the Lucene committers (besides Michael
McCandless) work on the core of Lucene and push some of these long
overdue features to fruition?

On Wed, Feb 24, 2010 at 5:42 AM, Grant Ingersoll <gsingers@apache.org> wrote:
> What would it be?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 18:01:05 2010
Return-Path: <java-user-return-45178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63913 invoked from network); 25 Feb 2010 18:01:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 18:01:05 -0000
Received: (qmail 74925 invoked by uid 500); 25 Feb 2010 18:01:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74878 invoked by uid 500); 25 Feb 2010 18:01:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74870 invoked by uid 99); 25 Feb 2010 18:01:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 18:01:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 18:00:53 +0000
Received: by gwaa18 with SMTP id a18so48844gwa.35
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 10:00:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:subject:mime-version
         :content-type:from:x-priority:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=e3qhO7sPfqnFHaYUEryrHGwJN2pea4MrvKPgNPKDBnQ=;
        b=VSThmV+39wQJ0TXH+dNTzMTAorFDQyejvNPXg1+5OVufFScWWugGJJ7LPwIT0u/OmK
         hdGJLE08IC8mKruncaq2yyIoIgtAxtgOO1QS5ubL2GfS88UYfSVPOxDHPY5EOH8x17Kk
         zZH+mcRmj7g7U5a7YlkHE3HIRm8C1Bz3qIgv0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:subject:mime-version:content-type:from:x-priority
         :in-reply-to:date:content-transfer-encoding:message-id:references:to
         :x-mailer;
        b=mS7YxTMhXqiSAm4vP7owtelOMvPa+I6QTTHTGcjhQQRWYCxyFrcCzlOClcUjvdcMNV
         C/+1g7+6Ctk9td/ku3gpN3Tp1H6Dk6bHqyxn7ZLYEj4IF9yt/H7OKt4ADs7HdCzJtCr3
         fGlELgw8GkdtiQ5QJp3vIoP2so7VS49fWB3WM=
Received: by 10.90.11.12 with SMTP id 12mr346073agk.18.1267120832541;
        Thu, 25 Feb 2010 10:00:32 -0800 (PST)
Received: from ?10.0.0.77? (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 16sm2104023gxk.5.2010.02.25.10.00.31
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 25 Feb 2010 10:00:31 -0800 (PST)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Subject: Re: If you could have one feature in Lucene...
Mime-Version: 1.0 (Apple Message framework v1077)
Content-Type: text/plain; charset=us-ascii
From: Grant Ingersoll <gsingers@apache.org>
X-Priority: 3
In-Reply-To: <6D0771BCC06B4995A4707D52BFC39A50@sv.us.sonicwall.com>
Date: Thu, 25 Feb 2010 13:00:31 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <A7BF421A-2A7B-44C9-8DB2-44667082E8BC@apache.org>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org> <6D0771BCC06B4995A4707D52BFC39A50@sv.us.sonicwall.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 25, 2010, at 12:41 AM, Ganesh wrote:

>=20
> 1. Payload per document which could be updated without a need to =
update the entire document.=20
> Usecase: The state of our indexed content will change based on the =
User action (Created/ Viewed/Deleted etc) and we are using Lucene as our =
database and we cannot use relational database only for this feature.=20
>=20

I think you could likely do this now with some hacking, but yeah, it =
should be made more front and center.=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 18:02:21 2010
Return-Path: <java-user-return-45179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64777 invoked from network); 25 Feb 2010 18:02:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 18:02:21 -0000
Received: (qmail 78729 invoked by uid 500); 25 Feb 2010 18:02:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78679 invoked by uid 500); 25 Feb 2010 18:02:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78671 invoked by uid 99); 25 Feb 2010 18:02:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 18:02:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 18:02:10 +0000
Received: by ywh15 with SMTP id 15so614546ywh.20
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 10:01:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=fPFgf+UV80wObpEd7NT3vf3abN6WUwzUJ5F7/FXcTyo=;
        b=Hsy1jju62Xhysgp44LPRZHNnz7xTzvaRzSNwVPBX6TGZrmBw8BSzF52lz9B3Y8Ohp+
         36wea+Ew4LbucFt5VRCrFz5O7wx3/epomTBCBFEBjAwWZ+zlScxu57bxZK/77Ibv9KjT
         L/qyAkTwzSAZcR4wUEmhvk1NYd1+ANXSMCzUI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=meexAEtbeYP29XVQRhmg7bBklLD71ZUjY0ZnBqK9aONezokvvlFcNqKx+cd4QOlzsf
         PYZrreIBDru6Q5bF02xfR6xoNC+DNH5aVi81TaD4Dn6smzbjEo2UoOAFbNQztkIjNt4E
         Cmi6gKAyf5PbeRUSMzBSV3LWYKJoBb3fzxWwA=
Received: by 10.90.183.7 with SMTP id g7mr246880agf.42.1267120895965;
        Thu, 25 Feb 2010 10:01:35 -0800 (PST)
Received: from ?10.0.0.77? (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 13sm224354gxk.8.2010.02.25.10.01.34
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 25 Feb 2010 10:01:34 -0800 (PST)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: If you could have one feature in Lucene...
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <BC61C0F6-3D11-454B-983E-7A40534935B0@activemath.org>
Date: Thu, 25 Feb 2010 13:01:33 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <09E500F3-FA39-4413-99D2-28467208A3FF@apache.org>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org> <BC61C0F6-3D11-454B-983E-7A40534935B0@activemath.org>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 24, 2010, at 4:22 PM, Paul Libbrecht wrote:

> I would wish a highlighting feature that's fully integrated.

That's what Solr does.  Lucene is still, at the end of the day, a =
library of APIs for people to build things.  Solr/Nutch are the Lucene =
TLP way of expressing these sentiments.=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 18:03:14 2010
Return-Path: <java-user-return-45180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65239 invoked from network); 25 Feb 2010 18:03:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 18:03:14 -0000
Received: (qmail 82670 invoked by uid 500); 25 Feb 2010 18:03:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82620 invoked by uid 500); 25 Feb 2010 18:03:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82612 invoked by uid 99); 25 Feb 2010 18:03:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 18:03:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 18:03:02 +0000
Received: by mail-yw0-f185.google.com with SMTP id 15so614546ywh.20
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 10:02:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=llnMpGtH89SqDbRbBHoZTzwPG6KUrqLm/2SsgR6gbDA=;
        b=Dg+yU8M3cCxV6pjbTQmlFeOZkpcv7bSH3vddaPVyo45l/GuCB/0VJ9vgTOmaSOGStJ
         ol/Jjlkg+Nk6ZcozlE6WRe123bErUtUZPFJxNnKQCJVIKRVk8TSyZMWmK6NmKPPCTcdc
         KUP/sz+NbPe8xu1fzhCcsbFOeaxkERAq/FlBs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=AJWjFWE92yZC1Mqk7YZa7Qen697W/A0mDERntVgm/hpstToGiTXdq+cH/62B/5ow7g
         3HAGXymY0qBVty7RnIargcMGi7w89B0sdnuYAUOqvQoCcGLkh6cpMSzsQU8DDJhwQGeR
         iXW6QSYDxm/V41aOG71kOplddOrMayzj/Ph2Y=
Received: by 10.91.49.17 with SMTP id b17mr285622agk.69.1267120956396;
        Thu, 25 Feb 2010 10:02:36 -0800 (PST)
Received: from ?10.0.0.77? (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 13sm224354gxk.8.2010.02.25.10.02.35
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 25 Feb 2010 10:02:35 -0800 (PST)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: If you could have one feature in Lucene...
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <126142c1002241223u162d9bfp949efaafafe48f1b@mail.gmail.com>
Date: Thu, 25 Feb 2010 13:02:35 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <815758AD-81C3-43FD-BD6E-96BB75B74CD0@apache.org>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org> <126142c1002241223u162d9bfp949efaafafe48f1b@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, there's an open issue in Solr for this one.  It's non-trivial and =
I would love to have it too.

On Feb 24, 2010, at 3:23 PM, Marcelo Ochoa wrote:

>> What would it be?
>  An extended query parser syntax
> (http://lucene.apache.org/java/2_9_1/queryparsersyntax.html) including
> geo-location search.
>  For example:
>    hsin (great circle):                              name:Minneapolis
> AND _val_:"recip(hsin(0.78, -1.6, lat_rad, lon_rad, 3963.205), 1, 1,
> 0)"^100
>    dist (Euclidean, Manhattan, p-norm):   name:Minneapolis AND
> _val_:"recip(dist(2, lat, lon, 44.794, -93.2696), 1, 1, 0)"^100
>    sqedist (Squared Euclidean):              name:Minneapolis AND
> _val_:"recip(sqedist(lat, lon, 44.794, -93.2696), 1, 1, 0)"^100
>    ghhdist (Geohash Haversine):             name:Minneapolis AND
> _val_:"recip (ghhsin(geohash(44.79, -93), geohash, 3963.205), 1, 1,
> 0)"^100
>  source:
>    http://www.ibm.com/developerworks/java/library/j-spatial/index.html
>  Best regards, Marcelo.
> --=20
> Marcelo F. Ochoa
> http://marceloochoa.blogspot.com/
> http://marcelo.ochoa.googlepages.com/home
> ______________
> Want to integrate Lucene and Oracle?
> =
http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle=
-jvm.html
> Is Oracle 11g REST ready?
> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem using Solr/Lucene: =
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 18:14:31 2010
Return-Path: <java-user-return-45181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75110 invoked from network); 25 Feb 2010 18:14:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 18:14:31 -0000
Received: (qmail 16479 invoked by uid 500); 25 Feb 2010 18:14:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16448 invoked by uid 500); 25 Feb 2010 18:14:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16440 invoked by uid 99); 25 Feb 2010 18:14:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 18:14:29 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 18:14:21 +0000
Received: by ywh15 with SMTP id 15so624902ywh.20
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 10:14:00 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.47.18 with SMTP id u18mr133696ybu.173.1267121639816; Thu, 
	25 Feb 2010 10:13:59 -0800 (PST)
In-Reply-To: <e994873a1002250722n5d0cf7e7xb6cc9b9d8b0ae5d8@mail.gmail.com>
References: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
	 <9ac0c6aa1002220924q75da08a4s741376ff876ed20c@mail.gmail.com>
	 <e994873a1002220935q1394a3dau13fab93dc43fd293@mail.gmail.com>
	 <9ac0c6aa1002221130w3aa9c59dq2fe627e85c22bcf3@mail.gmail.com>
	 <e994873a1002221258y1cfba96atfb1fbb2c7dc65c90@mail.gmail.com>
	 <e994873a1002250722n5d0cf7e7xb6cc9b9d8b0ae5d8@mail.gmail.com>
Date: Thu, 25 Feb 2010 13:13:59 -0500
Message-ID: <9ac0c6aa1002251013j55a5e6e9h4a7e5331d2951c1b@mail.gmail.com>
Subject: Re: IndexWriter.getReader.getVersion behavior
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Do you know the place in the infoStream output where you got a reader
with the wrong (unexplained extra +1) version?  If so, can you post
the infoStream output up to that point?

Mike

On Thu, Feb 25, 2010 at 10:22 AM, Peter Keegan <peterlkeegan@gmail.com> wro=
te:
> I've reproduced this and I have a bunch of infoStream log files. Since th=
e
> messages have no timestamps, it's hard to tell where the relevant entries
> are. What should I be looking for?
>
> Peter
>
> On Mon, Feb 22, 2010 at 3:58 PM, Peter Keegan <peterlkeegan@gmail.com>wro=
te:
>
>> I'm pretty sure there are flushes and segment merges going on, but as yo=
u
>> said, that shouldn't affect the version increment. I'll see what I can d=
o to
>> get infoStream output.
>>
>> Thanks,
>> Peter
>>
>>
>> On Mon, Feb 22, 2010 at 2:30 PM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>>
>>> Well I'm at a loss then. =A0The version should only increment on commit=
.
>>>
>>> Can you make it all happen when infoStream is on, and post back?
>>>
>>> Mike
>>>
>>> On Mon, Feb 22, 2010 at 12:35 PM, Peter Keegan <peterlkeegan@gmail.com>
>>> wrote:
>>> > Only one writer thread and one writer process.
>>> > I'm calling IndexWriter(Directory d, Analyzer a, boolean create,
>>> > MaxFieldLength mfl), which sets autocommit=3Dfalse.
>>> >
>>> > Peter
>>> >
>>> > On Mon, Feb 22, 2010 at 12:24 PM, Michael McCandless <
>>> > lucene@mikemccandless.com> wrote:
>>> >
>>> >> That's curious.
>>> >>
>>> >> It's only on prepareCommit (or, commit, if you didn't first prepare,
>>> >> since that will call prepareCommit internally) that this version
>>> >> should increase.
>>> >>
>>> >> Is there only 1 thread doing this?
>>> >>
>>> >> Oh, and, are you passing false for autoCommit?
>>> >>
>>> >> Mike
>>> >>
>>> >> On Mon, Feb 22, 2010 at 11:43 AM, Peter Keegan <peterlkeegan@gmail.c=
om
>>> >
>>> >> wrote:
>>> >> > Using Lucene 2.9.1, I have the following pseudocode which gets
>>> repeated
>>> >> at
>>> >> > regular intervals:
>>> >> >
>>> >> > 1. FSDirectory dir =3D FSDirectory.open(java.io.File);
>>> >> > 2. dir.setLockFactory(new SingleInstanceLockFactory());
>>> >> > 3. IndexWriter writer =3D new IndexWriter(dir, Analyzer, false,
>>> >> maxFieldLen)
>>> >> > 4. writer.getReader().getVersion();
>>> >> > 5. writer.prepareCommit();
>>> >> > 6. writer.getReader().getVersion();
>>> >> > 7. writer.commit();
>>> >> > 8. writer.close();
>>> >> >
>>> >> > I'm using the version number to keep external data in synch with t=
he
>>> >> index.
>>> >> > Usually, the version number from (6) is 1 greater than from (4) an=
d
>>> the
>>> >> > version from (4) equals the version from the previous (6). At leas=
t
>>> once
>>> >> a
>>> >> > day, however, the version from (4) is 1 greater than from the
>>> previous
>>> >> (6).
>>> >> > What would explain this sporadic behavior of version numbers?
>>> >> >
>>> >> > Thanks,
>>> >> > Peter
>>> >> >
>>> >>
>>> >> --------------------------------------------------------------------=
-
>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>
>>> >>
>>> >
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 18:34:15 2010
Return-Path: <java-user-return-45182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84792 invoked from network); 25 Feb 2010 18:34:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 18:34:15 -0000
Received: (qmail 52235 invoked by uid 500); 25 Feb 2010 18:34:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52200 invoked by uid 500); 25 Feb 2010 18:34:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52192 invoked by uid 99); 25 Feb 2010 18:34:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 18:34:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 18:34:04 +0000
Received: by bwz9 with SMTP id 9so4673858bwz.5
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 10:33:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=BKRrdHz07Pxp/Xc+T8vFZ43410IDp/CLmDd5r5uEMgs=;
        b=eDyHx6XF2q6jJq8oD0PRsCi7dt4/L8LNmNHqsy/syjkLaoH+oJcaOTfmt9x2nHzpYE
         n0ILeYEohdc6TLpLsbvLTb9MoBBgTgmcL9ohGheId56E+ZOmNfRuArfHBt3wPv6Wg5Ue
         lpz6CRW/UsBuRzs9TiTqKb2eLmyWN1GKQoK1s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=sA8mEU3pu8BsUcO3a3xfB1fqjpFwspBU9pVdjIswrIU5YyXbDwsz4k0IaBjmKk7q9n
         XNNDLALJ+xPQ/TjPt0OmZd+ZUmiWHxfA2D2YHwvN6rqHbqVOD7gvVlHnW/HRspVPdeVU
         dk+8SBVBTPeup/xI5S6jQ0XfwnXls/CkGD6dg=
Received: by 10.204.5.216 with SMTP id 24mr921086bkw.141.1267122823738;
        Thu, 25 Feb 2010 10:33:43 -0800 (PST)
Received: from ?192.168.1.102? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 16sm3718279bwz.13.2010.02.25.10.33.39
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 25 Feb 2010 10:33:39 -0800 (PST)
Message-ID: <4B86C280.7050702@gmail.com>
Date: Thu, 25 Feb 2010 13:33:36 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.7) Gecko/20100222 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: If you could have one feature in Lucene...
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org> <85d3c3b61002250951u1499e083h75ee3a3f6e595aaa@mail.gmail.com>
In-Reply-To: <85d3c3b61002250951u1499e083h75ee3a3f6e595aaa@mail.gmail.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hahaha - you have a sly humor.

I totally agree though. Features are long overdo, and the committers are 
lazy.

I call for a cancellation of all of their paychecks and a stern warning 
about slacking off in Lucene land.

There are dozens of features that are just taking way to long - whatever 
happened to CSF? That feature is so 2006, and we still
don't have it? I'm completely disturbed about the whole situation myself.

Who the heck is in charge here?

On 02/25/2010 12:51 PM, Jason Rutherglen wrote:
> It'd be great to see the Lucene committers (besides Michael
> McCandless) work on the core of Lucene and push some of these long
> overdue features to fruition?
>
> On Wed, Feb 24, 2010 at 5:42 AM, Grant Ingersoll<gsingers@apache.org>  wrote:
>    
>> What would it be?
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 19:52:50 2010
Return-Path: <java-user-return-45183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36241 invoked from network); 25 Feb 2010 19:52:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 19:52:50 -0000
Received: (qmail 11669 invoked by uid 500); 25 Feb 2010 19:52:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11641 invoked by uid 500); 25 Feb 2010 19:52:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11632 invoked by uid 99); 25 Feb 2010 19:52:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 19:52:47 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.222.185 as permitted sender)
Received: from [209.85.222.185] (HELO mail-pz0-f185.google.com) (209.85.222.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 19:52:41 +0000
Received: by pzk15 with SMTP id 15so61056pzk.20
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 11:52:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=uEuTmR53v/qIFyZNVZfql1fU97JOIAWc6TDJ4k1SXoQ=;
        b=p8bs/wVPEZtpEM/bWdvQ8LKyWThc7KTwF8wcaGFzWU3FgipsbvwbCEMAC6ga4SBYDL
         S+BhVmhXHel82f6QlpFArlENSnJKd64t0hmQxsuv6oBiI1SLrX1SRyY52QicNbolhE76
         siSXSKClpeq2JFBYmUEa0SaSuNFpmmeNcKNJY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=U3jxF/kX/xPU3U4F9g6/bQ7+tBh3qlfsCxF1IOEZoKgRbGBPekQlt8ZMu+/nn/LbwO
         S9aRmLANvOC/LSBeMstQw5JxNJIm/nNoFVes+n0JaUXsEWdCGYjdjgUc9dcW2TQrScDr
         stP9eWvMgHdrq05v25iVW5FPxQPjWYCrx/1cQ=
MIME-Version: 1.0
Received: by 10.143.20.21 with SMTP id x21mr817345wfi.236.1267127540500; Thu, 
	25 Feb 2010 11:52:20 -0800 (PST)
In-Reply-To: <9ac0c6aa1002251013j55a5e6e9h4a7e5331d2951c1b@mail.gmail.com>
References: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
	 <9ac0c6aa1002220924q75da08a4s741376ff876ed20c@mail.gmail.com>
	 <e994873a1002220935q1394a3dau13fab93dc43fd293@mail.gmail.com>
	 <9ac0c6aa1002221130w3aa9c59dq2fe627e85c22bcf3@mail.gmail.com>
	 <e994873a1002221258y1cfba96atfb1fbb2c7dc65c90@mail.gmail.com>
	 <e994873a1002250722n5d0cf7e7xb6cc9b9d8b0ae5d8@mail.gmail.com>
	 <9ac0c6aa1002251013j55a5e6e9h4a7e5331d2951c1b@mail.gmail.com>
Date: Thu, 25 Feb 2010 14:52:20 -0500
Message-ID: <e994873a1002251152i5baf6db2o2901ed63eaf441d3@mail.gmail.com>
Subject: Re: IndexWriter.getReader.getVersion behavior
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502c5f9efca220480721e55

--00504502c5f9efca220480721e55
Content-Type: text/plain; charset=ISO-8859-1

I'm pretty sure this output occurred when the version number skipped +1.
The line containing '============'. separates the close/open IndexWriter.

IFD [Indexer]: setInfoStream
deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@646f9dd9
IW 9 [Indexer]: setInfoStream:
dir=org.apache.lucene.store.SimpleFSDirectory@<obfuscated
pathname>\lresumes1.search.main.1 autoCommit=false
mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@5be44512mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@6772cfdframBufferSizeMB=16.0
maxBufferedDocs=-1 maxBuffereDeleteTerms=-1
maxFieldLength=100000 index=_a:C9780 _b:C1204->_b _c:C717->_b _d:C1220->_d
_e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
IW 9 [Indexer]: flush at getReader
IW 9 [Indexer]:   flush: segment=null docStoreSegment=null docStoreOffset=0
flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
numBufDelTerms=0
IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b _c:C717->_b
_d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
IW 9 [UpdWriterBuild : 9]: DW:   RAM: now flush @ usedMB=15.816
allocMB=15.816 deletesMB=0.203 triggerMB=16
IW 9 [UpdWriterBuild : 9]:   flush: segment=_j docStoreSegment=_j
docStoreOffset=0 flushDocs=true flushDeletes=false flushDocStores=false
numDocs=1456 numBufDelTerms=1456
IW 9 [UpdWriterBuild : 9]:   index before flush _a:C9780 _b:C1204->_b
_c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
_i:C703->_h
IW 9 [UpdWriterBuild : 9]: DW: flush postings as segment _j numDocs=1456
IW 9 [UpdWriterBuild : 9]: DW:   oldRAMSize=16584704 newFlushedSize=4969789
docs/MB=307.202 new/old=29.966%
IFD [UpdWriterBuild : 9]: now checkpoint "segments_b" [10 segments ;
isCommit = false]
IFD [UpdWriterBuild : 9]: now checkpoint "segments_b" [10 segments ;
isCommit = false]
IW 9 [UpdWriterBuild : 9]: LMP: findMerges: 10 segments
IW 9 [UpdWriterBuild : 9]: LMP:   level 6.863048 to 7.613048: 1 segments
IW 9 [UpdWriterBuild : 9]: LMP:   level 6.2247195 to 6.696363: 9 segments
IW 9 [UpdWriterBuild : 9]: CMS: now merge
IW 9 [UpdWriterBuild : 9]: CMS:   index: _a:C9780 _b:C1204->_b _c:C717->_b
_d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
_j:C1456->_j
IW 9 [UpdWriterBuild : 9]: CMS:   no more merges pending; now return
IW 9 [Indexer]: prepareCommit: flush
IW 9 [Indexer]:   flush: segment=_k docStoreSegment=_j docStoreOffset=1456
flushDocs=true flushDeletes=true flushDocStores=true numDocs=509
numBufDelTerms=509
IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b _c:C717->_b
_d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
_j:C1456->_j
IW 9 [Indexer]:   flush shared docStore segment _j
IW 9 [Indexer]: DW: closeDocStore: 2 files to flush to segment _j
numDocs=1965
IW 9 [Indexer]: DW: flush postings as segment _k numDocs=509
IW 9 [Indexer]: DW:   oldRAMSize=7483392 newFlushedSize=1854970
docs/MB=287.727 new/old=24.788%
IFD [Indexer]: now checkpoint "segments_b" [11 segments ; isCommit = false]
IW 9 [Indexer]: DW: apply 1965 buffered deleted terms and 0 deleted docIDs
and 0 deleted queries on 11 segments.
IFD [Indexer]: now checkpoint "segments_b" [11 segments ; isCommit = false]
IW 9 [Indexer]: LMP: findMerges: 11 segments
IW 9 [Indexer]: LMP:   level 6.863048 to 7.613048: 1 segments
IW 9 [Indexer]: LMP:   level 6.2247195 to 6.696363: 10 segments
IW 9 [Indexer]: LMP:     1 to 11: add this merge
IW 9 [Indexer]: add merge to pendingMerges: _b:C1204->_b _c:C717->_b
_d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
_j:C1456->_j _k:C509->_j [total 1 pending]
IW 9 [Indexer]: CMS: now merge
IW 9 [Indexer]: CMS:   index: _a:C9780 _b:C1204->_b _c:C717->_b _d:C1220->_d
_e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j
_k:C509->_j
IW 9 [Indexer]: CMS:   consider merge _b:C1204->_b _c:C717->_b _d:C1220->_d
_e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j
_k:C509->_j into _l [mergeDocStores]
IW 9 [Indexer]: CMS:     launch new thread [Lucene Merge Thread #0]
IW 9 [Indexer]: CMS:   no more merges pending; now return
IW 9 [Indexer]: startCommit(): start sizeInBytes=0
IW 9 [Indexer]: startCommit index=_a:C9780 _b:C1204->_b _c:C717->_b
_d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
_j:C1456->_j _k:C509->_j changeCount=7
IW 9 [Lucene Merge Thread #0]: CMS:   merge thread: start
IW 9 [Indexer]: now sync _k.fnm
IW 9 [Lucene Merge Thread #0]: now merge
  merge=_b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f
_g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j _k:C509->_j into _l
[mergeDocStores]
  merge=org.apache.lucene.index.MergePolicy$OneMerge@5203ef34
  index=_a:C9780 _b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d
_f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j _k:C509->_j
IW 9 [Lucene Merge Thread #0]: merging _b:C1204->_b _c:C717->_b _d:C1220->_d
_e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j
_k:C509->_j into _l [mergeDocStores]
IW 9 [Indexer]: now sync _k.tii
IW 9 [Indexer]: now sync _k.tis
IW 9 [Lucene Merge Thread #0]: merge: total 9909 docs
IW 9 [Indexer]: now sync _j.tis
IW 9 [Indexer]: now sync _j.tii
IW 9 [Indexer]: now sync _j.fdx
IW 9 [Indexer]: now sync _j.fdt
IW 9 [Indexer]: now sync _k.prx
IW 9 [Indexer]: now sync _k.nrm
IW 9 [Indexer]: now sync _j.nrm
IW 9 [Indexer]: now sync _j.prx
IW 9 [Indexer]: now sync _j.fnm
IW 9 [Indexer]: now sync _k.frq
IW 9 [Indexer]: now sync _j.frq
IW 9 [Indexer]: done all syncs
IW 9 [Indexer]: flush at getReader
IW 9 [Indexer]:   flush: segment=null docStoreSegment=_k docStoreOffset=0
flushDocs=false flushDeletes=true flushDocStores=true numDocs=0
numBufDelTerms=0
IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b _c:C717->_b
_d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
_j:C1456->_j _k:C509->_j
IW 9 [Indexer]:   flush shared docStore segment _k
IW 9 [Indexer]: DW: closeDocStore: 0 files to flush to segment _k numDocs=0
IW 9 [Indexer]: commit: start
IW 9 [Indexer]: commit: already prepared
IW 9 [Indexer]: commit: pendingCommit != null
IW 9 [Indexer]: commit: wrote segments file "segments_c"
IFD [Indexer]: now checkpoint "segments_c" [11 segments ; isCommit = true]
IFD [Indexer]: deleteCommits: now decRef commit "segments_b"
IFD [Indexer]: delete "segments_b"
IW 9 [Indexer]: commit: done
IW 9 [Indexer]: flush at getReader
IW 9 [Indexer]:   flush: segment=null docStoreSegment=null docStoreOffset=0
flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
numBufDelTerms=0
IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b _c:C717->_b
_d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
_j:C1456->_j _k:C509->_j
IW 9 [Indexer]: now flush at close
IW 9 [Indexer]:   flush: segment=null docStoreSegment=null docStoreOffset=0
flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
numBufDelTerms=0
IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b _c:C717->_b
_d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
_j:C1456->_j _k:C509->_j
IW 9 [Indexer]: CMS: now merge
IW 9 [Indexer]: CMS:   index: _a:C9780 _b:C1204->_b _c:C717->_b _d:C1220->_d
_e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j
_k:C509->_j
IW 9 [Indexer]: CMS:   no more merges pending; now return
IW 9 [Lucene Merge Thread #0]: commitMerge: _b:C1204->_b _c:C717->_b
_d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
_j:C1456->_j _k:C509->_j into _l [mergeDocStores] index=_a:C9780
_b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f
_h:C1291->_h _i:C703->_h _j:C1456->_j _k:C509->_j
IW 9 [Lucene Merge Thread #0]: commitMergeDeletes _b:C1204->_b _c:C717->_b
_d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
_j:C1456->_j _k:C509->_j into _l [mergeDocStores]
IFD [Lucene Merge Thread #0]: now checkpoint "segments_c" [2 segments ;
isCommit = false]
IFD [Lucene Merge Thread #0]: now checkpoint "segments_c" [2 segments ;
isCommit = false]
IW 9 [Lucene Merge Thread #0]: CMS:   merge thread: done
IW 9 [Indexer]: now call final commit()
IW 9 [Indexer]: startCommit(): start sizeInBytes=0
IW 9 [Indexer]: startCommit index=_a:C9780 _l:C9909 changeCount=8
IW 9 [Indexer]: now sync _l.nrm
IW 9 [Indexer]: now sync _l.fnm
IW 9 [Indexer]: now sync _l.prx
IW 9 [Indexer]: now sync _l.frq
IW 9 [Indexer]: now sync _l.tis
IW 9 [Indexer]: now sync _l.fdx
IW 9 [Indexer]: now sync _l.fdt
IW 9 [Indexer]: now sync _l.tii
IW 9 [Indexer]: done all syncs
IW 9 [Indexer]: commit: pendingCommit != null
IW 9 [Indexer]: commit: wrote segments file "segments_d"
IFD [Indexer]: now checkpoint "segments_d" [2 segments ; isCommit = true]
IFD [Indexer]: deleteCommits: now decRef commit "segments_c"
IFD [Indexer]: delete "_h.prx"
IFD [Indexer]: delete "_f.tis"
IFD [Indexer]: delete "_g.tis"
IFD [Indexer]: delete "_d.tii"
IFD [Indexer]: delete "_e.frq"
IFD [Indexer]: delete "_k.fnm"
IFD [Indexer]: delete "_c.tii"
IFD [Indexer]: delete "_h.nrm"
IFD [Indexer]: delete "_i.tis"
IFD [Indexer]: delete "_k.tii"
IFD [Indexer]: delete "_h.fdt"
IFD [Indexer]: delete "_c.tis"
IFD [Indexer]: delete "_g.tii"
IFD [Indexer]: delete "_h.fdx"
IFD [Indexer]: delete "_c.nrm"
IFD [Indexer]: delete "_i.tii"
IFD [Indexer]: delete "_d.tis"
IFD [Indexer]: delete "_f.tii"
IFD [Indexer]: delete "_e.fnm"
IFD [Indexer]: delete "_k.tis"
IFD [Indexer]: delete "_d.frq"
IFD [Indexer]: delete "_f.nrm"
IFD [Indexer]: delete "_h.fnm"
IFD [Indexer]: delete "segments_c"
IFD [Indexer]: delete "_c.prx"
IFD [Indexer]: delete "_d.fnm"
IFD [Indexer]: delete "_h.frq"
IFD [Indexer]: delete "_h.tis"
IFD [Indexer]: delete "_f.fdt"
IFD [Indexer]: delete "_j.tis"
IFD [Indexer]: delete "_f.fdx"
IFD [Indexer]: delete "_g.nrm"
IFD [Indexer]: delete "_f.prx"
IFD [Indexer]: delete "_j.tii"
IFD [Indexer]: delete "_h.tii"
IFD [Indexer]: delete "_e.prx"
IFD [Indexer]: delete "_c.frq"
IFD [Indexer]: delete "_i.prx"
IFD [Indexer]: delete "_j.fdx"
IFD [Indexer]: delete "_i.nrm"
IFD [Indexer]: delete "_j.fdt"
IFD [Indexer]: delete "_k.prx"
IFD [Indexer]: delete "_b.nrm"
IFD [Indexer]: delete "_e.tis"
IFD [Indexer]: delete "_e.tii"
IFD [Indexer]: delete "_g.fnm"
IFD [Indexer]: delete "_k.nrm"
IFD [Indexer]: delete "_j.nrm"
IFD [Indexer]: delete "_j.prx"
IFD [Indexer]: delete "_e.nrm"
IFD [Indexer]: delete "_g.prx"
IFD [Indexer]: delete "_b.prx"
IFD [Indexer]: delete "_i.frq"
IFD [Indexer]: delete "_b.tis"
IFD [Indexer]: delete "_d.prx"
IFD [Indexer]: delete "_g.frq"
IFD [Indexer]: delete "_d.fdx"
IFD [Indexer]: delete "_b.tii"
IFD [Indexer]: delete "_b.frq"
IFD [Indexer]: delete "_d.fdt"
IFD [Indexer]: delete "_f.fnm"
IFD [Indexer]: delete "_j.fnm"
IFD [Indexer]: delete "_b.fnm"
IFD [Indexer]: delete "_d.nrm"
IFD [Indexer]: delete "_b.fdt"
IFD [Indexer]: delete "_k.frq"
IFD [Indexer]: delete "_c.fnm"
IFD [Indexer]: delete "_j.frq"
IFD [Indexer]: delete "_i.fnm"
IFD [Indexer]: delete "_f.frq"
IFD [Indexer]: delete "_b.fdx"
IW 9 [Indexer]: commit: done
IW 9 [Indexer]: at close: _a:C9780 _l:C9909

=====================================================

IFD [Indexer]: setInfoStream
deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@68d349c1
IW 10 [Indexer]: setInfoStream:
dir=org.apache.lucene.store.SimpleFSDirectory@<obfuscated
pathname>\lresumes1.search.main.1 autoCommit=false
mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@78f53abmergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@52be036dramBufferSizeMB=16.0
maxBufferedDocs=-1 maxBuffereDeleteTerms=-1
maxFieldLength=100000 index=_a:C9780 _l:C9909
IW 10 [Indexer]: flush at getReader
IW 10 [Indexer]:   flush: segment=null docStoreSegment=null docStoreOffset=0
flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
numBufDelTerms=0
IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909
IW 10 [UpdWriterBuild : 10]: DW:   RAM: now flush @ usedMB=15.789
allocMB=15.789 deletesMB=0.212 triggerMB=16
IW 10 [UpdWriterBuild : 10]:   flush: segment=_m docStoreSegment=_m
docStoreOffset=0 flushDocs=true flushDeletes=false flushDocStores=false
numDocs=1526 numBufDelTerms=1526
IW 10 [UpdWriterBuild : 10]:   index before flush _a:C9780 _l:C9909
IW 10 [UpdWriterBuild : 10]: DW: flush postings as segment _m numDocs=1526
IW 10 [UpdWriterBuild : 10]: DW:   oldRAMSize=16556032
newFlushedSize=4788823 docs/MB=334.138 new/old=28.925%
IFD [UpdWriterBuild : 10]: now checkpoint "segments_d" [3 segments ;
isCommit = false]
IFD [UpdWriterBuild : 10]: now checkpoint "segments_d" [3 segments ;
isCommit = false]
IW 10 [UpdWriterBuild : 10]: LMP: findMerges: 3 segments
IW 10 [UpdWriterBuild : 10]: LMP:   level 6.8642592 to 7.6142592: 2 segments
IW 10 [UpdWriterBuild : 10]: LMP:   level 6.2247195 to 6.6802545: 1 segments
IW 10 [UpdWriterBuild : 10]: CMS: now merge
IW 10 [UpdWriterBuild : 10]: CMS:   index: _a:C9780 _l:C9909 _m:C1526->_m
IW 10 [UpdWriterBuild : 10]: CMS:   no more merges pending; now return
IW 10 [Indexer]: prepareCommit: flush
IW 10 [Indexer]:   flush: segment=_n docStoreSegment=_m docStoreOffset=1526
flushDocs=true flushDeletes=true flushDocStores=true numDocs=501
numBufDelTerms=501
IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909 _m:C1526->_m
IW 10 [Indexer]:   flush shared docStore segment _m
IW 10 [Indexer]: DW: closeDocStore: 2 files to flush to segment _m
numDocs=2027
IW 10 [Indexer]: DW: flush postings as segment _n numDocs=501
IW 10 [Indexer]: DW:   oldRAMSize=6927360 newFlushedSize=1659342
docs/MB=316.593 new/old=23.953%
IFD [Indexer]: now checkpoint "segments_d" [4 segments ; isCommit = false]
IW 10 [Indexer]: DW: apply 2027 buffered deleted terms and 0 deleted docIDs
and 0 deleted queries on 4 segments.
IFD [Indexer]: now checkpoint "segments_d" [4 segments ; isCommit = false]
IW 10 [Indexer]: LMP: findMerges: 4 segments
IW 10 [Indexer]: LMP:   level 6.8642592 to 7.6142592: 2 segments
IW 10 [Indexer]: LMP:   level 6.2247195 to 6.6802545: 1 segments
IW 10 [Indexer]: LMP:   level -1.0 to 6.220011: 1 segments
IW 10 [Indexer]: CMS: now merge
IW 10 [Indexer]: CMS:   index: _a:C9780 _l:C9909 _m:C1526->_m _n:C501->_m
IW 10 [Indexer]: CMS:   no more merges pending; now return
IW 10 [Indexer]: startCommit(): start sizeInBytes=0
IW 10 [Indexer]: startCommit index=_a:C9780 _l:C9909 _m:C1526->_m
_n:C501->_m changeCount=6
IW 10 [Indexer]: now sync _m.frq
IW 10 [Indexer]: now sync _m.prx
IW 10 [Indexer]: now sync _n.tis
IW 10 [Indexer]: now sync _m.tis
IW 10 [Indexer]: now sync _n.frq
IW 10 [Indexer]: now sync _n.tii
IW 10 [Indexer]: now sync _m.tii
IW 10 [Indexer]: now sync _m.fnm
IW 10 [Indexer]: now sync _n.fnm
IW 10 [Indexer]: now sync _n.nrm
IW 10 [Indexer]: now sync _n.prx
IW 10 [Indexer]: now sync _m.nrm
IW 10 [Indexer]: now sync _m.fdt
IW 10 [Indexer]: now sync _m.fdx
IW 10 [Indexer]: done all syncs
IW 10 [Indexer]: flush at getReader
IW 10 [Indexer]:   flush: segment=null docStoreSegment=_n docStoreOffset=0
flushDocs=false flushDeletes=true flushDocStores=true numDocs=0
numBufDelTerms=0
IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909 _m:C1526->_m
_n:C501->_m
IW 10 [Indexer]:   flush shared docStore segment _n
IW 10 [Indexer]: DW: closeDocStore: 0 files to flush to segment _n numDocs=0
IW 10 [Indexer]: commit: start
IW 10 [Indexer]: commit: already prepared
IW 10 [Indexer]: commit: pendingCommit != null
IW 10 [Indexer]: commit: wrote segments file "segments_e"
IFD [Indexer]: now checkpoint "segments_e" [4 segments ; isCommit = true]
IFD [Indexer]: deleteCommits: now decRef commit "segments_d"
IFD [Indexer]: delete "segments_d"
IW 10 [Indexer]: commit: done
IW 10 [Indexer]: flush at getReader
IW 10 [Indexer]:   flush: segment=null docStoreSegment=null docStoreOffset=0
flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
numBufDelTerms=0
IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909 _m:C1526->_m
_n:C501->_m
IW 10 [Indexer]: now flush at close
IW 10 [Indexer]:   flush: segment=null docStoreSegment=null docStoreOffset=0
flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
numBufDelTerms=0
IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909 _m:C1526->_m
_n:C501->_m
IW 10 [Indexer]: CMS: now merge
IW 10 [Indexer]: CMS:   index: _a:C9780 _l:C9909 _m:C1526->_m _n:C501->_m
IW 10 [Indexer]: CMS:   no more merges pending; now return
IW 10 [Indexer]: now call final commit()
IW 10 [Indexer]: startCommit(): start sizeInBytes=0
IW 10 [Indexer]:   skip startCommit(): no changes pending
IW 10 [Indexer]: commit: pendingCommit == null; skip
IW 10 [Indexer]: commit: done
IW 10 [Indexer]: at close: _a:C9780 _l:C9909 _m:C1526->_m _n:C501->_m


Peter

On Thu, Feb 25, 2010 at 1:13 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Do you know the place in the infoStream output where you got a reader
> with the wrong (unexplained extra +1) version?  If so, can you post
> the infoStream output up to that point?
>
> Mike
>
> On Thu, Feb 25, 2010 at 10:22 AM, Peter Keegan <peterlkeegan@gmail.com>
> wrote:
> > I've reproduced this and I have a bunch of infoStream log files. Since
> the
> > messages have no timestamps, it's hard to tell where the relevant entries
> > are. What should I be looking for?
> >
> > Peter
> >
> > On Mon, Feb 22, 2010 at 3:58 PM, Peter Keegan <peterlkeegan@gmail.com
> >wrote:
> >
> >> I'm pretty sure there are flushes and segment merges going on, but as
> you
> >> said, that shouldn't affect the version increment. I'll see what I can
> do to
> >> get infoStream output.
> >>
> >> Thanks,
> >> Peter
> >>
> >>
> >> On Mon, Feb 22, 2010 at 2:30 PM, Michael McCandless <
> >> lucene@mikemccandless.com> wrote:
> >>
> >>> Well I'm at a loss then.  The version should only increment on commit.
> >>>
> >>> Can you make it all happen when infoStream is on, and post back?
> >>>
> >>> Mike
> >>>
> >>> On Mon, Feb 22, 2010 at 12:35 PM, Peter Keegan <peterlkeegan@gmail.com
> >
> >>> wrote:
> >>> > Only one writer thread and one writer process.
> >>> > I'm calling IndexWriter(Directory d, Analyzer a, boolean create,
> >>> > MaxFieldLength mfl), which sets autocommit=false.
> >>> >
> >>> > Peter
> >>> >
> >>> > On Mon, Feb 22, 2010 at 12:24 PM, Michael McCandless <
> >>> > lucene@mikemccandless.com> wrote:
> >>> >
> >>> >> That's curious.
> >>> >>
> >>> >> It's only on prepareCommit (or, commit, if you didn't first prepare,
> >>> >> since that will call prepareCommit internally) that this version
> >>> >> should increase.
> >>> >>
> >>> >> Is there only 1 thread doing this?
> >>> >>
> >>> >> Oh, and, are you passing false for autoCommit?
> >>> >>
> >>> >> Mike
> >>> >>
> >>> >> On Mon, Feb 22, 2010 at 11:43 AM, Peter Keegan <
> peterlkeegan@gmail.com
> >>> >
> >>> >> wrote:
> >>> >> > Using Lucene 2.9.1, I have the following pseudocode which gets
> >>> repeated
> >>> >> at
> >>> >> > regular intervals:
> >>> >> >
> >>> >> > 1. FSDirectory dir = FSDirectory.open(java.io.File);
> >>> >> > 2. dir.setLockFactory(new SingleInstanceLockFactory());
> >>> >> > 3. IndexWriter writer = new IndexWriter(dir, Analyzer, false,
> >>> >> maxFieldLen)
> >>> >> > 4. writer.getReader().getVersion();
> >>> >> > 5. writer.prepareCommit();
> >>> >> > 6. writer.getReader().getVersion();
> >>> >> > 7. writer.commit();
> >>> >> > 8. writer.close();
> >>> >> >
> >>> >> > I'm using the version number to keep external data in synch with
> the
> >>> >> index.
> >>> >> > Usually, the version number from (6) is 1 greater than from (4)
> and
> >>> the
> >>> >> > version from (4) equals the version from the previous (6). At
> least
> >>> once
> >>> >> a
> >>> >> > day, however, the version from (4) is 1 greater than from the
> >>> previous
> >>> >> (6).
> >>> >> > What would explain this sporadic behavior of version numbers?
> >>> >> >
> >>> >> > Thanks,
> >>> >> > Peter
> >>> >> >
> >>> >>
> >>> >>
> ---------------------------------------------------------------------
> >>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>> >>
> >>> >>
> >>> >
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00504502c5f9efca220480721e55--

From java-user-return-45184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 21:06:35 2010
Return-Path: <java-user-return-45184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66670 invoked from network); 25 Feb 2010 21:06:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 21:06:34 -0000
Received: (qmail 42323 invoked by uid 500); 25 Feb 2010 21:06:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42270 invoked by uid 500); 25 Feb 2010 21:06:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42258 invoked by uid 99); 25 Feb 2010 21:06:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 21:06:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 21:06:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NkkuK-0006cl-TR
	for java-user@lucene.apache.org; Thu, 25 Feb 2010 13:06:04 -0800
Message-ID: <27714523.post@talk.nabble.com>
Date: Thu, 25 Feb 2010 13:06:04 -0800 (PST)
From: PlusPlus <r.shahidinejad@gmail.com>
To: java-user@lucene.apache.org
Subject: Why is frequency a float number
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: r.shahidinejad@gmail.com


Hi,

   I was wondering why TF method gets a float parameter. Isn't frequency
always considered to be integer? 

   public abstract float tf(float freq)

Best,
Reza
-- 
View this message in context: http://old.nabble.com/Why-is-frequency-a-float-number-tp27714523p27714523.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 21:29:13 2010
Return-Path: <java-user-return-45185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80745 invoked from network); 25 Feb 2010 21:29:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 21:29:13 -0000
Received: (qmail 93274 invoked by uid 500); 25 Feb 2010 21:29:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93244 invoked by uid 500); 25 Feb 2010 21:29:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93236 invoked by uid 99); 25 Feb 2010 21:29:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 21:29:11 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [193.40.242.230] (HELO onyx.ttu.ee) (193.40.242.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 21:29:01 +0000
Received: from onyx.ttu.ee (unknown [127.0.0.1])
	by IMSA (Postfix) with ESMTP id 74F00250069
	for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 23:28:40 +0200 (EET)
Received: from private.best.ee (unknown [193.40.242.188])
	by onyx.ttu.ee (Postfix) with ESMTP id 6942F250064
	for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 23:28:40 +0200 (EET)
Received: from [192.168.0.100] (cpc4-cmbg14-2-0-cust30.5-4.cable.virginmedia.com [86.30.143.31])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by private.best.ee (Postfix) with ESMTPSA id E2B7B58EF0
	for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 23:28:39 +0200 (EET)
Message-ID: <4B86EB86.1060003@chu.cam.ac.uk>
Date: Thu, 25 Feb 2010 21:28:38 +0000
From: Marek Rei <mr472@chu.cam.ac.uk>
User-Agent: Thunderbird 2.0.0.23 (X11/20090817)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Why is frequency a float number
References: <27714523.post@talk.nabble.com>
In-Reply-To: <27714523.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Not sure about the implementation in Lucene but term frequency is
usually normalized.
Wikipedia: http://en.wikipedia.org/wiki/Tf%E2%80%93idf#Mathematical_details

Marek


PlusPlus wrote:
> Hi,
>
>    I was wondering why TF method gets a float parameter. Isn't frequency
> always considered to be integer? 
>
>    public abstract float tf(float freq)
>
> Best,
> Reza
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 23:19:15 2010
Return-Path: <java-user-return-45186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59717 invoked from network); 25 Feb 2010 23:19:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 23:19:14 -0000
Received: (qmail 63020 invoked by uid 500); 25 Feb 2010 23:19:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62991 invoked by uid 500); 25 Feb 2010 23:19:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62983 invoked by uid 99); 25 Feb 2010 23:19:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 23:19:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 23:19:04 +0000
Received: by pvd12 with SMTP id 12so1321423pvd.35
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 15:18:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=lUt7OtIFVWZkWwL9us11/8v32j6ESnauYD4OSMxBv0M=;
        b=bR/7p7/VF7g7g7ewW3cRA4BF+8y44h9rl6tOIKBAwwiwmTjRAGXOBFVeZcXRTzpfSU
         qR+pEubV+/j3BN9qKXJ87QhXpyfTIB0KYwsZAAHTD/ClFd+DW8dYLCOMjWRT+Fpjm+l1
         C5NgHj758GRBjux74Is5aXuj+ix+vm7bZj2VU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=GKuwDDbobq+oJ8HGISknUyRv+jysXVidB6BKOa1Z6MAdKEpqXVp8/WG3r8KXQpAWT6
         M4ZXuk4OIE2uhKRN9byAxcPRqkh5122hnbIkdGRlMaUGK/UulrxbmRU+Vsd1lxzLbvW9
         5ccobSjLbvcgsvsXChq09POZOhzZ1/MCu/DD0=
MIME-Version: 1.0
Received: by 10.141.91.10 with SMTP id t10mr126339rvl.127.1267139923452; Thu, 
	25 Feb 2010 15:18:43 -0800 (PST)
In-Reply-To: <4B86C280.7050702@gmail.com>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
	 <85d3c3b61002250951u1499e083h75ee3a3f6e595aaa@mail.gmail.com>
	 <4B86C280.7050702@gmail.com>
Date: Thu, 25 Feb 2010 15:18:43 -0800
Message-ID: <85d3c3b61002251518x7713064cnf6f944598ef88ae6@mail.gmail.com>
Subject: Re: If you could have one feature in Lucene...
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> Who the heck is in charge here?

Maybe it's Colonel Walter E. Kurtz?

Intuitively perhaps people expect the committers to drive the project?

When they don't see this are they less likely to contribute?

On Thu, Feb 25, 2010 at 10:33 AM, Mark Miller <markrmiller@gmail.com> wrote=
:
> Hahaha - you have a sly humor.
>
> I totally agree though. Features are long overdo, and the committers are
> lazy.
>
> I call for a cancellation of all of their paychecks and a stern warning
> about slacking off in Lucene land.
>
> There are dozens of features that are just taking way to long - whatever
> happened to CSF? That feature is so 2006, and we still
> don't have it? I'm completely disturbed about the whole situation myself.
>
> Who the heck is in charge here?
>
> On 02/25/2010 12:51 PM, Jason Rutherglen wrote:
>>
>> It'd be great to see the Lucene committers (besides Michael
>> McCandless) work on the core of Lucene and push some of these long
>> overdue features to fruition?
>>
>> On Wed, Feb 24, 2010 at 5:42 AM, Grant Ingersoll<gsingers@apache.org>
>> =A0wrote:
>>
>>>
>>> What would it be?
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 25 23:38:31 2010
Return-Path: <java-user-return-45187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67186 invoked from network); 25 Feb 2010 23:38:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Feb 2010 23:38:31 -0000
Received: (qmail 95841 invoked by uid 500); 25 Feb 2010 23:38:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95815 invoked by uid 500); 25 Feb 2010 23:38:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95807 invoked by uid 99); 25 Feb 2010 23:38:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Feb 2010 23:38:29 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.196.116.96] (HELO smtp111.biz.mail.re2.yahoo.com) (66.196.116.96)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Feb 2010 23:38:22 +0000
Received: (qmail 53632 invoked from network); 25 Feb 2010 23:38:00 -0000
Received: from [192.168.1.107] (nhira@97.116.10.160 with plain)
        by smtp111.biz.mail.re2.yahoo.com with SMTP; 25 Feb 2010 15:38:00 -0800 PST
X-Yahoo-SMTP: HoVJrkCswBCb_P7EOXqfUDnuuw--
X-YMail-OSG: WDkcnEIVM1mrBe1lMSyglb3_CZg.ADXBrI6b44wjAK1OgDgwseKyMCQ5DlmWW0tuvPXCxZk3NVTiRXz5454ZP.qxjGRy0Cnp9iwIgJdnT3UWUcuwfPOq6v2mSgbXHG9RnxRTGJGma1iPXhKv3fH3t7nfSWdQfo5GYtKoTf_SHjP40bgFeuWWBTtCZl8fgzRBSq6LG00Uu.NLzECY4k6V6XtbwKLwtbOYgSGvZPfc.lcWTq3YGgQZzlvc5JqjVT7570riULX73VTr49Gjon.gV8i9mBr3pBDxY9r70Cuo3Skshn.iU5hiwsTYf6JsoXJ4mXqN756xYkhpqtxwgHqPBM9avbJcfjM6ZPG66S3Y2umUXk2CxUKulMSxjEYr5MmsNuavR_.iMHWjVblj7fThRTL5c93dF1tWWNPwRiSY6r4M.dKV5Oo08.9Tzfsi02IzAuzNx0eaLtUCtBBKqWik
X-Yahoo-Newman-Property: ymail-3
Mime-Version: 1.0 (Apple Message framework v753.1)
In-Reply-To: <85d3c3b61002251518x7713064cnf6f944598ef88ae6@mail.gmail.com>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org> <85d3c3b61002250951u1499e083h75ee3a3f6e595aaa@mail.gmail.com> <4B86C280.7050702@gmail.com> <85d3c3b61002251518x7713064cnf6f944598ef88ae6@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EB9ED11B-50CD-4402-B52C-B4EF571ACBA9@cognocys.com>
Content-Transfer-Encoding: 7bit
From: "N. Hira" <nhira@cognocys.com>
Subject: Re: If you could have one feature in Lucene...
Date: Thu, 25 Feb 2010 17:37:56 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753.1)

I think it speaks to the maturity of the project ...  Lucene has  
solved some of the easier problems in the problem space and the ones  
that remain are ... difficult.

I recently introduced Lucene/Nutch to a group of ~10 relatively  
capable Java developers.  While they find it easy to use, they are  
also learning that search/info. retrieval is a deceptively  
challenging field.  From their "fresh" perspective, "this stuff  
[Lucene/Nutch] really works well once you get it going, but you  
really have to know what you are doing if you want to get the most  
from it".

Building on Erik Hatcher's "try-it-out" mantra, it might be  
interesting to see if contributions go up if we publicize specific  
test cases to demonstrate/resolve the problems.

-h

On 25-Feb-2010, at 5:18 PM, Jason Rutherglen wrote:

>> Who the heck is in charge here?
>
> Maybe it's Colonel Walter E. Kurtz?
>
> Intuitively perhaps people expect the committers to drive the project?
>
> When they don't see this are they less likely to contribute?
>
> On Thu, Feb 25, 2010 at 10:33 AM, Mark Miller  
> <markrmiller@gmail.com> wrote:
>> Hahaha - you have a sly humor.
>>
>> I totally agree though. Features are long overdo, and the  
>> committers are
>> lazy.
>>
>> I call for a cancellation of all of their paychecks and a stern  
>> warning
>> about slacking off in Lucene land.
>>
>> There are dozens of features that are just taking way to long -  
>> whatever
>> happened to CSF? That feature is so 2006, and we still
>> don't have it? I'm completely disturbed about the whole situation  
>> myself.
>>
>> Who the heck is in charge here?
>>
>> On 02/25/2010 12:51 PM, Jason Rutherglen wrote:
>>>
>>> It'd be great to see the Lucene committers (besides Michael
>>> McCandless) work on the core of Lucene and push some of these long
>>> overdue features to fruition?
>>>
>>> On Wed, Feb 24, 2010 at 5:42 AM, Grant  
>>> Ingersoll<gsingers@apache.org>
>>>  wrote:
>>>
>>>>
>>>> What would it be?
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 00:03:09 2010
Return-Path: <java-user-return-45188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78034 invoked from network); 26 Feb 2010 00:03:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 00:03:09 -0000
Received: (qmail 28157 invoked by uid 500); 26 Feb 2010 00:03:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28118 invoked by uid 500); 26 Feb 2010 00:03:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28110 invoked by uid 99); 26 Feb 2010 00:03:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 00:03:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 00:02:57 +0000
Received: by qw-out-2122.google.com with SMTP id 5so31500qwd.53
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 16:02:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=nY7KdSBqjaqcJZI+UvxAIH47apf2FJaOALUSNb9xBqM=;
        b=djpeABHEPoGheyM/1Z1MoR5+T8KvSVJqqChI3zo8cFyeZxR2Tq63Wf3BquKoZQfztx
         fvbmq/Svz4M+O6YqKtGkvb3Wl/FlCfq44nTao8SSYYevzrecRYXAG+OU72SLooVJ9J4i
         rAsEhejUYVysTcq/HRWv57QQreSsDXM4cGmCk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=Mi/ne++J5OFmv4vWKM+Y1LzexQIA9zpHse7Aaz4r8gLHo145YHVoQCOeMOlTbvJmHE
         y1ktpbPsDnE7rzyDbZvh+TgIcc/KhnZwfjdPAjZXzUGU6KJEm06T15m4lsnfxEnBfLee
         CBtHHi90mwMAaoV5bO2vIYR94MN6Io80igjMM=
Received: by 10.224.52.42 with SMTP id f42mr14182qag.266.1267142556113;
        Thu, 25 Feb 2010 16:02:36 -0800 (PST)
Received: from ?192.168.1.102? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 26sm1218167qwa.38.2010.02.25.16.02.34
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 25 Feb 2010 16:02:35 -0800 (PST)
Message-ID: <4B870F99.8000508@gmail.com>
Date: Thu, 25 Feb 2010 19:02:33 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.7) Gecko/20100222 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: If you could have one feature in Lucene...
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org> <85d3c3b61002250951u1499e083h75ee3a3f6e595aaa@mail.gmail.com> <4B86C280.7050702@gmail.com> <85d3c3b61002251518x7713064cnf6f944598ef88ae6@mail.gmail.com> <EB9ED11B-50CD-4402-B52C-B4EF571ACBA9@cognocys.com>
In-Reply-To: <EB9ED11B-50CD-4402-B52C-B4EF571ACBA9@cognocys.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

It's also not really the case that committers are mainly here to do work 
and push the project forward. It's an open source project - its up to 
the community to push the project as they see fit and have the time.

Committers are simply past contributers that have proven trustworthy and 
capable in the past - committers are here to commit code (not 
necessarily their own).

In an open source world, if you want something done, you do it yourself. 
Most committers have many other things going on at different points in 
time. This is the land of scratch your own itch most of the time - and 
once the itch is scratched, a committer will help you get the code 
commited. Some committers don't have the time to work with Lucene like 
they once did.

Some core committers have been off doing other things for some time now 
- others come and go. Some spend more time on Solr. Their time is not 
bound to Lucene in any way. Others spend an amazing amount of time on 
Lucene - it seems to me that Lucene has what appears to be 3 full time 
devs :) Uwe, Robert, and Michael are always hacking away at a frantic 
pace. They have done an amazing amount of work on the flex branch 
recently, a large move forward in the core code that will lead to many 
other large moves forward.

Committers come in all shapes and sizes. We should simply thank them for 
the time they put in and be happy with it. Lucene is developed by far 
more people than the committers - a committer is simply someone that has 
svn write access - anyone can (and many non committers do) drive Lucene 
core forward.

Not many are going to have the time and know how (and ridiculous genius) 
to match Mike McCandless' contributions. So it goes. If he is the bar 
for a committer, I quite.

-- 
- Mark

http://www.lucidimagination.com



On 02/25/2010 06:37 PM, N. Hira wrote:
> I think it speaks to the maturity of the project ...  Lucene has 
> solved some of the easier problems in the problem space and the ones 
> that remain are ... difficult.
>
> I recently introduced Lucene/Nutch to a group of ~10 relatively 
> capable Java developers.  While they find it easy to use, they are 
> also learning that search/info. retrieval is a deceptively challenging 
> field.  From their "fresh" perspective, "this stuff [Lucene/Nutch] 
> really works well once you get it going, but you really have to know 
> what you are doing if you want to get the most from it".
>
> Building on Erik Hatcher's "try-it-out" mantra, it might be 
> interesting to see if contributions go up if we publicize specific 
> test cases to demonstrate/resolve the problems.
>
> -h
>
> On 25-Feb-2010, at 5:18 PM, Jason Rutherglen wrote:
>
>>> Who the heck is in charge here?
>>
>> Maybe it's Colonel Walter E. Kurtz?
>>
>> Intuitively perhaps people expect the committers to drive the project?
>>
>> When they don't see this are they less likely to contribute?
>>
>> On Thu, Feb 25, 2010 at 10:33 AM, Mark Miller <markrmiller@gmail.com> 
>> wrote:
>>> Hahaha - you have a sly humor.
>>>
>>> I totally agree though. Features are long overdo, and the committers 
>>> are
>>> lazy.
>>>
>>> I call for a cancellation of all of their paychecks and a stern warning
>>> about slacking off in Lucene land.
>>>
>>> There are dozens of features that are just taking way to long - 
>>> whatever
>>> happened to CSF? That feature is so 2006, and we still
>>> don't have it? I'm completely disturbed about the whole situation 
>>> myself.
>>>
>>> Who the heck is in charge here?
>>>
>>> On 02/25/2010 12:51 PM, Jason Rutherglen wrote:
>>>>
>>>> It'd be great to see the Lucene committers (besides Michael
>>>> McCandless) work on the core of Lucene and push some of these long
>>>> overdue features to fruition?
>>>>
>>>> On Wed, Feb 24, 2010 at 5:42 AM, Grant Ingersoll<gsingers@apache.org>
>>>>  wrote:
>>>>
>>>>>
>>>>> What would it be?
>>>>>
>>>>> ---------------------------------------------------------------------
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 00:06:27 2010
Return-Path: <java-user-return-45189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81984 invoked from network); 26 Feb 2010 00:06:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 00:06:26 -0000
Received: (qmail 37480 invoked by uid 500); 26 Feb 2010 00:06:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37450 invoked by uid 500); 26 Feb 2010 00:06:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37442 invoked by uid 99); 26 Feb 2010 00:06:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 00:06:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tguttesen@gmail.com designates 209.85.220.221 as permitted sender)
Received: from [209.85.220.221] (HELO mail-fx0-f221.google.com) (209.85.220.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 00:06:16 +0000
Received: by fxm21 with SMTP id 21so1253453fxm.5
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 16:05:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=YHPZeNEdveVHGqNTTWux9dDR+caJogMb7szfADI8Q3E=;
        b=CxwBuOi84OFc4qFB6Vcrg1CgGKr46D4TLq5Eia+FMzgQK0Pk2lqZTCpdCokzjgGrxr
         HW5gKUkJ5vO0KD6aWIGA0jGYBTYuyK7fHZGWONXDpCwTyfE2waRU5igv2qOpvq+tR1fW
         MJ8cNkK4qvk1h8OVHQQVRUu8zC9mhFLEnhzbM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=klJSrYGm4oAsXv+z8kENKuFWWXsp4EgXifjaPP03Ldt5vX4VcPPJLZBVbh7GTZB2YS
         dUXEgYG4Iykj0saQYRIdDJQkpkB/flk7qN/PiEHvTj5fgM+diDd7Q3mojMv8Q31v1iTI
         PXufJ+c79CAHKwkzFh/j8g0XfgB/egWYUItUc=
MIME-Version: 1.0
Received: by 10.223.17.70 with SMTP id r6mr511541faa.24.1267142756282; Thu, 25 
	Feb 2010 16:05:56 -0800 (PST)
In-Reply-To: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
Date: Fri, 26 Feb 2010 01:05:56 +0100
Message-ID: <10fb9dea1002251605x4773b95fr3c201e3f235b225e@mail.gmail.com>
Subject: Re: If you could have one feature in Lucene...
From: Thomas Guttesen <tguttesen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015173fe688de31d4048075a91a
X-Virus-Checked: Checked by ClamAV on apache.org

--0015173fe688de31d4048075a91a
Content-Type: text/plain; charset=ISO-8859-1

RefCount on the IndexWriter, manually controlled but also controlled by
background merges.

2010/2/24 Grant Ingersoll <gsingers@apache.org>

> What would it be?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Med venlig hilsen

Thomas Guttesen

--0015173fe688de31d4048075a91a--

From java-user-return-45190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 00:49:08 2010
Return-Path: <java-user-return-45190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23463 invoked from network); 26 Feb 2010 00:49:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 00:49:08 -0000
Received: (qmail 79864 invoked by uid 500); 26 Feb 2010 00:49:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79828 invoked by uid 500); 26 Feb 2010 00:49:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79820 invoked by uid 99); 26 Feb 2010 00:49:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 00:49:05 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 00:48:57 +0000
Received: by pwi6 with SMTP id 6so5608062pwi.35
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 16:48:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=Yo2IIahQA8niLB3u0aIJN10bc+QIwoMS3oclU9Xddl8=;
        b=KMxJjIlDjGFzuT3VIl7HfpzhuFoNOfQ4eqoD9Fr/8MjRu89cdCQf7lof/vjMy3SbQq
         zLU9hSBaErUOJcyMF/6pV8gWmLMTaFpZgFE/9sFXFsi+FP2L1cNZEwOWYmBCIybR/Mkl
         j2SadLW8WyeOkUGNpg87IrWFn2E581UxeB2rs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=xeKL0TzY8iaYdtLj+Xl5k7rlALVY2l0A9TGvRCkz6rD+WMQIH2itnIGLinr8DgMW+g
         pnD5DYFFc+GmgBPwZRcN8gWHmnYB4y6jR81Rq1eZpJw5RaCoGDuSzBWz6/qRgYYlFh30
         43izqkicDwxMcEWoIdjf7PNlc4MMeJIlyJek0=
MIME-Version: 1.0
Received: by 10.114.4.40 with SMTP id 40mr377853wad.3.1267145317151; Thu, 25 
	Feb 2010 16:48:37 -0800 (PST)
In-Reply-To: <27714347.post@talk.nabble.com>
References: <27714347.post@talk.nabble.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 25 Feb 2010 19:48:17 -0500
Message-ID: <8f0ad1f31002251648v83bd462i9cf0ea7fb626954f@mail.gmail.com>
Subject: Re: Fuzzy membership of a term to the document
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e647eebc81f4d604807642df

--0016e647eebc81f4d604807642df
Content-Type: text/plain; charset=UTF-8

Hello Reza,

I've seen some similar stuff to what you mention, such as
http://ece.ut.ac.ir/dbrg/Hamshahri/Papers/FuFaIR.ppt
In that experiment, the membership was calculated with tf/idf parameters (it
looks like that gave best results).

I am scratching my head as to how this model could be easily implemented in
Lucene, but please report back if you figure something out... its
interesting!

On Wed, Feb 24, 2010 at 11:14 PM, PlusPlus <r.shahidinejad@gmail.com> wrote:

>
> Hi,
>
>   I want to change the Lucene's similarity in a way that I can add Fuzzy
> memberships to the terms of a document. Thus, TF value of a term in one
> document is not always 1, it can add 0.7 to the value of the TF ( (In my
> application, each term is contained in a document at most once). This
> membership value is available before index time.
>
>   On the other hand, each occurrence of a word will not be considered as 1
> documentfrequency for the IDF formula.
>
>   I was wondering if I can change the TF and IDF values of the terms like
> this. So far, I know that I can change the impact of TF values on the
> scoring, but not this thing that I'm looking for.
>
> Best,
> Reza
>
>
> --
> View this message in context:
> http://old.nabble.com/Fuzzy-membership-of-a-term-to-the-document-tp27714347p27714347.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--0016e647eebc81f4d604807642df--

From java-user-return-45191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 02:05:54 2010
Return-Path: <java-user-return-45191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72678 invoked from network); 26 Feb 2010 02:05:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 02:05:54 -0000
Received: (qmail 31924 invoked by uid 500); 26 Feb 2010 02:05:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31896 invoked by uid 500); 26 Feb 2010 02:05:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31888 invoked by uid 99); 26 Feb 2010 02:05:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 02:05:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andrew.bruno@gmail.com designates 209.85.223.189 as permitted sender)
Received: from [209.85.223.189] (HELO mail-iw0-f189.google.com) (209.85.223.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 02:05:45 +0000
Received: by iwn27 with SMTP id 27so5708141iwn.5
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 18:05:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=4bE+Oe3ZqF+EEgnlmc5ZX9y9KccFlR/Do7SSnjHKp94=;
        b=fIWzEYpGVpPGcOHnbwxDyMuIKT4xwlKWtZ4dsMPwq3JcZqdVVwumQe9Hsr6Rqsugxb
         ngxVZn3yCmiIOHsPxYaCVPQqe0KhqTXrPY7UfucJEsX1kLAPdtDxr8c4DRFbKLz141cG
         ajfIajGwKrsyX1ayxQ/BiYDyov9AQFSKht4KA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=UmhTbpJvQ7et3G8dFHSRcXTpqIWoa2S6AkO2b9jQNUhia9johsm8X22GZFf/p7MeHn
         YqDC4eDFi6A6XaF9bn0ydJTPkuEQxxcoFSeln8qJmWvZbijlPoU/CijuCLhO1swkxW1U
         Spw/Bv4bs2xcqKd7NFHyUrbL7xC65z3GE7W6M=
MIME-Version: 1.0
Received: by 10.231.144.15 with SMTP id x15mr468964ibu.99.1267149924204; Thu, 
	25 Feb 2010 18:05:24 -0800 (PST)
In-Reply-To: <8c4e68611002250154m15b47531l748bc8e6e97cea42@mail.gmail.com>
References: <9b906c961002241554x7a3e5225q3aa856bc1f99ebbe@mail.gmail.com>
	 <8c4e68611002250154m15b47531l748bc8e6e97cea42@mail.gmail.com>
Date: Fri, 26 Feb 2010 13:05:24 +1100
Message-ID: <9b906c961002251805n3cdfcc14v68f050dcfb306fdf@mail.gmail.com>
Subject: Re: NAS vs SAN vs Server Disk RAID
From: Andrew Bruno <andrew.bruno@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6469b601c67560480775570

--0016e6469b601c67560480775570
Content-Type: text/plain; charset=ISO-8859-1

Katta looks interesting.  I have also been looking at SOLR, but both of
these require reworking the application, and possibly re-indexing the world
again.

Do you know if Katta supports Compass/Lucene v2.0 migration?

Also, when I say 1T, what I really mean is that we have about 1200 different
indexes, which total 1Tbyte on this server.  This means that all indexes do
not need to be on one disk.

At the moment we are also processing about 20,000 index updates per hour on
the same server.

In theory SAN should work better, as its on fibre-optic so should have less
latency??? Opinions?

Thx/AB



On Thu, Feb 25, 2010 at 8:54 PM, Ian Lea <ian.lea@gmail.com> wrote:

> We've run lucene on NAS, although not with indexes anything like as
> large as 1Tb, and gave up because NFS and lucene don't really work
> very well together. Google for "lucene nfs" for some details, and some
> workarounds.
>
> I'd second Kay Kay's suggestion to look at a distributed solution such as
> Katta.
>
>
> --
> Ian.
>
>
> On Wed, Feb 24, 2010 at 11:54 PM, Andrew Bruno <andrew.bruno@gmail.com>
> wrote:
> > Hello,
> >
> > I am working with an application that offers its customers their own
> index,
> > primary two indexes for different needs per customer.
> >
> > As our business is growing and growing, I now have a situation where the
> web
> > application has its customer's index on one volume, and its getting close
> to
> > 1Tbyte.
> >
> > There are lots of updates and inserts, and plenty of searches.  As you
> can
> > imagine, the application is starting to slow down heavily, especially
> during
> > high traffic time when documents (PDF, DOCs, etc) are indexed.
> >
> > Since the disk IO on the server is high, our datacenter engineers
> suggested
> > we look at NAS or SAN, for performance gain, and for future growth.
> >
> > Has anyone had any experience in running Lucene2.0/Compass in these
> > environments?  Do you know of any case studies, whitepapers, web sites?
> >
> > Thanks
> > Andrew
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6469b601c67560480775570--

From java-user-return-45192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 03:02:47 2010
Return-Path: <java-user-return-45192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5412 invoked from network); 26 Feb 2010 03:02:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 03:02:47 -0000
Received: (qmail 65902 invoked by uid 500); 26 Feb 2010 03:02:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65750 invoked by uid 500); 26 Feb 2010 03:02:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65742 invoked by uid 99); 26 Feb 2010 03:02:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 03:02:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 03:02:37 +0000
Received: by bwz9 with SMTP id 9so5016051bwz.5
        for <java-user@lucene.apache.org>; Thu, 25 Feb 2010 19:02:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type;
        bh=88r9VED/EOALM0hk1JWj31EEYqv/LISV4H1frTX0aWk=;
        b=RO8/e/y2K2kn+vtC1Yw5ZkzrOCFaZ4froKJl2eaAv8PzwECxcDPXNJMv4l+ASXoq6W
         ijpZSKSAgLF8qel9/1kq9TrVAYV4DyyJ8OEVfcbJ1uurUMQbbrxTLzBbw4o3bv+oURlc
         gi6wi/F+Ybo3ZktuwMh/north5x3FykKe2wqQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type;
        b=d2ucoWRODwj339GJxjw0kQ/Btf0PK91XAvfpTl3iN5/gWt5r8OGbuHz/XJo0/01SFL
         pK2sgNnHun2u5wJZte4wrQG0zqxqzP5/9gn+9aRl8K3njjMA1QaZbSBVDsc3VM1AJoHi
         jtCApm2eKNyPJVXKsDTElPP9KGOdI6yGFAKiI=
Received: by 10.204.26.198 with SMTP id f6mr511257bkc.13.1267153335457;
        Thu, 25 Feb 2010 19:02:15 -0800 (PST)
Received: from ?192.168.1.100? (c-71-202-137-93.hsd1.ca.comcast.net [71.202.137.93])
        by mx.google.com with ESMTPS id 14sm3959186bwz.10.2010.02.25.19.02.12
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 25 Feb 2010 19:02:14 -0800 (PST)
Message-ID: <4B8739A3.2010703@gmail.com>
Date: Thu, 25 Feb 2010 19:01:55 -0800
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: NAS vs SAN vs Server Disk RAID
References: <9b906c961002241554x7a3e5225q3aa856bc1f99ebbe@mail.gmail.com>	 <8c4e68611002250154m15b47531l748bc8e6e97cea42@mail.gmail.com> <9b906c961002251805n3cdfcc14v68f050dcfb306fdf@mail.gmail.com>
In-Reply-To: <9b906c961002251805n3cdfcc14v68f050dcfb306fdf@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------050809070500060400040402"

--------------050809070500060400040402
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

To my experience, some customers used SAN to store the index. It's 
pretty good and fast. This may be a good choice for you, but it's costly.

-- 

--
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes: http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got 2.6 Million Euro funding!


Andrew Bruno wrote:
> Katta looks interesting.  I have also been looking at SOLR, but both of
> these require reworking the application, and possibly re-indexing the world
> again.
>
> Do you know if Katta supports Compass/Lucene v2.0 migration?
>
> Also, when I say 1T, what I really mean is that we have about 1200 different
> indexes, which total 1Tbyte on this server.  This means that all indexes do
> not need to be on one disk.
>
> At the moment we are also processing about 20,000 index updates per hour on
> the same server.
>
> In theory SAN should work better, as its on fibre-optic so should have less
> latency??? Opinions?
>
> Thx/AB
>
>
>
> On Thu, Feb 25, 2010 at 8:54 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
>   
>> We've run lucene on NAS, although not with indexes anything like as
>> large as 1Tb, and gave up because NFS and lucene don't really work
>> very well together. Google for "lucene nfs" for some details, and some
>> workarounds.
>>
>> I'd second Kay Kay's suggestion to look at a distributed solution such as
>> Katta.
>>
>>
>> --
>> Ian.
>>
>>
>> On Wed, Feb 24, 2010 at 11:54 PM, Andrew Bruno <andrew.bruno@gmail.com>
>> wrote:
>>     
>>> Hello,
>>>
>>> I am working with an application that offers its customers their own
>>>       
>> index,
>>     
>>> primary two indexes for different needs per customer.
>>>
>>> As our business is growing and growing, I now have a situation where the
>>>       
>> web
>>     
>>> application has its customer's index on one volume, and its getting close
>>>       
>> to
>>     
>>> 1Tbyte.
>>>
>>> There are lots of updates and inserts, and plenty of searches.  As you
>>>       
>> can
>>     
>>> imagine, the application is starting to slow down heavily, especially
>>>       
>> during
>>     
>>> high traffic time when documents (PDF, DOCs, etc) are indexed.
>>>
>>> Since the disk IO on the server is high, our datacenter engineers
>>>       
>> suggested
>>     
>>> we look at NAS or SAN, for performance gain, and for future growth.
>>>
>>> Has anyone had any experience in running Lucene2.0/Compass in these
>>> environments?  Do you know of any case studies, whitepapers, web sites?
>>>
>>> Thanks
>>> Andrew
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

--------------050809070500060400040402--

From java-user-return-45193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 06:48:44 2010
Return-Path: <java-user-return-45193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17046 invoked from network); 26 Feb 2010 06:48:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 06:48:44 -0000
Received: (qmail 19242 invoked by uid 500); 26 Feb 2010 06:48:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19128 invoked by uid 500); 26 Feb 2010 06:48:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19120 invoked by uid 99); 26 Feb 2010 06:48:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 06:48:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.136 as permitted sender)
Received: from [61.135.132.136] (HELO relay.mail.sohu.com) (61.135.132.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 06:48:29 +0000
Received: from mx16.mail.sohu.com (unknown [192.168.95.243])
	by relay.mail.sohu.com (Postfix) with ESMTP id 5090F3A59A17
	for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 14:48:04 +0800 (CST)
Received: from mx16.mail.sohu.com (localhost.localdomain [127.0.0.1])
	by mx16.mail.sohu.com (Postfix) with ESMTP id 3A3632842CB
	for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 14:47:57 +0800 (CST)
To: "java-user" <java-user@lucene.apache.org>
Message-ID: <1267166877.e64a01080ed44262973a44f55c285299.luocan19826164@sohu.com>
Subject: Re: problem about backup index file
Date: Fri, 26 Feb 2010 06:47:57 GMT
MIME-Version: 1.0
X-SHIP: 219.133.62.73
Reference: <1267085714.dc842d9fba134e76aca39fafb7b20144.luocan19826164@sohu.com>,
	<6D0771BCC06B4995A4707D52BFC39A50@sv.us.sonicwall.com>,
	<9ac0c6aa1002250719i5c0c5fa2hf050533c1d58ba54@mail.gmail.com>
In-Reply-To: <9ac0c6aa1002250719i5c0c5fa2hf050533c1d58ba54@mail.gmail.com>
From: luocan19826164@sohu.com
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_000_5d1215f51852448ebf98cc9288e0a2ca"
X-SOHU-Antispam-Bayes: 0

------_=_NextPart_000_5d1215f51852448ebf98cc9288e0a2ca
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

dGhhbmtzIGZvciB5b3VyIHBhcGVyLE1pY2hhZWwgTWNDYW5kbGVzc0kgaGF2ZSBvbmUgcXVldGlv
biBhYm91dCB0aGlzRm9yIGFsbCBvdGhlciBmaWxlcywgTHVjZW5lIGlzICJ3cml0ZSBvbmNlLuKA
nVRoaXMgbWFrZXMgZG9pbmcKaW5jcmVtZW50YWwgYmFja3VwcyB2ZXJ5IGVhc3k6IFNpbXBseSBj
b21wYXJlIHRoZSBmaWxlIG5hbWVzLk9uY2UgYQpmaWxlIGlzIHdyaXR0ZW4sIGl0IHdpbGwgbmV2
ZXIgY2hhbmdlOyB0aGVyZWZvcmUsIGlmIHlvdSd2ZSBhbHJlYWR5CmJhY2tlZCB1cCB0aGF0IGZp
bGUsIHRoZXJlJ3Mgbm8gbmVlZCB0byBjb3B5IGl0IGFnYWluLnRoaXMgbWVhbnMgdGhlIG51bWJl
ciBvZiBmaWxlcyBpcyBncm93aW5nIG1vcmUgYW5kIG1vcmUubmV2ZXIgZ2V0dGluZyBsZXNzLmFu
b3RoZXIgcXVlc3Rpb246SSBzaG91bGQgZGVsZXRlIHRoZSBmaWxlcyBwcmV2aW91cyBJIGJhY2t1
cCB3aGVuIEkgYmFja3VwIGFnYWluLiAtLS0tLSDljp/mlocgLS0tLS0g5Y+R5Lu25Lq6OiBNaWNo
YWVsIE1jQ2FuZGxlc3Mg5Li744CA6aKYOiBSZTogcHJvYmxlbSBhYm91dCBiYWNrdXAgaW5kZXgg
ZmlsZeaXtuOAgOmXtDogMjAxMOW5tDLmnIgyNeaXpSAgMjM6MTk6NTlUaGlzIGlzIGxpa2VseSBo
YXBwZW5pbmcgYmVjYXVzZSB5b3UncmUgYXR0ZW1wdGluZyB0byBjb3B5IGEgZmlsZSB0aGF0SW5k
ZXhXcml0ZXIgaXMgY3VycmVudGx5IHdyaXRpbmc/WW91IHNob3VsZG4ndCBkbyB0aGF0IChjb3B5
IGZpbGVzIHRoYXQgYXJlIHN0aWxsIGJlaW5nIHdyaXR0ZW4pIC0tdGhhdCBqdXN0IHdhc3RlcyBi
eXRlcyAodGhleSBhcmVuJ3QgdXNlZCBieSB0aGUgaW5kZXgpLCBhbmQgY2F1c2VzdGhpcyBmYWls
dXJlIG9uIFdpbmRvd3MuSW5zdGVhZCwgeW91IHNob3VsZCB1c2UgU25hcHNob3REZWxldGlvblBv
bGljeSAtLSBpdCB0ZWxscyB5b3VzcGVjaWZpY2FsbHkgd2hpY2ggZmlsZXMgbWFrZSB1cCB0aGUg
bGF0ZXN0IGNvbW1pdCBwb2ludC4gIFRob3NlIGZpbGVzd2lsbCBub3QgYmUgb3BlbmVkIGZvciB3
cml0aW5nIChvbmx5IGZvciByZWFkaW5nLCBpZiB5b3UgaGF2ZSBhbkluZGV4UmVhZGVyIG9wZW4g
b24gdGhhdCBjb21taXQpIGFuZCB0aGV5IHNob3VsZCBjb3B5IGp1c3QgZmluZSBvbndpbmRvd3Mu
VGhlICJIb3QgYmFja3VwcyB3aXRoIEx1Y2VuZSIgYXJ0aWNsZSAoTk9URTogSSdtIHRoZSBhdXRo
b3IpIGludXBjb21pbmcgTHVjZW5lIGluIEFjdGlvbiAyIHJldmlzaW9uIHNob3dzIGhvdyB0byBk
byB0aGlzIC0tIGl0J3NhdmFpbGFibGUgZm9yIGRvd25sb2FkIGZyb20gaHR0cDovL21hbm5pbmcu
Y29tL2hhdGNoZXIzLk1pa2VPbiBUaHUsIEZlYiAyNSwgMjAxMCBhdCAzOjE1IEFNLCAgJmx0O2x1
b2NhbjE5ODI2MTY0QHNvaHUuY29tJmd0OyB3cm90ZTomZ3Q7IEkgd2FudCBiYWNrdXAgbXkgaW5k
ZXggZmlsZSxidXQgSSBnZXQgdGhlIGZvbGxvdyBlcnJvci4mZ3Q7IGphdmEuaW8uSU9FeGNlcHRp
b246JmFtcDtuYnNwO2Fub3RoZXIgcHJvZ3JhbSBsb2NrIHRoZSBmaWxlISZhbXA7bmJzcDthdCBq
YXZhLmlvLkZpbGVJbnB1dFN0cmVhbS5yZWFkQnl0ZXMoTmF0aXZlIE1ldGhvZCkmYW1wO25ic3A7
YXQgamF2YS5pby5GaWxlSW5wdXRTdHJlYW0ucmVhZChVbmtub3duIFNvdXJjZSkmYW1wO25ic3A7
YXQgY29tLmNvbW1vbi5VdGlscy5jb3B5RGlyZWN0b3J5KFV0aWxzLmphdmE6MTQ5KSZhbXA7bmJz
cDthdCBjb20uY29tbW9uLlV0aWxzLmNvcHlEaXJlY3RvcnkoVXRpbHMuamF2YToxMzgpJmFtcDtu
YnNwO2F0IGNvbS5jb21tb24uVXRpbHMuY29weURpcmVjdG9yeShVdGlscy5qYXZhOjEzOCkmYW1w
O25ic3A7YXQgY29tLmluZGV4LkluZGV4TWFuYWdlci5iYWNrRGF0YVBvbGljeShJbmRleE1hbmFn
ZXIuamF2YTozOTgpJmFtcDtuYnNwO2F0IGNvbS5pbmRleC5JbmRleE1hbmFnZXIuaW5kZXhMb29w
KEluZGV4TWFuYWdlci5qYXZhOjIyMikmYW1wO25ic3A7YXQgY29tLk1haW4kMS5ydW4oTWFpbi5q
YXZhOjQ4KSZhbXA7bmJzcDthdCBqYXZhLmxhbmcuVGhyZWFkLnJ1bihVbmtub3duIFNvdXJjZSkm
Z3Q7ICZhbXA7bmJzcDsmZ3Q7IEhvdyBjYW4gSSBiYWNrdXAgbHVjZW5lIGZpbGUgaW4gSVIgdGhy
ZWFkLi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLVRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNj
cmliZUBsdWNlbmUuYXBhY2hlLm9yZ0ZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGph
dmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3Jn

------_=_NextPart_000_5d1215f51852448ebf98cc9288e0a2ca--



From java-user-return-45194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 08:17:56 2010
Return-Path: <java-user-return-45194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48888 invoked from network); 26 Feb 2010 08:17:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 08:17:55 -0000
Received: (qmail 96716 invoked by uid 500); 26 Feb 2010 08:17:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96475 invoked by uid 500); 26 Feb 2010 08:17:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96460 invoked by uid 99); 26 Feb 2010 08:17:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 08:17:53 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 08:17:44 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 6F8B4D36007;
	Fri, 26 Feb 2010 09:17:22 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id EG4Ok0Rjm1jW; Fri, 26 Feb 2010 09:17:12 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id E85F7D36006;
	Fri, 26 Feb 2010 09:17:11 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>,
	<java-dev@lucene.apache.org>
Subject: ANNOUNCE: Release of Lucene Java 3.0.1 and 2.9.2
Date: Fri, 26 Feb 2010 09:17:23 +0100
Message-ID: <000301cab6bc$200b7890$602269b0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acq2vB16QOy3CKeOTXe5r40gGF6Uig==
Content-Language: de
x-cr-hashedpuzzle: A2bH B1y3 CNh4 DIuj EDJJ IHJs LmrC LrFH MRBc MbVZ NCPK NIpA NRhF Nqj8 RHFD TkHG;2;agBhAHYAYQAtAGQAZQB2AEAAbAB1AGMAZQBuAGUALgBhAHAAYQBjAGgAZQAuAG8AcgBnADsAagBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{DF8DDCA7-319B-4257-952F-AEDBB9C0A41B};dQB3AGUAQAB0AGgAZQB0AGEAcABoAGkALgBkAGUA;Fri, 26 Feb 2010 08:17:19 GMT;QQBOAE4ATwBVAE4AQwBFADoAIABSAGUAbABlAGEAcwBlACAAbwBmACAATAB1AGMAZQBuAGUAIABKAGEAdgBhACAAMwAuADAALgAxACAAYQBuAGQAIAAyAC4AOQAuADIA
x-cr-puzzleid: {DF8DDCA7-319B-4257-952F-AEDBB9C0A41B}

Hello Lucene users,

On behalf of the Lucene development community I would like to announce =
the release of Lucene Java versions 3.0.1 and 2.9.2:

Both releases fix bugs in the previous versions:

- 2.9.2 is a bugfix release for the Lucene Java 2.x series, based on =
Java 1.4=20
- 3.0.1 has the same bug fix level but is for the Lucene Java 3.x =
series, based on Java 5.

New users of Lucene are advised to use version 3.0.1 for new =
developments, because it has a clean, type-safe API.

Important improvements in these releases include:

- An increased maximum number of unique terms in each index segment.
- Fixed experimental CustomScoreQuery to respect per-segment search. =
This introduced an API change!
- Important fixes to IndexWriter: a commit() thread-safety issue, lost =
document deletes in near real-time indexing.=20
- Bugfixes for Contrib's Analyzers package.
- Restoration of some public methods that were lost during deprecation =
removal.=20
- The new Attribute-based TokenStream API now works correctly with =
different class loaders.

Both releases are fully compatible with the corresponding previous =
versions. We strongly recommend upgrading to 2.9.2 if you are using =
2.9.1 or 2.9.0; and to 3.0.1 if you are using 3.0.0.

See core changes at
http://lucene.apache.org/java/3_0_1/changes/Changes.html
http://lucene.apache.org/java/2_9_2/changes/Changes.html

and contrib changes at
http://lucene.apache.org/java/3_0_1/changes/Contrib-Changes.html
http://lucene.apache.org/java/2_9_2/changes/Contrib-Changes.html

Binary and source distributions are available at
http://www.apache.org/dyn/closer.cgi/lucene/java/

Lucene artifacts are also available in the Maven2 repository at
http://repo1.maven.org/maven2/org/apache/lucene/

-----
Uwe Schindler
uschindler@apache.org=20
Apache Lucene Java Committer
Bremen, Germany
http://lucene.apache.org/java/docs/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 08:47:02 2010
Return-Path: <java-user-return-45195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58109 invoked from network); 26 Feb 2010 08:47:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 08:47:02 -0000
Received: (qmail 48011 invoked by uid 500); 26 Feb 2010 08:46:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47983 invoked by uid 500); 26 Feb 2010 08:46:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47975 invoked by uid 99); 26 Feb 2010 08:46:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 08:46:59 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.218] (HELO mail-gx0-f218.google.com) (209.85.217.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 08:46:50 +0000
Received: by gxk10 with SMTP id 10so5460314gxk.11
        for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 00:46:29 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.119.8 with SMTP id r8mr216991ybc.102.1267173989264; Fri, 
	26 Feb 2010 00:46:29 -0800 (PST)
In-Reply-To: <1267166877.e64a01080ed44262973a44f55c285299.luocan19826164@sohu.com>
References: <9ac0c6aa1002250719i5c0c5fa2hf050533c1d58ba54@mail.gmail.com>
	 <1267166877.e64a01080ed44262973a44f55c285299.luocan19826164@sohu.com>
Date: Fri, 26 Feb 2010 03:46:29 -0500
Message-ID: <9ac0c6aa1002260046r559b25a0t2f235b1dc430d7c5@mail.gmail.com>
Subject: Re: problem about backup index file
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Well, lucene is "write once" and then, eventually, "delete once" ;)

Ie files are eventually deleted (when they are merged away).

So when you do the incremental backup, any file not listed in the
current commit can be removed from your backup (assuming you only want
to backup the last commit).

Don't delete the files in your last backup... keep the ones that are
"in common" with your new backup as you don't need to recopy them
(they will not have changed).

Mike

On Fri, Feb 26, 2010 at 1:47 AM,  <luocan19826164@sohu.com> wrote:
> thanks for your paper,Michael McCandlessI have one quetion about thisFor =
all other files, Lucene is "write once."This makes doing
> incremental backups very easy: Simply compare the file names.Once a
> file is written, it will never change; therefore, if you've already
> backed up that file, there's no need to copy it again.this means the numb=
er of files is growing more and more.never getting less.another question:I =
should delete the files previous I backup when I backup again. ----- =D4=AD=
=CE=C4 ----- =B7=A2=BC=FE=C8=CB: Michael McCandless =D6=F7=A1=A1=CC=E2: Re:=
 problem about backup index file=CA=B1=A1=A1=BC=E4: 2010=C4=EA2=D4=C225=C8=
=D5  23:19:59This is likely happening because you're attempting to copy a f=
ile thatIndexWriter is currently writing?You shouldn't do that (copy files =
that are still being written) --that just wastes bytes (they aren't used by=
 the index), and causesthis failure on Windows.Instead, you should use Snap=
shotDeletionPolicy -- it tells youspecifically which files make up the late=
st commit point.  Those fileswill not be opened for writing (only for readi=
ng, if you have anIndexReader open on that commit) and they should copy jus=
t fine onwindows.The "Hot backups with Lucene" article (NOTE: I'm the autho=
r) inupcoming Lucene in Action 2 revision shows how to do this -- it'savail=
able for download from http://manning.com/hatcher3.MikeOn Thu, Feb 25, 2010=
 at 3:15 AM,  &lt;luocan19826164@sohu.com&gt; wrote:&gt; I want backup my i=
ndex file,but I get the follow error.&gt; java.io.IOException:&amp;nbsp;ano=
ther program lock the file!&amp;nbsp;at java.io.FileInputStream.readBytes(N=
ative Method)&amp;nbsp;at java.io.FileInputStream.read(Unknown Source)&amp;=
nbsp;at com.common.Utils.copyDirectory(Utils.java:149)&amp;nbsp;at com.comm=
on.Utils.copyDirectory(Utils.java:138)&amp;nbsp;at com.common.Utils.copyDir=
ectory(Utils.java:138)&amp;nbsp;at com.index.IndexManager.backDataPolicy(In=
dexManager.java:398)&amp;nbsp;at com.index.IndexManager.indexLoop(IndexMana=
ger.java:222)&amp;nbsp;at com.Main$1.run(Main.java:48)&amp;nbsp;at java.lan=
g.Thread.run(Unknown Source)&gt; &amp;nbsp;&gt; How can I backup lucene fil=
e in IR thread.------------------------------------------------------------=
---------To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.orgFor=
 additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 09:09:12 2010
Return-Path: <java-user-return-45196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67191 invoked from network); 26 Feb 2010 09:09:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 09:09:12 -0000
Received: (qmail 71634 invoked by uid 500); 26 Feb 2010 09:09:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71589 invoked by uid 500); 26 Feb 2010 09:09:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71577 invoked by uid 99); 26 Feb 2010 09:09:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 09:09:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 09:09:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NkwBe-0004Ds-A0
	for java-user@lucene.apache.org; Fri, 26 Feb 2010 01:08:42 -0800
Message-ID: <27714347.post@talk.nabble.com>
Date: Fri, 26 Feb 2010 01:08:42 -0800 (PST)
From: PlusPlus <r.shahidinejad@gmail.com>
To: java-user@lucene.apache.org
Subject: Fuzzy membership of a term to the document
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: r.shahidinejad@gmail.com


Hi,

   I want to change the Lucene's similarity in a way that I can add Fuzzy
memberships to the terms of a document. Thus, TF value of a term in one
document is not always 1, it can add 0.7 to the value of the TF ( (In my
application, each term is contained in a document at most once). This
membership value is available before index time.

   On the other hand, each occurrence of a word will not be considered as 1
documentfrequency for the IDF formula. 

   I was wondering if I can change the TF and IDF values of the terms like
this. So far, I know that I can change the impact of TF values on the
scoring, but not this thing that I'm looking for. 

Best,
Reza


-- 
View this message in context: http://old.nabble.com/Fuzzy-membership-of-a-term-to-the-document-tp27714347p27714347.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 09:11:12 2010
Return-Path: <java-user-return-45197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67916 invoked from network); 26 Feb 2010 09:11:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 09:11:12 -0000
Received: (qmail 80500 invoked by uid 500); 26 Feb 2010 09:11:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80459 invoked by uid 500); 26 Feb 2010 09:11:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80451 invoked by uid 99); 26 Feb 2010 09:11:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 09:11:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 09:11:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NkwDa-0004Mh-J6
	for java-user@lucene.apache.org; Fri, 26 Feb 2010 01:10:42 -0800
Message-ID: <27714523.post@talk.nabble.com>
Date: Fri, 26 Feb 2010 01:10:42 -0800 (PST)
From: PlusPlus <r.shahidinejad@gmail.com>
To: java-user@lucene.apache.org
Subject: Why is frequency a float number
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: r.shahidinejad@gmail.com


Hi,

   I was wondering why TF method gets a float parameter. Isn't frequency
always considered to be integer? 

   public abstract float tf(float freq)

Best,
Reza
-- 
View this message in context: http://old.nabble.com/Why-is-frequency-a-float-number-tp27714523p27714523.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 09:31:31 2010
Return-Path: <java-user-return-45198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76367 invoked from network); 26 Feb 2010 09:31:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 09:31:31 -0000
Received: (qmail 670 invoked by uid 500); 26 Feb 2010 09:31:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 627 invoked by uid 500); 26 Feb 2010 09:31:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 619 invoked by uid 99); 26 Feb 2010 09:31:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 09:31:29 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 09:31:19 +0000
Received: from compute1.internal (compute1 [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 05426DFDB2;
	Fri, 26 Feb 2010 04:30:59 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Fri, 26 Feb 2010 04:30:59 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=OqHHembYCifAEctM2HCrtVjYWmA=; b=qfSK3sVc2mb2Qum6pGULYrIAFzyCk5ZRpNtHKvUAfZ759PyCxOGjWShuekNAcUyeG2Y65393vWri6+Ir+wLAx9XIVAu39paV7t1r3eVY1Qyidk3JY4rWl/VxOuj2noPoNb8YKzYTB64j2mzSZ3koHPJ2mGiZsTk8ajgnQs29EBc=
X-Sasl-enc: e87HfYmXjk8NsXKnNLP0xwyeqtqZzpAQBIERamZxfYxC 1267176658
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 5859D4BD736;
	Fri, 26 Feb 2010 04:30:58 -0500 (EST)
Message-ID: <4B8794D1.5060407@fastmail.fm>
Date: Fri, 26 Feb 2010 09:30:57 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: Glen Newton <glen.newton@gmail.com>
CC: java-user@lucene.apache.org
Subject: Re: If you could have one feature in Lucene...
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>	 <4B8632A1.1030201@fastmail.fm>	 <698f0de11002250145v74add479yb08b1b62a79cede3@mail.gmail.com> <5e76f3841002250921n5faae137s13e99686699e2de4@mail.gmail.com>
In-Reply-To: <5e76f3841002250921n5faae137s13e99686699e2de4@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Glen Newton wrote:
> +2
>
> On 25 February 2010 04:45, Avi Rosenschein <arosenschein@gmail.com> wrote:
>   
>>> Similarity can only be set per index, but I  want to adjust scoring
>>> behaviour at a field level, to faciliate this could we pass make field name
>>> available to all score methods.
>>> Currently it is only passed to some such as lengthNorm() but not others
>>> such as tf()
>>>
>>> +1
>>>       
>> -- Avi
>>
>>     
I had already raised this in 
https://issues.apache.org/jira/browse/LUCENE-2236 if you ant to add 
anything to it
 

>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 10:13:04 2010
Return-Path: <java-user-return-45199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95915 invoked from network); 26 Feb 2010 10:13:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 10:13:04 -0000
Received: (qmail 56175 invoked by uid 500); 26 Feb 2010 10:13:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56137 invoked by uid 500); 26 Feb 2010 10:13:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56122 invoked by uid 99); 26 Feb 2010 10:13:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 10:13:01 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 10:12:51 +0000
Received: from compute1.internal (compute1 [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 8F89FE1E73;
	Fri, 26 Feb 2010 05:12:30 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Fri, 26 Feb 2010 05:12:30 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=cHyU3XrI2fXe8sevaFrp3xJI+00=; b=M5AFAes4lcGA5/p+m9QFpYy7f1yZTsBlp5kWuQUh1RDwqa7tfe3wDICgL60CykgXlNPbGktHGQo+kMOwNrc+nlS+LLVy2+T+40cwmkOuGTKGK0qzAHk4mvA+62lOd/zQxCAWxor8r1TlkZC8z/6Kar0fgFnfOasFGlp7QMYS2aI=
X-Sasl-enc: FUzCaXf5C7zMaQ0LnhY+GsUtd1dXIrEHeegRQJxoDqx1 1267179150
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id B5AF24BC031;
	Fri, 26 Feb 2010 05:12:29 -0500 (EST)
Message-ID: <4B879E8C.4050507@fastmail.fm>
Date: Fri, 26 Feb 2010 10:12:28 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: java-dev@lucene.apache.org
Subject: Re: ANNOUNCE: Release of Lucene Java 3.0.1 and 2.9.2
References: <000301cab6bc$200b7890$602269b0$@de>
In-Reply-To: <000301cab6bc$200b7890$602269b0$@de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Uwe Schindler wrote:
> Hello Lucene users,
>
> On behalf of the Lucene development community I would like to announce the release of Lucene Java versions 3.0.1 and 2.9.2:
>
> Both releases fix bugs in the previous versions:
>
> - 2.9.2 is a bugfix release for the Lucene Java 2.x series, based on Java 1.4 
> - 3.0.1 has the same bug fix level but is for the Lucene Java 3.x series, based on Java 5.
Hmm , I don't really agree with deprecating Version.LUCENE_CURRENT ( 
http://issues.apache.org/jira/browse/LUCENE-2080)

I'm sure in many projects, especially ones that are not yet released 
developers would expect to pick up the latest features when they 
download the latest version of Lucene without having to update the value 
of the Version constant (its just make devlopment a bit more tiresome) 
and would realize that code should be rebuilt and  indexes should be 
built with same version as searching indexes. I mean whenever you update 
the version of a library should really test your code, after all Lucene 
3.0.0 changed some things in 2.9.2 unwittingly, hence the need for 3.0.1.

Paul




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 10:24:36 2010
Return-Path: <java-user-return-45200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 397 invoked from network); 26 Feb 2010 10:24:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 10:24:36 -0000
Received: (qmail 77092 invoked by uid 500); 26 Feb 2010 10:24:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76900 invoked by uid 500); 26 Feb 2010 10:24:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76892 invoked by uid 99); 26 Feb 2010 10:24:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 10:24:34 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 10:24:26 +0000
Received: by pvd12 with SMTP id 12so1461427pvd.35
        for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 02:24:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=NGrZnimOeEqRx8I+fHt25jcsofTCk1Mv3XYc6ehgVyA=;
        b=u0hbNfFA+Q3bFOpr0UCfgbrxOeVLSe0yHrxC5PFHFH8FsgUdwOx2xkroSjwG0TICpn
         d4KPgaHXVYMKced1aHR3bytJvbL0wex5wL8zn8vof6lSSe1PTNa/iDxenw8luaXEQcit
         AKb3WXrnlQNZmZamECdO7sEIJAeGSTgD21hek=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=c1eut1cnIvEMnlNmuttjO2RNyPGHQE57GxV/atIgfAps0YQBwrt61jaXfGqSturtbR
         32G4wpO7pJPrSMRnNiMJpAf2/gJNHCWBhJM5PpUA9WcWvrVIPHnglS+hUakdaJ/qum/2
         cefe7FgKVNi6+tT/cvGDtqpo9BRxFRHifEDpQ=
MIME-Version: 1.0
Received: by 10.114.6.30 with SMTP id 30mr88084waf.143.1267179845115; Fri, 26 
	Feb 2010 02:24:05 -0800 (PST)
In-Reply-To: <4B879E8C.4050507@fastmail.fm>
References: <000301cab6bc$200b7890$602269b0$@de> <4B879E8C.4050507@fastmail.fm>
From: Robert Muir <rcmuir@gmail.com>
Date: Fri, 26 Feb 2010 05:23:45 -0500
Message-ID: <8f0ad1f31002260223u400a1ec4qdf2cec5aed33377@mail.gmail.com>
Subject: Re: ANNOUNCE: Release of Lucene Java 3.0.1 and 2.9.2
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Content-Type: multipart/alternative; boundary=0016e6480ca488e16004807e4c71
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6480ca488e16004807e4c71
Content-Type: text/plain; charset=UTF-8

such projects can do this, in one place:

public static final Version MY_APP_CURRENT = Version.LUCENE_30;

then later....

StandardAnalyzer analyzer = new StandardAnalyzer(MY_APP_CURRENT);

then they have complete control of this, independent of when the upgrade
lucene's jar file!

On Fri, Feb 26, 2010 at 5:12 AM, Paul Taylor <paul_t100@fastmail.fm> wrote:

> Uwe Schindler wrote:
>
>> Hello Lucene users,
>>
>> On behalf of the Lucene development community I would like to announce the
>> release of Lucene Java versions 3.0.1 and 2.9.2:
>>
>> Both releases fix bugs in the previous versions:
>>
>> - 2.9.2 is a bugfix release for the Lucene Java 2.x series, based on Java
>> 1.4 - 3.0.1 has the same bug fix level but is for the Lucene Java 3.x
>> series, based on Java 5.
>>
> Hmm , I don't really agree with deprecating Version.LUCENE_CURRENT (
> http://issues.apache.org/jira/browse/LUCENE-2080)
>
> I'm sure in many projects, especially ones that are not yet released
> developers would expect to pick up the latest features when they download
> the latest version of Lucene without having to update the value of the
> Version constant (its just make devlopment a bit more tiresome) and would
> realize that code should be rebuilt and  indexes should be built with same
> version as searching indexes. I mean whenever you update the version of a
> library should really test your code, after all Lucene 3.0.0 changed some
> things in 2.9.2 unwittingly, hence the need for 3.0.1.
>
> Paul
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--0016e6480ca488e16004807e4c71--

From java-user-return-45201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 10:27:41 2010
Return-Path: <java-user-return-45201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1712 invoked from network); 26 Feb 2010 10:27:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 10:27:41 -0000
Received: (qmail 82350 invoked by uid 500); 26 Feb 2010 10:27:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82309 invoked by uid 500); 26 Feb 2010 10:27:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82299 invoked by uid 99); 26 Feb 2010 10:27:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 10:27:39 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 10:27:30 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 50F22E2615;
	Fri, 26 Feb 2010 05:27:10 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Fri, 26 Feb 2010 05:27:10 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=se3QNkTiVj1leOsDEE5JtOxU1KM=; b=XVzHC/Mgx5sQ9VVAx6ux0FmeTYJhzggvcE3+PrH3bFlxnu5oPJYdjo/Hpm4RhjWc8B4XZEN/V7WJGNKYV0egutXf1UQZy+cIalNHlOFzgKl73fGlcYapVqgtc6E2i1/YUY0+81f2aF62HD3+iblmdfI2CXU3MXVJH/mlk0Eqyh4=
X-Sasl-enc: emmLxbdZZPB0jAkblCj8HODfmERLR+n01z7Xy33lxNDu 1267180029
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 9F29549D83C;
	Fri, 26 Feb 2010 05:27:09 -0500 (EST)
Message-ID: <4B87A1FC.70305@fastmail.fm>
Date: Fri, 26 Feb 2010 10:27:08 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: Robert Muir <rcmuir@gmail.com>
CC: java-user@lucene.apache.org
Subject: Re: ANNOUNCE: Release of Lucene Java 3.0.1 and 2.9.2
References: <000301cab6bc$200b7890$602269b0$@de> <4B879E8C.4050507@fastmail.fm> <8f0ad1f31002260223u400a1ec4qdf2cec5aed33377@mail.gmail.com>
In-Reply-To: <8f0ad1f31002260223u400a1ec4qdf2cec5aed33377@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

Robert Muir wrote:
> such projects can do this, in one place:
>
> public static final Version MY_APP_CURRENT = Version.LUCENE_30;
>
> then later....
>
> StandardAnalyzer analyzer = new StandardAnalyzer(MY_APP_CURRENT);
>
> then they have complete control of this, independent of when the 
> upgrade lucene's jar file!
Not quite true because you still need to update MY_APP_CURRENT when 
there is a new version, but yes thats more mangeable

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 10:43:17 2010
Return-Path: <java-user-return-45202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7638 invoked from network); 26 Feb 2010 10:43:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 10:43:17 -0000
Received: (qmail 3842 invoked by uid 500); 26 Feb 2010 10:43:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3795 invoked by uid 500); 26 Feb 2010 10:43:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3787 invoked by uid 99); 26 Feb 2010 10:43:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 10:43:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jzillmann@googlemail.com designates 209.85.220.221 as permitted sender)
Received: from [209.85.220.221] (HELO mail-fx0-f221.google.com) (209.85.220.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 10:43:04 +0000
Received: by fxm21 with SMTP id 21so1605804fxm.5
        for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 02:42:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:subject:mime-version
         :content-type:from:in-reply-to:date:cc:content-transfer-encoding
         :message-id:references:to:x-mailer;
        bh=Z0FxbhsqpIxAduYXsJtHF/BE3feCy1N0xUkGhEQo0UI=;
        b=s1j+S/pTzXWaTJpeUTxO713nyTilIJcO1lTcC7ebjUg1AkmiYYJviLI/Jg3UC5AL3b
         x68Lm2s+5UnEOGQ5+h7a7NWXdp3pRUjyYvNZ1zxW0urCFVufSpBSqhr8FrJwYPuhH2PT
         IYT1bvKwwAlHVgr0IL3p8kNPmuXS2dkFXKJy4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=subject:mime-version:content-type:from:in-reply-to:date:cc
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=YbwPqAHJsUrT04VRjvswhQ/NuGKSUvDB9BdE1s42WwudpJa1tiuLmayfRE/vgrH9+m
         JkUH+2jZClDD5iVLF1sPJkVR7HIgY7fNmPsZ/xwtzcIIeaTUzJsmdZi6SATH6TTXEiuH
         ImKVriHcfWoiuKaJ6iGhsJ8+mswkGFXeZsDbQ=
Received: by 10.87.47.3 with SMTP id z3mr467318fgj.70.1267180964535;
        Fri, 26 Feb 2010 02:42:44 -0800 (PST)
Received: from ?192.168.200.206? (mslinux.101tec.com [80.64.182.137])
        by mx.google.com with ESMTPS id d8sm3274730fga.14.2010.02.26.02.42.41
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 26 Feb 2010 02:42:43 -0800 (PST)
Subject: Re: ANNOUNCE: Release of Lucene Java 3.0.1 and 2.9.2
Mime-Version: 1.0 (Apple Message framework v1077)
Content-Type: text/plain; charset=us-ascii
From: Johannes Zillmann <jzillmann@googlemail.com>
In-Reply-To: <4B87A1FC.70305@fastmail.fm>
Date: Fri, 26 Feb 2010 11:42:40 +0100
Cc: Robert Muir <rcmuir@gmail.com>
Content-Transfer-Encoding: quoted-printable
Message-Id: <C30F5A61-DAB3-431B-BD44-DCD13249588D@googlemail.com>
References: <000301cab6bc$200b7890$602269b0$@de> <4B879E8C.4050507@fastmail.fm> <8f0ad1f31002260223u400a1ec4qdf2cec5aed33377@mail.gmail.com> <4B87A1FC.70305@fastmail.fm>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org

Just one thought...

For me it would be natural to be never confronted with the Version.xx =
thing in the api unless you really need. =20
so f.e. having
	new QueryParser("", new KeywordAnalyzer()).parse("content: =
the");
as a default (probably using Version.LUCENE_CURRENT under the hood), but =
having=20
	new QueryParser(Version.XXX,"", new =
KeywordAnalyzer()).parse("content: the");
as well.

Of cause this would require a lot of method/constructor overloading, but =
would make the api more user friendly for those who write some code =
where the version don't matter...
Johannes

On Feb 26, 2010, at 11:27 AM, Paul Taylor wrote:

> Robert Muir wrote:
>> such projects can do this, in one place:
>>=20
>> public static final Version MY_APP_CURRENT =3D Version.LUCENE_30;
>>=20
>> then later....
>>=20
>> StandardAnalyzer analyzer =3D new StandardAnalyzer(MY_APP_CURRENT);
>>=20
>> then they have complete control of this, independent of when the =
upgrade lucene's jar file!
> Not quite true because you still need to update MY_APP_CURRENT when =
there is a new version, but yes thats more mangeable
>=20
> Paul
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 10:50:45 2010
Return-Path: <java-user-return-45203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10873 invoked from network); 26 Feb 2010 10:50:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 10:50:45 -0000
Received: (qmail 17416 invoked by uid 500); 26 Feb 2010 10:50:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17365 invoked by uid 500); 26 Feb 2010 10:50:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17357 invoked by uid 99); 26 Feb 2010 10:50:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 10:50:43 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 10:50:35 +0000
Received: by gyb13 with SMTP id 13so1757816gyb.35
        for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 02:50:14 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.4.7 with SMTP id 7mr358216ybd.241.1267181414053; Fri, 26 
	Feb 2010 02:50:14 -0800 (PST)
In-Reply-To: <C30F5A61-DAB3-431B-BD44-DCD13249588D@googlemail.com>
References: <000301cab6bc$200b7890$602269b0$@de> <4B879E8C.4050507@fastmail.fm>
	 <8f0ad1f31002260223u400a1ec4qdf2cec5aed33377@mail.gmail.com>
	 <4B87A1FC.70305@fastmail.fm>
	 <C30F5A61-DAB3-431B-BD44-DCD13249588D@googlemail.com>
Date: Fri, 26 Feb 2010 05:50:14 -0500
Message-ID: <9ac0c6aa1002260250j6d0b2c12he9e557febb2e30d8@mail.gmail.com>
Subject: Re: ANNOUNCE: Release of Lucene Java 3.0.1 and 2.9.2
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Cc: Robert Muir <rcmuir@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

That would be more natural/convenient, but it'd unfortunately defeat
the whole reason Version was added in the first place.

By making Version required, we force callers to be explicit to Lucene
about what level of back compat is required.

This then enables Lucene to improve its defaults with each release,
without breaking users that need to keep backwards compatibility.

Mike

On Fri, Feb 26, 2010 at 5:42 AM, Johannes Zillmann
<jzillmann@googlemail.com> wrote:
> Just one thought...
>
> For me it would be natural to be never confronted with the Version.xx thi=
ng in the api unless you really need.
> so f.e. having
> =A0 =A0 =A0 =A0new QueryParser("", new KeywordAnalyzer()).parse("content:=
 the");
> as a default (probably using Version.LUCENE_CURRENT under the hood), but =
having
> =A0 =A0 =A0 =A0new QueryParser(Version.XXX,"", new KeywordAnalyzer()).par=
se("content: the");
> as well.
>
> Of cause this would require a lot of method/constructor overloading, but =
would make the api more user friendly for those who write some code where t=
he version don't matter...
> Johannes
>
> On Feb 26, 2010, at 11:27 AM, Paul Taylor wrote:
>
>> Robert Muir wrote:
>>> such projects can do this, in one place:
>>>
>>> public static final Version MY_APP_CURRENT =3D Version.LUCENE_30;
>>>
>>> then later....
>>>
>>> StandardAnalyzer analyzer =3D new StandardAnalyzer(MY_APP_CURRENT);
>>>
>>> then they have complete control of this, independent of when the upgrad=
e lucene's jar file!
>> Not quite true because you still need to update MY_APP_CURRENT when ther=
e is a new version, but yes thats more mangeable
>>
>> Paul
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 11:07:09 2010
Return-Path: <java-user-return-45204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19343 invoked from network); 26 Feb 2010 11:07:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 11:07:09 -0000
Received: (qmail 32969 invoked by uid 500); 26 Feb 2010 11:07:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32934 invoked by uid 500); 26 Feb 2010 11:07:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32926 invoked by uid 99); 26 Feb 2010 11:07:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 11:07:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 11:06:58 +0000
Received: by qw-out-2122.google.com with SMTP id 5so106760qwd.53
        for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 03:06:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=gTfNW45IXefZwV9OrYF93neRjEp57ly+8DdtRz4ICm0=;
        b=FWFbSU2DFJC7JsmcLFmxdZvx0R0eA7pelHy2C50Ew5j/Um10L4+mWEeWakzHHJhf3t
         uacKLhy+PE3tPqlgi8AshwTkoVAuFO4P031S5uoR4CpJUCuqxoyPZjOTlacDdA/+ssvf
         FDpD4xH/DEcStZ3zzhff7ymn2LM5Lv7hzQZEQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=oF4MSaqzUxGUJ1of3kUCXifRB/ipyiPafm/UXRDOjwB5PgnBsTua0zMp0XWlWxrvjt
         +d/xPcJcRuf28/7yx/dBTbz+Ieyb7U8TpSyqhDV9UOPQiSbBAw/hZ7gZnhOEeH1fJzL/
         E936euKCq1Uy6/TXbYKa5doBNZQH2kD+xF2OA=
MIME-Version: 1.0
Received: by 10.224.52.224 with SMTP id j32mr106466qag.302.1267182397793; Fri, 
	26 Feb 2010 03:06:37 -0800 (PST)
In-Reply-To: <8c4e68611002250154m15b47531l748bc8e6e97cea42@mail.gmail.com>
References: <9b906c961002241554x7a3e5225q3aa856bc1f99ebbe@mail.gmail.com>
	 <8c4e68611002250154m15b47531l748bc8e6e97cea42@mail.gmail.com>
Date: Fri, 26 Feb 2010 08:06:37 -0300
Message-ID: <126142c1002260306w1bff021fw63c2bdef64cd7fa8@mail.gmail.com>
Subject: Re: NAS vs SAN vs Server Disk RAID
From: Marcelo Ochoa <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Ian:
  Only as curiosity ;)
  Which distributed file system are you using on top of your NAS storage?
  Best regards, Marcelo.

On Thu, Feb 25, 2010 at 6:54 AM, Ian Lea <ian.lea@gmail.com> wrote:
> We've run lucene on NAS, although not with indexes anything like as
> large as 1Tb, and gave up because NFS and lucene don't really work
> very well together. Google for "lucene nfs" for some details, and some
> workarounds.
>
> I'd second Kay Kay's suggestion to look at a distributed solution such as=
 Katta.
>
>
> --
> Ian.
>
>
> On Wed, Feb 24, 2010 at 11:54 PM, Andrew Bruno <andrew.bruno@gmail.com> w=
rote:
>> Hello,
>>
>> I am working with an application that offers its customers their own ind=
ex,
>> primary two indexes for different needs per customer.
>>
>> As our business is growing and growing, I now have a situation where the=
 web
>> application has its customer's index on one volume, and its getting clos=
e to
>> 1Tbyte.
>>
>> There are lots of updates and inserts, and plenty of searches. =A0As you=
 can
>> imagine, the application is starting to slow down heavily, especially du=
ring
>> high traffic time when documents (PDF, DOCs, etc) are indexed.
>>
>> Since the disk IO on the server is high, our datacenter engineers sugges=
ted
>> we look at NAS or SAN, for performance gain, and for future growth.
>>
>> Has anyone had any experience in running Lucene2.0/Compass in these
>> environments? =A0Do you know of any case studies, whitepapers, web sites=
?
>>
>> Thanks
>> Andrew
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://mochoa.sites.exa.unicen.edu.ar/
______________
Want to integrate Lucene and Oracle?
http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-=
jvm.html
Is Oracle 11g REST ready?
http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 11:15:33 2010
Return-Path: <java-user-return-45205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20429 invoked from network); 26 Feb 2010 11:15:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 11:15:33 -0000
Received: (qmail 39751 invoked by uid 500); 26 Feb 2010 11:15:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39720 invoked by uid 500); 26 Feb 2010 11:15:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39712 invoked by uid 99); 26 Feb 2010 11:15:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 11:15:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 11:15:22 +0000
Received: by bwz9 with SMTP id 9so5218231bwz.5
        for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 03:15:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=A6Tu0bBsRtfH463r+6kk+Tb+xnroTXgGzJ8ZrpjRTM8=;
        b=xVTLBPoG4zoYLGcQ85hbdTIiGkMRgAdZBZjtXEOobUjdjxb2KH9zQrC51N6ojBRNTB
         DFXbCvsNGYP5zYOOzGQI4aUz1mfzk0xst/X77SdZIdogU+tS5BKjvmIgOQTYK5ySOEp5
         c9evNJcKMGBOtyZEBo7oXO3ZwrZZcrTurN/70=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=e7cVX4Xll8dTy7oiUgWYcLN/+2iHuML04UrozmOHjbPp1QNiRgGInnzxyEsZUzuirQ
         G476jL3lMReBs6exrjfleOqX9r7EI/0z+ZxtYpwdVbynIvuCTP2bS6WG6hvjSv33SXMV
         NMwOy/VUa0x4ZpzafZIWpFJp7MYob6vohmaDY=
MIME-Version: 1.0
Received: by 10.204.33.211 with SMTP id i19mr166725bkd.127.1267182901249; Fri, 
	26 Feb 2010 03:15:01 -0800 (PST)
In-Reply-To: <126142c1002260306w1bff021fw63c2bdef64cd7fa8@mail.gmail.com>
References: <9b906c961002241554x7a3e5225q3aa856bc1f99ebbe@mail.gmail.com> 
	<8c4e68611002250154m15b47531l748bc8e6e97cea42@mail.gmail.com> 
	<126142c1002260306w1bff021fw63c2bdef64cd7fa8@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 26 Feb 2010 11:14:41 +0000
Message-ID: <8c4e68611002260314p6745c5a6x563a329356fd500e@mail.gmail.com>
Subject: Re: NAS vs SAN vs Server Disk RAID
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

NFS.  It works fine for simple essentially static lucene indexes and
we still use it for that, but things tended to fall apart with dynamic
indexes.


--
Ian.


On Fri, Feb 26, 2010 at 11:06 AM, Marcelo Ochoa <marcelo.ochoa@gmail.com> w=
rote:
> Hi Ian:
> =A0Only as curiosity ;)
> =A0Which distributed file system are you using on top of your NAS storage=
?
> =A0Best regards, Marcelo.
>
> On Thu, Feb 25, 2010 at 6:54 AM, Ian Lea <ian.lea@gmail.com> wrote:
>> We've run lucene on NAS, although not with indexes anything like as
>> large as 1Tb, and gave up because NFS and lucene don't really work
>> very well together. Google for "lucene nfs" for some details, and some
>> workarounds.
>>
>> I'd second Kay Kay's suggestion to look at a distributed solution such a=
s Katta.
>>
>>
>> --
>> Ian.
>>
>>
>> On Wed, Feb 24, 2010 at 11:54 PM, Andrew Bruno <andrew.bruno@gmail.com> =
wrote:
>>> Hello,
>>>
>>> I am working with an application that offers its customers their own in=
dex,
>>> primary two indexes for different needs per customer.
>>>
>>> As our business is growing and growing, I now have a situation where th=
e web
>>> application has its customer's index on one volume, and its getting clo=
se to
>>> 1Tbyte.
>>>
>>> There are lots of updates and inserts, and plenty of searches. =A0As yo=
u can
>>> imagine, the application is starting to slow down heavily, especially d=
uring
>>> high traffic time when documents (PDF, DOCs, etc) are indexed.
>>>
>>> Since the disk IO on the server is high, our datacenter engineers sugge=
sted
>>> we look at NAS or SAN, for performance gain, and for future growth.
>>>
>>> Has anyone had any experience in running Lucene2.0/Compass in these
>>> environments? =A0Do you know of any case studies, whitepapers, web site=
s?
>>>
>>> Thanks
>>> Andrew
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Marcelo F. Ochoa
> http://marceloochoa.blogspot.com/
> http://mochoa.sites.exa.unicen.edu.ar/
> ______________
> Want to integrate Lucene and Oracle?
> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracl=
e-jvm.html
> Is Oracle 11g REST ready?
> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 12:17:50 2010
Return-Path: <java-user-return-45206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37471 invoked from network); 26 Feb 2010 12:17:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 12:17:50 -0000
Received: (qmail 38371 invoked by uid 500); 26 Feb 2010 12:17:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38307 invoked by uid 500); 26 Feb 2010 12:17:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38297 invoked by uid 99); 26 Feb 2010 12:17:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 12:17:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 12:17:41 +0000
Received: by bwz9 with SMTP id 9so12324bwz.5
        for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 04:17:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=LJyH3GvrOdpjjxbMEX+n1J3q7M71Uud6qE5w5ic2rYc=;
        b=NKQeTggBMOzyALht/02t6dEwQ4guM2dAm4QbRQ/qaCxVZZIZ2xVIRrwcejpFjUNYbu
         4wgoUEaScVW5Irhc/bBCmWoRPMzt6BvlQ0aHRM5K7LI/TQut8jggLF4OZoDMwpuCKUxx
         FfQPKndffwC/vLDqwN9FU2ouQVKOCBxeCyPps=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=Nac3gnTCjkn13T/9hTfqIMlSXfdNXlGXbp2gU0ZCEIJvBGtU521f/x9QZzpum5ImXs
         O+Z/gZFJCnncjHvheQjqhYRG2uo8xOtuJN01KfPJLe4d2cAgh2eUyBr5IZGF0geRt0Hb
         UUzDnK0nt5mdXV0c3MlQLeiB/SB32oiaCUqak=
MIME-Version: 1.0
Received: by 10.204.24.78 with SMTP id u14mr221761bkb.122.1267186640312; Fri, 
	26 Feb 2010 04:17:20 -0800 (PST)
In-Reply-To: <9ac0c6aa1002260250j6d0b2c12he9e557febb2e30d8@mail.gmail.com>
References: <000301cab6bc$200b7890$602269b0$@de> <4B879E8C.4050507@fastmail.fm> 
	<8f0ad1f31002260223u400a1ec4qdf2cec5aed33377@mail.gmail.com> 
	<4B87A1FC.70305@fastmail.fm> <C30F5A61-DAB3-431B-BD44-DCD13249588D@googlemail.com> 
	<9ac0c6aa1002260250j6d0b2c12he9e557febb2e30d8@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 26 Feb 2010 12:17:00 +0000
Message-ID: <8c4e68611002260417p7128afdfv5071e3aaa556940c@mail.gmail.com>
Subject: Re: ANNOUNCE: Release of Lucene Java 3.0.1 and 2.9.2
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Could there be a Version value called
LUCENE_LATEST_DANGER_USE_AT_YOUR_OWN_RISK or whatever you want to make
it.

I understand the argument about backwards compatibility but I'm with
Johannes on making things easier for those who have code which doesn't
require the compatibility.  Like me.  I've been using lucene since the
very beginning and don't recall ever having been bitten by any back
compatibility problems (another reason for praise for the committers)
and would rather not have to start changing literals on upgrades.

Is the plan to remove LUCENE_CURRENT altogether or to leave it in,
permanently deprecated?
If the latter we could carry on using it although living with
deprecations isn't great.


Doing simple things in lucene does in general seem to be getting
harder.  Off the top of my head ...

 IndexSearcher s =3D new IndexSearcher("/my/index");
 QueryParser qp =3D new QueryParser("", new StandardAnalyzer());
 Query q =3D qp.parse("field: value");
 Hits h =3D s.search(q);
 for (int i =3D 0; i < h.length; i++) {
     System.out.println(h.doc(i).get("field"));
 }

used to work.  It won't now of course, and I'd have to look at the
javadocs to come up with alternatives.

Keep APIs simple!



--
Ian.


On Fri, Feb 26, 2010 at 10:50 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> That would be more natural/convenient, but it'd unfortunately defeat
> the whole reason Version was added in the first place.
>
> By making Version required, we force callers to be explicit to Lucene
> about what level of back compat is required.
>
> This then enables Lucene to improve its defaults with each release,
> without breaking users that need to keep backwards compatibility.
>
> Mike
>
> On Fri, Feb 26, 2010 at 5:42 AM, Johannes Zillmann
> <jzillmann@googlemail.com> wrote:
>> Just one thought...
>>
>> For me it would be natural to be never confronted with the Version.xx th=
ing in the api unless you really need.
>> so f.e. having
>> =A0 =A0 =A0 =A0new QueryParser("", new KeywordAnalyzer()).parse("content=
: the");
>> as a default (probably using Version.LUCENE_CURRENT under the hood), but=
 having
>> =A0 =A0 =A0 =A0new QueryParser(Version.XXX,"", new KeywordAnalyzer()).pa=
rse("content: the");
>> as well.
>>
>> Of cause this would require a lot of method/constructor overloading, but=
 would make the api more user friendly for those who write some code where =
the version don't matter...
>> Johannes
>>
>> On Feb 26, 2010, at 11:27 AM, Paul Taylor wrote:
>>
>>> Robert Muir wrote:
>>>> such projects can do this, in one place:
>>>>
>>>> public static final Version MY_APP_CURRENT =3D Version.LUCENE_30;
>>>>
>>>> then later....
>>>>
>>>> StandardAnalyzer analyzer =3D new StandardAnalyzer(MY_APP_CURRENT);
>>>>
>>>> then they have complete control of this, independent of when the upgra=
de lucene's jar file!
>>> Not quite true because you still need to update MY_APP_CURRENT when the=
re is a new version, but yes thats more mangeable
>>>
>>> Paul
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 17:40:55 2010
Return-Path: <java-user-return-45207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80483 invoked from network); 26 Feb 2010 17:40:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 17:40:55 -0000
Received: (qmail 9848 invoked by uid 500); 26 Feb 2010 17:40:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9731 invoked by uid 500); 26 Feb 2010 17:40:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9722 invoked by uid 99); 26 Feb 2010 17:40:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 17:40:53 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 17:40:44 +0000
Received: by gyb13 with SMTP id 13so150463gyb.35
        for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 09:40:21 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.251.14 with SMTP id y14mr1173580ybh.149.1267206020474; 
	Fri, 26 Feb 2010 09:40:20 -0800 (PST)
In-Reply-To: <e994873a1002251152i5baf6db2o2901ed63eaf441d3@mail.gmail.com>
References: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
	 <9ac0c6aa1002220924q75da08a4s741376ff876ed20c@mail.gmail.com>
	 <e994873a1002220935q1394a3dau13fab93dc43fd293@mail.gmail.com>
	 <9ac0c6aa1002221130w3aa9c59dq2fe627e85c22bcf3@mail.gmail.com>
	 <e994873a1002221258y1cfba96atfb1fbb2c7dc65c90@mail.gmail.com>
	 <e994873a1002250722n5d0cf7e7xb6cc9b9d8b0ae5d8@mail.gmail.com>
	 <9ac0c6aa1002251013j55a5e6e9h4a7e5331d2951c1b@mail.gmail.com>
	 <e994873a1002251152i5baf6db2o2901ed63eaf441d3@mail.gmail.com>
Date: Fri, 26 Feb 2010 12:40:20 -0500
Message-ID: <9ac0c6aa1002260940x2f326ad4ga7c254bd92ca3c7d@mail.gmail.com>
Subject: Re: IndexWriter.getReader.getVersion behavior
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

OK -- I can now see what happened.

There was a merge still running, when you called IW.commit (Lucene
Merge Thread #0).  Because IW.commit does not wait for BG merges to
finish, but IW.close does (by default), this means you'll pick up an
extra version whenever a merge is running when you call close.

Mike

On Thu, Feb 25, 2010 at 2:52 PM, Peter Keegan <peterlkeegan@gmail.com> wrot=
e:
> I'm pretty sure this output occurred when the version number skipped +1.
> The line containing '=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D'. separates the=
 close/open IndexWriter.
>
> IFD [Indexer]: setInfoStream
> deletionPolicy=3Dorg.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy=
@646f9dd9
> IW 9 [Indexer]: setInfoStream:
> dir=3Dorg.apache.lucene.store.SimpleFSDirectory@<obfuscated
> pathname>\lresumes1.search.main.1 autoCommit=3Dfalse
> mergePolicy=3Dorg.apache.lucene.index.LogByteSizeMergePolicy@5be44512merg=
eScheduler=3Dorg.apache.lucene.index.ConcurrentMergeScheduler@6772cfdframBu=
fferSizeMB=3D16.0
> maxBufferedDocs=3D-1 maxBuffereDeleteTerms=3D-1
> maxFieldLength=3D100000 index=3D_a:C9780 _b:C1204->_b _c:C717->_b _d:C122=
0->_d
> _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
> IW 9 [Indexer]: flush at getReader
> IW 9 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull docStore=
Offset=3D0
> flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDocs=3D0
> numBufDelTerms=3D0
> IW 9 [Indexer]: =A0 index before flush _a:C9780 _b:C1204->_b _c:C717->_b
> _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_=
h
> IW 9 [UpdWriterBuild : 9]: DW: =A0 RAM: now flush @ usedMB=3D15.816
> allocMB=3D15.816 deletesMB=3D0.203 triggerMB=3D16
> IW 9 [UpdWriterBuild : 9]: =A0 flush: segment=3D_j docStoreSegment=3D_j
> docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dfalse flushDocStores=
=3Dfalse
> numDocs=3D1456 numBufDelTerms=3D1456
> IW 9 [UpdWriterBuild : 9]: =A0 index before flush _a:C9780 _b:C1204->_b
> _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_=
h
> _i:C703->_h
> IW 9 [UpdWriterBuild : 9]: DW: flush postings as segment _j numDocs=3D145=
6
> IW 9 [UpdWriterBuild : 9]: DW: =A0 oldRAMSize=3D16584704 newFlushedSize=
=3D4969789
> docs/MB=3D307.202 new/old=3D29.966%
> IFD [UpdWriterBuild : 9]: now checkpoint "segments_b" [10 segments ;
> isCommit =3D false]
> IFD [UpdWriterBuild : 9]: now checkpoint "segments_b" [10 segments ;
> isCommit =3D false]
> IW 9 [UpdWriterBuild : 9]: LMP: findMerges: 10 segments
> IW 9 [UpdWriterBuild : 9]: LMP: =A0 level 6.863048 to 7.613048: 1 segment=
s
> IW 9 [UpdWriterBuild : 9]: LMP: =A0 level 6.2247195 to 6.696363: 9 segmen=
ts
> IW 9 [UpdWriterBuild : 9]: CMS: now merge
> IW 9 [UpdWriterBuild : 9]: CMS: =A0 index: _a:C9780 _b:C1204->_b _c:C717-=
>_b
> _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_=
h
> _j:C1456->_j
> IW 9 [UpdWriterBuild : 9]: CMS: =A0 no more merges pending; now return
> IW 9 [Indexer]: prepareCommit: flush
> IW 9 [Indexer]: =A0 flush: segment=3D_k docStoreSegment=3D_j docStoreOffs=
et=3D1456
> flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStores=3Dtrue numDocs=3D509
> numBufDelTerms=3D509
> IW 9 [Indexer]: =A0 index before flush _a:C9780 _b:C1204->_b _c:C717->_b
> _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_=
h
> _j:C1456->_j
> IW 9 [Indexer]: =A0 flush shared docStore segment _j
> IW 9 [Indexer]: DW: closeDocStore: 2 files to flush to segment _j
> numDocs=3D1965
> IW 9 [Indexer]: DW: flush postings as segment _k numDocs=3D509
> IW 9 [Indexer]: DW: =A0 oldRAMSize=3D7483392 newFlushedSize=3D1854970
> docs/MB=3D287.727 new/old=3D24.788%
> IFD [Indexer]: now checkpoint "segments_b" [11 segments ; isCommit =3D fa=
lse]
> IW 9 [Indexer]: DW: apply 1965 buffered deleted terms and 0 deleted docID=
s
> and 0 deleted queries on 11 segments.
> IFD [Indexer]: now checkpoint "segments_b" [11 segments ; isCommit =3D fa=
lse]
> IW 9 [Indexer]: LMP: findMerges: 11 segments
> IW 9 [Indexer]: LMP: =A0 level 6.863048 to 7.613048: 1 segments
> IW 9 [Indexer]: LMP: =A0 level 6.2247195 to 6.696363: 10 segments
> IW 9 [Indexer]: LMP: =A0 =A0 1 to 11: add this merge
> IW 9 [Indexer]: add merge to pendingMerges: _b:C1204->_b _c:C717->_b
> _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_=
h
> _j:C1456->_j _k:C509->_j [total 1 pending]
> IW 9 [Indexer]: CMS: now merge
> IW 9 [Indexer]: CMS: =A0 index: _a:C9780 _b:C1204->_b _c:C717->_b _d:C122=
0->_d
> _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_=
j
> _k:C509->_j
> IW 9 [Indexer]: CMS: =A0 consider merge _b:C1204->_b _c:C717->_b _d:C1220=
->_d
> _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_=
j
> _k:C509->_j into _l [mergeDocStores]
> IW 9 [Indexer]: CMS: =A0 =A0 launch new thread [Lucene Merge Thread #0]
> IW 9 [Indexer]: CMS: =A0 no more merges pending; now return
> IW 9 [Indexer]: startCommit(): start sizeInBytes=3D0
> IW 9 [Indexer]: startCommit index=3D_a:C9780 _b:C1204->_b _c:C717->_b
> _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_=
h
> _j:C1456->_j _k:C509->_j changeCount=3D7
> IW 9 [Lucene Merge Thread #0]: CMS: =A0 merge thread: start
> IW 9 [Indexer]: now sync _k.fnm
> IW 9 [Lucene Merge Thread #0]: now merge
> =A0merge=3D_b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f
> _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j _k:C509->_j into _l
> [mergeDocStores]
> =A0merge=3Dorg.apache.lucene.index.MergePolicy$OneMerge@5203ef34
> =A0index=3D_a:C9780 _b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d
> _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j _k:C509->_=
j
> IW 9 [Lucene Merge Thread #0]: merging _b:C1204->_b _c:C717->_b _d:C1220-=
>_d
> _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_=
j
> _k:C509->_j into _l [mergeDocStores]
> IW 9 [Indexer]: now sync _k.tii
> IW 9 [Indexer]: now sync _k.tis
> IW 9 [Lucene Merge Thread #0]: merge: total 9909 docs
> IW 9 [Indexer]: now sync _j.tis
> IW 9 [Indexer]: now sync _j.tii
> IW 9 [Indexer]: now sync _j.fdx
> IW 9 [Indexer]: now sync _j.fdt
> IW 9 [Indexer]: now sync _k.prx
> IW 9 [Indexer]: now sync _k.nrm
> IW 9 [Indexer]: now sync _j.nrm
> IW 9 [Indexer]: now sync _j.prx
> IW 9 [Indexer]: now sync _j.fnm
> IW 9 [Indexer]: now sync _k.frq
> IW 9 [Indexer]: now sync _j.frq
> IW 9 [Indexer]: done all syncs
> IW 9 [Indexer]: flush at getReader
> IW 9 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3D_k docStoreOf=
fset=3D0
> flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dtrue numDocs=3D0
> numBufDelTerms=3D0
> IW 9 [Indexer]: =A0 index before flush _a:C9780 _b:C1204->_b _c:C717->_b
> _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_=
h
> _j:C1456->_j _k:C509->_j
> IW 9 [Indexer]: =A0 flush shared docStore segment _k
> IW 9 [Indexer]: DW: closeDocStore: 0 files to flush to segment _k numDocs=
=3D0
> IW 9 [Indexer]: commit: start
> IW 9 [Indexer]: commit: already prepared
> IW 9 [Indexer]: commit: pendingCommit !=3D null
> IW 9 [Indexer]: commit: wrote segments file "segments_c"
> IFD [Indexer]: now checkpoint "segments_c" [11 segments ; isCommit =3D tr=
ue]
> IFD [Indexer]: deleteCommits: now decRef commit "segments_b"
> IFD [Indexer]: delete "segments_b"
> IW 9 [Indexer]: commit: done
> IW 9 [Indexer]: flush at getReader
> IW 9 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull docStore=
Offset=3D0
> flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDocs=3D0
> numBufDelTerms=3D0
> IW 9 [Indexer]: =A0 index before flush _a:C9780 _b:C1204->_b _c:C717->_b
> _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_=
h
> _j:C1456->_j _k:C509->_j
> IW 9 [Indexer]: now flush at close
> IW 9 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull docStore=
Offset=3D0
> flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDocs=3D0
> numBufDelTerms=3D0
> IW 9 [Indexer]: =A0 index before flush _a:C9780 _b:C1204->_b _c:C717->_b
> _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_=
h
> _j:C1456->_j _k:C509->_j
> IW 9 [Indexer]: CMS: now merge
> IW 9 [Indexer]: CMS: =A0 index: _a:C9780 _b:C1204->_b _c:C717->_b _d:C122=
0->_d
> _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_=
j
> _k:C509->_j
> IW 9 [Indexer]: CMS: =A0 no more merges pending; now return
> IW 9 [Lucene Merge Thread #0]: commitMerge: _b:C1204->_b _c:C717->_b
> _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_=
h
> _j:C1456->_j _k:C509->_j into _l [mergeDocStores] index=3D_a:C9780
> _b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_=
f
> _h:C1291->_h _i:C703->_h _j:C1456->_j _k:C509->_j
> IW 9 [Lucene Merge Thread #0]: commitMergeDeletes _b:C1204->_b _c:C717->_=
b
> _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_=
h
> _j:C1456->_j _k:C509->_j into _l [mergeDocStores]
> IFD [Lucene Merge Thread #0]: now checkpoint "segments_c" [2 segments ;
> isCommit =3D false]
> IFD [Lucene Merge Thread #0]: now checkpoint "segments_c" [2 segments ;
> isCommit =3D false]
> IW 9 [Lucene Merge Thread #0]: CMS: =A0 merge thread: done
> IW 9 [Indexer]: now call final commit()
> IW 9 [Indexer]: startCommit(): start sizeInBytes=3D0
> IW 9 [Indexer]: startCommit index=3D_a:C9780 _l:C9909 changeCount=3D8
> IW 9 [Indexer]: now sync _l.nrm
> IW 9 [Indexer]: now sync _l.fnm
> IW 9 [Indexer]: now sync _l.prx
> IW 9 [Indexer]: now sync _l.frq
> IW 9 [Indexer]: now sync _l.tis
> IW 9 [Indexer]: now sync _l.fdx
> IW 9 [Indexer]: now sync _l.fdt
> IW 9 [Indexer]: now sync _l.tii
> IW 9 [Indexer]: done all syncs
> IW 9 [Indexer]: commit: pendingCommit !=3D null
> IW 9 [Indexer]: commit: wrote segments file "segments_d"
> IFD [Indexer]: now checkpoint "segments_d" [2 segments ; isCommit =3D tru=
e]
> IFD [Indexer]: deleteCommits: now decRef commit "segments_c"
> IFD [Indexer]: delete "_h.prx"
> IFD [Indexer]: delete "_f.tis"
> IFD [Indexer]: delete "_g.tis"
> IFD [Indexer]: delete "_d.tii"
> IFD [Indexer]: delete "_e.frq"
> IFD [Indexer]: delete "_k.fnm"
> IFD [Indexer]: delete "_c.tii"
> IFD [Indexer]: delete "_h.nrm"
> IFD [Indexer]: delete "_i.tis"
> IFD [Indexer]: delete "_k.tii"
> IFD [Indexer]: delete "_h.fdt"
> IFD [Indexer]: delete "_c.tis"
> IFD [Indexer]: delete "_g.tii"
> IFD [Indexer]: delete "_h.fdx"
> IFD [Indexer]: delete "_c.nrm"
> IFD [Indexer]: delete "_i.tii"
> IFD [Indexer]: delete "_d.tis"
> IFD [Indexer]: delete "_f.tii"
> IFD [Indexer]: delete "_e.fnm"
> IFD [Indexer]: delete "_k.tis"
> IFD [Indexer]: delete "_d.frq"
> IFD [Indexer]: delete "_f.nrm"
> IFD [Indexer]: delete "_h.fnm"
> IFD [Indexer]: delete "segments_c"
> IFD [Indexer]: delete "_c.prx"
> IFD [Indexer]: delete "_d.fnm"
> IFD [Indexer]: delete "_h.frq"
> IFD [Indexer]: delete "_h.tis"
> IFD [Indexer]: delete "_f.fdt"
> IFD [Indexer]: delete "_j.tis"
> IFD [Indexer]: delete "_f.fdx"
> IFD [Indexer]: delete "_g.nrm"
> IFD [Indexer]: delete "_f.prx"
> IFD [Indexer]: delete "_j.tii"
> IFD [Indexer]: delete "_h.tii"
> IFD [Indexer]: delete "_e.prx"
> IFD [Indexer]: delete "_c.frq"
> IFD [Indexer]: delete "_i.prx"
> IFD [Indexer]: delete "_j.fdx"
> IFD [Indexer]: delete "_i.nrm"
> IFD [Indexer]: delete "_j.fdt"
> IFD [Indexer]: delete "_k.prx"
> IFD [Indexer]: delete "_b.nrm"
> IFD [Indexer]: delete "_e.tis"
> IFD [Indexer]: delete "_e.tii"
> IFD [Indexer]: delete "_g.fnm"
> IFD [Indexer]: delete "_k.nrm"
> IFD [Indexer]: delete "_j.nrm"
> IFD [Indexer]: delete "_j.prx"
> IFD [Indexer]: delete "_e.nrm"
> IFD [Indexer]: delete "_g.prx"
> IFD [Indexer]: delete "_b.prx"
> IFD [Indexer]: delete "_i.frq"
> IFD [Indexer]: delete "_b.tis"
> IFD [Indexer]: delete "_d.prx"
> IFD [Indexer]: delete "_g.frq"
> IFD [Indexer]: delete "_d.fdx"
> IFD [Indexer]: delete "_b.tii"
> IFD [Indexer]: delete "_b.frq"
> IFD [Indexer]: delete "_d.fdt"
> IFD [Indexer]: delete "_f.fnm"
> IFD [Indexer]: delete "_j.fnm"
> IFD [Indexer]: delete "_b.fnm"
> IFD [Indexer]: delete "_d.nrm"
> IFD [Indexer]: delete "_b.fdt"
> IFD [Indexer]: delete "_k.frq"
> IFD [Indexer]: delete "_c.fnm"
> IFD [Indexer]: delete "_j.frq"
> IFD [Indexer]: delete "_i.fnm"
> IFD [Indexer]: delete "_f.frq"
> IFD [Indexer]: delete "_b.fdx"
> IW 9 [Indexer]: commit: done
> IW 9 [Indexer]: at close: _a:C9780 _l:C9909
>
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D
>
> IFD [Indexer]: setInfoStream
> deletionPolicy=3Dorg.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy=
@68d349c1
> IW 10 [Indexer]: setInfoStream:
> dir=3Dorg.apache.lucene.store.SimpleFSDirectory@<obfuscated
> pathname>\lresumes1.search.main.1 autoCommit=3Dfalse
> mergePolicy=3Dorg.apache.lucene.index.LogByteSizeMergePolicy@78f53abmerge=
Scheduler=3Dorg.apache.lucene.index.ConcurrentMergeScheduler@52be036dramBuf=
ferSizeMB=3D16.0
> maxBufferedDocs=3D-1 maxBuffereDeleteTerms=3D-1
> maxFieldLength=3D100000 index=3D_a:C9780 _l:C9909
> IW 10 [Indexer]: flush at getReader
> IW 10 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull docStor=
eOffset=3D0
> flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDocs=3D0
> numBufDelTerms=3D0
> IW 10 [Indexer]: =A0 index before flush _a:C9780 _l:C9909
> IW 10 [UpdWriterBuild : 10]: DW: =A0 RAM: now flush @ usedMB=3D15.789
> allocMB=3D15.789 deletesMB=3D0.212 triggerMB=3D16
> IW 10 [UpdWriterBuild : 10]: =A0 flush: segment=3D_m docStoreSegment=3D_m
> docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dfalse flushDocStores=
=3Dfalse
> numDocs=3D1526 numBufDelTerms=3D1526
> IW 10 [UpdWriterBuild : 10]: =A0 index before flush _a:C9780 _l:C9909
> IW 10 [UpdWriterBuild : 10]: DW: flush postings as segment _m numDocs=3D1=
526
> IW 10 [UpdWriterBuild : 10]: DW: =A0 oldRAMSize=3D16556032
> newFlushedSize=3D4788823 docs/MB=3D334.138 new/old=3D28.925%
> IFD [UpdWriterBuild : 10]: now checkpoint "segments_d" [3 segments ;
> isCommit =3D false]
> IFD [UpdWriterBuild : 10]: now checkpoint "segments_d" [3 segments ;
> isCommit =3D false]
> IW 10 [UpdWriterBuild : 10]: LMP: findMerges: 3 segments
> IW 10 [UpdWriterBuild : 10]: LMP: =A0 level 6.8642592 to 7.6142592: 2 seg=
ments
> IW 10 [UpdWriterBuild : 10]: LMP: =A0 level 6.2247195 to 6.6802545: 1 seg=
ments
> IW 10 [UpdWriterBuild : 10]: CMS: now merge
> IW 10 [UpdWriterBuild : 10]: CMS: =A0 index: _a:C9780 _l:C9909 _m:C1526->=
_m
> IW 10 [UpdWriterBuild : 10]: CMS: =A0 no more merges pending; now return
> IW 10 [Indexer]: prepareCommit: flush
> IW 10 [Indexer]: =A0 flush: segment=3D_n docStoreSegment=3D_m docStoreOff=
set=3D1526
> flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStores=3Dtrue numDocs=3D501
> numBufDelTerms=3D501
> IW 10 [Indexer]: =A0 index before flush _a:C9780 _l:C9909 _m:C1526->_m
> IW 10 [Indexer]: =A0 flush shared docStore segment _m
> IW 10 [Indexer]: DW: closeDocStore: 2 files to flush to segment _m
> numDocs=3D2027
> IW 10 [Indexer]: DW: flush postings as segment _n numDocs=3D501
> IW 10 [Indexer]: DW: =A0 oldRAMSize=3D6927360 newFlushedSize=3D1659342
> docs/MB=3D316.593 new/old=3D23.953%
> IFD [Indexer]: now checkpoint "segments_d" [4 segments ; isCommit =3D fal=
se]
> IW 10 [Indexer]: DW: apply 2027 buffered deleted terms and 0 deleted docI=
Ds
> and 0 deleted queries on 4 segments.
> IFD [Indexer]: now checkpoint "segments_d" [4 segments ; isCommit =3D fal=
se]
> IW 10 [Indexer]: LMP: findMerges: 4 segments
> IW 10 [Indexer]: LMP: =A0 level 6.8642592 to 7.6142592: 2 segments
> IW 10 [Indexer]: LMP: =A0 level 6.2247195 to 6.6802545: 1 segments
> IW 10 [Indexer]: LMP: =A0 level -1.0 to 6.220011: 1 segments
> IW 10 [Indexer]: CMS: now merge
> IW 10 [Indexer]: CMS: =A0 index: _a:C9780 _l:C9909 _m:C1526->_m _n:C501->=
_m
> IW 10 [Indexer]: CMS: =A0 no more merges pending; now return
> IW 10 [Indexer]: startCommit(): start sizeInBytes=3D0
> IW 10 [Indexer]: startCommit index=3D_a:C9780 _l:C9909 _m:C1526->_m
> _n:C501->_m changeCount=3D6
> IW 10 [Indexer]: now sync _m.frq
> IW 10 [Indexer]: now sync _m.prx
> IW 10 [Indexer]: now sync _n.tis
> IW 10 [Indexer]: now sync _m.tis
> IW 10 [Indexer]: now sync _n.frq
> IW 10 [Indexer]: now sync _n.tii
> IW 10 [Indexer]: now sync _m.tii
> IW 10 [Indexer]: now sync _m.fnm
> IW 10 [Indexer]: now sync _n.fnm
> IW 10 [Indexer]: now sync _n.nrm
> IW 10 [Indexer]: now sync _n.prx
> IW 10 [Indexer]: now sync _m.nrm
> IW 10 [Indexer]: now sync _m.fdt
> IW 10 [Indexer]: now sync _m.fdx
> IW 10 [Indexer]: done all syncs
> IW 10 [Indexer]: flush at getReader
> IW 10 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3D_n docStoreO=
ffset=3D0
> flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dtrue numDocs=3D0
> numBufDelTerms=3D0
> IW 10 [Indexer]: =A0 index before flush _a:C9780 _l:C9909 _m:C1526->_m
> _n:C501->_m
> IW 10 [Indexer]: =A0 flush shared docStore segment _n
> IW 10 [Indexer]: DW: closeDocStore: 0 files to flush to segment _n numDoc=
s=3D0
> IW 10 [Indexer]: commit: start
> IW 10 [Indexer]: commit: already prepared
> IW 10 [Indexer]: commit: pendingCommit !=3D null
> IW 10 [Indexer]: commit: wrote segments file "segments_e"
> IFD [Indexer]: now checkpoint "segments_e" [4 segments ; isCommit =3D tru=
e]
> IFD [Indexer]: deleteCommits: now decRef commit "segments_d"
> IFD [Indexer]: delete "segments_d"
> IW 10 [Indexer]: commit: done
> IW 10 [Indexer]: flush at getReader
> IW 10 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull docStor=
eOffset=3D0
> flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDocs=3D0
> numBufDelTerms=3D0
> IW 10 [Indexer]: =A0 index before flush _a:C9780 _l:C9909 _m:C1526->_m
> _n:C501->_m
> IW 10 [Indexer]: now flush at close
> IW 10 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull docStor=
eOffset=3D0
> flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDocs=3D0
> numBufDelTerms=3D0
> IW 10 [Indexer]: =A0 index before flush _a:C9780 _l:C9909 _m:C1526->_m
> _n:C501->_m
> IW 10 [Indexer]: CMS: now merge
> IW 10 [Indexer]: CMS: =A0 index: _a:C9780 _l:C9909 _m:C1526->_m _n:C501->=
_m
> IW 10 [Indexer]: CMS: =A0 no more merges pending; now return
> IW 10 [Indexer]: now call final commit()
> IW 10 [Indexer]: startCommit(): start sizeInBytes=3D0
> IW 10 [Indexer]: =A0 skip startCommit(): no changes pending
> IW 10 [Indexer]: commit: pendingCommit =3D=3D null; skip
> IW 10 [Indexer]: commit: done
> IW 10 [Indexer]: at close: _a:C9780 _l:C9909 _m:C1526->_m _n:C501->_m
>
>
> Peter
>
> On Thu, Feb 25, 2010 at 1:13 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> Do you know the place in the infoStream output where you got a reader
>> with the wrong (unexplained extra +1) version? =A0If so, can you post
>> the infoStream output up to that point?
>>
>> Mike
>>
>> On Thu, Feb 25, 2010 at 10:22 AM, Peter Keegan <peterlkeegan@gmail.com>
>> wrote:
>> > I've reproduced this and I have a bunch of infoStream log files. Since
>> the
>> > messages have no timestamps, it's hard to tell where the relevant entr=
ies
>> > are. What should I be looking for?
>> >
>> > Peter
>> >
>> > On Mon, Feb 22, 2010 at 3:58 PM, Peter Keegan <peterlkeegan@gmail.com
>> >wrote:
>> >
>> >> I'm pretty sure there are flushes and segment merges going on, but as
>> you
>> >> said, that shouldn't affect the version increment. I'll see what I ca=
n
>> do to
>> >> get infoStream output.
>> >>
>> >> Thanks,
>> >> Peter
>> >>
>> >>
>> >> On Mon, Feb 22, 2010 at 2:30 PM, Michael McCandless <
>> >> lucene@mikemccandless.com> wrote:
>> >>
>> >>> Well I'm at a loss then. =A0The version should only increment on com=
mit.
>> >>>
>> >>> Can you make it all happen when infoStream is on, and post back?
>> >>>
>> >>> Mike
>> >>>
>> >>> On Mon, Feb 22, 2010 at 12:35 PM, Peter Keegan <peterlkeegan@gmail.c=
om
>> >
>> >>> wrote:
>> >>> > Only one writer thread and one writer process.
>> >>> > I'm calling IndexWriter(Directory d, Analyzer a, boolean create,
>> >>> > MaxFieldLength mfl), which sets autocommit=3Dfalse.
>> >>> >
>> >>> > Peter
>> >>> >
>> >>> > On Mon, Feb 22, 2010 at 12:24 PM, Michael McCandless <
>> >>> > lucene@mikemccandless.com> wrote:
>> >>> >
>> >>> >> That's curious.
>> >>> >>
>> >>> >> It's only on prepareCommit (or, commit, if you didn't first prepa=
re,
>> >>> >> since that will call prepareCommit internally) that this version
>> >>> >> should increase.
>> >>> >>
>> >>> >> Is there only 1 thread doing this?
>> >>> >>
>> >>> >> Oh, and, are you passing false for autoCommit?
>> >>> >>
>> >>> >> Mike
>> >>> >>
>> >>> >> On Mon, Feb 22, 2010 at 11:43 AM, Peter Keegan <
>> peterlkeegan@gmail.com
>> >>> >
>> >>> >> wrote:
>> >>> >> > Using Lucene 2.9.1, I have the following pseudocode which gets
>> >>> repeated
>> >>> >> at
>> >>> >> > regular intervals:
>> >>> >> >
>> >>> >> > 1. FSDirectory dir =3D FSDirectory.open(java.io.File);
>> >>> >> > 2. dir.setLockFactory(new SingleInstanceLockFactory());
>> >>> >> > 3. IndexWriter writer =3D new IndexWriter(dir, Analyzer, false,
>> >>> >> maxFieldLen)
>> >>> >> > 4. writer.getReader().getVersion();
>> >>> >> > 5. writer.prepareCommit();
>> >>> >> > 6. writer.getReader().getVersion();
>> >>> >> > 7. writer.commit();
>> >>> >> > 8. writer.close();
>> >>> >> >
>> >>> >> > I'm using the version number to keep external data in synch wit=
h
>> the
>> >>> >> index.
>> >>> >> > Usually, the version number from (6) is 1 greater than from (4)
>> and
>> >>> the
>> >>> >> > version from (4) equals the version from the previous (6). At
>> least
>> >>> once
>> >>> >> a
>> >>> >> > day, however, the version from (4) is 1 greater than from the
>> >>> previous
>> >>> >> (6).
>> >>> >> > What would explain this sporadic behavior of version numbers?
>> >>> >> >
>> >>> >> > Thanks,
>> >>> >> > Peter
>> >>> >> >
>> >>> >>
>> >>> >>
>> ---------------------------------------------------------------------
>> >>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>> >>
>> >>> >>
>> >>> >
>> >>>
>> >>> --------------------------------------------------------------------=
-
>> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>
>> >>>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 19:21:09 2010
Return-Path: <java-user-return-45208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32409 invoked from network); 26 Feb 2010 19:21:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 19:21:09 -0000
Received: (qmail 35394 invoked by uid 500); 26 Feb 2010 19:21:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35263 invoked by uid 500); 26 Feb 2010 19:21:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35255 invoked by uid 99); 26 Feb 2010 19:21:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 19:21:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 19:20:59 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 7D11B24003
	for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 21:20:38 +0200 (EET)
Message-ID: <4B881F05.1020202@sirma.bg>
Date: Fri, 26 Feb 2010 21:20:37 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: NumericField exact match
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Guys,

Is it possible to make exact searches on fields that are of type 
NumericField and if yes how?
In the LIA book part 2 I found only information about Range searches on 
such fields and how to Sort them.

Example - I have field "size" that can take integers as values.
I want to get docs that are with "size:100".
For the regular fields "size:100" is OK to pass to Parser but with 
NumericField it does not work.
The only approach to support such fields that I can see is - to have 
parallel casual Field (example "size2") and to index the same data there.
And then when user wants exact search on "size" I to perform "size2:100".

Is this the most appropriate way for my case on your opinion?

Thanks,
Ivan



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 19:41:31 2010
Return-Path: <java-user-return-45209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37658 invoked from network); 26 Feb 2010 19:41:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 19:41:31 -0000
Received: (qmail 60677 invoked by uid 500); 26 Feb 2010 19:41:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60628 invoked by uid 500); 26 Feb 2010 19:41:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60620 invoked by uid 99); 26 Feb 2010 19:41:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 19:41:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.222.196 as permitted sender)
Received: from [209.85.222.196] (HELO mail-pz0-f196.google.com) (209.85.222.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 19:41:22 +0000
Received: by pzk34 with SMTP id 34so350937pzk.3
        for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 11:41:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=JLI1HGHS3BqXoYBukMafrEaxxXjTmXhcV0L+Hj9d1Vc=;
        b=FnoCPJNoMxGF+5iQRX4rpTQ5VPFMQX4/ynuVR3M2QU8SLJYuRrHrfTqiTcrx86V4Ms
         yhsciiyrV+tGnZQzgoeye0g5cOoGer/l/iqiDW39i60TO49wjwbE+PJHvX3y0yjS5ptS
         ryixw3LRIp3wWgoQAOJ9ipgYhmeUTEthtRr3c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=TJ+sT1Pk/gqmwGd2nvYIhBUBEJjMCVPSfpg6aHy8kzEq10NvpEzXkRwA8wQ42kQDTl
         sUOk3KSNCrmUXVeMH5wUsDZeeXNQ0H2/0vI///om3AlP0Rs3bBez0etz8NP7dZBUDGIu
         XDpr+PFJ103pmEHHaLd+RHd371X4sHmhhek/s=
MIME-Version: 1.0
Received: by 10.142.74.13 with SMTP id w13mr487898wfa.28.1267213257032; Fri, 
	26 Feb 2010 11:40:57 -0800 (PST)
In-Reply-To: <9ac0c6aa1002260940x2f326ad4ga7c254bd92ca3c7d@mail.gmail.com>
References: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
	 <9ac0c6aa1002220924q75da08a4s741376ff876ed20c@mail.gmail.com>
	 <e994873a1002220935q1394a3dau13fab93dc43fd293@mail.gmail.com>
	 <9ac0c6aa1002221130w3aa9c59dq2fe627e85c22bcf3@mail.gmail.com>
	 <e994873a1002221258y1cfba96atfb1fbb2c7dc65c90@mail.gmail.com>
	 <e994873a1002250722n5d0cf7e7xb6cc9b9d8b0ae5d8@mail.gmail.com>
	 <9ac0c6aa1002251013j55a5e6e9h4a7e5331d2951c1b@mail.gmail.com>
	 <e994873a1002251152i5baf6db2o2901ed63eaf441d3@mail.gmail.com>
	 <9ac0c6aa1002260940x2f326ad4ga7c254bd92ca3c7d@mail.gmail.com>
Date: Fri, 26 Feb 2010 14:40:56 -0500
Message-ID: <e994873a1002261140o598856a7ge6a2d0ecf7604f19@mail.gmail.com>
Subject: Re: IndexWriter.getReader.getVersion behavior
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e90f340a45eb048086147a

--001636e90f340a45eb048086147a
Content-Type: text/plain; charset=ISO-8859-1

Is there a way for the application to wait for the BG commit to finish
before it calls IW.close? If so, would this prevent the extra version? The
extra version causes the app. to think that the external data it committed
is out of synch with the index, which requires the app to do extra
processing to re-synch.

Thanks,
Peter


On Fri, Feb 26, 2010 at 12:40 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> OK -- I can now see what happened.
>
> There was a merge still running, when you called IW.commit (Lucene
> Merge Thread #0).  Because IW.commit does not wait for BG merges to
> finish, but IW.close does (by default), this means you'll pick up an
> extra version whenever a merge is running when you call close.
>
> Mike
>
> On Thu, Feb 25, 2010 at 2:52 PM, Peter Keegan <peterlkeegan@gmail.com>
> wrote:
> > I'm pretty sure this output occurred when the version number skipped +1.
> > The line containing '============'. separates the close/open IndexWriter.
> >
> > IFD [Indexer]: setInfoStream
> >
> deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@646f9dd9
> > IW 9 [Indexer]: setInfoStream:
> > dir=org.apache.lucene.store.SimpleFSDirectory@<obfuscated
> > pathname>\lresumes1.search.main.1 autoCommit=false
> >
> mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@5be44512mergeScheduler
> =org.apache.lucene.index.ConcurrentMergeScheduler@6772cfdframBufferSizeMB
> =16.0
> > maxBufferedDocs=-1 maxBuffereDeleteTerms=-1
> > maxFieldLength=100000 index=_a:C9780 _b:C1204->_b _c:C717->_b
> _d:C1220->_d
> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
> > IW 9 [Indexer]: flush at getReader
> > IW 9 [Indexer]:   flush: segment=null docStoreSegment=null
> docStoreOffset=0
> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
> > numBufDelTerms=0
> > IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b _c:C717->_b
> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> _i:C703->_h
> > IW 9 [UpdWriterBuild : 9]: DW:   RAM: now flush @ usedMB=15.816
> > allocMB=15.816 deletesMB=0.203 triggerMB=16
> > IW 9 [UpdWriterBuild : 9]:   flush: segment=_j docStoreSegment=_j
> > docStoreOffset=0 flushDocs=true flushDeletes=false flushDocStores=false
> > numDocs=1456 numBufDelTerms=1456
> > IW 9 [UpdWriterBuild : 9]:   index before flush _a:C9780 _b:C1204->_b
> > _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f
> _h:C1291->_h
> > _i:C703->_h
> > IW 9 [UpdWriterBuild : 9]: DW: flush postings as segment _j numDocs=1456
> > IW 9 [UpdWriterBuild : 9]: DW:   oldRAMSize=16584704
> newFlushedSize=4969789
> > docs/MB=307.202 new/old=29.966%
> > IFD [UpdWriterBuild : 9]: now checkpoint "segments_b" [10 segments ;
> > isCommit = false]
> > IFD [UpdWriterBuild : 9]: now checkpoint "segments_b" [10 segments ;
> > isCommit = false]
> > IW 9 [UpdWriterBuild : 9]: LMP: findMerges: 10 segments
> > IW 9 [UpdWriterBuild : 9]: LMP:   level 6.863048 to 7.613048: 1 segments
> > IW 9 [UpdWriterBuild : 9]: LMP:   level 6.2247195 to 6.696363: 9 segments
> > IW 9 [UpdWriterBuild : 9]: CMS: now merge
> > IW 9 [UpdWriterBuild : 9]: CMS:   index: _a:C9780 _b:C1204->_b
> _c:C717->_b
> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> _i:C703->_h
> > _j:C1456->_j
> > IW 9 [UpdWriterBuild : 9]: CMS:   no more merges pending; now return
> > IW 9 [Indexer]: prepareCommit: flush
> > IW 9 [Indexer]:   flush: segment=_k docStoreSegment=_j
> docStoreOffset=1456
> > flushDocs=true flushDeletes=true flushDocStores=true numDocs=509
> > numBufDelTerms=509
> > IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b _c:C717->_b
> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> _i:C703->_h
> > _j:C1456->_j
> > IW 9 [Indexer]:   flush shared docStore segment _j
> > IW 9 [Indexer]: DW: closeDocStore: 2 files to flush to segment _j
> > numDocs=1965
> > IW 9 [Indexer]: DW: flush postings as segment _k numDocs=509
> > IW 9 [Indexer]: DW:   oldRAMSize=7483392 newFlushedSize=1854970
> > docs/MB=287.727 new/old=24.788%
> > IFD [Indexer]: now checkpoint "segments_b" [11 segments ; isCommit =
> false]
> > IW 9 [Indexer]: DW: apply 1965 buffered deleted terms and 0 deleted
> docIDs
> > and 0 deleted queries on 11 segments.
> > IFD [Indexer]: now checkpoint "segments_b" [11 segments ; isCommit =
> false]
> > IW 9 [Indexer]: LMP: findMerges: 11 segments
> > IW 9 [Indexer]: LMP:   level 6.863048 to 7.613048: 1 segments
> > IW 9 [Indexer]: LMP:   level 6.2247195 to 6.696363: 10 segments
> > IW 9 [Indexer]: LMP:     1 to 11: add this merge
> > IW 9 [Indexer]: add merge to pendingMerges: _b:C1204->_b _c:C717->_b
> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> _i:C703->_h
> > _j:C1456->_j _k:C509->_j [total 1 pending]
> > IW 9 [Indexer]: CMS: now merge
> > IW 9 [Indexer]: CMS:   index: _a:C9780 _b:C1204->_b _c:C717->_b
> _d:C1220->_d
> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
> _j:C1456->_j
> > _k:C509->_j
> > IW 9 [Indexer]: CMS:   consider merge _b:C1204->_b _c:C717->_b
> _d:C1220->_d
> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
> _j:C1456->_j
> > _k:C509->_j into _l [mergeDocStores]
> > IW 9 [Indexer]: CMS:     launch new thread [Lucene Merge Thread #0]
> > IW 9 [Indexer]: CMS:   no more merges pending; now return
> > IW 9 [Indexer]: startCommit(): start sizeInBytes=0
> > IW 9 [Indexer]: startCommit index=_a:C9780 _b:C1204->_b _c:C717->_b
> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> _i:C703->_h
> > _j:C1456->_j _k:C509->_j changeCount=7
> > IW 9 [Lucene Merge Thread #0]: CMS:   merge thread: start
> > IW 9 [Indexer]: now sync _k.fnm
> > IW 9 [Lucene Merge Thread #0]: now merge
> >  merge=_b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f
> > _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j _k:C509->_j into _l
> > [mergeDocStores]
> >  merge=org.apache.lucene.index.MergePolicy$OneMerge@5203ef34
> >  index=_a:C9780 _b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d
> > _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j
> _k:C509->_j
> > IW 9 [Lucene Merge Thread #0]: merging _b:C1204->_b _c:C717->_b
> _d:C1220->_d
> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
> _j:C1456->_j
> > _k:C509->_j into _l [mergeDocStores]
> > IW 9 [Indexer]: now sync _k.tii
> > IW 9 [Indexer]: now sync _k.tis
> > IW 9 [Lucene Merge Thread #0]: merge: total 9909 docs
> > IW 9 [Indexer]: now sync _j.tis
> > IW 9 [Indexer]: now sync _j.tii
> > IW 9 [Indexer]: now sync _j.fdx
> > IW 9 [Indexer]: now sync _j.fdt
> > IW 9 [Indexer]: now sync _k.prx
> > IW 9 [Indexer]: now sync _k.nrm
> > IW 9 [Indexer]: now sync _j.nrm
> > IW 9 [Indexer]: now sync _j.prx
> > IW 9 [Indexer]: now sync _j.fnm
> > IW 9 [Indexer]: now sync _k.frq
> > IW 9 [Indexer]: now sync _j.frq
> > IW 9 [Indexer]: done all syncs
> > IW 9 [Indexer]: flush at getReader
> > IW 9 [Indexer]:   flush: segment=null docStoreSegment=_k docStoreOffset=0
> > flushDocs=false flushDeletes=true flushDocStores=true numDocs=0
> > numBufDelTerms=0
> > IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b _c:C717->_b
> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> _i:C703->_h
> > _j:C1456->_j _k:C509->_j
> > IW 9 [Indexer]:   flush shared docStore segment _k
> > IW 9 [Indexer]: DW: closeDocStore: 0 files to flush to segment _k
> numDocs=0
> > IW 9 [Indexer]: commit: start
> > IW 9 [Indexer]: commit: already prepared
> > IW 9 [Indexer]: commit: pendingCommit != null
> > IW 9 [Indexer]: commit: wrote segments file "segments_c"
> > IFD [Indexer]: now checkpoint "segments_c" [11 segments ; isCommit =
> true]
> > IFD [Indexer]: deleteCommits: now decRef commit "segments_b"
> > IFD [Indexer]: delete "segments_b"
> > IW 9 [Indexer]: commit: done
> > IW 9 [Indexer]: flush at getReader
> > IW 9 [Indexer]:   flush: segment=null docStoreSegment=null
> docStoreOffset=0
> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
> > numBufDelTerms=0
> > IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b _c:C717->_b
> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> _i:C703->_h
> > _j:C1456->_j _k:C509->_j
> > IW 9 [Indexer]: now flush at close
> > IW 9 [Indexer]:   flush: segment=null docStoreSegment=null
> docStoreOffset=0
> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
> > numBufDelTerms=0
> > IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b _c:C717->_b
> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> _i:C703->_h
> > _j:C1456->_j _k:C509->_j
> > IW 9 [Indexer]: CMS: now merge
> > IW 9 [Indexer]: CMS:   index: _a:C9780 _b:C1204->_b _c:C717->_b
> _d:C1220->_d
> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
> _j:C1456->_j
> > _k:C509->_j
> > IW 9 [Indexer]: CMS:   no more merges pending; now return
> > IW 9 [Lucene Merge Thread #0]: commitMerge: _b:C1204->_b _c:C717->_b
> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> _i:C703->_h
> > _j:C1456->_j _k:C509->_j into _l [mergeDocStores] index=_a:C9780
> > _b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f
> _g:C858->_f
> > _h:C1291->_h _i:C703->_h _j:C1456->_j _k:C509->_j
> > IW 9 [Lucene Merge Thread #0]: commitMergeDeletes _b:C1204->_b
> _c:C717->_b
> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> _i:C703->_h
> > _j:C1456->_j _k:C509->_j into _l [mergeDocStores]
> > IFD [Lucene Merge Thread #0]: now checkpoint "segments_c" [2 segments ;
> > isCommit = false]
> > IFD [Lucene Merge Thread #0]: now checkpoint "segments_c" [2 segments ;
> > isCommit = false]
> > IW 9 [Lucene Merge Thread #0]: CMS:   merge thread: done
> > IW 9 [Indexer]: now call final commit()
> > IW 9 [Indexer]: startCommit(): start sizeInBytes=0
> > IW 9 [Indexer]: startCommit index=_a:C9780 _l:C9909 changeCount=8
> > IW 9 [Indexer]: now sync _l.nrm
> > IW 9 [Indexer]: now sync _l.fnm
> > IW 9 [Indexer]: now sync _l.prx
> > IW 9 [Indexer]: now sync _l.frq
> > IW 9 [Indexer]: now sync _l.tis
> > IW 9 [Indexer]: now sync _l.fdx
> > IW 9 [Indexer]: now sync _l.fdt
> > IW 9 [Indexer]: now sync _l.tii
> > IW 9 [Indexer]: done all syncs
> > IW 9 [Indexer]: commit: pendingCommit != null
> > IW 9 [Indexer]: commit: wrote segments file "segments_d"
> > IFD [Indexer]: now checkpoint "segments_d" [2 segments ; isCommit = true]
> > IFD [Indexer]: deleteCommits: now decRef commit "segments_c"
> > IFD [Indexer]: delete "_h.prx"
> > IFD [Indexer]: delete "_f.tis"
> > IFD [Indexer]: delete "_g.tis"
> > IFD [Indexer]: delete "_d.tii"
> > IFD [Indexer]: delete "_e.frq"
> > IFD [Indexer]: delete "_k.fnm"
> > IFD [Indexer]: delete "_c.tii"
> > IFD [Indexer]: delete "_h.nrm"
> > IFD [Indexer]: delete "_i.tis"
> > IFD [Indexer]: delete "_k.tii"
> > IFD [Indexer]: delete "_h.fdt"
> > IFD [Indexer]: delete "_c.tis"
> > IFD [Indexer]: delete "_g.tii"
> > IFD [Indexer]: delete "_h.fdx"
> > IFD [Indexer]: delete "_c.nrm"
> > IFD [Indexer]: delete "_i.tii"
> > IFD [Indexer]: delete "_d.tis"
> > IFD [Indexer]: delete "_f.tii"
> > IFD [Indexer]: delete "_e.fnm"
> > IFD [Indexer]: delete "_k.tis"
> > IFD [Indexer]: delete "_d.frq"
> > IFD [Indexer]: delete "_f.nrm"
> > IFD [Indexer]: delete "_h.fnm"
> > IFD [Indexer]: delete "segments_c"
> > IFD [Indexer]: delete "_c.prx"
> > IFD [Indexer]: delete "_d.fnm"
> > IFD [Indexer]: delete "_h.frq"
> > IFD [Indexer]: delete "_h.tis"
> > IFD [Indexer]: delete "_f.fdt"
> > IFD [Indexer]: delete "_j.tis"
> > IFD [Indexer]: delete "_f.fdx"
> > IFD [Indexer]: delete "_g.nrm"
> > IFD [Indexer]: delete "_f.prx"
> > IFD [Indexer]: delete "_j.tii"
> > IFD [Indexer]: delete "_h.tii"
> > IFD [Indexer]: delete "_e.prx"
> > IFD [Indexer]: delete "_c.frq"
> > IFD [Indexer]: delete "_i.prx"
> > IFD [Indexer]: delete "_j.fdx"
> > IFD [Indexer]: delete "_i.nrm"
> > IFD [Indexer]: delete "_j.fdt"
> > IFD [Indexer]: delete "_k.prx"
> > IFD [Indexer]: delete "_b.nrm"
> > IFD [Indexer]: delete "_e.tis"
> > IFD [Indexer]: delete "_e.tii"
> > IFD [Indexer]: delete "_g.fnm"
> > IFD [Indexer]: delete "_k.nrm"
> > IFD [Indexer]: delete "_j.nrm"
> > IFD [Indexer]: delete "_j.prx"
> > IFD [Indexer]: delete "_e.nrm"
> > IFD [Indexer]: delete "_g.prx"
> > IFD [Indexer]: delete "_b.prx"
> > IFD [Indexer]: delete "_i.frq"
> > IFD [Indexer]: delete "_b.tis"
> > IFD [Indexer]: delete "_d.prx"
> > IFD [Indexer]: delete "_g.frq"
> > IFD [Indexer]: delete "_d.fdx"
> > IFD [Indexer]: delete "_b.tii"
> > IFD [Indexer]: delete "_b.frq"
> > IFD [Indexer]: delete "_d.fdt"
> > IFD [Indexer]: delete "_f.fnm"
> > IFD [Indexer]: delete "_j.fnm"
> > IFD [Indexer]: delete "_b.fnm"
> > IFD [Indexer]: delete "_d.nrm"
> > IFD [Indexer]: delete "_b.fdt"
> > IFD [Indexer]: delete "_k.frq"
> > IFD [Indexer]: delete "_c.fnm"
> > IFD [Indexer]: delete "_j.frq"
> > IFD [Indexer]: delete "_i.fnm"
> > IFD [Indexer]: delete "_f.frq"
> > IFD [Indexer]: delete "_b.fdx"
> > IW 9 [Indexer]: commit: done
> > IW 9 [Indexer]: at close: _a:C9780 _l:C9909
> >
> > =====================================================
> >
> > IFD [Indexer]: setInfoStream
> >
> deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@68d349c1
> > IW 10 [Indexer]: setInfoStream:
> > dir=org.apache.lucene.store.SimpleFSDirectory@<obfuscated
> > pathname>\lresumes1.search.main.1 autoCommit=false
> >
> mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@78f53abmergeScheduler
> =org.apache.lucene.index.ConcurrentMergeScheduler@52be036dramBufferSizeMB
> =16.0
> > maxBufferedDocs=-1 maxBuffereDeleteTerms=-1
> > maxFieldLength=100000 index=_a:C9780 _l:C9909
> > IW 10 [Indexer]: flush at getReader
> > IW 10 [Indexer]:   flush: segment=null docStoreSegment=null
> docStoreOffset=0
> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
> > numBufDelTerms=0
> > IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909
> > IW 10 [UpdWriterBuild : 10]: DW:   RAM: now flush @ usedMB=15.789
> > allocMB=15.789 deletesMB=0.212 triggerMB=16
> > IW 10 [UpdWriterBuild : 10]:   flush: segment=_m docStoreSegment=_m
> > docStoreOffset=0 flushDocs=true flushDeletes=false flushDocStores=false
> > numDocs=1526 numBufDelTerms=1526
> > IW 10 [UpdWriterBuild : 10]:   index before flush _a:C9780 _l:C9909
> > IW 10 [UpdWriterBuild : 10]: DW: flush postings as segment _m
> numDocs=1526
> > IW 10 [UpdWriterBuild : 10]: DW:   oldRAMSize=16556032
> > newFlushedSize=4788823 docs/MB=334.138 new/old=28.925%
> > IFD [UpdWriterBuild : 10]: now checkpoint "segments_d" [3 segments ;
> > isCommit = false]
> > IFD [UpdWriterBuild : 10]: now checkpoint "segments_d" [3 segments ;
> > isCommit = false]
> > IW 10 [UpdWriterBuild : 10]: LMP: findMerges: 3 segments
> > IW 10 [UpdWriterBuild : 10]: LMP:   level 6.8642592 to 7.6142592: 2
> segments
> > IW 10 [UpdWriterBuild : 10]: LMP:   level 6.2247195 to 6.6802545: 1
> segments
> > IW 10 [UpdWriterBuild : 10]: CMS: now merge
> > IW 10 [UpdWriterBuild : 10]: CMS:   index: _a:C9780 _l:C9909 _m:C1526->_m
> > IW 10 [UpdWriterBuild : 10]: CMS:   no more merges pending; now return
> > IW 10 [Indexer]: prepareCommit: flush
> > IW 10 [Indexer]:   flush: segment=_n docStoreSegment=_m
> docStoreOffset=1526
> > flushDocs=true flushDeletes=true flushDocStores=true numDocs=501
> > numBufDelTerms=501
> > IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909 _m:C1526->_m
> > IW 10 [Indexer]:   flush shared docStore segment _m
> > IW 10 [Indexer]: DW: closeDocStore: 2 files to flush to segment _m
> > numDocs=2027
> > IW 10 [Indexer]: DW: flush postings as segment _n numDocs=501
> > IW 10 [Indexer]: DW:   oldRAMSize=6927360 newFlushedSize=1659342
> > docs/MB=316.593 new/old=23.953%
> > IFD [Indexer]: now checkpoint "segments_d" [4 segments ; isCommit =
> false]
> > IW 10 [Indexer]: DW: apply 2027 buffered deleted terms and 0 deleted
> docIDs
> > and 0 deleted queries on 4 segments.
> > IFD [Indexer]: now checkpoint "segments_d" [4 segments ; isCommit =
> false]
> > IW 10 [Indexer]: LMP: findMerges: 4 segments
> > IW 10 [Indexer]: LMP:   level 6.8642592 to 7.6142592: 2 segments
> > IW 10 [Indexer]: LMP:   level 6.2247195 to 6.6802545: 1 segments
> > IW 10 [Indexer]: LMP:   level -1.0 to 6.220011: 1 segments
> > IW 10 [Indexer]: CMS: now merge
> > IW 10 [Indexer]: CMS:   index: _a:C9780 _l:C9909 _m:C1526->_m _n:C501->_m
> > IW 10 [Indexer]: CMS:   no more merges pending; now return
> > IW 10 [Indexer]: startCommit(): start sizeInBytes=0
> > IW 10 [Indexer]: startCommit index=_a:C9780 _l:C9909 _m:C1526->_m
> > _n:C501->_m changeCount=6
> > IW 10 [Indexer]: now sync _m.frq
> > IW 10 [Indexer]: now sync _m.prx
> > IW 10 [Indexer]: now sync _n.tis
> > IW 10 [Indexer]: now sync _m.tis
> > IW 10 [Indexer]: now sync _n.frq
> > IW 10 [Indexer]: now sync _n.tii
> > IW 10 [Indexer]: now sync _m.tii
> > IW 10 [Indexer]: now sync _m.fnm
> > IW 10 [Indexer]: now sync _n.fnm
> > IW 10 [Indexer]: now sync _n.nrm
> > IW 10 [Indexer]: now sync _n.prx
> > IW 10 [Indexer]: now sync _m.nrm
> > IW 10 [Indexer]: now sync _m.fdt
> > IW 10 [Indexer]: now sync _m.fdx
> > IW 10 [Indexer]: done all syncs
> > IW 10 [Indexer]: flush at getReader
> > IW 10 [Indexer]:   flush: segment=null docStoreSegment=_n
> docStoreOffset=0
> > flushDocs=false flushDeletes=true flushDocStores=true numDocs=0
> > numBufDelTerms=0
> > IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909 _m:C1526->_m
> > _n:C501->_m
> > IW 10 [Indexer]:   flush shared docStore segment _n
> > IW 10 [Indexer]: DW: closeDocStore: 0 files to flush to segment _n
> numDocs=0
> > IW 10 [Indexer]: commit: start
> > IW 10 [Indexer]: commit: already prepared
> > IW 10 [Indexer]: commit: pendingCommit != null
> > IW 10 [Indexer]: commit: wrote segments file "segments_e"
> > IFD [Indexer]: now checkpoint "segments_e" [4 segments ; isCommit = true]
> > IFD [Indexer]: deleteCommits: now decRef commit "segments_d"
> > IFD [Indexer]: delete "segments_d"
> > IW 10 [Indexer]: commit: done
> > IW 10 [Indexer]: flush at getReader
> > IW 10 [Indexer]:   flush: segment=null docStoreSegment=null
> docStoreOffset=0
> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
> > numBufDelTerms=0
> > IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909 _m:C1526->_m
> > _n:C501->_m
> > IW 10 [Indexer]: now flush at close
> > IW 10 [Indexer]:   flush: segment=null docStoreSegment=null
> docStoreOffset=0
> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
> > numBufDelTerms=0
> > IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909 _m:C1526->_m
> > _n:C501->_m
> > IW 10 [Indexer]: CMS: now merge
> > IW 10 [Indexer]: CMS:   index: _a:C9780 _l:C9909 _m:C1526->_m _n:C501->_m
> > IW 10 [Indexer]: CMS:   no more merges pending; now return
> > IW 10 [Indexer]: now call final commit()
> > IW 10 [Indexer]: startCommit(): start sizeInBytes=0
> > IW 10 [Indexer]:   skip startCommit(): no changes pending
> > IW 10 [Indexer]: commit: pendingCommit == null; skip
> > IW 10 [Indexer]: commit: done
> > IW 10 [Indexer]: at close: _a:C9780 _l:C9909 _m:C1526->_m _n:C501->_m
> >
> >
> > Peter
> >
> > On Thu, Feb 25, 2010 at 1:13 PM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >> Do you know the place in the infoStream output where you got a reader
> >> with the wrong (unexplained extra +1) version?  If so, can you post
> >> the infoStream output up to that point?
> >>
> >> Mike
> >>
> >> On Thu, Feb 25, 2010 at 10:22 AM, Peter Keegan <peterlkeegan@gmail.com>
> >> wrote:
> >> > I've reproduced this and I have a bunch of infoStream log files. Since
> >> the
> >> > messages have no timestamps, it's hard to tell where the relevant
> entries
> >> > are. What should I be looking for?
> >> >
> >> > Peter
> >> >
> >> > On Mon, Feb 22, 2010 at 3:58 PM, Peter Keegan <peterlkeegan@gmail.com
> >> >wrote:
> >> >
> >> >> I'm pretty sure there are flushes and segment merges going on, but as
> >> you
> >> >> said, that shouldn't affect the version increment. I'll see what I
> can
> >> do to
> >> >> get infoStream output.
> >> >>
> >> >> Thanks,
> >> >> Peter
> >> >>
> >> >>
> >> >> On Mon, Feb 22, 2010 at 2:30 PM, Michael McCandless <
> >> >> lucene@mikemccandless.com> wrote:
> >> >>
> >> >>> Well I'm at a loss then.  The version should only increment on
> commit.
> >> >>>
> >> >>> Can you make it all happen when infoStream is on, and post back?
> >> >>>
> >> >>> Mike
> >> >>>
> >> >>> On Mon, Feb 22, 2010 at 12:35 PM, Peter Keegan <
> peterlkeegan@gmail.com
> >> >
> >> >>> wrote:
> >> >>> > Only one writer thread and one writer process.
> >> >>> > I'm calling IndexWriter(Directory d, Analyzer a, boolean create,
> >> >>> > MaxFieldLength mfl), which sets autocommit=false.
> >> >>> >
> >> >>> > Peter
> >> >>> >
> >> >>> > On Mon, Feb 22, 2010 at 12:24 PM, Michael McCandless <
> >> >>> > lucene@mikemccandless.com> wrote:
> >> >>> >
> >> >>> >> That's curious.
> >> >>> >>
> >> >>> >> It's only on prepareCommit (or, commit, if you didn't first
> prepare,
> >> >>> >> since that will call prepareCommit internally) that this version
> >> >>> >> should increase.
> >> >>> >>
> >> >>> >> Is there only 1 thread doing this?
> >> >>> >>
> >> >>> >> Oh, and, are you passing false for autoCommit?
> >> >>> >>
> >> >>> >> Mike
> >> >>> >>
> >> >>> >> On Mon, Feb 22, 2010 at 11:43 AM, Peter Keegan <
> >> peterlkeegan@gmail.com
> >> >>> >
> >> >>> >> wrote:
> >> >>> >> > Using Lucene 2.9.1, I have the following pseudocode which gets
> >> >>> repeated
> >> >>> >> at
> >> >>> >> > regular intervals:
> >> >>> >> >
> >> >>> >> > 1. FSDirectory dir = FSDirectory.open(java.io.File);
> >> >>> >> > 2. dir.setLockFactory(new SingleInstanceLockFactory());
> >> >>> >> > 3. IndexWriter writer = new IndexWriter(dir, Analyzer, false,
> >> >>> >> maxFieldLen)
> >> >>> >> > 4. writer.getReader().getVersion();
> >> >>> >> > 5. writer.prepareCommit();
> >> >>> >> > 6. writer.getReader().getVersion();
> >> >>> >> > 7. writer.commit();
> >> >>> >> > 8. writer.close();
> >> >>> >> >
> >> >>> >> > I'm using the version number to keep external data in synch
> with
> >> the
> >> >>> >> index.
> >> >>> >> > Usually, the version number from (6) is 1 greater than from (4)
> >> and
> >> >>> the
> >> >>> >> > version from (4) equals the version from the previous (6). At
> >> least
> >> >>> once
> >> >>> >> a
> >> >>> >> > day, however, the version from (4) is 1 greater than from the
> >> >>> previous
> >> >>> >> (6).
> >> >>> >> > What would explain this sporadic behavior of version numbers?
> >> >>> >> >
> >> >>> >> > Thanks,
> >> >>> >> > Peter
> >> >>> >> >
> >> >>> >>
> >> >>> >>
> >> ---------------------------------------------------------------------
> >> >>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >>> >> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >> >>> >>
> >> >>> >>
> >> >>> >
> >> >>>
> >> >>>
> ---------------------------------------------------------------------
> >> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>>
> >> >>>
> >> >>
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636e90f340a45eb048086147a--

From java-user-return-45210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 19:48:07 2010
Return-Path: <java-user-return-45210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40614 invoked from network); 26 Feb 2010 19:48:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 19:48:07 -0000
Received: (qmail 69122 invoked by uid 500); 26 Feb 2010 19:48:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69088 invoked by uid 500); 26 Feb 2010 19:48:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69080 invoked by uid 99); 26 Feb 2010 19:48:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 19:48:05 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 19:47:54 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id D6F17D3600B
	for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 20:47:34 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id S55wWmLmXWx6 for <java-user@lucene.apache.org>;
	Fri, 26 Feb 2010 20:47:32 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 2918BD3600A
	for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 20:47:32 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4B881F05.1020202@sirma.bg>
In-Reply-To: <4B881F05.1020202@sirma.bg>
Subject: RE: NumericField exact match
Date: Fri, 26 Feb 2010 20:47:43 +0100
Message-ID: <000301cab71c$9050eb70$b0f2c250$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acq3GNvoUN1SaImSRSiJ59nIpZ9VAgAA3vwA
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

It's very easy: NumericRangeQuery.nexXxxRange(field, val, val, true, =
true) - val is the exact match. This is not slower as this automatically =
rewrites to a non-scored TermQuery. If you already changed QueryParser, =
you can also override the method for exactMatches (newTermQuery).

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
> Sent: Friday, February 26, 2010 8:21 PM
> To: LUCENE MAIL LIST
> Subject: NumericField exact match
>=20
> Hi Guys,
>=20
> Is it possible to make exact searches on fields that are of type
> NumericField and if yes how?
> In the LIA book part 2 I found only information about Range searches =
on
> such fields and how to Sort them.
>=20
> Example - I have field "size" that can take integers as values.
> I want to get docs that are with "size:100".
> For the regular fields "size:100" is OK to pass to Parser but with
> NumericField it does not work.
> The only approach to support such fields that I can see is - to have
> parallel casual Field (example "size2") and to index the same data
> there.
> And then when user wants exact search on "size" I to perform
> "size2:100".
>=20
> Is this the most appropriate way for my case on your opinion?
>=20
> Thanks,
> Ivan
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 20:12:04 2010
Return-Path: <java-user-return-45211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48558 invoked from network); 26 Feb 2010 20:12:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 20:12:04 -0000
Received: (qmail 95334 invoked by uid 500); 26 Feb 2010 20:12:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95296 invoked by uid 500); 26 Feb 2010 20:12:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95288 invoked by uid 99); 26 Feb 2010 20:12:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 20:12:01 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 20:11:52 +0000
Received: by gyb13 with SMTP id 13so226866gyb.35
        for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 12:11:31 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.125.4 with SMTP id c4mr1491820ybn.204.1267215090859; Fri, 
	26 Feb 2010 12:11:30 -0800 (PST)
In-Reply-To: <e994873a1002261140o598856a7ge6a2d0ecf7604f19@mail.gmail.com>
References: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
	 <9ac0c6aa1002220924q75da08a4s741376ff876ed20c@mail.gmail.com>
	 <e994873a1002220935q1394a3dau13fab93dc43fd293@mail.gmail.com>
	 <9ac0c6aa1002221130w3aa9c59dq2fe627e85c22bcf3@mail.gmail.com>
	 <e994873a1002221258y1cfba96atfb1fbb2c7dc65c90@mail.gmail.com>
	 <e994873a1002250722n5d0cf7e7xb6cc9b9d8b0ae5d8@mail.gmail.com>
	 <9ac0c6aa1002251013j55a5e6e9h4a7e5331d2951c1b@mail.gmail.com>
	 <e994873a1002251152i5baf6db2o2901ed63eaf441d3@mail.gmail.com>
	 <9ac0c6aa1002260940x2f326ad4ga7c254bd92ca3c7d@mail.gmail.com>
	 <e994873a1002261140o598856a7ge6a2d0ecf7604f19@mail.gmail.com>
Date: Fri, 26 Feb 2010 15:11:30 -0500
Message-ID: <9ac0c6aa1002261211p4e83ac64n33824a83b6930d10@mail.gmail.com>
Subject: Re: IndexWriter.getReader.getVersion behavior
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Note that it's a BG merge (not commit)...

You can use the new (as of 2.9 I think) IndexWriter.waitForMerges API?
 If you call that, then call .getReader().getVersion(), then close &
open the writer, I think (but you better test to be sure!) the next
.getReader().getVersion() should always match.

Mike

On Fri, Feb 26, 2010 at 2:40 PM, Peter Keegan <peterlkeegan@gmail.com> wrot=
e:
> Is there a way for the application to wait for the BG commit to finish
> before it calls IW.close? If so, would this prevent the extra version? Th=
e
> extra version causes the app. to think that the external data it committe=
d
> is out of synch with the index, which requires the app to do extra
> processing to re-synch.
>
> Thanks,
> Peter
>
>
> On Fri, Feb 26, 2010 at 12:40 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> OK -- I can now see what happened.
>>
>> There was a merge still running, when you called IW.commit (Lucene
>> Merge Thread #0). =A0Because IW.commit does not wait for BG merges to
>> finish, but IW.close does (by default), this means you'll pick up an
>> extra version whenever a merge is running when you call close.
>>
>> Mike
>>
>> On Thu, Feb 25, 2010 at 2:52 PM, Peter Keegan <peterlkeegan@gmail.com>
>> wrote:
>> > I'm pretty sure this output occurred when the version number skipped +=
1.
>> > The line containing '=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D'. separates =
the close/open IndexWriter.
>> >
>> > IFD [Indexer]: setInfoStream
>> >
>> deletionPolicy=3Dorg.apache.lucene.index.KeepOnlyLastCommitDeletionPolic=
y@646f9dd9
>> > IW 9 [Indexer]: setInfoStream:
>> > dir=3Dorg.apache.lucene.store.SimpleFSDirectory@<obfuscated
>> > pathname>\lresumes1.search.main.1 autoCommit=3Dfalse
>> >
>> mergePolicy=3Dorg.apache.lucene.index.LogByteSizeMergePolicy@5be44512mer=
geScheduler
>> =3Dorg.apache.lucene.index.ConcurrentMergeScheduler@6772cfdframBufferSiz=
eMB
>> =3D16.0
>> > maxBufferedDocs=3D-1 maxBuffereDeleteTerms=3D-1
>> > maxFieldLength=3D100000 index=3D_a:C9780 _b:C1204->_b _c:C717->_b
>> _d:C1220->_d
>> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
>> > IW 9 [Indexer]: flush at getReader
>> > IW 9 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull
>> docStoreOffset=3D0
>> > flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDocs=
=3D0
>> > numBufDelTerms=3D0
>> > IW 9 [Indexer]: =A0 index before flush _a:C9780 _b:C1204->_b _c:C717->=
_b
>> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> _i:C703->_h
>> > IW 9 [UpdWriterBuild : 9]: DW: =A0 RAM: now flush @ usedMB=3D15.816
>> > allocMB=3D15.816 deletesMB=3D0.203 triggerMB=3D16
>> > IW 9 [UpdWriterBuild : 9]: =A0 flush: segment=3D_j docStoreSegment=3D_=
j
>> > docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dfalse flushDocStore=
s=3Dfalse
>> > numDocs=3D1456 numBufDelTerms=3D1456
>> > IW 9 [UpdWriterBuild : 9]: =A0 index before flush _a:C9780 _b:C1204->_=
b
>> > _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f
>> _h:C1291->_h
>> > _i:C703->_h
>> > IW 9 [UpdWriterBuild : 9]: DW: flush postings as segment _j numDocs=3D=
1456
>> > IW 9 [UpdWriterBuild : 9]: DW: =A0 oldRAMSize=3D16584704
>> newFlushedSize=3D4969789
>> > docs/MB=3D307.202 new/old=3D29.966%
>> > IFD [UpdWriterBuild : 9]: now checkpoint "segments_b" [10 segments ;
>> > isCommit =3D false]
>> > IFD [UpdWriterBuild : 9]: now checkpoint "segments_b" [10 segments ;
>> > isCommit =3D false]
>> > IW 9 [UpdWriterBuild : 9]: LMP: findMerges: 10 segments
>> > IW 9 [UpdWriterBuild : 9]: LMP: =A0 level 6.863048 to 7.613048: 1 segm=
ents
>> > IW 9 [UpdWriterBuild : 9]: LMP: =A0 level 6.2247195 to 6.696363: 9 seg=
ments
>> > IW 9 [UpdWriterBuild : 9]: CMS: now merge
>> > IW 9 [UpdWriterBuild : 9]: CMS: =A0 index: _a:C9780 _b:C1204->_b
>> _c:C717->_b
>> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> _i:C703->_h
>> > _j:C1456->_j
>> > IW 9 [UpdWriterBuild : 9]: CMS: =A0 no more merges pending; now return
>> > IW 9 [Indexer]: prepareCommit: flush
>> > IW 9 [Indexer]: =A0 flush: segment=3D_k docStoreSegment=3D_j
>> docStoreOffset=3D1456
>> > flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStores=3Dtrue numDocs=3D5=
09
>> > numBufDelTerms=3D509
>> > IW 9 [Indexer]: =A0 index before flush _a:C9780 _b:C1204->_b _c:C717->=
_b
>> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> _i:C703->_h
>> > _j:C1456->_j
>> > IW 9 [Indexer]: =A0 flush shared docStore segment _j
>> > IW 9 [Indexer]: DW: closeDocStore: 2 files to flush to segment _j
>> > numDocs=3D1965
>> > IW 9 [Indexer]: DW: flush postings as segment _k numDocs=3D509
>> > IW 9 [Indexer]: DW: =A0 oldRAMSize=3D7483392 newFlushedSize=3D1854970
>> > docs/MB=3D287.727 new/old=3D24.788%
>> > IFD [Indexer]: now checkpoint "segments_b" [11 segments ; isCommit =3D
>> false]
>> > IW 9 [Indexer]: DW: apply 1965 buffered deleted terms and 0 deleted
>> docIDs
>> > and 0 deleted queries on 11 segments.
>> > IFD [Indexer]: now checkpoint "segments_b" [11 segments ; isCommit =3D
>> false]
>> > IW 9 [Indexer]: LMP: findMerges: 11 segments
>> > IW 9 [Indexer]: LMP: =A0 level 6.863048 to 7.613048: 1 segments
>> > IW 9 [Indexer]: LMP: =A0 level 6.2247195 to 6.696363: 10 segments
>> > IW 9 [Indexer]: LMP: =A0 =A0 1 to 11: add this merge
>> > IW 9 [Indexer]: add merge to pendingMerges: _b:C1204->_b _c:C717->_b
>> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> _i:C703->_h
>> > _j:C1456->_j _k:C509->_j [total 1 pending]
>> > IW 9 [Indexer]: CMS: now merge
>> > IW 9 [Indexer]: CMS: =A0 index: _a:C9780 _b:C1204->_b _c:C717->_b
>> _d:C1220->_d
>> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
>> _j:C1456->_j
>> > _k:C509->_j
>> > IW 9 [Indexer]: CMS: =A0 consider merge _b:C1204->_b _c:C717->_b
>> _d:C1220->_d
>> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
>> _j:C1456->_j
>> > _k:C509->_j into _l [mergeDocStores]
>> > IW 9 [Indexer]: CMS: =A0 =A0 launch new thread [Lucene Merge Thread #0=
]
>> > IW 9 [Indexer]: CMS: =A0 no more merges pending; now return
>> > IW 9 [Indexer]: startCommit(): start sizeInBytes=3D0
>> > IW 9 [Indexer]: startCommit index=3D_a:C9780 _b:C1204->_b _c:C717->_b
>> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> _i:C703->_h
>> > _j:C1456->_j _k:C509->_j changeCount=3D7
>> > IW 9 [Lucene Merge Thread #0]: CMS: =A0 merge thread: start
>> > IW 9 [Indexer]: now sync _k.fnm
>> > IW 9 [Lucene Merge Thread #0]: now merge
>> > =A0merge=3D_b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173-=
>_f
>> > _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j _k:C509->_j into _l
>> > [mergeDocStores]
>> > =A0merge=3Dorg.apache.lucene.index.MergePolicy$OneMerge@5203ef34
>> > =A0index=3D_a:C9780 _b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d
>> > _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j
>> _k:C509->_j
>> > IW 9 [Lucene Merge Thread #0]: merging _b:C1204->_b _c:C717->_b
>> _d:C1220->_d
>> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
>> _j:C1456->_j
>> > _k:C509->_j into _l [mergeDocStores]
>> > IW 9 [Indexer]: now sync _k.tii
>> > IW 9 [Indexer]: now sync _k.tis
>> > IW 9 [Lucene Merge Thread #0]: merge: total 9909 docs
>> > IW 9 [Indexer]: now sync _j.tis
>> > IW 9 [Indexer]: now sync _j.tii
>> > IW 9 [Indexer]: now sync _j.fdx
>> > IW 9 [Indexer]: now sync _j.fdt
>> > IW 9 [Indexer]: now sync _k.prx
>> > IW 9 [Indexer]: now sync _k.nrm
>> > IW 9 [Indexer]: now sync _j.nrm
>> > IW 9 [Indexer]: now sync _j.prx
>> > IW 9 [Indexer]: now sync _j.fnm
>> > IW 9 [Indexer]: now sync _k.frq
>> > IW 9 [Indexer]: now sync _j.frq
>> > IW 9 [Indexer]: done all syncs
>> > IW 9 [Indexer]: flush at getReader
>> > IW 9 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3D_k docStor=
eOffset=3D0
>> > flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dtrue numDocs=3D=
0
>> > numBufDelTerms=3D0
>> > IW 9 [Indexer]: =A0 index before flush _a:C9780 _b:C1204->_b _c:C717->=
_b
>> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> _i:C703->_h
>> > _j:C1456->_j _k:C509->_j
>> > IW 9 [Indexer]: =A0 flush shared docStore segment _k
>> > IW 9 [Indexer]: DW: closeDocStore: 0 files to flush to segment _k
>> numDocs=3D0
>> > IW 9 [Indexer]: commit: start
>> > IW 9 [Indexer]: commit: already prepared
>> > IW 9 [Indexer]: commit: pendingCommit !=3D null
>> > IW 9 [Indexer]: commit: wrote segments file "segments_c"
>> > IFD [Indexer]: now checkpoint "segments_c" [11 segments ; isCommit =3D
>> true]
>> > IFD [Indexer]: deleteCommits: now decRef commit "segments_b"
>> > IFD [Indexer]: delete "segments_b"
>> > IW 9 [Indexer]: commit: done
>> > IW 9 [Indexer]: flush at getReader
>> > IW 9 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull
>> docStoreOffset=3D0
>> > flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDocs=
=3D0
>> > numBufDelTerms=3D0
>> > IW 9 [Indexer]: =A0 index before flush _a:C9780 _b:C1204->_b _c:C717->=
_b
>> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> _i:C703->_h
>> > _j:C1456->_j _k:C509->_j
>> > IW 9 [Indexer]: now flush at close
>> > IW 9 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull
>> docStoreOffset=3D0
>> > flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDocs=
=3D0
>> > numBufDelTerms=3D0
>> > IW 9 [Indexer]: =A0 index before flush _a:C9780 _b:C1204->_b _c:C717->=
_b
>> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> _i:C703->_h
>> > _j:C1456->_j _k:C509->_j
>> > IW 9 [Indexer]: CMS: now merge
>> > IW 9 [Indexer]: CMS: =A0 index: _a:C9780 _b:C1204->_b _c:C717->_b
>> _d:C1220->_d
>> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
>> _j:C1456->_j
>> > _k:C509->_j
>> > IW 9 [Indexer]: CMS: =A0 no more merges pending; now return
>> > IW 9 [Lucene Merge Thread #0]: commitMerge: _b:C1204->_b _c:C717->_b
>> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> _i:C703->_h
>> > _j:C1456->_j _k:C509->_j into _l [mergeDocStores] index=3D_a:C9780
>> > _b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f
>> _g:C858->_f
>> > _h:C1291->_h _i:C703->_h _j:C1456->_j _k:C509->_j
>> > IW 9 [Lucene Merge Thread #0]: commitMergeDeletes _b:C1204->_b
>> _c:C717->_b
>> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> _i:C703->_h
>> > _j:C1456->_j _k:C509->_j into _l [mergeDocStores]
>> > IFD [Lucene Merge Thread #0]: now checkpoint "segments_c" [2 segments =
;
>> > isCommit =3D false]
>> > IFD [Lucene Merge Thread #0]: now checkpoint "segments_c" [2 segments =
;
>> > isCommit =3D false]
>> > IW 9 [Lucene Merge Thread #0]: CMS: =A0 merge thread: done
>> > IW 9 [Indexer]: now call final commit()
>> > IW 9 [Indexer]: startCommit(): start sizeInBytes=3D0
>> > IW 9 [Indexer]: startCommit index=3D_a:C9780 _l:C9909 changeCount=3D8
>> > IW 9 [Indexer]: now sync _l.nrm
>> > IW 9 [Indexer]: now sync _l.fnm
>> > IW 9 [Indexer]: now sync _l.prx
>> > IW 9 [Indexer]: now sync _l.frq
>> > IW 9 [Indexer]: now sync _l.tis
>> > IW 9 [Indexer]: now sync _l.fdx
>> > IW 9 [Indexer]: now sync _l.fdt
>> > IW 9 [Indexer]: now sync _l.tii
>> > IW 9 [Indexer]: done all syncs
>> > IW 9 [Indexer]: commit: pendingCommit !=3D null
>> > IW 9 [Indexer]: commit: wrote segments file "segments_d"
>> > IFD [Indexer]: now checkpoint "segments_d" [2 segments ; isCommit =3D =
true]
>> > IFD [Indexer]: deleteCommits: now decRef commit "segments_c"
>> > IFD [Indexer]: delete "_h.prx"
>> > IFD [Indexer]: delete "_f.tis"
>> > IFD [Indexer]: delete "_g.tis"
>> > IFD [Indexer]: delete "_d.tii"
>> > IFD [Indexer]: delete "_e.frq"
>> > IFD [Indexer]: delete "_k.fnm"
>> > IFD [Indexer]: delete "_c.tii"
>> > IFD [Indexer]: delete "_h.nrm"
>> > IFD [Indexer]: delete "_i.tis"
>> > IFD [Indexer]: delete "_k.tii"
>> > IFD [Indexer]: delete "_h.fdt"
>> > IFD [Indexer]: delete "_c.tis"
>> > IFD [Indexer]: delete "_g.tii"
>> > IFD [Indexer]: delete "_h.fdx"
>> > IFD [Indexer]: delete "_c.nrm"
>> > IFD [Indexer]: delete "_i.tii"
>> > IFD [Indexer]: delete "_d.tis"
>> > IFD [Indexer]: delete "_f.tii"
>> > IFD [Indexer]: delete "_e.fnm"
>> > IFD [Indexer]: delete "_k.tis"
>> > IFD [Indexer]: delete "_d.frq"
>> > IFD [Indexer]: delete "_f.nrm"
>> > IFD [Indexer]: delete "_h.fnm"
>> > IFD [Indexer]: delete "segments_c"
>> > IFD [Indexer]: delete "_c.prx"
>> > IFD [Indexer]: delete "_d.fnm"
>> > IFD [Indexer]: delete "_h.frq"
>> > IFD [Indexer]: delete "_h.tis"
>> > IFD [Indexer]: delete "_f.fdt"
>> > IFD [Indexer]: delete "_j.tis"
>> > IFD [Indexer]: delete "_f.fdx"
>> > IFD [Indexer]: delete "_g.nrm"
>> > IFD [Indexer]: delete "_f.prx"
>> > IFD [Indexer]: delete "_j.tii"
>> > IFD [Indexer]: delete "_h.tii"
>> > IFD [Indexer]: delete "_e.prx"
>> > IFD [Indexer]: delete "_c.frq"
>> > IFD [Indexer]: delete "_i.prx"
>> > IFD [Indexer]: delete "_j.fdx"
>> > IFD [Indexer]: delete "_i.nrm"
>> > IFD [Indexer]: delete "_j.fdt"
>> > IFD [Indexer]: delete "_k.prx"
>> > IFD [Indexer]: delete "_b.nrm"
>> > IFD [Indexer]: delete "_e.tis"
>> > IFD [Indexer]: delete "_e.tii"
>> > IFD [Indexer]: delete "_g.fnm"
>> > IFD [Indexer]: delete "_k.nrm"
>> > IFD [Indexer]: delete "_j.nrm"
>> > IFD [Indexer]: delete "_j.prx"
>> > IFD [Indexer]: delete "_e.nrm"
>> > IFD [Indexer]: delete "_g.prx"
>> > IFD [Indexer]: delete "_b.prx"
>> > IFD [Indexer]: delete "_i.frq"
>> > IFD [Indexer]: delete "_b.tis"
>> > IFD [Indexer]: delete "_d.prx"
>> > IFD [Indexer]: delete "_g.frq"
>> > IFD [Indexer]: delete "_d.fdx"
>> > IFD [Indexer]: delete "_b.tii"
>> > IFD [Indexer]: delete "_b.frq"
>> > IFD [Indexer]: delete "_d.fdt"
>> > IFD [Indexer]: delete "_f.fnm"
>> > IFD [Indexer]: delete "_j.fnm"
>> > IFD [Indexer]: delete "_b.fnm"
>> > IFD [Indexer]: delete "_d.nrm"
>> > IFD [Indexer]: delete "_b.fdt"
>> > IFD [Indexer]: delete "_k.frq"
>> > IFD [Indexer]: delete "_c.fnm"
>> > IFD [Indexer]: delete "_j.frq"
>> > IFD [Indexer]: delete "_i.fnm"
>> > IFD [Indexer]: delete "_f.frq"
>> > IFD [Indexer]: delete "_b.fdx"
>> > IW 9 [Indexer]: commit: done
>> > IW 9 [Indexer]: at close: _a:C9780 _l:C9909
>> >
>> > =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D
>> >
>> > IFD [Indexer]: setInfoStream
>> >
>> deletionPolicy=3Dorg.apache.lucene.index.KeepOnlyLastCommitDeletionPolic=
y@68d349c1
>> > IW 10 [Indexer]: setInfoStream:
>> > dir=3Dorg.apache.lucene.store.SimpleFSDirectory@<obfuscated
>> > pathname>\lresumes1.search.main.1 autoCommit=3Dfalse
>> >
>> mergePolicy=3Dorg.apache.lucene.index.LogByteSizeMergePolicy@78f53abmerg=
eScheduler
>> =3Dorg.apache.lucene.index.ConcurrentMergeScheduler@52be036dramBufferSiz=
eMB
>> =3D16.0
>> > maxBufferedDocs=3D-1 maxBuffereDeleteTerms=3D-1
>> > maxFieldLength=3D100000 index=3D_a:C9780 _l:C9909
>> > IW 10 [Indexer]: flush at getReader
>> > IW 10 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull
>> docStoreOffset=3D0
>> > flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDocs=
=3D0
>> > numBufDelTerms=3D0
>> > IW 10 [Indexer]: =A0 index before flush _a:C9780 _l:C9909
>> > IW 10 [UpdWriterBuild : 10]: DW: =A0 RAM: now flush @ usedMB=3D15.789
>> > allocMB=3D15.789 deletesMB=3D0.212 triggerMB=3D16
>> > IW 10 [UpdWriterBuild : 10]: =A0 flush: segment=3D_m docStoreSegment=
=3D_m
>> > docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dfalse flushDocStore=
s=3Dfalse
>> > numDocs=3D1526 numBufDelTerms=3D1526
>> > IW 10 [UpdWriterBuild : 10]: =A0 index before flush _a:C9780 _l:C9909
>> > IW 10 [UpdWriterBuild : 10]: DW: flush postings as segment _m
>> numDocs=3D1526
>> > IW 10 [UpdWriterBuild : 10]: DW: =A0 oldRAMSize=3D16556032
>> > newFlushedSize=3D4788823 docs/MB=3D334.138 new/old=3D28.925%
>> > IFD [UpdWriterBuild : 10]: now checkpoint "segments_d" [3 segments ;
>> > isCommit =3D false]
>> > IFD [UpdWriterBuild : 10]: now checkpoint "segments_d" [3 segments ;
>> > isCommit =3D false]
>> > IW 10 [UpdWriterBuild : 10]: LMP: findMerges: 3 segments
>> > IW 10 [UpdWriterBuild : 10]: LMP: =A0 level 6.8642592 to 7.6142592: 2
>> segments
>> > IW 10 [UpdWriterBuild : 10]: LMP: =A0 level 6.2247195 to 6.6802545: 1
>> segments
>> > IW 10 [UpdWriterBuild : 10]: CMS: now merge
>> > IW 10 [UpdWriterBuild : 10]: CMS: =A0 index: _a:C9780 _l:C9909 _m:C152=
6->_m
>> > IW 10 [UpdWriterBuild : 10]: CMS: =A0 no more merges pending; now retu=
rn
>> > IW 10 [Indexer]: prepareCommit: flush
>> > IW 10 [Indexer]: =A0 flush: segment=3D_n docStoreSegment=3D_m
>> docStoreOffset=3D1526
>> > flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStores=3Dtrue numDocs=3D5=
01
>> > numBufDelTerms=3D501
>> > IW 10 [Indexer]: =A0 index before flush _a:C9780 _l:C9909 _m:C1526->_m
>> > IW 10 [Indexer]: =A0 flush shared docStore segment _m
>> > IW 10 [Indexer]: DW: closeDocStore: 2 files to flush to segment _m
>> > numDocs=3D2027
>> > IW 10 [Indexer]: DW: flush postings as segment _n numDocs=3D501
>> > IW 10 [Indexer]: DW: =A0 oldRAMSize=3D6927360 newFlushedSize=3D1659342
>> > docs/MB=3D316.593 new/old=3D23.953%
>> > IFD [Indexer]: now checkpoint "segments_d" [4 segments ; isCommit =3D
>> false]
>> > IW 10 [Indexer]: DW: apply 2027 buffered deleted terms and 0 deleted
>> docIDs
>> > and 0 deleted queries on 4 segments.
>> > IFD [Indexer]: now checkpoint "segments_d" [4 segments ; isCommit =3D
>> false]
>> > IW 10 [Indexer]: LMP: findMerges: 4 segments
>> > IW 10 [Indexer]: LMP: =A0 level 6.8642592 to 7.6142592: 2 segments
>> > IW 10 [Indexer]: LMP: =A0 level 6.2247195 to 6.6802545: 1 segments
>> > IW 10 [Indexer]: LMP: =A0 level -1.0 to 6.220011: 1 segments
>> > IW 10 [Indexer]: CMS: now merge
>> > IW 10 [Indexer]: CMS: =A0 index: _a:C9780 _l:C9909 _m:C1526->_m _n:C50=
1->_m
>> > IW 10 [Indexer]: CMS: =A0 no more merges pending; now return
>> > IW 10 [Indexer]: startCommit(): start sizeInBytes=3D0
>> > IW 10 [Indexer]: startCommit index=3D_a:C9780 _l:C9909 _m:C1526->_m
>> > _n:C501->_m changeCount=3D6
>> > IW 10 [Indexer]: now sync _m.frq
>> > IW 10 [Indexer]: now sync _m.prx
>> > IW 10 [Indexer]: now sync _n.tis
>> > IW 10 [Indexer]: now sync _m.tis
>> > IW 10 [Indexer]: now sync _n.frq
>> > IW 10 [Indexer]: now sync _n.tii
>> > IW 10 [Indexer]: now sync _m.tii
>> > IW 10 [Indexer]: now sync _m.fnm
>> > IW 10 [Indexer]: now sync _n.fnm
>> > IW 10 [Indexer]: now sync _n.nrm
>> > IW 10 [Indexer]: now sync _n.prx
>> > IW 10 [Indexer]: now sync _m.nrm
>> > IW 10 [Indexer]: now sync _m.fdt
>> > IW 10 [Indexer]: now sync _m.fdx
>> > IW 10 [Indexer]: done all syncs
>> > IW 10 [Indexer]: flush at getReader
>> > IW 10 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3D_n
>> docStoreOffset=3D0
>> > flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dtrue numDocs=3D=
0
>> > numBufDelTerms=3D0
>> > IW 10 [Indexer]: =A0 index before flush _a:C9780 _l:C9909 _m:C1526->_m
>> > _n:C501->_m
>> > IW 10 [Indexer]: =A0 flush shared docStore segment _n
>> > IW 10 [Indexer]: DW: closeDocStore: 0 files to flush to segment _n
>> numDocs=3D0
>> > IW 10 [Indexer]: commit: start
>> > IW 10 [Indexer]: commit: already prepared
>> > IW 10 [Indexer]: commit: pendingCommit !=3D null
>> > IW 10 [Indexer]: commit: wrote segments file "segments_e"
>> > IFD [Indexer]: now checkpoint "segments_e" [4 segments ; isCommit =3D =
true]
>> > IFD [Indexer]: deleteCommits: now decRef commit "segments_d"
>> > IFD [Indexer]: delete "segments_d"
>> > IW 10 [Indexer]: commit: done
>> > IW 10 [Indexer]: flush at getReader
>> > IW 10 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull
>> docStoreOffset=3D0
>> > flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDocs=
=3D0
>> > numBufDelTerms=3D0
>> > IW 10 [Indexer]: =A0 index before flush _a:C9780 _l:C9909 _m:C1526->_m
>> > _n:C501->_m
>> > IW 10 [Indexer]: now flush at close
>> > IW 10 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull
>> docStoreOffset=3D0
>> > flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDocs=
=3D0
>> > numBufDelTerms=3D0
>> > IW 10 [Indexer]: =A0 index before flush _a:C9780 _l:C9909 _m:C1526->_m
>> > _n:C501->_m
>> > IW 10 [Indexer]: CMS: now merge
>> > IW 10 [Indexer]: CMS: =A0 index: _a:C9780 _l:C9909 _m:C1526->_m _n:C50=
1->_m
>> > IW 10 [Indexer]: CMS: =A0 no more merges pending; now return
>> > IW 10 [Indexer]: now call final commit()
>> > IW 10 [Indexer]: startCommit(): start sizeInBytes=3D0
>> > IW 10 [Indexer]: =A0 skip startCommit(): no changes pending
>> > IW 10 [Indexer]: commit: pendingCommit =3D=3D null; skip
>> > IW 10 [Indexer]: commit: done
>> > IW 10 [Indexer]: at close: _a:C9780 _l:C9909 _m:C1526->_m _n:C501->_m
>> >
>> >
>> > Peter
>> >
>> > On Thu, Feb 25, 2010 at 1:13 PM, Michael McCandless <
>> > lucene@mikemccandless.com> wrote:
>> >
>> >> Do you know the place in the infoStream output where you got a reader
>> >> with the wrong (unexplained extra +1) version? =A0If so, can you post
>> >> the infoStream output up to that point?
>> >>
>> >> Mike
>> >>
>> >> On Thu, Feb 25, 2010 at 10:22 AM, Peter Keegan <peterlkeegan@gmail.co=
m>
>> >> wrote:
>> >> > I've reproduced this and I have a bunch of infoStream log files. Si=
nce
>> >> the
>> >> > messages have no timestamps, it's hard to tell where the relevant
>> entries
>> >> > are. What should I be looking for?
>> >> >
>> >> > Peter
>> >> >
>> >> > On Mon, Feb 22, 2010 at 3:58 PM, Peter Keegan <peterlkeegan@gmail.c=
om
>> >> >wrote:
>> >> >
>> >> >> I'm pretty sure there are flushes and segment merges going on, but=
 as
>> >> you
>> >> >> said, that shouldn't affect the version increment. I'll see what I
>> can
>> >> do to
>> >> >> get infoStream output.
>> >> >>
>> >> >> Thanks,
>> >> >> Peter
>> >> >>
>> >> >>
>> >> >> On Mon, Feb 22, 2010 at 2:30 PM, Michael McCandless <
>> >> >> lucene@mikemccandless.com> wrote:
>> >> >>
>> >> >>> Well I'm at a loss then. =A0The version should only increment on
>> commit.
>> >> >>>
>> >> >>> Can you make it all happen when infoStream is on, and post back?
>> >> >>>
>> >> >>> Mike
>> >> >>>
>> >> >>> On Mon, Feb 22, 2010 at 12:35 PM, Peter Keegan <
>> peterlkeegan@gmail.com
>> >> >
>> >> >>> wrote:
>> >> >>> > Only one writer thread and one writer process.
>> >> >>> > I'm calling IndexWriter(Directory d, Analyzer a, boolean create=
,
>> >> >>> > MaxFieldLength mfl), which sets autocommit=3Dfalse.
>> >> >>> >
>> >> >>> > Peter
>> >> >>> >
>> >> >>> > On Mon, Feb 22, 2010 at 12:24 PM, Michael McCandless <
>> >> >>> > lucene@mikemccandless.com> wrote:
>> >> >>> >
>> >> >>> >> That's curious.
>> >> >>> >>
>> >> >>> >> It's only on prepareCommit (or, commit, if you didn't first
>> prepare,
>> >> >>> >> since that will call prepareCommit internally) that this versi=
on
>> >> >>> >> should increase.
>> >> >>> >>
>> >> >>> >> Is there only 1 thread doing this?
>> >> >>> >>
>> >> >>> >> Oh, and, are you passing false for autoCommit?
>> >> >>> >>
>> >> >>> >> Mike
>> >> >>> >>
>> >> >>> >> On Mon, Feb 22, 2010 at 11:43 AM, Peter Keegan <
>> >> peterlkeegan@gmail.com
>> >> >>> >
>> >> >>> >> wrote:
>> >> >>> >> > Using Lucene 2.9.1, I have the following pseudocode which ge=
ts
>> >> >>> repeated
>> >> >>> >> at
>> >> >>> >> > regular intervals:
>> >> >>> >> >
>> >> >>> >> > 1. FSDirectory dir =3D FSDirectory.open(java.io.File);
>> >> >>> >> > 2. dir.setLockFactory(new SingleInstanceLockFactory());
>> >> >>> >> > 3. IndexWriter writer =3D new IndexWriter(dir, Analyzer, fal=
se,
>> >> >>> >> maxFieldLen)
>> >> >>> >> > 4. writer.getReader().getVersion();
>> >> >>> >> > 5. writer.prepareCommit();
>> >> >>> >> > 6. writer.getReader().getVersion();
>> >> >>> >> > 7. writer.commit();
>> >> >>> >> > 8. writer.close();
>> >> >>> >> >
>> >> >>> >> > I'm using the version number to keep external data in synch
>> with
>> >> the
>> >> >>> >> index.
>> >> >>> >> > Usually, the version number from (6) is 1 greater than from =
(4)
>> >> and
>> >> >>> the
>> >> >>> >> > version from (4) equals the version from the previous (6). A=
t
>> >> least
>> >> >>> once
>> >> >>> >> a
>> >> >>> >> > day, however, the version from (4) is 1 greater than from th=
e
>> >> >>> previous
>> >> >>> >> (6).
>> >> >>> >> > What would explain this sporadic behavior of version numbers=
?
>> >> >>> >> >
>> >> >>> >> > Thanks,
>> >> >>> >> > Peter
>> >> >>> >> >
>> >> >>> >>
>> >> >>> >>
>> >> ---------------------------------------------------------------------
>> >> >>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g
>> >> >>> >> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>> >> >>> >>
>> >> >>> >>
>> >> >>> >
>> >> >>>
>> >> >>>
>> ---------------------------------------------------------------------
>> >> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >>>
>> >> >>>
>> >> >>
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 20:16:21 2010
Return-Path: <java-user-return-45212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49903 invoked from network); 26 Feb 2010 20:16:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 20:16:20 -0000
Received: (qmail 1270 invoked by uid 500); 26 Feb 2010 20:16:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1233 invoked by uid 500); 26 Feb 2010 20:16:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1225 invoked by uid 99); 26 Feb 2010 20:16:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 20:16:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of peterlkeegan@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 20:16:09 +0000
Received: by pwi6 with SMTP id 6so296659pwi.35
        for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 12:15:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=5KRPKbl9qGO9rZ5JYgsLFYDszPjq12HYQaXMrNWRsPc=;
        b=Zk+96xrKUTufRFOL6ks9WSEgRRf9LaMQ7JBQPiHveekP9CsoF3umjpzU46cYPLiphW
         /vLeJdwpCLIrbuEzx7Zy2XxPMkz/DbDRMnT8+RJ3D8Pfg+Vvew4mmXwXFyNdr7NXVya1
         t2+Bl51Ay6nMPYtlVxv7sEUX2s7cFEBq6LQ94=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=vPTxLYP44ft/8kgQaopTw8zhkxr12ECl3v4EHZpuRzuBJhTc0RVKggKprWM4Jt2hAz
         vMy6R3tY7xRoEQ1tCYgYJ3OQYcEfQ2sjdyz4APG7LYiBKdvIUo5hXy8ZLCr2Wv4ean3u
         xxKuaicbIrL+VR9CN+RWiPvHrFGc8+8tl81hM=
MIME-Version: 1.0
Received: by 10.142.74.20 with SMTP id w20mr500099wfa.94.1267215347226; Fri, 
	26 Feb 2010 12:15:47 -0800 (PST)
In-Reply-To: <9ac0c6aa1002261211p4e83ac64n33824a83b6930d10@mail.gmail.com>
References: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
	 <e994873a1002220935q1394a3dau13fab93dc43fd293@mail.gmail.com>
	 <9ac0c6aa1002221130w3aa9c59dq2fe627e85c22bcf3@mail.gmail.com>
	 <e994873a1002221258y1cfba96atfb1fbb2c7dc65c90@mail.gmail.com>
	 <e994873a1002250722n5d0cf7e7xb6cc9b9d8b0ae5d8@mail.gmail.com>
	 <9ac0c6aa1002251013j55a5e6e9h4a7e5331d2951c1b@mail.gmail.com>
	 <e994873a1002251152i5baf6db2o2901ed63eaf441d3@mail.gmail.com>
	 <9ac0c6aa1002260940x2f326ad4ga7c254bd92ca3c7d@mail.gmail.com>
	 <e994873a1002261140o598856a7ge6a2d0ecf7604f19@mail.gmail.com>
	 <9ac0c6aa1002261211p4e83ac64n33824a83b6930d10@mail.gmail.com>
Date: Fri, 26 Feb 2010 15:15:47 -0500
Message-ID: <e994873a1002261215u41a64f7eid23df2be86f3617a@mail.gmail.com>
Subject: Re: IndexWriter.getReader.getVersion behavior
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e90cfda01d040480869098
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e90cfda01d040480869098
Content-Type: text/plain; charset=ISO-8859-1

Great, I'll give it a try.
Thanks!

On Fri, Feb 26, 2010 at 3:11 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Note that it's a BG merge (not commit)...
>
> You can use the new (as of 2.9 I think) IndexWriter.waitForMerges API?
>  If you call that, then call .getReader().getVersion(), then close &
> open the writer, I think (but you better test to be sure!) the next
> .getReader().getVersion() should always match.
>
> Mike
>
> On Fri, Feb 26, 2010 at 2:40 PM, Peter Keegan <peterlkeegan@gmail.com>
> wrote:
> > Is there a way for the application to wait for the BG commit to finish
> > before it calls IW.close? If so, would this prevent the extra version?
> The
> > extra version causes the app. to think that the external data it
> committed
> > is out of synch with the index, which requires the app to do extra
> > processing to re-synch.
> >
> > Thanks,
> > Peter
> >
> >
> > On Fri, Feb 26, 2010 at 12:40 PM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >> OK -- I can now see what happened.
> >>
> >> There was a merge still running, when you called IW.commit (Lucene
> >> Merge Thread #0).  Because IW.commit does not wait for BG merges to
> >> finish, but IW.close does (by default), this means you'll pick up an
> >> extra version whenever a merge is running when you call close.
> >>
> >> Mike
> >>
> >> On Thu, Feb 25, 2010 at 2:52 PM, Peter Keegan <peterlkeegan@gmail.com>
> >> wrote:
> >> > I'm pretty sure this output occurred when the version number skipped
> +1.
> >> > The line containing '============'. separates the close/open
> IndexWriter.
> >> >
> >> > IFD [Indexer]: setInfoStream
> >> >
> >>
> deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@646f9dd9
> >> > IW 9 [Indexer]: setInfoStream:
> >> > dir=org.apache.lucene.store.SimpleFSDirectory@<obfuscated
> >> > pathname>\lresumes1.search.main.1 autoCommit=false
> >> >
> >>
> mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@5be44512mergeScheduler
> >>
> =org.apache.lucene.index.ConcurrentMergeScheduler@6772cfdframBufferSizeMB
> >> =16.0
> >> > maxBufferedDocs=-1 maxBuffereDeleteTerms=-1
> >> > maxFieldLength=100000 index=_a:C9780 _b:C1204->_b _c:C717->_b
> >> _d:C1220->_d
> >> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
> >> > IW 9 [Indexer]: flush at getReader
> >> > IW 9 [Indexer]:   flush: segment=null docStoreSegment=null
> >> docStoreOffset=0
> >> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
> >> > numBufDelTerms=0
> >> > IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b _c:C717->_b
> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> >> _i:C703->_h
> >> > IW 9 [UpdWriterBuild : 9]: DW:   RAM: now flush @ usedMB=15.816
> >> > allocMB=15.816 deletesMB=0.203 triggerMB=16
> >> > IW 9 [UpdWriterBuild : 9]:   flush: segment=_j docStoreSegment=_j
> >> > docStoreOffset=0 flushDocs=true flushDeletes=false
> flushDocStores=false
> >> > numDocs=1456 numBufDelTerms=1456
> >> > IW 9 [UpdWriterBuild : 9]:   index before flush _a:C9780 _b:C1204->_b
> >> > _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f
> >> _h:C1291->_h
> >> > _i:C703->_h
> >> > IW 9 [UpdWriterBuild : 9]: DW: flush postings as segment _j
> numDocs=1456
> >> > IW 9 [UpdWriterBuild : 9]: DW:   oldRAMSize=16584704
> >> newFlushedSize=4969789
> >> > docs/MB=307.202 new/old=29.966%
> >> > IFD [UpdWriterBuild : 9]: now checkpoint "segments_b" [10 segments ;
> >> > isCommit = false]
> >> > IFD [UpdWriterBuild : 9]: now checkpoint "segments_b" [10 segments ;
> >> > isCommit = false]
> >> > IW 9 [UpdWriterBuild : 9]: LMP: findMerges: 10 segments
> >> > IW 9 [UpdWriterBuild : 9]: LMP:   level 6.863048 to 7.613048: 1
> segments
> >> > IW 9 [UpdWriterBuild : 9]: LMP:   level 6.2247195 to 6.696363: 9
> segments
> >> > IW 9 [UpdWriterBuild : 9]: CMS: now merge
> >> > IW 9 [UpdWriterBuild : 9]: CMS:   index: _a:C9780 _b:C1204->_b
> >> _c:C717->_b
> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> >> _i:C703->_h
> >> > _j:C1456->_j
> >> > IW 9 [UpdWriterBuild : 9]: CMS:   no more merges pending; now return
> >> > IW 9 [Indexer]: prepareCommit: flush
> >> > IW 9 [Indexer]:   flush: segment=_k docStoreSegment=_j
> >> docStoreOffset=1456
> >> > flushDocs=true flushDeletes=true flushDocStores=true numDocs=509
> >> > numBufDelTerms=509
> >> > IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b _c:C717->_b
> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> >> _i:C703->_h
> >> > _j:C1456->_j
> >> > IW 9 [Indexer]:   flush shared docStore segment _j
> >> > IW 9 [Indexer]: DW: closeDocStore: 2 files to flush to segment _j
> >> > numDocs=1965
> >> > IW 9 [Indexer]: DW: flush postings as segment _k numDocs=509
> >> > IW 9 [Indexer]: DW:   oldRAMSize=7483392 newFlushedSize=1854970
> >> > docs/MB=287.727 new/old=24.788%
> >> > IFD [Indexer]: now checkpoint "segments_b" [11 segments ; isCommit =
> >> false]
> >> > IW 9 [Indexer]: DW: apply 1965 buffered deleted terms and 0 deleted
> >> docIDs
> >> > and 0 deleted queries on 11 segments.
> >> > IFD [Indexer]: now checkpoint "segments_b" [11 segments ; isCommit =
> >> false]
> >> > IW 9 [Indexer]: LMP: findMerges: 11 segments
> >> > IW 9 [Indexer]: LMP:   level 6.863048 to 7.613048: 1 segments
> >> > IW 9 [Indexer]: LMP:   level 6.2247195 to 6.696363: 10 segments
> >> > IW 9 [Indexer]: LMP:     1 to 11: add this merge
> >> > IW 9 [Indexer]: add merge to pendingMerges: _b:C1204->_b _c:C717->_b
> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> >> _i:C703->_h
> >> > _j:C1456->_j _k:C509->_j [total 1 pending]
> >> > IW 9 [Indexer]: CMS: now merge
> >> > IW 9 [Indexer]: CMS:   index: _a:C9780 _b:C1204->_b _c:C717->_b
> >> _d:C1220->_d
> >> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
> >> _j:C1456->_j
> >> > _k:C509->_j
> >> > IW 9 [Indexer]: CMS:   consider merge _b:C1204->_b _c:C717->_b
> >> _d:C1220->_d
> >> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
> >> _j:C1456->_j
> >> > _k:C509->_j into _l [mergeDocStores]
> >> > IW 9 [Indexer]: CMS:     launch new thread [Lucene Merge Thread #0]
> >> > IW 9 [Indexer]: CMS:   no more merges pending; now return
> >> > IW 9 [Indexer]: startCommit(): start sizeInBytes=0
> >> > IW 9 [Indexer]: startCommit index=_a:C9780 _b:C1204->_b _c:C717->_b
> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> >> _i:C703->_h
> >> > _j:C1456->_j _k:C509->_j changeCount=7
> >> > IW 9 [Lucene Merge Thread #0]: CMS:   merge thread: start
> >> > IW 9 [Indexer]: now sync _k.fnm
> >> > IW 9 [Lucene Merge Thread #0]: now merge
> >> >  merge=_b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f
> >> > _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j _k:C509->_j into _l
> >> > [mergeDocStores]
> >> >  merge=org.apache.lucene.index.MergePolicy$OneMerge@5203ef34
> >> >  index=_a:C9780 _b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d
> >> > _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j
> >> _k:C509->_j
> >> > IW 9 [Lucene Merge Thread #0]: merging _b:C1204->_b _c:C717->_b
> >> _d:C1220->_d
> >> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
> >> _j:C1456->_j
> >> > _k:C509->_j into _l [mergeDocStores]
> >> > IW 9 [Indexer]: now sync _k.tii
> >> > IW 9 [Indexer]: now sync _k.tis
> >> > IW 9 [Lucene Merge Thread #0]: merge: total 9909 docs
> >> > IW 9 [Indexer]: now sync _j.tis
> >> > IW 9 [Indexer]: now sync _j.tii
> >> > IW 9 [Indexer]: now sync _j.fdx
> >> > IW 9 [Indexer]: now sync _j.fdt
> >> > IW 9 [Indexer]: now sync _k.prx
> >> > IW 9 [Indexer]: now sync _k.nrm
> >> > IW 9 [Indexer]: now sync _j.nrm
> >> > IW 9 [Indexer]: now sync _j.prx
> >> > IW 9 [Indexer]: now sync _j.fnm
> >> > IW 9 [Indexer]: now sync _k.frq
> >> > IW 9 [Indexer]: now sync _j.frq
> >> > IW 9 [Indexer]: done all syncs
> >> > IW 9 [Indexer]: flush at getReader
> >> > IW 9 [Indexer]:   flush: segment=null docStoreSegment=_k
> docStoreOffset=0
> >> > flushDocs=false flushDeletes=true flushDocStores=true numDocs=0
> >> > numBufDelTerms=0
> >> > IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b _c:C717->_b
> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> >> _i:C703->_h
> >> > _j:C1456->_j _k:C509->_j
> >> > IW 9 [Indexer]:   flush shared docStore segment _k
> >> > IW 9 [Indexer]: DW: closeDocStore: 0 files to flush to segment _k
> >> numDocs=0
> >> > IW 9 [Indexer]: commit: start
> >> > IW 9 [Indexer]: commit: already prepared
> >> > IW 9 [Indexer]: commit: pendingCommit != null
> >> > IW 9 [Indexer]: commit: wrote segments file "segments_c"
> >> > IFD [Indexer]: now checkpoint "segments_c" [11 segments ; isCommit =
> >> true]
> >> > IFD [Indexer]: deleteCommits: now decRef commit "segments_b"
> >> > IFD [Indexer]: delete "segments_b"
> >> > IW 9 [Indexer]: commit: done
> >> > IW 9 [Indexer]: flush at getReader
> >> > IW 9 [Indexer]:   flush: segment=null docStoreSegment=null
> >> docStoreOffset=0
> >> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
> >> > numBufDelTerms=0
> >> > IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b _c:C717->_b
> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> >> _i:C703->_h
> >> > _j:C1456->_j _k:C509->_j
> >> > IW 9 [Indexer]: now flush at close
> >> > IW 9 [Indexer]:   flush: segment=null docStoreSegment=null
> >> docStoreOffset=0
> >> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
> >> > numBufDelTerms=0
> >> > IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b _c:C717->_b
> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> >> _i:C703->_h
> >> > _j:C1456->_j _k:C509->_j
> >> > IW 9 [Indexer]: CMS: now merge
> >> > IW 9 [Indexer]: CMS:   index: _a:C9780 _b:C1204->_b _c:C717->_b
> >> _d:C1220->_d
> >> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
> >> _j:C1456->_j
> >> > _k:C509->_j
> >> > IW 9 [Indexer]: CMS:   no more merges pending; now return
> >> > IW 9 [Lucene Merge Thread #0]: commitMerge: _b:C1204->_b _c:C717->_b
> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> >> _i:C703->_h
> >> > _j:C1456->_j _k:C509->_j into _l [mergeDocStores] index=_a:C9780
> >> > _b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f
> >> _g:C858->_f
> >> > _h:C1291->_h _i:C703->_h _j:C1456->_j _k:C509->_j
> >> > IW 9 [Lucene Merge Thread #0]: commitMergeDeletes _b:C1204->_b
> >> _c:C717->_b
> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
> >> _i:C703->_h
> >> > _j:C1456->_j _k:C509->_j into _l [mergeDocStores]
> >> > IFD [Lucene Merge Thread #0]: now checkpoint "segments_c" [2 segments
> ;
> >> > isCommit = false]
> >> > IFD [Lucene Merge Thread #0]: now checkpoint "segments_c" [2 segments
> ;
> >> > isCommit = false]
> >> > IW 9 [Lucene Merge Thread #0]: CMS:   merge thread: done
> >> > IW 9 [Indexer]: now call final commit()
> >> > IW 9 [Indexer]: startCommit(): start sizeInBytes=0
> >> > IW 9 [Indexer]: startCommit index=_a:C9780 _l:C9909 changeCount=8
> >> > IW 9 [Indexer]: now sync _l.nrm
> >> > IW 9 [Indexer]: now sync _l.fnm
> >> > IW 9 [Indexer]: now sync _l.prx
> >> > IW 9 [Indexer]: now sync _l.frq
> >> > IW 9 [Indexer]: now sync _l.tis
> >> > IW 9 [Indexer]: now sync _l.fdx
> >> > IW 9 [Indexer]: now sync _l.fdt
> >> > IW 9 [Indexer]: now sync _l.tii
> >> > IW 9 [Indexer]: done all syncs
> >> > IW 9 [Indexer]: commit: pendingCommit != null
> >> > IW 9 [Indexer]: commit: wrote segments file "segments_d"
> >> > IFD [Indexer]: now checkpoint "segments_d" [2 segments ; isCommit =
> true]
> >> > IFD [Indexer]: deleteCommits: now decRef commit "segments_c"
> >> > IFD [Indexer]: delete "_h.prx"
> >> > IFD [Indexer]: delete "_f.tis"
> >> > IFD [Indexer]: delete "_g.tis"
> >> > IFD [Indexer]: delete "_d.tii"
> >> > IFD [Indexer]: delete "_e.frq"
> >> > IFD [Indexer]: delete "_k.fnm"
> >> > IFD [Indexer]: delete "_c.tii"
> >> > IFD [Indexer]: delete "_h.nrm"
> >> > IFD [Indexer]: delete "_i.tis"
> >> > IFD [Indexer]: delete "_k.tii"
> >> > IFD [Indexer]: delete "_h.fdt"
> >> > IFD [Indexer]: delete "_c.tis"
> >> > IFD [Indexer]: delete "_g.tii"
> >> > IFD [Indexer]: delete "_h.fdx"
> >> > IFD [Indexer]: delete "_c.nrm"
> >> > IFD [Indexer]: delete "_i.tii"
> >> > IFD [Indexer]: delete "_d.tis"
> >> > IFD [Indexer]: delete "_f.tii"
> >> > IFD [Indexer]: delete "_e.fnm"
> >> > IFD [Indexer]: delete "_k.tis"
> >> > IFD [Indexer]: delete "_d.frq"
> >> > IFD [Indexer]: delete "_f.nrm"
> >> > IFD [Indexer]: delete "_h.fnm"
> >> > IFD [Indexer]: delete "segments_c"
> >> > IFD [Indexer]: delete "_c.prx"
> >> > IFD [Indexer]: delete "_d.fnm"
> >> > IFD [Indexer]: delete "_h.frq"
> >> > IFD [Indexer]: delete "_h.tis"
> >> > IFD [Indexer]: delete "_f.fdt"
> >> > IFD [Indexer]: delete "_j.tis"
> >> > IFD [Indexer]: delete "_f.fdx"
> >> > IFD [Indexer]: delete "_g.nrm"
> >> > IFD [Indexer]: delete "_f.prx"
> >> > IFD [Indexer]: delete "_j.tii"
> >> > IFD [Indexer]: delete "_h.tii"
> >> > IFD [Indexer]: delete "_e.prx"
> >> > IFD [Indexer]: delete "_c.frq"
> >> > IFD [Indexer]: delete "_i.prx"
> >> > IFD [Indexer]: delete "_j.fdx"
> >> > IFD [Indexer]: delete "_i.nrm"
> >> > IFD [Indexer]: delete "_j.fdt"
> >> > IFD [Indexer]: delete "_k.prx"
> >> > IFD [Indexer]: delete "_b.nrm"
> >> > IFD [Indexer]: delete "_e.tis"
> >> > IFD [Indexer]: delete "_e.tii"
> >> > IFD [Indexer]: delete "_g.fnm"
> >> > IFD [Indexer]: delete "_k.nrm"
> >> > IFD [Indexer]: delete "_j.nrm"
> >> > IFD [Indexer]: delete "_j.prx"
> >> > IFD [Indexer]: delete "_e.nrm"
> >> > IFD [Indexer]: delete "_g.prx"
> >> > IFD [Indexer]: delete "_b.prx"
> >> > IFD [Indexer]: delete "_i.frq"
> >> > IFD [Indexer]: delete "_b.tis"
> >> > IFD [Indexer]: delete "_d.prx"
> >> > IFD [Indexer]: delete "_g.frq"
> >> > IFD [Indexer]: delete "_d.fdx"
> >> > IFD [Indexer]: delete "_b.tii"
> >> > IFD [Indexer]: delete "_b.frq"
> >> > IFD [Indexer]: delete "_d.fdt"
> >> > IFD [Indexer]: delete "_f.fnm"
> >> > IFD [Indexer]: delete "_j.fnm"
> >> > IFD [Indexer]: delete "_b.fnm"
> >> > IFD [Indexer]: delete "_d.nrm"
> >> > IFD [Indexer]: delete "_b.fdt"
> >> > IFD [Indexer]: delete "_k.frq"
> >> > IFD [Indexer]: delete "_c.fnm"
> >> > IFD [Indexer]: delete "_j.frq"
> >> > IFD [Indexer]: delete "_i.fnm"
> >> > IFD [Indexer]: delete "_f.frq"
> >> > IFD [Indexer]: delete "_b.fdx"
> >> > IW 9 [Indexer]: commit: done
> >> > IW 9 [Indexer]: at close: _a:C9780 _l:C9909
> >> >
> >> > =====================================================
> >> >
> >> > IFD [Indexer]: setInfoStream
> >> >
> >>
> deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@68d349c1
> >> > IW 10 [Indexer]: setInfoStream:
> >> > dir=org.apache.lucene.store.SimpleFSDirectory@<obfuscated
> >> > pathname>\lresumes1.search.main.1 autoCommit=false
> >> >
> >>
> mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@78f53abmergeScheduler
> >>
> =org.apache.lucene.index.ConcurrentMergeScheduler@52be036dramBufferSizeMB
> >> =16.0
> >> > maxBufferedDocs=-1 maxBuffereDeleteTerms=-1
> >> > maxFieldLength=100000 index=_a:C9780 _l:C9909
> >> > IW 10 [Indexer]: flush at getReader
> >> > IW 10 [Indexer]:   flush: segment=null docStoreSegment=null
> >> docStoreOffset=0
> >> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
> >> > numBufDelTerms=0
> >> > IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909
> >> > IW 10 [UpdWriterBuild : 10]: DW:   RAM: now flush @ usedMB=15.789
> >> > allocMB=15.789 deletesMB=0.212 triggerMB=16
> >> > IW 10 [UpdWriterBuild : 10]:   flush: segment=_m docStoreSegment=_m
> >> > docStoreOffset=0 flushDocs=true flushDeletes=false
> flushDocStores=false
> >> > numDocs=1526 numBufDelTerms=1526
> >> > IW 10 [UpdWriterBuild : 10]:   index before flush _a:C9780 _l:C9909
> >> > IW 10 [UpdWriterBuild : 10]: DW: flush postings as segment _m
> >> numDocs=1526
> >> > IW 10 [UpdWriterBuild : 10]: DW:   oldRAMSize=16556032
> >> > newFlushedSize=4788823 docs/MB=334.138 new/old=28.925%
> >> > IFD [UpdWriterBuild : 10]: now checkpoint "segments_d" [3 segments ;
> >> > isCommit = false]
> >> > IFD [UpdWriterBuild : 10]: now checkpoint "segments_d" [3 segments ;
> >> > isCommit = false]
> >> > IW 10 [UpdWriterBuild : 10]: LMP: findMerges: 3 segments
> >> > IW 10 [UpdWriterBuild : 10]: LMP:   level 6.8642592 to 7.6142592: 2
> >> segments
> >> > IW 10 [UpdWriterBuild : 10]: LMP:   level 6.2247195 to 6.6802545: 1
> >> segments
> >> > IW 10 [UpdWriterBuild : 10]: CMS: now merge
> >> > IW 10 [UpdWriterBuild : 10]: CMS:   index: _a:C9780 _l:C9909
> _m:C1526->_m
> >> > IW 10 [UpdWriterBuild : 10]: CMS:   no more merges pending; now return
> >> > IW 10 [Indexer]: prepareCommit: flush
> >> > IW 10 [Indexer]:   flush: segment=_n docStoreSegment=_m
> >> docStoreOffset=1526
> >> > flushDocs=true flushDeletes=true flushDocStores=true numDocs=501
> >> > numBufDelTerms=501
> >> > IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909 _m:C1526->_m
> >> > IW 10 [Indexer]:   flush shared docStore segment _m
> >> > IW 10 [Indexer]: DW: closeDocStore: 2 files to flush to segment _m
> >> > numDocs=2027
> >> > IW 10 [Indexer]: DW: flush postings as segment _n numDocs=501
> >> > IW 10 [Indexer]: DW:   oldRAMSize=6927360 newFlushedSize=1659342
> >> > docs/MB=316.593 new/old=23.953%
> >> > IFD [Indexer]: now checkpoint "segments_d" [4 segments ; isCommit =
> >> false]
> >> > IW 10 [Indexer]: DW: apply 2027 buffered deleted terms and 0 deleted
> >> docIDs
> >> > and 0 deleted queries on 4 segments.
> >> > IFD [Indexer]: now checkpoint "segments_d" [4 segments ; isCommit =
> >> false]
> >> > IW 10 [Indexer]: LMP: findMerges: 4 segments
> >> > IW 10 [Indexer]: LMP:   level 6.8642592 to 7.6142592: 2 segments
> >> > IW 10 [Indexer]: LMP:   level 6.2247195 to 6.6802545: 1 segments
> >> > IW 10 [Indexer]: LMP:   level -1.0 to 6.220011: 1 segments
> >> > IW 10 [Indexer]: CMS: now merge
> >> > IW 10 [Indexer]: CMS:   index: _a:C9780 _l:C9909 _m:C1526->_m
> _n:C501->_m
> >> > IW 10 [Indexer]: CMS:   no more merges pending; now return
> >> > IW 10 [Indexer]: startCommit(): start sizeInBytes=0
> >> > IW 10 [Indexer]: startCommit index=_a:C9780 _l:C9909 _m:C1526->_m
> >> > _n:C501->_m changeCount=6
> >> > IW 10 [Indexer]: now sync _m.frq
> >> > IW 10 [Indexer]: now sync _m.prx
> >> > IW 10 [Indexer]: now sync _n.tis
> >> > IW 10 [Indexer]: now sync _m.tis
> >> > IW 10 [Indexer]: now sync _n.frq
> >> > IW 10 [Indexer]: now sync _n.tii
> >> > IW 10 [Indexer]: now sync _m.tii
> >> > IW 10 [Indexer]: now sync _m.fnm
> >> > IW 10 [Indexer]: now sync _n.fnm
> >> > IW 10 [Indexer]: now sync _n.nrm
> >> > IW 10 [Indexer]: now sync _n.prx
> >> > IW 10 [Indexer]: now sync _m.nrm
> >> > IW 10 [Indexer]: now sync _m.fdt
> >> > IW 10 [Indexer]: now sync _m.fdx
> >> > IW 10 [Indexer]: done all syncs
> >> > IW 10 [Indexer]: flush at getReader
> >> > IW 10 [Indexer]:   flush: segment=null docStoreSegment=_n
> >> docStoreOffset=0
> >> > flushDocs=false flushDeletes=true flushDocStores=true numDocs=0
> >> > numBufDelTerms=0
> >> > IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909 _m:C1526->_m
> >> > _n:C501->_m
> >> > IW 10 [Indexer]:   flush shared docStore segment _n
> >> > IW 10 [Indexer]: DW: closeDocStore: 0 files to flush to segment _n
> >> numDocs=0
> >> > IW 10 [Indexer]: commit: start
> >> > IW 10 [Indexer]: commit: already prepared
> >> > IW 10 [Indexer]: commit: pendingCommit != null
> >> > IW 10 [Indexer]: commit: wrote segments file "segments_e"
> >> > IFD [Indexer]: now checkpoint "segments_e" [4 segments ; isCommit =
> true]
> >> > IFD [Indexer]: deleteCommits: now decRef commit "segments_d"
> >> > IFD [Indexer]: delete "segments_d"
> >> > IW 10 [Indexer]: commit: done
> >> > IW 10 [Indexer]: flush at getReader
> >> > IW 10 [Indexer]:   flush: segment=null docStoreSegment=null
> >> docStoreOffset=0
> >> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
> >> > numBufDelTerms=0
> >> > IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909 _m:C1526->_m
> >> > _n:C501->_m
> >> > IW 10 [Indexer]: now flush at close
> >> > IW 10 [Indexer]:   flush: segment=null docStoreSegment=null
> >> docStoreOffset=0
> >> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
> >> > numBufDelTerms=0
> >> > IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909 _m:C1526->_m
> >> > _n:C501->_m
> >> > IW 10 [Indexer]: CMS: now merge
> >> > IW 10 [Indexer]: CMS:   index: _a:C9780 _l:C9909 _m:C1526->_m
> _n:C501->_m
> >> > IW 10 [Indexer]: CMS:   no more merges pending; now return
> >> > IW 10 [Indexer]: now call final commit()
> >> > IW 10 [Indexer]: startCommit(): start sizeInBytes=0
> >> > IW 10 [Indexer]:   skip startCommit(): no changes pending
> >> > IW 10 [Indexer]: commit: pendingCommit == null; skip
> >> > IW 10 [Indexer]: commit: done
> >> > IW 10 [Indexer]: at close: _a:C9780 _l:C9909 _m:C1526->_m _n:C501->_m
> >> >
> >> >
> >> > Peter
> >> >
> >> > On Thu, Feb 25, 2010 at 1:13 PM, Michael McCandless <
> >> > lucene@mikemccandless.com> wrote:
> >> >
> >> >> Do you know the place in the infoStream output where you got a reader
> >> >> with the wrong (unexplained extra +1) version?  If so, can you post
> >> >> the infoStream output up to that point?
> >> >>
> >> >> Mike
> >> >>
> >> >> On Thu, Feb 25, 2010 at 10:22 AM, Peter Keegan <
> peterlkeegan@gmail.com>
> >> >> wrote:
> >> >> > I've reproduced this and I have a bunch of infoStream log files.
> Since
> >> >> the
> >> >> > messages have no timestamps, it's hard to tell where the relevant
> >> entries
> >> >> > are. What should I be looking for?
> >> >> >
> >> >> > Peter
> >> >> >
> >> >> > On Mon, Feb 22, 2010 at 3:58 PM, Peter Keegan <
> peterlkeegan@gmail.com
> >> >> >wrote:
> >> >> >
> >> >> >> I'm pretty sure there are flushes and segment merges going on, but
> as
> >> >> you
> >> >> >> said, that shouldn't affect the version increment. I'll see what I
> >> can
> >> >> do to
> >> >> >> get infoStream output.
> >> >> >>
> >> >> >> Thanks,
> >> >> >> Peter
> >> >> >>
> >> >> >>
> >> >> >> On Mon, Feb 22, 2010 at 2:30 PM, Michael McCandless <
> >> >> >> lucene@mikemccandless.com> wrote:
> >> >> >>
> >> >> >>> Well I'm at a loss then.  The version should only increment on
> >> commit.
> >> >> >>>
> >> >> >>> Can you make it all happen when infoStream is on, and post back?
> >> >> >>>
> >> >> >>> Mike
> >> >> >>>
> >> >> >>> On Mon, Feb 22, 2010 at 12:35 PM, Peter Keegan <
> >> peterlkeegan@gmail.com
> >> >> >
> >> >> >>> wrote:
> >> >> >>> > Only one writer thread and one writer process.
> >> >> >>> > I'm calling IndexWriter(Directory d, Analyzer a, boolean
> create,
> >> >> >>> > MaxFieldLength mfl), which sets autocommit=false.
> >> >> >>> >
> >> >> >>> > Peter
> >> >> >>> >
> >> >> >>> > On Mon, Feb 22, 2010 at 12:24 PM, Michael McCandless <
> >> >> >>> > lucene@mikemccandless.com> wrote:
> >> >> >>> >
> >> >> >>> >> That's curious.
> >> >> >>> >>
> >> >> >>> >> It's only on prepareCommit (or, commit, if you didn't first
> >> prepare,
> >> >> >>> >> since that will call prepareCommit internally) that this
> version
> >> >> >>> >> should increase.
> >> >> >>> >>
> >> >> >>> >> Is there only 1 thread doing this?
> >> >> >>> >>
> >> >> >>> >> Oh, and, are you passing false for autoCommit?
> >> >> >>> >>
> >> >> >>> >> Mike
> >> >> >>> >>
> >> >> >>> >> On Mon, Feb 22, 2010 at 11:43 AM, Peter Keegan <
> >> >> peterlkeegan@gmail.com
> >> >> >>> >
> >> >> >>> >> wrote:
> >> >> >>> >> > Using Lucene 2.9.1, I have the following pseudocode which
> gets
> >> >> >>> repeated
> >> >> >>> >> at
> >> >> >>> >> > regular intervals:
> >> >> >>> >> >
> >> >> >>> >> > 1. FSDirectory dir = FSDirectory.open(java.io.File);
> >> >> >>> >> > 2. dir.setLockFactory(new SingleInstanceLockFactory());
> >> >> >>> >> > 3. IndexWriter writer = new IndexWriter(dir, Analyzer,
> false,
> >> >> >>> >> maxFieldLen)
> >> >> >>> >> > 4. writer.getReader().getVersion();
> >> >> >>> >> > 5. writer.prepareCommit();
> >> >> >>> >> > 6. writer.getReader().getVersion();
> >> >> >>> >> > 7. writer.commit();
> >> >> >>> >> > 8. writer.close();
> >> >> >>> >> >
> >> >> >>> >> > I'm using the version number to keep external data in synch
> >> with
> >> >> the
> >> >> >>> >> index.
> >> >> >>> >> > Usually, the version number from (6) is 1 greater than from
> (4)
> >> >> and
> >> >> >>> the
> >> >> >>> >> > version from (4) equals the version from the previous (6).
> At
> >> >> least
> >> >> >>> once
> >> >> >>> >> a
> >> >> >>> >> > day, however, the version from (4) is 1 greater than from
> the
> >> >> >>> previous
> >> >> >>> >> (6).
> >> >> >>> >> > What would explain this sporadic behavior of version
> numbers?
> >> >> >>> >> >
> >> >> >>> >> > Thanks,
> >> >> >>> >> > Peter
> >> >> >>> >> >
> >> >> >>> >>
> >> >> >>> >>
> >> >> ---------------------------------------------------------------------
> >> >> >>> >> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> >> >> >>> >> For additional commands, e-mail:
> >> java-user-help@lucene.apache.org
> >> >> >>> >>
> >> >> >>> >>
> >> >> >>> >
> >> >> >>>
> >> >> >>>
> >> ---------------------------------------------------------------------
> >> >> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> >>> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >> >> >>>
> >> >> >>>
> >> >> >>
> >> >> >
> >> >>
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636e90cfda01d040480869098--

From java-user-return-45213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 20:26:41 2010
Return-Path: <java-user-return-45213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51405 invoked from network); 26 Feb 2010 20:26:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 20:26:41 -0000
Received: (qmail 10484 invoked by uid 500); 26 Feb 2010 20:26:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10453 invoked by uid 500); 26 Feb 2010 20:26:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10445 invoked by uid 99); 26 Feb 2010 20:26:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 20:26:39 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.216.191 as permitted sender)
Received: from [209.85.216.191] (HELO mail-px0-f191.google.com) (209.85.216.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 20:26:32 +0000
Received: by pxi29 with SMTP id 29so169679pxi.5
        for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 12:26:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=S4s57zXJVSoI4nXXhqqhr5pyZmySHSZJu3zEYDFE0WQ=;
        b=KwgPhDHefPaIwwSzbfeTYTA7o700zXsfUnzmNnfB/z3IvV+tL10WdKQKrnZPBH/+Xx
         6vuF7OYWEERU/EPwNEgvpt95up4Y0hRaOeivhV5wbvNs0p1iO58Jek+3crxkn7yZq7LK
         HMhyaCOZtONjGw0xm1qw8LwpdPl001RGFKJdY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ZByG5C/OifoITjxWyFN/aTqmwY0b6ATlY1uEr1fd7rUuYyNF2YlrfFfrljouTptY1j
         aArtCAWU3ubZZhMZ5b64RzA3KsdlLPdxzevAKt62LeJ/pxFgkytgaSXra/QvNSHz9txS
         pDw1aJUiXWh23lJnOCJlHu1+7r00Go00z1Xhc=
MIME-Version: 1.0
Received: by 10.142.8.25 with SMTP id 25mr518978wfh.18.1267215971922; Fri, 26 
	Feb 2010 12:26:11 -0800 (PST)
In-Reply-To: <e994873a1002261215u41a64f7eid23df2be86f3617a@mail.gmail.com>
References: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
	 <9ac0c6aa1002221130w3aa9c59dq2fe627e85c22bcf3@mail.gmail.com>
	 <e994873a1002221258y1cfba96atfb1fbb2c7dc65c90@mail.gmail.com>
	 <e994873a1002250722n5d0cf7e7xb6cc9b9d8b0ae5d8@mail.gmail.com>
	 <9ac0c6aa1002251013j55a5e6e9h4a7e5331d2951c1b@mail.gmail.com>
	 <e994873a1002251152i5baf6db2o2901ed63eaf441d3@mail.gmail.com>
	 <9ac0c6aa1002260940x2f326ad4ga7c254bd92ca3c7d@mail.gmail.com>
	 <e994873a1002261140o598856a7ge6a2d0ecf7604f19@mail.gmail.com>
	 <9ac0c6aa1002261211p4e83ac64n33824a83b6930d10@mail.gmail.com>
	 <e994873a1002261215u41a64f7eid23df2be86f3617a@mail.gmail.com>
Date: Fri, 26 Feb 2010 15:26:11 -0500
Message-ID: <e994873a1002261226q2590699bm895885e173563924@mail.gmail.com>
Subject: Re: IndexWriter.getReader.getVersion behavior
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502b259dc3449048086b5c3

--00504502b259dc3449048086b5c3
Content-Type: text/plain; charset=ISO-8859-1

Can  IW.waitForMerges be called between 'prepareCommit' and 'commit'? That's
when the app calls 'getReader' to create external data.

Peter

On Fri, Feb 26, 2010 at 3:15 PM, Peter Keegan <peterlkeegan@gmail.com>wrote:

> Great, I'll give it a try.
> Thanks!
>
>
> On Fri, Feb 26, 2010 at 3:11 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> Note that it's a BG merge (not commit)...
>>
>> You can use the new (as of 2.9 I think) IndexWriter.waitForMerges API?
>>  If you call that, then call .getReader().getVersion(), then close &
>> open the writer, I think (but you better test to be sure!) the next
>> .getReader().getVersion() should always match.
>>
>> Mike
>>
>> On Fri, Feb 26, 2010 at 2:40 PM, Peter Keegan <peterlkeegan@gmail.com>
>> wrote:
>> > Is there a way for the application to wait for the BG commit to finish
>> > before it calls IW.close? If so, would this prevent the extra version?
>> The
>> > extra version causes the app. to think that the external data it
>> committed
>> > is out of synch with the index, which requires the app to do extra
>> > processing to re-synch.
>> >
>> > Thanks,
>> > Peter
>> >
>> >
>> > On Fri, Feb 26, 2010 at 12:40 PM, Michael McCandless <
>> > lucene@mikemccandless.com> wrote:
>> >
>> >> OK -- I can now see what happened.
>> >>
>> >> There was a merge still running, when you called IW.commit (Lucene
>> >> Merge Thread #0).  Because IW.commit does not wait for BG merges to
>> >> finish, but IW.close does (by default), this means you'll pick up an
>> >> extra version whenever a merge is running when you call close.
>> >>
>> >> Mike
>> >>
>> >> On Thu, Feb 25, 2010 at 2:52 PM, Peter Keegan <peterlkeegan@gmail.com>
>> >> wrote:
>> >> > I'm pretty sure this output occurred when the version number skipped
>> +1.
>> >> > The line containing '============'. separates the close/open
>> IndexWriter.
>> >> >
>> >> > IFD [Indexer]: setInfoStream
>> >> >
>> >>
>> deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@646f9dd9
>> >> > IW 9 [Indexer]: setInfoStream:
>> >> > dir=org.apache.lucene.store.SimpleFSDirectory@<obfuscated
>> >> > pathname>\lresumes1.search.main.1 autoCommit=false
>> >> >
>> >>
>> mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@5be44512mergeScheduler
>> >>
>> =org.apache.lucene.index.ConcurrentMergeScheduler@6772cfdframBufferSizeMB
>> >> =16.0
>> >> > maxBufferedDocs=-1 maxBuffereDeleteTerms=-1
>> >> > maxFieldLength=100000 index=_a:C9780 _b:C1204->_b _c:C717->_b
>> >> _d:C1220->_d
>> >> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
>> >> > IW 9 [Indexer]: flush at getReader
>> >> > IW 9 [Indexer]:   flush: segment=null docStoreSegment=null
>> >> docStoreOffset=0
>> >> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
>> >> > numBufDelTerms=0
>> >> > IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b
>> _c:C717->_b
>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> >> _i:C703->_h
>> >> > IW 9 [UpdWriterBuild : 9]: DW:   RAM: now flush @ usedMB=15.816
>> >> > allocMB=15.816 deletesMB=0.203 triggerMB=16
>> >> > IW 9 [UpdWriterBuild : 9]:   flush: segment=_j docStoreSegment=_j
>> >> > docStoreOffset=0 flushDocs=true flushDeletes=false
>> flushDocStores=false
>> >> > numDocs=1456 numBufDelTerms=1456
>> >> > IW 9 [UpdWriterBuild : 9]:   index before flush _a:C9780 _b:C1204->_b
>> >> > _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f
>> >> _h:C1291->_h
>> >> > _i:C703->_h
>> >> > IW 9 [UpdWriterBuild : 9]: DW: flush postings as segment _j
>> numDocs=1456
>> >> > IW 9 [UpdWriterBuild : 9]: DW:   oldRAMSize=16584704
>> >> newFlushedSize=4969789
>> >> > docs/MB=307.202 new/old=29.966%
>> >> > IFD [UpdWriterBuild : 9]: now checkpoint "segments_b" [10 segments ;
>> >> > isCommit = false]
>> >> > IFD [UpdWriterBuild : 9]: now checkpoint "segments_b" [10 segments ;
>> >> > isCommit = false]
>> >> > IW 9 [UpdWriterBuild : 9]: LMP: findMerges: 10 segments
>> >> > IW 9 [UpdWriterBuild : 9]: LMP:   level 6.863048 to 7.613048: 1
>> segments
>> >> > IW 9 [UpdWriterBuild : 9]: LMP:   level 6.2247195 to 6.696363: 9
>> segments
>> >> > IW 9 [UpdWriterBuild : 9]: CMS: now merge
>> >> > IW 9 [UpdWriterBuild : 9]: CMS:   index: _a:C9780 _b:C1204->_b
>> >> _c:C717->_b
>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> >> _i:C703->_h
>> >> > _j:C1456->_j
>> >> > IW 9 [UpdWriterBuild : 9]: CMS:   no more merges pending; now return
>> >> > IW 9 [Indexer]: prepareCommit: flush
>> >> > IW 9 [Indexer]:   flush: segment=_k docStoreSegment=_j
>> >> docStoreOffset=1456
>> >> > flushDocs=true flushDeletes=true flushDocStores=true numDocs=509
>> >> > numBufDelTerms=509
>> >> > IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b
>> _c:C717->_b
>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> >> _i:C703->_h
>> >> > _j:C1456->_j
>> >> > IW 9 [Indexer]:   flush shared docStore segment _j
>> >> > IW 9 [Indexer]: DW: closeDocStore: 2 files to flush to segment _j
>> >> > numDocs=1965
>> >> > IW 9 [Indexer]: DW: flush postings as segment _k numDocs=509
>> >> > IW 9 [Indexer]: DW:   oldRAMSize=7483392 newFlushedSize=1854970
>> >> > docs/MB=287.727 new/old=24.788%
>> >> > IFD [Indexer]: now checkpoint "segments_b" [11 segments ; isCommit =
>> >> false]
>> >> > IW 9 [Indexer]: DW: apply 1965 buffered deleted terms and 0 deleted
>> >> docIDs
>> >> > and 0 deleted queries on 11 segments.
>> >> > IFD [Indexer]: now checkpoint "segments_b" [11 segments ; isCommit =
>> >> false]
>> >> > IW 9 [Indexer]: LMP: findMerges: 11 segments
>> >> > IW 9 [Indexer]: LMP:   level 6.863048 to 7.613048: 1 segments
>> >> > IW 9 [Indexer]: LMP:   level 6.2247195 to 6.696363: 10 segments
>> >> > IW 9 [Indexer]: LMP:     1 to 11: add this merge
>> >> > IW 9 [Indexer]: add merge to pendingMerges: _b:C1204->_b _c:C717->_b
>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> >> _i:C703->_h
>> >> > _j:C1456->_j _k:C509->_j [total 1 pending]
>> >> > IW 9 [Indexer]: CMS: now merge
>> >> > IW 9 [Indexer]: CMS:   index: _a:C9780 _b:C1204->_b _c:C717->_b
>> >> _d:C1220->_d
>> >> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
>> >> _j:C1456->_j
>> >> > _k:C509->_j
>> >> > IW 9 [Indexer]: CMS:   consider merge _b:C1204->_b _c:C717->_b
>> >> _d:C1220->_d
>> >> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
>> >> _j:C1456->_j
>> >> > _k:C509->_j into _l [mergeDocStores]
>> >> > IW 9 [Indexer]: CMS:     launch new thread [Lucene Merge Thread #0]
>> >> > IW 9 [Indexer]: CMS:   no more merges pending; now return
>> >> > IW 9 [Indexer]: startCommit(): start sizeInBytes=0
>> >> > IW 9 [Indexer]: startCommit index=_a:C9780 _b:C1204->_b _c:C717->_b
>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> >> _i:C703->_h
>> >> > _j:C1456->_j _k:C509->_j changeCount=7
>> >> > IW 9 [Lucene Merge Thread #0]: CMS:   merge thread: start
>> >> > IW 9 [Indexer]: now sync _k.fnm
>> >> > IW 9 [Lucene Merge Thread #0]: now merge
>> >> >  merge=_b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f
>> >> > _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j _k:C509->_j into _l
>> >> > [mergeDocStores]
>> >> >  merge=org.apache.lucene.index.MergePolicy$OneMerge@5203ef34
>> >> >  index=_a:C9780 _b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d
>> >> > _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j
>> >> _k:C509->_j
>> >> > IW 9 [Lucene Merge Thread #0]: merging _b:C1204->_b _c:C717->_b
>> >> _d:C1220->_d
>> >> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
>> >> _j:C1456->_j
>> >> > _k:C509->_j into _l [mergeDocStores]
>> >> > IW 9 [Indexer]: now sync _k.tii
>> >> > IW 9 [Indexer]: now sync _k.tis
>> >> > IW 9 [Lucene Merge Thread #0]: merge: total 9909 docs
>> >> > IW 9 [Indexer]: now sync _j.tis
>> >> > IW 9 [Indexer]: now sync _j.tii
>> >> > IW 9 [Indexer]: now sync _j.fdx
>> >> > IW 9 [Indexer]: now sync _j.fdt
>> >> > IW 9 [Indexer]: now sync _k.prx
>> >> > IW 9 [Indexer]: now sync _k.nrm
>> >> > IW 9 [Indexer]: now sync _j.nrm
>> >> > IW 9 [Indexer]: now sync _j.prx
>> >> > IW 9 [Indexer]: now sync _j.fnm
>> >> > IW 9 [Indexer]: now sync _k.frq
>> >> > IW 9 [Indexer]: now sync _j.frq
>> >> > IW 9 [Indexer]: done all syncs
>> >> > IW 9 [Indexer]: flush at getReader
>> >> > IW 9 [Indexer]:   flush: segment=null docStoreSegment=_k
>> docStoreOffset=0
>> >> > flushDocs=false flushDeletes=true flushDocStores=true numDocs=0
>> >> > numBufDelTerms=0
>> >> > IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b
>> _c:C717->_b
>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> >> _i:C703->_h
>> >> > _j:C1456->_j _k:C509->_j
>> >> > IW 9 [Indexer]:   flush shared docStore segment _k
>> >> > IW 9 [Indexer]: DW: closeDocStore: 0 files to flush to segment _k
>> >> numDocs=0
>> >> > IW 9 [Indexer]: commit: start
>> >> > IW 9 [Indexer]: commit: already prepared
>> >> > IW 9 [Indexer]: commit: pendingCommit != null
>> >> > IW 9 [Indexer]: commit: wrote segments file "segments_c"
>> >> > IFD [Indexer]: now checkpoint "segments_c" [11 segments ; isCommit =
>> >> true]
>> >> > IFD [Indexer]: deleteCommits: now decRef commit "segments_b"
>> >> > IFD [Indexer]: delete "segments_b"
>> >> > IW 9 [Indexer]: commit: done
>> >> > IW 9 [Indexer]: flush at getReader
>> >> > IW 9 [Indexer]:   flush: segment=null docStoreSegment=null
>> >> docStoreOffset=0
>> >> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
>> >> > numBufDelTerms=0
>> >> > IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b
>> _c:C717->_b
>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> >> _i:C703->_h
>> >> > _j:C1456->_j _k:C509->_j
>> >> > IW 9 [Indexer]: now flush at close
>> >> > IW 9 [Indexer]:   flush: segment=null docStoreSegment=null
>> >> docStoreOffset=0
>> >> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
>> >> > numBufDelTerms=0
>> >> > IW 9 [Indexer]:   index before flush _a:C9780 _b:C1204->_b
>> _c:C717->_b
>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> >> _i:C703->_h
>> >> > _j:C1456->_j _k:C509->_j
>> >> > IW 9 [Indexer]: CMS: now merge
>> >> > IW 9 [Indexer]: CMS:   index: _a:C9780 _b:C1204->_b _c:C717->_b
>> >> _d:C1220->_d
>> >> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
>> >> _j:C1456->_j
>> >> > _k:C509->_j
>> >> > IW 9 [Indexer]: CMS:   no more merges pending; now return
>> >> > IW 9 [Lucene Merge Thread #0]: commitMerge: _b:C1204->_b _c:C717->_b
>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> >> _i:C703->_h
>> >> > _j:C1456->_j _k:C509->_j into _l [mergeDocStores] index=_a:C9780
>> >> > _b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f
>> >> _g:C858->_f
>> >> > _h:C1291->_h _i:C703->_h _j:C1456->_j _k:C509->_j
>> >> > IW 9 [Lucene Merge Thread #0]: commitMergeDeletes _b:C1204->_b
>> >> _c:C717->_b
>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>> >> _i:C703->_h
>> >> > _j:C1456->_j _k:C509->_j into _l [mergeDocStores]
>> >> > IFD [Lucene Merge Thread #0]: now checkpoint "segments_c" [2 segments
>> ;
>> >> > isCommit = false]
>> >> > IFD [Lucene Merge Thread #0]: now checkpoint "segments_c" [2 segments
>> ;
>> >> > isCommit = false]
>> >> > IW 9 [Lucene Merge Thread #0]: CMS:   merge thread: done
>> >> > IW 9 [Indexer]: now call final commit()
>> >> > IW 9 [Indexer]: startCommit(): start sizeInBytes=0
>> >> > IW 9 [Indexer]: startCommit index=_a:C9780 _l:C9909 changeCount=8
>> >> > IW 9 [Indexer]: now sync _l.nrm
>> >> > IW 9 [Indexer]: now sync _l.fnm
>> >> > IW 9 [Indexer]: now sync _l.prx
>> >> > IW 9 [Indexer]: now sync _l.frq
>> >> > IW 9 [Indexer]: now sync _l.tis
>> >> > IW 9 [Indexer]: now sync _l.fdx
>> >> > IW 9 [Indexer]: now sync _l.fdt
>> >> > IW 9 [Indexer]: now sync _l.tii
>> >> > IW 9 [Indexer]: done all syncs
>> >> > IW 9 [Indexer]: commit: pendingCommit != null
>> >> > IW 9 [Indexer]: commit: wrote segments file "segments_d"
>> >> > IFD [Indexer]: now checkpoint "segments_d" [2 segments ; isCommit =
>> true]
>> >> > IFD [Indexer]: deleteCommits: now decRef commit "segments_c"
>> >> > IFD [Indexer]: delete "_h.prx"
>> >> > IFD [Indexer]: delete "_f.tis"
>> >> > IFD [Indexer]: delete "_g.tis"
>> >> > IFD [Indexer]: delete "_d.tii"
>> >> > IFD [Indexer]: delete "_e.frq"
>> >> > IFD [Indexer]: delete "_k.fnm"
>> >> > IFD [Indexer]: delete "_c.tii"
>> >> > IFD [Indexer]: delete "_h.nrm"
>> >> > IFD [Indexer]: delete "_i.tis"
>> >> > IFD [Indexer]: delete "_k.tii"
>> >> > IFD [Indexer]: delete "_h.fdt"
>> >> > IFD [Indexer]: delete "_c.tis"
>> >> > IFD [Indexer]: delete "_g.tii"
>> >> > IFD [Indexer]: delete "_h.fdx"
>> >> > IFD [Indexer]: delete "_c.nrm"
>> >> > IFD [Indexer]: delete "_i.tii"
>> >> > IFD [Indexer]: delete "_d.tis"
>> >> > IFD [Indexer]: delete "_f.tii"
>> >> > IFD [Indexer]: delete "_e.fnm"
>> >> > IFD [Indexer]: delete "_k.tis"
>> >> > IFD [Indexer]: delete "_d.frq"
>> >> > IFD [Indexer]: delete "_f.nrm"
>> >> > IFD [Indexer]: delete "_h.fnm"
>> >> > IFD [Indexer]: delete "segments_c"
>> >> > IFD [Indexer]: delete "_c.prx"
>> >> > IFD [Indexer]: delete "_d.fnm"
>> >> > IFD [Indexer]: delete "_h.frq"
>> >> > IFD [Indexer]: delete "_h.tis"
>> >> > IFD [Indexer]: delete "_f.fdt"
>> >> > IFD [Indexer]: delete "_j.tis"
>> >> > IFD [Indexer]: delete "_f.fdx"
>> >> > IFD [Indexer]: delete "_g.nrm"
>> >> > IFD [Indexer]: delete "_f.prx"
>> >> > IFD [Indexer]: delete "_j.tii"
>> >> > IFD [Indexer]: delete "_h.tii"
>> >> > IFD [Indexer]: delete "_e.prx"
>> >> > IFD [Indexer]: delete "_c.frq"
>> >> > IFD [Indexer]: delete "_i.prx"
>> >> > IFD [Indexer]: delete "_j.fdx"
>> >> > IFD [Indexer]: delete "_i.nrm"
>> >> > IFD [Indexer]: delete "_j.fdt"
>> >> > IFD [Indexer]: delete "_k.prx"
>> >> > IFD [Indexer]: delete "_b.nrm"
>> >> > IFD [Indexer]: delete "_e.tis"
>> >> > IFD [Indexer]: delete "_e.tii"
>> >> > IFD [Indexer]: delete "_g.fnm"
>> >> > IFD [Indexer]: delete "_k.nrm"
>> >> > IFD [Indexer]: delete "_j.nrm"
>> >> > IFD [Indexer]: delete "_j.prx"
>> >> > IFD [Indexer]: delete "_e.nrm"
>> >> > IFD [Indexer]: delete "_g.prx"
>> >> > IFD [Indexer]: delete "_b.prx"
>> >> > IFD [Indexer]: delete "_i.frq"
>> >> > IFD [Indexer]: delete "_b.tis"
>> >> > IFD [Indexer]: delete "_d.prx"
>> >> > IFD [Indexer]: delete "_g.frq"
>> >> > IFD [Indexer]: delete "_d.fdx"
>> >> > IFD [Indexer]: delete "_b.tii"
>> >> > IFD [Indexer]: delete "_b.frq"
>> >> > IFD [Indexer]: delete "_d.fdt"
>> >> > IFD [Indexer]: delete "_f.fnm"
>> >> > IFD [Indexer]: delete "_j.fnm"
>> >> > IFD [Indexer]: delete "_b.fnm"
>> >> > IFD [Indexer]: delete "_d.nrm"
>> >> > IFD [Indexer]: delete "_b.fdt"
>> >> > IFD [Indexer]: delete "_k.frq"
>> >> > IFD [Indexer]: delete "_c.fnm"
>> >> > IFD [Indexer]: delete "_j.frq"
>> >> > IFD [Indexer]: delete "_i.fnm"
>> >> > IFD [Indexer]: delete "_f.frq"
>> >> > IFD [Indexer]: delete "_b.fdx"
>> >> > IW 9 [Indexer]: commit: done
>> >> > IW 9 [Indexer]: at close: _a:C9780 _l:C9909
>> >> >
>> >> > =====================================================
>> >> >
>> >> > IFD [Indexer]: setInfoStream
>> >> >
>> >>
>> deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@68d349c1
>> >> > IW 10 [Indexer]: setInfoStream:
>> >> > dir=org.apache.lucene.store.SimpleFSDirectory@<obfuscated
>> >> > pathname>\lresumes1.search.main.1 autoCommit=false
>> >> >
>> >>
>> mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@78f53abmergeScheduler
>> >>
>> =org.apache.lucene.index.ConcurrentMergeScheduler@52be036dramBufferSizeMB
>> >> =16.0
>> >> > maxBufferedDocs=-1 maxBuffereDeleteTerms=-1
>> >> > maxFieldLength=100000 index=_a:C9780 _l:C9909
>> >> > IW 10 [Indexer]: flush at getReader
>> >> > IW 10 [Indexer]:   flush: segment=null docStoreSegment=null
>> >> docStoreOffset=0
>> >> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
>> >> > numBufDelTerms=0
>> >> > IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909
>> >> > IW 10 [UpdWriterBuild : 10]: DW:   RAM: now flush @ usedMB=15.789
>> >> > allocMB=15.789 deletesMB=0.212 triggerMB=16
>> >> > IW 10 [UpdWriterBuild : 10]:   flush: segment=_m docStoreSegment=_m
>> >> > docStoreOffset=0 flushDocs=true flushDeletes=false
>> flushDocStores=false
>> >> > numDocs=1526 numBufDelTerms=1526
>> >> > IW 10 [UpdWriterBuild : 10]:   index before flush _a:C9780 _l:C9909
>> >> > IW 10 [UpdWriterBuild : 10]: DW: flush postings as segment _m
>> >> numDocs=1526
>> >> > IW 10 [UpdWriterBuild : 10]: DW:   oldRAMSize=16556032
>> >> > newFlushedSize=4788823 docs/MB=334.138 new/old=28.925%
>> >> > IFD [UpdWriterBuild : 10]: now checkpoint "segments_d" [3 segments ;
>> >> > isCommit = false]
>> >> > IFD [UpdWriterBuild : 10]: now checkpoint "segments_d" [3 segments ;
>> >> > isCommit = false]
>> >> > IW 10 [UpdWriterBuild : 10]: LMP: findMerges: 3 segments
>> >> > IW 10 [UpdWriterBuild : 10]: LMP:   level 6.8642592 to 7.6142592: 2
>> >> segments
>> >> > IW 10 [UpdWriterBuild : 10]: LMP:   level 6.2247195 to 6.6802545: 1
>> >> segments
>> >> > IW 10 [UpdWriterBuild : 10]: CMS: now merge
>> >> > IW 10 [UpdWriterBuild : 10]: CMS:   index: _a:C9780 _l:C9909
>> _m:C1526->_m
>> >> > IW 10 [UpdWriterBuild : 10]: CMS:   no more merges pending; now
>> return
>> >> > IW 10 [Indexer]: prepareCommit: flush
>> >> > IW 10 [Indexer]:   flush: segment=_n docStoreSegment=_m
>> >> docStoreOffset=1526
>> >> > flushDocs=true flushDeletes=true flushDocStores=true numDocs=501
>> >> > numBufDelTerms=501
>> >> > IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909 _m:C1526->_m
>> >> > IW 10 [Indexer]:   flush shared docStore segment _m
>> >> > IW 10 [Indexer]: DW: closeDocStore: 2 files to flush to segment _m
>> >> > numDocs=2027
>> >> > IW 10 [Indexer]: DW: flush postings as segment _n numDocs=501
>> >> > IW 10 [Indexer]: DW:   oldRAMSize=6927360 newFlushedSize=1659342
>> >> > docs/MB=316.593 new/old=23.953%
>> >> > IFD [Indexer]: now checkpoint "segments_d" [4 segments ; isCommit =
>> >> false]
>> >> > IW 10 [Indexer]: DW: apply 2027 buffered deleted terms and 0 deleted
>> >> docIDs
>> >> > and 0 deleted queries on 4 segments.
>> >> > IFD [Indexer]: now checkpoint "segments_d" [4 segments ; isCommit =
>> >> false]
>> >> > IW 10 [Indexer]: LMP: findMerges: 4 segments
>> >> > IW 10 [Indexer]: LMP:   level 6.8642592 to 7.6142592: 2 segments
>> >> > IW 10 [Indexer]: LMP:   level 6.2247195 to 6.6802545: 1 segments
>> >> > IW 10 [Indexer]: LMP:   level -1.0 to 6.220011: 1 segments
>> >> > IW 10 [Indexer]: CMS: now merge
>> >> > IW 10 [Indexer]: CMS:   index: _a:C9780 _l:C9909 _m:C1526->_m
>> _n:C501->_m
>> >> > IW 10 [Indexer]: CMS:   no more merges pending; now return
>> >> > IW 10 [Indexer]: startCommit(): start sizeInBytes=0
>> >> > IW 10 [Indexer]: startCommit index=_a:C9780 _l:C9909 _m:C1526->_m
>> >> > _n:C501->_m changeCount=6
>> >> > IW 10 [Indexer]: now sync _m.frq
>> >> > IW 10 [Indexer]: now sync _m.prx
>> >> > IW 10 [Indexer]: now sync _n.tis
>> >> > IW 10 [Indexer]: now sync _m.tis
>> >> > IW 10 [Indexer]: now sync _n.frq
>> >> > IW 10 [Indexer]: now sync _n.tii
>> >> > IW 10 [Indexer]: now sync _m.tii
>> >> > IW 10 [Indexer]: now sync _m.fnm
>> >> > IW 10 [Indexer]: now sync _n.fnm
>> >> > IW 10 [Indexer]: now sync _n.nrm
>> >> > IW 10 [Indexer]: now sync _n.prx
>> >> > IW 10 [Indexer]: now sync _m.nrm
>> >> > IW 10 [Indexer]: now sync _m.fdt
>> >> > IW 10 [Indexer]: now sync _m.fdx
>> >> > IW 10 [Indexer]: done all syncs
>> >> > IW 10 [Indexer]: flush at getReader
>> >> > IW 10 [Indexer]:   flush: segment=null docStoreSegment=_n
>> >> docStoreOffset=0
>> >> > flushDocs=false flushDeletes=true flushDocStores=true numDocs=0
>> >> > numBufDelTerms=0
>> >> > IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909 _m:C1526->_m
>> >> > _n:C501->_m
>> >> > IW 10 [Indexer]:   flush shared docStore segment _n
>> >> > IW 10 [Indexer]: DW: closeDocStore: 0 files to flush to segment _n
>> >> numDocs=0
>> >> > IW 10 [Indexer]: commit: start
>> >> > IW 10 [Indexer]: commit: already prepared
>> >> > IW 10 [Indexer]: commit: pendingCommit != null
>> >> > IW 10 [Indexer]: commit: wrote segments file "segments_e"
>> >> > IFD [Indexer]: now checkpoint "segments_e" [4 segments ; isCommit =
>> true]
>> >> > IFD [Indexer]: deleteCommits: now decRef commit "segments_d"
>> >> > IFD [Indexer]: delete "segments_d"
>> >> > IW 10 [Indexer]: commit: done
>> >> > IW 10 [Indexer]: flush at getReader
>> >> > IW 10 [Indexer]:   flush: segment=null docStoreSegment=null
>> >> docStoreOffset=0
>> >> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
>> >> > numBufDelTerms=0
>> >> > IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909 _m:C1526->_m
>> >> > _n:C501->_m
>> >> > IW 10 [Indexer]: now flush at close
>> >> > IW 10 [Indexer]:   flush: segment=null docStoreSegment=null
>> >> docStoreOffset=0
>> >> > flushDocs=false flushDeletes=true flushDocStores=false numDocs=0
>> >> > numBufDelTerms=0
>> >> > IW 10 [Indexer]:   index before flush _a:C9780 _l:C9909 _m:C1526->_m
>> >> > _n:C501->_m
>> >> > IW 10 [Indexer]: CMS: now merge
>> >> > IW 10 [Indexer]: CMS:   index: _a:C9780 _l:C9909 _m:C1526->_m
>> _n:C501->_m
>> >> > IW 10 [Indexer]: CMS:   no more merges pending; now return
>> >> > IW 10 [Indexer]: now call final commit()
>> >> > IW 10 [Indexer]: startCommit(): start sizeInBytes=0
>> >> > IW 10 [Indexer]:   skip startCommit(): no changes pending
>> >> > IW 10 [Indexer]: commit: pendingCommit == null; skip
>> >> > IW 10 [Indexer]: commit: done
>> >> > IW 10 [Indexer]: at close: _a:C9780 _l:C9909 _m:C1526->_m _n:C501->_m
>> >> >
>> >> >
>> >> > Peter
>> >> >
>> >> > On Thu, Feb 25, 2010 at 1:13 PM, Michael McCandless <
>> >> > lucene@mikemccandless.com> wrote:
>> >> >
>> >> >> Do you know the place in the infoStream output where you got a
>> reader
>> >> >> with the wrong (unexplained extra +1) version?  If so, can you post
>> >> >> the infoStream output up to that point?
>> >> >>
>> >> >> Mike
>> >> >>
>> >> >> On Thu, Feb 25, 2010 at 10:22 AM, Peter Keegan <
>> peterlkeegan@gmail.com>
>> >> >> wrote:
>> >> >> > I've reproduced this and I have a bunch of infoStream log files.
>> Since
>> >> >> the
>> >> >> > messages have no timestamps, it's hard to tell where the relevant
>> >> entries
>> >> >> > are. What should I be looking for?
>> >> >> >
>> >> >> > Peter
>> >> >> >
>> >> >> > On Mon, Feb 22, 2010 at 3:58 PM, Peter Keegan <
>> peterlkeegan@gmail.com
>> >> >> >wrote:
>> >> >> >
>> >> >> >> I'm pretty sure there are flushes and segment merges going on,
>> but as
>> >> >> you
>> >> >> >> said, that shouldn't affect the version increment. I'll see what
>> I
>> >> can
>> >> >> do to
>> >> >> >> get infoStream output.
>> >> >> >>
>> >> >> >> Thanks,
>> >> >> >> Peter
>> >> >> >>
>> >> >> >>
>> >> >> >> On Mon, Feb 22, 2010 at 2:30 PM, Michael McCandless <
>> >> >> >> lucene@mikemccandless.com> wrote:
>> >> >> >>
>> >> >> >>> Well I'm at a loss then.  The version should only increment on
>> >> commit.
>> >> >> >>>
>> >> >> >>> Can you make it all happen when infoStream is on, and post back?
>> >> >> >>>
>> >> >> >>> Mike
>> >> >> >>>
>> >> >> >>> On Mon, Feb 22, 2010 at 12:35 PM, Peter Keegan <
>> >> peterlkeegan@gmail.com
>> >> >> >
>> >> >> >>> wrote:
>> >> >> >>> > Only one writer thread and one writer process.
>> >> >> >>> > I'm calling IndexWriter(Directory d, Analyzer a, boolean
>> create,
>> >> >> >>> > MaxFieldLength mfl), which sets autocommit=false.
>> >> >> >>> >
>> >> >> >>> > Peter
>> >> >> >>> >
>> >> >> >>> > On Mon, Feb 22, 2010 at 12:24 PM, Michael McCandless <
>> >> >> >>> > lucene@mikemccandless.com> wrote:
>> >> >> >>> >
>> >> >> >>> >> That's curious.
>> >> >> >>> >>
>> >> >> >>> >> It's only on prepareCommit (or, commit, if you didn't first
>> >> prepare,
>> >> >> >>> >> since that will call prepareCommit internally) that this
>> version
>> >> >> >>> >> should increase.
>> >> >> >>> >>
>> >> >> >>> >> Is there only 1 thread doing this?
>> >> >> >>> >>
>> >> >> >>> >> Oh, and, are you passing false for autoCommit?
>> >> >> >>> >>
>> >> >> >>> >> Mike
>> >> >> >>> >>
>> >> >> >>> >> On Mon, Feb 22, 2010 at 11:43 AM, Peter Keegan <
>> >> >> peterlkeegan@gmail.com
>> >> >> >>> >
>> >> >> >>> >> wrote:
>> >> >> >>> >> > Using Lucene 2.9.1, I have the following pseudocode which
>> gets
>> >> >> >>> repeated
>> >> >> >>> >> at
>> >> >> >>> >> > regular intervals:
>> >> >> >>> >> >
>> >> >> >>> >> > 1. FSDirectory dir = FSDirectory.open(java.io.File);
>> >> >> >>> >> > 2. dir.setLockFactory(new SingleInstanceLockFactory());
>> >> >> >>> >> > 3. IndexWriter writer = new IndexWriter(dir, Analyzer,
>> false,
>> >> >> >>> >> maxFieldLen)
>> >> >> >>> >> > 4. writer.getReader().getVersion();
>> >> >> >>> >> > 5. writer.prepareCommit();
>> >> >> >>> >> > 6. writer.getReader().getVersion();
>> >> >> >>> >> > 7. writer.commit();
>> >> >> >>> >> > 8. writer.close();
>> >> >> >>> >> >
>> >> >> >>> >> > I'm using the version number to keep external data in synch
>> >> with
>> >> >> the
>> >> >> >>> >> index.
>> >> >> >>> >> > Usually, the version number from (6) is 1 greater than from
>> (4)
>> >> >> and
>> >> >> >>> the
>> >> >> >>> >> > version from (4) equals the version from the previous (6).
>> At
>> >> >> least
>> >> >> >>> once
>> >> >> >>> >> a
>> >> >> >>> >> > day, however, the version from (4) is 1 greater than from
>> the
>> >> >> >>> previous
>> >> >> >>> >> (6).
>> >> >> >>> >> > What would explain this sporadic behavior of version
>> numbers?
>> >> >> >>> >> >
>> >> >> >>> >> > Thanks,
>> >> >> >>> >> > Peter
>> >> >> >>> >> >
>> >> >> >>> >>
>> >> >> >>> >>
>> >> >>
>> ---------------------------------------------------------------------
>> >> >> >>> >> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> >> >> >>> >> For additional commands, e-mail:
>> >> java-user-help@lucene.apache.org
>> >> >> >>> >>
>> >> >> >>> >>
>> >> >> >>> >
>> >> >> >>>
>> >> >> >>>
>> >> ---------------------------------------------------------------------
>> >> >> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> >>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>> >> >> >>>
>> >> >> >>>
>> >> >> >>
>> >> >> >
>> >> >>
>> >> >>
>> ---------------------------------------------------------------------
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >>
>> >> >>
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--00504502b259dc3449048086b5c3--

From java-user-return-45214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 20:29:59 2010
Return-Path: <java-user-return-45214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51895 invoked from network); 26 Feb 2010 20:29:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 20:29:59 -0000
Received: (qmail 17468 invoked by uid 500); 26 Feb 2010 20:29:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17285 invoked by uid 500); 26 Feb 2010 20:29:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17277 invoked by uid 99); 26 Feb 2010 20:29:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 20:29:57 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 20:29:48 +0000
Received: by gwaa18 with SMTP id a18so235184gwa.35
        for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 12:29:26 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.194.13 with SMTP id r13mr1551983ybf.81.1267216164945; Fri, 
	26 Feb 2010 12:29:24 -0800 (PST)
In-Reply-To: <e994873a1002261226q2590699bm895885e173563924@mail.gmail.com>
References: <e994873a1002220843s807d31dl3158c1ca11828663@mail.gmail.com>
	 <e994873a1002221258y1cfba96atfb1fbb2c7dc65c90@mail.gmail.com>
	 <e994873a1002250722n5d0cf7e7xb6cc9b9d8b0ae5d8@mail.gmail.com>
	 <9ac0c6aa1002251013j55a5e6e9h4a7e5331d2951c1b@mail.gmail.com>
	 <e994873a1002251152i5baf6db2o2901ed63eaf441d3@mail.gmail.com>
	 <9ac0c6aa1002260940x2f326ad4ga7c254bd92ca3c7d@mail.gmail.com>
	 <e994873a1002261140o598856a7ge6a2d0ecf7604f19@mail.gmail.com>
	 <9ac0c6aa1002261211p4e83ac64n33824a83b6930d10@mail.gmail.com>
	 <e994873a1002261215u41a64f7eid23df2be86f3617a@mail.gmail.com>
	 <e994873a1002261226q2590699bm895885e173563924@mail.gmail.com>
Date: Fri, 26 Feb 2010 15:29:24 -0500
Message-ID: <9ac0c6aa1002261229m7fc05bbck761c5fdc5bfe38da@mail.gmail.com>
Subject: Re: IndexWriter.getReader.getVersion behavior
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

That should be fine!

Mike

On Fri, Feb 26, 2010 at 3:26 PM, Peter Keegan <peterlkeegan@gmail.com> wrot=
e:
> Can =A0IW.waitForMerges be called between 'prepareCommit' and 'commit'? T=
hat's
> when the app calls 'getReader' to create external data.
>
> Peter
>
> On Fri, Feb 26, 2010 at 3:15 PM, Peter Keegan <peterlkeegan@gmail.com>wro=
te:
>
>> Great, I'll give it a try.
>> Thanks!
>>
>>
>> On Fri, Feb 26, 2010 at 3:11 PM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>>
>>> Note that it's a BG merge (not commit)...
>>>
>>> You can use the new (as of 2.9 I think) IndexWriter.waitForMerges API?
>>> =A0If you call that, then call .getReader().getVersion(), then close &
>>> open the writer, I think (but you better test to be sure!) the next
>>> .getReader().getVersion() should always match.
>>>
>>> Mike
>>>
>>> On Fri, Feb 26, 2010 at 2:40 PM, Peter Keegan <peterlkeegan@gmail.com>
>>> wrote:
>>> > Is there a way for the application to wait for the BG commit to finis=
h
>>> > before it calls IW.close? If so, would this prevent the extra version=
?
>>> The
>>> > extra version causes the app. to think that the external data it
>>> committed
>>> > is out of synch with the index, which requires the app to do extra
>>> > processing to re-synch.
>>> >
>>> > Thanks,
>>> > Peter
>>> >
>>> >
>>> > On Fri, Feb 26, 2010 at 12:40 PM, Michael McCandless <
>>> > lucene@mikemccandless.com> wrote:
>>> >
>>> >> OK -- I can now see what happened.
>>> >>
>>> >> There was a merge still running, when you called IW.commit (Lucene
>>> >> Merge Thread #0). =A0Because IW.commit does not wait for BG merges t=
o
>>> >> finish, but IW.close does (by default), this means you'll pick up an
>>> >> extra version whenever a merge is running when you call close.
>>> >>
>>> >> Mike
>>> >>
>>> >> On Thu, Feb 25, 2010 at 2:52 PM, Peter Keegan <peterlkeegan@gmail.co=
m>
>>> >> wrote:
>>> >> > I'm pretty sure this output occurred when the version number skipp=
ed
>>> +1.
>>> >> > The line containing '=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D'. separa=
tes the close/open
>>> IndexWriter.
>>> >> >
>>> >> > IFD [Indexer]: setInfoStream
>>> >> >
>>> >>
>>> deletionPolicy=3Dorg.apache.lucene.index.KeepOnlyLastCommitDeletionPoli=
cy@646f9dd9
>>> >> > IW 9 [Indexer]: setInfoStream:
>>> >> > dir=3Dorg.apache.lucene.store.SimpleFSDirectory@<obfuscated
>>> >> > pathname>\lresumes1.search.main.1 autoCommit=3Dfalse
>>> >> >
>>> >>
>>> mergePolicy=3Dorg.apache.lucene.index.LogByteSizeMergePolicy@5be44512me=
rgeScheduler
>>> >>
>>> =3Dorg.apache.lucene.index.ConcurrentMergeScheduler@6772cfdframBufferSi=
zeMB
>>> >> =3D16.0
>>> >> > maxBufferedDocs=3D-1 maxBuffereDeleteTerms=3D-1
>>> >> > maxFieldLength=3D100000 index=3D_a:C9780 _b:C1204->_b _c:C717->_b
>>> >> _d:C1220->_d
>>> >> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
>>> >> > IW 9 [Indexer]: flush at getReader
>>> >> > IW 9 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull
>>> >> docStoreOffset=3D0
>>> >> > flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDo=
cs=3D0
>>> >> > numBufDelTerms=3D0
>>> >> > IW 9 [Indexer]: =A0 index before flush _a:C9780 _b:C1204->_b
>>> _c:C717->_b
>>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>>> >> _i:C703->_h
>>> >> > IW 9 [UpdWriterBuild : 9]: DW: =A0 RAM: now flush @ usedMB=3D15.81=
6
>>> >> > allocMB=3D15.816 deletesMB=3D0.203 triggerMB=3D16
>>> >> > IW 9 [UpdWriterBuild : 9]: =A0 flush: segment=3D_j docStoreSegment=
=3D_j
>>> >> > docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dfalse
>>> flushDocStores=3Dfalse
>>> >> > numDocs=3D1456 numBufDelTerms=3D1456
>>> >> > IW 9 [UpdWriterBuild : 9]: =A0 index before flush _a:C9780 _b:C120=
4->_b
>>> >> > _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f
>>> >> _h:C1291->_h
>>> >> > _i:C703->_h
>>> >> > IW 9 [UpdWriterBuild : 9]: DW: flush postings as segment _j
>>> numDocs=3D1456
>>> >> > IW 9 [UpdWriterBuild : 9]: DW: =A0 oldRAMSize=3D16584704
>>> >> newFlushedSize=3D4969789
>>> >> > docs/MB=3D307.202 new/old=3D29.966%
>>> >> > IFD [UpdWriterBuild : 9]: now checkpoint "segments_b" [10 segments=
 ;
>>> >> > isCommit =3D false]
>>> >> > IFD [UpdWriterBuild : 9]: now checkpoint "segments_b" [10 segments=
 ;
>>> >> > isCommit =3D false]
>>> >> > IW 9 [UpdWriterBuild : 9]: LMP: findMerges: 10 segments
>>> >> > IW 9 [UpdWriterBuild : 9]: LMP: =A0 level 6.863048 to 7.613048: 1
>>> segments
>>> >> > IW 9 [UpdWriterBuild : 9]: LMP: =A0 level 6.2247195 to 6.696363: 9
>>> segments
>>> >> > IW 9 [UpdWriterBuild : 9]: CMS: now merge
>>> >> > IW 9 [UpdWriterBuild : 9]: CMS: =A0 index: _a:C9780 _b:C1204->_b
>>> >> _c:C717->_b
>>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>>> >> _i:C703->_h
>>> >> > _j:C1456->_j
>>> >> > IW 9 [UpdWriterBuild : 9]: CMS: =A0 no more merges pending; now re=
turn
>>> >> > IW 9 [Indexer]: prepareCommit: flush
>>> >> > IW 9 [Indexer]: =A0 flush: segment=3D_k docStoreSegment=3D_j
>>> >> docStoreOffset=3D1456
>>> >> > flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStores=3Dtrue numDocs=
=3D509
>>> >> > numBufDelTerms=3D509
>>> >> > IW 9 [Indexer]: =A0 index before flush _a:C9780 _b:C1204->_b
>>> _c:C717->_b
>>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>>> >> _i:C703->_h
>>> >> > _j:C1456->_j
>>> >> > IW 9 [Indexer]: =A0 flush shared docStore segment _j
>>> >> > IW 9 [Indexer]: DW: closeDocStore: 2 files to flush to segment _j
>>> >> > numDocs=3D1965
>>> >> > IW 9 [Indexer]: DW: flush postings as segment _k numDocs=3D509
>>> >> > IW 9 [Indexer]: DW: =A0 oldRAMSize=3D7483392 newFlushedSize=3D1854=
970
>>> >> > docs/MB=3D287.727 new/old=3D24.788%
>>> >> > IFD [Indexer]: now checkpoint "segments_b" [11 segments ; isCommit=
 =3D
>>> >> false]
>>> >> > IW 9 [Indexer]: DW: apply 1965 buffered deleted terms and 0 delete=
d
>>> >> docIDs
>>> >> > and 0 deleted queries on 11 segments.
>>> >> > IFD [Indexer]: now checkpoint "segments_b" [11 segments ; isCommit=
 =3D
>>> >> false]
>>> >> > IW 9 [Indexer]: LMP: findMerges: 11 segments
>>> >> > IW 9 [Indexer]: LMP: =A0 level 6.863048 to 7.613048: 1 segments
>>> >> > IW 9 [Indexer]: LMP: =A0 level 6.2247195 to 6.696363: 10 segments
>>> >> > IW 9 [Indexer]: LMP: =A0 =A0 1 to 11: add this merge
>>> >> > IW 9 [Indexer]: add merge to pendingMerges: _b:C1204->_b _c:C717->=
_b
>>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>>> >> _i:C703->_h
>>> >> > _j:C1456->_j _k:C509->_j [total 1 pending]
>>> >> > IW 9 [Indexer]: CMS: now merge
>>> >> > IW 9 [Indexer]: CMS: =A0 index: _a:C9780 _b:C1204->_b _c:C717->_b
>>> >> _d:C1220->_d
>>> >> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
>>> >> _j:C1456->_j
>>> >> > _k:C509->_j
>>> >> > IW 9 [Indexer]: CMS: =A0 consider merge _b:C1204->_b _c:C717->_b
>>> >> _d:C1220->_d
>>> >> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
>>> >> _j:C1456->_j
>>> >> > _k:C509->_j into _l [mergeDocStores]
>>> >> > IW 9 [Indexer]: CMS: =A0 =A0 launch new thread [Lucene Merge Threa=
d #0]
>>> >> > IW 9 [Indexer]: CMS: =A0 no more merges pending; now return
>>> >> > IW 9 [Indexer]: startCommit(): start sizeInBytes=3D0
>>> >> > IW 9 [Indexer]: startCommit index=3D_a:C9780 _b:C1204->_b _c:C717-=
>_b
>>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>>> >> _i:C703->_h
>>> >> > _j:C1456->_j _k:C509->_j changeCount=3D7
>>> >> > IW 9 [Lucene Merge Thread #0]: CMS: =A0 merge thread: start
>>> >> > IW 9 [Indexer]: now sync _k.fnm
>>> >> > IW 9 [Lucene Merge Thread #0]: now merge
>>> >> > =A0merge=3D_b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1=
173->_f
>>> >> > _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j _k:C509->_j into=
 _l
>>> >> > [mergeDocStores]
>>> >> > =A0merge=3Dorg.apache.lucene.index.MergePolicy$OneMerge@5203ef34
>>> >> > =A0index=3D_a:C9780 _b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778-=
>_d
>>> >> > _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h _j:C1456->_j
>>> >> _k:C509->_j
>>> >> > IW 9 [Lucene Merge Thread #0]: merging _b:C1204->_b _c:C717->_b
>>> >> _d:C1220->_d
>>> >> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
>>> >> _j:C1456->_j
>>> >> > _k:C509->_j into _l [mergeDocStores]
>>> >> > IW 9 [Indexer]: now sync _k.tii
>>> >> > IW 9 [Indexer]: now sync _k.tis
>>> >> > IW 9 [Lucene Merge Thread #0]: merge: total 9909 docs
>>> >> > IW 9 [Indexer]: now sync _j.tis
>>> >> > IW 9 [Indexer]: now sync _j.tii
>>> >> > IW 9 [Indexer]: now sync _j.fdx
>>> >> > IW 9 [Indexer]: now sync _j.fdt
>>> >> > IW 9 [Indexer]: now sync _k.prx
>>> >> > IW 9 [Indexer]: now sync _k.nrm
>>> >> > IW 9 [Indexer]: now sync _j.nrm
>>> >> > IW 9 [Indexer]: now sync _j.prx
>>> >> > IW 9 [Indexer]: now sync _j.fnm
>>> >> > IW 9 [Indexer]: now sync _k.frq
>>> >> > IW 9 [Indexer]: now sync _j.frq
>>> >> > IW 9 [Indexer]: done all syncs
>>> >> > IW 9 [Indexer]: flush at getReader
>>> >> > IW 9 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3D_k
>>> docStoreOffset=3D0
>>> >> > flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dtrue numDoc=
s=3D0
>>> >> > numBufDelTerms=3D0
>>> >> > IW 9 [Indexer]: =A0 index before flush _a:C9780 _b:C1204->_b
>>> _c:C717->_b
>>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>>> >> _i:C703->_h
>>> >> > _j:C1456->_j _k:C509->_j
>>> >> > IW 9 [Indexer]: =A0 flush shared docStore segment _k
>>> >> > IW 9 [Indexer]: DW: closeDocStore: 0 files to flush to segment _k
>>> >> numDocs=3D0
>>> >> > IW 9 [Indexer]: commit: start
>>> >> > IW 9 [Indexer]: commit: already prepared
>>> >> > IW 9 [Indexer]: commit: pendingCommit !=3D null
>>> >> > IW 9 [Indexer]: commit: wrote segments file "segments_c"
>>> >> > IFD [Indexer]: now checkpoint "segments_c" [11 segments ; isCommit=
 =3D
>>> >> true]
>>> >> > IFD [Indexer]: deleteCommits: now decRef commit "segments_b"
>>> >> > IFD [Indexer]: delete "segments_b"
>>> >> > IW 9 [Indexer]: commit: done
>>> >> > IW 9 [Indexer]: flush at getReader
>>> >> > IW 9 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull
>>> >> docStoreOffset=3D0
>>> >> > flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDo=
cs=3D0
>>> >> > numBufDelTerms=3D0
>>> >> > IW 9 [Indexer]: =A0 index before flush _a:C9780 _b:C1204->_b
>>> _c:C717->_b
>>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>>> >> _i:C703->_h
>>> >> > _j:C1456->_j _k:C509->_j
>>> >> > IW 9 [Indexer]: now flush at close
>>> >> > IW 9 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull
>>> >> docStoreOffset=3D0
>>> >> > flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDo=
cs=3D0
>>> >> > numBufDelTerms=3D0
>>> >> > IW 9 [Indexer]: =A0 index before flush _a:C9780 _b:C1204->_b
>>> _c:C717->_b
>>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>>> >> _i:C703->_h
>>> >> > _j:C1456->_j _k:C509->_j
>>> >> > IW 9 [Indexer]: CMS: now merge
>>> >> > IW 9 [Indexer]: CMS: =A0 index: _a:C9780 _b:C1204->_b _c:C717->_b
>>> >> _d:C1220->_d
>>> >> > _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h _i:C703->_h
>>> >> _j:C1456->_j
>>> >> > _k:C509->_j
>>> >> > IW 9 [Indexer]: CMS: =A0 no more merges pending; now return
>>> >> > IW 9 [Lucene Merge Thread #0]: commitMerge: _b:C1204->_b _c:C717->=
_b
>>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>>> >> _i:C703->_h
>>> >> > _j:C1456->_j _k:C509->_j into _l [mergeDocStores] index=3D_a:C9780
>>> >> > _b:C1204->_b _c:C717->_b _d:C1220->_d _e:C778->_d _f:C1173->_f
>>> >> _g:C858->_f
>>> >> > _h:C1291->_h _i:C703->_h _j:C1456->_j _k:C509->_j
>>> >> > IW 9 [Lucene Merge Thread #0]: commitMergeDeletes _b:C1204->_b
>>> >> _c:C717->_b
>>> >> > _d:C1220->_d _e:C778->_d _f:C1173->_f _g:C858->_f _h:C1291->_h
>>> >> _i:C703->_h
>>> >> > _j:C1456->_j _k:C509->_j into _l [mergeDocStores]
>>> >> > IFD [Lucene Merge Thread #0]: now checkpoint "segments_c" [2 segme=
nts
>>> ;
>>> >> > isCommit =3D false]
>>> >> > IFD [Lucene Merge Thread #0]: now checkpoint "segments_c" [2 segme=
nts
>>> ;
>>> >> > isCommit =3D false]
>>> >> > IW 9 [Lucene Merge Thread #0]: CMS: =A0 merge thread: done
>>> >> > IW 9 [Indexer]: now call final commit()
>>> >> > IW 9 [Indexer]: startCommit(): start sizeInBytes=3D0
>>> >> > IW 9 [Indexer]: startCommit index=3D_a:C9780 _l:C9909 changeCount=
=3D8
>>> >> > IW 9 [Indexer]: now sync _l.nrm
>>> >> > IW 9 [Indexer]: now sync _l.fnm
>>> >> > IW 9 [Indexer]: now sync _l.prx
>>> >> > IW 9 [Indexer]: now sync _l.frq
>>> >> > IW 9 [Indexer]: now sync _l.tis
>>> >> > IW 9 [Indexer]: now sync _l.fdx
>>> >> > IW 9 [Indexer]: now sync _l.fdt
>>> >> > IW 9 [Indexer]: now sync _l.tii
>>> >> > IW 9 [Indexer]: done all syncs
>>> >> > IW 9 [Indexer]: commit: pendingCommit !=3D null
>>> >> > IW 9 [Indexer]: commit: wrote segments file "segments_d"
>>> >> > IFD [Indexer]: now checkpoint "segments_d" [2 segments ; isCommit =
=3D
>>> true]
>>> >> > IFD [Indexer]: deleteCommits: now decRef commit "segments_c"
>>> >> > IFD [Indexer]: delete "_h.prx"
>>> >> > IFD [Indexer]: delete "_f.tis"
>>> >> > IFD [Indexer]: delete "_g.tis"
>>> >> > IFD [Indexer]: delete "_d.tii"
>>> >> > IFD [Indexer]: delete "_e.frq"
>>> >> > IFD [Indexer]: delete "_k.fnm"
>>> >> > IFD [Indexer]: delete "_c.tii"
>>> >> > IFD [Indexer]: delete "_h.nrm"
>>> >> > IFD [Indexer]: delete "_i.tis"
>>> >> > IFD [Indexer]: delete "_k.tii"
>>> >> > IFD [Indexer]: delete "_h.fdt"
>>> >> > IFD [Indexer]: delete "_c.tis"
>>> >> > IFD [Indexer]: delete "_g.tii"
>>> >> > IFD [Indexer]: delete "_h.fdx"
>>> >> > IFD [Indexer]: delete "_c.nrm"
>>> >> > IFD [Indexer]: delete "_i.tii"
>>> >> > IFD [Indexer]: delete "_d.tis"
>>> >> > IFD [Indexer]: delete "_f.tii"
>>> >> > IFD [Indexer]: delete "_e.fnm"
>>> >> > IFD [Indexer]: delete "_k.tis"
>>> >> > IFD [Indexer]: delete "_d.frq"
>>> >> > IFD [Indexer]: delete "_f.nrm"
>>> >> > IFD [Indexer]: delete "_h.fnm"
>>> >> > IFD [Indexer]: delete "segments_c"
>>> >> > IFD [Indexer]: delete "_c.prx"
>>> >> > IFD [Indexer]: delete "_d.fnm"
>>> >> > IFD [Indexer]: delete "_h.frq"
>>> >> > IFD [Indexer]: delete "_h.tis"
>>> >> > IFD [Indexer]: delete "_f.fdt"
>>> >> > IFD [Indexer]: delete "_j.tis"
>>> >> > IFD [Indexer]: delete "_f.fdx"
>>> >> > IFD [Indexer]: delete "_g.nrm"
>>> >> > IFD [Indexer]: delete "_f.prx"
>>> >> > IFD [Indexer]: delete "_j.tii"
>>> >> > IFD [Indexer]: delete "_h.tii"
>>> >> > IFD [Indexer]: delete "_e.prx"
>>> >> > IFD [Indexer]: delete "_c.frq"
>>> >> > IFD [Indexer]: delete "_i.prx"
>>> >> > IFD [Indexer]: delete "_j.fdx"
>>> >> > IFD [Indexer]: delete "_i.nrm"
>>> >> > IFD [Indexer]: delete "_j.fdt"
>>> >> > IFD [Indexer]: delete "_k.prx"
>>> >> > IFD [Indexer]: delete "_b.nrm"
>>> >> > IFD [Indexer]: delete "_e.tis"
>>> >> > IFD [Indexer]: delete "_e.tii"
>>> >> > IFD [Indexer]: delete "_g.fnm"
>>> >> > IFD [Indexer]: delete "_k.nrm"
>>> >> > IFD [Indexer]: delete "_j.nrm"
>>> >> > IFD [Indexer]: delete "_j.prx"
>>> >> > IFD [Indexer]: delete "_e.nrm"
>>> >> > IFD [Indexer]: delete "_g.prx"
>>> >> > IFD [Indexer]: delete "_b.prx"
>>> >> > IFD [Indexer]: delete "_i.frq"
>>> >> > IFD [Indexer]: delete "_b.tis"
>>> >> > IFD [Indexer]: delete "_d.prx"
>>> >> > IFD [Indexer]: delete "_g.frq"
>>> >> > IFD [Indexer]: delete "_d.fdx"
>>> >> > IFD [Indexer]: delete "_b.tii"
>>> >> > IFD [Indexer]: delete "_b.frq"
>>> >> > IFD [Indexer]: delete "_d.fdt"
>>> >> > IFD [Indexer]: delete "_f.fnm"
>>> >> > IFD [Indexer]: delete "_j.fnm"
>>> >> > IFD [Indexer]: delete "_b.fnm"
>>> >> > IFD [Indexer]: delete "_d.nrm"
>>> >> > IFD [Indexer]: delete "_b.fdt"
>>> >> > IFD [Indexer]: delete "_k.frq"
>>> >> > IFD [Indexer]: delete "_c.fnm"
>>> >> > IFD [Indexer]: delete "_j.frq"
>>> >> > IFD [Indexer]: delete "_i.fnm"
>>> >> > IFD [Indexer]: delete "_f.frq"
>>> >> > IFD [Indexer]: delete "_b.fdx"
>>> >> > IW 9 [Indexer]: commit: done
>>> >> > IW 9 [Indexer]: at close: _a:C9780 _l:C9909
>>> >> >
>>> >> > =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D
>>> >> >
>>> >> > IFD [Indexer]: setInfoStream
>>> >> >
>>> >>
>>> deletionPolicy=3Dorg.apache.lucene.index.KeepOnlyLastCommitDeletionPoli=
cy@68d349c1
>>> >> > IW 10 [Indexer]: setInfoStream:
>>> >> > dir=3Dorg.apache.lucene.store.SimpleFSDirectory@<obfuscated
>>> >> > pathname>\lresumes1.search.main.1 autoCommit=3Dfalse
>>> >> >
>>> >>
>>> mergePolicy=3Dorg.apache.lucene.index.LogByteSizeMergePolicy@78f53abmer=
geScheduler
>>> >>
>>> =3Dorg.apache.lucene.index.ConcurrentMergeScheduler@52be036dramBufferSi=
zeMB
>>> >> =3D16.0
>>> >> > maxBufferedDocs=3D-1 maxBuffereDeleteTerms=3D-1
>>> >> > maxFieldLength=3D100000 index=3D_a:C9780 _l:C9909
>>> >> > IW 10 [Indexer]: flush at getReader
>>> >> > IW 10 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull
>>> >> docStoreOffset=3D0
>>> >> > flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDo=
cs=3D0
>>> >> > numBufDelTerms=3D0
>>> >> > IW 10 [Indexer]: =A0 index before flush _a:C9780 _l:C9909
>>> >> > IW 10 [UpdWriterBuild : 10]: DW: =A0 RAM: now flush @ usedMB=3D15.=
789
>>> >> > allocMB=3D15.789 deletesMB=3D0.212 triggerMB=3D16
>>> >> > IW 10 [UpdWriterBuild : 10]: =A0 flush: segment=3D_m docStoreSegme=
nt=3D_m
>>> >> > docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dfalse
>>> flushDocStores=3Dfalse
>>> >> > numDocs=3D1526 numBufDelTerms=3D1526
>>> >> > IW 10 [UpdWriterBuild : 10]: =A0 index before flush _a:C9780 _l:C9=
909
>>> >> > IW 10 [UpdWriterBuild : 10]: DW: flush postings as segment _m
>>> >> numDocs=3D1526
>>> >> > IW 10 [UpdWriterBuild : 10]: DW: =A0 oldRAMSize=3D16556032
>>> >> > newFlushedSize=3D4788823 docs/MB=3D334.138 new/old=3D28.925%
>>> >> > IFD [UpdWriterBuild : 10]: now checkpoint "segments_d" [3 segments=
 ;
>>> >> > isCommit =3D false]
>>> >> > IFD [UpdWriterBuild : 10]: now checkpoint "segments_d" [3 segments=
 ;
>>> >> > isCommit =3D false]
>>> >> > IW 10 [UpdWriterBuild : 10]: LMP: findMerges: 3 segments
>>> >> > IW 10 [UpdWriterBuild : 10]: LMP: =A0 level 6.8642592 to 7.6142592=
: 2
>>> >> segments
>>> >> > IW 10 [UpdWriterBuild : 10]: LMP: =A0 level 6.2247195 to 6.6802545=
: 1
>>> >> segments
>>> >> > IW 10 [UpdWriterBuild : 10]: CMS: now merge
>>> >> > IW 10 [UpdWriterBuild : 10]: CMS: =A0 index: _a:C9780 _l:C9909
>>> _m:C1526->_m
>>> >> > IW 10 [UpdWriterBuild : 10]: CMS: =A0 no more merges pending; now
>>> return
>>> >> > IW 10 [Indexer]: prepareCommit: flush
>>> >> > IW 10 [Indexer]: =A0 flush: segment=3D_n docStoreSegment=3D_m
>>> >> docStoreOffset=3D1526
>>> >> > flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStores=3Dtrue numDocs=
=3D501
>>> >> > numBufDelTerms=3D501
>>> >> > IW 10 [Indexer]: =A0 index before flush _a:C9780 _l:C9909 _m:C1526=
->_m
>>> >> > IW 10 [Indexer]: =A0 flush shared docStore segment _m
>>> >> > IW 10 [Indexer]: DW: closeDocStore: 2 files to flush to segment _m
>>> >> > numDocs=3D2027
>>> >> > IW 10 [Indexer]: DW: flush postings as segment _n numDocs=3D501
>>> >> > IW 10 [Indexer]: DW: =A0 oldRAMSize=3D6927360 newFlushedSize=3D165=
9342
>>> >> > docs/MB=3D316.593 new/old=3D23.953%
>>> >> > IFD [Indexer]: now checkpoint "segments_d" [4 segments ; isCommit =
=3D
>>> >> false]
>>> >> > IW 10 [Indexer]: DW: apply 2027 buffered deleted terms and 0 delet=
ed
>>> >> docIDs
>>> >> > and 0 deleted queries on 4 segments.
>>> >> > IFD [Indexer]: now checkpoint "segments_d" [4 segments ; isCommit =
=3D
>>> >> false]
>>> >> > IW 10 [Indexer]: LMP: findMerges: 4 segments
>>> >> > IW 10 [Indexer]: LMP: =A0 level 6.8642592 to 7.6142592: 2 segments
>>> >> > IW 10 [Indexer]: LMP: =A0 level 6.2247195 to 6.6802545: 1 segments
>>> >> > IW 10 [Indexer]: LMP: =A0 level -1.0 to 6.220011: 1 segments
>>> >> > IW 10 [Indexer]: CMS: now merge
>>> >> > IW 10 [Indexer]: CMS: =A0 index: _a:C9780 _l:C9909 _m:C1526->_m
>>> _n:C501->_m
>>> >> > IW 10 [Indexer]: CMS: =A0 no more merges pending; now return
>>> >> > IW 10 [Indexer]: startCommit(): start sizeInBytes=3D0
>>> >> > IW 10 [Indexer]: startCommit index=3D_a:C9780 _l:C9909 _m:C1526->_=
m
>>> >> > _n:C501->_m changeCount=3D6
>>> >> > IW 10 [Indexer]: now sync _m.frq
>>> >> > IW 10 [Indexer]: now sync _m.prx
>>> >> > IW 10 [Indexer]: now sync _n.tis
>>> >> > IW 10 [Indexer]: now sync _m.tis
>>> >> > IW 10 [Indexer]: now sync _n.frq
>>> >> > IW 10 [Indexer]: now sync _n.tii
>>> >> > IW 10 [Indexer]: now sync _m.tii
>>> >> > IW 10 [Indexer]: now sync _m.fnm
>>> >> > IW 10 [Indexer]: now sync _n.fnm
>>> >> > IW 10 [Indexer]: now sync _n.nrm
>>> >> > IW 10 [Indexer]: now sync _n.prx
>>> >> > IW 10 [Indexer]: now sync _m.nrm
>>> >> > IW 10 [Indexer]: now sync _m.fdt
>>> >> > IW 10 [Indexer]: now sync _m.fdx
>>> >> > IW 10 [Indexer]: done all syncs
>>> >> > IW 10 [Indexer]: flush at getReader
>>> >> > IW 10 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3D_n
>>> >> docStoreOffset=3D0
>>> >> > flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dtrue numDoc=
s=3D0
>>> >> > numBufDelTerms=3D0
>>> >> > IW 10 [Indexer]: =A0 index before flush _a:C9780 _l:C9909 _m:C1526=
->_m
>>> >> > _n:C501->_m
>>> >> > IW 10 [Indexer]: =A0 flush shared docStore segment _n
>>> >> > IW 10 [Indexer]: DW: closeDocStore: 0 files to flush to segment _n
>>> >> numDocs=3D0
>>> >> > IW 10 [Indexer]: commit: start
>>> >> > IW 10 [Indexer]: commit: already prepared
>>> >> > IW 10 [Indexer]: commit: pendingCommit !=3D null
>>> >> > IW 10 [Indexer]: commit: wrote segments file "segments_e"
>>> >> > IFD [Indexer]: now checkpoint "segments_e" [4 segments ; isCommit =
=3D
>>> true]
>>> >> > IFD [Indexer]: deleteCommits: now decRef commit "segments_d"
>>> >> > IFD [Indexer]: delete "segments_d"
>>> >> > IW 10 [Indexer]: commit: done
>>> >> > IW 10 [Indexer]: flush at getReader
>>> >> > IW 10 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull
>>> >> docStoreOffset=3D0
>>> >> > flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDo=
cs=3D0
>>> >> > numBufDelTerms=3D0
>>> >> > IW 10 [Indexer]: =A0 index before flush _a:C9780 _l:C9909 _m:C1526=
->_m
>>> >> > _n:C501->_m
>>> >> > IW 10 [Indexer]: now flush at close
>>> >> > IW 10 [Indexer]: =A0 flush: segment=3Dnull docStoreSegment=3Dnull
>>> >> docStoreOffset=3D0
>>> >> > flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=3Dfalse numDo=
cs=3D0
>>> >> > numBufDelTerms=3D0
>>> >> > IW 10 [Indexer]: =A0 index before flush _a:C9780 _l:C9909 _m:C1526=
->_m
>>> >> > _n:C501->_m
>>> >> > IW 10 [Indexer]: CMS: now merge
>>> >> > IW 10 [Indexer]: CMS: =A0 index: _a:C9780 _l:C9909 _m:C1526->_m
>>> _n:C501->_m
>>> >> > IW 10 [Indexer]: CMS: =A0 no more merges pending; now return
>>> >> > IW 10 [Indexer]: now call final commit()
>>> >> > IW 10 [Indexer]: startCommit(): start sizeInBytes=3D0
>>> >> > IW 10 [Indexer]: =A0 skip startCommit(): no changes pending
>>> >> > IW 10 [Indexer]: commit: pendingCommit =3D=3D null; skip
>>> >> > IW 10 [Indexer]: commit: done
>>> >> > IW 10 [Indexer]: at close: _a:C9780 _l:C9909 _m:C1526->_m _n:C501-=
>_m
>>> >> >
>>> >> >
>>> >> > Peter
>>> >> >
>>> >> > On Thu, Feb 25, 2010 at 1:13 PM, Michael McCandless <
>>> >> > lucene@mikemccandless.com> wrote:
>>> >> >
>>> >> >> Do you know the place in the infoStream output where you got a
>>> reader
>>> >> >> with the wrong (unexplained extra +1) version? =A0If so, can you =
post
>>> >> >> the infoStream output up to that point?
>>> >> >>
>>> >> >> Mike
>>> >> >>
>>> >> >> On Thu, Feb 25, 2010 at 10:22 AM, Peter Keegan <
>>> peterlkeegan@gmail.com>
>>> >> >> wrote:
>>> >> >> > I've reproduced this and I have a bunch of infoStream log files=
.
>>> Since
>>> >> >> the
>>> >> >> > messages have no timestamps, it's hard to tell where the releva=
nt
>>> >> entries
>>> >> >> > are. What should I be looking for?
>>> >> >> >
>>> >> >> > Peter
>>> >> >> >
>>> >> >> > On Mon, Feb 22, 2010 at 3:58 PM, Peter Keegan <
>>> peterlkeegan@gmail.com
>>> >> >> >wrote:
>>> >> >> >
>>> >> >> >> I'm pretty sure there are flushes and segment merges going on,
>>> but as
>>> >> >> you
>>> >> >> >> said, that shouldn't affect the version increment. I'll see wh=
at
>>> I
>>> >> can
>>> >> >> do to
>>> >> >> >> get infoStream output.
>>> >> >> >>
>>> >> >> >> Thanks,
>>> >> >> >> Peter
>>> >> >> >>
>>> >> >> >>
>>> >> >> >> On Mon, Feb 22, 2010 at 2:30 PM, Michael McCandless <
>>> >> >> >> lucene@mikemccandless.com> wrote:
>>> >> >> >>
>>> >> >> >>> Well I'm at a loss then. =A0The version should only increment=
 on
>>> >> commit.
>>> >> >> >>>
>>> >> >> >>> Can you make it all happen when infoStream is on, and post ba=
ck?
>>> >> >> >>>
>>> >> >> >>> Mike
>>> >> >> >>>
>>> >> >> >>> On Mon, Feb 22, 2010 at 12:35 PM, Peter Keegan <
>>> >> peterlkeegan@gmail.com
>>> >> >> >
>>> >> >> >>> wrote:
>>> >> >> >>> > Only one writer thread and one writer process.
>>> >> >> >>> > I'm calling IndexWriter(Directory d, Analyzer a, boolean
>>> create,
>>> >> >> >>> > MaxFieldLength mfl), which sets autocommit=3Dfalse.
>>> >> >> >>> >
>>> >> >> >>> > Peter
>>> >> >> >>> >
>>> >> >> >>> > On Mon, Feb 22, 2010 at 12:24 PM, Michael McCandless <
>>> >> >> >>> > lucene@mikemccandless.com> wrote:
>>> >> >> >>> >
>>> >> >> >>> >> That's curious.
>>> >> >> >>> >>
>>> >> >> >>> >> It's only on prepareCommit (or, commit, if you didn't firs=
t
>>> >> prepare,
>>> >> >> >>> >> since that will call prepareCommit internally) that this
>>> version
>>> >> >> >>> >> should increase.
>>> >> >> >>> >>
>>> >> >> >>> >> Is there only 1 thread doing this?
>>> >> >> >>> >>
>>> >> >> >>> >> Oh, and, are you passing false for autoCommit?
>>> >> >> >>> >>
>>> >> >> >>> >> Mike
>>> >> >> >>> >>
>>> >> >> >>> >> On Mon, Feb 22, 2010 at 11:43 AM, Peter Keegan <
>>> >> >> peterlkeegan@gmail.com
>>> >> >> >>> >
>>> >> >> >>> >> wrote:
>>> >> >> >>> >> > Using Lucene 2.9.1, I have the following pseudocode whic=
h
>>> gets
>>> >> >> >>> repeated
>>> >> >> >>> >> at
>>> >> >> >>> >> > regular intervals:
>>> >> >> >>> >> >
>>> >> >> >>> >> > 1. FSDirectory dir =3D FSDirectory.open(java.io.File);
>>> >> >> >>> >> > 2. dir.setLockFactory(new SingleInstanceLockFactory());
>>> >> >> >>> >> > 3. IndexWriter writer =3D new IndexWriter(dir, Analyzer,
>>> false,
>>> >> >> >>> >> maxFieldLen)
>>> >> >> >>> >> > 4. writer.getReader().getVersion();
>>> >> >> >>> >> > 5. writer.prepareCommit();
>>> >> >> >>> >> > 6. writer.getReader().getVersion();
>>> >> >> >>> >> > 7. writer.commit();
>>> >> >> >>> >> > 8. writer.close();
>>> >> >> >>> >> >
>>> >> >> >>> >> > I'm using the version number to keep external data in sy=
nch
>>> >> with
>>> >> >> the
>>> >> >> >>> >> index.
>>> >> >> >>> >> > Usually, the version number from (6) is 1 greater than f=
rom
>>> (4)
>>> >> >> and
>>> >> >> >>> the
>>> >> >> >>> >> > version from (4) equals the version from the previous (6=
).
>>> At
>>> >> >> least
>>> >> >> >>> once
>>> >> >> >>> >> a
>>> >> >> >>> >> > day, however, the version from (4) is 1 greater than fro=
m
>>> the
>>> >> >> >>> previous
>>> >> >> >>> >> (6).
>>> >> >> >>> >> > What would explain this sporadic behavior of version
>>> numbers?
>>> >> >> >>> >> >
>>> >> >> >>> >> > Thanks,
>>> >> >> >>> >> > Peter
>>> >> >> >>> >> >
>>> >> >> >>> >>
>>> >> >> >>> >>
>>> >> >>
>>> ---------------------------------------------------------------------
>>> >> >> >>> >> To unsubscribe, e-mail:
>>> java-user-unsubscribe@lucene.apache.org
>>> >> >> >>> >> For additional commands, e-mail:
>>> >> java-user-help@lucene.apache.org
>>> >> >> >>> >>
>>> >> >> >>> >>
>>> >> >> >>> >
>>> >> >> >>>
>>> >> >> >>>
>>> >> --------------------------------------------------------------------=
-
>>> >> >> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.o=
rg
>>> >> >> >>> For additional commands, e-mail:
>>> java-user-help@lucene.apache.org
>>> >> >> >>>
>>> >> >> >>>
>>> >> >> >>
>>> >> >> >
>>> >> >>
>>> >> >>
>>> ---------------------------------------------------------------------
>>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >> >>
>>> >> >>
>>> >> >
>>> >>
>>> >> --------------------------------------------------------------------=
-
>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>
>>> >>
>>> >
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 20:34:09 2010
Return-Path: <java-user-return-45215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52655 invoked from network); 26 Feb 2010 20:34:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 20:34:09 -0000
Received: (qmail 23662 invoked by uid 500); 26 Feb 2010 20:34:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23632 invoked by uid 500); 26 Feb 2010 20:34:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23624 invoked by uid 99); 26 Feb 2010 20:34:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 20:34:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 20:33:56 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id BEF3D24002
	for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 22:33:35 +0200 (EET)
Message-ID: <4B88301F.4010909@sirma.bg>
Date: Fri, 26 Feb 2010 22:33:35 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: NumericField exact match
References: <4B881F05.1020202@sirma.bg> <000301cab71c$9050eb70$b0f2c250$@de>
In-Reply-To: <000301cab71c$9050eb70$b0f2c250$@de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the answer Uwe,

Does it matter precision step when I use NumericRangeQuery for exact 
matches? I mean if I use the default precision step when indexing that 
fields it is guaranteed that:
1. With this query I will always hit the docs that contain "val" for the 
"field";
2. I will never hit docs with different that have diferent "val" for the 
"field";

Ivan


Uwe Schindler wrote:
> It's very easy: NumericRangeQuery.nexXxxRange(field, val, val, true, true) - val is the exact match. This is not slower as this automatically rewrites to a non-scored TermQuery. If you already changed QueryParser, you can also override the method for exactMatches (newTermQuery).
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>   
>> -----Original Message-----
>> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
>> Sent: Friday, February 26, 2010 8:21 PM
>> To: LUCENE MAIL LIST
>> Subject: NumericField exact match
>>
>> Hi Guys,
>>
>> Is it possible to make exact searches on fields that are of type
>> NumericField and if yes how?
>> In the LIA book part 2 I found only information about Range searches on
>> such fields and how to Sort them.
>>
>> Example - I have field "size" that can take integers as values.
>> I want to get docs that are with "size:100".
>> For the regular fields "size:100" is OK to pass to Parser but with
>> NumericField it does not work.
>> The only approach to support such fields that I can see is - to have
>> parallel casual Field (example "size2") and to index the same data
>> there.
>> And then when user wants exact search on "size" I to perform
>> "size2:100".
>>
>> Is this the most appropriate way for my case on your opinion?
>>
>> Thanks,
>> Ivan
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>     
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 3990 (20090406) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 20:42:29 2010
Return-Path: <java-user-return-45216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54445 invoked from network); 26 Feb 2010 20:42:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 20:42:29 -0000
Received: (qmail 37312 invoked by uid 500); 26 Feb 2010 20:42:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37248 invoked by uid 500); 26 Feb 2010 20:42:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37237 invoked by uid 99); 26 Feb 2010 20:42:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 20:42:27 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [132.249.20.114] (HELO postal.sdsc.edu) (132.249.20.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 20:42:19 +0000
Received: from mta.ad.sdsc.edu (mta.ad.sdsc.edu [132.249.69.68])
	by postal.sdsc.edu (8.11.7/8.11.7/server/79) with ESMTP id o1QKfwk22728
	for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 12:41:58 -0800 (PST)
Received: from MBX.ad.sdsc.edu ([fe80::85f9:e068:7dc0:4fe0]) by
 mta.ad.sdsc.edu ([132.249.69.68]) with mapi; Fri, 26 Feb 2010 12:41:53 -0800
From: Christopher Condit <condit@sdsc.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 26 Feb 2010 12:41:51 -0800
Subject: recovering payload from fields
Thread-Topic: recovering payload from fields
Thread-Index: Acq3JB/D8Sbne6JJSTqfFD6if0PfFA==
Message-ID: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898E@MBX.ad.sdsc.edu>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

I'm trying to store semantic information in payloads at index time. I belie=
ve this part is successful - but I'm having trouble getting access to the p=
ayload locations after the index is created. I'd like to know the offset in=
 the original text for the token with the payload - and get this informatio=
n for all payloads that are set in a Field even if they don't relate to the=
 query. I tried (from the highlighting filter):
TokenStream tokens =3D TokenSources.getTokenStream(reader, 0, "body");
 while (tokens.incrementToken()) {
    TermAttribute term =3D tokens.getAttribute(TermAttribute.class);
    if (toker.hasAttribute(PayloadAttribute.class)) {
      PayloadAttribute payload =3D tokens.getAttribute(PayloadAttribute.cla=
ss);
      OffsetAttribute offset =3D toker.getAttribute(OffsetAttribute.class);
    }		=09
  }
But the OffsetAttribute never seems to contain any information.
In my token filter do I need to do more than:
offsetAtt =3D addAttribute(OffsetAttribute.class);
during construction in order to store Offset information?

Thanks,
-Chris
=09

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 20:45:56 2010
Return-Path: <java-user-return-45217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55233 invoked from network); 26 Feb 2010 20:45:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 20:45:56 -0000
Received: (qmail 45048 invoked by uid 500); 26 Feb 2010 20:45:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45017 invoked by uid 500); 26 Feb 2010 20:45:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45009 invoked by uid 99); 26 Feb 2010 20:45:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 20:45:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ctignor@thinkmap.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 20:45:46 +0000
Received: by bwz9 with SMTP id 9so366936bwz.5
        for <java-user@lucene.apache.org>; Fri, 26 Feb 2010 12:45:23 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.38.77 with SMTP id a13mr691513bke.26.1267217122997; Fri, 
	26 Feb 2010 12:45:22 -0800 (PST)
In-Reply-To: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898E@MBX.ad.sdsc.edu>
References: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898E@MBX.ad.sdsc.edu>
Date: Fri, 26 Feb 2010 15:45:22 -0500
Message-ID: <6f287d1b1002261245h332ae90v1af210b6a5bcfb72@mail.gmail.com>
Subject: Re: recovering payload from fields
From: Christopher Tignor <ctignor@thinkmap.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032555a31678363c048086fa95
X-Virus-Checked: Checked by ClamAV on apache.org

--00032555a31678363c048086fa95
Content-Type: text/plain; charset=ISO-8859-1

Hello,

To my knoweldge, the character position of the tokens is not preserved by
Lucene - only the ordinal postion of token's within a document / field is
preserved.  Thus you need to store this character offset information
separately, say, as Payload data.

best,

C>T>

On Fri, Feb 26, 2010 at 3:41 PM, Christopher Condit <condit@sdsc.edu> wrote:

> I'm trying to store semantic information in payloads at index time. I
> believe this part is successful - but I'm having trouble getting access to
> the payload locations after the index is created. I'd like to know the
> offset in the original text for the token with the payload - and get this
> information for all payloads that are set in a Field even if they don't
> relate to the query. I tried (from the highlighting filter):
> TokenStream tokens = TokenSources.getTokenStream(reader, 0, "body");
>  while (tokens.incrementToken()) {
>    TermAttribute term = tokens.getAttribute(TermAttribute.class);
>    if (toker.hasAttribute(PayloadAttribute.class)) {
>      PayloadAttribute payload =
> tokens.getAttribute(PayloadAttribute.class);
>      OffsetAttribute offset = toker.getAttribute(OffsetAttribute.class);
>    }
>  }
> But the OffsetAttribute never seems to contain any information.
> In my token filter do I need to do more than:
> offsetAtt = addAttribute(OffsetAttribute.class);
> during construction in order to store Offset information?
>
> Thanks,
> -Chris
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
TH!NKMAP

Christopher Tignor | Senior Software Architect
155 Spring Street NY, NY 10012
p.212-285-8600 x385 f.212-285-8999

--00032555a31678363c048086fa95--

From java-user-return-45218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 21:06:24 2010
Return-Path: <java-user-return-45218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61329 invoked from network); 26 Feb 2010 21:06:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 21:06:24 -0000
Received: (qmail 64884 invoked by uid 500); 26 Feb 2010 21:06:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64768 invoked by uid 500); 26 Feb 2010 21:06:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64756 invoked by uid 99); 26 Feb 2010 21:06:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 21:06:22 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [132.249.20.114] (HELO postal.sdsc.edu) (132.249.20.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 21:06:14 +0000
Received: from mta.ad.sdsc.edu (mta.ad.sdsc.edu [132.249.69.68])
	by postal.sdsc.edu (8.11.7/8.11.7/server/79) with ESMTP id o1QL5rk00051;
	Fri, 26 Feb 2010 13:05:53 -0800 (PST)
Received: from MBX.ad.sdsc.edu ([fe80::85f9:e068:7dc0:4fe0]) by
 mta.ad.sdsc.edu ([132.249.69.68]) with mapi; Fri, 26 Feb 2010 13:05:48 -0800
From: Christopher Condit <condit@sdsc.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: Christopher Tignor <ctignor@thinkmap.com>
Date: Fri, 26 Feb 2010 13:05:45 -0800
Subject: RE: recovering payload from fields
Thread-Topic: recovering payload from fields
Thread-Index: Acq3JLeWaVsDGxwOTFiTygPAB1h3BwAAle5w
Message-ID: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898F@MBX.ad.sdsc.edu>
References: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898E@MBX.ad.sdsc.edu>
 <6f287d1b1002261245h332ae90v1af210b6a5bcfb72@mail.gmail.com>
In-Reply-To: <6f287d1b1002261245h332ae90v1af210b6a5bcfb72@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Hi Chris-
> To my knoweldge, the character position of the tokens is not preserved by
> Lucene - only the ordinal postion of token's within a document / field is
> preserved.  Thus you need to store this character offset information
> separately, say, as Payload data.

Thanks for the information. So adding the OffsetAttribute at index time doe=
sn't embed the offset information in the index - it just makes it available=
 to the TokenFilter? I'll try adding the offset from the attribute to the p=
ayload..

In terms of getting access to the payloads is the best way to reconstruct t=
he token stream (as the Highlighter does)? Or is than an easier way to just=
 get access to the payloads?

Thanks,
-Chris


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 21:20:01 2010
Return-Path: <java-user-return-45219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63722 invoked from network); 26 Feb 2010 21:20:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 21:20:01 -0000
Received: (qmail 92163 invoked by uid 500); 26 Feb 2010 21:19:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92126 invoked by uid 500); 26 Feb 2010 21:19:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92118 invoked by uid 99); 26 Feb 2010 21:19:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 21:19:59 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of petite_abeille@mac.com designates 17.148.16.104 as permitted sender)
Received: from [17.148.16.104] (HELO asmtpout029.mac.com) (17.148.16.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 21:19:48 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=us-ascii
Received: from [192.168.1.34] ([92.104.14.51])
 by asmtp029.mac.com (Sun Java(tm) System Messaging Server 6.3-8.01 (built Dec
 16 2008; 32bit)) with ESMTPSA id <0KYG002V0WJ8MM10@asmtp029.mac.com> for
 java-user@lucene.apache.org; Fri, 26 Feb 2010 13:19:17 -0800 (PST)
X-Proofpoint-Spam-Details: rule=notspam policy=default score=0 spamscore=0
 ipscore=0 phishscore=0 bulkscore=0 adultscore=0 classifier=spam adjust=0
 reason=mlx engine=5.0.0-0908210000 definitions=main-1002260149
Subject: Re: NAS vs SAN vs Server Disk RAID
From: Petite Abeille <petite_abeille@mac.com>
In-reply-to: <9b906c961002241554x7a3e5225q3aa856bc1f99ebbe@mail.gmail.com>
Date: Fri, 26 Feb 2010 22:18:43 +0100
Message-id: <A08CD42C-ADE6-4EC8-9E1B-4A450F4FC6E6@mac.com>
References: <9b906c961002241554x7a3e5225q3aa856bc1f99ebbe@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 25, 2010, at 12:54 AM, Andrew Bruno wrote:

> Since the disk IO on the server is high, our datacenter engineers suggested
> we look at NAS or SAN, for performance gain, and for future growth.

Alternatively, get a stack of RamSan and call it a day:

http://www.ramsan.com/products/products.htm

If you cannot afford these, something like Sun's storage server is a pretty cost effective solution:

http://www.oracle.com/us/products/servers-storage/servers/x64/031210.htm

Personally, I would stay away from a SAN based solution and favor local storage. As always, YMMV.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 26 21:54:54 2010
Return-Path: <java-user-return-45220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77060 invoked from network); 26 Feb 2010 21:54:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Feb 2010 21:54:54 -0000
Received: (qmail 28592 invoked by uid 500); 26 Feb 2010 21:54:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28563 invoked by uid 500); 26 Feb 2010 21:54:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28555 invoked by uid 99); 26 Feb 2010 21:54:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Feb 2010 21:54:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.191.69.82] (HELO web32905.mail.mud.yahoo.com) (209.191.69.82)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Feb 2010 21:54:44 +0000
Received: (qmail 89270 invoked by uid 60001); 26 Feb 2010 21:54:22 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1267221262; bh=5wVDc3B2bQePd+BYHmCgc4mODDrvO5Ny5D5T9c6f1os=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=hryyD7nryQz9yLZvXtGOmNQw0arTkmi48j+SRVjO/boPvEaOLV8eTrvhTtEdIdeW6NJCxBVZHiGY0/ouCFaqhL10jml8NDWR7pgwez3gPFLrdhMfkIBimk2wC6ertzUE49hlwKSHcDYc0ABnHGVll7/6UN/xdQi5zAQ470jNK2s=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=0lg8DNHBNSbz788v+RNlsh+2a7iAo1T16NLOGMxU3bp5sJiJMsix/hgQpO/Fx9W/LTOqddPAMiWQZ15itbXU6YUFNHT0Fa2NUGLx+DgwO1fUV/w5BVfiepBE7NSk08UU80q7Cb0DdvjeofxmEN2nXOsxQsKfVDDg0u36skWsG00=;
Message-ID: <853423.85902.qm@web32905.mail.mud.yahoo.com>
X-YMail-OSG: qnxNHjsVM1mwRMB1HpWriEItx9yCO90uma5Nxit5tZut_7N0oilbNVkHvGl5EfT32M16RpuJsiVDoD_f_WW6EVmZ_B05wNK6meBJLZGWmh6aQzylMlIgDOPruGY0cshHxVsSfaF26.pSW9dlGkdwSew.1MCxJclT57.dVveBqT19qSL6huPE5IBqvnLVQM.RkYpjsKbUGZiGYkB_SgF2hfRxtGU06vQiWdt5MzRrFaVu5jfl9AOJyq_mggIAdjWeQhHGAJSPM9yo_bUcN7SIh7XMqvEgcMkSPVIElUlYd4R.1vXvcz9By_pBTFQuhleKDyxB7Cb701SmPgiooZiSZJ4-
Received: from [72.36.94.20] by web32905.mail.mud.yahoo.com via HTTP; Fri, 26 Feb 2010 13:54:22 PST
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
Date: Fri, 26 Feb 2010 13:54:22 -0800 (PST)
From: Justin <crynax@yahoo.com>
Subject: Infinite loop when searching empty index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Is this a bug in Lucene Java as of trunk@915399?

    int numDocs = reader.numDocs(); // = 0 (empty index)
    TopDocsCollector collector = TopScoreDocCollector.create(numDocs, 
true);
    searcher.search(new MatchAllDocsQuery(), collector);  // never 
returns

    // Searcher
    public void search(Query query, Collector collector)
      throws IOException {
      search(createWeight(query), null, collector); // never returns
    }

    // extends IndexSearcher
    public void search(Weight weight, Filter filter, final Collector collector) throws IOException {
      boolean topScorer = (filter == null) true : false;
      Scorer scorer = weight.scorer(reader, true, topScorer);
      if (scorer != null && topScorer) {
        scorer.score(collector); // never returns

    // Scorer
    public void score(Collector collector) throws IOException {
      collector.setScorer(this);
      int doc;
      while ((doc = nextDoc()) != NO_MORE_DOCS) { // doc = 0 (infinite)
        collector.collect(doc);
      }
    }


Thanks for any feedback,
Justin


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 00:43:29 2010
Return-Path: <java-user-return-45221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39909 invoked from network); 27 Feb 2010 00:43:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 00:43:27 -0000
Received: (qmail 61776 invoked by uid 500); 27 Feb 2010 00:43:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61705 invoked by uid 500); 27 Feb 2010 00:43:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61696 invoked by uid 99); 27 Feb 2010 00:43:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 00:43:25 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.249.20.114] (HELO postal.sdsc.edu) (132.249.20.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 00:43:15 +0000
Received: from mta.ad.sdsc.edu (mta.ad.sdsc.edu [132.249.69.68])
	by postal.sdsc.edu (8.11.7/8.11.7/server/79) with ESMTP id o1R0gqk03008;
	Fri, 26 Feb 2010 16:42:52 -0800 (PST)
Received: from MBX.ad.sdsc.edu ([fe80::85f9:e068:7dc0:4fe0]) by
 mta.ad.sdsc.edu ([132.249.69.68]) with mapi; Fri, 26 Feb 2010 16:42:47 -0800
From: Christopher Condit <condit@sdsc.edu>
To: Christopher Tignor <ctignor@thinkmap.com>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 26 Feb 2010 16:42:44 -0800
Subject: RE: recovering payload from fields
Thread-Topic: recovering payload from fields
Thread-Index: Acq3Kk5bAZh2E3sAQm+71TjdWDaGrQAGpDiw
Message-ID: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B899A@MBX.ad.sdsc.edu>
References: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898E@MBX.ad.sdsc.edu>
	 <6f287d1b1002261245h332ae90v1af210b6a5bcfb72@mail.gmail.com>
	 <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898F@MBX.ad.sdsc.edu>
 <6f287d1b1002261325l55346845n3fb177de35cb4d61@mail.gmail.com>
In-Reply-To: <6f287d1b1002261325l55346845n3fb177de35cb4d61@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

> Payload Data is accessed through PayloadSpans so using SpanQUeries is the
> netry point it seems.  There are tools like PayloadSpanUtil that convert =
other
> queries into SpanQueries for this purpose if needed but the api for Paylo=
ads
> looks it like it goes through Spans is the bottom line.

So there's no way to iterate through all the payloads for a given field? I =
can't use the SpanQuery mechanism because in this case the entire field wil=
l be displayed - and I can't search for "*". Is there some trick I'm not th=
inking of?

> this is the tip of the iceberg; a big dangerous iceberg...

Yes - I'm beginning to see that...

Thanks,
-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 08:36:16 2010
Return-Path: <java-user-return-45222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80713 invoked from network); 27 Feb 2010 08:36:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 08:36:16 -0000
Received: (qmail 37563 invoked by uid 500); 27 Feb 2010 08:36:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37498 invoked by uid 500); 27 Feb 2010 08:36:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37490 invoked by uid 99); 27 Feb 2010 08:36:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 08:36:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.86 as permitted sender)
Received: from [61.135.132.86] (HELO relay.mail.sohu.com) (61.135.132.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 08:36:03 +0000
Received: from 85737ec54efc4e1 (unknown [121.35.189.181])
	by relay.mail.sohu.com (Postfix) with ESMTPA id 32942698256
	for <java-user@lucene.apache.org>; Sat, 27 Feb 2010 16:35:26 +0800 (CST)
From: "luocanrao" <luocan19826164@sohu.com>
To: <java-user@lucene.apache.org>
References: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898E@MBX.ad.sdsc.edu>	 <6f287d1b1002261245h332ae90v1af210b6a5bcfb72@mail.gmail.com>	 <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898F@MBX.ad.sdsc.edu> <6f287d1b1002261325l55346845n3fb177de35cb4d61@mail.gmail.com> <BAFDED91EF7D5A43A30F897D6C94B1284DB24B899A@MBX.ad.sdsc.edu>
In-Reply-To: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B899A@MBX.ad.sdsc.edu>
Subject: custom FieldCache cost too much time. how can I preload the the custom fieldCache when new segment exits!
Date: Sat, 27 Feb 2010 16:35:38 +0800
Message-ID: <002301cab787$d7db6c70$87924550$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acq3Kk5bAZh2E3sAQm+71TjdWDaGrQAGpDiwABBkkDA=
Content-Language: zh-cn
x-cr-puzzleid: {0413744F-DCDC-4A38-BA22-88C2DBE0759D}
x-cr-hashedpuzzle: k1U= Anay Cp+L DPuG DQMt D5Hd D9ql FZqB Flcu GFIw Ggkn GsCQ HK4d IgQo J1Cl K0gO;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{0413744F-DCDC-4A38-BA22-88C2DBE0759D};bAB1AG8AYwBhAG4AMQA5ADgAMgA2ADEANgA0AEAAcwBvAGgAdQAuAGMAbwBtAA==;Sat, 27 Feb 2010 08:35:34 GMT;YwB1AHMAdABvAG0AIABGAGkAZQBsAGQAQwBhAGMAaABlACAAYwBvAHMAdAAgAHQAbwBvACAAbQB1AGMAaAAgAHQAaQBtAGUALgAgAGgAbwB3ACAAYwBhAG4AIABJACAAcAByAGUAbABvAGEAZAAgAHQAaABlACAAdABoAGUAIABjAHUAcwB0AG8AbQAgAGYAaQBlAGwAZABDAGEAYwBoAGUAIAB3AGgAZQBuACAAbgBlAHcAIABzAGUAZwBtAGUAbgB0ACAAZQB4AGkAdABzACEA
X-SOHU-Antispam-Bayes: 0
X-Virus-Checked: Checked by ClamAV on apache.org

custom FieldCache cost too much time.
So every first time,reopen the new reader ,it interfere the performance of
search
I hope someone can tell me,how can I preload the the custom fieldCache when
new segment exits!
Thanks again!

here is source	, In FieldComparator.setNextReader method    	
((C2CFieldManager)fieldManager).lCommID =
FieldCache.DEFAULT.getLongs(reader, "1",new LongParser(){
				public long parseLong(String documentIDStr)
{
					documentIDStr =
documentIDStr.substring(16);
					long documentID =
Long.parseLong(documentIDStr,16);
					return documentID;
				}
	    		
	    	});


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 10:37:25 2010
Return-Path: <java-user-return-45223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18927 invoked from network); 27 Feb 2010 10:37:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 10:37:25 -0000
Received: (qmail 92262 invoked by uid 500); 27 Feb 2010 10:37:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92075 invoked by uid 500); 27 Feb 2010 10:37:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92066 invoked by uid 99); 27 Feb 2010 10:37:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 10:37:23 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 10:37:16 +0000
Received: by gyb13 with SMTP id 13so439187gyb.35
        for <java-user@lucene.apache.org>; Sat, 27 Feb 2010 02:36:55 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.251.5 with SMTP id y5mr1251700ybh.48.1267267014885; Sat, 
	27 Feb 2010 02:36:54 -0800 (PST)
In-Reply-To: <002301cab787$d7db6c70$87924550$@com>
References: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898E@MBX.ad.sdsc.edu>
	 <6f287d1b1002261245h332ae90v1af210b6a5bcfb72@mail.gmail.com>
	 <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898F@MBX.ad.sdsc.edu>
	 <6f287d1b1002261325l55346845n3fb177de35cb4d61@mail.gmail.com>
	 <BAFDED91EF7D5A43A30F897D6C94B1284DB24B899A@MBX.ad.sdsc.edu>
	 <002301cab787$d7db6c70$87924550$@com>
Date: Sat, 27 Feb 2010 05:36:54 -0500
Message-ID: <9ac0c6aa1002270236g6560e5e0x944709f60c378925@mail.gmail.com>
Subject: Re: custom FieldCache cost too much time. how can I preload the the 
	custom fieldCache when new segment exits!
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

How are you opening a new reader?

If it's a near-real-time reader (IndexWriter.getReader), or you use
IndexReader.reopen, it should only be the newly created segments that
have to generate the field cache entry, which most of the time should
be fast.

If you are already using those APIs and its still not fast enough,
then you should just warm the reader before using it (additionally,
for a near-real-time reader you should warm newly merged segments by
installing a mergedSegmentWarmer on the writer).

Mike

On Sat, Feb 27, 2010 at 3:35 AM, luocanrao <luocan19826164@sohu.com> wrote:
> custom FieldCache cost too much time.
> So every first time,reopen the new reader ,it interfere the performance o=
f
> search
> I hope someone can tell me,how can I preload the the custom fieldCache wh=
en
> new segment exits!
> Thanks again!
>
> here is source =A0, In FieldComparator.setNextReader method
> ((C2CFieldManager)fieldManager).lCommID =3D
> FieldCache.DEFAULT.getLongs(reader, "1",new LongParser(){
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0public lon=
g parseLong(String documentIDStr)
> {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0documentIDStr =3D
> documentIDStr.substring(16);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0long documentID =3D
> Long.parseLong(documentIDStr,16);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0return documentID;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0});
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 10:42:46 2010
Return-Path: <java-user-return-45224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20745 invoked from network); 27 Feb 2010 10:42:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 10:42:46 -0000
Received: (qmail 95530 invoked by uid 500); 27 Feb 2010 10:42:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95475 invoked by uid 500); 27 Feb 2010 10:42:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95467 invoked by uid 99); 27 Feb 2010 10:42:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 10:42:44 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 10:42:38 +0000
Received: by gwaa18 with SMTP id a18so440181gwa.35
        for <java-user@lucene.apache.org>; Sat, 27 Feb 2010 02:42:16 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.28.11 with SMTP id f11mr2436404ybj.287.1267267335873; Sat, 
	27 Feb 2010 02:42:15 -0800 (PST)
In-Reply-To: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B899A@MBX.ad.sdsc.edu>
References: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898E@MBX.ad.sdsc.edu>
	 <6f287d1b1002261245h332ae90v1af210b6a5bcfb72@mail.gmail.com>
	 <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898F@MBX.ad.sdsc.edu>
	 <6f287d1b1002261325l55346845n3fb177de35cb4d61@mail.gmail.com>
	 <BAFDED91EF7D5A43A30F897D6C94B1284DB24B899A@MBX.ad.sdsc.edu>
Date: Sat, 27 Feb 2010 05:42:15 -0500
Message-ID: <9ac0c6aa1002270242r3ff1d3edp7b5665ed788c658b@mail.gmail.com>
Subject: Re: recovering payload from fields
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

You can also access payloads through the TermPositions enum, but, this
is by term and then by doc.

It sounds like you need to iterate through all terms sequentially in a
given field in the doc, accessing offset & payload?  In which case
reanalyzing at search time may be the best way to go.

You can store term vectors in the index, which will store offsets (if
you ask it to), but, payloads are not currently stored with term
vectors.

Mike

On Fri, Feb 26, 2010 at 7:42 PM, Christopher Condit <condit@sdsc.edu> wrote=
:
>> Payload Data is accessed through PayloadSpans so using SpanQUeries is th=
e
>> netry point it seems. =A0There are tools like PayloadSpanUtil that conve=
rt other
>> queries into SpanQueries for this purpose if needed but the api for Payl=
oads
>> looks it like it goes through Spans is the bottom line.
>
> So there's no way to iterate through all the payloads for a given field? =
I can't use the SpanQuery mechanism because in this case the entire field w=
ill be displayed - and I can't search for "*". Is there some trick I'm not =
thinking of?
>
>> this is the tip of the iceberg; a big dangerous iceberg...
>
> Yes - I'm beginning to see that...
>
> Thanks,
> -Chris
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 10:52:46 2010
Return-Path: <java-user-return-45225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24297 invoked from network); 27 Feb 2010 10:52:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 10:52:46 -0000
Received: (qmail 6059 invoked by uid 500); 27 Feb 2010 10:52:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6016 invoked by uid 500); 27 Feb 2010 10:52:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6008 invoked by uid 99); 27 Feb 2010 10:52:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 10:52:44 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 10:52:37 +0000
Received: by gwaa18 with SMTP id a18so441555gwa.35
        for <java-user@lucene.apache.org>; Sat, 27 Feb 2010 02:52:16 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.32.1 with SMTP id f1mr559189ybf.222.1267267935966; Sat, 27 
	Feb 2010 02:52:15 -0800 (PST)
In-Reply-To: <853423.85902.qm@web32905.mail.mud.yahoo.com>
References: <853423.85902.qm@web32905.mail.mud.yahoo.com>
Date: Sat, 27 Feb 2010 05:52:15 -0500
Message-ID: <9ac0c6aa1002270252x7c98dbd7x154357ec7cd74ca9@mail.gmail.com>
Subject: Re: Infinite loop when searching empty index
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I turned this into a unit test... but I don't see it never
returning... the test passes.

How did you create your empty reader?

Patch:

Index: src/test/org/apache/lucene/search/TestMatchAllDocsQuery.java
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
--- src/test/org/apache/lucene/search/TestMatchAllDocsQuery.java	(revision
916939)
+++ src/test/org/apache/lucene/search/TestMatchAllDocsQuery.java	(working c=
opy)
@@ -27,6 +27,8 @@
 import org.apache.lucene.index.IndexReader;
 import org.apache.lucene.queryParser.QueryParser;
 import org.apache.lucene.store.RAMDirectory;
+import org.apache.lucene.store.Directory;
+import org.apache.lucene.store.MockRAMDirectory;

 import org.apache.lucene.util.LuceneTestCase;

@@ -115,6 +117,21 @@
     dir.close();
   }

+  public void testNeverReturns() throws Exception {
+    Directory dir =3D new MockRAMDirectory();
+    IndexWriter w =3D new IndexWriter(dir, new
StandardAnalyzer(TEST_VERSION_CURRENT),
IndexWriter.MaxFieldLength.UNLIMITED);
+    IndexReader r =3D w.getReader();
+    w.close();
+
+    assertEquals(0, r.numDocs()); // empty index
+    IndexSearcher s =3D new IndexSearcher(r);
+    TopDocsCollector collector =3D TopScoreDocCollector.create(0, true);
+    s.search(new MatchAllDocsQuery(), collector);  // never returns
+    s.close();
+    r.close();
+    dir.close();
+  }
+
   public void testEquals() {
     Query q1 =3D new MatchAllDocsQuery();
     Query q2 =3D new MatchAllDocsQuery();

Mike

On Fri, Feb 26, 2010 at 4:54 PM, Justin <crynax@yahoo.com> wrote:
> Is this a bug in Lucene Java as of trunk@915399?
>
> =A0 =A0int numDocs =3D reader.numDocs(); // =3D 0 (empty index)
> =A0 =A0TopDocsCollector collector =3D TopScoreDocCollector.create(numDocs=
,
> true);
> =A0 =A0searcher.search(new MatchAllDocsQuery(), collector); =A0// never
> returns
>
> =A0 =A0// Searcher
> =A0 =A0public void search(Query query, Collector collector)
> =A0 =A0 =A0throws IOException {
> =A0 =A0 =A0search(createWeight(query), null, collector); // never returns
> =A0 =A0}
>
> =A0 =A0// extends IndexSearcher
> =A0 =A0public void search(Weight weight, Filter filter, final Collector c=
ollector) throws IOException {
> =A0 =A0 =A0boolean topScorer =3D (filter =3D=3D null) true : false;
> =A0 =A0 =A0Scorer scorer =3D weight.scorer(reader, true, topScorer);
> =A0 =A0 =A0if (scorer !=3D null && topScorer) {
> =A0 =A0 =A0 =A0scorer.score(collector); // never returns
>
> =A0 =A0// Scorer
> =A0 =A0public void score(Collector collector) throws IOException {
> =A0 =A0 =A0collector.setScorer(this);
> =A0 =A0 =A0int doc;
> =A0 =A0 =A0while ((doc =3D nextDoc()) !=3D NO_MORE_DOCS) { // doc =3D 0 (=
infinite)
> =A0 =A0 =A0 =A0collector.collect(doc);
> =A0 =A0 =A0}
> =A0 =A0}
>
>
> Thanks for any feedback,
> Justin
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 10:56:18 2010
Return-Path: <java-user-return-45226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25689 invoked from network); 27 Feb 2010 10:56:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 10:56:18 -0000
Received: (qmail 9824 invoked by uid 500); 27 Feb 2010 10:56:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9704 invoked by uid 500); 27 Feb 2010 10:56:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9696 invoked by uid 99); 27 Feb 2010 10:56:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 10:56:16 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 10:56:06 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 0BA83D3600D
	for <java-user@lucene.apache.org>; Sat, 27 Feb 2010 11:55:46 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id C9bVug7KWq2H for <java-user@lucene.apache.org>;
	Sat, 27 Feb 2010 11:55:43 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 1A9DED3600A
	for <java-user@lucene.apache.org>; Sat, 27 Feb 2010 11:55:43 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <853423.85902.qm@web32905.mail.mud.yahoo.com> <9ac0c6aa1002270252x7c98dbd7x154357ec7cd74ca9@mail.gmail.com>
In-Reply-To: <9ac0c6aa1002270252x7c98dbd7x154357ec7cd74ca9@mail.gmail.com>
Subject: RE: Infinite loop when searching empty index
Date: Sat, 27 Feb 2010 11:55:55 +0100
Message-ID: <000701cab79b$6ffa29c0$4fee7d40$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acq3mwJO5+lHkFwiT9CStAFHvDPwswAAFszA
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

I was doing the same, MatchAllDocsScorer is fine and also AbstractAllTermDocs.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Saturday, February 27, 2010 11:52 AM
> To: java-user@lucene.apache.org
> Subject: Re: Infinite loop when searching empty index
> 
> I turned this into a unit test... but I don't see it never
> returning... the test passes.
> 
> How did you create your empty reader?
> 
> Patch:
> 
> Index: src/test/org/apache/lucene/search/TestMatchAllDocsQuery.java
> ===================================================================
> --- src/test/org/apache/lucene/search/TestMatchAllDocsQuery.java
> 	(revision
> 916939)
> +++ src/test/org/apache/lucene/search/TestMatchAllDocsQuery.java
> 	(working copy)
> @@ -27,6 +27,8 @@
>  import org.apache.lucene.index.IndexReader;
>  import org.apache.lucene.queryParser.QueryParser;
>  import org.apache.lucene.store.RAMDirectory;
> +import org.apache.lucene.store.Directory;
> +import org.apache.lucene.store.MockRAMDirectory;
> 
>  import org.apache.lucene.util.LuceneTestCase;
> 
> @@ -115,6 +117,21 @@
>      dir.close();
>    }
> 
> +  public void testNeverReturns() throws Exception {
> +    Directory dir = new MockRAMDirectory();
> +    IndexWriter w = new IndexWriter(dir, new
> StandardAnalyzer(TEST_VERSION_CURRENT),
> IndexWriter.MaxFieldLength.UNLIMITED);
> +    IndexReader r = w.getReader();
> +    w.close();
> +
> +    assertEquals(0, r.numDocs()); // empty index
> +    IndexSearcher s = new IndexSearcher(r);
> +    TopDocsCollector collector = TopScoreDocCollector.create(0, true);
> +    s.search(new MatchAllDocsQuery(), collector);  // never returns
> +    s.close();
> +    r.close();
> +    dir.close();
> +  }
> +
>    public void testEquals() {
>      Query q1 = new MatchAllDocsQuery();
>      Query q2 = new MatchAllDocsQuery();
> 
> Mike
> 
> On Fri, Feb 26, 2010 at 4:54 PM, Justin <crynax@yahoo.com> wrote:
> > Is this a bug in Lucene Java as of trunk@915399?
> >
> >    int numDocs = reader.numDocs(); // = 0 (empty index)
> >    TopDocsCollector collector = TopScoreDocCollector.create(numDocs,
> > true);
> >    searcher.search(new MatchAllDocsQuery(), collector);  // never
> > returns
> >
> >    // Searcher
> >    public void search(Query query, Collector collector)
> >      throws IOException {
> >      search(createWeight(query), null, collector); // never returns
> >    }
> >
> >    // extends IndexSearcher
> >    public void search(Weight weight, Filter filter, final Collector
> collector) throws IOException {
> >      boolean topScorer = (filter == null) true : false;
> >      Scorer scorer = weight.scorer(reader, true, topScorer);
> >      if (scorer != null && topScorer) {
> >        scorer.score(collector); // never returns
> >
> >    // Scorer
> >    public void score(Collector collector) throws IOException {
> >      collector.setScorer(this);
> >      int doc;
> >      while ((doc = nextDoc()) != NO_MORE_DOCS) { // doc = 0
> (infinite)
> >        collector.collect(doc);
> >      }
> >    }
> >
> >
> > Thanks for any feedback,
> > Justin
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 11:09:19 2010
Return-Path: <java-user-return-45227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31456 invoked from network); 27 Feb 2010 11:09:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 11:09:19 -0000
Received: (qmail 18840 invoked by uid 500); 27 Feb 2010 11:09:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18773 invoked by uid 500); 27 Feb 2010 11:09:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18765 invoked by uid 99); 27 Feb 2010 11:09:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 11:09:17 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=BAD_ENC_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.132 as permitted sender)
Received: from [61.135.132.132] (HELO relay.mail.sohu.com) (61.135.132.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 11:09:09 +0000
Received: from 85737ec54efc4e1 (unknown [121.35.189.181])
	by relay.mail.sohu.com (Postfix) with ESMTPA id 66B3B488059
	for <java-user@lucene.apache.org>; Sat, 27 Feb 2010 19:09:16 +0800 (CST)
From: "luocanrao" <luocan19826164@sohu.com>
To: <java-user@lucene.apache.org>
References: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898E@MBX.ad.sdsc.edu>	 <6f287d1b1002261245h332ae90v1af210b6a5bcfb72@mail.gmail.com>	 <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898F@MBX.ad.sdsc.edu>	 <6f287d1b1002261325l55346845n3fb177de35cb4d61@mail.gmail.com>	 <BAFDED91EF7D5A43A30F897D6C94B1284DB24B899A@MBX.ad.sdsc.edu>	 <002301cab787$d7db6c70$87924550$@com> <9ac0c6aa1002270236g6560e5e0x944709f60c378925@mail.gmail.com>
In-Reply-To: <9ac0c6aa1002270236g6560e5e0x944709f60c378925@mail.gmail.com>
Subject: =?UTF-8?Q?=E7=AD=94=E5=A4=8D:_custom_FieldCache_cost_too_m?=
	=?UTF-8?Q?uch_time._how_can_I_preload_the_?=
	=?UTF-8?Q?the_	custom_fieldCache_when_new_?=
	=?UTF-8?Q?segment_exits!?=
Date: Sat, 27 Feb 2010 19:08:43 +0800
Message-ID: <002401cab79d$3a2e45e0$ae8ad1a0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acq3mNnFfgPvZ+USQkWxq8RtD0MUVwAAzsrQ
Content-Language: zh-cn
X-SOHU-Antispam-Bayes: 0

I set merge factor 4, every five minute I reopen the reader.
yes most of the time is very fast. But sometimes it is very slow.
For example,when start the program,the first query cosume 10s!
So when newly created segment generated,the query cosume more than 1s.
Our performance is key point.
Sorry ,my English is not good!
I hope I can preload custom fieldCache in a another thread,not the query =
thread.
So I will not have performace issue.
-----=E9=82=AE=E4=BB=B6=E5=8E=9F=E4=BB=B6-----
=E5=8F=91=E4=BB=B6=E4=BA=BA: Michael McCandless =
[mailto:lucene@mikemccandless.com]=20
=E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2010=E5=B9=B42=E6=9C=8827=E6=97=A5 =
18:37
=E6=94=B6=E4=BB=B6=E4=BA=BA: java-user@lucene.apache.org
=E4=B8=BB=E9=A2=98: Re: custom FieldCache cost too much time. how can I =
preload the the custom fieldCache when new segment exits!

How are you opening a new reader?

If it's a near-real-time reader (IndexWriter.getReader), or you use
IndexReader.reopen, it should only be the newly created segments that
have to generate the field cache entry, which most of the time should
be fast.

If you are already using those APIs and its still not fast enough,
then you should just warm the reader before using it (additionally,
for a near-real-time reader you should warm newly merged segments by
installing a mergedSegmentWarmer on the writer).

Mike

On Sat, Feb 27, 2010 at 3:35 AM, luocanrao <luocan19826164@sohu.com> =
wrote:
> custom FieldCache cost too much time.
> So every first time,reopen the new reader ,it interfere the =
performance of
> search
> I hope someone can tell me,how can I preload the the custom fieldCache =
when
> new segment exits!
> Thanks again!
>
> here is source  , In FieldComparator.setNextReader method
> ((C2CFieldManager)fieldManager).lCommID =3D
> FieldCache.DEFAULT.getLongs(reader, "1",new LongParser(){
>                                public long parseLong(String =
documentIDStr)
> {
>                                        documentIDStr =3D
> documentIDStr.substring(16);
>                                        long documentID =3D
> Long.parseLong(documentIDStr,16);
>                                        return documentID;
>                                }
>
>                });
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 11:48:45 2010
Return-Path: <java-user-return-45228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37852 invoked from network); 27 Feb 2010 11:48:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 11:48:45 -0000
Received: (qmail 48518 invoked by uid 500); 27 Feb 2010 11:48:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48422 invoked by uid 500); 27 Feb 2010 11:48:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48414 invoked by uid 99); 27 Feb 2010 11:48:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 11:48:43 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=BAD_ENC_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.204 as permitted sender)
Received: from [61.135.132.204] (HELO relay.mail.sohu.com) (61.135.132.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 11:48:34 +0000
Received: from 85737ec54efc4e1 (unknown [121.35.189.181])
	by relay.mail.sohu.com (Postfix) with ESMTPA id 738AFF2ADB7
	for <java-user@lucene.apache.org>; Sat, 27 Feb 2010 19:48:22 +0800 (CST)
From: "luocanrao" <luocan19826164@sohu.com>
To: <java-user@lucene.apache.org>
References: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898E@MBX.ad.sdsc.edu>	 <6f287d1b1002261245h332ae90v1af210b6a5bcfb72@mail.gmail.com>	 <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898F@MBX.ad.sdsc.edu>	 <6f287d1b1002261325l55346845n3fb177de35cb4d61@mail.gmail.com>	 <BAFDED91EF7D5A43A30F897D6C94B1284DB24B899A@MBX.ad.sdsc.edu>	 <002301cab787$d7db6c70$87924550$@com> <9ac0c6aa1002270236g6560e5e0x944709f60c378925@mail.gmail.com> <002401cab79d$3a2e45e0$ae8ad1a0$@com>
In-Reply-To: <002401cab79d$3a2e45e0$ae8ad1a0$@com>
Subject: =?UTF-8?Q?=E7=AD=94=E5=A4=8D:_custom_FieldCache_cost_too_m?=
	=?UTF-8?Q?uch_time._how_can_I_preload_the_?=
	=?UTF-8?Q?the_	custom_fieldCache_when_new_?=
	=?UTF-8?Q?segment_exits!?=
Date: Sat, 27 Feb 2010 19:48:07 +0800
Message-ID: <002501cab7a2$bb3750f0$31a5f2d0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acq3mNnFfgPvZ+USQkWxq8RtD0MUVwAAzsrQAAGMKvA=
Content-Language: zh-cn
X-SOHU-Antispam-Bayes: 0

Ps:in our evrioment
a document have more than ten field,in a short time,may be have many =
update.
installing a mergedSegmentWarmer on the writer,can you give me a small =
case,
thanks very much!

-----=E9=82=AE=E4=BB=B6=E5=8E=9F=E4=BB=B6-----
=E5=8F=91=E4=BB=B6=E4=BA=BA: luocanrao [mailto:luocan19826164@sohu.com]=20
=E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2010=E5=B9=B42=E6=9C=8827=E6=97=A5 =
19:09
=E6=94=B6=E4=BB=B6=E4=BA=BA: java-user@lucene.apache.org
=E4=B8=BB=E9=A2=98: =E7=AD=94=E5=A4=8D: custom FieldCache cost too much =
time. how can I preload the the custom fieldCache when new segment =
exits!

I set merge factor 4, every five minute I reopen the reader.
yes most of the time is very fast. But sometimes it is very slow.
For example,when start the program,the first query cosume 10s!
So when newly created segment generated,the query cosume more than 1s.
Our performance is key point.
Sorry ,my English is not good!
I hope I can preload custom fieldCache in a another thread,not the query =
thread.
So I will not have performace issue.
-----=E9=82=AE=E4=BB=B6=E5=8E=9F=E4=BB=B6-----
=E5=8F=91=E4=BB=B6=E4=BA=BA: Michael McCandless =
[mailto:lucene@mikemccandless.com]=20
=E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2010=E5=B9=B42=E6=9C=8827=E6=97=A5 =
18:37
=E6=94=B6=E4=BB=B6=E4=BA=BA: java-user@lucene.apache.org
=E4=B8=BB=E9=A2=98: Re: custom FieldCache cost too much time. how can I =
preload the the custom fieldCache when new segment exits!

How are you opening a new reader?

If it's a near-real-time reader (IndexWriter.getReader), or you use
IndexReader.reopen, it should only be the newly created segments that
have to generate the field cache entry, which most of the time should
be fast.

If you are already using those APIs and its still not fast enough,
then you should just warm the reader before using it (additionally,
for a near-real-time reader you should warm newly merged segments by
installing a mergedSegmentWarmer on the writer).

Mike

On Sat, Feb 27, 2010 at 3:35 AM, luocanrao <luocan19826164@sohu.com> =
wrote:
> custom FieldCache cost too much time.
> So every first time,reopen the new reader ,it interfere the =
performance of
> search
> I hope someone can tell me,how can I preload the the custom fieldCache =
when
> new segment exits!
> Thanks again!
>
> here is source  , In FieldComparator.setNextReader method
> ((C2CFieldManager)fieldManager).lCommID =3D
> FieldCache.DEFAULT.getLongs(reader, "1",new LongParser(){
>                                public long parseLong(String =
documentIDStr)
> {
>                                        documentIDStr =3D
> documentIDStr.substring(16);
>                                        long documentID =3D
> Long.parseLong(documentIDStr,16);
>                                        return documentID;
>                                }
>
>                });
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 14:14:36 2010
Return-Path: <java-user-return-45229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88098 invoked from network); 27 Feb 2010 14:14:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 14:14:36 -0000
Received: (qmail 46470 invoked by uid 500); 27 Feb 2010 14:14:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46441 invoked by uid 500); 27 Feb 2010 14:14:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46433 invoked by uid 99); 27 Feb 2010 14:14:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 14:14:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 209.85.220.221 as permitted sender)
Received: from [209.85.220.221] (HELO mail-fx0-f221.google.com) (209.85.220.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 14:14:25 +0000
Received: by fxm21 with SMTP id 21so301738fxm.5
        for <java-user@lucene.apache.org>; Sat, 27 Feb 2010 06:14:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        bh=6Sxe+257dSj7jv0DZk3SEtauVUbJhAAZY8xdFw8Dgnc=;
        b=viuroju7HzScErBYFF8LDxuk0UMnAnjdiX+olZVgDBIIm+pm49tcUjB8VNeTPzKkYf
         mLlegFOOB4U3jdUddu+zASV209y0MuE+WRADmU/lfGbyBLiVna5Rp2MeeQRS1xz5d6C3
         o1bK92gu3jesybeI59o7TlBgSb6KZy5YXwaKQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=wceW4oLocFebzs5rcNhiAWP9W+Ril4ldHdvylc1gDUwhkPjrBjNfMCZkp5hKgiaBpy
         ppS8blpCW2kMzxVEjupeiZIfa2WEoHmRwZYbHdnfcJPefCx1qQ6AhWVdduRXKBZ1FDIk
         zYrgPvRmVRbSsAaf+/ckdjEIZS9AxDXQA1iLk=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.223.77.85 with SMTP id f21mr2231045fak.40.1267280045022; Sat, 
	27 Feb 2010 06:14:05 -0800 (PST)
In-Reply-To: <4B88301F.4010909@sirma.bg>
References: <4B881F05.1020202@sirma.bg> <000301cab71c$9050eb70$b0f2c250$@de>
	 <4B88301F.4010909@sirma.bg>
Date: Sat, 27 Feb 2010 09:14:04 -0500
X-Google-Sender-Auth: dbc9765ab97c15e9
Message-ID: <c68e39171002270614r5c365093i7301b066a684e78@mail.gmail.com>
Subject: Re: NumericField exact match
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Feb 26, 2010 at 3:33 PM, Ivan Vasilev <ivasilev@sirma.bg> wrote:
> Does it matter precision step when I use NumericRangeQuery for exact
> matches?

No.  There is a full-precision version of the value indexed regardless
of the precision step, and that's used for an exact match query.

> I mean if I use the default precision step when indexing that
> fields it is guaranteed that:
> 1. With this query I will always hit the docs that contain "val" for the
> "field";
> 2. I will never hit docs with different that have diferent "val" for the
> "field";

Correct.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 15:04:25 2010
Return-Path: <java-user-return-45230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5501 invoked from network); 27 Feb 2010 15:04:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 15:04:24 -0000
Received: (qmail 92228 invoked by uid 500); 27 Feb 2010 15:04:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92193 invoked by uid 500); 27 Feb 2010 15:04:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92185 invoked by uid 99); 27 Feb 2010 15:04:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 15:04:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of glen.newton@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 15:04:12 +0000
Received: by gyb13 with SMTP id 13so488406gyb.35
        for <java-user@lucene.apache.org>; Sat, 27 Feb 2010 07:03:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=vbe5kfsi3/hmqVxoxD1dVldyHRFfeqBl0McHrrYBOvk=;
        b=xScGZHvOatAtGfiDbFehauC+cRNQ/JD/ranxq3eLHNnocRXini8fHn13LPp/GOUK+R
         SZB39VWvReZlT/vAP+7QIyyRpen0onVmttyWhs+kACAHz/2SmXSrfneSPHvNy6l9Vd5G
         gbsQ+fKm7acnQMDD/aGEwURf2dSY8Zb8DGn0o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=vOKYtGs+3g3DZnWmAmxGhZ0l6N3qNbAXIcpNd1q40nDsr9qTe0I76YlMMPPFdkLKt0
         YCqxQb48GhNFPZDbm0bsb9Xd4ID5Vygs3OA/zmakVsx7loPLStzbKXqzzPV5KT4KsM7Y
         A+aox+TA7FmYZejtSq4WmFIer8iD7itLVPAK8=
MIME-Version: 1.0
Received: by 10.101.58.5 with SMTP id l5mr2782484ank.73.1267283031571; Sat, 27 
	Feb 2010 07:03:51 -0800 (PST)
In-Reply-To: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
Date: Sat, 27 Feb 2010 10:03:51 -0500
Message-ID: <5e76f3841002270703r92535b1u2016f2f2591fa9ee@mail.gmail.com>
Subject: Re: If you could have one feature in Lucene...
From: Glen Newton <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Pluggable compression allowing for alternatives to gzip for text
compression for storing.
Specifically I am interested in bzip2[1] as implemented in Apache
Commons Compress[2].
While bzip2 compression is considerable slower than gzip (although
decompression is not too much slower than gzip) it compresses much
better than gzip (especially text).

Having the choice would be helpful, and for Lucene usage for non-text
indexing, content specific compression algorithms may outperform the
default gzip.

And in these days of multi-core / multi-threading, perhaps we could
convince the Apache Commons Compress team to implement a parallel Java
version of bzip2 compression (theirs is single threaded), like
pbzip2[3].

-glen


[1]http://en.wikipedia.org/wiki/Bzip2
[2]http://commons.apache.org/compress/
[3]http://compression.ca/pbzip2/

On 24 February 2010 08:42, Grant Ingersoll <gsingers@apache.org> wrote:
> What would it be?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 15:18:01 2010
Return-Path: <java-user-return-45231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11734 invoked from network); 27 Feb 2010 15:18:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 15:18:01 -0000
Received: (qmail 5687 invoked by uid 500); 27 Feb 2010 15:17:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5656 invoked by uid 500); 27 Feb 2010 15:17:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5648 invoked by uid 99); 27 Feb 2010 15:17:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 15:17:59 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 15:17:51 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 17072D3600D
	for <java-user@lucene.apache.org>; Sat, 27 Feb 2010 16:17:28 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id c1KiNvBi9FAl for <java-user@lucene.apache.org>;
	Sat, 27 Feb 2010 16:17:25 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 5A72AD3600A
	for <java-user@lucene.apache.org>; Sat, 27 Feb 2010 16:17:25 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org> <5e76f3841002270703r92535b1u2016f2f2591fa9ee@mail.gmail.com>
In-Reply-To: <5e76f3841002270703r92535b1u2016f2f2591fa9ee@mail.gmail.com>
Subject: RE: If you could have one feature in Lucene...
Date: Sat, 27 Feb 2010 16:17:37 +0100
Message-ID: <000601cab7bf$ff4ad010$fde07030$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acq3vijRJNtlieUJR+eBtBuYbZ8EPQAAQiJA
Content-Language: de

Hi Glen,

=20
> Pluggable compression allowing for alternatives to gzip for text
> compression for storing.
> Specifically I am interested in bzip2[1] as implemented in Apache
> Commons Compress[2].
> While bzip2 compression is considerable slower than gzip (although
> decompression is not too much slower than gzip) it compresses much
> better than gzip (especially text).
>=20
> Having the choice would be helpful, and for Lucene usage for non-text
> indexing, content specific compression algorithms may outperform the
> default gzip.

Since Version 3.0 / 2.9 of Lucene compression support was removed =
entirely (in 2.9 still avail as deprecated). All you now have to do is =
simply store your compressed stored fields as a byte[] (see Field =
javadocs). By that you can use any compression. The problems with gzip =
and the other available compression algos lead us to removing the =
compression support from Lucene (as it had lots of problems). In general =
the way to go is: Create a ByteArrayOutputStream and wrap with any =
compression filter, then feed your data in and use "new =
Field(name,stream.getBytes())". On the client side just use the inverse =
(Document.getBinaryValue(), create input stream on top of byte[] and =
decompress).

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 16:19:47 2010
Return-Path: <java-user-return-45232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25438 invoked from network); 27 Feb 2010 16:19:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 16:19:47 -0000
Received: (qmail 46099 invoked by uid 500); 27 Feb 2010 16:19:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46045 invoked by uid 500); 27 Feb 2010 16:19:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46037 invoked by uid 99); 27 Feb 2010 16:19:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 16:19:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 16:19:39 +0000
Received: by gwaa18 with SMTP id a18so507745gwa.35
        for <java-user@lucene.apache.org>; Sat, 27 Feb 2010 08:19:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=i10/JwnYCIiJJOtwjYyjfRbTOBuyHnAd5CltfWTlul8=;
        b=lhOiWKOza2CrOY850ESTSRB5cbTLlcFwjEEJDO5+9YS5Djrcv0fdf+5t+uRuPdm+ii
         9EJlnYffl4d6AOnQLhNrRUJ2wbUgs56SU9b/xSphPogSvbD4MeE0bcd4rFQD2vmTQkrn
         XTU9eGmoMuBwsjZVuAHXd1eCHuJT+Dv+vnAqo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=fBz8hePCEpGWVMEO538NxFk0Co+i+3Qm+7Q3QvUXQUdxHx8Hrw4fgeBfrNs5xJL8DH
         tFMExs2wI1AEEkDBOEhmJ5r2z1bvNFBpTFS0CycsX3v6d4rA1+AELw78ogpMPnCUlS+0
         LTPiNHRIQjspFwEzvNMs8/17myjWcWEji08Uo=
MIME-Version: 1.0
Received: by 10.101.202.34 with SMTP id e34mr2865933anq.107.1267287558101; 
	Sat, 27 Feb 2010 08:19:18 -0800 (PST)
In-Reply-To: <000601cab7bf$ff4ad010$fde07030$@de>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
	 <5e76f3841002270703r92535b1u2016f2f2591fa9ee@mail.gmail.com>
	 <000601cab7bf$ff4ad010$fde07030$@de>
Date: Sat, 27 Feb 2010 11:19:18 -0500
Message-ID: <5e76f3841002270819x3dccf9cm34778c8933d7a554@mail.gmail.com>
Subject: Re: If you could have one feature in Lucene...
From: Glen Newton <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hello Uwe.

That will teach me for not keeping up with the versions! :-)
So it is up to the application to keep track of what it used for compressio=
n.
Understandable.
Thanks!

Glen

On 27 February 2010 10:17, Uwe Schindler <uwe@thetaphi.de> wrote:
> Hi Glen,
>
>
>> Pluggable compression allowing for alternatives to gzip for text
>> compression for storing.
>> Specifically I am interested in bzip2[1] as implemented in Apache
>> Commons Compress[2].
>> While bzip2 compression is considerable slower than gzip (although
>> decompression is not too much slower than gzip) it compresses much
>> better than gzip (especially text).
>>
>> Having the choice would be helpful, and for Lucene usage for non-text
>> indexing, content specific compression algorithms may outperform the
>> default gzip.
>
> Since Version 3.0 / 2.9 of Lucene compression support was removed entirel=
y (in 2.9 still avail as deprecated). All you now have to do is simply stor=
e your compressed stored fields as a byte[] (see Field javadocs). By that y=
ou can use any compression. The problems with gzip and the other available =
compression algos lead us to removing the compression support from Lucene (=
as it had lots of problems). In general the way to go is: Create a ByteArra=
yOutputStream and wrap with any compression filter, then feed your data in =
and use "new Field(name,stream.getBytes())". On the client side just use th=
e inverse (Document.getBinaryValue(), create input stream on top of byte[] =
and decompress).
>
> Uwe
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 16:40:48 2010
Return-Path: <java-user-return-45233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28636 invoked from network); 27 Feb 2010 16:40:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 16:40:48 -0000
Received: (qmail 59885 invoked by uid 500); 27 Feb 2010 16:40:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59856 invoked by uid 500); 27 Feb 2010 16:40:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59848 invoked by uid 99); 27 Feb 2010 16:40:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 16:40:46 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 16:40:37 +0000
Received: by gyb13 with SMTP id 13so512082gyb.35
        for <java-user@lucene.apache.org>; Sat, 27 Feb 2010 08:40:16 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.236.2 with SMTP id j2mr2942363ybh.44.1267288816296; Sat, 
	27 Feb 2010 08:40:16 -0800 (PST)
Date: Sat, 27 Feb 2010 11:40:16 -0500
Message-ID: <9ac0c6aa1002270840se0d4e91k7b4dc9684c028fe9@mail.gmail.com>
Subject: Re: FieldCache cost too much time. how can I preload the the custom 
	fieldCache when new segment exits!
From: Michael McCandless <lucene@mikemccandless.com>
To: Lucene Users <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Sounds like you should simply open & warm the reader in a background thread...

You might want to use the SearcherManager class from upcoming Lucene
in Action 2nd edition (NOTE: I'm a co-author).  You can download the
source code @ http://manning.com/hatcher3.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 16:43:09 2010
Return-Path: <java-user-return-45234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28919 invoked from network); 27 Feb 2010 16:43:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 16:43:09 -0000
Received: (qmail 62115 invoked by uid 500); 27 Feb 2010 16:43:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61952 invoked by uid 500); 27 Feb 2010 16:43:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61944 invoked by uid 99); 27 Feb 2010 16:43:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 16:43:07 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 16:42:59 +0000
Received: by gwaa18 with SMTP id a18so513370gwa.35
        for <java-user@lucene.apache.org>; Sat, 27 Feb 2010 08:42:38 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.66.18 with SMTP id o18mr2965632yba.96.1267288958156; Sat, 
	27 Feb 2010 08:42:38 -0800 (PST)
In-Reply-To: <002501cab7a2$bb3750f0$31a5f2d0$@com>
References: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898E@MBX.ad.sdsc.edu>
	 <6f287d1b1002261245h332ae90v1af210b6a5bcfb72@mail.gmail.com>
	 <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898F@MBX.ad.sdsc.edu>
	 <6f287d1b1002261325l55346845n3fb177de35cb4d61@mail.gmail.com>
	 <BAFDED91EF7D5A43A30F897D6C94B1284DB24B899A@MBX.ad.sdsc.edu>
	 <002301cab787$d7db6c70$87924550$@com>
	 <9ac0c6aa1002270236g6560e5e0x944709f60c378925@mail.gmail.com>
	 <002401cab79d$3a2e45e0$ae8ad1a0$@com>
	 <002501cab7a2$bb3750f0$31a5f2d0$@com>
Date: Sat, 27 Feb 2010 11:42:38 -0500
Message-ID: <9ac0c6aa1002270842x29a9247fuf62e858f5ce2a1ad@mail.gmail.com>
Subject: Re: custom FieldCache cost too much time. how can I preload the the 
	custom fieldCache when new segment exits!
From: Michael McCandless <lucene@mikemccandless.com>
To: Lucene Users <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

If you look at the javadocs for IndexWriter it explains how to do it.
You just provide a class that implements the warm method, and inside
that method you do whatever app specific things you need to do to the
provided IndexReader to warm it.

Note that the SearcherManager class from LIA2 handles setting up the
MergedSegmentWarmer, if you implement the warm method.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 17:25:19 2010
Return-Path: <java-user-return-45235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41664 invoked from network); 27 Feb 2010 17:25:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 17:25:19 -0000
Received: (qmail 2282 invoked by uid 500); 27 Feb 2010 17:25:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2192 invoked by uid 500); 27 Feb 2010 17:25:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2184 invoked by uid 99); 27 Feb 2010 17:25:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 17:25:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.191.69.81] (HELO web32904.mail.mud.yahoo.com) (209.191.69.81)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 27 Feb 2010 17:25:07 +0000
Received: (qmail 20869 invoked by uid 60001); 27 Feb 2010 17:24:45 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1267291485; bh=WmP8S19fW+xfe1inEB6lC7/PS4BDGSIdyLWmREr8P04=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=5M4FdV0noqR+2h6DKGcjlv4vqfz3tRLcjqyqKpxO80Bn2KHr2U3OUp3buaXkSP/Kqs4nSnoM+qJQ2FQfKNwt2ARMH3OH23HQn5xWJmTYJ8YHI3TrjdJY8H2OI7Fsd7oI552I4q8VM8hxfd0/pPrjs7nG9HxRv7HpuOf1Fg0R9Qg=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=cfeCWrGl5u7wM08e7iEFbolJX+WmcPOXwfK5l8DFqgVSz4d2g4HvXBfH/rr3YmBIIOIL67hKOD3lbireYJVB8KXlBQeRPK9EkCT1RBWuLVJIWq6NOP602t1vni1Tofa/Ku8+ckYRFx4zF+Wf7LZ19L5TQb0d2d7hf/M+gpizrUE=;
Message-ID: <59176.19896.qm@web32904.mail.mud.yahoo.com>
X-YMail-OSG: x.Uu6uQVM1mYtawKwGe6g5z_bfYtn4G8W30a6FmjQzNYyR75.vZgFuGtI_hz9rT.uNcVHsocKgI8If4Y9WB5zhqeJoMZkg5V3XoyTwkTjIFyJckugPQLkqrASX7hGarr111vvQ4wN1i0YS1E3ekFfSu46isyjKBkjKyghgn0mqb4rlhjIW0cyGajqcda0f8P_Zj_G4yHxwCpS0X4d26rzCsQIArQiw4gotSG4yaKB0OOX0IikgbVgmrxqO8g9oV84.q0xooa3QkdyuketFolsTyQioUyubO9NMF0AwKZ3LmHKTdWlf._p3xhCZYBgss4640PaossN5E9RFfiST9o7AJ7LomB8vYGx.MHF4hW8t2DsDO0f_5GqQ54U6qEgVrPZw--
Received: from [99.4.165.245] by web32904.mail.mud.yahoo.com via HTTP; Sat, 27 Feb 2010 09:24:44 PST
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
References: <853423.85902.qm@web32905.mail.mud.yahoo.com> <9ac0c6aa1002270252x7c98dbd7x154357ec7cd74ca9@mail.gmail.com> <000701cab79b$6ffa29c0$4fee7d40$@de>
Date: Sat, 27 Feb 2010 09:24:44 -0800 (PST)
From: Justin <crynax@yahoo.com>
Subject: Re: Infinite loop when searching empty index
To: java-user@lucene.apache.org
In-Reply-To: <000701cab79b$6ffa29c0$4fee7d40$@de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for checking.  I think I tracked down the problem.  We apparently extended most of these classes and more work was necessary to facilitate the latest API.  I just didn't dig deep enough, into nextDoc() which I thought too trivial to step into.  The extended Scorer repeatedly returned the last doc ID instead of NO_MORE_DOCS.  Sorry for the wild goose chase!

I do think I've run across another problem which I may report in a new thread: ParallelReader.reopen() appears to be taking up file descriptors to the same files without letting the old ones go.  Our Java process hits the 'limit -n' barrier (in the thousands) after a few minutes.  My current work around is to check isCurrent(), close, then open.  I wonder if the changes to support near real-time search inadvertently broke this.




----- Original Message ----
From: Uwe Schindler <uwe@thetaphi.de>
To: java-user@lucene.apache.org
Sent: Sat, February 27, 2010 4:55:55 AM
Subject: RE: Infinite loop when searching empty index

I was doing the same, MatchAllDocsScorer is fine and also AbstractAllTermDocs.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Saturday, February 27, 2010 11:52 AM
> To: java-user@lucene.apache.org
> Subject: Re: Infinite loop when searching empty index
> 
> I turned this into a unit test... but I don't see it never
> returning... the test passes.
> 
> How did you create your empty reader?
> 
> Patch:
> 
> Index: src/test/org/apache/lucene/search/TestMatchAllDocsQuery.java
> ===================================================================
> --- src/test/org/apache/lucene/search/TestMatchAllDocsQuery.java
>     (revision
> 916939)
> +++ src/test/org/apache/lucene/search/TestMatchAllDocsQuery.java
>     (working copy)
> @@ -27,6 +27,8 @@
>  import org.apache.lucene.index.IndexReader;
>  import org.apache.lucene.queryParser.QueryParser;
>  import org.apache.lucene.store.RAMDirectory;
> +import org.apache.lucene.store.Directory;
> +import org.apache.lucene.store.MockRAMDirectory;
> 
>  import org.apache.lucene.util.LuceneTestCase;
> 
> @@ -115,6 +117,21 @@
>      dir.close();
>    }
> 
> +  public void testNeverReturns() throws Exception {
> +    Directory dir = new MockRAMDirectory();
> +    IndexWriter w = new IndexWriter(dir, new
> StandardAnalyzer(TEST_VERSION_CURRENT),
> IndexWriter.MaxFieldLength.UNLIMITED);
> +    IndexReader r = w.getReader();
> +    w.close();
> +
> +    assertEquals(0, r.numDocs()); // empty index
> +    IndexSearcher s = new IndexSearcher(r);
> +    TopDocsCollector collector = TopScoreDocCollector.create(0, true);
> +    s.search(new MatchAllDocsQuery(), collector);  // never returns
> +    s.close();
> +    r.close();
> +    dir.close();
> +  }
> +
>    public void testEquals() {
>      Query q1 = new MatchAllDocsQuery();
>      Query q2 = new MatchAllDocsQuery();
> 
> Mike
> 
> On Fri, Feb 26, 2010 at 4:54 PM, Justin <crynax@yahoo.com> wrote:
> > Is this a bug in Lucene Java as of trunk@915399?
> >
> >    int numDocs = reader.numDocs(); // = 0 (empty index)
> >    TopDocsCollector collector = TopScoreDocCollector.create(numDocs,
> > true);
> >    searcher.search(new MatchAllDocsQuery(), collector);  // never
> > returns
> >
> >    // Searcher
> >    public void search(Query query, Collector collector)
> >      throws IOException {
> >      search(createWeight(query), null, collector); // never returns
> >    }
> >
> >    // extends IndexSearcher
> >    public void search(Weight weight, Filter filter, final Collector
> collector) throws IOException {
> >      boolean topScorer = (filter == null) true : false;
> >      Scorer scorer = weight.scorer(reader, true, topScorer);
> >      if (scorer != null && topScorer) {
> >        scorer.score(collector); // never returns
> >
> >    // Scorer
> >    public void score(Collector collector) throws IOException {
> >      collector.setScorer(this);
> >      int doc;
> >      while ((doc = nextDoc()) != NO_MORE_DOCS) { // doc = 0
> (infinite)
> >        collector.collect(doc);
> >      }
> >    }
> >
> >
> > Thanks for any feedback,
> > Justin
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 17:59:01 2010
Return-Path: <java-user-return-45236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54914 invoked from network); 27 Feb 2010 17:59:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 17:59:00 -0000
Received: (qmail 25013 invoked by uid 500); 27 Feb 2010 17:58:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24967 invoked by uid 500); 27 Feb 2010 17:58:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24958 invoked by uid 99); 27 Feb 2010 17:58:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 17:58:59 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 17:58:48 +0000
Received: by ywh15 with SMTP id 15so552873ywh.20
        for <java-user@lucene.apache.org>; Sat, 27 Feb 2010 09:58:27 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.194.13 with SMTP id r13mr3086472ybf.81.1267293507635; Sat, 
	27 Feb 2010 09:58:27 -0800 (PST)
In-Reply-To: <59176.19896.qm@web32904.mail.mud.yahoo.com>
References: <853423.85902.qm@web32905.mail.mud.yahoo.com>
	 <9ac0c6aa1002270252x7c98dbd7x154357ec7cd74ca9@mail.gmail.com>
	 <000701cab79b$6ffa29c0$4fee7d40$@de>
	 <59176.19896.qm@web32904.mail.mud.yahoo.com>
Date: Sat, 27 Feb 2010 12:58:27 -0500
Message-ID: <9ac0c6aa1002270958nef44771rdec5b953c015a8b2@mail.gmail.com>
Subject: Re: Infinite loop when searching empty index
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hmm -- can you give more details on the possible file descriptor leak?
 Or a test case?  Thanks.

Mike

On Sat, Feb 27, 2010 at 12:24 PM, Justin <crynax@yahoo.com> wrote:
> Thanks for checking. =A0I think I tracked down the problem. =A0We apparen=
tly extended most of these classes and more work was necessary to facilitat=
e the latest API. =A0I just didn't dig deep enough, into nextDoc() which I =
thought too trivial to step into. =A0The extended Scorer repeatedly returne=
d the last doc ID instead of NO_MORE_DOCS. =A0Sorry for the wild goose chas=
e!
>
> I do think I've run across another problem which I may report in a new th=
read: ParallelReader.reopen() appears to be taking up file descriptors to t=
he same files without letting the old ones go. =A0Our Java process hits the=
 'limit -n' barrier (in the thousands) after a few minutes. =A0My current w=
ork around is to check isCurrent(), close, then open. =A0I wonder if the ch=
anges to support near real-time search inadvertently broke this.
>
>
>
>
> ----- Original Message ----
> From: Uwe Schindler <uwe@thetaphi.de>
> To: java-user@lucene.apache.org
> Sent: Sat, February 27, 2010 4:55:55 AM
> Subject: RE: Infinite loop when searching empty index
>
> I was doing the same, MatchAllDocsScorer is fine and also AbstractAllTerm=
Docs.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>> -----Original Message-----
>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>> Sent: Saturday, February 27, 2010 11:52 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Infinite loop when searching empty index
>>
>> I turned this into a unit test... but I don't see it never
>> returning... the test passes.
>>
>> How did you create your empty reader?
>>
>> Patch:
>>
>> Index: src/test/org/apache/lucene/search/TestMatchAllDocsQuery.java
>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>> --- src/test/org/apache/lucene/search/TestMatchAllDocsQuery.java
>> =A0 =A0 (revision
>> 916939)
>> +++ src/test/org/apache/lucene/search/TestMatchAllDocsQuery.java
>> =A0 =A0 (working copy)
>> @@ -27,6 +27,8 @@
>> =A0import org.apache.lucene.index.IndexReader;
>> =A0import org.apache.lucene.queryParser.QueryParser;
>> =A0import org.apache.lucene.store.RAMDirectory;
>> +import org.apache.lucene.store.Directory;
>> +import org.apache.lucene.store.MockRAMDirectory;
>>
>> =A0import org.apache.lucene.util.LuceneTestCase;
>>
>> @@ -115,6 +117,21 @@
>> =A0 =A0 =A0dir.close();
>> =A0 =A0}
>>
>> + =A0public void testNeverReturns() throws Exception {
>> + =A0 =A0Directory dir =3D new MockRAMDirectory();
>> + =A0 =A0IndexWriter w =3D new IndexWriter(dir, new
>> StandardAnalyzer(TEST_VERSION_CURRENT),
>> IndexWriter.MaxFieldLength.UNLIMITED);
>> + =A0 =A0IndexReader r =3D w.getReader();
>> + =A0 =A0w.close();
>> +
>> + =A0 =A0assertEquals(0, r.numDocs()); // empty index
>> + =A0 =A0IndexSearcher s =3D new IndexSearcher(r);
>> + =A0 =A0TopDocsCollector collector =3D TopScoreDocCollector.create(0, t=
rue);
>> + =A0 =A0s.search(new MatchAllDocsQuery(), collector); =A0// never retur=
ns
>> + =A0 =A0s.close();
>> + =A0 =A0r.close();
>> + =A0 =A0dir.close();
>> + =A0}
>> +
>> =A0 =A0public void testEquals() {
>> =A0 =A0 =A0Query q1 =3D new MatchAllDocsQuery();
>> =A0 =A0 =A0Query q2 =3D new MatchAllDocsQuery();
>>
>> Mike
>>
>> On Fri, Feb 26, 2010 at 4:54 PM, Justin <crynax@yahoo.com> wrote:
>> > Is this a bug in Lucene Java as of trunk@915399?
>> >
>> > =A0 =A0int numDocs =3D reader.numDocs(); // =3D 0 (empty index)
>> > =A0 =A0TopDocsCollector collector =3D TopScoreDocCollector.create(numD=
ocs,
>> > true);
>> > =A0 =A0searcher.search(new MatchAllDocsQuery(), collector); =A0// neve=
r
>> > returns
>> >
>> > =A0 =A0// Searcher
>> > =A0 =A0public void search(Query query, Collector collector)
>> > =A0 =A0 =A0throws IOException {
>> > =A0 =A0 =A0search(createWeight(query), null, collector); // never retu=
rns
>> > =A0 =A0}
>> >
>> > =A0 =A0// extends IndexSearcher
>> > =A0 =A0public void search(Weight weight, Filter filter, final Collecto=
r
>> collector) throws IOException {
>> > =A0 =A0 =A0boolean topScorer =3D (filter =3D=3D null) true : false;
>> > =A0 =A0 =A0Scorer scorer =3D weight.scorer(reader, true, topScorer);
>> > =A0 =A0 =A0if (scorer !=3D null && topScorer) {
>> > =A0 =A0 =A0 =A0scorer.score(collector); // never returns
>> >
>> > =A0 =A0// Scorer
>> > =A0 =A0public void score(Collector collector) throws IOException {
>> > =A0 =A0 =A0collector.setScorer(this);
>> > =A0 =A0 =A0int doc;
>> > =A0 =A0 =A0while ((doc =3D nextDoc()) !=3D NO_MORE_DOCS) { // doc =3D =
0
>> (infinite)
>> > =A0 =A0 =A0 =A0collector.collect(doc);
>> > =A0 =A0 =A0}
>> > =A0 =A0}
>> >
>> >
>> > Thanks for any feedback,
>> > Justin
>> >
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 20:30:58 2010
Return-Path: <java-user-return-45237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19457 invoked from network); 27 Feb 2010 20:30:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 20:30:58 -0000
Received: (qmail 56248 invoked by uid 500); 27 Feb 2010 20:30:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56222 invoked by uid 500); 27 Feb 2010 20:30:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56214 invoked by uid 99); 27 Feb 2010 20:30:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 20:30:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 20:30:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NlTIw-0004ES-K4
	for java-user@lucene.apache.org; Sat, 27 Feb 2010 12:30:26 -0800
Message-ID: <27730729.post@talk.nabble.com>
Date: Sat, 27 Feb 2010 12:30:26 -0800 (PST)
From: PlusPlus <r.shahidinejad@gmail.com>
To: java-user@lucene.apache.org
Subject: Changing TF method
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: r.shahidinejad@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, 

   I want to change the Lucene's similarity in a way that I can add Fuzzy
memberships to the terms of a document. Thus, TF value of a term in one
document is not always 1, it can add 0.7 to the value of the TF ( (In my
application, each term is contained in a document at most once). This
membership value is available before index time. 

   On the other hand, each occurrence of a word will not be considered as 1
documentfrequency for the IDF formula. 

   I was wondering if I can change the TF and IDF values of the terms like
this. So far, I know that I can change the impact of TF values on the
scoring, but not this thing that I'm looking for. 

Best, 
Reza 
-- 
View this message in context: http://old.nabble.com/Changing-TF-method-tp27730729p27730729.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 27 22:37:32 2010
Return-Path: <java-user-return-45238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5707 invoked from network); 27 Feb 2010 22:37:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Feb 2010 22:37:32 -0000
Received: (qmail 18415 invoked by uid 500); 27 Feb 2010 22:30:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18383 invoked by uid 500); 27 Feb 2010 22:30:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18375 invoked by uid 99); 27 Feb 2010 22:30:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 22:30:08 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.249.20.114] (HELO postal.sdsc.edu) (132.249.20.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Feb 2010 22:29:59 +0000
Received: from mta.ad.sdsc.edu (mta.ad.sdsc.edu [132.249.69.68])
	by postal.sdsc.edu (8.11.7/8.11.7/server/79) with ESMTP id o1RMTbk10115;
	Sat, 27 Feb 2010 14:29:37 -0800 (PST)
Received: from MBX.ad.sdsc.edu ([fe80::85f9:e068:7dc0:4fe0]) by
 mta.ad.sdsc.edu ([132.249.69.68]) with mapi; Sat, 27 Feb 2010 14:29:32 -0800
From: Christopher Condit <condit@sdsc.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: "lucene@mikemccandless.com" <lucene@mikemccandless.com>
Date: Sat, 27 Feb 2010 14:29:29 -0800
Subject: RE: recovering payload from fields
Thread-Topic: recovering payload from fields
Thread-Index: Acq3mZxc2hbA0YIhRSGlYygDU0nKQAAYlr5g
Message-ID: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B899E@MBX.ad.sdsc.edu>
References: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898E@MBX.ad.sdsc.edu>
	 <6f287d1b1002261245h332ae90v1af210b6a5bcfb72@mail.gmail.com>
	 <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898F@MBX.ad.sdsc.edu>
	 <6f287d1b1002261325l55346845n3fb177de35cb4d61@mail.gmail.com>
	 <BAFDED91EF7D5A43A30F897D6C94B1284DB24B899A@MBX.ad.sdsc.edu>
 <9ac0c6aa1002270242r3ff1d3edp7b5665ed788c658b@mail.gmail.com>
In-Reply-To: <9ac0c6aa1002270242r3ff1d3edp7b5665ed788c658b@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

> It sounds like you need to iterate through all terms sequentially in a gi=
ven
> field in the doc, accessing offset & payload?  In which case reanalyzing =
at
> search time may be the best way to go.

If it matters it doesn't need to be sequential. I just need access to all t=
he payloads for a given doc in the index. If reanalyzing is the best option=
 I suppose I'll do that. Or perhaps build some auxiliary structure to cache=
 the information.

Thanks for the clarification,
-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


