From java-user-return-24794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 10:10:42 2006
Return-Path: <java-user-return-24794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43426 invoked from network); 1 Dec 2006 10:10:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 10:10:41 -0000
Received: (qmail 18383 invoked by uid 500); 1 Dec 2006 10:10:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18353 invoked by uid 500); 1 Dec 2006 10:10:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18340 invoked by uid 99); 1 Dec 2006 10:10:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 02:10:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 01 Dec 2006 02:10:32 -0800
Received: (qmail invoked by alias); 01 Dec 2006 10:10:11 -0000
Received: from p548C5DB0.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.93.176]
  by mail.gmx.net (mp043) with SMTP; 01 Dec 2006 11:10:11 +0100
X-Authenticated: #3493418
Message-ID: <456FFED6.5010302@gmx.de>
Date: Fri, 01 Dec 2006 11:07:18 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: any ides on this type of analyzer?
References: <0D6A3C278F4DC346B98DF4D2F1397E811742E620@UREXCHVS3.ur.com>
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E811742E620@UREXCHVS3.ur.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Van,

it looks like splitting of compound words. This topic was discussed in 
the thread "Analysis/tokenization of compound words" 
(http://www.gossamer-threads.com/lists/lucene/java-user/40164?do=post_view_threaded).

The main idea is as follow:
You have a corpus (lexicon/dictionary). You want to split a word. Build 
letter wise two part words and search them in the corpus. If you can 
find them you can split your word at these parts. You can do that 
recursively finding all sub-parts. This method searches the smallest 
possible words. [1]
If you have a corpus without compound words you can have a better 
quality by searching the largest possible words by searching the word 
first and then splitting it if you couldn’t find it. Do this recursively 
as well. [2]

Warning: The results are usually not linguistically correct. How ever, 
the quality should be good enough for searching.

Sören

[1] C. Monz and M. De Rijke: Shallow Morphological Analysis in 
Monolingual Information Retrieval for Dutch, German and Italian, 
Language & Inference Technology, University of Amsterdam.

[2] Pasqualino Imbemba: A Splitter for German Compound Words, Free 
University Of Bolzano, Bolzano, 2006

Van Nguyen wrote:
> I've been trying to brainstorm on this but could not figure out a way to
> go about this.
> 
>  
> 
> Let's say I'm searching for "batman".  I want results that include:
> 
>  
> 
> batman
> 
> bat man
> 
> bat-man
> 
> etc.
> 
>  
> 
> or if I search screwdriver, I would want results to include:
> 
>  
> 
> screwdriver
> 
> screw drivers
> 
> etc.
> 
>  
> 
> I've tried using the SnowballAnalyzer.  I've thought about creating a
> "SynonymAnalyzer" as described in the Lucene In Action book (but that
> would mean I would have to know all the synonyms for each word I need to
> index - at this point I do not).  Any suggestions on how to go about
> this?
> 
>  
> 
> Van

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 10:32:19 2006
Return-Path: <java-user-return-24795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47933 invoked from network); 1 Dec 2006 10:32:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 10:32:19 -0000
Received: (qmail 52092 invoked by uid 500); 1 Dec 2006 10:32:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51742 invoked by uid 500); 1 Dec 2006 10:32:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51731 invoked by uid 99); 1 Dec 2006 10:32:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 02:32:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [80.237.132.74] (HELO wp067.webpack.hosteurope.de) (80.237.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 02:32:10 -0800
Received: by wp067.webpack.hosteurope.de running Exim 4.43 using esmtpa
	from ifis24.ifis.mu-luebeck.de ([141.83.117.194]); authenticated
	id 1Gq5gL-0006YU-Fz; Fri, 01 Dec 2006 11:31:49 +0100
Subject: Incremental Index and Comparing different Scores from different
	Index
From: Nils =?ISO-8859-1?Q?H=F6ller?= <nutch@nhoeller.de>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Fri, 01 Dec 2006 11:31:53 +0100
Message-Id: <1164969113.7354.12.camel@nils-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.8.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have some questions about the scoring function and about how different
scores can be compared.

I use Lucene for indexing an archive of the web.

/archive/day1/differentsites => indexday1
/archive/day2/differentsites => indexday2
/archive/day3/differentsites => indexday3
/archive/day4/differentsites => indexday4
/archive/day5/differentsites => indexday5

No I have a continious query for a certain topic.

Querying indexday1 gives me some Hits with the best having score a
Querying indexday2 gives me some Hits with the best having score b
and so on .....

Now how can I compare those scores, since the regular idf will be
different in the formular of every index?! Am I right here?

I ve read about the incremental idf. Is there a possibility to normalize
the scores so that different indexes/scores can be compared

My Goal is to plot the movement of the score a query has over the time. 
So when I ll look at the Hits on a certain day, I ll must be sure that
all the Hits are out of the day's archive.

I hope you understand my problem and can help me.

Thanks 

Nils


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 13:12:09 2006
Return-Path: <java-user-return-24796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98841 invoked from network); 1 Dec 2006 13:12:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 13:12:08 -0000
Received: (qmail 10285 invoked by uid 500); 1 Dec 2006 13:12:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10258 invoked by uid 500); 1 Dec 2006 13:12:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10247 invoked by uid 99); 1 Dec 2006 13:12:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 05:12:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 05:11:57 -0800
Received: from [192.168.128.211] (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id kB1DBYER020773
	for <java-user@lucene.apache.org>; Fri, 1 Dec 2006 15:11:34 +0200
Message-ID: <45702A05.2000105@sirma.bg>
Date: Fri, 01 Dec 2006 15:11:33 +0200
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: an alternative to optimize?
References: <1164969113.7354.12.camel@nils-laptop>
In-Reply-To: <1164969113.7354.12.camel@nils-laptop>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Guys,

I've already asked this question but nobody answered:

Suppose we have a relatively big index which is continuously updated - 
i.e. new docs get added while some of the old docs get deleted.
For pragmatic reasons we have a restriction on maxMergeDocs so that 
segment files don't get enormously big.
Consider now a segment of max size (i.e. containing maxMergeDocs docs 
hence not eligible for a merge)
It is possible that (as time passes) this segment will have more and 
more of its docs deleted.
But as it is not merge-able it will remain the same size and with lots 
of "wholes" in it which is bad for performance.
The only way that I am aware of to correct this problem is to invoke 
index optimization, which has several drawbacks:
1. it takes a while to optimize a big index.
2. the optimization process always produces a index comprising of a 
single (extremely) large segment.
We can live with 1.
But 2 is undesirable.
Is there a way to "optimize" (in terms of purging its deleted docs) an 
index or a single segment
without ending up with a single segment index?

Best,
Stanislav

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 13:52:47 2006
Return-Path: <java-user-return-24797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9225 invoked from network); 1 Dec 2006 13:52:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 13:52:46 -0000
Received: (qmail 76765 invoked by uid 500); 1 Dec 2006 13:52:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76742 invoked by uid 500); 1 Dec 2006 13:52:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76731 invoked by uid 99); 1 Dec 2006 13:52:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 05:52:46 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 05:52:35 -0800
Received: by ug-out-1314.google.com with SMTP id k40so2704120ugc
        for <java-user@lucene.apache.org>; Fri, 01 Dec 2006 05:52:14 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YqW84Fi62Utz7uP81umiwJCF5M6fgBj0tS1xlu2G8z8z3+cJFuOXtlO885vyHomq08pu1ojXAnQdYo6WHQU8Rj5zU2NoCHeCfqRq1eX7yCTrkinUTr/sMGdvZdreQXa8HlKsRoAv9w518fLmkO3h5EiUTFr8lqJpiDb144XVwuY=
Received: by 10.82.129.8 with SMTP id b8mr1038787bud.1164981133830;
        Fri, 01 Dec 2006 05:52:13 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Fri, 1 Dec 2006 05:52:13 -0800 (PST)
Message-ID: <359a92830612010552q7978e359h3f75bce5eca01c95@mail.gmail.com>
Date: Fri, 1 Dec 2006 08:52:13 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Full text searching on documents saved in database as BLOB
In-Reply-To: <8D616EEBB30A9544B71E2FBFC32119F00305CFCD@hsnda2ksexch.noida.headstrong.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_125_4246027.1164981133136"
References: <8D616EEBB30A9544B71E2FBFC32119F00305CFCD@hsnda2ksexch.noida.headstrong.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_125_4246027.1164981133136
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See this thread for an interesting Oracle-based solution. I admit I just
skimmed it, so it may not really apply....
*Oracle and Lucene Integration*

In general, you can't reach into an Oracle BLOB with lucene to search it
because you haven't created a Lucene index. One approach is to index the
BLOB data in the DB into a Lucene index, along with enough relevant metadata
to satisfy your needs. Include a unique DB id for each doc in your
index(es). Search the Lucene index then pull the remainder of the data from
the DB based upon the DB id you stored.

Search this mail archive for "database" and you'll see extensive discussions
of this topic, and many interesting ideas....

Be warned: Lucene does not support SQL-like constructs. You should use
lucene for efficient searching. If you have a need for dealing with
relations between documents, you'll need the capabilities of a DB and/or
clever indexing in Lucene. You can always use a hybrid solution....

Best
Erick

On 12/1/06, Inderjeet Kalra <Inderjeet.Kalra@headstrong.com> wrote:
>
> Hi,
>
> I have a query related to the full text searching on documents saved in
> database as BLOB. In our application, we are planning to save our
> documents in the database as BLOB and we have a requirement of searching
> a document on it's meta data and the content of the document i.e. search
> within document.
>
>
>
> Will Lucene serve our purpose, I have gone through the Lucene FAQs and
> various issues on the site but I am unable to find any references to the
> documents saved in the database as BLOB.
>
>
>
> 1. How can I search on the metadata of the document saved in the
> database as BLOB
>
> 2. How can I search on the content of the document i.e. search within
> the document saved in the database as BLOB
>
>
>
> If anyone has implemented the same functionality, can you suggest me any
> sample code so that i can start using lucene for the same.
>
>
>
> There is another search engine i.e. Oracle Text search engine which also
> does the same but which one is better ?
>
>
>
> Thanks & Regards
>
> Inderjeet
>
>
>
>
>
>
> ***The information transmitted is intended only for the person or entity
> to which it is addressed and may contain confidential and/or privileged
> material. Any review,retransmission,dissemination or other use of, or taking
> of any action in reliance upon, this information by persons or entities
> other than the intended recipient is prohibited. If you received this in
> error, please contact the sender and delete the material from any
> computer.***
>
>

------=_Part_125_4246027.1164981133136--

From java-user-return-24798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 14:19:03 2006
Return-Path: <java-user-return-24798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14892 invoked from network); 1 Dec 2006 14:19:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 14:19:02 -0000
Received: (qmail 28379 invoked by uid 500); 1 Dec 2006 14:19:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28351 invoked by uid 500); 1 Dec 2006 14:19:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28340 invoked by uid 99); 1 Dec 2006 14:19:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 06:19:02 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.160.213.79] (HELO p15137266.pureserver.info) (217.160.213.79)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 06:18:50 -0800
Received: (qmail 531 invoked from network); 1 Dec 2006 15:18:28 +0100
Received: from unknown (HELO acer4529571627) (87.139.105.110)
  by emedea.de with SMTP; 1 Dec 2006 15:18:28 +0100
From: "Kai R. Emde" <emde@emedea.de>
To: <java-user@lucene.apache.org>
Subject: AW: BUG ? - lucene multisearcher / sorting
Date: Fri, 1 Dec 2006 15:16:25 +0100
Message-ID: <!~!UENERkVCMDkAAQACAAAAAAAAAAAAAAAAABgAAAAAAAAABfNx9wSmtUmMsEs+vysifsKAAAAQAAAAllT3zyRogk25nWWMiw9fBgEAAAAA@emedea.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
In-Reply-To: <200611300022.49804@danielnaber.de>
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the reply,

I try to explain what's happens -

we use lucene 2.0 - is a little difficult to show a case, but it seems =
that
the problem began, when the hits of one index reach 200 and above.
At this moment at the end of the list there are like bits lost, of this
index 1,2,3 hits.
When we search "material" as an example, we found 207 hits in the the =
index.
When we search this index in the multisearcher, with 3 index, there 206 =
hits
contiguous and one after the next. OK bookA1, bookA2, bookA3 ... =
bookA206,
bookB1, bookB2, bookb3 ... bookB6, bookA207, bookC1, bookC2 --=20

Here is the code with the multisearcher -

	MultiSearcher searcher =3D getSearcher(indexDirList);
           =20
	if (searcher !=3D null) {
		Analyzer analyzer =3D new GermanAnalyzer();
		QueryParser qp =3D new QueryParser("contents", analyzer);
//$NON-NLS-1$
		try {
			query =3D qp.parse(queryInput);
		} catch (ParseException e1) {
			// TODO Auto-generated catch block
			e1.printStackTrace();
		}
		try {
		  	hits =3D searcher.search(query, new Sort (new
SortField[] {
				new SortField("bookisbn"),
SortField.FIELD_SCORE //$NON-NLS-1$
		   }));
		 } catch (IOException e) {
			// TODO Auto-generated catch block
		  e.printStackTrace();
		  }                        // run the query
		   	=09
	   hitsResult =3D Messages.getString("Result.24")+ hits.length() +
Messages.getString("Result.25"); //$NON-NLS-1$ //$NON-NLS-2$

Regards
Kai


-----Urspr=FCngliche Nachricht-----
Von: Daniel Naber [mailto:lucenelist2005@danielnaber.de]=20
Gesendet: Donnerstag, 30. November 2006 00:23
An: java-user@lucene.apache.org
Betreff: Re: BUG ? - lucene multisearcher / sorting


On Tuesday 28 November 2006 23:09, Kai R. Emde wrote:

> we have one problem with the sort routine. We use the multisearcher=20
> function over severall index.

Does that also happens when you're not using MultiSearcher? Could you =
post=20
a small test case that demonstrates this problem? To my knowledge, =
there's=20
no known bug (but lucene 1.4 had problems with relevance sorting when=20
using MultiSearcher).

Regards
 Daniel

--=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 15:01:32 2006
Return-Path: <java-user-return-24799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33240 invoked from network); 1 Dec 2006 15:01:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 15:01:31 -0000
Received: (qmail 26802 invoked by uid 500); 1 Dec 2006 15:01:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26757 invoked by uid 500); 1 Dec 2006 15:01:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26716 invoked by uid 99); 1 Dec 2006 15:01:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 07:01:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 07:01:01 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 2C84949C46
	for <java-user@lucene.apache.org>; Fri,  1 Dec 2006 10:00:38 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Fri, 01 Dec 2006 10:00:38 -0500
X-Sasl-enc: PGrL+Uh2B/YMFy+LjxcS9mkwK/3YuBf8Y+iVSYh/N7Nr 1164985237
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id ACA2015AE9
	for <java-user@lucene.apache.org>; Fri,  1 Dec 2006 10:00:37 -0500 (EST)
Message-ID: <4570438E.60708@mikemccandless.com>
Date: Fri, 01 Dec 2006 10:00:30 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: 2.1-dev memory leak?
References: <20061201051611.6327.qmail@web50303.mail.yahoo.com>
In-Reply-To: <20061201051611.6327.qmail@web50303.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Otis Gospodnetic wrote:
> Yeah, in this case, I'm running out of memory, and open file descriptors are, I think, just an indicator that IndexSearchers are not getting closed properly.  I've already increased the open file descriptors limit, but I'm limited to 2GB of RAM on a 32-bit box.
> 
> I'll try explicitly closing searchers now....some number of minutes later - bingo, that takes care of the leak.
> 
> For the curious, this is what I think happened (the app in question is http://www.simpy.com/ ).  The app was burning the CPU like crazy (imagine nearly double-digit load).  The IO didn't seem crazy (vmstat/iostat didn't show much bi/bo).  Still, after some digging around the source code, I found a place where I was just going through a few thousand Hits on each search against one particular Lucene index.  I fixed that problem (nothing to do with IndexSearcher opening/closing), and at the same time I upgraded to Lucene 2.1-dev.  This fix doubled the performance of the whole service.  Instead of handling N requests/second, it was now handling 2-3*N requests/second.  The CPU is still running pretty hot, but the service is handling more search traffic.  My guess is that this increase in performance and throughput simply increased the number of different Lucene indices (there are tens of thousands of them per box) being searches, and exposed an issue that was either hidden befo
re, or that the JVM was able to handle before, and now it no longer could.  I wish I had a little better grip on what exactly happened here, but I've got a stable application again.
> 
> Thanks for the help!

OK glad to hear all is well again!  Phew.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 15:01:57 2006
Return-Path: <java-user-return-24800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33437 invoked from network); 1 Dec 2006 15:01:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 15:01:56 -0000
Received: (qmail 31528 invoked by uid 500); 1 Dec 2006 15:01:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31499 invoked by uid 500); 1 Dec 2006 15:01:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31488 invoked by uid 99); 1 Dec 2006 15:01:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 07:01:56 -0800
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 07:01:43 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id DF9DA49C85
	for <java-user@lucene.apache.org>; Fri,  1 Dec 2006 10:01:23 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Fri, 01 Dec 2006 10:01:23 -0500
X-Sasl-enc: 1ABlH/y6Orl8wTh2K3ZL3ZK/AvgMNkkleltwhhNOd7Fr 1164985283
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 821546C53
	for <java-user@lucene.apache.org>; Fri,  1 Dec 2006 10:01:23 -0500 (EST)
Message-ID: <457043BD.9030002@mikemccandless.com>
Date: Fri, 01 Dec 2006 10:01:17 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: 2.1-dev memory leak?
References: <20061201053128.85461.qmail@web50305.mail.yahoo.com>
In-Reply-To: <20061201053128.85461.qmail@web50305.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Otis Gospodnetic wrote:
> Hi Mike,
> 
> Thanks for looking into this.  I think your stress test may match my production environment.
> I think System.gc() never guarantees anything will happen, it's just a hint.
> 
> I've got the following in one of my classes now.  Maybe you can stick it in your stress test and look at that last number at the bottom of this snippet.
> 
>     private static final MemoryMXBean bean = ManagementFactory.getMemoryMXBean();
> ...
>         LOG.info("Bean: " + bean);
>         LOG.info("Heap memory usage: " + bean.getHeapMemoryUsage());
>         LOG.info("Non-heap memory usage: " + bean.getNonHeapMemoryUsage());
>         LOG.info("Objects pending finalization: " + bean.getObjectPendingFinalizationCount());
>         long freeMemBefore = Runtime.getRuntime().freeMemory();
>         LOG.info("Running garbage collector via bean...");
>         bean.gc();
>         long freeMemAfter = Runtime.getRuntime().freeMemory();
>         LOG.info("Total Memory      : " + Runtime.getRuntime().totalMemory());
>         LOG.info("Max Memory        : " + Runtime.getRuntime().maxMemory());
>         LOG.info("Free Memory Before: " + freeMemBefore);
>         LOG.info("Free Memory After : " + freeMemAfter);
>         long memDelta = freeMemAfter-freeMemBefore;
>         LOG.info("Free Memory Now   : " + memDelta);
>         LOG.info("Heap memory usage: " + bean.getHeapMemoryUsage());
>         LOG.info("Non-heap memory usage: " + bean.getNonHeapMemoryUsage());
>         LOG.info("Objects pending finalization: " + bean.getObjectPendingFinalizationCount());
> 

Neat -- this is a nice interface!  OK, yes indeed after calling
System.gc() the "object pending finalization count" is often
non-zero (and often very high).  Apparently System.gc() is very
much "a suggestion".

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 15:04:39 2006
Return-Path: <java-user-return-24801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34489 invoked from network); 1 Dec 2006 15:04:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 15:04:38 -0000
Received: (qmail 37480 invoked by uid 500); 1 Dec 2006 15:04:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37450 invoked by uid 500); 1 Dec 2006 15:04:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37438 invoked by uid 99); 1 Dec 2006 15:04:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 07:04:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a2.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 07:04:26 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.dreamhost.com (Postfix) with ESMTP id DEB1887869
	for <java-user@lucene.apache.org>; Fri,  1 Dec 2006 07:03:59 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <45702A05.2000105@sirma.bg>
References: <1164969113.7354.12.camel@nils-laptop> <45702A05.2000105@sirma.bg>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <46C3AE6A-D9F9-4F4A-85CC-656523F0B681@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: an alternative to optimize?
Date: Fri, 1 Dec 2006 10:03:56 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I haven't tried it, but according to http://lucene.apache.org/java/ 
docs/fileformats.html, each segment is a complete sub index.  I  
_wonder_ if you couldn't manage your own merges by using  
IndexWriter.addIndexes() where you load each segment in separately  
(this may mean copying the segments to other directories, but I am  
not sure).  Another option would be to modify Lucene to expose the  
merge functionality.

This is pure speculation at this point, but I know the capabilities  
exist (as all optimize does is merge segments until there is one  
segment) so it seems like it should be possible.

-Grant

On Dec 1, 2006, at 8:11 AM, Stanislav Jordanov wrote:

> Guys,
>
> I've already asked this question but nobody answered:
>
> Suppose we have a relatively big index which is continuously  
> updated - i.e. new docs get added while some of the old docs get  
> deleted.
> For pragmatic reasons we have a restriction on maxMergeDocs so that  
> segment files don't get enormously big.
> Consider now a segment of max size (i.e. containing maxMergeDocs  
> docs hence not eligible for a merge)
> It is possible that (as time passes) this segment will have more  
> and more of its docs deleted.
> But as it is not merge-able it will remain the same size and with  
> lots of "wholes" in it which is bad for performance.
> The only way that I am aware of to correct this problem is to  
> invoke index optimization, which has several drawbacks:
> 1. it takes a while to optimize a big index.
> 2. the optimization process always produces a index comprising of a  
> single (extremely) large segment.
> We can live with 1.
> But 2 is undesirable.
> Is there a way to "optimize" (in terms of purging its deleted docs)  
> an index or a single segment
> without ending up with a single segment index?
>
> Best,
> Stanislav
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 18:08:08 2006
Return-Path: <java-user-return-24802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2318 invoked from network); 1 Dec 2006 18:08:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 18:08:07 -0000
Received: (qmail 56463 invoked by uid 500); 1 Dec 2006 18:08:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56429 invoked by uid 500); 1 Dec 2006 18:08:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56403 invoked by uid 99); 1 Dec 2006 18:08:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 10:08:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 10:07:57 -0800
Received: by ug-out-1314.google.com with SMTP id k40so2797984ugc
        for <java-user@lucene.apache.org>; Fri, 01 Dec 2006 10:07:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=pvv+OleA4UEvg3HilEmPjtV1fDfBj7qbDbZezieYRa5/KrsRI6WGXYd+r6KHtMmG0Lb1pyliXeUhCc2MoPOqHxBuf+Ot/OhoKBLuR5pe99qY2G48eer3QTAYJ8rvbmytc2tlhpZqazMjgWbZcvjuVYEEVy1LZZrzRv9VxAFRE2g=
Received: by 10.82.153.5 with SMTP id a5mr1091625bue.1164996455966;
        Fri, 01 Dec 2006 10:07:35 -0800 (PST)
Received: by 10.82.150.8 with HTTP; Fri, 1 Dec 2006 10:07:35 -0800 (PST)
Message-ID: <6e3ae6310612011007m7f87fb89v2c01bd81731d1646@mail.gmail.com>
Date: Fri, 1 Dec 2006 10:07:35 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Full text searching on documents saved in database as BLOB
In-Reply-To: <8D616EEBB30A9544B71E2FBFC32119F00305CFCD@hsnda2ksexch.noida.headstrong.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8D616EEBB30A9544B71E2FBFC32119F00305CFCD@hsnda2ksexch.noida.headstrong.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene can work for this case, in case you can extract data out in
plain text format. So whether your data is in BLOB or on file disk
does not really matter, but you need to detect or tell what type of
BLOB content it is, either by filename or binary format.

Usually when storing BLOB content, there will be another column
storing the filename. Based on the filename extension, you can map to
a corresponding extracting API, for pdf, word doc, etc. The database
search software I am working on, DBSight, uses this method.

-- 
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com


On 11/30/06, Inderjeet Kalra <Inderjeet.Kalra@headstrong.com> wrote:
> Hi,
>
> I have a query related to the full text searching on documents saved in
> database as BLOB. In our application, we are planning to save our
> documents in the database as BLOB and we have a requirement of searching
> a document on it's meta data and the content of the document i.e. search
> within document.
>
>
>
> Will Lucene serve our purpose, I have gone through the Lucene FAQs and
> various issues on the site but I am unable to find any references to the
> documents saved in the database as BLOB.
>
>
>
> 1. How can I search on the metadata of the document saved in the
> database as BLOB
>
> 2. How can I search on the content of the document i.e. search within
> the document saved in the database as BLOB
>
>
>
> If anyone has implemented the same functionality, can you suggest me any
> sample code so that i can start using lucene for the same.
>
>
>
> There is another search engine i.e. Oracle Text search engine which also
> does the same but which one is better ?
>
>
>
> Thanks & Regards
>
> Inderjeet
>
>
>
>
>
>
> ***The information transmitted is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material. Any review,retransmission,dissemination or other use of, or taking of any action in reliance upon, this information by persons or entities other than the intended recipient is prohibited. If you received this in error, please contact the sender and delete the material from any computer.***
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 19:54:54 2006
Return-Path: <java-user-return-24803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44913 invoked from network); 1 Dec 2006 19:54:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 19:54:52 -0000
Received: (qmail 53236 invoked by uid 500); 1 Dec 2006 19:54:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53206 invoked by uid 500); 1 Dec 2006 19:54:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53195 invoked by uid 99); 1 Dec 2006 19:54:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 11:54:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 11:54:40 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5E0BF5B76E; Fri,  1 Dec 2006 11:54:20 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 588477F403
	for <java-user@lucene.apache.org>; Fri,  1 Dec 2006 11:54:20 -0800 (PST)
Date: Fri, 1 Dec 2006 11:54:20 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Incremental Index and Comparing different Scores from different
 Index
In-Reply-To: <1164969113.7354.12.camel@nils-laptop>
Message-ID: <Pine.LNX.4.58.0612011147270.1847@hal.rescomp.berkeley.edu>
References: <1164969113.7354.12.camel@nils-laptop>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I have some questions about the scoring function and about how different
: scores can be compared.
	...
: Querying indexday1 gives me some Hits with the best having score a
: Querying indexday2 gives me some Hits with the best having score b
: and so on .....
:
: Now how can I compare those scores, since the regular idf will be
: different in the formular of every index?! Am I right here?

the short answer is you can't, not with the DefaultSimilarity, but you
might be able to write a custom Similarity that makes the scores
comparable by making the idf function a NOOP (of course, then your scores
won't be as "good" -- for some definition of good, but that may not matter
to you)

this FAQ entry, and in particular the thread from teh second link in it
have a *lot* of more info on this...
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-912c1f237bb00259185353182948e5935f0c2f03


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 19:58:40 2006
Return-Path: <java-user-return-24804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45844 invoked from network); 1 Dec 2006 19:58:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 19:58:39 -0000
Received: (qmail 60285 invoked by uid 500); 1 Dec 2006 19:58:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60260 invoked by uid 500); 1 Dec 2006 19:58:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60245 invoked by uid 99); 1 Dec 2006 19:58:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 11:58:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of marcelo.ochoa@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 11:58:28 -0800
Received: by wr-out-0506.google.com with SMTP id i21so1164117wra
        for <java-user@lucene.apache.org>; Fri, 01 Dec 2006 11:58:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=DRh8giQr3QX/SxT4whu1KEEvAUYp+yZ/XvE+yN/cogeAkSCVaqF/vxayhRav/KHNLNs/dIokmRcd2+RUSLStBFgAc1FWPeXPJ4NMV+rpFji6pLuSAmFF6ynBqw9Sm3XsGpzGNrF9HIRZ3NhFrxckChW6rSFWs18ylIs8ZiiVePs=
Received: by 10.78.117.10 with SMTP id p10mr5201839huc.1165003085609;
        Fri, 01 Dec 2006 11:58:05 -0800 (PST)
Received: by 10.78.145.11 with HTTP; Fri, 1 Dec 2006 11:58:05 -0800 (PST)
Message-ID: <126142c0612011158r34cdb0e2oe0879a22e3a308b9@mail.gmail.com>
Date: Fri, 1 Dec 2006 16:58:05 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Full text searching on documents saved in database as BLOB
In-Reply-To: <8D616EEBB30A9544B71E2FBFC32119F00305CFCD@hsnda2ksexch.noida.headstrong.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8D616EEBB30A9544B71E2FBFC32119F00305CFCD@hsnda2ksexch.noida.headstrong.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Inderjeet:
  I am working in a full text searching implementation for Oracle
Databases running Lucene on the Oracle JVM.
  The text searching functionality is ready yet, you can get latest
code uploaded on Tuesday, see the attachment text for the detail of
the new functionality included:
http://issues.apache.org/jira/browse/LUCENE-724?page=all
  Now, I am optimizing the Oracle Lucene Domain index, this new index
is implemented using Oracle Data Cartridge API and can be used as the
CTX_SYS.CONTEXT, including the SQL operators contains(column,'lucene
query string',correlation) and score(correlation) operators.
  The benefits of running Lucene inside the Oracle JVM is that all the
access to the data-sources which you index (now columns of type
VARCHAR2, CLOB, and XMLType) are locally, no network round trip, no
data marshalling and the cursors are in the same memory space.
  Also the Oracle JVM can be used as enterprise container for running
Lucene, because the Oracle JVM can be scaled up to thousand of
concurrent sessions.
   The Oracle OJVMDirectory classes replace the file system by BLOBs
as the storage for the  Lucene inverted index, so they inherits all
the benefits of the database storage such as full transactional
support, export and imports, recovery, auditing, and others.
   Best regards, Marcelo.

On 12/1/06, Inderjeet Kalra <Inderjeet.Kalra@headstrong.com> wrote:
> Hi,
>
> I have a query related to the full text searching on documents saved in
> database as BLOB. In our application, we are planning to save our
> documents in the database as BLOB and we have a requirement of searching
> a document on it's meta data and the content of the document i.e. search
> within document.
>
>
>
> Will Lucene serve our purpose, I have gone through the Lucene FAQs and
> various issues on the site but I am unable to find any references to the
> documents saved in the database as BLOB.
>
>
>
> 1. How can I search on the metadata of the document saved in the
> database as BLOB
>
> 2. How can I search on the content of the document i.e. search within
> the document saved in the database as BLOB
>
>
>
> If anyone has implemented the same functionality, can you suggest me any
> sample code so that i can start using lucene for the same.
>
>
>
> There is another search engine i.e. Oracle Text search engine which also
> does the same but which one is better ?
>
>
>
> Thanks & Regards
>
> Inderjeet
>
>
>
>
>
>
> ***The information transmitted is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material. Any review,retransmission,dissemination or other use of, or taking of any action in reliance upon, this information by persons or entities other than the intended recipient is prohibited. If you received this in error, please contact the sender and delete the material from any computer.***
>
>


-- 
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 20:00:20 2006
Return-Path: <java-user-return-24805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46643 invoked from network); 1 Dec 2006 20:00:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 20:00:19 -0000
Received: (qmail 65062 invoked by uid 500); 1 Dec 2006 20:00:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65032 invoked by uid 500); 1 Dec 2006 20:00:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65017 invoked by uid 99); 1 Dec 2006 20:00:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 12:00:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 12:00:09 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 10A435B76E; Fri,  1 Dec 2006 11:59:49 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0B1937F403
	for <java-user@lucene.apache.org>; Fri,  1 Dec 2006 11:59:49 -0800 (PST)
Date: Fri, 1 Dec 2006 11:59:49 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: an alternative to optimize?
In-Reply-To: <46C3AE6A-D9F9-4F4A-85CC-656523F0B681@apache.org>
Message-ID: <Pine.LNX.4.58.0612011155271.1847@hal.rescomp.berkeley.edu>
References: <1164969113.7354.12.camel@nils-laptop> <45702A05.2000105@sirma.bg>
 <46C3AE6A-D9F9-4F4A-85CC-656523F0B681@apache.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I haven't tried it, but according to http://lucene.apache.org/java/
: docs/fileformats.html, each segment is a complete sub index.  I
: _wonder_ if you couldn't manage your own merges by using
: IndexWriter.addIndexes() where you load each segment in separately
: (this may mean copying the segments to other directories, but I am

more specificly: opening an IndexReader on a an index with multiple
segments is functionally the same as opening a MultiReader on several
indexes with single segments.

so instead of having one index, and carefully controlling maxMergeDocs,
you could manually create many small indexes, all of which you
continiously optimize (both to remove deletions, and to keep the index at
a single segment) which you then explicly open a multi reader on.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 21:31:19 2006
Return-Path: <java-user-return-24806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10904 invoked from network); 1 Dec 2006 21:31:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 21:31:18 -0000
Received: (qmail 20554 invoked by uid 500); 1 Dec 2006 21:31:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19980 invoked by uid 500); 1 Dec 2006 21:31:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19969 invoked by uid 99); 1 Dec 2006 21:31:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 13:31:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a11.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 13:31:06 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.dreamhost.com (Postfix) with ESMTP id 4B248B80EA
	for <java-user@lucene.apache.org>; Fri,  1 Dec 2006 13:30:34 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <Pine.LNX.4.58.0612011155271.1847@hal.rescomp.berkeley.edu>
References: <1164969113.7354.12.camel@nils-laptop> <45702A05.2000105@sirma.bg> <46C3AE6A-D9F9-4F4A-85CC-656523F0B681@apache.org> <Pine.LNX.4.58.0612011155271.1847@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <934E5C71-3E19-4FD4-87FF-0CBC1F80D691@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: an alternative to optimize?
Date: Fri, 1 Dec 2006 16:30:29 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Are the search statistics the same for the MultiReader?  That is,  
would a search on a MultiReader over several small indexes  
necessarily return the same ranking as a single IndexReader on an  
optimized reader?  Would they return the same actual scores?

Just curious, I haven't tried MultiReader, but the code seems like it  
should, at least based on my quick glance at it.

-Grant

On Dec 1, 2006, at 2:59 PM, Chris Hostetter wrote:

>
> : I haven't tried it, but according to http://lucene.apache.org/java/
> : docs/fileformats.html, each segment is a complete sub index.  I
> : _wonder_ if you couldn't manage your own merges by using
> : IndexWriter.addIndexes() where you load each segment in separately
> : (this may mean copying the segments to other directories, but I am
>
> more specificly: opening an IndexReader on a an index with multiple
> segments is functionally the same as opening a MultiReader on several
> indexes with single segments.
>
> so instead of having one index, and carefully controlling  
> maxMergeDocs,
> you could manually create many small indexes, all of which you
> continiously optimize (both to remove deletions, and to keep the  
> index at
> a single segment) which you then explicly open a multi reader on.
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 21:37:24 2006
Return-Path: <java-user-return-24807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12409 invoked from network); 1 Dec 2006 21:37:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 21:37:22 -0000
Received: (qmail 28075 invoked by uid 500); 1 Dec 2006 21:37:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28030 invoked by uid 500); 1 Dec 2006 21:37:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28018 invoked by uid 99); 1 Dec 2006 21:37:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 13:37:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 13:37:12 -0800
Received: by ug-out-1314.google.com with SMTP id k40so2862835ugc
        for <java-user@lucene.apache.org>; Fri, 01 Dec 2006 13:36:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=MLfHKe1usKcIvw90X/7ERtjVh8bs/LEql7xq7/VE1EhbTgy9kILMEnf/SSuSb8a/BBMnlkaqQPb0/lDpXu7g/HsPab5B5i3ScHYk45X+6RQ+jIVC6gEdW95NS6aydUv5N8Yroyu7FZljKKmtkxsI1V/YT5TCdJkS55YTOkkmF1w=
Received: by 10.82.123.16 with SMTP id v16mr1132212buc.1165009011140;
        Fri, 01 Dec 2006 13:36:51 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Fri, 1 Dec 2006 13:36:50 -0800 (PST)
Message-ID: <c68e39170612011336n99767a9gff9720a5180291a@mail.gmail.com>
Date: Fri, 1 Dec 2006 16:36:50 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: an alternative to optimize?
In-Reply-To: <934E5C71-3E19-4FD4-87FF-0CBC1F80D691@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1164969113.7354.12.camel@nils-laptop> <45702A05.2000105@sirma.bg>
	 <46C3AE6A-D9F9-4F4A-85CC-656523F0B681@apache.org>
	 <Pine.LNX.4.58.0612011155271.1847@hal.rescomp.berkeley.edu>
	 <934E5C71-3E19-4FD4-87FF-0CBC1F80D691@apache.org>
X-Google-Sender-Auth: 69f4878613e4370c
X-Virus-Checked: Checked by ClamAV on apache.org

On 12/1/06, Grant Ingersoll <gsingers@apache.org> wrote:
> Are the search statistics the same for the MultiReader?  That is,
> would a search on a MultiReader over several small indexes
> necessarily return the same ranking as a single IndexReader on an
> optimized reader?  Would they return the same actual scores?
>
> Just curious, I haven't tried MultiReader, but the code seems like it
> should, at least based on my quick glance at it.

You use a MultiReader whenever you open a multi-segment index.
idf factors can change in the presence of deleted documents.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 21:43:29 2006
Return-Path: <java-user-return-24808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14023 invoked from network); 1 Dec 2006 21:43:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 21:43:28 -0000
Received: (qmail 42694 invoked by uid 500); 1 Dec 2006 21:43:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42665 invoked by uid 500); 1 Dec 2006 21:43:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42651 invoked by uid 99); 1 Dec 2006 21:43:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 13:43:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Dec 2006 13:43:12 -0800
Received: (qmail 3263 invoked from network); 1 Dec 2006 21:42:49 -0000
Received: from unknown (HELO p5496d2ba.dip.t-dialin.net) ([pbs]695637@[84.150.210.186])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 1 Dec 2006 21:42:49 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: BUG ? - lucene multisearcher / sorting
Date: Fri, 1 Dec 2006 22:43:32 +0100
User-Agent: KMail/1.8.2
References: <!~!UENERkVCMDkAAQACAAAAAAAAAAAAAAAAABgAAAAAAAAABfNx9wSmtUmMsEs+vysifsKAAAAQAAAAllT3zyRogk25nWWMiw9fBgEAAAAA@emedea.de>
In-Reply-To: <!~!UENERkVCMDkAAQACAAAAAAAAAAAAAAAAABgAAAAAAAAABfNx9wSmtUmMsEs+vysifsKAAAAQAAAAllT3zyRogk25nWWMiw9fBgEAAAAA@emedea.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200612012243.33074@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 01 December 2006 15:16, Kai R. Emde wrote:

> When we search "material" as an example, we found 207 hits in the the
> index. When we search this index in the multisearcher, with 3 index,
> there 206 hits contiguous and one after the next. OK bookA1, bookA2,
> bookA3 ... bookA206, bookB1, bookB2, bookb3 ... bookB6, bookA207,
> bookC1, bookC2 --

What do the fields really look like? If they contain non-numbers, Lucene 
probably sorts non-numerically (i.e. 1, 10, 11, 12, ..., 2). Also, there 
might be strange behavior if you sort on fields that are tokenized (not 
sure if that gives an exception). Not sure if anybody can help you unless 
you post a real self-contained testcase that either creates the index 
itself or put up a small index somewhere to reproduce the issue.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 02 09:34:55 2006
Return-Path: <java-user-return-24809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36883 invoked from network); 2 Dec 2006 09:34:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2006 09:34:55 -0000
Received: (qmail 17993 invoked by uid 500); 2 Dec 2006 09:34:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17844 invoked by uid 500); 2 Dec 2006 09:34:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17833 invoked by uid 99); 2 Dec 2006 09:34:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Dec 2006 01:34:56 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 02 Dec 2006 01:34:45 -0800
Received: (qmail 1285 invoked from network); 2 Dec 2006 09:30:42 -0000
Received: from unknown (HELO bhavin) (172.16.3.42)
  by mailserver with SMTP; 2 Dec 2006 09:30:42 -0000
Message-ID: <001401c715f7$39988230$2a0310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: How to generate Tag
Date: Sat, 2 Dec 2006 15:19:53 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0011_01C71625.51527D30"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0011_01C71625.51527D30
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi guys,

Do anybody have idea how to generate tag from lucene or is there any =
open source library availabe to generate a tag.

I am working on small "blog search" kind of thing so for that i want to =
generate TAGS...

Any pointer.....

Thanks.
- Bhavin pandya
------=_NextPart_000_0011_01C71625.51527D30--


From java-user-return-24810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 02 22:33:10 2006
Return-Path: <java-user-return-24810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23903 invoked from network); 2 Dec 2006 22:33:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2006 22:33:08 -0000
Received: (qmail 64009 invoked by uid 500); 2 Dec 2006 22:33:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63974 invoked by uid 500); 2 Dec 2006 22:33:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63963 invoked by uid 99); 2 Dec 2006 22:33:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Dec 2006 14:33:10 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 02 Dec 2006 14:32:58 -0800
Received: (qmail 37771 invoked by uid 60001); 2 Dec 2006 22:32:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=gPIPMRFlmfHBGtYBNEg9Y7pGswJD61tJ2so3oOUgs9E28rdBX8x9nyFAAXssq26s/YdZd6zhlMuq4Iiy/chdJ8+ZWkArcAeZvfX88l2JYxPjPR5A7Lo9dnlDKVvERkiU6DTeS+GmA4ZUTkWpvKe4V/0Zh4KYamXH5vO/T5NJWyU=  ;
Message-ID: <20061202223236.37769.qmail@web50306.mail.yahoo.com>
Received: from [74.65.202.166] by web50306.mail.yahoo.com via HTTP; Sat, 02 Dec 2006 14:32:36 PST
Date: Sat, 2 Dec 2006 14:32:36 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How to generate Tag
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Bhavin,=0A=0ATags are just (key)words/tokens, nothing Lucene-specific.  Are=
 you asking how to extract appropriate tags from a chunk of text?  If so, y=
ou could tokenize and count words, pulling out the most popular ones.  You =
could look or nouns only, or even proper nouns.  Tags that come with blog p=
osts (rel=3Dtag stuff) are typically not automatically extracted like that,=
 but rather entered by bloggers.=0A=0AOtis=0A=0A----- Original Message ----=
=0AFrom: Bhavin Pandya <bhavinp@rediff.co.in>=0ATo: java-user@lucene.apache=
.org=0ASent: Saturday, December 2, 2006 4:49:53 AM=0ASubject: How to genera=
te Tag=0A=0AHi guys,=0A=0ADo anybody have idea how to generate tag from luc=
ene or is there any open source library availabe to generate a tag.=0A=0AI =
am working on small "blog search" kind of thing so for that i want to gener=
ate TAGS...=0A=0AAny pointer.....=0A=0AThanks.=0A- Bhavin pandya=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 03 23:08:13 2006
Return-Path: <java-user-return-24811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87861 invoked from network); 3 Dec 2006 23:08:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2006 23:08:12 -0000
Received: (qmail 7689 invoked by uid 500); 3 Dec 2006 23:08:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6655 invoked by uid 500); 3 Dec 2006 23:08:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6644 invoked by uid 99); 3 Dec 2006 23:08:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 15:08:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 15:08:01 -0800
Received: (qmail 1176 invoked from network); 3 Dec 2006 23:07:39 -0000
Received: from unknown (HELO p5496eff5.dip.t-dialin.net) ([pbs]695637@[84.150.239.245])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 3 Dec 2006 23:07:39 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Phrase queries with wildcards
Date: Mon, 4 Dec 2006 00:08:31 +0100
User-Agent: KMail/1.8.2
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200612040008.31345@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Lucene's phrase queries don't support wildcards and I'm thinking about the 
best way to "fix" this. One way would be to change QueryParser so that it 
builds a MultiPhraseQuery when it encounters a wildcard inside a phrase. 
However, to expand the wildcard the QueryParser needs an IndexReader.

The other way might be to add a rewrite to PhraseQuery that returns a 
MultiPhraseQuery with the terms expanded. QueryParser would need to be 
modified so that the "*" isn't already lost when it's added to the phrase 
query.

The second solution looks better to me. Has anybody solved this problem 
already and would like to share his experiences?

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 03:43:21 2006
Return-Path: <java-user-return-24812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44232 invoked from network); 4 Dec 2006 03:43:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 03:43:20 -0000
Received: (qmail 6330 invoked by uid 500); 4 Dec 2006 03:43:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6181 invoked by uid 500); 4 Dec 2006 03:43:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6170 invoked by uid 99); 4 Dec 2006 03:43:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 19:43:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 19:43:12 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8CC975B773; Sun,  3 Dec 2006 19:42:50 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 822AB7F403
	for <java-user@lucene.apache.org>; Sun,  3 Dec 2006 19:42:50 -0800 (PST)
Date: Sun, 3 Dec 2006 19:42:50 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Phrase queries with wildcards
In-Reply-To: <200612040008.31345@danielnaber.de>
Message-ID: <Pine.LNX.4.58.0612031932020.9030@hal.rescomp.berkeley.edu>
References: <200612040008.31345@danielnaber.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: best way to "fix" this. One way would be to change QueryParser so that it
: builds a MultiPhraseQuery when it encounters a wildcard inside a phrase.
: However, to expand the wildcard the QueryParser needs an IndexReader.
:
: The other way might be to add a rewrite to PhraseQuery that returns a
: MultiPhraseQuery with the terms expanded. QueryParser would need to be
: modified so that the "*" isn't already lost when it's added to the phrase
: query.

i would suggest a hybrid approach .. write a new WildCardPhraseQuery that
rewrites to a MultiPhraseQuery ... QP doesn't need an IndexReader and
PhraseQuery doesn't need to start doing anything special with terms that
have "*" in them  (which would break backwards compatibility)

I don't have the code for QueryParser in front of me right now, but as i
recall the one anoying thing in all of this is that there is not easy way
to subclass QP and replace what type of query gets used when QP encounters
a "quoted" phrase ...  getFieldQuery is used for both single 'words' and
for quoted strings, and then the default slop is added afterwards if the
resulting query is an instance of PhraseQuery.

maybe the existing getFieldQuery methods should be deprecated and replaced
with new getQuotedQuery and getWordQuery ?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 07:29:36 2006
Return-Path: <java-user-return-24813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83157 invoked from network); 4 Dec 2006 07:29:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 07:29:35 -0000
Received: (qmail 23699 invoked by uid 500); 4 Dec 2006 07:29:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23663 invoked by uid 500); 4 Dec 2006 07:29:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23652 invoked by uid 99); 4 Dec 2006 07:29:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 23:29:37 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of babuce@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 23:29:26 -0800
Received: by nf-out-0910.google.com with SMTP id n28so3765856nfc
        for <java-user@lucene.apache.org>; Sun, 03 Dec 2006 23:28:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=A52dDpfaoOPdvlpuEcaaZOYjIxtL2FW/Kp4ACLWvIiMSQqWwIWfM6prtLXhEFkBgH9bsUzZhhWQivmT0KJxgOXXUNsLvDkbm3s7xBohLV65MR0pNryKMPazSjG8ekOFEszSlihmGZISyjKvoiMngHlsHDOI0UvJCGhIbMfpxHuM=
Received: by 10.82.123.16 with SMTP id v16mr1420099buc.1165217337140;
        Sun, 03 Dec 2006 23:28:57 -0800 (PST)
Received: by 10.82.135.20 with HTTP; Sun, 3 Dec 2006 23:28:57 -0800 (PST)
Message-ID: <4fe781a50612032328q22e97299g96d9b78e57f787aa@mail.gmail.com>
Date: Mon, 4 Dec 2006 11:28:57 +0400
From: "Eshwaramoorthy Babu" <babuce@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene - general question
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8725_18299272.1165217337123"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8725_18299272.1165217337123
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi ,

we have a requirement to compare 2 xml files and generate
result(reconcilation report).
The xml file size is 6MB each and the flrmat is as below
<Data>
<Id>123</Id>
<Amount>123</Amount>
</Data>


I have to implement the below logic

Number of matching ID'S in both xml
 Number of non matching ID'S in both xml
 Number of non matching ID'S in both xml

I am planning to use digester and lucene for my above requirement.

Is my desicion of using lucene  correct? or is there any bettwr approch for
my above problem.

Thanks,
Babu

------=_Part_8725_18299272.1165217337123--

From java-user-return-24814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 07:42:21 2006
Return-Path: <java-user-return-24814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84511 invoked from network); 4 Dec 2006 07:42:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 07:42:21 -0000
Received: (qmail 36369 invoked by uid 500); 4 Dec 2006 07:42:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36338 invoked by uid 500); 4 Dec 2006 07:42:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36327 invoked by uid 99); 4 Dec 2006 07:42:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 23:42:24 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lukas.vlcek@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Dec 2006 23:42:13 -0800
Received: by nf-out-0910.google.com with SMTP id n28so3767970nfc
        for <java-user@lucene.apache.org>; Sun, 03 Dec 2006 23:41:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=mjkdrZIKb9NQpHj4xoF2iCY+k8Q6UZQYSqvRnvEknQdDgbM8zL+OhPYXrJFM8z3QU7pQCWRvsmQvu1yynraaZaQTlp8Lw/gAfS16c6vnScV4nlgRFSktewr522XzfSaIdTLS2zNoUos8wCuKNzuOafhCDj6Axwp+4L+D1CBhZ8M=
Received: by 10.82.141.4 with SMTP id o4mr1419363bud.1165218111947;
        Sun, 03 Dec 2006 23:41:51 -0800 (PST)
Received: by 10.82.147.8 with HTTP; Sun, 3 Dec 2006 23:41:51 -0800 (PST)
Message-ID: <52c3ddca0612032341pe9f454enb5271e1b73a965ba@mail.gmail.com>
Date: Mon, 4 Dec 2006 08:41:51 +0100
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
Reply-To: java-user@lucene.apache.org
To: java-user@lucene.apache.org
Subject: Re: lucene - general question
In-Reply-To: <4fe781a50612032328q22e97299g96d9b78e57f787aa@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34512_962747.1165218111920"
References: <4fe781a50612032328q22e97299g96d9b78e57f787aa@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34512_962747.1165218111920
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Babu,

Sorry but I don't see any point in using Lucene if you don't need search
functionality. Also for parsing XML files I would consider using some
scripting language (as opposed to pure Java based solution). The reason is
that scripting languages can be more effectire when simplicity of result
code is important and as of Java 6 they can run right inside JVM - so
integration with you java code is very simple.

Just my 2 cents.

Lukas

On 12/4/06, Eshwaramoorthy Babu <babuce@gmail.com> wrote:
>
> Hi ,
>
> we have a requirement to compare 2 xml files and generate
> result(reconcilation report).
> The xml file size is 6MB each and the flrmat is as below
> <Data>
> <Id>123</Id>
> <Amount>123</Amount>
> </Data>
>
>
> I have to implement the below logic
>
> Number of matching ID'S in both xml
> Number of non matching ID'S in both xml
> Number of non matching ID'S in both xml
>
> I am planning to use digester and lucene for my above requirement.
>
> Is my desicion of using lucene  correct? or is there any bettwr approch
> for
> my above problem.
>
> Thanks,
> Babu
>
>

------=_Part_34512_962747.1165218111920--

From java-user-return-24815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 08:09:20 2006
Return-Path: <java-user-return-24815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89423 invoked from network); 4 Dec 2006 08:09:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 08:09:18 -0000
Received: (qmail 69624 invoked by uid 500); 4 Dec 2006 08:09:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69248 invoked by uid 500); 4 Dec 2006 08:09:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69237 invoked by uid 99); 4 Dec 2006 08:09:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:09:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of babuce@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:09:09 -0800
Received: by nf-out-0910.google.com with SMTP id n28so3772458nfc
        for <java-user@lucene.apache.org>; Mon, 04 Dec 2006 00:08:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IKsXNwA9hLNX/hV4HiVszFJwR9P5mvJ48pOTpAhnnZ81zZESrZPiaV+drL+VaRH5KeCyFppTcvDFRpXlCuz++7YXGy0Vw1CoqPb1MpfrlHgNtgEeJO/R0mRsYbngWP6jVZlzJl2ahOu5lZkDkXc2pQoUq+Ywli7xOntDbTx8Xw0=
Received: by 10.82.118.2 with SMTP id q2mr1422406buc.1165219727640;
        Mon, 04 Dec 2006 00:08:47 -0800 (PST)
Received: by 10.82.135.20 with HTTP; Mon, 4 Dec 2006 00:08:47 -0800 (PST)
Message-ID: <4fe781a50612040008t7fcf3623gb0bbcb17f3b0229@mail.gmail.com>
Date: Mon, 4 Dec 2006 12:08:47 +0400
From: "Eshwaramoorthy Babu" <babuce@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene - general question
In-Reply-To: <52c3ddca0612032341pe9f454enb5271e1b73a965ba@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8797_17619373.1165219727475"
References: <4fe781a50612032328q22e97299g96d9b78e57f787aa@mail.gmail.com>
	 <52c3ddca0612032341pe9f454enb5271e1b73a965ba@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8797_17619373.1165219727475
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Lukas,

Thanks for your response.
I was planning to search for 1st xml ID's in 2nd XML. so I thought of using
lucene for  search.
Can you please suggest me some scripting solution. Is perl right solution?

Thanks,
Babu




On 12/4/06, Lukas Vlcek <lukas.vlcek@gmail.com> wrote:
>
> Hi Babu,
>
> Sorry but I don't see any point in using Lucene if you don't need search
> functionality. Also for parsing XML files I would consider using some
> scripting language (as opposed to pure Java based solution). The reason is
> that scripting languages can be more effectire when simplicity of result
> code is important and as of Java 6 they can run right inside JVM - so
> integration with you java code is very simple.
>
> Just my 2 cents.
>
> Lukas
>
> On 12/4/06, Eshwaramoorthy Babu <babuce@gmail.com> wrote:
> >
> > Hi ,
> >
> > we have a requirement to compare 2 xml files and generate
> > result(reconcilation report).
> > The xml file size is 6MB each and the flrmat is as below
> > <Data>
> > <Id>123</Id>
> > <Amount>123</Amount>
> > </Data>
> >
> >
> > I have to implement the below logic
> >
> > Number of matching ID'S in both xml
> > Number of non matching ID'S in both xml
> > Number of non matching ID'S in both xml
> >
> > I am planning to use digester and lucene for my above requirement.
> >
> > Is my desicion of using lucene  correct? or is there any bettwr approch
> > for
> > my above problem.
> >
> > Thanks,
> > Babu
> >
> >
>
>

------=_Part_8797_17619373.1165219727475--

From java-user-return-24816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 08:45:55 2006
Return-Path: <java-user-return-24816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3599 invoked from network); 4 Dec 2006 08:45:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 08:45:54 -0000
Received: (qmail 98613 invoked by uid 500); 4 Dec 2006 08:45:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98582 invoked by uid 500); 4 Dec 2006 08:45:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98571 invoked by uid 99); 4 Dec 2006 08:45:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:45:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of babuce@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:45:39 -0800
Received: by nf-out-0910.google.com with SMTP id n28so3779378nfc
        for <java-user@lucene.apache.org>; Mon, 04 Dec 2006 00:45:18 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=cU0OFftQF9nbpSfE/Cx3C0h/YgNmv60wTfw8O9Qu+nLCsB3B3WONWCYdoBHH9YmVRNrwiBNBoFBDxzfIm0pvFAFCqvVMeBa3RRNfkNR/osm5sgSGwR/560LfHnUYgLzHEtz3qCYqSyqfoG0b5zqu0y3jt9XtiFK7MXsGl/j1jEQ=
Received: by 10.82.126.5 with SMTP id y5mr1425194buc.1165221917907;
        Mon, 04 Dec 2006 00:45:17 -0800 (PST)
Received: by 10.82.135.20 with HTTP; Mon, 4 Dec 2006 00:45:17 -0800 (PST)
Message-ID: <4fe781a50612040045q1e868bbfqca7db48c5526ee87@mail.gmail.com>
Date: Mon, 4 Dec 2006 12:45:17 +0400
From: "Eshwaramoorthy Babu" <babuce@gmail.com>
To: java-user@lucene.apache.org
Subject: Multiple character wildcard search
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8877_24901208.1165221917890"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8877_24901208.1165221917890
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,



Can anyone please tell me how to specify multiple character wildcard
searches in "Term"

Below is my requirement



1) I want search all names that starts with Z (Z*)

2) My programme will receive list of names in JAVA collection (Vector or
ArrayList or Hashtable), I want to search for all the names which are not
there in the collection



I have tried the below code to implement the 1st problem but the search
returns 0 result



Analyzer analyzer = new WhitespaceAnalyzer();

boolean createFlag = true;

.......

.......

.......

IndexSearcher searcher = new IndexSearcher(indexDir1);

Query query = new TermQuery(new Term("name", "Z*"));



When I execute teh above code the search is returning 0 Hits.

If I give the full name "Zane" the search returns 1 Hits.





Thanks in advance,

Babu

------=_Part_8877_24901208.1165221917890--

From java-user-return-24817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 08:50:58 2006
Return-Path: <java-user-return-24817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4548 invoked from network); 4 Dec 2006 08:50:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 08:50:58 -0000
Received: (qmail 5070 invoked by uid 500); 4 Dec 2006 08:50:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4839 invoked by uid 500); 4 Dec 2006 08:50:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4828 invoked by uid 99); 4 Dec 2006 08:50:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:50:58 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lukas.vlcek@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 00:50:35 -0800
Received: by nf-out-0910.google.com with SMTP id n28so3780245nfc
        for <java-user@lucene.apache.org>; Mon, 04 Dec 2006 00:50:14 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=j5F7LyXOjQJbb8giu5AfEqL2/LeI9rbtJPfjfewy+E9kfjXpt1jsbgt7uYrWMDDEmwEff18aNLvpr3FUJX+NL4iNnP9E9Umu0AZ2rgLyKZSkXsNmwfrDxMuC56M4jNdWNURFWPguJQ/FjHXSFmI2hVG2DtSLpwWJjR58jRpsOGg=
Received: by 10.82.101.3 with SMTP id y3mr1423635bub.1165222213713;
        Mon, 04 Dec 2006 00:50:13 -0800 (PST)
Received: by 10.82.147.8 with HTTP; Mon, 4 Dec 2006 00:50:13 -0800 (PST)
Message-ID: <52c3ddca0612040050s4eacfb32re73a8774ffeeb97e@mail.gmail.com>
Date: Mon, 4 Dec 2006 09:50:13 +0100
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
Reply-To: java-user@lucene.apache.org
To: java-user@lucene.apache.org
Subject: Re: lucene - general question
In-Reply-To: <4fe781a50612040008t7fcf3623gb0bbcb17f3b0229@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35267_31364738.1165222213647"
References: <4fe781a50612032328q22e97299g96d9b78e57f787aa@mail.gmail.com>
	 <52c3ddca0612032341pe9f454enb5271e1b73a965ba@mail.gmail.com>
	 <4fe781a50612040008t7fcf3623gb0bbcb17f3b0229@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35267_31364738.1165222213647
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Try to look at Groovy (I haven't used it yet but some people say it is much
easire to work with XML file in Groovy then in Java). It produces class
files so it can be integrated with your exisitng Java code. 6MB file is not
that much unless you are working in limited environment (like mobile
device?).

Also if the only thing you really need is to search for some strings in two
files and you don't need to integrate this function with other Java code
then you can simply go with *unix command line tools (grep, wc, ...) that
should give you what you need very quickly.

Lukas

On 12/4/06, Eshwaramoorthy Babu <babuce@gmail.com> wrote:
>
> Hi Lukas,
>
> Thanks for your response.
> I was planning to search for 1st xml ID's in 2nd XML. so I thought of
> using
> lucene for  search.
> Can you please suggest me some scripting solution. Is perl right solution?
>
> Thanks,
> Babu
>
>
>
>
> On 12/4/06, Lukas Vlcek <lukas.vlcek@gmail.com> wrote:
> >
> > Hi Babu,
> >
> > Sorry but I don't see any point in using Lucene if you don't need search
> > functionality. Also for parsing XML files I would consider using some
> > scripting language (as opposed to pure Java based solution). The reason
> is
> > that scripting languages can be more effectire when simplicity of result
> > code is important and as of Java 6 they can run right inside JVM - so
> > integration with you java code is very simple.
> >
> > Just my 2 cents.
> >
> > Lukas
> >
> > On 12/4/06, Eshwaramoorthy Babu <babuce@gmail.com> wrote:
> > >
> > > Hi ,
> > >
> > > we have a requirement to compare 2 xml files and generate
> > > result(reconcilation report).
> > > The xml file size is 6MB each and the flrmat is as below
> > > <Data>
> > > <Id>123</Id>
> > > <Amount>123</Amount>
> > > </Data>
> > >
> > >
> > > I have to implement the below logic
> > >
> > > Number of matching ID'S in both xml
> > > Number of non matching ID'S in both xml
> > > Number of non matching ID'S in both xml
> > >
> > > I am planning to use digester and lucene for my above requirement.
> > >
> > > Is my desicion of using lucene  correct? or is there any bettwr
> approch
> > > for
> > > my above problem.
> > >
> > > Thanks,
> > > Babu
> > >
> > >
> >
> >
>
>

------=_Part_35267_31364738.1165222213647--

From java-user-return-24818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 09:22:05 2006
Return-Path: <java-user-return-24818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18535 invoked from network); 4 Dec 2006 09:22:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 09:22:04 -0000
Received: (qmail 30886 invoked by uid 500); 4 Dec 2006 09:22:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30857 invoked by uid 500); 4 Dec 2006 09:22:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30846 invoked by uid 99); 4 Dec 2006 09:22:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 01:22:05 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 04 Dec 2006 01:21:54 -0800
Received: (qmail 27895 invoked from network); 4 Dec 2006 09:17:49 -0000
Received: from unknown (HELO bhavin) (172.16.3.42)
  by mailserver with SMTP; 4 Dec 2006 09:17:49 -0000
Message-ID: <002601c71787$c2a84560$2a0310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
References: <4fe781a50612040045q1e868bbfqca7db48c5526ee87@mail.gmail.com>
Subject: Re: Multiple character wildcard search
Date: Mon, 4 Dec 2006 15:07:02 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

Babu,

Use "PrefixQuery" and if you are looking for phrase also then 
"PhrasePrefixQuery"...
check api for usage....

- Bhavin pandya


----- Original Message ----- 
From: "Eshwaramoorthy Babu" <babuce@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Monday, December 04, 2006 2:15 PM
Subject: Multiple character wildcard search


> Hi,
>
>
>
> Can anyone please tell me how to specify multiple character wildcard
> searches in "Term"
>
> Below is my requirement
>
>
>
> 1) I want search all names that starts with Z (Z*)
>
> 2) My programme will receive list of names in JAVA collection (Vector or
> ArrayList or Hashtable), I want to search for all the names which are not
> there in the collection
>
>
>
> I have tried the below code to implement the 1st problem but the search
> returns 0 result
>
>
>
> Analyzer analyzer = new WhitespaceAnalyzer();
>
> boolean createFlag = true;
>
> .......
>
> .......
>
> .......
>
> IndexSearcher searcher = new IndexSearcher(indexDir1);
>
> Query query = new TermQuery(new Term("name", "Z*"));
>
>
>
> When I execute teh above code the search is returning 0 Hits.
>
> If I give the full name "Zane" the search returns 1 Hits.
>
>
>
>
>
> Thanks in advance,
>
> Babu
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 09:42:38 2006
Return-Path: <java-user-return-24819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26478 invoked from network); 4 Dec 2006 09:42:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 09:42:38 -0000
Received: (qmail 57695 invoked by uid 500); 4 Dec 2006 09:42:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57213 invoked by uid 500); 4 Dec 2006 09:42:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57202 invoked by uid 99); 4 Dec 2006 09:42:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 01:42:39 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rociel.buico@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 01:42:28 -0800
Received: by ug-out-1314.google.com with SMTP id k40so3306283ugc
        for <java-user@lucene.apache.org>; Mon, 04 Dec 2006 01:42:06 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fsOUUl3J+D1g1qWORZJXkpDM00dItJvyup/L9vatMYWQPPvWNkQ+hjRvGz0Haq4CX6UlSoXp19HUwlzv8PUClinRxG21IxIPnVJnYTtarhtuHWE4ggEqukzMDXZqNJYy9ujSURcCvMM5fRaCzcfooZ9CnFskpon/OFr8wi2wgmA=
Received: by 10.66.221.6 with SMTP id t6mr11654375ugg.1165225325985;
        Mon, 04 Dec 2006 01:42:05 -0800 (PST)
Received: by 10.67.31.4 with HTTP; Mon, 4 Dec 2006 01:42:05 -0800 (PST)
Message-ID: <1ff1ea2f0612040142o2ff5c6eek7d380058397f6b2c@mail.gmail.com>
Date: Mon, 4 Dec 2006 17:42:05 +0800
From: "rociel.buico@gmail.com" <rociel.buico@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene - general question
In-Reply-To: <52c3ddca0612040050s4eacfb32re73a8774ffeeb97e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42157_20296166.1165225325943"
References: <4fe781a50612032328q22e97299g96d9b78e57f787aa@mail.gmail.com>
	 <52c3ddca0612032341pe9f454enb5271e1b73a965ba@mail.gmail.com>
	 <4fe781a50612040008t7fcf3623gb0bbcb17f3b0229@mail.gmail.com>
	 <52c3ddca0612040050s4eacfb32re73a8774ffeeb97e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_42157_20296166.1165225325943
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Babu,

your sample xml schema contains only few fields,
why not consider to use db (mysql)

todo:
read your xml file, then use digester to convert to java object after that
insert it your db.
when your done with your insert stuff, you can simply query your db anytime
you like.

cheers,
Buics



On 12/4/06, Lukas Vlcek <lukas.vlcek@gmail.com> wrote:
>
> Hi,
>
> Try to look at Groovy (I haven't used it yet but some people say it is
> much
> easire to work with XML file in Groovy then in Java). It produces class
> files so it can be integrated with your exisitng Java code. 6MB file is
> not
> that much unless you are working in limited environment (like mobile
> device?).
>
> Also if the only thing you really need is to search for some strings in
> two
> files and you don't need to integrate this function with other Java code
> then you can simply go with *unix command line tools (grep, wc, ...) that
> should give you what you need very quickly.
>
> Lukas
>
> On 12/4/06, Eshwaramoorthy Babu <babuce@gmail.com> wrote:
> >
> > Hi Lukas,
> >
> > Thanks for your response.
> > I was planning to search for 1st xml ID's in 2nd XML. so I thought of
> > using
> > lucene for  search.
> > Can you please suggest me some scripting solution. Is perl right
> solution?
> >
> > Thanks,
> > Babu
> >
> >
> >
> >
> > On 12/4/06, Lukas Vlcek <lukas.vlcek@gmail.com> wrote:
> > >
> > > Hi Babu,
> > >
> > > Sorry but I don't see any point in using Lucene if you don't need
> search
> > > functionality. Also for parsing XML files I would consider using some
> > > scripting language (as opposed to pure Java based solution). The
> reason
> > is
> > > that scripting languages can be more effectire when simplicity of
> result
> > > code is important and as of Java 6 they can run right inside JVM - so
> > > integration with you java code is very simple.
> > >
> > > Just my 2 cents.
> > >
> > > Lukas
> > >
> > > On 12/4/06, Eshwaramoorthy Babu <babuce@gmail.com> wrote:
> > > >
> > > > Hi ,
> > > >
> > > > we have a requirement to compare 2 xml files and generate
> > > > result(reconcilation report).
> > > > The xml file size is 6MB each and the flrmat is as below
> > > > <Data>
> > > > <Id>123</Id>
> > > > <Amount>123</Amount>
> > > > </Data>
> > > >
> > > >
> > > > I have to implement the below logic
> > > >
> > > > Number of matching ID'S in both xml
> > > > Number of non matching ID'S in both xml
> > > > Number of non matching ID'S in both xml
> > > >
> > > > I am planning to use digester and lucene for my above requirement.
> > > >
> > > > Is my desicion of using lucene  correct? or is there any bettwr
> > approch
> > > > for
> > > > my above problem.
> > > >
> > > > Thanks,
> > > > Babu
> > > >
> > > >
> > >
> > >
> >
> >
>
>


-- 
"Programs must be written for people to read, and only incidentally for
machines to execute."

- Abelson & Sussman, SICP, preface to the first edition

------=_Part_42157_20296166.1165225325943--

From java-user-return-24820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 09:47:15 2006
Return-Path: <java-user-return-24820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28483 invoked from network); 4 Dec 2006 09:47:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 09:47:14 -0000
Received: (qmail 66868 invoked by uid 500); 4 Dec 2006 09:47:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66842 invoked by uid 500); 4 Dec 2006 09:47:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66830 invoked by uid 99); 4 Dec 2006 09:47:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 01:47:16 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of babuce@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 01:47:05 -0800
Received: by nf-out-0910.google.com with SMTP id n28so3792428nfc
        for <java-user@lucene.apache.org>; Mon, 04 Dec 2006 01:46:44 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nreBF/8RR2V+XTQRCUD+g4ESh/pDO4qYqbtCjGlT9rEqLN+kcnHtvgsjIFVAMryDghzKJfCRfgaRx4twFScj1xLWOODxiIwyfPSelcCme18hlka7ZBxqmNc1xza7Z1FRzmbHbBJCTp+pZMhZY48eyVYjLhyfSEeULmjmOgY0Lto=
Received: by 10.82.135.13 with SMTP id i13mr1438079bud.1165225603883;
        Mon, 04 Dec 2006 01:46:43 -0800 (PST)
Received: by 10.82.135.20 with HTTP; Mon, 4 Dec 2006 01:46:43 -0800 (PST)
Message-ID: <4fe781a50612040146n5e001628rbc68e0d40057dc45@mail.gmail.com>
Date: Mon, 4 Dec 2006 13:46:43 +0400
From: "Eshwaramoorthy Babu" <babuce@gmail.com>
To: java-user@lucene.apache.org, "Bhavin Pandya" <bhavinp@rediff.co.in>
Subject: Re: Multiple character wildcard search
In-Reply-To: <002601c71787$c2a84560$2a0310ac@bhavin>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9149_19871665.1165225603860"
References: <4fe781a50612040045q1e868bbfqca7db48c5526ee87@mail.gmail.com>
	 <002601c71787$c2a84560$2a0310ac@bhavin>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9149_19871665.1165225603860
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Bhavin,

Thanks for your response. I tried the below   Query query = new
PrefixQuery(new Term("name", "Z*"));

but it still the query returns 0 result.

Also can you please tell me how to search form  JAVA collection?

Thanks,
Babu


On 12/4/06, Bhavin Pandya <bhavinp@rediff.co.in> wrote:
>
> Babu,
>
> Use "PrefixQuery" and if you are looking for phrase also then
> "PhrasePrefixQuery"...
> check api for usage....
>
> - Bhavin pandya
>
>
> ----- Original Message -----
> From: "Eshwaramoorthy Babu" <babuce@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Monday, December 04, 2006 2:15 PM
> Subject: Multiple character wildcard search
>
>
> > Hi,
> >
> >
> >
> > Can anyone please tell me how to specify multiple character wildcard
> > searches in "Term"
> >
> > Below is my requirement
> >
> >
> >
> > 1) I want search all names that starts with Z (Z*)
> >
> > 2) My programme will receive list of names in JAVA collection (Vector or
> > ArrayList or Hashtable), I want to search for all the names which are
> not
> > there in the collection
> >
> >
> >
> > I have tried the below code to implement the 1st problem but the search
> > returns 0 result
> >
> >
> >
> > Analyzer analyzer = new WhitespaceAnalyzer();
> >
> > boolean createFlag = true;
> >
> > .......
> >
> > .......
> >
> > .......
> >
> > IndexSearcher searcher = new IndexSearcher(indexDir1);
> >
> > Query query = new TermQuery(new Term("name", "Z*"));
> >
> >
> >
> > When I execute teh above code the search is returning 0 Hits.
> >
> > If I give the full name "Zane" the search returns 1 Hits.
> >
> >
> >
> >
> >
> > Thanks in advance,
> >
> > Babu
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9149_19871665.1165225603860--

From java-user-return-24821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 09:55:49 2006
Return-Path: <java-user-return-24821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30983 invoked from network); 4 Dec 2006 09:55:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 09:55:48 -0000
Received: (qmail 80674 invoked by uid 500); 4 Dec 2006 09:55:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80285 invoked by uid 500); 4 Dec 2006 09:55:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80272 invoked by uid 99); 4 Dec 2006 09:55:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 01:55:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of babuce@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 01:55:41 -0800
Received: by nf-out-0910.google.com with SMTP id n28so3793832nfc
        for <java-user@lucene.apache.org>; Mon, 04 Dec 2006 01:55:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kIwgI5I/mdiqEGU8rWirHlrA0gR3hiUVqQYS/Ouyp+s38qZ1BTLfkqHmi5Uu7Q7z0Nzykxd1L1yw92aVNU5Q4+JphtdK0AdunvrjTTexIS+lM5VH6vbcrhPd/jWiJY1SRK7dWB/4FC0mswqJh42uecsLLeAGjxfUMVyDl02exrQ=
Received: by 10.82.118.2 with SMTP id q2mr1436686buc.1165226119775;
        Mon, 04 Dec 2006 01:55:19 -0800 (PST)
Received: by 10.82.135.20 with HTTP; Mon, 4 Dec 2006 01:55:19 -0800 (PST)
Message-ID: <4fe781a50612040155k7d82bbe1pd96ef98a153a10da@mail.gmail.com>
Date: Mon, 4 Dec 2006 13:55:19 +0400
From: "Eshwaramoorthy Babu" <babuce@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene - general question
In-Reply-To: <1ff1ea2f0612040142o2ff5c6eek7d380058397f6b2c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9202_10041688.1165226119750"
References: <4fe781a50612032328q22e97299g96d9b78e57f787aa@mail.gmail.com>
	 <52c3ddca0612032341pe9f454enb5271e1b73a965ba@mail.gmail.com>
	 <4fe781a50612040008t7fcf3623gb0bbcb17f3b0229@mail.gmail.com>
	 <52c3ddca0612040050s4eacfb32re73a8774ffeeb97e@mail.gmail.com>
	 <1ff1ea2f0612040142o2ff5c6eek7d380058397f6b2c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9202_10041688.1165226119750
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Buics,

Thanks for your response..

I will receive 2  xml files, I have to compare these 2 and generate a xml
report
with below

1. Matching id's from both xml
 2. Duplicate id's from both xml

The requirement is for reconcilation of 2 application data.
For this I have to get the get all id's from 1st xml and search for the
matching and duplicate in the 2nd xml.

If I use database again I have to write procedute/JAVA to do the comparison
and generate the report.

Thanks,
Babu






On 12/4/06, rociel.buico@gmail.com <rociel.buico@gmail.com> wrote:
>
> Hi Babu,
>
> your sample xml schema contains only few fields,
> why not consider to use db (mysql)
>
> todo:
> read your xml file, then use digester to convert to java object after that
> insert it your db.
> when your done with your insert stuff, you can simply query your db
> anytime
> you like.
>
> cheers,
> Buics
>
>
>
> On 12/4/06, Lukas Vlcek <lukas.vlcek@gmail.com> wrote:
> >
> > Hi,
> >
> > Try to look at Groovy (I haven't used it yet but some people say it is
> > much
> > easire to work with XML file in Groovy then in Java). It produces class
> > files so it can be integrated with your exisitng Java code. 6MB file is
> > not
> > that much unless you are working in limited environment (like mobile
> > device?).
> >
> > Also if the only thing you really need is to search for some strings in
> > two
> > files and you don't need to integrate this function with other Java code
> > then you can simply go with *unix command line tools (grep, wc, ...)
> that
> > should give you what you need very quickly.
> >
> > Lukas
> >
> > On 12/4/06, Eshwaramoorthy Babu <babuce@gmail.com> wrote:
> > >
> > > Hi Lukas,
> > >
> > > Thanks for your response.
> > > I was planning to search for 1st xml ID's in 2nd XML. so I thought of
> > > using
> > > lucene for  search.
> > > Can you please suggest me some scripting solution. Is perl right
> > solution?
> > >
> > > Thanks,
> > > Babu
> > >
> > >
> > >
> > >
> > > On 12/4/06, Lukas Vlcek <lukas.vlcek@gmail.com> wrote:
> > > >
> > > > Hi Babu,
> > > >
> > > > Sorry but I don't see any point in using Lucene if you don't need
> > search
> > > > functionality. Also for parsing XML files I would consider using
> some
> > > > scripting language (as opposed to pure Java based solution). The
> > reason
> > > is
> > > > that scripting languages can be more effectire when simplicity of
> > result
> > > > code is important and as of Java 6 they can run right inside JVM -
> so
> > > > integration with you java code is very simple.
> > > >
> > > > Just my 2 cents.
> > > >
> > > > Lukas
> > > >
> > > > On 12/4/06, Eshwaramoorthy Babu <babuce@gmail.com> wrote:
> > > > >
> > > > > Hi ,
> > > > >
> > > > > we have a requirement to compare 2 xml files and generate
> > > > > result(reconcilation report).
> > > > > The xml file size is 6MB each and the flrmat is as below
> > > > > <Data>
> > > > > <Id>123</Id>
> > > > > <Amount>123</Amount>
> > > > > </Data>
> > > > >
> > > > >
> > > > > I have to implement the below logic
> > > > >
> > > > > Number of matching ID'S in both xml
> > > > > Number of non matching ID'S in both xml
> > > > > Number of non matching ID'S in both xml
> > > > >
> > > > > I am planning to use digester and lucene for my above requirement.
> > > > >
> > > > > Is my desicion of using lucene  correct? or is there any bettwr
> > > approch
> > > > > for
> > > > > my above problem.
> > > > >
> > > > > Thanks,
> > > > > Babu
> > > > >
> > > > >
> > > >
> > > >
> > >
> > >
> >
> >
>
>
> --
> "Programs must be written for people to read, and only incidentally for
> machines to execute."
>
> - Abelson & Sussman, SICP, preface to the first edition
>
>

------=_Part_9202_10041688.1165226119750--

From java-user-return-24822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 09:56:15 2006
Return-Path: <java-user-return-24822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31069 invoked from network); 4 Dec 2006 09:56:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 09:56:14 -0000
Received: (qmail 82183 invoked by uid 500); 4 Dec 2006 09:56:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81778 invoked by uid 500); 4 Dec 2006 09:56:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81767 invoked by uid 99); 4 Dec 2006 09:56:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 01:56:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 01:56:06 -0800
Received: from [192.168.128.211] (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id kB49thER004393
	for <java-user@lucene.apache.org>; Mon, 4 Dec 2006 11:55:44 +0200
Message-ID: <4573F09E.7070903@sirma.bg>
Date: Mon, 04 Dec 2006 11:55:42 +0200
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Dreaded optimize (again!)
References: <4fe781a50612040045q1e868bbfqca7db48c5526ee87@mail.gmail.com> <002601c71787$c2a84560$2a0310ac@bhavin>
In-Reply-To: <002601c71787$c2a84560$2a0310ac@bhavin>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Guys,

there's another aspect of the index optimize operation, that confuses us 
a lot - the free disk space it requires to complete successfully.
Initially we thought that an amount of free disk space equal to the 
index size (prior to optimization) should suffice.
Then it became clear that having the Index opened for reading (i.e. 
searching) while optimizing it prevents old segments from being deletion.
So let us assume that nobody else is touching the index except the 
optimize method itself.
How much free disk space should be there (with respect to the index 
size) in order for the optimize to complete successfully?

Stanislav

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 10:08:54 2006
Return-Path: <java-user-return-24823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34836 invoked from network); 4 Dec 2006 10:08:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 10:08:53 -0000
Received: (qmail 3273 invoked by uid 500); 4 Dec 2006 10:08:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3236 invoked by uid 500); 4 Dec 2006 10:08:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3224 invoked by uid 99); 4 Dec 2006 10:08:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 02:08:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 02:08:43 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GrAkJ-0005FA-8t
	for java-user@lucene.apache.org; Mon, 04 Dec 2006 02:08:23 -0800
Message-ID: <7673372.post@talk.nabble.com>
Date: Mon, 4 Dec 2006 02:08:23 -0800 (PST)
From: Aaron Shaw <aaronshaw@onetel.com>
To: java-user@lucene.apache.org
Subject: Problem: "The selected method Keyword was not found"
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: aaronshaw@onetel.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I'm attempting to use Lucene under Coldfusion MX, however when I try to
create and index I am coming up against the following error message when I
try to add a document:

The selected method Keyword was not found.

I'm using the following lines of code to try to create the index:

<cfscript>
analyzer = CreateObject("java","org.apache.lucene.analysis.StopAnalyzer"); 
analyzer.init();
writer = CreateObject("java","org.apache.lucene.index.IndexWriter");
writer.init("c:\cfusionmx\wwwroot\lucene\docsindex",analyzer, true); 
document = CreateObject("java", "org.apache.lucene.document.Document");
field = CreateObject("java", "org.apache.lucene.document.Field");
system = CreateObject("java", "java.lang.System"); 
content = theContent; 
endtitle=len(theContent);
startTitle = FindNoCase("", content);
if (endTitle GT 0) {
     title = trim(Mid(content, startTitle + 7, endTitle - startTitle - 7));
} 
document.add(field.Keyword("url","http://localhost:8500/cfdocs/dochome.htm"));
</cfscript>

However if I dump the "field" object, I would expect to see the Keyword
method or property displayed, however this is not the case.

If anyone can shed any light on this it would be very much appreciated.

Thanks,

Aaron
-- 
View this message in context: http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-found%22-tf2750289.html#a7673372
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 10:17:06 2006
Return-Path: <java-user-return-24824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36437 invoked from network); 4 Dec 2006 10:17:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 10:17:05 -0000
Received: (qmail 14051 invoked by uid 500); 4 Dec 2006 10:17:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13395 invoked by uid 500); 4 Dec 2006 10:17:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13384 invoked by uid 99); 4 Dec 2006 10:17:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 02:17:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of samir.abdou@unine.ch designates 130.125.1.52 as permitted sender)
Received: from [130.125.1.52] (HELO columba.unine.ch) (130.125.1.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 02:16:53 -0800
Received: from mail01.unine.ch [130.125.5.51]
	by columba.unine.ch
	with XWall v3.38b ;
	Mon, 4 Dec 2006 11:16:28 +0100
Received: from webmail.UNINE.CH ([130.125.1.20]) by mail01.UNINE.CH with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 4 Dec 2006 11:16:28 +0100
Received: from philosophe ([130.125.11.47]) by webmail.UNINE.CH over TLS secured channel with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 4 Dec 2006 11:16:27 +0100
Reply-To: <samir.abdou@unine.ch>
From: "Samir Abdou" <Samir.Abdou@unine.ch>
To: <java-user@lucene.apache.org>
Subject: RE: Problem: "The selected method Keyword was not found"
Date: Mon, 4 Dec 2006 11:16:36 +0100
Organization: =?iso-8859-1?Q?Universit=E9_de_Neuch=E2tel?=
Message-ID: <001d01c7178d$48060490$2f0b7d82@philosophe>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <7673372.post@talk.nabble.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccXjDXe5l4B0EAdSHOYdmM+elmg2gAAJVIA
X-OriginalArrivalTime: 04 Dec 2006 10:16:28.0033 (UTC) FILETIME=[42B4EF10:01C7178D]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

The method Field.Keyword is not longer available in Lucene's last =
version!

Which version are you using?

Regards,
Samir

-----Message d'origine-----
De=A0: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
Envoy=E9=A0: lundi, 4. d=E9cembre 2006 11:08
=C0=A0: java-user@lucene.apache.org
Objet=A0: Problem: "The selected method Keyword was not found"


Hi,

I'm attempting to use Lucene under Coldfusion MX, however when I try to
create and index I am coming up against the following error message when =
I
try to add a document:

The selected method Keyword was not found.

I'm using the following lines of code to try to create the index:

<cfscript>
analyzer =3D =
CreateObject("java","org.apache.lucene.analysis.StopAnalyzer");=20
analyzer.init();
writer =3D CreateObject("java","org.apache.lucene.index.IndexWriter");
writer.init("c:\cfusionmx\wwwroot\lucene\docsindex",analyzer, true);=20
document =3D CreateObject("java", =
"org.apache.lucene.document.Document");
field =3D CreateObject("java", "org.apache.lucene.document.Field");
system =3D CreateObject("java", "java.lang.System");=20
content =3D theContent;=20
endtitle=3Dlen(theContent);
startTitle =3D FindNoCase("", content);
if (endTitle GT 0) {
     title =3D trim(Mid(content, startTitle + 7, endTitle - startTitle - =
7));
}=20
document.add(field.Keyword("url","http://localhost:8500/cfdocs/dochome.ht=
m")
);
</cfscript>

However if I dump the "field" object, I would expect to see the Keyword
method or property displayed, however this is not the case.

If anyone can shed any light on this it would be very much appreciated.

Thanks,

Aaron
--=20
View this message in context:
http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
d%22-tf2750289.html#a7673372
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 10:23:28 2006
Return-Path: <java-user-return-24825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37993 invoked from network); 4 Dec 2006 10:23:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 10:23:28 -0000
Received: (qmail 21313 invoked by uid 500); 4 Dec 2006 10:23:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21277 invoked by uid 500); 4 Dec 2006 10:23:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21258 invoked by uid 99); 4 Dec 2006 10:23:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 02:23:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 02:23:17 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GrAyO-0005fv-JD
	for java-user@lucene.apache.org; Mon, 04 Dec 2006 02:22:56 -0800
Message-ID: <7673534.post@talk.nabble.com>
Date: Mon, 4 Dec 2006 02:22:56 -0800 (PST)
From: Aaron Shaw <aaronshaw@onetel.com>
To: java-user@lucene.apache.org
Subject: RE: Problem: "The selected method Keyword was not found"
In-Reply-To: <001d01c7178d$48060490$2f0b7d82@philosophe>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: aaronshaw@onetel.com
References: <7673372.post@talk.nabble.com> <001d01c7178d$48060490$2f0b7d82@philosophe>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,=20

I've tried it in 2.0 and 1.9

What syntax should I be using to add documents in the new version instead?

Thanks,

Aaron



Samir Abdou wrote:
>=20
> Hi,
>=20
> The method Field.Keyword is not longer available in Lucene's last version=
!
>=20
> Which version are you using?
>=20
> Regards,
> Samir
>=20
> -----Message d'origine-----
> De=C2=A0: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
> Envoy=C3=A9=C2=A0: lundi, 4. d=C3=A9cembre 2006 11:08
> =C3=80=C2=A0: java-user@lucene.apache.org
> Objet=C2=A0: Problem: "The selected method Keyword was not found"
>=20
>=20
> Hi,
>=20
> I'm attempting to use Lucene under Coldfusion MX, however when I try to
> create and index I am coming up against the following error message when =
I
> try to add a document:
>=20
> The selected method Keyword was not found.
>=20
> I'm using the following lines of code to try to create the index:
>=20
> <cfscript>
> analyzer =3D CreateObject("java","org.apache.lucene.analysis.StopAnalyzer=
");=20
> analyzer.init();
> writer =3D CreateObject("java","org.apache.lucene.index.IndexWriter");
> writer.init("c:\cfusionmx\wwwroot\lucene\docsindex",analyzer, true);=20
> document =3D CreateObject("java", "org.apache.lucene.document.Document");
> field =3D CreateObject("java", "org.apache.lucene.document.Field");
> system =3D CreateObject("java", "java.lang.System");=20
> content =3D theContent;=20
> endtitle=3Dlen(theContent);
> startTitle =3D FindNoCase("", content);
> if (endTitle GT 0) {
>      title =3D trim(Mid(content, startTitle + 7, endTitle - startTitle -
> 7));
> }=20
> document.add(field.Keyword("url","http://localhost:8500/cfdocs/dochome.ht=
m")
> );
> </cfscript>
>=20
> However if I dump the "field" object, I would expect to see the Keyword
> method or property displayed, however this is not the case.
>=20
> If anyone can shed any light on this it would be very much appreciated.
>=20
> Thanks,
>=20
> Aaron
> --=20
> View this message in context:
> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
> d%22-tf2750289.html#a7673372
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Problem%3A-%22The-selec=
ted-method-Keyword-was-not-found%22-tf2750289.html#a7673534
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 10:24:06 2006
Return-Path: <java-user-return-24826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38092 invoked from network); 4 Dec 2006 10:24:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 10:24:06 -0000
Received: (qmail 22973 invoked by uid 500); 4 Dec 2006 10:24:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22949 invoked by uid 500); 4 Dec 2006 10:24:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22938 invoked by uid 99); 4 Dec 2006 10:24:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 02:24:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of babuce@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 02:23:58 -0800
Received: by nf-out-0910.google.com with SMTP id n28so3801197nfc
        for <java-user@lucene.apache.org>; Mon, 04 Dec 2006 02:23:37 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qYvMEMNA0u/RUDM6fRCxJW3S7K0ONpRR7jcu348dRrNLNXCFJY3wFcErU3dyyOVicq6ZOFyM7M8SG4ByszKvO9A8m0mqw7O56WXsC7AJ45TPhPAuJer17eGKxuOd+HMUy5eN9wOeUzuRhC4Ue8oJoLwn8mpjJ28ZdF4iX34uWcQ=
Received: by 10.82.139.17 with SMTP id m17mr1433724bud.1165227816338;
        Mon, 04 Dec 2006 02:23:36 -0800 (PST)
Received: by 10.82.135.20 with HTTP; Mon, 4 Dec 2006 02:23:35 -0800 (PST)
Message-ID: <4fe781a50612040223o7cb47e59n49e1ebc3891e474a@mail.gmail.com>
Date: Mon, 4 Dec 2006 14:23:35 +0400
From: "Eshwaramoorthy Babu" <babuce@gmail.com>
To: java-user@lucene.apache.org, "Bhavin Pandya" <bhavinp@rediff.co.in>
Subject: Re: Multiple character wildcard search
In-Reply-To: <4fe781a50612040146n5e001628rbc68e0d40057dc45@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9275_32257109.1165227815796"
References: <4fe781a50612040045q1e868bbfqca7db48c5526ee87@mail.gmail.com>
	 <002601c71787$c2a84560$2a0310ac@bhavin>
	 <4fe781a50612040146n5e001628rbc68e0d40057dc45@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9275_32257109.1165227815796
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

HI,

Do I have to use any specific analyser to use PrefixQuery.
I am using WhitespaceAnalyzer and below is how I am populating the fileds
when dding to writer.

Document contactDocument  = new Document();
  contactDocument.add(new Field("type",contact.getType(),Field.Store.NO,
Field.Index.TOKENIZED));
  writer1.addDocument(contactDocument);

Thanks,
Babu


On 12/4/06, Eshwaramoorthy Babu <babuce@gmail.com> wrote:
>
> Hi Bhavin,
>
> Thanks for your response. I tried the below   Query query = new
> PrefixQuery(new Term("name", "Z*"));
>
> but it still the query returns 0 result.
>
> Also can you please tell me how to search form  JAVA collection?
>
> Thanks,
> Babu
>
>
>  On 12/4/06, Bhavin Pandya <bhavinp@rediff.co.in> wrote:
> >
> > Babu,
> >
> > Use "PrefixQuery" and if you are looking for phrase also then
> > "PhrasePrefixQuery"...
> > check api for usage....
> >
> > - Bhavin pandya
> >
> >
> > ----- Original Message -----
> > From: "Eshwaramoorthy Babu" <babuce@gmail.com>
> > To: < java-user@lucene.apache.org>
> > Sent: Monday, December 04, 2006 2:15 PM
> > Subject: Multiple character wildcard search
> >
> >
> > > Hi,
> > >
> > >
> > >
> > > Can anyone please tell me how to specify multiple character wildcard
> > > searches in "Term"
> > >
> > > Below is my requirement
> > >
> > >
> > >
> > > 1) I want search all names that starts with Z (Z*)
> > >
> > > 2) My programme will receive list of names in JAVA collection (Vector
> > or
> > > ArrayList or Hashtable), I want to search for all the names which are
> > not
> > > there in the collection
> > >
> > >
> > >
> > > I have tried the below code to implement the 1st problem but the
> > search
> > > returns 0 result
> > >
> > >
> > >
> > > Analyzer analyzer = new WhitespaceAnalyzer();
> > >
> > > boolean createFlag = true;
> > >
> > > .......
> > >
> > > .......
> > >
> > > .......
> > >
> > > IndexSearcher searcher = new IndexSearcher(indexDir1);
> > >
> > > Query query = new TermQuery(new Term("name", "Z*"));
> > >
> > >
> > >
> > > When I execute teh above code the search is returning 0 Hits.
> > >
> > > If I give the full name "Zane" the search returns 1 Hits.
> > >
> > >
> > >
> > >
> > >
> > > Thanks in advance,
> > >
> > > Babu
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_9275_32257109.1165227815796--

From java-user-return-24827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 10:30:43 2006
Return-Path: <java-user-return-24827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40271 invoked from network); 4 Dec 2006 10:30:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 10:30:42 -0000
Received: (qmail 40509 invoked by uid 500); 4 Dec 2006 10:30:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39562 invoked by uid 500); 4 Dec 2006 10:30:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39551 invoked by uid 99); 4 Dec 2006 10:30:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 02:30:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of samir.abdou@unine.ch designates 130.125.1.52 as permitted sender)
Received: from [130.125.1.52] (HELO columba.unine.ch) (130.125.1.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 02:30:32 -0800
Received: from mail01.unine.ch [130.125.5.51]
	by columba.unine.ch
	with XWall v3.38b ;
	Mon, 4 Dec 2006 11:30:07 +0100
Received: from webmail.UNINE.CH ([130.125.1.20]) by mail01.UNINE.CH with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 4 Dec 2006 11:30:07 +0100
Received: from philosophe ([130.125.11.47]) by webmail.UNINE.CH over TLS secured channel with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 4 Dec 2006 11:30:06 +0100
Reply-To: <samir.abdou@unine.ch>
From: "Samir Abdou" <Samir.Abdou@unine.ch>
To: <java-user@lucene.apache.org>
Subject: RE: Problem: "The selected method Keyword was not found"
Date: Mon, 4 Dec 2006 11:30:15 +0100
Organization: =?iso-8859-1?Q?Universit=E9_de_Neuch=E2tel?=
Message-ID: <002101c7178f$30212830$2f0b7d82@philosophe>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <7673534.post@talk.nabble.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccXjj7Q78QINvvsRmKLYbbuyiQ2kgAAGKew
X-OriginalArrivalTime: 04 Dec 2006 10:30:07.0017 (UTC) FILETIME=[2ADBF990:01C7178F]
X-Virus-Checked: Checked by ClamAV on apache.org

Field field =3D new =
Field("url","http://localhost:8500/cfdocs/dochome.htm",
Field.Store.YES, Field.Index.UN_TOKENIZED);

You need tot translate this to cf script :-)

For more information, take a look to
http://lucene.apache.org/java/1_9_1/api/index.html=20


Welcome,
Samir


-----Message d'origine-----
De=A0: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
Envoy=E9=A0: lundi, 4. d=E9cembre 2006 11:23
=C0=A0: java-user@lucene.apache.org
Objet=A0: RE: Problem: "The selected method Keyword was not found"


Hi,=20

I've tried it in 2.0 and 1.9

What syntax should I be using to add documents in the new version =
instead?

Thanks,

Aaron



Samir Abdou wrote:
>=20
> Hi,
>=20
> The method Field.Keyword is not longer available in Lucene's last =
version!
>=20
> Which version are you using?
>=20
> Regards,
> Samir
>=20
> -----Message d'origine-----
> De=A0: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
> Envoy=E9=A0: lundi, 4. d=E9cembre 2006 11:08
> =C0=A0: java-user@lucene.apache.org
> Objet=A0: Problem: "The selected method Keyword was not found"
>=20
>=20
> Hi,
>=20
> I'm attempting to use Lucene under Coldfusion MX, however when I try =
to
> create and index I am coming up against the following error message =
when I
> try to add a document:
>=20
> The selected method Keyword was not found.
>=20
> I'm using the following lines of code to try to create the index:
>=20
> <cfscript>
> analyzer =3D =
CreateObject("java","org.apache.lucene.analysis.StopAnalyzer");

> analyzer.init();
> writer =3D CreateObject("java","org.apache.lucene.index.IndexWriter");
> writer.init("c:\cfusionmx\wwwroot\lucene\docsindex",analyzer, true);=20
> document =3D CreateObject("java", =
"org.apache.lucene.document.Document");
> field =3D CreateObject("java", "org.apache.lucene.document.Field");
> system =3D CreateObject("java", "java.lang.System");=20
> content =3D theContent;=20
> endtitle=3Dlen(theContent);
> startTitle =3D FindNoCase("", content);
> if (endTitle GT 0) {
>      title =3D trim(Mid(content, startTitle + 7, endTitle - startTitle =
-
> 7));
> }=20
>
document.add(field.Keyword("url","http://localhost:8500/cfdocs/dochome.ht=
m")
> );
> </cfscript>
>=20
> However if I dump the "field" object, I would expect to see the =
Keyword
> method or property displayed, however this is not the case.
>=20
> If anyone can shed any light on this it would be very much =
appreciated.
>=20
> Thanks,
>=20
> Aaron
> --=20
> View this message in context:
>
http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
> d%22-tf2750289.html#a7673372
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context:
http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
d%22-tf2750289.html#a7673534
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 10:43:44 2006
Return-Path: <java-user-return-24828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44349 invoked from network); 4 Dec 2006 10:43:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 10:43:43 -0000
Received: (qmail 52053 invoked by uid 500); 4 Dec 2006 10:43:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52019 invoked by uid 500); 4 Dec 2006 10:43:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52008 invoked by uid 99); 4 Dec 2006 10:43:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 02:43:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 02:43:34 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GrBI1-0006Dy-Q6
	for java-user@lucene.apache.org; Mon, 04 Dec 2006 02:43:13 -0800
Message-ID: <7673771.post@talk.nabble.com>
Date: Mon, 4 Dec 2006 02:43:13 -0800 (PST)
From: Aaron Shaw <aaronshaw@onetel.com>
To: java-user@lucene.apache.org
Subject: RE: Problem: "The selected method Keyword was not found"
In-Reply-To: <002101c7178f$30212830$2f0b7d82@philosophe>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: aaronshaw@onetel.com
References: <7673372.post@talk.nabble.com> <001d01c7178d$48060490$2f0b7d82@philosophe> <7673534.post@talk.nabble.com> <002101c7178f$30212830$2f0b7d82@philosophe>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

thanks for your help. Still having a problem after looking at that
documentation though, it still seems to have Field.Keyword etc shown in the
API?

I've tried turning that into cf script  however I'm not quite sure whether
I'm doing it correctly

I'm creating a new field object like so:

field =3D CreateObject("java", "org.apache.lucene.document.Field");

I'm assuming the next line needs to be the equivalent of this:

Field field =3D new Field("url","http://localhost:8500/cfdocs/dochome.htm",=
=20

however I'm not sure what this is meant to do so I don't really know how to
translate it...is this creating a new object or calling a method of my
existing field object?

Thanks

Aaron



Samir Abdou wrote:
>=20
> Field field =3D new Field("url","http://localhost:8500/cfdocs/dochome.htm=
",
> Field.Store.YES, Field.Index.UN_TOKENIZED);
>=20
> You need tot translate this to cf script :-)
>=20
> For more information, take a look to
> http://lucene.apache.org/java/1_9_1/api/index.html=20
>=20
>=20
> Welcome,
> Samir
>=20
>=20
> -----Message d'origine-----
> De=C2=A0: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
> Envoy=C3=A9=C2=A0: lundi, 4. d=C3=A9cembre 2006 11:23
> =C3=80=C2=A0: java-user@lucene.apache.org
> Objet=C2=A0: RE: Problem: "The selected method Keyword was not found"
>=20
>=20
> Hi,=20
>=20
> I've tried it in 2.0 and 1.9
>=20
> What syntax should I be using to add documents in the new version instead=
?
>=20
> Thanks,
>=20
> Aaron
>=20
>=20
>=20
> Samir Abdou wrote:
>>=20
>> Hi,
>>=20
>> The method Field.Keyword is not longer available in Lucene's last
>> version!
>>=20
>> Which version are you using?
>>=20
>> Regards,
>> Samir
>>=20
>> -----Message d'origine-----
>> De=C2=A0: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
>> Envoy=C3=A9=C2=A0: lundi, 4. d=C3=A9cembre 2006 11:08
>> =C3=80=C2=A0: java-user@lucene.apache.org
>> Objet=C2=A0: Problem: "The selected method Keyword was not found"
>>=20
>>=20
>> Hi,
>>=20
>> I'm attempting to use Lucene under Coldfusion MX, however when I try to
>> create and index I am coming up against the following error message when
>> I
>> try to add a document:
>>=20
>> The selected method Keyword was not found.
>>=20
>> I'm using the following lines of code to try to create the index:
>>=20
>> <cfscript>
>> analyzer =3D
>> CreateObject("java","org.apache.lucene.analysis.StopAnalyzer");
>=20
>> analyzer.init();
>> writer =3D CreateObject("java","org.apache.lucene.index.IndexWriter");
>> writer.init("c:\cfusionmx\wwwroot\lucene\docsindex",analyzer, true);=20
>> document =3D CreateObject("java", "org.apache.lucene.document.Document")=
;
>> field =3D CreateObject("java", "org.apache.lucene.document.Field");
>> system =3D CreateObject("java", "java.lang.System");=20
>> content =3D theContent;=20
>> endtitle=3Dlen(theContent);
>> startTitle =3D FindNoCase("", content);
>> if (endTitle GT 0) {
>>      title =3D trim(Mid(content, startTitle + 7, endTitle - startTitle -
>> 7));
>> }=20
>>
> document.add(field.Keyword("url","http://localhost:8500/cfdocs/dochome.ht=
m")
>> );
>> </cfscript>
>>=20
>> However if I dump the "field" object, I would expect to see the Keyword
>> method or property displayed, however this is not the case.
>>=20
>> If anyone can shed any light on this it would be very much appreciated.
>>=20
>> Thanks,
>>=20
>> Aaron
>> --=20
>> View this message in context:
>>
> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
>> d%22-tf2750289.html#a7673372
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>=20
> --=20
> View this message in context:
> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
> d%22-tf2750289.html#a7673534
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Problem%3A-%22The-selec=
ted-method-Keyword-was-not-found%22-tf2750289.html#a7673771
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 10:44:01 2006
Return-Path: <java-user-return-24829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44489 invoked from network); 4 Dec 2006 10:44:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 10:44:00 -0000
Received: (qmail 54197 invoked by uid 500); 4 Dec 2006 10:44:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54170 invoked by uid 500); 4 Dec 2006 10:44:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54159 invoked by uid 99); 4 Dec 2006 10:44:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 02:44:02 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 04 Dec 2006 02:43:51 -0800
Received: (qmail 29412 invoked from network); 4 Dec 2006 10:39:47 -0000
Received: from unknown (HELO bhavin) (172.16.3.42)
  by mailserver with SMTP; 4 Dec 2006 10:39:47 -0000
Message-ID: <008301c71793$358ec990$2a0310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
References: <4fe781a50612040045q1e868bbfqca7db48c5526ee87@mail.gmail.com> <002601c71787$c2a84560$2a0310ac@bhavin> <4fe781a50612040146n5e001628rbc68e0d40057dc45@mail.gmail.com>
Subject: Re: Multiple character wildcard search
Date: Mon, 4 Dec 2006 16:28:59 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0080_01C717C1.4D48C490"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0080_01C717C1.4D48C490
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Dont use " * " in term....

Query query =3D new PrefixQuery(new Term("name","z"));

- Bhavin pandya

  ----- Original Message -----=20
  From: Eshwaramoorthy Babu=20
  To: java-user@lucene.apache.org ; Bhavin Pandya=20
  Sent: Monday, December 04, 2006 3:16 PM
  Subject: Re: Multiple character wildcard search


  Hi Bhavin,

  Thanks for your response. I tried the below   Query query =3D new =
PrefixQuery(new Term("name", "Z*"));
  =20
  but it still the query returns 0 result.

  Also can you please tell me how to search form  JAVA collection?

  Thanks,
  Babu

  =20
  On 12/4/06, Bhavin Pandya <bhavinp@rediff.co.in> wrote:=20
    Babu,

    Use "PrefixQuery" and if you are looking for phrase also then
    "PhrasePrefixQuery"...=20
    check api for usage....

    - Bhavin pandya


    ----- Original Message -----
    From: "Eshwaramoorthy Babu" <babuce@gmail.com>
    To: < java-user@lucene.apache.org>
    Sent: Monday, December 04, 2006 2:15 PM
    Subject: Multiple character wildcard search


    > Hi,
    >
    >
    >
    > Can anyone please tell me how to specify multiple character =
wildcard=20
    > searches in "Term"
    >
    > Below is my requirement
    >
    >
    >
    > 1) I want search all names that starts with Z (Z*)
    >
    > 2) My programme will receive list of names in JAVA collection =
(Vector or=20
    > ArrayList or Hashtable), I want to search for all the names which =
are not
    > there in the collection
    >
    >
    >
    > I have tried the below code to implement the 1st problem but the =
search
    > returns 0 result
    >
    >
    >
    > Analyzer analyzer =3D new WhitespaceAnalyzer();
    >
    > boolean createFlag =3D true;
    >
    > .......
    >
    > .......
    >
    > .......
    >=20
    > IndexSearcher searcher =3D new IndexSearcher(indexDir1);
    >
    > Query query =3D new TermQuery(new Term("name", "Z*"));
    >
    >
    >
    > When I execute teh above code the search is returning 0 Hits.=20
    >
    > If I give the full name "Zane" the search returns 1 Hits.
    >
    >
    >
    >
    >
    > Thanks in advance,
    >
    > Babu
    >


    =
---------------------------------------------------------------------=20
    To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
    For additional commands, e-mail: java-user-help@lucene.apache.org=20




------=_NextPart_000_0080_01C717C1.4D48C490--


From java-user-return-24830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 10:58:31 2006
Return-Path: <java-user-return-24830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48620 invoked from network); 4 Dec 2006 10:58:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 10:58:30 -0000
Received: (qmail 70354 invoked by uid 500); 4 Dec 2006 10:58:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70312 invoked by uid 500); 4 Dec 2006 10:58:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70301 invoked by uid 99); 4 Dec 2006 10:58:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 02:58:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of samir.abdou@unine.ch designates 130.125.1.52 as permitted sender)
Received: from [130.125.1.52] (HELO columba.unine.ch) (130.125.1.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 02:58:20 -0800
Received: from mail01.unine.ch [130.125.5.51]
	by columba.unine.ch
	with XWall v3.38b ;
	Mon, 4 Dec 2006 11:57:58 +0100
Received: from webmail.UNINE.CH ([130.125.1.20]) by mail01.UNINE.CH with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 4 Dec 2006 11:57:58 +0100
Received: from philosophe ([130.125.11.47]) by webmail.UNINE.CH over TLS secured channel with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 4 Dec 2006 11:57:58 +0100
Reply-To: <samir.abdou@unine.ch>
From: "Samir Abdou" <Samir.Abdou@unine.ch>
To: <java-user@lucene.apache.org>
Subject: RE: Problem: "The selected method Keyword was not found"
Date: Mon, 4 Dec 2006 11:58:07 +0100
Organization: =?iso-8859-1?Q?Universit=E9_de_Neuch=E2tel?=
Message-ID: <002501c71793$1445ab50$2f0b7d82@philosophe>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <7673771.post@talk.nabble.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccXkRObq0xk8m+iSyy8yRF24TKjaAAAUxYw
X-OriginalArrivalTime: 04 Dec 2006 10:57:58.0470 (UTC) FILETIME=[0F1F7660:01C71793]
X-Virus-Checked: Checked by ClamAV on apache.org

If you're trying to use the 1.9 version it's OK! The 'Keyword' static =
method
is not available in the 2.0 version.=20

Field field =3D new =
Field("url","http://localhost:8500/cfdocs/dochome.htm",=20

>...is this creating a new object or calling a method of my
>existing field object?

This is creating a new object.

Samir


Samir Abdou wrote:
>=20
> Field field =3D new =
Field("url","http://localhost:8500/cfdocs/dochome.htm",
> Field.Store.YES, Field.Index.UN_TOKENIZED);
>=20
> You need tot translate this to cf script :-)
>=20
> For more information, take a look to
> http://lucene.apache.org/java/1_9_1/api/index.html=20
>=20
>=20
> Welcome,
> Samir
>=20
>=20
> -----Message d'origine-----
> De=A0: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
> Envoy=E9=A0: lundi, 4. d=E9cembre 2006 11:23
> =C0=A0: java-user@lucene.apache.org
> Objet=A0: RE: Problem: "The selected method Keyword was not found"
>=20
>=20
> Hi,=20
>=20
> I've tried it in 2.0 and 1.9
>=20
> What syntax should I be using to add documents in the new version =
instead?
>=20
> Thanks,
>=20
> Aaron
>=20
>=20
>=20
> Samir Abdou wrote:
>>=20
>> Hi,
>>=20
>> The method Field.Keyword is not longer available in Lucene's last
>> version!
>>=20
>> Which version are you using?
>>=20
>> Regards,
>> Samir
>>=20
>> -----Message d'origine-----
>> De=A0: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
>> Envoy=E9=A0: lundi, 4. d=E9cembre 2006 11:08
>> =C0=A0: java-user@lucene.apache.org
>> Objet=A0: Problem: "The selected method Keyword was not found"
>>=20
>>=20
>> Hi,
>>=20
>> I'm attempting to use Lucene under Coldfusion MX, however when I try =
to
>> create and index I am coming up against the following error message =
when
>> I
>> try to add a document:
>>=20
>> The selected method Keyword was not found.
>>=20
>> I'm using the following lines of code to try to create the index:
>>=20
>> <cfscript>
>> analyzer =3D
>> CreateObject("java","org.apache.lucene.analysis.StopAnalyzer");
>=20
>> analyzer.init();
>> writer =3D =
CreateObject("java","org.apache.lucene.index.IndexWriter");
>> writer.init("c:\cfusionmx\wwwroot\lucene\docsindex",analyzer, true);=20
>> document =3D CreateObject("java", =
"org.apache.lucene.document.Document");
>> field =3D CreateObject("java", "org.apache.lucene.document.Field");
>> system =3D CreateObject("java", "java.lang.System");=20
>> content =3D theContent;=20
>> endtitle=3Dlen(theContent);
>> startTitle =3D FindNoCase("", content);
>> if (endTitle GT 0) {
>>      title =3D trim(Mid(content, startTitle + 7, endTitle - =
startTitle -
>> 7));
>> }=20
>>
>
document.add(field.Keyword("url","http://localhost:8500/cfdocs/dochome.ht=
m")
>> );
>> </cfscript>
>>=20
>> However if I dump the "field" object, I would expect to see the =
Keyword
>> method or property displayed, however this is not the case.
>>=20
>> If anyone can shed any light on this it would be very much =
appreciated.
>>=20
>> Thanks,
>>=20
>> Aaron
>> --=20
>> View this message in context:
>>
>
http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
>> d%22-tf2750289.html#a7673372
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>=20
> --=20
> View this message in context:
>
http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
> d%22-tf2750289.html#a7673534
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context:
http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
d%22-tf2750289.html#a7673771
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 11:02:58 2006
Return-Path: <java-user-return-24831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49908 invoked from network); 4 Dec 2006 11:02:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 11:02:58 -0000
Received: (qmail 77537 invoked by uid 500); 4 Dec 2006 11:03:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77388 invoked by uid 500); 4 Dec 2006 11:03:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77377 invoked by uid 99); 4 Dec 2006 11:03:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 03:03:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 03:02:47 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GrBad-0006y8-Id
	for java-user@lucene.apache.org; Mon, 04 Dec 2006 03:02:27 -0800
Message-ID: <7674006.post@talk.nabble.com>
Date: Mon, 4 Dec 2006 03:02:27 -0800 (PST)
From: Aaron Shaw <aaronshaw@onetel.com>
To: java-user@lucene.apache.org
Subject: RE: Problem: "The selected method Keyword was not found"
In-Reply-To: <002501c71793$1445ab50$2f0b7d82@philosophe>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: aaronshaw@onetel.com
References: <7673372.post@talk.nabble.com> <001d01c7178d$48060490$2f0b7d82@philosophe> <7673534.post@talk.nabble.com> <002101c7178f$30212830$2f0b7d82@philosophe> <7673771.post@talk.nabble.com> <002501c71793$1445ab50$2f0b7d82@philosophe>
X-Virus-Checked: Checked by ClamAV on apache.org


Is there any quick way of telling whether I'm using 1.9 or 2? I want to mak=
e
sure I successfully removed the old version


Samir Abdou wrote:
>=20
> If you're trying to use the 1.9 version it's OK! The 'Keyword' static
> method
> is not available in the 2.0 version.=20
>=20
> Field field =3D new Field("url","http://localhost:8500/cfdocs/dochome.htm=
",=20
>=20
>>...is this creating a new object or calling a method of my
>>existing field object?
>=20
> This is creating a new object.
>=20
> Samir
>=20
>=20
> Samir Abdou wrote:
>>=20
>> Field field =3D new Field("url","http://localhost:8500/cfdocs/dochome.ht=
m",
>> Field.Store.YES, Field.Index.UN_TOKENIZED);
>>=20
>> You need tot translate this to cf script :-)
>>=20
>> For more information, take a look to
>> http://lucene.apache.org/java/1_9_1/api/index.html=20
>>=20
>>=20
>> Welcome,
>> Samir
>>=20
>>=20
>> -----Message d'origine-----
>> De=C2=A0: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
>> Envoy=C3=A9=C2=A0: lundi, 4. d=C3=A9cembre 2006 11:23
>> =C3=80=C2=A0: java-user@lucene.apache.org
>> Objet=C2=A0: RE: Problem: "The selected method Keyword was not found"
>>=20
>>=20
>> Hi,=20
>>=20
>> I've tried it in 2.0 and 1.9
>>=20
>> What syntax should I be using to add documents in the new version
>> instead?
>>=20
>> Thanks,
>>=20
>> Aaron
>>=20
>>=20
>>=20
>> Samir Abdou wrote:
>>>=20
>>> Hi,
>>>=20
>>> The method Field.Keyword is not longer available in Lucene's last
>>> version!
>>>=20
>>> Which version are you using?
>>>=20
>>> Regards,
>>> Samir
>>>=20
>>> -----Message d'origine-----
>>> De=C2=A0: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
>>> Envoy=C3=A9=C2=A0: lundi, 4. d=C3=A9cembre 2006 11:08
>>> =C3=80=C2=A0: java-user@lucene.apache.org
>>> Objet=C2=A0: Problem: "The selected method Keyword was not found"
>>>=20
>>>=20
>>> Hi,
>>>=20
>>> I'm attempting to use Lucene under Coldfusion MX, however when I try to
>>> create and index I am coming up against the following error message whe=
n
>>> I
>>> try to add a document:
>>>=20
>>> The selected method Keyword was not found.
>>>=20
>>> I'm using the following lines of code to try to create the index:
>>>=20
>>> <cfscript>
>>> analyzer =3D
>>> CreateObject("java","org.apache.lucene.analysis.StopAnalyzer");
>>=20
>>> analyzer.init();
>>> writer =3D CreateObject("java","org.apache.lucene.index.IndexWriter");
>>> writer.init("c:\cfusionmx\wwwroot\lucene\docsindex",analyzer, true);=20
>>> document =3D CreateObject("java", "org.apache.lucene.document.Document"=
);
>>> field =3D CreateObject("java", "org.apache.lucene.document.Field");
>>> system =3D CreateObject("java", "java.lang.System");=20
>>> content =3D theContent;=20
>>> endtitle=3Dlen(theContent);
>>> startTitle =3D FindNoCase("", content);
>>> if (endTitle GT 0) {
>>>      title =3D trim(Mid(content, startTitle + 7, endTitle - startTitle =
-
>>> 7));
>>> }=20
>>>
>>
> document.add(field.Keyword("url","http://localhost:8500/cfdocs/dochome.ht=
m")
>>> );
>>> </cfscript>
>>>=20
>>> However if I dump the "field" object, I would expect to see the Keyword
>>> method or property displayed, however this is not the case.
>>>=20
>>> If anyone can shed any light on this it would be very much appreciated.
>>>=20
>>> Thanks,
>>>=20
>>> Aaron
>>> --=20
>>> View this message in context:
>>>
>>
> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
>>> d%22-tf2750289.html#a7673372
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>=20
>>>=20
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>=20
>>>=20
>>>=20
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>=20
>>>=20
>>>=20
>>=20
>> --=20
>> View this message in context:
>>
> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
>> d%22-tf2750289.html#a7673534
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>=20
> --=20
> View this message in context:
> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
> d%22-tf2750289.html#a7673771
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Problem%3A-%22The-selec=
ted-method-Keyword-was-not-found%22-tf2750289.html#a7674006
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 11:09:50 2006
Return-Path: <java-user-return-24832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51455 invoked from network); 4 Dec 2006 11:09:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 11:09:49 -0000
Received: (qmail 85550 invoked by uid 500); 4 Dec 2006 11:09:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85452 invoked by uid 500); 4 Dec 2006 11:09:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85424 invoked by uid 99); 4 Dec 2006 11:09:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 03:09:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of samir.abdou@unine.ch designates 130.125.1.52 as permitted sender)
Received: from [130.125.1.52] (HELO columba.unine.ch) (130.125.1.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 03:09:36 -0800
Received: from mail01.unine.ch [130.125.5.51]
	by columba.unine.ch
	with XWall v3.38b ;
	Mon, 4 Dec 2006 12:09:14 +0100
Received: from webmail.UNINE.CH ([130.125.1.20]) by mail01.UNINE.CH with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 4 Dec 2006 12:09:13 +0100
Received: from philosophe ([130.125.11.47]) by webmail.UNINE.CH over TLS secured channel with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 4 Dec 2006 12:09:13 +0100
Reply-To: <samir.abdou@unine.ch>
From: "Samir Abdou" <Samir.Abdou@unine.ch>
To: <java-user@lucene.apache.org>
Subject: RE: Problem: "The selected method Keyword was not found"
Date: Mon, 4 Dec 2006 12:09:21 +0100
Organization: =?iso-8859-1?Q?Universit=E9_de_Neuch=E2tel?=
Message-ID: <002601c71794$a69f39c0$2f0b7d82@philosophe>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <7674006.post@talk.nabble.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccXk8NxXFzTVC45TH+WOiiJft5pzgAAMtzw
X-OriginalArrivalTime: 04 Dec 2006 11:09:13.0582 (UTC) FILETIME=[A18560E0:01C71794]
X-Virus-Checked: Checked by ClamAV on apache.org

In your classpath !

-----Message d'origine-----
De=A0: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
Envoy=E9=A0: lundi, 4. d=E9cembre 2006 12:02
=C0=A0: java-user@lucene.apache.org
Objet=A0: RE: Problem: "The selected method Keyword was not found"


Is there any quick way of telling whether I'm using 1.9 or 2? I want to =
make
sure I successfully removed the old version


Samir Abdou wrote:
>=20
> If you're trying to use the 1.9 version it's OK! The 'Keyword' static
> method
> is not available in the 2.0 version.=20
>=20
> Field field =3D new =
Field("url","http://localhost:8500/cfdocs/dochome.htm",=20
>=20
>>...is this creating a new object or calling a method of my
>>existing field object?
>=20
> This is creating a new object.
>=20
> Samir
>=20
>=20
> Samir Abdou wrote:
>>=20
>> Field field =3D new =
Field("url","http://localhost:8500/cfdocs/dochome.htm",
>> Field.Store.YES, Field.Index.UN_TOKENIZED);
>>=20
>> You need tot translate this to cf script :-)
>>=20
>> For more information, take a look to
>> http://lucene.apache.org/java/1_9_1/api/index.html=20
>>=20
>>=20
>> Welcome,
>> Samir
>>=20
>>=20
>> -----Message d'origine-----
>> De=A0: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
>> Envoy=E9=A0: lundi, 4. d=E9cembre 2006 11:23
>> =C0=A0: java-user@lucene.apache.org
>> Objet=A0: RE: Problem: "The selected method Keyword was not found"
>>=20
>>=20
>> Hi,=20
>>=20
>> I've tried it in 2.0 and 1.9
>>=20
>> What syntax should I be using to add documents in the new version
>> instead?
>>=20
>> Thanks,
>>=20
>> Aaron
>>=20
>>=20
>>=20
>> Samir Abdou wrote:
>>>=20
>>> Hi,
>>>=20
>>> The method Field.Keyword is not longer available in Lucene's last
>>> version!
>>>=20
>>> Which version are you using?
>>>=20
>>> Regards,
>>> Samir
>>>=20
>>> -----Message d'origine-----
>>> De=A0: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
>>> Envoy=E9=A0: lundi, 4. d=E9cembre 2006 11:08
>>> =C0=A0: java-user@lucene.apache.org
>>> Objet=A0: Problem: "The selected method Keyword was not found"
>>>=20
>>>=20
>>> Hi,
>>>=20
>>> I'm attempting to use Lucene under Coldfusion MX, however when I try =
to
>>> create and index I am coming up against the following error message =
when
>>> I
>>> try to add a document:
>>>=20
>>> The selected method Keyword was not found.
>>>=20
>>> I'm using the following lines of code to try to create the index:
>>>=20
>>> <cfscript>
>>> analyzer =3D
>>> CreateObject("java","org.apache.lucene.analysis.StopAnalyzer");
>>=20
>>> analyzer.init();
>>> writer =3D =
CreateObject("java","org.apache.lucene.index.IndexWriter");
>>> writer.init("c:\cfusionmx\wwwroot\lucene\docsindex",analyzer, true); =

>>> document =3D CreateObject("java", =
"org.apache.lucene.document.Document");
>>> field =3D CreateObject("java", "org.apache.lucene.document.Field");
>>> system =3D CreateObject("java", "java.lang.System");=20
>>> content =3D theContent;=20
>>> endtitle=3Dlen(theContent);
>>> startTitle =3D FindNoCase("", content);
>>> if (endTitle GT 0) {
>>>      title =3D trim(Mid(content, startTitle + 7, endTitle - =
startTitle -
>>> 7));
>>> }=20
>>>
>>
>
document.add(field.Keyword("url","http://localhost:8500/cfdocs/dochome.ht=
m")
>>> );
>>> </cfscript>
>>>=20
>>> However if I dump the "field" object, I would expect to see the =
Keyword
>>> method or property displayed, however this is not the case.
>>>=20
>>> If anyone can shed any light on this it would be very much =
appreciated.
>>>=20
>>> Thanks,
>>>=20
>>> Aaron
>>> --=20
>>> View this message in context:
>>>
>>
>
http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
>>> d%22-tf2750289.html#a7673372
>>> Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
>>>=20
>>>=20
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>=20
>>>=20
>>>=20
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>=20
>>>=20
>>>=20
>>=20
>> --=20
>> View this message in context:
>>
>
http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
>> d%22-tf2750289.html#a7673534
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>=20
> --=20
> View this message in context:
>
http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
> d%22-tf2750289.html#a7673771
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context:
http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
d%22-tf2750289.html#a7674006
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 11:59:05 2006
Return-Path: <java-user-return-24833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77490 invoked from network); 4 Dec 2006 11:59:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 11:59:03 -0000
Received: (qmail 45705 invoked by uid 500); 4 Dec 2006 11:59:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45667 invoked by uid 500); 4 Dec 2006 11:59:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45656 invoked by uid 99); 4 Dec 2006 11:59:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 03:59:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [80.237.132.74] (HELO wp067.webpack.hosteurope.de) (80.237.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 03:58:51 -0800
Received: by wp067.webpack.hosteurope.de running Exim 4.43 using esmtpa
	from e176155173.adsl.alicedsl.de ([85.176.155.173] helo=[192.168.1.101]); authenticated
	id 1GrCSr-0002qF-4u; Mon, 04 Dec 2006 12:58:29 +0100
Subject: Re: Incremental Index and Comparing different Scores from
	different Index
From: Nils =?ISO-8859-1?Q?H=F6ller?= <nutch@nhoeller.de>
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0612011147270.1847@hal.rescomp.berkeley.edu>
References: <1164969113.7354.12.camel@nils-laptop>
	 <Pine.LNX.4.58.0612011147270.1847@hal.rescomp.berkeley.edu>
Content-Type: text/plain
Date: Mon, 04 Dec 2006 12:58:28 +0100
Message-Id: <1165233508.4845.14.camel@nils-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.8.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Am Freitag, den 01.12.2006, 11:54 -0800 schrieb Chris Hostetter:
....
> the short answer is you can't, not with the DefaultSimilarity, but you
> might be able to write a custom Similarity that makes the scores
> comparable by making the idf function a NOOP (of course, then your scores
> won't be as "good" -- for some definition of good, but that may not matter
> to you)

I thought of making the idf function a NOOP, since this is somehow one
of the Ways Y. Yang wrote about in "A System For New Event Detection".

The final idf estimate can be found by using a training set, which i
can use.

But this is not the best way, as you said, due to the score quality.

The second way is: Doing an incremental idf, by updating the index
everytime a new (day) archive has arrived. Then I use the whole Index
for getting the idf. But for search results I WANT ONLY results of the
current day to arrive.

As I said, this all deals with Continous Queries and Online
classification.

Situation: I ve to find the best document in a period of 60 days.
I m using optimal stopping theory, but this doesnt matter here.
I want to query for  documents for a special day, but have the idf vor
all days.

An Example: 

I ve got an Index of day 1. The idf can be calculated based on it.
My Query System doesn't want to mark a document as relevant.
So now all documents are marked unrelevant and can't be taken as
relevant ones anymore.

Now on the second day ive got a new version of my web archive.
I will "merge" Index of day 1 with the new index/documents to get a
global idf (called incremental idf).
For my classification I'm only allowed to classify documents of day2.

Now how can I query the index (the query is everyday the same) and get
only documents of day 2, but using the score function (with idf and so
number of document = all documents day 1 + 2).

I hope you understand my problem.

Is it possible to search a lucene index and get only documents of a
certain day (or the last added documents) but using a global idf the
global index.

This would be also the solution of my problem.

Thanks Nils

> 
> this FAQ entry, and in particular the thread from teh second link in it
> have a *lot* of more info on this...
> http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-912c1f237bb00259185353182948e5935f0c2f03
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 13:44:26 2006
Return-Path: <java-user-return-24834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17882 invoked from network); 4 Dec 2006 13:44:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 13:44:24 -0000
Received: (qmail 85887 invoked by uid 500); 4 Dec 2006 13:44:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85079 invoked by uid 500); 4 Dec 2006 13:44:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 66637 invoked by uid 99); 4 Dec 2006 10:54:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Date: Mon, 4 Dec 2006 10:54:17 +0000
From: David Sheldon <dave@earth.li>
To: java-user@lucene.apache.org
Subject: Re: Problem: "The selected method Keyword was not found"
Message-ID: <20061204105417.GR28622@ox.compsoc.net>
References: <7673372.post@talk.nabble.com> <001d01c7178d$48060490$2f0b7d82@philosophe> <7673534.post@talk.nabble.com> <002101c7178f$30212830$2f0b7d82@philosophe> <7673771.post@talk.nabble.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <7673771.post@talk.nabble.com>
User-Agent: Mutt/1.5.9i
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Dec 04, 2006 at 02:43:13AM -0800, Aaron Shaw wrote:
> field = CreateObject("java", "org.apache.lucene.document.Field");
> 
> I'm assuming the next line needs to be the equivalent of this:
> 
> Field field = new Field("url","http://localhost:8500/cfdocs/dochome.htm", 
> 
> however I'm not sure what this is meant to do so I don't really know how to
> translate it...is this creating a new object or calling a method of my
> existing field object?

It is creating a new object, but Coldfusion represents this differently. 

As explained in the Adobe help: http://qurl.com/pg7g2

Your "CreateObject" call will load the object, and you actually call the
constructor by calling "init" on your field object.

David

-- 
UNIX was not designed to stop you from doing stupid things, because that
would also stop you from doing clever things.
		-- Doug Gwyn

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 14:02:27 2006
Return-Path: <java-user-return-24835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22974 invoked from network); 4 Dec 2006 14:02:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 14:02:27 -0000
Received: (qmail 13314 invoked by uid 500); 4 Dec 2006 14:02:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12941 invoked by uid 500); 4 Dec 2006 14:02:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12930 invoked by uid 99); 4 Dec 2006 14:02:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 06:02:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 04 Dec 2006 06:02:16 -0800
Received: (qmail invoked by alias); 04 Dec 2006 14:01:54 -0000
Received: from p548C7FC4.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.127.196]
  by mail.gmx.net (mp005) with SMTP; 04 Dec 2006 15:01:54 +0100
X-Authenticated: #3493418
Message-ID: <45742991.90402@gmx.de>
Date: Mon, 04 Dec 2006 14:58:41 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Incremental Index and Comparing different Scores from	different
 Index
References: <1164969113.7354.12.camel@nils-laptop>	 <Pine.LNX.4.58.0612011147270.1847@hal.rescomp.berkeley.edu> <1165233508.4845.14.camel@nils-laptop>
In-Reply-To: <1165233508.4845.14.camel@nils-laptop>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Nils,

how about having one index for all documents with two fields "date" and 
"content"? You can search documents for a specific date and the score 
uses the global idf of all documents.

Sören

Nils Höller schrieb:
> I thought of making the idf function a NOOP, since this is somehow one
> of the Ways Y. Yang wrote about in "A System For New Event Detection".
> 
> The final idf estimate can be found by using a training set, which i
> can use.
> 
> But this is not the best way, as you said, due to the score quality.
> 
> The second way is: Doing an incremental idf, by updating the index
> everytime a new (day) archive has arrived. Then I use the whole Index
> for getting the idf. But for search results I WANT ONLY results of the
> current day to arrive.
> 
> As I said, this all deals with Continous Queries and Online
> classification.
> 
> Situation: I ve to find the best document in a period of 60 days.
> I m using optimal stopping theory, but this doesnt matter here.
> I want to query for  documents for a special day, but have the idf vor
> all days.
> 
> An Example: 
> 
> I ve got an Index of day 1. The idf can be calculated based on it.
> My Query System doesn't want to mark a document as relevant.
> So now all documents are marked unrelevant and can't be taken as
> relevant ones anymore.
> 
> Now on the second day ive got a new version of my web archive.
> I will "merge" Index of day 1 with the new index/documents to get a
> global idf (called incremental idf).
> For my classification I'm only allowed to classify documents of day2.
> 
> Now how can I query the index (the query is everyday the same) and get
> only documents of day 2, but using the score function (with idf and so
> number of document = all documents day 1 + 2).
> 
> I hope you understand my problem.
> 
> Is it possible to search a lucene index and get only documents of a
> certain day (or the last added documents) but using a global idf the
> global index.
> 
> This would be also the solution of my problem.
> 
> Thanks Nils

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 14:39:56 2006
Return-Path: <java-user-return-24836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41951 invoked from network); 4 Dec 2006 14:39:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 14:39:56 -0000
Received: (qmail 84194 invoked by uid 500); 4 Dec 2006 14:39:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84160 invoked by uid 500); 4 Dec 2006 14:39:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84149 invoked by uid 99); 4 Dec 2006 14:39:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 06:39:55 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of isaacrc82@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 06:39:44 -0800
Received: by ug-out-1314.google.com with SMTP id k40so3378883ugc
        for <java-user@lucene.apache.org>; Mon, 04 Dec 2006 06:39:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ovHLYsW/sY2XC59BKtrALbxG07IH6bAwBXuUDDUXrjDwSccQPOh6RS8yNa/7MkM/F0FDTxccPr3Gp5udWtc/j6gXQaywCzxJ0hMYhypqZrM+bZAQSdvTizJJud5QadqKPY+CcOS6+ihKs9ufgRD0llXVChKNewD1/Aq8UOcH3Hk=
Received: by 10.67.19.13 with SMTP id w13mr12132385ugi.1165243162493;
        Mon, 04 Dec 2006 06:39:22 -0800 (PST)
Received: by 10.66.232.5 with HTTP; Mon, 4 Dec 2006 06:39:22 -0800 (PST)
Message-ID: <bf1404350612040639p6dd044d8gb76dce035648df98@mail.gmail.com>
Date: Mon, 4 Dec 2006 09:39:22 -0500
From: "Ariel Isaac Romero Cartaya" <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Full disk space during indexing process with 120 gb of free disk space
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_45956_18594621.1165243162459"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_45956_18594621.1165243162459
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi every body:

   I am getting a problem during the indexing process, I am indexing big
amounts of texts most of them in pdf format I am using pdf box 0.6 version.
The space in hard disk before that the indexing process begin is around 120
Gb but incredibly even when my lucene index doesn't have yet 300 mb my hard
disk has not already free space, more incredible is that when I turn off the
process of indexing then the free disk space arise rapidly to 120 Gb. How
could happen this if I doesn't copy the documents to the disk ??? , I have a
linux machine for the indexing process, I have been thinking that could be
the temporaly files of something , may be pdf box ???
Could you help me please ???
Greetings

------=_Part_45956_18594621.1165243162459--

From java-user-return-24837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 14:45:49 2006
Return-Path: <java-user-return-24837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44076 invoked from network); 4 Dec 2006 14:45:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 14:45:48 -0000
Received: (qmail 818 invoked by uid 500); 4 Dec 2006 14:45:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 778 invoked by uid 500); 4 Dec 2006 14:45:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 765 invoked by uid 99); 4 Dec 2006 14:45:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 06:45:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.128.80.6] (HELO yorktown.networkredux.net) (64.128.80.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 06:45:36 -0800
Received: from pool-71-254-99-218.ptldme.east.verizon.net ([71.254.99.218] helo=[192.168.15.102])
	by yorktown.networkredux.net with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.52)
	id 1GrF4I-0003ey-VG
	for java-user@lucene.apache.org; Mon, 04 Dec 2006 06:45:19 -0800
Message-ID: <4574345B.2020605@benlitchfield.com>
Date: Mon, 04 Dec 2006 09:44:43 -0500
From: Ben Litchfield <ben@benlitchfield.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Full disk space during indexing process with 120 gb of free disk
 space
References: <bf1404350612040639p6dd044d8gb76dce035648df98@mail.gmail.com>
In-Reply-To: <bf1404350612040639p6dd044d8gb76dce035648df98@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - yorktown.networkredux.net
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - benlitchfield.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org

PDFBox version 0.6 is quite old and there have been many improvements, 
you should look at moving to the newest version 0.7.3, although from the 
description of your problem it probably would not resolve it.

If there are a large number of temp files with "pdfbox" in the name then 
you are most likely not calling close() on the PDDocument object.  How 
are you adding the documents to the index.  There is a simple helper 
class called org.pdfbox.searchengine.lucene.LucenePDFDocment that you 
may find useful.

Ben


Ariel Isaac Romero Cartaya wrote:
> Hi every body:
>
>   I am getting a problem during the indexing process, I am indexing big
> amounts of texts most of them in pdf format I am using pdf box 0.6 
> version.
> The space in hard disk before that the indexing process begin is 
> around 120
> Gb but incredibly even when my lucene index doesn't have yet 300 mb my 
> hard
> disk has not already free space, more incredible is that when I turn 
> off the
> process of indexing then the free disk space arise rapidly to 120 Gb. How
> could happen this if I doesn't copy the documents to the disk ??? , I 
> have a
> linux machine for the indexing process, I have been thinking that 
> could be
> the temporaly files of something , may be pdf box ???
> Could you help me please ???
> Greetings
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 15:04:03 2006
Return-Path: <java-user-return-24838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52859 invoked from network); 4 Dec 2006 15:04:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 15:04:02 -0000
Received: (qmail 44447 invoked by uid 500); 4 Dec 2006 15:04:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44243 invoked by uid 500); 4 Dec 2006 15:04:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44232 invoked by uid 99); 4 Dec 2006 15:04:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 07:04:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 07:03:52 -0800
Received: by nf-out-0910.google.com with SMTP id n28so3892670nfc
        for <java-user@lucene.apache.org>; Mon, 04 Dec 2006 07:03:30 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=GvmkxQbcUPRE1pfFN63cVIrJDYTt/wGYVXGho7TQCYWKzO3oLQJ1HpxUsXFGnKtFlQEx/yq5338g0HI+EIXR8uUBuXfsaTvENeYz7+x8sW8T2w8OVQXIP3wCeHHokIKtQtV4mg+1F3ypxTUc7VMYofPXEkXI6SRUGJmpNf7NH58=
Received: by 10.82.135.13 with SMTP id i13mr1491327bud.1165244609510;
        Mon, 04 Dec 2006 07:03:29 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Mon, 4 Dec 2006 07:03:29 -0800 (PST)
Message-ID: <359a92830612040703n79d0c7a2xf3119650122b96a5@mail.gmail.com>
Date: Mon, 4 Dec 2006 10:03:29 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene - general question
In-Reply-To: <4fe781a50612040155k7d82bbe1pd96ef98a153a10da@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4fe781a50612032328q22e97299g96d9b78e57f787aa@mail.gmail.com>
	 <52c3ddca0612032341pe9f454enb5271e1b73a965ba@mail.gmail.com>
	 <4fe781a50612040008t7fcf3623gb0bbcb17f3b0229@mail.gmail.com>
	 <52c3ddca0612040050s4eacfb32re73a8774ffeeb97e@mail.gmail.com>
	 <1ff1ea2f0612040142o2ff5c6eek7d380058397f6b2c@mail.gmail.com>
	 <4fe781a50612040155k7d82bbe1pd96ef98a153a10da@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I also think Lucene is overkill, assuming that you don't need to
persist the XML you're talking about. Why not just use Java Sets? See
http://java.sun.com/docs/books/tutorial/collections/interfaces/set.html
for how to do set intersection, union, difference, etc.

And what's the difference between matching ids from both xml and
duplicate ids from both xml?

Erick

On 12/4/06, Eshwaramoorthy Babu <babuce@gmail.com> wrote:
> Hi Buics,
>
> Thanks for your response..
>
> I will receive 2  xml files, I have to compare these 2 and generate a xml
> report
> with below
>
> 1. Matching id's from both xml
>  2. Duplicate id's from both xml
>
> The requirement is for reconcilation of 2 application data.
> For this I have to get the get all id's from 1st xml and search for the
> matching and duplicate in the 2nd xml.
>
> If I use database again I have to write procedute/JAVA to do the comparison
> and generate the report.
>
> Thanks,
> Babu
>
>
>
>
>
>
> On 12/4/06, rociel.buico@gmail.com <rociel.buico@gmail.com> wrote:
> >
> > Hi Babu,
> >
> > your sample xml schema contains only few fields,
> > why not consider to use db (mysql)
> >
> > todo:
> > read your xml file, then use digester to convert to java object after that
> > insert it your db.
> > when your done with your insert stuff, you can simply query your db
> > anytime
> > you like.
> >
> > cheers,
> > Buics
> >
> >
> >
> > On 12/4/06, Lukas Vlcek <lukas.vlcek@gmail.com> wrote:
> > >
> > > Hi,
> > >
> > > Try to look at Groovy (I haven't used it yet but some people say it is
> > > much
> > > easire to work with XML file in Groovy then in Java). It produces class
> > > files so it can be integrated with your exisitng Java code. 6MB file is
> > > not
> > > that much unless you are working in limited environment (like mobile
> > > device?).
> > >
> > > Also if the only thing you really need is to search for some strings in
> > > two
> > > files and you don't need to integrate this function with other Java code
> > > then you can simply go with *unix command line tools (grep, wc, ...)
> > that
> > > should give you what you need very quickly.
> > >
> > > Lukas
> > >
> > > On 12/4/06, Eshwaramoorthy Babu <babuce@gmail.com> wrote:
> > > >
> > > > Hi Lukas,
> > > >
> > > > Thanks for your response.
> > > > I was planning to search for 1st xml ID's in 2nd XML. so I thought of
> > > > using
> > > > lucene for  search.
> > > > Can you please suggest me some scripting solution. Is perl right
> > > solution?
> > > >
> > > > Thanks,
> > > > Babu
> > > >
> > > >
> > > >
> > > >
> > > > On 12/4/06, Lukas Vlcek <lukas.vlcek@gmail.com> wrote:
> > > > >
> > > > > Hi Babu,
> > > > >
> > > > > Sorry but I don't see any point in using Lucene if you don't need
> > > search
> > > > > functionality. Also for parsing XML files I would consider using
> > some
> > > > > scripting language (as opposed to pure Java based solution). The
> > > reason
> > > > is
> > > > > that scripting languages can be more effectire when simplicity of
> > > result
> > > > > code is important and as of Java 6 they can run right inside JVM -
> > so
> > > > > integration with you java code is very simple.
> > > > >
> > > > > Just my 2 cents.
> > > > >
> > > > > Lukas
> > > > >
> > > > > On 12/4/06, Eshwaramoorthy Babu <babuce@gmail.com> wrote:
> > > > > >
> > > > > > Hi ,
> > > > > >
> > > > > > we have a requirement to compare 2 xml files and generate
> > > > > > result(reconcilation report).
> > > > > > The xml file size is 6MB each and the flrmat is as below
> > > > > > <Data>
> > > > > > <Id>123</Id>
> > > > > > <Amount>123</Amount>
> > > > > > </Data>
> > > > > >
> > > > > >
> > > > > > I have to implement the below logic
> > > > > >
> > > > > > Number of matching ID'S in both xml
> > > > > > Number of non matching ID'S in both xml
> > > > > > Number of non matching ID'S in both xml
> > > > > >
> > > > > > I am planning to use digester and lucene for my above requirement.
> > > > > >
> > > > > > Is my desicion of using lucene  correct? or is there any bettwr
> > > > approch
> > > > > > for
> > > > > > my above problem.
> > > > > >
> > > > > > Thanks,
> > > > > > Babu
> > > > > >
> > > > > >
> > > > >
> > > > >
> > > >
> > > >
> > >
> > >
> >
> >
> > --
> > "Programs must be written for people to read, and only incidentally for
> > machines to execute."
> >
> > - Abelson & Sussman, SICP, preface to the first edition
> >
> >
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 17:24:29 2006
Return-Path: <java-user-return-24839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8469 invoked from network); 4 Dec 2006 17:24:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 17:24:28 -0000
Received: (qmail 42461 invoked by uid 500); 4 Dec 2006 17:24:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42419 invoked by uid 500); 4 Dec 2006 17:24:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42407 invoked by uid 99); 4 Dec 2006 17:24:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 09:24:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 09:24:18 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GrHXq-0005yk-8B
	for java-user@lucene.apache.org; Mon, 04 Dec 2006 09:23:58 -0800
Message-ID: <7682746.post@talk.nabble.com>
Date: Mon, 4 Dec 2006 09:23:58 -0800 (PST)
From: Aaron Shaw <aaronshaw@onetel.com>
To: java-user@lucene.apache.org
Subject: RE: Problem: "The selected method Keyword was not found"
In-Reply-To: <002601c71794$a69f39c0$2f0b7d82@philosophe>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: aaronshaw@onetel.com
References: <7673372.post@talk.nabble.com> <001d01c7178d$48060490$2f0b7d82@philosophe> <7673534.post@talk.nabble.com> <002101c7178f$30212830$2f0b7d82@philosophe> <7673771.post@talk.nabble.com> <002501c71793$1445ab50$2f0b7d82@philosophe> <7674006.post@talk.nabble.com> <002601c71794$a69f39c0$2f0b7d82@philosophe>
X-Virus-Checked: Checked by ClamAV on apache.org


thank you both for your help, got it working now


One additional thing, how do I get it to use stemming? I'm presuming I have
to use one of the analyzers other than "simpleanalyzer" but I can't seem to
find out which?


Samir Abdou wrote:
>=20
> In your classpath !
>=20
> -----Message d'origine-----
> De=C2=A0: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
> Envoy=C3=A9=C2=A0: lundi, 4. d=C3=A9cembre 2006 12:02
> =C3=80=C2=A0: java-user@lucene.apache.org
> Objet=C2=A0: RE: Problem: "The selected method Keyword was not found"
>=20
>=20
> Is there any quick way of telling whether I'm using 1.9 or 2? I want to
> make
> sure I successfully removed the old version
>=20
>=20
> Samir Abdou wrote:
>>=20
>> If you're trying to use the 1.9 version it's OK! The 'Keyword' static
>> method
>> is not available in the 2.0 version.=20
>>=20
>> Field field =3D new Field("url","http://localhost:8500/cfdocs/dochome.ht=
m",=20
>>=20
>>>...is this creating a new object or calling a method of my
>>>existing field object?
>>=20
>> This is creating a new object.
>>=20
>> Samir
>>=20
>>=20
>> Samir Abdou wrote:
>>>=20
>>> Field field =3D new
>>> Field("url","http://localhost:8500/cfdocs/dochome.htm",
>>> Field.Store.YES, Field.Index.UN_TOKENIZED);
>>>=20
>>> You need tot translate this to cf script :-)
>>>=20
>>> For more information, take a look to
>>> http://lucene.apache.org/java/1_9_1/api/index.html=20
>>>=20
>>>=20
>>> Welcome,
>>> Samir
>>>=20
>>>=20
>>> -----Message d'origine-----
>>> De=C2=A0: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
>>> Envoy=C3=A9=C2=A0: lundi, 4. d=C3=A9cembre 2006 11:23
>>> =C3=80=C2=A0: java-user@lucene.apache.org
>>> Objet=C2=A0: RE: Problem: "The selected method Keyword was not found"
>>>=20
>>>=20
>>> Hi,=20
>>>=20
>>> I've tried it in 2.0 and 1.9
>>>=20
>>> What syntax should I be using to add documents in the new version
>>> instead?
>>>=20
>>> Thanks,
>>>=20
>>> Aaron
>>>=20
>>>=20
>>>=20
>>> Samir Abdou wrote:
>>>>=20
>>>> Hi,
>>>>=20
>>>> The method Field.Keyword is not longer available in Lucene's last
>>>> version!
>>>>=20
>>>> Which version are you using?
>>>>=20
>>>> Regards,
>>>> Samir
>>>>=20
>>>> -----Message d'origine-----
>>>> De=C2=A0: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
>>>> Envoy=C3=A9=C2=A0: lundi, 4. d=C3=A9cembre 2006 11:08
>>>> =C3=80=C2=A0: java-user@lucene.apache.org
>>>> Objet=C2=A0: Problem: "The selected method Keyword was not found"
>>>>=20
>>>>=20
>>>> Hi,
>>>>=20
>>>> I'm attempting to use Lucene under Coldfusion MX, however when I try t=
o
>>>> create and index I am coming up against the following error message
>>>> when
>>>> I
>>>> try to add a document:
>>>>=20
>>>> The selected method Keyword was not found.
>>>>=20
>>>> I'm using the following lines of code to try to create the index:
>>>>=20
>>>> <cfscript>
>>>> analyzer =3D
>>>> CreateObject("java","org.apache.lucene.analysis.StopAnalyzer");
>>>=20
>>>> analyzer.init();
>>>> writer =3D CreateObject("java","org.apache.lucene.index.IndexWriter");
>>>> writer.init("c:\cfusionmx\wwwroot\lucene\docsindex",analyzer, true);=
=20
>>>> document =3D CreateObject("java", "org.apache.lucene.document.Document=
");
>>>> field =3D CreateObject("java", "org.apache.lucene.document.Field");
>>>> system =3D CreateObject("java", "java.lang.System");=20
>>>> content =3D theContent;=20
>>>> endtitle=3Dlen(theContent);
>>>> startTitle =3D FindNoCase("", content);
>>>> if (endTitle GT 0) {
>>>>      title =3D trim(Mid(content, startTitle + 7, endTitle - startTitle=
 -
>>>> 7));
>>>> }=20
>>>>
>>>
>>
> document.add(field.Keyword("url","http://localhost:8500/cfdocs/dochome.ht=
m")
>>>> );
>>>> </cfscript>
>>>>=20
>>>> However if I dump the "field" object, I would expect to see the Keywor=
d
>>>> method or property displayed, however this is not the case.
>>>>=20
>>>> If anyone can shed any light on this it would be very much appreciated=
.
>>>>=20
>>>> Thanks,
>>>>=20
>>>> Aaron
>>>> --=20
>>>> View this message in context:
>>>>
>>>
>>
> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
>>>> d%22-tf2750289.html#a7673372
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>=20
>>>>=20
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>=20
>>>>=20
>>>>=20
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>=20
>>>>=20
>>>>=20
>>>=20
>>> --=20
>>> View this message in context:
>>>
>>
> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
>>> d%22-tf2750289.html#a7673534
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>=20
>>>=20
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>=20
>>>=20
>>>=20
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>=20
>>>=20
>>>=20
>>=20
>> --=20
>> View this message in context:
>>
> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
>> d%22-tf2750289.html#a7673771
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>=20
> --=20
> View this message in context:
> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
> d%22-tf2750289.html#a7674006
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Problem%3A-%22The-selec=
ted-method-Keyword-was-not-found%22-tf2750289.html#a7682746
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 18:50:52 2006
Return-Path: <java-user-return-24840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45513 invoked from network); 4 Dec 2006 18:50:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 18:50:25 -0000
Received: (qmail 97536 invoked by uid 500); 4 Dec 2006 18:50:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97502 invoked by uid 500); 4 Dec 2006 18:50:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97491 invoked by uid 99); 4 Dec 2006 18:50:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 10:50:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 10:50:13 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 53BFF4A4ED
	for <java-user@lucene.apache.org>; Mon,  4 Dec 2006 13:49:51 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Mon, 04 Dec 2006 13:49:51 -0500
X-Sasl-enc: 8vyhZEzxdhR32dyM5WrKOFxtKUxDO/JDr5vVQi5pwMYf 1165258191
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 0C5FA1DFE2
	for <java-user@lucene.apache.org>; Mon,  4 Dec 2006 13:49:49 -0500 (EST)
Message-ID: <45746DBD.1060504@mikemccandless.com>
Date: Mon, 04 Dec 2006 13:49:33 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Dreaded optimize (again!)
References: <4fe781a50612040045q1e868bbfqca7db48c5526ee87@mail.gmail.com> <002601c71787$c2a84560$2a0310ac@bhavin> <4573F09E.7070903@sirma.bg>
In-Reply-To: <4573F09E.7070903@sirma.bg>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Stanislav Jordanov wrote:

> How much free disk space should be there (with respect to the index 
> size) in order for the optimize to complete successfully?

Good question!

Really this detail should be included in the Javadoc for optimize (and
more generally addDocument, addIndexes(*), etc.).  I will update the
Javadocs of these methods once we work out the answer here.

Optimize actually does a series of IndexWriter.mergeSegments (private
method) calls.  Each call merges the last mergeFactor (default 10)
segments into a single segment, and repeats this until there's 1
segment.  So this question reduces to peak temp disk usage of
mergeSegments.

That call builds up the new segment by reading all data from each of
the input segments and writing into a new single segment.  Only once
the new segment is fully written to disk, does it then "commit",
meaning it writes a new "segments" or "segments_N" (trunk) file and
then removes the input segments.  So max temp disk usage of this step
is:

     (net size of un-merged segments) +
        (net size of original segments to be merged) +
        (net size of new segment files)

Then if CFS is enabled it makes a CFS file for this new segment.  Max
temp usage of this step is:

     (net size of un-merged segments) +
       2 * (net size of new segment files)

The relative segments sizes are not simple to compute, but I think if
you have no deletes and no separate norms, then the new segment will
generally be a bit smaller than the sum of the input segments (but
this is likely document dependent).

So, with optimize() it's the final call to mergeSegments that will
peak the temp disk usage, because that is the largest merge.  So, I
think the overall answer is: you will need a little more (say 10%)
than 2X your final index size of free space to run optimize.

And expressed instead in terms of size of the index before starting
optimize the answer is: you need 2X the size of the input index in
free disk space, to run optimize.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 19:35:42 2006
Return-Path: <java-user-return-24841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69947 invoked from network); 4 Dec 2006 19:35:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 19:35:42 -0000
Received: (qmail 14667 invoked by uid 500); 4 Dec 2006 19:35:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14633 invoked by uid 500); 4 Dec 2006 19:35:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14601 invoked by uid 99); 4 Dec 2006 19:35:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 11:35:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 11:35:31 -0800
Received: by nf-out-0910.google.com with SMTP id n28so3977525nfc
        for <java-user@lucene.apache.org>; Mon, 04 Dec 2006 11:35:09 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=md+bv/ujn6aeEMoE5oFXv+zRROfKQK2RS2OkcHvCDkQRSvAhaXdvvAu8yneoEjiH0KQJwweB9p+lWU8vPGYPeoDqEQlzpAhns0rHk5WdLOWEL2pN7ifXjb02p66qnTskNMlFlKev7tc49oqDVtLZ2PP26wizCJXgOG57qPx/Isk=
Received: by 10.82.118.2 with SMTP id q2mr1556734buc.1165260909204;
        Mon, 04 Dec 2006 11:35:09 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Mon, 4 Dec 2006 11:35:09 -0800 (PST)
Message-ID: <359a92830612041135t2435b0did9f510cdb0d833fc@mail.gmail.com>
Date: Mon, 4 Dec 2006 14:35:09 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem: "The selected method Keyword was not found"
In-Reply-To: <7682746.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_58181_3351823.1165260909093"
References: <7673372.post@talk.nabble.com>
	 <001d01c7178d$48060490$2f0b7d82@philosophe>
	 <7673534.post@talk.nabble.com>
	 <002101c7178f$30212830$2f0b7d82@philosophe>
	 <7673771.post@talk.nabble.com>
	 <002501c71793$1445ab50$2f0b7d82@philosophe>
	 <7674006.post@talk.nabble.com>
	 <002601c71794$a69f39c0$2f0b7d82@philosophe>
	 <7682746.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_58181_3351823.1165260909093
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

It's a secret, do you have the secret code <G>???

Try SnowballAnalyzer....

Erick

On 12/4/06, Aaron Shaw <aaronshaw@onetel.com> wrote:
>
>
> thank you both for your help, got it working now
>
>
> One additional thing, how do I get it to use stemming? I'm presuming I
> have
> to use one of the analyzers other than "simpleanalyzer" but I can't seem
> to
> find out which?
>
>
> Samir Abdou wrote:
> >
> > In your classpath !
> >
> > -----Message d'origine-----
> > De: Aaron Shaw [mailto:aaronshaw@onetel.com]
> > Envoy=E9: lundi, 4. d=E9cembre 2006 12:02
> > =C0: java-user@lucene.apache.org
> > Objet: RE: Problem: "The selected method Keyword was not found"
> >
> >
> > Is there any quick way of telling whether I'm using 1.9 or 2? I want to
> > make
> > sure I successfully removed the old version
> >
> >
> > Samir Abdou wrote:
> >>
> >> If you're trying to use the 1.9 version it's OK! The 'Keyword' static
> >> method
> >> is not available in the 2.0 version.
> >>
> >> Field field =3D new Field("url","http://localhost:8500/cfdocs/dochome.=
htm
> ",
> >>
> >>>...is this creating a new object or calling a method of my
> >>>existing field object?
> >>
> >> This is creating a new object.
> >>
> >> Samir
> >>
> >>
> >> Samir Abdou wrote:
> >>>
> >>> Field field =3D new
> >>> Field("url","http://localhost:8500/cfdocs/dochome.htm",
> >>> Field.Store.YES, Field.Index.UN_TOKENIZED);
> >>>
> >>> You need tot translate this to cf script :-)
> >>>
> >>> For more information, take a look to
> >>> http://lucene.apache.org/java/1_9_1/api/index.html
> >>>
> >>>
> >>> Welcome,
> >>> Samir
> >>>
> >>>
> >>> -----Message d'origine-----
> >>> De: Aaron Shaw [mailto:aaronshaw@onetel.com]
> >>> Envoy=E9: lundi, 4. d=E9cembre 2006 11:23
> >>> =C0: java-user@lucene.apache.org
> >>> Objet: RE: Problem: "The selected method Keyword was not found"
> >>>
> >>>
> >>> Hi,
> >>>
> >>> I've tried it in 2.0 and 1.9
> >>>
> >>> What syntax should I be using to add documents in the new version
> >>> instead?
> >>>
> >>> Thanks,
> >>>
> >>> Aaron
> >>>
> >>>
> >>>
> >>> Samir Abdou wrote:
> >>>>
> >>>> Hi,
> >>>>
> >>>> The method Field.Keyword is not longer available in Lucene's last
> >>>> version!
> >>>>
> >>>> Which version are you using?
> >>>>
> >>>> Regards,
> >>>> Samir
> >>>>
> >>>> -----Message d'origine-----
> >>>> De: Aaron Shaw [mailto:aaronshaw@onetel.com]
> >>>> Envoy=E9: lundi, 4. d=E9cembre 2006 11:08
> >>>> =C0: java-user@lucene.apache.org
> >>>> Objet: Problem: "The selected method Keyword was not found"
> >>>>
> >>>>
> >>>> Hi,
> >>>>
> >>>> I'm attempting to use Lucene under Coldfusion MX, however when I try
> to
> >>>> create and index I am coming up against the following error message
> >>>> when
> >>>> I
> >>>> try to add a document:
> >>>>
> >>>> The selected method Keyword was not found.
> >>>>
> >>>> I'm using the following lines of code to try to create the index:
> >>>>
> >>>> <cfscript>
> >>>> analyzer =3D
> >>>> CreateObject("java","org.apache.lucene.analysis.StopAnalyzer");
> >>>
> >>>> analyzer.init();
> >>>> writer =3D CreateObject("java","org.apache.lucene.index.IndexWriter"=
);
> >>>> writer.init("c:\cfusionmx\wwwroot\lucene\docsindex",analyzer, true);
> >>>> document =3D CreateObject("java", "org.apache.lucene.document.Docume=
nt
> ");
> >>>> field =3D CreateObject("java", "org.apache.lucene.document.Field");
> >>>> system =3D CreateObject("java", "java.lang.System");
> >>>> content =3D theContent;
> >>>> endtitle=3Dlen(theContent);
> >>>> startTitle =3D FindNoCase("", content);
> >>>> if (endTitle GT 0) {
> >>>>      title =3D trim(Mid(content, startTitle + 7, endTitle - startTit=
le
> -
> >>>> 7));
> >>>> }
> >>>>
> >>>
> >>
> > document.add(field.Keyword("url","
> http://localhost:8500/cfdocs/dochome.htm")
> >>>> );
> >>>> </cfscript>
> >>>>
> >>>> However if I dump the "field" object, I would expect to see the
> Keyword
> >>>> method or property displayed, however this is not the case.
> >>>>
> >>>> If anyone can shed any light on this it would be very much
> appreciated.
> >>>>
> >>>> Thanks,
> >>>>
> >>>> Aaron
> >>>> --
> >>>> View this message in context:
> >>>>
> >>>
> >>
> >
> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
> >>>> d%22-tf2750289.html#a7673372
> >>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com=
.
> >>>>
> >>>>
> >>>> --------------------------------------------------------------------=
-
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>> --------------------------------------------------------------------=
-
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>
> >>> --
> >>> View this message in context:
> >>>
> >>
> >
> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
> >>> d%22-tf2750289.html#a7673534
> >>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>
> >> --
> >> View this message in context:
> >>
> >
> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
> >> d%22-tf2750289.html#a7673771
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> > --
> > View this message in context:
> >
> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
> > d%22-tf2750289.html#a7674006
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
ound%22-tf2750289.html#a7682746
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_58181_3351823.1165260909093--

From java-user-return-24842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 04 19:40:40 2006
Return-Path: <java-user-return-24842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72741 invoked from network); 4 Dec 2006 19:40:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2006 19:40:39 -0000
Received: (qmail 25268 invoked by uid 500); 4 Dec 2006 19:40:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25239 invoked by uid 500); 4 Dec 2006 19:40:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25228 invoked by uid 99); 4 Dec 2006 19:40:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 11:40:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [199.228.142.73] (HELO plmler3.mail.eds.com) (199.228.142.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 11:40:26 -0800
Received: from plmlir1.mail.eds.com (plmlir1-2.mail.eds.com [199.228.142.131])
	by plmler3.mail.eds.com (8.13.8/8.12.10) with ESMTP id kB4Je4PE023412
	for <java-user@lucene.apache.org>; Mon, 4 Dec 2006 13:40:05 -0600
Received: from plmlir1.mail.eds.com (localhost [127.0.0.1])
	by plmlir1.mail.eds.com (8.13.8/8.12.10) with ESMTP id kB4JdWgW021917
	for <java-user@lucene.apache.org>; Mon, 4 Dec 2006 13:39:32 -0600
Received: from usplm016.amer.corp.eds.com ([148.94.166.9])
	by plmlir1.mail.eds.com (8.13.8/8.12.10) with ESMTP id kB4JdWR5021912
	for <java-user@lucene.apache.org>; Mon, 4 Dec 2006 13:39:32 -0600
Received: from usahm208.amer.corp.eds.com ([130.175.198.40]) by usplm016.amer.corp.eds.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 4 Dec 2006 13:39:31 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Problem: "The selected method Keyword was not found"
Date: Mon, 4 Dec 2006 14:39:30 -0500
Message-ID: <25736CAEA4C6E24DB98D768458C898E03F5B62@usahm208.amer.corp.eds.com>
In-reply-to: <359a92830612041135t2435b0did9f510cdb0d833fc@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem: "The selected method Keyword was not found"
Thread-Index: AccX24stA6RPJ4tlTq6zUyR8H+V4QgAADpNw
From: "Risov, Maria" <maria.risov@eds.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 04 Dec 2006 19:39:31.0832 (UTC) FILETIME=[EB6B8F80:01C717DB]
X-Virus-Checked: Checked by ClamAV on apache.org

It's in Contributions rather than being in the core Lucene folder.=20

Marie Risov=20



-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Monday, December 04, 2006 2:35 PM
To: java-user@lucene.apache.org
Subject: Re: Problem: "The selected method Keyword was not found"

It's a secret, do you have the secret code <G>???

Try SnowballAnalyzer....

Erick

On 12/4/06, Aaron Shaw <aaronshaw@onetel.com> wrote:
>
>
> thank you both for your help, got it working now
>
>
> One additional thing, how do I get it to use stemming? I'm presuming I =

> have to use one of the analyzers other than "simpleanalyzer" but I=20
> can't seem to find out which?
>
>
> Samir Abdou wrote:
> >
> > In your classpath !
> >
> > -----Message d'origine-----
> > De: Aaron Shaw [mailto:aaronshaw@onetel.com]
> > Envoy=E9: lundi, 4. d=E9cembre 2006 12:02
> > =C0: java-user@lucene.apache.org
> > Objet: RE: Problem: "The selected method Keyword was not found"
> >
> >
> > Is there any quick way of telling whether I'm using 1.9 or 2? I want =
to
> > make
> > sure I successfully removed the old version
> >
> >
> > Samir Abdou wrote:
> >>
> >> If you're trying to use the 1.9 version it's OK! The 'Keyword' =
static
> >> method
> >> is not available in the 2.0 version.
> >>
> >> Field field =3D new =
Field("url","http://localhost:8500/cfdocs/dochome.htm
> ",
> >>
> >>>...is this creating a new object or calling a method of my
> >>>existing field object?
> >>
> >> This is creating a new object.
> >>
> >> Samir
> >>
> >>
> >> Samir Abdou wrote:
> >>>
> >>> Field field =3D new
> >>> Field("url","http://localhost:8500/cfdocs/dochome.htm",
> >>> Field.Store.YES, Field.Index.UN_TOKENIZED);
> >>>
> >>> You need tot translate this to cf script :-)
> >>>
> >>> For more information, take a look to
> >>> http://lucene.apache.org/java/1_9_1/api/index.html
> >>>
> >>>
> >>> Welcome,
> >>> Samir
> >>>
> >>>
> >>> -----Message d'origine-----
> >>> De: Aaron Shaw [mailto:aaronshaw@onetel.com]
> >>> Envoy=E9: lundi, 4. d=E9cembre 2006 11:23
> >>> =C0: java-user@lucene.apache.org
> >>> Objet: RE: Problem: "The selected method Keyword was not found"
> >>>
> >>>
> >>> Hi,
> >>>
> >>> I've tried it in 2.0 and 1.9
> >>>
> >>> What syntax should I be using to add documents in the new version
> >>> instead?
> >>>
> >>> Thanks,
> >>>
> >>> Aaron
> >>>
> >>>
> >>>
> >>> Samir Abdou wrote:
> >>>>
> >>>> Hi,
> >>>>
> >>>> The method Field.Keyword is not longer available in Lucene's last
> >>>> version!
> >>>>
> >>>> Which version are you using?
> >>>>
> >>>> Regards,
> >>>> Samir
> >>>>
> >>>> -----Message d'origine-----
> >>>> De: Aaron Shaw [mailto:aaronshaw@onetel.com]
> >>>> Envoy=E9: lundi, 4. d=E9cembre 2006 11:08
> >>>> =C0: java-user@lucene.apache.org
> >>>> Objet: Problem: "The selected method Keyword was not found"
> >>>>
> >>>>
> >>>> Hi,
> >>>>
> >>>> I'm attempting to use Lucene under Coldfusion MX, however when I =
try
> to
> >>>> create and index I am coming up against the following error =
message
> >>>> when
> >>>> I
> >>>> try to add a document:
> >>>>
> >>>> The selected method Keyword was not found.
> >>>>
> >>>> I'm using the following lines of code to try to create the index:
> >>>>
> >>>> <cfscript>
> >>>> analyzer =3D
> >>>> CreateObject("java","org.apache.lucene.analysis.StopAnalyzer");
> >>>
> >>>> analyzer.init();
> >>>> writer =3D =
CreateObject("java","org.apache.lucene.index.IndexWriter");
> >>>> writer.init("c:\cfusionmx\wwwroot\lucene\docsindex",analyzer, =
true);
> >>>> document =3D CreateObject("java", =
"org.apache.lucene.document.Document
> ");
> >>>> field =3D CreateObject("java", =
"org.apache.lucene.document.Field");
> >>>> system =3D CreateObject("java", "java.lang.System");
> >>>> content =3D theContent;
> >>>> endtitle=3Dlen(theContent);
> >>>> startTitle =3D FindNoCase("", content);
> >>>> if (endTitle GT 0) {
> >>>>      title =3D trim(Mid(content, startTitle + 7, endTitle - =
startTitle
> -
> >>>> 7));
> >>>> }
> >>>>
> >>>
> >>
> > document.add(field.Keyword("url","
> http://localhost:8500/cfdocs/dochome.htm")
> >>>> );
> >>>> </cfscript>
> >>>>
> >>>> However if I dump the "field" object, I would expect to see the
> Keyword
> >>>> method or property displayed, however this is not the case.
> >>>>
> >>>> If anyone can shed any light on this it would be very much
> appreciated.
> >>>>
> >>>> Thanks,
> >>>>
> >>>> Aaron
> >>>> --
> >>>> View this message in context:
> >>>>
> >>>
> >>
> >
> =
http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
> >>>> d%22-tf2750289.html#a7673372
> >>>> Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
> >>>>
> >>>>
> >>>> =
---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>> =
---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>
> >>> --
> >>> View this message in context:
> >>>
> >>
> >
> =
http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
> >>> d%22-tf2750289.html#a7673534
> >>> Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
> >>>
> >>>
> >>> =
---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>> =
---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>
> >> --
> >> View this message in context:
> >>
> >
> =
http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
> >> d%22-tf2750289.html#a7673771
> >> Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
> >>
> >>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> > --
> > View this message in context:
> >
> =
http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
oun
> > d%22-tf2750289.html#a7674006
> > Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> =
http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
ound%22-tf2750289.html#a7682746
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 02:50:33 2006
Return-Path: <java-user-return-24843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18022 invoked from network); 5 Dec 2006 02:50:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 02:50:32 -0000
Received: (qmail 92337 invoked by uid 500); 5 Dec 2006 02:50:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91766 invoked by uid 500); 5 Dec 2006 02:50:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91755 invoked by uid 99); 5 Dec 2006 02:50:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 18:50:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.183] (HELO exprod6og51.obsmtp.com) (64.18.1.183)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 04 Dec 2006 18:50:21 -0800
Received: from source ([139.56.4.14]) by exprod6ob51.postini.com ([64.18.5.12]) with SMTP;
	Mon, 04 Dec 2006 18:49:55 PST
Received: from triangulum1.broadvision.com (triangulum1.broadvision.com [10.10.102.100])
	by nebula3.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id kB52evL15735
	for <java-user@lucene.apache.org>; Mon, 4 Dec 2006 18:40:57 -0800 (PST)
Received: from rw-gw-02.BroadVision.com (localhost [127.0.0.1])
	by triangulum1.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id SAA04566
	for <java-user@lucene.apache.org>; Mon, 4 Dec 2006 18:51:02 -0800 (PST)
Received: by rw-gw-02.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <MR1W7G4N>; Mon, 4 Dec 2006 18:49:51 -0800
Message-ID: <4F78AB8AF361164AB110D9841D3089810D8CBC@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: java-user@lucene.apache.org
Subject: Lucene search performance: linear?
Date: Mon, 4 Dec 2006 18:49:44 -0800 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I indexed first 220,000, all with a special keyword, I did a simple
query and only fetched 5 docs, with Hits.length()=220,000.

Then I indexed 440,000 docs, with the same keyword, query it
again and fetched a few docs, with Hits.length(0=440,000.

I found that search time is about linear: 2nd time is about 2 times
longer than 1st query. I would like to understand:

Does the linear relation come from score calculation, since we
have to calculate score one by one? Or other reason?

If we have B-tree index I would naively expect a better scalibility?

Thanks very much for your helps, 

Lisheng

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 05:59:17 2006
Return-Path: <java-user-return-24844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54148 invoked from network); 5 Dec 2006 05:59:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 05:59:16 -0000
Received: (qmail 40235 invoked by uid 500); 5 Dec 2006 05:59:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40189 invoked by uid 500); 5 Dec 2006 05:59:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40178 invoked by uid 99); 5 Dec 2006 05:59:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 21:59:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 21:59:07 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GrTKI-0007Yy-MQ
	for java-user@lucene.apache.org; Mon, 04 Dec 2006 21:58:46 -0800
Message-ID: <7693786.post@talk.nabble.com>
Date: Mon, 4 Dec 2006 21:58:46 -0800 (PST)
From: Saroj K M <saroja.kanta.maharana@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene on SQL 2005
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: saroja.kanta.maharana@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Dear  ..,
 
I am a new user to Lucene. I am having a requirement as follows.
 
I am using SQL Server 2005 database, 
 
The Database having a Table named
 ---  Product and its columns are
 
1 Prod_id
2  Prod_name
3  Prod_desc
4. Prod_Price
 
I need to index the table and search. 
 
I should be Passed from an Jsp Page/Comment Prompt.
 
If the input is like this, Providing a valid Prod_id or valid prod_desc
then, I need entire row of related Prod_id from the indexed file.
 
Please guide me in Indexing the table and to search. I am not getting any
idea. please help me in this regards with your suitable comments. 
 
Thanks
Saroj.
 
-- 
View this message in context: http://www.nabble.com/Lucene-on-SQL-2005-tf2759494.html#a7693786
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 05:59:53 2006
Return-Path: <java-user-return-24845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54274 invoked from network); 5 Dec 2006 05:59:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 05:59:52 -0000
Received: (qmail 44267 invoked by uid 500); 5 Dec 2006 05:59:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44230 invoked by uid 500); 5 Dec 2006 05:59:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44219 invoked by uid 99); 5 Dec 2006 05:59:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 21:59:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 21:59:41 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GrTKr-0007hY-AD
	for java-user@lucene.apache.org; Mon, 04 Dec 2006 21:59:21 -0800
Message-ID: <7693791.post@talk.nabble.com>
Date: Mon, 4 Dec 2006 21:59:21 -0800 (PST)
From: Saroj K M <saroja.kanta.maharana@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene on SQL 2005
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: saroja.kanta.maharana@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Dear  All,
 
I am a new user to Lucene. I am having a requirement as follows.
 
I am using SQL Server 2005 database, 
 
The Database having a Table named
 ---  Product and its columns are
 
1 Prod_id
2  Prod_name
3  Prod_desc
4. Prod_Price
 
I need to index the table and search. 
 
I should be Passed from an Jsp Page/Comment Prompt.
 
If the input is like this, Providing a valid Prod_id or valid prod_desc
then, I need entire row of related Prod_id from the indexed file.
 
Please guide me in Indexing the table and to search. I am not getting any
idea. please help me in this regards with your suitable comments. 
 
Thanks
Saroj.
 
-- 
View this message in context: http://www.nabble.com/Lucene-on-SQL-2005-tf2759495.html#a7693791
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 06:08:23 2006
Return-Path: <java-user-return-24846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55126 invoked from network); 5 Dec 2006 06:08:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 06:08:21 -0000
Received: (qmail 49799 invoked by uid 500); 5 Dec 2006 06:08:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49764 invoked by uid 500); 5 Dec 2006 06:08:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49749 invoked by uid 99); 5 Dec 2006 06:08:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 22:08:23 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lukas.vlcek@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Dec 2006 22:08:11 -0800
Received: by nf-out-0910.google.com with SMTP id n28so112436nfc
        for <java-user@lucene.apache.org>; Mon, 04 Dec 2006 22:07:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=N6ge1UiUehN77emEYpHDwEPH+LHkojAHD3qXq6zuzr0KnFzV5kn7SQfSY0t/ae03OW5ymCfjUARtPEiWU3OuVaQ+IXIs3T1q4GiQvGqCvPIPKabCvdwdX39V1l7zhowUN0txyW60o6Tu1wLg7gu4xCg6fz0HMhNYRNTJ8CyY3mE=
Received: by 10.82.138.6 with SMTP id l6mr1654163bud.1165298870353;
        Mon, 04 Dec 2006 22:07:50 -0800 (PST)
Received: by 10.82.147.8 with HTTP; Mon, 4 Dec 2006 22:07:50 -0800 (PST)
Message-ID: <52c3ddca0612042207q61d037f8o8380115165b73bf7@mail.gmail.com>
Date: Tue, 5 Dec 2006 07:07:50 +0100
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
Reply-To: java-user@lucene.apache.org
To: java-user@lucene.apache.org
Subject: Re: Lucene on SQL 2005
In-Reply-To: <7693791.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2285_20492899.1165298870284"
References: <7693791.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2285_20492899.1165298870284
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

You should consider using Compass <http://www.opensymphony.com/compass/>.

Lukas

On 12/5/06, Saroj K M <saroja.kanta.maharana@gmail.com> wrote:
>
>
> Dear  All,
>
> I am a new user to Lucene. I am having a requirement as follows.
>
> I am using SQL Server 2005 database,
>
> The Database having a Table named
> ---  Product and its columns are
>
> 1 Prod_id
> 2  Prod_name
> 3  Prod_desc
> 4. Prod_Price
>
> I need to index the table and search.
>
> I should be Passed from an Jsp Page/Comment Prompt.
>
> If the input is like this, Providing a valid Prod_id or valid prod_desc
> then, I need entire row of related Prod_id from the indexed file.
>
> Please guide me in Indexing the table and to search. I am not getting any
> idea. please help me in this regards with your suitable comments.
>
> Thanks
> Saroj.
>
> --
> View this message in context:
> http://www.nabble.com/Lucene-on-SQL-2005-tf2759495.html#a7693791
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2285_20492899.1165298870284--

From java-user-return-24847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 08:21:13 2006
Return-Path: <java-user-return-24847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87943 invoked from network); 5 Dec 2006 08:21:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 08:21:11 -0000
Received: (qmail 11549 invoked by uid 500); 5 Dec 2006 08:21:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11516 invoked by uid 500); 5 Dec 2006 08:21:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11503 invoked by uid 99); 5 Dec 2006 08:21:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 00:21:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from [80.67.18.15] (HELO smtprelay03.ispgateway.de) (80.67.18.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 00:20:57 -0800
Received: (qmail 5734 invoked from network); 5 Dec 2006 08:20:33 -0000
Received: from unknown (HELO p5496ff72.dip.t-dialin.net) ([pbs]695637@[84.150.255.114])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 5 Dec 2006 08:20:33 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Lucene search performance: linear?
Date: Tue, 5 Dec 2006 09:21:30 +0100
User-Agent: KMail/1.8.2
References: <4F78AB8AF361164AB110D9841D3089810D8CBC@rw-msg-02.broadvision.com>
In-Reply-To: <4F78AB8AF361164AB110D9841D3089810D8CBC@rw-msg-02.broadvision.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200612050921.31175@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 05 December 2006 03:49, Zhang, Lisheng wrote:

> I found that search time is about linear: 2nd time is about 2 times
> longer than 1st query.

What exactly did you measure, only the search() or also opening the 
IndexSearcher? The later depends on index size, thus you shouldn't re-open 
it for every search.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 09:05:55 2006
Return-Path: <java-user-return-24848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3885 invoked from network); 5 Dec 2006 09:05:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 09:05:54 -0000
Received: (qmail 75446 invoked by uid 500); 5 Dec 2006 09:05:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74435 invoked by uid 500); 5 Dec 2006 09:05:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74422 invoked by uid 99); 5 Dec 2006 09:05:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 01:05:57 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,INFO_TLD,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [193.213.115.43] (HELO mail43.e.nsc.no) (193.213.115.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 01:05:45 -0800
Received: from dkserver1.dinkommune.no ([193.213.25.89])
	by mail43.nsc.no (8.13.8/8.13.5) with SMTP id kB595Ml5009812
	for <java-user@lucene.apache.org>; Tue, 5 Dec 2006 10:05:23 +0100 (CET)
To: java-user@lucene.apache.org
Subject: IOException: Access is denied from IndexWriter.Optimize
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OFF1D54C0B.66763205-ONC125723B.0031EC69-C125723B.003233CC@dkdigital.no>
From: trond.lindanger@dkdigital.no
Date: Tue, 5 Dec 2006 10:08:17 +0100
X-MIMETrack: Serialize by Router on DK-SVG-1/NO/dkDigital(Release 7.0.1FP1|April 17, 2006) at
 05.12.2006 10:08:05,
	Serialize complete at 05.12.2006 10:08:05
Content-Type: multipart/alternative; boundary="=_alternative 003233CAC125723B_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 003233CAC125723B_=
Content-Type: text/plain; charset="US-ASCII"

Hi, 
In my test case, four Quartz jobs are starting each third minute storing 
records in a database followed by an index update.
After doing a test run over a period of 16 hours, I got this exception 
after 10 hours:

java.io.IOException: Access is denied
        at java.io.RandomAccessFile.writeBytes(Native Method)
        at java.io.RandomAccessFile.write(RandomAccessFile.java:456)
        at 
org.apache.lucene.store.FSIndexOutput.flushBuffer(FSDirectory.java:575)
        at 
org.apache.lucene.store.BufferedIndexOutput.flush(BufferedIndexOutput.java:85)
        at 
org.apache.lucene.store.BufferedIndexOutput.writeBytes(BufferedIndexOutput.java:75)
        at 
org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java:212)
        at 
org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java:169)
        at 
org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java:148)
        at 
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:962)
        at 
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:833)
        at 
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:569)
 
Here is the relevant method:

  public void indexItems(boolean createNewIndex, Collection items)
    throws java.io.IOException {
        if (IndexReader.indexExists(indexDir)) {
                while (IndexReader.isLocked(indexDir)) {
                        try {
                                logger.info(indexDir+" is locked, 
waiting...");
                                Thread.sleep(1000); 
                        } catch (InterruptedException e) {
                                e.printStackTrace();
                        }
                }
        }
        logger.info(indexDir+" lock is open."); 
    logger.info("Start writing index located at "+indexDir);
    IndexWriter writer = new IndexWriter(indexDir, analyzer, 
createNewIndex);
    writer.setWriteLockTimeout(10000);
    writer.setUseCompoundFile(true);
 
    Iterator itI = items.iterator();
    while (itI.hasNext()) {
      ItemIF item = (ItemIF) itI.next();
      logger.info("Add item " + item + " to index.");
      writer.addDocument(ItemDocument.makeDocument(item));
    }
    writer.optimize(); // This is where the exception is thrown
    nrOfIndexedItems = writer.docCount();
    writer.close();
    logger.info("Finished writing index.");
  } 


The following environment is used:
WinXP
JDK 1.5
Tomcat 5.5
Lucene 2.0.0
HSQLdb 1.8.0
Quartz 1.6.0
Hibernate 2.1.8
 
- Tomcat/ JDK has read/write access to c:\windows\temp and directory for 
indexing.

Anybody?

--=_alternative 003233CAC125723B_=--

From java-user-return-24849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 09:11:52 2006
Return-Path: <java-user-return-24849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6578 invoked from network); 5 Dec 2006 09:11:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 09:11:50 -0000
Received: (qmail 87144 invoked by uid 500); 5 Dec 2006 09:11:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87119 invoked by uid 500); 5 Dec 2006 09:11:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87108 invoked by uid 99); 5 Dec 2006 09:11:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 01:11:52 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [193.213.115.49] (HELO mail49.e.nsc.no) (193.213.115.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 01:11:40 -0800
Received: from dkserver1.dinkommune.no ([193.213.25.89])
	by mail49.nsc.no (8.13.8/8.13.5) with SMTP id kB59BHCs006729
	for <java-user@lucene.apache.org>; Tue, 5 Dec 2006 10:11:17 +0100 (CET)
In-Reply-To: <OFF1D54C0B.66763205-ONC125723B.0031EC69-C125723B.003233CC@dkdigital.no>
To: java-user@lucene.apache.org
Subject: Re: IOException: Access is denied from IndexWriter.Optimize
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OF23B994C8.7A2F0DD1-ONC125723B.00327985-C125723B.0032BDFC@dkdigital.no>
From: trond.lindanger@dkdigital.no
Date: Tue, 5 Dec 2006 10:14:10 +0100
X-MIMETrack: Serialize by Router on DK-SVG-1/NO/dkDigital(Release 7.0.1FP1|April 17, 2006) at
 05.12.2006 10:14:00,
	Serialize complete at 05.12.2006 10:14:00
Content-Type: multipart/alternative; boundary="=_alternative 0032BDFBC125723B_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0032BDFBC125723B_=
Content-Type: text/plain; charset="US-ASCII"

Forgot something...
Also I got this exception, which may be related:

java.io.IOException: Cannot delete C:\dknewscenter\2\_5d.cfs
        at 
org.apache.lucene.store.FSDirectory.create(FSDirectory.java:319)
        at 
org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:208)
        at 
org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:131)
        at 
org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:200)
        at 
de.nava.informa.search.ChannelIndexer.indexItems(ChannelIndexer.java:126)
        at 
de.nava.informa.search.ChannelIndexer.indexChannels(ChannelIndexer.java:94)

This exception is given repeatedly, while the last exception is given 
once.

--=_alternative 0032BDFBC125723B_=--

From java-user-return-24850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 09:36:57 2006
Return-Path: <java-user-return-24850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16840 invoked from network); 5 Dec 2006 09:36:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 09:36:56 -0000
Received: (qmail 35725 invoked by uid 500); 5 Dec 2006 09:36:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35507 invoked by uid 500); 5 Dec 2006 09:36:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35496 invoked by uid 99); 5 Dec 2006 09:36:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 01:36:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 01:36:46 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GrWit-0003Er-QH
	for java-user@lucene.apache.org; Tue, 05 Dec 2006 01:36:23 -0800
Message-ID: <7695492.post@talk.nabble.com>
Date: Tue, 5 Dec 2006 01:36:23 -0800 (PST)
From: Aaron Shaw <aaronshaw@onetel.com>
To: java-user@lucene.apache.org
Subject: RE: Problem: "The selected method Keyword was not found"
In-Reply-To: <25736CAEA4C6E24DB98D768458C898E03F5B62@usahm208.amer.corp.eds.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: aaronshaw@onetel.com
References: <7673372.post@talk.nabble.com> <001d01c7178d$48060490$2f0b7d82@philosophe> <7673534.post@talk.nabble.com> <002101c7178f$30212830$2f0b7d82@philosophe> <7673771.post@talk.nabble.com> <002501c71793$1445ab50$2f0b7d82@philosophe> <7674006.post@talk.nabble.com> <002601c71794$a69f39c0$2f0b7d82@philosophe> <7682746.post@talk.nabble.com> <359a92830612041135t2435b0did9f510cdb0d833fc@mail.gmail.com> <25736CAEA4C6E24DB98D768458C898E03F5B62@usahm208.amer.corp.eds.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

thank you both for your help. Where would I find this "Contributions"?

Aaron


Risov, Maria wrote:
>=20
> It's in Contributions rather than being in the core Lucene folder.=20
>=20
> Marie Risov=20
>=20
>=20
>=20
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]=20
> Sent: Monday, December 04, 2006 2:35 PM
> To: java-user@lucene.apache.org
> Subject: Re: Problem: "The selected method Keyword was not found"
>=20
> It's a secret, do you have the secret code <G>???
>=20
> Try SnowballAnalyzer....
>=20
> Erick
>=20
> On 12/4/06, Aaron Shaw <aaronshaw@onetel.com> wrote:
>>
>>
>> thank you both for your help, got it working now
>>
>>
>> One additional thing, how do I get it to use stemming? I'm presuming I=
=20
>> have to use one of the analyzers other than "simpleanalyzer" but I=20
>> can't seem to find out which?
>>
>>
>> Samir Abdou wrote:
>> >
>> > In your classpath !
>> >
>> > -----Message d'origine-----
>> > De: Aaron Shaw [mailto:aaronshaw@onetel.com]
>> > Envoy=C3=A9: lundi, 4. d=C3=A9cembre 2006 12:02
>> > =C3=80: java-user@lucene.apache.org
>> > Objet: RE: Problem: "The selected method Keyword was not found"
>> >
>> >
>> > Is there any quick way of telling whether I'm using 1.9 or 2? I want t=
o
>> > make
>> > sure I successfully removed the old version
>> >
>> >
>> > Samir Abdou wrote:
>> >>
>> >> If you're trying to use the 1.9 version it's OK! The 'Keyword' static
>> >> method
>> >> is not available in the 2.0 version.
>> >>
>> >> Field field =3D new
>> Field("url","http://localhost:8500/cfdocs/dochome.htm
>> ",
>> >>
>> >>>...is this creating a new object or calling a method of my
>> >>>existing field object?
>> >>
>> >> This is creating a new object.
>> >>
>> >> Samir
>> >>
>> >>
>> >> Samir Abdou wrote:
>> >>>
>> >>> Field field =3D new
>> >>> Field("url","http://localhost:8500/cfdocs/dochome.htm",
>> >>> Field.Store.YES, Field.Index.UN_TOKENIZED);
>> >>>
>> >>> You need tot translate this to cf script :-)
>> >>>
>> >>> For more information, take a look to
>> >>> http://lucene.apache.org/java/1_9_1/api/index.html
>> >>>
>> >>>
>> >>> Welcome,
>> >>> Samir
>> >>>
>> >>>
>> >>> -----Message d'origine-----
>> >>> De: Aaron Shaw [mailto:aaronshaw@onetel.com]
>> >>> Envoy=C3=A9: lundi, 4. d=C3=A9cembre 2006 11:23
>> >>> =C3=80: java-user@lucene.apache.org
>> >>> Objet: RE: Problem: "The selected method Keyword was not found"
>> >>>
>> >>>
>> >>> Hi,
>> >>>
>> >>> I've tried it in 2.0 and 1.9
>> >>>
>> >>> What syntax should I be using to add documents in the new version
>> >>> instead?
>> >>>
>> >>> Thanks,
>> >>>
>> >>> Aaron
>> >>>
>> >>>
>> >>>
>> >>> Samir Abdou wrote:
>> >>>>
>> >>>> Hi,
>> >>>>
>> >>>> The method Field.Keyword is not longer available in Lucene's last
>> >>>> version!
>> >>>>
>> >>>> Which version are you using?
>> >>>>
>> >>>> Regards,
>> >>>> Samir
>> >>>>
>> >>>> -----Message d'origine-----
>> >>>> De: Aaron Shaw [mailto:aaronshaw@onetel.com]
>> >>>> Envoy=C3=A9: lundi, 4. d=C3=A9cembre 2006 11:08
>> >>>> =C3=80: java-user@lucene.apache.org
>> >>>> Objet: Problem: "The selected method Keyword was not found"
>> >>>>
>> >>>>
>> >>>> Hi,
>> >>>>
>> >>>> I'm attempting to use Lucene under Coldfusion MX, however when I tr=
y
>> to
>> >>>> create and index I am coming up against the following error message
>> >>>> when
>> >>>> I
>> >>>> try to add a document:
>> >>>>
>> >>>> The selected method Keyword was not found.
>> >>>>
>> >>>> I'm using the following lines of code to try to create the index:
>> >>>>
>> >>>> <cfscript>
>> >>>> analyzer =3D
>> >>>> CreateObject("java","org.apache.lucene.analysis.StopAnalyzer");
>> >>>
>> >>>> analyzer.init();
>> >>>> writer =3D CreateObject("java","org.apache.lucene.index.IndexWriter=
");
>> >>>> writer.init("c:\cfusionmx\wwwroot\lucene\docsindex",analyzer, true)=
;
>> >>>> document =3D CreateObject("java", "org.apache.lucene.document.Docum=
ent
>> ");
>> >>>> field =3D CreateObject("java", "org.apache.lucene.document.Field");
>> >>>> system =3D CreateObject("java", "java.lang.System");
>> >>>> content =3D theContent;
>> >>>> endtitle=3Dlen(theContent);
>> >>>> startTitle =3D FindNoCase("", content);
>> >>>> if (endTitle GT 0) {
>> >>>>      title =3D trim(Mid(content, startTitle + 7, endTitle - startTi=
tle
>> -
>> >>>> 7));
>> >>>> }
>> >>>>
>> >>>
>> >>
>> > document.add(field.Keyword("url","
>> http://localhost:8500/cfdocs/dochome.htm")
>> >>>> );
>> >>>> </cfscript>
>> >>>>
>> >>>> However if I dump the "field" object, I would expect to see the
>> Keyword
>> >>>> method or property displayed, however this is not the case.
>> >>>>
>> >>>> If anyone can shed any light on this it would be very much
>> appreciated.
>> >>>>
>> >>>> Thanks,
>> >>>>
>> >>>> Aaron
>> >>>> --
>> >>>> View this message in context:
>> >>>>
>> >>>
>> >>
>> >
>> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-=
foun
>> >>>> d%22-tf2750289.html#a7673372
>> >>>> Sent from the Lucene - Java Users mailing list archive at
>> Nabble.com.
>> >>>>
>> >>>>
>> >>>>
>> ---------------------------------------------------------------------
>> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>>
>> >>>>
>> >>>>
>> >>>>
>> ---------------------------------------------------------------------
>> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>>
>> >>>>
>> >>>>
>> >>>
>> >>> --
>> >>> View this message in context:
>> >>>
>> >>
>> >
>> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-=
foun
>> >>> d%22-tf2750289.html#a7673534
>> >>> Sent from the Lucene - Java Users mailing list archive at Nabble.com=
.
>> >>>
>> >>>
>> >>> --------------------------------------------------------------------=
-
>> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>
>> >>>
>> >>>
>> >>> --------------------------------------------------------------------=
-
>> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>
>> >>>
>> >>>
>> >>
>> >> --
>> >> View this message in context:
>> >>
>> >
>> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-=
foun
>> >> d%22-tf2750289.html#a7673771
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >>
>> >
>> > --
>> > View this message in context:
>> >
>> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-=
foun
>> > d%22-tf2750289.html#a7674006
>> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-=
found%22-tf2750289.html#a7682746
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Problem%3A-%22The-selec=
ted-method-Keyword-was-not-found%22-tf2750289.html#a7695492
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 10:34:48 2006
Return-Path: <java-user-return-24851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30581 invoked from network); 5 Dec 2006 10:34:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 10:34:47 -0000
Received: (qmail 24239 invoked by uid 500); 5 Dec 2006 10:34:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24135 invoked by uid 500); 5 Dec 2006 10:34:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24124 invoked by uid 99); 5 Dec 2006 10:34:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 02:34:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 02:34:37 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 5E3594A533
	for <java-user@lucene.apache.org>; Tue,  5 Dec 2006 05:34:15 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Tue, 05 Dec 2006 05:34:15 -0500
X-Sasl-enc: a88CVEaXVDE9Nsrx+M7l3t9U4T5bwbfxL1W7jefwrqB+ 1165314855
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 2D1B17684
	for <java-user@lucene.apache.org>; Tue,  5 Dec 2006 05:34:14 -0500 (EST)
Message-ID: <45754B15.7010802@mikemccandless.com>
Date: Tue, 05 Dec 2006 05:33:57 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene search performance: linear?
References: <4F78AB8AF361164AB110D9841D3089810D8CBC@rw-msg-02.broadvision.com>
In-Reply-To: <4F78AB8AF361164AB110D9841D3089810D8CBC@rw-msg-02.broadvision.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Zhang, Lisheng wrote:
> Hi,
> 
> I indexed first 220,000, all with a special keyword, I did a simple
> query and only fetched 5 docs, with Hits.length()=220,000.
> 
> Then I indexed 440,000 docs, with the same keyword, query it
> again and fetched a few docs, with Hits.length(0=440,000.
> 
> I found that search time is about linear: 2nd time is about 2 times
> longer than 1st query. I would like to understand:
> 
> Does the linear relation come from score calculation, since we
> have to calculate score one by one? Or other reason?

Yes, Lucene is in fact linear in the # documents that match, for a
single term query.

Lucene is an inverted text index, which means (to first order) each
term lists the document IDs that contain it.

For a single term query, Lucene must walk the full list of documents
containing that term, scoring each one.  For multi-term queries,
Lucene walks each term's list of documents "in synchrony" such that
each document ID is visited at once across all terms.  The time spent
gets trickier in this case because while the final result set could be
small, the amount of IO & documents that had to be visited & checked
in order to compute that result set, could have been large.

> If we have B-tree index I would naively expect a better scalibility?

I don't think Lucene uses B-trees now, and I'm not sure how we could
make use of B-trees such that searching is faster than linear time?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 10:39:41 2006
Return-Path: <java-user-return-24852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31419 invoked from network); 5 Dec 2006 10:39:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 10:39:40 -0000
Received: (qmail 30907 invoked by uid 500); 5 Dec 2006 10:39:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30879 invoked by uid 500); 5 Dec 2006 10:39:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30868 invoked by uid 99); 5 Dec 2006 10:39:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 02:39:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 02:39:31 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 238DE4ABB9
	for <java-user@lucene.apache.org>; Tue,  5 Dec 2006 05:39:11 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Tue, 05 Dec 2006 05:39:11 -0500
X-Sasl-enc: qnevyuy0pB+LXmwOrHiabMOK9Q/IPxmdtIgQ1WioXDKI 1165315150
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id DE6019571
	for <java-user@lucene.apache.org>; Tue,  5 Dec 2006 05:39:10 -0500 (EST)
Message-ID: <45754C3D.6010704@mikemccandless.com>
Date: Tue, 05 Dec 2006 05:38:53 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IOException: Access is denied from IndexWriter.Optimize
References: <OF23B994C8.7A2F0DD1-ONC125723B.00327985-C125723B.0032BDFC@dkdigital.no>
In-Reply-To: <OF23B994C8.7A2F0DD1-ONC125723B.00327985-C125723B.0032BDFC@dkdigital.no>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

trond.lindanger@dkdigital.no wrote:
> Forgot something...
> Also I got this exception, which may be related:
> 
> java.io.IOException: Cannot delete C:\dknewscenter\2\_5d.cfs
>         at 
> org.apache.lucene.store.FSDirectory.create(FSDirectory.java:319)
>         at 
> org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:208)
>         at 
> org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:131)
>         at 
> org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:200)
>         at 
> de.nava.informa.search.ChannelIndexer.indexItems(ChannelIndexer.java:126)
>         at 
> de.nava.informa.search.ChannelIndexer.indexChannels(ChannelIndexer.java:94)
> 
> This exception is given repeatedly, while the last exception is given 
> once.

This particular exception looks like your are sending "create=true"
when instantiating your IndexWriter, while a reader is still using the
index.  Plus you are on Windows.  Does that sound right?

If so, this case is not well handled by the current releases of
Lucene.

On the trunk (and in the next release) it is correctly handled in that
if the delete fails, Lucene will just try again later (just like other
places where Lucene deletes files, eg segments that were merged).

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 11:04:30 2006
Return-Path: <java-user-return-24853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36344 invoked from network); 5 Dec 2006 11:04:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 11:04:29 -0000
Received: (qmail 66217 invoked by uid 500); 5 Dec 2006 11:04:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65757 invoked by uid 500); 5 Dec 2006 11:04:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65746 invoked by uid 99); 5 Dec 2006 11:04:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 03:04:31 -0800
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 03:04:18 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 8C3D94AB98
	for <java-user@lucene.apache.org>; Tue,  5 Dec 2006 06:03:58 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Tue, 05 Dec 2006 06:03:58 -0500
X-Sasl-enc: gJfugIbfVk9cXKsufZRIvb+X9I5tYK5R9qDwRdwINqrp 1165316638
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 3733D8E78
	for <java-user@lucene.apache.org>; Tue,  5 Dec 2006 06:03:58 -0500 (EST)
Message-ID: <4575520C.5060309@mikemccandless.com>
Date: Tue, 05 Dec 2006 06:03:40 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: {SPAM 05.2 _____} IOException: Access is denied from  IndexWriter.Optimize
References: <OFF1D54C0B.66763205-ONC125723B.0031EC69-C125723B.003233CC@dkdigital.no>
In-Reply-To: <OFF1D54C0B.66763205-ONC125723B.0031EC69-C125723B.003233CC@dkdigital.no>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

trond.lindanger@dkdigital.no wrote:
> Hi, 
> In my test case, four Quartz jobs are starting each third minute storing 
> records in a database followed by an index update.
> After doing a test run over a period of 16 hours, I got this exception 
> after 10 hours:
> 
> java.io.IOException: Access is denied
>         at java.io.RandomAccessFile.writeBytes(Native Method)
>         at java.io.RandomAccessFile.write(RandomAccessFile.java:456)
>         at 
> org.apache.lucene.store.FSIndexOutput.flushBuffer(FSDirectory.java:575)
>         at 
> org.apache.lucene.store.BufferedIndexOutput.flush(BufferedIndexOutput.java:85)
>         at 
> org.apache.lucene.store.BufferedIndexOutput.writeBytes(BufferedIndexOutput.java:75)
>         at 
> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java:212)
>         at 
> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java:169)
>         at 
> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java:148)
>         at 
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:962)
>         at 
> org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:833)
>         at 
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:569)
>  
> Here is the relevant method:
> 
>   public void indexItems(boolean createNewIndex, Collection items)
>     throws java.io.IOException {
>         if (IndexReader.indexExists(indexDir)) {
>                 while (IndexReader.isLocked(indexDir)) {
>                         try {
>                                 logger.info(indexDir+" is locked, 
> waiting...");
>                                 Thread.sleep(1000); 
>                         } catch (InterruptedException e) {
>                                 e.printStackTrace();
>                         }
>                 }
>         }
>         logger.info(indexDir+" lock is open."); 
>     logger.info("Start writing index located at "+indexDir);
>     IndexWriter writer = new IndexWriter(indexDir, analyzer, 
> createNewIndex);
>     writer.setWriteLockTimeout(10000);
>     writer.setUseCompoundFile(true);
>  
>     Iterator itI = items.iterator();
>     while (itI.hasNext()) {
>       ItemIF item = (ItemIF) itI.next();
>       logger.info("Add item " + item + " to index.");
>       writer.addDocument(ItemDocument.makeDocument(item));
>     }
>     writer.optimize(); // This is where the exception is thrown
>     nrOfIndexedItems = writer.docCount();
>     writer.close();
>     logger.info("Finished writing index.");
>   } 
> 
> 
> The following environment is used:
> WinXP
> JDK 1.5
> Tomcat 5.5
> Lucene 2.0.0
> HSQLdb 1.8.0
> Quartz 1.6.0
> Hibernate 2.1.8

It seems like this may be another case of writer creating new index
while reader(s) are reading from the same index (which won't work in
2.0 but does work in trunk/next release).

But, this exception is rather mysterious.  I can't fully explain it.

The optimize method first flushes all documents in the in-memory
buffer (a RAMDirectory) to disk.  It's in this flush, specifically
when building the resulting compound file, that you hit the Access is
denied IOException.

What's spooky is you hit it during writeBytes.  Meaning, the file was
in fact successfully opened for writing.  I would have expected this
exception to occur on opening (if for example a reader was reading
the file at that time, and, if somehow the commit lock wasn't working
properly).

Is this process the only one that's doing writing to the index?  For
example, why do you have the loop up-front to pause for 1.0 seconds if
the index is locked?  Is this just to check the commit lock (in case a
reader is opening the index at that moment)?

It sounds like you may have 4 Quartz jobs running, and each of them
wants to write to the index?  (So maybe your loop that pauses if index
is locked is really trying to wait for another writer to finish its
indexing before it starts?)  Lucene only allows one writer on the
index at a time.

Is this exception easily repeated?  EG, it always happens many hours
into your runs?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 11:53:28 2006
Return-Path: <java-user-return-24854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49685 invoked from network); 5 Dec 2006 11:53:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 11:53:27 -0000
Received: (qmail 32927 invoked by uid 500); 5 Dec 2006 11:53:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32889 invoked by uid 500); 5 Dec 2006 11:53:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32878 invoked by uid 99); 5 Dec 2006 11:53:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 03:53:27 -0800
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 03:53:15 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 93DB44ACD2
	for <java-user@lucene.apache.org>; Tue,  5 Dec 2006 06:52:55 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by out1.internal (MEProxy); Tue, 05 Dec 2006 06:52:55 -0500
X-Sasl-enc: LeYX0TnfljJ+DrEUa82hvwiZPP6fnTyo7MEMUYr0fTud 1165319575
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 32DD2B9
	for <java-user@lucene.apache.org>; Tue,  5 Dec 2006 06:52:54 -0500 (EST)
Message-ID: <45755D84.5070606@mikemccandless.com>
Date: Tue, 05 Dec 2006 06:52:36 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IOException: Access is denied from  IndexWriter.Optimize
References: <OFF1D54C0B.66763205-ONC125723B.0031EC69-C125723B.003233CC@dkdigital.no> <4575520C.5060309@mikemccandless.com>
In-Reply-To: <4575520C.5060309@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Sorry, I allowed my silly SPAM filter to pollute the subject line.
I'm fixing that in this reply so please reply to this one :)

Mike

Michael McCandless wrote:
> trond.lindanger@dkdigital.no wrote:
>> Hi, In my test case, four Quartz jobs are starting each third minute 
>> storing records in a database followed by an index update.
>> After doing a test run over a period of 16 hours, I got this exception 
>> after 10 hours:
>>
>> java.io.IOException: Access is denied
>>         at java.io.RandomAccessFile.writeBytes(Native Method)
>>         at java.io.RandomAccessFile.write(RandomAccessFile.java:456)
>>         at 
>> org.apache.lucene.store.FSIndexOutput.flushBuffer(FSDirectory.java:575)
>>         at 
>> org.apache.lucene.store.BufferedIndexOutput.flush(BufferedIndexOutput.java:85) 
>>
>>         at 
>> org.apache.lucene.store.BufferedIndexOutput.writeBytes(BufferedIndexOutput.java:75) 
>>
>>         at 
>> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java:212) 
>>
>>         at 
>> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java:169) 
>>
>>         at 
>> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java:148) 
>>
>>         at 
>> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:962)
>>         at 
>> org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:833) 
>>
>>         at 
>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:569)
>>  
>> Here is the relevant method:
>>
>>   public void indexItems(boolean createNewIndex, Collection items)
>>     throws java.io.IOException {
>>         if (IndexReader.indexExists(indexDir)) {
>>                 while (IndexReader.isLocked(indexDir)) {
>>                         try {
>>                                 logger.info(indexDir+" is locked, 
>> waiting...");
>>                                 Thread.sleep(1000); 
>>                         } catch (InterruptedException e) {
>>                                 e.printStackTrace();
>>                         }
>>                 }
>>         }
>>         logger.info(indexDir+" lock is open.");     logger.info("Start 
>> writing index located at "+indexDir);
>>     IndexWriter writer = new IndexWriter(indexDir, analyzer, 
>> createNewIndex);
>>     writer.setWriteLockTimeout(10000);
>>     writer.setUseCompoundFile(true);
>>  
>>     Iterator itI = items.iterator();
>>     while (itI.hasNext()) {
>>       ItemIF item = (ItemIF) itI.next();
>>       logger.info("Add item " + item + " to index.");
>>       writer.addDocument(ItemDocument.makeDocument(item));
>>     }
>>     writer.optimize(); // This is where the exception is thrown
>>     nrOfIndexedItems = writer.docCount();
>>     writer.close();
>>     logger.info("Finished writing index.");
>>   }
>>
>> The following environment is used:
>> WinXP
>> JDK 1.5
>> Tomcat 5.5
>> Lucene 2.0.0
>> HSQLdb 1.8.0
>> Quartz 1.6.0
>> Hibernate 2.1.8
> 
> It seems like this may be another case of writer creating new index
> while reader(s) are reading from the same index (which won't work in
> 2.0 but does work in trunk/next release).
> 
> But, this exception is rather mysterious.  I can't fully explain it.
> 
> The optimize method first flushes all documents in the in-memory
> buffer (a RAMDirectory) to disk.  It's in this flush, specifically
> when building the resulting compound file, that you hit the Access is
> denied IOException.
> 
> What's spooky is you hit it during writeBytes.  Meaning, the file was
> in fact successfully opened for writing.  I would have expected this
> exception to occur on opening (if for example a reader was reading
> the file at that time, and, if somehow the commit lock wasn't working
> properly).
> 
> Is this process the only one that's doing writing to the index?  For
> example, why do you have the loop up-front to pause for 1.0 seconds if
> the index is locked?  Is this just to check the commit lock (in case a
> reader is opening the index at that moment)?
> 
> It sounds like you may have 4 Quartz jobs running, and each of them
> wants to write to the index?  (So maybe your loop that pauses if index
> is locked is really trying to wait for another writer to finish its
> indexing before it starts?)  Lucene only allows one writer on the
> index at a time.
> 
> Is this exception easily repeated?  EG, it always happens many hours
> into your runs?
> 
> Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 12:34:18 2006
Return-Path: <java-user-return-24855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59246 invoked from network); 5 Dec 2006 12:34:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 12:34:17 -0000
Received: (qmail 98820 invoked by uid 500); 5 Dec 2006 12:34:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98783 invoked by uid 500); 5 Dec 2006 12:34:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98772 invoked by uid 99); 5 Dec 2006 12:34:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 04:34:19 -0800
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [193.213.115.49] (HELO mail49.e.nsc.no) (193.213.115.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 04:34:07 -0800
Received: from dkserver1.dinkommune.no ([193.213.25.89])
	by mail49.nsc.no (8.13.8/8.13.5) with SMTP id kB5CXiQo007672
	for <java-user@lucene.apache.org>; Tue, 5 Dec 2006 13:33:44 +0100 (CET)
In-Reply-To: <45755D84.5070606@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: IOException: Access is denied from  IndexWriter.Optimize
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OF58150EF0.D1D2BF74-ONC125723B.0045472F-C125723B.0045539F@dkdigital.no>
From: trond.lindanger@dkdigital.no
Date: Tue, 5 Dec 2006 13:37:10 +0100
X-MIMETrack: Serialize by Router on DK-SVG-1/NO/dkDigital(Release 7.0.1FP1|April 17, 2006) at
 05.12.2006 13:36:27,
	Serialize complete at 05.12.2006 13:36:27
Content-Type: multipart/alternative; boundary="=_alternative 00455399C125723B_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 00455399C125723B_=
Content-Type: text/plain; charset="US-ASCII"

Thank you for quick and detailed answer.
In this system multiple threads will, occasionally, try to write and/ or 
read the same index, hence the pause waiting for the lock. This is not a 
good way to implement it and was done as a temp solution for debug 
purposes only. Multiple processes may still reach the init of IndexWriter/ 
IndexReader for the same index at almost the same time. I guess 
synchronizing some object, giving exclusive access for one IndexReader or 
IndexWriter to some common index, is a better way to do it. May this be a 
work around for the parallel writer/ reader problem you describe? Anyway, 
I guess I should give the trunc a try first.
java.io.IOException: Access is denied has only been reported once. I have 
not been able to reproduce it. I have some anti virus app running on my 
machine (Trend Micro Office Scan). This includes a scan of the index dir. 
Do you think that may cause the problem. Or perhaps some other windows 
services/ tools accessing the file for some reason (windows indexer)?

--=_alternative 00455399C125723B_=--

From java-user-return-24856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 13:20:39 2006
Return-Path: <java-user-return-24856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70777 invoked from network); 5 Dec 2006 13:20:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 13:20:38 -0000
Received: (qmail 61929 invoked by uid 500); 5 Dec 2006 13:20:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61893 invoked by uid 500); 5 Dec 2006 13:20:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61881 invoked by uid 99); 5 Dec 2006 13:20:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 05:20:39 -0800
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.70.192.92] (HELO smtp8.libero.it) (193.70.192.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 05:20:28 -0800
Received: from localhost (172.16.1.82) by smtp8.libero.it (7.0.027-DD01)
        id 453F68F60354EA4A for java-user@lucene.apache.org; Tue, 5 Dec 2006 14:20:05 +0100
Received: from smtp2.libero.it ([172.16.1.225])
 by localhost (asav3.libero.it [193.70.192.152]) (amavisd-new, port 10024)
 with ESMTP id 16279-02-5 for <java-user@lucene.apache.org>;
 Tue,  5 Dec 2006 14:20:04 +0100 (CET)
Received: from libero.it (192.168.17.2) by smtp2.libero.it (7.0.027-DD01)
        id 451C4551015B46F9 for java-user@lucene.apache.org; Tue, 5 Dec 2006 14:20:04 +0100
Date: Tue,  5 Dec 2006 14:20:04 +0100
Message-Id: <J9SYDG$4CB3EB2D647976187C1BB468D51EB405@libero.it>
Subject: Store a document-like map
MIME-Version: 1.0
X-Sensitivity: 3
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
From: "mgallinucci\@libero\.it" <mgallinucci@libero.it>
To: "java-user" <java-user@lucene.apache.org>
X-XaM3-API-Version: 4.3 (R1) (B3pl17)
X-SenderIP: 82.91.124.185
X-Scanned: with antispam and antivirus automated system at libero.it
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I'm building an application that's going to classify some documents. So i=
 have a set of documents and a set of classes, and I must classify these =
docs in these classes. Now, documents are stored in Lucene index through =
Document, while I don't know how I can store my classes in Lucene, and ho=
w I can compare a Document to a class.
My class is only a map where the key is the word and the value is the rel=
evance for that class. For example: I made class "Football", this contain=
s this map:

Key | Value
ball | 0.8
penalty| 0.9

Someone can help me? My resolution idea was to build a Document with the =
words ball repeated 8 times and penalty 9 times, but it isn't a native mo=
de to compare a map with a document...
Thank you ahead of time...=0A=0A=0A--------------------------------------=
----------------=0AFrancesco ha perso ben 45 Kg! Scopri come! Clicca qui=0A=
http://click.libero.it/webnation05dic06=0A


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 13:24:45 2006
Return-Path: <java-user-return-24857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72075 invoked from network); 5 Dec 2006 13:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 13:24:44 -0000
Received: (qmail 70536 invoked by uid 500); 5 Dec 2006 13:24:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70515 invoked by uid 500); 5 Dec 2006 13:24:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70504 invoked by uid 99); 5 Dec 2006 13:24:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 05:24:45 -0800
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.70.192.92] (HELO smtp8.libero.it) (193.70.192.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 05:24:35 -0800
Received: from localhost (172.16.1.208) by smtp8.libero.it (7.0.027-DD01)
        id 453F68F60354F881 for java-user@lucene.apache.org; Tue, 5 Dec 2006 14:24:14 +0100
Received: from smtp0.libero.it ([172.16.1.204])
 by localhost (asav21.libero.it [193.70.193.8]) (amavisd-new, port 10024)
 with ESMTP id 14369-05-10 for <java-user@lucene.apache.org>;
 Tue,  5 Dec 2006 14:24:14 +0100 (CET)
Received: from libero.it (192.168.17.2) by smtp0.libero.it (7.0.027-DD01)
        id 44A3653A0289EC71 for java-user@lucene.apache.org; Tue, 5 Dec 2006 14:24:14 +0100
Date: Tue,  5 Dec 2006 14:24:13 +0100
Message-Id: <J9SYKD$68FCB804CCC9D7A42B588794397E9A2A@libero.it>
Subject: Store document-like map
MIME-Version: 1.0
X-Sensitivity: 3
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
From: "mgallinucci\@libero\.it" <mgallinucci@libero.it>
To: "java-user" <java-user@lucene.apache.org>
X-XaM3-API-Version: 4.3 (R1) (B3pl17)
X-SenderIP: 82.91.124.185
X-Scanned: with antispam and antivirus automated system at libero.it
X-Virus-Checked: Checked by ClamAV on apache.org

 	
Hi,
I'm building an application that's going to classify some documents. So i=
 have a set of documents and a set of classes, and I must classify these =
docs in these classes. Now, documents are stored in Lucene index through =
Document, while I don't know how I can store my classes in Lucene, and ho=
w I can compare a Document to a class.
My class is only a map where the key is the word and the value is the rel=
evance for that class. For example: I made class "Football", this contain=
s this map:

Key | Value
ball | 0.8
penalty| 0.9

Someone can help me? My resolution idea was to build a Document with the =
words ball repeated 8 times and penalty 9 times, but it isn't a native mo=
de to compare a map with a document...
Thank you ahead of time...
=0A=0A=0A------------------------------------------------------=0AFrances=
co ha perso ben 45 Kg! Scopri come! Clicca qui=0Ahttp://click.libero.it/w=
ebnation05dic06=0A


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 15:13:46 2006
Return-Path: <java-user-return-24858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28717 invoked from network); 5 Dec 2006 15:13:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 15:13:44 -0000
Received: (qmail 14413 invoked by uid 500); 5 Dec 2006 15:13:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14095 invoked by uid 500); 5 Dec 2006 15:13:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13950 invoked by uid 99); 5 Dec 2006 15:13:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 07:13:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 07:13:18 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 494404ADEC
	for <java-user@lucene.apache.org>; Tue,  5 Dec 2006 10:12:58 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by out1.internal (MEProxy); Tue, 05 Dec 2006 10:12:58 -0500
X-Sasl-enc: 4fefzGY6RZfVUC+9e6mfCZwS5NFuR3zNMwnskpH+ghvp 1165331578
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 0B6FA13FF
	for <java-user@lucene.apache.org>; Tue,  5 Dec 2006 10:12:57 -0500 (EST)
Message-ID: <45758C67.8000305@mikemccandless.com>
Date: Tue, 05 Dec 2006 10:12:39 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IOException: Access is denied from  IndexWriter.Optimize
References: <OF58150EF0.D1D2BF74-ONC125723B.0045472F-C125723B.0045539F@dkdigital.no>
In-Reply-To: <OF58150EF0.D1D2BF74-ONC125723B.0045472F-C125723B.0045539F@dkdigital.no>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

trond.lindanger@dkdigital.no wrote:
> Thank you for quick and detailed answer.
> In this system multiple threads will, occasionally, try to write and/ or 
> read the same index, hence the pause waiting for the lock. This is not a 
> good way to implement it and was done as a temp solution for debug 
> purposes only. Multiple processes may still reach the init of IndexWriter/ 
> IndexReader for the same index at almost the same time. I guess 
> synchronizing some object, giving exclusive access for one IndexReader or 
> IndexWriter to some common index, is a better way to do it.

It's fine if there are multiple readers, but there can only be one
writer.

So I think for your case what's important is that you synchronize your
writers.  One simple way to do this is just always try to instantiate
your IndexWriter, catch an IOException, and if the IOException is the
"Lock obtained timed out" with the write lock, assume this means
another writer is writing to the index so loop & try again.

If the IndexWriter is instantiated with no IOException then it got the
write lock and you can proceed to do your indexinging and then close
the writer in a finally clause.

This would mean your current check for whether index is locked is not
needed.

> May this be a 
> work around for the parallel writer/ reader problem you describe?

Just to be clear: the specific problem here is if you try to create
(create=true) a new index while readers are reading from that same
index.  You will get IOExceptions in this case with Lucene 2.0 on
Windows, but it will (should!) work with the current trunk.

Note that if you try the trunk, because the index format has changed,
you can't use the resulting index from Lucene 2.0 (you would have to
re-create the index in 2.0).

>  Anyway, I guess I should give the trunc a try first.
> java.io.IOException: Access is denied has only been reported once. I have 
> not been able to reproduce it. I have some anti virus app running on my 
> machine (Trend Micro Office Scan). This includes a scan of the index dir. 
> Do you think that may cause the problem. Or perhaps some other windows 
> services/ tools accessing the file for some reason (windows indexer)?

This one makes me nervous.  There have been known issues about Access
Denied IOExceptions, some involving other services (indexing service,
google desktop, virus checkers, shell extensions, etc.).  We have been
trying lately (in the trunk) to reduce, when possible, what
functionality Lucene requires of the filesystem, to make sure we play
well with such services.

As far as I know, in the trunk version of Lucene we've addressed all
such known cases.  But your exception doesn't look quite like any of
these.  This is why I'd really like to get to the root cause of your
case, so we can fix it if indeed Lucene is interacting badly with such
software.

It is remotely possible you are hitting this issue (fixed on trunk):

     http://issues.apache.org/jira/browse/LUCENE-669

If you upgrade to trunk, and this exception happens again, please
reply back with as much detail as possible!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 15:53:20 2006
Return-Path: <java-user-return-24859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43646 invoked from network); 5 Dec 2006 15:53:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 15:53:19 -0000
Received: (qmail 1669 invoked by uid 500); 5 Dec 2006 15:53:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1625 invoked by uid 500); 5 Dec 2006 15:53:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1608 invoked by uid 99); 5 Dec 2006 15:53:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 07:53:20 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of isaacrc82@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 07:53:09 -0800
Received: by ug-out-1314.google.com with SMTP id k40so3740473ugc
        for <java-user@lucene.apache.org>; Tue, 05 Dec 2006 07:52:47 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=di0w+ahAmaXdP8HpNCPK7z1adHwMx0th3o+NVP4QnXGvItDfeIMDJS4e31zinGk30wjYEstQsCobMbkUu15HwEOfp/XU3feguwXlhn6wqwNhpzHsVwHP9cdjXKX9TQ/ToC+rijeJBD4hVoA1OjQBMuVhMnyUf+yw/mISzfvU25g=
Received: by 10.67.97.7 with SMTP id z7mr13882726ugl.1165333965508;
        Tue, 05 Dec 2006 07:52:45 -0800 (PST)
Received: by 10.66.251.8 with HTTP; Tue, 5 Dec 2006 07:52:45 -0800 (PST)
Message-ID: <bf1404350612050752v4ddacd0p23bb8880331674e9@mail.gmail.com>
Date: Tue, 5 Dec 2006 10:52:45 -0500
From: "Ariel Isaac Romero Cartaya" <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Full disk space during indexing process with 120 gb of free disk space
Cc: ben@benlitchfield.com
In-Reply-To: <4574345B.2020605@benlitchfield.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10822_26353316.1165333965337"
References: <bf1404350612040639p6dd044d8gb76dce035648df98@mail.gmail.com>
	 <4574345B.2020605@benlitchfield.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10822_26353316.1165333965337
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

  Here is my source code where I convert pdf files to text for indexing, I
got this source code from lucene in action examples and adapted it for my
convenience, I hop you could help me to fix this problem, anyway if you know
another more efficient way to do it please tell me how to:

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.Iterator;
import java.util.List;

import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.pdfbox.cos.COSDocument;
import org.pdfbox.encryption.DecryptDocument;
import org.pdfbox.exceptions.CryptographyException;
import org.pdfbox.exceptions.InvalidPasswordException;
import org.pdfbox.pdfparser.PDFParser;
import org.pdfbox.pdmodel.PDDocument;
import org.pdfbox.pdmodel.PDDocumentInformation;
import org.pdfbox.util.PDFTextStripper;

import cu.co.cenatav.kernel.parser.DocumentHandler;
import cu.co.cenatav.kernel.parser.DocumentHandlerException;
import cu.co.cenatav.kernel.parser.schema.SchemaExtractor;

public class PDFBoxPDFHandler implements DocumentHandler {

  public static String password = "-password";

  public Document getDocument(InputStream is)
    throws DocumentHandlerException {

    COSDocument cosDoc = null;
    try {
      cosDoc = parseDocument(is);
    }
    catch (IOException e) {
      closeCOSDocument(cosDoc);
      throw new DocumentHandlerException(
        "Cannot parse PDF document", e);
    }

    // decrypt the PDF document, if it is encrypted
    try {
      if (cosDoc.isEncrypted()) {
        DecryptDocument decryptor = new DecryptDocument(cosDoc);
        decryptor.decryptDocument(password);
      }
    }
    catch (CryptographyException e) {
      closeCOSDocument(cosDoc);
      throw new DocumentHandlerException(
        "Cannot decrypt PDF document", e);
    }
    catch (InvalidPasswordException e) {
      closeCOSDocument(cosDoc);
      throw new DocumentHandlerException(
        "Cannot decrypt PDF document", e);
    }
    catch (IOException e) {
      closeCOSDocument(cosDoc);
      throw new DocumentHandlerException(
        "Cannot decrypt PDF document", e);
    }

    // extract PDF document's textual content
    String bodyText = null;
    try {
      PDFTextStripper stripper = new PDFTextStripper();
      bodyText = stripper.getText(new PDDocument(cosDoc));
    }
    catch (IOException e) {
      closeCOSDocument(cosDoc);
      throw new DocumentHandlerException(
        "Cannot parse PDF document", e);
//       String errS = e.toString();
//       if (errS.toLowerCase().indexOf("font") != -1) {
//       }
    }

    Document doc = new Document();
    if (bodyText != null) {

        PDDocument pdDoc = null;
        PDDocumentInformation docInfo = null;

        try {
          pdDoc = new PDDocument(cosDoc);
          docInfo = pdDoc.getDocumentInformation();
        }
        catch (Exception e) {
          closeCOSDocument(cosDoc);
          closePDDocument(pdDoc);
          System.err.println("Cannot extraxt metadata from PDF: " +
e.getMessage());
        }

          SchemaExtractor schemaExtractor = new SchemaExtractor(bodyText);

          String author = null;
          if (docInfo != null)
                  author   =  docInfo.getAuthor();

          if (author == null || author.equals("")){

              //TODO Hacer el componente schemaExtractor

              List Authors = schemaExtractor.getAuthor();

              Iterator I = Authors.iterator();

              while (I.hasNext()){
                   String Author = (String)I.next();
               doc.add(new Field("author", Author, Field.Store.YES ,
Field.Index.TOKENIZED, Field.TermVector.YES));
              }
          }else{
              doc.add(new Field("author", author, Field.Store.YES ,
Field.Index.TOKENIZED, Field.TermVector.YES));
          }
          String title = null;
          if (docInfo != null)
                 title = docInfo.getTitle();

          if (title == null || title.equals("")){
                      title = schemaExtractor.getTitle();
          }

          String keywords = null;

          if (docInfo != null)
             keywords = docInfo.getKeywords();
          if (keywords == null)
              keywords = "";

          String summary = null;

          if (docInfo != null)
                      summary  = docInfo.getProducer() + " " +
docInfo.getCreator() + " " +  docInfo.getSubject();

          if (summary == null || summary.equals("")){
                      summary = schemaExtractor.getAbstract();
          }

          String content = schemaExtractor.getContent();

          Field fieldTitle = new Field("title", title, Field.Store.YES ,
Field.Index.TOKENIZED,Field.TermVector.YES);
          //fieldTitle.setBoost(new Float(1.5));
          doc.add(fieldTitle);

          Field fieldSumary = new Field("sumary", summary, Field.Store.YES ,
Field.Index.TOKENIZED,Field.TermVector.YES);
         //fieldSumary.setBoost(new Float(1.3));
          doc.add(fieldSumary);


          doc.add(new Field("content", content, Field.Store.YES ,
Field.Index.TOKENIZED,Field.TermVector.YES));

          doc.add(new Field("keywords", keywords, Field.Store.YES ,
Field.Index.UN_TOKENIZED,Field.TermVector.YES));

          closePDDocument(pdDoc);
    }


    // extract PDF document's meta-data

    closeCOSDocument(cosDoc);

    return doc;
  }

  private static COSDocument parseDocument(InputStream is)
    throws IOException {
    PDFParser parser = new PDFParser(is);
    parser.parse();
    return parser.getDocument();
  }

  private void closeCOSDocument(COSDocument cosDoc) {
    if (cosDoc != null) {
      try {
        cosDoc.close();
      }
      catch (IOException e) {
        // eat it, what else can we do?
      }
    }
  }

  private void closePDDocument(PDDocument pdDoc) {
    if (pdDoc != null) {
      try {
        pdDoc.close();
      }
      catch (IOException e) {
        // eat it, what else can we do?
      }
    }
  }

  public static void main(String[] args) throws Exception
  {
    PDFBoxPDFHandler handler = new PDFBoxPDFHandler();

    Document doc = handler.getDocument(new FileInputStream(new
File(args[0])));

    System.out.println(doc);
  }
}

Could you help me please.

------=_Part_10822_26353316.1165333965337--

From java-user-return-24860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 15:54:44 2006
Return-Path: <java-user-return-24860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44196 invoked from network); 5 Dec 2006 15:54:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 15:54:43 -0000
Received: (qmail 4605 invoked by uid 500); 5 Dec 2006 15:54:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4573 invoked by uid 500); 5 Dec 2006 15:54:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4562 invoked by uid 99); 5 Dec 2006 15:54:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 07:54:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [199.228.142.115] (HELO plmler8.mail.eds.com) (199.228.142.115)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 07:54:30 -0800
Received: from plmlir5.mail.eds.com (plmlir5-2.mail.eds.com [199.228.142.135])
	by plmler8.mail.eds.com (8.13.8/8.12.10) with ESMTP id kB5Fs5CL019182
	for <java-user@lucene.apache.org>; Tue, 5 Dec 2006 09:54:08 -0600
Received: from plmlir5.mail.eds.com (localhost [127.0.0.1])
	by plmlir5.mail.eds.com (8.13.8/8.12.10) with ESMTP id kB5FrKt3009560
	for <java-user@lucene.apache.org>; Tue, 5 Dec 2006 09:53:20 -0600
Received: from usplm015.amer.corp.eds.com ([148.94.166.8])
	by plmlir5.mail.eds.com (8.13.8/8.12.10) with ESMTP id kB5FrJGf009453
	for <java-user@lucene.apache.org>; Tue, 5 Dec 2006 09:53:20 -0600
Received: from usahm208.amer.corp.eds.com ([130.175.198.40]) by usplm015.amer.corp.eds.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 5 Dec 2006 09:53:19 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Problem: "The selected method Keyword was not found"
Date: Tue, 5 Dec 2006 10:53:18 -0500
Message-ID: <25736CAEA4C6E24DB98D768458C898E03F5D71@usahm208.amer.corp.eds.com>
In-reply-to: <7695492.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem: "The selected method Keyword was not found"
Thread-Index: AccYUTRi0rX2y95dStSHl8otLZR1iwAM4A1w
From: "Risov, Maria" <maria.risov@eds.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 05 Dec 2006 15:53:19.0880 (UTC) FILETIME=[7C51C880:01C71885]
X-Virus-Checked: Checked by ClamAV on apache.org

Aaron,

When you download Lucene from one of the mirrors =
http://www.apache.org/dyn/closer.cgi/lucene/java/ (you are using the =
Java version, right?), you should see packages named =
"lucene-core-2.0.0.jar".  These contain all Lucene modules and other =
components that became standard.  You need the "lucene-2.0.0.zip" - =
without the "core" word.  This package contains the "contrib" folder =
with additional analyzers and other useful modules. =20

Good luck!=20

Marie=20


-----Original Message-----
From: Aaron Shaw [mailto:aaronshaw@onetel.com]=20
Sent: Tuesday, December 05, 2006 4:36 AM
To: java-user@lucene.apache.org
Subject: RE: Problem: "The selected method Keyword was not found"


Hi,

thank you both for your help. Where would I find this "Contributions"?

Aaron


Risov, Maria wrote:
>=20
> It's in Contributions rather than being in the core Lucene folder.=20
>=20
> Marie Risov
>=20
>=20
>=20
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Monday, December 04, 2006 2:35 PM
> To: java-user@lucene.apache.org
> Subject: Re: Problem: "The selected method Keyword was not found"
>=20
> It's a secret, do you have the secret code <G>???
>=20
> Try SnowballAnalyzer....
>=20
> Erick
>=20
> On 12/4/06, Aaron Shaw <aaronshaw@onetel.com> wrote:
>>
>>
>> thank you both for your help, got it working now
>>
>>
>> One additional thing, how do I get it to use stemming? I'm presuming=20
>> I have to use one of the analyzers other than "simpleanalyzer" but I=20
>> can't seem to find out which?
>>
>>
>> Samir Abdou wrote:
>> >
>> > In your classpath !
>> >
>> > -----Message d'origine-----
>> > De: Aaron Shaw [mailto:aaronshaw@onetel.com]
>> > Envoy=E9: lundi, 4. d=E9cembre 2006 12:02
>> > =C0: java-user@lucene.apache.org
>> > Objet: RE: Problem: "The selected method Keyword was not found"
>> >
>> >
>> > Is there any quick way of telling whether I'm using 1.9 or 2? I=20
>> > want to make sure I successfully removed the old version
>> >
>> >
>> > Samir Abdou wrote:
>> >>
>> >> If you're trying to use the 1.9 version it's OK! The 'Keyword'=20
>> >> static method is not available in the 2.0 version.
>> >>
>> >> Field field =3D new
>> Field("url","http://localhost:8500/cfdocs/dochome.htm
>> ",
>> >>
>> >>>...is this creating a new object or calling a method of my=20
>> >>>existing field object?
>> >>
>> >> This is creating a new object.
>> >>
>> >> Samir
>> >>
>> >>
>> >> Samir Abdou wrote:
>> >>>
>> >>> Field field =3D new
>> >>> Field("url","http://localhost:8500/cfdocs/dochome.htm",
>> >>> Field.Store.YES, Field.Index.UN_TOKENIZED);
>> >>>
>> >>> You need tot translate this to cf script :-)
>> >>>
>> >>> For more information, take a look to=20
>> >>> http://lucene.apache.org/java/1_9_1/api/index.html
>> >>>
>> >>>
>> >>> Welcome,
>> >>> Samir
>> >>>
>> >>>
>> >>> -----Message d'origine-----
>> >>> De: Aaron Shaw [mailto:aaronshaw@onetel.com]
>> >>> Envoy=E9: lundi, 4. d=E9cembre 2006 11:23
>> >>> =C0: java-user@lucene.apache.org
>> >>> Objet: RE: Problem: "The selected method Keyword was not found"
>> >>>
>> >>>
>> >>> Hi,
>> >>>
>> >>> I've tried it in 2.0 and 1.9
>> >>>
>> >>> What syntax should I be using to add documents in the new version =

>> >>> instead?
>> >>>
>> >>> Thanks,
>> >>>
>> >>> Aaron
>> >>>
>> >>>
>> >>>
>> >>> Samir Abdou wrote:
>> >>>>
>> >>>> Hi,
>> >>>>
>> >>>> The method Field.Keyword is not longer available in Lucene's=20
>> >>>> last version!
>> >>>>
>> >>>> Which version are you using?
>> >>>>
>> >>>> Regards,
>> >>>> Samir
>> >>>>
>> >>>> -----Message d'origine-----
>> >>>> De: Aaron Shaw [mailto:aaronshaw@onetel.com]
>> >>>> Envoy=E9: lundi, 4. d=E9cembre 2006 11:08
>> >>>> =C0: java-user@lucene.apache.org
>> >>>> Objet: Problem: "The selected method Keyword was not found"
>> >>>>
>> >>>>
>> >>>> Hi,
>> >>>>
>> >>>> I'm attempting to use Lucene under Coldfusion MX, however when I =

>> >>>> try
>> to
>> >>>> create and index I am coming up against the following error=20
>> >>>> message when I try to add a document:
>> >>>>
>> >>>> The selected method Keyword was not found.
>> >>>>
>> >>>> I'm using the following lines of code to try to create the =
index:
>> >>>>
>> >>>> <cfscript>
>> >>>> analyzer =3D
>> >>>> CreateObject("java","org.apache.lucene.analysis.StopAnalyzer");
>> >>>
>> >>>> analyzer.init();
>> >>>> writer =3D=20
>> >>>> CreateObject("java","org.apache.lucene.index.IndexWriter");
>> >>>> writer.init("c:\cfusionmx\wwwroot\lucene\docsindex",analyzer,=20
>> >>>> true); document =3D CreateObject("java",=20
>> >>>> "org.apache.lucene.document.Document
>> ");
>> >>>> field =3D CreateObject("java",=20
>> >>>> "org.apache.lucene.document.Field");
>> >>>> system =3D CreateObject("java", "java.lang.System"); content =3D =

>> >>>> theContent; endtitle=3Dlen(theContent); startTitle =3D=20
>> >>>> FindNoCase("", content); if (endTitle GT 0) {
>> >>>>      title =3D trim(Mid(content, startTitle + 7, endTitle -=20
>> >>>> startTitle
>> -
>> >>>> 7));
>> >>>> }
>> >>>>
>> >>>
>> >>
>> > document.add(field.Keyword("url","
>> http://localhost:8500/cfdocs/dochome.htm")
>> >>>> );
>> >>>> </cfscript>
>> >>>>
>> >>>> However if I dump the "field" object, I would expect to see the
>> Keyword
>> >>>> method or property displayed, however this is not the case.
>> >>>>
>> >>>> If anyone can shed any light on this it would be very much
>> appreciated.
>> >>>>
>> >>>> Thanks,
>> >>>>
>> >>>> Aaron
>> >>>> --
>> >>>> View this message in context:
>> >>>>
>> >>>
>> >>
>> >
>> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-n
>> ot-foun
>> >>>> d%22-tf2750289.html#a7673372
>> >>>> Sent from the Lucene - Java Users mailing list archive at
>> Nabble.com.
>> >>>>
>> >>>>
>> >>>>
>> ---------------------------------------------------------------------
>> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>>> For additional commands, e-mail:=20
>> >>>> java-user-help@lucene.apache.org
>> >>>>
>> >>>>
>> >>>>
>> >>>>
>> ---------------------------------------------------------------------
>> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>>> For additional commands, e-mail:=20
>> >>>> java-user-help@lucene.apache.org
>> >>>>
>> >>>>
>> >>>>
>> >>>
>> >>> --
>> >>> View this message in context:
>> >>>
>> >>
>> >
>> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-n
>> ot-foun
>> >>> d%22-tf2750289.html#a7673534
>> >>> Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
>> >>>
>> >>>
>> >>> -----------------------------------------------------------------
>> >>> ---- To unsubscribe, e-mail:=20
>> >>> java-user-unsubscribe@lucene.apache.org
>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>
>> >>>
>> >>>
>> >>> -----------------------------------------------------------------
>> >>> ---- To unsubscribe, e-mail:=20
>> >>> java-user-unsubscribe@lucene.apache.org
>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>
>> >>>
>> >>>
>> >>
>> >> --
>> >> View this message in context:
>> >>
>> >
>> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-n
>> ot-foun
>> >> d%22-tf2750289.html#a7673771
>> >> Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
>> >>
>> >>
>> >> ------------------------------------------------------------------
>> >> --- To unsubscribe, e-mail:=20
>> >> java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >>
>> >> ------------------------------------------------------------------
>> >> --- To unsubscribe, e-mail:=20
>> >> java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >>
>> >
>> > --
>> > View this message in context:
>> >
>> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-n
>> ot-foun
>> > d%22-tf2750289.html#a7674006
>> > Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
>> >
>> >
>> > -------------------------------------------------------------------
>> > -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>> > -------------------------------------------------------------------
>> > -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-n
>> ot-found%22-tf2750289.html#a7682746
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--
View this message in context: =
http://www.nabble.com/Problem%3A-%22The-selected-method-Keyword-was-not-f=
ound%22-tf2750289.html#a7695492
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 16:47:57 2006
Return-Path: <java-user-return-24861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68343 invoked from network); 5 Dec 2006 16:47:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 16:47:56 -0000
Received: (qmail 56829 invoked by uid 500); 5 Dec 2006 16:47:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56791 invoked by uid 500); 5 Dec 2006 16:47:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56780 invoked by uid 99); 5 Dec 2006 16:47:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 08:47:57 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.189] (HELO exprod6og54.obsmtp.com) (64.18.1.189)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 05 Dec 2006 08:47:44 -0800
Received: from source ([139.56.4.14]) by exprod6ob54.postini.com ([64.18.5.12]) with SMTP;
	Tue, 05 Dec 2006 08:47:18 PST
Received: from triangulum1.broadvision.com (triangulum1.broadvision.com [10.10.102.100])
	by nebula3.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id kB5GcJL23060
	for <java-user@lucene.apache.org>; Tue, 5 Dec 2006 08:38:19 -0800 (PST)
Received: from rw-gw-01.BroadVision.com (localhost [127.0.0.1])
	by triangulum1.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id IAA12376
	for <java-user@lucene.apache.org>; Tue, 5 Dec 2006 08:48:29 -0800 (PST)
Received: by rw-gw-01.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <MPFSG5BF>; Tue, 5 Dec 2006 08:47:17 -0800
Message-ID: <4F78AB8AF361164AB110D9841D3089810D8CBD@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Lucene search performance: linear?
Date: Tue, 5 Dec 2006 08:46:58 -0800 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Thanks for the reply, I only measure search(), I cached 
IndexSearcher in memory.

Best regards, Lisheng 

-----Original Message-----
From: Daniel Naber [mailto:lucenelist2005@danielnaber.de]
Sent: Tuesday, December 05, 2006 12:22 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene search performance: linear?


On Tuesday 05 December 2006 03:49, Zhang, Lisheng wrote:

> I found that search time is about linear: 2nd time is about 2 times
> longer than 1st query.

What exactly did you measure, only the search() or also opening the 
IndexSearcher? The later depends on index size, thus you shouldn't re-open 
it for every search.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 18:40:50 2006
Return-Path: <java-user-return-24862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14377 invoked from network); 5 Dec 2006 18:40:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 18:40:49 -0000
Received: (qmail 10608 invoked by uid 500); 5 Dec 2006 18:40:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10563 invoked by uid 500); 5 Dec 2006 18:40:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10552 invoked by uid 99); 5 Dec 2006 18:40:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 10:40:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 05 Dec 2006 10:40:38 -0800
Received: (qmail invoked by alias); 05 Dec 2006 18:40:16 -0000
Received: from p548C7666.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.118.102]
  by mail.gmx.net (mp010) with SMTP; 05 Dec 2006 19:40:16 +0100
X-Authenticated: #3493418
Message-ID: <4575BC56.5050305@gmx.de>
Date: Tue, 05 Dec 2006 19:37:10 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene search performance: linear?
References: <4F78AB8AF361164AB110D9841D3089810D8CBC@rw-msg-02.broadvision.com>
In-Reply-To: <4F78AB8AF361164AB110D9841D3089810D8CBC@rw-msg-02.broadvision.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Lisheng,

a search process has to do usually two thinks. First it has to find the 
term in the index. I don’t know the implementation of finding a term in 
Lucene. I hope that the index is at least a sorted list or a binary 
tree, so it can search binary. The time finding a term depends of the 
term’s number n_t. If it searches binary the complexity is approximately 
log(n_t). The search time should be better then linear.

Second it has to collect the documents for a term. This depends of the 
documents number n_d for a term. It has to go thru the list of documents 
for a term. The time should be proportional to the number of documents 
for a term even if it doesn’t calculate the similarity. Usually the 
number of documents for a single term is less than the total number of 
documents in the collection and less than the total number of terms in 
the index.

If the number of documents for a single term is less than the total 
number of documents the search process for a single term including 
process one (finding the term) and process two (collecting the documents 
and calculating the score) should be better the linear to the number of 
documents.

> I indexed first 220,000, all with a special keyword, I did a simple
> query and only fetched 5 docs, with Hits.length()=220,000.
> 
> Then I indexed 440,000 docs, with the same keyword, query it
> again and fetched a few docs, with Hits.length(0=440,000.

In your case the query term is contained in all documents. The number of 
documents for a single term is equals the total number of documents in 
your collection. The hit collector has to collect all documents. The 
collecting process is proportional to the number of documents to 
collect. So the search for all documents should be at least linear to 
the total number of documents.

Sören

Zhang, Lisheng schrieb:
> Hi,
> 
> I indexed first 220,000, all with a special keyword, I did a simple
> query and only fetched 5 docs, with Hits.length()=220,000.
> 
> Then I indexed 440,000 docs, with the same keyword, query it
> again and fetched a few docs, with Hits.length(0=440,000.
> 
> I found that search time is about linear: 2nd time is about 2 times
> longer than 1st query. I would like to understand:
> 
> Does the linear relation come from score calculation, since we
> have to calculate score one by one? Or other reason?
> 
> If we have B-tree index I would naively expect a better scalibility?
> 
> Thanks very much for your helps, 
> 
> Lisheng

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 19:01:44 2006
Return-Path: <java-user-return-24863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20901 invoked from network); 5 Dec 2006 19:01:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 19:01:43 -0000
Received: (qmail 52356 invoked by uid 500); 5 Dec 2006 19:01:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52325 invoked by uid 500); 5 Dec 2006 19:01:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52178 invoked by uid 99); 5 Dec 2006 19:01:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 11:01:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alicelista@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 11:01:29 -0800
Received: by wr-out-0506.google.com with SMTP id i21so1594656wra
        for <java-user@lucene.apache.org>; Tue, 05 Dec 2006 11:00:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:x-mailer:x-mimeole:thread-index;
        b=GRjdOXp3xcCKiJWVPgJ5JLV3reUlJQSpzJ6vL5hYA+YlkpNtzBWNN9QTEew94J+t4ZX3UKv4hoACcg8aF+XcZZ/vElkUOVQucfaUBGMw9mjyv8y9dyzGgdnS21ckX6++xEY6nRlasOUXH/UvdiLInjTXHAmSkSfbN1CIjPmNvEc=
Received: by 10.90.27.6 with SMTP id a6mr9949495aga.1165345249642;
        Tue, 05 Dec 2006 11:00:49 -0800 (PST)
Received: from etiopia ( [200.152.100.56])
        by mx.google.com with ESMTP id 38sm20631757wrl.2006.12.05.11.00.42;
        Tue, 05 Dec 2006 11:00:48 -0800 (PST)
From: "Alice" <alicelista@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Customized Analyzer
Date: Tue, 5 Dec 2006 16:59:37 -0200
Message-ID: <007c01c7189f$8fc4e220$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_007D_01C7188E.CC3E5C10"
X-Mailer: Microsoft Office Outlook 11
X-Mimeole: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccYn4LPHKXuQ1nwSHWOgGJlGhBRIA==
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_007D_01C7188E.CC3E5C10
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hello!

 

I wrote a custom analyzer that has synonyms of some words to help on search.

 

I use the analyzer when searching the user's entered keyword.

 

What is happening that I don't understand why is that when tokens are
returned from the synonyms set, the query parser returns the query with ""
surrounding the text.

 

Example:

If the user enters: wind

 

I search my synonyms set and if I find something I return the token like:

 

return new Token(synonyms[i], token.startOffset(), token.endOffset(),
token.type());

 

And when it gets do the query I see:

content:"wind window"

 

But I do not want to be returned surrounded by "".

 

Can somebody help?

 

Thanks!

 

 


------=_NextPart_000_007D_01C7188E.CC3E5C10--


From java-user-return-24864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 19:09:42 2006
Return-Path: <java-user-return-24864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24108 invoked from network); 5 Dec 2006 19:09:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 19:09:41 -0000
Received: (qmail 67986 invoked by uid 500); 5 Dec 2006 19:09:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67945 invoked by uid 500); 5 Dec 2006 19:09:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67865 invoked by uid 99); 5 Dec 2006 19:09:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 11:09:38 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 388655B78D; Tue,  5 Dec 2006 11:08:39 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 353DA7F403
	for <java-user@lucene.apache.org>; Tue,  5 Dec 2006 11:08:39 -0800 (PST)
Date: Tue, 5 Dec 2006 11:08:39 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Customized Analyzer
In-Reply-To: <007c01c7189f$8fc4e220$4900000a@m4u.com.br>
Message-ID: <Pine.LNX.4.58.0612051106470.31075@hal.rescomp.berkeley.edu>
References: <007c01c7189f$8fc4e220$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I search my synonyms set and if I find something I return the token like:

: return new Token(synonyms[i], token.startOffset(), token.endOffset(),
: token.type());

: And when it gets do the query I see:
:
: content:"wind window"

When you add your synonym, it's just going into the stream of tokens in
the "next" position .. if you call the Token.setPositionIncrement(0)
method on your new Token before you return it, it will occupy the same
position as the token before it, and QP will make an BooleanQuery out of
those two tokens instead of a PhraseQuery.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 19:17:27 2006
Return-Path: <java-user-return-24865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26466 invoked from network); 5 Dec 2006 19:17:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 19:17:27 -0000
Received: (qmail 90652 invoked by uid 500); 5 Dec 2006 19:17:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90605 invoked by uid 500); 5 Dec 2006 19:17:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90594 invoked by uid 99); 5 Dec 2006 19:17:26 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of alicelista@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 11:17:21 -0800
Received: by wx-out-0506.google.com with SMTP id i29so3785744wxd
        for <java-user@lucene.apache.org>; Tue, 05 Dec 2006 11:15:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
        b=BvalMEJR+P6UQ0HYNLzxeyH+mLdr9qUVAtBvWiT9Iy9fq9HjsgpuNkaJEUYVFypnjNMX3UsfBLv6clG9JfkmEnNl4FevysYS9f2ghIRL+qpJ6hozF9AOIGVhBjvutg+0UKtTG7c/DNMtDuiOmT6RjazmMp95QBvwl/9S4HYrmxU=
Received: by 10.90.71.12 with SMTP id t12mr9981389aga.1165346152346;
        Tue, 05 Dec 2006 11:15:52 -0800 (PST)
Received: from etiopia ( [200.152.100.56])
        by mx.google.com with ESMTP id 29sm20530158wrl.2006.12.05.11.15.49;
        Tue, 05 Dec 2006 11:15:51 -0800 (PST)
From: "Alice" <alicelista@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Customized Analyzer
Date: Tue, 5 Dec 2006 17:14:54 -0200
Message-ID: <008101c718a1$a8b628a0$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <Pine.LNX.4.58.0612051106470.31075@hal.rescomp.berkeley.edu>
X-Mimeole: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccYoOk4Lm6OqXMDTYq5J0QSW4wrAQAAHvFw
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, I forgot to include this information:
Doing:
token.setPositionIncrement(0);

It returns
content:"(wind window)"

With:
token.setPositionIncrement(1);

Returns:
content:"wind window"

I really don't get it..

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: ter=E7a-feira, 5 de dezembro de 2006 17:09
To: java-user@lucene.apache.org
Subject: Re: Customized Analyzer


: I search my synonyms set and if I find something I return the token =
like:

: return new Token(synonyms[i], token.startOffset(), token.endOffset(),
: token.type());

: And when it gets do the query I see:
:
: content:"wind window"

When you add your synonym, it's just going into the stream of tokens in
the "next" position .. if you call the Token.setPositionIncrement(0)
method on your new Token before you return it, it will occupy the same
position as the token before it, and QP will make an BooleanQuery out of
those two tokens instead of a PhraseQuery.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 20:11:48 2006
Return-Path: <java-user-return-24866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40810 invoked from network); 5 Dec 2006 20:11:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 20:11:47 -0000
Received: (qmail 8400 invoked by uid 500); 5 Dec 2006 20:11:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8108 invoked by uid 500); 5 Dec 2006 20:11:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8097 invoked by uid 99); 5 Dec 2006 20:11:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 12:11:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.189] (HELO exprod6og54.obsmtp.com) (64.18.1.189)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 05 Dec 2006 12:11:34 -0800
Received: from source ([139.56.4.14]) by exprod6ob54.postini.com ([64.18.5.12]) with SMTP;
	Tue, 05 Dec 2006 12:08:37 PST
Received: from triangulum1.broadvision.com (triangulum1.broadvision.com [10.10.102.100])
	by nebula3.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id kB5JxcL23053
	for <java-user@lucene.apache.org>; Tue, 5 Dec 2006 11:59:38 -0800 (PST)
Received: from rw-gw-01.BroadVision.com (localhost [127.0.0.1])
	by triangulum1.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id MAA12483
	for <java-user@lucene.apache.org>; Tue, 5 Dec 2006 12:09:47 -0800 (PST)
Received: by rw-gw-01.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <MPFSG6X1>; Tue, 5 Dec 2006 12:08:36 -0800
Message-ID: <4F78AB8AF361164AB110D9841D3089810D8CC0@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Lucene search performance: linear?
Date: Tue, 5 Dec 2006 12:07:18 -0800 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="windows-1252"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Soeren,

Thanks very much for explanations, yes, there
is no linear relation when searching a keyword
which is only in a few docs.

Best regards, Lisheng

-----Original Message-----
From: Soeren Pekrul [mailto:soeren.pekrul@gmx.de]
Sent: Tuesday, December 05, 2006 10:37 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene search performance: linear?


Hello Lisheng,

a search process has to do usually two thinks. First it has to find the =

term in the index. I don=92t know the implementation of finding a term =
in=20
Lucene. I hope that the index is at least a sorted list or a binary=20
tree, so it can search binary. The time finding a term depends of the=20
term=92s number n_t. If it searches binary the complexity is =
approximately=20
log(n_t). The search time should be better then linear.

Second it has to collect the documents for a term. This depends of the=20
documents number n_d for a term. It has to go thru the list of =
documents=20
for a term. The time should be proportional to the number of documents=20
for a term even if it doesn=92t calculate the similarity. Usually the=20
number of documents for a single term is less than the total number of=20
documents in the collection and less than the total number of terms in=20
the index.

If the number of documents for a single term is less than the total=20
number of documents the search process for a single term including=20
process one (finding the term) and process two (collecting the =
documents=20
and calculating the score) should be better the linear to the number of =

documents.

> I indexed first 220,000, all with a special keyword, I did a simple
> query and only fetched 5 docs, with Hits.length()=3D220,000.
>=20
> Then I indexed 440,000 docs, with the same keyword, query it
> again and fetched a few docs, with Hits.length(0=3D440,000.

In your case the query term is contained in all documents. The number =
of=20
documents for a single term is equals the total number of documents in=20
your collection. The hit collector has to collect all documents. The=20
collecting process is proportional to the number of documents to=20
collect. So the search for all documents should be at least linear to=20
the total number of documents.

S=F6ren

Zhang, Lisheng schrieb:
> Hi,
>=20
> I indexed first 220,000, all with a special keyword, I did a simple
> query and only fetched 5 docs, with Hits.length()=3D220,000.
>=20
> Then I indexed 440,000 docs, with the same keyword, query it
> again and fetched a few docs, with Hits.length(0=3D440,000.
>=20
> I found that search time is about linear: 2nd time is about 2 times
> longer than 1st query. I would like to understand:
>=20
> Does the linear relation come from score calculation, since we
> have to calculate score one by one? Or other reason?
>=20
> If we have B-tree index I would naively expect a better scalibility?
>=20
> Thanks very much for your helps,=20
>=20
> Lisheng

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 20:34:07 2006
Return-Path: <java-user-return-24867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53550 invoked from network); 5 Dec 2006 20:34:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 20:34:06 -0000
Received: (qmail 55354 invoked by uid 500); 5 Dec 2006 20:34:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55328 invoked by uid 500); 5 Dec 2006 20:34:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55308 invoked by uid 99); 5 Dec 2006 20:34:05 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 12:33:59 -0800
Received: (qmail 14938 invoked from network); 5 Dec 2006 20:32:58 -0000
Received: from unknown (HELO p5496d8a1.dip.t-dialin.net) ([pbs]695637@[84.150.216.161])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 5 Dec 2006 20:32:58 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Customized Analyzer
Date: Tue, 5 Dec 2006 21:34:01 +0100
User-Agent: KMail/1.8.2
References: <008101c718a1$a8b628a0$4900000a@m4u.com.br>
In-Reply-To: <008101c718a1$a8b628a0$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200612052134.01256@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 05 December 2006 20:14, Alice wrote:

> It returns
> content:"(wind window)"

That might be the correct representation of a MultiPhraseQuery. So does 
your query work anyway? It's just that you cannot use QueryParser again to 
parse this output (similar to some other queries like SpanQueries whose 
toString() representation also cannot be parsed again).

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 20:39:59 2006
Return-Path: <java-user-return-24868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54960 invoked from network); 5 Dec 2006 20:39:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 20:39:58 -0000
Received: (qmail 74610 invoked by uid 500); 5 Dec 2006 20:39:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74570 invoked by uid 500); 5 Dec 2006 20:39:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74545 invoked by uid 99); 5 Dec 2006 20:39:57 -0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of alicelista@gmail.com designates 66.249.82.236 as permitted sender)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 12:39:51 -0800
Received: by wx-out-0506.google.com with SMTP id i29so3804402wxd
        for <java-user@lucene.apache.org>; Tue, 05 Dec 2006 12:38:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
        b=DR1RJ2FP82671esil0r80u5cYgIgl97RWePoU7RC46dwOFBrKBxbpWYs9FxBphg1WD3XeWl/Rv50BEBN7AdlRMyFM3x9pwxLbO7c447YhQzeT5YF2msvQ2KRDlMH2L+xP8Q3qs2UjrO3Mo2CadouHM2+MJ3WApH4ihHCdWEvIl8=
Received: by 10.90.113.18 with SMTP id l18mr10096038agc.1165351102424;
        Tue, 05 Dec 2006 12:38:22 -0800 (PST)
Received: from etiopia ( [200.152.100.56])
        by mx.google.com with ESMTP id 15sm9585231wrl.2006.12.05.12.38.20;
        Tue, 05 Dec 2006 12:38:21 -0800 (PST)
From: "Alice" <alicelista@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Customized Analyzer
Date: Tue, 5 Dec 2006 18:37:14 -0200
Message-ID: <008d01c718ad$27ffe8c0$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <200612052134.01256@danielnaber.de>
X-Mimeole: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccYrLQyYI1MYhZzTr2g6NgZCxgjdQAACZkQ
X-Virus-Checked: Checked by ClamAV on apache.org

It does not work.

Even with the synonyms indexed it is not found.

That's why my guess was to remove the "" but I don=92t know how.

-----Original Message-----
From: Daniel Naber [mailto:lucenelist2005@danielnaber.de]=20
Sent: ter=E7a-feira, 5 de dezembro de 2006 18:34
To: java-user@lucene.apache.org
Subject: Re: Customized Analyzer

On Tuesday 05 December 2006 20:14, Alice wrote:

> It returns
> content:"(wind window)"

That might be the correct representation of a MultiPhraseQuery. So does=20
your query work anyway? It's just that you cannot use QueryParser again =
to=20
parse this output (similar to some other queries like SpanQueries whose=20
toString() representation also cannot be parsed again).

Regards
 Daniel

--=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 20:58:13 2006
Return-Path: <java-user-return-24869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60184 invoked from network); 5 Dec 2006 20:58:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 20:58:12 -0000
Received: (qmail 15645 invoked by uid 500); 5 Dec 2006 20:58:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15624 invoked by uid 500); 5 Dec 2006 20:58:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15601 invoked by uid 99); 5 Dec 2006 20:58:10 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 12:58:06 -0800
Received: (qmail 10175 invoked from network); 5 Dec 2006 20:57:21 -0000
Received: from unknown (HELO p5496d8a1.dip.t-dialin.net) ([pbs]695637@[84.150.216.161])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 5 Dec 2006 20:57:21 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Customized Analyzer
Date: Tue, 5 Dec 2006 21:58:24 +0100
User-Agent: KMail/1.8.2
References: <008d01c718ad$27ffe8c0$4900000a@m4u.com.br>
In-Reply-To: <008d01c718ad$27ffe8c0$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200612052158.24802@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 05 December 2006 21:37, Alice wrote:

> It does not work.
>
> Even with the synonyms indexed it is not found.

So if your text contains "wind" it is not found by the query that prints as 
content:"(wind window)"? Then I suggest you post a small test case that 
shows this problem. As Chris said, calling setPositionIncrement(0) is 
important.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 20:58:23 2006
Return-Path: <java-user-return-24870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60246 invoked from network); 5 Dec 2006 20:58:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 20:58:22 -0000
Received: (qmail 15987 invoked by uid 500); 5 Dec 2006 20:58:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15929 invoked by uid 500); 5 Dec 2006 20:58:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15904 invoked by uid 99); 5 Dec 2006 20:58:12 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of chris.lu@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 12:58:07 -0800
Received: by ug-out-1314.google.com with SMTP id k40so3830270ugc
        for <java-user@lucene.apache.org>; Tue, 05 Dec 2006 12:56:37 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=JMj/4c3fDj3E8/MJj7KSzVw+11u6F4ufAGIyEL0gnflCtSX3dzgvZxBYdVMXDPvzqXIsiBeBq3qPXyamRU7MTO1vJ9VwUx5DSgKiy+IZLniW9NneN5Y0YKWhx1XeaG0QYkIJxTDYN1ETqrx047+WhALw23IEDBB6SHePKuh1TPU=
Received: by 10.82.135.13 with SMTP id i13mr1821765bud.1165352196450;
        Tue, 05 Dec 2006 12:56:36 -0800 (PST)
Received: by 10.82.150.8 with HTTP; Tue, 5 Dec 2006 12:56:36 -0800 (PST)
Message-ID: <6e3ae6310612051256y6e580d1eu5faea71b5b15d62d@mail.gmail.com>
Date: Tue, 5 Dec 2006 12:56:36 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene on SQL 2005
In-Reply-To: <7693786.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <7693786.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Sounds a very simple and typical use case for a product catalog
search. You are welcome to try DBSight, which is a J2EE web server
that has UI and wizards for you to select data, configure search, and
can run as a production-level search server.

-- 
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com


On 12/4/06, Saroj K M <saroja.kanta.maharana@gmail.com> wrote:
>
> Dear  ..,
>
> I am a new user to Lucene. I am having a requirement as follows.
>
> I am using SQL Server 2005 database,
>
> The Database having a Table named
>  ---  Product and its columns are
>
> 1 Prod_id
> 2  Prod_name
> 3  Prod_desc
> 4. Prod_Price
>
> I need to index the table and search.
>
> I should be Passed from an Jsp Page/Comment Prompt.
>
> If the input is like this, Providing a valid Prod_id or valid prod_desc
> then, I need entire row of related Prod_id from the indexed file.
>
> Please guide me in Indexing the table and to search. I am not getting any
> idea. please help me in this regards with your suitable comments.
>
> Thanks
> Saroj.
>
> --
> View this message in context: http://www.nabble.com/Lucene-on-SQL-2005-tf2759494.html#a7693786
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 21:03:44 2006
Return-Path: <java-user-return-24871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61375 invoked from network); 5 Dec 2006 21:03:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 21:03:43 -0000
Received: (qmail 24692 invoked by uid 500); 5 Dec 2006 21:03:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24573 invoked by uid 500); 5 Dec 2006 21:03:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24548 invoked by uid 99); 5 Dec 2006 21:03:44 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:03:36 -0800
Received: (qmail 12418 invoked from network); 5 Dec 2006 21:02:47 -0000
Received: from unknown (HELO p5496d8a1.dip.t-dialin.net) ([pbs]695637@[84.150.216.161])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 5 Dec 2006 21:02:47 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: too many parentheses confuse Lucene
Date: Tue, 5 Dec 2006 22:03:51 +0100
User-Agent: KMail/1.8.2
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Message-Id: <200612052203.51316@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

a query like=20
(-merkel) AND schr=C3=B6der=20

is parsed as
+(-body:merkel) +body:schr=C3=B6der

I get no hits for this query because +(-body:merkel) doesn't return any=20
hits (it's not a valid query for Lucene). However, a query like

=2Dmerkel AND schr=C3=B6der=20

works fine. From the user's point-of-view, both queries should return the=20
same result set. One solution I see is to add a MatchAllDocsQuery clause=20
to all prohibited clauses in QueryParser's getBooleanQuery() method. Is=20
that a valid solution? I tried with some simple cases and it seems to=20
work. Any other ideas to solve or work around this issue?

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 21:09:18 2006
Return-Path: <java-user-return-24872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62739 invoked from network); 5 Dec 2006 21:09:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 21:09:17 -0000
Received: (qmail 32806 invoked by uid 500); 5 Dec 2006 21:09:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32774 invoked by uid 500); 5 Dec 2006 21:09:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32763 invoked by uid 99); 5 Dec 2006 21:09:18 -0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of markrmiller@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:09:15 -0800
Received: by py-out-1112.google.com with SMTP id a25so2422616pyi
        for <java-user@lucene.apache.org>; Tue, 05 Dec 2006 13:07:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Xouymq+ZxulvkaUqDMMkRw6Pf8T9P1prsrskA9HNvYbayIr4/BugyZdZqYkC7aX5tlujTm/uqN3ActQV7U5rL3972sbySKamUIpl+2hEymezKeBhlvmRVtznveMwVyVleJH6hDqqIJqROx9K1sj5xHSqUHAB4CzIhYyJpft5O2Q=
Received: by 10.35.43.10 with SMTP id v10mr1344891pyj.1165352866049;
        Tue, 05 Dec 2006 13:07:46 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id r15sm22779263nza.2006.12.05.13.07.44;
        Tue, 05 Dec 2006 13:07:45 -0800 (PST)
Message-ID: <4575DFA1.6050502@gmail.com>
Date: Tue, 05 Dec 2006 16:07:45 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Customized Analyzer
References: <008d01c718ad$27ffe8c0$4900000a@m4u.com.br>
In-Reply-To: <008d01c718ad$27ffe8c0$4900000a@m4u.com.br>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Just took a quick peak at the MultiPhraseQuery toString() and it does 
indeed wrap the query in quotes (it also puts in the parenthesis). You 
are generating a MultiPhraseQuery. Is that not your intent?. The 
QueryParser will generate a MultiPhraseQuery when more than one token 
with different positions are emmited from the analyzer and at least one 
of the positions has multiple tokens associated with it. I believe this 
should be a pretty common phenomenon with a synonym analyzer.

I would look into your Analyzer...my guess is that it has not been 
perfected. You are indexing and searching with the same analyzer, correct?

- Mark Miller

Alice wrote:
> It does not work.
>
> Even with the synonyms indexed it is not found.
>
> That's why my guess was to remove the "" but I don’t know how.
>
> -----Original Message-----
> From: Daniel Naber [mailto:lucenelist2005@danielnaber.de] 
> Sent: terça-feira, 5 de dezembro de 2006 18:34
> To: java-user@lucene.apache.org
> Subject: Re: Customized Analyzer
>
> On Tuesday 05 December 2006 20:14, Alice wrote:
>
>   
>> It returns
>> content:"(wind window)"
>>     
>
> That might be the correct representation of a MultiPhraseQuery. So does 
> your query work anyway? It's just that you cannot use QueryParser again to 
> parse this output (similar to some other queries like SpanQueries whose 
> toString() representation also cannot be parsed again).
>
> Regards
>  Daniel
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 21:11:05 2006
Return-Path: <java-user-return-24873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63228 invoked from network); 5 Dec 2006 21:11:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 21:11:04 -0000
Received: (qmail 35996 invoked by uid 500); 5 Dec 2006 21:11:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35640 invoked by uid 500); 5 Dec 2006 21:11:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35629 invoked by uid 99); 5 Dec 2006 21:11:05 -0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of alicelista@gmail.com designates 66.249.82.227 as permitted sender)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:11:01 -0800
Received: by wx-out-0506.google.com with SMTP id i29so3811399wxd
        for <java-user@lucene.apache.org>; Tue, 05 Dec 2006 13:09:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
        b=EzO7CCdh6SIFGGTMvAP78NCHaf8yH2FPPL9LV4zSD9FstXXGj1quBHMkqWrO2IK0n5ZfXGnvUVXGIWaylby95GAFjH+4/PUj96Jp8Q8IohSVgoaXss6RSHKfy78mT65S3JcYGG2mLRAv7WbPpuYdg0qFjHyU3QeA52XGjGFOARE=
Received: by 10.90.81.14 with SMTP id e14mr10066342agb.1165352971882;
        Tue, 05 Dec 2006 13:09:31 -0800 (PST)
Received: from etiopia ( [200.152.100.56])
        by mx.google.com with ESMTP id 39sm21106969wrl.2006.12.05.13.09.28;
        Tue, 05 Dec 2006 13:09:30 -0800 (PST)
From: "Alice" <alicelista@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Customized Analyzer
Date: Tue, 5 Dec 2006 19:08:18 -0200
Message-ID: <009101c718b1$7f2ca9e0$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <200612052158.24802@danielnaber.de>
X-Mimeole: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccYsBF8YYWeE+C1SuipyJonyMzuYAAANzQw
X-Virus-Checked: Checked by ClamAV on apache.org

Ok,

This is the method that adds the aliases, it is located in my =
SynonymFilter:

private void addAliasesToStack(Token token)
{
        String[] synonyms =3D engine.getSynonyms("contents",
token.termText());
       =20
        if (synonyms =3D=3D null)
        {
            return;
        }
       =20
        for (int i =3D 0; i < synonyms.length; i++)
        {
            Token synToken =3D new Token(synonyms[i], =
token.startOffset(),
token.endOffset(), token.type());
            synToken.setPositionIncrement(0);
           =20
            modelSynonymStack.push(synToken);
        }
    }


And at the Search class, the query is done like that:
Query query =3D new QueryParser("contents", new
SynonymAnalyzer()).parse(keyword);

And the return is: contents:"(wind window)"
And no hit...


-----Original Message-----
From: Daniel Naber [mailto:lucenelist2005@danielnaber.de]=20
Sent: ter=E7a-feira, 5 de dezembro de 2006 18:58
To: java-user@lucene.apache.org
Subject: Re: Customized Analyzer

On Tuesday 05 December 2006 21:37, Alice wrote:

> It does not work.
>
> Even with the synonyms indexed it is not found.

So if your text contains "wind" it is not found by the query that prints =
as=20
content:"(wind window)"? Then I suggest you post a small test case that=20
shows this problem. As Chris said, calling setPositionIncrement(0) is=20
important.

Regards
 Daniel

--=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 21:17:11 2006
Return-Path: <java-user-return-24874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64967 invoked from network); 5 Dec 2006 21:17:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 21:17:10 -0000
Received: (qmail 44298 invoked by uid 500); 5 Dec 2006 21:17:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44274 invoked by uid 500); 5 Dec 2006 21:17:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44263 invoked by uid 99); 5 Dec 2006 21:17:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:17:12 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alicelista@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:16:59 -0800
Received: by wx-out-0506.google.com with SMTP id i29so3812926wxd
        for <java-user@lucene.apache.org>; Tue, 05 Dec 2006 13:16:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
        b=k07AyFfoPNNI3DsFSDXP7p2eSg/xsKIe3gfG27zvd5FpYaEts8P2ux3tg22mYGbLJjxxc1PDktSjDmIVe72IyFYu8h4ysXwrjGBtfynlmesHQJnL65bYRl/1b1r5QZfG5B2zAkqmF+c6W8zlevwZJdS25cm9KsJW7A+DZXuRTx8=
Received: by 10.70.42.16 with SMTP id p16mr18220229wxp.1165353398284;
        Tue, 05 Dec 2006 13:16:38 -0800 (PST)
Received: from etiopia ( [200.152.100.56])
        by mx.google.com with ESMTP id 39sm21122444wrl.2006.12.05.13.16.36;
        Tue, 05 Dec 2006 13:16:37 -0800 (PST)
From: "Alice" <alicelista@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Customized Analyzer
Date: Tue, 5 Dec 2006 19:15:26 -0200
Message-ID: <009901c718b2$7d0a97c0$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <4575DFA1.6050502@gmail.com>
X-Mimeole: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccYsaDVZQC8I/GaTmKpE1XZb1V3PAAAEsxA
X-Virus-Checked: Checked by ClamAV on apache.org

No.. I am not indexing and searching with the same analyzer.

The reason I do this is because I want to index exactly the contents I =
have
in my database.

This is used to find some products the company sells, and the users =
don=92t
write their names correctly, so if they type something that is contained =
in
any producted I assume that keyword as a synonym.

Like: keyword.indexOf(myProduct) !=3D -1 --> it=92s a synonym.

So, when I search I use the SynonymAnalyzer.

But my intention as the analyzer returns by example the tokens 'wind' =
and
'window' was to have a query that would do:
Contents:wind contents:window



-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com]=20
Sent: ter=E7a-feira, 5 de dezembro de 2006 19:08
To: java-user@lucene.apache.org
Subject: Re: Customized Analyzer

Just took a quick peak at the MultiPhraseQuery toString() and it does=20
indeed wrap the query in quotes (it also puts in the parenthesis). You=20
are generating a MultiPhraseQuery. Is that not your intent?. The=20
QueryParser will generate a MultiPhraseQuery when more than one token=20
with different positions are emmited from the analyzer and at least one=20
of the positions has multiple tokens associated with it. I believe this=20
should be a pretty common phenomenon with a synonym analyzer.

I would look into your Analyzer...my guess is that it has not been=20
perfected. You are indexing and searching with the same analyzer, =
correct?

- Mark Miller

Alice wrote:
> It does not work.
>
> Even with the synonyms indexed it is not found.
>
> That's why my guess was to remove the "" but I don=92t know how.
>
> -----Original Message-----
> From: Daniel Naber [mailto:lucenelist2005@danielnaber.de]=20
> Sent: ter=E7a-feira, 5 de dezembro de 2006 18:34
> To: java-user@lucene.apache.org
> Subject: Re: Customized Analyzer
>
> On Tuesday 05 December 2006 20:14, Alice wrote:
>
>  =20
>> It returns
>> content:"(wind window)"
>>    =20
>
> That might be the correct representation of a MultiPhraseQuery. So =
does=20
> your query work anyway? It's just that you cannot use QueryParser =
again to

> parse this output (similar to some other queries like SpanQueries =
whose=20
> toString() representation also cannot be parsed again).
>
> Regards
>  Daniel
>
>  =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 21:58:13 2006
Return-Path: <java-user-return-24875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77602 invoked from network); 5 Dec 2006 21:58:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 21:58:12 -0000
Received: (qmail 25327 invoked by uid 500); 5 Dec 2006 21:58:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25303 invoked by uid 500); 5 Dec 2006 21:58:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25292 invoked by uid 99); 5 Dec 2006 21:58:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:58:14 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 13:58:02 -0800
Received: by py-out-1112.google.com with SMTP id a25so2428616pyi
        for <java-user@lucene.apache.org>; Tue, 05 Dec 2006 13:57:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=fXdpJpaC3Twn2VLttSGHRiw+87XyRGD0XzxyefWdeDkCxLO5pkd7sXKEi4HbMCpB8iNzdH8k8eJ+W9KdHSYjNKNfU0fL6eFHlbe/CZD0+HXfhRQckoiMfalb0Gy5d4r24G0xxuT9lOJA3YCxLOtxlaAFzT5ovMpOLvsK/GWkk8s=
Received: by 10.35.62.1 with SMTP id p1mr18533873pyk.1165355861372;
        Tue, 05 Dec 2006 13:57:41 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id e1sm22821723nzd.2006.12.05.13.57.39;
        Tue, 05 Dec 2006 13:57:40 -0800 (PST)
Message-ID: <4575EB54.2070203@gmail.com>
Date: Tue, 05 Dec 2006 16:57:40 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Customized Analyzer
References: <009901c718b2$7d0a97c0$4900000a@m4u.com.br>
In-Reply-To: <009901c718b2$7d0a97c0$4900000a@m4u.com.br>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ignore my comment about using the same analyzer. My addled mind at fault.

You are getting the correct query as far as QueryParser is concerned. 
"(wind window)" should match on both wind and window. You will only get 
a boolean query back if the total position difference in the tokens is 
1. In your example case the total positional difference is 0...thus the 
MultiPhraseQuery. It seems odd, but to get the boolean should back you 
need to have multiple tokens at the same position and a total 
poistionIncrement of 1. Say "wind man" which would give wind:position0 
window:position0 man:position1 ... now you have multiple tokens at the 
same position and a total positional increment of 1...you'll get all 3 
tokens back in a SHOULD boolean. Frankly this seems odd to me. Maybe I 
am off base. Either way...QueryParser is giving you the query that you 
should expect from it.

Mark Miller

Alice wrote:
> No.. I am not indexing and searching with the same analyzer.
>
> The reason I do this is because I want to index exactly the contents I have
> in my database.
>
> This is used to find some products the company sells, and the users don’t
> write their names correctly, so if they type something that is contained in
> any producted I assume that keyword as a synonym.
>
> Like: keyword.indexOf(myProduct) != -1 --> it’s a synonym.
>
> So, when I search I use the SynonymAnalyzer.
>
> But my intention as the analyzer returns by example the tokens 'wind' and
> 'window' was to have a query that would do:
> Contents:wind contents:window
>
>
>
> -----Original Message-----
> From: Mark Miller [mailto:markrmiller@gmail.com] 
> Sent: terça-feira, 5 de dezembro de 2006 19:08
> To: java-user@lucene.apache.org
> Subject: Re: Customized Analyzer
>
> Just took a quick peak at the MultiPhraseQuery toString() and it does 
> indeed wrap the query in quotes (it also puts in the parenthesis). You 
> are generating a MultiPhraseQuery. Is that not your intent?. The 
> QueryParser will generate a MultiPhraseQuery when more than one token 
> with different positions are emmited from the analyzer and at least one 
> of the positions has multiple tokens associated with it. I believe this 
> should be a pretty common phenomenon with a synonym analyzer.
>
> I would look into your Analyzer...my guess is that it has not been 
> perfected. You are indexing and searching with the same analyzer, correct?
>
> - Mark Miller
>
> Alice wrote:
>   
>> It does not work.
>>
>> Even with the synonyms indexed it is not found.
>>
>> That's why my guess was to remove the "" but I don’t know how.
>>
>> -----Original Message-----
>> From: Daniel Naber [mailto:lucenelist2005@danielnaber.de] 
>> Sent: terça-feira, 5 de dezembro de 2006 18:34
>> To: java-user@lucene.apache.org
>> Subject: Re: Customized Analyzer
>>
>> On Tuesday 05 December 2006 20:14, Alice wrote:
>>
>>   
>>     
>>> It returns
>>> content:"(wind window)"
>>>     
>>>       
>> That might be the correct representation of a MultiPhraseQuery. So does 
>> your query work anyway? It's just that you cannot use QueryParser again to
>>     
>
>   
>> parse this output (similar to some other queries like SpanQueries whose 
>> toString() representation also cannot be parsed again).
>>
>> Regards
>>  Daniel
>>
>>   
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 22:42:46 2006
Return-Path: <java-user-return-24876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90767 invoked from network); 5 Dec 2006 22:42:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 22:42:46 -0000
Received: (qmail 21060 invoked by uid 500); 5 Dec 2006 22:42:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21027 invoked by uid 500); 5 Dec 2006 22:42:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21015 invoked by uid 99); 5 Dec 2006 22:42:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 14:42:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 14:42:35 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6FC495B777; Tue,  5 Dec 2006 14:42:15 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 638977F403
	for <java-user@lucene.apache.org>; Tue,  5 Dec 2006 14:42:15 -0800 (PST)
Date: Tue, 5 Dec 2006 14:42:15 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: too many parentheses confuse Lucene
In-Reply-To: <200612052203.51316@danielnaber.de>
Message-ID: <Pine.LNX.4.58.0612051433030.9954@hal.rescomp.berkeley.edu>
References: <200612052203.51316@danielnaber.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: works fine. From the user's point-of-view, both queries should return the
: same result set. One solution I see is to add a MatchAllDocsQuery clause
: to all prohibited clauses in QueryParser's getBooleanQuery() method. Is
: that a valid solution? I tried with some simple cases and it seems to
: work. Any other ideas to solve or work around this issue?

if i understand your implimentation suggestion correctly, that will cause
some very unexpected results when people pass "(a -b) c" to
QueryParser.parse .... but as far as the general idea you are proposing,
i'm very leary of leting QueryParser make any asusmptions about what a
user means when they specify a query ... I've acctually got some code in
production that users QueryParser to parse query fragments fro ma config
file, which are then combined with other Queries ... if QueryParser all of
the sudden decided that...
	(-apple -orange)
...should be parsed the same as...
	(*:* -apple -orange)
...now my code that combines the Query i get from QueryParser with other
Queryies from other parts of my code base will unexpected match all
documents.

Once upon a time the notion that QueryParser should throw an
ParseException when it detected a query that was syntacticly valid but
structurally unusable was discussed ... and ultimately rejected for the
same reason: QueryParser should make any assumptions about how the Queries
it parses are going to be used.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 05 22:54:31 2006
Return-Path: <java-user-return-24877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93386 invoked from network); 5 Dec 2006 22:54:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2006 22:54:30 -0000
Received: (qmail 34771 invoked by uid 500); 5 Dec 2006 22:54:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34726 invoked by uid 500); 5 Dec 2006 22:54:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34708 invoked by uid 99); 5 Dec 2006 22:54:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 14:54:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 14:54:21 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C16025B770; Tue,  5 Dec 2006 14:54:00 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BE2457F403
	for <java-user@lucene.apache.org>; Tue,  5 Dec 2006 14:54:00 -0800 (PST)
Date: Tue, 5 Dec 2006 14:54:00 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: RE: Customized Analyzer
In-Reply-To: <009101c718b1$7f2ca9e0$4900000a@m4u.com.br>
Message-ID: <Pine.LNX.4.58.0612051449120.9954@hal.rescomp.berkeley.edu>
References: <009101c718b1$7f2ca9e0$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


As stated before, a *self contained* test case would help people diagnose
your problem ... just cutting and pasting a few snippets of your code is
not enough for people to reproduce your problem.


: And the return is: contents:"(wind window)"

a MultiPhraseQuery that looks like that should be functionally equivilent
to a BooleanQuery .. as a matter of fact, it will rewrite to a
BooleanQuery ... does a straight search on either "wind" or "window"
return any results for you?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 06 01:22:30 2006
Return-Path: <java-user-return-24878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30459 invoked from network); 6 Dec 2006 01:22:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 01:22:29 -0000
Received: (qmail 6481 invoked by uid 500); 6 Dec 2006 01:22:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6230 invoked by uid 500); 6 Dec 2006 01:22:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6219 invoked by uid 99); 6 Dec 2006 01:22:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 17:22:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.162.235 as permitted sender)
Received: from [64.233.162.235] (HELO nz-out-0102.google.com) (64.233.162.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Dec 2006 17:22:18 -0800
Received: by nz-out-0102.google.com with SMTP id i1so32604nzh
        for <java-user@lucene.apache.org>; Tue, 05 Dec 2006 17:21:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=oyUkF0ehJnlS7vPcMUbOD4Q9vYdZ4Ew3aSgAcFDAmQtMunML0So7+gGd7i9zClkR7fr5+LdM9eQoCethayy3k9bUQne20Q/8L1FU2q3vJKxpGUn6lYlRXeBdx9X3yjCV9B3KJUu0TEiMweaO8FVn1QKRjr3ezTOElJ/aGxmxPMI=
Received: by 10.35.96.7 with SMTP id y7mr313709pyl.1165368117553;
        Tue, 05 Dec 2006 17:21:57 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id 38sm23012478nzf.2006.12.05.17.21.55;
        Tue, 05 Dec 2006 17:21:56 -0800 (PST)
Message-ID: <45761B35.1060900@gmail.com>
Date: Tue, 05 Dec 2006 20:21:57 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: New Lucene QueryParser
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have finally delved back into the Lucene Query parser that I started a 
few months back. I am very closing to wrapping up it's initial 
development. I am currently looking for anybody willing to help me out 
with a little testing and maybe some design consultation (I am not happy 
with the current range query  syntax for one). If you have any 
interested  in using this parser and have a little time to help out, 
please do. The parser is extremely customizable and you can basically 
mold it into whatever you want. A brief outline of the feature set:

The basics from Lucene query parser are covered: escaping operators, 
handling tokens at the same position, range queries, etc.

Default Operators are: & | ! ~ ( )
New operators can be defined and default operators can be hidden on the fly.

Adds a proximity operator to the standard AND, OR, and ANDNOT operators 
allowing for queries like:
(search bear) ~5 (snake & horse ~4 pope) | crazy query

The default space operator is customizable and can be made to bind 
tighter than if you use the actual operator (the operator acts like the 
actual operator but within parenthesis).

The order of operations for the operators is customizable. The default 
order is |, &, ~, !, ( )...you can change it to whatever you want.

Query-time thesaurus expansion / General token to query expansion : 
Takes advantage of a general find/replace feature, "expand" might map to 
"(expander | expanded)" ... or any other valid syntax. There is also a 
slower RegEx feature so that you can match tokens with a Pattern and 
perform back reference enabled replacements. You can also make the 
replacement behave as an operator...you might map NEAR to ~10 , creating 
a new operator that performs within 10 word proximity searches.

Did You Mean feature using the SpellCheck contrib: if you search for 
'date(Aug 3, 1952) & mackine | rabbit' you might get a suggestion of : 
'date(Aug 3, 1952) & machine | rabbit'

Paragraph/Sentence proximity search functionality. You can inject tokens 
to specify paragraph and sentence markers and perform SpanNotWithin 
searches for paragraph sentence proximity searches.

Customizable date parser.

Everything is pretty much configurable on the fly.

Note that there may be some limitations...but so far this has proved to 
be pretty powerful. I could sure use some testing help making it 
production ready though. I will be putting a new website up for the 
parser soon. Please send me a note if you can help out at all. When I 
put up the jar you can just run it with Java -jar and it will provide a 
console input to enter queries and see the Lucene Query generated.

- Mark Miller





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 06 11:11:39 2006
Return-Path: <java-user-return-24879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86524 invoked from network); 6 Dec 2006 11:11:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 11:11:37 -0000
Received: (qmail 56156 invoked by uid 500); 6 Dec 2006 11:11:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56128 invoked by uid 500); 6 Dec 2006 11:11:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56089 invoked by uid 99); 6 Dec 2006 11:11:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 03:11:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alicelista@gmail.com designates 64.233.184.232 as permitted sender)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 03:11:24 -0800
Received: by wr-out-0506.google.com with SMTP id i21so93458wra
        for <java-user@lucene.apache.org>; Wed, 06 Dec 2006 03:11:04 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:in-reply-to:thread-index:x-mimeole;
        b=CL9iQH4pvZPE7U4iNWd4n7LYJOSMngMGhnhiLyqwFstkTCLfJ1DbNAYdn7CgbA8nLUUDC15LKfyPiZT9V3TSZaW3NoRkeP/4C4Aypt8rn9yj6v/sQdanjzuHuzwM6nthCcbyyhkWMHV/xVGVihFekjWlHsqjj92m5AcV/fKcrfs=
Received: by 10.90.86.10 with SMTP id j10mr632561agb.1165403463866;
        Wed, 06 Dec 2006 03:11:03 -0800 (PST)
Received: from etiopia ( [200.152.100.56])
        by mx.google.com with ESMTP id g9sm3191868wra.2006.12.06.03.11.02;
        Wed, 06 Dec 2006 03:11:03 -0800 (PST)
From: "Alice" <alicelista@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Customized Analyzer
Date: Wed, 6 Dec 2006 09:10:59 -0200
Message-ID: <000601c71927$37ed3560$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <Pine.LNX.4.58.0612051449120.9954@hal.rescomp.berkeley.edu>
Thread-Index: AccYwFOt85v9R7r/SaeMZrVlnoxVpQAZlg0A
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org

I'm sorry, I'm not sure about what you're asking me to post, anyway here =
is
my junit test:


protected void setUp() throws Exception
    {
        super.setUp();
       =20
        access =3D ServiceLocator.getAccess();
    }

public void testSearch() throws Exception
    {
        String keyword =3D "wind";
       =20
        Collection<ProductDTO> products =3D
access.getProductsByKeyword(keyword);
       =20
        System.out.println(products.size() + " products found:");
        for(ProductDTO product : products)
        {
            System.out.println(product.getName() + " " +
product.getModel());
        }
    }



-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: ter=E7a-feira, 5 de dezembro de 2006 20:54
To: Lucene Users
Subject: RE: Customized Analyzer


As stated before, a *self contained* test case would help people =
diagnose
your problem ... just cutting and pasting a few snippets of your code is
not enough for people to reproduce your problem.


: And the return is: contents:"(wind window)"

a MultiPhraseQuery that looks like that should be functionally =
equivilent
to a BooleanQuery .. as a matter of fact, it will rewrite to a
BooleanQuery ... does a straight search on either "wind" or "window"
return any results for you?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 06 11:47:13 2006
Return-Path: <java-user-return-24880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99806 invoked from network); 6 Dec 2006 11:47:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 11:47:11 -0000
Received: (qmail 19330 invoked by uid 500); 6 Dec 2006 11:47:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19294 invoked by uid 500); 6 Dec 2006 11:47:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19282 invoked by uid 99); 6 Dec 2006 11:47:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 03:47:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of supriya.shyamal@artnology.com designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 03:47:02 -0800
Received: (qmail 11830 invoked from network); 6 Dec 2006 11:46:37 -0000
Received: from unknown (HELO [192.168.100.19]) ([pbs]085772@[195.143.217.178])
          (envelope-sender <supriya.shyamal@artnology.com>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 6 Dec 2006 11:46:37 -0000
Message-ID: <4576AD9E.5060409@artnology.com>
Date: Wed, 06 Dec 2006 12:46:38 +0100
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Search for null value or empty string in lucene
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have some question regarding the search. In a document we can have 
several fields but not all fields have the value in all documents i.e. 
some fields in a document can have null or empty string. But how to 
search for a null field value in a document using the IndexSearcher? Any 
idea will be very greaful. Since I have index with 2 million documents 
adn Ic an't see thorgh all documents usign Luke.

Thanks,
supriya

-- 
Mit freundlichen Grüßen / Regards
 
Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
__________________________________________________________________________

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   Softwarelösung für die Verwaltung der Sammlung zeitgenössischer
   Kunstwerke zur kulturellen Repräsentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site für Springer: www.springeronline.com
 * E-Detailing-Portal für Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform für Biogen: www.ms-life.de
 * eCRM-System für Grünenthal: www.gruenenthal.com

___________________________________________________________________________ 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 06 12:07:34 2006
Return-Path: <java-user-return-24881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6598 invoked from network); 6 Dec 2006 12:07:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 12:07:33 -0000
Received: (qmail 48270 invoked by uid 500); 6 Dec 2006 12:07:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48229 invoked by uid 500); 6 Dec 2006 12:07:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48204 invoked by uid 99); 6 Dec 2006 12:07:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 04:07:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 04:07:23 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GrvYF-0006uS-0P
	for java-user@lucene.apache.org; Wed, 06 Dec 2006 04:07:03 -0800
Message-ID: <7718089.post@talk.nabble.com>
Date: Wed, 6 Dec 2006 04:07:02 -0800 (PST)
From: Aaron Shaw <aaronshaw@onetel.com>
To: java-user@lucene.apache.org
Subject: Snowball Analyzer
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: aaronshaw@onetel.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I've got the snowball analyzer working and it returns my records, however
stemming doesn't seem to really do much. It returns plurals (so if i enter
"monkey" as my search term and the word "monkeys" is in the document, it
will be returned) but nothing more than that. Is that the extent of the
stemming it does or is there more, and if so how do I get that working?

Thanks,

Aaron
-- 
View this message in context: http://www.nabble.com/Snowball-Analyzer-tf2767639.html#a7718089
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 06 12:39:26 2006
Return-Path: <java-user-return-24882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19306 invoked from network); 6 Dec 2006 12:39:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 12:39:25 -0000
Received: (qmail 2821 invoked by uid 500); 6 Dec 2006 12:39:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2595 invoked by uid 500); 6 Dec 2006 12:39:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2574 invoked by uid 99); 6 Dec 2006 12:39:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 04:39:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alicelista@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 04:39:13 -0800
Received: by wr-out-0506.google.com with SMTP id i21so107870wra
        for <java-user@lucene.apache.org>; Wed, 06 Dec 2006 04:38:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:in-reply-to:thread-index:x-mimeole;
        b=bE6mpE3JCablixrhRZoZxhEurvt5EOvv18paadSOH9h+TwxPrs+0IDAvxBlD/5uVN6cHFBZ30C/6pWX6zzLHQe3lkJFIHq1PvfdXiIkmFzhl28vUKv7jUAxYjQEGYwunkJvD4H1kF1aeD4TX12pfigUzVvb0LkF/zT/RJK7/v2Q=
Received: by 10.100.152.9 with SMTP id z9mr251093and.1165408732456;
        Wed, 06 Dec 2006 04:38:52 -0800 (PST)
Received: from etiopia ( [200.152.100.56])
        by mx.google.com with ESMTP id 26sm262735wrl.2006.12.06.04.38.50;
        Wed, 06 Dec 2006 04:38:51 -0800 (PST)
From: "Alice" <alicelista@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Customized Analyzer
Date: Wed, 6 Dec 2006 10:38:48 -0200
Message-ID: <000a01c71933$7b91aec0$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <Pine.LNX.4.58.0612051449120.9954@hal.rescomp.berkeley.edu>
Thread-Index: AccYwFOt85v9R7r/SaeMZrVlnoxVpQAcr5Pw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org

Going through the javadocs, that=92s wath I found out:

About the positionIncrement of Token.class:
" Set it (positionIncrement) to zero to put multiple terms in the same
position. =20
This is useful if, e.g., a word has multiple stems.  Searches for =
phrases
including either stem will match.  In this case, all but the first =
stem's
increment should be set to zero: the increment of the first instance
should be one.  Repeating a token with an increment of zero can also be
used to boost the scores of matches on that token."

So that=92s what I did...
And now it is returning a BooleanQuery as I expected:
contents:wind contents:window

But still no hits...

Any clue?


-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: ter=E7a-feira, 5 de dezembro de 2006 20:54
To: Lucene Users
Subject: RE: Customized Analyzer


As stated before, a *self contained* test case would help people =
diagnose
your problem ... just cutting and pasting a few snippets of your code is
not enough for people to reproduce your problem.


: And the return is: contents:"(wind window)"

a MultiPhraseQuery that looks like that should be functionally =
equivilent
to a BooleanQuery .. as a matter of fact, it will rewrite to a
BooleanQuery ... does a straight search on either "wind" or "window"
return any results for you?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 06 13:27:16 2006
Return-Path: <java-user-return-24883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32437 invoked from network); 6 Dec 2006 13:27:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 13:27:15 -0000
Received: (qmail 86506 invoked by uid 500); 6 Dec 2006 13:27:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86467 invoked by uid 500); 6 Dec 2006 13:27:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86456 invoked by uid 99); 6 Dec 2006 13:27:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 05:27:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 05:27:03 -0800
Received: by ug-out-1314.google.com with SMTP id k40so142530ugc
        for <java-user@lucene.apache.org>; Wed, 06 Dec 2006 05:26:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rAn9B3nxQHNcQXGXQjzoWruo3F3/XwlfAxccnuSfRQHghHFkQmAu0ZExIkoA1cVN63Y7vLhsEUYjSk+1Xp0hAwLQJwvzrWLArB4m98d5SO4tdjdtWtQdX8yAwtTjzC6wkVWL/Y2UZfxySc6l4tbJxeRhI7XoexxDCNbl4mvhsBw=
Received: by 10.82.126.5 with SMTP id y5mr121002buc.1165411601062;
        Wed, 06 Dec 2006 05:26:41 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Wed, 6 Dec 2006 05:26:40 -0800 (PST)
Message-ID: <359a92830612060526l9bce69dh365a3d78e4ee40a0@mail.gmail.com>
Date: Wed, 6 Dec 2006 08:26:40 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search for null value or empty string in lucene
In-Reply-To: <4576AD9E.5060409@artnology.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36759_21768687.1165411600728"
References: <4576AD9E.5060409@artnology.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36759_21768687.1165411600728
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Perhaps the most straight-forward way would be to index a known unique valu=
e
for each document that would have had a null entry. Conceptually, when a
field would be null, index the value "nothinghere". Then you can just searc=
h
on documents where the value is equal to "nothinghere".

Alternatively, you could create a filter using TermEnum/TermDocs for each
document that had an entry in the field in question and then invert it to
get your real filter. The trick here is to build your term something like
new Term("field", ""); which enumerates all the terms in a field. Since a
filter is just a bitset, there are operations for inverting it. You can eve=
n
store these filters somewhere and reuse them (note, they will have to be
re-built when you change your index). For 2 million documents, they would b=
e
quite small, somewhere around 250K bytes. Building these filters is quite
fast, so the first thing I would try is building them dynamically. If you
use a CachingWrapperFilter, they will be cached automatically for the
duration of your program.


But I'd go with the simple way first, that of indexing a unique value for
the null fields and searching on that....

Best
Erick

On 12/6/06, Supriya Kumar Shyamal <supriya.shyamal@artnology.com> wrote:
>
> Hi,
>
> I have some question regarding the search. In a document we can have
> several fields but not all fields have the value in all documents i.e.
> some fields in a document can have null or empty string. But how to
> search for a null field value in a document using the IndexSearcher? Any
> idea will be very greaful. Since I have index with 2 million documents
> adn Ic an't see thorgh all documents usign Luke.
>
> Thanks,
> supriya
>
> --
> Mit freundlichen Gr=FC=DFen / Regards
>
> Supriya Kumar Shyamal
>
> Software Developer
> tel +49 (30) 443 50 99 -22
> fax +49 (30) 443 50 99 -99
> email supriya.shyamal@artnology.com
> ___________________________
> artnology GmbH
> Milastr. 4
> 10437 Berlin
> ___________________________
>
> http://www.artnology.com
> _________________________________________________________________________=
_
>
> News / Aktuelle Projekte:
> * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
>    Softwarel=F6sung f=FCr die Verwaltung der Sammlung zeitgen=F6ssischer
>    Kunstwerke zur kulturellen Repr=E4sentation des Bundes.
>
> Projektreferenzen:
> * Globaler eShop und Corporate-Site f=FCr Springer: www.springeronline.co=
m
> * E-Detailing-Portal f=FCr Novartis: www.interaktiv.novartis.de
> * Service-Center-Plattform f=FCr Biogen: www.ms-life.de
> * eCRM-System f=FCr Gr=FCnenthal: www.gruenenthal.com
>
>
> _________________________________________________________________________=
__
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_36759_21768687.1165411600728--

From java-user-return-24884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 06 13:30:45 2006
Return-Path: <java-user-return-24884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33497 invoked from network); 6 Dec 2006 13:30:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 13:30:43 -0000
Received: (qmail 94285 invoked by uid 500); 6 Dec 2006 13:30:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94245 invoked by uid 500); 6 Dec 2006 13:30:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94234 invoked by uid 99); 6 Dec 2006 13:30:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 05:30:44 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 05:30:32 -0800
Received: by ug-out-1314.google.com with SMTP id k40so143399ugc
        for <java-user@lucene.apache.org>; Wed, 06 Dec 2006 05:30:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TvqRzXhxFbnwlDuLirdvFn8j0Z5MFMDQStRIlYLGWK2tM/JZXrnbmLkqRKe6cIV+UOiLMPPiGi8eGW/DbQtZ1CYblGOV2h6B5g9W5TUt6BydLfkplzWzZIiYJFpMFKD5PlEXtAN1GkCx3wqjEOKGTwNjchWdxvY0nOOGTGhYaHs=
Received: by 10.82.135.13 with SMTP id i13mr122291bud.1165411810760;
        Wed, 06 Dec 2006 05:30:10 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Wed, 6 Dec 2006 05:30:10 -0800 (PST)
Message-ID: <359a92830612060530l5d980d04u3fa9464b81564f2c@mail.gmail.com>
Date: Wed, 6 Dec 2006 08:30:10 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Snowball Analyzer
In-Reply-To: <7718089.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36883_12607647.1165411810729"
References: <7718089.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36883_12607647.1165411810729
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What behavior are you expecting? The point of stemming is exactly to make
monkey equivalent to monkeys. Along with a series of other transformations.
What are you trying to accomplish?

Best
Erick

On 12/6/06, Aaron Shaw <aaronshaw@onetel.com> wrote:
>
>
> Hi,
>
> I've got the snowball analyzer working and it returns my records, however
> stemming doesn't seem to really do much. It returns plurals (so if i enter
> "monkey" as my search term and the word "monkeys" is in the document, it
> will be returned) but nothing more than that. Is that the extent of the
> stemming it does or is there more, and if so how do I get that working?
>
> Thanks,
>
> Aaron
> --
> View this message in context:
> http://www.nabble.com/Snowball-Analyzer-tf2767639.html#a7718089
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_36883_12607647.1165411810729--

From java-user-return-24885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 06 13:33:42 2006
Return-Path: <java-user-return-24885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34132 invoked from network); 6 Dec 2006 13:33:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 13:33:42 -0000
Received: (qmail 98776 invoked by uid 500); 6 Dec 2006 13:33:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98621 invoked by uid 500); 6 Dec 2006 13:33:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98610 invoked by uid 99); 6 Dec 2006 13:33:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 05:33:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 05:33:31 -0800
Received: by wr-out-0506.google.com with SMTP id i21so118836wra
        for <java-user@lucene.apache.org>; Wed, 06 Dec 2006 05:33:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=CIX5xQVPLYcsaGEBTUWmyqIDHACillGYsgopS+cQJ5lV1oJxtcY5MCMDVYMuSVW62RqEFtWnnLiya1NAPK8ljP8SNQqhWI3Y+JWvvnT8RGUaR5MRcTHBjW9H9rO73iKvwND1vNLpf3ZCuuNVDIGbf6rEJtaXg7OsR3lVNtUYPVg=
Received: by 10.90.25.3 with SMTP id 3mr837010agy.1165411990073;
        Wed, 06 Dec 2006 05:33:10 -0800 (PST)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 12sm15461550wrl.2006.12.06.05.33.09;
        Wed, 06 Dec 2006 05:33:09 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <000a01c71933$7b91aec0$4900000a@m4u.com.br>
References: <000a01c71933$7b91aec0$4900000a@m4u.com.br>
Content-Type: text/plain; charset=WINDOWS-1252; delsp=yes; format=flowed
Message-Id: <642484B8-3512-49BE-87ED-29DD9C42CB0C@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: Customized Analyzer
Date: Wed, 6 Dec 2006 08:33:07 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I often find that using Luke (google "luke lucene") gives me the info =20=

I need to figure out why I am not getting hits.  So, if you haven't =20
tried using it yet, I would suggest it.

On Dec 6, 2006, at 7:38 AM, Alice wrote:

> Going through the javadocs, that=92s wath I found out:
>
> About the positionIncrement of Token.class:
> " Set it (positionIncrement) to zero to put multiple terms in the same
> position.
> This is useful if, e.g., a word has multiple stems.  Searches for =20
> phrases
> including either stem will match.  In this case, all but the first =20
> stem's
> increment should be set to zero: the increment of the first instance
> should be one.  Repeating a token with an increment of zero can =20
> also be
> used to boost the scores of matches on that token."
>
> So that=92s what I did...
> And now it is returning a BooleanQuery as I expected:
> contents:wind contents:window
>
> But still no hits...
>
> Any clue?
>
>
> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: ter=E7a-feira, 5 de dezembro de 2006 20:54
> To: Lucene Users
> Subject: RE: Customized Analyzer
>
>
> As stated before, a *self contained* test case would help people =20
> diagnose
> your problem ... just cutting and pasting a few snippets of your =20
> code is
> not enough for people to reproduce your problem.
>
>
> : And the return is: contents:"(wind window)"
>
> a MultiPhraseQuery that looks like that should be functionally =20
> equivilent
> to a BooleanQuery .. as a matter of fact, it will rewrite to a
> BooleanQuery ... does a straight search on either "wind" or "window"
> return any results for you?
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 06 13:38:46 2006
Return-Path: <java-user-return-24886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35710 invoked from network); 6 Dec 2006 13:38:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 13:38:45 -0000
Received: (qmail 13305 invoked by uid 500); 6 Dec 2006 13:38:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13267 invoked by uid 500); 6 Dec 2006 13:38:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13255 invoked by uid 99); 6 Dec 2006 13:38:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 05:38:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alicelista@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 05:38:33 -0800
Received: by wx-out-0506.google.com with SMTP id i29so180822wxd
        for <java-user@lucene.apache.org>; Wed, 06 Dec 2006 05:38:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:in-reply-to:thread-index:x-mimeole;
        b=Z2GEkYspxmBpF3LWHXgxqC+xa7kRrstDuUuEcWQFCBW87G6oS33/0KJV30fQTYArttu86qEIl7yJIZ0rD8EbXdIRG6hHJGJxTttlqHoFPS/l4p5MankKjRE1nVkQ74n4Ic3TzDluk2RvL2gFPykhZ9oDs5b1pxkxz55RCwTrI8k=
Received: by 10.90.90.16 with SMTP id n16mr798870agb.1165412292683;
        Wed, 06 Dec 2006 05:38:12 -0800 (PST)
Received: from etiopia ( [200.152.100.56])
        by mx.google.com with ESMTP id 29sm23085908wrl.2006.12.06.05.38.09;
        Wed, 06 Dec 2006 05:38:12 -0800 (PST)
From: "Alice" <alicelista@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Customized Analyzer
Date: Wed, 6 Dec 2006 11:38:04 -0200
Message-ID: <001a01c7193b$c59771f0$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <642484B8-3512-49BE-87ED-29DD9C42CB0C@gmail.com>
Thread-Index: AccZOySHUvxN6OQgQkKG58XuDGZCUAAAD9Fg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org

I'm using it.

But the fact is that when my analyzer returns synonyms to the =
BooleanQuery I
get not hit.

But, when the analyzer returns no synonyms I get a hit.

If I enter: "window". I get a TermQuery: contents:window and I get a =
hit.
But If I enter: "wind". I get a BooleanQuery: contents:wind =
contents:window
and no hit...

-----Original Message-----
From: Grant Ingersoll [mailto:grant.ingersoll@gmail.com]=20
Sent: quarta-feira, 6 de dezembro de 2006 11:33
To: java-user@lucene.apache.org
Subject: Re: Customized Analyzer

I often find that using Luke (google "luke lucene") gives me the info =20
I need to figure out why I am not getting hits.  So, if you haven't =20
tried using it yet, I would suggest it.

On Dec 6, 2006, at 7:38 AM, Alice wrote:

> Going through the javadocs, that=92s wath I found out:
>
> About the positionIncrement of Token.class:
> " Set it (positionIncrement) to zero to put multiple terms in the same
> position.
> This is useful if, e.g., a word has multiple stems.  Searches for =20
> phrases
> including either stem will match.  In this case, all but the first =20
> stem's
> increment should be set to zero: the increment of the first instance
> should be one.  Repeating a token with an increment of zero can =20
> also be
> used to boost the scores of matches on that token."
>
> So that=92s what I did...
> And now it is returning a BooleanQuery as I expected:
> contents:wind contents:window
>
> But still no hits...
>
> Any clue?
>
>
> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: ter=E7a-feira, 5 de dezembro de 2006 20:54
> To: Lucene Users
> Subject: RE: Customized Analyzer
>
>
> As stated before, a *self contained* test case would help people =20
> diagnose
> your problem ... just cutting and pasting a few snippets of your =20
> code is
> not enough for people to reproduce your problem.
>
>
> : And the return is: contents:"(wind window)"
>
> a MultiPhraseQuery that looks like that should be functionally =20
> equivilent
> to a BooleanQuery .. as a matter of fact, it will rewrite to a
> BooleanQuery ... does a straight search on either "wind" or "window"
> return any results for you?
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 06 13:43:23 2006
Return-Path: <java-user-return-24887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37110 invoked from network); 6 Dec 2006 13:43:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 13:43:22 -0000
Received: (qmail 22029 invoked by uid 500); 6 Dec 2006 13:43:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22002 invoked by uid 500); 6 Dec 2006 13:43:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21991 invoked by uid 99); 6 Dec 2006 13:43:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 05:43:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 05:43:13 -0800
Received: by nf-out-0910.google.com with SMTP id n28so495909nfc
        for <java-user@lucene.apache.org>; Wed, 06 Dec 2006 05:42:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Zy+9Ts0ze88/oJvAqAS4ZboU+zAnuQOFe/jlXQ4LnHvjm22y6J40000S2ysVnFBes2zA45o1QTnvuoD5CQ5r2NJ6N4QA5KQ4RXqhazCS51kw2Mjf/W2cBGlUAF1P9jmFlZoHFAh6Si1W1sWPLuOeTVGXyTybNxkVJ5PJpUPsY4I=
Received: by 10.82.101.3 with SMTP id y3mr125248bub.1165412571930;
        Wed, 06 Dec 2006 05:42:51 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Wed, 6 Dec 2006 05:42:51 -0800 (PST)
Message-ID: <359a92830612060542q3b10c004s3a0892c6682c002e@mail.gmail.com>
Date: Wed, 6 Dec 2006 08:42:51 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Customized Analyzer
In-Reply-To: <000601c71927$37ed3560$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37171_17791552.1165412571760"
References: <Pine.LNX.4.58.0612051449120.9954@hal.rescomp.berkeley.edu>
	 <000601c71927$37ed3560$4900000a@m4u.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37171_17791552.1165412571760
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Chris is asking you to post a program that *he* can compile and run that
demonstrates the problem. So far, you've posted code that requires other
parts of your system to be present in order to compile and run. That makes
it hard to see the problem. For all we know,
access.getProductsByKeyword(keyword);
throws an exception that's handled in a way that fails benignly. Or maybe i=
t
just creates a collection but fails to assign it to the return properly. Or
you're connecting to a different searcher than you think you are. Or there'=
s
a real problem in Lucene. Or...... The point is that there are so many
hidden parts that we can't see that it's hard to help.

One real value of the exercise is it forces one to concentrate on the
fundamental expected behavior of the product in question, Lucene in this
case. 99 times out of 100, when I try this, I can't demonstrate a failure
case and realize that it's not the problem I thought it was.


Best
Erick

On 12/6/06, Alice <alicelista@gmail.com> wrote:
>
> I'm sorry, I'm not sure about what you're asking me to post, anyway here
> is
> my junit test:
>
>
> protected void setUp() throws Exception
>     {
>         super.setUp();
>
>         access =3D ServiceLocator.getAccess();
>     }
>
> public void testSearch() throws Exception
>     {
>         String keyword =3D "wind";
>
>         Collection<ProductDTO> products =3D
> access.getProductsByKeyword(keyword);
>
>         System.out.println(products.size() + " products found:");
>         for(ProductDTO product : products)
>         {
>             System.out.println(product.getName() + " " +
> product.getModel());
>         }
>     }
>
>
>
> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: ter=E7a-feira, 5 de dezembro de 2006 20:54
> To: Lucene Users
> Subject: RE: Customized Analyzer
>
>
> As stated before, a *self contained* test case would help people diagnose
> your problem ... just cutting and pasting a few snippets of your code is
> not enough for people to reproduce your problem.
>
>
> : And the return is: contents:"(wind window)"
>
> a MultiPhraseQuery that looks like that should be functionally equivilent
> to a BooleanQuery .. as a matter of fact, it will rewrite to a
> BooleanQuery ... does a straight search on either "wind" or "window"
> return any results for you?
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_37171_17791552.1165412571760--

From java-user-return-24888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 06 14:58:45 2006
Return-Path: <java-user-return-24888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72373 invoked from network); 6 Dec 2006 14:58:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 14:58:42 -0000
Received: (qmail 96693 invoked by uid 500); 6 Dec 2006 14:58:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96656 invoked by uid 500); 6 Dec 2006 14:58:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96641 invoked by uid 99); 6 Dec 2006 14:58:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 06:58:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 06:58:28 -0800
Received: by wr-out-0506.google.com with SMTP id i21so138507wra
        for <java-user@lucene.apache.org>; Wed, 06 Dec 2006 06:58:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Wxg9FKrgBJzd8piGXEEARCTfCITUKE49twVHfL9WSBqpF4PDXlrkOi1EJKH6u56xNJ+46DDyspGmx4EsQxyFkeZEUEAbuTIPEeyPtc5kxuH8Nze7fH60Y2sOBylZ7aInGG+IPsi2zsaE00B3y27tQiNfJW/ptgek5O7fNRZ41oE=
Received: by 10.100.198.11 with SMTP id v11mr432554anf.1165417085754;
        Wed, 06 Dec 2006 06:58:05 -0800 (PST)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 7sm35239908wrl.2006.12.06.06.58.05;
        Wed, 06 Dec 2006 06:58:05 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <001a01c7193b$c59771f0$4900000a@m4u.com.br>
References: <001a01c7193b$c59771f0$4900000a@m4u.com.br>
Content-Type: text/plain; charset=WINDOWS-1252; delsp=yes; format=flowed
Message-Id: <8A42FBFD-D545-457A-AE27-360DD7A5C42F@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: Customized Analyzer
Date: Wed, 6 Dec 2006 09:58:03 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Grasping at straws...

Did you by any chance set your default Operator in the query parser =20
(QP) to be AND and you have no documents with both wind and window in =20=

them?

Also, what if you write up a test case where you remove the QP from =20
the equation and create the BooleanQuery described below =20
programatically and submit it against your index?  Also, could try a =20
single TermQuery with just wind.  I know this doesn't solve the =20
problem, but it would help us isolate it.


-Grant

On Dec 6, 2006, at 8:38 AM, Alice wrote:

> I'm using it.
>
> But the fact is that when my analyzer returns synonyms to the =20
> BooleanQuery I
> get not hit.
>
> But, when the analyzer returns no synonyms I get a hit.
>
> If I enter: "window". I get a TermQuery: contents:window and I get =20
> a hit.
> But If I enter: "wind". I get a BooleanQuery: contents:wind =20
> contents:window
> and no hit...
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:grant.ingersoll@gmail.com]
> Sent: quarta-feira, 6 de dezembro de 2006 11:33
> To: java-user@lucene.apache.org
> Subject: Re: Customized Analyzer
>
> I often find that using Luke (google "luke lucene") gives me the info
> I need to figure out why I am not getting hits.  So, if you haven't
> tried using it yet, I would suggest it.
>
> On Dec 6, 2006, at 7:38 AM, Alice wrote:
>
>> Going through the javadocs, that=92s wath I found out:
>>
>> About the positionIncrement of Token.class:
>> " Set it (positionIncrement) to zero to put multiple terms in the =20
>> same
>> position.
>> This is useful if, e.g., a word has multiple stems.  Searches for
>> phrases
>> including either stem will match.  In this case, all but the first
>> stem's
>> increment should be set to zero: the increment of the first instance
>> should be one.  Repeating a token with an increment of zero can
>> also be
>> used to boost the scores of matches on that token."
>>
>> So that=92s what I did...
>> And now it is returning a BooleanQuery as I expected:
>> contents:wind contents:window
>>
>> But still no hits...
>>
>> Any clue?
>>
>>
>> -----Original Message-----
>> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
>> Sent: ter=E7a-feira, 5 de dezembro de 2006 20:54
>> To: Lucene Users
>> Subject: RE: Customized Analyzer
>>
>>
>> As stated before, a *self contained* test case would help people
>> diagnose
>> your problem ... just cutting and pasting a few snippets of your
>> code is
>> not enough for people to reproduce your problem.
>>
>>
>> : And the return is: contents:"(wind window)"
>>
>> a MultiPhraseQuery that looks like that should be functionally
>> equivilent
>> to a BooleanQuery .. as a matter of fact, it will rewrite to a
>> BooleanQuery ... does a straight search on either "wind" or "window"
>> return any results for you?
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ------------------------------------------------------
> Grant Ingersoll
> http://www.grantingersoll.com/
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 06 17:28:27 2006
Return-Path: <java-user-return-24889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25292 invoked from network); 6 Dec 2006 17:28:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 17:28:26 -0000
Received: (qmail 12048 invoked by uid 500); 6 Dec 2006 17:28:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11954 invoked by uid 500); 6 Dec 2006 17:28:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11921 invoked by uid 99); 6 Dec 2006 17:28:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 09:28:14 -0800
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 06 Dec 2006 09:28:05 -0800
Received: (qmail invoked by alias); 06 Dec 2006 17:27:44 -0000
Received: from p548C732E.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.115.46]
  by mail.gmx.net (mp032) with SMTP; 06 Dec 2006 18:27:44 +0100
X-Authenticated: #3493418
Message-ID: <4576FCE2.1030904@gmx.de>
Date: Wed, 06 Dec 2006 18:24:50 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Store a document-like map
References: <J9SYDG$4CB3EB2D647976187C1BB468D51EB405@libero.it>
In-Reply-To: <J9SYDG$4CB3EB2D647976187C1BB468D51EB405@libero.it>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

If there would be a boost factor for a single keyword (term) at index 
time I would index a class as a document with the keys as keywords and 
values as boost factor. Unfortunately you can just boost documents and 
fields at index time. Single terms can only be boosted at search time 
(TermQuery.setBoost). So I would store the classes in Lucene, in a 
database or just in a file and index the documents with Lucene. For 
classification I would iterate the classes and do searches over the 
documents for each class. The queries are “SHOULD” BooleanQueries of 
TermQueries for each key of the class boosted by its value. The score of 
a matching document is the similarity to the class (to the query build 
from the class). I’m not sure using the normalized score of Hits or the 
raw score of a HitCollector.

Sören

mgallinucci@libero.it wrote:
> Hi,
> I'm building an application that's going to classify some documents. So i have a set of documents and a set of classes, and I must classify these docs in these classes. Now, documents are stored in Lucene index through Document, while I don't know how I can store my classes in Lucene, and how I can compare a Document to a class.
> My class is only a map where the key is the word and the value is the relevance for that class. For example: I made class "Football", this contains this map:
> 
> Key | Value
> ball | 0.8
> penalty| 0.9
> 
> Someone can help me? My resolution idea was to build a Document with the words ball repeated 8 times and penalty 9 times, but it isn't a native mode to compare a map with a document...
> Thank you ahead of time...
> 
> 
> ------------------------------------------------------
> Francesco ha perso ben 45 Kg! Scopri come! Clicca qui
> http://click.libero.it/webnation05dic06

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 06 18:35:37 2006
Return-Path: <java-user-return-24890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49301 invoked from network); 6 Dec 2006 18:35:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 18:35:36 -0000
Received: (qmail 55717 invoked by uid 500); 6 Dec 2006 18:35:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55684 invoked by uid 500); 6 Dec 2006 18:35:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55666 invoked by uid 99); 6 Dec 2006 18:35:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 10:35:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 10:35:24 -0800
Received: by wx-out-0506.google.com with SMTP id i29so253186wxd
        for <java-user@lucene.apache.org>; Wed, 06 Dec 2006 10:35:02 -0800 (PST)
Received: by 10.70.40.1 with SMTP id n1mr1966068wxn.1165430102607;
        Wed, 06 Dec 2006 10:35:02 -0800 (PST)
Received: from ?192.168.0.21? ( [201.9.186.207])
        by mx.google.com with ESMTP id h37sm49264274wxd.2006.12.06.10.35.01;
        Wed, 06 Dec 2006 10:35:02 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <0C39389D-6316-4C13-A3DB-EFA083D747E7@summa-tech.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Marcelo Ohashi <ohashi@summa-tech.com>
Subject: BooleanQuery
Date: Wed, 6 Dec 2006 15:34:56 -0200
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

	Does anyone know if lucene can handle complex boolean queries like  
the following ones?

1. T: (A OR NOT B)
2. (T:A AND NOT T:B) OR NOT T:C

	Cause I figured out in some tests that the results were not really  
what I expected.

Thanks in advance,

_____________
Marcelo Ohashi



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 06 19:56:04 2006
Return-Path: <java-user-return-24891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75386 invoked from network); 6 Dec 2006 19:56:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2006 19:56:03 -0000
Received: (qmail 18826 invoked by uid 500); 6 Dec 2006 19:56:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18801 invoked by uid 500); 6 Dec 2006 19:56:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18790 invoked by uid 99); 6 Dec 2006 19:56:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 11:56:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 11:55:53 -0800
Received: by ug-out-1314.google.com with SMTP id k40so254756ugc
        for <java-user@lucene.apache.org>; Wed, 06 Dec 2006 11:55:31 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UoS+aq4iqx52DoGVUGzbnjNOdYvuP1GXhF9z2GxKeyVvR8SRSv/EsjggCwN5GAWvBpIxWek6kqwyHJ1+yahwplCbIeeCjqpydNGDYY2CrwvxpefqMax7MmrJ1AhudG+1kEsfsyIj7t+Ng2XLpuBD1QhUlFJ/g9NUsGOnMiF1xoM=
Received: by 10.82.101.3 with SMTP id y3mr296374bub.1165434931074;
        Wed, 06 Dec 2006 11:55:31 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Wed, 6 Dec 2006 11:55:30 -0800 (PST)
Message-ID: <359a92830612061155l1b51e426m6b6be77657243d68@mail.gmail.com>
Date: Wed, 6 Dec 2006 14:55:30 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery
In-Reply-To: <0C39389D-6316-4C13-A3DB-EFA083D747E7@summa-tech.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_45899_8072083.1165434930931"
References: <0C39389D-6316-4C13-A3DB-EFA083D747E7@summa-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_45899_8072083.1165434930931
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

These are not boolean operators, which is often confusing. See the thread

"*Another problem with the QueryParser*"

for an exposition by Chris about how these operate. This may change what you
expect to come back from the parser... If it doesn't, then maybe someone
else can chime in <G>...

Erick

On 12/6/06, Marcelo Ohashi <ohashi@summa-tech.com> wrote:
>
> Hi,
>
>         Does anyone know if lucene can handle complex boolean queries like
> the following ones?
>
> 1. T: (A OR NOT B)
> 2. (T:A AND NOT T:B) OR NOT T:C
>
>         Cause I figured out in some tests that the results were not really
> what I expected.
>
> Thanks in advance,
>
> _____________
> Marcelo Ohashi
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_45899_8072083.1165434930931--

From java-user-return-24892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 07 01:39:29 2006
Return-Path: <java-user-return-24892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81400 invoked from network); 7 Dec 2006 01:39:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 01:39:29 -0000
Received: (qmail 67021 invoked by uid 500); 7 Dec 2006 01:39:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66975 invoked by uid 500); 7 Dec 2006 01:39:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66953 invoked by uid 99); 7 Dec 2006 01:39:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 17:39:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Dec 2006 17:38:28 -0800
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id kB71bVVQ029881
	for <java-user@lucene.apache.org>; Wed, 6 Dec 2006 17:37:34 -0800 (PST)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: RE: BooleanQuery
Date: Wed, 6 Dec 2006 17:37:26 -0800
Message-ID: <002201c719a0$43620eb0$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830612061155l1b51e426m6b6be77657243d68@mail.gmail.com>
Thread-Index: AccZcI8Hs60ZiFBhSn6Ewnwlt5DxTgALzm5Q
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org

Read my own complaints about QueryParser here:

http://marc.theaimsgroup.com/?l=lucene-user&m=116069469827270&w=2

You're in for a surprise. As alluded by Erick, the stock QP doesn't quite do
what one (legitimately IMO) expects.

--Renaud
 

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: Wednesday, December 06, 2006 11:56 AM
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery

These are not boolean operators, which is often confusing. See the thread

"*Another problem with the QueryParser*"

for an exposition by Chris about how these operate. This may change what you
expect to come back from the parser... If it doesn't, then maybe someone
else can chime in <G>...

Erick

On 12/6/06, Marcelo Ohashi <ohashi@summa-tech.com> wrote:
>
> Hi,
>
>         Does anyone know if lucene can handle complex boolean queries 
> like the following ones?
>
> 1. T: (A OR NOT B)
> 2. (T:A AND NOT T:B) OR NOT T:C
>
>         Cause I figured out in some tests that the results were not 
> really what I expected.
>
> Thanks in advance,
>
> _____________
> Marcelo Ohashi
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 07 15:38:14 2006
Return-Path: <java-user-return-24893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13336 invoked from network); 7 Dec 2006 15:38:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 15:38:13 -0000
Received: (qmail 40160 invoked by uid 500); 7 Dec 2006 15:38:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40125 invoked by uid 500); 7 Dec 2006 15:38:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40114 invoked by uid 99); 7 Dec 2006 15:38:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 07:38:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.238 as permitted sender)
Received: from [64.233.162.238] (HELO nz-out-0102.google.com) (64.233.162.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 07:37:58 -0800
Received: by nz-out-0102.google.com with SMTP id i1so343924nzh
        for <java-user@lucene.apache.org>; Thu, 07 Dec 2006 07:37:38 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=dFJfsavqmftLJR35Ma8CUqOeiK3p0gARxWYl1o/HRcWAuSDE1MrmQjiUaGNTNBklV1/2KG9qQABNos3fpNK4x0a6a3AvCTGent/n3g1xvj/R/W+3dtGxMVa5/ZOy1GAXBXcyTu0oFivkURJRVDgjWBDRvkTDsrqKMspoqtK9MQQ=
Received: by 10.35.75.1 with SMTP id c1mr3574867pyl.1165505857347;
        Thu, 07 Dec 2006 07:37:37 -0800 (PST)
Received: from ?172.24.156.35? ( [129.176.197.15])
        by mx.google.com with ESMTP id a22sm828534pye.2006.12.07.07.37.36;
        Thu, 07 Dec 2006 07:37:36 -0800 (PST)
Message-ID: <4578353F.2080206@gmail.com>
Date: Thu, 07 Dec 2006 09:37:35 -0600
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Full disk space during indexing process with 120 gb of free disk
 space
References: <bf1404350612040639p6dd044d8gb76dce035648df98@mail.gmail.com>
In-Reply-To: <bf1404350612040639p6dd044d8gb76dce035648df98@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ariel Isaac Romero Cartaya wrote:
> Hi every body:
> 
>   I am getting a problem during the indexing process, I am indexing big
> amounts of texts most of them in pdf format I am using pdf box 0.6 version.
> The space in hard disk before that the indexing process begin is around 120
> Gb but incredibly even when my lucene index doesn't have yet 300 mb my hard
> disk has not already free space, more incredible is that when I turn off 
> the
> process of indexing then the free disk space arise rapidly to 120 Gb. How
> could happen this if I doesn't copy the documents to the disk ??? , I 
> have a
> linux machine for the indexing process, I have been thinking that could be
> the temporaly files of something , may be pdf box ???
> Could you help me please ???
> Greetings
> 

It would be helpful if you knew what was filling your harddisk.  What 
files are filling the 120 GB?  Where are they located?

Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 07 18:15:29 2006
Return-Path: <java-user-return-24894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73483 invoked from network); 7 Dec 2006 18:15:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 18:15:27 -0000
Received: (qmail 28621 invoked by uid 500); 7 Dec 2006 18:15:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28587 invoked by uid 500); 7 Dec 2006 18:15:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28576 invoked by uid 99); 7 Dec 2006 18:15:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:15:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of TAigner@wescodist.com designates 12.29.179.194 as permitted sender)
Received: from [12.29.179.194] (HELO smtp3.wescodist.com) (12.29.179.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:15:15 -0800
Received: from EMAIL02.wescodist.com ([207.152.236.124]) by smtp3.wescodist.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 7 Dec 2006 13:14:47 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C71A2B.94390EB2"
Subject: Reading Performance
Date: Thu, 7 Dec 2006 13:14:46 -0500
Message-ID: <6B6D3063DF0A7A4DB8A989D40C61BEB3027FF0EC@EMAIL02.wescodist.com>
In-Reply-To: <4578353F.2080206@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Reading Performance
Thread-Index: AccaFbC5xJBBC433Sey0o+KipWPvywAFIcEg
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 07 Dec 2006 18:14:47.0972 (UTC) FILETIME=[94715640:01C71A2B]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C71A2B.94390EB2
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20

=20

Howdy all,

=20

      I have a question on reading many documents and time to do this.
I have a loop on the hits object reading a record, then writing it to a
file.  When there is only 1 user on the Index Searcher, this process to
read say 100,000 takes around 3 seconds.  This is slow, but can be
acceptable.  When a few more users do searchers, this time to just read
from the hits object becomes well over 10 seconds, sometimes even 30+
seconds.  Is there a better way to read through and do something with
the hits information?  And yes, I have to read all of them to do this
particular task.

=20

for (int i =3D 0;(i <=3D hits.length() - 1); i++)=20

{

                       =20

      if (fw =3D=3D null)=20

      {

            fw =3D new BufferedWriter( new FileWriter( searchWriteSpec =
),
8196) ;

      }

=20

      //Write Out records

      String tmpHold =3D "";

tmpHold =3D hits.doc(i).get("somefield1") + =
hits.doc(i).get("somefield2");

                             =20

      fw.write(tmpHold + "\n" );

                             =20

}

=20

Any ideas on how to speed this up especially with multiple users?  Each
user gets their own class which has the above code in it.

=20

Thanks,

Tom

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20

=20


------_=_NextPart_001_01C71A2B.94390EB2--

From java-user-return-24895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 07 18:24:33 2006
Return-Path: <java-user-return-24895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77234 invoked from network); 7 Dec 2006 18:24:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 18:24:33 -0000
Received: (qmail 53293 invoked by uid 500); 7 Dec 2006 18:24:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53262 invoked by uid 500); 7 Dec 2006 18:24:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53241 invoked by uid 99); 7 Dec 2006 18:24:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:24:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 72.14.246.248 as permitted sender)
Received: from [72.14.246.248] (HELO ag-out-0708.google.com) (72.14.246.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:24:14 -0800
Received: by ag-out-0708.google.com with SMTP id 9so219489agd
        for <java-user@lucene.apache.org>; Thu, 07 Dec 2006 10:23:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=HG1ci5vf25zWDDeFKIlzbYAEVpRynG1b9UVFi/jQ/AdBMznsMxVcKJzcxpTToTgESprnNRLBYwxDpUo62z3D2KorLy2R3QjTQKOUWSYQyiS7aivXK5YGJS+nbaTZFWe3tKWeB0j10cUhPWzQoEXh+evPyhHfL+at1Si2/1gT3jk=
Received: by 10.100.163.12 with SMTP id l12mr2613001ane.1165515834127;
        Thu, 07 Dec 2006 10:23:54 -0800 (PST)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 14sm2427471wrl.2006.12.07.10.23.53;
        Thu, 07 Dec 2006 10:23:53 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <6B6D3063DF0A7A4DB8A989D40C61BEB3027FF0EC@EMAIL02.wescodist.com>
References: <6B6D3063DF0A7A4DB8A989D40C61BEB3027FF0EC@EMAIL02.wescodist.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AAC285CA-BA0F-4EFD-AE80-1C24F7D3AA0E@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: Reading Performance
Date: Thu, 7 Dec 2006 13:23:50 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Have you done any profiling to identify hotspots in Lucene versus  
your application?

You might look into the FieldSelector code (used in IndexReader) in  
the Trunk version of Lucene could be used to only load the fields you  
are interested when getting the document from disk.  This can be  
useful if you have large fields that are being loaded that you don't  
necessarily need (thus skipping them).

Also, do you need the BufferedWriter construction and check in side  
the loop?  Probably small in comparison to loading, but  It seems  
like it is only created once, why have it in the loop?



On Dec 7, 2006, at 1:14 PM, Aigner, Thomas wrote:

>
>
>
>
> Howdy all,
>
>
>
>       I have a question on reading many documents and time to do this.
> I have a loop on the hits object reading a record, then writing it  
> to a
> file.  When there is only 1 user on the Index Searcher, this  
> process to
> read say 100,000 takes around 3 seconds.  This is slow, but can be
> acceptable.  When a few more users do searchers, this time to just  
> read
> from the hits object becomes well over 10 seconds, sometimes even 30+
> seconds.  Is there a better way to read through and do something with
> the hits information?  And yes, I have to read all of them to do this
> particular task.
>
>
>
> for (int i = 0;(i <= hits.length() - 1); i++)
>
> {
>
>
>
>       if (fw == null)
>
>       {
>
>             fw = new BufferedWriter( new FileWriter 
> ( searchWriteSpec ),
> 8196) ;
>
>       }
>
>
>
>       //Write Out records
>
>       String tmpHold = "";
>
> tmpHold = hits.doc(i).get("somefield1") + hits.doc(i).get 
> ("somefield2");
>
>
>
>       fw.write(tmpHold + "\n" );
>
>
>
> }
>
>
>
> Any ideas on how to speed this up especially with multiple users?   
> Each
> user gets their own class which has the above code in it.
>
>
>
> Thanks,
>
> Tom
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 07 18:27:16 2006
Return-Path: <java-user-return-24896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78437 invoked from network); 7 Dec 2006 18:27:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 18:27:15 -0000
Received: (qmail 59433 invoked by uid 500); 7 Dec 2006 18:27:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59411 invoked by uid 500); 7 Dec 2006 18:27:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59400 invoked by uid 99); 7 Dec 2006 18:27:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:27:16 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [64.233.184.238] (HELO wr-out-0506.google.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:27:02 -0800
Received: by wr-out-0506.google.com with SMTP id i21so394823wra
        for <java-user@lucene.apache.org>; Thu, 07 Dec 2006 10:26:39 -0800 (PST)
Received: by 10.90.75.10 with SMTP id x10mr474432aga.1165515998854;
        Thu, 07 Dec 2006 10:26:38 -0800 (PST)
Received: from ?10.1.1.101? ( [201.9.134.168])
        by mx.google.com with ESMTP id 30sm1069244agc.2006.12.07.10.26.36;
        Thu, 07 Dec 2006 10:26:38 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <002201c719a0$43620eb0$970fda80@libraria.ucsf.edu>
References: <002201c719a0$43620eb0$970fda80@libraria.ucsf.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A2673280-71F6-4D11-8FB1-173777C9073E@summa-tech.com>
Content-Transfer-Encoding: 7bit
From: Marcelo Ohashi <ohashi@summa-tech.com>
Subject: Re: BooleanQuery
Date: Thu, 7 Dec 2006 15:26:36 -0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your help guy. I'll test that query parser.

Marcelo

On Dec 6, 2006, at 11:37 PM, Renaud Waldura wrote:

> Read my own complaints about QueryParser here:
>
> http://marc.theaimsgroup.com/?l=lucene-user&m=116069469827270&w=2
>
> You're in for a surprise. As alluded by Erick, the stock QP doesn't  
> quite do
> what one (legitimately IMO) expects.
>
> --Renaud
>
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Wednesday, December 06, 2006 11:56 AM
> To: java-user@lucene.apache.org
> Subject: Re: BooleanQuery
>
> These are not boolean operators, which is often confusing. See the  
> thread
>
> "*Another problem with the QueryParser*"
>
> for an exposition by Chris about how these operate. This may change  
> what you
> expect to come back from the parser... If it doesn't, then maybe  
> someone
> else can chime in <G>...
>
> Erick
>
> On 12/6/06, Marcelo Ohashi <ohashi@summa-tech.com> wrote:
>>
>> Hi,
>>
>>         Does anyone know if lucene can handle complex boolean queries
>> like the following ones?
>>
>> 1. T: (A OR NOT B)
>> 2. (T:A AND NOT T:B) OR NOT T:C
>>
>>         Cause I figured out in some tests that the results were not
>> really what I expected.
>>
>> Thanks in advance,
>>
>> _____________
>> Marcelo Ohashi
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 07 18:31:37 2006
Return-Path: <java-user-return-24897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79834 invoked from network); 7 Dec 2006 18:31:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 18:31:36 -0000
Received: (qmail 71501 invoked by uid 500); 7 Dec 2006 18:31:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71478 invoked by uid 500); 7 Dec 2006 18:31:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71467 invoked by uid 99); 7 Dec 2006 18:31:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:31:36 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:31:26 -0800
Received: by nf-out-0910.google.com with SMTP id n28so862251nfc
        for <java-user@lucene.apache.org>; Thu, 07 Dec 2006 10:31:05 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RsGgzPCS/lQjdkt+7xK+V/5yId2b+SjRP9RCeH2cl2H/7lxT+Qg962x0YOOHlSXm7jiU7S0SbUH+iWncLjyR1dIcFVFDE87ZgJB/YhL3PCSRC0RRW1uFmp/X9pH37MklHRF3OfJ3kVjvjNHdeL9NFcfB3mVkNg5d9IFxk/+uUuw=
Received: by 10.82.179.9 with SMTP id b9mr107359buf.1165516264569;
        Thu, 07 Dec 2006 10:31:04 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Thu, 7 Dec 2006 10:31:04 -0800 (PST)
Message-ID: <359a92830612071031g3fecf777x5751f61ec6c891d7@mail.gmail.com>
Date: Thu, 7 Dec 2006 13:31:04 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Reading Performance
In-Reply-To: <6B6D3063DF0A7A4DB8A989D40C61BEB3027FF0EC@EMAIL02.wescodist.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_66384_19856485.1165516264541"
References: <4578353F.2080206@gmail.com>
	 <6B6D3063DF0A7A4DB8A989D40C61BEB3027FF0EC@EMAIL02.wescodist.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_66384_19856485.1165516264541
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, the performance isn't bad considering you're executing the *search*
around 1,000 times.......

One of the characteristics of a Hits object is that it's optimized for
getting the top 100 docs or so. To get the next 100 docs it re-executes the
query. Repeatedly <G>. I'd try using a HitCollector or TopDocs instead of a
Hits object....

Hope this helps
Erick

On 12/7/06, Aigner, Thomas <TAigner@wescodist.com> wrote:
>
>
>
>
>
> Howdy all,
>
>
>
>       I have a question on reading many documents and time to do this.
> I have a loop on the hits object reading a record, then writing it to a
> file.  When there is only 1 user on the Index Searcher, this process to
> read say 100,000 takes around 3 seconds.  This is slow, but can be
> acceptable.  When a few more users do searchers, this time to just read
> from the hits object becomes well over 10 seconds, sometimes even 30+
> seconds.  Is there a better way to read through and do something with
> the hits information?  And yes, I have to read all of them to do this
> particular task.
>
>
>
> for (int i = 0;(i <= hits.length() - 1); i++)
>
> {
>
>
>
>       if (fw == null)
>
>       {
>
>             fw = new BufferedWriter( new FileWriter( searchWriteSpec ),
> 8196) ;
>
>       }
>
>
>
>       //Write Out records
>
>       String tmpHold = "";
>
> tmpHold = hits.doc(i).get("somefield1") + hits.doc(i).get("somefield2");
>
>
>
>       fw.write(tmpHold + "\n" );
>
>
>
> }
>
>
>
> Any ideas on how to speed this up especially with multiple users?  Each
> user gets their own class which has the above code in it.
>
>
>
> Thanks,
>
> Tom
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>

------=_Part_66384_19856485.1165516264541--

From java-user-return-24898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 07 18:36:49 2006
Return-Path: <java-user-return-24898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82348 invoked from network); 7 Dec 2006 18:36:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2006 18:36:47 -0000
Received: (qmail 92565 invoked by uid 500); 7 Dec 2006 18:36:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92545 invoked by uid 500); 7 Dec 2006 18:36:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92534 invoked by uid 99); 7 Dec 2006 18:36:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:36:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of TAigner@wescodist.com designates 12.29.179.198 as permitted sender)
Received: from [12.29.179.198] (HELO smtp4.wescodist.com) (12.29.179.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 10:36:34 -0800
Received: from EMAIL02.wescodist.com ([207.152.236.124]) by smtp4.wescodist.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 7 Dec 2006 13:36:14 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Reading Performance
Date: Thu, 7 Dec 2006 13:36:11 -0500
Message-ID: <6B6D3063DF0A7A4DB8A989D40C61BEB3027FF156@EMAIL02.wescodist.com>
In-Reply-To: <AAC285CA-BA0F-4EFD-AE80-1C24F7D3AA0E@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Reading Performance
Thread-Index: AccaLfDFI/Hxo/lnR02EFTEZdQzVSwAAH5dw
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 07 Dec 2006 18:36:14.0448 (UTC) FILETIME=[933DFF00:01C71A2E]
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Grant and Erik for your suggestions.  I will try both of them and
let you know if I see a marked increase in speed.

Tom


-----Original Message-----
From: Grant Ingersoll [mailto:grant.ingersoll@gmail.com]=20
Sent: Thursday, December 07, 2006 1:24 PM
To: java-user@lucene.apache.org
Subject: Re: Reading Performance

Have you done any profiling to identify hotspots in Lucene versus =20
your application?

You might look into the FieldSelector code (used in IndexReader) in =20
the Trunk version of Lucene could be used to only load the fields you =20
are interested when getting the document from disk.  This can be =20
useful if you have large fields that are being loaded that you don't =20
necessarily need (thus skipping them).

Also, do you need the BufferedWriter construction and check in side =20
the loop?  Probably small in comparison to loading, but  It seems =20
like it is only created once, why have it in the loop?



On Dec 7, 2006, at 1:14 PM, Aigner, Thomas wrote:

>
>
>
>
> Howdy all,
>
>
>
>       I have a question on reading many documents and time to do this.
> I have a loop on the hits object reading a record, then writing it =20
> to a
> file.  When there is only 1 user on the Index Searcher, this =20
> process to
> read say 100,000 takes around 3 seconds.  This is slow, but can be
> acceptable.  When a few more users do searchers, this time to just =20
> read
> from the hits object becomes well over 10 seconds, sometimes even 30+
> seconds.  Is there a better way to read through and do something with
> the hits information?  And yes, I have to read all of them to do this
> particular task.
>
>
>
> for (int i =3D 0;(i <=3D hits.length() - 1); i++)
>
> {
>
>
>
>       if (fw =3D=3D null)
>
>       {
>
>             fw =3D new BufferedWriter( new FileWriter=20
> ( searchWriteSpec ),
> 8196) ;
>
>       }
>
>
>
>       //Write Out records
>
>       String tmpHold =3D "";
>
> tmpHold =3D hits.doc(i).get("somefield1") + hits.doc(i).get=20
> ("somefield2");
>
>
>
>       fw.write(tmpHold + "\n" );
>
>
>
> }
>
>
>
> Any ideas on how to speed this up especially with multiple users?  =20
> Each
> user gets their own class which has the above code in it.
>
>
>
> Thanks,
>
> Tom
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 08 05:58:07 2006
Return-Path: <java-user-return-24899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67781 invoked from network); 8 Dec 2006 05:58:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 05:58:06 -0000
Received: (qmail 70159 invoked by uid 500); 8 Dec 2006 05:58:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69590 invoked by uid 500); 8 Dec 2006 05:58:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69579 invoked by uid 99); 8 Dec 2006 05:58:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 21:58:04 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pksunilpk@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 21:57:53 -0800
Received: by nf-out-0910.google.com with SMTP id n28so952279nfc
        for <java-user@lucene.apache.org>; Thu, 07 Dec 2006 21:57:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=G+apGTTCt01XZvtYmIMcyXsJlKah/UC3aCwryckLjBhVALTQdw7t/AuTqJF5WUs3pY8aYxtwwf+jXICwz7hGZEi69HjOzr/RSUr3tR9EZF6Gap4zgDAW+4Ft3YdTGY0hKHsCVnxQ+SmETlHGiQ8YWauHfckF5qsAh6KhoIB50gE=
Received: by 10.78.164.13 with SMTP id m13mr197960hue.1165557451794;
        Thu, 07 Dec 2006 21:57:31 -0800 (PST)
Received: by 10.78.164.3 with HTTP; Thu, 7 Dec 2006 21:57:31 -0800 (PST)
Message-ID: <a9893f800612072157p1ddb3513i92302690ca0cc820@mail.gmail.com>
Date: Fri, 8 Dec 2006 11:27:31 +0530
From: "Sunil Kumar PK" <pksunilpk@gmail.com>
To: "java user" <java-user@lucene.apache.org>
Subject: Get scores per field.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64633_9345716.1165557451773"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64633_9345716.1165557451773
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

Is it possible to get the scores/filed in the result document, instead of
getting scores/document?
If this feature is not exists, what are the possible ways for implementing
this feature?

Thanks,
Sunil

------=_Part_64633_9345716.1165557451773--

From java-user-return-24900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 08 06:11:30 2006
Return-Path: <java-user-return-24900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71570 invoked from network); 8 Dec 2006 06:11:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 06:11:28 -0000
Received: (qmail 80911 invoked by uid 500); 8 Dec 2006 06:11:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80403 invoked by uid 500); 8 Dec 2006 06:11:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80392 invoked by uid 99); 8 Dec 2006 06:11:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 22:11:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of cwho.work@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 22:11:19 -0800
Received: by ug-out-1314.google.com with SMTP id k40so731318ugc
        for <java-user@lucene.apache.org>; Thu, 07 Dec 2006 22:10:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=JiJKDfOVF1Hx9tIw1Ce9aVwUqQCEwao9oZn4CFdlrqEIl1SWduBg/7oKwH/kMP3/BZe0vo8lK6v0uEx6jtAc4OzEhTJGIQXjjoc+6agWBfdLYyWFwTJyOczWMS4d7tTDki1GsgKOguC15nriMH0Zu5UHG64hNLOYHTMm1Lcdf18=
Received: by 10.78.185.16 with SMTP id i16mr116992huf.1165558251396;
        Thu, 07 Dec 2006 22:10:51 -0800 (PST)
Received: by 10.78.144.14 with HTTP; Thu, 7 Dec 2006 22:10:51 -0800 (PST)
Message-ID: <6c33f9950612072210q19fdd2b8u8895f7668e1edeaf@mail.gmail.com>
Date: Fri, 8 Dec 2006 14:10:51 +0800
From: "Chun Wei Ho" <cwho.work@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Optimizing search speed & performance for a 10G Index.
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We run a search engine based on Lucene 1.9.1 / Nutch 0.7.2. Our index
has approximately 2 million documents and the physical size of it is
about 10 GB. We run it as a tomcat web application on a Fedora Core 4
server with duo Xeon 3.2GHz processors and 4GB RAM.

We receive about 46500 web search requests a day (ranging from 50-300
requests per 5 minutes across the day). Each web search request could
spawn about one to three actual Lucene searches. Our average response
time (calculated from the server side - and so excludes network
latency), is about 2 seconds.

Does this timing of 2 seconds appear plausible for Lucene, based on
the machine specifications above.


Our index is slightly more complex (with multiple fields like title,
location, site, content). For example, a search for "Linux and Lucene"
related entries in "Australia" might result in lucene searches for:

((title:linux^1.0 title:lucene^1.0)^4.0)
+((
+(title:linux^5.0 location:linux^1.5 content:linux^1.0)
+(title:lucene^5.0 location:lucene^1.5 content:lucene^1.0))
((+(+content:linux +content:lucene)) +(site:contentsite1
site:contentsite2 site:contentsite3 site:contentsite4
site:contentsite5 site:contentsite6 site:contentsite7)))^0.01))
+location:australia)
+newsdate:[20061107 TO 20061208]
+region:au)
-jobsite:badsite1 -region:badregion1 -jobsite:badsite2
-jobsite:badsite3 -jobsite:badsite4

Does anyone have ideas or could point us to resources that would allow
us to improve this performance? 2 seconds response added with network
latency gives an impression of "slowness" of our site that we are
trying to reduce.

Thank you.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 08 06:19:20 2006
Return-Path: <java-user-return-24901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73059 invoked from network); 8 Dec 2006 06:19:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 06:19:19 -0000
Received: (qmail 88376 invoked by uid 500); 8 Dec 2006 06:19:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88336 invoked by uid 500); 8 Dec 2006 06:19:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88325 invoked by uid 99); 8 Dec 2006 06:19:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Dec 2006 22:19:21 -0800
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.196.97.109] (HELO web57005.mail.re3.yahoo.com) (66.196.97.109)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Dec 2006 22:19:08 -0800
Received: (qmail 3311 invoked by uid 60001); 8 Dec 2006 06:18:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=NAuMuqketA/swrbAjsmmSzMwWMbJC/oTfVLiIraMWS39FKJKVPqpWY1Ms68y2y3QILR3Lv+oOeXZPAEVL240Ky2a/V1ToOgsvfTtS6uWfvfIMoA1LlMK+4z6iMk9MQaxZHEtHLBnKIJW3sRNvD1DTj6qDu50s6+lQw4vCe8Q3mQ=;
X-YMail-OSG: jiYplL0VM1mDGL_Nsex06DN6agI6.mEDFCtFryg4IhbD2z5lIJQy0bGy0lLvNpI0.pbxijiB.NPCZEilcmhmDKkkSj_Uhns_VokOYFL5DNdKuq0N3hQgj__yAEwzI4stI5GIahXpHKjuQCs-
Received: from [69.255.227.192] by web57005.mail.re3.yahoo.com via HTTP; Thu, 07 Dec 2006 22:18:47 PST
Date: Thu, 7 Dec 2006 22:18:47 -0800 (PST)
From: Xiaocheng Luan <jenaluan@yahoo.com>
Subject: Re: How to set query time scoring
To: java-user@lucene.apache.org
In-Reply-To: <7557740.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2031671372-1165558727=:3303"
Content-Transfer-Encoding: 8bit
Message-ID: <802146.3303.qm@web57005.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-2031671372-1165558727=:3303
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Try to play with the similarity class/subclasses, it might help.
For example, you may adjust the coord to increase the chance (not necessary guarantee?) that ORed results will be after the ANDed results; adjust the sloppy factor to favor phrases, etc.
Xiaocheng

Sajid Khan <assamhelp@yahoo.co.in> wrote: 
Thanks for the instant reply. More specifically i am trying to do is: 
 1) to show the results which contain the exact query phrase on top followed
by ANDed results followed by the ORed results.  
 2) introduce new parameter that uses the query phrase to influence the
ranking.

regards
Sajid


Bhavin Pandya wrote:
> 
> Hi sajid,
> 
> As you already boost data at indexing time...
> You can boost query at search time...
> eg. If you are firing boolean query and phrasequery...you might need to 
> boost phrasequery....
> 
> PhraseQuery pq = new PhraseQuery();
> pq.setBoost(2.0f);
> 
> Thanks.
> Bhavin pandya
> 
> ----- Original Message ----- 
> From: "Sajid Khan" 
> To: 
> Sent: Monday, November 27, 2006 10:17 AM
> Subject: How to set query time scoring
> 
> 
>>
>>     I have already set some score at the index time. And now i want to
>> set
>> some score at the query time. But i am not getting any idea of how to set
>> the score at query time in lucene.
>>     Has anybody an idea how to do this?
>>
>> Regards
>> Sajid
>> -- 
>> View this message in context: 
>> http://www.nabble.com/How-to-set-query-time-scoring-tf2709773.html#a7554766
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-set-query-time-scoring-tf2709773.html#a7557740
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-2031671372-1165558727=:3303--

From java-user-return-24902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 08 11:44:50 2006
Return-Path: <java-user-return-24902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63977 invoked from network); 8 Dec 2006 11:44:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 11:44:49 -0000
Received: (qmail 94062 invoked by uid 500); 8 Dec 2006 11:44:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93936 invoked by uid 500); 8 Dec 2006 11:44:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93925 invoked by uid 99); 8 Dec 2006 11:44:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 03:44:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 03:44:36 -0800
Received: by wx-out-0506.google.com with SMTP id i29so725178wxd
        for <java-user@lucene.apache.org>; Fri, 08 Dec 2006 03:44:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Kf52TLjbBwXzH2Addjrc2RhrwiDpFS1KSbm/8CuswgKWl8pz37Ojpy3zCDstOo0i5Zf2WElEKBgVzDnLA7CgftxXGlXwICU/xFdMoc0yxHSzHcsePP2sKMyNhZDrfGpciwCVb5iVKauRbUkLSLEA/u/q3iDjpi6erydYZwpCbuY=
Received: by 10.90.25.3 with SMTP id 3mr3846535agy.1165578255817;
        Fri, 08 Dec 2006 03:44:15 -0800 (PST)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 34sm2980776wra.2006.12.08.03.44.15;
        Fri, 08 Dec 2006 03:44:15 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <6c33f9950612072210q19fdd2b8u8895f7668e1edeaf@mail.gmail.com>
References: <6c33f9950612072210q19fdd2b8u8895f7668e1edeaf@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <0F0F8794-B7F5-4D8B-A384-5A7AFEF80F2C@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: Optimizing search speed & performance for a 10G Index.
Date: Fri, 8 Dec 2006 06:44:13 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Have you done any profiling of your application yet to identify =20
bottlenecks (i.e. are you sure it is Lucene)?  Without some =20
profiling, you really will just be guessing.  Also, search this and =20
the dev. list for performance, as there have been many lengthy =20
discussions in the past on optimizations that may give you some =20
ideas.  Is there any way you can make it so you don't spawn extra =20
searches?

Also, how are you handling the newsdate field?  Range Query vs. Range =20=

Filter.
Do you have any fields in your documents that are large, stored =20
fields?  Lazy loading and/or the field selector may help there.  =20
Search this list for info or the dev list.

How are you creating your queries?  Is there a lot of analysis =20
involved?=CE

Of course, there always comes a time when you need to look at =20
distributing the load, but I am not sure if you are there yet, as I =20
seem to recall people being able to handle 10gb w/o too much problem =20
on a machine of that size, but I could be wrong.

-Grant

On Dec 8, 2006, at 1:10 AM, Chun Wei Ho wrote:

> Hi,
>
> We run a search engine based on Lucene 1.9.1 / Nutch 0.7.2. Our index
> has approximately 2 million documents and the physical size of it is
> about 10 GB. We run it as a tomcat web application on a Fedora Core 4
> server with duo Xeon 3.2GHz processors and 4GB RAM.
>
> We receive about 46500 web search requests a day (ranging from 50-300
> requests per 5 minutes across the day). Each web search request could
> spawn about one to three actual Lucene searches. Our average response
> time (calculated from the server side - and so excludes network
> latency), is about 2 seconds.
>
> Does this timing of 2 seconds appear plausible for Lucene, based on
> the machine specifications above.
>
>
> Our index is slightly more complex (with multiple fields like title,
> location, site, content). For example, a search for "Linux and Lucene"
> related entries in "Australia" might result in lucene searches for:
>
> ((title:linux^1.0 title:lucene^1.0)^4.0)
> +((
> +(title:linux^5.0 location:linux^1.5 content:linux^1.0)
> +(title:lucene^5.0 location:lucene^1.5 content:lucene^1.0))
> ((+(+content:linux +content:lucene)) +(site:contentsite1
> site:contentsite2 site:contentsite3 site:contentsite4
> site:contentsite5 site:contentsite6 site:contentsite7)))^0.01))
> +location:australia)
> +newsdate:[20061107 TO 20061208]
> +region:au)
> -jobsite:badsite1 -region:badregion1 -jobsite:badsite2
> -jobsite:badsite3 -jobsite:badsite4
>
> Does anyone have ideas or could point us to resources that would allow
> us to improve this performance? 2 seconds response added with network
> latency gives an impression of "slowness" of our site that we are
> trying to reduce.
>
> Thank you.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 08 12:38:06 2006
Return-Path: <java-user-return-24903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83511 invoked from network); 8 Dec 2006 12:38:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 12:38:04 -0000
Received: (qmail 226 invoked by uid 500); 8 Dec 2006 12:38:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 193 invoked by uid 500); 8 Dec 2006 12:38:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 178 invoked by uid 99); 8 Dec 2006 12:38:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 04:38:05 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 04:37:54 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1028250nfc
        for <java-user@lucene.apache.org>; Fri, 08 Dec 2006 04:37:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=n17/Wsvt4foNK1d8AAtTmjvwXIxFCEiOOHUZ80av4T9dVVUbmrGLiFXaDk8SDgIF7R+djUNKLA/D5WQutvlw6LRg00vOpotJ2GApekbo8hYH10gfpfuEGkyYnIbiEhSe2Xuk2HyHYqbk85XX0KwNY6US+7FshE/JO3/CK/UsQA8=
Received: by 10.82.169.4 with SMTP id r4mr501172bue.1165581452266;
        Fri, 08 Dec 2006 04:37:32 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Fri, 8 Dec 2006 04:37:32 -0800 (PST)
Message-ID: <359a92830612080437n4426fa5exb8528be4fc63f3bf@mail.gmail.com>
Date: Fri, 8 Dec 2006 07:37:32 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Optimizing search speed & performance for a 10G Index.
In-Reply-To: <6c33f9950612072210q19fdd2b8u8895f7668e1edeaf@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78689_31482050.1165581452073"
References: <6c33f9950612072210q19fdd2b8u8895f7668e1edeaf@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78689_31482050.1165581452073
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Other questions besides Grants...

What is the overall response time? If your overall response time is 10
seconds, tuning Lucene won't help you much.

Are you re-opening a searcher each time? This is bad.

How many documents are you finding and are you iterating over a Hits object
for more than 100 objects? If so think about a HitCollector/TopDocs object.

What else is running on the machines? What kinds of timings are you getting
if you run just the search on a dedicated machine?

What happens if you take away the boosts?

What are you measuring when you measure response time? Does it include the
time you spend processing the hits or just the time to execute the search
call? You might get interesting information if you also measure the time to
execute the searches only, it might give you a hint on where to look next.

And I can't agree with Grant strongly enough when he recommends a profiler
before launching into any major optimization. I've spent far too much time
optimizing what I *knew* was the problem area only to find that it wasn't
<G>. It's certainly worth a few simple experiments to see if you can bracket
the problem, but if the easy stuff doesn't work, get a profiler...........

Best
Erick

On 12/8/06, Chun Wei Ho <cwho.work@gmail.com> wrote:
>
> Hi,
>
> We run a search engine based on Lucene 1.9.1 / Nutch 0.7.2. Our index
> has approximately 2 million documents and the physical size of it is
> about 10 GB. We run it as a tomcat web application on a Fedora Core 4
> server with duo Xeon 3.2GHz processors and 4GB RAM.
>
> We receive about 46500 web search requests a day (ranging from 50-300
> requests per 5 minutes across the day). Each web search request could
> spawn about one to three actual Lucene searches. Our average response
> time (calculated from the server side - and so excludes network
> latency), is about 2 seconds.
>
> Does this timing of 2 seconds appear plausible for Lucene, based on
> the machine specifications above.
>
>
> Our index is slightly more complex (with multiple fields like title,
> location, site, content). For example, a search for "Linux and Lucene"
> related entries in "Australia" might result in lucene searches for:
>
> ((title:linux^1.0 title:lucene^1.0)^4.0)
> +((
> +(title:linux^5.0 location:linux^1.5 content:linux^1.0)
> +(title:lucene^5.0 location:lucene^1.5 content:lucene^1.0))
> ((+(+content:linux +content:lucene)) +(site:contentsite1
> site:contentsite2 site:contentsite3 site:contentsite4
> site:contentsite5 site:contentsite6 site:contentsite7)))^0.01))
> +location:australia)
> +newsdate:[20061107 TO 20061208]
> +region:au)
> -jobsite:badsite1 -region:badregion1 -jobsite:badsite2
> -jobsite:badsite3 -jobsite:badsite4
>
> Does anyone have ideas or could point us to resources that would allow
> us to improve this performance? 2 seconds response added with network
> latency gives an impression of "slowness" of our site that we are
> trying to reduce.
>
> Thank you.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_78689_31482050.1165581452073--

From java-user-return-24904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 08 14:12:24 2006
Return-Path: <java-user-return-24904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9639 invoked from network); 8 Dec 2006 14:12:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 14:12:22 -0000
Received: (qmail 31297 invoked by uid 500); 8 Dec 2006 14:12:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31263 invoked by uid 500); 8 Dec 2006 14:12:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31252 invoked by uid 99); 8 Dec 2006 14:12:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 06:12:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [129.240.10.15] (HELO pat.uio.no) (129.240.10.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 06:12:09 -0800
Received: from mail-mx6.uio.no ([129.240.10.47])
	by pat.uio.no with esmtp (Exim 4.43)
	id 1GsgS3-0007LN-Qh
	for java-user@lucene.apache.org; Fri, 08 Dec 2006 15:11:47 +0100
Received: from f3bdhcp15.uio.no ([129.240.92.144])
	by mail-mx6.uio.no with esmtpsa (SSLv3:RC4-MD5:128)
	(Exim 4.43)
	id 1GsgRt-00062g-Cw
	for java-user@lucene.apache.org; Fri, 08 Dec 2006 15:11:37 +0100
Subject: Custom Filter implementations - necessary to check if doc is
	deleted ?
From: =?ISO-8859-1?Q?=D8yvind?= Stegard <oyvind.stegard@usit.uio.no>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Organization: USIT, University of Oslo
Date: Fri, 08 Dec 2006 15:11:37 +0100
Message-Id: <1165587097.5093.8.camel@blackelf>
Mime-Version: 1.0
X-Mailer: Evolution 2.8.1 
Content-Transfer-Encoding: quoted-printable
X-UiO-Spam-info: not spam, SpamAssassin (score=-5.198, required 12,
	autolearn=disabled, AWL -0.20, UIO_MAIL_IS_INTERNAL -5.00)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have a question that is probably easy to answer for many of you. I'm
using some custom Filters with Lucene, mostly imlemented by using
TermEnum/TermDocs and checking some condition.

Is it necessary to check the deleted-status of documents that the filter
includes (and never actually include deleted documents), or is this done
elsewhere ?

I'm trying to implementent an inverted version of a filter, simply by
flipping all the bits in the BitSet, after the filter has finished
processing, but this gives me "attempt to access deleted document"
errors. Maybe I've misunderstood something fundamental about filters, or
what not ;).=20

Does TermDocs sometimes enumerate deleted docs, once it has been
seek()'ed to a TermEnum position ?

Regards,
=C3=98yvind S.
--=20
< =C3=98yvind Stegard < oyvind stegard at usit uio no >
 < USIT, University of Oslo


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 08 14:55:52 2006
Return-Path: <java-user-return-24905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31103 invoked from network); 8 Dec 2006 14:55:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 14:55:50 -0000
Received: (qmail 23680 invoked by uid 500); 8 Dec 2006 14:55:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23641 invoked by uid 500); 8 Dec 2006 14:55:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23630 invoked by uid 99); 8 Dec 2006 14:55:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 06:55:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of TAigner@wescodist.com designates 12.29.179.194 as permitted sender)
Received: from [12.29.179.194] (HELO smtp3.wescodist.com) (12.29.179.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 06:55:39 -0800
Received: from EMAIL02.wescodist.com ([207.152.236.124]) by smtp3.wescodist.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 8 Dec 2006 09:55:12 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Reading Performance
Date: Fri, 8 Dec 2006 09:55:11 -0500
Message-ID: <6B6D3063DF0A7A4DB8A989D40C61BEB302863A48@EMAIL02.wescodist.com>
In-Reply-To: <6B6D3063DF0A7A4DB8A989D40C61BEB3027FF156@EMAIL02.wescodist.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Reading Performance
Thread-Index: AccaLfDFI/Hxo/lnR02EFTEZdQzVSwAAH5dwACpuHvA=
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Dec 2006 14:55:12.0649 (UTC) FILETIME=[DD01CF90:01C71AD8]
X-Virus-Checked: Checked by ClamAV on apache.org

I have tried the HitsCollector and the time has improved ~ 3/4 a second
on the searching.  I still get really bad times when two or more people
ask for data at the same time.  The problem doesn't seem to be in
writing the files, it's in getting data from the index when two or more
people ask for large recordsets back (I can take all the I/O statements
out and still see the performance bottleneck)

Tom


hc =3D new HitCollector() {
	BufferedWriter fw2 =3D null;
	public void collect(int id, float score) {
		    try=20
		      {
		            	=09
		           Document doc =3D is.doc(id);
		           if (fw2 =3D=3D null)
		            {
		            	fw2 =3D new BufferedWriter( new
FileWriter( "WHERETOWRITEFILE"), 8196 );
		            }
		            fw2.write(doc.get("field1") + "\n");
		            fw2.flush();
		            }
		     catch (Exception ex) {
		            	=09
		        }
		   }
};		       =20
is.search(query, hc);


-----Original Message-----
From: Aigner, Thomas [mailto:TAigner@WescoDist.com]=20
Sent: Thursday, December 07, 2006 1:36 PM
To: java-user@lucene.apache.org
Subject: RE: Reading Performance

Thanks Grant and Erik for your suggestions.  I will try both of them and
let you know if I see a marked increase in speed.

Tom


-----Original Message-----
From: Grant Ingersoll [mailto:grant.ingersoll@gmail.com]=20
Sent: Thursday, December 07, 2006 1:24 PM
To: java-user@lucene.apache.org
Subject: Re: Reading Performance

Have you done any profiling to identify hotspots in Lucene versus =20
your application?

You might look into the FieldSelector code (used in IndexReader) in =20
the Trunk version of Lucene could be used to only load the fields you =20
are interested when getting the document from disk.  This can be =20
useful if you have large fields that are being loaded that you don't =20
necessarily need (thus skipping them).

Also, do you need the BufferedWriter construction and check in side =20
the loop?  Probably small in comparison to loading, but  It seems =20
like it is only created once, why have it in the loop?



On Dec 7, 2006, at 1:14 PM, Aigner, Thomas wrote:

>
>
>
>
> Howdy all,
>
>
>
>       I have a question on reading many documents and time to do this.
> I have a loop on the hits object reading a record, then writing it =20
> to a
> file.  When there is only 1 user on the Index Searcher, this =20
> process to
> read say 100,000 takes around 3 seconds.  This is slow, but can be
> acceptable.  When a few more users do searchers, this time to just =20
> read
> from the hits object becomes well over 10 seconds, sometimes even 30+
> seconds.  Is there a better way to read through and do something with
> the hits information?  And yes, I have to read all of them to do this
> particular task.
>
>
>
> for (int i =3D 0;(i <=3D hits.length() - 1); i++)
>
> {
>
>
>
>       if (fw =3D=3D null)
>
>       {
>
>             fw =3D new BufferedWriter( new FileWriter=20
> ( searchWriteSpec ),
> 8196) ;
>
>       }
>
>
>
>       //Write Out records
>
>       String tmpHold =3D "";
>
> tmpHold =3D hits.doc(i).get("somefield1") + hits.doc(i).get=20
> ("somefield2");
>
>
>
>       fw.write(tmpHold + "\n" );
>
>
>
> }
>
>
>
> Any ideas on how to speed this up especially with multiple users?  =20
> Each
> user gets their own class which has the above code in it.
>
>
>
> Thanks,
>
> Tom
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 08 22:48:26 2006
Return-Path: <java-user-return-24906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98808 invoked from network); 8 Dec 2006 22:48:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 22:48:25 -0000
Received: (qmail 81417 invoked by uid 500); 8 Dec 2006 22:48:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81381 invoked by uid 500); 8 Dec 2006 22:48:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81370 invoked by uid 99); 8 Dec 2006 22:48:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 14:48:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of andrewhudson@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 14:48:14 -0800
Received: by wr-out-0506.google.com with SMTP id i21so613982wra
        for <java-user@lucene.apache.org>; Fri, 08 Dec 2006 14:47:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=ATJbaXn+jUw0XwrybDFtMJEYuE0S29IH53wUBaepqA+R55Mn05ziWji3KkKVqvIGBX07o5e3AIi38A7sTdZ5DD+2dEeZNwf1mq/rVJLtrFtz/hEGQqo0GLZC2h68fKt1mRt4NnD5oWBfDodibBbF7jeOFA1Dt1VuW7v3dXRrQmc=
Received: by 10.90.72.10 with SMTP id u10mr4887748aga.1165618074105;
        Fri, 08 Dec 2006 14:47:54 -0800 (PST)
Received: by 10.90.52.14 with HTTP; Fri, 8 Dec 2006 14:47:54 -0800 (PST)
Message-ID: <9d8b72d90612081447sf8d0b07sca7b9047b01a977a@mail.gmail.com>
Date: Fri, 8 Dec 2006 16:47:54 -0600
From: "Andrew Hudson" <andrewhudson@gmail.com>
Reply-To: ahudson@indeed.com
To: java-user@lucene.apache.org
Subject: Re: Reading Performance
In-Reply-To: <6B6D3063DF0A7A4DB8A989D40C61BEB302863A48@EMAIL02.wescodist.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29011_24987509.1165618074072"
References: <6B6D3063DF0A7A4DB8A989D40C61BEB3027FF156@EMAIL02.wescodist.com>
	 <6B6D3063DF0A7A4DB8A989D40C61BEB302863A48@EMAIL02.wescodist.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29011_24987509.1165618074072
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think I've seen this problem when you use Lucene's built in delete
mechanism,
IndexReader.deleteDocument I believe.  The problem was it was synchronizing
on a java BitSet, which totally killed performance when more than one
process
was using the same IndexReader.  Better way to do deletes is to use your own
BitSet in combination with a HitCollector and just ignore docs that are
deleted.

On 12/8/06, Aigner, Thomas <TAigner@wescodist.com> wrote:
>
> I have tried the HitsCollector and the time has improved ~ 3/4 a second
> on the searching.  I still get really bad times when two or more people
> ask for data at the same time.  The problem doesn't seem to be in
> writing the files, it's in getting data from the index when two or more
> people ask for large recordsets back (I can take all the I/O statements
> out and still see the performance bottleneck)
>
> Tom
>
>
> hc = new HitCollector() {
>         BufferedWriter fw2 = null;
>         public void collect(int id, float score) {
>                     try
>                       {
>
>                            Document doc = is.doc(id);
>                            if (fw2 == null)
>                             {
>                                 fw2 = new BufferedWriter( new
> FileWriter( "WHERETOWRITEFILE"), 8196 );
>                             }
>                             fw2.write(doc.get("field1") + "\n");
>                             fw2.flush();
>                             }
>                      catch (Exception ex) {
>
>                         }
>                    }
> };
> is.search(query, hc);
>
>
> -----Original Message-----
> From: Aigner, Thomas [mailto:TAigner@WescoDist.com]
> Sent: Thursday, December 07, 2006 1:36 PM
> To: java-user@lucene.apache.org
> Subject: RE: Reading Performance
>
> Thanks Grant and Erik for your suggestions.  I will try both of them and
> let you know if I see a marked increase in speed.
>
> Tom
>
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:grant.ingersoll@gmail.com]
> Sent: Thursday, December 07, 2006 1:24 PM
> To: java-user@lucene.apache.org
> Subject: Re: Reading Performance
>
> Have you done any profiling to identify hotspots in Lucene versus
> your application?
>
> You might look into the FieldSelector code (used in IndexReader) in
> the Trunk version of Lucene could be used to only load the fields you
> are interested when getting the document from disk.  This can be
> useful if you have large fields that are being loaded that you don't
> necessarily need (thus skipping them).
>
> Also, do you need the BufferedWriter construction and check in side
> the loop?  Probably small in comparison to loading, but  It seems
> like it is only created once, why have it in the loop?
>
>
>
> On Dec 7, 2006, at 1:14 PM, Aigner, Thomas wrote:
>
> >
> >
> >
> >
> > Howdy all,
> >
> >
> >
> >       I have a question on reading many documents and time to do this.
> > I have a loop on the hits object reading a record, then writing it
> > to a
> > file.  When there is only 1 user on the Index Searcher, this
> > process to
> > read say 100,000 takes around 3 seconds.  This is slow, but can be
> > acceptable.  When a few more users do searchers, this time to just
> > read
> > from the hits object becomes well over 10 seconds, sometimes even 30+
> > seconds.  Is there a better way to read through and do something with
> > the hits information?  And yes, I have to read all of them to do this
> > particular task.
> >
> >
> >
> > for (int i = 0;(i <= hits.length() - 1); i++)
> >
> > {
> >
> >
> >
> >       if (fw == null)
> >
> >       {
> >
> >             fw = new BufferedWriter( new FileWriter
> > ( searchWriteSpec ),
> > 8196) ;
> >
> >       }
> >
> >
> >
> >       //Write Out records
> >
> >       String tmpHold = "";
> >
> > tmpHold = hits.doc(i).get("somefield1") + hits.doc(i).get
> > ("somefield2");
> >
> >
> >
> >       fw.write(tmpHold + "\n" );
> >
> >
> >
> > }
> >
> >
> >
> > Any ideas on how to speed this up especially with multiple users?
> > Each
> > user gets their own class which has the above code in it.
> >
> >
> >
> > Thanks,
> >
> > Tom
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
>
> ------------------------------------------------------
> Grant Ingersoll
> http://www.grantingersoll.com/
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_29011_24987509.1165618074072--

From java-user-return-24907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 08 23:42:04 2006
Return-Path: <java-user-return-24907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9243 invoked from network); 8 Dec 2006 23:42:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 23:42:03 -0000
Received: (qmail 47101 invoked by uid 500); 8 Dec 2006 23:42:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47077 invoked by uid 500); 8 Dec 2006 23:42:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47066 invoked by uid 99); 8 Dec 2006 23:42:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 15:42:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 15:41:53 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D11A45B763; Fri,  8 Dec 2006 15:41:32 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id A9FA47F403
	for <java-user@lucene.apache.org>; Fri,  8 Dec 2006 15:41:32 -0800 (PST)
Date: Fri, 8 Dec 2006 15:41:32 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Custom Filter implementations - necessary to check if doc is
 deleted ?
In-Reply-To: <1165587097.5093.8.camel@blackelf>
Message-ID: <Pine.LNX.4.58.0612081527240.31404@hal.rescomp.berkeley.edu>
References: <1165587097.5093.8.camel@blackelf>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Is it necessary to check the deleted-status of documents that the filter
: includes (and never actually include deleted documents), or is this done
	...
: I'm trying to implementent an inverted version of a filter, simply by
: flipping all the bits in the BitSet, after the filter has finished
: processing, but this gives me "attempt to access deleted document"
	...
: Does TermDocs sometimes enumerate deleted docs, once it has been
: seek()'ed to a TermEnum position ?

TermDocs does in fact skip over deleted docs (search for "deletedDocs" in
SegmentTermDocs to see where) but by flipping all the bits to get the
non-matches you make it neccessary for your filter to explicitly check for
deletions itself.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 08 23:49:44 2006
Return-Path: <java-user-return-24908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10467 invoked from network); 8 Dec 2006 23:49:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2006 23:49:44 -0000
Received: (qmail 54745 invoked by uid 500); 8 Dec 2006 23:49:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54708 invoked by uid 500); 8 Dec 2006 23:49:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54681 invoked by uid 99); 8 Dec 2006 23:49:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 15:49:42 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of vnguyen@ur.com designates 63.241.148.49 as permitted sender)
Received: from [63.241.148.49] (HELO iris.ur.com) (63.241.148.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 15:49:31 -0800
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by iris.ur.com with ESMTP; 08 Dec 2006 23:50:09 +0000
X-OriginatingIP: 10.6.134.35
X-InternalServer: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 8 Dec 2006 18:47:33 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C71B23.75181C92"
Subject: Filter question
Date: Fri, 8 Dec 2006 18:49:09 -0500
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E8117807C70@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Filter question
thread-index: AccbI3QKmpvH74ibQxK2+cBIJnOAZA==
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Dec 2006 23:47:33.0444 (UTC) FILETIME=[3B345840:01C71B23]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C71B23.75181C92
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

I have a query that uses a filter... looking something like this:

=20

            BooleanQuery filterQuery =3D new BooleanQuery();

            // add criteria

            QueryFilter qf =3D new QueryFilter(filterQuery);

            CachingWrapperFilter cwf =3D new CachingWrapperFilter(qf);

=20

            BooleanQuery query =3D new BooleanQuery();

            // add criteria

=20

            // cached searcher

            searcher =3D index.getSearcher();

=20

            Sort sort =3D new Sort();

=20

            Hits =3D searcher.search(query, cwf, sort);

=20

That works fine if there are some criteria in filterQuery and query.
But sometimes, the bean I'm passing in will not pass any criteria into
the filterQuery part.  If that's the case, cwf looks like this:
CachingWrapperFilter(QueryFilter())

=20

Passing that into the Hits =3D searcher.search(query, cwf, sort) method
will result in no results.  If there are no criteria in the filter,
shouldn't that return all the results based on the query?

=20

For now... I've resorted to doing this:

=20

            Hits hits =3D null;

            if(Validate.isEmpty(filterQuery.toString()))          // own
method to check if

            {                                                     //
string is null or empty

                hits =3D searcher.search(query, sort);

            }

            else if(Validate.isEmpty(query.toString()))

{

                hits =3D searcher.search(filterQuery, sort);

            }

            else

            {

                hits =3D searcher.search(query, cwf, sort);

            }

=20

Is this the best way to go about this?? Or is there a more elegant way?

=20


------_=_NextPart_001_01C71B23.75181C92--

From java-user-return-24909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 09 00:29:54 2006
Return-Path: <java-user-return-24909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20909 invoked from network); 9 Dec 2006 00:29:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 00:29:53 -0000
Received: (qmail 12134 invoked by uid 500); 9 Dec 2006 00:29:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12105 invoked by uid 500); 9 Dec 2006 00:29:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12094 invoked by uid 99); 9 Dec 2006 00:29:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 16:29:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 16:29:43 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1171330nfc
        for <java-user@lucene.apache.org>; Fri, 08 Dec 2006 16:29:21 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TqoxXMGm9Pti8hOPQS9HLjhdKzVtKSCJfscdGcx6PM7zHCKUJtJJwcZETVXV7C0C79fvOmwg0zmw2kJ/+7XS0AQEvVGhYDwDjKBBVNKakXEyiX15NDbm4qeR1MdKyX63duzwiW2zCWn9dK3ddk/NtRxjKNGo84yE9Y5+zCLwEw4=
Received: by 10.82.169.4 with SMTP id r4mr644310bue.1165624160592;
        Fri, 08 Dec 2006 16:29:20 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Fri, 8 Dec 2006 16:29:20 -0800 (PST)
Message-ID: <359a92830612081629scd35198i5ed4be38f427b086@mail.gmail.com>
Date: Fri, 8 Dec 2006 19:29:20 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Reading Performance
In-Reply-To: <6B6D3063DF0A7A4DB8A989D40C61BEB302863A48@EMAIL02.wescodist.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_88390_22045690.1165624160558"
References: <6B6D3063DF0A7A4DB8A989D40C61BEB3027FF156@EMAIL02.wescodist.com>
	 <6B6D3063DF0A7A4DB8A989D40C61BEB302863A48@EMAIL02.wescodist.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_88390_22045690.1165624160558
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm stumped. It seems like it might be time to haul a profiler out. I'm
particularly surprised because I put together a test system that fired a
bunch of threads at a searcher and saw nothing like you're seeing even up to
the 30 simultaneous requests running.

Do you know whether you're I/O bound, CPU bound, or???

It really sounds like there is some sort of synchronization issue, but
whether it's in Lucene or your code or some other system resource
contention, I have no idea.

I'd probably write a small program that spawned off several search threads
simultaneously to try to narrow it down (do something creative so you don't
just re-execute the same query and, perhaps, get skewed results due to
caching). That way, you could run it all on an isolated box and really pin
where the issue lives rather than having to wade through all the other stuff
that's surely running on your server. I'd really, really, really start with
*only* the lucene search, then add in other parts of my system until it
broke. Of course, if it broke with just the Lucene you wouldn't have added
much <G>. This approach should also give you a much easier environment to
run a profiler on than, say, a server.

It should be fairly simple to do just the Lucene part, but the part about
"adding other parts of your system" may be prohibitively expensive. But it's
a thought.....

Of course, Andrew's suggestion might make it all unnecessary...

Not a huge help I know, but it's the best I can do.....

Erick

On 12/8/06, Aigner, Thomas <TAigner@wescodist.com> wrote:
>
> I have tried the HitsCollector and the time has improved ~ 3/4 a second
> on the searching.  I still get really bad times when two or more people
> ask for data at the same time.  The problem doesn't seem to be in
> writing the files, it's in getting data from the index when two or more
> people ask for large recordsets back (I can take all the I/O statements
> out and still see the performance bottleneck)
>
> Tom
>
>
> hc = new HitCollector() {
>         BufferedWriter fw2 = null;
>         public void collect(int id, float score) {
>                     try
>                       {
>
>                            Document doc = is.doc(id);
>                            if (fw2 == null)
>                             {
>                                 fw2 = new BufferedWriter( new
> FileWriter( "WHERETOWRITEFILE"), 8196 );
>                             }
>                             fw2.write(doc.get("field1") + "\n");
>                             fw2.flush();
>                             }
>                      catch (Exception ex) {
>
>                         }
>                    }
> };
> is.search(query, hc);
>
>
> -----Original Message-----
> From: Aigner, Thomas [mailto:TAigner@WescoDist.com]
> Sent: Thursday, December 07, 2006 1:36 PM
> To: java-user@lucene.apache.org
> Subject: RE: Reading Performance
>
> Thanks Grant and Erik for your suggestions.  I will try both of them and
> let you know if I see a marked increase in speed.
>
> Tom
>
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:grant.ingersoll@gmail.com]
> Sent: Thursday, December 07, 2006 1:24 PM
> To: java-user@lucene.apache.org
> Subject: Re: Reading Performance
>
> Have you done any profiling to identify hotspots in Lucene versus
> your application?
>
> You might look into the FieldSelector code (used in IndexReader) in
> the Trunk version of Lucene could be used to only load the fields you
> are interested when getting the document from disk.  This can be
> useful if you have large fields that are being loaded that you don't
> necessarily need (thus skipping them).
>
> Also, do you need the BufferedWriter construction and check in side
> the loop?  Probably small in comparison to loading, but  It seems
> like it is only created once, why have it in the loop?
>
>
>
> On Dec 7, 2006, at 1:14 PM, Aigner, Thomas wrote:
>
> >
> >
> >
> >
> > Howdy all,
> >
> >
> >
> >       I have a question on reading many documents and time to do this.
> > I have a loop on the hits object reading a record, then writing it
> > to a
> > file.  When there is only 1 user on the Index Searcher, this
> > process to
> > read say 100,000 takes around 3 seconds.  This is slow, but can be
> > acceptable.  When a few more users do searchers, this time to just
> > read
> > from the hits object becomes well over 10 seconds, sometimes even 30+
> > seconds.  Is there a better way to read through and do something with
> > the hits information?  And yes, I have to read all of them to do this
> > particular task.
> >
> >
> >
> > for (int i = 0;(i <= hits.length() - 1); i++)
> >
> > {
> >
> >
> >
> >       if (fw == null)
> >
> >       {
> >
> >             fw = new BufferedWriter( new FileWriter
> > ( searchWriteSpec ),
> > 8196) ;
> >
> >       }
> >
> >
> >
> >       //Write Out records
> >
> >       String tmpHold = "";
> >
> > tmpHold = hits.doc(i).get("somefield1") + hits.doc(i).get
> > ("somefield2");
> >
> >
> >
> >       fw.write(tmpHold + "\n" );
> >
> >
> >
> > }
> >
> >
> >
> > Any ideas on how to speed this up especially with multiple users?
> > Each
> > user gets their own class which has the above code in it.
> >
> >
> >
> > Thanks,
> >
> > Tom
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
>
> ------------------------------------------------------
> Grant Ingersoll
> http://www.grantingersoll.com/
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_88390_22045690.1165624160558--

From java-user-return-24910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 09 01:26:53 2006
Return-Path: <java-user-return-24910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38869 invoked from network); 9 Dec 2006 01:26:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 01:26:52 -0000
Received: (qmail 95686 invoked by uid 500); 9 Dec 2006 01:26:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95637 invoked by uid 500); 9 Dec 2006 01:26:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95609 invoked by uid 99); 9 Dec 2006 01:26:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 17:26:38 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.21 as permitted sender)
Received: from [209.63.42.21] (HELO ns1.mainstreamdata.com) (209.63.42.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 17:26:10 -0800
Received: from localhost (localhost [127.0.0.1])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 007BB8E0
	for <java-user@lucene.apache.org>; Fri,  8 Dec 2006 18:25:49 -0700 (MST)
Received: from ns1.mainstreamdata.com ([127.0.0.1])
	by localhost (ns1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 29684-06 for <java-user@lucene.apache.org>;
	Fri, 8 Dec 2006 18:25:45 -0700 (MST)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id DD6B53B4
	for <java-user@lucene.apache.org>; Fri,  8 Dec 2006 18:25:45 -0700 (MST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C71B30.F33C3A49"
Subject: de-boosting fields
Date: Fri, 8 Dec 2006 18:25:45 -0700
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB44898C2@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: de-boosting fields
thread-index: AccbL3ZLT5e5W6VaQbO0ygfA54NA7g==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at mainstreamdata.com
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C71B30.F33C3A49
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have a collection of documents for which I've always returned the
results sorted on the date/time of the document (using a sort object in
the search method on my Searcher).  It works great.

=20

Suddenly, I have a requirement to return the documents in relevancy
order.  So, that's easy (I thought); simply call search() without a sort
object.  Unfortunately, the results I got were not what I expected.  So,
I added some code to have lucene explain how it was getting the score
and then things became clearer. =20

=20

Each document has all of the words in the document indexed in a field
called "Body" (vanilla unstored, indexed field).  However, there is also
some category information which is kept in a keyword field called
"Category".  A document may belong to a large number of categories
(10-70). =20

=20

When I search, I generate a query which says "give me all of the
documents, in relevancy order, which contain one or more of the
following words: word1, word2, word 3-and it also must be in at least
one of the following categories: category1, category2, ..., categoryN.

=20

What I found was that lucene was using the category information as part
of what it uses to compute the relevancy score (in hindsight, not too
surprising).  The problem is that the numbers from the category hits in
"Category" overwhelm the numbers from the word hits in the "Body".  So,
my most relevant document may only have a single word hit and a document
way down in the list (in terms of relevancy) might have a number of word
hits.  For example, in one search, the top scoring document scored
.2650.  Of that, the category information contributed .2635 to that
score-meaning the word hits only contributed .0015 to the relevancy.
This is the opposite of what I want.

=20

I'd be happy to simply eliminate the category information from the score
computation all together (base relevancy scores only on the words which
hit in the "Body" field).  Another solution would be to change the boost
on the category information to some small number (zero?) or raise the
Body field boost to a much larger number or both.

=20

What is the best way to do this?  Is changing the boost the right
answer?  Can a field's boost be zero?  Is there a way to write a custom
scorer that gets inserted somewhere?  Any suggestions would be
appreciated.

=20

Scott=20

=20

=20


------_=_NextPart_001_01C71B30.F33C3A49--

From java-user-return-24911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 09 02:06:55 2006
Return-Path: <java-user-return-24911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45698 invoked from network); 9 Dec 2006 02:06:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 02:06:54 -0000
Received: (qmail 34422 invoked by uid 500); 9 Dec 2006 02:06:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34391 invoked by uid 500); 9 Dec 2006 02:06:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34380 invoked by uid 99); 9 Dec 2006 02:06:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 18:06:56 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 18:06:45 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1188220nfc
        for <java-user@lucene.apache.org>; Fri, 08 Dec 2006 18:06:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ATfmz7x9yQzfi5+JPL2/GI2ADYLL9FGad3vTvv9XHDdUVLceasjVXN4dmwU4JF2cj2XjDjHBR7Zmx/wQ4zHzBO4PZKWm6b35OH3ffds7xRNCSRW08+MXeNVpqte5kYNQv9JQx4hYNC4vroGeeCfHszoiXgzKHwv71Of3ddYiGMI=
Received: by 10.82.167.5 with SMTP id p5mr655794bue.1165629983329;
        Fri, 08 Dec 2006 18:06:23 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Fri, 8 Dec 2006 18:06:23 -0800 (PST)
Message-ID: <359a92830612081806s60028ee1y5986b981dcb62d2a@mail.gmail.com>
Date: Fri, 8 Dec 2006 21:06:23 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: de-boosting fields
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB44898C2@exchange.slc.mainstreamdata.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_88986_6065765.1165629983223"
References: <55F9EF953014514EB6BEE1F5198CEEB44898C2@exchange.slc.mainstreamdata.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_88986_6065765.1165629983223
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've certainly seen references to writing custom scorers, so it's possible.
you might find valuable hints by searching the mail archive. I'll leave it
to the more expert folks to suggest which is your best option.

Although (and I'm talking beyond my competence here), it *may* work for you
to assemble a Filter for the category part of your query and use that
instead of including the category in your query. As I understand it, filters
don't contribute (or all contribute identically) to the score, leaving the
search you're doing on body to determine your relevance, which seems like
what you're after. Filters even work with something called a
ConstantScoreQuery as I remember, which is a hint <G>.

But again, don't be surprised if one of the more expert folks comes up with
a *much* better idea <G>

Best
Erick



On 12/8/06, Scott Smith <ssmith@mainstreamdata.com> wrote:
>
> I have a collection of documents for which I've always returned the
> results sorted on the date/time of the document (using a sort object in
> the search method on my Searcher).  It works great.
>
>
>
> Suddenly, I have a requirement to return the documents in relevancy
> order.  So, that's easy (I thought); simply call search() without a sort
> object.  Unfortunately, the results I got were not what I expected.  So,
> I added some code to have lucene explain how it was getting the score
> and then things became clearer.
>
>
>
> Each document has all of the words in the document indexed in a field
> called "Body" (vanilla unstored, indexed field).  However, there is also
> some category information which is kept in a keyword field called
> "Category".  A document may belong to a large number of categories
> (10-70).
>
>
>
> When I search, I generate a query which says "give me all of the
> documents, in relevancy order, which contain one or more of the
> following words: word1, word2, word 3-and it also must be in at least
> one of the following categories: category1, category2, ..., categoryN.
>
>
>
> What I found was that lucene was using the category information as part
> of what it uses to compute the relevancy score (in hindsight, not too
> surprising).  The problem is that the numbers from the category hits in
> "Category" overwhelm the numbers from the word hits in the "Body".  So,
> my most relevant document may only have a single word hit and a document
> way down in the list (in terms of relevancy) might have a number of word
> hits.  For example, in one search, the top scoring document scored
> .2650.  Of that, the category information contributed .2635 to that
> score-meaning the word hits only contributed .0015 to the relevancy.
> This is the opposite of what I want.
>
>
>
> I'd be happy to simply eliminate the category information from the score
> computation all together (base relevancy scores only on the words which
> hit in the "Body" field).  Another solution would be to change the boost
> on the category information to some small number (zero?) or raise the
> Body field boost to a much larger number or both.
>
>
>
> What is the best way to do this?  Is changing the boost the right
> answer?  Can a field's boost be zero?  Is there a way to write a custom
> scorer that gets inserted somewhere?  Any suggestions would be
> appreciated.
>
>
>
> Scott
>
>
>
>
>
>
>

------=_Part_88986_6065765.1165629983223--

From java-user-return-24912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 09 04:23:17 2006
Return-Path: <java-user-return-24912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70375 invoked from network); 9 Dec 2006 04:23:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 04:23:16 -0000
Received: (qmail 35650 invoked by uid 500); 9 Dec 2006 04:23:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35613 invoked by uid 500); 9 Dec 2006 04:23:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35602 invoked by uid 99); 9 Dec 2006 04:23:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 20:23:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Dec 2006 20:23:05 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7F12B5B763; Fri,  8 Dec 2006 20:22:39 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 76C507F403
	for <java-user@lucene.apache.org>; Fri,  8 Dec 2006 20:22:39 -0800 (PST)
Date: Fri, 8 Dec 2006 20:22:39 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Reading Performance
In-Reply-To: <359a92830612081629scd35198i5ed4be38f427b086@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0612082017490.18144@hal.rescomp.berkeley.edu>
References: <6B6D3063DF0A7A4DB8A989D40C61BEB3027FF156@EMAIL02.wescodist.com>
  <6B6D3063DF0A7A4DB8A989D40C61BEB302863A48@EMAIL02.wescodist.com>
 <359a92830612081629scd35198i5ed4be38f427b086@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > on the searching.  I still get really bad times when two or more people
: > ask for data at the same time.  The problem doesn't seem to be in
: > writing the files, it's in getting data from the index when two or more
: > people ask for large recordsets back (I can take all the I/O statements
: > out and still see the performance bottleneck)

I'm not sure why it would be particularly bad when dealing with concurrent
requests, but as a general rules you want to avoid calling doc(n) inside
of a HitCollector, particularly given your use case...

: >                            Document doc = is.doc(id);
: >                            if (fw2 == null)
: >                             {
: >                                 fw2 = new BufferedWriter( new
: > FileWriter( "WHERETOWRITEFILE"), 8196 );
: >                             }
: >                             fw2.write(doc.get("field1") + "\n");
: >                             fw2.flush();

...if all you are doing is pulling out a single stored field, then you'll
see much better performance if you index that data in another field
UN_TOKENIZED and read it out of the FieldCache ... alternatley you could
use a FieldSelector so that only the stored value of field1 (and not any
other stored fields) are read by the doc(id) call.

: > is.search(query, hc);

i assume you are, reusing the same IndexSearcher object for all of your
parallel threads right? ... otherwise that may explain the behavior you
are seing as well.


: >
: >
: > -----Original Message-----
: > From: Aigner, Thomas [mailto:TAigner@WescoDist.com]
: > Sent: Thursday, December 07, 2006 1:36 PM
: > To: java-user@lucene.apache.org
: > Subject: RE: Reading Performance
: >
: > Thanks Grant and Erik for your suggestions.  I will try both of them and
: > let you know if I see a marked increase in speed.
: >
: > Tom
: >
: >
: > -----Original Message-----
: > From: Grant Ingersoll [mailto:grant.ingersoll@gmail.com]
: > Sent: Thursday, December 07, 2006 1:24 PM
: > To: java-user@lucene.apache.org
: > Subject: Re: Reading Performance
: >
: > Have you done any profiling to identify hotspots in Lucene versus
: > your application?
: >
: > You might look into the FieldSelector code (used in IndexReader) in
: > the Trunk version of Lucene could be used to only load the fields you
: > are interested when getting the document from disk.  This can be
: > useful if you have large fields that are being loaded that you don't
: > necessarily need (thus skipping them).
: >
: > Also, do you need the BufferedWriter construction and check in side
: > the loop?  Probably small in comparison to loading, but  It seems
: > like it is only created once, why have it in the loop?
: >
: >
: >
: > On Dec 7, 2006, at 1:14 PM, Aigner, Thomas wrote:
: >
: > >
: > >
: > >
: > >
: > > Howdy all,
: > >
: > >
: > >
: > >       I have a question on reading many documents and time to do this.
: > > I have a loop on the hits object reading a record, then writing it
: > > to a
: > > file.  When there is only 1 user on the Index Searcher, this
: > > process to
: > > read say 100,000 takes around 3 seconds.  This is slow, but can be
: > > acceptable.  When a few more users do searchers, this time to just
: > > read
: > > from the hits object becomes well over 10 seconds, sometimes even 30+
: > > seconds.  Is there a better way to read through and do something with
: > > the hits information?  And yes, I have to read all of them to do this
: > > particular task.
: > >
: > >
: > >
: > > for (int i = 0;(i <= hits.length() - 1); i++)
: > >
: > > {
: > >
: > >
: > >
: > >       if (fw == null)
: > >
: > >       {
: > >
: > >             fw = new BufferedWriter( new FileWriter
: > > ( searchWriteSpec ),
: > > 8196) ;
: > >
: > >       }
: > >
: > >
: > >
: > >       //Write Out records
: > >
: > >       String tmpHold = "";
: > >
: > > tmpHold = hits.doc(i).get("somefield1") + hits.doc(i).get
: > > ("somefield2");
: > >
: > >
: > >
: > >       fw.write(tmpHold + "\n" );
: > >
: > >
: > >
: > > }
: > >
: > >
: > >
: > > Any ideas on how to speed this up especially with multiple users?
: > > Each
: > > user gets their own class which has the above code in it.
: > >
: > >
: > >
: > > Thanks,
: > >
: > > Tom
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: > >
: >
: > ------------------------------------------------------
: > Grant Ingersoll
: > http://www.grantingersoll.com/
: >
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 09 08:07:30 2006
Return-Path: <java-user-return-24913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92090 invoked from network); 9 Dec 2006 08:07:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 08:07:30 -0000
Received: (qmail 33627 invoked by uid 500); 9 Dec 2006 08:07:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33599 invoked by uid 500); 9 Dec 2006 08:07:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33588 invoked by uid 99); 9 Dec 2006 08:07:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 00:07:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 00:07:21 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 159AA5B763; Sat,  9 Dec 2006 00:06:57 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id F293B7F403
	for <java-user@lucene.apache.org>; Sat,  9 Dec 2006 00:06:57 -0800 (PST)
Date: Sat, 9 Dec 2006 00:06:57 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Filter question
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E8117807C70@UREXCHVS3.ur.com>
Message-ID: <Pine.LNX.4.58.0612090003100.18144@hal.rescomp.berkeley.edu>
References: <0D6A3C278F4DC346B98DF4D2F1397E8117807C70@UREXCHVS3.ur.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: That works fine if there are some criteria in filterQuery and query.
: But sometimes, the bean I'm passing in will not pass any criteria into
: the filterQuery part.  If that's the case, cwf looks like this:
: CachingWrapperFilter(QueryFilter())
	...
: will result in no results.  If there are no criteria in the filter,
: shouldn't that return all the results based on the query?

No.  If you filter a query, the filter defines the super set of all
results you can get back -- if you have a filter that matches nothing,
then you can't get anything back.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 09 09:54:11 2006
Return-Path: <java-user-return-24914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24437 invoked from network); 9 Dec 2006 09:54:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 09:54:10 -0000
Received: (qmail 90009 invoked by uid 500); 9 Dec 2006 09:54:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89968 invoked by uid 500); 9 Dec 2006 09:54:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89957 invoked by uid 99); 9 Dec 2006 09:54:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 01:54:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 01:53:59 -0800
Received: (qmail 20096 invoked from network); 9 Dec 2006 09:53:36 -0000
Received: from unknown (HELO p5496fb96.dip.t-dialin.net) ([pbs]695637@[84.150.251.150])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 9 Dec 2006 09:53:36 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: de-boosting fields
Date: Sat, 9 Dec 2006 10:54:32 +0100
User-Agent: KMail/1.8.2
References: <55F9EF953014514EB6BEE1F5198CEEB44898C2@exchange.slc.mainstreamdata.com>
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB44898C2@exchange.slc.mainstreamdata.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200612091054.33065@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Saturday 09 December 2006 02:25, Scott Smith wrote:

> What is the best way to do this? =C2=A0Is changing the boost the right
> answer? =C2=A0Can a field's boost be zero?

Yes, just use: term1 term2 category1^0 category2^0. Erick's Filter idea is=
=20
also useful.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 09 11:02:26 2006
Return-Path: <java-user-return-24915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36515 invoked from network); 9 Dec 2006 11:02:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 11:02:25 -0000
Received: (qmail 26339 invoked by uid 500); 9 Dec 2006 11:02:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25259 invoked by uid 500); 9 Dec 2006 11:02:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25248 invoked by uid 99); 9 Dec 2006 11:02:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 03:02:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [129.240.10.15] (HELO pat.uio.no) (129.240.10.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 03:02:14 -0800
Received: from mail-mx1.uio.no ([129.240.10.29])
	by pat.uio.no with esmtp (Exim 4.43)
	id 1Gszxo-0004lX-LS
	for java-user@lucene.apache.org; Sat, 09 Dec 2006 12:01:52 +0100
Received: from 78.84-48-212.nextgentel.com ([84.48.212.78] helo=[10.0.0.8])
	by mail-mx1.uio.no with esmtpsa (SSLv3:RC4-MD5:128)
	(Exim 4.43)
	id 1Gszxh-0003Dq-H0
	for java-user@lucene.apache.org; Sat, 09 Dec 2006 12:01:45 +0100
Subject: Re: Custom Filter implementations - necessary to check if doc is
	deleted ?
From: =?ISO-8859-1?Q?=D8yvind?= Stegard <oyvind.stegard@usit.uio.no>
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0612081527240.31404@hal.rescomp.berkeley.edu>
References: <1165587097.5093.8.camel@blackelf>
	 <Pine.LNX.4.58.0612081527240.31404@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=UTF-8
Organization: USIT, University of Oslo
Date: Sat, 09 Dec 2006 12:01:47 +0100
Message-Id: <1165662107.5173.25.camel@blackelf>
Mime-Version: 1.0
X-Mailer: Evolution 2.8.1 
Content-Transfer-Encoding: quoted-printable
X-UiO-Spam-info: not spam, SpamAssassin (score=-5, required 12,
	autolearn=disabled, UIO_MAIL_IS_INTERNAL -5.00)
X-Virus-Checked: Checked by ClamAV on apache.org

2006-12-08 fre 15:41 -0800, Chris Hostetter:
> : Is it necessary to check the deleted-status of documents that the filte=
r
> : includes (and never actually include deleted documents), or is this don=
e
> 	...
> : I'm trying to implementent an inverted version of a filter, simply by
> : flipping all the bits in the BitSet, after the filter has finished
> : processing, but this gives me "attempt to access deleted document"
> 	...
> : Does TermDocs sometimes enumerate deleted docs, once it has been
> : seek()'ed to a TermEnum position ?
>=20
> TermDocs does in fact skip over deleted docs (search for "deletedDocs" in
> SegmentTermDocs to see where) but by flipping all the bits to get the
> non-matches you make it neccessary for your filter to explicitly check fo=
r
> deletions itself.
Yes, I figured this was the problem. I'm now going through the flipped
BitSet afterwords, and clearing any set bits for deleted docs. Works
nicely. Thanks.

=C3=98yvind
--=20
< =C3=98yvind Stegard < oyvind stegard at usit uio no >
 < USIT, UiO


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 09 13:24:47 2006
Return-Path: <java-user-return-24916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91800 invoked from network); 9 Dec 2006 13:24:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 13:24:45 -0000
Received: (qmail 19444 invoked by uid 500); 9 Dec 2006 13:24:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19321 invoked by uid 500); 9 Dec 2006 13:24:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19310 invoked by uid 99); 9 Dec 2006 13:24:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 05:24:44 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=NO_REAL_NAME,SPF_PASS,URI_NOVOWEL
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 09 Dec 2006 05:24:32 -0800
Received: (qmail 7624 invoked by uid 0); 9 Dec 2006 13:24:10 -0000
Received: from 80.47.247.247 by www001.gmx.net with HTTP;
 Sat, 09 Dec 2006 14:24:10 +0100 (CET)
Content-Type: multipart/mixed; boundary="========GMX15381165670650540046"
Date: Sat, 09 Dec 2006 14:24:10 +0100
From: TheRanger@gmx.net
Message-ID: <20061209132410.15380@gmx.net>
MIME-Version: 1.0
Subject: Questions about Lucene scoring (was: Lucene 1.2 - scoring formula
 needed)
To: "User " <java-user@lucene.apache.org>
X-Authenticated: #21808356
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Virus-Checked: Checked by ClamAV on apache.org

--========GMX15381165670650540046
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit

Hello Lucene users,

in the past, I asked a number of times about the scoring that was applied for Lucene 1.2 (which might also still be valid in current Lucene versions). At that time I was interested only based on curiosity, but now I would need it in order to write proper documentation.

At that time, I found answer on a higher level with the kind help of Joaquin Delgado in his posting ( http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200609.mbox/%3C45043CC5.3080103@oracle.com%3E ) who pointed me to this mailing list contribution ( http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200307.mbox/%3C000501c34ced$1f3b5c90$0500a8c0@ki%3E ).

According to these sources, the Lucene scoring formula in version 1.2 is:

score(q,d) = sum_t(tf_q * idf_t / norm_q * tf_d * idf_t / norm_d_t * 
boost_t) * coord_q_d

where

    * score (q,d) : score for document d given query q
    * sum_t : sum for all terms t in q
    * tf_q : the square root of the frequency of t in q
    * tf_d : the square root of the frequency of t in d
    * idf_t : log(numDocs/docFreq_t+1) + 1.0
    * numDocs : number of documents in index
    * docFreq_t : number of documents containing t
    * norm_q : sqrt(sum_t((tf_q*idf_t)^2))
    * norm_d_t : square root of number of tokens in d in the same field
      as t
    * boost_t : the user-specified boost for term t
    * coord_q_d : number of terms in both query and document / number of
      terms in query The coordination factor gives an AND-like boost to
      documents that contain, e.g., all three terms in a three word
      query over those that contain just two of the words.


This will allow me now to include the scoring formula as part of a documentation which will of great help. For verification, I have attached the formula as a picture generated from LaTeX. Please let me know if you find any mistake or if it think the formula could be simplified (I am not a mathematician...).

For even deeper understanding, I would like to ask a few further questions. I am not an expert in Information Retrieval, so I hope my questions are not too basic to be embarrassing. I read the paper by Erica Chisholm and Tamara G. Kolda (http://citeseer.ist.psu.edu/rd/12896645%2C198082%2C1%2C0.25%2CDownload/http://citeseer.ist.psu.edu/cache/papers/cs/8004/http:zSzzSzwww.ca.sandia.govzSz%7EtgkoldazSzpaperszSzornl-tm-13756.pdf/new-term-weighting-formulas.pdf) to get a better idea of what kind of vector space scoring strategies exist in order to compare the Lucene scoring a bit with the rest of the world. My aim is basically to understand the strategic decisions that where made in Lucene (version 1.2). I have 3 questions: 

1) tf_q and tf_d, basically all the term frequencies (TF) in the formula, are square roots in order to normalise the bias from large term frequencies. Looking through a number of IR papers, it seems that the "normal" way of normalising TF is log. What is the motivation for choosing square root instead? Is there a simple mathematical reason, or is there any empirical evidence that this is the better strategy. Are there any papers that argue for this decision (perhaps with empirical data or otherwise)?

2) In Lucenes scoring algorithm, the query part is normalised with norm_q which is sqrt(sum_t((tf_q*idf_t)^2)). In standard IR literature, this is referred to as Cosine Normalisation. The SMART system used this normalisation strategy, however only for the documents, not for the query. Queries were not normalised at all. The document terms in Lucene, on the other side, are only normalised with  norm_d_t : which is the square root of the number of tokens in d (which are also terms in my case) in the same field as t. On this I have two sub questions:

2a) Why does Lucene normalise with Cosine Normalisation for the query? In a range of different IR system variations (as shown in Chisholm and Kolda's paper in the table on page 8) queries where not normalised at all. Is there a good reason or perhaps any empirical evidence that would support this decision?

2b) What is the motivation for the normalisation imposed on the documents (norm_d_t) which I have not seen before in any other system. Again, does anybody have pointers to literature on this?

3) What is the motivation for the additional normalisation of coord_q_d despite what is already described above? Again, is there any literature that argues this normalisation?

The answer of these questions would greatly help me to link this scoring formula with other IR strategies. This would help me to appreciate the value of this great IR library even more. 

Any answer or partial answer on any of the questions would be greatly appreciated!

Best Regards and thanks in advance!
Karl

-- 
"Ein Herz für Kinder" - Ihre Spende hilft! Aktion: www.deutschlandsegelt.de
Unser Dankeschön: Ihr Name auf dem Segel der 1. deutschen America's Cup-Yacht!


--========GMX15381165670650540046
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--========GMX15381165670650540046--

From java-user-return-24917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 09 20:13:45 2006
Return-Path: <java-user-return-24917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67233 invoked from network); 9 Dec 2006 20:13:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 20:13:42 -0000
Received: (qmail 82492 invoked by uid 500); 9 Dec 2006 20:13:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82452 invoked by uid 500); 9 Dec 2006 20:13:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82430 invoked by uid 99); 9 Dec 2006 20:13:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 12:13:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.21 as permitted sender)
Received: from [209.63.42.21] (HELO ns1.mainstreamdata.com) (209.63.42.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 12:13:30 -0800
Received: from localhost (localhost [127.0.0.1])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 9D005127E
	for <java-user@lucene.apache.org>; Sat,  9 Dec 2006 13:13:09 -0700 (MST)
Received: from ns1.mainstreamdata.com ([127.0.0.1])
	by localhost (ns1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 09078-10 for <java-user@lucene.apache.org>;
	Sat, 9 Dec 2006 13:12:57 -0700 (MST)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 9BFBE81
	for <java-user@lucene.apache.org>; Sat,  9 Dec 2006 13:12:57 -0700 (MST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: de-boosting fields
Date: Sat, 9 Dec 2006 13:12:57 -0700
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB40646DB@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: de-boosting fields
thread-index: AccbN6N54pbOSdnRS7yF6KuQlG1nNwAlfcyz
References: <55F9EF953014514EB6BEE1F5198CEEB44898C2@exchange.slc.mainstreamdata.com> <359a92830612081806s60028ee1y5986b981dcb62d2a@mail.gmail.com>
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>, <java-user@lucene.apache.org>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at mainstreamdata.com
X-Virus-Checked: Checked by ClamAV on apache.org

I've googled for custom scorers and haven't found anything.  If anyone =
can point me to some posts, that would be appreciated. =20
=20
Sounds like setting the boost to zero works (see Daniel Naber's post), =
but that seems like overkill.
=20
I'll take a look at filters as well.

________________________________

From: Erick Erickson [mailto:erickerickson@gmail.com]
Sent: Fri 12/8/2006 7:06 PM
To: java-user@lucene.apache.org
Subject: Re: de-boosting fields



I've certainly seen references to writing custom scorers, so it's =
possible.
you might find valuable hints by searching the mail archive. I'll leave =
it
to the more expert folks to suggest which is your best option.

Although (and I'm talking beyond my competence here), it *may* work for =
you
to assemble a Filter for the category part of your query and use that
instead of including the category in your query. As I understand it, =
filters
don't contribute (or all contribute identically) to the score, leaving =
the
search you're doing on body to determine your relevance, which seems =
like
what you're after. Filters even work with something called a
ConstantScoreQuery as I remember, which is a hint <G>.

But again, don't be surprised if one of the more expert folks comes up =
with
a *much* better idea <G>

Best
Erick



On 12/8/06, Scott Smith <ssmith@mainstreamdata.com> wrote:
>
> I have a collection of documents for which I've always returned the
> results sorted on the date/time of the document (using a sort object =
in
> the search method on my Searcher).  It works great.
>
>
>
> Suddenly, I have a requirement to return the documents in relevancy
> order.  So, that's easy (I thought); simply call search() without a =
sort
> object.  Unfortunately, the results I got were not what I expected.  =
So,
> I added some code to have lucene explain how it was getting the score
> and then things became clearer.
>
>
>
> Each document has all of the words in the document indexed in a field
> called "Body" (vanilla unstored, indexed field).  However, there is =
also
> some category information which is kept in a keyword field called
> "Category".  A document may belong to a large number of categories
> (10-70).
>
>
>
> When I search, I generate a query which says "give me all of the
> documents, in relevancy order, which contain one or more of the
> following words: word1, word2, word 3-and it also must be in at least
> one of the following categories: category1, category2, ..., categoryN.
>
>
>
> What I found was that lucene was using the category information as =
part
> of what it uses to compute the relevancy score (in hindsight, not too
> surprising).  The problem is that the numbers from the category hits =
in
> "Category" overwhelm the numbers from the word hits in the "Body".  =
So,
> my most relevant document may only have a single word hit and a =
document
> way down in the list (in terms of relevancy) might have a number of =
word
> hits.  For example, in one search, the top scoring document scored
> .2650.  Of that, the category information contributed .2635 to that
> score-meaning the word hits only contributed .0015 to the relevancy.
> This is the opposite of what I want.
>
>
>
> I'd be happy to simply eliminate the category information from the =
score
> computation all together (base relevancy scores only on the words =
which
> hit in the "Body" field).  Another solution would be to change the =
boost
> on the category information to some small number (zero?) or raise the
> Body field boost to a much larger number or both.
>
>
>
> What is the best way to do this?  Is changing the boost the right
> answer?  Can a field's boost be zero?  Is there a way to write a =
custom
> scorer that gets inserted somewhere?  Any suggestions would be
> appreciated.
>
>
>
> Scott
>
>
>
>
>
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 09 21:01:15 2006
Return-Path: <java-user-return-24918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81600 invoked from network); 9 Dec 2006 21:01:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 21:01:14 -0000
Received: (qmail 90538 invoked by uid 500); 9 Dec 2006 21:01:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89957 invoked by uid 500); 9 Dec 2006 21:01:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89946 invoked by uid 99); 9 Dec 2006 21:01:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 13:01:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 13:01:04 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1399309nfc
        for <java-user@lucene.apache.org>; Sat, 09 Dec 2006 13:00:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lMxi2F2K4K6LzzF9Go/OpqebzXB9uheNY8EEiPFjlpoDAOBIuXwGekogAHjT4a/VOQx6CLnePwLXqDOufzxOYNr2JR9S5v89pIbpLFOpikZjGAsve9PDehOhlCLZG/02LWLwX5C3VP3JArfeE5xI5INhqxZoPHz6LZrsk+sgxMQ=
Received: by 10.82.120.14 with SMTP id s14mr523099buc.1165698042809;
        Sat, 09 Dec 2006 13:00:42 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Sat, 9 Dec 2006 13:00:42 -0800 (PST)
Message-ID: <359a92830612091300j62d11ba0sc4492de84ceaa115@mail.gmail.com>
Date: Sat, 9 Dec 2006 16:00:42 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: de-boosting fields
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB40646DB@exchange.slc.mainstreamdata.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_96564_28183596.1165698042783"
References: <55F9EF953014514EB6BEE1F5198CEEB44898C2@exchange.slc.mainstreamdata.com>
	 <359a92830612081806s60028ee1y5986b981dcb62d2a@mail.gmail.com>
	 <55F9EF953014514EB6BEE1F5198CEEB40646DB@exchange.slc.mainstreamdata.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_96564_28183596.1165698042783
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I meant search this mail archive....

Erick

On 12/9/06, Scott Smith <ssmith@mainstreamdata.com> wrote:
>
> I've googled for custom scorers and haven't found anything.  If anyone can
> point me to some posts, that would be appreciated.
>
> Sounds like setting the boost to zero works (see Daniel Naber's post), but
> that seems like overkill.
>
> I'll take a look at filters as well.
>
> ________________________________
>
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Fri 12/8/2006 7:06 PM
> To: java-user@lucene.apache.org
> Subject: Re: de-boosting fields
>
>
>
> I've certainly seen references to writing custom scorers, so it's
> possible.
> you might find valuable hints by searching the mail archive. I'll leave it
> to the more expert folks to suggest which is your best option.
>
> Although (and I'm talking beyond my competence here), it *may* work for
> you
> to assemble a Filter for the category part of your query and use that
> instead of including the category in your query. As I understand it,
> filters
> don't contribute (or all contribute identically) to the score, leaving the
> search you're doing on body to determine your relevance, which seems like
> what you're after. Filters even work with something called a
> ConstantScoreQuery as I remember, which is a hint <G>.
>
> But again, don't be surprised if one of the more expert folks comes up
> with
> a *much* better idea <G>
>
> Best
> Erick
>
>
>
> On 12/8/06, Scott Smith <ssmith@mainstreamdata.com> wrote:
> >
> > I have a collection of documents for which I've always returned the
> > results sorted on the date/time of the document (using a sort object in
> > the search method on my Searcher).  It works great.
> >
> >
> >
> > Suddenly, I have a requirement to return the documents in relevancy
> > order.  So, that's easy (I thought); simply call search() without a sort
> > object.  Unfortunately, the results I got were not what I expected.  So,
> > I added some code to have lucene explain how it was getting the score
> > and then things became clearer.
> >
> >
> >
> > Each document has all of the words in the document indexed in a field
> > called "Body" (vanilla unstored, indexed field).  However, there is also
> > some category information which is kept in a keyword field called
> > "Category".  A document may belong to a large number of categories
> > (10-70).
> >
> >
> >
> > When I search, I generate a query which says "give me all of the
> > documents, in relevancy order, which contain one or more of the
> > following words: word1, word2, word 3-and it also must be in at least
> > one of the following categories: category1, category2, ..., categoryN.
> >
> >
> >
> > What I found was that lucene was using the category information as part
> > of what it uses to compute the relevancy score (in hindsight, not too
> > surprising).  The problem is that the numbers from the category hits in
> > "Category" overwhelm the numbers from the word hits in the "Body".  So,
> > my most relevant document may only have a single word hit and a document
> > way down in the list (in terms of relevancy) might have a number of word
> > hits.  For example, in one search, the top scoring document scored
> > .2650.  Of that, the category information contributed .2635 to that
> > score-meaning the word hits only contributed .0015 to the relevancy.
> > This is the opposite of what I want.
> >
> >
> >
> > I'd be happy to simply eliminate the category information from the score
> > computation all together (base relevancy scores only on the words which
> > hit in the "Body" field).  Another solution would be to change the boost
> > on the category information to some small number (zero?) or raise the
> > Body field boost to a much larger number or both.
> >
> >
> >
> > What is the best way to do this?  Is changing the boost the right
> > answer?  Can a field's boost be zero?  Is there a way to write a custom
> > scorer that gets inserted somewhere?  Any suggestions would be
> > appreciated.
> >
> >
> >
> > Scott
> >
> >
> >
> >
> >
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_96564_28183596.1165698042783--

From java-user-return-24919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 09 23:02:28 2006
Return-Path: <java-user-return-24919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3778 invoked from network); 9 Dec 2006 23:02:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2006 23:02:27 -0000
Received: (qmail 7551 invoked by uid 500); 9 Dec 2006 23:02:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6556 invoked by uid 500); 9 Dec 2006 23:02:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6545 invoked by uid 99); 9 Dec 2006 23:02:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 15:02:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Dec 2006 15:02:15 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F33F55B763; Sat,  9 Dec 2006 15:01:50 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id EFAC37F403
	for <java-user@lucene.apache.org>; Sat,  9 Dec 2006 15:01:50 -0800 (PST)
Date: Sat, 9 Dec 2006 15:01:50 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: de-boosting fields
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB40646DB@exchange.slc.mainstreamdata.com>
Message-ID: <Pine.LNX.4.58.0612091454220.11303@hal.rescomp.berkeley.edu>
References: <55F9EF953014514EB6BEE1F5198CEEB44898C2@exchange.slc.mainstreamdata.com>
 <359a92830612081806s60028ee1y5986b981dcb62d2a@mail.gmail.com>
 <55F9EF953014514EB6BEE1F5198CEEB40646DB@exchange.slc.mainstreamdata.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I've googled for custom scorers and haven't found anything.  If anyone
: can point me to some posts, that would be appreciated.

you really don't need a custom Scorer for what you are describing.  custom
Scorers are used with Custom Query classes, and there's relaly nothing
custom about hte query you are trying to execute.

at a fundemental level, what you really want to do is construct a "Filter"
the restricts your results to a set of "categories", and then "Query"
against it using some "keywords" -- i use pair those concepts up in that
order explicitly because you want your score to be based on the keywords
and not to be based on the categories -- Filtering on keyword and QUerying
on categories would not be what you want.

that said, if you've already got a lot of code written that builds up a
boolean query on the keywords and hte categories and passes it on to
another part of your code base to execute hte search, then setting the
boost of the category queries to 0 is a perfectly valid way to go that
probably requires making hte fewest number of changes ... it should have
the same effect as the Filter approach, and the only question is wether or
not it's fast neough for you and if your category constraints are reused
often enough to be worth caching as filters.

: Sounds like setting the boost to zero works (see Daniel Naber's post),
: but that seems like overkill.

"overkill" is a strage description ... can you clarify what you mean?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 10 14:11:49 2006
Return-Path: <java-user-return-24920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43631 invoked from network); 10 Dec 2006 14:11:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2006 14:11:48 -0000
Received: (qmail 67670 invoked by uid 500); 10 Dec 2006 14:11:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67634 invoked by uid 500); 10 Dec 2006 14:11:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67623 invoked by uid 99); 10 Dec 2006 14:11:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Dec 2006 06:11:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Dec 2006 06:11:36 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GtPOd-0000aP-Rb
	for java-user@lucene.apache.org; Sun, 10 Dec 2006 06:11:15 -0800
Message-ID: <7782174.post@talk.nabble.com>
Date: Sun, 10 Dec 2006 06:11:15 -0800 (PST)
From: sirakov <sirakov@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Newbie Search Question
In-Reply-To: <7555948.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sirakov@gmail.com
References: <7438630.post@talk.nabble.com> <29AA93ED-F339-49BB-8D37-E4DDF0D987A5@ehatchersolutions.com> <7506220.post@talk.nabble.com> <359a92830611230537j1307866coe4d7bc5a0e1902a3@mail.gmail.com> <7513261.post@talk.nabble.com> <359a92830611240601t2f9164das385be5dbaf9b3c11@mail.gmail.com> <7555948.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I've read the FAQ, and i have found the following:

You need to store the documents' summary in the index (use Field.Store.YES
when creating that field) and then use the Highlighter from the contrib area
(distributed with Lucene since version 1.9 as
"lucene-highlighter-(version).jar").

If I understand correct, i must create this Field "summary" using
Field.Store.YES and Field.Index.YES, but what kind of parser i must use?

This must look like the example in the HTMLDocument.java:

doc.add(new Field("summary", parser.getSummary(), Field.Store.YES,
Field.Index.YES));

The variable "parser" was declared as HTMLParser, but i cant use this into
the FileDocument.java....can someone give me a hint or help me?

Thanks in advance,
Sirakov
-- 
View this message in context: http://www.nabble.com/Newbie-Search-Question-tf2667479.html#a7782174
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 10 19:26:14 2006
Return-Path: <java-user-return-24921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5271 invoked from network); 10 Dec 2006 19:26:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2006 19:26:13 -0000
Received: (qmail 30907 invoked by uid 500); 10 Dec 2006 19:26:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30341 invoked by uid 500); 10 Dec 2006 19:26:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30330 invoked by uid 99); 10 Dec 2006 19:26:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Dec 2006 11:26:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.21 as permitted sender)
Received: from [209.63.42.21] (HELO ns1.mainstreamdata.com) (209.63.42.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Dec 2006 11:26:04 -0800
Received: from localhost (localhost [127.0.0.1])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id CCFFD12EB
	for <java-user@lucene.apache.org>; Sun, 10 Dec 2006 12:25:43 -0700 (MST)
Received: from ns1.mainstreamdata.com ([127.0.0.1])
	by localhost (ns1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 09321-06 for <java-user@lucene.apache.org>;
	Sun, 10 Dec 2006 12:25:36 -0700 (MST)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 0A77F237
	for <java-user@lucene.apache.org>; Sun, 10 Dec 2006 12:25:36 -0700 (MST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: de-boosting fields
Date: Sun, 10 Dec 2006 12:25:35 -0700
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB40646DC@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: de-boosting fields
thread-index: Accb5wa8NYkrgbeiSZeMUqgV830OtwAqIl27
References: <55F9EF953014514EB6BEE1F5198CEEB44898C2@exchange.slc.mainstreamdata.com> <359a92830612081806s60028ee1y5986b981dcb62d2a@mail.gmail.com> <55F9EF953014514EB6BEE1F5198CEEB40646DB@exchange.slc.mainstreamdata.com> <Pine.LNX.4.58.0612091454220.11303@hal.rescomp.berkeley.edu>
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>, <java-user@lucene.apache.org>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at mainstreamdata.com
X-Virus-Checked: Checked by ClamAV on apache.org

"overkill" - I just meant that lucene walking through all of the =
category terms to compute the score when I know that part of the result =
will be zero because the boost is zero seems inefficient.
=20
Based on your comment about filters, it sounds like zero boost is the =
way to go.  The category information that can vary widely from search to =
search.

________________________________

From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
Sent: Sat 12/9/2006 4:01 PM
To: java-user@lucene.apache.org
Subject: RE: de-boosting fields




: I've googled for custom scorers and haven't found anything.  If anyone
: can point me to some posts, that would be appreciated.

you really don't need a custom Scorer for what you are describing.  =
custom
Scorers are used with Custom Query classes, and there's relaly nothing
custom about hte query you are trying to execute.

at a fundemental level, what you really want to do is construct a =
"Filter"
the restricts your results to a set of "categories", and then "Query"
against it using some "keywords" -- i use pair those concepts up in that
order explicitly because you want your score to be based on the keywords
and not to be based on the categories -- Filtering on keyword and =
QUerying
on categories would not be what you want.

that said, if you've already got a lot of code written that builds up a
boolean query on the keywords and hte categories and passes it on to
another part of your code base to execute hte search, then setting the
boost of the category queries to 0 is a perfectly valid way to go that
probably requires making hte fewest number of changes ... it should have
the same effect as the Filter approach, and the only question is wether =
or
not it's fast neough for you and if your category constraints are reused
often enough to be worth caching as filters.

: Sounds like setting the boost to zero works (see Daniel Naber's post),
: but that seems like overkill.

"overkill" is a strage description ... can you clarify what you mean?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 10 21:34:00 2006
Return-Path: <java-user-return-24922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36211 invoked from network); 10 Dec 2006 21:33:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2006 21:33:59 -0000
Received: (qmail 65205 invoked by uid 500); 10 Dec 2006 21:33:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65179 invoked by uid 500); 10 Dec 2006 21:33:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65168 invoked by uid 99); 10 Dec 2006 21:33:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Dec 2006 13:33:59 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Dec 2006 13:33:46 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.8/8.13.8) with ESMTP id kBALXOBC218528
	for <java-user@lucene.apache.org>; Sun, 10 Dec 2006 21:33:24 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kBALXO312977938
	for <java-user@lucene.apache.org>; Sun, 10 Dec 2006 22:33:24 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kBALXOR6014022
	for <java-user@lucene.apache.org>; Sun, 10 Dec 2006 22:33:24 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kBALXO17014019
	for <java-user@lucene.apache.org>; Sun, 10 Dec 2006 22:33:24 +0100
In-Reply-To: <20061209132410.15380@gmx.net>
Subject: Re: Questions about Lucene scoring (was: Lucene 1.2 - scoring formula
 needed)
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF0BAF6051.E20C0E05-ON88257240.0073B2B0-88257240.00747FF1@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sun, 10 Dec 2006 13:12:29 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 10/12/2006 23:33:23
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

TheRanger@gmx.net wrote:
> According to these sources, the Lucene scoring formula in version 1.2 is:
>
> score(q,d) = sum_t(tf_q * idf_t / norm_q * tf_d * idf_t / norm_d_t *
> boost_t) * coord_q_d

Hi Karl,

A slightly more readable version of (the same) scoring formula is now in
Lucene's Similarity jdocs -
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html
 - I think the explanations there would also answer at least some of your
questions.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 08:32:12 2006
Return-Path: <java-user-return-24923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97319 invoked from network); 11 Dec 2006 08:32:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 08:32:12 -0000
Received: (qmail 31395 invoked by uid 500); 11 Dec 2006 08:32:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31182 invoked by uid 500); 11 Dec 2006 08:32:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31171 invoked by uid 99); 11 Dec 2006 08:32:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 00:32:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 00:32:02 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kBB8Va1n023132
	for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 10:31:36 +0200
Received: from [10.142.3.11] ([10.142.3.11]) by nimitz with ESMTP
	 id mcbavxap; 11 Dec 2006 10:31:00 +0200
Message-ID: <457D1759.5050103@teamware.com>
Date: Mon, 11 Dec 2006 19:31:21 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: de-boosting fields
References: <55F9EF953014514EB6BEE1F5198CEEB44898C2@exchange.slc.mainstreamdata.com> <200612091054.33065@danielnaber.de>
In-Reply-To: <200612091054.33065@danielnaber.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Mon, 11 Dec 2006 10:31:36 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-0.185,
	required 5, autolearn=not spam, BAYES_40 -0.18)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Daniel Naber wrote:
> On Saturday 09 December 2006 02:25, Scott Smith wrote:
> 
>> What is the best way to do this?  Is changing the boost the right
>> answer?  Can a field's boost be zero?
> 
> Yes, just use: term1 term2 category1^0 category2^0. Erick's Filter idea is 
> also useful.

Isn't it also true that using Field.Index.NO_NORMS when creating the field will 
remove it from the scoring formula?  I thought I read that somewhere, but now 
can't find where.

Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 12:04:46 2006
Return-Path: <java-user-return-24924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82671 invoked from network); 11 Dec 2006 12:04:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 12:04:45 -0000
Received: (qmail 27389 invoked by uid 500); 11 Dec 2006 12:04:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26798 invoked by uid 500); 11 Dec 2006 12:04:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26787 invoked by uid 99); 11 Dec 2006 12:04:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 04:04:47 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.137] (HELO web52214.mail.yahoo.com) (206.190.48.137)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Dec 2006 04:04:35 -0800
Received: (qmail 48829 invoked by uid 60001); 11 Dec 2006 12:04:14 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=mWxJ8SwEEYf49XSpiRvjhidwTxHJQ+muV2EwQouKLkRZfZ/Mq+sgtu8BraXeKR1B9jSi17yN5DsaiGCIsrruycg3+HETcyJ5iSKvicCFT0G5dTluwYODH3gQaBxE2ls8/8ZbEQzDt7rCPbB8gQinmolHENjKn13yFH6g9ljUS7s=;
X-YMail-OSG: rNJvApEVM1lkj7SacKRZHhBWZhgiuFBW7WZU4H3GtJeJoKD8ism1FXv1TAjuFvPDSdqAv.HC1_RLZzP8t9XQAHolkGNAakjsn.AJGIFI2ayn0pAqJ3f.tzqstEah6DSBH3DKcjf4f8101OD.nH.fRv.QkFZcEmsxcgHVDQnou5kKqZV_.1fuGnzo0qH9
Received: from [219.78.85.132] by web52214.mail.yahoo.com via HTTP; Mon, 11 Dec 2006 04:04:13 PST
Date: Mon, 11 Dec 2006 04:04:13 -0800 (PST)
From: abdul aleem <janaabdulaleem@yahoo.com>
Subject: Using Lucene to search log files 
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <980071.48434.qm@web52214.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

Im a Lucene newbie,


Requirement : 
==============
a) Build a log viewer tool, search log files for
keywords and time stamp

b)  files in production approx 200 logs per day and
each log file may range from 1MB - 5MB

Lucene 
========
We wanted to utilize Lucene's search capabilities
especially search all 200 log files content quickly

a) Search criteria:
    i) Timestamp search: Fetch contents between any
two timestamps 

   ii) Fetch log file contents for specified keyword 


Query 
========
    a ) Would greatly appreciate if some suggestions 
        whether Lucene will be appropriate tool for
the requirement ??


    b) I have tried to use SpanQuery however
struggling to fetch entire conents e.g. (between two
timestamps) 

    c) I had also looked at
LargeScaleDateRangeProcessing in the wiki, is that a
right approach for the requirement



  Any help / suggestion would be greatly appreciated,


  Many thanks in advance,
  Abdul    



 
____________________________________________________________________________________
Do you Yahoo!?
Everyone is raving about the all-new Yahoo! Mail beta.
http://new.mail.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 13:11:50 2006
Return-Path: <java-user-return-24925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10038 invoked from network); 11 Dec 2006 13:11:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 13:11:49 -0000
Received: (qmail 32274 invoked by uid 500); 11 Dec 2006 13:11:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31746 invoked by uid 500); 11 Dec 2006 13:11:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31735 invoked by uid 99); 11 Dec 2006 13:11:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 05:11:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a14.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 05:11:38 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a14.dreamhost.com (Postfix) with ESMTP id 2C5F9190E2D
	for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 05:11:15 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <980071.48434.qm@web52214.mail.yahoo.com>
References: <980071.48434.qm@web52214.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <03B0B35C-2663-4857-AD32-145C1C797041@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Using Lucene to search log files 
Date: Mon, 11 Dec 2006 08:11:16 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

See below

On Dec 11, 2006, at 7:04 AM, abdul aleem wrote:

> Hi All,
>
> Im a Lucene newbie,
>
>
> Requirement :
> ==============
> a) Build a log viewer tool, search log files for
> keywords and time stamp
>
> b)  files in production approx 200 logs per day and
> each log file may range from 1MB - 5MB
>
> Lucene
> ========
> We wanted to utilize Lucene's search capabilities
> especially search all 200 log files content quickly
>
> a) Search criteria:
>     i) Timestamp search: Fetch contents between any
> two timestamps
>
>    ii) Fetch log file contents for specified keyword
>
>
> Query
> ========
>     a ) Would greatly appreciate if some suggestions
>         whether Lucene will be appropriate tool for
> the requirement ??
>

Yes, I think this is a reasonable application of Lucene.  You  
probably need a to customize analysis to handle your log files, but  
the rest should be pretty straightforward.

>
>     b) I have tried to use SpanQuery however
> struggling to fetch entire conents e.g. (between two
> timestamps)

You're probably better off using the approach mentioned in c).   Also  
search this list for usage of RangeFilter and  search this list for  
log file searching, as I am sure this topic has come up before.

>
>     c) I had also looked at
> LargeScaleDateRangeProcessing in the wiki, is that a
> right approach for the requirement

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 13:22:23 2006
Return-Path: <java-user-return-24926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14085 invoked from network); 11 Dec 2006 13:22:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 13:22:21 -0000
Received: (qmail 53314 invoked by uid 500); 11 Dec 2006 13:22:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53283 invoked by uid 500); 11 Dec 2006 13:22:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53266 invoked by uid 99); 11 Dec 2006 13:22:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 05:22:23 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 05:22:12 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1968602nfc
        for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 05:21:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OofHbeZ0duzDVQOE0x2xuVFAF6nxaXD41jUXslrsrOe9s9eNo9h+eH0g3it9fvb7BX/Ta/CN2nDEI20lrGC2ZHRtbR+hltJYximtfFU7hQxQi7uU0XKui7p5WdZmQcwlEokh4vB1Jeol86D49SAd4BxH79RuikbXrfPyulBwdAo=
Received: by 10.82.114.3 with SMTP id m3mr598927buc.1165843310743;
        Mon, 11 Dec 2006 05:21:50 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Mon, 11 Dec 2006 05:21:50 -0800 (PST)
Message-ID: <359a92830612110521w454b366ehd1e08bc93ad3d339@mail.gmail.com>
Date: Mon, 11 Dec 2006 08:21:50 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene to search log files
In-Reply-To: <980071.48434.qm@web52214.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_91171_26944372.1165843310703"
References: <980071.48434.qm@web52214.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_91171_26944372.1165843310703
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As far as the appropriateness of Lucene, it's an open question, but I think
it'd be fine. If it isn't, you have an "interesting" problem <G>.

About timestamps. This has been discussed a LOT on the thread, since they're
not as straight-forward as you might assume. See the thread *"Date ranges -
getting the approach right" *for an exposition on what it's all about. The
thing you *must* understand is that some forms of a query will throw a "too
many clauses" exception. Especially if you store your dates to, say,
millisecond resolution and use the intuitive query forms. Under the covers
if you ask for, say, all queries between 12:00 and 13:00, Lucene will expand
this to a big query with a clause for every value in your index that
satisfies the range. For instance, if there are 2,000 different time
valuesin your index between the two times, there will be 2,000
clauses. If there
are 10,000 documents, but only 10 different times between these two values,
you'll get 10 clauses. Lucene defaults to 1024 maximum clauses, and if your
query expands to more than this, you get the TooManyClauses exception.

This does not apply to Filters, and there are specialty classes for dealing
with this issue. Also, you have some control over how many clauses by
choosing the resolution you store in your index. In the above, if you stored
only by minute, you'd never get more than 60 clauses in an hour.

And there are more graceful ways around this, so don't be discouraged.

I'm sure this is confusing (I know it certainly confused me for a long
time). My hope  is that as you work with the process and run across issues,
you'll be able to say "Oh, that is what they were talking about". And be of
good cheer, these are not show-stoppers at all, they have been dealt with
successfully on a wide range of projects.

Search the mail archive for date, daterange, toomanyclauses, etc and you'll
see the discussions.....

Best
Erick

On 12/11/06, abdul aleem <janaabdulaleem@yahoo.com> wrote:
>
> Hi All,
>
> Im a Lucene newbie,
>
>
> Requirement :
> ==============
> a) Build a log viewer tool, search log files for
> keywords and time stamp
>
> b)  files in production approx 200 logs per day and
> each log file may range from 1MB - 5MB
>
> Lucene
> ========
> We wanted to utilize Lucene's search capabilities
> especially search all 200 log files content quickly
>
> a) Search criteria:
>     i) Timestamp search: Fetch contents between any
> two timestamps
>
>    ii) Fetch log file contents for specified keyword
>
>
> Query
> ========
>     a ) Would greatly appreciate if some suggestions
>         whether Lucene will be appropriate tool for
> the requirement ??
>
>
>     b) I have tried to use SpanQuery however
> struggling to fetch entire conents e.g. (between two
> timestamps)
>
>     c) I had also looked at
> LargeScaleDateRangeProcessing in the wiki, is that a
> right approach for the requirement
>
>
>
>   Any help / suggestion would be greatly appreciated,
>
>
>   Many thanks in advance,
>   Abdul
>
>
>
>
>
> ____________________________________________________________________________________
> Do you Yahoo!?
> Everyone is raving about the all-new Yahoo! Mail beta.
> http://new.mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_91171_26944372.1165843310703--

From java-user-return-24927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 13:22:51 2006
Return-Path: <java-user-return-24927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14222 invoked from network); 11 Dec 2006 13:22:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 13:22:51 -0000
Received: (qmail 55161 invoked by uid 500); 11 Dec 2006 13:22:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54992 invoked by uid 500); 11 Dec 2006 13:22:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54980 invoked by uid 99); 11 Dec 2006 13:22:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 05:22:51 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.137] (HELO web52214.mail.yahoo.com) (206.190.48.137)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Dec 2006 05:22:39 -0800
Received: (qmail 90548 invoked by uid 60001); 11 Dec 2006 13:22:18 -0000
Message-ID: <20061211132218.90546.qmail@web52214.mail.yahoo.com>
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=wkxUvsrIQiKS1uFKROB24w2RLYeMSBklrUC4ZTNTHlJM6N4d8lO/ZDbrdJlMEyl1Hm4irboJJmiavFe8MMw0EYsv/dgVR/+cu/8oe9ig1KynzrWr9qSGnZ7PBWElsU9zmn7QCzQFpJESYMv4eUCfuTuoMGQgNgvfIK5G2DkRLrA=;
X-YMail-OSG: R6dWRNAVM1nFJKvrroMKgN3s9sG.lO9384sc2falopdRb3tRoUM9D_fRqFO9L3rGdqP4oFre9lmC_nGGS3yQ9blRdlaLjXKIMPNlE2SJyiSlU3PEVRIiol2OSLhMS5WFGD011WvZDsvEtOkXEmT7HWVhWWKLpXGNDnUYaWi9l0gJgVpZfBkCVL4llzG1
Received: from [219.78.85.132] by web52214.mail.yahoo.com via HTTP; Mon, 11 Dec 2006 05:22:18 PST
Date: Mon, 11 Dec 2006 05:22:18 -0800 (PST)
From: abdul aleem <janaabdulaleem@yahoo.com>
Subject: Re: Using Lucene to search log files 
To: java-user@lucene.apache.org
In-Reply-To: <03B0B35C-2663-4857-AD32-145C1C797041@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Many thanks Grant,
I will now dirty my hands with Lucene to get our
requirements

regards,
Abdul

--- Grant Ingersoll <gsingers@apache.org> wrote:

> See below
> 
> On Dec 11, 2006, at 7:04 AM, abdul aleem wrote:
> 
> > Hi All,
> >
> > Im a Lucene newbie,
> >
> >
> > Requirement :
> > ==============
> > a) Build a log viewer tool, search log files for
> > keywords and time stamp
> >
> > b)  files in production approx 200 logs per day
> and
> > each log file may range from 1MB - 5MB
> >
> > Lucene
> > ========
> > We wanted to utilize Lucene's search capabilities
> > especially search all 200 log files content
> quickly
> >
> > a) Search criteria:
> >     i) Timestamp search: Fetch contents between
> any
> > two timestamps
> >
> >    ii) Fetch log file contents for specified
> keyword
> >
> >
> > Query
> > ========
> >     a ) Would greatly appreciate if some
> suggestions
> >         whether Lucene will be appropriate tool
> for
> > the requirement ??
> >
> 
> Yes, I think this is a reasonable application of
> Lucene.  You  
> probably need a to customize analysis to handle your
> log files, but  
> the rest should be pretty straightforward.
> 
> >
> >     b) I have tried to use SpanQuery however
> > struggling to fetch entire conents e.g. (between
> two
> > timestamps)
> 
> You're probably better off using the approach
> mentioned in c).   Also  
> search this list for usage of RangeFilter and 
> search this list for  
> log file searching, as I am sure this topic has come
> up before.
> 
> >
> >     c) I had also looked at
> > LargeScaleDateRangeProcessing in the wiki, is that
> a
> > right approach for the requirement
> 
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org
> 
> Read the Lucene Java FAQ at
> http://wiki.apache.org/jakarta-lucene/ 
> LuceneFAQ
> 
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



 
____________________________________________________________________________________
Need a quick answer? Get one in minutes from people who know.
Ask your question on www.Answers.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 13:49:37 2006
Return-Path: <java-user-return-24928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25791 invoked from network); 11 Dec 2006 13:49:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 13:49:37 -0000
Received: (qmail 16851 invoked by uid 500); 11 Dec 2006 13:49:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16584 invoked by uid 500); 11 Dec 2006 13:49:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 83882 invoked by uid 99); 11 Dec 2006 13:34:34 -0000
Received-SPF: pass (herse.apache.org: local policy)
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: RE: Using Lucene to search log files
Date: Mon, 11 Dec 2006 13:35:47 -0000
Message-ID: <0B1C92228C5C8D45AA7450F78B3FB9DEA20410@staf-exm-01.ardentia.co.uk>
In-Reply-To: <980071.48434.qm@web52214.mail.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using Lucene to search log files
Thread-Index: AccdHYC3l+s/oxyeS8uziYkbrqbokwAC2vDQ
From: "Mike Streeton" <mike.streeton@ardentiasearch.com>
To: <java-user@lucene.apache.org>
X-MC-Unique: 106121113335200102
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I would use a RangeFilter instead of using the default Boolean query as
this will always break at some point with Too many Boolean clauses.
Extend QueryParser to sort this out.  As far as extracting information
from log files I would look at creating yourself a LogAnalyzer that can
interpret the contents and indexing it appropriately.

Hope this helps

Mike

www.ardentiasearch.com the home of NetSearch
-----Original Message-----
From: abdul aleem [mailto:janaabdulaleem@yahoo.com]=20
Sent: 11 December 2006 12:04
To: java-user@lucene.apache.org
Subject: Using Lucene to search log files

Hi All,

Im a Lucene newbie,


Requirement :=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
a) Build a log viewer tool, search log files for
keywords and time stamp

b)  files in production approx 200 logs per day and
each log file may range from 1MB - 5MB

Lucene=20
=3D=3D=3D=3D=3D=3D=3D=3D
We wanted to utilize Lucene's search capabilities
especially search all 200 log files content quickly

a) Search criteria:
    i) Timestamp search: Fetch contents between any
two timestamps=20

   ii) Fetch log file contents for specified keyword=20


Query=20
=3D=3D=3D=3D=3D=3D=3D=3D
    a ) Would greatly appreciate if some suggestions=20
        whether Lucene will be appropriate tool for
the requirement ??


    b) I have tried to use SpanQuery however
struggling to fetch entire conents e.g. (between two
timestamps)=20

    c) I had also looked at
LargeScaleDateRangeProcessing in the wiki, is that a
right approach for the requirement



  Any help / suggestion would be greatly appreciated,


  Many thanks in advance,
  Abdul   =20



=20
________________________________________________________________________
____________
Do you Yahoo!?
Everyone is raving about the all-new Yahoo! Mail beta.
http://new.mail.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 14:00:14 2006
Return-Path: <java-user-return-24929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29731 invoked from network); 11 Dec 2006 14:00:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 14:00:14 -0000
Received: (qmail 37086 invoked by uid 500); 11 Dec 2006 14:00:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36335 invoked by uid 500); 11 Dec 2006 14:00:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36324 invoked by uid 99); 11 Dec 2006 14:00:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 06:00:15 -0800
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.216] (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Dec 2006 06:00:03 -0800
Received: (qmail 7651 invoked by uid 60001); 11 Dec 2006 13:59:40 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=SbXIB/GtmyAB0pD6FvCy77MH1hj/Q4Z1DE4aFM4fGSDNrKsxRKr1LJWm+QnLZShPZCvS8IfXLzX0hx3QGfZafttXg+RZTnpV1X8+T43OmsKv8zGmOXpsoJg8cmy4duqepcPyvzGL+SJfLOBWpdtzMivHe5S/aqOknD12aHi+Wak=  ;
Message-ID: <20061211135940.7649.qmail@web26005.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26005.mail.ukl.yahoo.com via HTTP; Mon, 11 Dec 2006 13:59:40 GMT
Date: Mon, 11 Dec 2006 13:59:40 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Using Lucene to search log files
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

>>Extend QueryParser to sort this out.=0A=0AThe latest version in SVN has c=
hanged the default QueryParser behaviour to use RangeFilters instead of Ran=
geQuerys=0A=0A=0A=0A----- Original Message ----=0AFrom: Mike Streeton <mike=
.streeton@ardentiasearch.com>=0ATo: java-user@lucene.apache.org=0ASent: Mon=
day, 11 December, 2006 1:35:47 PM=0ASubject: RE: Using Lucene to search log=
 files=0A=0AI would use a RangeFilter instead of using the default Boolean =
query as=0Athis will always break at some point with Too many Boolean claus=
es.=0AExtend QueryParser to sort this out.  As far as extracting informatio=
n=0Afrom log files I would look at creating yourself a LogAnalyzer that can=
=0Ainterpret the contents and indexing it appropriately.=0A=0AHope this hel=
ps=0A=0AMike=0A=0Awww.ardentiasearch.com the home of NetSearch=0A-----Origi=
nal Message-----=0AFrom: abdul aleem [mailto:janaabdulaleem@yahoo.com] =0AS=
ent: 11 December 2006 12:04=0ATo: java-user@lucene.apache.org=0ASubject: Us=
ing Lucene to search log files=0A=0AHi All,=0A=0AIm a Lucene newbie,=0A=0A=
=0ARequirement : =0A=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0Aa) Build a=
 log viewer tool, search log files for=0Akeywords and time stamp=0A=0Ab)  f=
iles in production approx 200 logs per day and=0Aeach log file may range fr=
om 1MB - 5MB=0A=0ALucene =0A=3D=3D=3D=3D=3D=3D=3D=3D=0AWe wanted to utilize=
 Lucene's search capabilities=0Aespecially search all 200 log files content=
 quickly=0A=0Aa) Search criteria:=0A    i) Timestamp search: Fetch contents=
 between any=0Atwo timestamps =0A=0A   ii) Fetch log file contents for spec=
ified keyword =0A=0A=0AQuery =0A=3D=3D=3D=3D=3D=3D=3D=3D=0A    a ) Would gr=
eatly appreciate if some suggestions =0A        whether Lucene will be appr=
opriate tool for=0Athe requirement ??=0A=0A=0A    b) I have tried to use Sp=
anQuery however=0Astruggling to fetch entire conents e.g. (between two=0Ati=
mestamps) =0A=0A    c) I had also looked at=0ALargeScaleDateRangeProcessing=
 in the wiki, is that a=0Aright approach for the requirement=0A=0A=0A=0A  A=
ny help / suggestion would be greatly appreciated,=0A=0A=0A  Many thanks in=
 advance,=0A  Abdul    =0A=0A=0A=0A =0A____________________________________=
____________________________________=0A____________=0ADo you Yahoo!?=0AEver=
yone is raving about the all-new Yahoo! Mail beta.=0Ahttp://new.mail.yahoo.=
com=0A=0A------------------------------------------------------------------=
---=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor=
 additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=
=0A---------------------------------------------------------------------=0A=
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor addit=
ional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=
=0A=09=09=0A___________________________________________________________ =0A=
Inbox full of spam? Get leading spam protection and 1GB storage with All Ne=
w Yahoo! Mail. http://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 15:03:50 2006
Return-Path: <java-user-return-24930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66900 invoked from network); 11 Dec 2006 15:03:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 15:03:49 -0000
Received: (qmail 68139 invoked by uid 500); 11 Dec 2006 15:03:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68106 invoked by uid 500); 11 Dec 2006 15:03:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68091 invoked by uid 99); 11 Dec 2006 15:03:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 07:03:48 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.136] (HELO web52213.mail.yahoo.com) (206.190.48.136)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Dec 2006 07:03:34 -0800
Received: (qmail 49682 invoked by uid 60001); 11 Dec 2006 15:03:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=s9zMcM8IKFauu4v6aVb944WRuUNwFFa0THwnpDnZKAPoYeCrPnga0lWKdYxF522GlLAjZMfKl05wFMKSQA+qaMN+i4zPs8vsIgYxwmH0s40c3HN/9Y7B6q9RDdi5cMG5k8e7WcSZ79mAvvZwjNrKyyZoMyan8narjrw/HtqdQJI=;
X-YMail-OSG: DJeBo04VM1kApK2M_pY0jLd27WP7yIZb5xOoibW7sUdz7f3MUznR3Bu10T7K5qtpibzA32GmLyjnvoF4NBA1xL8RPb63OA.S.uSJNbjg0PyXGI9mFmN.G2OmolXC4.pEbPKQP1PauQcFKiIgNl8xzhUb7U56OZwFbPvQHLkXzBB4z2Wx7dJETIe.DY.X
Received: from [219.78.85.132] by web52213.mail.yahoo.com via HTTP; Mon, 11 Dec 2006 07:03:09 PST
Date: Mon, 11 Dec 2006 07:03:09 -0800 (PST)
From: abdul aleem <janaabdulaleem@yahoo.com>
Subject: Re: Using Lucene to search log files
To: java-user@lucene.apache.org
In-Reply-To: <20061211135940.7649.qmail@web26005.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <77555.48995.qm@web52213.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Many thanks to All,

well kind of puzzled because ours is a fast moving log
down to Milliseconds :( as we deal with forex on a
financial system.

Im sure there will be workarounds, actually most of
the time it is enough to search within 2 log files of
1-5MB size, coz we are more intersted in seconds and
minutes than hour as we need to get the logs between
minutes

I had regular expressions in Mind before thinking of
Lucene, but i still feel Lucene should be appropriate
to deal with this, 

I will search the archives for respective issues, Also
have Lucene in Action book i guess it should help


Many thanks again,
Abdul


--- mark harwood <markharw00d@yahoo.co.uk> wrote:

> >>Extend QueryParser to sort this out.
> 
> The latest version in SVN has changed the default
> QueryParser behaviour to use RangeFilters instead of
> RangeQuerys
> 
> 
> 
> ----- Original Message ----
> From: Mike Streeton
> <mike.streeton@ardentiasearch.com>
> To: java-user@lucene.apache.org
> Sent: Monday, 11 December, 2006 1:35:47 PM
> Subject: RE: Using Lucene to search log files
> 
> I would use a RangeFilter instead of using the
> default Boolean query as
> this will always break at some point with Too many
> Boolean clauses.
> Extend QueryParser to sort this out.  As far as
> extracting information
> from log files I would look at creating yourself a
> LogAnalyzer that can
> interpret the contents and indexing it
> appropriately.
> 
> Hope this helps
> 
> Mike
> 
> www.ardentiasearch.com the home of NetSearch
> -----Original Message-----
> From: abdul aleem [mailto:janaabdulaleem@yahoo.com] 
> Sent: 11 December 2006 12:04
> To: java-user@lucene.apache.org
> Subject: Using Lucene to search log files
> 
> Hi All,
> 
> Im a Lucene newbie,
> 
> 
> Requirement : 
> ==============
> a) Build a log viewer tool, search log files for
> keywords and time stamp
> 
> b)  files in production approx 200 logs per day and
> each log file may range from 1MB - 5MB
> 
> Lucene 
> ========
> We wanted to utilize Lucene's search capabilities
> especially search all 200 log files content quickly
> 
> a) Search criteria:
>     i) Timestamp search: Fetch contents between any
> two timestamps 
> 
>    ii) Fetch log file contents for specified keyword
> 
> 
> 
> Query 
> ========
>     a ) Would greatly appreciate if some suggestions
> 
>         whether Lucene will be appropriate tool for
> the requirement ??
> 
> 
>     b) I have tried to use SpanQuery however
> struggling to fetch entire conents e.g. (between two
> timestamps) 
> 
>     c) I had also looked at
> LargeScaleDateRangeProcessing in the wiki, is that a
> right approach for the requirement
> 
> 
> 
>   Any help / suggestion would be greatly
> appreciated,
> 
> 
>   Many thanks in advance,
>   Abdul    
> 
> 
> 
>  
>
________________________________________________________________________
> ____________
> Do you Yahoo!?
> Everyone is raving about the all-new Yahoo! Mail
> beta.
> http://new.mail.yahoo.com
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> 
> 		
>
___________________________________________________________
> 
> Inbox full of spam? Get leading spam protection and
> 1GB storage with All New Yahoo! Mail.
> http://uk.docs.yahoo.com/nowyoucan.html
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



 
____________________________________________________________________________________
Yahoo! Music Unlimited
Access over 1 million songs.
http://music.yahoo.com/unlimited

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 15:06:08 2006
Return-Path: <java-user-return-24931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68015 invoked from network); 11 Dec 2006 15:06:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 15:06:07 -0000
Received: (qmail 76517 invoked by uid 500); 11 Dec 2006 15:06:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76487 invoked by uid 500); 11 Dec 2006 15:06:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76475 invoked by uid 99); 11 Dec 2006 15:06:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 07:06:08 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.135] (HELO web52212.mail.yahoo.com) (206.190.48.135)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Dec 2006 07:05:56 -0800
Received: (qmail 99822 invoked by uid 60001); 11 Dec 2006 15:05:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=JvHFY2chK8VFDDXwJykP1Q5asas6rvMDpLreLSWpVT1LwGrLAwq0KfKcuIi/TsSG50AzoF9HOO+njt0qf46iWT8KA8Xf5z8YgEh2BC76RjjcfFP1OFfk0qScaEbAllxIT/3tQaqrpDCXA9PKGSlqAkLZocwP+wk8YKdU8yU35d4=;
X-YMail-OSG: 4b9g1EQVM1lJK67HZBNPM.hvG0BlNIA._YSfzSRa
Received: from [219.78.85.132] by web52212.mail.yahoo.com via HTTP; Mon, 11 Dec 2006 07:05:35 PST
Date: Mon, 11 Dec 2006 07:05:35 -0800 (PST)
From: abdul aleem <janaabdulaleem@yahoo.com>
Subject: Re: Using Lucene to search log files
To: java-user@lucene.apache.org
In-Reply-To: <77555.48995.qm@web52213.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <773839.97964.qm@web52212.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Aplogies, forget to mention there are great people
around in this group, they are of great help as well
:):)


--- abdul aleem <janaabdulaleem@yahoo.com> wrote:

> Many thanks to All,
> 
> well kind of puzzled because ours is a fast moving
> log
> down to Milliseconds :( as we deal with forex on a
> financial system.
> 
> Im sure there will be workarounds, actually most of
> the time it is enough to search within 2 log files
> of
> 1-5MB size, coz we are more intersted in seconds and
> minutes than hour as we need to get the logs between
> minutes
> 
> I had regular expressions in Mind before thinking of
> Lucene, but i still feel Lucene should be
> appropriate
> to deal with this, 
> 
> I will search the archives for respective issues,
> Also
> have Lucene in Action book i guess it should help
> 
> 
> Many thanks again,
> Abdul
> 
> 
> --- mark harwood <markharw00d@yahoo.co.uk> wrote:
> 
> > >>Extend QueryParser to sort this out.
> > 
> > The latest version in SVN has changed the default
> > QueryParser behaviour to use RangeFilters instead
> of
> > RangeQuerys
> > 
> > 
> > 
> > ----- Original Message ----
> > From: Mike Streeton
> > <mike.streeton@ardentiasearch.com>
> > To: java-user@lucene.apache.org
> > Sent: Monday, 11 December, 2006 1:35:47 PM
> > Subject: RE: Using Lucene to search log files
> > 
> > I would use a RangeFilter instead of using the
> > default Boolean query as
> > this will always break at some point with Too many
> > Boolean clauses.
> > Extend QueryParser to sort this out.  As far as
> > extracting information
> > from log files I would look at creating yourself a
> > LogAnalyzer that can
> > interpret the contents and indexing it
> > appropriately.
> > 
> > Hope this helps
> > 
> > Mike
> > 
> > www.ardentiasearch.com the home of NetSearch
> > -----Original Message-----
> > From: abdul aleem
> [mailto:janaabdulaleem@yahoo.com] 
> > Sent: 11 December 2006 12:04
> > To: java-user@lucene.apache.org
> > Subject: Using Lucene to search log files
> > 
> > Hi All,
> > 
> > Im a Lucene newbie,
> > 
> > 
> > Requirement : 
> > ==============
> > a) Build a log viewer tool, search log files for
> > keywords and time stamp
> > 
> > b)  files in production approx 200 logs per day
> and
> > each log file may range from 1MB - 5MB
> > 
> > Lucene 
> > ========
> > We wanted to utilize Lucene's search capabilities
> > especially search all 200 log files content
> quickly
> > 
> > a) Search criteria:
> >     i) Timestamp search: Fetch contents between
> any
> > two timestamps 
> > 
> >    ii) Fetch log file contents for specified
> keyword
> > 
> > 
> > 
> > Query 
> > ========
> >     a ) Would greatly appreciate if some
> suggestions
> > 
> >         whether Lucene will be appropriate tool
> for
> > the requirement ??
> > 
> > 
> >     b) I have tried to use SpanQuery however
> > struggling to fetch entire conents e.g. (between
> two
> > timestamps) 
> > 
> >     c) I had also looked at
> > LargeScaleDateRangeProcessing in the wiki, is that
> a
> > right approach for the requirement
> > 
> > 
> > 
> >   Any help / suggestion would be greatly
> > appreciated,
> > 
> > 
> >   Many thanks in advance,
> >   Abdul    
> > 
> > 
> > 
> >  
> >
>
________________________________________________________________________
> > ____________
> > Do you Yahoo!?
> > Everyone is raving about the all-new Yahoo! Mail
> > beta.
> > http://new.mail.yahoo.com
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > 
> > 
> > 
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > 
> > 
> > 
> > 
> > 
> > 
> > 		
> >
>
___________________________________________________________
> > 
> > Inbox full of spam? Get leading spam protection
> and
> > 1GB storage with All New Yahoo! Mail.
> > http://uk.docs.yahoo.com/nowyoucan.html
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> 
>  
>
____________________________________________________________________________________
> Yahoo! Music Unlimited
> Access over 1 million songs.
> http://music.yahoo.com/unlimited
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



 
____________________________________________________________________________________
Do you Yahoo!?
Everyone is raving about the all-new Yahoo! Mail beta.
http://new.mail.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 15:15:49 2006
Return-Path: <java-user-return-24932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71767 invoked from network); 11 Dec 2006 15:15:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 15:15:47 -0000
Received: (qmail 94197 invoked by uid 500); 11 Dec 2006 15:15:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94176 invoked by uid 500); 11 Dec 2006 15:15:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94165 invoked by uid 99); 11 Dec 2006 15:15:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 07:15:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.97.200.65] (HELO gate.fiz-technik.de) (193.97.200.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 07:15:36 -0800
Received: from localhost (localhost [127.0.0.1])
	by localhost.qgroup.de (Postfix) with ESMTP id 9D12D13F7A0
	for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 16:15:12 +0100 (CET)
Received: from gate.fiz-technik.de ([127.0.0.1])
 by localhost (gate [127.0.0.1]) (amavisd-new, port 27304) with ESMTP
 id 21538-08 for <java-user@lucene.apache.org>;
 Mon, 11 Dec 2006 16:15:12 +0100 (CET)
Received: from fizmail.fiz-technik.de (newton1.fiz-technik.de [193.97.200.134])
	by gate.fiz-technik.de (Postfix) with SMTP id F129D13F8DF
	for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 16:15:11 +0100 (CET)
Received: by fizmail.fiz-technik.de (Postfix, from userid 65534)
	id 4037993DA8; Mon, 11 Dec 2006 16:15:10 +0100 (CET)
Received: from walix.fiz-technik.de (unknown [193.97.200.248])
	by fizmail.fiz-technik.de (Postfix) with ESMTP id 3164492E52
	for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 16:15:07 +0100 (CET)
From: Waheed Mohammed <waheed.mohammed@fiz-technik.de>
Organization: FIZ-technik e.V
To: java-user@lucene.apache.org
Subject: Lucene id generation
Date: Mon, 11 Dec 2006 16:15:45 +0100
User-Agent: KMail/1.7.1
References: <0B1C92228C5C8D45AA7450F78B3FB9DEA20410@staf-exm-01.ardentia.co.uk>
In-Reply-To: <0B1C92228C5C8D45AA7450F78B3FB9DEA20410@staf-exm-01.ardentia.co.uk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="windows-1252"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200612111615.45098.waheed.mohammed@fiz-technik.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Is there a way to influence lucene's generation of ids while indexing.

my requirement is. I want to have different indexes where no index should have  
ids that have been assigned to an index earlier.
for instance
IDX1 : {0.........100}
IDX2: {101.......200}
IDX3: {201.......300}
but not 
IDX1 : {0.........100}
IDX2 : {0.........100}
IDX3 : {0.........100}

any help is greatly appriciated.
-- 
A W Mohammed
Software Entwickler
FIZ-technik e.V
Frankfut am Main


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 15:24:34 2006
Return-Path: <java-user-return-24933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74921 invoked from network); 11 Dec 2006 15:24:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 15:24:34 -0000
Received: (qmail 17142 invoked by uid 500); 11 Dec 2006 15:24:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17107 invoked by uid 500); 11 Dec 2006 15:24:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17092 invoked by uid 99); 11 Dec 2006 15:24:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 07:24:33 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 07:24:22 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2005091nfc
        for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 07:24:01 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kxCSJRNuW72R+4GjChgOEbXYKFktdcUxuZFL0TbD90O9miAlhAy9J3h5UdnZTVlIwVQTo3zDqZSFI9yNGDlqsdjWCUN7P+PTF8+VkiXm919AIhxnqolrt2qfI3Y/4gw525ncRfxbnz0Q15bOXeXoC+nL4z2zU2OarBHSQGyUkGQ=
Received: by 10.82.113.6 with SMTP id l6mr436788buc.1165850639937;
        Mon, 11 Dec 2006 07:23:59 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Mon, 11 Dec 2006 07:23:59 -0800 (PST)
Message-ID: <359a92830612110723s3dddf95fib956bb1c5f1c76a0@mail.gmail.com>
Date: Mon, 11 Dec 2006 10:23:59 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene to search log files
In-Reply-To: <77555.48995.qm@web52213.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_93444_6928042.1165850639804"
References: <20061211135940.7649.qmail@web26005.mail.ukl.yahoo.com>
	 <77555.48995.qm@web52213.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_93444_6928042.1165850639804
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Then you really want to look at the classes that do the work with filters if
you require milliseconds. You should be just fine....

On 12/11/06, abdul aleem <janaabdulaleem@yahoo.com> wrote:
>
> Many thanks to All,
>
> well kind of puzzled because ours is a fast moving log
> down to Milliseconds :( as we deal with forex on a
> financial system.
>
> Im sure there will be workarounds, actually most of
> the time it is enough to search within 2 log files of
> 1-5MB size, coz we are more intersted in seconds and
> minutes than hour as we need to get the logs between
> minutes
>
> I had regular expressions in Mind before thinking of
> Lucene, but i still feel Lucene should be appropriate
> to deal with this,
>
> I will search the archives for respective issues, Also
> have Lucene in Action book i guess it should help
>
>
> Many thanks again,
> Abdul
>
>
> --- mark harwood <markharw00d@yahoo.co.uk> wrote:
>
> > >>Extend QueryParser to sort this out.
> >
> > The latest version in SVN has changed the default
> > QueryParser behaviour to use RangeFilters instead of
> > RangeQuerys
> >
> >
> >
> > ----- Original Message ----
> > From: Mike Streeton
> > <mike.streeton@ardentiasearch.com>
> > To: java-user@lucene.apache.org
> > Sent: Monday, 11 December, 2006 1:35:47 PM
> > Subject: RE: Using Lucene to search log files
> >
> > I would use a RangeFilter instead of using the
> > default Boolean query as
> > this will always break at some point with Too many
> > Boolean clauses.
> > Extend QueryParser to sort this out.  As far as
> > extracting information
> > from log files I would look at creating yourself a
> > LogAnalyzer that can
> > interpret the contents and indexing it
> > appropriately.
> >
> > Hope this helps
> >
> > Mike
> >
> > www.ardentiasearch.com the home of NetSearch
> > -----Original Message-----
> > From: abdul aleem [mailto:janaabdulaleem@yahoo.com]
> > Sent: 11 December 2006 12:04
> > To: java-user@lucene.apache.org
> > Subject: Using Lucene to search log files
> >
> > Hi All,
> >
> > Im a Lucene newbie,
> >
> >
> > Requirement :
> > ==============
> > a) Build a log viewer tool, search log files for
> > keywords and time stamp
> >
> > b)  files in production approx 200 logs per day and
> > each log file may range from 1MB - 5MB
> >
> > Lucene
> > ========
> > We wanted to utilize Lucene's search capabilities
> > especially search all 200 log files content quickly
> >
> > a) Search criteria:
> >     i) Timestamp search: Fetch contents between any
> > two timestamps
> >
> >    ii) Fetch log file contents for specified keyword
> >
> >
> >
> > Query
> > ========
> >     a ) Would greatly appreciate if some suggestions
> >
> >         whether Lucene will be appropriate tool for
> > the requirement ??
> >
> >
> >     b) I have tried to use SpanQuery however
> > struggling to fetch entire conents e.g. (between two
> > timestamps)
> >
> >     c) I had also looked at
> > LargeScaleDateRangeProcessing in the wiki, is that a
> > right approach for the requirement
> >
> >
> >
> >   Any help / suggestion would be greatly
> > appreciated,
> >
> >
> >   Many thanks in advance,
> >   Abdul
> >
> >
> >
> >
> >
> ________________________________________________________________________
> > ____________
> > Do you Yahoo!?
> > Everyone is raving about the all-new Yahoo! Mail
> > beta.
> > http://new.mail.yahoo.com
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> >
> >
> >
> ___________________________________________________________
> >
> > Inbox full of spam? Get leading spam protection and
> > 1GB storage with All New Yahoo! Mail.
> > http://uk.docs.yahoo.com/nowyoucan.html
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> >
> >
>
>
>
>
>
> ____________________________________________________________________________________
> Yahoo! Music Unlimited
> Access over 1 million songs.
> http://music.yahoo.com/unlimited
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_93444_6928042.1165850639804--

From java-user-return-24934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 15:27:05 2006
Return-Path: <java-user-return-24934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75691 invoked from network); 11 Dec 2006 15:27:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 15:27:05 -0000
Received: (qmail 21485 invoked by uid 500); 11 Dec 2006 15:27:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21458 invoked by uid 500); 11 Dec 2006 15:27:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21447 invoked by uid 99); 11 Dec 2006 15:27:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 07:27:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 07:26:54 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2007203nfc
        for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 07:26:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=C0G2O64ZkwnGrFZK110dTuM0jGl/02p2Gbu0f49FSE/Jg7dF6K+n6G8588Tx0xyjUysmv8ArUV9dm2OpD7KMlk07F/7rcLubVl1rF2BbGvtFyQjU9dDvtChEPq5bjuCMaUVlreftk/hlIa7I9xN2m6ybaUDJ927cFMls3HnuZwo=
Received: by 10.49.8.10 with SMTP id l10mr4722644nfi.1165850792780;
        Mon, 11 Dec 2006 07:26:32 -0800 (PST)
Received: from ?172.16.1.67? ( [212.162.171.110])
        by mx.google.com with ESMTP id c10sm21564585nfb.2006.12.11.07.26.32;
        Mon, 11 Dec 2006 07:26:32 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <200612111615.45098.waheed.mohammed@fiz-technik.de>
References: <0B1C92228C5C8D45AA7450F78B3FB9DEA20410@staf-exm-01.ardentia.co.uk> <200612111615.45098.waheed.mohammed@fiz-technik.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2C496DCC-DFAB-4422-95EE-25ED31D0F590@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Lucene id generation
Date: Mon, 11 Dec 2006 16:26:25 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


11 dec 2006 kl. 16.15 skrev Waheed Mohammed:

>
> Is there a way to influence lucene's generation of ids while indexing.

If you speak of the Lucene "document number", then no. And are you  
aware of the fact that document numbers are eligable for change at  
any time (optimization) without giving you any notification of what  
was changed to what?

>
> my requirement is. I want to have different indexes where no index  
> should have
> ids that have been assigned to an index earlier.

You'll have to handle and add thoses identities manually in a stored  
field.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 15:28:26 2006
Return-Path: <java-user-return-24935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76294 invoked from network); 11 Dec 2006 15:28:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 15:28:25 -0000
Received: (qmail 25987 invoked by uid 500); 11 Dec 2006 15:28:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25960 invoked by uid 500); 11 Dec 2006 15:28:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25948 invoked by uid 99); 11 Dec 2006 15:28:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 07:28:25 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 07:28:14 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2007623nfc
        for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 07:27:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=k/5ISepDSgw3FliR1OZ6qlGWBOMcMy5BL5mFgQ1+8b3VU1RfW7P0688hl/iC3lYY7Y/WrLBjSfIOFIwF27cquW1O8SmAS4xX9rrskDz5hVDdD4xL/CiQqTqw6Eoo/4Ip5dMqKnlqysuUl/JhubRalxMJiXmGTi6u4h214924fxk=
Received: by 10.82.153.5 with SMTP id a5mr434925bue.1165850869932;
        Mon, 11 Dec 2006 07:27:49 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Mon, 11 Dec 2006 07:27:49 -0800 (PST)
Message-ID: <359a92830612110727j1b67562emc52f535da62cc77d@mail.gmail.com>
Date: Mon, 11 Dec 2006 10:27:49 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene id generation
In-Reply-To: <200612111615.45098.waheed.mohammed@fiz-technik.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_93572_13601072.1165850869825"
References: <0B1C92228C5C8D45AA7450F78B3FB9DEA20410@staf-exm-01.ardentia.co.uk>
	 <200612111615.45098.waheed.mohammed@fiz-technik.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_93572_13601072.1165850869825
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't believe that this is possible. Or desirable. Lucene IDs are mutable,
even within an index. That is, if you index docs that get, say, IDs 1, 2, 3,
4, 5 and delete doc 2 and optimize, Docs 4 and 5 get reassigned IDs 3 and 4
(or something similar).

You're far better off controlling this yourself. That is, forget Lucene IDs
and make up your own unique IDs that you can guarantee form disjoint sets
across your multiple indexes, then work with those.

Best
Erick

On 12/11/06, Waheed Mohammed <waheed.mohammed@fiz-technik.de> wrote:
>
> Hello,
>
> Is there a way to influence lucene's generation of ids while indexing.
>
> my requirement is. I want to have different indexes where no index should
> have
> ids that have been assigned to an index earlier.
> for instance
> IDX1 : {0.........100}
> IDX2: {101.......200}
> IDX3: {201.......300}
> but not
> IDX1 : {0.........100}
> IDX2 : {0.........100}
> IDX3 : {0.........100}
>
> any help is greatly appriciated.
> --
> A W Mohammed
> Software Entwickler
> FIZ-technik e.V
> Frankfut am Main
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_93572_13601072.1165850869825--

From java-user-return-24936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 15:34:38 2006
Return-Path: <java-user-return-24936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79054 invoked from network); 11 Dec 2006 15:34:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 15:34:37 -0000
Received: (qmail 46418 invoked by uid 500); 11 Dec 2006 15:34:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46397 invoked by uid 500); 11 Dec 2006 15:34:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46386 invoked by uid 99); 11 Dec 2006 15:34:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 07:34:35 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of findmath@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 07:34:25 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2009844nfc
        for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 07:34:04 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=P9MADn3/32AAGPQJrdYWU1l8vGrQ5iFSwsnd5HME8LL3NgCIOFB5yyKXrP65LtoDjDUgloPdcieT2MNcPYrDzoRDndm/z9f9EbucEMj1GJ5uUdLsyVZHgoduMPVlslXFNRg70yUDLG+o2YhM++SzG8fOimYDP8yts1fqq86V3P4=
Received: by 10.49.75.2 with SMTP id c2mr4733185nfl.1165851243885;
        Mon, 11 Dec 2006 07:34:03 -0800 (PST)
Received: by 10.49.51.10 with HTTP; Mon, 11 Dec 2006 07:34:03 -0800 (PST)
Message-ID: <abe188f20612110734l207f41d3m1eac7af1cac1d987@mail.gmail.com>
Date: Mon, 11 Dec 2006 09:34:03 -0600
From: "Find Me" <findmath@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene id generation
In-Reply-To: <200612111615.45098.waheed.mohammed@fiz-technik.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_163203_25651775.1165851243590"
References: <0B1C92228C5C8D45AA7450F78B3FB9DEA20410@staf-exm-01.ardentia.co.uk>
	 <200612111615.45098.waheed.mohammed@fiz-technik.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_163203_25651775.1165851243590
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 12/11/06, Waheed Mohammed <waheed.mohammed@fiz-technik.de> wrote:
>
> Hello,
>
> Is there a way to influence lucene's generation of ids while indexing.
>
> my requirement is. I want to have different indexes where no index should
> have
> ids that have been assigned to an index earlier.
> for instance
> IDX1 : {0.........100}
> IDX2: {101.......200}
> IDX3: {201.......300}
> but not
> IDX1 : {0.........100}
> IDX2 : {0.........100}
> IDX3 : {0.........100}


I dont think you should be doing that. If you want to have the same effect,
during searching you can package hits from different indices with a
predetermined offset for each index. For ex: IDX1 will have an offset 0,
IDX2 will have 101...and so on.

--Rajesh Munavalli

------=_Part_163203_25651775.1165851243590--

From java-user-return-24937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 15:43:49 2006
Return-Path: <java-user-return-24937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81381 invoked from network); 11 Dec 2006 15:43:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 15:43:48 -0000
Received: (qmail 59942 invoked by uid 500); 11 Dec 2006 15:43:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59916 invoked by uid 500); 11 Dec 2006 15:43:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59905 invoked by uid 99); 11 Dec 2006 15:43:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 07:43:49 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.124] (HELO web52201.mail.yahoo.com) (206.190.48.124)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Dec 2006 07:43:37 -0800
Received: (qmail 85771 invoked by uid 60001); 11 Dec 2006 15:43:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=IR5MCcSE/qmjnv0vfCH/3aScof6GifNaQdQFIlrvyOnIHZdEUnF3HiRYx8b5+iX+ZP2ZPmWQvf5fugz9F1jxNkymzvihAsIQH2KDlJqzFg+MCX1ipfTBXEjmxqcDyk3aJUmzt3YSjn7so/IXO39G9VvfmWKi7kY+OcGj8POMin8=;
X-YMail-OSG: rOMEHHsVM1k9O48JfkpOHd3GcsJjXdFrrQOFjZtq.6oDaO43H4RY6BhhNFbpRA7GWhnIR2ukmI_eSnD252yrA9wIPR00yHD0ErAvE52MCRcGRvkfJhYUZs.y3f2BG1xyzVPRenewNe9CzQ9mPoOKcqo.iPbKHs1CZ54FvGsG_b9_yFo5MYImqGn79PLE
Received: from [219.78.85.132] by web52201.mail.yahoo.com via HTTP; Mon, 11 Dec 2006 07:43:13 PST
Date: Mon, 11 Dec 2006 07:43:13 -0800 (PST)
From: abdul aleem <janaabdulaleem@yahoo.com>
Subject: Re: Using Lucene to search log files
To: java-user@lucene.apache.org
In-Reply-To: <359a92830612110723s3dddf95fib956bb1c5f1c76a0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <368145.85768.qm@web52201.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erick,
I will take a look,

Apologies but a basic question,
How to actually retrieve the content of search,

Most of the examples in Lucene in Action 
Searcher gives the results found in number of
documents 

but i coudln't find an API to retrieve the line or
paragraph where the search is matched

PS:- I guess i have to write this on my own, well
still exploring Lucene API's, thought if i can get
some quick answer from the group
sorry if this info is already posted here 

--- Erick Erickson <erickerickson@gmail.com> wrote:

> Then you really want to look at the classes that do
> the work with filters if
> you require milliseconds. You should be just
> fine....
> 
> On 12/11/06, abdul aleem <janaabdulaleem@yahoo.com>
> wrote:
> >
> > Many thanks to All,
> >
> > well kind of puzzled because ours is a fast moving
> log
> > down to Milliseconds :( as we deal with forex on a
> > financial system.
> >
> > Im sure there will be workarounds, actually most
> of
> > the time it is enough to search within 2 log files
> of
> > 1-5MB size, coz we are more intersted in seconds
> and
> > minutes than hour as we need to get the logs
> between
> > minutes
> >
> > I had regular expressions in Mind before thinking
> of
> > Lucene, but i still feel Lucene should be
> appropriate
> > to deal with this,
> >
> > I will search the archives for respective issues,
> Also
> > have Lucene in Action book i guess it should help
> >
> >
> > Many thanks again,
> > Abdul
> >
> >
> > --- mark harwood <markharw00d@yahoo.co.uk> wrote:
> >
> > > >>Extend QueryParser to sort this out.
> > >
> > > The latest version in SVN has changed the
> default
> > > QueryParser behaviour to use RangeFilters
> instead of
> > > RangeQuerys
> > >
> > >
> > >
> > > ----- Original Message ----
> > > From: Mike Streeton
> > > <mike.streeton@ardentiasearch.com>
> > > To: java-user@lucene.apache.org
> > > Sent: Monday, 11 December, 2006 1:35:47 PM
> > > Subject: RE: Using Lucene to search log files
> > >
> > > I would use a RangeFilter instead of using the
> > > default Boolean query as
> > > this will always break at some point with Too
> many
> > > Boolean clauses.
> > > Extend QueryParser to sort this out.  As far as
> > > extracting information
> > > from log files I would look at creating yourself
> a
> > > LogAnalyzer that can
> > > interpret the contents and indexing it
> > > appropriately.
> > >
> > > Hope this helps
> > >
> > > Mike
> > >
> > > www.ardentiasearch.com the home of NetSearch
> > > -----Original Message-----
> > > From: abdul aleem
> [mailto:janaabdulaleem@yahoo.com]
> > > Sent: 11 December 2006 12:04
> > > To: java-user@lucene.apache.org
> > > Subject: Using Lucene to search log files
> > >
> > > Hi All,
> > >
> > > Im a Lucene newbie,
> > >
> > >
> > > Requirement :
> > > ==============
> > > a) Build a log viewer tool, search log files for
> > > keywords and time stamp
> > >
> > > b)  files in production approx 200 logs per day
> and
> > > each log file may range from 1MB - 5MB
> > >
> > > Lucene
> > > ========
> > > We wanted to utilize Lucene's search
> capabilities
> > > especially search all 200 log files content
> quickly
> > >
> > > a) Search criteria:
> > >     i) Timestamp search: Fetch contents between
> any
> > > two timestamps
> > >
> > >    ii) Fetch log file contents for specified
> keyword
> > >
> > >
> > >
> > > Query
> > > ========
> > >     a ) Would greatly appreciate if some
> suggestions
> > >
> > >         whether Lucene will be appropriate tool
> for
> > > the requirement ??
> > >
> > >
> > >     b) I have tried to use SpanQuery however
> > > struggling to fetch entire conents e.g. (between
> two
> > > timestamps)
> > >
> > >     c) I had also looked at
> > > LargeScaleDateRangeProcessing in the wiki, is
> that a
> > > right approach for the requirement
> > >
> > >
> > >
> > >   Any help / suggestion would be greatly
> > > appreciated,
> > >
> > >
> > >   Many thanks in advance,
> > >   Abdul
> > >
> > >
> > >
> > >
> > >
> >
>
________________________________________________________________________
> > > ____________
> > > Do you Yahoo!?
> > > Everyone is raving about the all-new Yahoo! Mail
> > > beta.
> > > http://new.mail.yahoo.com
> > >
> > >
> >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > >
> > >
> > >
> > >
> > >
> >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> >
>
___________________________________________________________
> > >
> > > Inbox full of spam? Get leading spam protection
> and
> > > 1GB storage with All New Yahoo! Mail.
> > > http://uk.docs.yahoo.com/nowyoucan.html
> > >
> > >
> >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> 
=== message truncated ===



 
____________________________________________________________________________________
Need a quick answer? Get one in minutes from people who know.
Ask your question on www.Answers.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 16:11:17 2006
Return-Path: <java-user-return-24938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95217 invoked from network); 11 Dec 2006 16:11:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 16:11:14 -0000
Received: (qmail 20769 invoked by uid 500); 11 Dec 2006 16:11:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20735 invoked by uid 500); 11 Dec 2006 16:11:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20617 invoked by uid 99); 11 Dec 2006 16:11:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 08:11:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ramana.jelda@ciao-group.com designates 194.112.113.90 as permitted sender)
Received: from [194.112.113.90] (HELO pigeon.ciao.com) (194.112.113.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 08:11:03 -0800
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id kBBGAQ5S087130
	for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 17:10:26 +0100 (CET)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200612111610.kBBGAQ5S087130@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene id generation
Date: Mon, 11 Dec 2006 17:10:18 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AccdPWusvQlt2/F6TpKRnoHpZhAKoQAAJ+Dw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
In-Reply-To: <abe188f20612110734l207f41d3m1eac7af1cac1d987@mail.gmail.com>
X-Scanned-By: MIMEDefang 2.57 on 194.112.113.90
X-Virus-Checked: Checked by ClamAV on apache.org

I really lack this feature from lucene too.
Whatever the requirements from Mohammed, There surely I see some
improvements in search performance.

My argument here is, why not lucene provides a mechanism to be able to
provide custom document ids?


> -----Original Message-----
> From: Find Me [mailto:findmath@gmail.com] 
> Sent: Monday, December 11, 2006 4:34 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene id generation
> 
> On 12/11/06, Waheed Mohammed <waheed.mohammed@fiz-technik.de> wrote:
> >
> > Hello,
> >
> > Is there a way to influence lucene's generation of ids 
> while indexing.
> >
> > my requirement is. I want to have different indexes where no index 
> > should have ids that have been assigned to an index earlier.
> > for instance
> > IDX1 : {0.........100}
> > IDX2: {101.......200}
> > IDX3: {201.......300}
> > but not
> > IDX1 : {0.........100}
> > IDX2 : {0.........100}
> > IDX3 : {0.........100}
> 
> 
> I dont think you should be doing that. If you want to have 
> the same effect,
> during searching you can package hits from different indices with a
> predetermined offset for each index. For ex: IDX1 will have 
> an offset 0,
> IDX2 will have 101...and so on.
> 
> --Rajesh Munavalli
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 17:13:07 2006
Return-Path: <java-user-return-24939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41385 invoked from network); 11 Dec 2006 17:13:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 17:13:02 -0000
Received: (qmail 36192 invoked by uid 500); 11 Dec 2006 17:12:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36118 invoked by uid 500); 11 Dec 2006 17:12:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36089 invoked by uid 99); 11 Dec 2006 17:12:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 09:12:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 09:12:36 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15C19262@mailer.syr.edu>; Mon, 11 Dec 2006 12:12:15 -0500
Message-ID: <457D916F.2080502@syr.edu>
Date: Mon, 11 Dec 2006 12:12:15 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Using Lucene to search log files
References: <368145.85768.qm@web52201.mail.yahoo.com>
In-Reply-To: <368145.85768.qm@web52201.mail.yahoo.com>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

abdul aleem wrote:
> How to actually retrieve the content of search,
> 
> Most of the examples in Lucene in Action 
> Searcher gives the results found in number of
> documents 
> 
> but i coudln't find an API to retrieve the line or
> paragraph where the search is matched

Hi Abdul,

I don't know what your log files look like -- how have you defined your
Lucene document?  The document is the only level of granularity
available for returning hits in Lucene.

Something you should look at, though, is Mark Harwood's Highlighter
package, which is part of the Lucene Sandbox.  This package can be used
to break documents into fragments, to score those fragments based on a
supplied query, and then to highlight the terms from the query.  Below
is a link to the API docs:

http://lucene.apache.org/java/docs/api/org/apache/lucene/search/highlight/package-summary.html

You can find a description of using this package in "Lucene in Action",
in Section 8.7.

The Highlighter distribution .jar is packed inside of lucene-2.0.0.zip,
available from Apache mirrors:

http://www.apache.org/dyn/closer.cgi/lucene/java/

Also, the JUnit tests are a good place to see how to use this package:

https://svn.apache.org/repos/asf/lucene/java/trunk/contrib/highlighter/src/test/org/apache/lucene/search/highlight/HighlighterTest.java

Hope it helps,
Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 17:18:47 2006
Return-Path: <java-user-return-24940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56074 invoked from network); 11 Dec 2006 17:18:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 17:18:46 -0000
Received: (qmail 85190 invoked by uid 500); 11 Dec 2006 17:18:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85165 invoked by uid 500); 11 Dec 2006 17:18:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85153 invoked by uid 99); 11 Dec 2006 17:18:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 09:18:41 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: 209.85.132.246 is neither permitted nor denied by domain of grant.ingersoll@gmail.com)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 09:18:29 -0800
Received: by an-out-0708.google.com with SMTP id c3so256959ana
        for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 09:18:08 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=CKEmWj4tmee9ZO5LH2YA7FgPt4P6FgMU2TXrcBa3rCEfa6V1LFYu2qA7KzNYlENjwuiIovq28NYZ3YOxvbFCMLN1jIeskOgQCvDDHXxyLAIQrhXamx1p8bNrK+kwF8dJpkXrcnYsFGN7n9DFtqHttosdWmPZBcRJgLkEG/Zpu2M=
Received: by 10.100.106.5 with SMTP id e5mr3663017anc.1165857487602;
        Mon, 11 Dec 2006 09:18:07 -0800 (PST)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 39sm12645375wrl.2006.12.11.09.18.05;
        Mon, 11 Dec 2006 09:18:06 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <457D916F.2080502@syr.edu>
References: <368145.85768.qm@web52201.mail.yahoo.com> <457D916F.2080502@syr.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F8B8E5AC-DCE3-4475-835F-14EABD3E9BDE@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: Using Lucene to search log files
Date: Mon, 11 Dec 2006 12:18:03 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Span Queries also return positional information

On Dec 11, 2006, at 12:12 PM, Steven Rowe wrote:

> abdul aleem wrote:
>> How to actually retrieve the content of search,
>>
>> Most of the examples in Lucene in Action
>> Searcher gives the results found in number of
>> documents
>>
>> but i coudln't find an API to retrieve the line or
>> paragraph where the search is matched
>
> Hi Abdul,
>
> I don't know what your log files look like -- how have you defined  
> your
> Lucene document?  The document is the only level of granularity
> available for returning hits in Lucene.
>
> Something you should look at, though, is Mark Harwood's Highlighter
> package, which is part of the Lucene Sandbox.  This package can be  
> used
> to break documents into fragments, to score those fragments based on a
> supplied query, and then to highlight the terms from the query.  Below
> is a link to the API docs:
>
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/ 
> highlight/package-summary.html
>
> You can find a description of using this package in "Lucene in  
> Action",
> in Section 8.7.
>
> The Highlighter distribution .jar is packed inside of  
> lucene-2.0.0.zip,
> available from Apache mirrors:
>
> http://www.apache.org/dyn/closer.cgi/lucene/java/
>
> Also, the JUnit tests are a good place to see how to use this package:
>
> https://svn.apache.org/repos/asf/lucene/java/trunk/contrib/ 
> highlighter/src/test/org/apache/lucene/search/highlight/ 
> HighlighterTest.java
>
> Hope it helps,
> Steve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 18:23:31 2006
Return-Path: <java-user-return-24941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42500 invoked from network); 11 Dec 2006 18:23:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 18:23:31 -0000
Received: (qmail 23083 invoked by uid 500); 11 Dec 2006 18:23:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23047 invoked by uid 500); 11 Dec 2006 18:23:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 15720 invoked by uid 99); 11 Dec 2006 18:18:47 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of andreas.kohn@gmail.com designates 64.233.184.226 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=aWEoPYpcfZvh5xfvI/MxxH5sUe3XkNPNs2yg479OnRy8OuTacN+MtnACVhpVtQ/XIsHTI65tbw37rCt7jAwZNViA7SmJn44/3qKslMTO5r8vhRQmdcDXUt/XlpjGtKPNSfTt+4fcWeOrvmwRstB5paAMYHAuzZ/r+9OCwBeu4V0=
Message-ID: <b185530d0612111018s1d2eb9a6yc61c4d8ec407face@mail.gmail.com>
Date: Mon, 11 Dec 2006 19:18:16 +0100
From: "Andreas Kohn" <andreas.kohn@gmail.com>
To: java-user@lucene.apache.org
Subject: Bugs in contrib/snowball/.../SnowballProgram.java -> Kraaij-Pohlmann gives Index-OOB Exception
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_83753_9652980.1165861096603"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_83753_9652980.1165861096603
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

while playing with the various stemmers of Lucene(-1.9.1), I got an
index out of bounds exception:

lucene-1.9.1>java -cp
build/contrib/snowball/lucene-snowball-1.9.2-dev.jar
net.sf.snowball.TestApp Kp bla.txt
Exception in thread "main" java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:615)
        at net.sf.snowball.TestApp.main(TestApp.java:56)
Caused by: java.lang.StringIndexOutOfBoundsException: String index out
of range: 11
        at java.lang.StringBuffer.charAt(StringBuffer.java:303)
        at net.sf.snowball.SnowballProgram.find_among_b(SnowballProgram.java:270)
        at net.sf.snowball.ext.KpStemmer.r_Step_4(KpStemmer.java:1122)
        at net.sf.snowball.ext.KpStemmer.stem(KpStemmer.java:1997)

This happens when executing
lucene-1.9.1>java -cp
build/contrib/snowball/lucene-snowball-1.9.2-dev.jar
net.sf.snowball.TestApp Kp bla.txt

bla.txt contains just this word: 'spijsvertering'.

After some debugging, and some tests with the original snowball
distribution from snowball.tartarus.org, it seems that the attached
change is needed to avoid the exception.
(The change comes from tartarus' SnowballProgram.java)
Can anyone confirm? Should I open a bug? Do you need more details?

Regards,
Andreas


------=_Part_83753_9652980.1165861096603
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_Part_83753_9652980.1165861096603--

From java-user-return-24942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 18:45:54 2006
Return-Path: <java-user-return-24942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37741 invoked from network); 11 Dec 2006 18:45:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 18:45:53 -0000
Received: (qmail 67967 invoked by uid 500); 11 Dec 2006 18:45:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67941 invoked by uid 500); 11 Dec 2006 18:45:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67929 invoked by uid 99); 11 Dec 2006 18:45:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 10:45:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 10:45:43 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 94D8F5B78D; Mon, 11 Dec 2006 10:45:22 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 907257F403
	for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 10:45:22 -0800 (PST)
Date: Mon, 11 Dec 2006 10:45:22 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: de-boosting fields
In-Reply-To: <457D1759.5050103@teamware.com>
Message-ID: <Pine.LNX.4.58.0612111044330.28687@hal.rescomp.berkeley.edu>
References: <55F9EF953014514EB6BEE1F5198CEEB44898C2@exchange.slc.mainstreamdata.com>
 <200612091054.33065@danielnaber.de> <457D1759.5050103@teamware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Isn't it also true that using Field.Index.NO_NORMS when creating the field will
: remove it from the scoring formula?  I thought I read that somewhere, but now
: can't find where.

queries on fields with NO_NORMS will still contribute to the score, but
the field *length* and/or field bosts won't contribute to the score.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 19:05:28 2006
Return-Path: <java-user-return-24943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91398 invoked from network); 11 Dec 2006 19:04:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 19:04:57 -0000
Received: (qmail 10955 invoked by uid 500); 11 Dec 2006 19:04:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10924 invoked by uid 500); 11 Dec 2006 19:04:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10908 invoked by uid 99); 11 Dec 2006 19:04:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:04:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:04:47 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 437365B78D; Mon, 11 Dec 2006 11:04:27 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3D2437F403
	for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 11:04:27 -0800 (PST)
Date: Mon, 11 Dec 2006 11:04:27 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Lucene id generation
In-Reply-To: <200612111610.kBBGAQ5S087130@pigeon.ciao.com>
Message-ID: <Pine.LNX.4.58.0612111057350.28687@hal.rescomp.berkeley.edu>
References: <200612111610.kBBGAQ5S087130@pigeon.ciao.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


if you are trying to think of Lucene's docid as a meaningful number, you
are doing something wrong.

A lot of people want to view Lucene docids the same way they look at
auto-incrimented unique keys in a database -- don't do that.  Instead
think of them as memory addresses in C or C++ ... they are a handy
numberic value that tells Lucene at what offset in various segment files
it can find data about that document -- as your index changes, as data
gets moved arround, docids change.

the best corrallary that can be made to a database is not auto-generated
unique keys, it's row numbers ... the physical row number of where that
row is in the sequence of rows in your table -- a number most databases
never give you access to unless you are dealing withthe low level
internals of hte table, because as you add or deleted lots of data, as you
drop and load new indexes those numbers can change.

if you want control of a unique ID for each of hte documents in your index
-- at one as a field just like any other.



: Date: Mon, 11 Dec 2006 17:10:18 +0100
: From: Ramana Jelda <ramana.jelda@ciao-group.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: RE: Lucene id generation
:
: I really lack this feature from lucene too.
: Whatever the requirements from Mohammed, There surely I see some
: improvements in search performance.
:
: My argument here is, why not lucene provides a mechanism to be able to
: provide custom document ids?
:
:
: > -----Original Message-----
: > From: Find Me [mailto:findmath@gmail.com]
: > Sent: Monday, December 11, 2006 4:34 PM
: > To: java-user@lucene.apache.org
: > Subject: Re: Lucene id generation
: >
: > On 12/11/06, Waheed Mohammed <waheed.mohammed@fiz-technik.de> wrote:
: > >
: > > Hello,
: > >
: > > Is there a way to influence lucene's generation of ids
: > while indexing.
: > >
: > > my requirement is. I want to have different indexes where no index
: > > should have ids that have been assigned to an index earlier.
: > > for instance
: > > IDX1 : {0.........100}
: > > IDX2: {101.......200}
: > > IDX3: {201.......300}
: > > but not
: > > IDX1 : {0.........100}
: > > IDX2 : {0.........100}
: > > IDX3 : {0.........100}
: >
: >
: > I dont think you should be doing that. If you want to have
: > the same effect,
: > during searching you can package hits from different indices with a
: > predetermined offset for each index. For ex: IDX1 will have
: > an offset 0,
: > IDX2 will have 101...and so on.
: >
: > --Rajesh Munavalli
: >
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 19:33:38 2006
Return-Path: <java-user-return-24944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83675 invoked from network); 11 Dec 2006 19:33:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 19:33:37 -0000
Received: (qmail 78756 invoked by uid 500); 11 Dec 2006 19:33:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78717 invoked by uid 500); 11 Dec 2006 19:33:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78706 invoked by uid 99); 11 Dec 2006 19:33:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:33:37 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:33:25 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id kBBJX3HC264206
	for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 19:33:03 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kBBJX2CY2945244
	for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 20:33:02 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kBBJX2pc027735
	for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 20:33:02 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kBBJX2Ma027732
	for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 20:33:02 +0100
In-Reply-To: <b185530d0612111018s1d2eb9a6yc61c4d8ec407face@mail.gmail.com>
Subject: Re: Bugs in contrib/snowball/.../SnowballProgram.java -> Kraaij-Pohlmann
 gives Index-OOB Exception
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFA8E6B1B7.03622E32-ON88257241.006916CD-88257241.006B33C3@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 11 Dec 2006 11:30:56 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 11/12/2006 21:33:02
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Andreas, I could generate the error as you describe.
You can report this bug in http://issues.apache.org/jira/browse/LUCENE

There seem to be a few updates in http://snowball.tartarus.org not
reflected currently in Lucene -
  - SnowballProgram.java has this bug fix as you describe

  The algorithms seem to have changed in a few of the stemmers:
  - DanishStemmer
  - EnglishStemmer
  - FrenchStemmer
  - ItalianStemmer
  - NorwegianStemmer
  - PortugueseStemmer
  - RussianStemmer
  - SpanishStemmer
  - SwedishStemmer

  Added stemmer:
  - HungarianStemmer

  Cosmetic changes:
  - FinishStemmer
  - GermanStemmer

So I guess it might be worth to update all these in Lucene.

"Andreas Kohn" <andreas.kohn@gmail.com> wrote on 11/12/2006 10:18:16:

> Hi,
>
> while playing with the various stemmers of Lucene(-1.9.1), I got an
> index out of bounds exception:
>
> lucene-1.9.1>java -cp
> build/contrib/snowball/lucene-snowball-1.9.2-dev.jar
> net.sf.snowball.TestApp Kp bla.txt
> Exception in thread "main" java.lang.reflect.InvocationTargetException
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.
> invoke(NativeMethodAccessorImpl.java:64)
>         at sun.reflect.DelegatingMethodAccessorImpl.
> invoke(DelegatingMethodAccessorImpl.java:43)
>         at java.lang.reflect.Method.invoke(Method.java:615)
>         at net.sf.snowball.TestApp.main(TestApp.java:56)
> Caused by: java.lang.StringIndexOutOfBoundsException: String index out
> of range: 11
>         at java.lang.StringBuffer.charAt(StringBuffer.java:303)
>         at net.sf.snowball.SnowballProgram.
> find_among_b(SnowballProgram.java:270)
>         at net.sf.snowball.ext.KpStemmer.r_Step_4(KpStemmer.java:1122)
>         at net.sf.snowball.ext.KpStemmer.stem(KpStemmer.java:1997)
>
> This happens when executing
> lucene-1.9.1>java -cp
> build/contrib/snowball/lucene-snowball-1.9.2-dev.jar
> net.sf.snowball.TestApp Kp bla.txt
>
> bla.txt contains just this word: 'spijsvertering'.
>
> After some debugging, and some tests with the original snowball
> distribution from snowball.tartarus.org, it seems that the attached
> change is needed to avoid the exception.
> (The change comes from tartarus' SnowballProgram.java)
> Can anyone confirm? Should I open a bug? Do you need more details?
>
> Regards,
> Andreas
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 19:43:50 2006
Return-Path: <java-user-return-24945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48648 invoked from network); 11 Dec 2006 19:43:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 19:43:49 -0000
Received: (qmail 14128 invoked by uid 500); 11 Dec 2006 19:43:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14094 invoked by uid 500); 11 Dec 2006 19:43:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 8281 invoked by uid 99); 11 Dec 2006 19:42:03 -0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of andreas.kohn@gmail.com designates 64.233.184.229 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=VQfMf167fpCYIQxxyVyHvlGMmJ9IiRGErvPQHP5VSXEtBUyQOrYGqgASaP4ehsP+hfis/g6azY6MtDjwyG+j88fRqmiFcUhCpWs1jKkqarf7l0HcaLeDvbW+jSVZs4dUdy+lBPuTcK4LtRTsc+a5GHwJtMEnPqcy9/lCmJc7+ds=
Message-ID: <b185530d0612111141q37228382yf88966cf209685f0@mail.gmail.com>
Date: Mon, 11 Dec 2006 20:41:31 +0100
From: "Andreas Kohn" <andreas.kohn@gmail.com>
To: "Daniel Naber" <lucenelist2005@danielnaber.de>
Subject: Re: Bugs in contrib/snowball/.../SnowballProgram.java -> Kraaij-Pohlmann gives Index-OOB Exception
Cc: java-user@lucene.apache.org
In-Reply-To: <200612111955.13349@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <b185530d0612111018s1d2eb9a6yc61c4d8ec407face@mail.gmail.com>
	 <200612111955.13349@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On 12/11/06, Daniel Naber <lucenelist2005@danielnaber.de> wrote:
> On Monday 11 December 2006 19:18, Andreas Kohn wrote:
>
> > After some debugging, and some tests with the original snowball
> > distribution from snowball.tartarus.org, it seems that the attached
> > change is needed to avoid the exception.
>
> The attachment was stripped off, so yes, please open a bug report.
>

Narf.
Okay, just so that the archive makes sense as well:
The bug is in https://issues.apache.org/jira/browse/LUCENE-740
The patch: https://issues.apache.org/jira/secure/attachment/12346937/lucene-1.9.1-SnowballProgram.java

Regards,
--
Andreas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 19:49:16 2006
Return-Path: <java-user-return-24946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99846 invoked from network); 11 Dec 2006 19:49:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 19:49:14 -0000
Received: (qmail 23501 invoked by uid 500); 11 Dec 2006 19:49:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23463 invoked by uid 500); 11 Dec 2006 19:49:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23452 invoked by uid 99); 11 Dec 2006 19:49:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:49:15 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.18.177.51] (HELO alnrmhc11.comcast.net) (206.18.177.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 11:49:04 -0800
Received: from ximpleware (c-24-6-90-145.hsd1.ca.comcast.net[24.6.90.145])
          by comcast.net (alnrmhc11) with SMTP
          id <20061211194843b1100k24o0e>; Mon, 11 Dec 2006 19:48:43 +0000
Message-ID: <002b01c71d5d$5a754f70$0d02a8c0@ximpleware>
From: "Jimmy Zhang" <crackeur@comcast.net>
To: <java-user@lucene.apache.org>
References: <OFA8E6B1B7.03622E32-ON88257241.006916CD-88257241.006B33C3@il.ibm.com>
Subject: VTD-XML 1.9 released
Date: Mon, 11 Dec 2006 11:48:34 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org

Version 1.9 of VTD-XML, available in C, C#, and Java, is now released.
This version contains XPath-related performance enhancements and bug
fixes. To download the latest release, please visit 
http://sourceforge.net/project/showfiles.php?group_id=110612.

For latest performance report, please visit 
http://vtd-xml.sf.net/benchmark.html



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 11 23:03:13 2006
Return-Path: <java-user-return-24947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53065 invoked from network); 11 Dec 2006 23:03:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2006 23:03:12 -0000
Received: (qmail 70297 invoked by uid 500); 11 Dec 2006 23:03:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70267 invoked by uid 500); 11 Dec 2006 23:03:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70256 invoked by uid 99); 11 Dec 2006 23:03:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 15:03:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [192.33.215.119] (HELO mail.isb-sib.ch) (192.33.215.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 15:03:00 -0800
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by mail.isb-sib.ch (8.13.1/8.13.1) with ESMTP id kBBN2YC9028694
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 00:02:34 +0100
Message-ID: <457DE387.4090601@isb-sib.ch>
Date: Tue, 12 Dec 2006 00:02:31 +0100
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: SegmentReader using too much memory?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Report: 
	* -100 USER_IN_WHITELIST From: address is in the user's white-list
	* -5.0 BAYES_00 BODY: Bayesian spam probability is 0 to 1%
	*      [score: 0.0000]
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on mail.isb-sib.ch
X-sib-mail-MailScanner-Information: Please contact the ISP for more information
X-sib-mail-MailScanner: Found to be clean
X-sib-mail-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-105.0 required=5.5 tests=BAYES_00,USER_IN_WHITELIST 
	autolearn=ham version=3.1.7

I've noticed that after stress-testing my application (uses Lucene 2.0) for 
I while, I have almost 200mb of byte[]s hanging around, the top two 
culprits being:

24 x SegmentReader.Norm.bytes = 112mb
  2 x SegmentReader.ones       =  16mb

The second one isn't a big deal, but I wonder what's the explanation for 
the first one?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 00:05:27 2006
Return-Path: <java-user-return-24948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66774 invoked from network); 12 Dec 2006 00:05:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 00:05:26 -0000
Received: (qmail 70412 invoked by uid 500); 12 Dec 2006 00:05:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69846 invoked by uid 500); 12 Dec 2006 00:05:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69835 invoked by uid 99); 12 Dec 2006 00:05:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 16:05:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [151.155.5.143] (HELO smtp-send.myrealbox.com) (151.155.5.143)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 16:05:15 -0800
Received: from zion.phyxsius.pt knocker.pt [217.70.72.239]
	by smtp-send.myrealbox.com with NetMail SMTP Agent $Revision: 1.6 $ on Linux
	via secured & encrypted transport (TLS);
	Mon, 11 Dec 2006 17:04:54 -0700
From: Nuno Alexandre Carvalho <nac@lsd.di.uminho.pt>
To: java-user@lucene.apache.org
Subject: dump/backup fs index catalog without stop it
Date: Tue, 12 Dec 2006 00:04:52 +0000
User-Agent: KMail/1.9.5
Organization: http://gsd.di.uminho.pt/members/nac
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200612120004.52726.nac@lsd.di.uminho.pt>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have one java service that uses lucene as it's text search engine. This is 
working perfectly, but I don't know how to dump/backup it's filesystem index 
catalog.
Can I simply do a hot copy, without stoping the service and with index open?

Thanks in advance.
-- 
Nuno Alexandre Carvalho

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 00:55:04 2006
Return-Path: <java-user-return-24949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76727 invoked from network); 12 Dec 2006 00:55:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 00:55:03 -0000
Received: (qmail 39098 invoked by uid 500); 12 Dec 2006 00:55:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39057 invoked by uid 500); 12 Dec 2006 00:55:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39046 invoked by uid 99); 12 Dec 2006 00:55:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 16:55:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 16:54:53 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gtvuj-0000Ad-6W
	for java-user@lucene.apache.org; Mon, 11 Dec 2006 16:54:33 -0800
Message-ID: <7825292.post@talk.nabble.com>
Date: Mon, 11 Dec 2006 16:54:33 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: How to cut certain index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi guys,

   I m wondering how I can cut certain index out of the index file and paste
it to other index file? For instance, I have index a particular file with
contents and other necessary info into particular index folder, then I would
like to move the index info that I have been indexed to other index folder.
Just portion of the indexed info and not all.

   Thanks.


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/How-to-cut-certain-index-tf2804709.html#a7825292
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 01:53:47 2006
Return-Path: <java-user-return-24950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87117 invoked from network); 12 Dec 2006 01:53:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 01:53:47 -0000
Received: (qmail 12828 invoked by uid 500); 12 Dec 2006 01:53:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12669 invoked by uid 500); 12 Dec 2006 01:53:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12658 invoked by uid 99); 12 Dec 2006 01:53:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 17:53:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 17:53:37 -0800
Received: by nf-out-0910.google.com with SMTP id n28so114844nfc
        for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 17:53:16 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=kIQNerSbKnbHa7lRBJO8I+8v+pcafRFyHoneYz1I7d2RdCkl5eLX29kfpb4gEMn/X3xrdgPR6X04jHYDPcak9MxUnbxdCGxB+xVhN7UhMW8Z4WfKX50V2OhkTUlf64csgWYAeDyEXG7/IiJXelfHEwHKYSpmgT8aKvCfg+7IGG0=
Received: by 10.82.172.15 with SMTP id u15mr1203346bue.1165888395526;
        Mon, 11 Dec 2006 17:53:15 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Mon, 11 Dec 2006 17:53:15 -0800 (PST)
Message-ID: <c68e39170612111753i5a5d4bd4ja284a8d25774d1d4@mail.gmail.com>
Date: Mon, 11 Dec 2006 20:53:15 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: SegmentReader using too much memory?
In-Reply-To: <457DE387.4090601@isb-sib.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <457DE387.4090601@isb-sib.ch>
X-Google-Sender-Auth: 8ed4ee28d30d4533
X-Virus-Checked: Checked by ClamAV on apache.org

On 12/11/06, Eric Jain <Eric.Jain@isb-sib.ch> wrote:
> I've noticed that after stress-testing my application (uses Lucene 2.0) for
> I while, I have almost 200mb of byte[]s hanging around, the top two
> culprits being:
>
> 24 x SegmentReader.Norm.bytes = 112mb
>   2 x SegmentReader.ones       =  16mb

Each indexed field has a norm array that is the product of it's
index-time boost and the length normalization factor.  If you don't
need either, you can omit the norms (as it looks like you already have
on some fields given that "ones" is the fake norms used in place of
the "real" norms).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 02:34:11 2006
Return-Path: <java-user-return-24951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1556 invoked from network); 12 Dec 2006 02:34:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 02:34:09 -0000
Received: (qmail 58876 invoked by uid 500); 12 Dec 2006 02:34:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58851 invoked by uid 500); 12 Dec 2006 02:34:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58840 invoked by uid 99); 12 Dec 2006 02:34:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 18:34:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [192.33.215.119] (HELO mail.isb-sib.ch) (192.33.215.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 18:33:59 -0800
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by mail.isb-sib.ch (8.13.1/8.13.1) with ESMTP id kBC2XTSn012314
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 03:33:30 +0100
Message-ID: <457E14F6.8050806@isb-sib.ch>
Date: Tue, 12 Dec 2006 03:33:26 +0100
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SegmentReader using too much memory?
References: <457DE387.4090601@isb-sib.ch> <c68e39170612111753i5a5d4bd4ja284a8d25774d1d4@mail.gmail.com>
In-Reply-To: <c68e39170612111753i5a5d4bd4ja284a8d25774d1d4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Report: 
	* -100 USER_IN_WHITELIST From: address is in the user's white-list
	* -5.0 BAYES_00 BODY: Bayesian spam probability is 0 to 1%
	*      [score: 0.0000]
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on mail.isb-sib.ch
X-sib-mail-MailScanner-Information: Please contact the ISP for more information
X-sib-mail-MailScanner: Found to be clean
X-sib-mail-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-105.0 required=5.5 tests=BAYES_00,USER_IN_WHITELIST 
	autolearn=ham version=3.1.7

Yonik Seeley wrote:
> On 12/11/06, Eric Jain <Eric.Jain@isb-sib.ch> wrote:
>> I've noticed that after stress-testing my application (uses Lucene 
>> 2.0) for
>> I while, I have almost 200mb of byte[]s hanging around, the top two
>> culprits being:
>>
>> 24 x SegmentReader.Norm.bytes = 112mb
>>   2 x SegmentReader.ones       =  16mb
> 
> Each indexed field has a norm array that is the product of it's
> index-time boost and the length normalization factor.  If you don't
> need either, you can omit the norms (as it looks like you already have
> on some fields given that "ones" is the fake norms used in place of
> the "real" norms).

Thanks for the explanation.

Not sure where the fields without norms come from: I use neither 
Field.setOmitNorms nor Index.NO_NORMS anywhere!

I do want to use document boosting... Is that independent from field 
boosting? The length normalization on the other hand may not be necessary.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 02:44:25 2006
Return-Path: <java-user-return-24952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3397 invoked from network); 12 Dec 2006 02:44:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 02:44:24 -0000
Received: (qmail 73810 invoked by uid 500); 12 Dec 2006 02:44:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73770 invoked by uid 500); 12 Dec 2006 02:44:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73759 invoked by uid 99); 12 Dec 2006 02:44:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 18:44:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 18:44:14 -0800
Received: by nf-out-0910.google.com with SMTP id n28so129741nfc
        for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 18:43:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=UOlV6bOWek/xjje5M1laJEARDlTocxO5/fePvHA4yH7N8hGbD/2puQ+p+b1JVze9jKmSV2iG2cO6alF8xrksydriFsa5YM/7JPKe5JPap17YXKyu/C5xE1IYsCsHOn1+W/WQj9WUZkAfFLxFgyQ3/SAznCIgIB8ZWuIyIGYIe+Y=
Received: by 10.82.169.4 with SMTP id r4mr1224686bue.1165891432203;
        Mon, 11 Dec 2006 18:43:52 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Mon, 11 Dec 2006 18:43:52 -0800 (PST)
Message-ID: <c68e39170612111843l5d96b923x9ce4a4a20ad37dcc@mail.gmail.com>
Date: Mon, 11 Dec 2006 21:43:52 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: SegmentReader using too much memory?
In-Reply-To: <457E14F6.8050806@isb-sib.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <457DE387.4090601@isb-sib.ch>
	 <c68e39170612111753i5a5d4bd4ja284a8d25774d1d4@mail.gmail.com>
	 <457E14F6.8050806@isb-sib.ch>
X-Google-Sender-Auth: 10c7de15b19a2f1c
X-Virus-Checked: Checked by ClamAV on apache.org

On 12/11/06, Eric Jain <Eric.Jain@isb-sib.ch> wrote:
> I do want to use document boosting... Is that independent from field
> boosting? The length normalization on the other hand may not be necessary.

There is no real document boost at the index level... it is simply
multiplied into the boost for every field of that document.  So it
comes down to what fields you want that index-time boost to take
effect on (as well as length normalization).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 03:06:48 2006
Return-Path: <java-user-return-24953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8990 invoked from network); 12 Dec 2006 03:06:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 03:06:47 -0000
Received: (qmail 93030 invoked by uid 500); 12 Dec 2006 03:06:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92986 invoked by uid 500); 12 Dec 2006 03:06:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92975 invoked by uid 99); 12 Dec 2006 03:06:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 19:06:49 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 19:06:37 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id kBC36FH7069248
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 03:06:15 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kBC36Fad2957472
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 04:06:15 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kBC36FQo010707
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 04:06:15 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kBC36FfT010704
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 04:06:15 +0100
In-Reply-To: <457E14F6.8050806@isb-sib.ch>
Subject: Re: SegmentReader using too much memory?
To: java-user@lucene.apache.org
Cc: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF819F76EB.D92540A1-ON88257242.000F3433-88257242.000F60DB@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 11 Dec 2006 18:47:58 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 12/12/2006 05:06:14
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

> I do want to use document boosting... Is that independent from field
> boosting? The length normalization on the other hand may not be
necessary.

They "go together" - see "Score Boosting" in
http://lucene.apache.org/java/docs/scoring.html


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 03:42:37 2006
Return-Path: <java-user-return-24954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18950 invoked from network); 12 Dec 2006 03:42:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 03:42:35 -0000
Received: (qmail 23438 invoked by uid 500); 12 Dec 2006 03:42:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23405 invoked by uid 500); 12 Dec 2006 03:42:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23394 invoked by uid 99); 12 Dec 2006 03:42:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 19:42:36 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.228] (HELO web50315.mail.yahoo.com) (206.190.39.228)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Dec 2006 19:42:24 -0800
Received: (qmail 52734 invoked by uid 60001); 12 Dec 2006 03:42:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=hZKosL5gG4ZHtbJkOPvn5m8dCXMBmJulo32+8BqPfqQcP8WcbgqfR+r0rGVqIhFQzxaS+W4kUwggax+8w1sGXDSrne2tCqhhQfHU6vEwJp6GUeeNNSyfgWqwhMygn7fE/tvsAhW1KJTuXzXg98DgnPE3oE1BDAgy9HdFavcFl2c=  ;
Message-ID: <20061212034203.52732.qmail@web50315.mail.yahoo.com>
Received: from [74.65.202.166] by web50315.mail.yahoo.com via HTTP; Mon, 11 Dec 2006 19:42:03 PST
Date: Mon, 11 Dec 2006 19:41:58 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: SegmentReader using too much memory?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Eric, you said you aren't using any Field.Index.NO_NORMS fields, but Segmen=
tReader.ones should only be used if you do use NO_NORMS, so things don't ad=
d up here.=0A=0AOtis=0A=0A----- Original Message ----=0AFrom: Yonik Seeley =
<yonik@apache.org>=0ATo: java-user@lucene.apache.org=0ASent: Monday, Decemb=
er 11, 2006 8:53:15 PM=0ASubject: Re: SegmentReader using too much memory?=
=0A=0AOn 12/11/06, Eric Jain <Eric.Jain@isb-sib.ch> wrote:=0A> I've noticed=
 that after stress-testing my application (uses Lucene 2.0) for=0A> I while=
, I have almost 200mb of byte[]s hanging around, the top two=0A> culprits b=
eing:=0A>=0A> 24 x SegmentReader.Norm.bytes =3D 112mb=0A>   2 x SegmentRead=
er.ones       =3D  16mb=0A=0AEach indexed field has a norm array that is th=
e product of it's=0Aindex-time boost and the length normalization factor.  =
If you don't=0Aneed either, you can omit the norms (as it looks like you al=
ready have=0Aon some fields given that "ones" is the fake norms used in pla=
ce of=0Athe "real" norms).=0A=0A-Yonik=0Ahttp://incubator.apache.org/solr S=
olr, the open-source Lucene search server=0A=0A----------------------------=
-----------------------------------------=0ATo unsubscribe, e-mail: java-us=
er-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-us=
er-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 03:45:28 2006
Return-Path: <java-user-return-24955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19579 invoked from network); 12 Dec 2006 03:45:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 03:45:27 -0000
Received: (qmail 30397 invoked by uid 500); 12 Dec 2006 03:45:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29329 invoked by uid 500); 12 Dec 2006 03:45:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29318 invoked by uid 99); 12 Dec 2006 03:45:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 19:45:28 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.215] (HELO web50313.mail.yahoo.com) (206.190.39.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Dec 2006 19:45:17 -0800
Received: (qmail 48789 invoked by uid 60001); 12 Dec 2006 03:44:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=mBLPk6n1TsSYhZRDFYRvbod1UYebd6oj0LFJGNLmKzcNG9S/9vowGNg6HtzuqCJhuEIMhL/Pn9UoKOVO18jXmCEh4ETbrHJmvjppjur1083UuUSOf2IoD5B5llsZMBbeeR1chCwD5qNlSn5T8rzTIrRJktfvVfPL8WBaZ4gI78k=  ;
Message-ID: <20061212034456.48787.qmail@web50313.mail.yahoo.com>
Received: from [74.65.202.166] by web50313.mail.yahoo.com via HTTP; Mon, 11 Dec 2006 19:44:56 PST
Date: Mon, 11 Dec 2006 19:44:56 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: dump/backup fs index catalog without stop it
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Nuno,=0A=0AIf you stop or block all operations that can change the index (e=
.g. deletes and additions), you can safely copy the whole index directory. =
 If you do it from Java, you can use Lucene's own Lock class to lock index =
for modifications, copy the index directory, and unlock the index.=0A=0AOti=
s=0A=0A----- Original Message ----=0AFrom: Nuno Alexandre Carvalho <nac@lsd=
.di.uminho.pt>=0ATo: java-user@lucene.apache.org=0ASent: Monday, December 1=
1, 2006 7:04:52 PM=0ASubject: dump/backup fs index catalog without stop it=
=0A=0AHi,=0A=0AI have one java service that uses lucene as it's text search=
 engine. This is =0Aworking perfectly, but I don't know how to dump/backup =
it's filesystem index =0Acatalog.=0ACan I simply do a hot copy, without sto=
ping the service and with index open?=0A=0AThanks in advance.=0A-- =0ANuno =
Alexandre Carvalho=0A=0A---------------------------------------------------=
------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.a=
pache.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.o=
rg=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 04:00:22 2006
Return-Path: <java-user-return-24956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22208 invoked from network); 12 Dec 2006 04:00:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 04:00:21 -0000
Received: (qmail 46826 invoked by uid 500); 12 Dec 2006 04:00:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46405 invoked by uid 500); 12 Dec 2006 04:00:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46394 invoked by uid 99); 12 Dec 2006 04:00:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 20:00:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 20:00:12 -0800
Received: by nf-out-0910.google.com with SMTP id n28so156860nfc
        for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 19:59:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=RsOWqktwtowAw2nVErS5aEzlZJEqO37KCVdOZtGPvDVu6rNnDv7smoBSk847Ai6H17s6Nj/xtp/DkzE7hpLHfkulE6SgXsXXBkAdy0D42DgWFJhOV/c1g9p44+2lmZlUGJP5sXrcnL62CDPLwyXTpGYttfyYCKxQreU3/REw0TE=
Received: by 10.82.126.5 with SMTP id y5mr585674buc.1165895989474;
        Mon, 11 Dec 2006 19:59:49 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Mon, 11 Dec 2006 19:59:49 -0800 (PST)
Message-ID: <c68e39170612111959wfe3833djf2d30cf6d357de6b@mail.gmail.com>
Date: Mon, 11 Dec 2006 22:59:49 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: SegmentReader using too much memory?
In-Reply-To: <20061212034203.52732.qmail@web50315.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061212034203.52732.qmail@web50315.mail.yahoo.com>
X-Google-Sender-Auth: e525230a04f3ffc7
X-Virus-Checked: Checked by ClamAV on apache.org

On 12/11/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Eric, you said you aren't using any Field.Index.NO_NORMS fields, but SegmentReader.ones should only be used if you do use NO_NORMS, so things don't add up here.

norms(fieldThatDoesntExist) will also return fakeNorms (ones)

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 04:24:58 2006
Return-Path: <java-user-return-24957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26087 invoked from network); 12 Dec 2006 04:24:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 04:24:57 -0000
Received: (qmail 69686 invoked by uid 500); 12 Dec 2006 04:24:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69657 invoked by uid 500); 12 Dec 2006 04:24:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69646 invoked by uid 99); 12 Dec 2006 04:24:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 20:24:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [192.33.215.119] (HELO mail.isb-sib.ch) (192.33.215.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 20:24:47 -0800
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by mail.isb-sib.ch (8.13.1/8.13.1) with ESMTP id kBC4OKFO022601
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 05:24:20 +0100
Message-ID: <457E2EF1.9080403@isb-sib.ch>
Date: Tue, 12 Dec 2006 05:24:17 +0100
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SegmentReader using too much memory?
References: <457DE387.4090601@isb-sib.ch>	 <c68e39170612111753i5a5d4bd4ja284a8d25774d1d4@mail.gmail.com>	 <457E14F6.8050806@isb-sib.ch> <c68e39170612111843l5d96b923x9ce4a4a20ad37dcc@mail.gmail.com>
In-Reply-To: <c68e39170612111843l5d96b923x9ce4a4a20ad37dcc@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Report: 
	* -100 USER_IN_WHITELIST From: address is in the user's white-list
	* -5.0 BAYES_00 BODY: Bayesian spam probability is 0 to 1%
	*      [score: 0.0000]
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on mail.isb-sib.ch
X-sib-mail-MailScanner-Information: Please contact the ISP for more information
X-sib-mail-MailScanner: Found to be clean
X-sib-mail-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-105.0 required=5.5 tests=BAYES_00,USER_IN_WHITELIST 
	autolearn=ham version=3.1.7

Yonik Seeley wrote:
> There is no real document boost at the index level... it is simply
> multiplied into the boost for every field of that document.  So it
> comes down to what fields you want that index-time boost to take
> effect on (as well as length normalization).

Come to think of it, I do have two large indexes that don't really need any 
document boosting, could perhaps save some memory there...

But what I still don't understand is why the amount of memory that is used 
by SegmentReader.Norm.bytes keeps growing -- at first quite fast to about 
150mb, then slower.

After startup:

11 x SegmentReader.Norm.bytes = 17mb


After searching some indexes once or twice times:

78 x SegmentReader.Norm.bytes = 79mb
  5 x SegmentReader.ones       = 16mb


After a few dozen queries on one of the indexes:

58 x SegmentReader.Norm.bytes = 158mb
  5 x SegmentReader.ones       = 16mb

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 04:27:54 2006
Return-Path: <java-user-return-24958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26628 invoked from network); 12 Dec 2006 04:27:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 04:27:53 -0000
Received: (qmail 72371 invoked by uid 500); 12 Dec 2006 04:27:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72337 invoked by uid 500); 12 Dec 2006 04:27:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72326 invoked by uid 99); 12 Dec 2006 04:27:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 20:27:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 20:27:44 -0800
Received: by nf-out-0910.google.com with SMTP id n28so169256nfc
        for <java-user@lucene.apache.org>; Mon, 11 Dec 2006 20:27:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Bj8sbv2YFSW1CCsm+DUfQWBvto9EMIhZImHXmpLvreaNcTKefIkcTkZpLxi8ukL6XAZq2ZLHRlP3gHMxvXgV+ULfSL9q7o4dCi8lYf4VvuIUHOdH0tT0ELQINWmI0M82sdY3Yx2e9kXoLXksRMqDoKMzsa8yRZbJ7QnXjFklUcE=
Received: by 10.82.120.15 with SMTP id s15mr585077buc.1165897642454;
        Mon, 11 Dec 2006 20:27:22 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Mon, 11 Dec 2006 20:27:22 -0800 (PST)
Message-ID: <c68e39170612112027l58a522ecq11377b1481e54853@mail.gmail.com>
Date: Mon, 11 Dec 2006 23:27:22 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: SegmentReader using too much memory?
In-Reply-To: <457E2EF1.9080403@isb-sib.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <457DE387.4090601@isb-sib.ch>
	 <c68e39170612111753i5a5d4bd4ja284a8d25774d1d4@mail.gmail.com>
	 <457E14F6.8050806@isb-sib.ch>
	 <c68e39170612111843l5d96b923x9ce4a4a20ad37dcc@mail.gmail.com>
	 <457E2EF1.9080403@isb-sib.ch>
X-Google-Sender-Auth: 4dd26a3e7e93f887
X-Virus-Checked: Checked by ClamAV on apache.org

On 12/11/06, Eric Jain <Eric.Jain@isb-sib.ch> wrote:
> Yonik Seeley wrote:
> > There is no real document boost at the index level... it is simply
> > multiplied into the boost for every field of that document.  So it
> > comes down to what fields you want that index-time boost to take
> > effect on (as well as length normalization).
>
> Come to think of it, I do have two large indexes that don't really need any
> document boosting, could perhaps save some memory there...
>
> But what I still don't understand is why the amount of memory that is used
> by SegmentReader.Norm.bytes keeps growing -- at first quite fast to about
> 150mb, then slower.

It's read on demand, per indexed field.
So assuming your index is optimized (a single segment), then it
increases by one byte[] each time you search on a new field.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 04:39:43 2006
Return-Path: <java-user-return-24959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27962 invoked from network); 12 Dec 2006 04:39:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 04:39:42 -0000
Received: (qmail 81242 invoked by uid 500); 12 Dec 2006 04:39:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81217 invoked by uid 500); 12 Dec 2006 04:39:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81199 invoked by uid 99); 12 Dec 2006 04:39:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 20:39:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [192.33.215.119] (HELO mail.isb-sib.ch) (192.33.215.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 20:39:33 -0800
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by mail.isb-sib.ch (8.13.1/8.13.1) with ESMTP id kBC4d7Du023504
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 05:39:08 +0100
Message-ID: <457E3268.20501@isb-sib.ch>
Date: Tue, 12 Dec 2006 05:39:04 +0100
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SegmentReader using too much memory?
References: <457DE387.4090601@isb-sib.ch>	 <c68e39170612111753i5a5d4bd4ja284a8d25774d1d4@mail.gmail.com>	 <457E14F6.8050806@isb-sib.ch>	 <c68e39170612111843l5d96b923x9ce4a4a20ad37dcc@mail.gmail.com>	 <457E2EF1.9080403@isb-sib.ch> <c68e39170612112027l58a522ecq11377b1481e54853@mail.gmail.com>
In-Reply-To: <c68e39170612112027l58a522ecq11377b1481e54853@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Report: 
	* -100 USER_IN_WHITELIST From: address is in the user's white-list
	* -5.0 BAYES_00 BODY: Bayesian spam probability is 0 to 1%
	*      [score: 0.0000]
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on mail.isb-sib.ch
X-sib-mail-MailScanner-Information: Please contact the ISP for more information
X-sib-mail-MailScanner: Found to be clean
X-sib-mail-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-105.0 required=5.5 tests=BAYES_00,USER_IN_WHITELIST 
	autolearn=ham version=3.1.7

Yonik Seeley wrote:
> It's read on demand, per indexed field.
> So assuming your index is optimized (a single segment), then it
> increases by one byte[] each time you search on a new field.

OK, makes sense then. Thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 05:43:59 2006
Return-Path: <java-user-return-24960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43333 invoked from network); 12 Dec 2006 05:43:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 05:43:57 -0000
Received: (qmail 43086 invoked by uid 500); 12 Dec 2006 05:44:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42006 invoked by uid 500); 12 Dec 2006 05:43:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41995 invoked by uid 99); 12 Dec 2006 05:43:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 21:43:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Dec 2006 21:43:46 -0800
Received: (qmail 29688 invoked by uid 0); 12 Dec 2006 05:43:25 -0000
Received: from 80.43.49.213 by www062.gmx.net with HTTP;
 Tue, 12 Dec 2006 06:43:25 +0100 (CET)
Content-Type: text/plain; charset="iso-8859-1"
Date: Tue, 12 Dec 2006 06:43:25 +0100
From: "Karl Koch" <TheRanger@gmx.net>
In-Reply-To: 
 <OF0BAF6051.E20C0E05-ON88257240.0073B2B0-88257240.00747FF1@il.ibm.com>
Message-ID: <20061212054325.249430@gmx.net>
MIME-Version: 1.0
References: 
 <OF0BAF6051.E20C0E05-ON88257240.0073B2B0-88257240.00747FF1@il.ibm.com>
Subject: Re:  Re: Questions about Lucene scoring (was: Lucene 1.2 - scoring
 formula needed)
To: java-user@lucene.apache.org
X-Authenticated: #21808356
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Well it doesn't since there is not justification of why it is the way it is. Its like saying, here is that car with 5 weels... enjoy driving. 

Karl 
-------- Original-Nachricht --------
Datum:  Sun, 10 Dec 2006 13:12:29 -0800
Von: Doron Cohen <DORONC@il.ibm.com>
An: java-user@lucene.apache.org
Betreff:  Re: Questions about Lucene scoring (was: Lucene 1.2 - scoring formula needed)

> TheRanger@gmx.net wrote:
> > According to these sources, the Lucene scoring formula in version 1.2
> is:
> >
> > score(q,d) = sum_t(tf_q * idf_t / norm_q * tf_d * idf_t / norm_d_t *
> > boost_t) * coord_q_d
> 
> Hi Karl,
> 
> A slightly more readable version of (the same) scoring formula is now in
> Lucene's Similarity jdocs -
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html
>  - I think the explanations there would also answer at least some of your
> questions.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 07:08:30 2006
Return-Path: <java-user-return-24961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62164 invoked from network); 12 Dec 2006 07:08:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 07:08:29 -0000
Received: (qmail 42064 invoked by uid 500); 12 Dec 2006 07:08:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41326 invoked by uid 500); 12 Dec 2006 07:08:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41314 invoked by uid 99); 12 Dec 2006 07:08:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 23:08:31 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Dec 2006 23:08:18 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.8/8.13.8) with ESMTP id kBC77qiV039776
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 07:07:56 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kBC77qBU3031110
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 08:07:52 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kBC77qs9014059
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 08:07:52 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kBC77qHr014056
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 08:07:52 +0100
In-Reply-To: <20061212054325.249430@gmx.net>
Subject: Re:  Re: Questions about Lucene scoring (was: Lucene 1.2 - scoring formula
 needed)
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFAFD62F89.4391B508-ON88257242.00218077-88257242.0024CC6E@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 11 Dec 2006 22:41:56 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 12/12/2006 09:07:51
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

> Well it doesn't since there is not justification of why it is the
> way it is. Its like saying, here is that car with 5 weels... enjoy
driving.

> >  - I think the explanations there would also answer at least some of
your
> > questions.

I hoped it would answer *some* of the questions... (not all)

Let me try some more :-)

> 2a) Why does Lucene normalise with Cosine Normalisation for the
> query? In a range of different IR system variations (as shown in
> Chisholm and Kolda's paper in the table on page 8) queries where not
> normalised at all. Is there a good reason or perhaps any empirical
> evidence that would support this decision?

I think "why normalizing at all" is answered in
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html#formula_queryNorm
... "queryNorm(q) is a normalizing factor used to make scores between
queries comparable. This factor does not affect document ranking (since all
ranked documents are multiplied by the same factor), but rather just
attempts to make scores from different queries (or even different indexes)
comparable. This is a search time factor computed by the Similarity in
effect at search time. The default computation in DefaultSimilarity is:
queryNorm(q) = 1/sqrt(sumOfSquaredWeights)"

I think there were discussions on this normalization. Anyhow I am not the
expert to justify this.

> 2b) What is the motivation for the normalisation imposed on the
> documents (norm_d_t) which I have not seen before in any other
> system. Again, does anybody have pointers to literature on this?

If I understand what you are asking, the logic is that verrry long
documents could virtually contain the entire collection, and therefore
should be "punished" for being too long, otherwise they would have an
"unfair advantage" upon short documents. Google "search engine document
length normalization" for more on this, or see also
http://trec.nist.gov/pubs/trec10/papers/JuruAtTrec.pdf

> Any answer or partial answer on any of the questions would be
> greatly appreciated!

I hope this (although partial) helps at all,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 08:35:25 2006
Return-Path: <java-user-return-24962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86809 invoked from network); 12 Dec 2006 08:35:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 08:35:24 -0000
Received: (qmail 54142 invoked by uid 500); 12 Dec 2006 08:35:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53806 invoked by uid 500); 12 Dec 2006 08:35:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53795 invoked by uid 99); 12 Dec 2006 08:35:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 00:35:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 00:35:14 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gu36E-0004AS-EZ
	for java-user@lucene.apache.org; Tue, 12 Dec 2006 00:34:54 -0800
Message-ID: <7829277.post@talk.nabble.com>
Date: Tue, 12 Dec 2006 00:34:54 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: How to delete partial index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   I have ask this question before but may be the question wasn't clear.

   How can I delete particular index that I want to and keep the rest? For
instance, I have been indexed document Id, date, user Id and contents, my
question is does that particular contents will be deleted if I just
specified the document Id, and I used reader.deleteDocument(document Id).

   And I have another question is if I do normal cut and paste the document,
how can I delete the index content from one destination and restore to
another destination and the index file must merge.

   Thanks


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/How-to-delete-partial-index-tf2806204.html#a7829277
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 09:00:44 2006
Return-Path: <java-user-return-24963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95891 invoked from network); 12 Dec 2006 09:00:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 09:00:43 -0000
Received: (qmail 85143 invoked by uid 500); 12 Dec 2006 09:00:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85096 invoked by uid 500); 12 Dec 2006 09:00:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85067 invoked by uid 99); 12 Dec 2006 09:00:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 01:00:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Dec 2006 01:00:02 -0800
Received: (qmail 17270 invoked by uid 0); 12 Dec 2006 08:59:27 -0000
Received: from 80.47.230.92 by www026.gmx.net with HTTP;
 Tue, 12 Dec 2006 09:59:27 +0100 (CET)
Cc: DORONC@il.ibm.com
Content-Type: multipart/mixed; boundary="========GMX21221116591396877624"
Date: Tue, 12 Dec 2006 09:59:28 +0100
From: "Karl Koch" <TheRanger@gmx.net>
In-Reply-To: 
 <OFAFD62F89.4391B508-ON88257242.00218077-88257242.0024CC6E@il.ibm.com>
Message-ID: <20061212085928.212210@gmx.net>
MIME-Version: 1.0
References: 
 <OFAFD62F89.4391B508-ON88257242.00218077-88257242.0024CC6E@il.ibm.com>
Subject: Re:  Re:  Re: Questions about Lucene scoring (was: Lucene 1.2 -
 scoring formula needed)
To: java-user@lucene.apache.org
X-Authenticated: #21808356
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Virus-Checked: Checked by ClamAV on apache.org

--========GMX21221116591396877624
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit

Hello Doron (and all the others who read here):),

thank you for your effort and your time. I really appreciate it. :)

I understand why normalisation is done in general. Mainly, to normalise the bias of oversized documents. In the literature I have read so far, there is usually a high effort on document normalisation (simply because they may be very different in size), and usually no normalisation on queries (simply because they are usually only a few words anyway). 

For this reason, I do not understand why Lucene (in version 1.2) normalises the query(!) with 

norm_q : sqrt(sum_t((tf_q*idf_t)^2)) 

which is also called cosine normalisation. This is a technique that is rather comprehensive and usually used for docuemnts only(!) in all systems I have seen so far.  For the documents Lucene employs its norm_d_t which is explained as:

norm_d_t : square root of number of tokens in d in the same field as t

basically just the square root of the number of unique terms in the document (since I do search over all fields always). I would have expected cosine normalisation here... 

The paper you provided uses document normalisation in the following way:

norm = 1 / sqrt(0.8*avgDocLength + 0.2*(# of unique terms in d))

I am not sure how this relates to norm_d_t. Did I misunderstood the Lucene formula or do I misinterpret something? I enclosed the formula as a graphic (from LaTeX) so you can have a look should this be the case here...

I will post the other questions separately since they actually also relate to the new Lucene scoring algoritm (they have not changed). Thank you for your time again :)

Karl


-------- Original-Nachricht --------
Datum:  Mon, 11 Dec 2006 22:41:56 -0800
Von: Doron Cohen <DORONC@il.ibm.com>
An: java-user@lucene.apache.org
Betreff:  Re:  Re: Questions about Lucene scoring (was: Lucene 1.2 - scoring formula needed)

> > Well it doesn't since there is not justification of why it is the
> > way it is. Its like saying, here is that car with 5 weels... enjoy
> driving.
> 
> > >  - I think the explanations there would also answer at least some of
> your
> > > questions.
> 
> I hoped it would answer *some* of the questions... (not all)
> 
> Let me try some more :-)
> 
> > 2a) Why does Lucene normalise with Cosine Normalisation for the
> > query? In a range of different IR system variations (as shown in
> > Chisholm and Kolda's paper in the table on page 8) queries where not
> > normalised at all. Is there a good reason or perhaps any empirical
> > evidence that would support this decision?
> 
> I think "why normalizing at all" is answered in
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html#formula_queryNorm
> ... "queryNorm(q) is a normalizing factor used to make scores between
> queries comparable. This factor does not affect document ranking (since
> all
> ranked documents are multiplied by the same factor), but rather just
> attempts to make scores from different queries (or even different indexes)
> comparable. This is a search time factor computed by the Similarity in
> effect at search time. The default computation in DefaultSimilarity is:
> queryNorm(q) = 1/sqrt(sumOfSquaredWeights)"
> 
> I think there were discussions on this normalization. Anyhow I am not the
> expert to justify this.
> 
> > 2b) What is the motivation for the normalisation imposed on the
> > documents (norm_d_t) which I have not seen before in any other
> > system. Again, does anybody have pointers to literature on this?
> 
> If I understand what you are asking, the logic is that verrry long
> documents could virtually contain the entire collection, and therefore
> should be "punished" for being too long, otherwise they would have an
> "unfair advantage" upon short documents. Google "search engine document
> length normalization" for more on this, or see also
> http://trec.nist.gov/pubs/trec10/papers/JuruAtTrec.pdf
> 
> > Any answer or partial answer on any of the questions would be
> > greatly appreciated!
> 
> I hope this (although partial) helps at all,
> Doron
-- 
"Ein Herz für Kinder" - Ihre Spende hilft! Aktion: www.deutschlandsegelt.de
Unser Dankeschön: Ihr Name auf dem Segel der 1. deutschen America's Cup-Yacht!


--========GMX21221116591396877624
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--========GMX21221116591396877624--

From java-user-return-24964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 09:55:33 2006
Return-Path: <java-user-return-24964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14027 invoked from network); 12 Dec 2006 09:55:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 09:55:32 -0000
Received: (qmail 77595 invoked by uid 500); 12 Dec 2006 09:55:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77505 invoked by uid 500); 12 Dec 2006 09:55:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77494 invoked by uid 99); 12 Dec 2006 09:55:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 01:55:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.97.200.65] (HELO gate.fiz-technik.de) (193.97.200.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 01:55:19 -0800
Received: from localhost (localhost [127.0.0.1])
	by localhost.qgroup.de (Postfix) with ESMTP id 7619213F869
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 10:54:57 +0100 (CET)
Received: from gate.fiz-technik.de ([127.0.0.1])
 by localhost (gate [127.0.0.1]) (amavisd-new, port 27304) with ESMTP
 id 23458-34 for <java-user@lucene.apache.org>;
 Tue, 12 Dec 2006 10:54:57 +0100 (CET)
Received: from fizmail.fiz-technik.de (newton1.fiz-technik.de [193.97.200.134])
	by gate.fiz-technik.de (Postfix) with SMTP id 2B01113F67B
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 10:54:57 +0100 (CET)
Received: by fizmail.fiz-technik.de (Postfix, from userid 65534)
	id 00331947BD; Tue, 12 Dec 2006 10:54:56 +0100 (CET)
Received: from walix.fiz-technik.de (unknown [193.97.200.248])
	by fizmail.fiz-technik.de (Postfix) with ESMTP id CA3469430A
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 10:54:55 +0100 (CET)
From: Waheed Mohammed <waheed.mohammed@fiz-technik.de>
Organization: FIZ-technik e.V
To: java-user@lucene.apache.org
Subject: Re: Lucene id generation
Date: Tue, 12 Dec 2006 10:55:32 +0100
User-Agent: KMail/1.7.1
References: <200612111610.kBBGAQ5S087130@pigeon.ciao.com>
In-Reply-To: <200612111610.kBBGAQ5S087130@pigeon.ciao.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200612121055.32916.waheed.mohammed@fiz-technik.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the instant reply,
I see what rajesh advises is something lilke what MultiReader does.
That would be my last approach becouse of the complexities it will introduce 
in developing the business case I have.
Any thing other than that would be a appriciable ppointer


On Monday 11 December 2006 17:10, Ramana Jelda wrote:
> I really lack this feature from lucene too.
> Whatever the requirements from Mohammed, There surely I see some
> improvements in search performance.
>
> My argument here is, why not lucene provides a mechanism to be able to
> provide custom document ids?
>
> > -----Original Message-----
> > From: Find Me [mailto:findmath@gmail.com]
> > Sent: Monday, December 11, 2006 4:34 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Lucene id generation
> >
> > On 12/11/06, Waheed Mohammed <waheed.mohammed@fiz-technik.de> wrote:
> > > Hello,
> > >
> > > Is there a way to influence lucene's generation of ids
> >
> > while indexing.
> >
> > > my requirement is. I want to have different indexes where no index
> > > should have ids that have been assigned to an index earlier.
> > > for instance
> > > IDX1 : {0.........100}
> > > IDX2: {101.......200}
> > > IDX3: {201.......300}
> > > but not
> > > IDX1 : {0.........100}
> > > IDX2 : {0.........100}
> > > IDX3 : {0.........100}
> >
> > I dont think you should be doing that. If you want to have
> > the same effect,
> > during searching you can package hits from different indices with a
> > predetermined offset for each index. For ex: IDX1 will have
> > an offset 0,
> > IDX2 will have 101...and so on.
> >
> > --Rajesh Munavalli
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

-- 
A W Mohammed
Software Entwickler
FIZ-technik e.V
Frankfut am Main


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 10:24:13 2006
Return-Path: <java-user-return-24965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21524 invoked from network); 12 Dec 2006 10:24:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 10:24:12 -0000
Received: (qmail 25665 invoked by uid 500); 12 Dec 2006 10:24:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25447 invoked by uid 500); 12 Dec 2006 10:24:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25436 invoked by uid 99); 12 Dec 2006 10:24:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 02:24:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Dec 2006 02:24:02 -0800
Received: (qmail 27313 invoked by uid 0); 12 Dec 2006 10:23:41 -0000
Received: from 80.47.230.92 by www002.gmx.net with HTTP;
 Tue, 12 Dec 2006 11:23:41 +0100 (CET)
Content-Type: text/plain; charset="iso-8859-1"
Date: Tue, 12 Dec 2006 11:23:41 +0100
From: "Karl Koch" <TheRanger@gmx.net>
Message-ID: <20061212102341.217950@gmx.net>
MIME-Version: 1.0
Subject: Lucene scoring: Term frequency normalisation
To: "User " <java-user@lucene.apache.org>
X-Authenticated: #21808356
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have a question about the current Lucene scoring algoritm. In this scoring algorithm, the term frequency is calcualted by using the square root of the number of occuring terms as described in 

http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html#formula_tf

Having read a number of IR papers and also in a number of IR books, I am quite familiar that log is used to normalise term frequency in order to prevent very high term frequencies from having too much an effect on the scoring. 

However, what exactly is the advantage of using sqare root instead of log? Is there any scientific reason behind this? Does anybody know a paper about this issue? Any source of impirical evidence that this works better than the log? Is there perhaps another discussion thread in here which I have not seen. 

Thank you advance,
Karl 


-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 10:32:48 2006
Return-Path: <java-user-return-24966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23207 invoked from network); 12 Dec 2006 10:32:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 10:32:47 -0000
Received: (qmail 37719 invoked by uid 500); 12 Dec 2006 10:32:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37697 invoked by uid 500); 12 Dec 2006 10:32:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37686 invoked by uid 99); 12 Dec 2006 10:32:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 02:32:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Dec 2006 02:32:36 -0800
Received: (qmail 25471 invoked by uid 0); 12 Dec 2006 10:32:14 -0000
Received: from 80.47.230.92 by www020.gmx.net with HTTP;
 Tue, 12 Dec 2006 11:32:14 +0100 (CET)
Content-Type: text/plain; charset="iso-8859-1"
Date: Tue, 12 Dec 2006 11:32:14 +0100
From: "Karl Koch" <TheRanger@gmx.net>
Message-ID: <20061212103214.218000@gmx.net>
MIME-Version: 1.0
Subject: Lucene scoring: coord_q_d factor
To: "User " <java-user@lucene.apache.org>
X-Authenticated: #21808356
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello group,

The coord(q,d) normalisation is "a score factor based on how many of the query terms are found in the specified document." and described here: 

http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html#formula_coord

Does this have a theoretical base? On what basis was the decition make to have it? Does anybody know a paper (in Information Retrieval, Information Seeking, etc.) or other more general information about this?

Best Regards,
Karl

P.S.: This is my second question about Lucene scoring (current version). It relates to the question I posted on the older scoring version. I decised to repost since most people here seemed not to read it since it relates to an old version - well actually it doesn't.
-- 
"Ein Herz für Kinder" - Ihre Spende hilft! Aktion: www.deutschlandsegelt.de
Unser Dankeschön: Ihr Name auf dem Segel der 1. deutschen America's Cup-Yacht!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 10:53:54 2006
Return-Path: <java-user-return-24967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27652 invoked from network); 12 Dec 2006 10:53:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 10:53:53 -0000
Received: (qmail 69740 invoked by uid 500); 12 Dec 2006 10:53:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69711 invoked by uid 500); 12 Dec 2006 10:53:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69700 invoked by uid 99); 12 Dec 2006 10:53:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 02:53:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Dec 2006 02:53:44 -0800
Received: (qmail invoked by alias); 12 Dec 2006 10:53:22 -0000
Received: from p548C7FCA.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.127.202]
  by mail.gmx.net (mp047) with SMTP; 12 Dec 2006 11:53:22 +0100
X-Authenticated: #3493418
Message-ID: <457E8A0A.5080708@gmx.de>
Date: Tue, 12 Dec 2006 11:52:58 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Questions about Lucene scoring (was: Lucene 1.2 - scoring formula
 needed)
References: <OFAFD62F89.4391B508-ON88257242.00218077-88257242.0024CC6E@il.ibm.com> <20061212085928.212210@gmx.net>
In-Reply-To: <20061212085928.212210@gmx.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Karl,

Iâ€™m very interested in the details of Luceneâ€™s scoring as well.

Karl Koch wrote:
> For this reason, I do not understand why Lucene (in version 1.2) normalises the query(!) with 
> 
> norm_q : sqrt(sum_t((tf_q*idf_t)^2))
> 
> which is also called cosine normalisation. This is a technique that is rather comprehensive and usually used for docuemnts only(!) in all systems I have seen so far.

I hope I have understood 
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html#formula_queryNorm 
and your problem correctly: "queryNorm(q) is a normalizing factor used 
to make scores between queries comparable."

For "normal" searches you donâ€™t need to compare queries. You have just 
to compare the documents of a single query. Queries in a "normal" search 
have usually a different semantic, so you canâ€™t really compare the 
results of different queries.

If you use Lucene for instance for classification of documents it is 
necessary to compare the results of different queries. You have 
documents to classify indexed at one site and the classes at the other 
side (thread "Store a document-like map" 
http://www.gossamer-threads.com/lists/lucene/java-user/42816). Than you 
can generate queries from the classes and search against the documents. 
The score of a matching document is the similarity of the document to 
the query build from the class. Now the queries have to be comparable.

You can transform a document into a query and a query into a document. 
That could be the reason normalizing a query like a document.

> For the documents Lucene employs its norm_d_t which is explained as:
> 
> norm_d_t : square root of number of tokens in d in the same field as t
> 
> basically just the square root of the number of unique terms in the document (since I do search over all fields always). I would have expected cosine normalisation here... 
> 
> The paper you provided uses document normalisation in the following way:
> 
> norm = 1 / sqrt(0.8*avgDocLength + 0.2*(# of unique terms in d))
> 
> I am not sure how this relates to norm_d_t.

"norm(t,d)   =   doc.getBoost()  â€¢  lengthNorm(field)  â€¢  âˆ f.getBoost()"
(http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html#formula_norm)

That seems to be in depended of the documents length. The factor 
lengthNorm(field) uses the documents length or better the field length: 
"Computes the normalization value for a field given the total number of 
terms contained in a field." 
(http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html#formula_norm).

"Implemented as 1/sqrt(numTerms)" 
(http://lucene.apache.org/java/docs/api/org/apache/lucene/search/DefaultSimilarity.html#lengthNorm(java.lang.String,%20int))

SÃ¶ren

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 11:15:43 2006
Return-Path: <java-user-return-24968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34749 invoked from network); 12 Dec 2006 11:15:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 11:15:42 -0000
Received: (qmail 99673 invoked by uid 500); 12 Dec 2006 11:15:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99642 invoked by uid 500); 12 Dec 2006 11:15:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99627 invoked by uid 99); 12 Dec 2006 11:15:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 03:15:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.160.131.136] (HELO p15105029.pureserver.info) (217.160.131.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 03:15:30 -0800
Received: (qmail 23484 invoked by uid 89); 12 Dec 2006 12:15:09 +0100
Received: by simscan 1.2.0 ppid: 23479, pid: 23481, t: 0.0986s
         scanners: clamav: 0.88.6/m:41/d:2316
Received: from unknown (HELO max.osuatech.local) (max%osua.de@82.144.201.6)
  by 0 with ESMTPA; 12 Dec 2006 12:15:09 +0100
Date: Tue, 12 Dec 2006 13:15:08 +0200
From: Maxim Patramanskij <max@osua.de>
X-Mailer: The Bat! (v1.62i) Business
Reply-To: Maxim Patramanskij <max@osua.de>
Organization: OSUA technology
X-Priority: 3 (Normal)
Message-ID: <561304514109.20061212131508@osua.de>
To: java-user@lucene.apache.org
Subject: Complex query filtering
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


I need to apply a set of custom filters to my query.
One of the filters, which optionally can be applied, is a filter by
date range.

For the moment I'm using a BooleanQuery approach for this.
I know that it is not the best from the score accuracy nor performance
point of view and I want change this to use FilteredQuery approach.

I' assuming the following approach to re-implement current state:

1. For all the filters, excluding filter by date, I still create a
BooleanQuery.

2. For filtering by date, I create  RangeFilter and wrap it around
with a ConstantScoreQuery.

3. Create a new BooleanQuery from the queries, obtained on 1 and 2 step

4. Create a QueryFilter from the BooleanQuery, created on step 3.

5. Use FilteredQuery, created from user query and QueryFilter(or even surrounded
with CachingWrapperFilter for better performance), created on previous step.


Would this solution be the best approach for constructing overall filter?

Thanks in advance,
Max


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 13:23:28 2006
Return-Path: <java-user-return-24969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71143 invoked from network); 12 Dec 2006 13:23:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 13:23:27 -0000
Received: (qmail 46430 invoked by uid 500); 12 Dec 2006 13:23:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46294 invoked by uid 500); 12 Dec 2006 13:23:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46283 invoked by uid 99); 12 Dec 2006 13:23:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 05:23:27 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.130] (HELO web52207.mail.yahoo.com) (206.190.48.130)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Dec 2006 05:23:15 -0800
Received: (qmail 85552 invoked by uid 60001); 12 Dec 2006 13:22:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Mhax3Houh0iH7qzffL4vAK4fryM66jqusu5faa7biftSoLqhCDKdBdYjs1MIYsODzM3tyAUprCei62v48eZ8uxwctWgDAxraNi8JCaZ04KP3L4YAlzMVD4OSH8ixx1oFHILH7JsoGEeX3i0oB1lDTQ6Gl++j9RY7qMDY1nrNGfo=  ;
Message-ID: <20061212132254.85550.qmail@web52207.mail.yahoo.com>
X-YMail-OSG: WKk33_QVM1kDcGE1z6EnIF2Rr60peSy111j6gvk1gmYYoe70agUUyS45VNUG3ZZO4gpZZ8f_rHjeXofQnXbtEuO4u1mDO7Xa1ZJGfnwr6GIkW8VyMXWRFz7KkfYcoZnr2CbLMEl6vO4ZZEwdIDwgE85v1pJWClNkSZmsz5M6hPee7fW7QvSlaGbw35H7
Received: from [219.78.85.132] by web52207.mail.yahoo.com via HTTP; Tue, 12 Dec 2006 05:22:54 PST
Date: Tue, 12 Dec 2006 05:22:54 -0800 (PST)
From: abdul aleem <janaabdulaleem@yahoo.com>
Subject: Indexing large files
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi There,

I have been working with Lucene API for the past 1 day

we are in the process of building a log viewer tool,

this is how the log file looks

[2006-12-11 01:52:40.179] [lon0571xus] [DEBUG] [TIE
heartbeat monitor (monitor.heartbeat.fxstreamrates)]
[unknown] [] [] ActiveRateServerIdList - received
hearbeat from rate server id [1]

[2006-12-11 01:52:40.180] ... 


Search is working as a charm
=============================

If i use a Indexer entire conent of the files is
indexed and lucene gets me the name of the files
containing the keyword with amazing speed


Query how to index Lucene Document
==================================
Im using following to index

Document doc = new Document();
doc.add( new Field(...) , FileReader(f)));

the above helps to take the complete file contents and
QueryParser can check for keywords in the file


a) However i cannot retrieve the search contents using
   Hits,  I believe it is because i have not created
   additional indexes ?, 
   Also tried to use sandbox Highlighter it cannot
retrieve the contents inspite of search is successful

b) How to create indexes if i use a FileReader ??
   do I need to use java IO to read entire content
   of file ? and create lucene index? 

c) I guess im missing something, appreciate if some
direction is given

d) Lucene in Action does not provide any hints on
creating custom analyzers would appreciate if someone
could give some pointers ??


Many thanks ,

PS:- I actually need to create index based on
timestamp in the log file.












 
____________________________________________________________________________________
Want to start your own business?
Learn how on Yahoo! Small Business.
http://smallbusiness.yahoo.com/r-index

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 13:41:05 2006
Return-Path: <java-user-return-24970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75759 invoked from network); 12 Dec 2006 13:41:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 13:41:04 -0000
Received: (qmail 76001 invoked by uid 500); 12 Dec 2006 13:41:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75672 invoked by uid 500); 12 Dec 2006 13:41:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 30508 invoked by uid 99); 12 Dec 2006 12:31:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
X-Authentication-Warning: tribal.metalab.unc.edu: mefron owned process doing -bs
Date: Tue, 12 Dec 2006 07:30:34 -0500 (EST)
From: Miles Efron <mefron@metalab.unc.edu>
To: java-user@lucene.apache.org
Subject: java requirements for lucene
Message-ID: <Pine.LNX.4.64.0612120721450.13324@tribal.metalab.unc.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org

i have successfully compiled, installed, and run lucene-based applications 
on several machines, but i am currently trying to get lucene to run on a 
sever that i do not administer and am having an odd problem... perhaps 
someone can decipher it?

if i try, for instance, to run the basic lucene demo (IndexFiles) I get 
the following output, then stacktrace:

$ java org.apache.lucene.demo.IndexFiles ../data/medline/docs/
Indexing to directory 'index'...
adding ../data/medline/docs/1.txt
Exception in thread "main" java.lang.IncompatibleClassChangeError: field 
org.apache.lucene.analysis.standard.StandardFilter.tokenImage was not 
found.
    at _Jv_ResolvePoolEntry(java.lang.Class, int) 
(/usr/lib/libgcj.so.5.0.0)
    at org.apache.lucene.analysis.standard.StandardFilter.<clinit>() 
(Unknown Source)
    at java.lang.Class.initializeClass() (/usr/lib/libgcj.so.5.0.0)
    at 
org.apache.lucene.analysis.standard.StandardAnalyzer.tokenStream(java.lang.String, 
java.io.Reader) (Unknown Source)
    at 
org.apache.lucene.index.DocumentWriter.invertDocument(org.apache.lucene.document.Document) 
(Unknown Source)
    at org.apache.lucene.index.DocumentWriter.addDocument(java.lang.String, 
org.apache.lucene.document.Document) (Unknown Source)
    at 
org.apache.lucene.index.IndexWriter.addDocument(org.apache.lucene.document.Document, 
org.apache.lucene.analysis.Analyzer) (Unknown Source)
    at 
org.apache.lucene.index.IndexWriter.addDocument(org.apache.lucene.document.Document) 
(Unknown Source)
    at 
org.apache.lucene.demo.IndexFiles.indexDocs(org.apache.lucene.index.IndexWriter, 
java.io.File) (Unknown Source)
    at 
org.apache.lucene.demo.IndexFiles.indexDocs(org.apache.lucene.index.IndexWriter, 
java.io.File) (Unknown Source)
    at org.apache.lucene.demo.IndexFiles.main(java.lang.String[]) (Unknown 
Source)

I've googled this Exception, but haven't found much.  For futher 
reference, here's version info on java on the machine:

java -version
java version "1.4.2"
gcj (GCC) 3.4.6 20060404 (Red Hat 3.4.6-3)

If anyone has thoughts on what might be the matter, I'd be most grateful. 
Thanks,
-Miles

__________________________________
Miles Efron
http://www.ibiblio.org/mefron
mefron@ibiblio.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 13:58:17 2006
Return-Path: <java-user-return-24971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80461 invoked from network); 12 Dec 2006 13:58:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 13:58:17 -0000
Received: (qmail 4164 invoked by uid 500); 12 Dec 2006 13:58:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3889 invoked by uid 500); 12 Dec 2006 13:58:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3878 invoked by uid 99); 12 Dec 2006 13:58:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 05:58:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.116.38.223] (HELO rectangular.com) (68.116.38.223)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 05:58:06 -0800
Received: from [67.189.26.9] (helo=[10.0.1.3])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1Gu8H6-0006xG-GU
	for java-user@lucene.apache.org; Tue, 12 Dec 2006 06:06:28 -0800
In-Reply-To: <20061212102341.217950@gmx.net>
References: <20061212102341.217950@gmx.net>
Mime-Version: 1.0 (Apple Message framework v752.2)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <127CFEBA-9C18-4CAF-AAEF-86EF1AB585B9@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: Lucene scoring: Term frequency normalisation
Date: Tue, 12 Dec 2006 05:57:44 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 12, 2006, at 2:23 AM, Karl Koch wrote:
> However, what exactly is the advantage of using sqare root instead  
> of log?

Speaking anecdotally, I wouldn't say there's an advantage.  There's a  
predictable effect: very long documents are rewarded, since the  
damping factor is not as strong.  For most of the engines I've built,  
that hasn't been desirable.

In order to get optimal results for large collections, it's often  
necessary to customize this, by overriding lengthNorm.  IME, for  
searching general content such as random html documents, the body  
field needs a higher damping factor, but more importantly a plateau  
at the top end to prevent very short documents from dominating the  
results.

   public float lengthNorm(String fieldName, int numTerms) {
     numTerms = numTerms < 100 ? 100 : numTerms;
     return (float)(1.0 / Math.sqrt(numTerms));
   }

In contrast, you don't want the plateau for title fields, assuming  
that malignant keyword stuffing isn't an issue.

This stuff is corpus specific, though.

http://www.mail-archive.com/java-user@lucene.apache.org/msg08496.html

> Is there any scientific reason behind this? Does anybody know a  
> paper about this issue?

Here's one from 1997:

Lee, Chuang, and Seamons: "Document Ranking and the Vector Space Model"
http://www.cs.ust.hk/faculty/dlee/Papers/ir/ieee-sw-rank.pdf

> Is there perhaps another discussion thread in here which I have not  
> seen.

http://www.mail-archive.com/java-dev@lucene.apache.org/msg04509.html
http://www.mail-archive.com/java-dev@lucene.apache.org/msg01704.html

Searching the mail archives for "lengthNorm" will turn up some more.

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 14:08:39 2006
Return-Path: <java-user-return-24972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84185 invoked from network); 12 Dec 2006 14:08:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 14:08:38 -0000
Received: (qmail 21702 invoked by uid 500); 12 Dec 2006 14:08:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21552 invoked by uid 500); 12 Dec 2006 14:08:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21536 invoked by uid 99); 12 Dec 2006 14:08:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 06:08:39 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=BLANK_LINES_70_80
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [130.89.4.34] (HELO mail.service.utwente.nl) (130.89.4.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 06:08:29 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: lucene search
Date: Tue, 12 Dec 2006 15:08:07 +0100
Message-ID: <3F5099632A78C7488A80D6535C4F4E8026629E@EX01.service.utwente.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: lucene search
Thread-Index: Accd9vLLz/cvLRRtQS+GjH4J8rYAIA==
From: "Bloem, E.J.W. van \(Erik, Student CS\)" <e.j.w.vanbloem@student.utwente.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

=20

I am building a portal where users are able to maintain a personal doc, =
placed in a database or dir on server.

I want the users to be able to search all other users doc's for =
keywords.

Like give me a top ten of documents containing the work bike.

=20

Is Lucene useful for this? Or do you know a better approach?

=20

=20

Greetings,

=20

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 14:31:12 2006
Return-Path: <java-user-return-24973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 168 invoked from network); 12 Dec 2006 14:31:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 14:31:10 -0000
Received: (qmail 85752 invoked by uid 500); 12 Dec 2006 14:31:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85688 invoked by uid 500); 12 Dec 2006 14:31:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85512 invoked by uid 99); 12 Dec 2006 14:31:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 06:31:14 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 06:31:04 -0800
Received: by nf-out-0910.google.com with SMTP id n28so399814nfc
        for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 06:30:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VEq0DnSy0+sqgqeRjrDhrt6EnczFJSQWQ/hKmmulQPaOWPlL1+Uwk5VLXF4+vuy+dpVFpnMqCjQiP43jcwgx4o4z2Cj5kR2YlBeWPWRGO/5BxWQskW7By3vazeLHb0Nzsr9gU+4peVRUVbAMiY16cEWDujdXA3eLK5Mu85nU5Sc=
Received: by 10.82.182.8 with SMTP id e8mr1335287buf.1165933842265;
        Tue, 12 Dec 2006 06:30:42 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Tue, 12 Dec 2006 06:30:42 -0800 (PST)
Message-ID: <359a92830612120630h1eff416cq65561f30d1d4433f@mail.gmail.com>
Date: Tue, 12 Dec 2006 09:30:42 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search
In-Reply-To: <3F5099632A78C7488A80D6535C4F4E8026629E@EX01.service.utwente.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_113918_16270131.1165933842133"
References: <3F5099632A78C7488A80D6535C4F4E8026629E@EX01.service.utwente.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_113918_16270131.1165933842133
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well. searching documents for text is what Lucene is *made* for <G>. So,
yes, this would be a fine thing to use Lucene for. You'll have to deal with
coordinating between when a document is added to the directory and when it's
added to the Lucene index.

Also, give some thought to what form your documents are in. Are they Word
documents? PDFs? HTMLs? ...? You'll have in interesting time cracking the
formats of such documents, although searching this archive will give you
some ideas on how to do that. Simple HTML case: <b>E</b>rick should be
indexed as "Erick". Now do you make it so?

Best
Erick

On 12/12/06, Bloem, E.J.W. van (Erik, Student CS) <
e.j.w.vanbloem@student.utwente.nl> wrote:
>
> Hi,
>
>
>
> I am building a portal where users are able to maintain a personal doc,
> placed in a database or dir on server.
>
> I want the users to be able to search all other users doc's for keywords.
>
> Like give me a top ten of documents containing the work bike.
>
>
>
> Is Lucene useful for this? Or do you know a better approach?
>
>
>
>
>
> Greetings,
>
>
>
> Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_113918_16270131.1165933842133--

From java-user-return-24974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 14:36:09 2006
Return-Path: <java-user-return-24974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1664 invoked from network); 12 Dec 2006 14:36:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 14:36:08 -0000
Received: (qmail 93451 invoked by uid 500); 12 Dec 2006 14:36:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93410 invoked by uid 500); 12 Dec 2006 14:36:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93399 invoked by uid 99); 12 Dec 2006 14:36:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 06:36:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of koji.sekiguchi@m4.dion.ne.jp designates 219.125.112.4 as permitted sender)
Received: from [219.125.112.4] (HELO nm05omta053.dion.ne.jp) (219.125.112.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Dec 2006 06:35:58 -0800
Received: from sekiguchi ([219.125.41.213])
	by nm05mta.dion.ne.jp
	id <20061212233535548.MA37.80D14F8@nm05mta.dion.ne.jp>;
	Tue, 12 Dec 2006 23:35:35 +0900
From: "Koji Sekiguchi" <koji.sekiguchi@m4.dion.ne.jp>
To: <java-user@lucene.apache.org>
Subject: RE: search by field, not field value
Date: Tue, 12 Dec 2006 23:35:31 +0900
Message-ID: <PKEIKOCKCHNIIHNECPCCMEHOCOAA.koji.sekiguchi@m4.dion.ne.jp>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <359a92830611121003v3952d70cg625fd693d4e9f1dd@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1807
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Erick,

Sorry for replying to a bit old topic.

> TermDocs.seek(new Term("specific_field", ""));
>
>  Note that the "" as the value of the term gets all the terms. Then use
> TermDocs.next until it returns false. At each point, TermDocs.doc() will
> give you the Lucene ID of a document containing that term.

I couldn't seek the term when I use "" as the term value.
I'd appreciate it if you run the following program and give some comment?
I'm hoping to get the way of enumerating all the terms.
Thanks in advance,

Koji
---------------------
package termDocs;

import java.io.IOException;

import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.index.TermDocs;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.RAMDirectory;

public final class SearchByField {

	static final String F_NAME = "name";
	static final String F_ADDR = "addr";
	static final String F_AGE = "age";
	static final String F_TYPE = "type";
	static final String F_NUMBER = "num";
	static final String F_LEVEL = "lvl";

	public static void main(String[] args) throws IOException {

		Source[] docSources = {
			new Employee( "Dale Rickey", "West Virginia, US", "25" ),
			new Company( "D&R Co.", "Tennessee, US", "maker" ),
			new Partner( "0123", "PARTNER-A", "A" ),
			new Employee( "Candy Buckley", "New York, US", "30" ),
			new Company( "Suzu Inc.", "Utah, US", "logistics" ),
			new Partner( "0234", "PARTNER-B", "B" ),
			new Employee( "Justin Steveman", "Botswana", "35" ),
			new Company( "Sato Bro.", "Austria", "services" ),
			new Partner( "5566", "PARTNER-C", "C" )
		};

		Directory dir = new RAMDirectory();
		IndexWriter writer = new IndexWriter( dir, new WhitespaceAnalyzer(),
true );
		for( Source docSource : docSources ){
			Document doc = docSource.getDocument();
			writer.addDocument( doc );
		}
		writer.close();

		IndexReader reader = IndexReader.open( dir );
		TermDocs termDocs = reader.termDocs();
		termDocs.seek( new Term( F_ADDR, "" ) );
		//termDocs.seek( new Term( F_ADDR, "US" ) );
		while( termDocs.next() ){
			Document doc = reader.document( termDocs.doc() );
			int freq = termDocs.freq();
			System.out.println( "doc: \"" + doc.toString() + "\"\tfreq: " + freq );
		}
		reader.close();
		dir.close();
	}

	static interface Source {
		public Document getDocument();
	}

	static class Employee implements Source {
		String name;
		String addr;
		String age;
		Employee( String name, String addr, String age ){
			this.name = name;
			this.addr = addr;
			this.age = age;
		}
		public Document getDocument(){
			Document doc = new Document();
			doc.add( new Field( F_NAME, name, Field.Store.YES,
Field.Index.TOKENIZED ) );
			doc.add( new Field( F_ADDR, addr, Field.Store.YES,
Field.Index.TOKENIZED ) );
			doc.add( new Field( F_AGE, age, Field.Store.YES,
Field.Index.UN_TOKENIZED ) );
			return doc;
		}
	}

	static class Company implements Source {
		String name;
		String addr;
		String type;
		Company( String name, String addr, String type ){
			this.name = name;
			this.addr = addr;
			this.type = type;
		}
		public Document getDocument(){
			Document doc = new Document();
			doc.add( new Field( F_NAME, name, Field.Store.YES,
Field.Index.TOKENIZED ) );
			doc.add( new Field( F_ADDR, addr, Field.Store.YES,
Field.Index.TOKENIZED ) );
			doc.add( new Field( F_TYPE, type, Field.Store.YES,
Field.Index.TOKENIZED ) );
			return doc;
		}
	}

	static class Partner implements Source {
		String number;
		String name;
		String level;
		Partner( String number, String name, String level ){
			this.number = number;
			this.name = name;
			this.level = level;
		}
		public Document getDocument(){
			Document doc = new Document();
			doc.add( new Field( F_NUMBER, number, Field.Store.YES,
Field.Index.UN_TOKENIZED ) );
			doc.add( new Field( F_NAME, name, Field.Store.YES,
Field.Index.TOKENIZED ) );
			doc.add( new Field( F_LEVEL, level, Field.Store.YES,
Field.Index.UN_TOKENIZED ) );
			return doc;
		}
	}
}


> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Monday, November 13, 2006 3:04 AM
> To: java-user@lucene.apache.org; simon.willnauer@gmail.com
> Subject: Re: search by field, not field value
>
>
> I'm going mostly from memory here, so the details may not be entirely
> accurate, but.....
>
> See TermDocs (FilterTermDocs?). Use the seek method to get to the
> term e.g.
>
> TermDocs.seek(new Term("specific_field", ""));
>
>  Note that the "" as the value of the term gets all the terms. Then use
> TermDocs.next until it returns false. At each point, TermDocs.doc() will
> give you the Lucene ID of a document containing that term.
>
> Really, this enumerates all the documents that have any values in
> specific_field.
>
> One issue here is that you'll get multiple hits per document. For
> instance,
> say you've indexed A, B, and C as values in specific_field for document 5.
> Just blindly doing the next() call will get you document 5 three
> times. You
> can use TermDocs.skipTo(current document + 1). to insure that you only
> process a document once. This is either a minor efficiency or a major time
> savings, depending on the characteristics of your index..... Be a bit
> careful and only call next() if you *don't* use skipto, or you may skip a
> doc that only has one value for specific_field.
>
> Hope this helps
> Erick
>
>
>
>
> On 11/12/06, Simon Willnauer <simon.willnauer@googlemail.com> wrote:
> >
> > Hey tony,
> > I guess the easiest way for you to do that is to create a extra field
> > containig the field names and just fire a boolean query on this extra
> > field.
> >
> > best regards simon
> >
> > On 11/12/06, tony yin <gaoligong@gmail.com> wrote:
> > > I want search document by specific field, not by field value, How to?
> > >
> > > I have some document store in fields{content, key, path} and some in
> > > {content, key, path, specific_field}
> > >
> > > and I want to find all the document that have specific_field,
> Could you
> > help
> > > me?
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 15:01:39 2006
Return-Path: <java-user-return-24975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11880 invoked from network); 12 Dec 2006 15:01:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 15:01:38 -0000
Received: (qmail 69760 invoked by uid 500); 12 Dec 2006 15:01:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69729 invoked by uid 500); 12 Dec 2006 15:01:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69718 invoked by uid 99); 12 Dec 2006 15:01:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 07:01:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 07:01:26 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15C25F11@mailer.syr.edu>; Tue, 12 Dec 2006 10:01:05 -0500
Message-ID: <457EC431.5010305@syr.edu>
Date: Tue, 12 Dec 2006 10:01:05 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene scoring: coord_q_d factor
References: <20061212103214.218000@gmx.net>
In-Reply-To: <20061212103214.218000@gmx.net>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Karl Koch wrote:
> The coord(q,d) normalisation is "a score factor based on how many of
> the query terms are found in the specified document." and described
> here:
> 
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html#formula_coord
> 
> Does this have a theoretical base? On what basis was the decition
> make to have it? Does anybody know a paper (in Information Retrieval,
> Information Seeking, etc.) or other more general information about
> this?

Following is quoted from: Krovetz, R. & Croft, W. B. (1992) Lexical
Ambiguity and Information Retrieval. ACM Transactions on Information
Systems, 10(2): 115-141.

    Many retrieval systems represent documents and queries
    by the words they contain, and base the comparison on
    the number of words they have in common. The more
    words the query and document have in common, the
    higher the document is ranked; this is referred to as
    a "coordination match."  Performance is improved by
    weighting query and document words using frequency
    information from the collection and individual
    document texts [27].

27. Salton, G. & McGill, M. Introduction to Modern Information
Retrieval. McGraw-Hill, New York, 1983.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 16:46:06 2006
Return-Path: <java-user-return-24976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61870 invoked from network); 12 Dec 2006 16:46:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 16:46:05 -0000
Received: (qmail 87682 invoked by uid 500); 12 Dec 2006 16:46:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87638 invoked by uid 500); 12 Dec 2006 16:46:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87627 invoked by uid 99); 12 Dec 2006 16:46:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 08:46:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 08:45:54 -0800
Received: by nf-out-0910.google.com with SMTP id n28so443047nfc
        for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 08:45:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DzUZSLe0UfcbXf1Ex3FdKJ5gQfkmvcWzUzfvCZPdJTOGIWL75mZPXkRbZPg6WKLBFG4bDzvHaztznBGSU0SPNFw+7LB1Q9MYqrcTmaKy5/A8LjkSnJX50+uJVFPg2nbEO/qukdN7s1KH0lUN/O8HUWEki8TU0Gz/NH1MQsvqG9k=
Received: by 10.82.111.8 with SMTP id j8mr766778buc.1165941932212;
        Tue, 12 Dec 2006 08:45:32 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Tue, 12 Dec 2006 08:45:31 -0800 (PST)
Message-ID: <359a92830612120845r486e9138k60d0004cec7698a3@mail.gmail.com>
Date: Tue, 12 Dec 2006 11:45:31 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search by field, not field value
In-Reply-To: <PKEIKOCKCHNIIHNECPCCMEHOCOAA.koji.sekiguchi@m4.dion.ne.jp>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_117544_3825898.1165941931485"
References: <359a92830611121003v3952d70cg625fd693d4e9f1dd@mail.gmail.com>
	 <PKEIKOCKCHNIIHNECPCCMEHOCOAA.koji.sekiguchi@m4.dion.ne.jp>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_117544_3825898.1165941931485
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Try this. It returns

Found a term Austria in doc 7
Found a term Botswana in doc 6
Found a term New in doc 3
Found a term Tennessee, in doc 1
Found a term US in doc 0
Found a term US in doc 1
Found a term US in doc 3
Found a term US in doc 4
Found a term Utah, in doc 4
Found a term Virginia, in doc 0
Found a term West in doc 0
Found a term York, in doc 3


<<<<<<<<<<<<<<<<<<<
package bonkers;
import java.io.IOException;

import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.index.TermDocs;
import org.apache.lucene.index.TermEnum;
import org.apache.lucene.search.FilteredTermEnum;
import org.apache.lucene.search.WildcardTermEnum;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.RAMDirectory;
public final class SearchByField {

  static final String F_NAME = "name";
  static final String F_ADDR = "addr";
  static final String F_AGE = "age";
  static final String F_TYPE = "type";
  static final String F_NUMBER = "num";
  static final String F_LEVEL = "lvl";

  public static void main(String[] args) throws IOException {

          Source[] docSources = {
                  new Employee( "Dale Rickey", "West Virginia, US", "25" ),
                  new Company( "D&R Co.", "Tennessee, US", "maker" ),
                  new Partner( "0123", "PARTNER-A", "A" ),
                  new Employee( "Candy Buckley", "New York, US", "30" ),
                  new Company( "Suzu Inc.", "Utah, US", "logistics" ),
                  new Partner( "0234", "PARTNER-B", "B" ),
                  new Employee( "Justin Steveman", "Botswana", "35" ),
                  new Company( "Sato Bro.", "Austria", "services" ),
                  new Partner( "5566", "PARTNER-C", "C" )
          };

          Directory dir = new RAMDirectory();
          IndexWriter writer = new IndexWriter( dir, new
WhitespaceAnalyzer(),
true );
          for( Source docSource : docSources ){
                  Document doc = docSource.getDocument();
                  writer.addDocument( doc );
          }
          writer.close();

          IndexReader reader = IndexReader.open( dir );
          tryEoe(reader);
//          TermDocs termDocs = reader.termDocs();
//          termDocs.seek( new Term( F_ADDR, "" ) );
//          //termDocs.seek( new Term( F_ADDR, "US" ) );
//          while( termDocs.next() ){
//                  Document doc = reader.document( termDocs.doc() );
//                  int freq = termDocs.freq();
//                  System.out.println( "doc: \"" + doc.toString() +
"\"\tfreq: " + freq );
//          }
          reader.close();
          dir.close();
  }
  public static void tryEoe(IndexReader reader)  {
    try {
      TermDocs         termDocs = reader.termDocs();
      TermEnum filtEnum = reader.terms(new Term(F_ADDR, ""));

      for (Term term = null; (term = filtEnum.term()) != null; filtEnum.next())
{
          termDocs.seek(new Term(
                  F_ADDR,
                  term.text()));

          while (termDocs.next()) {
              System.out.println("Found a term " + term.text() + " in doc "
+ termDocs.doc());
          }
      }
    } catch (Exception e) {
      e.printStackTrace();
    }
  }
  static interface Source {
          public Document getDocument();
  }

  static class Employee implements Source {
          String name;
          String addr;
          String age;
          Employee( String name, String addr, String age ){
                  this.name = name;
                  this.addr = addr;
                  this.age = age;
          }
          public Document getDocument(){
                  Document doc = new Document();
                  doc.add( new Field( F_NAME, name, Field.Store.YES,
Field.Index.TOKENIZED ) );
                  doc.add( new Field( F_ADDR, addr, Field.Store.YES,
Field.Index.TOKENIZED ) );
                  doc.add( new Field( F_AGE, age, Field.Store.YES,
Field.Index.UN_TOKENIZED ) );
                  return doc;
          }
  }

  static class Company implements Source {
          String name;
          String addr;
          String type;
          Company( String name, String addr, String type ){
                  this.name = name;
                  this.addr = addr;
                  this.type = type;
          }
          public Document getDocument(){
                  Document doc = new Document();
                  doc.add( new Field( F_NAME, name, Field.Store.YES,
Field.Index.TOKENIZED ) );
                  doc.add( new Field( F_ADDR, addr, Field.Store.YES,
Field.Index.TOKENIZED ) );
                  doc.add( new Field( F_TYPE, type, Field.Store.YES,
Field.Index.TOKENIZED ) );
                  return doc;
          }
  }

  static class Partner implements Source {
          String number;
          String name;
          String level;
          Partner( String number, String name, String level ){
                  this.number = number;
                  this.name = name;
                  this.level = level;
          }
          public Document getDocument(){
                  Document doc = new Document();
                  doc.add( new Field( F_NUMBER, number, Field.Store.YES,
Field.Index.UN_TOKENIZED ) );
                  doc.add( new Field( F_NAME, name, Field.Store.YES,
Field.Index.TOKENIZED ) );
                  doc.add( new Field( F_LEVEL, level, Field.Store.YES,
Field.Index.UN_TOKENIZED ) );
                  return doc;
          }
  }
}
>>>>>>>>>>>>>>>>

On 12/12/06, Koji Sekiguchi <koji.sekiguchi@m4.dion.ne.jp> wrote:
>
> Erick,
>
> Sorry for replying to a bit old topic.
>
> > TermDocs.seek(new Term("specific_field", ""));
> >
> >  Note that the "" as the value of the term gets all the terms. Then use
> > TermDocs.next until it returns false. At each point, TermDocs.doc() will
> > give you the Lucene ID of a document containing that term.
>
> I couldn't seek the term when I use "" as the term value.
> I'd appreciate it if you run the following program and give some comment?
> I'm hoping to get the way of enumerating all the terms.
> Thanks in advance,
>
> Koji
> ---------------------
> package termDocs;
>
> import java.io.IOException;
>
> import org.apache.lucene.analysis.WhitespaceAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.index.TermDocs;
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.RAMDirectory;
>
> public final class SearchByField {
>
>         static final String F_NAME = "name";
>         static final String F_ADDR = "addr";
>         static final String F_AGE = "age";
>         static final String F_TYPE = "type";
>         static final String F_NUMBER = "num";
>         static final String F_LEVEL = "lvl";
>
>         public static void main(String[] args) throws IOException {
>
>                 Source[] docSources = {
>                         new Employee( "Dale Rickey", "West Virginia, US",
> "25" ),
>                         new Company( "D&R Co.", "Tennessee, US", "maker"
> ),
>                         new Partner( "0123", "PARTNER-A", "A" ),
>                         new Employee( "Candy Buckley", "New York, US",
> "30" ),
>                         new Company( "Suzu Inc.", "Utah, US", "logistics"
> ),
>                         new Partner( "0234", "PARTNER-B", "B" ),
>                         new Employee( "Justin Steveman", "Botswana", "35"
> ),
>                         new Company( "Sato Bro.", "Austria", "services" ),
>                         new Partner( "5566", "PARTNER-C", "C" )
>                 };
>
>                 Directory dir = new RAMDirectory();
>                 IndexWriter writer = new IndexWriter( dir, new
> WhitespaceAnalyzer(),
> true );
>                 for( Source docSource : docSources ){
>                         Document doc = docSource.getDocument();
>                         writer.addDocument( doc );
>                 }
>                 writer.close();
>
>                 IndexReader reader = IndexReader.open( dir );
>                 TermDocs termDocs = reader.termDocs();
>                 termDocs.seek( new Term( F_ADDR, "" ) );
>                 //termDocs.seek( new Term( F_ADDR, "US" ) );
>                 while( termDocs.next() ){
>                         Document doc = reader.document( termDocs.doc() );
>                         int freq = termDocs.freq();
>                         System.out.println( "doc: \"" + doc.toString() +
> "\"\tfreq: " + freq );
>                 }
>                 reader.close();
>                 dir.close();
>         }
>
>         static interface Source {
>                 public Document getDocument();
>         }
>
>         static class Employee implements Source {
>                 String name;
>                 String addr;
>                 String age;
>                 Employee( String name, String addr, String age ){
>                         this.name = name;
>                         this.addr = addr;
>                         this.age = age;
>                 }
>                 public Document getDocument(){
>                         Document doc = new Document();
>                         doc.add( new Field( F_NAME, name, Field.Store.YES,
> Field.Index.TOKENIZED ) );
>                         doc.add( new Field( F_ADDR, addr, Field.Store.YES,
> Field.Index.TOKENIZED ) );
>                         doc.add( new Field( F_AGE, age, Field.Store.YES,
> Field.Index.UN_TOKENIZED ) );
>                         return doc;
>                 }
>         }
>
>         static class Company implements Source {
>                 String name;
>                 String addr;
>                 String type;
>                 Company( String name, String addr, String type ){
>                         this.name = name;
>                         this.addr = addr;
>                         this.type = type;
>                 }
>                 public Document getDocument(){
>                         Document doc = new Document();
>                         doc.add( new Field( F_NAME, name, Field.Store.YES,
> Field.Index.TOKENIZED ) );
>                         doc.add( new Field( F_ADDR, addr, Field.Store.YES,
> Field.Index.TOKENIZED ) );
>                         doc.add( new Field( F_TYPE, type, Field.Store.YES,
> Field.Index.TOKENIZED ) );
>                         return doc;
>                 }
>         }
>
>         static class Partner implements Source {
>                 String number;
>                 String name;
>                 String level;
>                 Partner( String number, String name, String level ){
>                         this.number = number;
>                         this.name = name;
>                         this.level = level;
>                 }
>                 public Document getDocument(){
>                         Document doc = new Document();
>                         doc.add( new Field( F_NUMBER, number,
> Field.Store.YES,
> Field.Index.UN_TOKENIZED ) );
>                         doc.add( new Field( F_NAME, name, Field.Store.YES,
> Field.Index.TOKENIZED ) );
>                         doc.add( new Field( F_LEVEL, level,
> Field.Store.YES,
> Field.Index.UN_TOKENIZED ) );
>                         return doc;
>                 }
>         }
> }
>
>
> > -----Original Message-----
> > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > Sent: Monday, November 13, 2006 3:04 AM
> > To: java-user@lucene.apache.org; simon.willnauer@gmail.com
> > Subject: Re: search by field, not field value
> >
> >
> > I'm going mostly from memory here, so the details may not be entirely
> > accurate, but.....
> >
> > See TermDocs (FilterTermDocs?). Use the seek method to get to the
> > term e.g.
> >
> > TermDocs.seek(new Term("specific_field", ""));
> >
> >  Note that the "" as the value of the term gets all the terms. Then use
> > TermDocs.next until it returns false. At each point, TermDocs.doc() will
> > give you the Lucene ID of a document containing that term.
> >
> > Really, this enumerates all the documents that have any values in
> > specific_field.
> >
> > One issue here is that you'll get multiple hits per document. For
> > instance,
> > say you've indexed A, B, and C as values in specific_field for document
> 5.
> > Just blindly doing the next() call will get you document 5 three
> > times. You
> > can use TermDocs.skipTo(current document + 1). to insure that you only
> > process a document once. This is either a minor efficiency or a major
> time
> > savings, depending on the characteristics of your index..... Be a bit
> > careful and only call next() if you *don't* use skipto, or you may skip
> a
> > doc that only has one value for specific_field.
> >
> > Hope this helps
> > Erick
> >
> >
> >
> >
> > On 11/12/06, Simon Willnauer <simon.willnauer@googlemail.com> wrote:
> > >
> > > Hey tony,
> > > I guess the easiest way for you to do that is to create a extra field
> > > containig the field names and just fire a boolean query on this extra
> > > field.
> > >
> > > best regards simon
> > >
> > > On 11/12/06, tony yin <gaoligong@gmail.com> wrote:
> > > > I want search document by specific field, not by field value, How
> to?
> > > >
> > > > I have some document store in fields{content, key, path} and some in
> > > > {content, key, path, specific_field}
> > > >
> > > > and I want to find all the document that have specific_field,
> > Could you
> > > help
> > > > me?
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_117544_3825898.1165941931485--

From java-user-return-24977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 16:47:43 2006
Return-Path: <java-user-return-24977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62631 invoked from network); 12 Dec 2006 16:47:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 16:47:40 -0000
Received: (qmail 92393 invoked by uid 500); 12 Dec 2006 16:47:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92358 invoked by uid 500); 12 Dec 2006 16:47:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92347 invoked by uid 99); 12 Dec 2006 16:47:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 08:47:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Dec 2006 08:47:28 -0800
Received: (qmail 27607 invoked by uid 0); 12 Dec 2006 16:47:07 -0000
Received: from 80.47.203.226 by www081.gmx.net with HTTP;
 Tue, 12 Dec 2006 17:47:06 +0100 (CET)
Content-Type: text/plain; charset="iso-8859-1"
Date: Tue, 12 Dec 2006 17:47:06 +0100
From: "Karl Koch" <TheRanger@gmx.net>
In-Reply-To: <457EC431.5010305@syr.edu>
Message-ID: <20061212164706.248900@gmx.net>
MIME-Version: 1.0
References: <20061212103214.218000@gmx.net> <457EC431.5010305@syr.edu>
Subject: Re: Lucene scoring: coord_q_d factor
To: java-user@lucene.apache.org
X-Authenticated: #21808356
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Steven,

I looked up the paper and read the relevant part. The text quote you provided is from the introcution. I belief that quote referes to the basic purpose of an information retrieval system in general. At least to the purpose of a vector space model IR system. 

If this is the theoretical justfication of the coord_q_d normalisation than it is actually replicating the the other part of the scoring formula to some degree. The entire forumla is actually concerned with this - comparing the term frequencies of query and document.

Is there any other paper that actually shows the benefit of doing this particular normalisation with coord_q_d? I am not suggesting here that it is not useful, I am just looking for evidence how the idea developed.

Karl




-------- Original-Nachricht --------
Datum: Tue, 12 Dec 2006 10:01:05 -0500
Von: Steven Rowe <sarowe@syr.edu>
An: java-user@lucene.apache.org
Betreff: Re: Lucene scoring: coord_q_d factor

> Karl Koch wrote:
> > The coord(q,d) normalisation is "a score factor based on how many of
> > the query terms are found in the specified document." and described
> > here:
> > 
> >
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html#formula_coord
> > 
> > Does this have a theoretical base? On what basis was the decition
> > make to have it? Does anybody know a paper (in Information Retrieval,
> > Information Seeking, etc.) or other more general information about
> > this?
> 
> Following is quoted from: Krovetz, R. & Croft, W. B. (1992) Lexical
> Ambiguity and Information Retrieval. ACM Transactions on Information
> Systems, 10(2): 115-141.
> 
>     Many retrieval systems represent documents and queries
>     by the words they contain, and base the comparison on
>     the number of words they have in common. The more
>     words the query and document have in common, the
>     higher the document is ranked; this is referred to as
>     a "coordination match."  Performance is improved by
>     weighting query and document words using frequency
>     information from the collection and individual
>     document texts [27].
> 
> 27. Salton, G. & McGill, M. Introduction to Modern Information
> Retrieval. McGraw-Hill, New York, 1983.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 17:38:22 2006
Return-Path: <java-user-return-24978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84653 invoked from network); 12 Dec 2006 17:38:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 17:38:22 -0000
Received: (qmail 8513 invoked by uid 500); 12 Dec 2006 17:38:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8489 invoked by uid 500); 12 Dec 2006 17:38:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8478 invoked by uid 99); 12 Dec 2006 17:38:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 09:38:21 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Dec 2006 09:38:10 -0800
Received: (qmail 52176 invoked by uid 60001); 12 Dec 2006 17:37:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=1YethHsW+cwB5LcnH/ZsL63f51K+OSaNFMFEgh8tDk7KWSXS7asfktqg/QD93AyuBMMk0GXtvQzU7V0zwYetPwddQTKTt4Suoe9mRZ9Q+jlTAaATvsklBX6NJKYfT2Cx0f6RVTuesF47MktWtFq9IOfPEVHUDYJCA5nS6txjJdQ=  ;
Message-ID: <20061212173749.52174.qmail@web50303.mail.yahoo.com>
Received: from [74.65.202.166] by web50303.mail.yahoo.com via HTTP; Tue, 12 Dec 2006 09:37:49 PST
Date: Tue, 12 Dec 2006 09:37:48 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing large files
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AYes, you can't get to the "stored" field content in your Hits beca=
use you are using a (File)Reader.=0A=0AOtis=0A=0A----- Original Message ---=
-=0AFrom: abdul aleem <janaabdulaleem@yahoo.com>=0ATo: java-user@lucene.apa=
che.org=0ASent: Tuesday, December 12, 2006 8:22:54 AM=0ASubject: Indexing l=
arge files=0A=0AHi There,=0A=0AI have been working with Lucene API for the =
past 1 day=0A=0Awe are in the process of building a log viewer tool,=0A=0At=
his is how the log file looks=0A=0A[2006-12-11 01:52:40.179] [lon0571xus] [=
DEBUG] [TIE=0Aheartbeat monitor (monitor.heartbeat.fxstreamrates)]=0A[unkno=
wn] [] [] ActiveRateServerIdList - received=0Ahearbeat from rate server id =
[1]=0A=0A[2006-12-11 01:52:40.180] ... =0A=0A=0ASearch is working as a char=
m=0A=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=0A=0AIf i use a Indexer entire conent of the files is=0A=
indexed and lucene gets me the name of the files=0Acontaining the keyword w=
ith amazing speed=0A=0A=0AQuery how to index Lucene Document=0A=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=0AIm using following to index=0A=0ADocument doc =3D new Doc=
ument();=0Adoc.add( new Field(...) , FileReader(f)));=0A=0Athe above helps =
to take the complete file contents and=0AQueryParser can check for keywords=
 in the file=0A=0A=0Aa) However i cannot retrieve the search contents using=
=0A   Hits,  I believe it is because i have not created=0A   additional ind=
exes ?, =0A   Also tried to use sandbox Highlighter it cannot=0Aretrieve th=
e contents inspite of search is successful=0A=0Ab) How to create indexes if=
 i use a FileReader ??=0A   do I need to use java IO to read entire content=
=0A   of file ? and create lucene index? =0A=0Ac) I guess im missing someth=
ing, appreciate if some=0Adirection is given=0A=0Ad) Lucene in Action does =
not provide any hints on=0Acreating custom analyzers would appreciate if so=
meone=0Acould give some pointers ??=0A=0A=0AMany thanks ,=0A=0APS:- I actua=
lly need to create index based on=0Atimestamp in the log file.=0A=0A=0A=0A=
=0A=0A=0A=0A=0A=0A=0A=0A=0A =0A____________________________________________=
________________________________________=0AWant to start your own business?=
=0ALearn how on Yahoo! Small Business.=0Ahttp://smallbusiness.yahoo.com/r-i=
ndex=0A=0A-----------------------------------------------------------------=
----=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFo=
r additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 21:07:43 2006
Return-Path: <java-user-return-24979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62530 invoked from network); 12 Dec 2006 21:07:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 21:07:42 -0000
Received: (qmail 32963 invoked by uid 500); 12 Dec 2006 21:07:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32931 invoked by uid 500); 12 Dec 2006 21:07:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32920 invoked by uid 99); 12 Dec 2006 21:07:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:07:42 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:07:30 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id kBCL78J8068716
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 21:07:08 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kBCL78S23252418
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 22:07:08 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kBCL78uT028907
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 22:07:08 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kBCL78iv028903
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 22:07:08 +0100
In-Reply-To: <7829277.post@talk.nabble.com>
Subject: Re: How to delete partial index
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFF55A2FE8.69A63355-ON88257242.0066DE57-88257242.0073E2D8@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 12 Dec 2006 13:05:47 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 12/12/2006 23:07:07
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

spinergywmy <spinergywmy@gmail.com> wrote:
>
> Hi,
>
>    I have ask this question before but may be the question wasn't clear.
>
>    How can I delete particular index that I want to and keep the rest?
For
> instance, I have been indexed document Id, date, user Id and contents, my
> question is does that particular contents will be deleted if I just
> specified the document Id, and I used reader.deleteDocument(document Id).

I am not 100% sure what you mean by "delete particular index".
Here "index" is mostly used as in "The result of indexing documents with
Lucene is an __INDEX__ that can then be searched, updated, etc."
But perhaps by index you mean "an __ID__ of a certain document"?

Anyhow, assume you created a lucene index and added to it some 1000
documents. You can now delete documents from that index. The remaining
index would still be valid and useful but would have less documents that
are valid as search results. For instance, if you make 500 calls:
reader.deleteDocument(0),reader.deleteDocument(2),...,reader.deleteDocument(998);,
 your index would now have only 500 remaining documents that are valid as
search results. Their (internal) docids would (temporarily) be:
1,3,5,...,999. A few things to notice about this:
1) The fact that these documents were deleted would be:
- reflected immediately in searches that use a Searcher opened against the
same IndexReader used for these deletions.
- reflected in the index Directory only once the deleting IndexReader is
closed.
- reflected in searches through other IndexSearchers only if they are
opened after the deleting IndexReader is closed.
2) The "deleted" documents are still in the index, for some time. They are
excluded from search results, since they are marked deleted. When an index
segment is merged (either exlicitely as result of call to optimize or
implicitely as result of adding a document or closing an index writer), the
segment's deleted documnets are actually deleted, and the docids are
modified so as to discard the (internal) docids gaps. In the example above,
after optimize(), you would have (internal) docid: 0,1,2,..,499.
3) As a consequence of all this, it is usually not the best thing to count
on (internal) docids, and so deleting doucments by a term would usually be
safer.

>
>    And I have another question is if I do normal cut and paste the
document,
> how can I delete the index content from one destination and restore to
> another destination and the index file must merge.

Again I am not sure what you mean here.
Is the scenario that you have, say, two Lucene indexes, I1 and I2, and I1
has 100 documents (0.99), and I2 has 100 documents (0..99), and you want to
"cut and paste", say, some documents (say, all documents containing the
term "MoveMeToTheOtherIndex") from index I1 to I2, and, assume there are 50
documents like this in I1, after that there would be 50 (undeleted) docs
left in I1 and 150 docs in I2...? If this is the case Lucene does not
supports this and an application would need to implement this by itself -
adding the "moved" documents to index I2. Why would you want to do this?

>
>    Thanks
>
>
> regards,
> Wooi Meng
> --
> View this message in context:
> http://www.nabble.com/How-to-delete-partial-index-tf2806204.html#a7829277


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 21:28:25 2006
Return-Path: <java-user-return-24980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74443 invoked from network); 12 Dec 2006 21:28:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 21:28:24 -0000
Received: (qmail 69803 invoked by uid 500); 12 Dec 2006 21:28:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69774 invoked by uid 500); 12 Dec 2006 21:28:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69763 invoked by uid 99); 12 Dec 2006 21:28:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:28:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 13:28:14 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id CBA655B770; Tue, 12 Dec 2006 13:27:53 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C497E7F403
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 13:27:53 -0800 (PST)
Date: Tue, 12 Dec 2006 13:27:53 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: java requirements for lucene
In-Reply-To: <Pine.LNX.4.64.0612120721450.13324@tribal.metalab.unc.edu>
Message-ID: <Pine.LNX.4.58.0612121324280.10034@hal.rescomp.berkeley.edu>
References: <Pine.LNX.4.64.0612120721450.13324@tribal.metalab.unc.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


it appears that you may have multiple copies of hte lucene code base in
your class path.

: $ java org.apache.lucene.demo.IndexFiles ../data/medline/docs/
: Indexing to directory 'index'...
: adding ../data/medline/docs/1.txt
: Exception in thread "main" java.lang.IncompatibleClassChangeError: field
: org.apache.lucene.analysis.standard.StandardFilter.tokenImage was not
: found.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 22:16:22 2006
Return-Path: <java-user-return-24981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 905 invoked from network); 12 Dec 2006 22:16:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 22:16:22 -0000
Received: (qmail 56999 invoked by uid 500); 12 Dec 2006 22:16:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56975 invoked by uid 500); 12 Dec 2006 22:16:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56962 invoked by uid 99); 12 Dec 2006 22:16:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:16:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:16:11 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15C2B286@mailer.syr.edu>; Tue, 12 Dec 2006 17:15:48 -0500
Message-ID: <457F2A14.3080008@syr.edu>
Date: Tue, 12 Dec 2006 17:15:48 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene scoring: coord_q_d factor
References: <20061212103214.218000@gmx.net> <457EC431.5010305@syr.edu> <20061212164706.248900@gmx.net>
In-Reply-To: <20061212164706.248900@gmx.net>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Karl Koch wrote:
> Is there any other paper that actually shows the benefit of doing 
> this particular normalisation with coord_q_d? I am not suggesting
> here that it is not useful, I am just looking for evidence how the
> idea developed.

I think it's a mischaracterization to call coordination a
"normalization".  In my mind, "normalization" is something applied
equally to all documents' scores.  The coordination component of a
document's score varies from document to document, and so doesn't meet
this criterion.

I repeat the citation of the book cited by the paper I cited :) :

>> Salton, G. & McGill, M. Introduction to Modern Information
>> Retrieval. McGraw-Hill, New York, 1983.

In addition to the above book, here are two other books that I've seen
cited as describing "coordination-level matching" (a.k.a. "overlap
ranking"):

Salton, G. (1968). Automatic information organization and retrieval.
New York: McGraw-Hill.

Lancaster, F.W. (1979). Information retrieval systems: Characteristics,
testing and evaluation (2nd ed.). New York: Wiley.

I don't know the answer to your larger question: why use a coordination
component in a similarity measure when other components (tf*idf) seem to
serve the same function?  What you seem to be looking for is a study
that directly compares a system using a coordination component in its
similarity measure with the *same* system, varying the measure only in
that coordination is elided.  Unfortunately, I know of no such study.

Good luck,
Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 12 22:32:06 2006
Return-Path: <java-user-return-24982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9055 invoked from network); 12 Dec 2006 22:32:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2006 22:32:06 -0000
Received: (qmail 137 invoked by uid 500); 12 Dec 2006 22:32:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 110 invoked by uid 500); 12 Dec 2006 22:32:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99998 invoked by uid 99); 12 Dec 2006 22:32:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:32:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.21 as permitted sender)
Received: from [209.63.42.21] (HELO ns1.mainstreamdata.com) (209.63.42.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 14:31:56 -0800
Received: from localhost (localhost [127.0.0.1])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 8289F1306
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 15:31:35 -0700 (MST)
Received: from ns1.mainstreamdata.com ([127.0.0.1])
	by localhost (ns1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 03583-09 for <java-user@lucene.apache.org>;
	Tue, 12 Dec 2006 15:31:28 -0700 (MST)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 6C5AC267
	for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 15:31:28 -0700 (MST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: de-boosting fields
Date: Tue, 12 Dec 2006 15:31:28 -0700
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB44898D1@exchange.slc.mainstreamdata.com>
In-Reply-To: <Pine.LNX.4.58.0612111044330.28687@hal.rescomp.berkeley.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: de-boosting fields
thread-index: AccdVYqaNzxWiV1STeeq6ADgGHYHawA552LQ
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at mainstreamdata.com
X-Virus-Checked: Checked by ClamAV on apache.org

I've implemented the zero boost solution and it seems to be doing what I
want.  Thanks to everyone who had suggestions.

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Monday, December 11, 2006 11:45 AM
To: java-user@lucene.apache.org
Subject: Re: de-boosting fields


: Isn't it also true that using Field.Index.NO_NORMS when creating the
field will
: remove it from the scoring formula?  I thought I read that somewhere,
but now
: can't find where.

queries on fields with NO_NORMS will still contribute to the score, but
the field *length* and/or field bosts won't contribute to the score.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 00:09:38 2006
Return-Path: <java-user-return-24983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40235 invoked from network); 13 Dec 2006 00:09:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 00:09:38 -0000
Received: (qmail 44866 invoked by uid 500); 13 Dec 2006 00:09:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44731 invoked by uid 500); 13 Dec 2006 00:09:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44720 invoked by uid 99); 13 Dec 2006 00:09:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 16:09:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 16:09:26 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GuHgH-0002QH-Qh
	for java-user@lucene.apache.org; Tue, 12 Dec 2006 16:09:05 -0800
Message-ID: <7844899.post@talk.nabble.com>
Date: Tue, 12 Dec 2006 16:09:05 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to delete partial index
In-Reply-To: <OFF55A2FE8.69A63355-ON88257242.0066DE57-88257242.0073E2D8@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7829277.post@talk.nabble.com> <OFF55A2FE8.69A63355-ON88257242.0066DE57-88257242.0073E2D8@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   I m just wondering is there any unique key that I can use to delete
particular document? How can I check the postion of a particular document
inside index file? Is there any example that I can refer to on how to delete
documents by a term.

   For second scenario, the reason why I m doing this is because when I move
the file from one destination to another, and if I do not do this, the exact
location of the file might not be correct. For example, when I index the
file in C drive and now I do cut and paste, the file is at D drive, so I m
wondering when I do index search and return result, and when I view the
file, can I still view it after the file has been moved.

   How you can provide me some idea for the above scenario. Thanks.


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/How-to-delete-partial-index-tf2806204.html#a7844899
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 00:15:17 2006
Return-Path: <java-user-return-24984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42183 invoked from network); 13 Dec 2006 00:15:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 00:15:16 -0000
Received: (qmail 55263 invoked by uid 500); 13 Dec 2006 00:15:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55219 invoked by uid 500); 13 Dec 2006 00:15:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55208 invoked by uid 99); 13 Dec 2006 00:15:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 16:15:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 16:15:05 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GuHlk-0003wn-RA
	for java-user@lucene.apache.org; Tue, 12 Dec 2006 16:14:44 -0800
Message-ID: <7844980.post@talk.nabble.com>
Date: Tue, 12 Dec 2006 16:14:44 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to delete partial index
In-Reply-To: <OFF55A2FE8.69A63355-ON88257242.0066DE57-88257242.0073E2D8@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7829277.post@talk.nabble.com> <OFF55A2FE8.69A63355-ON88257242.0066DE57-88257242.0073E2D8@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   When I perform delete document and delete document based on the Id, does
the Id is the unique key and by deleting based on the Id, all the related
info will be deleted as well? If so, how can I know the document Id? Thanks.


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/How-to-delete-partial-index-tf2806204.html#a7844980
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 00:41:28 2006
Return-Path: <java-user-return-24985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49940 invoked from network); 13 Dec 2006 00:41:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 00:41:27 -0000
Received: (qmail 9410 invoked by uid 500); 13 Dec 2006 00:41:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9382 invoked by uid 500); 13 Dec 2006 00:41:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9358 invoked by uid 99); 13 Dec 2006 00:41:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 16:41:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 16:41:14 -0800
Received: by nf-out-0910.google.com with SMTP id n28so585290nfc
        for <java-user@lucene.apache.org>; Tue, 12 Dec 2006 16:40:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JmCWzxYt0qZkahVOtq+Hoyx9S6ajh0bGuN5jCrVRvnwzlSvUr9yiRIs6NY0trGVU/9pmkJJQvRtm+atVxz7AQKI5XhakIulN4bVZWjNSLe2gSDsRqRhIANB4PKQhW+/fYXVahw5PBuMxzusjaQyXFIYdJC+ZolYXq4DvDhRvwXE=
Received: by 10.82.139.17 with SMTP id m17mr37864bud.1165970452494;
        Tue, 12 Dec 2006 16:40:52 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Tue, 12 Dec 2006 16:40:52 -0800 (PST)
Message-ID: <359a92830612121640w6d9195c0n820c2b55e00726b8@mail.gmail.com>
Date: Tue, 12 Dec 2006 19:40:52 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to delete partial index
In-Reply-To: <7844980.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_126680_6831399.1165970452414"
References: <7829277.post@talk.nabble.com>
	 <OFF55A2FE8.69A63355-ON88257242.0066DE57-88257242.0073E2D8@il.ibm.com>
	 <7844980.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_126680_6831399.1165970452414
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

you have to search against something known. You simply (as has been
mentioned many times) cannot rely on the document IDs.

So, I'd store the full path (untokenized) of the file. When you move a file,
search for the path in the appropriate field in your index that the file was
originally stored in. Then delete. Or just delete it by that term.

Erick

On 12/12/06, spinergywmy <spinergywmy@gmail.com> wrote:
>
>
> Hi,
>
>    When I perform delete document and delete document based on the Id,
> does
> the Id is the unique key and by deleting based on the Id, all the related
> info will be deleted as well? If so, how can I know the document Id?
> Thanks.
>
>
> regards,
> Wooi Meng
> --
> View this message in context:
> http://www.nabble.com/How-to-delete-partial-index-tf2806204.html#a7844980
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_126680_6831399.1165970452414--

From java-user-return-24986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 02:13:02 2006
Return-Path: <java-user-return-24986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78825 invoked from network); 13 Dec 2006 02:13:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 02:13:02 -0000
Received: (qmail 28474 invoked by uid 500); 13 Dec 2006 02:13:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28454 invoked by uid 500); 13 Dec 2006 02:13:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28440 invoked by uid 99); 13 Dec 2006 02:13:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 18:13:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 18:12:51 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GuJbi-0007aA-MZ
	for java-user@lucene.apache.org; Tue, 12 Dec 2006 18:12:30 -0800
Message-ID: <7846137.post@talk.nabble.com>
Date: Tue, 12 Dec 2006 18:12:30 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to delete partial index
In-Reply-To: <359a92830612121640w6d9195c0n820c2b55e00726b8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7829277.post@talk.nabble.com> <OFF55A2FE8.69A63355-ON88257242.0066DE57-88257242.0073E2D8@il.ibm.com> <7844980.post@talk.nabble.com> <359a92830612121640w6d9195c0n820c2b55e00726b8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   I manage to delete the document based on term, but that is just 1 part. I
wonder do lucene support how I can pull out the info that I have been
indexed and place it into other index file. Is it the only way that I have
to use indexwriter to perform indexing again with all the necessary fields.
Or actually lucene provide short cut for doing this. The above scenario is
the action cut and paste that I need to do.

   Hope you can provide me some idea on how to do this. Thanks


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/How-to-delete-partial-index-tf2806204.html#a7846137
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 05:14:11 2006
Return-Path: <java-user-return-24987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60133 invoked from network); 13 Dec 2006 05:14:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 05:14:10 -0000
Received: (qmail 19217 invoked by uid 500); 13 Dec 2006 05:14:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19119 invoked by uid 500); 13 Dec 2006 05:14:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19108 invoked by uid 99); 13 Dec 2006 05:14:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 21:14:10 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 21:13:58 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id kBD5DaWW178170
	for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 05:13:36 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kBD5Dak63252414
	for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 06:13:36 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kBD5DaSq021769
	for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 06:13:36 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kBD5DZvC021762
	for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 06:13:36 +0100
In-Reply-To: <20061212085928.212210@gmx.net>
Subject: Re:  Re:  Re: Questions about Lucene scoring (was: Lucene 1.2 - scoring
 formula needed)
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF4AAAD149.2030A31E-ON88257243.001C4072-88257243.001C72CF@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 12 Dec 2006 21:10:43 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 13/12/2006 07:13:35
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

"Karl Koch" <TheRanger@gmx.net> wrote:

> For the documents Lucene employs
> its norm_d_t which is explained as:
>
> norm_d_t : square root of number of tokens in d in the same field as t

Actually (by default) it is:
   1 / sqrt(#tokens in d with same field as t)

> basically just the square root of the number of unique terms in the
> document (since I do search over all fields always). I would have
> expected cosine normalisation here...
>
> The paper you provided uses document normalisation in the following way:
>
> norm = 1 / sqrt(0.8*avgDocLength + 0.2*(# of unique terms in d))
>
> I am not sure how this relates to norm_d_t.

That system is less "field oriented" than Lucene, so you could say the
normalization there goes over all the fields.
The {0.8,0.2} args are parametric and control how aggressive this
normalization is.
If you used there {0,1} you would get
  1 / sqrt(#unique terms in d)
and that would be similar to Lucene's
  1 / sqrt(#tokens in d with same field as t)
however (in that system) that would have punish long documents too much and
would too much boost up stupid dummy short documents, and that's why the
{0.8,0.2} were introduced there.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 06:58:56 2006
Return-Path: <java-user-return-24988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79700 invoked from network); 13 Dec 2006 06:58:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 06:58:55 -0000
Received: (qmail 55863 invoked by uid 500); 13 Dec 2006 06:58:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55633 invoked by uid 500); 13 Dec 2006 06:58:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55622 invoked by uid 99); 13 Dec 2006 06:58:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 22:58:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.11.83.254] (HELO mail1.ardec.com.au) (203.11.83.254)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Dec 2006 22:58:43 -0800
Received: from bison.adl.ardec.com.au (bison.adl.ardec.com.au [192.168.1.13])
	by mail1.ardec.com.au (8.13.3/8.13.3) with ESMTP id kBD6wImn019714
	for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 17:28:21 +1030 (CST)
Received: (qmail 10466 invoked from network); 13 Dec 2006 06:58:18 -0000
Received: from unknown (HELO [192.168.1.186]) ([192.168.1.186])
          (envelope-sender <azza@lisasoft.com>)
          by bison.adl.ardec.com.au (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 13 Dec 2006 06:58:18 -0000
Message-ID: <457FA4C4.6030906@lisasoft.com>
Date: Wed, 13 Dec 2006 17:29:16 +1030
From: Andrew Hughes <azza@lisasoft.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Advice on 3NF Data Structures and Lucene Please
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV 0.88.6/2319/Wed Dec 13 06:39:22 2006 on mizaru.adl.ardec.com.au
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Hey All,

I am very interested in indexing a 3NF Data Structure. Is there any 
advice that someone can provide with this? From what I have seen Lucene 
is typically a flat "First Normal Form" (Flat) data structure.... The 
only way I can see to combine the relational links between multiple 
indexes is to compare documents.


Any Help is Appreciated.





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 11:03:21 2006
Return-Path: <java-user-return-24989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92374 invoked from network); 13 Dec 2006 11:03:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 11:03:20 -0000
Received: (qmail 52689 invoked by uid 500); 13 Dec 2006 11:03:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52650 invoked by uid 500); 13 Dec 2006 11:03:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52639 invoked by uid 99); 13 Dec 2006 11:03:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 03:03:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 03:03:06 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GuRss-0004Dt-EP
	for java-user@lucene.apache.org; Wed, 13 Dec 2006 03:02:46 -0800
Message-ID: <7850919.post@talk.nabble.com>
Date: Wed, 13 Dec 2006 03:02:46 -0800 (PST)
From: Venkateshprasanna <prasannahmv@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Extracting data from Lucene index files
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: prasannahmv@yahoo.co.in
X-Virus-Checked: Checked by ClamAV on apache.org


I would like to use the data stored in the Lucene indexes, like the words and
their frequencies and store them in a database. Can anyone suggest a way of
going about it or is it possible at all?

TIA
Prasanna
-- 
View this message in context: http://www.nabble.com/Extracting-data-from-Lucene-index-files-tf2813318.html#a7850919
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 12:51:41 2006
Return-Path: <java-user-return-24990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39485 invoked from network); 13 Dec 2006 12:51:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 12:51:39 -0000
Received: (qmail 38323 invoked by uid 500); 13 Dec 2006 12:51:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38288 invoked by uid 500); 13 Dec 2006 12:51:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38275 invoked by uid 99); 13 Dec 2006 12:51:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 04:51:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a3.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 04:51:27 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a3.dreamhost.com (Postfix) with ESMTP id 256DC196D12
	for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 04:51:01 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <7850919.post@talk.nabble.com>
References: <7850919.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9CB86CF1-2489-46C8-B948-F6039783EA82@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Extracting data from Lucene index files
Date: Wed, 13 Dec 2006 07:50:59 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Take a look at TermDocs and TermEnum.

-Grant

On Dec 13, 2006, at 6:02 AM, Venkateshprasanna wrote:

>
> I would like to use the data stored in the Lucene indexes, like the  
> words and
> their frequencies and store them in a database. Can anyone suggest  
> a way of
> going about it or is it possible at all?
>
> TIA
> Prasanna
> -- 
> View this message in context: http://www.nabble.com/Extracting-data- 
> from-Lucene-index-files-tf2813318.html#a7850919
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 13:10:45 2006
Return-Path: <java-user-return-24991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44300 invoked from network); 13 Dec 2006 13:10:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 13:10:44 -0000
Received: (qmail 61903 invoked by uid 500); 13 Dec 2006 13:10:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61882 invoked by uid 500); 13 Dec 2006 13:10:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61871 invoked by uid 99); 13 Dec 2006 13:10:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 05:10:44 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.133] (HELO web52210.mail.yahoo.com) (206.190.48.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Dec 2006 05:10:33 -0800
Received: (qmail 26302 invoked by uid 60001); 13 Dec 2006 13:10:11 -0000
Message-ID: <20061213131011.26300.qmail@web52210.mail.yahoo.com>
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=OLwDXvNJ0lHdF8jMwrIYFTg1iVzJnt952vBwj1tYVpHyDgqbbl+dRyxUyimVQWR+OR5gv/LzRbg73KILx1RuVZllKUpO4fCnk8BP43gC9ujOn/HcOhHdM6RsC4ndcYsTLKaDky2PUPedDBt4Jj4ipzQs22l4iILmeqaO5xgJryc=;
X-YMail-OSG: u4YgD0YVM1no9mxbXuGgK_aA0vFZReZx6cNxXq5rpsUG5IJ256_QcKxa2x1.R3vQ1yMR6tgaGqt94BLQpFTKG.4AbJdbFT_Z94BOsWByKluTA5QE.rIBRoqTG2HszaRiwcCZxcMn33RhavbHPaTMoGKzAWoRnmk4Vys-
Received: from [219.77.131.96] by web52210.mail.yahoo.com via HTTP; Wed, 13 Dec 2006 05:10:11 PST
Date: Wed, 13 Dec 2006 05:10:11 -0800 (PST)
From: abdul aleem <janaabdulaleem@yahoo.com>
Subject: Indexing clarification , please advice
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello All,

Apolgies if it is a naive question

a) Indexing large file ( more than 4MB ) 
   Do i need to read the entire file as string using
   java.io and create a Document object ?
   
   The file contains timestamp, if i need to index on
   timestamp is parsing the entire file manually
(tokenizing) and store the timestamp as document
object is the only way ? or is there any alternatives
?


b) I need to search the contents of a log file which
is changing rapidly, from initial testing i see if any
changes in the file is not reflected unless it is
*Indexed* again  
   
   Do we need to index the files always before search
if the content of the file is dynamically changed
 
  ( log file has a pattern and always logs in a
similar fashion, each time i need to index takes lot
of time as the file is large (approach a )  is there
any work arounds for this ? )    

  I would greatly appreciate if any inputs on the
above,

 Many thanks,
 Abdul 


   


 
____________________________________________________________________________________
Need a quick answer? Get one in minutes from people who know.
Ask your question on www.Answers.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 13:23:39 2006
Return-Path: <java-user-return-24992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47467 invoked from network); 13 Dec 2006 13:23:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 13:23:38 -0000
Received: (qmail 79180 invoked by uid 500); 13 Dec 2006 13:23:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79151 invoked by uid 500); 13 Dec 2006 13:23:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79140 invoked by uid 99); 13 Dec 2006 13:23:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 05:23:38 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 05:23:27 -0800
Received: by ug-out-1314.google.com with SMTP id k40so180267ugc
        for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 05:23:06 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DpOL0aEPSYeKXSPtyd37g8aV5ePrLalEWWu3fJGK0JgzhwMIq2t9U9i7VuLgInH5VRZsqOaJmcb9qom+Wx6IqlyeWal9tEK16xN2xn1qqw54emler/GKK17v3klkIV63ocZnNW4Wn+eFl8JwsVslF+r5vWO+bJ8i+PTufpGUNHQ=
Received: by 10.82.172.15 with SMTP id u15mr150730bue.1166016185694;
        Wed, 13 Dec 2006 05:23:05 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 13 Dec 2006 05:23:05 -0800 (PST)
Message-ID: <359a92830612130523u76cc5e2fsabcbe6b795de254@mail.gmail.com>
Date: Wed, 13 Dec 2006 08:23:05 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Advice on 3NF Data Structures and Lucene Please
In-Reply-To: <457FA4C4.6030906@lisasoft.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_134950_884790.1166016185256"
References: <457FA4C4.6030906@lisasoft.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_134950_884790.1166016185256
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Tell us more about the problem you are trying to solve. Lucene is designed
for large text searching, not relations. Trying to "index a data structure"
seems like mis-application of Lucene. Without some idea of what you are
trying to accomplish, any advice you get is irrelevant at best...


Best
Erick

On 12/13/06, Andrew Hughes <azza@lisasoft.com> wrote:
>
> Hey All,
>
> I am very interested in indexing a 3NF Data Structure. Is there any
> advice that someone can provide with this? From what I have seen Lucene
> is typically a flat "First Normal Form" (Flat) data structure.... The
> only way I can see to combine the relational links between multiple
> indexes is to compare documents.
>
>
> Any Help is Appreciated.
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_134950_884790.1166016185256--

From java-user-return-24993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 13:42:34 2006
Return-Path: <java-user-return-24993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51417 invoked from network); 13 Dec 2006 13:42:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 13:42:33 -0000
Received: (qmail 493 invoked by uid 500); 13 Dec 2006 13:42:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99735 invoked by uid 500); 13 Dec 2006 13:42:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99715 invoked by uid 99); 13 Dec 2006 13:42:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 05:42:33 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 05:42:22 -0800
Received: by nf-out-0910.google.com with SMTP id n28so957743nfc
        for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 05:42:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jo8bz44JMhmEYHh8SIBkEa7TXN76i1j+Wg9d/zZBaM9J23JhzIuG9ELNoqI4A5wB9B/YfLnZpQm68l2vcejkTF6TeRm3v4kc8vIp0+K8qZ0K+ck73YIgEeeU1W78rCWSXChzJe/2+y1gVUWMJlk6qYQYYD69hsobzkjbHeXr+YM=
Received: by 10.82.169.4 with SMTP id r4mr158139bue.1166017318884;
        Wed, 13 Dec 2006 05:41:58 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 13 Dec 2006 05:41:58 -0800 (PST)
Message-ID: <359a92830612130541m2f18e5dav903c84c4c518dc21@mail.gmail.com>
Date: Wed, 13 Dec 2006 08:41:58 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing clarification , please advice
In-Reply-To: <20061213131011.26300.qmail@web52210.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_135333_15718201.1166017318749"
References: <20061213131011.26300.qmail@web52210.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_135333_15718201.1166017318749
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Let me take a crack at it. See below...

On 12/13/06, abdul aleem <janaabdulaleem@yahoo.com> wrote:
>
> Hello All,
>
> Apolgies if it is a naive question
>
> a) Indexing large file ( more than 4MB )
>    Do i need to read the entire file as string using
>    java.io and create a Document object ?


Essentially yes. IF you must index the whole document as a single Lucene
document. my reply later for why you may not want to do this.

The following are equivalent.
Document doc = new Document();
doc.add("textfield", "data1 data2 data3");
doc.add("textfield", "data4 data5 data6");


and
Document doc = new Document();
doc.add("textfield", "data1 data2 data3 data4 data5 data6");

So you could read chunks of your file and index them into the *same* field
before writing the document to the index, or you could read the file as a
single chunk and index it all at once.

HOWEVER: note that the default in Lucene is to index only the first 10,000
(?) tokens for a field in a single document. See
IndexWriter.SetMaxFieldLength.



   The file contains timestamp, if i need to index on
>    timestamp is parsing the entire file manually
> (tokenizing) and store the timestamp as document
> object is the only way ? or is there any alternatives
> ?


Perhaps I don't understand the problem. You can store the timestamp as a
*field* in a document. Is that what you mean by storing it as a "document
object"? But there's no way I know of to have Lucene automatically do
something with arbitrary text in the input stream. You could write a custom
analyzer (see Lucene In Action for the Synonym Analyzer for a model). That
Analyzer would be responsible for recognizing timestamps in the input stream
and doing something special with them.


b) I need to search the contents of a log file which
> is changing rapidly, from initial testing i see if any
> changes in the file is not reflected unless it is
> *Indexed* again
>
>    Do we need to index the files always before search
> if the content of the file is dynamically changed


Yes. That is, you can't search data you haven't indexed.


  ( log file has a pattern and always logs in a
> similar fashion, each time i need to index takes lot
> of time as the file is large (approach a )  is there
> any work arounds for this ? )


I think you need to re-think your approach. A document in Lucene is whatever
you want to think of it as. For instance, you could index your log file such
that each Lucene "document" was all the data added to the log file over some
specified time interval. So, say you have a log that starts at midnight.
Each Lucene "document" could be all the data added to the index for each
minute. So you'd have a document for the data added to the log between 12:00
and 12:00:59. Another "document" for all data between 12:01:00 and 12:01:59
etc. That way, you don't have to re-index the entire log, just everything
since the last interval you already indexed.

I'm not necessarily recommending this approach, but using it to illustrate
that you don't need to think of a Lucene Document as your entire log file.
You may be much better off slicing the data up somehow and having a
one-to-many relationship between your log and the Lucene documents......

Perhaps you could index every message as an individual document (which would
deal with your timestamp issue), or.....

Hope this helps
Erick

  I would greatly appreciate if any inputs on the
> above,
>
> Many thanks,
> Abdul
>
>
>
>
>
>
>
> ____________________________________________________________________________________
> Need a quick answer? Get one in minutes from people who know.
> Ask your question on www.Answers.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_135333_15718201.1166017318749--

From java-user-return-24994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 14:25:35 2006
Return-Path: <java-user-return-24994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76503 invoked from network); 13 Dec 2006 14:25:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 14:25:34 -0000
Received: (qmail 75399 invoked by uid 500); 13 Dec 2006 14:25:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75357 invoked by uid 500); 13 Dec 2006 14:25:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75331 invoked by uid 99); 13 Dec 2006 14:25:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 06:25:33 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.128] (HELO web52205.mail.yahoo.com) (206.190.48.128)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Dec 2006 06:25:21 -0800
Received: (qmail 70422 invoked by uid 60001); 13 Dec 2006 14:25:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=eYJixuMe8nFTtXk/f14X2S8/FWm13hu5Lg0rXc/dNbfOndh9Z4oB3YxZ2zLCwnfJppF6bCouOMMRL6loRGBzVwKfNGiyUsvLDEagYDQsNHpC+6JxGYloE6eE0e5/FMsxTtZs0TadwArL2bt1gtdEMg7pj3dC41nTRni1rC8ZEV4=;
X-YMail-OSG: p30ALhUVM1nxiGY0mjuUeO3bmZjx6TPbI4HAfcSq.p_C.WrFlcBlHCTdNhzzodjxVBWvCuVP2WkRZ6KYEBgriESnaRk5TjoJch0pkguQrPjIfRH6iJF803HNzyZV4Xfkds0s9JkvZfqlLEXRp0vSdZOkqDNa6SM5gOLQEBgmAsSxHOf29qr879XHfXiSzNwbxw--
Received: from [219.77.131.96] by web52205.mail.yahoo.com via HTTP; Wed, 13 Dec 2006 06:25:00 PST
Date: Wed, 13 Dec 2006 06:25:00 -0800 (PST)
From: abdul aleem <janaabdulaleem@yahoo.com>
Subject: Re: Indexing clarification , please advice
To: java-user@lucene.apache.org
In-Reply-To: <359a92830612130541m2f18e5dav903c84c4c518dc21@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <397955.68640.qm@web52205.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Many thanks Erick,

Your points are valid, i was thinking entire Log file
as a lucene document, im wrong trying  to chop the log
file might be the way to go

my bad expressions , yes you got that right
timestamp must be added as a "FIELD" that is what i
meant

really appreciate your detailed reply,


regards,
Abdul 

--- Erick Erickson <erickerickson@gmail.com> wrote:

> Let me take a crack at it. See below...
> 
> On 12/13/06, abdul aleem <janaabdulaleem@yahoo.com>
> wrote:
> >
> > Hello All,
> >
> > Apolgies if it is a naive question
> >
> > a) Indexing large file ( more than 4MB )
> >    Do i need to read the entire file as string
> using
> >    java.io and create a Document object ?
> 
> 
> Essentially yes. IF you must index the whole
> document as a single Lucene
> document. my reply later for why you may not want to
> do this.
> 
> The following are equivalent.
> Document doc = new Document();
> doc.add("textfield", "data1 data2 data3");
> doc.add("textfield", "data4 data5 data6");
> 
> 
> and
> Document doc = new Document();
> doc.add("textfield", "data1 data2 data3 data4 data5
> data6");
> 
> So you could read chunks of your file and index them
> into the *same* field
> before writing the document to the index, or you
> could read the file as a
> single chunk and index it all at once.
> 
> HOWEVER: note that the default in Lucene is to index
> only the first 10,000
> (?) tokens for a field in a single document. See
> IndexWriter.SetMaxFieldLength.
> 
> 
> 
>    The file contains timestamp, if i need to index
> on
> >    timestamp is parsing the entire file manually
> > (tokenizing) and store the timestamp as document
> > object is the only way ? or is there any
> alternatives
> > ?
> 
> 
> Perhaps I don't understand the problem. You can
> store the timestamp as a
> *field* in a document. Is that what you mean by
> storing it as a "document
> object"? But there's no way I know of to have Lucene
> automatically do
> something with arbitrary text in the input stream.
> You could write a custom
> analyzer (see Lucene In Action for the Synonym
> Analyzer for a model). That
> Analyzer would be responsible for recognizing
> timestamps in the input stream
> and doing something special with them.
> 
> 
> b) I need to search the contents of a log file which
> > is changing rapidly, from initial testing i see if
> any
> > changes in the file is not reflected unless it is
> > *Indexed* again
> >
> >    Do we need to index the files always before
> search
> > if the content of the file is dynamically changed
> 
> 
> Yes. That is, you can't search data you haven't
> indexed.
> 
> 
>   ( log file has a pattern and always logs in a
> > similar fashion, each time i need to index takes
> lot
> > of time as the file is large (approach a )  is
> there
> > any work arounds for this ? )
> 
> 
> I think you need to re-think your approach. A
> document in Lucene is whatever
> you want to think of it as. For instance, you could
> index your log file such
> that each Lucene "document" was all the data added
> to the log file over some
> specified time interval. So, say you have a log that
> starts at midnight.
> Each Lucene "document" could be all the data added
> to the index for each
> minute. So you'd have a document for the data added
> to the log between 12:00
> and 12:00:59. Another "document" for all data
> between 12:01:00 and 12:01:59
> etc. That way, you don't have to re-index the entire
> log, just everything
> since the last interval you already indexed.
> 
> I'm not necessarily recommending this approach, but
> using it to illustrate
> that you don't need to think of a Lucene Document as
> your entire log file.
> You may be much better off slicing the data up
> somehow and having a
> one-to-many relationship between your log and the
> Lucene documents......
> 
> Perhaps you could index every message as an
> individual document (which would
> deal with your timestamp issue), or.....
> 
> Hope this helps
> Erick
> 
>   I would greatly appreciate if any inputs on the
> > above,
> >
> > Many thanks,
> > Abdul
> >
> >
> >
> >
> >
> >
> >
> >
>
____________________________________________________________________________________
> > Need a quick answer? Get one in minutes from
> people who know.
> > Ask your question on www.Answers.yahoo.com
> >
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >
> 



 
____________________________________________________________________________________
Do you Yahoo!?
Everyone is raving about the all-new Yahoo! Mail beta.
http://new.mail.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 15:01:25 2006
Return-Path: <java-user-return-24995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98152 invoked from network); 13 Dec 2006 15:01:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 15:01:20 -0000
Received: (qmail 54740 invoked by uid 500); 13 Dec 2006 15:01:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54698 invoked by uid 500); 13 Dec 2006 15:01:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54465 invoked by uid 99); 13 Dec 2006 15:01:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 07:01:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Dec 2006 07:00:49 -0800
Received: (qmail 24708 invoked by uid 0); 13 Dec 2006 15:00:28 -0000
Received: from 130.159.248.222 by www002.gmx.net with HTTP;
 Wed, 13 Dec 2006 16:00:28 +0100 (CET)
Content-Type: text/plain; charset="iso-8859-1"
Date: Wed, 13 Dec 2006 16:00:28 +0100
From: "Karl Koch" <TheRanger@gmx.net>
In-Reply-To: <457F2A14.3080008@syr.edu>
Message-ID: <20061213150028.121880@gmx.net>
MIME-Version: 1.0
References: <20061212103214.218000@gmx.net> <457EC431.5010305@syr.edu>
 <20061212164706.248900@gmx.net> <457F2A14.3080008@syr.edu>
Subject: Re: Lucene scoring: coord_q_d factor
To: java-user@lucene.apache.org
X-Authenticated: #21808356
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Steven,

unfortunately I don't have access to these books right now. I will try to get hold of them. Thank you for these pointers. :)

I had a quick look at "coordination level matching" on the web and found evidence that this seemed to be an early retrieval strategy. My question is mainly, why one should use coordination level matching, if one is already doing (proper) TFxIDF based matching. When I look at Lucenes scoring forumla, it seems to me that two kinds of matching are performed and combined together in a single matching formula. 

In the paper, "Exploiting the Similarity of Non-matching Terms at Retrieval Time" which can be found here:

http://www.cis.strath.ac.uk/~fabioc/papers/00-jir.pdf

it is directly compared with TFxIDF. To me, it seems that coordination level matching could be used if I don't want to use TFxIDF but not together with it. In this context, I wonder what benefit the "coordination level matching" has in combination with TFxIDF?

It is likely that I have some kind of misunderstanding here. Perhaps with your help I can untangle that a bit further. As I said earlier, I am only looking for a reasonable explaination (perhaps augmented with some evidence in literature) that makes it clear why it is used together with TFxIDF.

Thank you,
Karl



-------- Original-Nachricht --------
Datum: Tue, 12 Dec 2006 17:15:48 -0500
Von: Steven Rowe <sarowe@syr.edu>
An: java-user@lucene.apache.org
Betreff: Re: Lucene scoring: coord_q_d factor

> Karl Koch wrote:
> > Is there any other paper that actually shows the benefit of doing 
> > this particular normalisation with coord_q_d? I am not suggesting
> > here that it is not useful, I am just looking for evidence how the
> > idea developed.
> 
> I think it's a mischaracterization to call coordination a
> "normalization".  In my mind, "normalization" is something applied
> equally to all documents' scores.  The coordination component of a
> document's score varies from document to document, and so doesn't meet
> this criterion.
> 
> I repeat the citation of the book cited by the paper I cited :) :
> 
> >> Salton, G. & McGill, M. Introduction to Modern Information
> >> Retrieval. McGraw-Hill, New York, 1983.
> 
> In addition to the above book, here are two other books that I've seen
> cited as describing "coordination-level matching" (a.k.a. "overlap
> ranking"):
> 
> Salton, G. (1968). Automatic information organization and retrieval.
> New York: McGraw-Hill.
> 
> Lancaster, F.W. (1979). Information retrieval systems: Characteristics,
> testing and evaluation (2nd ed.). New York: Wiley.
> 
> I don't know the answer to your larger question: why use a coordination
> component in a similarity measure when other components (tf*idf) seem to
> serve the same function?  What you seem to be looking for is a study
> that directly compares a system using a coordination component in its
> similarity measure with the *same* system, varying the measure only in
> that coordination is elided.  Unfortunately, I know of no such study.
> 
> Good luck,
> Steve
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 15:32:17 2006
Return-Path: <java-user-return-24996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11664 invoked from network); 13 Dec 2006 15:32:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 15:32:17 -0000
Received: (qmail 43591 invoked by uid 500); 13 Dec 2006 15:32:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43562 invoked by uid 500); 13 Dec 2006 15:32:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43551 invoked by uid 99); 13 Dec 2006 15:32:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 07:32:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 07:32:03 -0800
Received: by nf-out-0910.google.com with SMTP id n28so994806nfc
        for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 07:31:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=SM2Onq/ARpeiDuXnibx6eb4fKGmjZR5aCcBppK1hUBxsBDh+FaEF6sOYxyic4cHB9nVpfQp9GdxsGrMyksKK0ALqwfUkM53Dqwm4TonbLrrTEAjFAXUI9dG2XMRlKMVVQchgH6q7GbMnkHbRLKUG1KH65u9xOenivgAvLMExZ7k=
Received: by 10.82.114.3 with SMTP id m3mr176271buc.1166023901516;
        Wed, 13 Dec 2006 07:31:41 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Wed, 13 Dec 2006 07:31:41 -0800 (PST)
Message-ID: <c68e39170612130731x65a9883do97648bca74c42c63@mail.gmail.com>
Date: Wed, 13 Dec 2006 10:31:41 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene scoring: coord_q_d factor
In-Reply-To: <20061213150028.121880@gmx.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061212103214.218000@gmx.net> <457EC431.5010305@syr.edu>
	 <20061212164706.248900@gmx.net> <457F2A14.3080008@syr.edu>
	 <20061213150028.121880@gmx.net>
X-Google-Sender-Auth: 19c9fda23af069d7
X-Virus-Checked: Checked by ClamAV on apache.org

On 12/13/06, Karl Koch <TheRanger@gmx.net> wrote:
> To me, it seems that coordination level matching could be used if I don't want to use TFxIDF but not together with it. In this context, I wonder what benefit the "coordination level matching" has in combination with TFxIDF?

Well, if I search for blue kangaroo, the coord is nice to get
documents with "blue" and "kangaroo" to score higher than documents
with just one term.  And among documents with just one term, the idf
factor will make "kangaroo" rank above "blue", which is generally
desired.

I have seen complaints about the default similarity though, where the
coord factor does not give enough of a boost in relation to the idf of
some of the individual terms.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 15:42:51 2006
Return-Path: <java-user-return-24997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15028 invoked from network); 13 Dec 2006 15:42:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 15:42:50 -0000
Received: (qmail 74332 invoked by uid 500); 13 Dec 2006 15:42:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74286 invoked by uid 500); 13 Dec 2006 15:42:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74275 invoked by uid 99); 13 Dec 2006 15:42:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 07:42:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Dec 2006 07:42:37 -0800
Received: (qmail 18391 invoked by uid 0); 13 Dec 2006 15:42:16 -0000
Received: from 130.159.248.222 by www070.gmx.net with HTTP;
 Wed, 13 Dec 2006 16:42:16 +0100 (CET)
Content-Type: text/plain; charset="iso-8859-1"
Date: Wed, 13 Dec 2006 16:42:16 +0100
From: "Karl Koch" <TheRanger@gmx.net>
In-Reply-To: <c68e39170612130731x65a9883do97648bca74c42c63@mail.gmail.com>
Message-ID: <20061213154216.320030@gmx.net>
MIME-Version: 1.0
References: <20061212103214.218000@gmx.net> <457EC431.5010305@syr.edu>	
 <20061212164706.248900@gmx.net> <457F2A14.3080008@syr.edu>	
 <20061213150028.121880@gmx.net>
 <c68e39170612130731x65a9883do97648bca74c42c63@mail.gmail.com>
Subject: Re: Lucene scoring: coord_q_d factor
To: java-user@lucene.apache.org
X-Authenticated: #21808356
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Do you know about any papers that discuss this?

Karl

-------- Original-Nachricht --------
Datum: Wed, 13 Dec 2006 10:31:41 -0500
Von: "Yonik Seeley" <yonik@apache.org>
An: java-user@lucene.apache.org
Betreff: Re: Lucene scoring: coord_q_d factor

> On 12/13/06, Karl Koch <TheRanger@gmx.net> wrote:
> > To me, it seems that coordination level matching could be used if I
> don't want to use TFxIDF but not together with it. In this context, I wonder
> what benefit the "coordination level matching" has in combination with
> TFxIDF?
> 
> Well, if I search for blue kangaroo, the coord is nice to get
> documents with "blue" and "kangaroo" to score higher than documents
> with just one term.  And among documents with just one term, the idf
> factor will make "kangaroo" rank above "blue", which is generally
> desired.
> 
> I have seen complaints about the default similarity though, where the
> coord factor does not give enough of a boost in relation to the idf of
> some of the individual terms.
> 
> 
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search
> server
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 17:43:29 2006
Return-Path: <java-user-return-24998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66949 invoked from network); 13 Dec 2006 17:43:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 17:43:28 -0000
Received: (qmail 37809 invoked by uid 500); 13 Dec 2006 17:43:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37774 invoked by uid 500); 13 Dec 2006 17:43:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37763 invoked by uid 99); 13 Dec 2006 17:43:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 09:43:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of vmslucene@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 09:43:17 -0800
Received: by ug-out-1314.google.com with SMTP id k40so255090ugc
        for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 09:42:55 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ZGaP3cySrMwkoaMuGwHBbfoCCyqqHOO1dGDKSAtHFcv91/b0KPik3RuLG+S6GxZPnRdD3s0cEMSjTmxZ3uYSJrPs+Nx9EO8O4EWDMFFelrDHLDVsGdMTGAxDOfNtLNCNjwJplq56ZTFKzQLq/iK+D4c9jqGRimV2RC/ToZzf+cw=
Received: by 10.78.180.18 with SMTP id c18mr833439huf.1166031774882;
        Wed, 13 Dec 2006 09:42:54 -0800 (PST)
Received: by 10.78.107.1 with HTTP; Wed, 13 Dec 2006 09:42:54 -0800 (PST)
Message-ID: <2e0306af0612130942t2867e5bdob9891d5833d537dd@mail.gmail.com>
Date: Wed, 13 Dec 2006 12:42:54 -0500
From: "Mark Mei" <vmslucene@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene functionality
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_181267_10930724.1166031774368"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_181267_10930724.1166031774368
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

At the bottom of this email is the sample xml file that we are using today.
We have about 10 million of these.

We need to know whether Lucene can support the following functionalities.
(1) Each field is searchable and indexable.
(2) Fields such as STARTTIME and ENDTIME need to be treated as a pair so
that we can apply timestamp operation such as search by data time ranges
(3) Fields such as DMA need to be treated as numerical and be able to use
math operators ( > < =) for those fields.

We also use Apache Commons Digester to parse the xml files. So we want to
know, can all of the above requirements be supported by combining both
Digester and Lucene together, or do we need other modules in order for us to
support those requirements?
If these functionalities can be supported, please tell us about the effort
involved (ie, do I need to rewrite 90% of Lucene/Digester to include support
for these requirements, or is it more like spending one/two afternoons
extending some classes ? )

<DOCUMENT>
  <DREREFERENCE>61926433</DREREFERENCE>
  <DREDBNAME>News</DREDBNAME>
  <SEGMENTID>61829557</SEGMENTID>
  <SHOWID>2051460</SHOWID>
  <PROGRAMID>21181</PROGRAMID>
  <PROGRAMNAME>Action 10 News This Morning</PROGRAMNAME>
  <PREFIX>wthi0600</PREFIX>
  <STATIONID>903</STATIONID>
  <STATIONNAME>WTHI-TV</STATIONNAME>
  <AFFILIATEID>17</AFFILIATEID>
  <AFFILIATENAME>CBS</AFFILIATENAME>
  <MARKETID>141</MARKETID>
  <MARKETNAME>Terre Haute</MARKETNAME>
  <MEDIATYPE>T</MEDIATYPE>
  <DMA>149</DMA>
  <SOURCETYPE>CC</SOURCETYPE>
  <STARTTIME>2005-07-04 06:00:00</STARTTIME>
  <ENDTIME>2005-07-04 07:00:00</ENDTIME>
  <STARTMETER>00:42:53</STARTMETER>
  <ENDMETER>00:45:02</ENDMETER>
  <DREDATE>2006-01-25 00:00:00</DREDATE>
  <DRETITLE>At we take you to break with a look at some of the fourth of
July fun going on around the wabash valley today.</DRETITLE>
  <DRECONTENT>At we take you to break with a look at some of the fourth of
July fun going on around the wabash valley today. This is action 10 news
this morning on wthi. He's been the US Attorney general for only a few
months. But alberto gonzales may already be in the running for a new job.
And not just any job, either.</DRECONTENT>
</DOCUMENT>

------=_Part_181267_10930724.1166031774368--

From java-user-return-24999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 17:51:46 2006
Return-Path: <java-user-return-24999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69698 invoked from network); 13 Dec 2006 17:51:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 17:51:45 -0000
Received: (qmail 52384 invoked by uid 500); 13 Dec 2006 17:51:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52344 invoked by uid 500); 13 Dec 2006 17:51:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52315 invoked by uid 99); 13 Dec 2006 17:51:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 09:51:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.21 as permitted sender)
Received: from [209.63.42.21] (HELO ns1.mainstreamdata.com) (209.63.42.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 09:51:32 -0800
Received: from localhost (localhost [127.0.0.1])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 1B3311357
	for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 10:51:12 -0700 (MST)
Received: from ns1.mainstreamdata.com ([127.0.0.1])
	by localhost (ns1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 21536-01 for <java-user@lucene.apache.org>;
	Wed, 13 Dec 2006 10:51:07 -0700 (MST)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 8A998DD0
	for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 10:51:07 -0700 (MST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: de-boosting fields
Date: Wed, 13 Dec 2006 10:51:07 -0700
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB44898D6@exchange.slc.mainstreamdata.com>
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB44898D1@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: de-boosting fields
thread-index: AccdVYqaNzxWiV1STeeq6ADgGHYHawA552LQACgvxsA=
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at mainstreamdata.com
X-Virus-Checked: Checked by ClamAV on apache.org

One other thing I discovered that I mention so no one else is tripped up
by it. =20

I set the boost to zero for the categories in the query.  When I ran my
unit tests, some of them started to fail.  I eventually realized that
the failures were in searches where I only wanted to find documents in
the right category (i.e., I wasn't looking for documents with any
particular words in them); I would get zero hits.  I'm assuming this is
because even though the document belonged to a category I was looking
for, because lucene computed its score as 0, it assumed I didn't want
that document.

I guess that all makes sense, it just means I have to be careful as to
which queries I set the category boost to zero and which I don't.

-----Original Message-----
From: Scott Smith [mailto:ssmith@mainstreamdata.com]=20
Sent: Tuesday, December 12, 2006 3:31 PM
To: java-user@lucene.apache.org
Subject: RE: de-boosting fields

I've implemented the zero boost solution and it seems to be doing what I
want.  Thanks to everyone who had suggestions.

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Monday, December 11, 2006 11:45 AM
To: java-user@lucene.apache.org
Subject: Re: de-boosting fields


: Isn't it also true that using Field.Index.NO_NORMS when creating the
field will
: remove it from the scoring formula?  I thought I read that somewhere,
but now
: can't find where.

queries on fields with NO_NORMS will still contribute to the score, but
the field *length* and/or field bosts won't contribute to the score.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 18:02:27 2006
Return-Path: <java-user-return-25000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73142 invoked from network); 13 Dec 2006 18:02:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 18:02:26 -0000
Received: (qmail 81607 invoked by uid 500); 13 Dec 2006 18:02:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81548 invoked by uid 500); 13 Dec 2006 18:02:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81537 invoked by uid 99); 13 Dec 2006 18:02:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 10:02:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [212.227.126.183] (HELO moutng.kundenserver.de) (212.227.126.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 10:02:14 -0800
Received: from [85.179.20.247] (helo=[10.100.100.102])
	by mrelayeu.kundenserver.de (node=mrelayeu5) with ESMTP (Nemesis),
	id 0ML25U-1GuYQS3zqy-0001Mx; Wed, 13 Dec 2006 19:01:53 +0100
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <F4696562-10A6-499C-8543-CE8353B41D4B@neoconcept.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: =?ISO-8859-1?Q?Stefan_Sch=FCtz?= <schuetz@neoconcept.de>
Subject: Problems with Queries which contain '_'  and wildcards
Date: Wed, 13 Dec 2006 19:01:52 +0100
X-Mailer: Apple Mail (2.752.2)
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:1ddbe6b13c811180751e197fd4a84d48
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

first let me explain the situation:

We have to index an document, which contains a field "file" to store  
filenames.
Sometimes filenames contain an underscore or an minus (_ or -). =>  
e.g. foo_bar.doc
Indexing is'nt the problem so far.

But if we now try to search for "foo_b*" the QueryParser crashes with  
following exception:

org.apache.lucene.queryParser.ParseException: Cannot build  
PrefixQuery with analyzer class  
org.apache.lucene.analysis.de.GermanAnalyzer - token was consumed


Same problem occurs if i use the StandardAnalyzer.
To replace underscores in filenames is not a solution because we have  
many other fields
which can contain underscores. :(

Is there anybody who knows this problem or knows a solution for this?

thx in advance.
Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 18:13:54 2006
Return-Path: <java-user-return-25001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77061 invoked from network); 13 Dec 2006 18:13:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 18:13:53 -0000
Received: (qmail 4468 invoked by uid 500); 13 Dec 2006 18:13:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4434 invoked by uid 500); 13 Dec 2006 18:13:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4422 invoked by uid 99); 13 Dec 2006 18:13:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 10:13:55 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 10:13:44 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GuYbb-0001L0-I5
	for java-user@lucene.apache.org; Wed, 13 Dec 2006 10:13:23 -0800
Message-ID: <7858202.post@talk.nabble.com>
Date: Wed, 13 Dec 2006 10:13:23 -0800 (PST)
From: mariolone <mario_im@hotmail.com>
To: java-user@lucene.apache.org
Subject: Lucene & LSA
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mario_im@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi!!!!
I have a problem:
i must create a matrix term for document in which every element of the
matrix it represents the number of occurrences of that term in the document.
How can I do? 
Can someone help me?
Thanks to all....

P.S. I must applicate LSA to this matrix.
-- 
View this message in context: http://www.nabble.com/Lucene---LSA-tf2815727.html#a7858202
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 18:34:26 2006
Return-Path: <java-user-return-25002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84259 invoked from network); 13 Dec 2006 18:34:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 18:34:25 -0000
Received: (qmail 57904 invoked by uid 500); 13 Dec 2006 18:34:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57876 invoked by uid 500); 13 Dec 2006 18:34:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57865 invoked by uid 99); 13 Dec 2006 18:34:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 10:34:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.238.164.5] (HELO elvira.its.uu.se) (130.238.164.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 10:34:12 -0800
Received: by elvira.its.uu.se (Postfix, from userid 204)
	id 8E1DC390; Wed, 13 Dec 2006 19:33:45 +0100 (MEZ)
Received: from elvira.its.uu.se(127.0.0.1) by elvira.its.uu.se via virus-scan 
	id s276506; Wed, 13 Dec 06 19:33:15 +0100
Received: from jubula.its.uu.se (jubula.its.uu.se [130.238.4.198])
	(using TLSv1 with cipher AES256-SHA (256/256 bits))
	(No client certificate requested)
	by elvira.its.uu.se (Postfix) with ESMTP id BF4BF20F
	for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 19:33:14 +0100 (MEZ)
Received: from localhost ([127.0.0.1] helo=jubula)
	by jubula.its.uu.se with esmtp (Exim 4.50)
	id 1GuYuc-0004nh-IF
	for java-user@lucene.apache.org; Wed, 13 Dec 2006 19:33:02 +0100
Received: from c-234de253.16-1-64736c11.cust.bredbandsbolaget.se
	(c-234de253.16-1-64736c11.cust.bredbandsbolaget.se [83.226.77.35]) by
	webmail.uu.se (Horde MIME library) with HTTP; Wed, 13 Dec 2006 19:33:02
	+0100
Message-ID: <20061213193302.5x9vu99z6swco0ww@webmail.uu.se>
Date: Wed, 13 Dec 2006 19:33:02 +0100
From: Ronnie Kolehmainen <ronnie.kolehmainen@ub.uu.se>
To: java-user@lucene.apache.org
Subject: Re: Problems with Queries which contain '_'  and wildcards
References: <F4696562-10A6-499C-8543-CE8353B41D4B@neoconcept.de>
In-Reply-To: <F4696562-10A6-499C-8543-CE8353B41D4B@neoconcept.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
User-Agent: Internet Messaging Program (IMP) H3 (4.1.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I recognize that error message ;) You're using AnalyzingQueryParser =20
<http://lucene.apache.org/java/docs/api/org/apache/lucene/queryParser/analyz=
ing/AnalyzingQueryParser.html> - =20
yes?

These are imo the two most obvious options:

1. Revert to standard QueryParser - it won't analyze prefix- and =20
wildcardqueries.

2. Keep AnalyzingQueryParser together with different analyzers for =20
different fields (wrapped in =20
org.apache.lucene.analysis.PerFieldAnalyzerWrapper).

With option #2 you could use Standard- or GermanAnalyzer for text =20
fields, and for filenames etc. a better choice would be something like =20
KeywordAnalyzer, which doesn't add or consume tokens. Remember to =20
always use the same analyzer(s) for indexing AND search though.

/Ronnie

Quoting Stefan Sch=FCtz <schuetz@neoconcept.de>:

> Hi,
>
> first let me explain the situation:
>
> We have to index an document, which contains a field "file" to store
> filenames.
> Sometimes filenames contain an underscore or an minus (_ or -). =3D> e.g.
> foo_bar.doc
> Indexing is'nt the problem so far.
>
> But if we now try to search for "foo_b*" the QueryParser crashes with
> following exception:
>
> org.apache.lucene.queryParser.ParseException: Cannot build PrefixQuery
> with analyzer class org.apache.lucene.analysis.de.GermanAnalyzer -
> token was consumed
>
>
> Same problem occurs if i use the StandardAnalyzer.
> To replace underscores in filenames is not a solution because we have
> many other fields
> which can contain underscores. :(
>
> Is there anybody who knows this problem or knows a solution for this?
>
> thx in advance.
> Stefan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 18:53:45 2006
Return-Path: <java-user-return-25003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87602 invoked from network); 13 Dec 2006 18:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 18:53:44 -0000
Received: (qmail 8194 invoked by uid 500); 13 Dec 2006 18:53:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7718 invoked by uid 500); 13 Dec 2006 18:53:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7382 invoked by uid 99); 13 Dec 2006 18:52:56 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of patrek@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 10:52:52 -0800
Received: by an-out-0708.google.com with SMTP id c3so78299ana
        for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 10:51:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fRcYHIVSEOefDhz3lNYLzTrZ+DG4r7l08WGuC94ZqWCAFcpIjummrBDTXJhy0ZrWnELd8fyuuYQ3/C9YOmjh7u9xFMu1l01VV7TkUQMJiH1r6CwPZczR7VRGQozsv24yvDvKxUzKNTr6smU1s/bp1coIVqPslZoc7O1d+KiNgGA=
Received: by 10.78.200.3 with SMTP id x3mr877808huf.1166035891278;
        Wed, 13 Dec 2006 10:51:31 -0800 (PST)
Received: by 10.78.66.10 with HTTP; Wed, 13 Dec 2006 10:51:31 -0800 (PST)
Message-ID: <48b038c60612131051p4f80a71dlc1bb0021da308286@mail.gmail.com>
Date: Wed, 13 Dec 2006 13:51:31 -0500
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org, vmslucene@gmail.com
Subject: Re: lucene functionality
In-Reply-To: <2e0306af0612130942t2867e5bdob9891d5833d537dd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57725_1249584.1166035891012"
References: <2e0306af0612130942t2867e5bdob9891d5833d537dd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57725_1249584.1166035891012
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I would suggest you take a look at exist-db (http://exist-db.org/).

A database for XML documents that support XQuery.

We are using both products here (lucene and exist-db), and for what you are
looking for, exist-db seems better.

Our documents are far more complex than yours (about 500 different element
in the structure) and even if we don't have millions, we have more than 53K
documents.

Once loaded in the database, performance are impressives to find info on
documents parts (xpath) where no index exists. And for your structure, you
could even create indexes which would boost performance even more.

Don't hesitate to contact me directly if you have more questions.

Patrick

On 12/13/06, Mark Mei <vmslucene@gmail.com> wrote:
>
> At the bottom of this email is the sample xml file that we are using
> today.
> We have about 10 million of these.
>
> We need to know whether Lucene can support the following functionalities.
> (1) Each field is searchable and indexable.
> (2) Fields such as STARTTIME and ENDTIME need to be treated as a pair so
> that we can apply timestamp operation such as search by data time ranges
> (3) Fields such as DMA need to be treated as numerical and be able to use
> math operators ( > < =) for those fields.
>
> We also use Apache Commons Digester to parse the xml files. So we want to
> know, can all of the above requirements be supported by combining both
> Digester and Lucene together, or do we need other modules in order for us
> to
> support those requirements?
> If these functionalities can be supported, please tell us about the effort
> involved (ie, do I need to rewrite 90% of Lucene/Digester to include
> support
> for these requirements, or is it more like spending one/two afternoons
> extending some classes ? )
>
> <DOCUMENT>
>   <DREREFERENCE>61926433</DREREFERENCE>
>   <DREDBNAME>News</DREDBNAME>
>   <SEGMENTID>61829557</SEGMENTID>
>   <SHOWID>2051460</SHOWID>
>   <PROGRAMID>21181</PROGRAMID>
>   <PROGRAMNAME>Action 10 News This Morning</PROGRAMNAME>
>   <PREFIX>wthi0600</PREFIX>
>   <STATIONID>903</STATIONID>
>   <STATIONNAME>WTHI-TV</STATIONNAME>
>   <AFFILIATEID>17</AFFILIATEID>
>   <AFFILIATENAME>CBS</AFFILIATENAME>
>   <MARKETID>141</MARKETID>
>   <MARKETNAME>Terre Haute</MARKETNAME>
>   <MEDIATYPE>T</MEDIATYPE>
>   <DMA>149</DMA>
>   <SOURCETYPE>CC</SOURCETYPE>
>   <STARTTIME>2005-07-04 06:00:00</STARTTIME>
>   <ENDTIME>2005-07-04 07:00:00</ENDTIME>
>   <STARTMETER>00:42:53</STARTMETER>
>   <ENDMETER>00:45:02</ENDMETER>
>   <DREDATE>2006-01-25 00:00:00</DREDATE>
>   <DRETITLE>At we take you to break with a look at some of the fourth of
> July fun going on around the wabash valley today.</DRETITLE>
>   <DRECONTENT>At we take you to break with a look at some of the fourth of
> July fun going on around the wabash valley today. This is action 10 news
> this morning on wthi. He's been the US Attorney general for only a few
> months. But alberto gonzales may already be in the running for a new job.
> And not just any job, either.</DRECONTENT>
> </DOCUMENT>
>
>

------=_Part_57725_1249584.1166035891012--

From java-user-return-25004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 19:06:39 2006
Return-Path: <java-user-return-25004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91470 invoked from network); 13 Dec 2006 19:06:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 19:06:38 -0000
Received: (qmail 55892 invoked by uid 500); 13 Dec 2006 19:06:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55866 invoked by uid 500); 13 Dec 2006 19:06:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55855 invoked by uid 99); 13 Dec 2006 19:06:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:06:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:06:28 -0800
Received: by an-out-0708.google.com with SMTP id c3so80837ana
        for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 11:06:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=DDlowI6L4Nn0y3+NOy/HJbIMCgFEsS2wXrlajXQFeY3400rbWv05CbtR15uSZSa6/bm39jpjvBOY1YjCm3mFNgd2ZAIElyTw8RRC6pZqesZzovPYjgdJDcb1SYIAWsIvOvcI3BJChfq//1gXJi78nHs/8KmETTLebKfRks9gDuM=
Received: by 10.78.183.15 with SMTP id g15mr866554huf.1166036765521;
        Wed, 13 Dec 2006 11:06:05 -0800 (PST)
Received: by 10.78.145.11 with HTTP; Wed, 13 Dec 2006 11:06:05 -0800 (PST)
Message-ID: <126142c0612131106t69a6e4d6q29f7e8e1d0676ec2@mail.gmail.com>
Date: Wed, 13 Dec 2006 16:06:05 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene functionality
In-Reply-To: <2e0306af0612130942t2867e5bdob9891d5833d537dd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2e0306af0612130942t2867e5bdob9891d5833d537dd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mark:
  For 10 million records We recommend an strong database such as Oracle.
  You can annotate the Schema (.xsd) which describes your XML record
to store some field in traditional VARCHAR2 or NUMBER columns to query
it faster, and <DRECONTENT> in a CLOB column.
  You can find more information at:
http://www.oracle.com/technology/tech/xml/xmldb/index.html
http://www.oracle.com/technology/oramag/oracle/05-mar/o25xmlex.html
  If you annotate the schema, you don't need to parse the XML records
with Digester to store into the Oracle database, you can simple insert
using an XMLType object, using Ftp or WebDAV.
  Best regards, Marcelo.

On 12/13/06, Mark Mei <vmslucene@gmail.com> wrote:
> At the bottom of this email is the sample xml file that we are using today.
> We have about 10 million of these.
>
> We need to know whether Lucene can support the following functionalities.
> (1) Each field is searchable and indexable.
> (2) Fields such as STARTTIME and ENDTIME need to be treated as a pair so
> that we can apply timestamp operation such as search by data time ranges
> (3) Fields such as DMA need to be treated as numerical and be able to use
> math operators ( > < =) for those fields.
>
> We also use Apache Commons Digester to parse the xml files. So we want to
> know, can all of the above requirements be supported by combining both
> Digester and Lucene together, or do we need other modules in order for us to
> support those requirements?
> If these functionalities can be supported, please tell us about the effort
> involved (ie, do I need to rewrite 90% of Lucene/Digester to include support
> for these requirements, or is it more like spending one/two afternoons
> extending some classes ? )
>
> <DOCUMENT>
>   <DREREFERENCE>61926433</DREREFERENCE>
>   <DREDBNAME>News</DREDBNAME>
>   <SEGMENTID>61829557</SEGMENTID>
>   <SHOWID>2051460</SHOWID>
>   <PROGRAMID>21181</PROGRAMID>
>   <PROGRAMNAME>Action 10 News This Morning</PROGRAMNAME>
>   <PREFIX>wthi0600</PREFIX>
>   <STATIONID>903</STATIONID>
>   <STATIONNAME>WTHI-TV</STATIONNAME>
>   <AFFILIATEID>17</AFFILIATEID>
>   <AFFILIATENAME>CBS</AFFILIATENAME>
>   <MARKETID>141</MARKETID>
>   <MARKETNAME>Terre Haute</MARKETNAME>
>   <MEDIATYPE>T</MEDIATYPE>
>   <DMA>149</DMA>
>   <SOURCETYPE>CC</SOURCETYPE>
>   <STARTTIME>2005-07-04 06:00:00</STARTTIME>
>   <ENDTIME>2005-07-04 07:00:00</ENDTIME>
>   <STARTMETER>00:42:53</STARTMETER>
>   <ENDMETER>00:45:02</ENDMETER>
>   <DREDATE>2006-01-25 00:00:00</DREDATE>
>   <DRETITLE>At we take you to break with a look at some of the fourth of
> July fun going on around the wabash valley today.</DRETITLE>
>   <DRECONTENT>At we take you to break with a look at some of the fourth of
> July fun going on around the wabash valley today. This is action 10 news
> this morning on wthi. He's been the US Attorney general for only a few
> months. But alberto gonzales may already be in the running for a new job.
> And not just any job, either.</DRECONTENT>
> </DOCUMENT>
>
>


-- 
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 19:15:50 2006
Return-Path: <java-user-return-25005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93339 invoked from network); 13 Dec 2006 19:15:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 19:15:48 -0000
Received: (qmail 81067 invoked by uid 500); 13 Dec 2006 19:13:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80770 invoked by uid 500); 13 Dec 2006 19:13:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80593 invoked by uid 99); 13 Dec 2006 19:13:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:13:33 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:12:53 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.8/8.13.8) with ESMTP id kBDJCGHr165536
	for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 19:12:16 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kBDJCGiG3084474
	for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 20:12:16 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kBDJCGGv020545
	for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 20:12:16 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kBDJCG42020542
	for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 20:12:16 +0100
In-Reply-To: <2e0306af0612130942t2867e5bdob9891d5833d537dd@mail.gmail.com>
Subject: Re: lucene functionality
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF0D42EB55.85F90302-ON88257243.00675AE0-88257243.00693C80@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 13 Dec 2006 11:09:27 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 13/12/2006 21:12:15
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene RangeQuery would do for the "time" and "numeric" reqs.

"Mark Mei" <vmslucene@gmail.com> wrote:
> At the bottom of this email is the sample xml file that we are using
today.
> We have about 10 million of these.
>
> We need to know whether Lucene can support the following functionalities.
> (1) Each field is searchable and indexable.

This is natural in Lucene.

> (2) Fields such as STARTTIME and ENDTIME need to be treated as a pair so
> that we can apply timestamp operation such as search by data time ranges

You should be able to do it with two fields - start/end - and then you have
all the flexibility for queries. Conditions can be set on either one of
these or on both. In case that both are used, i.e. a doc matches only if
its start-to-end range falls within a certain minStart maxEnd range, you
would need two open ended range queries (or range filters) - one to apply
on the start date and one to apply on the end date, because a single range
query values must have the same field name. Also notice that open ended
range queries must be created programmatically - current QueryParser does
not support this. See using DateTools for saving the time values in a
resolution that matches your needs.

> (3) Fields such as DMA need to be treated as numerical and be able to use
> math operators ( > < =) for those fields.

Same comments on range queries / filters apply. Be aware though that
comparison is lexicographic, so numeric values should be indexed as
strings. See NumberTools.

>
> We also use Apache Commons Digester to parse the xml files. So we want to
> know, can all of the above requirements be supported by combining both
> Digester and Lucene together, or do we need other modules in order for us
to
> support those requirements?
> If these functionalities can be supported, please tell us about the
effort
> involved (ie, do I need to rewrite 90% of Lucene/Digester to include
support
> for these requirements, or is it more like spending one/two afternoons
> extending some classes ? )

Apart from the XML handling (don't know about that), for the other reqs it
is just using Lucene's API.

>
> <DOCUMENT>
>   <DREREFERENCE>61926433</DREREFERENCE>
>   <DREDBNAME>News</DREDBNAME>
>   <SEGMENTID>61829557</SEGMENTID>
>   <SHOWID>2051460</SHOWID>
>   <PROGRAMID>21181</PROGRAMID>
>   <PROGRAMNAME>Action 10 News This Morning</PROGRAMNAME>
>   <PREFIX>wthi0600</PREFIX>
>   <STATIONID>903</STATIONID>
>   <STATIONNAME>WTHI-TV</STATIONNAME>
>   <AFFILIATEID>17</AFFILIATEID>
>   <AFFILIATENAME>CBS</AFFILIATENAME>
>   <MARKETID>141</MARKETID>
>   <MARKETNAME>Terre Haute</MARKETNAME>
>   <MEDIATYPE>T</MEDIATYPE>
>   <DMA>149</DMA>
>   <SOURCETYPE>CC</SOURCETYPE>
>   <STARTTIME>2005-07-04 06:00:00</STARTTIME>
>   <ENDTIME>2005-07-04 07:00:00</ENDTIME>
>   <STARTMETER>00:42:53</STARTMETER>
>   <ENDMETER>00:45:02</ENDMETER>
>   <DREDATE>2006-01-25 00:00:00</DREDATE>
>   <DRETITLE>At we take you to break with a look at some of the fourth of
> July fun going on around the wabash valley today.</DRETITLE>
>   <DRECONTENT>At we take you to break with a look at some of the fourth
of
> July fun going on around the wabash valley today. This is action 10 news
> this morning on wthi. He's been the US Attorney general for only a few
> months. But alberto gonzales may already be in the running for a new job.
> And not just any job, either.</DRECONTENT>
> </DOCUMENT>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 19:20:35 2006
Return-Path: <java-user-return-25006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96708 invoked from network); 13 Dec 2006 19:20:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 19:20:33 -0000
Received: (qmail 11473 invoked by uid 500); 13 Dec 2006 19:20:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11442 invoked by uid 500); 13 Dec 2006 19:20:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11431 invoked by uid 99); 13 Dec 2006 19:20:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:20:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:20:20 -0800
Received: (qmail 3549 invoked from network); 13 Dec 2006 19:19:57 -0000
Received: from unknown (HELO p5496ed8c.dip.t-dialin.net) ([pbs]695637@[84.150.237.140])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 13 Dec 2006 19:19:57 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Indexing clarification , please advice
Date: Wed, 13 Dec 2006 20:19:36 +0100
User-Agent: KMail/1.8.2
References: <20061213131011.26300.qmail@web52210.mail.yahoo.com>
In-Reply-To: <20061213131011.26300.qmail@web52210.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200612132019.36402@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 13 December 2006 14:10, abdul aleem wrote:

> a) Indexing large file ( more than 4MB )
> =C2=A0 =C2=A0Do i need to read the entire file as string using
> =C2=A0 =C2=A0java.io and create a Document object ?

You can also use a reader:

http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/document/Field.ht=
ml#Field(java.lang.String, java.io.Reader)

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 19:34:10 2006
Return-Path: <java-user-return-25007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1001 invoked from network); 13 Dec 2006 19:34:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 19:34:09 -0000
Received: (qmail 40227 invoked by uid 500); 13 Dec 2006 19:34:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39659 invoked by uid 500); 13 Dec 2006 19:34:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39648 invoked by uid 99); 13 Dec 2006 19:34:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:34:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 11:34:00 -0800
Received: by ug-out-1314.google.com with SMTP id k40so284166ugc
        for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 11:33:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=mMQwZDdrbTCc8CaOZNX4u7DK8HJKbTzh5H0xABUD4Lije+ydbB/UigHE2HikFZGeMvxouKP3Aao+Og8oTr5r6OxECunG0mxluDR2MmEPNESWJj3plML/G9fbBx6nVjjZbXE6C4WC5XCLlVSF8oz/V1mukpYeROppz4sn7aYNxXI=
Received: by 10.82.114.3 with SMTP id m3mr229708buc.1166038418459;
        Wed, 13 Dec 2006 11:33:38 -0800 (PST)
Received: by 10.82.150.8 with HTTP; Wed, 13 Dec 2006 11:33:38 -0800 (PST)
Message-ID: <6e3ae6310612131133p27cfaf47yeb9a6a7886e466cb@mail.gmail.com>
Date: Wed, 13 Dec 2006 11:33:38 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Advice on 3NF Data Structures and Lucene Please
In-Reply-To: <457FA4C4.6030906@lisasoft.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <457FA4C4.6030906@lisasoft.com>
X-Virus-Checked: Checked by ClamAV on apache.org

You are right. Database usually is in 3NF, while lucene usually works
on an array of objects. Different database has different data model.
There are quite some efforts to crawl database, create the lucene
index, keep it in sync with the database, and rendering the search
results. If data model changes or you need to work on another
database, duplicating those efforts is not fun.

DBSight is a web server I am working on to save the effort of creating
a Lucene search on database tables. It can work on any databases. You
can easily adjust search ranking, field weight, analyzers for each
field, search result template, etc, just by UI.

-- 
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com

On 12/12/06, Andrew Hughes <azza@lisasoft.com> wrote:
> Hey All,
>
> I am very interested in indexing a 3NF Data Structure. Is there any
> advice that someone can provide with this? From what I have seen Lucene
> is typically a flat "First Normal Form" (Flat) data structure.... The
> only way I can see to combine the relational links between multiple
> indexes is to compare documents.
>
>
> Any Help is Appreciated.
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 20:01:20 2006
Return-Path: <java-user-return-25008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11882 invoked from network); 13 Dec 2006 20:01:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 20:01:19 -0000
Received: (qmail 97115 invoked by uid 500); 13 Dec 2006 20:01:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97071 invoked by uid 500); 13 Dec 2006 20:01:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97060 invoked by uid 99); 13 Dec 2006 20:01:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 12:01:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.33] (HELO smtp-vbr13.xs4all.nl) (194.109.24.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 12:01:08 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr13.xs4all.nl (8.13.8/8.13.8) with ESMTP id kBDK0kKf094053
	for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 21:00:46 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Lucene scoring: coord_q_d factor
Date: Wed, 13 Dec 2006 21:00:45 +0100
User-Agent: KMail/1.8.2
References: <20061212103214.218000@gmx.net> <c68e39170612130731x65a9883do97648bca74c42c63@mail.gmail.com> <20061213154216.320030@gmx.net>
In-Reply-To: <20061213154216.320030@gmx.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200612132100.45388.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 13 December 2006 16:42, Karl Koch wrote:
> Do you know about any papers that discuss this?

Coordination is called co-ordination In the original idf paper by
K. Sp=E4rck Jones, A statistical interpretation of term specificity
and its application in retrieval.,  Journal of Documentation 28,
11-21, 1972
http://www.soi.city.ac.uk/~ser/idfpapers/ksj_orig.pdf

The paper is the first one on the idf page:
http://www.soi.city.ac.uk/~ser/idf.html

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 23:35:58 2006
Return-Path: <java-user-return-25009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77878 invoked from network); 13 Dec 2006 23:35:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 23:35:56 -0000
Received: (qmail 52062 invoked by uid 500); 13 Dec 2006 23:35:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52028 invoked by uid 500); 13 Dec 2006 23:35:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52017 invoked by uid 99); 13 Dec 2006 23:35:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:35:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:35:47 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1FFC45B771; Wed, 13 Dec 2006 15:35:27 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 193EE7F403
	for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 15:35:27 -0800 (PST)
Date: Wed, 13 Dec 2006 15:35:27 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: lucene functionality
In-Reply-To: <126142c0612131106t69a6e4d6q29f7e8e1d0676ec2@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0612131534090.7840@hal.rescomp.berkeley.edu>
References: <2e0306af0612130942t2867e5bdob9891d5833d537dd@mail.gmail.com>
 <126142c0612131106t69a6e4d6q29f7e8e1d0676ec2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:   For 10 million records We recommend an strong database such as Oracle.

eh ... who is "We" in that statement?

I Suspect you'll find other people on this list who have no problems
running Lucene indexes containing 10 million documents.

If you want a database, then by all means use a database, but if you want
a Lucene index of 10 million documents, you can build one.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 13 23:53:59 2006
Return-Path: <java-user-return-25010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82183 invoked from network); 13 Dec 2006 23:53:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2006 23:53:58 -0000
Received: (qmail 95730 invoked by uid 500); 13 Dec 2006 23:53:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95699 invoked by uid 500); 13 Dec 2006 23:53:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95688 invoked by uid 99); 13 Dec 2006 23:53:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:53:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of marcelo.ochoa@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 15:53:47 -0800
Received: by ug-out-1314.google.com with SMTP id k40so351562ugc
        for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 15:53:25 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=F6WiYYlktZZ0/StlGzKn1avAfOm9L8pEjdUXiu7NednmL4Zw/FBEqfvY/CHK2Um93uyQ+dyPbRuOSowKf6eq+ml345/jr+C9TDttZAEUZMAG26GU4vOX7WVVTAeve0OxGjVXLFKfR7+9qexk8MOOpvXYlHsv7NUT0ICDK6IGK80=
Received: by 10.78.185.15 with SMTP id i15mr209466huf.1166054005274;
        Wed, 13 Dec 2006 15:53:25 -0800 (PST)
Received: by 10.78.145.11 with HTTP; Wed, 13 Dec 2006 15:53:25 -0800 (PST)
Message-ID: <126142c0612131553o4351c1d1v8169dba4a292eb82@mail.gmail.com>
Date: Wed, 13 Dec 2006 20:53:25 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene functionality
In-Reply-To: <Pine.LNX.4.58.0612131534090.7840@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2e0306af0612130942t2867e5bdob9891d5833d537dd@mail.gmail.com>
	 <126142c0612131106t69a6e4d6q29f7e8e1d0676ec2@mail.gmail.com>
	 <Pine.LNX.4.58.0612131534090.7840@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Chris:

On 12/13/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> :   For 10 million records We recommend an strong database such as Oracle.
>
> eh ... who is "We" in that statement?
  We are independent consultants working for many years with Oracle databases ;)
>
> I Suspect you'll find other people on this list who have no problems
> running Lucene indexes containing 10 million documents.
  I know that Lucene can manage more than 10 million documents
perfectly, but IMO the problem here is different, I think that the XML
showed on the example implied that searching a document by the xpath
/DOCUMENT/[DREREFERENCE=61926433] is like searching in a table by
primary key, not looking at the inverted index.
>
> If you want a database, then by all means use a database, but if you want
> a Lucene index of 10 million documents, you can build one.
  Yes, you can build an inverted index for 10 million documents
perfectly, but the XML documents showed look like a simple relational
data.
>
>
> -Hoss
  Best regards, Marcelo.
-- 
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 00:05:22 2006
Return-Path: <java-user-return-25011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85481 invoked from network); 14 Dec 2006 00:05:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 00:05:21 -0000
Received: (qmail 31742 invoked by uid 500); 14 Dec 2006 00:05:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31560 invoked by uid 500); 14 Dec 2006 00:05:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31549 invoked by uid 99); 14 Dec 2006 00:05:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 16:05:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 16:05:12 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2A5165B781; Wed, 13 Dec 2006 16:04:52 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0FB8D7F403
	for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 16:04:52 -0800 (PST)
Date: Wed, 13 Dec 2006 16:04:52 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: lucene functionality
In-Reply-To: <126142c0612131553o4351c1d1v8169dba4a292eb82@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0612131558270.7840@hal.rescomp.berkeley.edu>
References: <2e0306af0612130942t2867e5bdob9891d5833d537dd@mail.gmail.com> 
 <126142c0612131106t69a6e4d6q29f7e8e1d0676ec2@mail.gmail.com> 
 <Pine.LNX.4.58.0612131534090.7840@hal.rescomp.berkeley.edu>
 <126142c0612131553o4351c1d1v8169dba4a292eb82@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > :   For 10 million records We recommend an strong database such as Oracle.
: >
: > eh ... who is "We" in that statement?
:   We are independent consultants working for many years with Oracle databases ;)

And that's a perfectly acceptible answer, i just don't want any first time
Lucene users to read your statement as "we the lucene community recommend
you use a database"

: perfectly, but IMO the problem here is different, I think that the XML
: showed on the example implied that searching a document by the xpath
: /DOCUMENT/[DREREFERENCE=61926433] is like searching in a table by
: primary key, not looking at the inverted index.

that's a matter of perception: you looked at the example XML and felt that
implied searching by xpath in a way that could easily be done using simple
select statments ... i looked at the part of hte question that said...

> (1) Each field is searchable and indexable.

...and I assumed hte real problem is being ableto address use cases like
"find all documents where the DRECONTENT contains the words "Action" and
the words "News" near eachother -- using stemming and other Text Analysys
tricks i may wnat to customize on a per field basis) which make me think
Lucene is a better choice then a straight relational database.

:   Yes, you can build an inverted index for 10 million documents
: perfectly, but the XML documents showed look like a simple relational
: data.

again, perception ... nothing in the question asked about doing relational
queries, so i don't think it's wise to immediately suggest a relational
database as the "recommended" solution.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 00:21:05 2006
Return-Path: <java-user-return-25012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89415 invoked from network); 14 Dec 2006 00:21:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 00:21:04 -0000
Received: (qmail 62736 invoked by uid 500); 14 Dec 2006 00:21:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62166 invoked by uid 500); 14 Dec 2006 00:21:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62155 invoked by uid 99); 14 Dec 2006 00:21:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 16:21:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of marcelo.ochoa@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 16:20:55 -0800
Received: by ug-out-1314.google.com with SMTP id k40so358371ugc
        for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 16:20:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=q8qHwv9pC3W4ka33F3Ft4qyUnkJYZ6O9aubWN/7ZB/5kHfsgCkPsp1RA4V5RB1IkxXm+b3XbHnX+hS1xJAIdX4XCA049U6mvONlfGsn6X4BDnMz46mLuIqQmiIzfw8V9Knag0IIPQb9QUQtC1BAiYjgFk8HazkfOsiEwopYay6I=
Received: by 10.78.158.11 with SMTP id g11mr300596hue.1166055633022;
        Wed, 13 Dec 2006 16:20:33 -0800 (PST)
Received: by 10.78.145.11 with HTTP; Wed, 13 Dec 2006 16:20:32 -0800 (PST)
Message-ID: <126142c0612131620o37e22ef4o726726583d7337c0@mail.gmail.com>
Date: Wed, 13 Dec 2006 21:20:33 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene functionality
In-Reply-To: <Pine.LNX.4.58.0612131558270.7840@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2e0306af0612130942t2867e5bdob9891d5833d537dd@mail.gmail.com>
	 <126142c0612131106t69a6e4d6q29f7e8e1d0676ec2@mail.gmail.com>
	 <Pine.LNX.4.58.0612131534090.7840@hal.rescomp.berkeley.edu>
	 <126142c0612131553o4351c1d1v8169dba4a292eb82@mail.gmail.com>
	 <Pine.LNX.4.58.0612131558270.7840@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Chris:
<snip>
>
> > (1) Each field is searchable and indexable.
>
> ...and I assumed hte real problem is being ableto address use cases like
> "find all documents where the DRECONTENT contains the words "Action" and
> the words "News" near eachother -- using stemming and other Text Analysys
> tricks i may wnat to customize on a per field basis) which make me think
> Lucene is a better choice then a straight relational database.
  Yep, may be Mark can clarify the expected use cases for searching.
  But, the mixed mode can coexists.
  I am working on the Oracle/Lucene integration, so you can perfectly
store the content of the XML document in a relational table leaving
the DRECONTENT in a CLOB column and this column indexed with Lucene.
  Querying for /DOCUMENT/[DREREFERENCE=61926433] can be transformed by
the optimizer into a "select ... for ... where DREREFERENCE=61926433"
(using a btree implementation)
  and "find all documents where the DRECONTENT contains the words
"Action" " into
  select ... for where lcontains(DRECONTENT,'Action')>0
  The two world can coexists very well :)
>
> :   Yes, you can build an inverted index for 10 million documents
> : perfectly, but the XML documents showed look like a simple relational
> : data.
>
> again, perception ... nothing in the question asked about doing relational
> queries, so i don't think it's wise to immediately suggest a relational
> database as the "recommended" solution.
  Best regards, Marcelo.
-- 
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 00:24:24 2006
Return-Path: <java-user-return-25013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90301 invoked from network); 14 Dec 2006 00:24:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 00:24:23 -0000
Received: (qmail 69526 invoked by uid 500); 14 Dec 2006 00:24:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69255 invoked by uid 500); 14 Dec 2006 00:24:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69244 invoked by uid 99); 14 Dec 2006 00:24:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 16:24:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.11.83.254] (HELO mail1.ardec.com.au) (203.11.83.254)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 16:24:14 -0800
Received: from bison.adl.ardec.com.au (bison.adl.ardec.com.au [192.168.1.13])
	by mail1.ardec.com.au (8.13.3/8.13.3) with ESMTP id kBE0NqQm011038
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 10:53:52 +1030 (CST)
Received: (qmail 17142 invoked from network); 14 Dec 2006 00:23:52 -0000
Received: from unknown (HELO [192.168.1.186]) ([192.168.1.186])
          (envelope-sender <azza@lisasoft.com>)
          by bison.adl.ardec.com.au (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 14 Dec 2006 00:23:52 -0000
Message-ID: <458099D3.6020108@lisasoft.com>
Date: Thu, 14 Dec 2006 10:54:51 +1030
From: Andrew Hughes <azza@lisasoft.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Advice on 3NF Data Structures and Lucene Please
References: <457FA4C4.6030906@lisasoft.com> <359a92830612130523u76cc5e2fsabcbe6b795de254@mail.gmail.com>
In-Reply-To: <359a92830612130523u76cc5e2fsabcbe6b795de254@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV 0.88.6/2321/Wed Dec 13 23:46:09 2006 on mizaru.adl.ardec.com.au
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erick,

I'll give a representation of the data structure that I am trying to 
index (in xml)..... This represents a relational data structure. Because 
all Place (ie Kazakhstan) Person's are grouped together eta....

    <Example>
        <Place name="United States of America">
           <PlaceAlias>USA</PlaceAlias>
           <PlaceAlias>U.S.A</PlaceAlias>
           <PlaceAlias>US</PlaceAlias>
           <Person>
              <Name>George W Bush</Name>
              <Occupation>Demolition</Occupation>
              <Hobby alias="Funny">Comedy</Hobby>
              <Hobby alias="Pretend">Mime</Hobby>
              <Hobby>Ant Farms</Hobby>
           </Person>
           <Person>
              <Name>Bill Clinton</Name>
              <Occupation>Retired</Occupation>
              <Hobby>Smoking Cigars</Hobby>
           </Person>
           <!-- many more person's here.... -->
           <!-- many more person's here.... -->
           <!-- many more person's here.... -->
        </Place>
        <Place name="kazakhstan">
           <PlaceAlias>kazak</PlaceAlias>
           <PlaceAlias>kazzi</PlaceAlias>
           <PlaceAlias>kzh</PlaceAlias>
           <Person>
              <Name>Borat</Name>
              <Occupation>TV Reporter</Occupation>
              <Hobby alias="Boogie">Dancing</Hobby>
              <Hobby alias="Soccer">Football</Hobby>
              <Hobby>Swimming</Hobby>
              <!-- many more hobbie's in here.. (or even none) with or
    without aliases -->
              <!-- many more hobbie's in here.. (or even none) with or
    without aliases -->
              <!-- many more hobbie's in here.. (or even none) with or
    without aliases -->
           </Person>
           <!-- many more person's here.... -->
           <!-- many more person's here.... -->
           <!-- many more person's here.... -->
        </Place>
        <!-- many more place's, person's and hobbie's here.... -->
        <!-- many more place's, person's and hobbie's here.... -->
        <!-- many more place's, person's and hobbie's here.... -->
    </Example>


I am expecting someone to say that this Relational/3NF strucutre should 
simply be placed into a flat index... the concept of an index replaces 
the 1-Many relational approach by grouping/indexing all "documents" with 
the same "Place" together... or at least effectively making the search 
time so fast and hence achieving a usable solution....

    Place     Person_Name       Person_Occupation  Hobby
    ===========================================================================
    USA          George W Bush  Demolition         Comedy
    USA          Bill  Clinton  Retired            Smoking Cigars
    Kazakhstan   Borat          TV Presenter       Dancing



I do however ask... how would one group duplicate fields.... such as the 
"Hobbie's" below..... should these simply be a single field in the 
lucene index??? that are tokenized? Or should everything be 
*duplicated*???? Like this.... (plus I have ignored Alias' for simplicity).


    Place     Person_Name       Person_Occupation  Hobby
    ===========================================================================
    USA          George W Bush  Demolition         Comedy
    USA          George W Bush  Demolition         Mime
    USA          George W Bush  Demolition         Ant Farms
    USA          Bill  Clinton  Retired            Smoking Cigars
    Kazakhstan   Borat          TV Presenter       Dancing
    Kazakhstan   Borat          TV Presenter       Football
    Kazakhstan   Borat          TV Presenter       Swimming

    OR

    Place     Person_Name       Person_Occupation  Hobby
    ===========================================================================
    USA          George W Bush  Demolition         Comedy + Mime + Ant Farms
    USA          Bill  Clinton  Retired            Smoking Cigars
    Kazakhstan   Borat          TV Presenter       Dancing + Football +
    Swimming


I guess my final question, which is really what I am trying to achieve 
is this.... I want to search for all "Person's" in the "~United States 
of America", who's name is like "~Klinton" and enjoy's "~Smoking" for a 
Hobby. An important part of this.... is that "I Wont know which token is 
to be matched to which field", like when you go to an internet search 
engine..... so I do I tokenize and put all fields from the XML into a 
single Field in the index and query that with tokens??????


I realize that I'm posting LOTS of complicated questions.... and I am 
probably just looking at the equivalent of a HTML indexing/search 
implementation.



Many Thanks....

--AH




Erick Erickson wrote:
> Tell us more about the problem you are trying to solve. Lucene is 
> designed
> for large text searching, not relations. Trying to "index a data 
> structure"
> seems like mis-application of Lucene. Without some idea of what you are
> trying to accomplish, any advice you get is irrelevant at best...
>
>
> Best
> Erick
>
> On 12/13/06, Andrew Hughes <azza@lisasoft.com> wrote:
>>
>> Hey All,
>>
>> I am very interested in indexing a 3NF Data Structure. Is there any
>> advice that someone can provide with this? From what I have seen Lucene
>> is typically a flat "First Normal Form" (Flat) data structure.... The
>> only way I can see to combine the relational links between multiple
>> indexes is to compare documents.
>>
>>
>> Any Help is Appreciated.
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 01:21:46 2006
Return-Path: <java-user-return-25014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5373 invoked from network); 14 Dec 2006 01:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 01:21:45 -0000
Received: (qmail 82636 invoked by uid 500); 14 Dec 2006 01:21:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82606 invoked by uid 500); 14 Dec 2006 01:21:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82589 invoked by uid 99); 14 Dec 2006 01:21:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 17:21:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 17:21:32 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GufHb-0000GD-Mu
	for java-user@lucene.apache.org; Wed, 13 Dec 2006 17:21:11 -0800
Message-ID: <7865192.post@talk.nabble.com>
Date: Wed, 13 Dec 2006 17:21:11 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Index Excel File
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   Is anyone index an excel file before? I took a look at the API classes
provided by POI HSSF, however, I did not find any method to extract the text
from excel file and index them.

   Please assist and leet me know where I can find the example to refer to.
Thanks


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Index-Excel-File-tf2817920.html#a7865192
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 01:39:20 2006
Return-Path: <java-user-return-25015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10823 invoked from network); 14 Dec 2006 01:39:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 01:39:19 -0000
Received: (qmail 20254 invoked by uid 500); 14 Dec 2006 01:38:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20077 invoked by uid 500); 14 Dec 2006 01:37:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19871 invoked by uid 99); 14 Dec 2006 01:37:56 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Dec 2006 17:37:51 -0800
Received: (qmail 13453 invoked by uid 0); 14 Dec 2006 01:35:54 -0000
Received: from 80.47.198.27 by www038.gmx.net with HTTP;
 Thu, 14 Dec 2006 02:35:54 +0100 (CET)
Content-Type: text/plain; charset="iso-8859-1"
Date: Thu, 14 Dec 2006 02:35:55 +0100
From: "Karl Koch" <TheRanger@gmx.net>
In-Reply-To: <200612132100.45388.paul.elschot@xs4all.nl>
Message-ID: <20061214013555.134000@gmx.net>
MIME-Version: 1.0
References: <20061212103214.218000@gmx.net>
 <c68e39170612130731x65a9883do97648bca74c42c63@mail.gmail.com>
 <20061213154216.320030@gmx.net> <200612132100.45388.paul.elschot@xs4all.nl>
Subject: Re: Lucene scoring: coord_q_d factor
To: java-user@lucene.apache.org
X-Authenticated: #21808356
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Paul,

thank you for providing the link to that paper. I read it again, and you are right. I discovered the following text part:

"In normal term co-ordination matches, if a request and document have a frequent term in common, this counts for as much as a non-frequent one; so if a request and document share three common terms, the document is retrieved at the same level as another one sharing three rare terms with the request. But it seems we should treat matches on non-frequent terms as more valuable than ones on frequent terms, without disregarding the latter altogether. The natural solution is to correlate a term's matching value with its collection frequency."

If I do not misunderstand that extract, I would say it suggests the  combination of coordination level matching with IDF. I am interested in your view and those who read this? 

Are there any other papers that regard the combination of coordination level matching and TFxIDF as advantageous?  

Cheers,
Karl

-------- Original-Nachricht --------
Datum: Wed, 13 Dec 2006 21:00:45 +0100
Von: Paul Elschot <paul.elschot@xs4all.nl>
An: java-user@lucene.apache.org
Betreff: Re: Lucene scoring: coord_q_d factor

> On Wednesday 13 December 2006 16:42, Karl Koch wrote:
> > Do you know about any papers that discuss this?
> 
> Coordination is called co-ordination In the original idf paper by
> K. Spärck Jones, A statistical interpretation of term specificity
> and its application in retrieval.,  Journal of Documentation 28,
> 11-21, 1972
> http://www.soi.city.ac.uk/~ser/idfpapers/ksj_orig.pdf
> 
> The paper is the first one on the idf page:
> http://www.soi.city.ac.uk/~ser/idf.html
> 
> Regards,
> Paul Elschot
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 01:43:44 2006
Return-Path: <java-user-return-25016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12755 invoked from network); 14 Dec 2006 01:43:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 01:43:42 -0000
Received: (qmail 38262 invoked by uid 500); 14 Dec 2006 01:43:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38217 invoked by uid 500); 14 Dec 2006 01:43:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38124 invoked by uid 99); 14 Dec 2006 01:43:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 17:43:32 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=RCVD_IN_SORBS_WEB,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [61.246.202.82] (HELO usindia.com) (61.246.202.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 17:43:22 -0800
Received: from WorldClient by usindia.com
	(MDaemon.PRO.v8.0.3.R)
	with ESMTP id md50000345508.msg
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 07:18:31 +0530
Received: from [211.121.166.90] via WorldClient with HTTP;
	Thu, 14 Dec 2006 07:18:29 +0530
Date: Thu, 14 Dec 2006 07:18:29 +0530
From: "rajan" <rajan@usindia.com>
To: java-user@lucene.apache.org
Subject: Re: Index Excel File
MIME-Version: 1.0
Content-Type: text/plain
Message-ID: <WorldClient-F200612140718.AA18290007@usindia.com>
X-Mailer: WorldClient 8.0.3
In-Reply-To: <7865192.post@talk.nabble.com>
References: <7865192.post@talk.nabble.com>
X-Authenticated-Sender: rajan@usindia.com
X-Spam-Processed: galileo, Thu, 14 Dec 2006 07:18:31 +0530
	(not processed: message from valid local sender)
X-Return-Path: rajan@usindia.com
X-MDaemon-Deliver-To: java-user@lucene.apache.org
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Please try to use jexcelapi.
I done it successfully. 
While using POI it gave me exception while image is present in excel file.

Regards
Rajan.

-----Original Message-----
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Date: Wed, 13 Dec 2006 17:21:11 -0800 (PST)
Subject: Index Excel File

> 
> Hi,
> 
>    Is anyone index an excel file before? I took a look at the API
> classes
> provided by POI HSSF, however, I did not find any method to extract the
> text
> from excel file and index them.
> 
>    Please assist and leet me know where I can find the example to refer
> to.
> Thanks
> 
> 
> regards,
> Wooi Meng
> -- 
> View this message in context:
> http://www.nabble.com/Index-Excel-File-tf2817920.html#a7865192
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 01:47:11 2006
Return-Path: <java-user-return-25017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13469 invoked from network); 14 Dec 2006 01:47:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 01:47:10 -0000
Received: (qmail 44424 invoked by uid 500); 14 Dec 2006 01:47:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43449 invoked by uid 500); 14 Dec 2006 01:47:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43438 invoked by uid 99); 14 Dec 2006 01:47:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 17:47:10 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Dec 2006 17:46:59 -0800
Received: (qmail 89061 invoked by uid 60001); 14 Dec 2006 01:46:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=fDBqXYG/Uf5LdluMxmOwJX291cID5ZjVjD08JCFDqu2+KxgJzAuxHYJJcLYQd+wrUgPhWzwLtTptexfut4nCcAJHU4sMKwQPlmFg2nO6H74VeCuzN7SZ9NY1KhAi2OzXhEKk0qEde1sIZ8NUEi6E38Io/+MC9omvsDDj5+AF5Tg=  ;
Message-ID: <20061214014638.89059.qmail@web50304.mail.yahoo.com>
Received: from [74.65.202.166] by web50304.mail.yahoo.com via HTTP; Wed, 13 Dec 2006 17:46:38 PST
Date: Wed, 13 Dec 2006 17:46:38 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene scoring: coord_q_d factor
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0ABut isn't "coord" + TFIDF pretty intuitive?  Independently, they a=
re both useful and contribute to the final score for the match.=0A=0AOtis=
=0A=0A----- Original Message ----=0AFrom: Karl Koch <TheRanger@gmx.net>=0AT=
o: java-user@lucene.apache.org=0ASent: Wednesday, December 13, 2006 8:35:55=
 PM=0ASubject: Re: Lucene scoring: coord_q_d factor=0A=0AHello Paul,=0A=0At=
hank you for providing the link to that paper. I read it again, and you are=
 right. I discovered the following text part:=0A=0A"In normal term co-ordin=
ation matches, if a request and document have a frequent term in common, th=
is counts for as much as a non-frequent one; so if a request and document s=
hare three common terms, the document is retrieved at the same level as ano=
ther one sharing three rare terms with the request. But it seems we should =
treat matches on non-frequent terms as more valuable than ones on frequent =
terms, without disregarding the latter altogether. The natural solution is =
to correlate a term's matching value with its collection frequency."=0A=0AI=
f I do not misunderstand that extract, I would say it suggests the  combina=
tion of coordination level matching with IDF. I am interested in your view =
and those who read this? =0A=0AAre there any other papers that regard the c=
ombination of coordination level matching and TFxIDF as advantageous?  =0A=
=0ACheers,=0AKarl=0A=0A-------- Original-Nachricht --------=0ADatum: Wed, 1=
3 Dec 2006 21:00:45 +0100=0AVon: Paul Elschot <paul.elschot@xs4all.nl>=0AAn=
: java-user@lucene.apache.org=0ABetreff: Re: Lucene scoring: coord_q_d fact=
or=0A=0A> On Wednesday 13 December 2006 16:42, Karl Koch wrote:=0A> > Do yo=
u know about any papers that discuss this?=0A> =0A> Coordination is called =
co-ordination In the original idf paper by=0A> K. Sp=E4rck Jones, A statist=
ical interpretation of term specificity=0A> and its application in retrieva=
l.,  Journal of Documentation 28,=0A> 11-21, 1972=0A> http://www.soi.city.a=
c.uk/~ser/idfpapers/ksj_orig.pdf=0A> =0A> The paper is the first one on the=
 idf page:=0A> http://www.soi.city.ac.uk/~ser/idf.html=0A> =0A> Regards,=0A=
> Paul Elschot=0A> =0A> ---------------------------------------------------=
------------------=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene=
.apache.org=0A> For additional commands, e-mail: java-user-help@lucene.apac=
he.org=0A=0A-- =0ADer GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten z=
u sparen! =0AIdeal f=FCr Modem und ISDN: http://www.gmx.net/de/go/smartsurf=
er=0A=0A-------------------------------------------------------------------=
--=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor =
additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 02:07:05 2006
Return-Path: <java-user-return-25018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17803 invoked from network); 14 Dec 2006 02:07:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 02:07:02 -0000
Received: (qmail 77136 invoked by uid 500); 14 Dec 2006 02:06:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77098 invoked by uid 500); 14 Dec 2006 02:06:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77087 invoked by uid 99); 14 Dec 2006 02:06:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 18:06:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 18:06:10 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GufyT-00066a-DZ
	for java-user@lucene.apache.org; Wed, 13 Dec 2006 18:05:29 -0800
Message-ID: <7865632.post@talk.nabble.com>
Date: Wed, 13 Dec 2006 18:05:29 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index Excel File
In-Reply-To: <WorldClient-F200612140718.AA18290007@usindia.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7865192.post@talk.nabble.com> <WorldClient-F200612140718.AA18290007@usindia.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   Can you show me the example on how to extract the text from excel file
and index them?

   Thanks

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Index-Excel-File-tf2817920.html#a7865632
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 02:21:27 2006
Return-Path: <java-user-return-25019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28815 invoked from network); 14 Dec 2006 02:21:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 02:21:26 -0000
Received: (qmail 3542 invoked by uid 500); 14 Dec 2006 02:21:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3505 invoked by uid 500); 14 Dec 2006 02:21:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3493 invoked by uid 99); 14 Dec 2006 02:21:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 18:21:26 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=RCVD_IN_SORBS_WEB,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [61.246.202.82] (HELO usindia.com) (61.246.202.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 18:21:16 -0800
Received: from WorldClient by usindia.com
	(MDaemon.PRO.v8.0.3.R)
	with ESMTP id md50000345536.msg
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 07:56:24 +0530
Received: from [211.121.166.90] via WorldClient with HTTP;
	Thu, 14 Dec 2006 07:56:19 +0530
Date: Thu, 14 Dec 2006 07:56:19 +0530
From: "rajan" <rajan@usindia.com>
To: java-user@lucene.apache.org
Subject: Re: Index Excel File
MIME-Version: 1.0
Content-Type: text/plain
Message-ID: <WorldClient-F200612140756.AA56190008@usindia.com>
X-Mailer: WorldClient 8.0.3
In-Reply-To: <7865632.post@talk.nabble.com>
References: <7865192.post@talk.nabble.com> <WorldClient-F200612140718.AA18290007@usindia.com> <7865632.post@talk.nabble.com>
X-Authenticated-Sender: rajan@usindia.com
X-Spam-Processed: galileo, Thu, 14 Dec 2006 07:56:24 +0530
	(not processed: message from valid local sender)
X-Return-Path: rajan@usindia.com
X-MDaemon-Deliver-To: java-user@lucene.apache.org
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

i used jexcepapi. Within that there is class called CSV.java in demo 
package.
By using that i extracted text from excel, and added that text into the 
index.

I hope this will help you.
Regards
Rajan.


-----Original Message-----
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Date: Wed, 13 Dec 2006 18:05:29 -0800 (PST)
Subject: Re: Index Excel File

> 
> Hi,
> 
>    Can you show me the example on how to extract the text from excel
> file
> and index them?
> 
>    Thanks
> 
> regards,
> Wooi Meng
> -- 
> View this message in context:
> http://www.nabble.com/Index-Excel-File-tf2817920.html#a7865632
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 03:11:02 2006
Return-Path: <java-user-return-25020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38333 invoked from network); 14 Dec 2006 03:11:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 03:11:01 -0000
Received: (qmail 63970 invoked by uid 500); 14 Dec 2006 03:11:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63749 invoked by uid 500); 14 Dec 2006 03:11:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63738 invoked by uid 99); 14 Dec 2006 03:11:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 19:11:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 19:10:50 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GugzO-0006K2-8u
	for java-user@lucene.apache.org; Wed, 13 Dec 2006 19:10:30 -0800
Message-ID: <7866165.post@talk.nabble.com>
Date: Wed, 13 Dec 2006 19:10:30 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index Excel File
In-Reply-To: <WorldClient-F200612140756.AA56190008@usindia.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7865192.post@talk.nabble.com> <WorldClient-F200612140718.AA18290007@usindia.com> <7865632.post@talk.nabble.com> <WorldClient-F200612140756.AA56190008@usindia.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   I did use jexcelapi to extract the contents out of excel file, however, I
couldn't get the content when I sysout. Below are the codes that I wrote,
perhaps you can point out where I have done wrong. Thanks.


   Workbook excelDoc = Workbook.getWorkbook(new FileInputStream(file));
		String content = "";
		
		for(int i = 0; i < excelDoc.getNumberOfSheets(); i++)
		{
			Sheet sheet = excelDoc.getSheet(i);
			
			Cell[] row = null;
			
			for(int j = 0; j < sheet.getRows(); j++)
			{
				row = sheet.getRow(i);
				
				System.err.println("row is ::: " +row.length);
				
				if(row.length > 0)
				{
					content = row[i].getContents();
					System.err.println("content inside loop is ::: " +content);
				}
			}
		}
		
		System.err.println("content is ::: " +content);
		
		doc.add(new Field(DsConstant.idxFileContent, content, Field.Store.YES,
Field.Index.TOKENIZED));
		doc.add(new Field(DsConstant.idxFileName, file.getName(), Field.Store.YES,
Field.Index.UN_TOKENIZED));
		doc.add(new Field(DsConstant.idxPath, file.getPath(), Field.Store.YES,
Field.Index.UN_TOKENIZED));
		
		excelDoc.close();

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Index-Excel-File-tf2817920.html#a7866165
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 04:32:49 2006
Return-Path: <java-user-return-25021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53040 invoked from network); 14 Dec 2006 04:32:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 04:32:47 -0000
Received: (qmail 59662 invoked by uid 500); 14 Dec 2006 04:32:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59618 invoked by uid 500); 14 Dec 2006 04:32:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59607 invoked by uid 99); 14 Dec 2006 04:32:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 20:32:44 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=RCVD_IN_SORBS_WEB,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [61.246.202.82] (HELO usindia.com) (61.246.202.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 20:32:24 -0800
Received: from WorldClient by usindia.com
	(MDaemon.PRO.v8.0.3.R)
	with ESMTP id md50000345630.msg
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 10:06:42 +0530
Received: from [211.121.166.90] via WorldClient with HTTP;
	Thu, 14 Dec 2006 10:06:38 +0530
Date: Thu, 14 Dec 2006 10:06:38 +0530
From: "rajan" <rajan@usindia.com>
To: java-user@lucene.apache.org
Subject: Re: Index Excel File
MIME-Version: 1.0
Content-Type: text/plain
Message-ID: <WorldClient-F200612141006.AA06380009@usindia.com>
X-Mailer: WorldClient 8.0.3
In-Reply-To: <7866165.post@talk.nabble.com>
References: <7865192.post@talk.nabble.com> <WorldClient-F200612140718.AA18290007@usindia.com> <7865632.post@talk.nabble.com> <WorldClient-F200612140756.AA56190008@usindia.com> <7866165.post@talk.nabble.com>
X-Authenticated-Sender: rajan@usindia.com
X-Spam-Processed: galileo, Thu, 14 Dec 2006 10:06:42 +0530
	(not processed: message from valid local sender)
X-Return-Path: rajan@usindia.com
X-MDaemon-Deliver-To: java-user@lucene.apache.org
X-Virus-Checked: Checked by ClamAV on apache.org

I think there is problem with following line...

row = sheet.getRow(i); -> row = sheet.getRow(j);

Also following code with give you the contents:
===================================================
   Workbook excelDoc = Workbook.getWorkbook(new FileInputStream(
     file));
   String content = "";
   for (int i = 0; i < excelDoc.getNumberOfSheets(); i++) {
    Sheet sheet = excelDoc.getSheet(i);
    Cell[] row = null;
    for (int j = 0; j < sheet.getRows(); j++) {
     row = sheet.getRow(j);
     for (int rows = 0; rows < row.length; rows++) {
      content = row[rows].getContents();
      System.err.println("content inside loop is ::: "
        + content);
     }
    }
   }
===========================================
Regards
Rajan

-----Original Message-----
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Date: Wed, 13 Dec 2006 19:10:30 -0800 (PST)
Subject: Re: Index Excel File

> 
> Hi,
> 
>    I did use jexcelapi to extract the contents out of excel file,
> however, I
> couldn't get the content when I sysout. Below are the codes that I
> wrote,
> perhaps you can point out where I have done wrong. Thanks.
> 
> 
>    Workbook excelDoc = Workbook.getWorkbook(new FileInputStream(file));
>       String content = "";
>       
>       for(int i = 0; i < excelDoc.getNumberOfSheets(); i++)
>       {
>          Sheet sheet = excelDoc.getSheet(i);
>          
>          Cell[] row = null;
>          
>          for(int j = 0; j < sheet.getRows(); j++)
>          {
>             row = sheet.getRow(i);
>             
>             System.err.println("row is ::: " +row.length);
>             
>             if(row.length > 0)
>             {
>                content = row[i].getContents();
>                System.err.println("content inside loop is ::: " +content);
>             }
>          }
>       }
>       
>       System.err.println("content is ::: " +content);
>       
>       doc.add(new Field(DsConstant.idxFileContent, content,
> Field.Store.YES,
> Field.Index.TOKENIZED));
>       doc.add(new Field(DsConstant.idxFileName, file.getName(),
> Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>       doc.add(new Field(DsConstant.idxPath, file.getPath(),
> Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>       
>       excelDoc.close();
> 
> regards,
> Wooi Meng
> -- 
> View this message in context:
> http://www.nabble.com/Index-Excel-File-tf2817920.html#a7866165
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 06:09:26 2006
Return-Path: <java-user-return-25022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72621 invoked from network); 14 Dec 2006 06:09:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 06:09:25 -0000
Received: (qmail 26415 invoked by uid 500); 14 Dec 2006 06:09:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26297 invoked by uid 500); 14 Dec 2006 06:09:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26233 invoked by uid 99); 14 Dec 2006 06:09:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 22:09:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 22:09:14 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1280091nfc
        for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 22:08:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=hOSAD3CCDIvOxwuIWsT1NzX5ZKF2T0yfzDrHRr+jVuBM9aBBhSJBDvZ1z4v0zKQusMzNb7d7fJqdD/LFuhFf6NmDHGLNlyoUgpuHZutj90C5HO3IHjjKBpgJZfFVCSG3ykFANPXHqH/NCsf8mssZ0tgITDTaTJkXJxL0rjTLr40=
Received: by 10.82.153.5 with SMTP id a5mr189965bue.1166076532229;
        Wed, 13 Dec 2006 22:08:52 -0800 (PST)
Received: by 10.82.150.8 with HTTP; Wed, 13 Dec 2006 22:08:51 -0800 (PST)
Message-ID: <6e3ae6310612132208ud8921cbh629271a62299e8de@mail.gmail.com>
Date: Wed, 13 Dec 2006 22:08:51 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Advice on 3NF Data Structures and Lucene Please
In-Reply-To: <458099D3.6020108@lisasoft.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <457FA4C4.6030906@lisasoft.com>
	 <359a92830612130523u76cc5e2fsabcbe6b795de254@mail.gmail.com>
	 <458099D3.6020108@lisasoft.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I think the last structure is good. The index should be structured
according to how you want to search it. If your needs changed, you
should simply have another index. One index for all is not really
good. Index is more of trading space for time, so duplication is not
really a concern.

The first structure omits some hobby data, and the second structure
will have duplicated people that needs to be pruned.

-- 
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com


On 12/13/06, Andrew Hughes <azza@lisasoft.com> wrote:
> Thanks Erick,
>
> I'll give a representation of the data structure that I am trying to
> index (in xml)..... This represents a relational data structure. Because
> all Place (ie Kazakhstan) Person's are grouped together eta....
>
>     <Example>
>         <Place name="United States of America">
>            <PlaceAlias>USA</PlaceAlias>
>            <PlaceAlias>U.S.A</PlaceAlias>
>            <PlaceAlias>US</PlaceAlias>
>            <Person>
>               <Name>George W Bush</Name>
>               <Occupation>Demolition</Occupation>
>               <Hobby alias="Funny">Comedy</Hobby>
>               <Hobby alias="Pretend">Mime</Hobby>
>               <Hobby>Ant Farms</Hobby>
>            </Person>
>            <Person>
>               <Name>Bill Clinton</Name>
>               <Occupation>Retired</Occupation>
>               <Hobby>Smoking Cigars</Hobby>
>            </Person>
>            <!-- many more person's here.... -->
>            <!-- many more person's here.... -->
>            <!-- many more person's here.... -->
>         </Place>
>         <Place name="kazakhstan">
>            <PlaceAlias>kazak</PlaceAlias>
>            <PlaceAlias>kazzi</PlaceAlias>
>            <PlaceAlias>kzh</PlaceAlias>
>            <Person>
>               <Name>Borat</Name>
>               <Occupation>TV Reporter</Occupation>
>               <Hobby alias="Boogie">Dancing</Hobby>
>               <Hobby alias="Soccer">Football</Hobby>
>               <Hobby>Swimming</Hobby>
>               <!-- many more hobbie's in here.. (or even none) with or
>     without aliases -->
>               <!-- many more hobbie's in here.. (or even none) with or
>     without aliases -->
>               <!-- many more hobbie's in here.. (or even none) with or
>     without aliases -->
>            </Person>
>            <!-- many more person's here.... -->
>            <!-- many more person's here.... -->
>            <!-- many more person's here.... -->
>         </Place>
>         <!-- many more place's, person's and hobbie's here.... -->
>         <!-- many more place's, person's and hobbie's here.... -->
>         <!-- many more place's, person's and hobbie's here.... -->
>     </Example>
>
>
> I am expecting someone to say that this Relational/3NF strucutre should
> simply be placed into a flat index... the concept of an index replaces
> the 1-Many relational approach by grouping/indexing all "documents" with
> the same "Place" together... or at least effectively making the search
> time so fast and hence achieving a usable solution....
>
>     Place     Person_Name       Person_Occupation  Hobby
>     ===========================================================================
>     USA          George W Bush  Demolition         Comedy
>     USA          Bill  Clinton  Retired            Smoking Cigars
>     Kazakhstan   Borat          TV Presenter       Dancing
>
>
>
> I do however ask... how would one group duplicate fields.... such as the
> "Hobbie's" below..... should these simply be a single field in the
> lucene index??? that are tokenized? Or should everything be
> *duplicated*???? Like this.... (plus I have ignored Alias' for simplicity).
>
>
>     Place     Person_Name       Person_Occupation  Hobby
>     ===========================================================================
>     USA          George W Bush  Demolition         Comedy
>     USA          George W Bush  Demolition         Mime
>     USA          George W Bush  Demolition         Ant Farms
>     USA          Bill  Clinton  Retired            Smoking Cigars
>     Kazakhstan   Borat          TV Presenter       Dancing
>     Kazakhstan   Borat          TV Presenter       Football
>     Kazakhstan   Borat          TV Presenter       Swimming
>
>     OR
>
>     Place     Person_Name       Person_Occupation  Hobby
>     ===========================================================================
>     USA          George W Bush  Demolition         Comedy + Mime + Ant Farms
>     USA          Bill  Clinton  Retired            Smoking Cigars
>     Kazakhstan   Borat          TV Presenter       Dancing + Football +
>     Swimming
>
>
> I guess my final question, which is really what I am trying to achieve
> is this.... I want to search for all "Person's" in the "~United States
> of America", who's name is like "~Klinton" and enjoy's "~Smoking" for a
> Hobby. An important part of this.... is that "I Wont know which token is
> to be matched to which field", like when you go to an internet search
> engine..... so I do I tokenize and put all fields from the XML into a
> single Field in the index and query that with tokens??????
>
>
> I realize that I'm posting LOTS of complicated questions.... and I am
> probably just looking at the equivalent of a HTML indexing/search
> implementation.
>
>
>
> Many Thanks....
>
> --AH
>
>
>
>
> Erick Erickson wrote:
> > Tell us more about the problem you are trying to solve. Lucene is
> > designed
> > for large text searching, not relations. Trying to "index a data
> > structure"
> > seems like mis-application of Lucene. Without some idea of what you are
> > trying to accomplish, any advice you get is irrelevant at best...
> >
> >
> > Best
> > Erick
> >
> > On 12/13/06, Andrew Hughes <azza@lisasoft.com> wrote:
> >>
> >> Hey All,
> >>
> >> I am very interested in indexing a 3NF Data Structure. Is there any
> >> advice that someone can provide with this? From what I have seen Lucene
> >> is typically a flat "First Normal Form" (Flat) data structure.... The
> >> only way I can see to combine the relational links between multiple
> >> indexes is to compare documents.
> >>
> >>
> >> Any Help is Appreciated.
> >>
> >>
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 06:43:49 2006
Return-Path: <java-user-return-25023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78911 invoked from network); 14 Dec 2006 06:43:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 06:43:48 -0000
Received: (qmail 63695 invoked by uid 500); 14 Dec 2006 06:43:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63662 invoked by uid 500); 14 Dec 2006 06:43:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63651 invoked by uid 99); 14 Dec 2006 06:43:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 22:43:49 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of neunand@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Dec 2006 22:43:38 -0800
Received: by ug-out-1314.google.com with SMTP id k40so431807ugc
        for <java-user@lucene.apache.org>; Wed, 13 Dec 2006 22:43:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=IPr7qj5Cyf336Qc16gXX7SGBNGoB78nJvd5otIAbDj3+8sIXFw+zGm1czP0+4dbMxKe4q5lhfIo52xZsNzIDAveKgXwKYeBHHwILW6qmJZhYxhoufdXxFx9nq1GFWh+ms0N7k+OTq4VzARkHnmM7pMCX+iVGAuq8QzelRnllVSs=
Received: by 10.78.185.16 with SMTP id i16mr441449huf.1166078596462;
        Wed, 13 Dec 2006 22:43:16 -0800 (PST)
Received: by 10.78.116.19 with HTTP; Wed, 13 Dec 2006 22:43:16 -0800 (PST)
Message-ID: <56a526780612132243t25ada615h41b1373c59ba79b2@mail.gmail.com>
Date: Wed, 13 Dec 2006 22:43:16 -0800
From: "Andreas Neumann" <neunand@gmail.com>
To: java-user@lucene.apache.org
Subject: Announcing: IBM OmniFind Yahoo! Edition
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_131908_19278102.1166078596427"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_131908_19278102.1166078596427
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As you may have already heard, IBM and Yahoo! today released a new
product named IBM OmniFind Yahoo!
Edition<http://omnifind.ibm.yahoo.net/productinfo.php>.
It is a free-of-charge
search engine for web sites and file systems, which builds on Lucene
and other components such as UIMA <http://incubator.apache.org/uima/> and
IBM's LanguageWare<http://www-306.ibm.com/software/globalization/topics/languageware/index.jsp>text
analytics. Myself, I am Andreas Neumann, working for IBM, and one
of the developers of IBM OmniFind Yahoo! Edition.

Having worked on various other search technologies before, I knew that
a search engine, while appearing so simple to end-users, is a highly
complex piece of software. The more was I thrilled by Lucene. Its
flexible architecture and elegant interfaces make it a pleasure to
work with. At the same time it delivers space-efficient, very low
latency indexing and high-performance querying. Not to mention that
it is pure Java, relieving us developers from the otherwise tedious
task of porting our code to a variety of platforms and compilers.
Lucene is one of the few pieces of software that prove that
performance-critical software can indeed be written in Java.

But the best thing about Lucene is its community. When we started
working with Lucene less than a year ago, we were entering unknown
territory. We had some concerns, were looking for a few features,
missing some bug fixes... By now, all of the patches that we've been
wishing for have either been committed, or they are under discussion
now. This community really rocks!

Andreas.

------=_Part_131908_19278102.1166078596427--

From java-user-return-25024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 08:31:31 2006
Return-Path: <java-user-return-25024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13662 invoked from network); 14 Dec 2006 08:31:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 08:31:30 -0000
Received: (qmail 20019 invoked by uid 500); 14 Dec 2006 08:31:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19988 invoked by uid 500); 14 Dec 2006 08:31:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19975 invoked by uid 99); 14 Dec 2006 08:31:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 00:31:30 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lukas.vlcek@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 00:31:19 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1321204nfc
        for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 00:30:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=oDGavO40WuOk7CpjOaeyKj3bLlpujIVo9dbpQlqn6RghNPFs74gbjthO8AlkCEsgax15aeBfvVdpgf/pi2r+2rsbEQERoGwoogdhZDmrs+7y6oLSFWhm38NOnAVxuk0zH4XRPjLnvxf5pSBCpIBECZPUgiqyDvzZywbLlgyaR/Y=
Received: by 10.82.111.8 with SMTP id j8mr205040buc.1166085056621;
        Thu, 14 Dec 2006 00:30:56 -0800 (PST)
Received: by 10.82.147.11 with HTTP; Thu, 14 Dec 2006 00:30:56 -0800 (PST)
Message-ID: <52c3ddca0612140030p15b33940qe22cc525c89e6b3e@mail.gmail.com>
Date: Thu, 14 Dec 2006 09:30:56 +0100
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
Reply-To: java-user@lucene.apache.org
To: java-user@lucene.apache.org
Subject: Re: Indexing clarification , please advice
In-Reply-To: <200612132019.36402@danielnaber.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_166723_9776808.1166085056559"
References: <20061213131011.26300.qmail@web52210.mail.yahoo.com>
	 <200612132019.36402@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_166723_9776808.1166085056559
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

May be you can consider using Compass (http://www.opensymphony.com/compass/)
which could help you in your situation. They claim that some actions (like
updating the index very often) are treated in a very efficient way (due to
caching which is not a native part of Lucene library).

Regards,
Lukas

On 12/13/06, Daniel Naber <lucenelist2005@danielnaber.de> wrote:
>
> On Wednesday 13 December 2006 14:10, abdul aleem wrote:
>
> > a) Indexing large file ( more than 4MB )
> > Do i need to read the entire file as string using
> > java.io and create a Document object ?
>
> You can also use a reader:
>
>
> http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/document/Field.html#Field(java.lang.String,
> java.io.Reader)
>
> Regards
> Daniel
>
> --
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_166723_9776808.1166085056559--

From java-user-return-25025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 08:41:21 2006
Return-Path: <java-user-return-25025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17048 invoked from network); 14 Dec 2006 08:41:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 08:41:19 -0000
Received: (qmail 39129 invoked by uid 500); 14 Dec 2006 08:41:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39092 invoked by uid 500); 14 Dec 2006 08:41:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39081 invoked by uid 99); 14 Dec 2006 08:41:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 00:41:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Dec 2006 00:41:11 -0800
Received: (qmail invoked by alias); 14 Dec 2006 08:40:49 -0000
Received: from p548C54B0.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.84.176]
  by mail.gmx.net (mp010) with SMTP; 14 Dec 2006 09:40:49 +0100
X-Authenticated: #3493418
Message-ID: <45810DFF.7040105@gmx.de>
Date: Thu, 14 Dec 2006 09:40:31 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene scoring: coord_q_d factor
References: <20061212103214.218000@gmx.net> <c68e39170612130731x65a9883do97648bca74c42c63@mail.gmail.com> <20061213154216.320030@gmx.net> <200612132100.45388.paul.elschot@xs4all.nl> <20061214013555.134000@gmx.net>
In-Reply-To: <20061214013555.134000@gmx.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Karl Koch wrote:
> If I do not misunderstand that extract, I would say it suggests the  combination of coordination level matching with IDF. I am interested in your view and those who read this? 

I understand that sentence:
"The natural solution is to correlate a term's matching value with its 
collection frequency."
exactly in that way, to combine coordination level matching with IDF.

The score for a document is the sum of the term weights w(tf, idf) for 
each containing term. So you have already the combination of 
coordination level matching with IDF. Now it is possible that your query 
requests three terms A, B and C. Two of them (A and B) are quite often 
in the collection one (C) is very rare. It could be possible that 
documents are matching just C have a higher score than documents 
containing A and B. To avoid this you can give the coordination a higher 
influence by multiplying the sum of term weights with the coordination 
as additional factor.

Sören

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 09:12:05 2006
Return-Path: <java-user-return-25026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31455 invoked from network); 14 Dec 2006 09:12:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 09:12:04 -0000
Received: (qmail 97325 invoked by uid 500); 14 Dec 2006 09:12:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97284 invoked by uid 500); 14 Dec 2006 09:12:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97272 invoked by uid 99); 14 Dec 2006 09:12:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 01:12:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Dec 2006 01:11:55 -0800
Received: (qmail invoked by alias); 14 Dec 2006 09:11:34 -0000
Received: from p548C54B0.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.84.176]
  by mail.gmx.net (mp029) with SMTP; 14 Dec 2006 10:11:34 +0100
X-Authenticated: #3493418
Message-ID: <4581153D.9060106@gmx.de>
Date: Thu, 14 Dec 2006 10:11:25 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene & LSA
References: <7858202.post@talk.nabble.com>
In-Reply-To: <7858202.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Mario,

I had a similar problem a few weeks ago (thread "How to get Term Weights 
(document term matrix)?", 2006-11-02, 
http://www.gossamer-threads.com/lists/lucene/java-user/41726).

I think there is no simple function creating a document term matrix or 
accessing it. I extracted the matrix from my index and stored the matrix 
in a database.

To create the matrix I iterated the terms and the documents for each term:
TermEnum terms=IndexReader.terms();
while(terms.next()) {
     TermDocs docs=IndexReader.termDocs(terms.term());
     while(docs.next()) {
         //store the term, the document and the weight
         //document frequency: indexreader.docFreq(term)
         //term frequency: termdoc.freq()
     }
}

Sören

mariolone wrote:
> Hi!!!!
> I have a problem:
> i must create a matrix term for document in which every element of the
> matrix it represents the number of occurrences of that term in the document.
> How can I do? 
> Can someone help me?
> Thanks to all....
> 
> P.S. I must applicate LSA to this matrix.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 09:27:19 2006
Return-Path: <java-user-return-25027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40175 invoked from network); 14 Dec 2006 09:27:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 09:27:17 -0000
Received: (qmail 17401 invoked by uid 500); 14 Dec 2006 09:27:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17368 invoked by uid 500); 14 Dec 2006 09:27:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17357 invoked by uid 99); 14 Dec 2006 09:27:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 01:27:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Dec 2006 01:27:08 -0800
Received: (qmail 21073 invoked by uid 0); 14 Dec 2006 09:26:46 -0000
Received: from 130.159.248.222 by www033.gmx.net with HTTP;
 Thu, 14 Dec 2006 10:26:46 +0100 (CET)
Content-Type: text/plain; charset="iso-8859-1"
Date: Thu, 14 Dec 2006 10:26:46 +0100
From: "Karl Koch" <TheRanger@gmx.net>
In-Reply-To: <45810DFF.7040105@gmx.de>
Message-ID: <20061214092646.80200@gmx.net>
MIME-Version: 1.0
References: <20061212103214.218000@gmx.net>
 <c68e39170612130731x65a9883do97648bca74c42c63@mail.gmail.com>
 <20061213154216.320030@gmx.net> <200612132100.45388.paul.elschot@xs4all.nl>
 <20061214013555.134000@gmx.net> <45810DFF.7040105@gmx.de>
Subject: Re: Lucene scoring: coord_q_d factor
To: java-user@lucene.apache.org
X-Authenticated: #21808356
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

I think I understand now. I also have evidence from literature. So I would say that my question is solved. :) 

Thank you, Otis, and everybody else for contributing!
Karl

-------- Original-Nachricht --------
Datum: Thu, 14 Dec 2006 09:40:31 +0100
Von: Soeren Pekrul <soeren.pekrul@gmx.de>
An: java-user@lucene.apache.org
Betreff: Re: Lucene scoring: coord_q_d factor

> Karl Koch wrote:
> > If I do not misunderstand that extract, I would say it suggests the 
> combination of coordination level matching with IDF. I am interested in your
> view and those who read this? 
> 
> I understand that sentence:
> "The natural solution is to correlate a term's matching value with its 
> collection frequency."
> exactly in that way, to combine coordination level matching with IDF.
> 
> The score for a document is the sum of the term weights w(tf, idf) for 
> each containing term. So you have already the combination of 
> coordination level matching with IDF. Now it is possible that your query 
> requests three terms A, B and C. Two of them (A and B) are quite often 
> in the collection one (C) is very rare. It could be possible that 
> documents are matching just C have a higher score than documents 
> containing A and B. To avoid this you can give the coordination a higher 
> influence by multiplying the sum of term weights with the coordination 
> as additional factor.
> 
> Sören
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

-- 
"Ein Herz für Kinder" - Ihre Spende hilft! Aktion: www.deutschlandsegelt.de
Unser Dankeschön: Ihr Name auf dem Segel der 1. deutschen America's Cup-Yacht!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 10:01:11 2006
Return-Path: <java-user-return-25028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53563 invoked from network); 14 Dec 2006 10:01:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 10:01:10 -0000
Received: (qmail 11675 invoked by uid 500); 14 Dec 2006 10:01:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11639 invoked by uid 500); 14 Dec 2006 10:01:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11622 invoked by uid 99); 14 Dec 2006 10:01:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 02:01:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Dec 2006 02:00:44 -0800
Received: (qmail invoked by alias); 14 Dec 2006 10:00:16 -0000
Received: from p548C54B0.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.84.176]
  by mail.gmx.net (mp033) with SMTP; 14 Dec 2006 11:00:16 +0100
X-Authenticated: #3493418
Message-ID: <45812097.2040202@gmx.de>
Date: Thu, 14 Dec 2006 10:59:51 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene scoring: coord_q_d factor
References: <20061212103214.218000@gmx.net> <c68e39170612130731x65a9883do97648bca74c42c63@mail.gmail.com> <20061213154216.320030@gmx.net> <200612132100.45388.paul.elschot@xs4all.nl> <20061214013555.134000@gmx.net> <45810DFF.7040105@gmx.de>
In-Reply-To: <45810DFF.7040105@gmx.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Soeren Pekrul wrote:
> The score for a document is the sum of the term weights w(tf, idf) for 
> each containing term. So you have already the combination of 
> coordination level matching with IDF. Now it is possible that your query 
> requests three terms A, B and C. Two of them (A and B) are quite often 
> in the collection one (C) is very rare. It could be possible that 
> documents are matching just C have a higher score than documents 
> containing A and B. To avoid this you can give the coordination a higher 
> influence by multiplying the sum of term weights with the coordination 
> as additional factor.

Addendum:
For the query Q(A, B, C) with
A: df++ (ifd--)
B: df++ (idf--)
C: df-- (idf++)
the user would probably expect the following ranking:
1. D(A, B, C)
2. D(A, C), D(B, C)
3. D(A, B)
4. D(C)
5. D(A), D(B)

Sören

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 10:54:33 2006
Return-Path: <java-user-return-25029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68977 invoked from network); 14 Dec 2006 10:54:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 10:54:32 -0000
Received: (qmail 29645 invoked by uid 500); 14 Dec 2006 10:54:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29619 invoked by uid 500); 14 Dec 2006 10:54:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29608 invoked by uid 99); 14 Dec 2006 10:54:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 02:54:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 02:54:22 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GuoDx-0004Kc-O7
	for java-user@lucene.apache.org; Thu, 14 Dec 2006 02:54:01 -0800
Message-ID: <7870281.post@talk.nabble.com>
Date: Thu, 14 Dec 2006 02:54:01 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Index XML file
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   Just wondering is there anyone used Digester to extract xml content and
index the xml file? Is there any source that I can refer to on how to
extract the xml contents. Or is there any other xml parser is much easier to
use?

   Thanks

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Index-XML-file-tf2819755.html#a7870281
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 11:03:32 2006
Return-Path: <java-user-return-25030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74064 invoked from network); 14 Dec 2006 11:03:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 11:03:31 -0000
Received: (qmail 51551 invoked by uid 500); 14 Dec 2006 11:03:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51529 invoked by uid 500); 14 Dec 2006 11:03:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51518 invoked by uid 99); 14 Dec 2006 11:03:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 03:03:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [195.245.230.131] (HELO mail78.messagelabs.com) (195.245.230.131)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Dec 2006 03:03:19 -0800
X-VirusChecked: Checked
X-Env-Sender: hdoeleman@amadeus.com
X-Msg-Ref: server-4.tower-78.messagelabs.com!1166094173!8363499!1
X-StarScan-Version: 5.5.10.7; banners=-,-,-
X-Originating-IP: [193.23.186.180]
Received: (qmail 30193 invoked from network); 14 Dec 2006 11:02:53 -0000
Received: from mucsmtp2.amadeus.net (HELO mucsmtp2.amadeus.net) (193.23.186.180)
  by server-4.tower-78.messagelabs.com with RC4-SHA encrypted SMTP; 14 Dec 2006 11:02:53 -0000
In-Reply-To: <7870281.post@talk.nabble.com>
To: java-user@lucene.apache.org
Subject: Re: Index XML file
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.5  CCH1 March 07, 2006
Message-ID: <OF60869889.E13FFF67-ONC1257244.003C4D73-C1257244.003C9D84@amadeus.com>
From: Heikki Doeleman <hdoeleman@amadeus.com>
Date: Thu, 14 Dec 2006 12:02:04 +0100
X-MIMETrack: S/MIME Sign by Notes Client on Heikki Doeleman/NCE/AMADEUS(Release 6.5.5
  CCH1|March 07, 2006) at 14/12/2006 12:02:04,
	Serialize by Notes Client on Heikki Doeleman/NCE/AMADEUS(Release 6.5.5
  CCH1|March 07, 2006) at 14/12/2006 12:02:04,
	Serialize complete at 14/12/2006 12:02:04,
	S/MIME Sign failed at 14/12/2006 12:02:05: The cryptographic key was not
 found,
	Serialize by Router on MUCSMTP2/MUC/AMAEXTMAIL(Release 7.0.2|September 26, 2006) at
 14/12/2006 12:02:53,
	Serialize complete at 14/12/2006 12:02:53
Content-Type: multipart/alternative; boundary="=_alternative 003C9D83C1257244_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 003C9D83C1257244_=
Content-Type: text/plain; charset="US-ASCII"

I use XmlBeans to "unmarshall" an XML file into Java objects, from which 
you can easily retrieve the textual values of any element to be used for 
indexing.

See http://xmlbeans.apache.org/ for more information on this library. 
There are various similar libraries but I find XmlBeans superior in speed, 
memory usage, and ease of programming model.


Heikki Doeleman






spinergywmy <spinergywmy@gmail.com> 
To
java-user@lucene.apache.org
cc

bcc

Subject
Index XML file





spinergywmy <spinergywmy@gmail.com> 
Please respond to java-user@lucene.apache.org
14/12/2006 11:54



Hi,

   Just wondering is there anyone used Digester to extract xml content and
index the xml file? Is there any source that I can refer to on how to
extract the xml contents. Or is there any other xml parser is much easier 
to
use?

   Thanks

regards,
Wooi Meng
-- 
View this message in context: 
http://www.nabble.com/Index-XML-file-tf2819755.html#a7870281
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



--=_alternative 003C9D83C1257244_=--

From java-user-return-25031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 11:13:54 2006
Return-Path: <java-user-return-25031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77921 invoked from network); 14 Dec 2006 11:13:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 11:13:51 -0000
Received: (qmail 67079 invoked by uid 500); 14 Dec 2006 11:13:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66754 invoked by uid 500); 14 Dec 2006 11:13:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66740 invoked by uid 99); 14 Dec 2006 11:13:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 03:13:51 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 03:13:39 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GuoWd-0005yr-BD
	for java-user@lucene.apache.org; Thu, 14 Dec 2006 03:13:19 -0800
Message-ID: <7870561.post@talk.nabble.com>
Date: Thu, 14 Dec 2006 03:13:19 -0800 (PST)
From: mariolone <mario_im@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene & LSA
In-Reply-To: <4581153D.9060106@gmx.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: mario_im@hotmail.com
References: <7858202.post@talk.nabble.com> <4581153D.9060106@gmx.de>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the aid, Soren!!!
They are successful to extract the matrix.=20
But with collections of large documents is not one too much expensive
solution?=20
it is possible to extract the matrix from the indexing file?=20

Mario


S=C3=B6ren Pekrul wrote:
>=20
> Hello Mario,
>=20
> I had a similar problem a few weeks ago (thread "How to get Term Weights=
=20
> (document term matrix)?", 2006-11-02,=20
> http://www.gossamer-threads.com/lists/lucene/java-user/41726).
>=20
> I think there is no simple function creating a document term matrix or=20
> accessing it. I extracted the matrix from my index and stored the matrix=
=20
> in a database.
>=20
> To create the matrix I iterated the terms and the documents for each term=
:
> TermEnum terms=3DIndexReader.terms();
> while(terms.next()) {
>      TermDocs docs=3DIndexReader.termDocs(terms.term());
>      while(docs.next()) {
>          //store the term, the document and the weight
>          //document frequency: indexreader.docFreq(term)
>          //term frequency: termdoc.freq()
>      }
> }
>=20
> S=C3=B6ren
>=20
> mariolone wrote:
>> Hi!!!!
>> I have a problem:
>> i must create a matrix term for document in which every element of the
>> matrix it represents the number of occurrences of that term in the
>> document.
>> How can I do?=20
>> Can someone help me?
>> Thanks to all....
>>=20
>> P.S. I must applicate LSA to this matrix.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Lucene---LSA-tf2815727.=
html#a7870561
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 11:25:13 2006
Return-Path: <java-user-return-25032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82693 invoked from network); 14 Dec 2006 11:25:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 11:25:12 -0000
Received: (qmail 90406 invoked by uid 500); 14 Dec 2006 11:25:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90377 invoked by uid 500); 14 Dec 2006 11:25:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90366 invoked by uid 99); 14 Dec 2006 11:25:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 03:25:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 03:25:00 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1374473nfc
        for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 03:24:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=rnhFToOVDrFMuiItAjr/qYaOS59fe0C9/70NqDdajPBoGmtTBso2YAyQzEREXGNNpaUEraHInC2ORfxiaYieZ2lClPdjDEnc+t6oJd0EY5x1vgYmaS8PLOJFt3/5tWe9t3A4V88Wlp8PusP7fk8AD0wNQVrfGxdeSag5pzeaLK0=
Received: by 10.49.91.6 with SMTP id t6mr583453nfl.1166095479027;
        Thu, 14 Dec 2006 03:24:39 -0800 (PST)
Received: from ?192.168.0.100? ( [83.249.106.69])
        by mx.google.com with ESMTP id c1sm10661643nfe.2006.12.14.03.24.38;
        Thu, 14 Dec 2006 03:24:38 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <Pine.LNX.4.58.0612111057350.28687@hal.rescomp.berkeley.edu>
References: <200612111610.kBBGAQ5S087130@pigeon.ciao.com> <Pine.LNX.4.58.0612111057350.28687@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2C4529E4-6D48-4AF7-B409-4466F4205994@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Lucene id generation
Date: Thu, 14 Dec 2006 12:24:33 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


11 dec 2006 kl. 20.04 skrev Chris Hostetter:

> if you are trying to think of Lucene's docid as a meaningful  
> number, you
> are doing something wrong.

There is this one place where I use it. The index is add only, and  
the only data that interests me is the stored field MyID, also kept  
track in an int[docid]. In case of index operation that change docid,  
I simply repopulate the int[].

I throw this MyID value around quite a bit, starting in the hit  
collector. It save me time from deserializing all hits.

Is this reasonable?




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 11:44:04 2006
Return-Path: <java-user-return-25033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90340 invoked from network); 14 Dec 2006 11:44:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 11:44:03 -0000
Received: (qmail 19581 invoked by uid 500); 14 Dec 2006 11:44:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18635 invoked by uid 500); 14 Dec 2006 11:44:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18623 invoked by uid 99); 14 Dec 2006 11:44:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 03:44:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 03:43:53 -0800
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id kBEBhTkJ023191
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 12:43:29 +0100
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id CBE4E8BDFE
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 12:43:29 +0100 (CET)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 25215-10 for <java-user@lucene.apache.org>;
 Thu, 14 Dec 2006 12:43:28 +0100 (CET)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 876708BDFA
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 12:43:28 +0100 (CET)
Message-ID: <458138E0.2060603@uni-hd.de>
Date: Thu, 14 Dec 2006 12:43:28 +0100
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.8 (X11/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Index XML file
References: <7870281.post@talk.nabble.com>
In-Reply-To: <7870281.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Wooi,
>    Just wondering is there anyone used Digester to extract xml content and
> index the xml file? Is there any source that I can refer to on how to
> extract the xml contents. Or is there any other xml parser is much easier to
> use?

Perhaps this article may help:

http://www-128.ibm.com/developerworks/java/library/j-lucene/

regards,
martin

> 
>    Thanks
> 
> regards,
> Wooi Meng



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 11:52:06 2006
Return-Path: <java-user-return-25034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95375 invoked from network); 14 Dec 2006 11:52:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 11:52:05 -0000
Received: (qmail 32774 invoked by uid 500); 14 Dec 2006 11:52:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32294 invoked by uid 500); 14 Dec 2006 11:52:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 59073 invoked by uid 99); 14 Dec 2006 11:08:42 -0000
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of unknownicore@gmail.com designates 64.233.182.184 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=VcI5KWR48HcP2v4gCvYbJNzUhtpN54cp4belxPsJW2uICKkaaS+S28P2VgLnuRkokmg25CRLEJSwyY27k5/X778kIKRX/iFiH6CJH+OQedM9WvXDexJmkiWyOi8T2FtOorv0KnkKBQ5brk5xEXKmZxyS2a1OQwY847wZxplFjcY=
Message-ID: <3eb72def0612140308r596b8072xd76724dae7a83d0c@mail.gmail.com>
Date: Thu, 14 Dec 2006 12:08:09 +0100
From: "Gorka Naveira" <unknownicore@gmail.com>
To: "lucene mailing" <java-user@lucene.apache.org>
Subject: Lucene Vector Model
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_88619_14894865.1166094489901"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_88619_14894865.1166094489901
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi!
I'm working on Lucene's vector model, and it's way of scoring, and I have
some doubts.
As I think Lucene introduces terms (DocumentWriter.addPosition, using
Postings) in index with some information,
such as offset, document number and term frequency.

I would like  to  apply to each term another way of vectoring, associating
IDF (inverse document frequency),
BIDF (boolean IDF) or WIDF to each term, but it means that we have to take
all documents in order to get IDF,
and as I see Lucene introduces docs one on one, without comparison between
them.

I know Lucene uses IDF but only for searches (a posteriori) and taking just
a filtered set of document, not the whole set.

My questions are:
=BFIt's all I've seen correct?
=BFIt's possible to make the changes I need (for a non-expert in Lucene )?
=BFIt's something relationed made before?

Thank you in advance, Gorka Naveira

------=_Part_88619_14894865.1166094489901--

From java-user-return-25035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 12:04:59 2006
Return-Path: <java-user-return-25035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99480 invoked from network); 14 Dec 2006 12:04:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 12:04:58 -0000
Received: (qmail 46891 invoked by uid 500); 14 Dec 2006 12:05:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45961 invoked by uid 500); 14 Dec 2006 12:04:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45950 invoked by uid 99); 14 Dec 2006 12:04:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 04:04:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jprogramista@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 04:04:48 -0800
Received: by ug-out-1314.google.com with SMTP id k40so500785ugc
        for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 04:04:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=AdAV0HEKd/A86+aYx30QQOD4ENnSKwgL1rpQGtIBpnI4oNHt06e5kcKkEFfe5FcmMWU5bUWMi0qouwO3p9Iv0XY6M1gVhJamB/Nu1neMC2TZG9M9mnIxXaRHIhvKJyidhvCnk4CB+NZbLKlCfX6mh5HZE7BPEBT6tffCDOU5CTQ=
Received: by 10.78.157.8 with SMTP id f8mr626361hue.1166097866404;
        Thu, 14 Dec 2006 04:04:26 -0800 (PST)
Received: by 10.78.148.13 with HTTP; Thu, 14 Dec 2006 04:04:26 -0800 (PST)
Message-ID: <af75a3a20612140404h53580456t89ca6a850ca3ae0d@mail.gmail.com>
Date: Thu, 14 Dec 2006 13:04:26 +0100
From: "Java Programmer" <jprogramista@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene change field values to wrong ones when indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
I have problem with my search code - i try to index some data with
searching simultanously. Everything goes fine till some number of data
are indexed then my fields are bugged.
Eg. I have field with title indexed as "Nowitzki f=FChrt "Mavs" zum
ersten Heimsieg" and inner id "15" (not doc id, just field called id).
At the end of indexing this field disappear, and some other values in
id field appear. I provide full listing of my program, without AXIS
part which is responsible for data transmitting. If you can watch my
code, maybe somewhere is wrong locking mechanism, or any other bug -
please help me if you can.

import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Properties;

import javax.servlet.ServletContext;
import javax.servlet.http.HttpServlet;

import org.apache.axis.MessageContext;
import org.apache.axis.transport.http.HTTPConstants;
import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.Field.Index;
import org.apache.lucene.document.Field.Store;
import org.apache.lucene.index.IndexModifier;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.queryParser.MultiFieldQueryParser;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.search.BooleanClause;
import org.apache.lucene.search.BooleanQuery;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.RangeQuery;
import org.apache.lucene.search.Sort;

public class SNewsSearch {
=09
=09private static SNewsSearch search =3D new SNewsSearch();
=09
=09private static IndexSearcher indexSearcher;
=09
=09private String indexLocation;
=09
=09private String adminLogin;
=09
=09private String adminPass;
=09
=09private SNewsSearch(){
=09=09System.out.println("Constructor SNewsSearch");
=09=09
=09=09Properties props =3D new Properties();
=09=09HttpServlet srv =3D (HttpServlet)
MessageContext.getCurrentContext().getProperty(HTTPConstants.MC_HTTP_SERVLE=
T);
=09=09ServletContext context =3D srv.getServletContext ();
=09=09InputStream is =3D context.getResourceAsStream("/WEB-INF/lucene.prope=
rties");
=09=09try {
=09=09=09props.load(is);
=09=09=09System.out.println("Using index: " + props.getProperty("index.loca=
tion"));
=09=09=09this.indexLocation =3D props.getProperty("index.location");
=09=09=09this.adminLogin =3D props.getProperty("admin.login");
=09=09=09this.adminPass =3D props.getProperty("admin.pass");
=09=09} catch (IOException e) {
=09=09=09e.printStackTrace();
=09=09}
=09}
=09
=09public static SNewsSearch getInstance(){
=09=09return search;
=09}
=09
=09public void setIndexLocation(String indexLocation) {
=09=09this.indexLocation =3D indexLocation;
=09}
=09
=09private static Object lock =3D new Object();
=09
=09public void addDocument(int id,String title, String body, int
pubDate) throws IOException{
=09=09Document doc =3D new Document();
=09=09doc.add(new Field("id",Integer.toString(id),Store.YES,Index.UN_TOKENI=
ZED));
=09=09doc.add(new Field("title",title,Store.NO,Index.TOKENIZED));
=09=09doc.add(new Field("body",body,Store.NO,Index.TOKENIZED));
=09=09doc.add(new Field("pubDate",Integer.toString(pubDate),Store.NO,Index.=
UN_TOKENIZED));
=09=09synchronized(lock){
=09=09=09IndexWriter indexWriter =3D new IndexWriter(indexLocation, new
SimpleAnalyzer(), false);
=09=09=09indexWriter.addDocument(doc);
=09=09=09indexWriter.close();
=09=09=09if(indexSearcher!=3Dnull)
=09=09=09=09indexSearcher.close();
=09=09=09indexSearcher =3D null;
=09=09}
=09}
=09
=09public Map<String,Object> search(String query, int pubDate, int page,
int results, boolean reverse) throws IOException, ParseException{
=09=09MultiFieldQueryParser queryparser =3D new MultiFieldQueryParser(new
String[]{"title","body"}, new SimpleAnalyzer());
=09=09Query q; // =3D queryparser.parse(query);
=09=09if(pubDate!=3D0){
=09=09=09BooleanQuery bq =3D new BooleanQuery();
=09=09=09bq.add(queryparser.parse(query),BooleanClause.Occur.MUST);
=09=09=09bq.add(new RangeQuery(
=09=09=09=09=09new Term("pubDate",Integer.toString(pubDate)),
=09=09=09=09=09new Term("pubDate","99999999"),
=09=09=09=09=09true),BooleanClause.Occur.MUST);
=09=09=09q =3D bq;
=09=09} else {
=09=09=09q =3D queryparser.parse(query);
=09=09}
=09=09Hits hits;
=09=09synchronized(lock){
=09=09=09if(indexSearcher=3D=3Dnull)
=09=09=09=09indexSearcher =3D new IndexSearcher(indexLocation);
=09=09=09
=09=09=09if(reverse)
=09=09=09=09hits =3D indexSearcher.search(q, new Sort("pubDate",true));
=09=09=09else
=09=09=09=09hits =3D indexSearcher.search(q);
=09=09}

=09=09List<Integer> output =3D new ArrayList<Integer>();
=09=09int i =3D page*results;
=09=09while(i<hits.length()){
=09=09=09if(i >=3D (page+1)*results) break;
=09=09=09Document doc =3D hits.doc(i);
=09=09=09output.add(Integer.parseInt(doc.get("id")));
=09=09=09i++;
=09=09}
=09=09Map<String,Object> searchResult =3D new HashMap<String,Object>();
=09=09searchResult.put("numberOfResults", hits.length());
=09=09searchResult.put("results", output);
=09=09return searchResult;
=09}

=09public void deleteDocument(int id) throws IOException{
=09=09synchronized(lock){
=09=09=09IndexModifier indexModifier =3D new IndexModifier(indexLocation, n=
ew
SimpleAnalyzer(), false);
=09=09=09indexModifier.deleteDocuments(new Term("id", Integer.toString(id))=
);
=09=09=09indexModifier.close();
=09=09=09if(indexSearcher!=3Dnull)
=09=09=09=09indexSearcher.close();
=09=09=09indexSearcher =3D null;
=09=09}
=09}
=09
=09public void setUp(String adminLogin, String adminPass) throws IOExceptio=
n {
=09=09if(adminLogin.equals(this.adminLogin) && adminPass.equals(this.adminP=
ass)){
=09=09=09synchronized(lock){
=09=09=09=09IndexWriter indexWriter =3D new IndexWriter(indexLocation, new
SimpleAnalyzer(), true);
=09=09=09=09indexWriter.close();=09=09=09
=09=09=09=09if(indexSearcher!=3Dnull)
=09=09=09=09=09indexSearcher.close();
=09=09=09=09indexSearcher =3D null;
=09=09=09}
=09=09}
=09}
}

Best regards,
Adrian

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 12:32:00 2006
Return-Path: <java-user-return-25036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5333 invoked from network); 14 Dec 2006 12:31:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 12:31:59 -0000
Received: (qmail 77368 invoked by uid 500); 14 Dec 2006 12:32:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76771 invoked by uid 500); 14 Dec 2006 12:32:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76759 invoked by uid 99); 14 Dec 2006 12:32:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 04:32:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.62] (HELO spunkymail-a1.dreamhost.com) (208.97.132.62)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 04:31:49 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.dreamhost.com (Postfix) with ESMTP id 7F7B0FE3CA
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 04:31:28 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <45812097.2040202@gmx.de>
References: <20061212103214.218000@gmx.net> <c68e39170612130731x65a9883do97648bca74c42c63@mail.gmail.com> <20061213154216.320030@gmx.net> <200612132100.45388.paul.elschot@xs4all.nl> <20061214013555.134000@gmx.net> <45810DFF.7040105@gmx.de> <45812097.2040202@gmx.de>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <1BCDF7CF-8338-467B-847D-A7F83A899585@apache.org>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Lucene scoring: coord_q_d factor
Date: Thu, 14 Dec 2006 07:31:27 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

FYI: The Wiki has a fair number of resources on IR: http://=20
wiki.apache.org/jakarta-lucene/InformationRetrieval  (I have added a =20
link to this conversation, which contains a lot of useful information)

Karl, if you are so inclined, please feel free to add any of the =20
references you have found that have been helpful that aren't already =20
on this page (anyone can edit the Wiki with an login)

-Grant

On Dec 14, 2006, at 4:59 AM, Soeren Pekrul wrote:

> Soeren Pekrul wrote:
>> The score for a document is the sum of the term weights w(tf, idf) =20=

>> for each containing term. So you have already the combination of =20
>> coordination level matching with IDF. Now it is possible that your =20=

>> query requests three terms A, B and C. Two of them (A and B) are =20
>> quite often in the collection one (C) is very rare. It could be =20
>> possible that documents are matching just C have a higher score =20
>> than documents containing A and B. To avoid this you can give the =20
>> coordination a higher influence by multiplying the sum of term =20
>> weights with the coordination as additional factor.
>
> Addendum:
> For the query Q(A, B, C) with
> A: df++ (ifd--)
> B: df++ (idf--)
> C: df-- (idf++)
> the user would probably expect the following ranking:
> 1. D(A, B, C)
> 2. D(A, C), D(B, C)
> 3. D(A, B)
> 4. D(C)
> 5. D(A), D(B)
>
> S=F6ren
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/=20
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 13:16:26 2006
Return-Path: <java-user-return-25037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18476 invoked from network); 14 Dec 2006 13:16:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 13:16:25 -0000
Received: (qmail 51978 invoked by uid 500); 14 Dec 2006 13:16:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51950 invoked by uid 500); 14 Dec 2006 13:16:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51939 invoked by uid 99); 14 Dec 2006 13:16:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 05:16:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of cambazz@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 05:16:16 -0800
Received: by ug-out-1314.google.com with SMTP id k40so520630ugc
        for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 05:15:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=qsb3xXWaeaVsFDHAnIEwW/LwrEELrtZbWSvmZoF4hgaCL+uFf5TW7r8xuMI7d/RYIvydo+hSTBf8Rd1OO5nxImj18AvNZoFPqVghF3uMbKdes6B5mabmUM/3xAxbyXCGROu5znVpCf40Yaok+nGfIkTB1gud5xxoyekkMKq87/g=
Received: by 10.67.27.3 with SMTP id e3mr1402945ugj.1166102154393;
        Thu, 14 Dec 2006 05:15:54 -0800 (PST)
Received: by 10.66.237.11 with HTTP; Thu, 14 Dec 2006 05:15:54 -0800 (PST)
Message-ID: <1bcb7c7f0612140515t48916220o7b7d2f4fcf76dac2@mail.gmail.com>
Date: Thu, 14 Dec 2006 15:15:54 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: datetools and index storage question
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_208076_7934099.1166102154358"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_208076_7934099.1166102154358
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Everyone,

I have two fields that contain the original and modification dates of
certain documents.
I decided to store them like:

Document entry = new Document();
entry.add(new Field("edate", DateTools.timeToString(edate.getTime(),
DateTools.Resolution.MINUTE), Field.Store.YES, Field.Index.UN_TOKENIZED));

is this correct? also I should use an un_tokenized index from what I
understand, correct?

I am using un_tokenized index for unique things, and tokenized for
everything I like to search. What are the benefits of a NO_NORMS field
index?
also I am curious to know under what circumstacnes a field.store.NO is used?
if the field is not stored, it is not there, so why even put it?

Best Regards,
C.B.

------=_Part_208076_7934099.1166102154358--

From java-user-return-25038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 13:20:55 2006
Return-Path: <java-user-return-25038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29883 invoked from network); 14 Dec 2006 13:20:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 13:20:54 -0000
Received: (qmail 56266 invoked by uid 500); 14 Dec 2006 13:20:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55671 invoked by uid 500); 14 Dec 2006 13:20:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55660 invoked by uid 99); 14 Dec 2006 13:20:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 05:20:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 05:20:43 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7BC6830EFC17; Thu, 14 Dec 2006 08:20:22 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 78D5E30EFC17
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 08:20:20 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <48b038c60612131051p4f80a71dlc1bb0021da308286@mail.gmail.com>
References: <2e0306af0612130942t2867e5bdob9891d5833d537dd@mail.gmail.com> <48b038c60612131051p4f80a71dlc1bb0021da308286@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8D295584-DC48-4290-8BD9-2FA74BDED09F@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: lucene functionality
Date: Thu, 14 Dec 2006 08:20:15 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Dec 13, 2006, at 1:51 PM, Patrick Turcotte wrote:

> I would suggest you take a look at exist-db (http://exist-db.org/).

I really doubt eXist can handle 10M XML files.  Last time I tried it,  
it choked on 20k of them.

	Erik


>
> A database for XML documents that support XQuery.
>
> We are using both products here (lucene and exist-db), and for what  
> you are
> looking for, exist-db seems better.
>
> Our documents are far more complex than yours (about 500 different  
> element
> in the structure) and even if we don't have millions, we have more  
> than 53K
> documents.
>
> Once loaded in the database, performance are impressives to find  
> info on
> documents parts (xpath) where no index exists. And for your  
> structure, you
> could even create indexes which would boost performance even more.
>
> Don't hesitate to contact me directly if you have more questions.
>
> Patrick
>
> On 12/13/06, Mark Mei <vmslucene@gmail.com> wrote:
>>
>> At the bottom of this email is the sample xml file that we are using
>> today.
>> We have about 10 million of these.
>>
>> We need to know whether Lucene can support the following  
>> functionalities.
>> (1) Each field is searchable and indexable.
>> (2) Fields such as STARTTIME and ENDTIME need to be treated as a  
>> pair so
>> that we can apply timestamp operation such as search by data time  
>> ranges
>> (3) Fields such as DMA need to be treated as numerical and be able  
>> to use
>> math operators ( > < =) for those fields.
>>
>> We also use Apache Commons Digester to parse the xml files. So we  
>> want to
>> know, can all of the above requirements be supported by combining  
>> both
>> Digester and Lucene together, or do we need other modules in order  
>> for us
>> to
>> support those requirements?
>> If these functionalities can be supported, please tell us about  
>> the effort
>> involved (ie, do I need to rewrite 90% of Lucene/Digester to include
>> support
>> for these requirements, or is it more like spending one/two  
>> afternoons
>> extending some classes ? )
>>
>> <DOCUMENT>
>>   <DREREFERENCE>61926433</DREREFERENCE>
>>   <DREDBNAME>News</DREDBNAME>
>>   <SEGMENTID>61829557</SEGMENTID>
>>   <SHOWID>2051460</SHOWID>
>>   <PROGRAMID>21181</PROGRAMID>
>>   <PROGRAMNAME>Action 10 News This Morning</PROGRAMNAME>
>>   <PREFIX>wthi0600</PREFIX>
>>   <STATIONID>903</STATIONID>
>>   <STATIONNAME>WTHI-TV</STATIONNAME>
>>   <AFFILIATEID>17</AFFILIATEID>
>>   <AFFILIATENAME>CBS</AFFILIATENAME>
>>   <MARKETID>141</MARKETID>
>>   <MARKETNAME>Terre Haute</MARKETNAME>
>>   <MEDIATYPE>T</MEDIATYPE>
>>   <DMA>149</DMA>
>>   <SOURCETYPE>CC</SOURCETYPE>
>>   <STARTTIME>2005-07-04 06:00:00</STARTTIME>
>>   <ENDTIME>2005-07-04 07:00:00</ENDTIME>
>>   <STARTMETER>00:42:53</STARTMETER>
>>   <ENDMETER>00:45:02</ENDMETER>
>>   <DREDATE>2006-01-25 00:00:00</DREDATE>
>>   <DRETITLE>At we take you to break with a look at some of the  
>> fourth of
>> July fun going on around the wabash valley today.</DRETITLE>
>>   <DRECONTENT>At we take you to break with a look at some of the  
>> fourth of
>> July fun going on around the wabash valley today. This is action  
>> 10 news
>> this morning on wthi. He's been the US Attorney general for only a  
>> few
>> months. But alberto gonzales may already be in the running for a  
>> new job.
>> And not just any job, either.</DRECONTENT>
>> </DOCUMENT>
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 14:06:28 2006
Return-Path: <java-user-return-25039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47669 invoked from network); 14 Dec 2006 14:06:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 14:06:27 -0000
Received: (qmail 19662 invoked by uid 500); 14 Dec 2006 14:06:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19620 invoked by uid 500); 14 Dec 2006 14:06:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19609 invoked by uid 99); 14 Dec 2006 14:06:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 06:06:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of patrek@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 06:06:16 -0800
Received: by ug-out-1314.google.com with SMTP id k40so535471ugc
        for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 06:05:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Zh5EAENuKg+Is4tm/ky2AAZrustoY/Dto+DVarv+1EJhu/hdjzZgGD48FrgNTJdJsPN2emi2qY0mXp4khK9AG38BAC7tApo0QaGGFpi2tC/tpfqAlDWPG14JnrIF5atdLq/7SxH7491nWetGPPXQWQLVuo8KVHccCf/PlIyCX5Y=
Received: by 10.78.201.15 with SMTP id y15mr742222huf.1166105154269;
        Thu, 14 Dec 2006 06:05:54 -0800 (PST)
Received: by 10.78.66.10 with HTTP; Thu, 14 Dec 2006 06:05:54 -0800 (PST)
Message-ID: <48b038c60612140605p376b2321y35aeb2f06ff98bc4@mail.gmail.com>
Date: Thu, 14 Dec 2006 09:05:54 -0500
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene functionality
In-Reply-To: <8D295584-DC48-4290-8BD9-2FA74BDED09F@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_63569_1602585.1166105154179"
References: <2e0306af0612130942t2867e5bdob9891d5833d537dd@mail.gmail.com>
	 <48b038c60612131051p4f80a71dlc1bb0021da308286@mail.gmail.com>
	 <8D295584-DC48-4290-8BD9-2FA74BDED09F@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_63569_1602585.1166105154179
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 12/14/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Dec 13, 2006, at 1:51 PM, Patrick Turcotte wrote:
>
> > I would suggest you take a look at exist-db (http://exist-db.org/).
>
> I really doubt eXist can handle 10M XML files.  Last time I tried it,
> it choked on 20k of them.


It is true I don't know about 10M, but we are working with 3x 53k without
any problems (version 1.1.1).

Patrick

------=_Part_63569_1602585.1166105154179--

From java-user-return-25040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 14:56:53 2006
Return-Path: <java-user-return-25040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80545 invoked from network); 14 Dec 2006 14:56:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 14:56:52 -0000
Received: (qmail 38074 invoked by uid 500); 14 Dec 2006 14:56:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38044 invoked by uid 500); 14 Dec 2006 14:56:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38033 invoked by uid 99); 14 Dec 2006 14:56:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 06:56:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 06:56:40 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15C42B36@mailer.syr.edu>; Thu, 14 Dec 2006 9:56:19 -0500
Message-ID: <45816612.1050409@syr.edu>
Date: Thu, 14 Dec 2006 09:56:18 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene change field values to wrong ones when indexing
References: <af75a3a20612140404h53580456t89ca6a850ca3ae0d@mail.gmail.com>
In-Reply-To: <af75a3a20612140404h53580456t89ca6a850ca3ae0d@mail.gmail.com>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Adrian,

I don't see anything obviously wrong with your code.

Can you give more details about which field values are different from
what you expect?  I'm guessing it's the id field you're worried about,
but it's not clear from what you have written whether it's the title or
the id field which is corrupted.  A full example would be useful,
showing how you retrieve a result and how you know it contains the wrong
thing.

If you're not familiar with it, Luke is quite useful for directly
looking at Lucene index contents: http://www.getopt.org/luke/

Steve

Java Programmer wrote:
> Hello,
> I have problem with my search code - i try to index some data with
> searching simultanously. Everything goes fine till some number of data
> are indexed then my fields are bugged.
> Eg. I have field with title indexed as "Nowitzki führt "Mavs" zum
> ersten Heimsieg" and inner id "15" (not doc id, just field called id).
> At the end of indexing this field disappear, and some other values in
> id field appear. I provide full listing of my program, without AXIS
> part which is responsible for data transmitting. If you can watch my
> code, maybe somewhere is wrong locking mechanism, or any other bug -
> please help me if you can.
> 
> import java.io.IOException;
> import java.io.InputStream;
> import java.util.ArrayList;
> import java.util.HashMap;
> import java.util.List;
> import java.util.Map;
> import java.util.Properties;
> 
> import javax.servlet.ServletContext;
> import javax.servlet.http.HttpServlet;
> 
> import org.apache.axis.MessageContext;
> import org.apache.axis.transport.http.HTTPConstants;
> import org.apache.lucene.analysis.SimpleAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.document.Field.Index;
> import org.apache.lucene.document.Field.Store;
> import org.apache.lucene.index.IndexModifier;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.queryParser.MultiFieldQueryParser;
> import org.apache.lucene.queryParser.ParseException;
> import org.apache.lucene.search.BooleanClause;
> import org.apache.lucene.search.BooleanQuery;
> import org.apache.lucene.search.Hits;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.search.RangeQuery;
> import org.apache.lucene.search.Sort;
> 
> public class SNewsSearch {
>     
>     private static SNewsSearch search = new SNewsSearch();
>     
>     private static IndexSearcher indexSearcher;
>     
>     private String indexLocation;
>     
>     private String adminLogin;
>     
>     private String adminPass;
>     
>     private SNewsSearch(){
>         System.out.println("Constructor SNewsSearch");
>        
>         Properties props = new Properties();
>         HttpServlet srv = (HttpServlet)
> MessageContext.getCurrentContext().getProperty(HTTPConstants.MC_HTTP_SERVLET);
> 
>         ServletContext context = srv.getServletContext ();
>         InputStream is =
> context.getResourceAsStream("/WEB-INF/lucene.properties");
>         try {
>             props.load(is);
>             System.out.println("Using index: " +
> props.getProperty("index.location"));
>             this.indexLocation = props.getProperty("index.location");
>             this.adminLogin = props.getProperty("admin.login");
>             this.adminPass = props.getProperty("admin.pass");
>         } catch (IOException e) {
>             e.printStackTrace();
>         }
>     }
>     
>     public static SNewsSearch getInstance(){
>         return search;
>     }
>     
>     public void setIndexLocation(String indexLocation) {
>         this.indexLocation = indexLocation;
>     }
>     
>     private static Object lock = new Object();
>     
>     public void addDocument(int id,String title, String body, int
> pubDate) throws IOException{
>         Document doc = new Document();
>         doc.add(new
> Field("id",Integer.toString(id),Store.YES,Index.UN_TOKENIZED));
>         doc.add(new Field("title",title,Store.NO,Index.TOKENIZED));
>         doc.add(new Field("body",body,Store.NO,Index.TOKENIZED));
>         doc.add(new
> Field("pubDate",Integer.toString(pubDate),Store.NO,Index.UN_TOKENIZED));
>         synchronized(lock){
>             IndexWriter indexWriter = new IndexWriter(indexLocation, new
> SimpleAnalyzer(), false);
>             indexWriter.addDocument(doc);
>             indexWriter.close();
>             if(indexSearcher!=null)
>                 indexSearcher.close();
>             indexSearcher = null;
>         }
>     }
>     
>     public Map<String,Object> search(String query, int pubDate, int page,
> int results, boolean reverse) throws IOException, ParseException{
>         MultiFieldQueryParser queryparser = new MultiFieldQueryParser(new
> String[]{"title","body"}, new SimpleAnalyzer());
>         Query q; // = queryparser.parse(query);
>         if(pubDate!=0){
>             BooleanQuery bq = new BooleanQuery();
>             bq.add(queryparser.parse(query),BooleanClause.Occur.MUST);
>             bq.add(new RangeQuery(
>                     new Term("pubDate",Integer.toString(pubDate)),
>                     new Term("pubDate","99999999"),
>                     true),BooleanClause.Occur.MUST);
>             q = bq;
>         } else {
>             q = queryparser.parse(query);
>         }
>         Hits hits;
>         synchronized(lock){
>             if(indexSearcher==null)
>                 indexSearcher = new IndexSearcher(indexLocation);
>            
>             if(reverse)
>                 hits = indexSearcher.search(q, new Sort("pubDate",true));
>             else
>                 hits = indexSearcher.search(q);
>         }
> 
>         List<Integer> output = new ArrayList<Integer>();
>         int i = page*results;
>         while(i<hits.length()){
>             if(i >= (page+1)*results) break;
>             Document doc = hits.doc(i);
>             output.add(Integer.parseInt(doc.get("id")));
>             i++;
>         }
>         Map<String,Object> searchResult = new HashMap<String,Object>();
>         searchResult.put("numberOfResults", hits.length());
>         searchResult.put("results", output);
>         return searchResult;
>     }
> 
>     public void deleteDocument(int id) throws IOException{
>         synchronized(lock){
>             IndexModifier indexModifier = new
> IndexModifier(indexLocation, new
> SimpleAnalyzer(), false);
>             indexModifier.deleteDocuments(new Term("id",
> Integer.toString(id)));
>             indexModifier.close();
>             if(indexSearcher!=null)
>                 indexSearcher.close();
>             indexSearcher = null;
>         }
>     }
>     
>     public void setUp(String adminLogin, String adminPass) throws
> IOException {
>         if(adminLogin.equals(this.adminLogin) &&
> adminPass.equals(this.adminPass)){
>             synchronized(lock){
>                 IndexWriter indexWriter = new IndexWriter(indexLocation,
> new
> SimpleAnalyzer(), true);
>                 indexWriter.close();           
>                 if(indexSearcher!=null)
>                     indexSearcher.close();
>                 indexSearcher = null;
>             }
>         }
>     }
> }
> 
> Best regards,
> Adrian
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 15:18:43 2006
Return-Path: <java-user-return-25041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90171 invoked from network); 14 Dec 2006 15:18:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 15:18:41 -0000
Received: (qmail 4228 invoked by uid 500); 14 Dec 2006 15:18:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4205 invoked by uid 500); 14 Dec 2006 15:18:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4183 invoked by uid 99); 14 Dec 2006 15:18:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 07:18:41 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 07:18:31 -0800
Received: by ug-out-1314.google.com with SMTP id k40so556456ugc
        for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 07:18:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=npV9eLP0dah0QAkarBKDZ/kp66Pn2vR/OJREzXbGmhfXHQqBJX0tbPP/Vsb+LB1wlTjB/IqqzjdtQ4K6mn06vh2Xah6govuFCpeaaDiXcSpWfcFiQ445nP6nPjUuIhu2F82X9cgrtv+ASFBaLsH9p1bYKhg1vBxkoiGLdKyOGjA=
Received: by 10.82.167.5 with SMTP id p5mr273823bue.1166109489630;
        Thu, 14 Dec 2006 07:18:09 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Thu, 14 Dec 2006 07:18:09 -0800 (PST)
Message-ID: <359a92830612140718w784c592cxb456894c0892a1c4@mail.gmail.com>
Date: Thu, 14 Dec 2006 10:18:09 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: datetools and index storage question
In-Reply-To: <1bcb7c7f0612140515t48916220o7b7d2f4fcf76dac2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_157988_12385562.1166109489603"
References: <1bcb7c7f0612140515t48916220o7b7d2f4fcf76dac2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_157988_12385562.1166109489603
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

UN_TOKENIZED is probably the safest way to store your dates. You could get
by with using, say, WhitespaceAnalyzer for indexing and parsing the query,
but that would invite hard-to-track bugs to no advantage I can see.

I'll let someone more knowledgeable than me talk about NORMS


field.store.NO puzzled me at first too... The short answer is that you *can*
search on it if it's indexed but not stored, you just can't reconstruct the
entire field reliably. Imagine you are indexing, for instance, a book. You
care about which books contain text matching "gyre" and "brillig" within 8
terms , but you never want to display the text of the page it occurs on with
the results. You would use field.store.NO for the text.

Why should you want to do this? Well, imagine that you want to display only
the abstract of a document and direct the user to the full document in, say,
PDF format. Relevance is important. So, all you really care about is that
the document contains the terms you want so you can display the abstract (to
help the user decide if this is really what they want), and just provide a
link to the actual PDF document. You'd store the abstract (so you could
display it with data only from the index) but you wouldn't store the text,
just index it. In this scenario, you might NOT even want to index the
abstract assuming you didn't want to search it (you'd get all your searching
satisfied by searching the text).

Note, you still can do proximity searches, wildcard searches, etc. on the
unstored text.

Thought of another way, you index something you want to search, you store
something you want to display without going outside the index. There are
circumstances where you want to do each of the 4 possibilities.

You wind up with a smaller (sometimes MUCH smaller) faster index when you
don't store stuff.

Erick

On 12/14/06, Cam Bazz <cambazz@gmail.com> wrote:
>
> Hello Everyone,
>
> I have two fields that contain the original and modification dates of
> certain documents.
> I decided to store them like:
>
> Document entry = new Document();
> entry.add(new Field("edate", DateTools.timeToString(edate.getTime(),
> DateTools.Resolution.MINUTE), Field.Store.YES, Field.Index.UN_TOKENIZED));
>
> is this correct? also I should use an un_tokenized index from what I
> understand, correct?
>
> I am using un_tokenized index for unique things, and tokenized for
> everything I like to search. What are the benefits of a NO_NORMS field
> index?
> also I am curious to know under what circumstacnes a field.store.NO is
> used?
> if the field is not stored, it is not there, so why even put it?
>
> Best Regards,
> C.B.
>
>

------=_Part_157988_12385562.1166109489603--

From java-user-return-25042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 15:38:26 2006
Return-Path: <java-user-return-25042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 441 invoked from network); 14 Dec 2006 15:38:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 15:38:25 -0000
Received: (qmail 60652 invoked by uid 500); 14 Dec 2006 15:38:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60619 invoked by uid 500); 14 Dec 2006 15:38:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60602 invoked by uid 99); 14 Dec 2006 15:38:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 07:38:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of cambazz@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 07:38:14 -0800
Received: by ug-out-1314.google.com with SMTP id k40so562087ugc
        for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 07:37:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Tblxdu9w3LiJH4oISRHE58vz9obNXbM/D06cQcU3hA/uA/8deVCVI3yY7IpW7ZAkYFP98ic4+xtpE0Y/FSsOg9JWEuqGUWAAhtt4Us2KNKwqhRVoBscdkYv5ALBEzeEKgHNrayGAVwJCanR9JYO86VQSQVTGBcjaR/aJo2kaEgw=
Received: by 10.67.117.2 with SMTP id u2mr1583469ugm.1166110672262;
        Thu, 14 Dec 2006 07:37:52 -0800 (PST)
Received: by 10.66.237.11 with HTTP; Thu, 14 Dec 2006 07:37:52 -0800 (PST)
Message-ID: <1bcb7c7f0612140737g47e11849recdd56ec315f3976@mail.gmail.com>
Date: Thu, 14 Dec 2006 17:37:52 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: datetools and index storage question
In-Reply-To: <359a92830612140718w784c592cxb456894c0892a1c4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_210653_3529441.1166110672174"
References: <1bcb7c7f0612140515t48916220o7b7d2f4fcf76dac2@mail.gmail.com>
	 <359a92830612140718w784c592cxb456894c0892a1c4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_210653_3529441.1166110672174
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

this made it very clear. thank you.

On 12/14/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> UN_TOKENIZED is probably the safest way to store your dates. You could get
> by with using, say, WhitespaceAnalyzer for indexing and parsing the query,
> but that would invite hard-to-track bugs to no advantage I can see.
>
> I'll let someone more knowledgeable than me talk about NORMS
>
>
> field.store.NO puzzled me at first too... The short answer is that you
> *can*
> search on it if it's indexed but not stored, you just can't reconstruct
> the
> entire field reliably. Imagine you are indexing, for instance, a book. You
> care about which books contain text matching "gyre" and "brillig" within 8
> terms , but you never want to display the text of the page it occurs on
> with
> the results. You would use field.store.NO for the text.
>
> Why should you want to do this? Well, imagine that you want to display
> only
> the abstract of a document and direct the user to the full document in,
> say,
> PDF format. Relevance is important. So, all you really care about is that
> the document contains the terms you want so you can display the abstract
> (to
> help the user decide if this is really what they want), and just provide a
> link to the actual PDF document. You'd store the abstract (so you could
> display it with data only from the index) but you wouldn't store the text,
> just index it. In this scenario, you might NOT even want to index the
> abstract assuming you didn't want to search it (you'd get all your
> searching
> satisfied by searching the text).
>
> Note, you still can do proximity searches, wildcard searches, etc. on the
> unstored text.
>
> Thought of another way, you index something you want to search, you store
> something you want to display without going outside the index. There are
> circumstances where you want to do each of the 4 possibilities.
>
> You wind up with a smaller (sometimes MUCH smaller) faster index when you
> don't store stuff.
>
> Erick
>
> On 12/14/06, Cam Bazz <cambazz@gmail.com> wrote:
> >
> > Hello Everyone,
> >
> > I have two fields that contain the original and modification dates of
> > certain documents.
> > I decided to store them like:
> >
> > Document entry = new Document();
> > entry.add(new Field("edate", DateTools.timeToString(edate.getTime(),
> > DateTools.Resolution.MINUTE), Field.Store.YES, Field.Index.UN_TOKENIZED
> ));
> >
> > is this correct? also I should use an un_tokenized index from what I
> > understand, correct?
> >
> > I am using un_tokenized index for unique things, and tokenized for
> > everything I like to search. What are the benefits of a NO_NORMS field
> > index?
> > also I am curious to know under what circumstacnes a field.store.NO is
> > used?
> > if the field is not stored, it is not there, so why even put it?
> >
> > Best Regards,
> > C.B.
> >
> >
>
>

------=_Part_210653_3529441.1166110672174--

From java-user-return-25043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 16:21:17 2006
Return-Path: <java-user-return-25043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20136 invoked from network); 14 Dec 2006 16:21:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 16:21:16 -0000
Received: (qmail 96343 invoked by uid 500); 14 Dec 2006 16:21:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96263 invoked by uid 500); 14 Dec 2006 16:21:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96175 invoked by uid 99); 14 Dec 2006 16:21:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 08:21:14 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of cambazz@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 08:21:03 -0800
Received: by ug-out-1314.google.com with SMTP id k40so574755ugc
        for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 08:20:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=FvTSP3Gm+2OBtDNDFG3u8S/3+jdzvSrz7veA86jGNVBMUOzCEgkR/m3aWmdomKwS7YZV7g9RzYYTn/hvwuOp8c+7VziXRW1/0fK8TIk1WWhG0zHKb21WyrxwMjNml8qnaxW2QzNrVjlTf+SdWoAu8qJ5byMomK3U29vK2z81xBw=
Received: by 10.67.91.6 with SMTP id t6mr1646155ugl.1166113241447;
        Thu, 14 Dec 2006 08:20:41 -0800 (PST)
Received: by 10.66.237.11 with HTTP; Thu, 14 Dec 2006 08:20:41 -0800 (PST)
Message-ID: <1bcb7c7f0612140820u6fa5e9ffu227a3da8c2df2f38@mail.gmail.com>
Date: Thu, 14 Dec 2006 18:20:41 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: range query on dates
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_211451_21285946.1166113241354"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_211451_21285946.1166113241354
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

how can I make a query to bring documents between timestamp begin and
timestamp end, given that I have stored my dates using
DateTools.timeToString(long)?

Best regards,

-C.B.

------=_Part_211451_21285946.1166113241354--

From java-user-return-25044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 18:45:57 2006
Return-Path: <java-user-return-25044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17540 invoked from network); 14 Dec 2006 18:45:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 18:45:56 -0000
Received: (qmail 15605 invoked by uid 500); 14 Dec 2006 18:45:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15525 invoked by uid 500); 14 Dec 2006 18:45:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15508 invoked by uid 99); 14 Dec 2006 18:45:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 10:45:56 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 10:45:44 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id kBEIjGup148074
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 18:45:20 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kBEIjGsC3289118
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 19:45:16 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kBEIjGuW026372
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 19:45:16 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kBEIjGYQ026366
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 19:45:16 +0100
In-Reply-To: <af75a3a20612140404h53580456t89ca6a850ca3ae0d@mail.gmail.com>
Subject: Re: Lucene change field values to wrong ones when indexing
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF22E7829F.5C24AE4B-ON88257244.006553B0-88257244.0066EA36@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 14 Dec 2006 10:44:06 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 14/12/2006 20:45:15
MIME-Version: 1.0
Content-type: text/plain; charset=ISO-8859-1
Content-transfer-encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Two things I would check:

1) converting pubDate to String during indexing for later
date-range-filtering search results might not work well, because, e.g.,=

string wise, "9" > "1000000". You could use Lucene's DateTools - there'=
s an
example in TestDateFilter -
http://svn.apache.org/viewvc/lucene/java/trunk/src/test/org/apache/luce=
ne/search/TestDateFilter.java?view=3Dlog

2) the synchronization on lock, protects from closing indexSearcher whi=
le
calling indexSearcher.search(). But it is not protecting the fetching o=
f
results. So it is possible that an indexSearcher is closed (by add or
delete) before/while fetching those id fields. Even worse, if another
search arrives (if you have concurrent searches), the later search migh=
t
(re)open indexSearcher, and now, if there were deletes in between, you
would definitely fetch different docs because the internal docids have
changed - I think this would explain the change of id field. It would b=
e
probably better to organize the synchronization better, so that an upda=
te
would only mark the need in refreshing the searcher, and would not clos=
e it
- the searching part would take care of that.

Hope I got this right...
Doron

"Java Programmer" <jprogramista@gmail.com> wrote:

> Hello,
> I have problem with my search code - i try to index some data with
> searching simultanously. Everything goes fine till some number of dat=
a
> are indexed then my fields are bugged.
> Eg. I have field with title indexed as "Nowitzki f=FChrt "Mavs" zum
> ersten Heimsieg" and inner id "15" (not doc id, just field called id)=
.
> At the end of indexing this field disappear, and some other values in=

> id field appear. I provide full listing of my program, without AXIS
> part which is responsible for data transmitting. If you can watch my
> code, maybe somewhere is wrong locking mechanism, or any other bug -
> please help me if you can.
>
> import java.io.IOException;
> import java.io.InputStream;
> import java.util.ArrayList;
> import java.util.HashMap;
> import java.util.List;
> import java.util.Map;
> import java.util.Properties;
>
> import javax.servlet.ServletContext;
> import javax.servlet.http.HttpServlet;
>
> import org.apache.axis.MessageContext;
> import org.apache.axis.transport.http.HTTPConstants;
> import org.apache.lucene.analysis.SimpleAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.document.Field.Index;
> import org.apache.lucene.document.Field.Store;
> import org.apache.lucene.index.IndexModifier;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.queryParser.MultiFieldQueryParser;
> import org.apache.lucene.queryParser.ParseException;
> import org.apache.lucene.search.BooleanClause;
> import org.apache.lucene.search.BooleanQuery;
> import org.apache.lucene.search.Hits;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.search.RangeQuery;
> import org.apache.lucene.search.Sort;
>
> public class SNewsSearch {
>
>    private static SNewsSearch search =3D new SNewsSearch();
>
>    private static IndexSearcher indexSearcher;
>
>    private String indexLocation;
>
>    private String adminLogin;
>
>    private String adminPass;
>
>    private SNewsSearch(){
>       System.out.println("Constructor SNewsSearch");
>
>       Properties props =3D new Properties();
>       HttpServlet srv =3D (HttpServlet)
>
MessageContext.getCurrentContext().getProperty(HTTPConstants.MC_HTTP_SE=
RVLET);

>       ServletContext context =3D srv.getServletContext ();
>       InputStream is =3D context.getResourceAsStream("/WEB-INF/lucene=
.
> properties");
>       try {
>          props.load(is);
>          System.out.println("Using index: " + props.
> getProperty("index.location"));
>          this.indexLocation =3D props.getProperty("index.location");
>          this.adminLogin =3D props.getProperty("admin.login");
>          this.adminPass =3D props.getProperty("admin.pass");
>       } catch (IOException e) {
>          e.printStackTrace();
>       }
>    }
>
>    public static SNewsSearch getInstance(){
>       return search;
>    }
>
>    public void setIndexLocation(String indexLocation) {
>       this.indexLocation =3D indexLocation;
>    }
>
>    private static Object lock =3D new Object();
>
>    public void addDocument(int id,String title, String body, int
> pubDate) throws IOException{
>       Document doc =3D new Document();
>       doc.add(new Field("id",Integer.toString(id),Store.YES,Index.
> UN_TOKENIZED));
>       doc.add(new Field("title",title,Store.NO,Index.TOKENIZED));
>       doc.add(new Field("body",body,Store.NO,Index.TOKENIZED));
>       doc.add(new Field("pubDate",Integer.toString(pubDate),Store.
> NO,Index.UN_TOKENIZED));
>       synchronized(lock){
>          IndexWriter indexWriter =3D new IndexWriter(indexLocation, n=
ew
> SimpleAnalyzer(), false);
>          indexWriter.addDocument(doc);
>          indexWriter.close();
>          if(indexSearcher!=3Dnull)
>             indexSearcher.close();
>          indexSearcher =3D null;
>       }
>    }
>
>    public Map<String,Object> search(String query, int pubDate, int pa=
ge,
> int results, boolean reverse) throws IOException, ParseException{
>       MultiFieldQueryParser queryparser =3D new MultiFieldQueryParser=
(new
> String[]{"title","body"}, new SimpleAnalyzer());
>       Query q; // =3D queryparser.parse(query);
>       if(pubDate!=3D0){
>          BooleanQuery bq =3D new BooleanQuery();
>          bq.add(queryparser.parse(query),BooleanClause.Occur.MUST);
>          bq.add(new RangeQuery(
>                new Term("pubDate",Integer.toString(pubDate)),
>                new Term("pubDate","99999999"),
>                true),BooleanClause.Occur.MUST);
>          q =3D bq;
>       } else {
>          q =3D queryparser.parse(query);
>       }
>       Hits hits;
>       synchronized(lock){
>          if(indexSearcher=3D=3Dnull)
>             indexSearcher =3D new IndexSearcher(indexLocation);
>
>          if(reverse)
>             hits =3D indexSearcher.search(q, new Sort("pubDate",true)=
);
>          else
>             hits =3D indexSearcher.search(q);
>       }
>
>       List<Integer> output =3D new ArrayList<Integer>();
>       int i =3D page*results;
>       while(i<hits.length()){
>          if(i >=3D (page+1)*results) break;
>          Document doc =3D hits.doc(i);
>          output.add(Integer.parseInt(doc.get("id")));
>          i++;
>       }
>       Map<String,Object> searchResult =3D new HashMap<String,Object>(=
);
>       searchResult.put("numberOfResults", hits.length());
>       searchResult.put("results", output);
>       return searchResult;
>    }
>
>    public void deleteDocument(int id) throws IOException{
>       synchronized(lock){
>          IndexModifier indexModifier =3D new IndexModifier(indexLocat=
ion,
new
> SimpleAnalyzer(), false);
>          indexModifier.deleteDocuments(new Term("id",
Integer.toString(id)));
>          indexModifier.close();
>          if(indexSearcher!=3Dnull)
>             indexSearcher.close();
>          indexSearcher =3D null;
>       }
>    }
>
>    public void setUp(String adminLogin, String adminPass) throws
IOException {
>       if(adminLogin.equals(this.adminLogin) && adminPass.
> equals(this.adminPass)){
>          synchronized(lock){
>             IndexWriter indexWriter =3D new IndexWriter(indexLocation=
, new
> SimpleAnalyzer(), true);
>             indexWriter.close();
>             if(indexSearcher!=3Dnull)
>                indexSearcher.close();
>             indexSearcher =3D null;
>          }
>       }
>    }
> }
>
> Best regards,
> Adrian
>
> ---------------------------------------------------------------------=

> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 19:04:53 2006
Return-Path: <java-user-return-25045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22928 invoked from network); 14 Dec 2006 19:04:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 19:04:52 -0000
Received: (qmail 52759 invoked by uid 500); 14 Dec 2006 19:04:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52715 invoked by uid 500); 14 Dec 2006 19:04:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52672 invoked by uid 99); 14 Dec 2006 19:04:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 11:04:51 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 11:04:41 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1485234nfc
        for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 11:04:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cqvEOs2PS4pX7cQTo2izqnIc7YZpsAn9eKzYNMOFw0tSKrqfV58QqP7QhdMWYOld3kCG+rob4wcNNq490WG5PF2MICiZVFY3dt8v5eq4ZO2Ub10XkKaououPJj6Alm61wiuFTUwgyGuiXfxBFDVeWABPdksFLatMDkGbM/2GgZw=
Received: by 10.82.138.6 with SMTP id l6mr327693bud.1166123059670;
        Thu, 14 Dec 2006 11:04:19 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Thu, 14 Dec 2006 11:04:19 -0800 (PST)
Message-ID: <359a92830612141104k21f00b88y2c2aa8b756257a0a@mail.gmail.com>
Date: Thu, 14 Dec 2006 14:04:19 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: range query on dates
In-Reply-To: <1bcb7c7f0612140820u6fa5e9ffu227a3da8c2df2f38@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_162949_1172209.1166123059589"
References: <1bcb7c7f0612140820u6fa5e9ffu227a3da8c2df2f38@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_162949_1172209.1166123059589
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'd search this mail archive for DateTools, this has been discussed
repeatedly and you'd get lots and lots of info.

Erick

On 12/14/06, Cam Bazz <cambazz@gmail.com> wrote:
>
> Hello,
>
> how can I make a query to bring documents between timestamp begin and
> timestamp end, given that I have stored my dates using
> DateTools.timeToString(long)?
>
> Best regards,
>
> -C.B.
>
>

------=_Part_162949_1172209.1166123059589--

From java-user-return-25046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 19:17:51 2006
Return-Path: <java-user-return-25046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26584 invoked from network); 14 Dec 2006 19:17:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 19:17:50 -0000
Received: (qmail 81985 invoked by uid 500); 14 Dec 2006 19:17:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81960 invoked by uid 500); 14 Dec 2006 19:17:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81949 invoked by uid 99); 14 Dec 2006 19:17:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 11:17:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Dec 2006 11:17:40 -0800
Received: (qmail invoked by alias); 14 Dec 2006 19:17:17 -0000
Received: from p548C514D.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.81.77]
  by mail.gmx.net (mp027) with SMTP; 14 Dec 2006 20:17:17 +0100
X-Authenticated: #3493418
Message-ID: <4581A328.2030909@gmx.de>
Date: Thu, 14 Dec 2006 20:16:56 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene & LSA
References: <7858202.post@talk.nabble.com> <4581153D.9060106@gmx.de> <7870561.post@talk.nabble.com>
In-Reply-To: <7870561.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

mariolone wrote:
> They are successful to extract the matrix. 
> But with collections of large documents is not one too much expensive
> solution? 

I have a quite small collection with 14,960 documents and 29,828 unique 
terms. If I remember right it took a few minutes on a normal laptop 
computer to iterate the terms and documents. I stored the matrix in mySQL:

CREATE TABLE term_document_matrix (
	term VARCHAR( 32 ) NOT NULL ,
	document INT NOT NULL ,
	weight DOUBLE NOT NULL DEFAULT '0',
	PRIMARY KEY (term, document)
);

You can see it is not a real matrix just a normal table in the 
relational model. I stored the weights greater than 0 only, so I have 
much less entries than 14,960 x 29,828 = 446,226,880 (in my case 159,407).

> it is possible to extract the matrix from the indexing file? 

I donâ€™t know any API to extract the matrix from the index file directly.

SÃ¶ren

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 19:50:35 2006
Return-Path: <java-user-return-25047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36179 invoked from network); 14 Dec 2006 19:50:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 19:50:35 -0000
Received: (qmail 52118 invoked by uid 500); 14 Dec 2006 19:50:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52087 invoked by uid 500); 14 Dec 2006 19:50:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52064 invoked by uid 99); 14 Dec 2006 19:50:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 11:50:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.146.188.105] (HELO web86204.mail.ird.yahoo.com) (217.146.188.105)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Dec 2006 11:50:25 -0800
Received: (qmail 89400 invoked by uid 60001); 14 Dec 2006 19:49:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=btinternet.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=FEWJkxnVo7vngkY1+cKhJzav/2pzv5hgWjcm8v4D6zu5KwzXrU6odXOGVDw4w/fjhWNSRzEK/kMSHNHvU8Svx9/MoiqMyRhIPMQU4c+vfmP+jzMQ3NE8DnZUuNXBPtGuQFmTr9H0gwwXdOo95UwfpiEHqqHcUKOb7QkOuuo1oqQ=;
X-YMail-OSG: y9iXrnAVM1lWfc2sOrdb2bKRsYd7QNhNobM7lhrloOqcUvHi5XqlNRNhOEk3MeEYfHICqfeuLizgjJ1HdwWIrfhwsNvepB6oXkGxSlpUnnAQP5TAxCBOBGMtl3b1AHpE1OWl3xy4VE5f.Qy0MUDTjbumGuj5Ox.vagKH5sx7hiV1XLITAnhtrSde.A--
Received: from [194.66.84.43] by web86204.mail.ird.yahoo.com via HTTP; Thu, 14 Dec 2006 19:49:56 GMT
Date: Thu, 14 Dec 2006 19:49:56 +0000 (GMT)
From: MALCOLM CLARK <malcyclark@btinternet.com>
Subject: Re: Index XML file
To: java-user@lucene.apache.org
In-Reply-To: <7870281.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-907788758-1166125796=:89318"
Content-Transfer-Encoding: 8bit
Message-ID: <792402.89318.qm@web86204.mail.ird.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-907788758-1166125796=:89318
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
  I used the SAX api last year to parse and index the INEX 1.4 collection using Lucene (eventually suceeded after many naive attempts). 
  Can you give me a sample of the XML you are trying to parse? 
  Email me and I should be able to send you some code which may help.
   
  regards,
  Malcolm Clark



--0-907788758-1166125796=:89318--

From java-user-return-25048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 20:11:29 2006
Return-Path: <java-user-return-25048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42094 invoked from network); 14 Dec 2006 20:11:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 20:11:28 -0000
Received: (qmail 13455 invoked by uid 500); 14 Dec 2006 20:11:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13431 invoked by uid 500); 14 Dec 2006 20:11:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13399 invoked by uid 99); 14 Dec 2006 20:11:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 12:11:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.116.38.223] (HELO rectangular.com) (68.116.38.223)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 12:11:15 -0800
Received: from [67.189.26.9] (helo=[10.0.1.3])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1Gux45-000EGh-Cl
	for java-user@lucene.apache.org; Thu, 14 Dec 2006 12:20:25 -0800
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <4581A328.2030909@gmx.de>
References: <7858202.post@talk.nabble.com> <4581153D.9060106@gmx.de> <7870561.post@talk.nabble.com> <4581A328.2030909@gmx.de>
Content-Type: text/plain; charset=WINDOWS-1252; delsp=yes; format=flowed
Message-Id: <F39B8505-66B0-4848-B18D-F57D60C15389@rectangular.com>
Content-Transfer-Encoding: quoted-printable
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: Lucene & LSA
Date: Thu, 14 Dec 2006 12:10:53 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 14, 2006, at 11:16 AM, Soeren Pekrul wrote:

>> it is possible to extract the matrix from the indexing file?
>
> I don=92t know any API to extract the matrix from the index file =20
> directly.

How could we make it work to write an open source decomposed vector =20
model search engine a la LSA without running afoul of the LSA =20
patents?  Maybe use an algorithm other than SVD for the decomposition?

I'm only superficially familiar with LSA, but I'm always looking for =20
ways to improve relevance.  In theory it would be nice to factor in a =20=

decomposed similarity measure, so that on a search for 'napoleonic =20
war', documents which contained a lot of words which were similar to =20
either 'napoleon' and 'war' would score higher than documents which =20
had only a passing mention.

Personally, I'm less interested in "more like this" queries, because =20
the precision of search results based solely on on similar document =20
vectors is so poor -- proper names and other rare tokens unrelated to =20=

the original query wreak havok on the relevance scores.  But maybe =20
there's a way in the original keyword search to juice up the scores =20
of documents which not only contain the original terms, but also a =20
lot of terms which are similar to them.

I dunno if it would be worth the computational effort, though.  A =20
decomposed matrix is going to be inherently expensive to generate, =20
because you have to start from a complete matrix.  That doesn't jibe =20
well with incremental indexing.

Also, it's not clear to me how much of a gain we'd get in relevance.  =20=

My hunch is that shorter, tightly focused documents would benefit =20
some and that longer more diffuse documents -- which might contain =20
passages which were just as useful as those in a shorter document -- =20
would lose.  That wouldn't be helpful for a common case in naive web =20
search, where impossible-to-exclude navigational and advertising text =20=

could end up diluting the scores of perfectly good material.

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 21:38:55 2006
Return-Path: <java-user-return-25049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78442 invoked from network); 14 Dec 2006 21:38:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 21:38:54 -0000
Received: (qmail 67356 invoked by uid 500); 14 Dec 2006 21:38:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67300 invoked by uid 500); 14 Dec 2006 21:38:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67288 invoked by uid 99); 14 Dec 2006 21:38:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 13:38:54 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 13:38:42 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.8/8.13.8) with ESMTP id kBEIW9xu091678
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 18:32:09 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kBEIW9ts2896110
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 19:32:09 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kBEIW8ih022776
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 19:32:08 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kBEIW8Zu022773
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 19:32:08 +0100
In-Reply-To: <1bcb7c7f0612140820u6fa5e9ffu227a3da8c2df2f38@mail.gmail.com>
Subject: Re: range query on dates
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFF34B795E.47FA5E72-ON88257244.00631324-88257244.006397E6@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 14 Dec 2006 10:07:49 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 14/12/2006 20:32:08
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

There is an example in TestDateFilter
http://svn.apache.org/viewvc/lucene/java/trunk/src/test/org/apache/lucene/search/TestDateFilter.java?view=log

"Cam Bazz" <cambazz@gmail.com> wrote:
> Hello,
>
> how can I make a query to bring documents between timestamp begin and
> timestamp end, given that I have stored my dates using
> DateTools.timeToString(long)?
>
> Best regards,
>
> -C.B.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 22:18:16 2006
Return-Path: <java-user-return-25050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97298 invoked from network); 14 Dec 2006 22:18:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 22:18:16 -0000
Received: (qmail 68478 invoked by uid 500); 14 Dec 2006 22:18:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67987 invoked by uid 500); 14 Dec 2006 22:18:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67975 invoked by uid 99); 14 Dec 2006 22:18:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:18:17 -0800
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.196.101.211] (HELO rrr3-v3.mail.re1.yahoo.com) (66.196.101.211)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Dec 2006 14:18:06 -0800
Received: (qmail 47318 invoked from network); 14 Dec 2006 15:19:48 -0000
Received: from web58616.mail.re3.yahoo.com (68.142.236.250)
  by rrr3-v3.mail.re1.yahoo.com with SMTP; 14 Dec 2006 15:19:48 -0000
Received: (qmail 79633 invoked by uid 60001); 14 Dec 2006 15:19:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=1/Wgz3Cq233ISc0X5EoH5VvUc9HvJbyd9S3rv2RztItEXUF44AWLf6qAG43DzD3IrzpOu9gRh5SuH81dpnMARJ8osysHn11NlKjIqIoZSbKdZyJglfP1VHAzo64eyOFqTG8beZHRUCI5DOzrtUwmV96Opr1tFFe785ntinwWkrE=;
X-YMail-OSG: ZW4FK3IVM1ks_qVM.RSmbG.SMnZdEagq3ZMXYbhbGDY8NI39XPEGn2_goEZY_0Cjxg--
Received: from [70.19.178.76] by web58616.mail.re3.yahoo.com via HTTP; Thu, 14 Dec 2006 07:19:48 PST
Date: Thu, 14 Dec 2006 07:19:48 -0800 (PST)
From: qaz zaq <fortques@yahoo.com>
Subject: Duplicates removal in search results
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-204663783-1166109588=:78699"
Content-Transfer-Encoding: 8bit
Message-ID: <716863.78699.qm@web58616.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-204663783-1166109588=:78699
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

How can i remove the duplicates records in the search results. i.e., I have multiple results with the same title in 'title' field, and I want to only 1 record per title, how can I achieve that? thanks!!

 
---------------------------------
Everyone is raving about the all-new Yahoo! Mail beta.
--0-204663783-1166109588=:78699--

From java-user-return-25051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 22:23:24 2006
Return-Path: <java-user-return-25051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99919 invoked from network); 14 Dec 2006 22:23:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 22:23:23 -0000
Received: (qmail 76412 invoked by uid 500); 14 Dec 2006 22:23:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76375 invoked by uid 500); 14 Dec 2006 22:23:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76362 invoked by uid 99); 14 Dec 2006 22:23:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:23:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.138.248.236] (HELO bacchus.thegestalt.org) (82.138.248.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:23:13 -0800
Received: from [82.138.248.236] (helo=bacchus.thegestalt.org)
	by jail0061.vps.exonetric.net with esmtp (Exim 4.61 (FreeBSD))
	(envelope-from <simon@thegestalt.org>)
	id 1GuyyZ-0005IV-2Y
	for java-user@lucene.apache.org; Thu, 14 Dec 2006 22:22:51 +0000
Received: (from simon@localhost)
	by bacchus.thegestalt.org (8.13.6/8.13.6/Submit) id kBEMMoZn020366
	for java-user@lucene.apache.org; Thu, 14 Dec 2006 22:22:50 GMT
	(envelope-from simon@thegestalt.org)
X-Authentication-Warning: bacchus.thegestalt.org: simon set sender to simon@thegestalt.org using -f
Date: Thu, 14 Dec 2006 22:22:50 +0000
From: Simon Wistow <simon@thegestalt.org>
To: Lucene <java-user@lucene.apache.org>
Subject: Search Suggestions
Message-ID: <20061214222250.GA22261@thegestalt.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org

Yahoo! has a search suggestion feature so that if you search for say 
'shoes' then it also reccomends

	payless shoes, jordan shoes, aldo shoes, nike shoes, bakers shoes

and a bunch of others.

Has anyone built something like that in Lucene?

Simon



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 22:49:33 2006
Return-Path: <java-user-return-25052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8576 invoked from network); 14 Dec 2006 22:49:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 22:49:32 -0000
Received: (qmail 27696 invoked by uid 500); 14 Dec 2006 22:49:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27524 invoked by uid 500); 14 Dec 2006 22:49:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27513 invoked by uid 99); 14 Dec 2006 22:49:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:49:33 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 14:49:23 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1534385nfc
        for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 14:49:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cfre8UTjr41xu8LDUHV0YzAKv3BrLTNTW4M4VXpTStOxLnLO+1OtNXXcBiAywH9tvggBQ+gtETpodPCRs3TY5H9oBWL6kDKpKkyMc0PLVJRKQn//w5Q1R5UEix/94IlyfXEod+Gka2R/H7bdQWk1Ln18xudDFdOfpl6WbWwbauE=
Received: by 10.82.172.15 with SMTP id u15mr11244bue.1166136542048;
        Thu, 14 Dec 2006 14:49:02 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Thu, 14 Dec 2006 14:49:01 -0800 (PST)
Message-ID: <359a92830612141449n1e37eeb5s235779ad282073f6@mail.gmail.com>
Date: Thu, 14 Dec 2006 17:49:01 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Duplicates removal in search results
In-Reply-To: <716863.78699.qm@web58616.mail.re3.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_166355_20536403.1166136541982"
References: <716863.78699.qm@web58616.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_166355_20536403.1166136541982
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

you need to search for all documents with the title you care about, decide
which one to keep and remove all the others.

You'll probably need a TermDocs/TermEnum to go through all the items in your
index to create the list of documents to remove.

Erick

On 12/14/06, qaz zaq <fortques@yahoo.com> wrote:
>
> How can i remove the duplicates records in the search results. i.e., I
> have multiple results with the same title in 'title' field, and I want to
> only 1 record per title, how can I achieve that? thanks!!
>
>
> ---------------------------------
> Everyone is raving about the all-new Yahoo! Mail beta.
>

------=_Part_166355_20536403.1166136541982--

From java-user-return-25053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 14 23:49:49 2006
Return-Path: <java-user-return-25053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23525 invoked from network); 14 Dec 2006 23:49:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2006 23:49:49 -0000
Received: (qmail 2393 invoked by uid 500); 14 Dec 2006 23:49:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1859 invoked by uid 500); 14 Dec 2006 23:49:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1848 invoked by uid 99); 14 Dec 2006 23:49:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 15:49:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yeohwm@mymcsb.com designates 218.111.147.2 as permitted sender)
Received: from [218.111.147.2] (HELO mcsbtm01.mcsb.internal) (218.111.147.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 15:49:35 -0800
Received: from localhost (localhost [127.0.0.1])by ox.mcsb.com (Postfix) 
	with ESMTP id F3B0B2D36Efor <java-user@lucene.apache.org>; Fri, 15 Dec 2006
	 07:45:31 +0800 (MYT)
Received: from ox.mcsb.com ([127.0.0.1])by localhost (ox [127.0.0.1]) 
	(amavisd-new, port 10024) with ESMTPid 25839-08 for 
	<java-user@lucene.apache.org>;Fri, 15 Dec 2006 07:45:30 +0800 (MYT)
Received: from wmyeoh (unknown [10.10.100.61])by ox.mcsb.com (Postfix) with 
	ESMTP id 4AEBE2D186for <java-user@lucene.apache.org>; Fri, 15 Dec 2006 
	07:45:30 +0800 (MYT)
From: "yeohwm" <yeohwm@mymcsb.com>
To: <java-user@lucene.apache.org>
Subject: RE: Index XML file
Date: Fri, 15 Dec 2006 07:50:11 +0800
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0021_01C7201D.A5E3AB10"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <792402.89318.qm@web86204.mail.ird.yahoo.com>
Thread-Index: AccfuLQjDYvccHIRREujoLjKHmRvngAIbTQg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Message-Id: <20061214234530.4AEBE2D186@ox.mcsb.com>
X-Virus-Scanned: by amavisd-new at mcsb.com
X-imss-version: 2.045
X-imss-result: Passed
X-imss-scanInfo: M:P L:N SM:0
X-imss-tmaseResult: TT:0 TS:0.0000 TC:00 TRN:0 TV:3.6.1039(14872.003)
X-imss-scores: Clean:41.45859 C:2 M:3 S:5 R:5
X-imss-settings: Baseline:5 C:3 M:3 S:3 R:3 (1.5000 1.5000)
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0021_01C7201D.A5E3AB10
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: 7bit


Hi,

	Thanks for the help. Please do let me know what jar file that I
needed and where I can find them.

Regards,
Wooi Meng 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.5.432 / Virus Database: 268.15.18/586 - Release Date: 12/13/2006
6:13 PM
 
  


Disclaimer
----------------------------------------------------------------------------------------------------
This e-mail and any files transmitted with it are intended only for the 
use of the addressee. If it contains confidential information, the addressee 
is expressly prohibited from distributing the e-mail and legal action may be 
taken against you. Access by any other persons to this e-mail is unauthorized. 
If you are not the intended recipient, any disclosure, copying, use, or 
distribution is prohibited and may be unlawful. This e-mail and any files and/or 
attachments, shall not constitute binding legal obligation with the company. 
The company shall also not be responsible for any computer virus transmitted 
with this e-mail.
----------------------------------------------------------------------------------------------------
MCSB Systems (M) Berhad (0xMCsBM@il)
------=_NextPart_000_0021_01C7201D.A5E3AB10
Content-Type: text/xml;
	name="build.xml"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="build.xml"

<project name=3D"docspace" default=3D"all" basedir=3D".">
	<property name=3D"src.dir" value=3D"${basedir}/src"/>
	<property name=3D"build.dir" value=3D"${basedir}/build"/>
	<property name=3D"src.conf" value=3D"${basedir}/conf"/>
	<property name=3D"src.jsp" value=3D"${basedir}/web"/>
	<property name=3D"deploy.dir" value=3D"C:/Program =
Files/jboss-4.0.4.GA/server/default/deploy"/>
=09
	<path id=3D"build.classpath">
		<fileset dir=3D"${basedir}/lib/">
			<include name=3D"*.jar"/>
		</fileset>
	</path>
=09
	<target name=3D"prepare">
		<mkdir dir=3D"${build.dir}"/>
		<mkdir dir=3D"${build.dir}/classes"/>
		<mkdir dir=3D"${build.dir}/jar"/>
		<mkdir dir=3D"${build.dir}/docspace"/>
		<mkdir dir=3D"${build.dir}/zip"/>
	</target>
=09
	<target name=3D"compile" depends=3D"prepare">
		<javac destdir=3D"${build.dir}/classes" =
classpathref=3D"build.classpath">
			<src path=3D"${src.dir}"/>
		</javac>
	</target>
=09
	<target name=3D"package-ejb">
		<jar jarfile=3D"${build.dir}/jar/beans.jar">
			<fileset dir=3D"${build.dir}/classes">
				<include name=3D"**/*.*"/>			=09
			</fileset>
		=09
			<fileset dir=3D"${src.conf}">
		        <include name=3D"import.sql" />
			</fileset>
		=09
			<metainf dir=3D"${src.conf}">
				<include name=3D"persistence.xml"/>
			</metainf>
		</jar>
	</target>
=09
	<target name=3D"package-web">
		<war warfile=3D"${build.dir}/jar/web.war" =
webxml=3D"${src.conf}/web.xml">
			<fileset dir=3D"${src.jsp}">
				<include name=3D"**/*.*"/>
			</fileset>
			<webinf dir=3D"${src.conf}">
				<include name=3D"jboss-web.xml"/>
			</webinf>
		</war>
	</target>
=09
	<target name=3D"assemble-app" depends=3D"package-ejb,package-web">
		<jar jarfile=3D"${build.dir}/jar/DocSpace.ear">
			<metainf dir=3D"${src.conf}">
				<include name=3D"application.xml"/>
				<include name=3D"jboss-app.xml"/>
			</metainf>
			<fileset dir=3D"${src.conf}">
				<include name=3D"property/*.properties"/>=09
			</fileset>
			<fileset dir=3D"${build.dir}/jar">
				<include name=3D"*.jar"/>
				<include name=3D"*.war"/>
			</fileset>
		</jar>
	</target>
=09
	<target name=3D"deploy">
		<copy file=3D"${build.dir}/jar/DocSpace.ear" =
tofile=3D"${deploy.dir}/DocSpace.ear" overwrite=3D"true">		=09
		</copy>
	</target>
	=09
	<target name=3D"all">
		<antcall target=3D"package-ejb"></antcall>
		<antcall target=3D"package-web"></antcall>
		<antcall target=3D"assemble-app"></antcall>
		<antcall target=3D"clean"></antcall>
		<antcall target=3D"deploy"></antcall>
	</target>
=09
	<target name=3D"clean">
	</target>
=09
</project>

------=_NextPart_000_0021_01C7201D.A5E3AB10
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPart_000_0021_01C7201D.A5E3AB10--



From java-user-return-25054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 15 00:23:09 2006
Return-Path: <java-user-return-25054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31787 invoked from network); 15 Dec 2006 00:23:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 00:23:08 -0000
Received: (qmail 43781 invoked by uid 500); 15 Dec 2006 00:23:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43550 invoked by uid 500); 15 Dec 2006 00:23:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43539 invoked by uid 99); 15 Dec 2006 00:23:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 16:23:08 -0800
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=HTML_BADTAG_30_40,HTML_MESSAGE,HTML_NONELEMENT_70_80
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.146.188.108] (HELO web86207.mail.ird.yahoo.com) (217.146.188.108)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Dec 2006 16:22:57 -0800
Received: (qmail 99943 invoked by uid 60001); 15 Dec 2006 00:22:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=btinternet.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=nN+HkvqS+PBEuBSFtfDfwQQ4bwbTedZbxYUTbbD3wfkvXv4xVsNXpR5WhTrbwwDi9UvRrVwYIs6q5K+AygH6kfqPJjAfM/1BjkiQOS3pvu18FsLLlE8NSrseh6IF5z6rNSml+uS3beEJGnW1NixWuHHJHCwdjDfRJmRh6wXhAl4=;
X-YMail-OSG: RAMrMKYVM1mkEixRV2FMU2b3DLDDpJthxSU3bNGD.o3teGNcufIQ_hL1oUWOFeyP6cPQywPXUHyWSzjwkI6xAor_7.56j3MNxNGx3pAwp_DBFfOtJkyqQk2aAzC2.EquYQqxoQdthn0WidELOGkBt__8CqU37faYCmXAgIe4OYDqZVIDLgD1vV3pKYWh4zL1xSC5HTxid..b
Received: from [194.66.84.43] by web86207.mail.ird.yahoo.com via HTTP; Fri, 15 Dec 2006 00:22:31 GMT
Date: Fri, 15 Dec 2006 00:22:31 +0000 (GMT)
From: MALCOLM CLARK <malcyclark@btinternet.com>
Subject: RE: Index XML file
To: java-user@lucene.apache.org
In-Reply-To: <20061214234530.4AEBE2D186@ox.mcsb.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-622314771-1166142151=:99633"
Content-Transfer-Encoding: 8bit
Message-ID: <110153.99633.qm@web86207.mail.ird.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-622314771-1166142151=:99633
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
  Sent you a private email with some code attached ;-)
  Malcolm
  

yeohwm <yeohwm@mymcsb.com> wrote:
  
Hi,

Thanks for the help. Please do let me know what jar file that I
needed and where I can find them.

Regards,
Wooi Meng 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.5.432 / Virus Database: 268.15.18/586 - Release Date: 12/13/2006
6:13 PM




Disclaimer
----------------------------------------------------------------------------------------------------
This e-mail and any files transmitted with it are intended only for the 
use of the addressee. If it contains confidential information, the addressee 
is expressly prohibited from distributing the e-mail and legal action may be 
taken against you. Access by any other persons to this e-mail is unauthorized. 
If you are not the intended recipient, any disclosure, copying, use, or 
distribution is prohibited and may be unlawful. This e-mail and any files and/or 
attachments, shall not constitute binding legal obligation with the company. 
The company shall also not be responsible for any computer virus transmitted 
with this e-mail.
----------------------------------------------------------------------------------------------------
MCSB Systems (M) Berhad (0xMCsBM@il)




































































































---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

--0-622314771-1166142151=:99633--

From java-user-return-25055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 15 01:38:29 2006
Return-Path: <java-user-return-25055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51268 invoked from network); 15 Dec 2006 01:38:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 01:38:27 -0000
Received: (qmail 24350 invoked by uid 500); 15 Dec 2006 01:38:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24319 invoked by uid 500); 15 Dec 2006 01:38:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24308 invoked by uid 99); 15 Dec 2006 01:38:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 17:38:28 -0800
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.196.101.126] (HELO rrr2-v1.mail.re1.yahoo.com) (66.196.101.126)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Dec 2006 17:38:16 -0800
Received: (qmail 5354 invoked from network); 14 Dec 2006 19:31:28 -0000
Received: from web58619.mail.re3.yahoo.com (68.142.236.253)
  by rrr2-v1.mail.re1.yahoo.com with SMTP; 14 Dec 2006 19:31:28 -0000
Received: (qmail 6044 invoked by uid 60001); 14 Dec 2006 19:31:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type;
  b=4ATyO4eaQBoj9Lx9/0vRMuO7pKJ2gW2W2o4eabIZuBDSz+FhQOM83Mjw6AnHCsxP7kpR4cpPk9Lh4Ivg3kD2KOtePTHycI4jb7b1EDsF7ppeQnAtlOU6IAPcPchtejwktxkLyIcjKZ9GgIP0vNTJfaAb4mOmPv8d7Y+7SvPLHjg=  ;
Message-ID: <20061214193128.6042.qmail@web58619.mail.re3.yahoo.com>
Received: from [132.197.150.201] by web58619.mail.re3.yahoo.com via HTTP; Thu, 14 Dec 2006 11:31:28 PST
Date: Thu, 14 Dec 2006 11:31:27 -0800 (PST)
From: qaz zaq <fortques@yahoo.com>
Subject: Duplicates removal in search results
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1729306718-1166124687=:5963"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1729306718-1166124687=:5963
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable

How can i remove the duplicates records in the search results. i.e., I have=
 multiple results with the same title in 'title' field, and I want to only =
1 record per title, how can I achieve that? thanks!!=0A=0A=0A =0A__________=
__________________________________________________________________________=
=0ANeed a quick answer? Get one in minutes from people who know.=0AAsk your=
 question on www.Answers.yahoo.com
--0-1729306718-1166124687=:5963--

From java-user-return-25056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 15 02:26:26 2006
Return-Path: <java-user-return-25056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65877 invoked from network); 15 Dec 2006 02:26:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 02:26:25 -0000
Received: (qmail 62013 invoked by uid 500); 15 Dec 2006 02:26:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61986 invoked by uid 500); 15 Dec 2006 02:26:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 52936 invoked by uid 99); 14 Dec 2006 20:24:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
X-Authentication-Warning: tribal.metalab.unc.edu: mefron owned process doing -bs
Date: Thu, 14 Dec 2006 15:23:59 -0500 (EST)
From: Miles Efron <mefron@metalab.unc.edu>
To: java-user@lucene.apache.org
Subject: Re: Lucene & LSA
In-Reply-To: <F39B8505-66B0-4848-B18D-F57D60C15389@rectangular.com>
Message-ID: <Pine.LNX.4.64.0612141518250.22813@tribal.metalab.unc.edu>
References: <7858202.post@talk.nabble.com> <4581153D.9060106@gmx.de>
 <7870561.post@talk.nabble.com> <4581A328.2030909@gmx.de>
 <F39B8505-66B0-4848-B18D-F57D60C15389@rectangular.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org

U of Tennessee professor Michael Berry maintains a good site regarding 
software for computing SVD on large, sparse matrices:

 	http://www.cs.utk.edu/~lsi/

The site also points to the LSI patent.

FWIW it's very easy to extract term-doc counts from a lucene index and 
format them for software such as SVDPACK

 	http://www.netlib.org/svdpack/index.html

or

 	http://tedlab.mit.edu:16080/~dr/SVDLIBC/

Of course using the resulting matrices isn't so trivial, if you want to 
stay within Lucene.  Also, they are dense, so even at relatively low 
dimensionality, you're still storing a lot of data.

-Miles

On Thu, 14 Dec 2006, Marvin Humphrey wrote:

>
> On Dec 14, 2006, at 11:16 AM, Soeren Pekrul wrote:
>
>>> it is possible to extract the matrix from the indexing file?
>> 
>> I don?t know any API to extract the matrix from the index file directly.
>
> How could we make it work to write an open source decomposed vector model 
> search engine a la LSA without running afoul of the LSA patents?  Maybe use 
> an algorithm other than SVD for the decomposition?
>
> I'm only superficially familiar with LSA, but I'm always looking for ways to 
> improve relevance.  In theory it would be nice to factor in a decomposed 
> similarity measure, so that on a search for 'napoleonic war', documents which 
> contained a lot of words which were similar to either 'napoleon' and 'war' 
> would score higher than documents which had only a passing mention.
>
> Personally, I'm less interested in "more like this" queries, because the 
> precision of search results based solely on on similar document vectors is so 
> poor -- proper names and other rare tokens unrelated to the original query 
> wreak havok on the relevance scores.  But maybe there's a way in the original 
> keyword search to juice up the scores of documents which not only contain the 
> original terms, but also a lot of terms which are similar to them.
>
> I dunno if it would be worth the computational effort, though.  A decomposed 
> matrix is going to be inherently expensive to generate, because you have to 
> start from a complete matrix.  That doesn't jibe well with incremental 
> indexing.
>
> Also, it's not clear to me how much of a gain we'd get in relevance.  My 
> hunch is that shorter, tightly focused documents would benefit some and that 
> longer more diffuse documents -- which might contain passages which were just 
> as useful as those in a shorter document -- would lose.  That wouldn't be 
> helpful for a common case in naive web search, where impossible-to-exclude 
> navigational and advertising text could end up diluting the scores of 
> perfectly good material.
>
> Marvin Humphrey
> Rectangular Research
> http://www.rectangular.com/
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

__________________________________
Miles Efron
http://www.ibiblio.org/mefron
mefron@ibiblio.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 15 03:55:54 2006
Return-Path: <java-user-return-25057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78422 invoked from network); 15 Dec 2006 03:55:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 03:55:53 -0000
Received: (qmail 44452 invoked by uid 500); 15 Dec 2006 03:55:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44236 invoked by uid 500); 15 Dec 2006 03:55:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44218 invoked by uid 99); 15 Dec 2006 03:55:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 19:55:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 19:55:08 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gv49b-0003SV-Ee
	for java-user@lucene.apache.org; Thu, 14 Dec 2006 19:54:35 -0800
Message-ID: <7885882.post@talk.nabble.com>
Date: Thu, 14 Dec 2006 19:54:35 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Search index performance
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   Just wondering if my repository has 1TB of index file, when I perform
searching, does it takes up or allocate a lot of memory usage to read and
retrieve the results?

   Thanks


regards,
Wooi Meng 
-- 
View this message in context: http://www.nabble.com/Search-index-performance-tf2825038.html#a7885882
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 15 05:35:08 2006
Return-Path: <java-user-return-25058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97802 invoked from network); 15 Dec 2006 05:35:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 05:35:05 -0000
Received: (qmail 68285 invoked by uid 500); 15 Dec 2006 05:35:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67856 invoked by uid 500); 15 Dec 2006 05:35:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67843 invoked by uid 99); 15 Dec 2006 05:35:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 21:35:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 21:34:55 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C82F65B764; Thu, 14 Dec 2006 21:34:34 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C169B7F403
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 21:34:34 -0800 (PST)
Date: Thu, 14 Dec 2006 21:34:34 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene id generation
In-Reply-To: <2C4529E4-6D48-4AF7-B409-4466F4205994@gmail.com>
Message-ID: <Pine.LNX.4.58.0612142132130.12525@hal.rescomp.berkeley.edu>
References: <200612111610.kBBGAQ5S087130@pigeon.ciao.com>
 <Pine.LNX.4.58.0612111057350.28687@hal.rescomp.berkeley.edu>
 <2C4529E4-6D48-4AF7-B409-4466F4205994@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Karl: it sounds like you are just refering to using the lucene docid as an
array index for the FieldCache of your "MyID" field ... that's a perfectly
valid use of the docid, the key being that you aren't expecting the id to
contain any meaningful data itself -- it's just a refrence number.

: > if you are trying to think of Lucene's docid as a meaningful
: > number, you
: > are doing something wrong.
:
: There is this one place where I use it. The index is add only, and
: the only data that interests me is the stored field MyID, also kept
: track in an int[docid]. In case of index operation that change docid,
: I simply repopulate the int[].
:
: I throw this MyID value around quite a bit, starting in the hit
: collector. It save me time from deserializing all hits.
:
: Is this reasonable?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 15 05:40:48 2006
Return-Path: <java-user-return-25059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98994 invoked from network); 15 Dec 2006 05:40:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 05:40:48 -0000
Received: (qmail 72299 invoked by uid 500); 15 Dec 2006 05:40:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72266 invoked by uid 500); 15 Dec 2006 05:40:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72255 invoked by uid 99); 15 Dec 2006 05:40:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 21:40:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 21:40:40 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C6A075B76E; Thu, 14 Dec 2006 21:40:19 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C18127F403
	for <java-user@lucene.apache.org>; Thu, 14 Dec 2006 21:40:19 -0800 (PST)
Date: Thu, 14 Dec 2006 21:40:19 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Search index performance
In-Reply-To: <7885882.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0612142137230.12525@hal.rescomp.berkeley.edu>
References: <7885882.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:    Just wondering if my repository has 1TB of index file, when I perform
: searching, does it takes up or allocate a lot of memory usage to read and
: retrieve the results?

try a mailing list search for "memory usage" ... i think you'll find some
previous discussions that may help.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 15 05:51:03 2006
Return-Path: <java-user-return-25060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 494 invoked from network); 15 Dec 2006 05:51:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 05:51:02 -0000
Received: (qmail 79159 invoked by uid 500); 15 Dec 2006 05:51:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79116 invoked by uid 500); 15 Dec 2006 05:51:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79105 invoked by uid 99); 15 Dec 2006 05:51:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 21:51:04 -0800
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.196.101.249] (HELO unknown-66-196-101-249.yahoo.com) (66.196.101.249)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Dec 2006 21:50:52 -0800
Received: (qmail 27730 invoked from network); 14 Dec 2006 23:17:53 -0000
Received: from web58611.mail.re3.yahoo.com (68.142.236.209)
  by rrr1-v1.mail.re1.yahoo.com with SMTP; 14 Dec 2006 23:17:53 -0000
Received: (qmail 87926 invoked by uid 60001); 14 Dec 2006 23:17:53 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type;
  b=NJnU2M4hpy6JtneCAJoFbqD1yeq8lGA6mKu+4NAQBZF2rynTEVYC+OBDZPr69sLcD11VRPJc0HlJPgI3C2+4jT/z1wm0sTsky6JnJebuVFG/EdeIWUxVPjYD8DTIej8zmJuuhCYpX+kvmBUo/gAebNwdoSVIAOOGhAx1CGozfEE=  ;
Message-ID: <20061214231753.87924.qmail@web58611.mail.re3.yahoo.com>
Received: from [70.19.178.76] by web58611.mail.re3.yahoo.com via HTTP; Thu, 14 Dec 2006 15:17:53 PST
Date: Thu, 14 Dec 2006 15:17:53 -0800 (PST)
From: qaz zaq <fortques@yahoo.com>
Subject: Re: Duplicates removal in search results
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-546038120-1166138273=:86958"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-546038120-1166138273=:86958
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable

Thanks Erick,=0AUsing termdocs/termenum should work. One of my concerns is =
the performance: the search results could reach 100K, so the performance ma=
y be impacted.  One of the alternative I am thinking  is to collapse the da=
ta during indexing time, but I haven't decided to go that way.=0A=0A----- O=
riginal Message ----=0AFrom: Erick Erickson <erickerickson@gmail.com>=0ATo:=
 java-user@lucene.apache.org=0ASent: Thursday, December 14, 2006 5:49:01 PM=
=0ASubject: Re: Duplicates removal in search results=0A=0A=0Ayou need to se=
arch for all documents with the title you care about, decide=0Awhich one to=
 keep and remove all the others.=0A=0AYou'll probably need a TermDocs/TermE=
num to go through all the items in your=0Aindex to create the list of docum=
ents to remove.=0A=0AErick=0A=0AOn 12/14/06, qaz zaq <fortques@yahoo.com> w=
rote:=0A>=0A> How can i remove the duplicates records in the search results=
. i.e., I=0A> have multiple results with the same title in 'title' field, a=
nd I want to=0A> only 1 record per title, how can I achieve that? thanks!!=
=0A>=0A>=0A> ---------------------------------=0A> Everyone is raving about=
 the all-new Yahoo! Mail beta.=0A>=0A=0A=0A =0A____________________________=
________________________________________________________=0AAny questions? G=
et answers on any topic at www.Answers.yahoo.com.  Try it now.
--0-546038120-1166138273=:86958--

From java-user-return-25061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 15 05:53:56 2006
Return-Path: <java-user-return-25061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1144 invoked from network); 15 Dec 2006 05:53:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 05:53:55 -0000
Received: (qmail 83597 invoked by uid 500); 15 Dec 2006 05:53:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83553 invoked by uid 500); 15 Dec 2006 05:53:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83542 invoked by uid 99); 15 Dec 2006 05:53:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 21:53:56 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Dec 2006 21:53:41 -0800
Received: (qmail 2137 invoked from network); 15 Dec 2006 05:49:27 -0000
Received: from unknown (HELO bhavin) (172.16.3.213)
  by mailserver with SMTP; 15 Dec 2006 05:49:27 -0000
Message-ID: <003901c7200f$82906d50$d50310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
References: <20061214193128.6042.qmail@web58619.mail.re3.yahoo.com>
Subject: Re: Duplicates removal in search results
Date: Fri, 15 Dec 2006 11:38:55 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

Hi qaz,

You can remove duplicates at search time by writing your own HitCollector...

- Bhavin pandya

----- Original Message ----- 
From: "qaz zaq" <fortques@yahoo.com>
To: <java-user@lucene.apache.org>
Sent: Friday, December 15, 2006 1:01 AM
Subject: Duplicates removal in search results


How can i remove the duplicates records in the search results. i.e., I have 
multiple results with the same title in 'title' field, and I want to only 1 
record per title, how can I achieve that? thanks!!



____________________________________________________________________________________
Need a quick answer? Get one in minutes from people who know.
Ask your question on www.Answers.yahoo.com 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 15 06:02:42 2006
Return-Path: <java-user-return-25062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3243 invoked from network); 15 Dec 2006 06:02:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 06:02:41 -0000
Received: (qmail 92259 invoked by uid 500); 15 Dec 2006 06:02:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91654 invoked by uid 500); 15 Dec 2006 06:02:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91643 invoked by uid 99); 15 Dec 2006 06:02:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Dec 2006 22:02:43 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Dec 2006 22:02:33 -0800
Received: (qmail 9510 invoked from network); 15 Dec 2006 05:58:21 -0000
Received: from unknown (HELO bhavin) (172.16.3.213)
  by mailserver with SMTP; 15 Dec 2006 05:58:21 -0000
Message-ID: <005501c72010$c0d5a160$d50310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
References: <20061214222250.GA22261@thegestalt.org>
Subject: Re: Search Suggestions
Date: Fri, 15 Dec 2006 11:47:49 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

Hi simon,

You can index the past query log for your search application and search the 
index the way you want...

- Bhavin pandya


----- Original Message ----- 
From: "Simon Wistow" <simon@thegestalt.org>
To: "Lucene" <java-user@lucene.apache.org>
Sent: Friday, December 15, 2006 3:52 AM
Subject: Search Suggestions


> Yahoo! has a search suggestion feature so that if you search for say
> 'shoes' then it also reccomends
>
> payless shoes, jordan shoes, aldo shoes, nike shoes, bakers shoes
>
> and a bunch of others.
>
> Has anyone built something like that in Lucene?
>
> Simon
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 15 11:53:39 2006
Return-Path: <java-user-return-25063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59511 invoked from network); 15 Dec 2006 11:52:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 11:52:52 -0000
Received: (qmail 79672 invoked by uid 500); 15 Dec 2006 11:50:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79410 invoked by uid 500); 15 Dec 2006 11:49:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78811 invoked by uid 99); 15 Dec 2006 11:49:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 03:49:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [220.225.240.24] (HELO mail01.naukri.com) (220.225.240.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 02:48:49 -0800
Received: from [172.16.0.162] ([172.16.0.162])
          by mail01.naukri.com (Lotus Domino Release 7.0)
          with ESMTP id 2006121516085776-113875 ;
          Fri, 15 Dec 2006 16:08:57 +0530 
Message-ID: <45827D79.1010005@naukri.com>
Date: Fri, 15 Dec 2006 16:18:25 +0530
From: Kapil Chhabra <kapil.chhabra@naukri.com>
User-Agent: Thunderbird 1.5.0.8 (X11/20061107)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: range query on dates
References: <1bcb7c7f0612140820u6fa5e9ffu227a3da8c2df2f38@mail.gmail.com>
In-Reply-To: <1bcb7c7f0612140820u6fa5e9ffu227a3da8c2df2f38@mail.gmail.com>
X-MIMETrack: Itemize by SMTP Server on noidaa88/naukri(Release 7.0|August 18, 2005) at
 12/15/2006 16:08:57,
	Serialize by Router on noidaa88/naukri(Release 7.0|August 18, 2005) at 12/15/2006
 16:09:20,
	Serialize complete at 12/15/2006 16:09:20
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org

In my applications, I have stored the dates as YYYYMMDD to make it 
simple and easy. Works just fine for me.

regards,
kapilChhabra

Cam Bazz wrote:
> Hello,
>
> how can I make a query to bring documents between timestamp begin and
> timestamp end, given that I have stored my dates using
> DateTools.timeToString(long)?
>
> Best regards,
>
> -C.B.
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 15 12:09:12 2006
Return-Path: <java-user-return-25064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70980 invoked from network); 15 Dec 2006 12:08:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 12:08:56 -0000
Received: (qmail 61858 invoked by uid 500); 15 Dec 2006 12:07:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60391 invoked by uid 500); 15 Dec 2006 12:07:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58424 invoked by uid 99); 15 Dec 2006 12:07:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 04:07:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [210.7.66.152] (HELO mail01.naukri.com) (210.7.66.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 02:31:56 -0800
Received: from [172.16.0.162] ([172.16.0.162])
          by mail01.naukri.com (Lotus Domino Release 7.0)
          with ESMTP id 2006121515520653-113509 ;
          Fri, 15 Dec 2006 15:52:06 +0530 
Message-ID: <45827985.7010305@naukri.com>
Date: Fri, 15 Dec 2006 16:01:33 +0530
From: Kapil Chhabra <kapil.chhabra@naukri.com>
User-Agent: Thunderbird 1.5.0.8 (X11/20061107)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Search Suggestions
References: <20061214222250.GA22261@thegestalt.org> <005501c72010$c0d5a160$d50310ac@bhavin>
In-Reply-To: <005501c72010$c0d5a160$d50310ac@bhavin>
X-MIMETrack: Itemize by SMTP Server on noidaa88/naukri(Release 7.0|August 18, 2005) at
 12/15/2006 15:52:06,
	Serialize by Router on noidaa88/naukri(Release 7.0|August 18, 2005) at 12/15/2006
 15:52:29,
	Serialize complete at 12/15/2006 15:52:29
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org

Exactly.
I have implemented such a feature. Just to add on to what Bhavin said, 
your results would be more relevant if you index only 2 & 3 token 
phrases and display a 3 token suggestion if the current search keyword 
consists of 2 tokens and so on.
Any suggestion beyond 3 tokens might not be very relevant. [depends on 
the data in your index]
Also, just to reduce the size and complexity, you may safely skip the 
single token search history.

All the best.

kapilChhabra

Bhavin Pandya wrote:
> Hi simon,
>
> You can index the past query log for your search application and 
> search the index the way you want...
>
> - Bhavin pandya
>
>
> ----- Original Message ----- From: "Simon Wistow" <simon@thegestalt.org>
> To: "Lucene" <java-user@lucene.apache.org>
> Sent: Friday, December 15, 2006 3:52 AM
> Subject: Search Suggestions
>
>
>> Yahoo! has a search suggestion feature so that if you search for say
>> 'shoes' then it also reccomends
>>
>> payless shoes, jordan shoes, aldo shoes, nike shoes, bakers shoes
>>
>> and a bunch of others.
>>
>> Has anyone built something like that in Lucene?
>>
>> Simon
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 15 12:54:56 2006
Return-Path: <java-user-return-25065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96350 invoked from network); 15 Dec 2006 12:54:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 12:54:41 -0000
Received: (qmail 76274 invoked by uid 500); 15 Dec 2006 12:43:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75687 invoked by uid 500); 15 Dec 2006 12:43:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75106 invoked by uid 99); 15 Dec 2006 12:43:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 04:43:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ramana.jelda@ciao-group.com designates 194.112.113.90 as permitted sender)
Received: from [194.112.113.90] (HELO pigeon.ciao.com) (194.112.113.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 00:56:45 -0800
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id kBF8uFhk075223
	for <java-user@lucene.apache.org>; Fri, 15 Dec 2006 09:56:15 +0100 (CET)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200612150856.kBF8uFhk075223@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene id generation
Date: Fri, 15 Dec 2006 09:56:09 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccgCsf3f6bF8P3XRbSEvV7eMl9ZdQAG654Q
In-Reply-To: <Pine.LNX.4.58.0612142132130.12525@hal.rescomp.berkeley.edu>
X-Scanned-By: MIMEDefang 2.57 on 194.112.113.90
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Hoss,
Exactly in this scenario, I would love to use my custom generated document
id.
The array reference number is MyId & its value is some-interested-value
matched to MyID.

So,how can I generate custom document id.?

Jelda

> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
> Sent: Friday, December 15, 2006 6:35 AM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene id generation
> 
> 
> Karl: it sounds like you are just refering to using the 
> lucene docid as an array index for the FieldCache of your 
> "MyID" field ... that's a perfectly valid use of the docid, 
> the key being that you aren't expecting the id to contain any 
> meaningful data itself -- it's just a refrence number.
> 
> : > if you are trying to think of Lucene's docid as a meaningful
> : > number, you
> : > are doing something wrong.
> :
> : There is this one place where I use it. The index is add only, and
> : the only data that interests me is the stored field MyID, also kept
> : track in an int[docid]. In case of index operation that 
> change docid,
> : I simply repopulate the int[].
> :
> : I throw this MyID value around quite a bit, starting in the hit
> : collector. It save me time from deserializing all hits.
> :
> : Is this reasonable?
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 15 17:29:04 2006
Return-Path: <java-user-return-25066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19703 invoked from network); 15 Dec 2006 17:29:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 17:29:03 -0000
Received: (qmail 62956 invoked by uid 500); 15 Dec 2006 17:29:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62927 invoked by uid 500); 15 Dec 2006 17:29:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62916 invoked by uid 99); 15 Dec 2006 17:29:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 09:29:02 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 15 Dec 2006 09:28:50 -0800
Received: (qmail 26391 invoked by uid 60001); 15 Dec 2006 17:28:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=k0tRBoVR22dpxhAU8I1pnnLTVLt0IF24Cw4UhjdObT74KD9VuVzRQIl1LiQmjf7w1rFH+qnGjdShv1CxGeEFsqo5rhKXY1z5+v0GcAcvVsqT2/4LJP4h9+0GDNQXJy8OBGBAyFEy0Iq56Yvku4wiCeNjp84PNyY6pjHcKP/SFlU=  ;
Message-ID: <20061215172829.26389.qmail@web50308.mail.yahoo.com>
Received: from [74.65.202.166] by web50308.mail.yahoo.com via HTTP; Fri, 15 Dec 2006 09:28:29 PST
Date: Fri, 15 Dec 2006 09:28:29 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Leaking org.apache.lucene.index.* objects
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AAbout 2-3 weeks ago I emailed about a memory leak in my applicatio=
n.  I then found some problems in my code (I wasn't closing IndexSearchers =
explicitly) and took care of those.  Now I see my app is still leaking memo=
ry - jconsole clearly shows the "Tenured Gen" memory pool getting filled up=
 until I hit the OOM, but I can't seem to pin-point the source.=0A=0AI foun=
d that a bunch or o.a.l.index.* objects are not getting GCed, even though t=
hey should.  For example:=0A=0A$ jmap -histo:live 7825 | grep apache.lucene=
.index | head -20 | sort -k2 -nr=0Anum   #instances    #bytes  class name=
=0A--------------------------------------=0A  4:   1764840    98831040  org=
.apache.lucene.index.CompoundFileReader$CSIndexInput=0A  5:   2119215    67=
814880  org.apache.lucene.index.TermInfo=0A  7:   1112459    35598688  org.=
apache.lucene.index.SegmentReader$Norm=0A  9:   2132311    34116976  org.ap=
ache.lucene.index.Term=0A 12:   1117897    26829528  org.apache.lucene.inde=
x.FieldInfo=0A 13:    225340    18027200  org.apache.lucene.index.SegmentTe=
rmEnum=0A 15:    589727    14153448  org.apache.lucene.index.TermBuffer=0A =
21:     86033     8718504  [Lorg.apache.lucene.index.TermInfo;=0A 20:     8=
6033     8718504  [Lorg.apache.lucene.index.Term;=0A 23:     86120     7578=
560  org.apache.lucene.index.SegmentReader=0A 26:     90501     5068056  or=
g.apache.lucene.store.FSIndexInput=0A 27:     86120     4822720  org.apache=
.lucene.index.TermInfosReader=0A 33:     86130     3445200  org.apache.luce=
ne.index.SegmentInfo=0A 36:     87355     2795360  org.apache.lucene.store.=
FSIndexInput$Descriptor=0A 38:     86120     2755840  org.apache.lucene.ind=
ex.FieldsReader=0A 39:     86050     2753600  org.apache.lucene.index.Compo=
undFileReader=0A 42:     46903     2251344  org.apache.lucene.index.Segment=
Infos=0A 43:     93778     2250672  org.apache.lucene.search.FieldCacheImpl=
$Entry=0A 45:     93778     1500448  org.apache.lucene.search.FieldCacheImp=
l$CreationPlaceholder=0A 47:     86510     1384160  org.apache.lucene.index=
.FieldInfos=0A=0AI'm running my app in search-only mode - no adds or delete=
s.=0AThe counts of these objects just keeps going up, even though I am expl=
icitly closing the IndexSearcher.  I can see that file descriptors _are_ fr=
eed up after searcher.close(), because lsof no longer shows them, but the a=
bove objects just linger and accumulate, even when I force GC via jconsole =
or via the profiler.=0A=0AI thought maybe various *Readers are not getting =
close()d, but I've double-checked all *Readers above, and they all seem to =
close their IndexInput references.  The static nested class CompoundFileRea=
der.CSIndexInput has a close() without any implementation.  At first I thou=
ght that was an omission, but adding a close of the inner IndexInput there =
resulted in a search-time error.  I've added the lovely print debugging to =
various close() methods and see those methods being called.  I've added fin=
alize() with some print debugging to SegmentReader, TermInfosReader, Segmen=
tTermEnum, FieldsReader, and CompoundFileReader.  All but CFReader get fina=
lized after a while.=0A=0AMy application is running as a webapp and has tho=
usands of separate indices.  This means it's very multi-threaded and the se=
rvlet container has a pool of threads that handle requests, and each reques=
t may be for a different index.  I cache IndexSearchers for a while, and pu=
rge/close them every N minutes if they have been idle more than M minutes.=
=0AIt occurred to me last night that things like TermInfosReader and Segmen=
tReader are using ThreadLocal, and since threads are used in a thread pool,=
 and thus shared with requests handling searches against different indices,=
 it's not clear to me what happens with object instances that are put in th=
ose ThreadLocals in such scenario.  Aren't things going to step on each oth=
ers' toes?=0ATIR has close() and SR has doClose(), so I put <TL inst>.set(n=
ull) there.  This immediately got rid of those instances of CompoundFileRea=
der.CSIndexInput in my dev environment!!!! Yeeees!=0A=0ABut in my dev envir=
onment I tested my additions by slamming my app against a *single* index.  =
I took my modified Lucene to production, and quickly saw all those o.a.l.in=
dex.* objects accumulate again.  I also see a lot of ThreadLocal's kids:=0A=
=0A 16:    419387    13420384  java.lang.ThreadLocal$ThreadLocalMap$Entry=
=0A=0AI *think* that points out to some issues with how that ThreadLocal is=
 used there, in a multi-threaded, multi-index environments.=0AI'm running J=
DK 6, and while this problem sounds a bit like LUCENE-436, I'm not yet sure=
 if it's the same thing.  =0ABecause my IndexSearchers (and thus all those =
o.a.l.index.* objects) are long-lived, and threads are shared and reused fo=
r searching of other indices, those close() and doClose() methods are not c=
alled at the end of the request life-cycle, so at the end of the request th=
ose TL instances will *still* have something in them.  When their thread is=
 later reused for searching of another index, new data will be put in them,=
 but the old data will never be cleaned out!  No?=0AIt seems a bit odd, but=
 with this ThreadLocals, shouldn't a multi-threaded, multi-index webapp rea=
lly have to "clean" those ThreadLocal instances either before or at the end=
 of the request?=0A=0AI'm running out of ideas, and was wondering if anyone=
 has any thoughts about what could still be holding references to the above=
 classes.  I have some 20-30MB memory snapshots (via YourKit) and heap dump=
s (via jmap), if anyone is interested.=0A=0AThanks,=0AOtis=0A=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 15 21:17:37 2006
Return-Path: <java-user-return-25067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89969 invoked from network); 15 Dec 2006 21:17:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2006 21:17:35 -0000
Received: (qmail 58031 invoked by uid 500); 15 Dec 2006 21:17:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57995 invoked by uid 500); 15 Dec 2006 21:17:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57984 invoked by uid 99); 15 Dec 2006 21:17:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 13:17:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 13:17:25 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GvKQT-0007CS-FA
	for java-user@lucene.apache.org; Fri, 15 Dec 2006 13:17:05 -0800
Message-ID: <7899335.post@talk.nabble.com>
Date: Fri, 15 Dec 2006 13:17:05 -0800 (PST)
From: mmoser <mmoser@balihoo.com>
To: java-user@lucene.apache.org
Subject: Sorting by a percentage On a field
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mmoser@balihoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


So, I am still new to Lucene, so please take this into consideration when
reading this. Up until now, a novice like myself has been able to finagle
Lucene into doing what we want. But now we have a problem that I have been
searching for the answer to. We allow users to profile our products with a
predetermined profile attribute id. We then want to take all the users
profiles on a product and take a particular number of times that this
particular profile attribute id has been chosen and come out with a
percentage for it. This is no problem. Where the problem comes into play is
that we want the user to be able to search for products that match that
particular profile attribute id. We want the higher percentages to come up
on top. To add to the complexity, we want to be able to allow for the user
to select multiple profile attribute ids and still have a combination of the
score to come up higher. Keep in mind, we would like to somehow keep these
in one field, because we are trying to use the same algorithm for something
that could potentially become very large. Any suggestions. The more detail,
the better. 

Example:

Product A
Attribute ID = 2    Percentage Chosen = 50%
Attribute ID = 5    Percentage Chosen = 30%
Attribute ID = 3    Percentage Chosen = 10%
Attribute ID = 13    Percentage Chosen = 30%

Product B
Attribute ID = 1    Percentage Chosen = 50%
Attribute ID = 2    Percentage Chosen = 20%
Attribute ID = 3    Percentage Chosen = 75%

So if a user selected the attributes that correspond to 2 and 3, then
Product B should show up before Product A because it has a combined score of
95% and A has a combined score of 40%.

Thanks for any help.


-- 
View this message in context: http://www.nabble.com/Sorting-by-a-percentage-On-a-field-tf2829501.html#a7899335
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 16 01:04:49 2006
Return-Path: <java-user-return-25068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37997 invoked from network); 16 Dec 2006 01:04:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 01:04:48 -0000
Received: (qmail 98079 invoked by uid 500); 16 Dec 2006 01:04:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97052 invoked by uid 500); 16 Dec 2006 01:04:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97041 invoked by uid 99); 16 Dec 2006 01:04:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 17:04:49 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 17:04:37 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id kBG14G9e123642
	for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 01:04:16 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kBG14GLe2756858
	for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 02:04:16 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kBG14Gkv003392
	for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 02:04:16 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kBG14FPb003389
	for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 02:04:15 +0100
In-Reply-To: <7899335.post@talk.nabble.com>
Subject: Re: Sorting by a percentage On a field
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF53186789.D1C22677-ON88257246.0003DD9D-88257246.0005C53B@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 15 Dec 2006 17:03:01 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 16/12/2006 03:04:15
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

I think the right solution for this would use "payloads", where extra data
can be added for each index token. However Lucene currently does not
support this. Without this I can think of two options, each with its own
disadvantage:

1) more tokens at indexing time - decide on the resolution of the
percentage - say it is 5% - and add more tokens of the same. For example,
the attributes field for product A in your example would look like: "2 2 2
2 2 2 2 2 2 2 5 5 5 5 5 5 3 3 13 13 13 13 13 13".

2) more tokens at search time - at indexing, include the percentage in the
token. So for product A you would have: "2x50 5x30 3x10 13x30". At search
time, expand the query accordingly. So the query for attribute 5 would be
expanded to: "5x5^5 5x10^10 5x15^15 5x20^20 ... 5x95^95 5x100^100".

The first approach would enlarge the index, so if you have lots of data
that could eventually be a problem.
The second approach would end up with a large query, so, again, if you have
lots of data that could eventually be a problem with search time.

Also, depending how strict you want the scoring to be, you may want to omit
norms for this field.

Hope this helps,
Doron

mmoser <mmoser@balihoo.com> wrote on 15/12/2006 13:17:05:
>
> So, I am still new to Lucene, so please take this into consideration when
> reading this. Up until now, a novice like myself has been able to finagle
> Lucene into doing what we want. But now we have a problem that I have
been
> searching for the answer to. We allow users to profile our products with
a
> predetermined profile attribute id. We then want to take all the users
> profiles on a product and take a particular number of times that this
> particular profile attribute id has been chosen and come out with a
> percentage for it. This is no problem. Where the problem comes into play
is
> that we want the user to be able to search for products that match that
> particular profile attribute id. We want the higher percentages to come
up
> on top. To add to the complexity, we want to be able to allow for the
user
> to select multiple profile attribute ids and still have a combination of
the
> score to come up higher. Keep in mind, we would like to somehow keep
these
> in one field, because we are trying to use the same algorithm for
something
> that could potentially become very large. Any suggestions. The more
detail,
> the better.
>
> Example:
>
> Product A
> Attribute ID = 2    Percentage Chosen = 50%
> Attribute ID = 5    Percentage Chosen = 30%
> Attribute ID = 3    Percentage Chosen = 10%
> Attribute ID = 13    Percentage Chosen = 30%
>
> Product B
> Attribute ID = 1    Percentage Chosen = 50%
> Attribute ID = 2    Percentage Chosen = 20%
> Attribute ID = 3    Percentage Chosen = 75%
>
> So if a user selected the attributes that correspond to 2 and 3, then
> Product B should show up before Product A because it has a combined score
of
> 95% and A has a combined score of 40%.
>
> Thanks for any help.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 16 01:12:57 2006
Return-Path: <java-user-return-25069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39422 invoked from network); 16 Dec 2006 01:12:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 01:12:56 -0000
Received: (qmail 1998 invoked by uid 500); 16 Dec 2006 01:12:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1971 invoked by uid 500); 16 Dec 2006 01:12:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1960 invoked by uid 99); 16 Dec 2006 01:12:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 17:12:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.138.248.236] (HELO bacchus.thegestalt.org) (82.138.248.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 17:12:46 -0800
Received: from [82.138.248.236] (helo=bacchus.thegestalt.org)
	by jail0061.vps.exonetric.net with esmtp (Exim 4.61 (FreeBSD))
	(envelope-from <simon@thegestalt.org>)
	id 1GvO6C-000F1i-BC
	for java-user@lucene.apache.org; Sat, 16 Dec 2006 01:12:24 +0000
Received: (from simon@localhost)
	by bacchus.thegestalt.org (8.13.6/8.13.6/Submit) id kBG1CKXW057760
	for java-user@lucene.apache.org; Sat, 16 Dec 2006 01:12:20 GMT
	(envelope-from simon@thegestalt.org)
X-Authentication-Warning: bacchus.thegestalt.org: simon set sender to simon@thegestalt.org using -f
Date: Sat, 16 Dec 2006 01:12:20 +0000
From: Simon Wistow <simon@thegestalt.org>
To: java-user@lucene.apache.org
Subject: Re: Search Suggestions
Message-ID: <20061216011219.GJ22261@thegestalt.org>
References: <20061214222250.GA22261@thegestalt.org> <005501c72010$c0d5a160$d50310ac@bhavin> <45827985.7010305@naukri.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <45827985.7010305@naukri.com>
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Dec 15, 2006 at 04:01:33PM +0530, Kapil Chhabra said:
> I have implemented such a feature. Just to add on to what Bhavin said, 
> your results would be more relevant if you index only 2 & 3 token 
> phrases and display a 3 token suggestion if the current search keyword 
> consists of 2 tokens and so on.

Ahah, genius.

Thanks muchly, that'll do the trick.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 16 05:10:03 2006
Return-Path: <java-user-return-25070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74346 invoked from network); 16 Dec 2006 05:10:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 05:10:02 -0000
Received: (qmail 29274 invoked by uid 500); 16 Dec 2006 05:10:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28668 invoked by uid 500); 16 Dec 2006 05:09:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28657 invoked by uid 99); 16 Dec 2006 05:09:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 21:09:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 21:09:48 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GvRnb-0006eJ-J7
	for java-user@lucene.apache.org; Fri, 15 Dec 2006 21:09:27 -0800
Message-ID: <7903444.post@talk.nabble.com>
Date: Fri, 15 Dec 2006 21:09:27 -0800 (PST)
From: mmoser <mmoser@balihoo.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting by a percentage On a field
In-Reply-To: <OF53186789.D1C22677-ON88257246.0003DD9D-88257246.0005C53B@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mmoser@balihoo.com
References: <7899335.post@talk.nabble.com> <OF53186789.D1C22677-ON88257246.0003DD9D-88257246.0005C53B@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your reply. We have currently thought about both of these
approaches, so that definitely makes me feel better about things. The first
approach you had mentioned, we had thought about our tagging problem and how
to make a product tag come to the top, but again, with a lot of tags, the
data becomes extremely large. Even if we were to take some magnitude and
apply it, it could possibly be huge due to an infinite number of tags.

The second approach we had considered doing a version almost like that. I
had considered that if we have a query such as the one you are talking about
mixed with other fields, then the query would be extremely big. Especially
if the user was looking for 15 attribute ids which would be 15 * 10 = 150
different ORed term searches alone  if we were only searching every 10
percent. 

I definitely thank you for this input and would love to hear if anyone has
any other approaches. If not, we will probably attempt one of these routes
and see which one is a bigger storage / performance hit.

Mike



Doron Cohen wrote:
>  
> I think the right solution for this would use "payloads", where extra data
> can be added for each index token. However Lucene currently does not
> support this. Without this I can think of two options, each with its own
> disadvantage:
> 
> 1) more tokens at indexing time - decide on the resolution of the
> percentage - say it is 5% - and add more tokens of the same. For example,
> the attributes field for product A in your example would look like: "2 2 2
> 2 2 2 2 2 2 2 5 5 5 5 5 5 3 3 13 13 13 13 13 13".
> 
> 2) more tokens at search time - at indexing, include the percentage in the
> token. So for product A you would have: "2x50 5x30 3x10 13x30". At search
> time, expand the query accordingly. So the query for attribute 5 would be
> expanded to: "5x5^5 5x10^10 5x15^15 5x20^20 ... 5x95^95 5x100^100".
> 
> The first approach would enlarge the index, so if you have lots of data
> that could eventually be a problem.
> The second approach would end up with a large query, so, again, if you
> have
> lots of data that could eventually be a problem with search time.
> 
> Also, depending how strict you want the scoring to be, you may want to
> omit
> norms for this field.
> 
> Hope this helps,
> Doron
> 
> mmoser <mmoser@balihoo.com> wrote on 15/12/2006 13:17:05:
>>
>> So, I am still new to Lucene, so please take this into consideration when
>> reading this. Up until now, a novice like myself has been able to finagle
>> Lucene into doing what we want. But now we have a problem that I have
> been
>> searching for the answer to. We allow users to profile our products with
> a
>> predetermined profile attribute id. We then want to take all the users
>> profiles on a product and take a particular number of times that this
>> particular profile attribute id has been chosen and come out with a
>> percentage for it. This is no problem. Where the problem comes into play
> is
>> that we want the user to be able to search for products that match that
>> particular profile attribute id. We want the higher percentages to come
> up
>> on top. To add to the complexity, we want to be able to allow for the
> user
>> to select multiple profile attribute ids and still have a combination of
> the
>> score to come up higher. Keep in mind, we would like to somehow keep
> these
>> in one field, because we are trying to use the same algorithm for
> something
>> that could potentially become very large. Any suggestions. The more
> detail,
>> the better.
>>
>> Example:
>>
>> Product A
>> Attribute ID = 2    Percentage Chosen = 50%
>> Attribute ID = 5    Percentage Chosen = 30%
>> Attribute ID = 3    Percentage Chosen = 10%
>> Attribute ID = 13    Percentage Chosen = 30%
>>
>> Product B
>> Attribute ID = 1    Percentage Chosen = 50%
>> Attribute ID = 2    Percentage Chosen = 20%
>> Attribute ID = 3    Percentage Chosen = 75%
>>
>> So if a user selected the attributes that correspond to 2 and 3, then
>> Product B should show up before Product A because it has a combined score
> of
>> 95% and A has a combined score of 40%.
>>
>> Thanks for any help.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Sorting-by-a-percentage-On-a-field-tf2829501.html#a7903444
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 16 06:14:42 2006
Return-Path: <java-user-return-25071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81046 invoked from network); 16 Dec 2006 06:14:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 06:14:41 -0000
Received: (qmail 62854 invoked by uid 500); 16 Dec 2006 06:14:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62819 invoked by uid 500); 16 Dec 2006 06:14:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62808 invoked by uid 99); 16 Dec 2006 06:14:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 22:14:42 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Dec 2006 22:14:30 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id kBG6E9Cl130736
	for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 06:14:09 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kBG6E9ns2998318
	for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 07:14:09 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kBG6E8vN014228
	for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 07:14:08 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kBG6E8q9014225
	for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 07:14:08 +0100
In-Reply-To: <7903444.post@talk.nabble.com>
Subject: Re: Sorting by a percentage On a field
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF66EBDDAD.7AB8B596-ON88257246.001D86C7-88257246.00211FD7@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 15 Dec 2006 22:01:48 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 16/12/2006 08:14:08
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

I think there's a better way - using SpanFirstQuery.

This query scores higher a term positioned closer to the beginning of a
document.

Assume your resolution is 1%, i.e. 1 to 100, create the percentage field
with max token position 99.  Generate the tokens such that all IDs with
percentage 100 would have token position of 0, all those with percentage 99
would have token position of 1, all those with percentage n would have
token position of 100-n. I never done it myself but I know it is doable,
see Token.setPositionIncrement().

So for document A below the percentage field would look like this: "2[50]
5[20] 13[0] 3[20]" - read this as tokenWord[tokenPositionIcrement]. So this
would places "2" in position 50, "5" and "13" in position 70, and "3" in
position 90.

The query for "2" and "3" would be composed of two SpanFirstQuery objects -
one with "2" and one with "3" - composed in a BooleanQuery I guess.

You can change the effect of the distance on the score by providing your
Similarity class and overriding sloppyFreq().

Regards,
Doron

mmoser <mmoser@balihoo.com> wrote on 15/12/2006 21:09:27:
>
> Thanks for your reply. We have currently thought about both of these
> approaches, so that definitely makes me feel better about things. The
first
> approach you had mentioned, we had thought about our tagging problem and
how
> to make a product tag come to the top, but again, with a lot of tags, the
> data becomes extremely large. Even if we were to take some magnitude and
> apply it, it could possibly be huge due to an infinite number of tags.
>
> The second approach we had considered doing a version almost like that. I
> had considered that if we have a query such as the one you are talking
about
> mixed with other fields, then the query would be extremely big.
Especially
> if the user was looking for 15 attribute ids which would be 15 * 10 = 150
> different ORed term searches alone  if we were only searching every 10
> percent.
>
> I definitely thank you for this input and would love to hear if anyone
has
> any other approaches. If not, we will probably attempt one of these
routes
> and see which one is a bigger storage / performance hit.
>
> Mike
>
>
>
> Doron Cohen wrote:
> >
> > I think the right solution for this would use "payloads", where extra
data
> > can be added for each index token. However Lucene currently does not
> > support this. Without this I can think of two options, each with its
own
> > disadvantage:
> >
> > 1) more tokens at indexing time - decide on the resolution of the
> > percentage - say it is 5% - and add more tokens of the same. For
example,
> > the attributes field for product A in your example would look like: "2
2 2
> > 2 2 2 2 2 2 2 5 5 5 5 5 5 3 3 13 13 13 13 13 13".
> >
> > 2) more tokens at search time - at indexing, include the percentage in
the
> > token. So for product A you would have: "2x50 5x30 3x10 13x30". At
search
> > time, expand the query accordingly. So the query for attribute 5 would
be
> > expanded to: "5x5^5 5x10^10 5x15^15 5x20^20 ... 5x95^95 5x100^100".
> >
> > The first approach would enlarge the index, so if you have lots of data
> > that could eventually be a problem.
> > The second approach would end up with a large query, so, again, if you
> > have
> > lots of data that could eventually be a problem with search time.
> >
> > Also, depending how strict you want the scoring to be, you may want to
> > omit
> > norms for this field.
> >
> > Hope this helps,
> > Doron
> >
> > mmoser <mmoser@balihoo.com> wrote on 15/12/2006 13:17:05:
> >>
> >> So, I am still new to Lucene, so please take this into consideration
when
> >> reading this. Up until now, a novice like myself has been able to
finagle
> >> Lucene into doing what we want. But now we have a problem that I have
> > been
> >> searching for the answer to. We allow users to profile our products
with
> > a
> >> predetermined profile attribute id. We then want to take all the users
> >> profiles on a product and take a particular number of times that this
> >> particular profile attribute id has been chosen and come out with a
> >> percentage for it. This is no problem. Where the problem comes into
play
> > is
> >> that we want the user to be able to search for products that match
that
> >> particular profile attribute id. We want the higher percentages to
come
> > up
> >> on top. To add to the complexity, we want to be able to allow for the
> > user
> >> to select multiple profile attribute ids and still have a combination
of
> > the
> >> score to come up higher. Keep in mind, we would like to somehow keep
> > these
> >> in one field, because we are trying to use the same algorithm for
> > something
> >> that could potentially become very large. Any suggestions. The more
> > detail,
> >> the better.
> >>
> >> Example:
> >>
> >> Product A
> >> Attribute ID = 2    Percentage Chosen = 50%
> >> Attribute ID = 5    Percentage Chosen = 30%
> >> Attribute ID = 3    Percentage Chosen = 10%
> >> Attribute ID = 13    Percentage Chosen = 30%
> >>
> >> Product B
> >> Attribute ID = 1    Percentage Chosen = 50%
> >> Attribute ID = 2    Percentage Chosen = 20%
> >> Attribute ID = 3    Percentage Chosen = 75%
> >>
> >> So if a user selected the attributes that correspond to 2 and 3, then
> >> Product B should show up before Product A because it has a combined
score
> > of
> >> 95% and A has a combined score of 40%.
> >>
> >> Thanks for any help.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context: http://www.nabble.com/Sorting-by-a-
> percentage-On-a-field-tf2829501.html#a7903444
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 16 08:56:39 2006
Return-Path: <java-user-return-25072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12971 invoked from network); 16 Dec 2006 08:56:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 08:56:37 -0000
Received: (qmail 34288 invoked by uid 500); 16 Dec 2006 08:56:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34254 invoked by uid 500); 16 Dec 2006 08:56:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34243 invoked by uid 99); 16 Dec 2006 08:56:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 00:56:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 00:56:28 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3CCEA5B764; Sat, 16 Dec 2006 00:56:08 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 310C17F403
	for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 00:56:08 -0800 (PST)
Date: Sat, 16 Dec 2006 00:56:08 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Lucene id generation
In-Reply-To: <200612150856.kBF8uFhk075223@pigeon.ciao.com>
Message-ID: <Pine.LNX.4.58.0612160053301.31384@hal.rescomp.berkeley.edu>
References: <200612150856.kBF8uFhk075223@pigeon.ciao.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Exactly in this scenario, I would love to use my custom generated document
: id.
: The array reference number is MyId & its value is some-interested-value
: matched to MyID.
:
: So,how can I generate custom document id.?

you can't .. you can index you custom "MyID" value and use the FieldCache
to look it up -- using the lucene docid.

That's what Karl is refering to: he uses the lucene docid as the *index*
in the array, and his MyId values are *stored* in the array.


: > -----Original Message-----
: > From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
: > Sent: Friday, December 15, 2006 6:35 AM
: > To: java-user@lucene.apache.org
: > Subject: Re: Lucene id generation
: >
: >
: > Karl: it sounds like you are just refering to using the
: > lucene docid as an array index for the FieldCache of your
: > "MyID" field ... that's a perfectly valid use of the docid,
: > the key being that you aren't expecting the id to contain any
: > meaningful data itself -- it's just a refrence number.
: >
: > : > if you are trying to think of Lucene's docid as a meaningful
: > : > number, you
: > : > are doing something wrong.
: > :
: > : There is this one place where I use it. The index is add only, and
: > : the only data that interests me is the stored field MyID, also kept
: > : track in an int[docid]. In case of index operation that
: > change docid,
: > : I simply repopulate the int[].
: > :
: > : I throw this MyID value around quite a bit, starting in the hit
: > : collector. It save me time from deserializing all hits.
: > :
: > : Is this reasonable?
: >
: >
: >
: > -Hoss
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 16 10:30:14 2006
Return-Path: <java-user-return-25073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29719 invoked from network); 16 Dec 2006 10:30:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 10:30:13 -0000
Received: (qmail 78560 invoked by uid 500); 16 Dec 2006 10:30:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78522 invoked by uid 500); 16 Dec 2006 10:30:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78511 invoked by uid 99); 16 Dec 2006 10:30:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 02:30:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of howachen@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 02:30:02 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1111132ugc
        for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 02:29:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=ociHPQRE0yDQNREbkUX6VEIhqDp2ja1K/1U295vv5HnUmBnc0JQZn9eeub7OACUfOCpwXrDlZoZmII/jnCgrho4T1CXIwFUXBoRampt45jp85QR74XE+3N7qUC6/uxPIlhtdxFtY+kyKrbqejFhs3sJBVXpvhtQSrfXFIgOoVXs=
Received: by 10.67.101.10 with SMTP id d10mr1451004ugm.1166264981326;
        Sat, 16 Dec 2006 02:29:41 -0800 (PST)
Received: by 10.66.234.15 with HTTP; Sat, 16 Dec 2006 02:29:40 -0800 (PST)
Message-ID: <b66ddc900612160229x376aa714n3a77876282033cfe@mail.gmail.com>
Date: Sat, 16 Dec 2006 18:29:40 +0800
From: "howard chen" <howachen@gmail.com>
To: java-user@lucene.apache.org
Subject: [Interesting Question] How to implement Indexes Grouping?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Consider the following interesting situation,

A library has around 100K book, and want to be indexed by Lucene, this
seems to be straight forward, but....

The target is:

0. You can search all books in the whole library [easy, just index it]

1. users in this system can own a numbers of books in their personal
bookshelf, the users might only want to search book in their bookshelf
ONLY.

2. if each users own a copy of the index of their personal bookshelf,
this seems to be waste of storage space as books are shared by many
users.

3. If no matter users own what book, the whole indexes is to be
searched, this seems to be waste of computation power if he just own a
few books only.


In this situation, how would you design a indexing + search system?

Any idea can share?

:)

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 16 13:50:59 2006
Return-Path: <java-user-return-25074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7128 invoked from network); 16 Dec 2006 13:50:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 13:50:43 -0000
Received: (qmail 82577 invoked by uid 500); 16 Dec 2006 13:50:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82539 invoked by uid 500); 16 Dec 2006 13:50:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82528 invoked by uid 99); 16 Dec 2006 13:50:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 05:50:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 05:50:18 -0800
Received: by nf-out-0910.google.com with SMTP id n28so121128nfc
        for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 05:49:56 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JgRc73hd3GU7+B7m+RuBGnhXXsVaMvH2/EIdygSj/pXJ2UEAmeH4T7XvxY6YpJ4bMkvKMINmqXlvZFeNLOUwV4zxlmH9cuYZG1C3ou6UfTA4K72GhPtsXuvYd7W92q4gAZSmyj/Z0F3T3oMKhWBHlApsNLitKqJHd3+0iFeLl5o=
Received: by 10.82.135.13 with SMTP id i13mr260823bud.1166276996397;
        Sat, 16 Dec 2006 05:49:56 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Sat, 16 Dec 2006 05:49:56 -0800 (PST)
Message-ID: <359a92830612160549v4cb6fda8w10815a96c84c45f8@mail.gmail.com>
Date: Sat, 16 Dec 2006 08:49:56 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: [Interesting Question] How to implement Indexes Grouping?
In-Reply-To: <b66ddc900612160229x376aa714n3a77876282033cfe@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_190072_12194734.1166276996355"
References: <b66ddc900612160229x376aa714n3a77876282033cfe@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_190072_12194734.1166276996355
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'd start with just one big index and test <G>. My point is that you can't
speculate. The first question you have to answer is "is searching the whole
index fast enough given my architecture?" and we can't answer that. Nor can
you until you try.......

We especially can't speculate since you've provided no clue how many users
you're talking about. 10? 1,000,000? How many books do you expect them to
own? 10? 100,000? I can't imagine separate indexes for 1M users each owning
all 1000 books. I can imagine it for 10 users owning 100 books.....

Assuming that you get decent performance in a single index, I'd create a
filter at query time for a user. The filter has the bits turned on for the
books the user owns and include the filter as part of a BooleanQuery when I
searched the text. The filters could even be permanently stored rather than
created each time, but I'd save that refinement for later.....

Note that if you do store a filter, they are quite small. 1 bit per book (+
very small overhead)....

Best
Erick

On 12/16/06, howard chen <howachen@gmail.com> wrote:
>
> Consider the following interesting situation,
>
> A library has around 100K book, and want to be indexed by Lucene, this
> seems to be straight forward, but....
>
> The target is:
>
> 0. You can search all books in the whole library [easy, just index it]
>
> 1. users in this system can own a numbers of books in their personal
> bookshelf, the users might only want to search book in their bookshelf
> ONLY.
>
> 2. if each users own a copy of the index of their personal bookshelf,
> this seems to be waste of storage space as books are shared by many
> users.
>
> 3. If no matter users own what book, the whole indexes is to be
> searched, this seems to be waste of computation power if he just own a
> few books only.
>
>
> In this situation, how would you design a indexing + search system?
>
> Any idea can share?
>
> :)
>
> Thanks.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_190072_12194734.1166276996355--

From java-user-return-25075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 16 14:23:09 2006
Return-Path: <java-user-return-25075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24253 invoked from network); 16 Dec 2006 14:23:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 14:23:08 -0000
Received: (qmail 6376 invoked by uid 500); 16 Dec 2006 14:22:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6336 invoked by uid 500); 16 Dec 2006 14:22:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6322 invoked by uid 99); 16 Dec 2006 14:22:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 06:22:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of howachen@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 06:22:43 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1150643ugc
        for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 06:22:21 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=XQkHRla1kt0NHMh3Y8Uu2f1lr57VHy0TLh5crWZZTVWxRXXp9FCJKFlFcs5M5yR3wim3DJ/bV8blAbr1Mnw4EpxBjPqXPBo7T21mkAp/uOedgMUfBshEQ0buwsN74S63JjPIryun7Uil5tHryLRu+7HlrItE6FEd85s8CqMip/k=
Received: by 10.67.119.9 with SMTP id w9mr1784762ugm.1166278941358;
        Sat, 16 Dec 2006 06:22:21 -0800 (PST)
Received: by 10.66.234.15 with HTTP; Sat, 16 Dec 2006 06:22:21 -0800 (PST)
Message-ID: <b66ddc900612160622i79e5fae2r16e0decab9dbc7c7@mail.gmail.com>
Date: Sat, 16 Dec 2006 22:22:21 +0800
From: "howard chen" <howachen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: [Interesting Question] How to implement Indexes Grouping?
In-Reply-To: <359a92830612160549v4cb6fda8w10815a96c84c45f8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <b66ddc900612160229x376aa714n3a77876282033cfe@mail.gmail.com>
	 <359a92830612160549v4cb6fda8w10815a96c84c45f8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 12/16/06, Erick Erickson <erickerickson@gmail.com> wrote:
> I'd start with just one big index and test <G>. My point is that you can't
> speculate. The first question you have to answer is "is searching the whole
> index fast enough given my architecture?" and we can't answer that. Nor can
> you until you try.......
>
> We especially can't speculate since you've provided no clue how many users
> you're talking about. 10? 1,000,000? How many books do you expect them to
> own? 10? 100,000? I can't imagine separate indexes for 1M users each owning
> all 1000 books. I can imagine it for 10 users owning 100 books.....
>
> Assuming that you get decent performance in a single index, I'd create a
> filter at query time for a user. The filter has the bits turned on for the
> books the user owns and include the filter as part of a BooleanQuery when I
> searched the text. The filters could even be permanently stored rather than
> created each time, but I'd save that refinement for later.....
>
> Note that if you do store a filter, they are quite small. 1 bit per book (+
> very small overhead)....
>
> Best
> Erick
>
> On 12/16/06, howard chen <howachen@gmail.com> wrote:
> >
> > Consider the following interesting situation,
> >
> > A library has around 100K book, and want to be indexed by Lucene, this
> > seems to be straight forward, but....
> >
> > The target is:
> >
> > 0. You can search all books in the whole library [easy, just index it]
> >
> > 1. users in this system can own a numbers of books in their personal
> > bookshelf, the users might only want to search book in their bookshelf
> > ONLY.
> >
> > 2. if each users own a copy of the index of their personal bookshelf,
> > this seems to be waste of storage space as books are shared by many
> > users.
> >
> > 3. If no matter users own what book, the whole indexes is to be
> > searched, this seems to be waste of computation power if he just own a
> > few books only.
> >
> >
> > In this situation, how would you design a indexing + search system?
> >
> > Any idea can share?
> >
> > :)
> >
> > Thanks.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

I agree that filter is a way of implement it. My concern is that with
such big index, say 100K book full text indexed, this will become the
bottom neck and it is difficult to distribute the indexing and
searching.

My initial thinking is to group the index by Call. No, say to divide
100K books into 20 subgroups, and when user search it, it will create
20 threads to search for the book in different servers.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 16 15:38:54 2006
Return-Path: <java-user-return-25076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36541 invoked from network); 16 Dec 2006 15:38:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 15:38:54 -0000
Received: (qmail 47762 invoked by uid 500); 16 Dec 2006 15:38:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47675 invoked by uid 500); 16 Dec 2006 15:38:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47339 invoked by uid 99); 16 Dec 2006 15:38:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 07:38:51 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 07:38:41 -0800
Received: by nf-out-0910.google.com with SMTP id n28so146603nfc
        for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 07:38:19 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ctMGpDCBsTfgxBzV5M80B02mXJcc1w2avfhmok5Q3rKSAcomY/n4KBV6X98BtTM2Qm0roa6B2d+EU09hLpXbu4Do2lPxgI+M0nlZPfwmNWlts2uD7T38DZ7ikgqo9bBnd+RQ7F6D5HrQtGSPBagiBmCbajDgRH7yB8u2IuqSfT8=
Received: by 10.82.184.2 with SMTP id h2mr268770buf.1166283499083;
        Sat, 16 Dec 2006 07:38:19 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Sat, 16 Dec 2006 07:38:18 -0800 (PST)
Message-ID: <359a92830612160738h48713615o311604f338013736@mail.gmail.com>
Date: Sat, 16 Dec 2006 10:38:18 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: [Interesting Question] How to implement Indexes Grouping?
In-Reply-To: <b66ddc900612160622i79e5fae2r16e0decab9dbc7c7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_190796_20255655.1166283498990"
References: <b66ddc900612160229x376aa714n3a77876282033cfe@mail.gmail.com>
	 <359a92830612160549v4cb6fda8w10815a96c84c45f8@mail.gmail.com>
	 <b66ddc900612160622i79e5fae2r16e0decab9dbc7c7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_190796_20255655.1166283498990
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can't tell until you get some numbers. So try it. I'm indexing 4,600
books in about 45 minutes on a laptop as part of my current project. So it
shouldn't be much of a problem to index, say, 10,000 books as a starter set.
This will give you some idea of the size of your index(es), and some idea of
the performance. You're almost required to do this since nobody can answer
performance questions in the abstract. It depends.... how much are you
indexing? What is your index structure? etc. etc. etc.

Be aware that Lucene indexes the first 10,000 tokens by default. You can
make this as large as you want, but you have to do this consciously.

It should take you less than a day to create a test harness that fires off N
threads at your searcher to measure load. I can't emphasize enough how
valuable this will be as you design your system.

Changing from a single index to a distributed one isn't difficult, see
Multisearcher. Partitioning the index is something you'll have to do anyway
and I'd build it on multiple instances of a simple indexer, so starting with
the simple, single index case doesn't waste any time.

You need to answer some questions for yourself... stored or unstored text?
How many other fields do you want to store and/or index? What is acceptable
performance?

My point is that you can get quite a ways with a very simple design, without
doing much in the way of throw-away work. And the answers you get from the
simple case will give you actual data to make further decisions. Otherwise,
you risk making a complex solution that you don't need. Do you have any
basis at all for estimating that 20 subgroups is sufficient and necessary?

Your goal here is to get the answer for your final design as quickly as
possible. At the same time, you want to waste as little time writing code
that you'll discard later. So try the simple case on a test data set. This
will get your index design into a firmer state and you can load-test it with
your presumed load and get actual data for your system. Until you do this,
any answer you have is just a guess.

Best
Erick

On 12/16/06, howard chen <howachen@gmail.com> wrote:
>
> On 12/16/06, Erick Erickson <erickerickson@gmail.com> wrote:
> > I'd start with just one big index and test <G>. My point is that you
> can't
> > speculate. The first question you have to answer is "is searching the
> whole
> > index fast enough given my architecture?" and we can't answer that. Nor
> can
> > you until you try.......
> >
> > We especially can't speculate since you've provided no clue how many
> users
> > you're talking about. 10? 1,000,000? How many books do you expect them
> to
> > own? 10? 100,000? I can't imagine separate indexes for 1M users each
> owning
> > all 1000 books. I can imagine it for 10 users owning 100 books.....
> >
> > Assuming that you get decent performance in a single index, I'd create a
> > filter at query time for a user. The filter has the bits turned on for
> the
> > books the user owns and include the filter as part of a BooleanQuery
> when I
> > searched the text. The filters could even be permanently stored rather
> than
> > created each time, but I'd save that refinement for later.....
> >
> > Note that if you do store a filter, they are quite small. 1 bit per book
> (+
> > very small overhead)....
> >
> > Best
> > Erick
> >
> > On 12/16/06, howard chen <howachen@gmail.com> wrote:
> > >
> > > Consider the following interesting situation,
> > >
> > > A library has around 100K book, and want to be indexed by Lucene, this
> > > seems to be straight forward, but....
> > >
> > > The target is:
> > >
> > > 0. You can search all books in the whole library [easy, just index it]
> > >
> > > 1. users in this system can own a numbers of books in their personal
> > > bookshelf, the users might only want to search book in their bookshelf
> > > ONLY.
> > >
> > > 2. if each users own a copy of the index of their personal bookshelf,
> > > this seems to be waste of storage space as books are shared by many
> > > users.
> > >
> > > 3. If no matter users own what book, the whole indexes is to be
> > > searched, this seems to be waste of computation power if he just own a
> > > few books only.
> > >
> > >
> > > In this situation, how would you design a indexing + search system?
> > >
> > > Any idea can share?
> > >
> > > :)
> > >
> > > Thanks.
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
>
> I agree that filter is a way of implement it. My concern is that with
> such big index, say 100K book full text indexed, this will become the
> bottom neck and it is difficult to distribute the indexing and
> searching.
>
> My initial thinking is to group the index by Call. No, say to divide
> 100K books into 20 subgroups, and when user search it, it will create
> 20 threads to search for the book in different servers.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_190796_20255655.1166283498990--

From java-user-return-25077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 16 16:28:23 2006
Return-Path: <java-user-return-25077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46246 invoked from network); 16 Dec 2006 16:28:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 16:28:23 -0000
Received: (qmail 91347 invoked by uid 500); 16 Dec 2006 16:28:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90975 invoked by uid 500); 16 Dec 2006 16:28:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90943 invoked by uid 99); 16 Dec 2006 16:28:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 08:28:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of howachen@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 08:28:14 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1175443ugc
        for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 08:27:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=SjtbPa3vLgWVp8z1m4gSgwsBGEd1KgUkisS/QdhV+q48b97sACzhGodf282w8ufgpz5cuyMlOIpaE76d1ur+Lvq8PZvwS7wHHLmC4Pm06IWm9qzSvkL3FRt6c/HKWUbUpf7ImGF86rAV7KCJ8fANA2e///4wEHUoFXqtD+9gjK4=
Received: by 10.67.89.5 with SMTP id r5mr1918751ugl.1166286473260;
        Sat, 16 Dec 2006 08:27:53 -0800 (PST)
Received: by 10.66.234.15 with HTTP; Sat, 16 Dec 2006 08:27:52 -0800 (PST)
Message-ID: <b66ddc900612160827x4b46e12ai634586d7ea418328@mail.gmail.com>
Date: Sun, 17 Dec 2006 00:27:52 +0800
From: "howard chen" <howachen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: [Interesting Question] How to implement Indexes Grouping?
In-Reply-To: <359a92830612160738h48713615o311604f338013736@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <b66ddc900612160229x376aa714n3a77876282033cfe@mail.gmail.com>
	 <359a92830612160549v4cb6fda8w10815a96c84c45f8@mail.gmail.com>
	 <b66ddc900612160622i79e5fae2r16e0decab9dbc7c7@mail.gmail.com>
	 <359a92830612160738h48713615o311604f338013736@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 12/16/06, Erick Erickson <erickerickson@gmail.com> wrote:
> You can't tell until you get some numbers. So try it. I'm indexing 4,600
> books in about 45 minutes on a laptop as part of my current project. So it
> shouldn't be much of a problem to index, say, 10,000 books as a starter set.
> This will give you some idea of the size of your index(es), and some idea of
> the performance. You're almost required to do this since nobody can answer
> performance questions in the abstract. It depends.... how much are you
> indexing? What is your index structure? etc. etc. etc.
>
> Be aware that Lucene indexes the first 10,000 tokens by default. You can
> make this as large as you want, but you have to do this consciously.
>
> It should take you less than a day to create a test harness that fires off N
> threads at your searcher to measure load. I can't emphasize enough how
> valuable this will be as you design your system.
>
> Changing from a single index to a distributed one isn't difficult, see
> Multisearcher. Partitioning the index is something you'll have to do anyway
> and I'd build it on multiple instances of a simple indexer, so starting with
> the simple, single index case doesn't waste any time.
>
> You need to answer some questions for yourself... stored or unstored text?
> How many other fields do you want to store and/or index? What is acceptable
> performance?
>
> My point is that you can get quite a ways with a very simple design, without
> doing much in the way of throw-away work. And the answers you get from the
> simple case will give you actual data to make further decisions. Otherwise,
> you risk making a complex solution that you don't need. Do you have any
> basis at all for estimating that 20 subgroups is sufficient and necessary?
>
> Your goal here is to get the answer for your final design as quickly as
> possible. At the same time, you want to waste as little time writing code
> that you'll discard later. So try the simple case on a test data set. This
> will get your index design into a firmer state and you can load-test it with
> your presumed load and get actual data for your system. Until you do this,
> any answer you have is just a guess.
>
> Best
> Erick
>
> On 12/16/06, howard chen <howachen@gmail.com> wrote:
> >
> > On 12/16/06, Erick Erickson <erickerickson@gmail.com> wrote:
> > > I'd start with just one big index and test <G>. My point is that you
> > can't
> > > speculate. The first question you have to answer is "is searching the
> > whole
> > > index fast enough given my architecture?" and we can't answer that. Nor
> > can
> > > you until you try.......
> > >
> > > We especially can't speculate since you've provided no clue how many
> > users
> > > you're talking about. 10? 1,000,000? How many books do you expect them
> > to
> > > own? 10? 100,000? I can't imagine separate indexes for 1M users each
> > owning
> > > all 1000 books. I can imagine it for 10 users owning 100 books.....
> > >
> > > Assuming that you get decent performance in a single index, I'd create a
> > > filter at query time for a user. The filter has the bits turned on for
> > the
> > > books the user owns and include the filter as part of a BooleanQuery
> > when I
> > > searched the text. The filters could even be permanently stored rather
> > than
> > > created each time, but I'd save that refinement for later.....
> > >
> > > Note that if you do store a filter, they are quite small. 1 bit per book
> > (+
> > > very small overhead)....
> > >
> > > Best
> > > Erick
> > >
> > > On 12/16/06, howard chen <howachen@gmail.com> wrote:
> > > >
> > > > Consider the following interesting situation,
> > > >
> > > > A library has around 100K book, and want to be indexed by Lucene, this
> > > > seems to be straight forward, but....
> > > >
> > > > The target is:
> > > >
> > > > 0. You can search all books in the whole library [easy, just index it]
> > > >
> > > > 1. users in this system can own a numbers of books in their personal
> > > > bookshelf, the users might only want to search book in their bookshelf
> > > > ONLY.
> > > >
> > > > 2. if each users own a copy of the index of their personal bookshelf,
> > > > this seems to be waste of storage space as books are shared by many
> > > > users.
> > > >
> > > > 3. If no matter users own what book, the whole indexes is to be
> > > > searched, this seems to be waste of computation power if he just own a
> > > > few books only.
> > > >
> > > >
> > > > In this situation, how would you design a indexing + search system?
> > > >
> > > > Any idea can share?
> > > >
> > > > :)
> > > >
> > > > Thanks.
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> >
> > I agree that filter is a way of implement it. My concern is that with
> > such big index, say 100K book full text indexed, this will become the
> > bottom neck and it is difficult to distribute the indexing and
> > searching.
> >
> > My initial thinking is to group the index by Call. No, say to divide
> > 100K books into 20 subgroups, and when user search it, it will create
> > 20 threads to search for the book in different servers.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

Thanks for your help, really useful!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 16 16:49:43 2006
Return-Path: <java-user-return-25078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47745 invoked from network); 16 Dec 2006 16:49:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 16:49:42 -0000
Received: (qmail 851 invoked by uid 500); 16 Dec 2006 16:49:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 826 invoked by uid 500); 16 Dec 2006 16:49:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 804 invoked by uid 99); 16 Dec 2006 16:49:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 08:49:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.236.116.36] (HELO enzo.optaros.com) (68.236.116.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 08:49:32 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by enzo.optaros.com (Postfix) with ESMTP id A6BB43F001F
	for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 11:49:10 -0500 (EST)
X-DSPAM-Result: Innocent
X-DSPAM-Processed: Sat Dec 16 11:49:10 2006
X-DSPAM-Confidence: 0.9997
X-DSPAM-Probability: 0.0000
X-DSPAM-Signature: 45842386135711213416112
X-DSPAM-Factors: 27,
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -4.236
X-Spam-Level: 
Received: from enzo.optaros.com ([127.0.0.1])
	by localhost (enzo.optaros.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id vKGIzF9FxPM8 for <java-user@lucene.apache.org>;
	Sat, 16 Dec 2006 11:49:10 -0500 (EST)
Received: from enzo.optaros.com (enzo.optaros.com [10.88.1.6])
	by enzo.optaros.com (Postfix) with ESMTP id 3904A3F000D
	for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 11:49:10 -0500 (EST)
From: Phil Rosen <prosen@optaros.com>
To: <java-user@lucene.apache.org>
Subject: RE: [Interesting Question] How to implement Indexes Grouping?
Date: Sat, 16 Dec 2006 11:49:10 -0500 (EST)
Message-ID: <004f01c72132$1b1f3560$6801a8c0@DJ8P5VB1PR>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <b66ddc900612160229x376aa714n3a77876282033cfe@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: Accg/TAm6skHq1tkRQusdGnwe9Dv7QANIieQ
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.236 tagged_above=-10 required=6.6
	tests=[ALL_TRUSTED=-1.8, AWL=0.263, BAYES_00=-2.599, DSPAM_HAM=-0.1]

I wonder if storing the ids of a users bookshelf only, and then at runtime 
when they perform a search create a temporary ramdirectory index of only the 
books in the user's bookshelf could satisfy both points 2 & 3.

Speaking of Ramdirectory, is there a simple way to convert hits to an index 
without iterating?

-----Original Message-----
From: howard chen [mailto:howachen@gmail.com]
Sent: Saturday, December 16, 2006 5:30 AM
To: java-user@lucene.apache.org
Subject: [Interesting Question] How to implement Indexes Grouping?

Consider the following interesting situation,

A library has around 100K book, and want to be indexed by Lucene, this
seems to be straight forward, but....

The target is:

0. You can search all books in the whole library [easy, just index it]

1. users in this system can own a numbers of books in their personal
bookshelf, the users might only want to search book in their bookshelf
ONLY.

2. if each users own a copy of the index of their personal bookshelf,
this seems to be waste of storage space as books are shared by many
users.

3. If no matter users own what book, the whole indexes is to be
searched, this seems to be waste of computation power if he just own a
few books only.


In this situation, how would you design a indexing + search system?

Any idea can share?

:)

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 16 17:08:28 2006
Return-Path: <java-user-return-25079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49109 invoked from network); 16 Dec 2006 17:08:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 17:08:27 -0000
Received: (qmail 11137 invoked by uid 500); 16 Dec 2006 17:08:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10171 invoked by uid 500); 16 Dec 2006 17:08:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10160 invoked by uid 99); 16 Dec 2006 17:08:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 09:08:27 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 09:08:17 -0800
Received: by nf-out-0910.google.com with SMTP id n28so165879nfc
        for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 09:07:56 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=E0c74S9f4O7DCyrYyOaGqJh7epsVPod0v7008uoVWK5WzzFCwrW5XTX7FaBmUqx0N44Ux+4h/bAT4BqQEwvlcRq7TYUyugWBt4QZEPAOunKfUH6tQIeFL6Ic6Oam9BX1GzRKtIF0Y/PWuFlT0Mfu/aqaJdcev7lF1HmkDFwfaXc=
Received: by 10.48.230.2 with SMTP id c2mr704149nfh.1166288876156;
        Sat, 16 Dec 2006 09:07:56 -0800 (PST)
Received: by 10.48.48.20 with HTTP; Sat, 16 Dec 2006 09:07:55 -0800 (PST)
Message-ID: <ab0709bf0612160907p4c84f32ag5e9bf60a89da8c38@mail.gmail.com>
Date: Sat, 16 Dec 2006 12:07:55 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: sorting by per doc hit count
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_157814_6731114.1166288875793"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_157814_6731114.1166288875793
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have not really looked into this yet, but maybe you can save me some time
-- Is it feasible/simple to sort by the number of hits found per document?
Would this require changing the scoring system (remove idf etc etc) and
doing a normal relevancy search? Could it be done with functionquery? Any
Hints? If it is a lot of work I am not interested in doing it, but if it is
somewhat simple it would make a few customers feel fuzzy.

Thanks,

Mark

------=_Part_157814_6731114.1166288875793--

From java-user-return-25080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 16 20:59:01 2006
Return-Path: <java-user-return-25080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86628 invoked from network); 16 Dec 2006 20:58:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 20:58:59 -0000
Received: (qmail 55309 invoked by uid 500); 16 Dec 2006 20:58:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55268 invoked by uid 500); 16 Dec 2006 20:58:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55257 invoked by uid 99); 16 Dec 2006 20:58:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 12:58:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 12:58:47 -0800
Received: by nf-out-0910.google.com with SMTP id n28so218871nfc
        for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 12:58:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lrdzEF42AoLdFbUEUd69rAgQxhp511usujf0P+fJwRAY/2NexPDKxaBmmkC3E8GfAi50hnN8eBjjE3ECcckqUBfWFcSNbPKaoJIxze4p8244G2+VJkNnJwGLzmsjLdSvNXcBVliApXu6YY0yuvHX26OOoskVamp8tpEPP9XVsQ4=
Received: by 10.82.135.13 with SMTP id i13mr300093bud.1166302705350;
        Sat, 16 Dec 2006 12:58:25 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Sat, 16 Dec 2006 12:58:24 -0800 (PST)
Message-ID: <359a92830612161258y50cf234do59542d3ef8affb0e@mail.gmail.com>
Date: Sat, 16 Dec 2006 15:58:24 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: [Interesting Question] How to implement Indexes Grouping?
In-Reply-To: <004f01c72132$1b1f3560$6801a8c0@DJ8P5VB1PR>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_193255_22326486.1166302704674"
References: <b66ddc900612160229x376aa714n3a77876282033cfe@mail.gmail.com>
	 <004f01c72132$1b1f3560$6801a8c0@DJ8P5VB1PR>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_193255_22326486.1166302704674
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This one I can pretty much guarantee will take too long. I tried something
similar with a single book and found it unacceptably slow. Although I didn't
think too much about the possibility of extracting it from an already
existing index, but I'd be surprised if it would work quickly enough....

Although if there is a way to do something like this I'd be really, really
interested.....

Erick

On 12/16/06, Phil Rosen <prosen@optaros.com> wrote:
>
> I wonder if storing the ids of a users bookshelf only, and then at runtime
> when they perform a search create a temporary ramdirectory index of only
> the
> books in the user's bookshelf could satisfy both points 2 & 3.
>
> Speaking of Ramdirectory, is there a simple way to convert hits to an
> index
> without iterating?
>
> -----Original Message-----
> From: howard chen [mailto:howachen@gmail.com]
> Sent: Saturday, December 16, 2006 5:30 AM
> To: java-user@lucene.apache.org
> Subject: [Interesting Question] How to implement Indexes Grouping?
>
> Consider the following interesting situation,
>
> A library has around 100K book, and want to be indexed by Lucene, this
> seems to be straight forward, but....
>
> The target is:
>
> 0. You can search all books in the whole library [easy, just index it]
>
> 1. users in this system can own a numbers of books in their personal
> bookshelf, the users might only want to search book in their bookshelf
> ONLY.
>
> 2. if each users own a copy of the index of their personal bookshelf,
> this seems to be waste of storage space as books are shared by many
> users.
>
> 3. If no matter users own what book, the whole indexes is to be
> searched, this seems to be waste of computation power if he just own a
> few books only.
>
>
> In this situation, how would you design a indexing + search system?
>
> Any idea can share?
>
> :)
>
> Thanks.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_193255_22326486.1166302704674--

From java-user-return-25081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 16 21:21:01 2006
Return-Path: <java-user-return-25081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89015 invoked from network); 16 Dec 2006 21:21:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2006 21:21:00 -0000
Received: (qmail 68605 invoked by uid 500); 16 Dec 2006 21:21:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68569 invoked by uid 500); 16 Dec 2006 21:21:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68558 invoked by uid 99); 16 Dec 2006 21:21:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 13:21:01 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Dec 2006 13:20:51 -0800
Received: by nf-out-0910.google.com with SMTP id n28so224259nfc
        for <java-user@lucene.apache.org>; Sat, 16 Dec 2006 13:20:30 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lXp1QSKk1uYPStWksKsSVjb8KS0xe3SqZWVchGTFBb/Nip/YbKnQ5vruTZKyk85o8mpGdoKvDAX96adcB7/zAmUpbxq375umA9i25PnGTswLvkHuVga6RmtvStHxy9i6kQWDbRByC0iIFQnIuGqkXbh7OjpTBdPu7ZgopEfexro=
Received: by 10.82.118.2 with SMTP id q2mr305682buc.1166304029711;
        Sat, 16 Dec 2006 13:20:29 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Sat, 16 Dec 2006 13:20:29 -0800 (PST)
Message-ID: <359a92830612161320q272ca592r4013cce354b58ddc@mail.gmail.com>
Date: Sat, 16 Dec 2006 16:20:29 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: sorting by per doc hit count
In-Reply-To: <ab0709bf0612160907p4c84f32ag5e9bf60a89da8c38@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_193411_8182044.1166304029659"
References: <ab0709bf0612160907p4c84f32ag5e9bf60a89da8c38@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_193411_8182044.1166304029659
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, if you're not interested in doing much in the way of complex queries,
you could use TermDocs/TermEnum (particularly look at TermDocs) to count the
number of times a term appears in each document. I think you'll be surprised
at how quickly you can get this info.

Making your own scorer seems like a reasonable approach also, you could just
return the term frequency (see TermDocs) although I admit I'm staying away
from messing with the relevancy scorers so I"m not speaking from experience.
Others who know more are going to have to weigh in on functionquery.

Warning: I've just been in some (non Lucene) code that tried to do it's own
arbitrarily complex boolean logic by counting term frequency. Don't go there
if you want to keep your work minimal. In fact, I'd recommend against going
there at all <G>. If you can restrict the allowed syntax to be simple AND
you'd be all set (simple OR would be ok too). I suspect that as soon as you
start even combining the two allowing grouping, the effort increases
dramatically.

Which probably argues for making your own scorer that just deals with
frequency.

Best
Erick

On 12/16/06, Mark Miller < markrmiller@gmail.com> wrote:
>
> I have not really looked into this yet, but maybe you can save me some
> time
> -- Is it feasible/simple to sort by the number of hits found per document?
> Would this require changing the scoring system (remove idf etc etc) and
> doing a normal relevancy search? Could it be done with functionquery? Any
> Hints? If it is a lot of work I am not interested in doing it, but if it
> is
> somewhat simple it would make a few customers feel fuzzy.
>
> Thanks,
>
> Mark
>
>

------=_Part_193411_8182044.1166304029659--

From java-user-return-25082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 18 16:10:13 2006
Return-Path: <java-user-return-25082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16003 invoked from network); 18 Dec 2006 16:10:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 16:10:12 -0000
Received: (qmail 53402 invoked by uid 500); 18 Dec 2006 16:10:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53330 invoked by uid 500); 18 Dec 2006 16:10:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53307 invoked by uid 99); 18 Dec 2006 16:10:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 08:10:04 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.138] (HELO web52215.mail.yahoo.com) (206.190.48.138)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 18 Dec 2006 08:09:53 -0800
Received: (qmail 80087 invoked by uid 60001); 18 Dec 2006 16:09:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=m7q6GIJJqWjJwRc3/yw4ZpRFSRGT+i5v+r4DhGlXkYbGMfFL7rv4TOk8pnVDQidUCGgIaXOxrSZvWtBbKS5y0GwqrsAA9Pcq09s++L+HVTeiZgSu6J6nxcm5qXUUSaJyEud4I0JILAO1TFO7baSTRAUxYjlBwLFJF6ef0FtSJ1o=;
X-YMail-OSG: PoRVZgMVM1ldNBJx3L3t5sM0VkvxA1_8SbpFH6rYb4GSCK.2MEMxv2Nz.6N4Q20cLUbOP5.Rn2N_FKQDH5QiIWLnK3OSK6o04cGcfhtF.IICbqFLPvv2qvkXmjVdnR7IKolz09gFttrt2_I-
Received: from [219.77.131.219] by web52215.mail.yahoo.com via HTTP; Mon, 18 Dec 2006 08:09:31 PST
Date: Mon, 18 Dec 2006 08:09:31 -0800 (PST)
From: abdul aleem <janaabdulaleem@yahoo.com>
Subject: Range Filter again - (time field) 
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <661221.79394.qm@web52215.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello All,

Iam pretty sure there has been lots of discussions
and threads on date issues however coudln't nail
down my syntax,  bear with me if this has been asked
before

I have split my timestamp as Date and Time and 
indexing on both 

Im getting time as

SimpleDateFormat sdf = new
SimpleDateFormat("hh:mm:ss.SSS");

Date date = sdf.parse(time);

Timestamp timestamp = new Timestamp(date.getTime());

String dateString = DateTools.dateToString(timestamp, 

DateTools.Resolution.MILLISECOND);
Field timeField = new
Field("time",dateString,Field.Store.YES,
Field.Index.UN_TOKENIZED);

For searching ( can search indexed time?? )
============================================
RangeFilter df2 = new RangeFilter("time",
DateTools.dateToString(startTime,
DateTools.Resolution.MILLISECOND),
                 DateTools.dateToString(endTime,
DateTools.Resolution.MILLISECOND), true, true);


Result
=======
*time* index has more than 50 documents in start and
end range  but RangeFilter returns only 1 document (if
inclusive only)


is there something wrong with way iam using
RangeFilter ?? 

I would greatly appreciate if someone could suggest on
the above.


Many thanks,
Abdul 

PS:- Im searching on the exact time that was used to
index in the RangeFilter












__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 18 16:30:12 2006
Return-Path: <java-user-return-25083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23565 invoked from network); 18 Dec 2006 16:30:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2006 16:30:11 -0000
Received: (qmail 97378 invoked by uid 500); 18 Dec 2006 16:30:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97351 invoked by uid 500); 18 Dec 2006 16:30:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97340 invoked by uid 99); 18 Dec 2006 16:30:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 08:30:10 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.75.234.2] (HELO smtpgate.saa-cons.co.uk) (194.75.234.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Dec 2006 08:30:00 -0800
Received: (from mailnull@localhost)
	by smtpgate.saa-cons.co.uk (8.13.1/8.12.8) id kBIGUrcc028592
	for <java-user@lucene.apache.org>; Mon, 18 Dec 2006 16:30:53 GMT
	(envelope-from Paul.Illingworth@saaconsultants.com)
Received: from domino-mail.saa-cons.co.uk(10.10.10.4) by smtpgate.saa-cons.co.uk via smap (V2.1)
	id xma028578; Mon, 18 Dec 06 16:30:19 GMT
In-Reply-To: <661221.79394.qm@web52215.mail.yahoo.com>
Subject: Re: Range Filter again - (time field)
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0.1 January 17, 2006
Message-ID: <OF0ECB8EF9.9C88998E-ON80257248.0059D76C-80257248.005A8D37@SAAConsultants.com>
Date: Mon, 18 Dec 2006 16:29:02 +0000
From: Paul.Illingworth@saaconsultants.com
X-MIMETrack: CD-MIME by Router on domino-mail/Saa(Release 7.0.1FP1|April 17, 2006) at 18/12/2006
 16:29:03,
	CD-MIME complete at 18/12/2006 16:29:03,
	Itemize by Router on domino-mail/Saa(Release 7.0.1FP1|April 17, 2006) at 18/12/2006
 16:29:03,
	Serialize by Router on domino-mail/Saa(Release 7.0.1FP1|April 17, 2006) at
 18/12/2006 16:29:03,
	Serialize complete at 18/12/2006 16:29:03
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org



Hello Abdul,

The approach with dates and times is to index the full date and time but to
the resolution that you require as opposed to splitting the time and date
into separate fields.

 If you have a requirement to search to millisecond resolution then index
to millisecond resolutiuon using DateTools.Resolution.MILLISECOND. If you
only need your search to be accurate to the day then index using
DateTools.Resolution.DAY. If you need both then either index both and
choose the appropriate one at search time or store to millisecond
resolution and accpet the performance penalty.

Looking at you code it seems that you're just storing the time information
in the index and have lost the date information. This may account for the
range filter not picking up what you would expect as the dates may be
different. This is only a guess though.

Another observation is that you shouldn't have to use the Timestamp class.
If I remember this is an extension to the standard Date class that gives
nanosecond resolution. You should just be able to create the dataString
using

dataString = DateTools.dateToString(date,
DateTools.Resolution.MILLISECOND);

Hope this is of some help

Regards
Paul I.




                                                                           
             abdul aleem                                                   
             <janaabdulaleem@y                                             
             ahoo.com>                                                  To 
                                       java-user@lucene.apache.org         
             18/12/2006 16:10                                           cc 
                                                                           
                                                                   Subject 
             Please respond to         Range Filter again - (time field)   
             java-user@lucene.                                             
                apache.org                                                 
                                                                           
                                                                           
                                                                           
                                                                           




Hello All,

Iam pretty sure there has been lots of discussions
and threads on date issues however coudln't nail
down my syntax,  bear with me if this has been asked
before

I have split my timestamp as Date and Time and
indexing on both

Im getting time as

SimpleDateFormat sdf = new
SimpleDateFormat("hh:mm:ss.SSS");

Date date = sdf.parse(time);

Timestamp timestamp = new Timestamp(date.getTime());

String dateString = DateTools.dateToString(timestamp,

DateTools.Resolution.MILLISECOND);
Field timeField = new
Field("time",dateString,Field.Store.YES,
Field.Index.UN_TOKENIZED);

For searching ( can search indexed time?? )
============================================
RangeFilter df2 = new RangeFilter("time",
DateTools.dateToString(startTime,
DateTools.Resolution.MILLISECOND),
                 DateTools.dateToString(endTime,
DateTools.Resolution.MILLISECOND), true, true);


Result
=======
*time* index has more than 50 documents in start and
end range  but RangeFilter returns only 1 document (if
inclusive only)


is there something wrong with way iam using
RangeFilter ??

I would greatly appreciate if someone could suggest on
the above.


Many thanks,
Abdul

PS:- Im searching on the exact time that was used to
index in the RangeFilter












__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around
http://mail.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 15:24:48 2006
Return-Path: <java-user-return-25084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57792 invoked from network); 19 Dec 2006 15:24:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 15:24:47 -0000
Received: (qmail 39034 invoked by uid 500); 19 Dec 2006 15:24:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39006 invoked by uid 500); 19 Dec 2006 15:24:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 36454 invoked by uid 99); 19 Dec 2006 15:22:48 -0000
X-ASF-Spam-Status: No, hits=4.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.it;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type;
  b=d21BEDfONm0B0HEfP1cBs3VVF0OgtLoa3fdjvje48Sye8CI4HFkNYZnnQC45QETKZ4W4lAS4R9W7QHdf1sx4lSdK4PIEkyww1/jOjfTkbLChy2vpd4thEkOa1NJdVluUWFkASLChaR3VVFtf0fuFervRUQk5IPtWPg9C11HKKWc=  ;
Message-ID: <20061219152214.203.qmail@web28007.mail.ukl.yahoo.com>
Date: Tue, 19 Dec 2006 16:22:14 +0100 (CET)
From: Antonio Bruno <antoniobruno_apache@yahoo.it>
Subject: RE: Lucene id generation
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1418829462-1166541734=:99432"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1418829462-1166541734=:99432
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

To use but directly the docId would render efficient and fastest the search=
es much. Thoughts to the possibility of being able to apply a first Caching=
WrapperFilter F1 on an index and a second CachingWrapperFilter F2 on an oth=
er index and after to make (F1 AND F2) and to even extract the info of inte=
rest only from an index. It would be most powerful=85 =0ACould be made the =
moment one what of this type?=0A=0A=0AAntonio Bruno=0A(T&S - Cosenza Italy)=
=0A=0A__________________________________________________=0ADo You Yahoo!?=
=0APoco spazio e tanto spam? Yahoo! Mail ti protegge dallo spam e ti da tan=
to spazio gratuito per i tuoi file e i messaggi =0Ahttp://mail.yahoo.it 
--0-1418829462-1166541734=:99432--

From java-user-return-25085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 15:36:41 2006
Return-Path: <java-user-return-25085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60565 invoked from network); 19 Dec 2006 15:36:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 15:36:40 -0000
Received: (qmail 62340 invoked by uid 500); 19 Dec 2006 15:36:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62046 invoked by uid 500); 19 Dec 2006 15:36:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62033 invoked by uid 99); 19 Dec 2006 15:36:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 07:36:39 -0800
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 07:36:28 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gwh0i-0006hn-4T
	for java-user@lucene.apache.org; Tue, 19 Dec 2006 07:36:08 -0800
Message-ID: <7949145.post@talk.nabble.com>
Date: Tue, 19 Dec 2006 07:36:08 -0800 (PST)
From: JT Kimbell <jtkimbell@yahoo.com>
To: java-user@lucene.apache.org
Subject: Help with jump from 1.4.3 to 2.0.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jtkimbell@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I'm working on learning Lucene for my job, and the book one of my professors
purchased for myself and her is Lucene In Action, which is a good book but
it is based on version 1.4.3 (I believe).  I am beginning to grasp a lot of
the basic concepts behind Lucene and have a basic searching and indexing
program written on the said professor's server (which is running 1.4.3). 
However, on my server for work I am using 2.0.0 and it was agreed that it
would be best that I use the newer version.  My program ran fine using
1.4.3, but once I made a few changes to make it compatible with 2.0.0 it now
returns a Null Pointer Exception about 80% of the way through.

For some background on the files, they are all .txt files stored in a
directory that has folders representing different years (e.g. 2005), within
that there are month folders (August 2005) and those folders contain all the
documents.  When I catch the exception and print while File f my program is
currently on, it says it is that August 2005 folder.  My program is exactly
the same except for updating Field to be compatible with 2.0.0 and the data
is an exact copy of the other data.

So I suppose I have two questions:

1)  The relevant methods from the two programs are below, does anyone have
any ideas why this isn't working, am I doing something wrong or assuming
something I shouldn't?  (If you need to see the full code with all comments
for either program, let me know).

2)  Is there a good tutorial or something online for version 2.0.0 just to
help me understand it better?  Do you have any tips?

Version 1.4.3 Code
        //This method recursively calls itself when it finds a directory
        public void indexDirectory(IndexWriter writer, File dir) throws
IOException{
                File[] files = dir.listFiles();

                for(int i = 0; i < files.length; i++){  
                        File f = files[i];
                        if (f.isDirectory()){
                                indexDirectory(writer, f);              
                        }else if (f.getName().endsWith(".txt")){       
                                indexFile(writer, f);                                          
}
                }
        }

        //This method indexes each individual file
        public void indexFile(IndexWriter writer, File f) throws
IOException{

                if(f.isHidden() || !f.exists() || !f.canRead()){
                        return;
                }

                Document doc = new Document();
                doc.add(Field.Text("contents", new FileReader(f)));
                doc.add(Field.Keyword("filename", f.getCanonicalPath()));
                writer.addDocument(doc);
        }

Version 2.0.0 Code
        //This method recursively calls itself when it finds a directory
        public void indexDirectory(IndexWriter writer, File dir) throws
IOException{
                File[] files = dir.listFiles();

                for(int i = 0; i < files.length; i++){
                        File f = files[i];
                        try{
                             if (f.isDirectory()){
                                   indexDirectory(writer, f);
                       }else if (f.getName().endsWith(".txt")){  //Seems
this is where it is first thrown...
                                   indexFile(writer, f); 
                                   System.out.println(f);
                             }
                        }catch(NullPointerException npe){
                                npe.printStackTrace(System.out);
                                System.out.println("File is: " + f);
                        }
                }
        }

        //This method indexes each individual file
        public void indexFile(IndexWriter writer, File f) throws
IOException{

                if(f.isHidden() || !f.exists() || !f.canRead()){
                        return;       
                }

                Document doc = new Document();
                doc.add(new Field("contents", new FileReader(f)));
                doc.add(new Field("filename", f.getCanonicalPath(),
Field.Store.YES, Field.Index.UN_TOKENIZED));        
                writer.addDocument(doc); 
        }

Thanks so much for any help you can give me.  It seems strange to me that
when I print File f, it prints out a directory name (August 2005), but got
past the isDirectory statement and is now checking to see if it has a .txt
extension.

Thanks,

JT
-- 
View this message in context: http://www.nabble.com/Help-with-jump-from-1.4.3-to-2.0.0-tf2846591.html#a7949145
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 15:56:31 2006
Return-Path: <java-user-return-25086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66380 invoked from network); 19 Dec 2006 15:56:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 15:56:30 -0000
Received: (qmail 5720 invoked by uid 500); 19 Dec 2006 15:56:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5700 invoked by uid 500); 19 Dec 2006 15:56:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5689 invoked by uid 99); 19 Dec 2006 15:56:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 07:56:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 07:56:18 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1776943nfc
        for <java-user@lucene.apache.org>; Tue, 19 Dec 2006 07:55:56 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sGPjM5oA7osQRnut0aK1wRXZTwrJQlGRob+73pFWj8q5XILVhFF0ByoeSOYBbKjNFH4OxyfTkVmvziyG9qSlstH+UWzGx5Vh76TlN+orwHIkD1HZwkJW5ykGRmfMRADbP6Yaog/rJvWw9ngXidymD/seSyKeNjvpDfOjBRwcsbI=
Received: by 10.82.120.15 with SMTP id s15mr1163611buc.1166543756595;
        Tue, 19 Dec 2006 07:55:56 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Tue, 19 Dec 2006 07:55:56 -0800 (PST)
Message-ID: <359a92830612190755k77e8f058w3bb30c8e216eabde@mail.gmail.com>
Date: Tue, 19 Dec 2006 10:55:56 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene id generation
In-Reply-To: <20061219152214.203.qmail@web28007.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7016_17171373.1166543756510"
References: <20061219152214.203.qmail@web28007.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7016_17171373.1166543756510
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

But you can do something very similar and very quickly using a unique ID
(not the Lucene ID) that's shared across the indexes (assuming I'm reading
your issue correctly). Then use TermDocs/TermEnum and create your filters
that way.

I predict endless problems with user (programmer) errors if Lucene allowed
one to specify the (lucene) document ID.

I suspect it just ain't going to happen since nobody has yet made a case fo=
r
why this would be enough better than the current system to be worth the
hassle.

Best
Erick

On 12/19/06, Antonio Bruno <antoniobruno_apache@yahoo.it> wrote:
>
> To use but directly the docId would render efficient and fastest the
> searches much. Thoughts to the possibility of being able to apply a first
> CachingWrapperFilter F1 on an index and a second CachingWrapperFilter F2 =
on
> an other index and after to make (F1 AND F2) and to even extract the info=
 of
> interest only from an index. It would be most powerful=85
> Could be made the moment one what of this type?
>
>
> Antonio Bruno
> (T&S - Cosenza Italy)
>
> __________________________________________________
> Do You Yahoo!?
> Poco spazio e tanto spam? Yahoo! Mail ti protegge dallo spam e ti da tant=
o
> spazio gratuito per i tuoi file e i messaggi
> http://mail.yahoo.it
>

------=_Part_7016_17171373.1166543756510--

From java-user-return-25087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 16:24:15 2006
Return-Path: <java-user-return-25087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74362 invoked from network); 19 Dec 2006 16:24:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 16:24:13 -0000
Received: (qmail 47284 invoked by uid 500); 19 Dec 2006 16:24:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47179 invoked by uid 500); 19 Dec 2006 16:24:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47168 invoked by uid 99); 19 Dec 2006 16:24:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 08:24:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.160.131.136] (HELO p15105029.pureserver.info) (217.160.131.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 08:23:59 -0800
Received: (qmail 12928 invoked by uid 89); 19 Dec 2006 17:23:37 +0100
Received: by simscan 1.2.0 ppid: 12922, pid: 12924, t: 0.1000s
         scanners: clamav: 0.88.6/m:41/d:2357
Received: from unknown (HELO max.osuatech.local) (max%osua.de@82.144.201.6)
  by 0 with ESMTPA; 19 Dec 2006 17:23:37 +0100
Date: Tue, 19 Dec 2006 18:23:35 +0200
From: Maxim Patramanskij <max@osua.de>
X-Mailer: The Bat! (v1.62i) Business
Reply-To: Maxim Patramanskij <max@osua.de>
Organization: OSUA technology
X-Priority: 3 (Normal)
Message-ID: <72113271234.20061219182335@osua.de>
To: Guido Neitzer <java-user@lucene.apache.org>
Subject: Re[2]: WRITE_LOCK_TIMEOUT
In-Reply-To: <708C7ABB-57C0-48A4-B08F-9BC2F2C2B237@pharmaline.de>
References: <06Apr5.081505pdt."58633"@synergy1.parc.xerox.com>
 <708C7ABB-57C0-48A4-B08F-9BC2F2C2B237@pharmaline.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Guido,

Wednesday, April 5, 2006, 5:23:37 PM, you wrote:

GN> On 05.04.2006, at 17:15 Uhr, Bill Janssen wrote:

>> Or, as I suggested a couple of days ago, a 1.9.2 release could be  
>> offered.

GN> Would be a good idea, because the current nightly builds have a lot  
GN> of deprecated methods removed which where available in 1.9.1.

GN> Lot of work just for this ... :-(

GN> cug





-- 
Best regards,
 Maxim                            mailto:max@osua.de


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 16:58:56 2006
Return-Path: <java-user-return-25088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86784 invoked from network); 19 Dec 2006 16:58:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 16:58:54 -0000
Received: (qmail 21957 invoked by uid 500); 19 Dec 2006 16:58:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21924 invoked by uid 500); 19 Dec 2006 16:58:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21913 invoked by uid 99); 19 Dec 2006 16:58:48 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 08:58:44 -0800
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1GwiF3-00013y-W3
	for java-user@lucene.apache.org; Tue, 19 Dec 2006 17:55:02 +0100
Received: from finn.gmane.org ([80.91.229.4])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 19 Dec 2006 17:55:01 +0100
Received: from mdiggory by finn.gmane.org with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 19 Dec 2006 17:55:01 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Mark Diggory <mdiggory@mit.edu>
Subject:  Re: Lucene 2.0.1 release date
Date:  Tue, 19 Dec 2006 11:51:48 -0500
Lines: 44
Message-ID: <em95ar$qgb$1@sea.gmane.org>
References:  <000301c6edb3$eaea9990$c4ba3109@aroushlt> <032601c6ef9d$9f6b4870$52844109@aroushlt>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: finn.gmane.org
User-Agent: Thunderbird 2.0b1 (Macintosh/20061206)
In-Reply-To: <032601c6ef9d$9f6b4870$52844109@aroushlt>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

We'ed primarily like to see a release of the LockFactory implementation. 
   This functionality will help us better control our locking, but we 
want to depend on actual releases, not interim builds/snapshots.

Any news on this now that this thread is a couple months old?

-Mark Diggory


George Aroush wrote:
> Hi folks,
> 
> Sorry for reposting this question (see original email below) and this time
> to both mailing list.
> 
> If anyone can tell me what is the plan for Lucene 2.0.1 release, I would
> appreciate it very much.
> 
> As some of you may know, I am the porter of Lucene to Lucene.Net knowing
> when 2.0.1 will be released will help me plan things out.
> 
> Regards,
> 
> -- George Aroush
> 
> 
> -----Original Message-----
> From: George Aroush [mailto:george@aroush.net] 
> Sent: Thursday, October 12, 2006 12:07 AM
> To: java-dev@lucene.apache.org
> Subject: Lucene 2.0.1 release date
> 
> Hi folks,
> 
> What's the plan for Lucene 2.0.1 release date?
> 
> Thanks!
> 
> -- George Aroush
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-dev-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 17:21:34 2006
Return-Path: <java-user-return-25089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95395 invoked from network); 19 Dec 2006 17:21:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 17:21:32 -0000
Received: (qmail 80307 invoked by uid 500); 19 Dec 2006 17:21:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80278 invoked by uid 500); 19 Dec 2006 17:21:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80267 invoked by uid 99); 19 Dec 2006 17:21:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 09:21:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 09:21:21 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1795582nfc
        for <java-user@lucene.apache.org>; Tue, 19 Dec 2006 09:21:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Bt2KCkmMGd3ao/XrP6DSNrHRfXReEG2wxrMcrpY90gulvpV4UUIw7viFW+JyEDoboHAHGi1f0r4nmTT9npOGq+RzUALnQd1yJIrOpoasMNLe56zFOECRGK/f1K75qmpRHXbjkxnqfpjPLNtyAJ/sbDmpFCxQmH3MwGCJW/S2Sds=
Received: by 10.49.58.13 with SMTP id l13mr7226644nfk.1166548860732;
        Tue, 19 Dec 2006 09:21:00 -0800 (PST)
Received: by 10.48.48.20 with HTTP; Tue, 19 Dec 2006 09:21:00 -0800 (PST)
Message-ID: <ab0709bf0612190921t46fbcfffn37421f108e0d0048@mail.gmail.com>
Date: Tue, 19 Dec 2006 12:21:00 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: sorting by per doc hit count
In-Reply-To: <ab0709bf0612160907p4c84f32ag5e9bf60a89da8c38@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6405_817562.1166548860686"
References: <ab0709bf0612160907p4c84f32ag5e9bf60a89da8c38@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6405_817562.1166548860686
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Could I use another Similarity that returned 1 for most of the scoring terms
and the actual term frequency (rig the equation)? Could I then alternate the
DefaultSimilarity and HitsPerDocSimilairty per search? LIA mentioned
something about needing to rebuild the index if you change Similarity's.
That does not make sense to me yet. It would seem you could alternate them.
What does scoring have to do with indexing?

Thanks,

Mark

On 12/16/06, Mark Miller <markrmiller@gmail.com> wrote:
>
> I have not really looked into this yet, but maybe you can save me some
> time -- Is it feasible/simple to sort by the number of hits found per
> document? Would this require changing the scoring system (remove idf etc
> etc) and doing a normal relevancy search? Could it be done with
> functionquery? Any Hints? If it is a lot of work I am not interested in
> doing it, but if it is somewhat simple it would make a few customers feel
> fuzzy.
>
> Thanks,
>
> Mark
>

------=_Part_6405_817562.1166548860686--

From java-user-return-25090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 17:37:59 2006
Return-Path: <java-user-return-25090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1449 invoked from network); 19 Dec 2006 17:37:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 17:37:58 -0000
Received: (qmail 9369 invoked by uid 500); 19 Dec 2006 17:37:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9328 invoked by uid 500); 19 Dec 2006 17:37:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9317 invoked by uid 99); 19 Dec 2006 17:37:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 09:37:56 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 09:37:44 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id kBJHbMkT088238
	for <java-user@lucene.apache.org>; Tue, 19 Dec 2006 17:37:22 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kBJHbMAq2850938
	for <java-user@lucene.apache.org>; Tue, 19 Dec 2006 18:37:22 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kBJHbMwD013134
	for <java-user@lucene.apache.org>; Tue, 19 Dec 2006 18:37:22 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kBJHbMfx013131
	for <java-user@lucene.apache.org>; Tue, 19 Dec 2006 18:37:22 +0100
In-Reply-To: <ab0709bf0612190921t46fbcfffn37421f108e0d0048@mail.gmail.com>
Subject: Re: sorting by per doc hit count
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFC26E4BA2.E2311C7A-ON88257249.005FBD98-88257249.0060AD7B@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 19 Dec 2006 09:35:58 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 19/12/2006 19:37:21
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

"Mark Miller" <markrmiller@gmail.com> wrote on 19/12/2006 09:21:00:
> LIA mentioned something about needing to rebuild the
> index if you change Similarity's. That does not make
> sense to me yet. It would seem you could alternate them.
> What does scoring have to do with indexing?

For this part of your question, the length norms of fields are computed at
indexing time and stored in the index (as field norms). If your modified
Similarity changes the length norm computation, re-indexing is required.
See
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html#formula_norm


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 18:13:40 2006
Return-Path: <java-user-return-25091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12344 invoked from network); 19 Dec 2006 18:13:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 18:13:39 -0000
Received: (qmail 68695 invoked by uid 500); 19 Dec 2006 18:13:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68669 invoked by uid 500); 19 Dec 2006 18:13:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68650 invoked by uid 99); 19 Dec 2006 18:13:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 10:13:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 10:13:27 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15C7776B@mailer.syr.edu>; Tue, 19 Dec 2006 13:13:06 -0500
Message-ID: <45882BB2.4090107@syr.edu>
Date: Tue, 19 Dec 2006 13:13:06 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene id generation
References: <20061219152214.203.qmail@web28007.mail.ukl.yahoo.com>
In-Reply-To: <20061219152214.203.qmail@web28007.mail.ukl.yahoo.com>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Antonio Bruno wrote:
> To use but directly the docId would render efficient and fastest the
> searches much. Thoughts to the possibility of being able to apply a
> first CachingWrapperFilter F1 on an index and a second
> CachingWrapperFilter F2 on an other index and after to make (F1 AND
> F2) and to even extract the info of interest only from an index. It
> would be most powerful… Could be made the moment one what of this
> type?

In the Lucene sandbox, ChainedFilter combines filters with Boolean
operations:

http://www.netlikon.de/docs/lucene-2.0.0/docs/api/org/apache/lucene/misc/ChainedFilter.html


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 20:21:16 2006
Return-Path: <java-user-return-25092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61306 invoked from network); 19 Dec 2006 20:21:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 20:21:14 -0000
Received: (qmail 87132 invoked by uid 500); 19 Dec 2006 20:21:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87099 invoked by uid 500); 19 Dec 2006 20:21:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 17162 invoked by uid 99); 19 Dec 2006 18:46:08 -0000
X-ASF-Spam-Status: No, hits=4.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.it;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type;
  b=J8ahXxc8rHElAtyBJX2rwm3r0l+DDEtHKNypG099qU++r6EyFdkuzQZ/h/YBFsIwLtMfDQzhyHcImzbeByxWM9smlVNbB9tF3jcoL4q6+PzRnXrqZ9QQeh7eXffKEWEP6ZldKOWjPrL7hgB/JbuxgdbS4m3MrjLVvGDrSzvGPRE=  ;
Message-ID: <20061219184535.49212.qmail@web28010.mail.ukl.yahoo.com>
Date: Tue, 19 Dec 2006 18:45:35 +0000 (GMT)
From: Antonio Bruno <antoniobruno_apache@yahoo.it>
Subject: I: Lucene id generation
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1080170381-1166553935=:48242"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1080170381-1166553935=:48242
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

The problem in reality consists on the fact to have an only dictionary of t=
he terms for all the fields. If the dictionary of the terms is the many lar=
ge performances of a search they diminish, even if the search is made on a =
single term. Then it would be wanted to be able to index the fields of a si=
ngle document on more various indices. In such a way when if I want to crea=
te a filter on a field I use only a precise index that has a dictionary of =
the terms whose largeness is function only of the terms of that field. In s=
o far as I mean that the searches would be efficient to the maximum. =0AYou=
 notice yourself that the this case does not have nothing to that to see wi=
th the MultiSearcher=85 =0AI succeed to explain to me? How could be made on=
e what of this type at the moment? =0A =0A =0AAntonio Bruno=0A(T&S - Cosenz=
a Italy)=0A=0A=0A> But you can do something very similar and very quickly u=
sing a unique ID=0A> (not the Lucene ID) that's shared across the indexes (=
assuming I'm reading=0A> your issue correctly). Then use TermDocs/TermEnum =
and create your filters=0A> that way.=0A>=0A> I predict endless problems wi=
th user (programmer) errors if Lucene allowed=0A> one to specify the (lucen=
e) document ID.=0A>=0A> I suspect it just ain't going to happen since nobod=
y has yet made a case for=0A> why this would be enough better than the curr=
ent system to be worth the=0A> hassle.=0A> =0A> Best=0A> Erick=0A=0A_______=
___________________________________________=0ADo You Yahoo!?=0APoco spazio =
e tanto spam? Yahoo! Mail ti protegge dallo spam e ti da tanto spazio gratu=
ito per i tuoi file e i messaggi =0Ahttp://mail.yahoo.it 
--0-1080170381-1166553935=:48242--

From java-user-return-25093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 20:31:32 2006
Return-Path: <java-user-return-25093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65510 invoked from network); 19 Dec 2006 20:31:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 20:31:31 -0000
Received: (qmail 3335 invoked by uid 500); 19 Dec 2006 20:31:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3190 invoked by uid 500); 19 Dec 2006 20:31:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3179 invoked by uid 99); 19 Dec 2006 20:31:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 12:31:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.148.227.154] (HELO rwcrmhc14.comcast.net) (216.148.227.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 12:31:18 -0800
Received: from [192.168.168.15] (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc14) with ESMTP
          id <20061219203057m1400gt2ife>; Tue, 19 Dec 2006 20:30:57 +0000
Message-ID: <45884C01.8040802@apache.org>
Date: Tue, 19 Dec 2006 12:30:57 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.8 (X11/20061117)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene 2.0.1 release date
References: <013a01c6f906$a400e580$6401a8c0@aroushlt> <4540CB2E.8000003@syr.edu>
In-Reply-To: <4540CB2E.8000003@syr.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Steven Rowe wrote:
> "2.1" is much more likely to be the label used for the next release than
> "2.0.1".

The roadmap in Jira shows 21 issues scheduled for 2.0.1.  If there is in 
fact no intent to merge these into the 2.0 branch, these should probably 
be retargetted for 2.1.0, and the 2.0.1 version should be removed.  In 
general, folks should be able to see the state of release planning in 
Jira.  No dates are set for these releases, which sounds correct.

Discussion of the roadmap should probably be on java-dev.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 20:44:05 2006
Return-Path: <java-user-return-25094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69977 invoked from network); 19 Dec 2006 20:44:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 20:44:04 -0000
Received: (qmail 23250 invoked by uid 500); 19 Dec 2006 20:44:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23215 invoked by uid 500); 19 Dec 2006 20:44:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23204 invoked by uid 99); 19 Dec 2006 20:44:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 12:44:03 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.86.96] (HELO web82201.mail.mud.yahoo.com) (209.191.86.96)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 19 Dec 2006 12:43:53 -0800
Received: (qmail 66809 invoked by uid 60001); 19 Dec 2006 20:43:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=gg/GLZVcVTfGf9ZFFRQgaCnrU8Qx0GaWI0BtoGiQQUNzvSLdj+R+muv9IxqacTKfSP3JeskVnSkKJXKr71C9AgMZgPtb6239yvOOELN/ISIklvYvQNhh7uWk0HzbVT09G6Fq4BiNcGBetCTuWMB5EKfWl8g6MHSEz8QJyHY+fhg=  ;
Message-ID: <20061219204332.66807.qmail@web82201.mail.mud.yahoo.com>
Received: from [216.145.54.158] by web82201.mail.mud.yahoo.com via HTTP; Tue, 19 Dec 2006 12:43:32 PST
Date: Tue, 19 Dec 2006 12:43:32 -0800 (PST)
From: John Song <delphi329@yahoo.com>
Subject: how to define deault fields
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi:=0A=0AHow to define default fields?  Is it done during index time or dur=
ing search time?  Strangely, I can't find out any information on how defaul=
t fields are defined?=0A=0Athanks,=0A=0Ajohn=0A=0A=0A=0A=0A=0A_____________=
_____________________________________=0ADo You Yahoo!?=0ATired of spam?  Ya=
hoo! Mail has the best spam protection around =0Ahttp://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 20:57:52 2006
Return-Path: <java-user-return-25095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73950 invoked from network); 19 Dec 2006 20:57:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 20:57:51 -0000
Received: (qmail 52357 invoked by uid 500); 19 Dec 2006 20:57:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52321 invoked by uid 500); 19 Dec 2006 20:57:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52310 invoked by uid 99); 19 Dec 2006 20:57:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 12:57:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.148.227.153] (HELO rwcrmhc13.comcast.net) (216.148.227.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 12:57:39 -0800
Received: from [192.168.168.15] (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc13) with ESMTP
          id <20061219205718m1300kb84ke>; Tue, 19 Dec 2006 20:57:18 +0000
Message-ID: <4588522E.50703@apache.org>
Date: Tue, 19 Dec 2006 12:57:18 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.8 (X11/20061117)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene scoring: coord_q_d factor
References: <20061212103214.218000@gmx.net> <c68e39170612130731x65a9883do97648bca74c42c63@mail.gmail.com> <20061213154216.320030@gmx.net> <200612132100.45388.paul.elschot@xs4all.nl> <20061214013555.134000@gmx.net>
In-Reply-To: <20061214013555.134000@gmx.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Karl Koch wrote:
> Are there any other papers that regard the combination of coordination level matching and TFxIDF as advantageous?  

We independently developed coordination-level matching combined with 
TFxIDF when I worked at Apple.  This is documented in:

http://www.informatik.uni-trier.de/~ley/db/conf/trec/trec1996.html#RoseS96

(I had left Apple when this was written, but it largely describes work 
done while I was there.)

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 20:59:25 2006
Return-Path: <java-user-return-25096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74396 invoked from network); 19 Dec 2006 20:59:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 20:59:24 -0000
Received: (qmail 57607 invoked by uid 500); 19 Dec 2006 20:59:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57572 invoked by uid 500); 19 Dec 2006 20:59:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57551 invoked by uid 99); 19 Dec 2006 20:59:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 12:59:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 12:59:10 -0800
Received: by wx-out-0506.google.com with SMTP id i29so2227239wxd
        for <java-user@lucene.apache.org>; Tue, 19 Dec 2006 12:58:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=dIq88leRoUHsBW6xs50SXBTf7y4w1ZgMQWkG5vqVtoQ1ju2JFU4M1l0ryvXVO7JQ4i7TPAIo4/vQBBHzm1ywgwn/FDZIAUcWZmQGTB/rATpBbWnZHCH25VtS+eMUuAwIPDJPrZB0rh9C2nECssSWhn0gTGhfdoQ5+v/oV3kmWXs=
Received: by 10.90.103.2 with SMTP id a2mr6046948agc.1166561929877;
        Tue, 19 Dec 2006 12:58:49 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id g7sm15469853wra.2006.12.19.12.58.48;
        Tue, 19 Dec 2006 12:58:48 -0800 (PST)
Message-ID: <45885289.8080604@gmail.com>
Date: Tue, 19 Dec 2006 15:58:49 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: sorting by per doc hit count
References: <OFC26E4BA2.E2311C7A-ON88257249.005FBD98-88257249.0060AD7B@il.ibm.com>
In-Reply-To: <OFC26E4BA2.E2311C7A-ON88257249.005FBD98-88257249.0060AD7B@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the tip Doron,

What if I replace the decode static method in Similiarity so that it 
returns 1 always for the HitPerDocSimiliarity? This would not require a 
re-index right?

Doron Cohen wrote:
> "Mark Miller" <markrmiller@gmail.com> wrote on 19/12/2006 09:21:00:
>   
>> LIA mentioned something about needing to rebuild the
>> index if you change Similarity's. That does not make
>> sense to me yet. It would seem you could alternate them.
>> What does scoring have to do with indexing?
>>     
>
> For this part of your question, the length norms of fields are computed at
> indexing time and stored in the index (as field norms). If your modified
> Similarity changes the length norm computation, re-indexing is required.
> See
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html#formula_norm
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 21:04:17 2006
Return-Path: <java-user-return-25097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75993 invoked from network); 19 Dec 2006 21:04:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 21:04:16 -0000
Received: (qmail 68877 invoked by uid 500); 19 Dec 2006 21:04:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68857 invoked by uid 500); 19 Dec 2006 21:04:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68846 invoked by uid 99); 19 Dec 2006 21:04:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 13:04:16 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 13:04:06 -0800
Received: by ug-out-1314.google.com with SMTP id k40so2042236ugc
        for <java-user@lucene.apache.org>; Tue, 19 Dec 2006 13:03:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=T/goH0ZaimsUbEf0+FlO+S3cWyBnzHRlQbSOoQAR6o4hMG9Z5QtpVTeLFMiZ4adV8Rpk5n122zqoraVgyfjAflbRUpbAwFZZfW5jO02GOzFKKnfl+cdJffjgWOelLvHNqt1KYRxoLMHJow75bORI7yuJLtBntOuuO/dVzDHc+04=
Received: by 10.82.179.9 with SMTP id b9mr1236205buf.1166562225146;
        Tue, 19 Dec 2006 13:03:45 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Tue, 19 Dec 2006 13:03:45 -0800 (PST)
Message-ID: <359a92830612191303gea89399hfb60fa95dd393e58@mail.gmail.com>
Date: Tue, 19 Dec 2006 16:03:45 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I: Lucene id generation
In-Reply-To: <20061219184535.49212.qmail@web28010.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13125_26472214.1166562225087"
References: <20061219184535.49212.qmail@web28010.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13125_26472214.1166562225087
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I see your point, but I have to ask whether this is a practical or a
theoretical problem? If it's a practical one, perhaps you'd be willing to
talk about the issue you're actually trying to solve and maybe we can come
up with a solution within the current framework. I know others on the list
have used multiple indexes to solve their particular problem, and maybe
they'd have insights.

Have you tried to use the termdocs/termeunm interfaces to solve your issue
and is it too slow? I

Best
Erick

On 12/19/06, Antonio Bruno <antoniobruno_apache@yahoo.it> wrote:
>
> The problem in reality consists on the fact to have an only dictionary of
> the terms for all the fields. If the dictionary of the terms is the many
> large performances of a search they diminish, even if the search is made =
on
> a single term. Then it would be wanted to be able to index the fields of =
a
> single document on more various indices. In such a way when if I want to
> create a filter on a field I use only a precise index that has a dictiona=
ry
> of the terms whose largeness is function only of the terms of that field.=
 In
> so far as I mean that the searches would be efficient to the maximum.
> You notice yourself that the this case does not have nothing to that to
> see with the MultiSearcher=85
> I succeed to explain to me? How could be made one what of this type at th=
e
> moment?
>
>
> Antonio Bruno
> (T&S - Cosenza Italy)
>
>
> > But you can do something very similar and very quickly using a unique I=
D
> > (not the Lucene ID) that's shared across the indexes (assuming I'm
> reading
> > your issue correctly). Then use TermDocs/TermEnum and create your
> filters
> > that way.
> >
> > I predict endless problems with user (programmer) errors if Lucene
> allowed
> > one to specify the (lucene) document ID.
> >
> > I suspect it just ain't going to happen since nobody has yet made a cas=
e
> for
> > why this would be enough better than the current system to be worth the
> > hassle.
> >
> > Best
> > Erick
>
> __________________________________________________
> Do You Yahoo!?
> Poco spazio e tanto spam? Yahoo! Mail ti protegge dallo spam e ti da tant=
o
> spazio gratuito per i tuoi file e i messaggi
> http://mail.yahoo.it
>

------=_Part_13125_26472214.1166562225087--

From java-user-return-25098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 21:04:27 2006
Return-Path: <java-user-return-25098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76059 invoked from network); 19 Dec 2006 21:04:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 21:04:26 -0000
Received: (qmail 70352 invoked by uid 500); 19 Dec 2006 21:04:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70326 invoked by uid 500); 19 Dec 2006 21:04:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70315 invoked by uid 99); 19 Dec 2006 21:04:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 13:04:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 13:04:14 -0800
Received: by py-out-1112.google.com with SMTP id a25so1070823pyi
        for <java-user@lucene.apache.org>; Tue, 19 Dec 2006 13:03:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=LIYMgI2sm/b8hmdilGN2BzIlINR+KK7AWkjeLk+//ntUUVqEG49jt+J+CzMVfbmPGl08jpevKUCWqiTSF80ixyHbfEoJspsy5QEAhF8ehkz7+VdeLLDwGiaKSdvIzLJ1qHuA6CVBspqrL/UeDld0JRtw6mPSABYKL6Ms2kzqRQs=
Received: by 10.35.38.17 with SMTP id q17mr10939259pyj.1166562234049;
        Tue, 19 Dec 2006 13:03:54 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id y78sm10657889pyg.2006.12.19.13.03.52;
        Tue, 19 Dec 2006 13:03:52 -0800 (PST)
Message-ID: <458853B8.90702@gmail.com>
Date: Tue, 19 Dec 2006 16:03:52 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: sorting by per doc hit count
References: <OFC26E4BA2.E2311C7A-ON88257249.005FBD98-88257249.0060AD7B@il.ibm.com>
In-Reply-To: <OFC26E4BA2.E2311C7A-ON88257249.005FBD98-88257249.0060AD7B@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Foolish me...override a static method...silly silly. Still, I think 
there must be some way. I don't care about the field 
normalization...there must be some way to make it return a constant 1 
when using a new Similarity class.

Doron Cohen wrote:
> "Mark Miller" <markrmiller@gmail.com> wrote on 19/12/2006 09:21:00:
>   
>> LIA mentioned something about needing to rebuild the
>> index if you change Similarity's. That does not make
>> sense to me yet. It would seem you could alternate them.
>> What does scoring have to do with indexing?
>>     
>
> For this part of your question, the length norms of fields are computed at
> indexing time and stored in the index (as field norms). If your modified
> Similarity changes the length norm computation, re-indexing is required.
> See
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html#formula_norm
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 21:16:08 2006
Return-Path: <java-user-return-25099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78362 invoked from network); 19 Dec 2006 21:16:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 21:16:07 -0000
Received: (qmail 85993 invoked by uid 500); 19 Dec 2006 21:16:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85972 invoked by uid 500); 19 Dec 2006 21:16:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85961 invoked by uid 99); 19 Dec 2006 21:16:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 13:16:07 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 13:15:57 -0800
Received: by ug-out-1314.google.com with SMTP id k40so2046602ugc
        for <java-user@lucene.apache.org>; Tue, 19 Dec 2006 13:15:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=kgYdY3kzRLvD2ExdM3SjHZJGuK/G4t8+ywyjh67OTYEcp1+hrO8xQ/MAsdPI05hlPWxduQJzyqWCXq0lbKLF4hcwMA1uT3Olajt1ed/dxqP8VSTERc5TXnAuiRjD3/bwW0w3iShtQbTmV/mlkeFyHbyIx2KS8fv9vBQ/qSkrTZ0=
Received: by 10.82.113.6 with SMTP id l6mr1268286buc.1166562936314;
        Tue, 19 Dec 2006 13:15:36 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Tue, 19 Dec 2006 13:15:36 -0800 (PST)
Message-ID: <c68e39170612191315j4ce59119w9a1988763ab8ca7f@mail.gmail.com>
Date: Tue, 19 Dec 2006 16:15:36 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: how to define deault fields
In-Reply-To: <20061219204332.66807.qmail@web82201.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061219204332.66807.qmail@web82201.mail.mud.yahoo.com>
X-Google-Sender-Auth: be11071549b487f7
X-Virus-Checked: Checked by ClamAV on apache.org

On 12/19/06, John Song <delphi329@yahoo.com> wrote:
> How to define default fields?  Is it done during index time or during search time?  Strangely, I can't find out any information on how default fields are defined?

"default" field is simply a QueryParser concept (see it's
constructors).  It does not extend outside that.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 22:06:12 2006
Return-Path: <java-user-return-25100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90612 invoked from network); 19 Dec 2006 22:06:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 22:06:12 -0000
Received: (qmail 57810 invoked by uid 500); 19 Dec 2006 22:06:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57782 invoked by uid 500); 19 Dec 2006 22:06:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57771 invoked by uid 99); 19 Dec 2006 22:06:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 14:06:11 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ssellman@valueclick.com designates 216.34.207.14 as permitted sender)
Received: from [216.34.207.14] (HELO smtp1.corp.valueclick.com) (216.34.207.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 14:06:01 -0800
Received: from unknown (HELO LA-EXCLUST01.corp.valueclick.com) ([192.168.250.7])
  by smtp1.corp.valueclick.com with ESMTP; 19 Dec 2006 14:05:40 -0800
X-IronPort-AV: i="4.12,188,1165219200"; 
   d="scan'208,217"; a="206453113:sNHT44591764"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C723B9.D1EC1C5E"
Subject: MultiFieldQueryParser doesn't properly filter out documents when the query string specifies to exclude certain terms
Date: Tue, 19 Dec 2006 14:05:40 -0800
Message-ID: <F7CE0FFA3A30084B9AD03275B9F4CFC894BF02@LA-EXCLUST01.corp.valueclick.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MultiFieldQueryParser doesn't properly filter out documents when the query string specifies to exclude certain terms
Thread-Index: Acci66CNWhPnTiZ6QYaKUt3+3VPVgAAzhnyA
From: "Scott Sellman" <ssellman@valueclick.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C723B9.D1EC1C5E
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I am not sure if this is a problem with Lucene or if I am building my
Query object improperly.  It seems to me, when performing a search that
should exclude certain terms, MultiFieldQueryParser doesn't filter out
documents when it should.  Consider the following example to clarify
what I am talking about.=20

=20

Say the index contains a document with two fields: title and
description. The value stored in the title field is "chocolate shoes"
and the value in description is "hazardous candy". =20

=20

If I pass in the following query "+chocolate -hazardous", then the
document mentioned above IS returned as a result.  I did a little
investigation and noticed that only if the term "hazardous" exists in
every single field that is a part of MultiFieldQueryParser, will the
document be filtered out of the search results. =20

=20

Other queries such as "+chocolate" or "+chocolate +hazardous" seem to
work fine. =20

=20

One note: I did notice the following text in the FAQ section of the
lucene website: "Also MultiFieldQueryParser builds queries that
sometimes behave unexpectedly, namely for AND queries: it requires alls
terms to appear in all field. This is not what one typically wants, for
example in a search over "title" and "body" fields (Lucene 1.9 fixes
this problem)." - it seems there has been some problems noticed in the
past, perhaps they didn't fix all use cases in regards to this. =20

=20

I am currently using lucene 2.0.0. =20

=20

Here is the code I am using to build the Query object:

BooleanQuery q =3D new BooleanQuery();

String[] fields =3D new String[]{ "name", "description" };

Query keywordQuery =3D MultiFieldQueryParser.parse(keywords, fields,

                        new
BooleanClause.Occur[]{BooleanClause.Occur.SHOULD,
BooleanClause.Occur.SHOULD}

                        new StandardAnalyzer());

=20

q.add(keywordQuery, BooleanClause.Occur.MUST); //true, false);

=20

=20

Any help or suggestions is appreciated,

Scott Sellman

=20


------_=_NextPart_001_01C723B9.D1EC1C5E--

From java-user-return-25101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 19 22:15:11 2006
Return-Path: <java-user-return-25101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93697 invoked from network); 19 Dec 2006 22:15:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2006 22:15:09 -0000
Received: (qmail 70250 invoked by uid 500); 19 Dec 2006 22:15:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70223 invoked by uid 500); 19 Dec 2006 22:15:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70202 invoked by uid 99); 19 Dec 2006 22:15:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 14:15:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 14:14:59 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A351A5B763; Tue, 19 Dec 2006 14:14:37 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9C32E7F403
	for <java-user@lucene.apache.org>; Tue, 19 Dec 2006 14:14:37 -0800 (PST)
Date: Tue, 19 Dec 2006 14:14:37 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: sorting by per doc hit count
In-Reply-To: <458853B8.90702@gmail.com>
Message-ID: <Pine.LNX.4.58.0612191409090.31361@hal.rescomp.berkeley.edu>
References: <OFC26E4BA2.E2311C7A-ON88257249.005FBD98-88257249.0060AD7B@il.ibm.com>
 <458853B8.90702@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Foolish me...override a static method...silly silly. Still, I think
: there must be some way. I don't care about the field
: normalization...there must be some way to make it return a constant 1
: when using a new Similarity class.

as discussed: norms are a value explicitly stored in your index, so the
easiest way to ensure that they don't factor into the score is to use
OMIT_NORMS (or use your custom SImilarity with your customlengthNorm
function) when indexing.

once your index is built, the only way to ignore norms is with a custom
IndexReader (it's the "IndexReader.norms" method you need to worry about)

fortunately FilterIndexReader solves a lot of the busy work so you can
focus on just the norms method.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 00:05:36 2006
Return-Path: <java-user-return-25102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16743 invoked from network); 20 Dec 2006 00:05:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 00:05:35 -0000
Received: (qmail 14752 invoked by uid 500); 20 Dec 2006 00:05:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14469 invoked by uid 500); 20 Dec 2006 00:05:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14458 invoked by uid 99); 20 Dec 2006 00:05:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 16:05:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.43 as permitted sender)
Received: from [80.67.18.43] (HELO smtprelay05.ispgateway.de) (80.67.18.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 16:05:25 -0800
Received: (qmail 22754 invoked from network); 20 Dec 2006 00:05:03 -0000
Received: from unknown (HELO p5496e3e7.dip.t-dialin.net) ([pbs]695637@[84.150.227.231])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay05.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 20 Dec 2006 00:05:03 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: MultiFieldQueryParser doesn't properly filter out documents when the query string specifies to exclude certain terms
Date: Wed, 20 Dec 2006 01:05:39 +0100
User-Agent: KMail/1.8.2
References: <F7CE0FFA3A30084B9AD03275B9F4CFC894BF02@LA-EXCLUST01.corp.valueclick.com>
In-Reply-To: <F7CE0FFA3A30084B9AD03275B9F4CFC894BF02@LA-EXCLUST01.corp.valueclick.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200612200105.39993@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 19 December 2006 23:05, Scott Sellman wrote:

> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 new
> BooleanClause.Occur[]{BooleanClause.Occur.SHOULD,
> BooleanClause.Occur.SHOULD}

Why do you explicitly specify these operators?

> q.add(keywordQuery, BooleanClause.Occur.MUST); //true, false);

You seem to wrap a query in another BooleanQuery. As long as keywordQuery=20
is the only query that doesn't seem to make sense. Please try using the=20
MultiFieldQueryParser's constructor, not the static method. I think that=20
might fix your problem.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 03:21:27 2006
Return-Path: <java-user-return-25103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76171 invoked from network); 20 Dec 2006 03:21:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 03:21:25 -0000
Received: (qmail 57499 invoked by uid 500); 20 Dec 2006 03:21:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57475 invoked by uid 500); 20 Dec 2006 03:21:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57464 invoked by uid 99); 20 Dec 2006 03:21:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 19:21:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 19:21:12 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gws0i-0002gp-3X
	for java-user@lucene.apache.org; Tue, 19 Dec 2006 19:20:52 -0800
Message-ID: <7984092.post@talk.nabble.com>
Date: Tue, 19 Dec 2006 19:20:52 -0800 (PST)
From: Venkateshprasanna <prasannahmv@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Re: Extracting data from Lucene index files
In-Reply-To: <9CB86CF1-2489-46C8-B948-F6039783EA82@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: prasannahmv@yahoo.co.in
References: <7850919.post@talk.nabble.com> <9CB86CF1-2489-46C8-B948-F6039783EA82@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


> Take a look at TermDocs and TermEnum.

I need to get the frequency of each word in each of the documents I have
indexed.

This is what I could do with TermEnums and TermDocs. For each Term from
TermEnum, I have instantiated a TermsDoc and for each doc, I am trying to
get the frequency of the Term.

    IndexReader ir = IndexReader.open("index file");
    TermEnum terms = ir.terms();
    while(terms.next()) {
        TermDocs docs = ir.termDocs(terms.term());
        
        while(docs.next()) {
         	TermFreqVector tfv = ir.getTermFreqVector(docs.doc(),"contents");
         	String indexTerms[] = tfv.getTerms();
         	int indexFreqs[] = tfv.getTermFrequencies();

         	for(int i = 0; i<indexTerms.length; i++) {
         		System.out.println(indexTerms[i]+" "+indexFreqs[i]);
         	}
         }
     }

But there is no way of getting the frequency of only 'that' term in 'that'
document. I have to get the entire vector. This puts the loop in jeopardy.
How can I overcome this?

-- 
View this message in context: http://www.nabble.com/Extracting-data-from-Lucene-index-files-tf2813318.html#a7984092
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 03:42:07 2006
Return-Path: <java-user-return-25104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81288 invoked from network); 20 Dec 2006 03:42:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 03:42:07 -0000
Received: (qmail 74679 invoked by uid 500); 20 Dec 2006 03:42:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74642 invoked by uid 500); 20 Dec 2006 03:42:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74631 invoked by uid 99); 20 Dec 2006 03:42:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 19:42:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 19:41:53 -0800
Received: by py-out-1112.google.com with SMTP id a25so1118308pyi
        for <java-user@lucene.apache.org>; Tue, 19 Dec 2006 19:41:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=WnwhGZS7ILXuId6HoKvqLsMC5pjm5fS0HvZFRdLQPV3Q0UCvobOybcW6Hxu/ougUw3EUs+JRlnh8CB+kXkoOpx+wuLBANOZZnE+xYgVZqba3ksFqQIECwlpWF4Gg6tR9oF0wSMZzA+ofiUIWkoQy+e9TdWXzP8LJi0t1cUJ05jk=
Received: by 10.35.20.14 with SMTP id x14mr11753189pyi.1166586093183;
        Tue, 19 Dec 2006 19:41:33 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id p4sm3466732nzc.2006.12.19.19.41.31;
        Tue, 19 Dec 2006 19:41:31 -0800 (PST)
Message-ID: <4588B0ED.6060703@gmail.com>
Date: Tue, 19 Dec 2006 22:41:33 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: sorting by per doc hit count
References: <OFC26E4BA2.E2311C7A-ON88257249.005FBD98-88257249.0060AD7B@il.ibm.com> <458853B8.90702@gmail.com> <Pine.LNX.4.58.0612191409090.31361@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0612191409090.31361@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I appreciate your help Hoss. That has cleared up some things for me. The 
problem reamins that I would like to be able to switch between the hits 
per doc Similarity and the default Similarity on  any given search. I 
was hoping that I could index with DefaultSimilarity and store the norms 
for normal relevancy searching. Then I would need to ignore or make 
constant the norms with a custom Similarity for hits per doc searching. 
It would seem that this is not as easy as I had hoped it might be.

- Mark

Chris Hostetter wrote:
> : Foolish me...override a static method...silly silly. Still, I think
> : there must be some way. I don't care about the field
> : normalization...there must be some way to make it return a constant 1
> : when using a new Similarity class.
>
> as discussed: norms are a value explicitly stored in your index, so the
> easiest way to ensure that they don't factor into the score is to use
> OMIT_NORMS (or use your custom SImilarity with your customlengthNorm
> function) when indexing.
>
> once your index is built, the only way to ignore norms is with a custom
> IndexReader (it's the "IndexReader.norms" method you need to worry about)
>
> fortunately FilterIndexReader solves a lot of the busy work so you can
> focus on just the norms method.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 03:53:53 2006
Return-Path: <java-user-return-25105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85566 invoked from network); 20 Dec 2006 03:53:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 03:53:53 -0000
Received: (qmail 88524 invoked by uid 500); 20 Dec 2006 03:53:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88486 invoked by uid 500); 20 Dec 2006 03:53:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88473 invoked by uid 99); 20 Dec 2006 03:53:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 19:53:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Dec 2006 19:53:44 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1944478nfc
        for <java-user@lucene.apache.org>; Tue, 19 Dec 2006 19:53:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=WfubHBRzuUmhiuBw7DtsbbCjarP3o2LvqgN2X5/csO1XQu6KfZVbnvrfhQBAdWlBCPFlRaoCJaL8N4AnsB9QdwfYpR2QQP4pEtSVpgTwbj36RaPrQAFMhJpoy27PxTDyKne7WBHmHJ/83nm1OHdRvV0UVKYW6gDV1+Ft+4kSGsM=
Received: by 10.82.107.15 with SMTP id f15mr1339031buc.1166586802058;
        Tue, 19 Dec 2006 19:53:22 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Tue, 19 Dec 2006 19:53:16 -0800 (PST)
Message-ID: <c68e39170612191953g31ed825ble7e559ffd4f5eba5@mail.gmail.com>
Date: Tue, 19 Dec 2006 22:53:16 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: lucene nightly build after 11/20
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: f889371493cb7945
X-Virus-Checked: Checked by ClamAV on apache.org

Anyone using a lucene nightly build dated later than 11/20 will want
to upgrade to the next (future) nightly build that will be dated 12/21

http://issues.apache.org/jira/browse/LUCENE-754

Keep in mind that nightly builds are developer builds and not always
stable (though we try our best) :-)

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 08:39:37 2006
Return-Path: <java-user-return-25106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51754 invoked from network); 20 Dec 2006 08:39:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 08:39:36 -0000
Received: (qmail 36817 invoked by uid 500); 20 Dec 2006 08:39:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35776 invoked by uid 500); 20 Dec 2006 08:39:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35765 invoked by uid 99); 20 Dec 2006 08:39:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 00:39:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 00:39:26 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 99BBE5B763; Wed, 20 Dec 2006 00:39:06 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 95E727F403
	for <java-user@lucene.apache.org>; Wed, 20 Dec 2006 00:39:06 -0800 (PST)
Date: Wed, 20 Dec 2006 00:39:06 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: sorting by per doc hit count
In-Reply-To: <4588B0ED.6060703@gmail.com>
Message-ID: <Pine.LNX.4.58.0612200015530.20299@hal.rescomp.berkeley.edu>
References: <OFC26E4BA2.E2311C7A-ON88257249.005FBD98-88257249.0060AD7B@il.ibm.com>
 <458853B8.90702@gmail.com> <Pine.LNX.4.58.0612191409090.31361@hal.rescomp.berkeley.edu>
 <4588B0ED.6060703@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

:
: problem reamins that I would like to be able to switch between the hits
: per doc Similarity and the default Similarity on  any given search. I
: was hoping that I could index with DefaultSimilarity and store the norms
: for normal relevancy searching. Then I would need to ignore or make
: constant the norms with a custom Similarity for hits per doc searching.
: It would seem that this is not as easy as I had hoped it might be.

not quite ... but it's not super tough.  if "reader" is what you use to
construct your IndexSearcher when you wnat norms, something like this
should work when you don't want lengthNorms...

   IndexReader noNormsReader = new FilteredIndexReader(reader) {
     byte[] ones = SegmentReader.createFakeNorms(maxDoc());
     public synchronized byte[] norms(String field) throws IOException {
       return ones;
     }
     public synchronized void norms(String field, byte[] result, int offset) {
       System.arraycopy(ones, 0, result, offset, maxDoc());
     }
   }

it would be nice if encodeNorm, decodeNorm, and getNormDecoder weren't
static, so you could not only use whatever encoding you want at index
time, but could also ignore it alltogether at search time in the way you
describe ... but alas, that's just not the way it works -- changing it now
in a backwards compatible way would be a bit tricky.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 08:42:39 2006
Return-Path: <java-user-return-25107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52883 invoked from network); 20 Dec 2006 08:42:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 08:42:38 -0000
Received: (qmail 38192 invoked by uid 500); 20 Dec 2006 08:42:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38152 invoked by uid 500); 20 Dec 2006 08:42:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38141 invoked by uid 99); 20 Dec 2006 08:42:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 00:42:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ekang@cs.utah.edu designates 155.98.64.241 as permitted sender)
Received: from [155.98.64.241] (HELO mail-svr1.cs.utah.edu) (155.98.64.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 00:42:24 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail-svr1.cs.utah.edu (Postfix) with ESMTP id E2344650092
	for <java-user@lucene.apache.org>; Wed, 20 Dec 2006 01:42:03 -0700 (MST)
Received: from mail-svr1.cs.utah.edu ([127.0.0.1])
 by localhost (mail-svr1.cs.utah.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 04431-06 for <java-user@lucene.apache.org>;
 Wed, 20 Dec 2006 01:42:03 -0700 (MST)
Received: from [192.168.1.106] (c-67-161-253-189.hsd1.ut.comcast.net [67.161.253.189])
	by smtps.cs.utah.edu (Postfix) with ESMTP id 955FD650071
	for <java-user@lucene.apache.org>; Wed, 20 Dec 2006 01:42:03 -0700 (MST)
Message-ID: <4588F6DE.2090101@cs.utah.edu>
Date: Wed, 20 Dec 2006 01:39:58 -0700
From: Eun Yong Kang <ekang@cs.utah.edu>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: giving different boost to different terms in a same document
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at cs.utah.edu
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am trying to figure out how to give different weights to different 
terms in a same document.
Anybody knows how to do this?

For example,

doc A   contains  field1 : term1  (weight C)   field1 : term2 (weight F)

If I use setBoost(float)  function in the Field Object, I cannot give 
different weight to
term1 and term2.

Thanks,

Eun

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 13:40:06 2006
Return-Path: <java-user-return-25108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17493 invoked from network); 20 Dec 2006 13:40:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 13:40:05 -0000
Received: (qmail 28630 invoked by uid 500); 20 Dec 2006 13:40:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27855 invoked by uid 500); 20 Dec 2006 13:40:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27844 invoked by uid 99); 20 Dec 2006 13:40:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 05:40:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gopi.subramani@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 05:39:54 -0800
Received: by py-out-1112.google.com with SMTP id a25so1196591pyi
        for <java-user@lucene.apache.org>; Wed, 20 Dec 2006 05:39:34 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lZnie1k8QZjEY8QCdlmn2mR+faCQ16rDHPCi3XW/yZbc9IlzRbccYxUvem1tL2fRKR2Q7t+i+3dwNlfFMiYO5b/MjMiPtpQiuD6wErh63TRXagOGzA3qRlPekMY0qXugdFN7r7vHNm1ycGEZPpY5TJoMZ9t1TDML87lcIx298Cs=
Received: by 10.65.15.17 with SMTP id s17mr9450844qbi.1166621974098;
        Wed, 20 Dec 2006 05:39:34 -0800 (PST)
Received: by 10.64.185.8 with HTTP; Wed, 20 Dec 2006 05:39:33 -0800 (PST)
Message-ID: <733777220612200539l5bf69df9udbd503d899201c0b@mail.gmail.com>
Date: Wed, 20 Dec 2006 19:09:33 +0530
From: "Gopikrishnan Subramani" <gopi.subramani@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help with jump from 1.4.3 to 2.0.0
In-Reply-To: <7949145.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18840_11059281.1166621973953"
References: <7949145.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18840_11059281.1166621973953
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

All I could suspect is perhaps you are trying to add documents to an index
that was originally created using Lucene 1.4.3.

If trying to create a fresh index doesn't work, you could send me your
indexer code so I can take a look.

-Gopi


On 12/19/06, JT Kimbell <jtkimbell@yahoo.com> wrote:
>
>
> Hi,
>
> I'm working on learning Lucene for my job, and the book one of my
> professors
> purchased for myself and her is Lucene In Action, which is a good book but
> it is based on version 1.4.3 (I believe).  I am beginning to grasp a lot
> of
> the basic concepts behind Lucene and have a basic searching and indexing
> program written on the said professor's server (which is running 1.4.3).
> However, on my server for work I am using 2.0.0 and it was agreed that it
> would be best that I use the newer version.  My program ran fine using
> 1.4.3, but once I made a few changes to make it compatible with 2.0.0 it
> now
> returns a Null Pointer Exception about 80% of the way through.
>
> For some background on the files, they are all .txt files stored in a
> directory that has folders representing different years (e.g. 2005),
> within
> that there are month folders (August 2005) and those folders contain all
> the
> documents.  When I catch the exception and print while File f my program
> is
> currently on, it says it is that August 2005 folder.  My program is
> exactly
> the same except for updating Field to be compatible with 2.0.0 and the
> data
> is an exact copy of the other data.
>
> So I suppose I have two questions:
>
> 1)  The relevant methods from the two programs are below, does anyone have
> any ideas why this isn't working, am I doing something wrong or assuming
> something I shouldn't?  (If you need to see the full code with all
> comments
> for either program, let me know).
>
> 2)  Is there a good tutorial or something online for version 2.0.0 just to
> help me understand it better?  Do you have any tips?
>
> Version 1.4.3 Code
>        //This method recursively calls itself when it finds a directory
>        public void indexDirectory(IndexWriter writer, File dir) throws
> IOException{
>                File[] files = dir.listFiles();
>
>                for(int i = 0; i < files.length; i++){
>                        File f = files[i];
>                        if (f.isDirectory()){
>                                indexDirectory(writer, f);
>                        }else if (f.getName().endsWith(".txt")){
>                                indexFile(writer, f);
> }
>                }
>        }
>
>        //This method indexes each individual file
>        public void indexFile(IndexWriter writer, File f) throws
> IOException{
>
>                if(f.isHidden() || !f.exists() || !f.canRead()){
>                        return;
>                }
>
>                Document doc = new Document();
>                doc.add(Field.Text("contents", new FileReader(f)));
>                doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>                writer.addDocument(doc);
>        }
>
> Version 2.0.0 Code
>        //This method recursively calls itself when it finds a directory
>        public void indexDirectory(IndexWriter writer, File dir) throws
> IOException{
>                File[] files = dir.listFiles();
>
>                for(int i = 0; i < files.length; i++){
>                        File f = files[i];
>                        try{
>                             if (f.isDirectory()){
>                                   indexDirectory(writer, f);
>                       }else if (f.getName().endsWith(".txt")){  //Seems
> this is where it is first thrown...
>                                   indexFile(writer, f);
>                                   System.out.println(f);
>                             }
>                        }catch(NullPointerException npe){
>                                npe.printStackTrace(System.out);
>                                System.out.println("File is: " + f);
>                        }
>                }
>        }
>
>        //This method indexes each individual file
>        public void indexFile(IndexWriter writer, File f) throws
> IOException{
>
>                if(f.isHidden() || !f.exists() || !f.canRead()){
>                        return;
>                }
>
>                Document doc = new Document();
>                doc.add(new Field("contents", new FileReader(f)));
>                doc.add(new Field("filename", f.getCanonicalPath(),
> Field.Store.YES, Field.Index.UN_TOKENIZED));
>                writer.addDocument(doc);
>        }
>
> Thanks so much for any help you can give me.  It seems strange to me that
> when I print File f, it prints out a directory name (August 2005), but got
> past the isDirectory statement and is now checking to see if it has a .txt
> extension.
>
> Thanks,
>
> JT
> --
> View this message in context:
> http://www.nabble.com/Help-with-jump-from-1.4.3-to-2.0.0-tf2846591.html#a7949145
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_18840_11059281.1166621973953--

From java-user-return-25109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 13:48:01 2006
Return-Path: <java-user-return-25109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18569 invoked from network); 20 Dec 2006 13:48:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 13:48:00 -0000
Received: (qmail 38229 invoked by uid 500); 20 Dec 2006 13:48:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37346 invoked by uid 500); 20 Dec 2006 13:48:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37328 invoked by uid 99); 20 Dec 2006 13:48:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 05:48:01 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 05:47:51 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2086239nfc
        for <java-user@lucene.apache.org>; Wed, 20 Dec 2006 05:47:30 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=j2C1h3+hYkRgTQix3UJPziiBGuUJhrZBuiWsNxO4ShYI1dqtOYVhNrXqaNjF1dEXqy+7w4H0FoZr/hAZkGebjPoFS86Pzk1ZZFVaj/4B5OFwxadSWxDO7vRwkoO95ilVnucFMknP3DnTjpo54xTI2zeqVnyKH5hVzdHkz0gB+Y8=
Received: by 10.82.152.16 with SMTP id z16mr1596827bud.1166622449941;
        Wed, 20 Dec 2006 05:47:29 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 20 Dec 2006 05:47:29 -0800 (PST)
Message-ID: <359a92830612200547qfaa640dh970ac1639f7bfba4@mail.gmail.com>
Date: Wed, 20 Dec 2006 08:47:29 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: giving different boost to different terms in a same document
In-Reply-To: <4588F6DE.2090101@cs.utah.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24467_10203997.1166622449757"
References: <4588F6DE.2090101@cs.utah.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24467_10203997.1166622449757
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't think you want to do this at index time, but rather search time.
Quoting from Hoss (?)...

Index time field boosts are a way to express things like "this documents
title is worth twice as much as the title of most documents". Query time
boosts are a way to express "I care about matches on this clause of my query
twice as much as I do about matches to other clauses of my query".

>From your example, it looks like you want query time boosts rather than
index time boosts....

Erick

On 12/20/06, Eun Yong Kang <ekang@cs.utah.edu> wrote:
>
> Hi,
>
> I am trying to figure out how to give different weights to different
> terms in a same document.
> Anybody knows how to do this?
>
> For example,
>
> doc A   contains  field1 : term1  (weight C)   field1 : term2 (weight F)
>
> If I use setBoost(float)  function in the Field Object, I cannot give
> different weight to
> term1 and term2.
>
> Thanks,
>
> Eun
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24467_10203997.1166622449757--

From java-user-return-25110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 15:29:59 2006
Return-Path: <java-user-return-25110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55268 invoked from network); 20 Dec 2006 15:29:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 15:29:59 -0000
Received: (qmail 3103 invoked by uid 500); 20 Dec 2006 15:29:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3070 invoked by uid 500); 20 Dec 2006 15:29:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3059 invoked by uid 99); 20 Dec 2006 15:29:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 07:29:57 -0800
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 07:29:47 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gx3Nn-0003YU-63
	for java-user@lucene.apache.org; Wed, 20 Dec 2006 07:29:27 -0800
Message-ID: <7991979.post@talk.nabble.com>
Date: Wed, 20 Dec 2006 07:29:27 -0800 (PST)
From: JT Kimbell <jtkimbell@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Help with jump from 1.4.3 to 2.0.0
In-Reply-To: <733777220612200539l5bf69df9udbd503d899201c0b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jtkimbell@yahoo.com
References: <7949145.post@talk.nabble.com> <733777220612200539l5bf69df9udbd503d899201c0b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I've sent the code your way.  I'm downloading eclipse right now so I can step
through with its debugger once I get it all set up.  

However, I don't think I am using the same index for each of them, as this
is all actually on 3 different machines.  Machine A has 1.4.3 and I wrote
that code on that machine.  Machine B has 2.0.0 and I copied 1.4.3's code
over and then 'fixed' it.  Machine C has access to the necessary text files,
and I just FTP them to the other machines when necessary, so the indexes are
completely independent of each other.  I just seem to get a null pointer
exception when it reaches the August 2005 folder.  I can catch the exception
and continue on, but then I get none of those files indexed, so that's ~20
less that we should have indexed.  I can't send anyone the actual files, but
I could list the names of the files, perhaps that is throwing the indexer
off?  Are there any special characters that can do that?

Also, I leave for a week-long vacation tomorrow, so I probably won't be able
to reply or test things for a few days.

Thanks so much,

JT



Gopikrishnan Subramani wrote:
> 
> All I could suspect is perhaps you are trying to add documents to an index
> that was originally created using Lucene 1.4.3.
> 
> If trying to create a fresh index doesn't work, you could send me your
> indexer code so I can take a look.
> 
> -Gopi
> 
> 
> On 12/19/06, JT Kimbell <jtkimbell@yahoo.com> wrote:
>>
>>
>> Hi,
>>
>> I'm working on learning Lucene for my job, and the book one of my
>> professors
>> purchased for myself and her is Lucene In Action, which is a good book
>> but
>> it is based on version 1.4.3 (I believe).  I am beginning to grasp a lot
>> of
>> the basic concepts behind Lucene and have a basic searching and indexing
>> program written on the said professor's server (which is running 1.4.3).
>> However, on my server for work I am using 2.0.0 and it was agreed that it
>> would be best that I use the newer version.  My program ran fine using
>> 1.4.3, but once I made a few changes to make it compatible with 2.0.0 it
>> now
>> returns a Null Pointer Exception about 80% of the way through.
>>
>> For some background on the files, they are all .txt files stored in a
>> directory that has folders representing different years (e.g. 2005),
>> within
>> that there are month folders (August 2005) and those folders contain all
>> the
>> documents.  When I catch the exception and print while File f my program
>> is
>> currently on, it says it is that August 2005 folder.  My program is
>> exactly
>> the same except for updating Field to be compatible with 2.0.0 and the
>> data
>> is an exact copy of the other data.
>>
>> So I suppose I have two questions:
>>
>> 1)  The relevant methods from the two programs are below, does anyone
>> have
>> any ideas why this isn't working, am I doing something wrong or assuming
>> something I shouldn't?  (If you need to see the full code with all
>> comments
>> for either program, let me know).
>>
>> 2)  Is there a good tutorial or something online for version 2.0.0 just
>> to
>> help me understand it better?  Do you have any tips?
>>
>> Version 1.4.3 Code
>>        //This method recursively calls itself when it finds a directory
>>        public void indexDirectory(IndexWriter writer, File dir) throws
>> IOException{
>>                File[] files = dir.listFiles();
>>
>>                for(int i = 0; i < files.length; i++){
>>                        File f = files[i];
>>                        if (f.isDirectory()){
>>                                indexDirectory(writer, f);
>>                        }else if (f.getName().endsWith(".txt")){
>>                                indexFile(writer, f);
>> }
>>                }
>>        }
>>
>>        //This method indexes each individual file
>>        public void indexFile(IndexWriter writer, File f) throws
>> IOException{
>>
>>                if(f.isHidden() || !f.exists() || !f.canRead()){
>>                        return;
>>                }
>>
>>                Document doc = new Document();
>>                doc.add(Field.Text("contents", new FileReader(f)));
>>                doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>>                writer.addDocument(doc);
>>        }
>>
>> Version 2.0.0 Code
>>        //This method recursively calls itself when it finds a directory
>>        public void indexDirectory(IndexWriter writer, File dir) throws
>> IOException{
>>                File[] files = dir.listFiles();
>>
>>                for(int i = 0; i < files.length; i++){
>>                        File f = files[i];
>>                        try{
>>                             if (f.isDirectory()){
>>                                   indexDirectory(writer, f);
>>                       }else if (f.getName().endsWith(".txt")){  //Seems
>> this is where it is first thrown...
>>                                   indexFile(writer, f);
>>                                   System.out.println(f);
>>                             }
>>                        }catch(NullPointerException npe){
>>                                npe.printStackTrace(System.out);
>>                                System.out.println("File is: " + f);
>>                        }
>>                }
>>        }
>>
>>        //This method indexes each individual file
>>        public void indexFile(IndexWriter writer, File f) throws
>> IOException{
>>
>>                if(f.isHidden() || !f.exists() || !f.canRead()){
>>                        return;
>>                }
>>
>>                Document doc = new Document();
>>                doc.add(new Field("contents", new FileReader(f)));
>>                doc.add(new Field("filename", f.getCanonicalPath(),
>> Field.Store.YES, Field.Index.UN_TOKENIZED));
>>                writer.addDocument(doc);
>>        }
>>
>> Thanks so much for any help you can give me.  It seems strange to me that
>> when I print File f, it prints out a directory name (August 2005), but
>> got
>> past the isDirectory statement and is now checking to see if it has a
>> .txt
>> extension.
>>
>> Thanks,
>>
>> JT
>> --
>> View this message in context:
>> http://www.nabble.com/Help-with-jump-from-1.4.3-to-2.0.0-tf2846591.html#a7949145
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Help-with-jump-from-1.4.3-to-2.0.0-tf2846591.html#a7991979
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 15:46:33 2006
Return-Path: <java-user-return-25111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59555 invoked from network); 20 Dec 2006 15:46:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 15:46:32 -0000
Received: (qmail 39457 invoked by uid 500); 20 Dec 2006 15:46:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39415 invoked by uid 500); 20 Dec 2006 15:46:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39404 invoked by uid 99); 20 Dec 2006 15:46:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 07:46:32 -0800
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FORGED_HOTMAIL_RCVD,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of aflem26@hotmail.com designates 65.54.246.141 as permitted sender)
Received: from [65.54.246.141] (HELO bay0-omc2-s5.bay0.hotmail.com) (65.54.246.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 07:46:21 -0800
Received: from BAY109-W1 ([64.4.19.101]) by bay0-omc2-s5.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Wed, 20 Dec 2006 07:46:00 -0800
X-Originating-IP: [66.65.121.68]
X-Originating-Email: [aflem26@hotmail.com]
Message-ID: <BAY109-W15BCB255CB0767CEF5A2FA8CF0@phx.gbl>
From: Adam Fleming <aflem26@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: MultiFieldQueryParser doesn't properly filter out documents
 when the query string specifies to exclude certain terms
Date: Wed, 20 Dec 2006 07:46:00 -0800
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 20 Dec 2006 15:46:00.0771 (UTC) FILETIME=[F2C95130:01C7244D]
X-Virus-Checked: Checked by ClamAV on apache.org


Hello Gentlemen (+Ladies?),

I'm integrating Lucene into a Spring web-app, and have found a plethora of =
great web + print resources to make the integration quick and seamless.  On=
e thing that I have been hard-pressed to find is a good solution for rebuil=
ding the index on a regular basis. =20

I'm curious if a you know of a best-practice (or have found something perso=
nally that works) for rebuilding a Lucene Index w/o service interruptions. =
 The assumptions are a spring IOC container w/ an IndexFactory bean.  I hav=
e the project configured to work with both FSDirectory and RamDirectory imp=
lementations.   If you don't know Spring, you are free to ignore the detail=
s - I'll adapt your comments to my code :)=20

So far I tried rebuilding the index on a regular schedule, but foolishly on=
ly added duplicate documents to an existing index. =20

Things I have considered are
 - Using two index directories, and rebuilding one while the other is=20
   in use + switching when the rebuilt index is ready.  This would
   cause the app to alternate between two indexes. =20
 - Using a single index, and iterating over the index entirely,=20
   deleting documents 1 by 1 and re-adding them with fresh data
 - Using a single index, and deleting ALL the documents at once
   and then adding them all back as quickly as possible.


All of my proposed ideas seem fly in the face of Lucene's sipmlicity, and I=
 will be so thankful to be pointed in the right direction.=20


Happy Holidays and  a big Thank You to the active list users,=20


Adam Fleming

_________________________________________________________________
Try amazing new 3D maps
http://maps.live.com/?wip=3D51=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 15:59:18 2006
Return-Path: <java-user-return-25112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64079 invoked from network); 20 Dec 2006 15:59:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 15:59:17 -0000
Received: (qmail 71308 invoked by uid 500); 20 Dec 2006 15:59:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71281 invoked by uid 500); 20 Dec 2006 15:59:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71270 invoked by uid 99); 20 Dec 2006 15:59:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 07:59:16 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 07:59:06 -0800
Received: by ug-out-1314.google.com with SMTP id k40so2364692ugc
        for <java-user@lucene.apache.org>; Wed, 20 Dec 2006 07:58:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bRmHIowQNCeFsBl2YTfR1bPhRlHslx78ZIDvgvi8a2iwfeDDlMY4XgdxcZYi0qIcVe5c5dey4/J5/3Qu2fxVs+bnz2sRkwn5gJWWyobSXZ53QtoC3F9c2sYdXOUeFnzYHbq9edfV6g6taqi9AnIr75d/U8d602SOB9jIPxi+vkM=
Received: by 10.82.113.6 with SMTP id l6mr1751189buc.1166630323993;
        Wed, 20 Dec 2006 07:58:43 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 20 Dec 2006 07:58:43 -0800 (PST)
Message-ID: <359a92830612200758h36982da9u749b03bc370ec759@mail.gmail.com>
Date: Wed, 20 Dec 2006 10:58:43 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiFieldQueryParser doesn't properly filter out documents when the query string specifies to exclude certain terms
In-Reply-To: <BAY109-W15BCB255CB0767CEF5A2FA8CF0@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27257_19343196.1166630323923"
References: <BAY109-W15BCB255CB0767CEF5A2FA8CF0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27257_19343196.1166630323923
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

My first question is how many documents would you be deleting on a pass for
option 2? If it's 10 documents out of 10,000, I'd consider just deleting
them and re-adding (see IndexModifier).

Personally, if posible, I prefer your first option, building a completely
new index and switching between them. This is especially useful if something
catastrophic happens to the index as you build it and it winds up being
unusable (power failures *do* happen). You can keep using your old index and
be happy.

Another question is how quickly the index builds and how soon do your users
require that they get up-to-date data?

And remember that no matter what, you must re-open your searcher to see the
updates.

I'd be really reluctant to remove all the items and re-build the index for
several reasons...
1> You wouldn't get the new data being added until you closed/reopened your
searcher.
2> The documents you deleted wouldn't be "gone" until you closed/reopened
your searcher.
3> In the interim, your users wouldn't have access to much of anything....

Best
Erick

On 12/20/06, Adam Fleming <aflem26@hotmail.com> wrote:
>
>
> Hello Gentlemen (+Ladies?),
>
> I'm integrating Lucene into a Spring web-app, and have found a plethora of
> great web + print resources to make the integration quick and seamless.  One
> thing that I have been hard-pressed to find is a good solution for
> rebuilding the index on a regular basis.
>
> I'm curious if a you know of a best-practice (or have found something
> personally that works) for rebuilding a Lucene Index w/o service
> interruptions.  The assumptions are a spring IOC container w/ an
> IndexFactory bean.  I have the project configured to work with both
> FSDirectory and RamDirectory implementations.   If you don't know Spring,
> you are free to ignore the details - I'll adapt your comments to my code :)
>
> So far I tried rebuilding the index on a regular schedule, but foolishly
> only added duplicate documents to an existing index.
>
> Things I have considered are
> - Using two index directories, and rebuilding one while the other is
>    in use + switching when the rebuilt index is ready.  This would
>    cause the app to alternate between two indexes.
> - Using a single index, and iterating over the index entirely,
>    deleting documents 1 by 1 and re-adding them with fresh data
> - Using a single index, and deleting ALL the documents at once
>    and then adding them all back as quickly as possible.
>
>
> All of my proposed ideas seem fly in the face of Lucene's sipmlicity, and
> I will be so thankful to be pointed in the right direction.
>
>
> Happy Holidays and  a big Thank You to the active list users,
>
>
> Adam Fleming
>
> _________________________________________________________________
> Try amazing new 3D maps
> http://maps.live.com/?wip=51
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27257_19343196.1166630323923--

From java-user-return-25113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 16:19:35 2006
Return-Path: <java-user-return-25113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70383 invoked from network); 20 Dec 2006 16:19:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 16:19:34 -0000
Received: (qmail 14282 invoked by uid 500); 20 Dec 2006 16:19:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14257 invoked by uid 500); 20 Dec 2006 16:19:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14196 invoked by uid 99); 20 Dec 2006 16:19:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 08:19:26 -0800
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ssellman@valueclick.com designates 216.34.207.14 as permitted sender)
Received: from [216.34.207.14] (HELO smtp2.corp.valueclick.com) (216.34.207.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 08:19:17 -0800
Received: from unknown (HELO LA-EXCLUST01.corp.valueclick.com) ([192.168.250.7])
  by smtp2.corp.valueclick.com with ESMTP; 20 Dec 2006 08:18:56 -0800
X-IronPort-AV: i="4.12,192,1165219200"; 
   d="scan'208"; a="87080489:sNHT25064774"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: MultiFieldQueryParser doesn't properly filter out documents when the query string specifies to exclude certain terms
Date: Wed, 20 Dec 2006 08:18:54 -0800
Message-ID: <F7CE0FFA3A30084B9AD03275B9F4CFC894BFC6@LA-EXCLUST01.corp.valueclick.com>
In-Reply-To: <200612200105.39993@danielnaber.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MultiFieldQueryParser doesn't properly filter out documents when the query string specifies to exclude certain terms
Thread-Index: AccjypL18kdOBjyJRRigdleG98TbnQAhiI3A
From: "Scott Sellman" <ssellman@valueclick.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

>Please try using the MultiFieldQueryParser's constructor, not the =
static >method. I think that might fix your problem.

Yes, after I created a new MultiFieldQueryParser and calling the parse( =
String query) method my search executed as expected. =20

Thanks for your help!
Scott

>> BooleanClause.Occur[]{BooleanClause.Occur.SHOULD,
>> BooleanClause.Occur.SHOULD}

>Why do you explicitly specify these operators?

I am using the parse(String query, String[] fields, =
BooleanClause.Occur[] flags, Analyzer analyzer) method as opposed to =
parse(String[] queries, String[] fields, Analyzer analyzer).  They seem =
to have the same result.=20

>> q.add(keywordQuery, BooleanClause.Occur.MUST);=20

>You seem to wrap a query in another BooleanQuery. As long as =
keywordQuery=20
>is the only query that doesn't seem to make sense.=20

I am adding additional Query objects later on in my code.
-----Original Message-----
From: Daniel Naber [mailto:lucenelist2005@danielnaber.de]=20
Sent: Tuesday, December 19, 2006 4:06 PM
To: java-user@lucene.apache.org
Subject: Re: MultiFieldQueryParser doesn't properly filter out documents =
when the query string specifies to exclude certain terms

On Tuesday 19 December 2006 23:05, Scott Sellman wrote:

> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 new
> BooleanClause.Occur[]{BooleanClause.Occur.SHOULD,
> BooleanClause.Occur.SHOULD}

Why do you explicitly specify these operators?

> q.add(keywordQuery, BooleanClause.Occur.MUST);=20

You seem to wrap a query in another BooleanQuery. As long as =
keywordQuery=20
is the only query that doesn't seem to make sense. Please try using the=20
MultiFieldQueryParser's constructor, not the static method. I think that =

might fix your problem.

Regards
 Daniel

--=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 16:32:50 2006
Return-Path: <java-user-return-25114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76242 invoked from network); 20 Dec 2006 16:32:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 16:32:49 -0000
Received: (qmail 42271 invoked by uid 500); 20 Dec 2006 16:32:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42243 invoked by uid 500); 20 Dec 2006 16:32:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42232 invoked by uid 99); 20 Dec 2006 16:32:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 08:32:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 08:32:35 -0800
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id kBKGWATq026101
	for <java-user@lucene.apache.org>; Wed, 20 Dec 2006 17:32:10 +0100
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id D1F748BE2A
	for <java-user@lucene.apache.org>; Wed, 20 Dec 2006 17:32:10 +0100 (CET)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 03634-06 for <java-user@lucene.apache.org>;
 Wed, 20 Dec 2006 17:32:09 +0100 (CET)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id C0D268BE29
	for <java-user@lucene.apache.org>; Wed, 20 Dec 2006 17:32:09 +0100 (CET)
Message-ID: <45896589.5090505@uni-hd.de>
Date: Wed, 20 Dec 2006 17:32:09 +0100
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.9 (X11/20061206)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: to boost or not to boost
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

I am trying to boost more recent Docs, i.e. Docs with a greater year
Value like this:

 		if (title.getEJ() != null) {
			titleDocument.setBoost(new Float("1." + title.getEJ()));
		}
so a doc from 1973 should get a boost of 1.1973 and a doc of 1975 should
get a boost of 1.1975 .

I have indexed these two docs:


DOK 1:
Document<stored/uncompressed,indexed<katkey:1042362>
stored/uncompressed,indexed,termVector<EJ:1973>
indexed,tokenized<AU:Palandt, Otto
Danckelmann, Bernhard>
[...]

DOK 2:
Document<stored/uncompressed,indexed<katkey:1043960>
stored/uncompressed,indexed,termVector<EJ:1975>
indexed,tokenized<AU:Palandt, Otto
Danckelmann, Bernhard>
[...]

If I am Searching for AU:palandt

I get this:
Explain fÃ¼r 1042362: 1.6931472 = fieldWeight(AU:palandt in 0), product of:
  1.0 = tf(termFreq(AU:palandt)=1)
  1.6931472 = idf(docFreq=2)
  1.0 = fieldNorm(field=AU, doc=0)

Explain fÃ¼r 1043960: 1.6931472 = fieldWeight(AU:palandt in 1), product of:
  1.0 = tf(termFreq(AU:palandt)=1)
  1.6931472 = idf(docFreq=2)
  1.0 = fieldNorm(field=AU, doc=1)


so the "older" doc is better rated or with the same rank as the newer?


any ideas?

tia,
martin













---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 16:44:51 2006
Return-Path: <java-user-return-25115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81585 invoked from network); 20 Dec 2006 16:44:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 16:44:50 -0000
Received: (qmail 78843 invoked by uid 500); 20 Dec 2006 16:44:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78816 invoked by uid 500); 20 Dec 2006 16:44:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78805 invoked by uid 99); 20 Dec 2006 16:44:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 08:44:49 -0800
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ssellman@valueclick.com designates 216.34.207.14 as permitted sender)
Received: from [216.34.207.14] (HELO smtp2.corp.valueclick.com) (216.34.207.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 08:44:39 -0800
Received: from unknown (HELO LA-EXCLUST01.corp.valueclick.com) ([192.168.250.7])
  by smtp2.corp.valueclick.com with ESMTP; 20 Dec 2006 08:44:18 -0800
X-IronPort-AV: i="4.12,193,1165219200"; 
   d="scan'208"; a="87095579:sNHT32115125"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Re: Rebuilding index on a regular basis 
Date: Wed, 20 Dec 2006 08:44:16 -0800
Message-ID: <F7CE0FFA3A30084B9AD03275B9F4CFC894BFCC@LA-EXCLUST01.corp.valueclick.com>
In-Reply-To: <359a92830612200758h36982da9u749b03bc370ec759@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Rebuilding index on a regular basis 
Thread-Index: AcckT82ydtqvAw00TIOLeMawyPagRAABVIgw
From: "Scott Sellman" <ssellman@valueclick.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Note: I have changed the title of this thread to match its content

I am currently facing a similar issue.  I am dealing with a large index
that is constantly used and needs to be updated on a daily basis.  For
fear of corruption I would rather rebuild the index each time,
performing tests against it before using it.  However the problem I am
having is switching in the old index without causing service
interruption.  As long as queries are being made against the index I am
running into locking issues with the index files, preventing me from
putting the new index in place. Any suggestions?

Thanks,=20
Scott=20
-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Wednesday, December 20, 2006 7:59 AM
To: java-user@lucene.apache.org
Subject: Re: MultiFieldQueryParser doesn't properly filter out documents
when the query string specifies to exclude certain terms

My first question is how many documents would you be deleting on a pass
for
option 2? If it's 10 documents out of 10,000, I'd consider just deleting
them and re-adding (see IndexModifier).

Personally, if posible, I prefer your first option, building a
completely
new index and switching between them. This is especially useful if
something
catastrophic happens to the index as you build it and it winds up being
unusable (power failures *do* happen). You can keep using your old index
and
be happy.

Another question is how quickly the index builds and how soon do your
users
require that they get up-to-date data?

And remember that no matter what, you must re-open your searcher to see
the
updates.

I'd be really reluctant to remove all the items and re-build the index
for
several reasons...
1> You wouldn't get the new data being added until you closed/reopened
your
searcher.
2> The documents you deleted wouldn't be "gone" until you
closed/reopened
your searcher.
3> In the interim, your users wouldn't have access to much of
anything....

Best
Erick

On 12/20/06, Adam Fleming <aflem26@hotmail.com> wrote:
>
>
> Hello Gentlemen (+Ladies?),
>
> I'm integrating Lucene into a Spring web-app, and have found a
plethora of
> great web + print resources to make the integration quick and
seamless.  One
> thing that I have been hard-pressed to find is a good solution for
> rebuilding the index on a regular basis.
>
> I'm curious if a you know of a best-practice (or have found something
> personally that works) for rebuilding a Lucene Index w/o service
> interruptions.  The assumptions are a spring IOC container w/ an
> IndexFactory bean.  I have the project configured to work with both
> FSDirectory and RamDirectory implementations.   If you don't know
Spring,
> you are free to ignore the details - I'll adapt your comments to my
code :)
>
> So far I tried rebuilding the index on a regular schedule, but
foolishly
> only added duplicate documents to an existing index.
>
> Things I have considered are
> - Using two index directories, and rebuilding one while the other is
>    in use + switching when the rebuilt index is ready.  This would
>    cause the app to alternate between two indexes.
> - Using a single index, and iterating over the index entirely,
>    deleting documents 1 by 1 and re-adding them with fresh data
> - Using a single index, and deleting ALL the documents at once
>    and then adding them all back as quickly as possible.
>
>
> All of my proposed ideas seem fly in the face of Lucene's sipmlicity,
and
> I will be so thankful to be pointed in the right direction.
>
>
> Happy Holidays and  a big Thank You to the active list users,
>
>
> Adam Fleming
>
> _________________________________________________________________
> Try amazing new 3D maps
> http://maps.live.com/?wip=3D51
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 18:05:08 2006
Return-Path: <java-user-return-25116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7295 invoked from network); 20 Dec 2006 18:05:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 18:05:07 -0000
Received: (qmail 68601 invoked by uid 500); 20 Dec 2006 18:05:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68567 invoked by uid 500); 20 Dec 2006 18:05:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68556 invoked by uid 99); 20 Dec 2006 18:05:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 10:05:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from [80.67.18.15] (HELO smtprelay03.ispgateway.de) (80.67.18.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 10:04:54 -0800
Received: (qmail 4593 invoked from network); 20 Dec 2006 18:04:32 -0000
Received: from unknown (HELO p5496e2a7.dip.t-dialin.net) ([pbs]695637@[84.150.226.167])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 20 Dec 2006 18:04:32 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: to boost or not to boost
Date: Wed, 20 Dec 2006 19:05:14 +0100
User-Agent: KMail/1.8.2
References: <45896589.5090505@uni-hd.de>
In-Reply-To: <45896589.5090505@uni-hd.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200612201905.14593@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 20 December 2006 17:32, Martin Braun wrote:

> so a doc from 1973 should get a boost of 1.1973 and a doc of 1975 should
> get a boost of 1.1975 .

The boost is stored with a limited resolution. Try boosting one doc by 10, 
the other one by 20 or something like that.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 18:23:48 2006
Return-Path: <java-user-return-25117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11098 invoked from network); 20 Dec 2006 18:23:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 18:23:47 -0000
Received: (qmail 2401 invoked by uid 500); 20 Dec 2006 18:23:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2371 invoked by uid 500); 20 Dec 2006 18:23:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2360 invoked by uid 99); 20 Dec 2006 18:23:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 10:23:45 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 10:23:35 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2159582nfc
        for <java-user@lucene.apache.org>; Wed, 20 Dec 2006 10:23:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=B8MqYI1+gxYSaAcpel6t22viuIkIZwnVFic9vIyGlW3h7unSojqjBuRs+iqDtDAWlTuZ/vWZvLw4fZiZR8sPpIod754m+2q8IgZ94B+wUSVd3+jbShV2pBc/M1tRwBPz6rb3Sr3oXFTj3uWOYFf0KplzlgVn5GYE3LEeqbN3ZT4=
Received: by 10.82.114.3 with SMTP id m3mr1779342buc.1166638993089;
        Wed, 20 Dec 2006 10:23:13 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 20 Dec 2006 10:23:12 -0800 (PST)
Message-ID: <359a92830612201023q6572801dv9b411ddfd93b77d7@mail.gmail.com>
Date: Wed, 20 Dec 2006 13:23:12 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Rebuilding index on a regular basis
In-Reply-To: <F7CE0FFA3A30084B9AD03275B9F4CFC894BFCC@LA-EXCLUST01.corp.valueclick.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31062_8834991.1166638992541"
References: <359a92830612200758h36982da9u749b03bc370ec759@mail.gmail.com>
	 <F7CE0FFA3A30084B9AD03275B9F4CFC894BFCC@LA-EXCLUST01.corp.valueclick.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31062_8834991.1166638992541
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Why not switch where the searchers look rather than copy the index and
restart? That is, your searcher is pointing at index1, and you build the new
one in a a new dir (index2). On some signal, your server closes the searcher
pointing to index1 and opens one pointing to index2 and uses that until
tomorrow, when you do the opposite.

You could even warm up the searcher after you open it but before you start
searching with it if you wanted.

Or, if you are using Linux, say, your index directory could be a symlink and
your process would be
1> build/test the new index
2> shut down the server
3> switch the symlink to point at the new index directory
4> start the server.

You'd still have a small interruption for your users, but we're probably
talking 2 seconds plus however long it takes you to stop/start your
server.....

Erick


On 12/20/06, Scott Sellman <ssellman@valueclick.com> wrote:
>
> Note: I have changed the title of this thread to match its content
>
> I am currently facing a similar issue.  I am dealing with a large index
> that is constantly used and needs to be updated on a daily basis.  For
> fear of corruption I would rather rebuild the index each time,
> performing tests against it before using it.  However the problem I am
> having is switching in the old index without causing service
> interruption.  As long as queries are being made against the index I am
> running into locking issues with the index files, preventing me from
> putting the new index in place. Any suggestions?
>
> Thanks,
> Scott
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Wednesday, December 20, 2006 7:59 AM
> To: java-user@lucene.apache.org
> Subject: Re: MultiFieldQueryParser doesn't properly filter out documents
> when the query string specifies to exclude certain terms
>
> My first question is how many documents would you be deleting on a pass
> for
> option 2? If it's 10 documents out of 10,000, I'd consider just deleting
> them and re-adding (see IndexModifier).
>
> Personally, if posible, I prefer your first option, building a
> completely
> new index and switching between them. This is especially useful if
> something
> catastrophic happens to the index as you build it and it winds up being
> unusable (power failures *do* happen). You can keep using your old index
> and
> be happy.
>
> Another question is how quickly the index builds and how soon do your
> users
> require that they get up-to-date data?
>
> And remember that no matter what, you must re-open your searcher to see
> the
> updates.
>
> I'd be really reluctant to remove all the items and re-build the index
> for
> several reasons...
> 1> You wouldn't get the new data being added until you closed/reopened
> your
> searcher.
> 2> The documents you deleted wouldn't be "gone" until you
> closed/reopened
> your searcher.
> 3> In the interim, your users wouldn't have access to much of
> anything....
>
> Best
> Erick
>
> On 12/20/06, Adam Fleming <aflem26@hotmail.com> wrote:
> >
> >
> > Hello Gentlemen (+Ladies?),
> >
> > I'm integrating Lucene into a Spring web-app, and have found a
> plethora of
> > great web + print resources to make the integration quick and
> seamless.  One
> > thing that I have been hard-pressed to find is a good solution for
> > rebuilding the index on a regular basis.
> >
> > I'm curious if a you know of a best-practice (or have found something
> > personally that works) for rebuilding a Lucene Index w/o service
> > interruptions.  The assumptions are a spring IOC container w/ an
> > IndexFactory bean.  I have the project configured to work with both
> > FSDirectory and RamDirectory implementations.   If you don't know
> Spring,
> > you are free to ignore the details - I'll adapt your comments to my
> code :)
> >
> > So far I tried rebuilding the index on a regular schedule, but
> foolishly
> > only added duplicate documents to an existing index.
> >
> > Things I have considered are
> > - Using two index directories, and rebuilding one while the other is
> >    in use + switching when the rebuilt index is ready.  This would
> >    cause the app to alternate between two indexes.
> > - Using a single index, and iterating over the index entirely,
> >    deleting documents 1 by 1 and re-adding them with fresh data
> > - Using a single index, and deleting ALL the documents at once
> >    and then adding them all back as quickly as possible.
> >
> >
> > All of my proposed ideas seem fly in the face of Lucene's sipmlicity,
> and
> > I will be so thankful to be pointed in the right direction.
> >
> >
> > Happy Holidays and  a big Thank You to the active list users,
> >
> >
> > Adam Fleming
> >
> > _________________________________________________________________
> > Try amazing new 3D maps
> > http://maps.live.com/?wip=51
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_31062_8834991.1166638992541--

From java-user-return-25118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 18:35:15 2006
Return-Path: <java-user-return-25118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13621 invoked from network); 20 Dec 2006 18:35:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 18:35:14 -0000
Received: (qmail 19665 invoked by uid 500); 20 Dec 2006 18:35:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19473 invoked by uid 500); 20 Dec 2006 18:35:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19462 invoked by uid 99); 20 Dec 2006 18:35:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 10:35:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ekang@cs.utah.edu designates 155.98.64.241 as permitted sender)
Received: from [155.98.64.241] (HELO mail-svr1.cs.utah.edu) (155.98.64.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 10:35:02 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail-svr1.cs.utah.edu (Postfix) with ESMTP id 6773365004C
	for <java-user@lucene.apache.org>; Wed, 20 Dec 2006 11:34:42 -0700 (MST)
Received: from mail-svr1.cs.utah.edu ([127.0.0.1])
 by localhost (mail-svr1.cs.utah.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 22742-03 for <java-user@lucene.apache.org>;
 Wed, 20 Dec 2006 11:34:39 -0700 (MST)
Received: from [192.168.1.106] (c-67-161-253-189.hsd1.ut.comcast.net [67.161.253.189])
	by smtps.cs.utah.edu (Postfix) with ESMTP id 96841650073
	for <java-user@lucene.apache.org>; Wed, 20 Dec 2006 11:34:39 -0700 (MST)
Message-ID: <458981C2.5010006@cs.utah.edu>
Date: Wed, 20 Dec 2006 11:32:34 -0700
From: Eun Yong Kang <ekang@cs.utah.edu>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: giving different boost to different terms in a same document
References: <4588F6DE.2090101@cs.utah.edu> <359a92830612200547qfaa640dh970ac1639f7bfba4@mail.gmail.com>
In-Reply-To: <359a92830612200547qfaa640dh970ac1639f7bfba4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at cs.utah.edu
X-Virus-Checked: Checked by ClamAV on apache.org


Yes I want to do boost in indexing time.
But I want to do boost for terms instead of fields. I want to give 
different weight for
different terms even if the field of two terms are same.

For example,

doc A   contains  field1 : term1  (weight C)   field1 : term2 (weight F)

I want to give different boost factor for term1 and term2, even if term1 
and term2  are
in the same field (field1).

Anybody knows how to do this?

Eun


Erick Erickson wrote:
> I don't think you want to do this at index time, but rather search time.
> Quoting from Hoss (?)...
>
> Index time field boosts are a way to express things like "this documents
> title is worth twice as much as the title of most documents". Query time
> boosts are a way to express "I care about matches on this clause of my 
> query
> twice as much as I do about matches to other clauses of my query".
>
> From your example, it looks like you want query time boosts rather than
> index time boosts....
>
> Erick
>
> On 12/20/06, Eun Yong Kang <ekang@cs.utah.edu> wrote:
>>
>> Hi,
>>
>> I am trying to figure out how to give different weights to different
>> terms in a same document.
>> Anybody knows how to do this?
>>
>> For example,
>>
>> doc A   contains  field1 : term1  (weight C)   field1 : term2 (weight F)
>>
>> If I use setBoost(float)  function in the Field Object, I cannot give
>> different weight to
>> term1 and term2.
>>
>> Thanks,
>>
>> Eun
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 19:07:22 2006
Return-Path: <java-user-return-25119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19462 invoked from network); 20 Dec 2006 19:07:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 19:07:21 -0000
Received: (qmail 63611 invoked by uid 500); 20 Dec 2006 19:07:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63587 invoked by uid 500); 20 Dec 2006 19:07:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63576 invoked by uid 99); 20 Dec 2006 19:07:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:07:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [144.92.197.210] (HELO smtpauth.wiscmail.wisc.edu) (144.92.197.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:07:10 -0800
Received: from avs-daemon.smtpauth1.wiscmail.wisc.edu by
 smtpauth1.wiscmail.wisc.edu
 (Sun Java System Messaging Server 6.2-7.05 (built Sep  5 2006))
 id <0JAL00B016FAUB00@smtpauth1.wiscmail.wisc.edu> for
 java-user@lucene.apache.org; Wed, 20 Dec 2006 13:06:46 -0600 (CST)
Received: from hathor ([144.92.136.11]) by smtpauth1.wiscmail.wisc.edu
 (Sun Java System Messaging Server 6.2-7.05 (built Sep  5 2006))
 with ESMTPSA id <0JAL00B9V6F9GZ00@smtpauth1.wiscmail.wisc.edu> for
 java-user@lucene.apache.org; Wed, 20 Dec 2006 13:06:46 -0600 (CST)
Date: Wed, 20 Dec 2006 13:06:47 -0600
From: Michael Rusch <mcrusch@facstaff.wisc.edu>
Subject: RE: giving different boost to different terms in a same document
In-reply-to: <458981C2.5010006@cs.utah.edu>
To: java-user@lucene.apache.org
Message-id: <004d01c72469$ff8598e0$0d1aa8c0@gel.local>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Mailer: Microsoft Outlook, Build 10.0.6626
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
X-Spam-Report: AuthenticatedSender=yes, SenderIP=144.92.136.11
X-Spam-PmxInfo: Server=avs-6, Version=5.2.1.279297,
 Antispam-Engine: 2.5.0.283055, Antispam-Data: 2006.12.20.104932,
 SenderIP=144.92.136.11
X-Virus-Checked: Checked by ClamAV on apache.org

It's definitely my understanding that this is not possible.  Maybe somebody
can give you a hardcore way of doing it by subclassing one of the classes
involved in indexing, but I'm too green for that :)

One solution that may or may not work depending on how specific you want to
get is that you can put the more highly boosted terms in separate fields,
and use field boosts.  Then, the magic you have to apply would be at query
time where you make sure that user's queries automatically get turned into
queries on all of the fields.

This is something that we are doing already, except it's only implemented in
my head...so it's more of a brainstorm than a proven technique...

Michael.

> -----Original Message-----
> From: Eun Yong Kang [mailto:ekang@cs.utah.edu]
> Sent: Wednesday, December 20, 2006 12:33 PM
> To: java-user@lucene.apache.org
> Subject: Re: giving different boost to different terms in a same document
> 
> 
> Yes I want to do boost in indexing time.
> But I want to do boost for terms instead of fields. I want to give
> different weight for
> different terms even if the field of two terms are same.
> 
> For example,
> 
> doc A   contains  field1 : term1  (weight C)   field1 : term2 (weight F)
> 
> I want to give different boost factor for term1 and term2, even if term1
> and term2  are
> in the same field (field1).
> 
> Anybody knows how to do this?
> 
> Eun
> 
> 
> Erick Erickson wrote:
> > I don't think you want to do this at index time, but rather search time.
> > Quoting from Hoss (?)...
> >
> > Index time field boosts are a way to express things like "this documents
> > title is worth twice as much as the title of most documents". Query time
> > boosts are a way to express "I care about matches on this clause of my
> > query
> > twice as much as I do about matches to other clauses of my query".
> >
> > From your example, it looks like you want query time boosts rather than
> > index time boosts....
> >
> > Erick
> >
> > On 12/20/06, Eun Yong Kang <ekang@cs.utah.edu> wrote:
> >>
> >> Hi,
> >>
> >> I am trying to figure out how to give different weights to different
> >> terms in a same document.
> >> Anybody knows how to do this?
> >>
> >> For example,
> >>
> >> doc A   contains  field1 : term1  (weight C)   field1 : term2 (weight
> F)
> >>
> >> If I use setBoost(float)  function in the Field Object, I cannot give
> >> different weight to
> >> term1 and term2.
> >>
> >> Thanks,
> >>
> >> Eun
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 19:39:04 2006
Return-Path: <java-user-return-25120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27437 invoked from network); 20 Dec 2006 19:39:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 19:39:03 -0000
Received: (qmail 8067 invoked by uid 500); 20 Dec 2006 19:39:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8040 invoked by uid 500); 20 Dec 2006 19:39:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8029 invoked by uid 99); 20 Dec 2006 19:39:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:39:02 -0800
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 11:38:51 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gx7Gp-0000rZ-0G
	for java-user@lucene.apache.org; Wed, 20 Dec 2006 11:38:31 -0800
Message-ID: <7996431.post@talk.nabble.com>
Date: Wed, 20 Dec 2006 11:38:30 -0800 (PST)
From: JT Kimbell <jtkimbell@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Help with jump from 1.4.3 to 2.0.0
In-Reply-To: <7991979.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jtkimbell@yahoo.com
References: <7949145.post@talk.nabble.com> <733777220612200539l5bf69df9udbd503d899201c0b@mail.gmail.com> <7991979.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I figured it out.  Gopi asked me some questions that got me searching and it
turns out my JVM wasn't 1.5.06, it was 1.4.2.  I grabbed the newest version
and made it the default JVM and now I no longer have the problem.

Thanks a bunch for your help Gopi.

JT



JT Kimbell wrote:
> 
> I've sent the code your way.  I'm downloading eclipse right now so I can
> step through with its debugger once I get it all set up.  
> 
> However, I don't think I am using the same index for each of them, as this
> is all actually on 3 different machines.  Machine A has 1.4.3 and I wrote
> that code on that machine.  Machine B has 2.0.0 and I copied 1.4.3's code
> over and then 'fixed' it.  Machine C has access to the necessary text
> files, and I just FTP them to the other machines when necessary, so the
> indexes are completely independent of each other.  I just seem to get a
> null pointer exception when it reaches the August 2005 folder.  I can
> catch the exception and continue on, but then I get none of those files
> indexed, so that's ~20 less that we should have indexed.  I can't send
> anyone the actual files, but I could list the names of the files, perhaps
> that is throwing the indexer off?  Are there any special characters that
> can do that?
> 
> Also, I leave for a week-long vacation tomorrow, so I probably won't be
> able to reply or test things for a few days.
> 
> Thanks so much,
> 
> JT
> 
> 
> 
> Gopikrishnan Subramani wrote:
>> 
>> All I could suspect is perhaps you are trying to add documents to an
>> index
>> that was originally created using Lucene 1.4.3.
>> 
>> If trying to create a fresh index doesn't work, you could send me your
>> indexer code so I can take a look.
>> 
>> -Gopi
>> 
>> 
>> On 12/19/06, JT Kimbell <jtkimbell@yahoo.com> wrote:
>>>
>>>
>>> Hi,
>>>
>>> I'm working on learning Lucene for my job, and the book one of my
>>> professors
>>> purchased for myself and her is Lucene In Action, which is a good book
>>> but
>>> it is based on version 1.4.3 (I believe).  I am beginning to grasp a lot
>>> of
>>> the basic concepts behind Lucene and have a basic searching and indexing
>>> program written on the said professor's server (which is running 1.4.3).
>>> However, on my server for work I am using 2.0.0 and it was agreed that
>>> it
>>> would be best that I use the newer version.  My program ran fine using
>>> 1.4.3, but once I made a few changes to make it compatible with 2.0.0 it
>>> now
>>> returns a Null Pointer Exception about 80% of the way through.
>>>
>>> For some background on the files, they are all .txt files stored in a
>>> directory that has folders representing different years (e.g. 2005),
>>> within
>>> that there are month folders (August 2005) and those folders contain all
>>> the
>>> documents.  When I catch the exception and print while File f my program
>>> is
>>> currently on, it says it is that August 2005 folder.  My program is
>>> exactly
>>> the same except for updating Field to be compatible with 2.0.0 and the
>>> data
>>> is an exact copy of the other data.
>>>
>>> So I suppose I have two questions:
>>>
>>> 1)  The relevant methods from the two programs are below, does anyone
>>> have
>>> any ideas why this isn't working, am I doing something wrong or assuming
>>> something I shouldn't?  (If you need to see the full code with all
>>> comments
>>> for either program, let me know).
>>>
>>> 2)  Is there a good tutorial or something online for version 2.0.0 just
>>> to
>>> help me understand it better?  Do you have any tips?
>>>
>>> Version 1.4.3 Code
>>>        //This method recursively calls itself when it finds a directory
>>>        public void indexDirectory(IndexWriter writer, File dir) throws
>>> IOException{
>>>                File[] files = dir.listFiles();
>>>
>>>                for(int i = 0; i < files.length; i++){
>>>                        File f = files[i];
>>>                        if (f.isDirectory()){
>>>                                indexDirectory(writer, f);
>>>                        }else if (f.getName().endsWith(".txt")){
>>>                                indexFile(writer, f);
>>> }
>>>                }
>>>        }
>>>
>>>        //This method indexes each individual file
>>>        public void indexFile(IndexWriter writer, File f) throws
>>> IOException{
>>>
>>>                if(f.isHidden() || !f.exists() || !f.canRead()){
>>>                        return;
>>>                }
>>>
>>>                Document doc = new Document();
>>>                doc.add(Field.Text("contents", new FileReader(f)));
>>>                doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>>>                writer.addDocument(doc);
>>>        }
>>>
>>> Version 2.0.0 Code
>>>        //This method recursively calls itself when it finds a directory
>>>        public void indexDirectory(IndexWriter writer, File dir) throws
>>> IOException{
>>>                File[] files = dir.listFiles();
>>>
>>>                for(int i = 0; i < files.length; i++){
>>>                        File f = files[i];
>>>                        try{
>>>                             if (f.isDirectory()){
>>>                                   indexDirectory(writer, f);
>>>                       }else if (f.getName().endsWith(".txt")){  //Seems
>>> this is where it is first thrown...
>>>                                   indexFile(writer, f);
>>>                                   System.out.println(f);
>>>                             }
>>>                        }catch(NullPointerException npe){
>>>                                npe.printStackTrace(System.out);
>>>                                System.out.println("File is: " + f);
>>>                        }
>>>                }
>>>        }
>>>
>>>        //This method indexes each individual file
>>>        public void indexFile(IndexWriter writer, File f) throws
>>> IOException{
>>>
>>>                if(f.isHidden() || !f.exists() || !f.canRead()){
>>>                        return;
>>>                }
>>>
>>>                Document doc = new Document();
>>>                doc.add(new Field("contents", new FileReader(f)));
>>>                doc.add(new Field("filename", f.getCanonicalPath(),
>>> Field.Store.YES, Field.Index.UN_TOKENIZED));
>>>                writer.addDocument(doc);
>>>        }
>>>
>>> Thanks so much for any help you can give me.  It seems strange to me
>>> that
>>> when I print File f, it prints out a directory name (August 2005), but
>>> got
>>> past the isDirectory statement and is now checking to see if it has a
>>> .txt
>>> extension.
>>>
>>> Thanks,
>>>
>>> JT
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Help-with-jump-from-1.4.3-to-2.0.0-tf2846591.html#a7949145
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Help-with-jump-from-1.4.3-to-2.0.0-tf2846591.html#a7996431
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 20:59:55 2006
Return-Path: <java-user-return-25121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56107 invoked from network); 20 Dec 2006 20:59:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 20:59:54 -0000
Received: (qmail 30210 invoked by uid 500); 20 Dec 2006 20:59:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30060 invoked by uid 500); 20 Dec 2006 20:59:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30049 invoked by uid 99); 20 Dec 2006 20:59:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 12:59:53 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.82.244.131] (HELO mail97.messagelabs.com) (216.82.244.131)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Dec 2006 12:59:42 -0800
X-VirusChecked: Checked
X-Env-Sender: BDotzour@widen.com
X-Msg-Ref: server-11.tower-97.messagelabs.com!1166648359!53570760!1
X-StarScan-Version: 5.5.10.7; banners=-,-,-
X-Originating-IP: [69.8.156.123]
Received: (qmail 15768 invoked from network); 20 Dec 2006 20:59:19 -0000
Received: from webmail.widen.com (HELO exch2k3.widen.com) (69.8.156.123)
  by server-11.tower-97.messagelabs.com with SMTP; 20 Dec 2006 20:59:19 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C72479.B7F567A2"
Subject: First search is slow after updating index .. subsequent searches very fast
Date: Wed, 20 Dec 2006 14:59:19 -0600
Message-ID: <9BF20741D07E824A9206E073EB6750E9033062A1@exch2k3.widen.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: First search is slow after updating index .. subsequent searches very fast
Thread-Index: AcckebfKqchUzYqFTMixvvUSQgV9GQ==
From: "Bryan Dotzour" <BDotzour@widen.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C72479.B7F567A2
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm investigating some performance issues with the way we're using
Lucene in our web app and am interested if anyone could shed some light
on what might be going on.  Hopefully I can provide enough information,
please let me know if there's more I can give.

=20

We're using Lucene 2.0.0 and I'm currently working with disk-based
indexing (although in production I'll want to be using RAM indexing).
In our environment, we build up our Lucene index at application start up
time and then we optimize the index.  From then on, updates and deletes
to the index occur fairly frequently but we don't optimize until the
middle of the night when the impact would be at its minimum.  After a
while, what I see is that searches will be very fast (~400 ms) until I
make a modification that will require a single document to be
re-indexed.  Immediately after that has occurred, the next search will
take substantially longer (sometimes up to ~25s).  After that search has
run, the next search will be back at the ~400ms time.

=20

Our algorithm for handling the updates is as follows:

1.       open an IndexReader on the directory

2.       delete the document using the reader

3.       close the reader

4.       open an IndexWriter

5.       add the new document using the writer

6.       close the writer

=20

For searches:

1.	We cache off an IndexReader for the index, as well as an
IndexSearcher, which uses that reader
2.	When a search is initiated we check to see if the version of the
index has changed using getCurrentVersion()
3.	If it has changed, we close our IndexSearcher, close the
IndexReader and re-open them both

=20

=20

Anything sound non-standard in that workflow?  Does anyone have an idea
of what might be happening during that slow down?

=20

Thanks for your time,

Bryan

=20

=20

=20

(For a little more info, here is a very common stack trace snippet that
I gather when the "slow search" is running.  It seems much of the time
is spent in MultiReader or MultiTermDocs)

=20
org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(Com
poundFileReader.java:214)
=20
org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.jav
a:64)
=20
org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.j
ava:33)
      org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:56)
      org.apache.lucene.index.TermBuffer.read(TermBuffer.java:62)
=20
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:117)
=20
org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:148)
=20
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:15
7)
=20
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:151)
=20
org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:50)
=20
org.apache.lucene.index.MultiTermDocs.termDocs(MultiReader.java:392)
      org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:348)
      org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
      org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
      org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
=20
org.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImpl.java:171)
=20
org.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImpl.java:153)
=20
org.apache.lucene.search.FieldCacheImpl.getAuto(FieldCacheImpl.java:349)
=20
org.apache.lucene.search.FieldSortedHitQueue.comparatorAuto(FieldSortedH
itQueue.java:346)
=20
org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSo
rtedHitQueue.java:189)
=20
org.apache.lucene.search.FieldSortedHitQueue.(FieldSortedHitQueue.java:5
8)
=20
org.apache.lucene.search.TopFieldDocCollector.(TopFieldDocCollector.java
:40)
=20
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:108)
      org.apache.lucene.search.Hits.getMoreDocs(Hits.java:65)
      org.apache.lucene.search.Hits.(Hits.java:52)
      org.apache.lucene.search.Searcher.search(Searcher.java:53)

=20


------_=_NextPart_001_01C72479.B7F567A2--

From java-user-return-25122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 21:03:33 2006
Return-Path: <java-user-return-25122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57044 invoked from network); 20 Dec 2006 21:03:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 21:03:32 -0000
Received: (qmail 35966 invoked by uid 500); 20 Dec 2006 21:03:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35928 invoked by uid 500); 20 Dec 2006 21:03:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35908 invoked by uid 99); 20 Dec 2006 21:03:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 13:03:21 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 13:03:11 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2200293nfc
        for <java-user@lucene.apache.org>; Wed, 20 Dec 2006 13:02:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=idcx8SnFN8YY9RTimSfQPil8fQw/xlEpl6Pj0jwtQVoNo8IoXKt0evBWX1bIobZJqcplSONiFZhcJJrzxTwLHf3W6I5HED/qgFokVcqvLTGuSAq7Ld6W00ePAtcqvu9mUJhS/JVBvpbznqPWxt7RrfnLyQeaY6A5DIGDjuU1Pz4=
Received: by 10.49.107.3 with SMTP id j3mr9884443nfm.1166648569897;
        Wed, 20 Dec 2006 13:02:49 -0800 (PST)
Received: by 10.48.48.20 with HTTP; Wed, 20 Dec 2006 13:02:49 -0800 (PST)
Message-ID: <ab0709bf0612201302i2901b85q968d604598629ce5@mail.gmail.com>
Date: Wed, 20 Dec 2006 16:02:49 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: sorting by per doc hit count
In-Reply-To: <Pine.LNX.4.58.0612200015530.20299@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22944_7221920.1166648569853"
References: <OFC26E4BA2.E2311C7A-ON88257249.005FBD98-88257249.0060AD7B@il.ibm.com>
	 <458853B8.90702@gmail.com>
	 <Pine.LNX.4.58.0612191409090.31361@hal.rescomp.berkeley.edu>
	 <4588B0ED.6060703@gmail.com>
	 <Pine.LNX.4.58.0612200015530.20299@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22944_7221920.1166648569853
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Mr. Hostetter, you are a Godsend. Just wanted to report to anyone following
this thread that Hoss's solution was perfect and I indeed was able to add a
new dynamically changeable Term frequency relevance scoring system. The
value of such a thing may not be high, but man do I love Lucene for making
it all possible.

Thanks Hoss.

- Mark

On 12/20/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> :
> : problem reamins that I would like to be able to switch between the hits
> : per doc Similarity and the default Similarity on  any given search. I
> : was hoping that I could index with DefaultSimilarity and store the norms
> : for normal relevancy searching. Then I would need to ignore or make
> : constant the norms with a custom Similarity for hits per doc searching.
> : It would seem that this is not as easy as I had hoped it might be.
>
> not quite ... but it's not super tough.  if "reader" is what you use to
> construct your IndexSearcher when you wnat norms, something like this
> should work when you don't want lengthNorms...
>
>    IndexReader noNormsReader = new FilteredIndexReader(reader) {
>      byte[] ones = SegmentReader.createFakeNorms(maxDoc());
>      public synchronized byte[] norms(String field) throws IOException {
>        return ones;
>      }
>      public synchronized void norms(String field, byte[] result, int
> offset) {
>        System.arraycopy(ones, 0, result, offset, maxDoc());
>      }
>    }
>
> it would be nice if encodeNorm, decodeNorm, and getNormDecoder weren't
> static, so you could not only use whatever encoding you want at index
> time, but could also ignore it alltogether at search time in the way you
> describe ... but alas, that's just not the way it works -- changing it now
> in a backwards compatible way would be a bit tricky.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_22944_7221920.1166648569853--

From java-user-return-25123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 21:28:20 2006
Return-Path: <java-user-return-25123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63728 invoked from network); 20 Dec 2006 21:28:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 21:28:19 -0000
Received: (qmail 94757 invoked by uid 500); 20 Dec 2006 21:28:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94726 invoked by uid 500); 20 Dec 2006 21:28:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94704 invoked by uid 99); 20 Dec 2006 21:28:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 13:28:09 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Dec 2006 13:27:58 -0800
Received: (qmail 73679 invoked by uid 60001); 20 Dec 2006 21:27:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=aGSD/ZxJo4ZV7xkF6+//vBOFxJdq9BBmWQ+0S5JSxcljq+4HFG2fKTYHQqmKabTVlrP6LOKBCx34PV/PIlmhX1ai4jMk0rYFUfuDdj6FCwvicqzl3Yk76EHOjbQGfnl2Me1Qi0+m31jaYX8kqTkzhRiH0cv1Px4c2HwIyH7H8mk=  ;
Message-ID: <20061220212737.73677.qmail@web50302.mail.yahoo.com>
Received: from [74.65.202.166] by web50302.mail.yahoo.com via HTTP; Wed, 20 Dec 2006 13:27:37 PST
Date: Wed, 20 Dec 2006 13:27:36 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: First search is slow after updating index .. subsequent searches very fast
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

All sounds good.  Opening a new IndexReader can take a bit of time.  If you=
 use sorting of any kind other than default sorting by relevance, this dela=
y on the first search is also probably caused by the lazy FieldCache popula=
tion.  The cure for that is to open a new IndexReader/Searcher before you c=
lose the old one, warm it up with a query + sort, and then switch IndexRead=
er/Searchers, closing the old one.=0A=0AOtis=0A=0A----- Original Message --=
--=0AFrom: Bryan Dotzour <BDotzour@widen.com>=0ATo: java-user@lucene.apache=
.org=0ASent: Wednesday, December 20, 2006 3:59:19 PM=0ASubject: First searc=
h is slow after updating index .. subsequent searches very fast=0A=0AI'm in=
vestigating some performance issues with the way we're using=0ALucene in ou=
r web app and am interested if anyone could shed some light=0Aon what might=
 be going on.  Hopefully I can provide enough information,=0Aplease let me =
know if there's more I can give.=0A=0A =0A=0AWe're using Lucene 2.0.0 and I=
'm currently working with disk-based=0Aindexing (although in production I'l=
l want to be using RAM indexing).=0AIn our environment, we build up our Luc=
ene index at application start up=0Atime and then we optimize the index.  F=
rom then on, updates and deletes=0Ato the index occur fairly frequently but=
 we don't optimize until the=0Amiddle of the night when the impact would be=
 at its minimum.  After a=0Awhile, what I see is that searches will be very=
 fast (~400 ms) until I=0Amake a modification that will require a single do=
cument to be=0Are-indexed.  Immediately after that has occurred, the next s=
earch will=0Atake substantially longer (sometimes up to ~25s).  After that =
search has=0Arun, the next search will be back at the ~400ms time.=0A=0A =
=0A=0AOur algorithm for handling the updates is as follows:=0A=0A1.       o=
pen an IndexReader on the directory=0A=0A2.       delete the document using=
 the reader=0A=0A3.       close the reader=0A=0A4.       open an IndexWrite=
r=0A=0A5.       add the new document using the writer=0A=0A6.       close t=
he writer=0A=0A =0A=0AFor searches:=0A=0A1.    We cache off an IndexReader =
for the index, as well as an=0AIndexSearcher, which uses that reader=0A2.  =
  When a search is initiated we check to see if the version of the=0Aindex =
has changed using getCurrentVersion()=0A3.    If it has changed, we close o=
ur IndexSearcher, close the=0AIndexReader and re-open them both=0A=0A =0A=
=0A =0A=0AAnything sound non-standard in that workflow?  Does anyone have a=
n idea=0Aof what might be happening during that slow down?=0A=0A =0A=0AThan=
ks for your time,=0A=0ABryan=0A=0A =0A=0A =0A=0A =0A=0A(For a little more i=
nfo, here is a very common stack trace snippet that=0AI gather when the "sl=
ow search" is running.  It seems much of the time=0Ais spent in MultiReader=
 or MultiTermDocs)=0A=0A =0Aorg.apache.lucene.index.CompoundFileReader$CSIn=
dexInput.readInternal(Com=0ApoundFileReader.java:214)=0A =0Aorg.apache.luce=
ne.store.BufferedIndexInput.refill(BufferedIndexInput.jav=0Aa:64)=0A =0Aorg=
.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.j=0Aava=
:33)=0A      org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:56=
)=0A      org.apache.lucene.index.TermBuffer.read(TermBuffer.java:62)=0A =
=0Aorg.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:117)=
=0A =0Aorg.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:=
148)=0A =0Aorg.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader=
.java:15=0A7)=0A =0Aorg.apache.lucene.index.TermInfosReader.get(TermInfosRe=
ader.java:151)=0A =0Aorg.apache.lucene.index.SegmentTermDocs.seek(SegmentTe=
rmDocs.java:50)=0A =0Aorg.apache.lucene.index.MultiTermDocs.termDocs(MultiR=
eader.java:392)=0A      org.apache.lucene.index.MultiTermDocs.next(MultiRea=
der.java:348)=0A      org.apache.lucene.index.MultiTermDocs.next(MultiReade=
r.java:349)=0A      org.apache.lucene.index.MultiTermDocs.next(MultiReader.=
java:349)=0A      org.apache.lucene.index.MultiTermDocs.next(MultiReader.ja=
va:349)=0A =0Aorg.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImp=
l.java:171)=0A =0Aorg.apache.lucene.search.FieldCacheImpl.getInts(FieldCach=
eImpl.java:153)=0A =0Aorg.apache.lucene.search.FieldCacheImpl.getAuto(Field=
CacheImpl.java:349)=0A =0Aorg.apache.lucene.search.FieldSortedHitQueue.comp=
aratorAuto(FieldSortedH=0AitQueue.java:346)=0A =0Aorg.apache.lucene.search.=
FieldSortedHitQueue.getCachedComparator(FieldSo=0ArtedHitQueue.java:189)=0A=
 =0Aorg.apache.lucene.search.FieldSortedHitQueue.(FieldSortedHitQueue.java:=
5=0A8)=0A =0Aorg.apache.lucene.search.TopFieldDocCollector.(TopFieldDocColl=
ector.java=0A:40)=0A =0Aorg.apache.lucene.search.IndexSearcher.search(Index=
Searcher.java:108)=0A      org.apache.lucene.search.Hits.getMoreDocs(Hits.j=
ava:65)=0A      org.apache.lucene.search.Hits.(Hits.java:52)=0A      org.ap=
ache.lucene.search.Searcher.search(Searcher.java:53)=0A=0A =0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 21:32:37 2006
Return-Path: <java-user-return-25124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64582 invoked from network); 20 Dec 2006 21:32:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 21:32:36 -0000
Received: (qmail 3914 invoked by uid 500); 20 Dec 2006 21:32:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3877 invoked by uid 500); 20 Dec 2006 21:32:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3866 invoked by uid 99); 20 Dec 2006 21:32:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 13:32:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.82.250.3] (HELO mail75.messagelabs.com) (216.82.250.3)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Dec 2006 13:32:19 -0800
X-VirusChecked: Checked
X-Env-Sender: BDotzour@widen.com
X-Msg-Ref: server-10.tower-75.messagelabs.com!1166650316!75321890!1
X-StarScan-Version: 5.5.10.7; banners=-,-,-
X-Originating-IP: [69.8.156.123]
Received: (qmail 31586 invoked from network); 20 Dec 2006 21:31:56 -0000
Received: from webmail.widen.com (HELO exch2k3.widen.com) (69.8.156.123)
  by server-10.tower-75.messagelabs.com with SMTP; 20 Dec 2006 21:31:56 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: First search is slow after updating index .. subsequent searches very fast
Date: Wed, 20 Dec 2006 15:31:56 -0600
Message-ID: <9BF20741D07E824A9206E073EB6750E9033062B0@exch2k3.widen.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: First search is slow after updating index .. subsequent searches very fast
Thread-Index: AcckfcKZMlyPK+IuRVqbeT3Mp2jtPgAAFScQ
From: "Bryan Dotzour" <BDotzour@widen.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Sounds like a possibility Otis, I know we are indeed using sort other
than the default.  I'll try out your suggestion.  Thanks!

Bryan

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Wednesday, December 20, 2006 3:28 PM
To: java-user@lucene.apache.org
Subject: Re: First search is slow after updating index .. subsequent
searches very fast

All sounds good.  Opening a new IndexReader can take a bit of time.  If
you use sorting of any kind other than default sorting by relevance,
this delay on the first search is also probably caused by the lazy
FieldCache population.  The cure for that is to open a new
IndexReader/Searcher before you close the old one, warm it up with a
query + sort, and then switch IndexReader/Searchers, closing the old
one.

Otis

----- Original Message ----
From: Bryan Dotzour <BDotzour@widen.com>
To: java-user@lucene.apache.org
Sent: Wednesday, December 20, 2006 3:59:19 PM
Subject: First search is slow after updating index .. subsequent
searches very fast

I'm investigating some performance issues with the way we're using
Lucene in our web app and am interested if anyone could shed some light
on what might be going on.  Hopefully I can provide enough information,
please let me know if there's more I can give.

=20

We're using Lucene 2.0.0 and I'm currently working with disk-based
indexing (although in production I'll want to be using RAM indexing).
In our environment, we build up our Lucene index at application start up
time and then we optimize the index.  From then on, updates and deletes
to the index occur fairly frequently but we don't optimize until the
middle of the night when the impact would be at its minimum.  After a
while, what I see is that searches will be very fast (~400 ms) until I
make a modification that will require a single document to be
re-indexed.  Immediately after that has occurred, the next search will
take substantially longer (sometimes up to ~25s).  After that search has
run, the next search will be back at the ~400ms time.

=20

Our algorithm for handling the updates is as follows:

1.       open an IndexReader on the directory

2.       delete the document using the reader

3.       close the reader

4.       open an IndexWriter

5.       add the new document using the writer

6.       close the writer

=20

For searches:

1.    We cache off an IndexReader for the index, as well as an
IndexSearcher, which uses that reader
2.    When a search is initiated we check to see if the version of the
index has changed using getCurrentVersion()
3.    If it has changed, we close our IndexSearcher, close the
IndexReader and re-open them both

=20

=20

Anything sound non-standard in that workflow?  Does anyone have an idea
of what might be happening during that slow down?

=20

Thanks for your time,

Bryan

=20

=20

=20

(For a little more info, here is a very common stack trace snippet that
I gather when the "slow search" is running.  It seems much of the time
is spent in MultiReader or MultiTermDocs)

=20
org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(Com
poundFileReader.java:214)
=20
org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.jav
a:64)
=20
org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.j
ava:33)
      org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:56)
      org.apache.lucene.index.TermBuffer.read(TermBuffer.java:62)
=20
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:117)
=20
org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:148)
=20
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:15
7)
=20
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:151)
=20
org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:50)
=20
org.apache.lucene.index.MultiTermDocs.termDocs(MultiReader.java:392)
      org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:348)
      org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
      org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
      org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
=20
org.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImpl.java:171)
=20
org.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImpl.java:153)
=20
org.apache.lucene.search.FieldCacheImpl.getAuto(FieldCacheImpl.java:349)
=20
org.apache.lucene.search.FieldSortedHitQueue.comparatorAuto(FieldSortedH
itQueue.java:346)
=20
org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSo
rtedHitQueue.java:189)
=20
org.apache.lucene.search.FieldSortedHitQueue.(FieldSortedHitQueue.java:5
8)
=20
org.apache.lucene.search.TopFieldDocCollector.(TopFieldDocCollector.java
:40)
=20
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:108)
      org.apache.lucene.search.Hits.getMoreDocs(Hits.java:65)
      org.apache.lucene.search.Hits.(Hits.java:52)
      org.apache.lucene.search.Searcher.search(Searcher.java:53)

=20





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 22:24:16 2006
Return-Path: <java-user-return-25125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78225 invoked from network); 20 Dec 2006 22:24:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 22:24:15 -0000
Received: (qmail 77790 invoked by uid 500); 20 Dec 2006 22:24:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77765 invoked by uid 500); 20 Dec 2006 22:24:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77749 invoked by uid 99); 20 Dec 2006 22:24:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 14:24:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.82.240.115] (HELO mail94.messagelabs.com) (216.82.240.115)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Dec 2006 14:24:04 -0800
X-VirusChecked: Checked
X-Env-Sender: BDotzour@widen.com
X-Msg-Ref: server-8.tower-94.messagelabs.com!1166653422!48714689!1
X-StarScan-Version: 5.5.10.7; banners=-,-,-
X-Originating-IP: [69.8.156.123]
Received: (qmail 32762 invoked from network); 20 Dec 2006 22:23:42 -0000
Received: from webmail.widen.com (HELO exch2k3.widen.com) (69.8.156.123)
  by server-8.tower-94.messagelabs.com with SMTP; 20 Dec 2006 22:23:42 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: First search is slow after updating index .. subsequent searches very fast
Date: Wed, 20 Dec 2006 16:23:40 -0600
Message-ID: <9BF20741D07E824A9206E073EB6750E9033062B5@exch2k3.widen.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: First search is slow after updating index .. subsequent searches very fast
Thread-Index: AcckfcKZMlyPK+IuRVqbeT3Mp2jtPgAB5RHQ
From: "Bryan Dotzour" <BDotzour@widen.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

One question about this, Otis... When "warming up" the new searcher,
should the query return a lot of results, or does it matter?  Can I just
do like an ID =3D X query and get one document back?  Is that sufficient
or is it better to run a query that will get lots of hits?

Thanks again,
Bryan

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Wednesday, December 20, 2006 3:28 PM
To: java-user@lucene.apache.org
Subject: Re: First search is slow after updating index .. subsequent
searches very fast

All sounds good.  Opening a new IndexReader can take a bit of time.  If
you use sorting of any kind other than default sorting by relevance,
this delay on the first search is also probably caused by the lazy
FieldCache population.  The cure for that is to open a new
IndexReader/Searcher before you close the old one, warm it up with a
query + sort, and then switch IndexReader/Searchers, closing the old
one.

Otis

----- Original Message ----
From: Bryan Dotzour <BDotzour@widen.com>
To: java-user@lucene.apache.org
Sent: Wednesday, December 20, 2006 3:59:19 PM
Subject: First search is slow after updating index .. subsequent
searches very fast

I'm investigating some performance issues with the way we're using
Lucene in our web app and am interested if anyone could shed some light
on what might be going on.  Hopefully I can provide enough information,
please let me know if there's more I can give.

=20

We're using Lucene 2.0.0 and I'm currently working with disk-based
indexing (although in production I'll want to be using RAM indexing).
In our environment, we build up our Lucene index at application start up
time and then we optimize the index.  From then on, updates and deletes
to the index occur fairly frequently but we don't optimize until the
middle of the night when the impact would be at its minimum.  After a
while, what I see is that searches will be very fast (~400 ms) until I
make a modification that will require a single document to be
re-indexed.  Immediately after that has occurred, the next search will
take substantially longer (sometimes up to ~25s).  After that search has
run, the next search will be back at the ~400ms time.

=20

Our algorithm for handling the updates is as follows:

1.       open an IndexReader on the directory

2.       delete the document using the reader

3.       close the reader

4.       open an IndexWriter

5.       add the new document using the writer

6.       close the writer

=20

For searches:

1.    We cache off an IndexReader for the index, as well as an
IndexSearcher, which uses that reader
2.    When a search is initiated we check to see if the version of the
index has changed using getCurrentVersion()
3.    If it has changed, we close our IndexSearcher, close the
IndexReader and re-open them both

=20

=20

Anything sound non-standard in that workflow?  Does anyone have an idea
of what might be happening during that slow down?

=20

Thanks for your time,

Bryan

=20

=20

=20

(For a little more info, here is a very common stack trace snippet that
I gather when the "slow search" is running.  It seems much of the time
is spent in MultiReader or MultiTermDocs)

=20
org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(Com
poundFileReader.java:214)
=20
org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.jav
a:64)
=20
org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.j
ava:33)
      org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:56)
      org.apache.lucene.index.TermBuffer.read(TermBuffer.java:62)
=20
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:117)
=20
org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:148)
=20
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:15
7)
=20
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:151)
=20
org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:50)
=20
org.apache.lucene.index.MultiTermDocs.termDocs(MultiReader.java:392)
      org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:348)
      org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
      org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
      org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
=20
org.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImpl.java:171)
=20
org.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImpl.java:153)
=20
org.apache.lucene.search.FieldCacheImpl.getAuto(FieldCacheImpl.java:349)
=20
org.apache.lucene.search.FieldSortedHitQueue.comparatorAuto(FieldSortedH
itQueue.java:346)
=20
org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSo
rtedHitQueue.java:189)
=20
org.apache.lucene.search.FieldSortedHitQueue.(FieldSortedHitQueue.java:5
8)
=20
org.apache.lucene.search.TopFieldDocCollector.(TopFieldDocCollector.java
:40)
=20
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:108)
      org.apache.lucene.search.Hits.getMoreDocs(Hits.java:65)
      org.apache.lucene.search.Hits.(Hits.java:52)
      org.apache.lucene.search.Searcher.search(Searcher.java:53)

=20





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 22:28:43 2006
Return-Path: <java-user-return-25126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78697 invoked from network); 20 Dec 2006 22:28:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 22:28:43 -0000
Received: (qmail 80703 invoked by uid 500); 20 Dec 2006 22:28:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80663 invoked by uid 500); 20 Dec 2006 22:28:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80651 invoked by uid 99); 20 Dec 2006 22:28:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 14:28:43 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.215] (HELO web50313.mail.yahoo.com) (206.190.39.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Dec 2006 14:28:32 -0800
Received: (qmail 2945 invoked by uid 60001); 20 Dec 2006 22:28:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=a6HoYeM2Kpgz9jfamLo38+ctiRKQQuCQgaweyaIS6rxTKU3DZ6hJ3nEfUlNFzROvCgxAQZIisBVlyd/7QNLkMc4khL4sM/+aoxtU01L4SuA+mXnVSUMMSXK4uroIiezYbAFI35GLReWtYqExvYw0keho5pPEgRiln6uhsjWJz3c=  ;
Message-ID: <20061220222811.2943.qmail@web50313.mail.yahoo.com>
Received: from [74.65.202.166] by web50313.mail.yahoo.com via HTTP; Wed, 20 Dec 2006 14:28:11 PST
Date: Wed, 20 Dec 2006 14:28:11 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: First search is slow after updating index .. subsequent searches very fast
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

To populate FieldCache, the number of matches doesn't matter.  There is no =
need to be scrimy there - you don't really save anything by running a query=
 that matches only a few docs.  Just run something that looks like a common=
 query.=0A=0AFor warming up new indices, one can also use the `dd' trick un=
der UNIX.=0A=0AOtis=0A=0A----- Original Message ----=0AFrom: Bryan Dotzour =
<BDotzour@widen.com>=0ATo: java-user@lucene.apache.org=0ASent: Wednesday, D=
ecember 20, 2006 5:23:40 PM=0ASubject: RE: First search is slow after updat=
ing index .. subsequent searches very fast=0A=0AOne question about this, Ot=
is... When "warming up" the new searcher,=0Ashould the query return a lot o=
f results, or does it matter?  Can I just=0Ado like an ID =3D X query and g=
et one document back?  Is that sufficient=0Aor is it better to run a query =
that will get lots of hits?=0A=0AThanks again,=0ABryan=0A=0A-----Original M=
essage-----=0AFrom: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] =
=0ASent: Wednesday, December 20, 2006 3:28 PM=0ATo: java-user@lucene.apache=
.org=0ASubject: Re: First search is slow after updating index .. subsequent=
=0Asearches very fast=0A=0AAll sounds good.  Opening a new IndexReader can =
take a bit of time.  If=0Ayou use sorting of any kind other than default so=
rting by relevance,=0Athis delay on the first search is also probably cause=
d by the lazy=0AFieldCache population.  The cure for that is to open a new=
=0AIndexReader/Searcher before you close the old one, warm it up with a=0Aq=
uery + sort, and then switch IndexReader/Searchers, closing the old=0Aone.=
=0A=0AOtis=0A=0A----- Original Message ----=0AFrom: Bryan Dotzour <BDotzour=
@widen.com>=0ATo: java-user@lucene.apache.org=0ASent: Wednesday, December 2=
0, 2006 3:59:19 PM=0ASubject: First search is slow after updating index .. =
subsequent=0Asearches very fast=0A=0AI'm investigating some performance iss=
ues with the way we're using=0ALucene in our web app and am interested if a=
nyone could shed some light=0Aon what might be going on.  Hopefully I can p=
rovide enough information,=0Aplease let me know if there's more I can give.=
=0A=0A =0A=0AWe're using Lucene 2.0.0 and I'm currently working with disk-b=
ased=0Aindexing (although in production I'll want to be using RAM indexing)=
.=0AIn our environment, we build up our Lucene index at application start u=
p=0Atime and then we optimize the index.  From then on, updates and deletes=
=0Ato the index occur fairly frequently but we don't optimize until the=0Am=
iddle of the night when the impact would be at its minimum.  After a=0Awhil=
e, what I see is that searches will be very fast (~400 ms) until I=0Amake a=
 modification that will require a single document to be=0Are-indexed.  Imme=
diately after that has occurred, the next search will=0Atake substantially =
longer (sometimes up to ~25s).  After that search has=0Arun, the next searc=
h will be back at the ~400ms time.=0A=0A =0A=0AOur algorithm for handling t=
he updates is as follows:=0A=0A1.       open an IndexReader on the director=
y=0A=0A2.       delete the document using the reader=0A=0A3.       close th=
e reader=0A=0A4.       open an IndexWriter=0A=0A5.       add the new docume=
nt using the writer=0A=0A6.       close the writer=0A=0A =0A=0AFor searches=
:=0A=0A1.    We cache off an IndexReader for the index, as well as an=0AInd=
exSearcher, which uses that reader=0A2.    When a search is initiated we ch=
eck to see if the version of the=0Aindex has changed using getCurrentVersio=
n()=0A3.    If it has changed, we close our IndexSearcher, close the=0AInde=
xReader and re-open them both=0A=0A =0A=0A =0A=0AAnything sound non-standar=
d in that workflow?  Does anyone have an idea=0Aof what might be happening =
during that slow down?=0A=0A =0A=0AThanks for your time,=0A=0ABryan=0A=0A =
=0A=0A =0A=0A =0A=0A(For a little more info, here is a very common stack tr=
ace snippet that=0AI gather when the "slow search" is running.  It seems mu=
ch of the time=0Ais spent in MultiReader or MultiTermDocs)=0A=0A =0Aorg.apa=
che.lucene.index.CompoundFileReader$CSIndexInput.readInternal(Com=0ApoundFi=
leReader.java:214)=0A =0Aorg.apache.lucene.store.BufferedIndexInput.refill(=
BufferedIndexInput.jav=0Aa:64)=0A =0Aorg.apache.lucene.store.BufferedIndexI=
nput.readByte(BufferedIndexInput.j=0Aava:33)=0A      org.apache.lucene.stor=
e.IndexInput.readVInt(IndexInput.java:56)=0A      org.apache.lucene.index.T=
ermBuffer.read(TermBuffer.java:62)=0A =0Aorg.apache.lucene.index.SegmentTer=
mEnum.next(SegmentTermEnum.java:117)=0A =0Aorg.apache.lucene.index.SegmentT=
ermEnum.scanTo(SegmentTermEnum.java:148)=0A =0Aorg.apache.lucene.index.Term=
InfosReader.scanEnum(TermInfosReader.java:15=0A7)=0A =0Aorg.apache.lucene.i=
ndex.TermInfosReader.get(TermInfosReader.java:151)=0A =0Aorg.apache.lucene.=
index.SegmentTermDocs.seek(SegmentTermDocs.java:50)=0A =0Aorg.apache.lucene=
.index.MultiTermDocs.termDocs(MultiReader.java:392)=0A      org.apache.luce=
ne.index.MultiTermDocs.next(MultiReader.java:348)=0A      org.apache.lucene=
.index.MultiTermDocs.next(MultiReader.java:349)=0A      org.apache.lucene.i=
ndex.MultiTermDocs.next(MultiReader.java:349)=0A      org.apache.lucene.ind=
ex.MultiTermDocs.next(MultiReader.java:349)=0A =0Aorg.apache.lucene.search.=
FieldCacheImpl.getInts(FieldCacheImpl.java:171)=0A =0Aorg.apache.lucene.sea=
rch.FieldCacheImpl.getInts(FieldCacheImpl.java:153)=0A =0Aorg.apache.lucene=
.search.FieldCacheImpl.getAuto(FieldCacheImpl.java:349)=0A =0Aorg.apache.lu=
cene.search.FieldSortedHitQueue.comparatorAuto(FieldSortedH=0AitQueue.java:=
346)=0A =0Aorg.apache.lucene.search.FieldSortedHitQueue.getCachedComparator=
(FieldSo=0ArtedHitQueue.java:189)=0A =0Aorg.apache.lucene.search.FieldSorte=
dHitQueue.(FieldSortedHitQueue.java:5=0A8)=0A =0Aorg.apache.lucene.search.T=
opFieldDocCollector.(TopFieldDocCollector.java=0A:40)=0A =0Aorg.apache.luce=
ne.search.IndexSearcher.search(IndexSearcher.java:108)=0A      org.apache.l=
ucene.search.Hits.getMoreDocs(Hits.java:65)=0A      org.apache.lucene.searc=
h.Hits.(Hits.java:52)=0A      org.apache.lucene.search.Searcher.search(Sear=
cher.java:53)=0A=0A =0A=0A=0A=0A=0A=0A-------------------------------------=
--------------------------------=0ATo unsubscribe, e-mail: java-user-unsubs=
cribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-help@l=
ucene.apache.org=0A=0A=0A--------------------------------------------------=
-------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.=
apache.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.=
org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 23:40:30 2006
Return-Path: <java-user-return-25127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93268 invoked from network); 20 Dec 2006 23:40:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 23:40:30 -0000
Received: (qmail 61687 invoked by uid 500); 20 Dec 2006 23:40:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61656 invoked by uid 500); 20 Dec 2006 23:40:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61645 invoked by uid 99); 20 Dec 2006 23:40:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 15:40:30 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of vnguyen@ur.com designates 63.241.148.49 as permitted sender)
Received: from [63.241.148.49] (HELO iris.ur.com) (63.241.148.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 15:40:20 -0800
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by iris.ur.com with ESMTP; 20 Dec 2006 23:40:51 +0000
X-OriginatingIP: 10.6.134.35
X-InternalServer: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 20 Dec 2006 18:38:16 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C72490.297DD656"
Subject: JAVA JVM Question
Date: Wed, 20 Dec 2006 18:39:58 -0500
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E8117C7A28D@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: JAVA JVM Question
thread-index: AcckkCkLwVkGFLEER0CMnxl1YhsZSw==
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Dec 2006 23:38:16.0316 (UTC) FILETIME=[EC165BC0:01C7248F]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C72490.297DD656
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

I have an index that's approximately 875MB.  I'm using JBoss Application
Server 4.04 w/ Apache HTTP Server 2.2.  My min/max JVM size is:
128MB/512MB.  On initial startup, everything works fine.  I'm able to
search (although it takes a while doing the first search because it's
loading the index into memory - because I'm sorting on a field)...
everything's fine and dandy.  But if I stop the application and
redeploy, I get an OutOfMemoryError when I search (when the index gets
loaded into memory again).  I've tried this on both Java 5 and Java 6.

=20

When I stop the application, I made sure (or at least to the best of my
knowledge) that I close all searcher/reader/writer.  I'm pretty sure
that there are no locks on the index.  I've tried increasing the maximum
JVM size to 1GB.  Now I can redeploy the application twice before it
gives me the OutOfMemoryError.  It seems like the JVM isn't garbage
collecting the index.

=20

So is this a JVM issue where the index is still in memory and it isn't
being garbage collected?  Or am I not closing my searcher/reader/writer
correctly?  Has anyone else experienced this?

=20

Thanks,

=20

Van


------_=_NextPart_001_01C72490.297DD656--

From java-user-return-25128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 20 23:45:24 2006
Return-Path: <java-user-return-25128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93687 invoked from network); 20 Dec 2006 23:45:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2006 23:45:23 -0000
Received: (qmail 65961 invoked by uid 500); 20 Dec 2006 23:45:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65930 invoked by uid 500); 20 Dec 2006 23:45:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65918 invoked by uid 99); 20 Dec 2006 23:45:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 15:45:22 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Dec 2006 15:45:11 -0800
Received: (qmail 9113 invoked by uid 60001); 20 Dec 2006 23:44:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=pIXLQwoOPqoeF2NApSlFEbYxkAFEB/zXASpqtHaByEQUVQmquhQqQdZFbWr1zCLnDZ8DSFVMem6PkaYu0NEki7EucDYw3XzbjDRoLLo6szepespiapBfnyPL4ppa7WSBXbcn9WXVhJQFqAayWSCMCaYR+ZnY3LiFmW6vskGchNU=  ;
Message-ID: <20061220234450.9106.qmail@web50301.mail.yahoo.com>
Received: from [74.65.202.166] by web50301.mail.yahoo.com via HTTP; Wed, 20 Dec 2006 15:44:50 PST
Date: Wed, 20 Dec 2006 15:44:50 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: JAVA JVM Question
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Are you using 2.1-dev version of Lucene? Try the latest nightly build, it a=
s a fix for a certain OOM bug (see LUCENE-754).=0A=0AOtis=0A=0A----- Origin=
al Message ----=0AFrom: Van Nguyen <vnguyen@ur.com>=0ATo: java-user@lucene.=
apache.org=0ASent: Wednesday, December 20, 2006 6:39:58 PM=0ASubject: JAVA =
JVM Question=0A=0AI have an index that's approximately 875MB.  I'm using JB=
oss Application=0AServer 4.04 w/ Apache HTTP Server 2.2.  My min/max JVM si=
ze is:=0A128MB/512MB.  On initial startup, everything works fine.  I'm able=
 to=0Asearch (although it takes a while doing the first search because it's=
=0Aloading the index into memory - because I'm sorting on a field)...=0Aeve=
rything's fine and dandy.  But if I stop the application and=0Aredeploy, I =
get an OutOfMemoryError when I search (when the index gets=0Aloaded into me=
mory again).  I've tried this on both Java 5 and Java 6.=0A=0A =0A=0AWhen I=
 stop the application, I made sure (or at least to the best of my=0Aknowled=
ge) that I close all searcher/reader/writer.  I'm pretty sure=0Athat there =
are no locks on the index.  I've tried increasing the maximum=0AJVM size to=
 1GB.  Now I can redeploy the application twice before it=0Agives me the Ou=
tOfMemoryError.  It seems like the JVM isn't garbage=0Acollecting the index=
.=0A=0A =0A=0ASo is this a JVM issue where the index is still in memory and=
 it isn't=0Abeing garbage collected?  Or am I not closing my searcher/reade=
r/writer=0Acorrectly?  Has anyone else experienced this?=0A=0A =0A=0AThanks=
,=0A=0A =0A=0AVan=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 03:08:34 2006
Return-Path: <java-user-return-25129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42627 invoked from network); 21 Dec 2006 03:08:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 03:08:33 -0000
Received: (qmail 42507 invoked by uid 500); 21 Dec 2006 03:08:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42464 invoked by uid 500); 21 Dec 2006 03:08:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42453 invoked by uid 99); 21 Dec 2006 03:08:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 19:08:33 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of RASPL@de.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 19:08:21 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id kBL38082272240
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 03:08:00 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kBL3800r2863160
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 04:08:00 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kBL37xUt003634
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 04:08:00 +0100
Received: from d12ml067.megacenter.de.ibm.com (d12ml067.megacenter.de.ibm.com [9.149.164.162])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kBL37xFu003631
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 04:07:59 +0100
Subject: Stefan Raspl/Germany/IBM is out of the office.
From: Stefan Raspl <RASPL@de.ibm.com>
To: java-user@lucene.apache.org
Message-ID: <OF84933270.E7DC0B81-ONC125724B.001135C6-C125724B.001135C6@de.ibm.com>
Date: Thu, 21 Dec 2006 04:07:58 +0100
X-MIMETrack: Serialize by Router on D12ML067/12/M/IBM(Release 6.5.5HF882 | September 26, 2006) at
 21/12/2006 04:07:59
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


I will be out of the office starting  12/21/2006 and will not return until
01/02/2007.

I will respond to your message when I return.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 03:11:16 2006
Return-Path: <java-user-return-25130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43006 invoked from network); 21 Dec 2006 03:11:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 03:11:14 -0000
Received: (qmail 45543 invoked by uid 500); 21 Dec 2006 03:11:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45505 invoked by uid 500); 21 Dec 2006 03:11:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45493 invoked by uid 99); 21 Dec 2006 03:11:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 19:11:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of simon.willnauer@googlemail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 19:11:03 -0800
Received: by ug-out-1314.google.com with SMTP id k40so2558598ugc
        for <java-user@lucene.apache.org>; Wed, 20 Dec 2006 19:10:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=lmvMmC2GPyBd24CsJwJTZ9jajc5l1WlrujWmlEXe9UC/UIm2LvYzIXMQKDPr+jGu4yp/Qs5os2Lr/lzQdkjeVKpXLaWY1fHSbca4qnJGsH8+nEorVbRPriOISoKRqNdY7VYGAEbIItx13U+IpDGpdydAWJD2XFlnPhQY8t2lEXs=
Received: by 10.66.255.7 with SMTP id c7mr11477803ugi.1166670642603;
        Wed, 20 Dec 2006 19:10:42 -0800 (PST)
Received: by 10.67.22.3 with HTTP; Wed, 20 Dec 2006 19:10:42 -0800 (PST)
Message-ID: <f18c9dde0612201910k75b5c513rf4feee0f2befff0b@mail.gmail.com>
Date: Wed, 20 Dec 2006 19:10:42 -0800
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: JAVA JVM Question
In-Reply-To: <20061220234450.9106.qmail@web50301.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061220234450.9106.qmail@web50301.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

OOM Errors are not uncommon during redeployment on application server
e.g. servlet container. Redeploy on Tomcat servers very often cause
OOM due to the perm gen space which get not GCed(that should go away
with 5.5). The JBoss can usually deal with these issue but just in
case you could check your PerGenSpace via JMX or some profiler to see
what happens with your loaded classes. If you redeploy in live /
production env. make sure you restart your app. server.
Do you use some common classes which are provided via parent
classloader of your application? This could also cause such problems.
If this is a PermGenSpace problem you might fix it by replacing one of
the components in your software stack. This issues has been widely
discussed and the finger of blame has been pointed to tomcat, cglib or
even your JVM impl.

best regards simon

On 12/20/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Are you using 2.1-dev version of Lucene? Try the latest nightly build, it as a fix for a certain OOM bug (see LUCENE-754).
>
> Otis
>
> ----- Original Message ----
> From: Van Nguyen <vnguyen@ur.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, December 20, 2006 6:39:58 PM
> Subject: JAVA JVM Question
>
> I have an index that's approximately 875MB.  I'm using JBoss Application
> Server 4.04 w/ Apache HTTP Server 2.2.  My min/max JVM size is:
> 128MB/512MB.  On initial startup, everything works fine.  I'm able to
> search (although it takes a while doing the first search because it's
> loading the index into memory - because I'm sorting on a field)...
> everything's fine and dandy.  But if I stop the application and
> redeploy, I get an OutOfMemoryError when I search (when the index gets
> loaded into memory again).  I've tried this on both Java 5 and Java 6.
>
>
>
> When I stop the application, I made sure (or at least to the best of my
> knowledge) that I close all searcher/reader/writer.  I'm pretty sure
> that there are no locks on the index.  I've tried increasing the maximum
> JVM size to 1GB.  Now I can redeploy the application twice before it
> gives me the OutOfMemoryError.  It seems like the JVM isn't garbage
> collecting the index.
>
>
>
> So is this a JVM issue where the index is still in memory and it isn't
> being garbage collected?  Or am I not closing my searcher/reader/writer
> correctly?  Has anyone else experienced this?
>
>
>
> Thanks,
>
>
>
> Van
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 03:12:06 2006
Return-Path: <java-user-return-25131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43134 invoked from network); 21 Dec 2006 03:12:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 03:12:05 -0000
Received: (qmail 47809 invoked by uid 500); 21 Dec 2006 03:12:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47147 invoked by uid 500); 21 Dec 2006 03:12:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47136 invoked by uid 99); 21 Dec 2006 03:12:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 19:12:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of patrek@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 19:11:54 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2283567nfc
        for <java-user@lucene.apache.org>; Wed, 20 Dec 2006 19:11:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FC0k1i7k/q6ETMKuyOHPEEQFlSzlwYkAuCapKIJCozAltz4yQ+QvMLR/ZOv9vcS6n1tZWbwBqjjoxavoOak6Slaze3yG1ZolQYQF3Zq2tl83MhhJZxaT78GKRfMLan6M35Gqy5niLzUy5I1AoVdk8jajKKqBiMsp2dm2UjoU8r0=
Received: by 10.78.201.10 with SMTP id y10mr564856huf.1166670693184;
        Wed, 20 Dec 2006 19:11:33 -0800 (PST)
Received: by 10.78.66.10 with HTTP; Wed, 20 Dec 2006 19:11:33 -0800 (PST)
Message-ID: <48b038c60612201911u34ed83aav23babdddfc8bd30a@mail.gmail.com>
Date: Wed, 20 Dec 2006 22:11:33 -0500
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Rebuilding index on a regular basis
In-Reply-To: <F7CE0FFA3A30084B9AD03275B9F4CFC894BFCC@LA-EXCLUST01.corp.valueclick.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16261_2248605.1166670693010"
References: <359a92830612200758h36982da9u749b03bc370ec759@mail.gmail.com>
	 <F7CE0FFA3A30084B9AD03275B9F4CFC894BFCC@LA-EXCLUST01.corp.valueclick.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16261_2248605.1166670693010
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

How about this:

1) You copy the files that make your index in a new folder
2) You update your index in that new folder (forcing if necessary, old locks
will not be valid)
3) When update is completed, close your readers, and open them on the new
index.
4) Copy the fresh index files to the previous location for next round, where
you won't need the initial copy to a fresh folder.

That way, you won't have to reindex all your documents (assuming only a
small subset needs updating) and will be able to switch to a more up to date
index more easily and often.

Patrick


On 12/20/06, Scott Sellman <ssellman@valueclick.com> wrote:
>
> Note: I have changed the title of this thread to match its content
>
> I am currently facing a similar issue.  I am dealing with a large index
> that is constantly used and needs to be updated on a daily basis.  For
> fear of corruption I would rather rebuild the index each time,
> performing tests against it before using it.  However the problem I am
> having is switching in the old index without causing service
> interruption.  As long as queries are being made against the index I am
> running into locking issues with the index files, preventing me from
> putting the new index in place. Any suggestions?
>
> Thanks,
> Scott
>

------=_Part_16261_2248605.1166670693010--

From java-user-return-25132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 03:27:35 2006
Return-Path: <java-user-return-25132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44918 invoked from network); 21 Dec 2006 03:27:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 03:27:34 -0000
Received: (qmail 63190 invoked by uid 500); 21 Dec 2006 03:27:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63079 invoked by uid 500); 21 Dec 2006 03:27:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63068 invoked by uid 99); 21 Dec 2006 03:27:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 19:27:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 19:27:23 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 271095B763; Wed, 20 Dec 2006 19:27:03 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2316F7F403
	for <java-user@lucene.apache.org>; Wed, 20 Dec 2006 19:27:03 -0800 (PST)
Date: Wed, 20 Dec 2006 19:27:03 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: sorting by per doc hit count
In-Reply-To: <ab0709bf0612201302i2901b85q968d604598629ce5@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0612201924580.12150@hal.rescomp.berkeley.edu>
References: <OFC26E4BA2.E2311C7A-ON88257249.005FBD98-88257249.0060AD7B@il.ibm.com>
  <458853B8.90702@gmail.com>  <Pine.LNX.4.58.0612191409090.31361@hal.rescomp.berkeley.edu>
  <4588B0ED.6060703@gmail.com>  <Pine.LNX.4.58.0612200015530.20299@hal.rescomp.berkeley.edu>
 <ab0709bf0612201302i2901b85q968d604598629ce5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: this thread that Hoss's solution was perfect and I indeed was able to add a
: new dynamically changeable Term frequency relevance scoring system. The

Cool ... "PINE is my IDE."




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 06:27:55 2006
Return-Path: <java-user-return-25133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70778 invoked from network); 21 Dec 2006 06:27:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 06:27:54 -0000
Received: (qmail 86557 invoked by uid 500); 21 Dec 2006 06:27:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86514 invoked by uid 500); 21 Dec 2006 06:27:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86503 invoked by uid 99); 21 Dec 2006 06:27:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 22:27:53 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Dec 2006 22:27:41 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id kBL6RJkt111152
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 06:27:19 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kBL6RJIU3072030
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 07:27:19 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kBL6RJJC029911
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 07:27:19 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kBL6RJ9X029908
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 07:27:19 +0100
In-Reply-To: <7984092.post@talk.nabble.com>
Subject: Re: Extracting data from Lucene index files
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF28B68FF1.56A41F1F-ON8825724B.00227D94-8825724B.00235371@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 20 Dec 2006 22:25:51 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 21/12/2006 08:27:19
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Using term vectors means passing on the terms too many times - i.e
- loop on terms
- - loop on docs of a term
- - - loop on terms of a doc

Would something like this be better:
    do {
      System.out.println(tenum.term()+" appears in "+tenum.docFreq()+"
docs!");
      TermDocs td = reader.termDocs(tenum.term());
      do {
        System.out.println("  In doc id: "+td.doc() + " it appears: " +
td.freq()+ " times");
      } while (td.next());
    } while (tenum.next());


Also, you can skip faster to a certain doc (id) or certain term using the
skipTo() methods.

Doron

Venkateshprasanna <prasannahmv@yahoo.co.in> wrote on 19/12/2006 19:20:52:
>
> > Take a look at TermDocs and TermEnum.
>
> I need to get the frequency of each word in each of the documents I have
> indexed.
>
> This is what I could do with TermEnums and TermDocs. For each Term from
> TermEnum, I have instantiated a TermsDoc and for each doc, I am trying to
> get the frequency of the Term.
>
>     IndexReader ir = IndexReader.open("index file");
>     TermEnum terms = ir.terms();
>     while(terms.next()) {
>         TermDocs docs = ir.termDocs(terms.term());
>
>         while(docs.next()) {
>             TermFreqVector tfv =
ir.getTermFreqVector(docs.doc(),"contents");
>             String indexTerms[] = tfv.getTerms();
>             int indexFreqs[] = tfv.getTermFrequencies();
>
>             for(int i = 0; i<indexTerms.length; i++) {
>                System.out.println(indexTerms[i]+" "+indexFreqs[i]);
>             }
>          }
>      }
>
> But there is no way of getting the frequency of only 'that' term in
'that'
> document. I have to get the entire vector. This puts the loop in
jeopardy.
> How can I overcome this?
>
> --
> View this message in context: http://www.nabble.com/Extracting-data-
> from-Lucene-index-files-tf2813318.html#a7984092
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 08:59:24 2006
Return-Path: <java-user-return-25134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10619 invoked from network); 21 Dec 2006 08:59:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 08:59:24 -0000
Received: (qmail 18085 invoked by uid 500); 21 Dec 2006 08:59:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18060 invoked by uid 500); 21 Dec 2006 08:59:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18049 invoked by uid 99); 21 Dec 2006 08:59:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 00:59:23 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 00:59:13 -0800
Received: by an-out-0708.google.com with SMTP id c3so254142ana
        for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 00:58:52 -0800 (PST)
Received: by 10.100.122.8 with SMTP id u8mr6568689anc.1166691532046;
        Thu, 21 Dec 2006 00:58:52 -0800 (PST)
Received: by 10.100.10.10 with HTTP; Thu, 21 Dec 2006 00:58:52 -0800 (PST)
Message-ID: <962ea6660612210058h7a83f72fi97bc9ba5ec37d295@mail.gmail.com>
Date: Thu, 21 Dec 2006 00:58:52 -0800
From: "Bogdan Ghidireac" <bogdan@ecstend.com>
To: java-user@lucene.apache.org
Subject: Re: First search is slow after updating index .. subsequent searches very fast
In-Reply-To: <20061220222811.2943.qmail@web50313.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2416_11072459.1166691532025"
References: <20061220222811.2943.qmail@web50313.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2416_11072459.1166691532025
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Otis,

I am not familiar with the 'dd trick' to warm up the index. Can you please
explain it ?

Bogdan


On 12/20/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> To populate FieldCache, the number of matches doesn't matter.  There is no
> need to be scrimy there - you don't really save anything by running a query
> that matches only a few docs.  Just run something that looks like a common
> query.
>
> For warming up new indices, one can also use the `dd' trick under UNIX.
>
> Otis
>
>

------=_Part_2416_11072459.1166691532025--

From java-user-return-25135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 09:56:35 2006
Return-Path: <java-user-return-25135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34947 invoked from network); 21 Dec 2006 09:56:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 09:56:34 -0000
Received: (qmail 1077 invoked by uid 500); 21 Dec 2006 09:56:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1051 invoked by uid 500); 21 Dec 2006 09:56:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1040 invoked by uid 99); 21 Dec 2006 09:56:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 01:56:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 01:56:22 -0800
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id kBL9u1YE001637
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 10:56:01 +0100
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 2B4218BE2A
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 10:56:01 +0100 (CET)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 23976-02 for <java-user@lucene.apache.org>;
 Thu, 21 Dec 2006 10:56:00 +0100 (CET)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id E6BF18BE26
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 10:55:59 +0100 (CET)
Message-ID: <458A5A2F.5040207@uni-hd.de>
Date: Thu, 21 Dec 2006 10:55:59 +0100
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.9 (X11/20061206)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: boosting instead of sorting WAS: to boost or not to boost
References: <45896589.5090505@uni-hd.de> <200612201905.14593@danielnaber.de>
In-Reply-To: <200612201905.14593@danielnaber.de>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Daniel,

>> so a doc from 1973 should get a boost of 1.1973 and a doc of 1975 should
>> get a boost of 1.1975 .
> 
> The boost is stored with a limited resolution. Try boosting one doc by 10, 
> the other one by 20 or something like that.

You're right. I thought that with the float values the resolution should
be good enough!
But there is only a difference in the score with a boosting diff of 0.2
(e.g. 1.7 and 1.9).

I know that there were many questions on the list regarding scoring
better new documents.
But I want to avoid any overhead like "FunctionQuery" at query time,
and in my case I have some documents
which have same values in many fields (=>same score) and the only
difference is the year.

However  I don't want to overboost the score so that the scoring for
other criteria is not considered.

Shortly spoken: As a result of a search I have a list of book titles and
I want  a sort by score AND by year of publication.

But for performance reasons I want to avoid this sorting at query-time
by boosting at index time.

Is that possible?

thanks,
Martin






> 



-- 
Universitaetsbibliothek Heidelberg   Tel: +49 6221 54-2580
Ploeck 107-109, D-69117 Heidelberg   Fax: +49 6221 54-2623

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 09:58:28 2006
Return-Path: <java-user-return-25136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35304 invoked from network); 21 Dec 2006 09:58:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 09:58:28 -0000
Received: (qmail 5271 invoked by uid 500); 21 Dec 2006 09:58:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4952 invoked by uid 500); 21 Dec 2006 09:58:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4940 invoked by uid 99); 21 Dec 2006 09:58:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 01:58:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of virtualj@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Dec 2006 01:58:16 -0800
Received: (qmail 20592 invoked by uid 0); 21 Dec 2006 09:57:54 -0000
Received: from 193.175.120.124 by www033.gmx.net with HTTP;
 Thu, 21 Dec 2006 10:57:55 +0100 (CET)
Content-Type: text/plain; charset="iso-8859-1"
Date: Thu, 21 Dec 2006 10:57:55 +0100
From: "Jan Francsi" <virtualj@gmx.de>
Message-ID: <20061221095755.222150@gmx.net>
MIME-Version: 1.0
Subject: How to skip menu structure while parsing HTML sites?
To: java-user@lucene.apache.org
X-Authenticated: #9611916
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

I'm programming a small search engine using apache lucene.
While indexing I've noticed that the menu has to be removed from the
index, because it influences the search result (searching terms that are in the menu gives all pages of the web directory as result).

Now, I wan't to put the menu into some custom tags like <!--beginM-->
... <!--endM-->.
One of Lucenes demos uses a javacc generated parser so extract Text out of HTML.
How can I modify the source of the *.jj file to skip everything between
the too custom tags?
I've tryed

SKIP:
{
        "<!--beginM-->" (~["\n", "\r"])* "<!--endM-->"

}

but it doesn't have any effect.

Here is the source of the *.jj file given by apache and modifyed by me
to process UTF-8:

// HTMLParser.jj

options {
  STATIC = false;
  OPTIMIZE_TOKEN_MANAGER = true;
  //DEBUG_LOOKAHEAD = true;
  //DEBUG_TOKEN_MANAGER = true;
  JAVA_UNICODE_ESCAPE = false;
  UNICODE_INPUT = true;

}

PARSER_BEGIN(HTMLParser)

package org.apache.lucene.demo.html;

import java.io.*;
import java.util.Properties;

public class HTMLParser {
  public static int SUMMARY_LENGTH = 200;

  StringBuffer title = new StringBuffer(SUMMARY_LENGTH);
  StringBuffer summary = new StringBuffer(SUMMARY_LENGTH * 2);
  Properties metaTags=new Properties();
  String currentMetaTag=null;
  String currentMetaContent=null;
  int length = 0;
  boolean titleComplete = false;
  boolean inTitle = false;
  boolean inMetaTag = false;
  boolean inStyle = false;
  boolean afterTag = false;
  boolean afterSpace = false;
  String eol = System.getProperty("line.separator");
  Reader pipeIn = null;
  Writer pipeOut;
  private MyPipedInputStream pipeInStream = null;
  private PipedOutputStream pipeOutStream = null;

  private class MyPipedInputStream extends PipedInputStream{

    public MyPipedInputStream(){
      super();
    }

    public MyPipedInputStream(PipedOutputStream src) throws
IOException{
      super(src);
    }

    public boolean full() throws IOException{
      return this.available() >= PipedInputStream.PIPE_SIZE;
    }
  }

  /**
   * @deprecated Use HTMLParser(FileInputStream) instead
   */
  public HTMLParser(File file) throws FileNotFoundException {
    this(new FileInputStream(file));
  }

  public String getTitle() throws IOException, InterruptedException {
    if (pipeIn == null)
      getReader();                                // spawn parsing thread
    while (true) {
      synchronized(this) {
        if (titleComplete || pipeInStream.full())
          break;
        wait(10);
      }
    }
    return title.toString().trim();
  }

  public Properties getMetaTags() throws IOException,
InterruptedException {
    if (pipeIn == null)
      getReader();                                // spawn parsing thread
    while (true) {
      synchronized(this) {
        if (titleComplete || pipeInStream.full())
          break;
        wait(10);
      }
    }
    return metaTags;
  }

  public String getSummary() throws IOException, InterruptedException {
    if (pipeIn == null)
      getReader();                                // spawn parsing thread
    while (true) {
      synchronized(this) {
        if (summary.length() >= SUMMARY_LENGTH || pipeInStream.full())
          break;
        wait(10);
      }
    }
    if (summary.length() > SUMMARY_LENGTH)
      summary.setLength(SUMMARY_LENGTH);

    String sum = summary.toString().trim();
    String tit = getTitle();
    if (sum.startsWith(tit) || sum.equals(""))
      return tit;
    else
      return sum;
  }

  public Reader getReader() throws IOException {
    if (pipeIn == null) {
      pipeInStream = new MyPipedInputStream();
      pipeOutStream = new PipedOutputStream(pipeInStream);
      pipeIn = new InputStreamReader(pipeInStream, "UTF-8");
      pipeOut = new OutputStreamWriter(pipeOutStream, "UTF-8");

      Thread thread = new ParserThread(this);
      thread.start();                             // start parsing
    }

    return pipeIn;
  }

  void addToSummary(String text) {
    if (summary.length() < SUMMARY_LENGTH) {
      summary.append(text);
      if (summary.length() >= SUMMARY_LENGTH) {
        synchronized(this) {
          notifyAll();
        }
      }
    }
  }

  void addText(String text) throws IOException {
    if (inStyle)
      return;
    if (inTitle)
      title.append(text);
    else {
      addToSummary(text);
      if (!titleComplete && !title.equals("")) {  // finished title
        synchronized(this) {
          titleComplete = true;                   // tell waiting threads
          notifyAll();
        }
      }
    }

    length += text.length();
    pipeOut.write(text);

    afterSpace = false;
  }

  void addMetaTag() {
      metaTags.setProperty(currentMetaTag, currentMetaContent);
      currentMetaTag = null;
      currentMetaContent = null;
      return;
  }

  void addSpace() throws IOException {
    if (!afterSpace) {
      if (inTitle)
        title.append(" ");
      else
        addToSummary(" ");

      String space = afterTag ? eol : " ";
      length += space.length();
      pipeOut.write(space);
      afterSpace = true;
    }
  }

//    void handleException(Exception e) {
//      System.out.println(e.toString());  // print the error message
//      System.out.println("Skipping...");
//      Token t;
//      do {
//        t = getNextToken();
//      } while (t.kind != TagEnd);
//    }

}

PARSER_END(HTMLParser)

void HTMLDocument() throws IOException :
{
  Token t;
}

{
//  try {
    ( Tag()         { afterTag = true; }
    | t=Decl()      { afterTag = true; }
    | CommentTag()  { afterTag = true; }
    | ScriptTag()  { afterTag = true; }
    | t=<Word>      { addText(t.image); afterTag = false; }
    | t=<Entity>    { addText(Entities.decode(t.image)); afterTag =
false; }
    | t=<Punct>     { addText(t.image); afterTag = false; }
    | <Space>       { addSpace(); afterTag = false; }
    )* <EOF>
//  } catch (ParseException e) {
//    handleException(e);
//  }

}

void Tag() throws IOException :
{
  Token t1, t2;
  boolean inImg = false;
}

{
  t1=<TagName> {
   String tagName = t1.image.toLowerCase();
   if(Tags.WS_ELEMS.contains(tagName) ) {
      addSpace();
    }
    inTitle = tagName.equalsIgnoreCase("<title"); // keep track if in
<TITLE>
    inMetaTag = tagName.equalsIgnoreCase("<META"); // keep track if in
<META>
    inStyle = tagName.equalsIgnoreCase("<STYLE"); // keep track if in
<STYLE>
    inImg = tagName.equalsIgnoreCase("<img");        // keep track if in
<IMG>
  }
  (t1=<ArgName>
   (<ArgEquals>
    (t2=ArgValue()                                // save ALT text in IMG tag
     {
       if (inImg && t1.image.equalsIgnoreCase("alt") && t2 != null)
         addText("[" + t2.image + "]");

        if(inMetaTag &&
                        (  t1.image.equalsIgnoreCase("name") ||
                           t1.image.equalsIgnoreCase("HTTP-EQUIV")
                        )
           && t2 != null)
        {
                currentMetaTag=t2.image.toLowerCase();
                if(currentMetaTag != null && currentMetaContent != null) {
                addMetaTag();
                }
        }
        if(inMetaTag && t1.image.equalsIgnoreCase("content") && t2 !=
null)
        {
                currentMetaContent=t2.image.toLowerCase();
                if(currentMetaTag != null && currentMetaContent != null) {
                addMetaTag();
                }
        }
     }
    )?
   )?
  )*
  <TagEnd>

}

Token ArgValue() :
{
  Token t = null;
}

{
  t=<ArgValue>                              { return t; }
| LOOKAHEAD(2)
  <ArgQuote1> <CloseQuote1>                 { return t; }
| <ArgQuote1> t=<Quote1Text> <CloseQuote1>  { return t; }
| LOOKAHEAD(2)
  <ArgQuote2> <CloseQuote2>                 { return t; }
| <ArgQuote2> t=<Quote2Text> <CloseQuote2>  { return t; }

}

Token Decl() :
{
  Token t;
}

{
  t=<DeclName> ( <ArgName> | ArgValue() | <ArgEquals> )* <TagEnd>
  { return t; }

}

void CommentTag() :
{}
{
  (<Comment1> ( <CommentText1> )* <CommentEnd1>)
 |
  (<Comment2> ( <CommentText2> )* <CommentEnd2>)

}

void ScriptTag() :
{}
{
  <ScriptStart> ( <ScriptText> )* <ScriptEnd>

}

TOKEN :
{
  < ScriptStart: "<script" > : WithinScript
| < TagName:  "<" ("/")? ["A"-"Z","a"-"z"] (<ArgName>)? > : WithinTag
| < DeclName: "<"  "!"   ["A"-"Z","a"-"z"] (<ArgName>)? > : WithinTag

| < Comment1:  "<!--" > : WithinComment1
| < Comment2:  "<!" >   : WithinComment2

| < Word:     ( <LET> | <LET> (["+","/"])+ | <NUM> ["\""] |
                <LET> ["-","'"] <LET> | ("$")? <NUM> [",","."] <NUM> )+

| < #LET:     ["A"-"Z","a"-"z","0"-"9"] >
| < #NUM:     ["0"-"9"] >
| < #HEX:     ["0"-"9","A"-"F","a"-"f"] >

| < Entity:   ( "&" (["A"-"Z","a"-"z"])+ (";")? | "&" "#" (<NUM>)+
(";")? | "&" "#" ["X","x"] (<HEX>)+ (";")? ) >

| < Space:    (<SP>)+ >
| < #SP:      [" ","\t","\r","\n"] >

| < Punct:    ~[] > // Keep this last.  It is a catch-all.

}

<WithinScript> TOKEN:
{
  < ScriptText:  (~["<",">"])+ | "<" | ">" >
| < ScriptEnd: "</script" (~["<",">"])* ">" > : DEFAULT

}

<WithinTag> TOKEN:
{
  < ArgName:   (~[" ","\t","\r","\n","=",">","'","\""])
               (~[" ","\t","\r","\n","=",">"])* >
| < ArgEquals: "=" >  : AfterEquals
| < TagEnd:    ">" | "=>" >  : DEFAULT

}

<AfterEquals> TOKEN:
{
  < ArgValue:  (~[" ","\t","\r","\n","=",">","'","\""])
               (~[" ","\t","\r","\n",">"])* > : WithinTag

}

<WithinTag, AfterEquals> TOKEN:
{
  < ArgQuote1: "'"  > : WithinQuote1
| < ArgQuote2: "\"" > : WithinQuote2

}

<WithinTag, AfterEquals> SKIP:
{
  < <Space> >

}

<WithinQuote1> TOKEN:
{
  < Quote1Text:  (~["'"])+ >
| < CloseQuote1: <ArgQuote1> > : WithinTag

}

<WithinQuote2> TOKEN:
{
  < Quote2Text:  (~["\""])+ >
| < CloseQuote2: <ArgQuote2> > : WithinTag

}

<WithinComment1> TOKEN :
{
  < CommentText1:  (~["-"])+ | "-" >
| < CommentEnd1:   "-->" > : DEFAULT

}

<WithinComment2> TOKEN :
{
  < CommentText2:  (~[">"])+ >
| < CommentEnd2:   ">" > : DEFAULT

Please help!
Seasons greetings and happy hollydays,
Jan
-- 
Jan Francsi
virtualj@gmx.de
www.francsi.de


Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 10:00:00 2006
Return-Path: <java-user-return-25137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35633 invoked from network); 21 Dec 2006 09:59:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 09:59:59 -0000
Received: (qmail 8050 invoked by uid 500); 21 Dec 2006 10:00:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7385 invoked by uid 500); 21 Dec 2006 09:59:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7374 invoked by uid 99); 21 Dec 2006 09:59:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 01:59:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of codeshepherd@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 01:59:46 -0800
Received: by py-out-1112.google.com with SMTP id a25so1362448pyi
        for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 01:59:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:subject:from:reply-to:to:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        b=nCJ9ZSLxjyGX/l69dNnoo6P5OQdc/TpGirPOLAl1IgBkwONNnbx8OqJOSmln6Pm8/lIBUBw4+dOw9CJ92snqpeDMspe4dsImmw+keQPeORmT+wyvjYllaOScNAKbiDED+udYV7aBqG5ZKtT7kw5Jwph/b/Agx09US7DoF2xRh2A=
Received: by 10.35.110.13 with SMTP id n13mr14458313pym.1166695165942;
        Thu, 21 Dec 2006 01:59:25 -0800 (PST)
Received: from ?192.168.1.102? ( [203.118.43.186])
        by mx.google.com with ESMTP id 36sm920642nza.2006.12.21.01.59.22;
        Thu, 21 Dec 2006 01:59:25 -0800 (PST)
Subject: lucene injection
From: Deepan <codeshepherd@gmail.com>
Reply-To: codeshepherd@gmail.com
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Thu, 21 Dec 2006 17:56:47 +0800
Message-Id: <1166695007.2737.42.camel@codeworld>
Mime-Version: 1.0
X-Mailer: Evolution 2.8.1.1 (2.8.1.1-3.fc6) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am bothered about security problems with lucene. Is it vulnerable to
any kind of injection like mysql injection? many times the query from
user is passed to lucene for search without validating. 

-- 
-----------------------------------------------
Regards
Deepan Chakravarthy N
http://www.codeshepherd.com/
+65-96770940

Software Engineer,
Nova Global Pte Ltd,  
Technical & Scientific Computing Solutions,
#05-04 Keypoint, 371 Beach Road, Singapore.
web: http://www.novaglobal.com.sg/ 


Have Fun, Play Sudoku :) http://sudoku-solver.net/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 10:06:09 2006
Return-Path: <java-user-return-25138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37088 invoked from network); 21 Dec 2006 10:06:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 10:06:08 -0000
Received: (qmail 18362 invoked by uid 500); 21 Dec 2006 10:06:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18332 invoked by uid 500); 21 Dec 2006 10:06:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18320 invoked by uid 99); 21 Dec 2006 10:06:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 02:06:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 02:05:57 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0C42F30EFC1A; Thu, 21 Dec 2006 05:05:32 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id AE42230EFC17
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 05:04:57 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <1166695007.2737.42.camel@codeworld>
References: <1166695007.2737.42.camel@codeworld>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BD9EA9EB-50E9-4A9B-B480-A66A8D488F1E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: lucene injection
Date: Thu, 21 Dec 2006 05:04:52 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.8 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.1


On Dec 21, 2006, at 4:56 AM, Deepan wrote:
> I am bothered about security problems with lucene. Is it vulnerable to
> any kind of injection like mysql injection? many times the query from
> user is passed to lucene for search without validating.

Rest easy.  There are no known security issues with Lucene, and it  
has even undergone a recent static code analysis by Fortify (see the  
lucene-dev e-mail list archives).  Unlike SQL, there is no  
destructive behavior available through the QueryParser.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 10:10:32 2006
Return-Path: <java-user-return-25139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37964 invoked from network); 21 Dec 2006 10:10:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 10:10:30 -0000
Received: (qmail 26292 invoked by uid 500); 21 Dec 2006 10:10:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26049 invoked by uid 500); 21 Dec 2006 10:10:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26038 invoked by uid 99); 21 Dec 2006 10:10:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 02:10:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of codeshepherd@gmail.com designates 64.233.162.233 as permitted sender)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 02:10:17 -0800
Received: by nz-out-0506.google.com with SMTP id i1so949159nzh
        for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 02:09:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:subject:from:reply-to:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        b=ZDKjLqOoXsMx/1GOIMt2H8k5Pj2wcylANRT2W1SH2RnboYQMaFxpvGF25iRY4RTBFGFVcoSb0axSEl3fyUrXtqRaiJr00A+u0nU8S0XcEyjCs5tQd8J1hbvS+IsdYNBV2+/Frm9UiJdlIwPMrWH0AJLlsqlfBiuRkruWz37M+vk=
Received: by 10.65.219.13 with SMTP id w13mr10764189qbq.1166695796661;
        Thu, 21 Dec 2006 02:09:56 -0800 (PST)
Received: from ?192.168.1.102? ( [203.118.43.186])
        by mx.google.com with ESMTP id 18sm37988654nzo.2006.12.21.02.09.50;
        Thu, 21 Dec 2006 02:09:55 -0800 (PST)
Subject: Re: lucene injection
From: Deepan <codeshepherd@gmail.com>
Reply-To: codeshepherd@gmail.com
To: java-user@lucene.apache.org
In-Reply-To: <BD9EA9EB-50E9-4A9B-B480-A66A8D488F1E@ehatchersolutions.com>
References: <1166695007.2737.42.camel@codeworld>
	 <BD9EA9EB-50E9-4A9B-B480-A66A8D488F1E@ehatchersolutions.com>
Content-Type: text/plain
Date: Thu, 21 Dec 2006 18:07:07 +0800
Message-Id: <1166695627.2737.45.camel@codeworld>
Mime-Version: 1.0
X-Mailer: Evolution 2.8.1.1 (2.8.1.1-3.fc6) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, 2006-12-21 at 05:04 -0500, Erik Hatcher wrote:
> On Dec 21, 2006, at 4:56 AM, Deepan wrote:
> > I am bothered about security problems with lucene. Is it vulnerable to
> > any kind of injection like mysql injection? many times the query from
> > user is passed to lucene for search without validating.
> 
> Rest easy.  There are no known security issues with Lucene, and it  
> has even undergone a recent static code analysis by Fortify (see the  
> lucene-dev e-mail list archives).  Unlike SQL, there is no  
> destructive behavior available through the QueryParser.
thanks Erik,  

> 
> 	Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
-- 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 11:31:54 2006
Return-Path: <java-user-return-25140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65987 invoked from network); 21 Dec 2006 11:31:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 11:31:53 -0000
Received: (qmail 45192 invoked by uid 500); 21 Dec 2006 11:31:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45168 invoked by uid 500); 21 Dec 2006 11:31:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45156 invoked by uid 99); 21 Dec 2006 11:31:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 03:31:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from [80.67.18.15] (HELO smtprelay03.ispgateway.de) (80.67.18.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 03:31:40 -0800
Received: (qmail 13022 invoked from network); 21 Dec 2006 11:31:17 -0000
Received: from unknown (HELO p5496d107.dip.t-dialin.net) ([pbs]695637@[84.150.209.7])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 21 Dec 2006 11:31:17 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: lucene injection
Date: Thu, 21 Dec 2006 12:32:01 +0100
User-Agent: KMail/1.8.2
References: <1166695007.2737.42.camel@codeworld>
In-Reply-To: <1166695007.2737.42.camel@codeworld>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200612211232.02082@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 21 December 2006 10:56, Deepan wrote:

> I am bothered about security problems with lucene. Is it vulnerable to
> any kind of injection like mysql injection? many times the query from
> user is passed to lucene for search without validating.

This is only an issue if your index has permission information and you 
modify the user's query so that only parts of the index are visible to 
him. For example, if you add "+permission:user" to the query the user 
might add something like "OR permission:admin" to get access to more 
documents. This is also why you should add new parts to the query 
programmatically (BooleanQuery) to avoid the use of QueryParser.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 11:32:25 2006
Return-Path: <java-user-return-25141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66173 invoked from network); 21 Dec 2006 11:32:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 11:32:25 -0000
Received: (qmail 46826 invoked by uid 500); 21 Dec 2006 11:32:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46786 invoked by uid 500); 21 Dec 2006 11:32:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46775 invoked by uid 99); 21 Dec 2006 11:32:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 03:32:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 03:32:13 -0800
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id kBLBVuC14450
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 05:31:56 -0600
Message-ID: <458A70AE.5070405@getopt.org>
Date: Thu, 21 Dec 2006 12:31:58 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: boosting instead of sorting WAS: to boost or not to boost
References: <45896589.5090505@uni-hd.de> <200612201905.14593@danielnaber.de> <458A5A2F.5040207@uni-hd.de>
In-Reply-To: <458A5A2F.5040207@uni-hd.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Martin Braun wrote:
> Hi Daniel,
>
>   
>>> so a doc from 1973 should get a boost of 1.1973 and a doc of 1975 should
>>> get a boost of 1.1975 .
>>>       
>> The boost is stored with a limited resolution. Try boosting one doc by 10, 
>> the other one by 20 or something like that.
>>     
>
> You're right. I thought that with the float values the resolution should
> be good enough!
> But there is only a difference in the score with a boosting diff of 0.2
> (e.g. 1.7 and 1.9).
>
> I know that there were many questions on the list regarding scoring
> better new documents.
> But I want to avoid any overhead like "FunctionQuery" at query time,
> and in my case I have some documents
> which have same values in many fields (=>same score) and the only
> difference is the year.
>
> However  I don't want to overboost the score so that the scoring for
> other criteria is not considered.
>
> Shortly spoken: As a result of a search I have a list of book titles and
> I want  a sort by score AND by year of publication.
>
> But for performance reasons I want to avoid this sorting at query-time
> by boosting at index time.
>
> Is that possible?
>   

Here's the trick that works for me, without the issues of boost 
resolution or FunctionQuery.

Add a separate field, say "days", in which you will put as many "1" as 
many days elapsed since the epoch (not neccessarily since 1 Jan 1970 - 
pick a date that makes sense for you). Then, if you want to prioritize 
newer documents, just add "+days:1" to your query. Voila - the final 
results are a sum of other score factors plus a score factor that is 
higher for more recent document, containing more 1-s.

If you are dealing with large time spans, you can split this into years 
and days-in-a-year, and apply query boosts, like "+years:1^10.0 
+days:1^0.02". Do some experiments and find what works best for you.


-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 11:40:53 2006
Return-Path: <java-user-return-25142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68461 invoked from network); 21 Dec 2006 11:40:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 11:40:51 -0000
Received: (qmail 57849 invoked by uid 500); 21 Dec 2006 11:40:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57811 invoked by uid 500); 21 Dec 2006 11:40:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57799 invoked by uid 99); 21 Dec 2006 11:40:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 03:40:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.43 as permitted sender)
Received: from [80.67.18.43] (HELO smtprelay05.ispgateway.de) (80.67.18.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 03:40:41 -0800
Received: (qmail 18543 invoked from network); 21 Dec 2006 11:40:19 -0000
Received: from unknown (HELO p5496d107.dip.t-dialin.net) ([pbs]695637@[84.150.209.7])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay05.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 21 Dec 2006 11:40:19 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: boosting instead of sorting WAS: to boost or not to boost
Date: Thu, 21 Dec 2006 12:41:05 +0100
User-Agent: KMail/1.8.2
References: <45896589.5090505@uni-hd.de> <200612201905.14593@danielnaber.de> <458A5A2F.5040207@uni-hd.de>
In-Reply-To: <458A5A2F.5040207@uni-hd.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200612211241.05737@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 21 December 2006 10:55, Martin Braun wrote:

> and in my case I have some documents
> which have same values in many fields (=>same score) and the only
> difference is the year.

Andrzej's response sounds like a good solution, so just for completeness: 
you can sort by more than one criterion, e.g. first by score, then by 
date.

regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 14:40:12 2006
Return-Path: <java-user-return-25143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23306 invoked from network); 21 Dec 2006 14:40:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 14:40:11 -0000
Received: (qmail 35998 invoked by uid 500); 21 Dec 2006 14:40:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35967 invoked by uid 500); 21 Dec 2006 14:40:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35956 invoked by uid 99); 21 Dec 2006 14:40:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 06:40:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 06:40:00 -0800
Received: by an-out-0708.google.com with SMTP id c3so267625ana
        for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 06:39:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=iBoUJPtB70DbsGj7+dUKbN9Viy3ms5bVWJ5VNx2di/H5LCykYujbh6c7Jkp4tEFPJx0l6uV2R7XgSz/L5HuuucN6E8tCHIexOO038w7B24vMm7ZNxmFuUvze5NtAAl79tN/+xgt2+SjnA7UvU7mktaf1QNVjmNaNL02Byn5/XGw=
Received: by 10.78.18.3 with SMTP id 3mr566578hur.1166711978786;
        Thu, 21 Dec 2006 06:39:38 -0800 (PST)
Received: by 10.78.200.15 with HTTP; Thu, 21 Dec 2006 06:39:38 -0800 (PST)
Message-ID: <126142c0612210639p3e9283fbv8c70174b73f64f1d@mail.gmail.com>
Date: Thu, 21 Dec 2006 11:39:38 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Oracle/Lucene integration -status-
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi:
  Yesterday, I uploaded a new version of the Oracle/Lucene integration
using BLOB as storage for the inverted index and the Oracle JVM for
running the Lucene framework inside the Oracle Database, see it at the
Jira:
http://issues.apache.org/jira/browse/LUCENE-724
  This new version includes a full implementation of a new Oracle
Domain Index to index and search Oracle columns of type VARCHAR2, CLOB
and XMLType using Lucene.
  You can index a table with Lucene with a simple SQL command:
create index it1 on t1(f2) indextype is lucene.LuceneIndex
parameters('Analyzer:org.apache.lucene.analysis.StopAnalyzer');
   This DDL command will index the column f2 of the table t1,
registering a new index for the table named it1.
   Next you can search against the table by using the SQL Operator
lcontains and get the score with lscore, for example:
   select lscore(1),f2 from t1 where lcontains(f2, 'procedure or
function',1) > 0;
   Also the lcontains operator can be used outside the where:
   select lcontains(f2, 'procedure or function') from t1;
   the lucene inverted index is called to check if the current row
contains the string "procedure or function".
   The implementation of the Domain Index provides a new way to sort
and filter Lucene queries, It mean you can change the design of the
application to use other database index and filters, for example
bitmap index for column with low cardinality or BTrees, then the
optimizer will choose the correct execution plan for the query.
    Here a simple example:
create table emails (
 emailFrom VARCHAR2(256),
 emailTo VARCHAR2(256),
 subject VARCHAR2(4000),
 emailDate DATE,
 bodyText CLOB)
/

create index emailSubject on emails(subject) indextype is lucene.LuceneIndex
parameters('Analyzer:org.apache.lucene.analysis.SimpleAnalyzer');

create index emailBody on emails(bodyText) indextype is lucene.LuceneIndex
parameters('Analyzer:org.apache.lucene.analysis.StopAnalyzer');
-- BTree index
create index emailFromIdx on emails(emailFrom);
-- BTree index
create index emailToIdx on emails(emailTo);

SQL> explain plan for
SELECT * FROM emails where emailfrom like '%@gmail.com' and
lcontains(bodytext,'security',1)>0
order by emaildate,lscore(1);
set echo off
@@explainPlan
set echo on
  2    3
Explained.

Elapsed: 00:00:00.03
SQL> SQL>
PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------------------------------------------------------------------
Plan hash value: 1696552134

------------------------------------------------------------------------------------------
| Id  | Operation                    | Name      | Rows  | Bytes |
Cost (%CPU)| Time     |
------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT             |           |     1 |  4285 |
4  (25)| 00:00:01 |
|   1 |  SORT ORDER BY               |           |     1 |  4285 |
4  (25)| 00:00:01 |
|*  2 |   TABLE ACCESS BY INDEX ROWID| EMAILS    |     1 |  4285 |
3   (0)| 00:00:01 |
|*  3 |    DOMAIN INDEX              | EMAILBODY |       |       |
       |          |
------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - filter("EMAILFROM" LIKE '%@gmail.com')
   3 - access("LUCENE"."LCONTAINS"("BODYTEXT",'security',1)>0)

Note
-----
   - dynamic sampling used for this statement

20 rows selected.

   The above example shows that the optimizer chooses first the Lucene
Domain Index to search all the emails that contains the text
'security', get the rows using is rowid (direct access), apply the
filter like and finally sort by the score and date.
   I am still working on the code to implement the todo list (see
db/readmeOJVM.html file on the tar.gz) specially to pass the stats of
the index to the Oracle Data Cartridge API and the stemmer (Snowball
Analyzer) for indexing other languages than the English ;)
   Today, I added the code for caching Hits in addition to the caching
of the searcher and the Filter, so multiples invocations of the
operator lcontains share the same read-only instance of the
OJVMDirectory and if the query string returned by the query parser is
equals, it will re-use the Hits returned by a previous query.
   Sorry for the long email :)
   Best regards, Marcelo.
-- 
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 14:43:31 2006
Return-Path: <java-user-return-25144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24600 invoked from network); 21 Dec 2006 14:43:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 14:43:30 -0000
Received: (qmail 44987 invoked by uid 500); 21 Dec 2006 14:43:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44951 invoked by uid 500); 21 Dec 2006 14:43:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44940 invoked by uid 99); 21 Dec 2006 14:43:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 06:43:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 06:43:18 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8AB4930EFC19; Thu, 21 Dec 2006 09:42:57 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 4082630EFC17
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 09:42:53 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <458099D3.6020108@lisasoft.com>
References: <457FA4C4.6030906@lisasoft.com> <359a92830612130523u76cc5e2fsabcbe6b795de254@mail.gmail.com> <458099D3.6020108@lisasoft.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <278D80B5-A4EC-4DB5-991B-D9546C51C189@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Advice on 3NF Data Structures and Lucene Please
Date: Thu, 21 Dec 2006 09:42:44 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Dec 13, 2006, at 7:24 PM, Andrew Hughes wrote:
> I realize that I'm posting LOTS of complicated questions.... and I  
> am probably just looking at the equivalent of a HTML indexing/ 
> search implementation.

(sorry for the delay)

I'm doing something sorta relational in my Collex project - http:// 
www.nines.org/collex - where I have different "types" of documents in  
the index, and filters are created and cached that cross-reference  
from one type to another.  It's not very sophisticated and this is an  
area that will likely change but it is possible with clever  
techniques to make Lucene "relational" in a sense.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 15:01:11 2006
Return-Path: <java-user-return-25145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28620 invoked from network); 21 Dec 2006 15:01:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 15:01:10 -0000
Received: (qmail 84699 invoked by uid 500); 21 Dec 2006 15:01:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84668 invoked by uid 500); 21 Dec 2006 15:01:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84656 invoked by uid 99); 21 Dec 2006 15:01:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 07:01:09 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 07:00:58 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GxPPS-0004pu-Db
	for java-user@lucene.apache.org; Thu, 21 Dec 2006 07:00:38 -0800
Message-ID: <8009240.post@talk.nabble.com>
Date: Thu, 21 Dec 2006 07:00:38 -0800 (PST)
From: wawa <shim0002@hotmail.com>
To: java-user@lucene.apache.org
Subject: Sorting words
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: shim0002@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have some problem to sort words. Somehow it sorts in strange way.  sort
result is below:

...
BILLIARD & CAFE
BIZIM CAFE
BOLSA CAFE BIDA
BONAMICO CAFE
BONESSIMO CAFE
CAFE BAR AZZURRI
A BICA CAFE
ATRIUM CAFE
CAFE 668
THE APPLE CAFE 
.....

Is there any way to sort properly?


-- 
View this message in context: http://www.nabble.com/Sorting-words-tf2865974.html#a8009240
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 15:06:52 2006
Return-Path: <java-user-return-25146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30865 invoked from network); 21 Dec 2006 15:06:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 15:06:51 -0000
Received: (qmail 3910 invoked by uid 500); 21 Dec 2006 15:06:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3869 invoked by uid 500); 21 Dec 2006 15:06:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3858 invoked by uid 99); 21 Dec 2006 15:06:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 07:06:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 07:06:38 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0A6A130EFC17; Thu, 21 Dec 2006 10:06:18 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 0D1F430EFC17
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 10:06:14 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <8009240.post@talk.nabble.com>
References: <8009240.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C1A3E606-8C10-4F3E-A4C2-D3EB57BE6259@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Sorting words
Date: Thu, 21 Dec 2006 10:06:12 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1

Thie is probably due to you sorting by a tokenized field.  Be sure  
you are sorting on an untokenized field!

	Erik

On Dec 21, 2006, at 10:00 AM, wawa wrote:

>
> I have some problem to sort words. Somehow it sorts in strange  
> way.  sort
> result is below:
>
> ...
> BILLIARD & CAFE
> BIZIM CAFE
> BOLSA CAFE BIDA
> BONAMICO CAFE
> BONESSIMO CAFE
> CAFE BAR AZZURRI
> A BICA CAFE
> ATRIUM CAFE
> CAFE 668
> THE APPLE CAFE
> .....
>
> Is there any way to sort properly?
>
>
> -- 
> View this message in context: http://www.nabble.com/Sorting-words- 
> tf2865974.html#a8009240
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 15:49:57 2006
Return-Path: <java-user-return-25147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42508 invoked from network); 21 Dec 2006 15:49:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 15:49:55 -0000
Received: (qmail 84734 invoked by uid 500); 21 Dec 2006 15:49:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84707 invoked by uid 500); 21 Dec 2006 15:49:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84696 invoked by uid 99); 21 Dec 2006 15:49:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 07:49:54 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 07:49:43 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GxQAc-0000Yg-Rs
	for java-user@lucene.apache.org; Thu, 21 Dec 2006 07:49:22 -0800
Message-ID: <8009973.post@talk.nabble.com>
Date: Thu, 21 Dec 2006 07:49:22 -0800 (PST)
From: wawa <shim0002@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting words
In-Reply-To: <C1A3E606-8C10-4F3E-A4C2-D3EB57BE6259@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: shim0002@hotmail.com
References: <8009240.post@talk.nabble.com> <C1A3E606-8C10-4F3E-A4C2-D3EB57BE6259@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks.. but how do I know whether the filed is tokenized or not?
I just used code to sort below:

....
Query query =QueryParser.parse(contents, title, new StandardAnalyzer());
booleanQuery.add(query, true, false);
....
hits= searcher.search(booleanQuery,new Sort("operatingName"));
......


operatingName field contains name of stores.  other fields contains a single
word or numbers.  Those are ok.  But this filed contains words.  Once I sort
on this filed, it doesn't give me proper result.  Like you told me, it seems
tokenize name of stores and sort it.  How can I solve this problem?



Erik Hatcher wrote:
> 
> Thie is probably due to you sorting by a tokenized field.  Be sure  
> you are sorting on an untokenized field!
> 
> 	Erik
> 
> On Dec 21, 2006, at 10:00 AM, wawa wrote:
> 
>>
>> I have some problem to sort words. Somehow it sorts in strange  
>> way.  sort
>> result is below:
>>
>> ...
>> BILLIARD & CAFE
>> BIZIM CAFE
>> BOLSA CAFE BIDA
>> BONAMICO CAFE
>> BONESSIMO CAFE
>> CAFE BAR AZZURRI
>> A BICA CAFE
>> ATRIUM CAFE
>> CAFE 668
>> THE APPLE CAFE
>> .....
>>
>> Is there any way to sort properly?
>>
>>
>> -- 
>> View this message in context: http://www.nabble.com/Sorting-words- 
>> tf2865974.html#a8009240
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Sorting-words-tf2865974.html#a8009973
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 16:12:34 2006
Return-Path: <java-user-return-25148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49684 invoked from network); 21 Dec 2006 16:12:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 16:12:31 -0000
Received: (qmail 23841 invoked by uid 500); 21 Dec 2006 16:12:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23815 invoked by uid 500); 21 Dec 2006 16:12:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23804 invoked by uid 99); 21 Dec 2006 16:12:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 08:12:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 08:12:19 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D5A2530EFC19; Thu, 21 Dec 2006 11:11:57 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 306AD30EFC17
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 11:11:55 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <8009973.post@talk.nabble.com>
References: <8009240.post@talk.nabble.com> <C1A3E606-8C10-4F3E-A4C2-D3EB57BE6259@ehatchersolutions.com> <8009973.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <227915ED-8A30-49DB-BD45-21E7C36A3D4D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Sorting words
Date: Thu, 21 Dec 2006 11:11:52 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Dec 21, 2006, at 10:49 AM, wawa wrote:
> Thanks.. but how do I know whether the filed is tokenized or not?

Look at how you indexed "operatingName".

> operatingName field contains name of stores.  other fields contains  
> a single
> word or numbers.  Those are ok.  But this filed contains words.   
> Once I sort
> on this filed, it doesn't give me proper result.  Like you told me,  
> it seems
> tokenize name of stores and sort it.  How can I solve this problem?

You may need to create a separate untokenized field for the same data  
used for sorting, depending on whether you search by words in  
operatingName or not, or only use it for sorting.

	Erik




>
>
>
> Erik Hatcher wrote:
>>
>> Thie is probably due to you sorting by a tokenized field.  Be sure
>> you are sorting on an untokenized field!
>>
>> 	Erik
>>
>> On Dec 21, 2006, at 10:00 AM, wawa wrote:
>>
>>>
>>> I have some problem to sort words. Somehow it sorts in strange
>>> way.  sort
>>> result is below:
>>>
>>> ...
>>> BILLIARD & CAFE
>>> BIZIM CAFE
>>> BOLSA CAFE BIDA
>>> BONAMICO CAFE
>>> BONESSIMO CAFE
>>> CAFE BAR AZZURRI
>>> A BICA CAFE
>>> ATRIUM CAFE
>>> CAFE 668
>>> THE APPLE CAFE
>>> .....
>>>
>>> Is there any way to sort properly?
>>>
>>>
>>> -- 
>>> View this message in context: http://www.nabble.com/Sorting-words-
>>> tf2865974.html#a8009240
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Sorting-words- 
> tf2865974.html#a8009973
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 16:14:12 2006
Return-Path: <java-user-return-25149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50461 invoked from network); 21 Dec 2006 16:14:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 16:14:11 -0000
Received: (qmail 27492 invoked by uid 500); 21 Dec 2006 16:14:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26964 invoked by uid 500); 21 Dec 2006 16:14:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26953 invoked by uid 99); 21 Dec 2006 16:14:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 08:14:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [217.160.230.40] (HELO mout.perfora.net) (217.160.230.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 08:14:01 -0800
Received: from [59.144.68.219] (helo=[192.168.0.2])
	by mrelay.perfora.net (node=mrelayus1) with ESMTP (Nemesis),
	id 0MKp2t-1GxQY60DzX-0000Fj; Thu, 21 Dec 2006 11:13:40 -0500
Message-ID: <458AB30F.6030908@insideview.com>
Date: Thu, 21 Dec 2006 21:45:11 +0530
From: Harini Raghavan <harini.raghavan@insideview.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Merge Index Filling up Disk Space
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: perfora.net abuse@perfora.net login:9759476ad67fa08aca5d9352c82c69ea
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

I am using lucene 1.9.1 for search functionality in my j2ee application 
using JBoss as app server. The lucene index directory size is almost 20G 
right now. There is a Quartz job that is adding data to the index evey 
min and around 20000 documents get added to the index every day.When the 
documents are added and the segments are merged, the index size 
increases and sometimes grows to more than double its original size. 
This results in filling up the disk space. We have allotted a f/s size 
of 50G and even that is not sufficient at times. Is there an optimum 
vales for the f/s size to be allotted in such scenario.
Any suggestions would be appreciated.
 
Thanks,
Harini

-- 
Harini Raghavan
Software Engineer
Office : +91-40-23556255
harini.raghavan@insideview.com
we think, you sell
www.InsideView.com
InsideView 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 16:28:14 2006
Return-Path: <java-user-return-25150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53372 invoked from network); 21 Dec 2006 16:28:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 16:28:13 -0000
Received: (qmail 58133 invoked by uid 500); 21 Dec 2006 16:28:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58105 invoked by uid 500); 21 Dec 2006 16:28:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58094 invoked by uid 99); 21 Dec 2006 16:28:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 08:28:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 08:28:01 -0800
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id kBLGRdpJ030773
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 17:27:39 +0100
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 67D698BE2A
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 17:27:39 +0100 (CET)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 02901-07 for <java-user@lucene.apache.org>;
 Thu, 21 Dec 2006 17:27:38 +0100 (CET)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 3AEFE8BE05
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 17:27:38 +0100 (CET)
Message-ID: <458AB5FA.7060903@uni-hd.de>
Date: Thu, 21 Dec 2006 17:27:38 +0100
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.9 (X11/20061206)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: spnafirstquery and multiple field instances
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org

hello,

with a SpanFirstQuery I want to realize a "starts with" search -
that seems to work fine. But I have the Problem that I have documents
with multiple titles and I thought I can do a sfq-search for each tiltle
   by adding multiple instances for the specific field:

			for (String key : title.getTitel().split("\\n")  ) {			
				titleDocument.add(new Field("TI", key, Field.Store.NO,
					Field.Index.TOKENIZED));
			}

but that didn't work. The query finds only matches for the first token
in that field of a document.

Is there a way to do a SpanFirstQuery for each token?

tia,
martin


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 16:52:23 2006
Return-Path: <java-user-return-25151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62085 invoked from network); 21 Dec 2006 16:52:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 16:52:22 -0000
Received: (qmail 20601 invoked by uid 500); 21 Dec 2006 16:52:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20361 invoked by uid 500); 21 Dec 2006 16:52:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20350 invoked by uid 99); 21 Dec 2006 16:52:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 08:52:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 08:52:09 -0800
Received: by py-out-1112.google.com with SMTP id a25so1425293pyi
        for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 08:51:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=JzPwqWSRqqGS0YIwODW/PpVcXs15KCviNYhj2FtCFd/LgdxUjNgEqnXWnvZOySZi5mE7RSuzNVXK7nDNbCfQ/kPydT87K8rOjak7ueIcEdMYly3sO8x1y7H8M3HJHpVBONqOnRTSwTCVdREc/L+KoIOw+dvNe15BdOeZz8Jnt8M=
Received: by 10.35.81.1 with SMTP id i1mr15386349pyl.1166719909309;
        Thu, 21 Dec 2006 08:51:49 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id 38sm39611205nzk.2006.12.21.08.51.47;
        Thu, 21 Dec 2006 08:51:48 -0800 (PST)
Message-ID: <458ABBA8.9040708@gmail.com>
Date: Thu, 21 Dec 2006 11:51:52 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Merge Index Filling up Disk Space
References: <458AB30F.6030908@insideview.com>
In-Reply-To: <458AB30F.6030908@insideview.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

When Lucene optimizes the Index (which it semi does naturally as the 
index grows) it creates a copy of the index, so you can expect the space 
requirements for an index to be double the index at an absolute minimum. 
If you are adding 20,000 docs a day and working with an index that is 
already 20 G than your just playing with fire sitting on a 50G 
partition. With the price of disk-space these days I would recommend 
throwing a lot more storage at your appserver. I would hate to keep 
dancing around as I gave it the few more Gig it needed to keep from 
crashing.
- Mark

Harini Raghavan wrote:
> Hi All,
>
> I am using lucene 1.9.1 for search functionality in my j2ee 
> application using JBoss as app server. The lucene index directory size 
> is almost 20G right now. There is a Quartz job that is adding data to 
> the index evey min and around 20000 documents get added to the index 
> every day.When the documents are added and the segments are merged, 
> the index size increases and sometimes grows to more than double its 
> original size. This results in filling up the disk space. We have 
> allotted a f/s size of 50G and even that is not sufficient at times. 
> Is there an optimum vales for the f/s size to be allotted in such 
> scenario.
> Any suggestions would be appreciated.
>
> Thanks,
> Harini
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 17:48:12 2006
Return-Path: <java-user-return-25152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76371 invoked from network); 21 Dec 2006 17:48:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 17:48:10 -0000
Received: (qmail 7393 invoked by uid 500); 21 Dec 2006 17:48:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7355 invoked by uid 500); 21 Dec 2006 17:48:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7343 invoked by uid 99); 21 Dec 2006 17:48:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 09:48:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 09:47:58 -0800
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 69DAD18A30; Thu, 21 Dec 2006 17:47:36 +0000 (GMT)
Received: from max (cpc3-lewi6-0-0-cust798.bmly.cable.ntl.com [82.27.203.31])
	by mail.seseit.com (Postfix) with ESMTP id 6FE2218A2F
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 17:47:34 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Merge Index Filling up Disk Space
Date: Thu, 21 Dec 2006 17:47:32 -0000
Message-ID: <005d01c72528$1837fb30$2302a8c0@max>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
thread-index: AcclGwwOzXOXOsGES3iD7fanx2SkpgADBZ2A
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0058_01C72528.1712B510"
In-Reply-To: <458AB30F.6030908@insideview.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=failed 
	version=3.0.3

------=_NextPart_000_0058_01C72528.1712B510
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I've found that merging a 20G directory into another 20G directory on
another disk required the target disk to have > 50G available during the
merge. I ran out of space on my ~70G disk for the merge and had to do it on
another system with ~170G available, but I'm not sure how much was used
transiently for the merge. The whole process took a long time, so I've done
limited experimenting.

[Incidentally, the two directories resulted in a 24G after merging.]

-----Original Message-----
From: Harini Raghavan [mailto:harini.raghavan@insideview.com] 
Sent: 21 December 2006 16:15
To: java-user@lucene.apache.org
Subject: Merge Index Filling up Disk Space

Hi All,

I am using lucene 1.9.1 for search functionality in my j2ee application
using JBoss as app server. The lucene index directory size is almost 20G
right now. There is a Quartz job that is adding data to the index evey min
and around 20000 documents get added to the index every day.When the
documents are added and the segments are merged, the index size increases
and sometimes grows to more than double its original size. 
This results in filling up the disk space. We have allotted a f/s size of
50G and even that is not sufficient at times. Is there an optimum vales for
the f/s size to be allotted in such scenario.
Any suggestions would be appreciated.
 
Thanks,
Harini

--
Harini Raghavan
Software Engineer
Office : +91-40-23556255
harini.raghavan@insideview.com
we think, you sell
www.InsideView.com
InsideView 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0058_01C72528.1712B510
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhAMCNjQ34mqyE4nzPikVv1BMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA2MTAxOTAwMDAw
MFoXDTA3MTAxOTIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDNyaTYoePu
Q5MAkMiMXDFmmzjqw3yJZ0I/nBcM2kEMNmlpwG34SbhOB5WKLRd1FPOArm344LxH8PQd5n/i++p9
Wgdem+mxT8AAQCaiLC//wCOfIFhcKdCeIH0UdT6tUVQ1bmog7FVtLFKgqQzfhoPauUZcdClO4tA/
DcPNpy4XRO6b8XsttoMrRY/GqHRDY1zNJycBBdt3vpT7Q8vb6yQ3Hf32K/wUfalCzNo+SfzhGSsl
HBx8xfepQ6Xrz6jNS8jdkrimRGEjcGSzY5ixPd0kV7BIxFa3TtBK1u/LApMTGaAmeFilZeefsRWu
pEBr9tyetn4Wu/5q/tplVgAknCF9AgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQB5A9RgvBpfJsI8uueBWGaMe8/HCzuSE3HskLzgb+6/4x2z
d4YIrVrFEvmpQQz0B1+Vbom2GTshDK2Ib3vQuMcFMZuyZ6fuI80QsAGDQ33ZykSjcAgjuG6joW9m
0M0DISzAS5JjxLkeNCko8oBgq5ZHiTpNONUtEK5M8In2Fe73XjGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhAMCNjQ34mqyE4nzPikVv1BMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MTIyMTE3
NDczMVowIwYJKoZIhvcNAQkEMRYEFLLqbKhdzgd7VqF97OKOWLZTvrwzMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEAwI2NDfiarITifM+KRW/UEwgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhAMCNjQ
34mqyE4nzPikVv1BMA0GCSqGSIb3DQEBAQUABIIBAAaVg/oLhoFVQjjAPwGBdlNPJ2nnHPoHgWeC
zsd/7fVxpe7yuavrRlDpa9m0+UwUmTiJ7JVrpEXnL/eq+NkcfqaMKwUC+n5Aptdm5OFLNd7sCezi
4S0UU2WXmKbWHE4pR5VYgdDIcLA3SGiFs4GfVtL0P+w2jvWNgTAzurG6xhE3LdeVcbpkaQSUQllr
A2vWRtvOuGHghz6kifs/znSJ7sjbg0PyqnwyVQZPqtCi2AGiCTk1RDaF5kJiqkIOyd3+qKJ/qpWj
Zs+5VHzGBw3pU0vP27rQ9FGrmcpruYDo1UHL2MbbEJf5kbjSBiAkXKYJfv1k0TcrVnmUSGcGhZWO
F0QAAAAAAAA=

------=_NextPart_000_0058_01C72528.1712B510--


From java-user-return-25153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 18:14:18 2006
Return-Path: <java-user-return-25153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82052 invoked from network); 21 Dec 2006 18:14:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 18:14:16 -0000
Received: (qmail 42860 invoked by uid 500); 21 Dec 2006 18:14:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42830 invoked by uid 500); 21 Dec 2006 18:14:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42811 invoked by uid 99); 21 Dec 2006 18:14:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 10:14:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of vnguyen@ur.com designates 63.241.148.49 as permitted sender)
Received: from [63.241.148.49] (HELO iris.ur.com) (63.241.148.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 10:13:58 -0800
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by iris.ur.com with ESMTP; 21 Dec 2006 18:14:28 +0000
X-OriginatingIP: 10.6.134.35
X-InternalServer: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 21 Dec 2006 13:11:53 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: JAVA JVM Question
Date: Thu, 21 Dec 2006 13:13:35 -0500
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E8117DC2A42@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: JAVA JVM Question
thread-index: AcckraF3GtXA+0yPQ8WjZLpSRv4TYgAehLmw
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>,
	<simon.willnauer@gmail.com>
X-OriginalArrivalTime: 21 Dec 2006 18:11:53.0667 (UTC) FILETIME=[7E550130:01C7252B]
X-Virus-Checked: Checked by ClamAV on apache.org

This is a different OOM error.  This one is due to Java heap space.
I've tried using Otis' suggestion and use the latest nightly build (I've
actually tried using 12/19/2006 and 12/20/2006)... but I am still
getting this OOS: Java heap space error.  I will try to profile this app
to see if I can get more info.

I've read about the PermGenSpace errors and I do get that from time to
time on redeploys and heard that Java 6 was suppose to handle garbage
collection better.  The only common classes are the ones provided by
JBoss.  We have taken to restarting the app server every time we deploy
an application... but we hope that that's not a permanent solution
because we do not want to take down all of our applications because we
need to redeploy one app.


Van

-----Original Message-----
From: Simon Willnauer [mailto:simon.willnauer@googlemail.com]=20
Sent: Wednesday, December 20, 2006 7:11 PM
To: java-user@lucene.apache.org
Subject: Re: JAVA JVM Question

OOM Errors are not uncommon during redeployment on application server
e.g. servlet container. Redeploy on Tomcat servers very often cause
OOM due to the perm gen space which get not GCed(that should go away
with 5.5). The JBoss can usually deal with these issue but just in
case you could check your PerGenSpace via JMX or some profiler to see
what happens with your loaded classes. If you redeploy in live /
production env. make sure you restart your app. server.
Do you use some common classes which are provided via parent
classloader of your application? This could also cause such problems.
If this is a PermGenSpace problem you might fix it by replacing one of
the components in your software stack. This issues has been widely
discussed and the finger of blame has been pointed to tomcat, cglib or
even your JVM impl.

best regards simon

On 12/20/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Are you using 2.1-dev version of Lucene? Try the latest nightly build,
it as a fix for a certain OOM bug (see LUCENE-754).
>
> Otis
>
> ----- Original Message ----
> From: Van Nguyen <vnguyen@ur.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, December 20, 2006 6:39:58 PM
> Subject: JAVA JVM Question
>
> I have an index that's approximately 875MB.  I'm using JBoss
Application
> Server 4.04 w/ Apache HTTP Server 2.2.  My min/max JVM size is:
> 128MB/512MB.  On initial startup, everything works fine.  I'm able to
> search (although it takes a while doing the first search because it's
> loading the index into memory - because I'm sorting on a field)...
> everything's fine and dandy.  But if I stop the application and
> redeploy, I get an OutOfMemoryError when I search (when the index gets
> loaded into memory again).  I've tried this on both Java 5 and Java 6.
>
>
>
> When I stop the application, I made sure (or at least to the best of
my
> knowledge) that I close all searcher/reader/writer.  I'm pretty sure
> that there are no locks on the index.  I've tried increasing the
maximum
> JVM size to 1GB.  Now I can redeploy the application twice before it
> gives me the OutOfMemoryError.  It seems like the JVM isn't garbage
> collecting the index.
>
>
>
> So is this a JVM issue where the index is still in memory and it isn't
> being garbage collected?  Or am I not closing my
searcher/reader/writer
> correctly?  Has anyone else experienced this?
>
>
>
> Thanks,
>
>
>
> Van
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 18:22:08 2006
Return-Path: <java-user-return-25154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84650 invoked from network); 21 Dec 2006 18:22:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 18:22:07 -0000
Received: (qmail 56431 invoked by uid 500); 21 Dec 2006 18:22:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56392 invoked by uid 500); 21 Dec 2006 18:22:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56381 invoked by uid 99); 21 Dec 2006 18:22:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 10:22:07 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Dec 2006 10:21:56 -0800
Received: (qmail 42342 invoked by uid 60001); 21 Dec 2006 18:21:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=C6Nh9yF/NOopKI/ToawBYKTnT9Aj4gfihWWJs+crgeyfnbhoxfG/IDzTLLu9S1e/PvWnseTH3y3C1MclEyQgY1AD+IGbR6QD6iRkjSBsiTa6sIJhHDG8ZOoZnABKe/i/rrT6o93/7HkcsQQJnDbVkwzQltauRsRBOehB9+JIWPY=  ;
Message-ID: <20061221182134.42340.qmail@web50301.mail.yahoo.com>
Received: from [74.65.202.166] by web50301.mail.yahoo.com via HTTP; Thu, 21 Dec 2006 10:21:34 PST
Date: Thu, 21 Dec 2006 10:21:34 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: First search is slow after updating index .. subsequent searches very fast
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Bogan,=0A=0ASomething like dd if=3D/path/to/index/foo.cfs of=3D/dev/null=0A=
Basically, force the data through the kernel preemptively, so FS caches it.=
=0ARun vmstat while doing it, and if the index hasn't been cached by the FS=
, you should see a spike in IO activity while dd is running.=0A=0AOtis=0A=
=0A----- Original Message ----=0AFrom: Bogdan Ghidireac <bogdan@ecstend.com=
>=0ATo: java-user@lucene.apache.org=0ASent: Thursday, December 21, 2006 3:5=
8:52 AM=0ASubject: Re: First search is slow after updating index .. subsequ=
ent searches very fast=0A=0AOtis,=0A=0AI am not familiar with the 'dd trick=
' to warm up the index. Can you please=0Aexplain it ?=0A=0ABogdan=0A=0A=0AO=
n 12/20/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:=0A>=0A> To=
 populate FieldCache, the number of matches doesn't matter.  There is no=0A=
> need to be scrimy there - you don't really save anything by running a que=
ry=0A> that matches only a few docs.  Just run something that looks like a =
common=0A> query.=0A>=0A> For warming up new indices, one can also use the =
`dd' trick under UNIX.=0A>=0A> Otis=0A>=0A>=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 18:30:08 2006
Return-Path: <java-user-return-25155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86670 invoked from network); 21 Dec 2006 18:30:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 18:30:07 -0000
Received: (qmail 71445 invoked by uid 500); 21 Dec 2006 18:29:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71411 invoked by uid 500); 21 Dec 2006 18:29:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71393 invoked by uid 99); 21 Dec 2006 18:29:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 10:29:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 10:29:23 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id D85F259C0B
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 13:28:40 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by out1.internal (MEProxy); Thu, 21 Dec 2006 13:28:40 -0500
X-Sasl-enc: Si2MqoA6K2vQdoyHVNftNrh4B8Kl+WfwQ1OLO1WSazPJ 1166725720
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 8AF6D107AF
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 13:28:40 -0500 (EST)
Message-ID: <458AD25D.8050001@mikemccandless.com>
Date: Thu, 21 Dec 2006 13:28:45 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Merge Index Filling up Disk Space
References: <458AB30F.6030908@insideview.com>
In-Reply-To: <458AB30F.6030908@insideview.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Harini Raghavan wrote:

> I am using lucene 1.9.1 for search functionality in my j2ee application 
> using JBoss as app server. The lucene index directory size is almost 20G 
> right now. There is a Quartz job that is adding data to the index evey 
> min and around 20000 documents get added to the index every day.When the 
> documents are added and the segments are merged, the index size 
> increases and sometimes grows to more than double its original size. 
> This results in filling up the disk space. We have allotted a f/s size 
> of 50G and even that is not sufficient at times. Is there an optimum 
> vales for the f/s size to be allotted in such scenario.
> Any suggestions would be appreciated.

I believe optimize should use at most 2X the starting index size,
transiently, if there are no readers open against the index.  And then
when optimize is done the size should be around the starting size, or
less.

If there are open readers against the index when the optimize occurs,
then, the segments that were merged cannot actually be deleted until
those readers close.  Even on Unix, where it will look like the
segments were deleted, they are still consuming disk space because
open file handles keep them allocated ("delete on last close").

This means if you have open readers you should see at most 3X the
starting index size.  Worse, if some (but not all) readers are
re-opening while the merge is underway it's possible to peak at even
more than 3X the starting size.

Do you have readers running against your index?

I will call this out in the javadocs for optimize, addDocument,
addIndexes...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 18:34:58 2006
Return-Path: <java-user-return-25156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87553 invoked from network); 21 Dec 2006 18:34:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 18:34:58 -0000
Received: (qmail 80097 invoked by uid 500); 21 Dec 2006 18:34:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80064 invoked by uid 500); 21 Dec 2006 18:34:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80053 invoked by uid 99); 21 Dec 2006 18:34:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 10:34:58 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [130.57.169.10] (HELO peabody.ximian.com) (130.57.169.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 10:34:48 -0800
Received: (qmail 31987 invoked from network); 21 Dec 2006 18:34:27 -0000
Received: from localhost (HELO posthaste.boston.ximian.com) (joe@127.0.0.1)
  by localhost with SMTP; 21 Dec 2006 18:34:27 -0000
Subject: Re: First search is slow after updating index .. subsequent
	searches very fast
From: Joe Shaw <joeshaw@novell.com>
To: java-user@lucene.apache.org
In-Reply-To: <20061221182134.42340.qmail@web50301.mail.yahoo.com>
References: <20061221182134.42340.qmail@web50301.mail.yahoo.com>
Content-Type: text/plain
Date: Thu, 21 Dec 2006 13:34:38 -0500
Message-Id: <1166726078.607.24.camel@posthaste.boston.ximian.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.0 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

On Thu, 2006-12-21 at 10:21 -0800, Otis Gospodnetic wrote:
> Something like dd if=/path/to/index/foo.cfs of=/dev/null
> Basically, force the data through the kernel preemptively, so FS caches it.
> Run vmstat while doing it, and if the index hasn't been cached by the FS,
> you should see a spike in IO activity while dd is running.

You might be able to do this more efficiently with the posix_fadvise()
function.  C pseudocode:

        int fd = open ("/path/to/index/foo.cfs");
        
        // indicate you'll be reading the file sequentially
        posix_fadvise (fd, 0, 0, POSIX_FADV_SEQUENTIAL);
        
        // tell the kernel you will need the whole file.
        posix_fadvice (fd, 0, 0, POSIX_FADV_WILLNEED);

I don't know offhand if Java binds these APIs, though.

Joe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 18:37:36 2006
Return-Path: <java-user-return-25157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88457 invoked from network); 21 Dec 2006 18:37:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 18:37:26 -0000
Received: (qmail 83632 invoked by uid 500); 21 Dec 2006 18:37:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83606 invoked by uid 500); 21 Dec 2006 18:37:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83589 invoked by uid 99); 21 Dec 2006 18:37:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 10:37:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 10:37:15 -0800
Received: by ug-out-1314.google.com with SMTP id k40so2810461ugc
        for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 10:36:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=QaH3TkQnfOem8fWR8wnsPAHu7V1bz4HLGxMAhnQ7haB4OjXnk7jj32n6v3gQJhTn8nF7rBl8nIAOTjo1/F+WdEVfJVuJb6rMUfE7kfbzvETjje+y1ow2D1fpnXZlNwuf0GCjDQRB4doI7lLrY8I9c8K+S0d2Nx/LyImH3AYSLLg=
Received: by 10.82.165.1 with SMTP id n1mr1972368bue.1166726213923;
        Thu, 21 Dec 2006 10:36:53 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Thu, 21 Dec 2006 10:36:53 -0800 (PST)
Message-ID: <c68e39170612211036q1d7cf664v2024dc03d670c1b2@mail.gmail.com>
Date: Thu, 21 Dec 2006 13:36:53 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Merge Index Filling up Disk Space
In-Reply-To: <458AD25D.8050001@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <458AB30F.6030908@insideview.com>
	 <458AD25D.8050001@mikemccandless.com>
X-Google-Sender-Auth: bd670e32bff89c18
X-Virus-Checked: Checked by ClamAV on apache.org

On 12/21/06, Michael McCandless <lucene@mikemccandless.com> wrote:
> Harini Raghavan wrote:
> > I am using lucene 1.9.1 for search functionality in my j2ee application
> > using JBoss as app server. The lucene index directory size is almost 20G
> > right now. There is a Quartz job that is adding data to the index evey
> > min and around 20000 documents get added to the index every day.When the
> > documents are added and the segments are merged, the index size
> > increases and sometimes grows to more than double its original size.
> > This results in filling up the disk space. We have allotted a f/s size
> > of 50G and even that is not sufficient at times. Is there an optimum
> > vales for the f/s size to be allotted in such scenario.
> > Any suggestions would be appreciated.
>
> I believe optimize should use at most 2X the starting index size,
> transiently, if there are no readers open against the index.

Isn't it up to 3x with the compound index format? (and 4x with readers opened)

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 18:38:07 2006
Return-Path: <java-user-return-25158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88891 invoked from network); 21 Dec 2006 18:38:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 18:38:06 -0000
Received: (qmail 87759 invoked by uid 500); 21 Dec 2006 18:38:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87730 invoked by uid 500); 21 Dec 2006 18:38:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87719 invoked by uid 99); 21 Dec 2006 18:38:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 10:38:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.82.240.35] (HELO mail55.messagelabs.com) (216.82.240.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Dec 2006 10:37:55 -0800
X-VirusChecked: Checked
X-Env-Sender: BDotzour@widen.com
X-Msg-Ref: server-9.tower-55.messagelabs.com!1166726125!66076139!1
X-StarScan-Version: 5.5.10.7; banners=-,-,-
X-Originating-IP: [69.8.156.123]
Received: (qmail 9978 invoked from network); 21 Dec 2006 18:35:25 -0000
Received: from webmail.widen.com (HELO exch2k3.widen.com) (69.8.156.123)
  by server-9.tower-55.messagelabs.com with SMTP; 21 Dec 2006 18:35:25 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: First search is slow after updating index .. subsequent searches very fast
Date: Thu, 21 Dec 2006 12:35:25 -0600
Message-ID: <9BF20741D07E824A9206E073EB6750E90330632C@exch2k3.widen.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: First search is slow after updating index .. subsequent searches very fast
Thread-Index: AcckhjNK+7w6ux7aTp+TlOs98oeFQgAqCVlw
From: "Bryan Dotzour" <BDotzour@widen.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Otis thanks for your suggestion, it seems to be working pretty well!
I'm just curious if you (or anyone else) could describe what is actually
happening during that initial query that ends up taking so much time.
We have several different indexes for different types of objects and
it's only this one index that exhibits this kind of behavior.  Is it
something related to the size of the index, or the number of fields, or
how fragmented the index is?

I'm just trying to get a little better understanding of what is going on
under the covers there.  I'll spend some time with the source to see if
I can figure it out, but any tips from the experts would be much
appreciated. =3D)

Thanks again!
Bryan

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Wednesday, December 20, 2006 4:28 PM
To: java-user@lucene.apache.org
Subject: Re: First search is slow after updating index .. subsequent
searches very fast

To populate FieldCache, the number of matches doesn't matter.  There is
no need to be scrimy there - you don't really save anything by running a
query that matches only a few docs.  Just run something that looks like
a common query.

For warming up new indices, one can also use the `dd' trick under UNIX.

Otis

----- Original Message ----
From: Bryan Dotzour <BDotzour@widen.com>
To: java-user@lucene.apache.org
Sent: Wednesday, December 20, 2006 5:23:40 PM
Subject: RE: First search is slow after updating index .. subsequent
searches very fast

One question about this, Otis... When "warming up" the new searcher,
should the query return a lot of results, or does it matter?  Can I just
do like an ID =3D X query and get one document back?  Is that sufficient
or is it better to run a query that will get lots of hits?

Thanks again,
Bryan

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Wednesday, December 20, 2006 3:28 PM
To: java-user@lucene.apache.org
Subject: Re: First search is slow after updating index .. subsequent
searches very fast

All sounds good.  Opening a new IndexReader can take a bit of time.  If
you use sorting of any kind other than default sorting by relevance,
this delay on the first search is also probably caused by the lazy
FieldCache population.  The cure for that is to open a new
IndexReader/Searcher before you close the old one, warm it up with a
query + sort, and then switch IndexReader/Searchers, closing the old
one.

Otis

----- Original Message ----
From: Bryan Dotzour <BDotzour@widen.com>
To: java-user@lucene.apache.org
Sent: Wednesday, December 20, 2006 3:59:19 PM
Subject: First search is slow after updating index .. subsequent
searches very fast

I'm investigating some performance issues with the way we're using
Lucene in our web app and am interested if anyone could shed some light
on what might be going on.  Hopefully I can provide enough information,
please let me know if there's more I can give.

=20

We're using Lucene 2.0.0 and I'm currently working with disk-based
indexing (although in production I'll want to be using RAM indexing).
In our environment, we build up our Lucene index at application start up
time and then we optimize the index.  From then on, updates and deletes
to the index occur fairly frequently but we don't optimize until the
middle of the night when the impact would be at its minimum.  After a
while, what I see is that searches will be very fast (~400 ms) until I
make a modification that will require a single document to be
re-indexed.  Immediately after that has occurred, the next search will
take substantially longer (sometimes up to ~25s).  After that search has
run, the next search will be back at the ~400ms time.

=20

Our algorithm for handling the updates is as follows:

1.       open an IndexReader on the directory

2.       delete the document using the reader

3.       close the reader

4.       open an IndexWriter

5.       add the new document using the writer

6.       close the writer

=20

For searches:

1.    We cache off an IndexReader for the index, as well as an
IndexSearcher, which uses that reader
2.    When a search is initiated we check to see if the version of the
index has changed using getCurrentVersion()
3.    If it has changed, we close our IndexSearcher, close the
IndexReader and re-open them both

=20

=20

Anything sound non-standard in that workflow?  Does anyone have an idea
of what might be happening during that slow down?

=20

Thanks for your time,

Bryan

=20

=20

=20

(For a little more info, here is a very common stack trace snippet that
I gather when the "slow search" is running.  It seems much of the time
is spent in MultiReader or MultiTermDocs)

=20
org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(Com
poundFileReader.java:214)
=20
org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.jav
a:64)
=20
org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.j
ava:33)
      org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:56)
      org.apache.lucene.index.TermBuffer.read(TermBuffer.java:62)
=20
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:117)
=20
org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:148)
=20
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:15
7)
=20
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:151)
=20
org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:50)
=20
org.apache.lucene.index.MultiTermDocs.termDocs(MultiReader.java:392)
      org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:348)
      org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
      org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
      org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
=20
org.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImpl.java:171)
=20
org.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImpl.java:153)
=20
org.apache.lucene.search.FieldCacheImpl.getAuto(FieldCacheImpl.java:349)
=20
org.apache.lucene.search.FieldSortedHitQueue.comparatorAuto(FieldSortedH
itQueue.java:346)
=20
org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSo
rtedHitQueue.java:189)
=20
org.apache.lucene.search.FieldSortedHitQueue.(FieldSortedHitQueue.java:5
8)
=20
org.apache.lucene.search.TopFieldDocCollector.(TopFieldDocCollector.java
:40)
=20
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:108)
      org.apache.lucene.search.Hits.getMoreDocs(Hits.java:65)
      org.apache.lucene.search.Hits.(Hits.java:52)
      org.apache.lucene.search.Searcher.search(Searcher.java:53)

=20





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 18:50:35 2006
Return-Path: <java-user-return-25159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92588 invoked from network); 21 Dec 2006 18:50:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 18:50:34 -0000
Received: (qmail 6719 invoked by uid 500); 21 Dec 2006 18:50:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6687 invoked by uid 500); 21 Dec 2006 18:50:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6658 invoked by uid 99); 21 Dec 2006 18:50:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 10:50:09 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 10:49:31 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id kBLImqXE063576
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 18:48:52 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kBLImpjO729200
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 19:48:51 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kBLImpU0028349
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 19:48:51 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kBLImpgG028346
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 19:48:51 +0100
In-Reply-To: <20061221182134.42340.qmail@web50301.mail.yahoo.com>
Subject: Re: First search is slow after updating index .. subsequent searches very
 fast
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFDC67A547.C16F6218-ON8825724B.00660CB3-8825724B.006736AF@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 21 Dec 2006 10:47:22 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 21/12/2006 20:48:51
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

> Something like dd if=/path/to/index/foo.cfs of=/dev/null

Be careful not to mistaken with the 'of' argument of 'dd' - see
http://en.wikipedia.org/wiki/Dd_(Unix)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 19:19:44 2006
Return-Path: <java-user-return-25160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1299 invoked from network); 21 Dec 2006 19:19:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 19:19:44 -0000
Received: (qmail 54624 invoked by uid 500); 21 Dec 2006 19:19:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54602 invoked by uid 500); 21 Dec 2006 19:19:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54590 invoked by uid 99); 21 Dec 2006 19:19:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 11:19:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 11:19:33 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id EDEC359921
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 13:50:59 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by out1.internal (MEProxy); Thu, 21 Dec 2006 13:50:59 -0500
X-Sasl-enc: WNcX9p8134mv5ZVympg+VZx9X8yBz9qb765C/9PrCIHI 1166727059
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id B584BF31
	for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 13:50:59 -0500 (EST)
Message-ID: <458AD798.40902@mikemccandless.com>
Date: Thu, 21 Dec 2006 13:51:04 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Merge Index Filling up Disk Space
References: <458AB30F.6030908@insideview.com>	 <458AD25D.8050001@mikemccandless.com> <c68e39170612211036q1d7cf664v2024dc03d670c1b2@mail.gmail.com>
In-Reply-To: <c68e39170612211036q1d7cf664v2024dc03d670c1b2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yonik Seeley wrote:
> On 12/21/06, Michael McCandless <lucene@mikemccandless.com> wrote:
>> Harini Raghavan wrote:
>> > I am using lucene 1.9.1 for search functionality in my j2ee application
>> > using JBoss as app server. The lucene index directory size is almost 
>> 20G
>> > right now. There is a Quartz job that is adding data to the index evey
>> > min and around 20000 documents get added to the index every day.When 
>> the
>> > documents are added and the segments are merged, the index size
>> > increases and sometimes grows to more than double its original size.
>> > This results in filling up the disk space. We have allotted a f/s size
>> > of 50G and even that is not sufficient at times. Is there an optimum
>> > vales for the f/s size to be allotted in such scenario.
>> > Any suggestions would be appreciated.
>>
>> I believe optimize should use at most 2X the starting index size,
>> transiently, if there are no readers open against the index.
> 
> Isn't it up to 3x with the compound index format? (and 4x with readers 
> opened)

I *think* it's really max 2X even with compound file (if no readers)?

Because, in IndexWriter.mergeSegments we:

   1. Create the newly merged segment in non-compound format (brings us
      up to 2X, when it's the last merge).

   2. Commit the new segments(_N) file referencing this new segment (in
      non-compound format).

   3. Remove all input segments so back to 1X.

   4. Build the compound file (brings us up to 2X).

   5. Commit the next segments(_N) file referencing the new segment in
      compound format.

   6. Delete the non-cfs segment files (back to 1X or less).

What's spooky is if a reader reopens eg after 2 and before 5, and if
another reader still holds the original index open, then that brings
us to 4X (I think?).  More generally, since optimize may do a whole
series of merges (typical) leading up to the final merge, if readers
are aggressively re-opening then the held disk usage can be extremely
high (far more than 4X).  I think it's best not to recycle readers
during merge/optimize!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 19:45:36 2006
Return-Path: <java-user-return-25161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5513 invoked from network); 21 Dec 2006 19:45:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 19:45:35 -0000
Received: (qmail 83618 invoked by uid 500); 21 Dec 2006 19:45:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83591 invoked by uid 500); 21 Dec 2006 19:45:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83580 invoked by uid 99); 21 Dec 2006 19:45:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 11:45:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 11:45:26 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2520056nfc
        for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 11:45:04 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Ycu1cPBOB1HfWavy0U9IlwtYCJDrUar5RPumUgFTdyRohQ/cu9MnOvfrPjnjONlNXfEdr017+3iaGSaE2OgkYL6y6khpAnnn1POLHruqZUG1NwrMkeRdHbPRhlozy5esuK+TC9tliCToOoHk9O9hNwqSaDIISClpe0uWSbD23hQ=
Received: by 10.82.127.15 with SMTP id z15mr331171buc.1166730304275;
        Thu, 21 Dec 2006 11:45:04 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Thu, 21 Dec 2006 11:45:04 -0800 (PST)
Message-ID: <c68e39170612211145l626f09e8ybf5f50e482e570d7@mail.gmail.com>
Date: Thu, 21 Dec 2006 14:45:04 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Merge Index Filling up Disk Space
In-Reply-To: <458AD798.40902@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <458AB30F.6030908@insideview.com>
	 <458AD25D.8050001@mikemccandless.com>
	 <c68e39170612211036q1d7cf664v2024dc03d670c1b2@mail.gmail.com>
	 <458AD798.40902@mikemccandless.com>
X-Google-Sender-Auth: e4478b127c8a5069
X-Virus-Checked: Checked by ClamAV on apache.org

On 12/21/06, Michael McCandless <lucene@mikemccandless.com> wrote:
> I *think* it's really max 2X even with compound file (if no readers)?
>
> Because, in IndexWriter.mergeSegments we:
>
>    1. Create the newly merged segment in non-compound format (brings us
>       up to 2X, when it's the last merge).
>
>    2. Commit the new segments(_N) file referencing this new segment (in
>       non-compound format).
>
>    3. Remove all input segments so back to 1X.

Ah ok.. I hadn't realized that steps (2) and (3) were done.

>    4. Build the compound file (brings us up to 2X).
>
>    5. Commit the next segments(_N) file referencing the new segment in
>       compound format.
>
>    6. Delete the non-cfs segment files (back to 1X or less).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 21 20:48:56 2006
Return-Path: <java-user-return-25162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27045 invoked from network); 21 Dec 2006 20:48:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2006 20:48:55 -0000
Received: (qmail 67814 invoked by uid 500); 21 Dec 2006 20:48:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67796 invoked by uid 500); 21 Dec 2006 20:48:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67785 invoked by uid 99); 21 Dec 2006 20:48:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 12:48:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.162.228 as permitted sender)
Received: from [64.233.162.228] (HELO nz-out-0506.google.com) (64.233.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 12:48:39 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1032270nzh
        for <java-user@lucene.apache.org>; Thu, 21 Dec 2006 12:48:19 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=UtO/WesnP2pGfjy2YU9cha6t+bK1sTLI32EIWGdv6bxSek0UBWSYMONnZtSGVaZyjQE0d4kQcE+D7LL0+fdVT8vV5A8E7AV3I7pvV/fcQRE+q38gVGZXaF/KfKdO7kB4T57l5tfP0lo/wYFuPXB6os4G49f0TTATsejBenpJJqs=
Received: by 10.64.27.13 with SMTP id a13mr11563759qba.1166734098372;
        Thu, 21 Dec 2006 12:48:18 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id p4sm11887496qba.2006.12.21.12.48.16;
        Thu, 21 Dec 2006 12:48:17 -0800 (PST)
Message-ID: <458AF314.1090208@gmail.com>
Date: Thu, 21 Dec 2006 15:48:20 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: First search is slow after updating index .. subsequent searches
 very fast
References: <9BF20741D07E824A9206E073EB6750E90330632C@exch2k3.widen.com>
In-Reply-To: <9BF20741D07E824A9206E073EB6750E90330632C@exch2k3.widen.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Since you say you are sorting on a field the bulk of the time will be 
doing the sort and caching it (FieldCache). Subsequent searches use that 
cache to avoid paying the full sort cost again. If you where doing 
relevancy sorting you would not experience such a big delay.

- Mark

Bryan Dotzour wrote:
> Otis thanks for your suggestion, it seems to be working pretty well!
> I'm just curious if you (or anyone else) could describe what is actually
> happening during that initial query that ends up taking so much time.
> We have several different indexes for different types of objects and
> it's only this one index that exhibits this kind of behavior.  Is it
> something related to the size of the index, or the number of fields, or
> how fragmented the index is?
>
> I'm just trying to get a little better understanding of what is going on
> under the covers there.  I'll spend some time with the source to see if
> I can figure it out, but any tips from the experts would be much
> appreciated. =)
>
> Thanks again!
> Bryan
>
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Wednesday, December 20, 2006 4:28 PM
> To: java-user@lucene.apache.org
> Subject: Re: First search is slow after updating index .. subsequent
> searches very fast
>
> To populate FieldCache, the number of matches doesn't matter.  There is
> no need to be scrimy there - you don't really save anything by running a
> query that matches only a few docs.  Just run something that looks like
> a common query.
>
> For warming up new indices, one can also use the `dd' trick under UNIX.
>
> Otis
>
> ----- Original Message ----
> From: Bryan Dotzour <BDotzour@widen.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, December 20, 2006 5:23:40 PM
> Subject: RE: First search is slow after updating index .. subsequent
> searches very fast
>
> One question about this, Otis... When "warming up" the new searcher,
> should the query return a lot of results, or does it matter?  Can I just
> do like an ID = X query and get one document back?  Is that sufficient
> or is it better to run a query that will get lots of hits?
>
> Thanks again,
> Bryan
>
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Wednesday, December 20, 2006 3:28 PM
> To: java-user@lucene.apache.org
> Subject: Re: First search is slow after updating index .. subsequent
> searches very fast
>
> All sounds good.  Opening a new IndexReader can take a bit of time.  If
> you use sorting of any kind other than default sorting by relevance,
> this delay on the first search is also probably caused by the lazy
> FieldCache population.  The cure for that is to open a new
> IndexReader/Searcher before you close the old one, warm it up with a
> query + sort, and then switch IndexReader/Searchers, closing the old
> one.
>
> Otis
>
> ----- Original Message ----
> From: Bryan Dotzour <BDotzour@widen.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, December 20, 2006 3:59:19 PM
> Subject: First search is slow after updating index .. subsequent
> searches very fast
>
> I'm investigating some performance issues with the way we're using
> Lucene in our web app and am interested if anyone could shed some light
> on what might be going on.  Hopefully I can provide enough information,
> please let me know if there's more I can give.
>
>  
>
> We're using Lucene 2.0.0 and I'm currently working with disk-based
> indexing (although in production I'll want to be using RAM indexing).
> In our environment, we build up our Lucene index at application start up
> time and then we optimize the index.  From then on, updates and deletes
> to the index occur fairly frequently but we don't optimize until the
> middle of the night when the impact would be at its minimum.  After a
> while, what I see is that searches will be very fast (~400 ms) until I
> make a modification that will require a single document to be
> re-indexed.  Immediately after that has occurred, the next search will
> take substantially longer (sometimes up to ~25s).  After that search has
> run, the next search will be back at the ~400ms time.
>
>  
>
> Our algorithm for handling the updates is as follows:
>
> 1.       open an IndexReader on the directory
>
> 2.       delete the document using the reader
>
> 3.       close the reader
>
> 4.       open an IndexWriter
>
> 5.       add the new document using the writer
>
> 6.       close the writer
>
>  
>
> For searches:
>
> 1.    We cache off an IndexReader for the index, as well as an
> IndexSearcher, which uses that reader
> 2.    When a search is initiated we check to see if the version of the
> index has changed using getCurrentVersion()
> 3.    If it has changed, we close our IndexSearcher, close the
> IndexReader and re-open them both
>
>  
>
>  
>
> Anything sound non-standard in that workflow?  Does anyone have an idea
> of what might be happening during that slow down?
>
>  
>
> Thanks for your time,
>
> Bryan
>
>  
>
>  
>
>  
>
> (For a little more info, here is a very common stack trace snippet that
> I gather when the "slow search" is running.  It seems much of the time
> is spent in MultiReader or MultiTermDocs)
>
>  
> org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(Com
> poundFileReader.java:214)
>  
> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.jav
> a:64)
>  
> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.j
> ava:33)
>       org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:56)
>       org.apache.lucene.index.TermBuffer.read(TermBuffer.java:62)
>  
> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:117)
>  
> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:148)
>  
> org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:15
> 7)
>  
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:151)
>  
> org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:50)
>  
> org.apache.lucene.index.MultiTermDocs.termDocs(MultiReader.java:392)
>       org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:348)
>       org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
>       org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
>       org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
>  
> org.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImpl.java:171)
>  
> org.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImpl.java:153)
>  
> org.apache.lucene.search.FieldCacheImpl.getAuto(FieldCacheImpl.java:349)
>  
> org.apache.lucene.search.FieldSortedHitQueue.comparatorAuto(FieldSortedH
> itQueue.java:346)
>  
> org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSo
> rtedHitQueue.java:189)
>  
> org.apache.lucene.search.FieldSortedHitQueue.(FieldSortedHitQueue.java:5
> 8)
>  
> org.apache.lucene.search.TopFieldDocCollector.(TopFieldDocCollector.java
> :40)
>  
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:108)
>       org.apache.lucene.search.Hits.getMoreDocs(Hits.java:65)
>       org.apache.lucene.search.Hits.(Hits.java:52)
>       org.apache.lucene.search.Searcher.search(Searcher.java:53)
>
>  
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 02:00:18 2006
Return-Path: <java-user-return-25163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2750 invoked from network); 22 Dec 2006 02:00:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 02:00:16 -0000
Received: (qmail 7661 invoked by uid 500); 22 Dec 2006 01:59:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7560 invoked by uid 500); 22 Dec 2006 01:59:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7523 invoked by uid 99); 22 Dec 2006 01:59:50 -0000
X-ASF-Spam-Status: No, hits=4.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FORGED_HOTMAIL_RCVD,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of aflem26@hotmail.com designates 65.54.246.143 as permitted sender)
Received: from [65.54.246.143] (HELO bay0-omc2-s7.bay0.hotmail.com) (65.54.246.143)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 17:59:46 -0800
Received: from BAY109-W6 ([64.4.19.106]) by bay0-omc2-s7.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Thu, 21 Dec 2006 17:58:33 -0800
X-Originating-IP: [67.166.126.34]
X-Originating-Email: [aflem26@hotmail.com]
Message-ID: <BAY109-W6895B6CC57CE9EAB0DC4EA8CD0@phx.gbl>
From: Adam Fleming <aflem26@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Rebuilding index on a regular basis
Date: Thu, 21 Dec 2006 17:58:33 -0800
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 22 Dec 2006 01:58:33.0325 (UTC) FILETIME=[AF6DC1D0:01C7256C]
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Erick,=20

Thanks for the suggestion of using 2 indexes.  The number of documents is s=
mall - about 2000, and it builds quickly - about 3s from a database.  I am =
currently trying to rebuild every 2 minutes, but could probably reduce that=
 to 5.  That could be as long as 10 minutes, but that's about the limit.

Thanks,=20

Adam=20



----------------------------------------
> Date: Wed, 20 Dec 2006 10:58:43 -0500
> From: erickerickson@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: MultiFieldQueryParser doesn't properly filter out documents =
when the query string specifies to exclude certain terms
>=20
> My first question is how many documents would you be deleting on a pass f=
or
> option 2? If it's 10 documents out of 10,000, I'd consider just deleting
> them and re-adding (see IndexModifier).
>=20
> Personally, if posible, I prefer your first option, building a completely
> new index and switching between them. This is especially useful if someth=
ing
> catastrophic happens to the index as you build it and it winds up being
> unusable (power failures *do* happen). You can keep using your old index =
and
> be happy.
>=20
> Another question is how quickly the index builds and how soon do your use=
rs
> require that they get up-to-date data?
>=20
> And remember that no matter what, you must re-open your searcher to see t=
he
> updates.
>=20
> I'd be really reluctant to remove all the items and re-build the index fo=
r
> several reasons...
> 1> You wouldn't get the new data being added until you closed/reopened yo=
ur
> searcher.
> 2> The documents you deleted wouldn't be "gone" until you closed/reopened
> your searcher.
> 3> In the interim, your users wouldn't have access to much of anything...=
.
>=20
> Best
> Erick
>=20
> On 12/20/06, Adam Fleming <aflem26@hotmail.com> wrote:
> >
> >
> > Hello Gentlemen (+Ladies?),
> >
> > I'm integrating Lucene into a Spring web-app, and have found a plethora=
 of
> > great web + print resources to make the integration quick and seamless.=
  One
> > thing that I have been hard-pressed to find is a good solution for
> > rebuilding the index on a regular basis.
> >
> > I'm curious if a you know of a best-practice (or have found something
> > personally that works) for rebuilding a Lucene Index w/o service
> > interruptions.  The assumptions are a spring IOC container w/ an
> > IndexFactory bean.  I have the project configured to work with both
> > FSDirectory and RamDirectory implementations.   If you don't know Sprin=
g,
> > you are free to ignore the details - I'll adapt your comments to my cod=
e :)
> >
> > So far I tried rebuilding the index on a regular schedule, but foolishl=
y
> > only added duplicate documents to an existing index.
> >
> > Things I have considered are
> > - Using two index directories, and rebuilding one while the other is
> >    in use + switching when the rebuilt index is ready.  This would
> >    cause the app to alternate between two indexes.
> > - Using a single index, and iterating over the index entirely,
> >    deleting documents 1 by 1 and re-adding them with fresh data
> > - Using a single index, and deleting ALL the documents at once
> >    and then adding them all back as quickly as possible.
> >
> >
> > All of my proposed ideas seem fly in the face of Lucene's sipmlicity, a=
nd
> > I will be so thankful to be pointed in the right direction.
> >
> >
> > Happy Holidays and  a big Thank You to the active list users,
> >
> >
> > Adam Fleming
> >
> > _________________________________________________________________
> > Try amazing new 3D maps
> > http://maps.live.com/?wip=3D51
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >

_________________________________________________________________
Try amazing new 3D maps
http://maps.live.com/?wip=3D51=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 02:58:15 2006
Return-Path: <java-user-return-25164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20748 invoked from network); 22 Dec 2006 02:58:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 02:58:15 -0000
Received: (qmail 60810 invoked by uid 500); 22 Dec 2006 02:58:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60779 invoked by uid 500); 22 Dec 2006 02:58:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60768 invoked by uid 99); 22 Dec 2006 02:58:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 18:58:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 18:58:05 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kBM2vbnQ006681
	for <java-user@lucene.apache.org>; Fri, 22 Dec 2006 04:57:38 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id mcm4lmko; 22 Dec 2006 04:57:00 +0200
Message-ID: <458B4991.8050108@teamware.com>
Date: Fri, 22 Dec 2006 13:57:21 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: IOException - The handle is invalid
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 22 Dec 2006 04:57:38 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm running load tests with Lucene 2.0, SUN's JDK 6 on Windows XP2, dual core 
CPU.  I have 8 worker threads adding a few hundred K documents, split between 
two Lucene indexes, I've started getting

java.io.IOException: The handle is invalid in places like

java.io.RandomAccessFile.writeBytes(Native Method)
java.io.RandomAccessFile.write(RandomAccessFile.java:466)
org.apache.lucene.store.FSIndexOutput.flushBuffer(FSDirectory.java:503)
org.apache.lucene.store.BufferedIndexOutput.flush(BufferedIndexOutput.java:84)
org.apache.lucene.store.BufferedIndexOutput.close(BufferedIndexOutput.java:98)
org.apache.lucene.store.FSIndexOutput.close(FSDirectory.java:506)
org.apache.lucene.index.SegmentMerger.mergeNorms(SegmentMerger.java:415)
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:90)
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:709)
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:686)
org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:674)
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:479)
com.teamware.office.lucene.index.TWOIndexWriter.addDocument(TWOIndexWriter.java:170)

java.io.RandomAccessFile.close0(Native Method)
java.io.RandomAccessFile.close(RandomAccessFile.java:543)
org.apache.lucene.store.FSIndexInput.close(FSDirectory.java:465)
org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java:231)
org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java:168)
org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java:145)
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:735)
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:686)
org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:674)
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:479)
com.teamware.office.lucene.index.TWOIndexWriter.addDocument(TWOIndexWriter.java:170)

I saw Mike McCandless JIRA issue

http://issues.apache.org/jira/browse/LUCENE-669

Is the patch referenced there useful for a 2.0 system.  I would like to use the 
lockless commit stuff, but am waiting until I get the core system working well.

I am also getting IOException in some of my classes, but from the JIRA comments, 
it seems that Lucene may be the culprit.

No urgency, I won't get a chance to test it until the New Year, but it's easy to 
reproduce, although intermittent.

Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 05:13:08 2006
Return-Path: <java-user-return-25165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44422 invoked from network); 22 Dec 2006 05:13:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 05:13:06 -0000
Received: (qmail 53368 invoked by uid 500); 22 Dec 2006 05:13:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53343 invoked by uid 500); 22 Dec 2006 05:13:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53328 invoked by uid 99); 22 Dec 2006 05:13:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 21:13:05 -0800
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FORGED_HOTMAIL_RCVD,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of aflem26@hotmail.com designates 65.54.246.157 as permitted sender)
Received: from [65.54.246.157] (HELO bay0-omc2-s21.bay0.hotmail.com) (65.54.246.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 21:12:54 -0800
Received: from BAY109-W7 ([64.4.19.107]) by bay0-omc2-s21.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Thu, 21 Dec 2006 21:12:33 -0800
X-Originating-IP: [67.166.126.34]
X-Originating-Email: [aflem26@hotmail.com]
Message-ID: <BAY109-W74607C9F2647A2CEF85C6A8CD0@phx.gbl>
From: Adam Fleming <aflem26@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Rebuilding index on a regular basis
Date: Thu, 21 Dec 2006 21:12:33 -0800
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 22 Dec 2006 05:12:33.0859 (UTC) FILETIME=[C9BA4930:01C72587]
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Patrik

Thanks for the thoughtful responses.  I am not a pro with Searchers yet, bu=
t it seems like closing + opening searchers would still result in a small p=
eriod of unserviceability.  I would also like to stick to the Directory API=
 so that I can keep the option to use FS or RAM based indexes. =20

I think a slight extension to this idea may really do the trick.  It's as f=
ollows:=20

1. Create Index A + Reader A.
2. set CurrentReader =3D A
3. After time interval T, build Index B + Reader B.=20
4. set CurrentReader =3D B
5. After time interval T, rebuild Index A + Reopen A
6. set CurrentReader =3D A

etc.=20

The advantage here being that the '=3D' operation is atomic and indivisible=
 - the currentReader variable always points to a valid and up-todate index.=
  Although this system doesn't GUARANTEE there won't be a service interrupt=
ion, in practice if T is long enough there shouldn't be a problem.=20


Thoughts?  I'm curious if this solution reflects a misunderstanding about t=
he way Lucene works.=20


Thanks,=20

Adam=20



----------------------------------------
> Date: Wed, 20 Dec 2006 22:11:33 -0500
> From: patrek@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: Rebuilding index on a regular basis
>=20
> Hi,
>=20
> How about this:
>=20
> 1) You copy the files that make your index in a new folder
> 2) You update your index in that new folder (forcing if necessary, old lo=
cks
> will not be valid)
> 3) When update is completed, close your readers, and open them on the new
> index.
> 4) Copy the fresh index files to the previous location for next round, wh=
ere
> you won't need the initial copy to a fresh folder.
>=20
> That way, you won't have to reindex all your documents (assuming only a
> small subset needs updating) and will be able to switch to a more up to d=
ate
> index more easily and often.
>=20
> Patrick
>=20
>=20
> On 12/20/06, Scott Sellman <ssellman@valueclick.com> wrote:
> >
> > Note: I have changed the title of this thread to match its content
> >
> > I am currently facing a similar issue.  I am dealing with a large index
> > that is constantly used and needs to be updated on a daily basis.  For
> > fear of corruption I would rather rebuild the index each time,
> > performing tests against it before using it.  However the problem I am
> > having is switching in the old index without causing service
> > interruption.  As long as queries are being made against the index I am
> > running into locking issues with the index files, preventing me from
> > putting the new index in place. Any suggestions?
> >
> > Thanks,
> > Scott
> >

_________________________________________________________________
Get the Live.com Holiday Page for recipes, gift-giving ideas, and more.
www.live.com/?addtemplate=3Dholiday=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 06:03:43 2006
Return-Path: <java-user-return-25166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55847 invoked from network); 22 Dec 2006 06:03:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 06:03:42 -0000
Received: (qmail 84217 invoked by uid 500); 22 Dec 2006 06:03:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84186 invoked by uid 500); 22 Dec 2006 06:03:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84175 invoked by uid 99); 22 Dec 2006 06:03:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 22:03:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Dec 2006 22:03:31 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id DCAE55B771; Thu, 21 Dec 2006 22:03:10 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D4C407F403;
	Thu, 21 Dec 2006 22:03:10 -0800 (PST)
Date: Thu, 21 Dec 2006 22:03:10 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, mbraun@uni-hd.de
Subject: Re: spnafirstquery and multiple field instances
In-Reply-To: <458AB5FA.7060903@uni-hd.de>
Message-ID: <Pine.LNX.4.58.0612212155550.20377@hal.rescomp.berkeley.edu>
References: <458AB5FA.7060903@uni-hd.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: 			for (String key : title.getTitel().split("\\n")  ) {
: 				titleDocument.add(new Field("TI", key, Field.Store.NO,
: 					Field.Index.TOKENIZED));
: 			}

that adds each new title one after the other with your analyzers
"getPositionIncrimentGap" in between them.

: but that didn't work. The query finds only matches for the first token
: in that field of a document.

you can insert an arbitrary marker token in between each title and search
for it with a spannearquery ... serach the archive for "sentence boundary"
or "page boundary"




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 09:54:00 2006
Return-Path: <java-user-return-25167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19240 invoked from network); 22 Dec 2006 09:54:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 09:54:00 -0000
Received: (qmail 50592 invoked by uid 500); 22 Dec 2006 09:54:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50556 invoked by uid 500); 22 Dec 2006 09:54:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50545 invoked by uid 99); 22 Dec 2006 09:54:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 01:54:01 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rp@isis.be designates 213.177.82.52 as permitted sender)
Received: from [213.177.82.52] (HELO isis.be) (213.177.82.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 01:53:51 -0800
Message-id: <fc.000f7461001f3cd2000f7461001f3cd2.1f3cd5@isis.be>
Date: Fri, 22 Dec 2006 10:54:06 +0100
Subject: French stemmer problem
X-FC-SERVER-TZ: 181272836
To: java-user@lucene.apache.org
From: "Renaud Paquay" <rp@isis.be>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="--=_--001f3cd5.001f3cd2.c1b15bbe"
X-Virus-Checked: Checked by ClamAV on apache.org

----=_--001f3cd5.001f3cd2.c1b15bbe
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit

Hello,

Does anyone know about a modified version of the French Stemmer ?
This one has too many bad results.
For example, if I use the word : "ours" (bear)
The stemmer stemm it into "our".....which doesn't exist in French.
If I have some words like "L'insepecteur" the index process using the
stemmer doesn't work correctly

So the problem is that the results is not accurate

Someone could help ?

Thanks,

Renaud Paquay
Developer and Network Manager
ISIS SA
Rue des Deportes 120
B-4800 Verviers
Tel: +32-(0)87.23.06.90
Fax: +32-(0)87.23.06.54
email : rp@isis.be
url : www.isis.be / www.4dbenelux.be



----=_--001f3cd5.001f3cd2.c1b15bbe--

From java-user-return-25168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 10:09:40 2006
Return-Path: <java-user-return-25168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22397 invoked from network); 22 Dec 2006 10:09:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 10:09:38 -0000
Received: (qmail 67559 invoked by uid 500); 22 Dec 2006 10:09:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67450 invoked by uid 500); 22 Dec 2006 10:09:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67439 invoked by uid 99); 22 Dec 2006 10:09:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 02:09:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of samir.abdou@unine.ch designates 130.125.1.52 as permitted sender)
Received: from [130.125.1.52] (HELO columba.unine.ch) (130.125.1.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 02:08:55 -0800
Received: from mail01.unine.ch [130.125.5.51]
	by columba.unine.ch
	with XWall v3.38h ;
	Fri, 22 Dec 2006 11:08:32 +0100
Received: from webmail.UNINE.CH ([130.125.1.20]) by mail01.UNINE.CH with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 22 Dec 2006 11:08:32 +0100
Received: from philosophe ([130.125.11.47]) by webmail.UNINE.CH over TLS secured channel with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 22 Dec 2006 11:08:32 +0100
Reply-To: <samir.abdou@unine.ch>
From: "Samir Abdou" <Samir.Abdou@unine.ch>
To: <java-user@lucene.apache.org>
Subject: RE: French stemmer problem
Date: Fri, 22 Dec 2006 11:08:32 +0100
Organization: =?iso-8859-1?Q?Universit=E9_de_Neuch=E2tel?=
Message-ID: <000301c725b1$2310c850$2f0b7d82@philosophe>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <fc.000f7461001f3cd2000f7461001f3cd2.1f3cd5@isis.be>
Thread-Index: Acclrx0JJN4fzbBhS1ehgL/b12xl2gAATfhA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-OriginalArrivalTime: 22 Dec 2006 10:08:32.0271 (UTC) FILETIME=[2290E9F0:01C725B1]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Take a look to http://www.unine.ch/info/clef where you'll find valuable
resources for many languages including French.=20

Samir  =20


-----Message d'origine-----
De=A0: Renaud Paquay [mailto:rp@isis.be]=20
Envoy=E9=A0: vendredi, 22. d=E9cembre 2006 10:54
=C0=A0: java-user@lucene.apache.org
Objet=A0: French stemmer problem

Hello,

Does anyone know about a modified version of the French Stemmer ?
This one has too many bad results.
For example, if I use the word : "ours" (bear)
The stemmer stemm it into "our".....which doesn't exist in French.
If I have some words like "L'insepecteur" the index process using the
stemmer doesn't work correctly

So the problem is that the results is not accurate

Someone could help ?

Thanks,

Renaud Paquay
Developer and Network Manager
ISIS SA
Rue des Deportes 120
B-4800 Verviers
Tel: +32-(0)87.23.06.90
Fax: +32-(0)87.23.06.54
email : rp@isis.be
url : www.isis.be / www.4dbenelux.be




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 10:58:37 2006
Return-Path: <java-user-return-25169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32826 invoked from network); 22 Dec 2006 10:58:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 10:58:36 -0000
Received: (qmail 25671 invoked by uid 500); 22 Dec 2006 10:58:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25636 invoked by uid 500); 22 Dec 2006 10:58:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25625 invoked by uid 99); 22 Dec 2006 10:58:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 02:58:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.162.227 as permitted sender)
Received: from [64.233.162.227] (HELO nz-out-0506.google.com) (64.233.162.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 02:58:27 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1127286nzh
        for <java-user@lucene.apache.org>; Fri, 22 Dec 2006 02:58:06 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=oos0r85uEk5Jia6hoXjqUV5ccc/SXeILmPgVGCSaaV42Q+Y7m2s0aBcQHd2+75nZz09pKVMNQBWI7WdOp68JQw4YkTNuN8z9PM/fQ63wKtbklNal6f0F+iLj0Z/32NY8057ZfE/kN8bHErfeX+uj1mFzaLyOSlalcli9MpZLnr0=
Received: by 10.35.66.1 with SMTP id t1mr16943687pyk.1166785086382;
        Fri, 22 Dec 2006 02:58:06 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id j7sm5877187nzd.2006.12.22.02.58.05;
        Fri, 22 Dec 2006 02:58:05 -0800 (PST)
Message-ID: <458BBA43.9000801@gmail.com>
Date: Fri, 22 Dec 2006 05:58:11 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: French stemmer problem
References: <fc.000f7461001f3cd2000f7461001f3cd2.1f3cd5@isis.be>
In-Reply-To: <fc.000f7461001f3cd2000f7461001f3cd2.1f3cd5@isis.be>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Non of the stemmers always stem to a valid word. It is not important as 
you should be stemming the query as well. The only thing that is 
important is that each word always stems to the same base. Many English 
words do not stem to real English words with the English stemmer either.

Renaud Paquay wrote:
> Hello,
>
> Does anyone know about a modified version of the French Stemmer ?
> This one has too many bad results.
> For example, if I use the word : "ours" (bear)
> The stemmer stemm it into "our".....which doesn't exist in French.
> If I have some words like "L'insepecteur" the index process using the
> stemmer doesn't work correctly
>
> So the problem is that the results is not accurate
>
> Someone could help ?
>
> Thanks,
>
> Renaud Paquay
> Developer and Network Manager
> ISIS SA
> Rue des Deportes 120
> B-4800 Verviers
> Tel: +32-(0)87.23.06.90
> Fax: +32-(0)87.23.06.54
> email : rp@isis.be
> url : www.isis.be / www.4dbenelux.be
>
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 14:18:54 2006
Return-Path: <java-user-return-25170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71402 invoked from network); 22 Dec 2006 14:18:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 14:18:53 -0000
Received: (qmail 42591 invoked by uid 500); 22 Dec 2006 14:18:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42559 invoked by uid 500); 22 Dec 2006 14:18:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42548 invoked by uid 99); 22 Dec 2006 14:18:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 06:18:46 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of patrek@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 06:18:11 -0800
Received: by ug-out-1314.google.com with SMTP id k40so3055473ugc
        for <java-user@lucene.apache.org>; Fri, 22 Dec 2006 06:17:19 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oI/bgIkamlb2K38PBQJ91suLLVp2c8HicMBjj1PppuT1bmDlkozUy6UeLVmyFbdlLVU2tNi1duKtmXUmNvWxQplqLerBDgMNWNRqhF3OvvV+eSyXQFhWzxtfpJv65VeJJuxAvXR4+UkeZPf22p9eodW7k2wJ/O8NAmQfvihbNrU=
Received: by 10.78.200.3 with SMTP id x3mr1154001huf.1166797039590;
        Fri, 22 Dec 2006 06:17:19 -0800 (PST)
Received: by 10.78.66.10 with HTTP; Fri, 22 Dec 2006 06:17:19 -0800 (PST)
Message-ID: <48b038c60612220617o2655ec7k894ad83d81911ec@mail.gmail.com>
Date: Fri, 22 Dec 2006 09:17:19 -0500
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: French stemmer problem
In-Reply-To: <458BBA43.9000801@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30087_32426853.1166797039413"
References: <fc.000f7461001f3cd2000f7461001f3cd2.1f3cd5@isis.be>
	 <458BBA43.9000801@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30087_32426853.1166797039413
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Renaud,

Maybe you should take a look at the Morphalou project (
http://actarus.atilf.fr/lexiques/morphalou/) it is a database of lemma and
forms in French.

You could extract the data and create a synonym index or something.

Don't hesitate to contact me off list (and in French if needed) for more
info.

Patrick

On 12/22/06, Mark Miller <markrmiller@gmail.com> wrote:
>
> Non of the stemmers always stem to a valid word. It is not important as
> you should be stemming the query as well. The only thing that is
> important is that each word always stems to the same base. Many English
> words do not stem to real English words with the English stemmer either.
>
> Renaud Paquay wrote:
> > Hello,
> >
> > Does anyone know about a modified version of the French Stemmer ?
> > This one has too many bad results.
> > For example, if I use the word : "ours" (bear)
> > The stemmer stemm it into "our".....which doesn't exist in French.
> > If I have some words like "L'insepecteur" the index process using the
> > stemmer doesn't work correctly
> >
> > So the problem is that the results is not accurate
> >
> > Someone could help ?
> >
> > Thanks,
> >
> > Renaud Paquay
> > Developer and Network Manager
> > ISIS SA
> > Rue des Deportes 120
> > B-4800 Verviers
> > Tel: +32-(0)87.23.06.90
> > Fax: +32-(0)87.23.06.54
> > email : rp@isis.be
> > url : www.isis.be / www.4dbenelux.be
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_30087_32426853.1166797039413--

From java-user-return-25171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 14:49:49 2006
Return-Path: <java-user-return-25171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83863 invoked from network); 22 Dec 2006 14:49:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 14:49:49 -0000
Received: (qmail 77401 invoked by uid 500); 22 Dec 2006 14:49:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76374 invoked by uid 500); 22 Dec 2006 14:49:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76363 invoked by uid 99); 22 Dec 2006 14:49:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 06:49:28 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 06:48:32 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2771076nfc
        for <java-user@lucene.apache.org>; Fri, 22 Dec 2006 06:48:06 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eUNGNYrpXtvlS4A0A+O72V5Z4nXk6XJlaBbVidueRqvWS8mzRySWVvseur4arFAtLPRQpDu6yaIWyOHef52PLUf6buang4RlnseIY6wNM/2w4PdO9XJ0xt+cVUFGOtciNdaP9TVNZmSkzhb4OP/k4sjsd4LFKX13jQTQDFm0Dqk=
Received: by 10.82.165.1 with SMTP id n1mr2134228bue.1166798886239;
        Fri, 22 Dec 2006 06:48:06 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Fri, 22 Dec 2006 06:48:06 -0800 (PST)
Message-ID: <359a92830612220648g7fc41228q9b60f2bd79d78f34@mail.gmail.com>
Date: Fri, 22 Dec 2006 09:48:06 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Rebuilding index on a regular basis
In-Reply-To: <BAY109-W74607C9F2647A2CEF85C6A8CD0@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64169_12559260.1166798886148"
References: <BAY109-W74607C9F2647A2CEF85C6A8CD0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64169_12559260.1166798886148
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Adam:

I think you're worrying about the wrong thing. There is no "period of
unserviceability" to worry about in closing/reopening a searcher. If, by
saying "searcher", you mean the Lucene IndexSearcher/Reader. If you're
talking about shutting down your service, that's another story.

What you *do* have to think about is whether your service is single or
multi-threaded. If it's single-threaded, somewhere in your process, you have
something like

get request
service request
return response

So as part of, say, the service request part, you close/open a searcher. No
service unavailability here, perhaps a slight delay if you haven't warmed up
your searcher.

If you're multi-threaded, you probably have to make sure that all your
threads are waiting around when you close/open your searcher, since you
*should* be using a single (static) searcher across all your threads. Again,
no unserviceability, but perhaps a small delay depending upon how long it
takes all the threads to finish servicing their requests.....

All that said, it's less important than the fact that when you do reopen
your searcher, you'll get a slow response for that request only as the
searcher builds up its caches. You can avoid this by having your searcher
execute a query or two before you switch it in.

But I wouldn't worry about this until you demonstrate to your satisfaction
that there's actually a problem. Go with "the simplest thing that could
possibly work", analyze any problems, and fix it up. As you say, this index
really isn't very big. Not if it builds in 3 seconds. I rather doubt that
you have to do anything at all fancy to get satisfactory performance. But
what do I know <G>?

Ditto for worrying about FS or RAM based searcher. Don't bother trying the
RAM solution (as it's going to be more complex) until you know an FS based
index won't work. Especially since the FS based index largely *is* a RAM
based index when you consider caching. NOTE: when you're measuring things,
ignore the time it takes to service the *first* request since that'll be
misleading.

Anyway, hope all this helps
Erick

On 12/22/06, Adam Fleming <aflem26@hotmail.com> wrote:
>
>
> Hi Patrik
>
> Thanks for the thoughtful responses.  I am not a pro with Searchers yet,
> but it seems like closing + opening searchers would still result in a small
> period of unserviceability.  I would also like to stick to the Directory API
> so that I can keep the option to use FS or RAM based indexes.
>
> I think a slight extension to this idea may really do the trick.  It's as
> follows:
>
> 1. Create Index A + Reader A.
> 2. set CurrentReader = A
> 3. After time interval T, build Index B + Reader B.
> 4. set CurrentReader = B
> 5. After time interval T, rebuild Index A + Reopen A
> 6. set CurrentReader = A
>
> etc.
>
> The advantage here being that the '=' operation is atomic and indivisible
> - the currentReader variable always points to a valid and up-todate
> index.  Although this system doesn't GUARANTEE there won't be a service
> interruption, in practice if T is long enough there shouldn't be a problem.
>
>
> Thoughts?  I'm curious if this solution reflects a misunderstanding about
> the way Lucene works.
>
>
> Thanks,
>
> Adam
>
>
>
> ----------------------------------------
> > Date: Wed, 20 Dec 2006 22:11:33 -0500
> > From: patrek@gmail.com
> > To: java-user@lucene.apache.org
> > Subject: Re: Rebuilding index on a regular basis
> >
> > Hi,
> >
> > How about this:
> >
> > 1) You copy the files that make your index in a new folder
> > 2) You update your index in that new folder (forcing if necessary, old
> locks
> > will not be valid)
> > 3) When update is completed, close your readers, and open them on the
> new
> > index.
> > 4) Copy the fresh index files to the previous location for next round,
> where
> > you won't need the initial copy to a fresh folder.
> >
> > That way, you won't have to reindex all your documents (assuming only a
> > small subset needs updating) and will be able to switch to a more up to
> date
> > index more easily and often.
> >
> > Patrick
> >
> >
> > On 12/20/06, Scott Sellman <ssellman@valueclick.com> wrote:
> > >
> > > Note: I have changed the title of this thread to match its content
> > >
> > > I am currently facing a similar issue.  I am dealing with a large
> index
> > > that is constantly used and needs to be updated on a daily basis.  For
> > > fear of corruption I would rather rebuild the index each time,
> > > performing tests against it before using it.  However the problem I am
> > > having is switching in the old index without causing service
> > > interruption.  As long as queries are being made against the index I
> am
> > > running into locking issues with the index files, preventing me from
> > > putting the new index in place. Any suggestions?
> > >
> > > Thanks,
> > > Scott
> > >
>
> _________________________________________________________________
> Get the Live.com Holiday Page for recipes, gift-giving ideas, and more.
> www.live.com/?addtemplate=holiday
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_64169_12559260.1166798886148--

From java-user-return-25172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 15:30:38 2006
Return-Path: <java-user-return-25172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95900 invoked from network); 22 Dec 2006 15:30:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 15:30:37 -0000
Received: (qmail 20913 invoked by uid 500); 22 Dec 2006 15:30:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19911 invoked by uid 500); 22 Dec 2006 15:30:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19897 invoked by uid 99); 22 Dec 2006 15:30:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 07:30:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [217.160.230.41] (HELO mout.perfora.net) (217.160.230.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 07:30:28 -0800
Received: from [125.22.112.131] (helo=[192.168.0.2])
	by mrelay.perfora.net (node=mrelayus1) with ESMTP (Nemesis),
	id 0MKp2t-1GxmLU08X8-0000GH; Fri, 22 Dec 2006 10:30:06 -0500
Message-ID: <458BFA5C.1050904@insideview.com>
Date: Fri, 22 Dec 2006 21:01:40 +0530
From: Harini Raghavan <harini.raghavan@insideview.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Merge Index Filling up Disk Space
References: <458AB30F.6030908@insideview.com> <458AD25D.8050001@mikemccandless.com>
In-Reply-To: <458AD25D.8050001@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: perfora.net abuse@perfora.net login:9759476ad67fa08aca5d9352c82c69ea
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike,

Thank you for the response. I don't have readers open on the index, but 
while the optimize/merge was running I was searching on the index. Would 
that make any difference?
Also after the optimizing the index I had some .tmp files which were > 
10G and did not get merged. Could that also be related to having 
searchers open while running optimize?

-Harini

Michael McCandless wrote:

> Harini Raghavan wrote:
>
>> I am using lucene 1.9.1 for search functionality in my j2ee 
>> application using JBoss as app server. The lucene index directory 
>> size is almost 20G right now. There is a Quartz job that is adding 
>> data to the index evey min and around 20000 documents get added to 
>> the index every day.When the documents are added and the segments are 
>> merged, the index size increases and sometimes grows to more than 
>> double its original size. This results in filling up the disk space. 
>> We have allotted a f/s size of 50G and even that is not sufficient at 
>> times. Is there an optimum vales for the f/s size to be allotted in 
>> such scenario.
>> Any suggestions would be appreciated.
>
>
> I believe optimize should use at most 2X the starting index size,
> transiently, if there are no readers open against the index.  And then
> when optimize is done the size should be around the starting size, or
> less.
>
> If there are open readers against the index when the optimize occurs,
> then, the segments that were merged cannot actually be deleted until
> those readers close.  Even on Unix, where it will look like the
> segments were deleted, they are still consuming disk space because
> open file handles keep them allocated ("delete on last close").
>
> This means if you have open readers you should see at most 3X the
> starting index size.  Worse, if some (but not all) readers are
> re-opening while the merge is underway it's possible to peak at even
> more than 3X the starting size.
>
> Do you have readers running against your index?
>
> I will call this out in the javadocs for optimize, addDocument,
> addIndexes...
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
Harini Raghavan
Software Engineer
Office : +91-40-23556255
harini.raghavan@insideview.com
we think, you sell
www.InsideView.com
InsideView 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 15:52:10 2006
Return-Path: <java-user-return-25173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99408 invoked from network); 22 Dec 2006 15:52:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 15:52:09 -0000
Received: (qmail 34755 invoked by uid 500); 22 Dec 2006 15:52:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34729 invoked by uid 500); 22 Dec 2006 15:52:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34718 invoked by uid 99); 22 Dec 2006 15:52:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 07:52:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.82.244.99] (HELO mail74.messagelabs.com) (216.82.244.99)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Dec 2006 07:51:59 -0800
X-VirusChecked: Checked
X-Env-Sender: BDotzour@widen.com
X-Msg-Ref: server-13.tower-74.messagelabs.com!1166802695!72280474!1
X-StarScan-Version: 5.5.10.7; banners=-,-,-
X-Originating-IP: [69.8.156.123]
Received: (qmail 24730 invoked from network); 22 Dec 2006 15:51:35 -0000
Received: from webmail.widen.com (HELO exch2k3.widen.com) (69.8.156.123)
  by server-13.tower-74.messagelabs.com with SMTP; 22 Dec 2006 15:51:35 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: First search is slow after updating index .. subsequent searches very fast
Date: Fri, 22 Dec 2006 09:51:35 -0600
Message-ID: <9BF20741D07E824A9206E073EB6750E90330638B@exch2k3.widen.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: First search is slow after updating index .. subsequent searches very fast
Thread-Index: AcclQWtyUkNpQuwyQnOv4fN0HGhNWQAnc/fw
From: "Bryan Dotzour" <BDotzour@widen.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for that tidbit Mark.  I was just looking through the LIA book
and stumbled across this sentence under the "5.1.9 Performance effect of
sorting" section.  It says: "[When sorting by a String type] each unique
term is also cached for each document. Only the actual fields used for
sorting are cached in this manner."

In the case that I originally described, our default sorting mechanism
is an alphabetical sort on the title of each object returned in the
search.  So I take this excerpt from the book to mean that the
FieldCache has to read each title value from each document in order to
perform the sort.  That pretty much sounds like exactly what you're
saying Mark.

I guess the only question left in my mind is, does the FieldCache have
to read every value for every document in the entire index to perform
the sort, or just the values in the documents returned in the search?
My guess would be the latter although this one index seems much slower
than all of the others and the only difference is the sheer number of
items in the index.

-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com]=20
Sent: Thursday, December 21, 2006 2:48 PM
To: java-user@lucene.apache.org
Subject: Re: First search is slow after updating index .. subsequent
searches very fast

Since you say you are sorting on a field the bulk of the time will be=20
doing the sort and caching it (FieldCache). Subsequent searches use that

cache to avoid paying the full sort cost again. If you where doing=20
relevancy sorting you would not experience such a big delay.

- Mark

Bryan Dotzour wrote:
> Otis thanks for your suggestion, it seems to be working pretty well!
> I'm just curious if you (or anyone else) could describe what is
actually
> happening during that initial query that ends up taking so much time.
> We have several different indexes for different types of objects and
> it's only this one index that exhibits this kind of behavior.  Is it
> something related to the size of the index, or the number of fields,
or
> how fragmented the index is?
>
> I'm just trying to get a little better understanding of what is going
on
> under the covers there.  I'll spend some time with the source to see
if
> I can figure it out, but any tips from the experts would be much
> appreciated. =3D)
>
> Thanks again!
> Bryan
>
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
> Sent: Wednesday, December 20, 2006 4:28 PM
> To: java-user@lucene.apache.org
> Subject: Re: First search is slow after updating index .. subsequent
> searches very fast
>
> To populate FieldCache, the number of matches doesn't matter.  There
is
> no need to be scrimy there - you don't really save anything by running
a
> query that matches only a few docs.  Just run something that looks
like
> a common query.
>
> For warming up new indices, one can also use the `dd' trick under
UNIX.
>
> Otis
>
> ----- Original Message ----
> From: Bryan Dotzour <BDotzour@widen.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, December 20, 2006 5:23:40 PM
> Subject: RE: First search is slow after updating index .. subsequent
> searches very fast
>
> One question about this, Otis... When "warming up" the new searcher,
> should the query return a lot of results, or does it matter?  Can I
just
> do like an ID =3D X query and get one document back?  Is that =
sufficient
> or is it better to run a query that will get lots of hits?
>
> Thanks again,
> Bryan
>
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
> Sent: Wednesday, December 20, 2006 3:28 PM
> To: java-user@lucene.apache.org
> Subject: Re: First search is slow after updating index .. subsequent
> searches very fast
>
> All sounds good.  Opening a new IndexReader can take a bit of time.
If
> you use sorting of any kind other than default sorting by relevance,
> this delay on the first search is also probably caused by the lazy
> FieldCache population.  The cure for that is to open a new
> IndexReader/Searcher before you close the old one, warm it up with a
> query + sort, and then switch IndexReader/Searchers, closing the old
> one.
>
> Otis
>
> ----- Original Message ----
> From: Bryan Dotzour <BDotzour@widen.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, December 20, 2006 3:59:19 PM
> Subject: First search is slow after updating index .. subsequent
> searches very fast
>
> I'm investigating some performance issues with the way we're using
> Lucene in our web app and am interested if anyone could shed some
light
> on what might be going on.  Hopefully I can provide enough
information,
> please let me know if there's more I can give.
>
> =20
>
> We're using Lucene 2.0.0 and I'm currently working with disk-based
> indexing (although in production I'll want to be using RAM indexing).
> In our environment, we build up our Lucene index at application start
up
> time and then we optimize the index.  From then on, updates and
deletes
> to the index occur fairly frequently but we don't optimize until the
> middle of the night when the impact would be at its minimum.  After a
> while, what I see is that searches will be very fast (~400 ms) until I
> make a modification that will require a single document to be
> re-indexed.  Immediately after that has occurred, the next search will
> take substantially longer (sometimes up to ~25s).  After that search
has
> run, the next search will be back at the ~400ms time.
>
> =20
>
> Our algorithm for handling the updates is as follows:
>
> 1.       open an IndexReader on the directory
>
> 2.       delete the document using the reader
>
> 3.       close the reader
>
> 4.       open an IndexWriter
>
> 5.       add the new document using the writer
>
> 6.       close the writer
>
> =20
>
> For searches:
>
> 1.    We cache off an IndexReader for the index, as well as an
> IndexSearcher, which uses that reader
> 2.    When a search is initiated we check to see if the version of the
> index has changed using getCurrentVersion()
> 3.    If it has changed, we close our IndexSearcher, close the
> IndexReader and re-open them both
>
> =20
>
> =20
>
> Anything sound non-standard in that workflow?  Does anyone have an
idea
> of what might be happening during that slow down?
>
> =20
>
> Thanks for your time,
>
> Bryan
>
> =20
>
> =20
>
> =20
>
> (For a little more info, here is a very common stack trace snippet
that
> I gather when the "slow search" is running.  It seems much of the time
> is spent in MultiReader or MultiTermDocs)
>
> =20
>
org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(Com
> poundFileReader.java:214)
> =20
>
org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.jav
> a:64)
> =20
>
org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.j
> ava:33)
>       org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:56)
>       org.apache.lucene.index.TermBuffer.read(TermBuffer.java:62)
> =20
> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:117)
> =20
>
org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:148)
> =20
>
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:15
> 7)
> =20
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:151)
> =20
> org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:50)
> =20
> org.apache.lucene.index.MultiTermDocs.termDocs(MultiReader.java:392)
>       org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:348)
>       org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
>       org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
>       org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
> =20
>
org.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImpl.java:171)
> =20
>
org.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImpl.java:153)
> =20
>
org.apache.lucene.search.FieldCacheImpl.getAuto(FieldCacheImpl.java:349)
> =20
>
org.apache.lucene.search.FieldSortedHitQueue.comparatorAuto(FieldSortedH
> itQueue.java:346)
> =20
>
org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSo
> rtedHitQueue.java:189)
> =20
>
org.apache.lucene.search.FieldSortedHitQueue.(FieldSortedHitQueue.java:5
> 8)
> =20
>
org.apache.lucene.search.TopFieldDocCollector.(TopFieldDocCollector.java
> :40)
> =20
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:108)
>       org.apache.lucene.search.Hits.getMoreDocs(Hits.java:65)
>       org.apache.lucene.search.Hits.(Hits.java:52)
>       org.apache.lucene.search.Searcher.search(Searcher.java:53)
>
> =20
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 15:57:05 2006
Return-Path: <java-user-return-25174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 389 invoked from network); 22 Dec 2006 15:57:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 15:57:04 -0000
Received: (qmail 39224 invoked by uid 500); 22 Dec 2006 15:57:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38752 invoked by uid 500); 22 Dec 2006 15:57:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38741 invoked by uid 99); 22 Dec 2006 15:57:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 07:57:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 07:56:53 -0800
Received: by py-out-1112.google.com with SMTP id a25so1584360pyi
        for <java-user@lucene.apache.org>; Fri, 22 Dec 2006 07:56:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=A6Q8+Z0JUnOgzMacAfXquWHbH8K8Tg2m5/I+yGDyIHJ07bctm6xYA4yhioDrRhTJEp2qnhPKoud7tKgTRr8fp8S8MvPqSkJ7W0vZfaHgSjBFcI1ghmBSlfhuFnLORWLvP9nyogOSJFlbgxQ6Er58eQYsp/kb9HGGRnJaEcPxzhQ=
Received: by 10.35.45.1 with SMTP id x1mr1247687pyj.1166802992826;
        Fri, 22 Dec 2006 07:56:32 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id 14sm43791326nzp.2006.12.22.07.56.31;
        Fri, 22 Dec 2006 07:56:32 -0800 (PST)
Message-ID: <458C0035.1020104@gmail.com>
Date: Fri, 22 Dec 2006 10:56:37 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Merge Index Filling up Disk Space
References: <458AB30F.6030908@insideview.com> <458AD25D.8050001@mikemccandless.com> <458BFA5C.1050904@insideview.com>
In-Reply-To: <458BFA5C.1050904@insideview.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

A Searcher uses a Reader to read the index for searching.

- Mark

Harini Raghavan wrote:
> Hi Mike,
>
> Thank you for the response. I don't have readers open on the index, 
> but while the optimize/merge was running I was searching on the index. 
> Would that make any difference?
> Also after the optimizing the index I had some .tmp files which were > 
> 10G and did not get merged. Could that also be related to having 
> searchers open while running optimize?
>
> -Harini
>
> Michael McCandless wrote:
>
>> Harini Raghavan wrote:
>>
>>> I am using lucene 1.9.1 for search functionality in my j2ee 
>>> application using JBoss as app server. The lucene index directory 
>>> size is almost 20G right now. There is a Quartz job that is adding 
>>> data to the index evey min and around 20000 documents get added to 
>>> the index every day.When the documents are added and the segments 
>>> are merged, the index size increases and sometimes grows to more 
>>> than double its original size. This results in filling up the disk 
>>> space. We have allotted a f/s size of 50G and even that is not 
>>> sufficient at times. Is there an optimum vales for the f/s size to 
>>> be allotted in such scenario.
>>> Any suggestions would be appreciated.
>>
>>
>> I believe optimize should use at most 2X the starting index size,
>> transiently, if there are no readers open against the index.  And then
>> when optimize is done the size should be around the starting size, or
>> less.
>>
>> If there are open readers against the index when the optimize occurs,
>> then, the segments that were merged cannot actually be deleted until
>> those readers close.  Even on Unix, where it will look like the
>> segments were deleted, they are still consuming disk space because
>> open file handles keep them allocated ("delete on last close").
>>
>> This means if you have open readers you should see at most 3X the
>> starting index size.  Worse, if some (but not all) readers are
>> re-opening while the merge is underway it's possible to peak at even
>> more than 3X the starting size.
>>
>> Do you have readers running against your index?
>>
>> I will call this out in the javadocs for optimize, addDocument,
>> addIndexes...
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 17:24:42 2006
Return-Path: <java-user-return-25175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22930 invoked from network); 22 Dec 2006 17:24:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 17:24:42 -0000
Received: (qmail 34193 invoked by uid 500); 22 Dec 2006 17:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34163 invoked by uid 500); 22 Dec 2006 17:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34152 invoked by uid 99); 22 Dec 2006 17:24:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 09:24:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 09:24:29 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 0CDE059DF5
	for <java-user@lucene.apache.org>; Fri, 22 Dec 2006 12:24:02 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by out1.internal (MEProxy); Fri, 22 Dec 2006 12:24:02 -0500
X-Sasl-enc: WUa+W7rGjtk0zryBKjS93Z6zUmANhIxpSI6exKogKfWV 1166808241
Received: from [70.192.18.88] (88.sub-70-192-18.myvzw.com [70.192.18.88])
	by mail.messagingengine.com (Postfix) with ESMTP id EA55615A96
	for <java-user@lucene.apache.org>; Fri, 22 Dec 2006 12:24:00 -0500 (EST)
Message-ID: <458C14AB.8060405@mikemccandless.com>
Date: Fri, 22 Dec 2006 12:23:55 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Merge Index Filling up Disk Space
References: <458AB30F.6030908@insideview.com> <458AD25D.8050001@mikemccandless.com> <458BFA5C.1050904@insideview.com>
In-Reply-To: <458BFA5C.1050904@insideview.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Harini Raghavan wrote:

> Thank you for the response. I don't have readers open on the index, but 
> while the optimize/merge was running I was searching on the index. Would 
> that make any difference?

You're welcome!  Right, a searcher opens an IndexReader.  So this
means you should see peak @ 3X the starting index size (assuming you
don't re-open some readers during the optimize in which case it could
be > 3X).

> Also after the optimizing the index I had some .tmp files which were > 
> 10G and did not get merged. Could that also be related to having 
> searchers open while running optimize?

If you hit a disk full, then, I would expect unused .tmp files to be
left around.  Did you actually hit an IOException due to disk full,
and, is the timestamp of these .tmp files around the time it occurred?

Note that the trunk version of Lucene has been fixed to not leave such
unreferenced files even on IOException, but that's not yet released.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 17:34:17 2006
Return-Path: <java-user-return-25176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25302 invoked from network); 22 Dec 2006 17:34:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 17:34:16 -0000
Received: (qmail 48604 invoked by uid 500); 22 Dec 2006 17:34:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48577 invoked by uid 500); 22 Dec 2006 17:34:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48566 invoked by uid 99); 22 Dec 2006 17:34:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 09:34:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 09:34:04 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id A20BE5929A
	for <java-user@lucene.apache.org>; Fri, 22 Dec 2006 12:33:36 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by out1.internal (MEProxy); Fri, 22 Dec 2006 12:33:36 -0500
X-Sasl-enc: ZbGfCtZsEnJJTWG9p0xY8ytmxXaABbXJ6JbasH65IHN4 1166808815
Received: from [70.192.18.88] (88.sub-70-192-18.myvzw.com [70.192.18.88])
	by mail.messagingengine.com (Postfix) with ESMTP id E119A15AA5
	for <java-user@lucene.apache.org>; Fri, 22 Dec 2006 12:33:33 -0500 (EST)
Message-ID: <458C16F1.8030601@mikemccandless.com>
Date: Fri, 22 Dec 2006 12:33:37 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IOException - The handle is invalid
References: <458B4991.8050108@teamware.com>
In-Reply-To: <458B4991.8050108@teamware.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Antony Bowesman wrote:
> Hi,
> 
> I'm running load tests with Lucene 2.0, SUN's JDK 6 on Windows XP2, dual 
> core CPU.  I have 8 worker threads adding a few hundred K documents, 
> split between two Lucene indexes, I've started getting
> 
> java.io.IOException: The handle is invalid in places like
> 
> java.io.RandomAccessFile.writeBytes(Native Method)
> java.io.RandomAccessFile.write(RandomAccessFile.java:466)
> org.apache.lucene.store.FSIndexOutput.flushBuffer(FSDirectory.java:503)
> org.apache.lucene.store.BufferedIndexOutput.flush(BufferedIndexOutput.java:84) 
> 
> org.apache.lucene.store.BufferedIndexOutput.close(BufferedIndexOutput.java:98) 
> 
> org.apache.lucene.store.FSIndexOutput.close(FSDirectory.java:506)
> org.apache.lucene.index.SegmentMerger.mergeNorms(SegmentMerger.java:415)
> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:90)
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:709)
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:686)
> org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:674) 
> 
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:479)
> com.teamware.office.lucene.index.TWOIndexWriter.addDocument(TWOIndexWriter.java:170) 
> 
> 
> java.io.RandomAccessFile.close0(Native Method)
> java.io.RandomAccessFile.close(RandomAccessFile.java:543)
> org.apache.lucene.store.FSIndexInput.close(FSDirectory.java:465)
> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java:231) 
> 
> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java:168) 
> 
> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java:145) 
> 
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:735)
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:686)
> org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:674) 
> 
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:479)
> com.teamware.office.lucene.index.TWOIndexWriter.addDocument(TWOIndexWriter.java:170) 
> 
> 
> I saw Mike McCandless JIRA issue
> 
> http://issues.apache.org/jira/browse/LUCENE-669
> 
> Is the patch referenced there useful for a 2.0 system.  I would like to 
> use the lockless commit stuff, but am waiting until I get the core 
> system working well.
> 
> I am also getting IOException in some of my classes, but from the JIRA 
> comments, it seems that Lucene may be the culprit.

This does sound very much like LUCENE-669 (and that bug is indeed
present in Lucene 2.0).  That patch was fairly simple; it may apply
cleanly or require only small fixes.  I would recommend try it &
seeing if it resolves your IOExceptions?

If you still have more IOExceptions even after that, maybe test the
trunk.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 19:03:03 2006
Return-Path: <java-user-return-25177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44362 invoked from network); 22 Dec 2006 19:03:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 19:03:02 -0000
Received: (qmail 50238 invoked by uid 500); 22 Dec 2006 19:03:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50214 invoked by uid 500); 22 Dec 2006 19:03:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50201 invoked by uid 99); 22 Dec 2006 19:03:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 11:03:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 11:02:49 -0800
Received: by py-out-1112.google.com with SMTP id a25so1602794pyi
        for <java-user@lucene.apache.org>; Fri, 22 Dec 2006 11:02:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=rsGrIBKGJPAb6xFqE9xN8Yyklw6+5knMfD5Hz2EgB1Ec9UNtGUhl8JFzOG2JiNXgm4DNIroNlI4ooiDNtN73+24Wqv3kae0HRPXLQNe+dxKv3aN3rCEJkLWllJoewpeoLGuins2hkWxsuOE0JaGAXIF66iwmQ2CxWJSd/LZ0W0g=
Received: by 10.35.99.17 with SMTP id b17mr17528071pym.1166814147379;
        Fri, 22 Dec 2006 11:02:27 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id 34sm44424448nza.2006.12.22.11.02.23;
        Fri, 22 Dec 2006 11:02:25 -0800 (PST)
Message-ID: <458C2BC4.2010007@gmail.com>
Date: Fri, 22 Dec 2006 14:02:28 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: First search is slow after updating index .. subsequent searches
 very fast
References: <9BF20741D07E824A9206E073EB6750E90330638B@exch2k3.widen.com>
In-Reply-To: <9BF20741D07E824A9206E073EB6750E90330638B@exch2k3.widen.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am no expert, but as I gloss over the code this is what I see happens 
for a sort (sometimes the less experienced has to get it wrong before an 
expert will jump in with some good info <G> *hint to experts*):

The field cache caches <document : term> pairs. When you sort on a field 
you don't want to have to extract the content of the field as you are 
doing the sort. So the first time you do a sort, the fieldcache is 
loaded up that stores the term to sort on for each document id.

For numerics this involves loading up an array that is keyed by doc id 
with a value of the numeric (I didn't look at the float handling that I 
think I saw).  i.e. Array(documentid) = termtext
The field cache for an integer sort is 32 bits times the number of docs 
then (termtext would be an int).
For a String sort an array is made of all of the Terms in the index 
(terms in the field being sorted on I believe) and another array is made 
that indexes into that term array. So to see what you are sorting on for 
document 4 you would get the value of the first array at position 3 and 
use the result as the index into the Term array. i.e. Array(documentId) 
= index , Terms(index) = termtext
The size of a String fieldcache is going to be the size of those two 
Arrays : 32 bits X number of docs + size of all of the terms (again I 
think this is just the terms in that field, but I have not seen anyone 
say that before).

If you followed that horrible example of an explanation than you can see 
why it is all done at once when you first ask for a sort. The arrays 
created are stored in a weakhashmap that is keyed on by the IndexReader 
that was used for the search (A Searcher contains an IndexReader). So 
every time you open a new Searcher and do a field sorted search it will 
need to cache the <document : term> pairs (using those arrays I talk 
about above).

The actual sorting appears to happen just like with relevancy score 
sorting....using a priority queue that is loaded as a HitCollector 
visits each document.

There may be a little more to the story -- I think I saw that 
Comparators used for sorting are also cached, but someone else will have 
to correct me...I am out of time.

The way to avoid this warm up time that takes place (due to loading up 
those fieldcaches), is to pre-warm a Searcher. When an update is made to 
the index, instead of just opening a new Searcher, keep using the old 
Searcher to serve search requests, start up a new searcher in a 
different thread and perform a sorted search on it, then replace the 
stale Searcher with the new warmed up Searcher.


- Mark

Bryan Dotzour wrote:
> Thanks for that tidbit Mark.  I was just looking through the LIA book
> and stumbled across this sentence under the "5.1.9 Performance effect of
> sorting" section.  It says: "[When sorting by a String type] each unique
> term is also cached for each document. Only the actual fields used for
> sorting are cached in this manner."
>
> In the case that I originally described, our default sorting mechanism
> is an alphabetical sort on the title of each object returned in the
> search.  So I take this excerpt from the book to mean that the
> FieldCache has to read each title value from each document in order to
> perform the sort.  That pretty much sounds like exactly what you're
> saying Mark.
>
> I guess the only question left in my mind is, does the FieldCache have
> to read every value for every document in the entire index to perform
> the sort, or just the values in the documents returned in the search?
> My guess would be the latter although this one index seems much slower
> than all of the others and the only difference is the sheer number of
> items in the index.
>
> -----Original Message-----
> From: Mark Miller [mailto:markrmiller@gmail.com] 
> Sent: Thursday, December 21, 2006 2:48 PM
> To: java-user@lucene.apache.org
> Subject: Re: First search is slow after updating index .. subsequent
> searches very fast
>
> Since you say you are sorting on a field the bulk of the time will be 
> doing the sort and caching it (FieldCache). Subsequent searches use that
>
> cache to avoid paying the full sort cost again. If you where doing 
> relevancy sorting you would not experience such a big delay.
>
> - Mark
>
> Bryan Dotzour wrote:
>   
>> Otis thanks for your suggestion, it seems to be working pretty well!
>> I'm just curious if you (or anyone else) could describe what is
>>     
> actually
>   
>> happening during that initial query that ends up taking so much time.
>> We have several different indexes for different types of objects and
>> it's only this one index that exhibits this kind of behavior.  Is it
>> something related to the size of the index, or the number of fields,
>>     
> or
>   
>> how fragmented the index is?
>>
>> I'm just trying to get a little better understanding of what is going
>>     
> on
>   
>> under the covers there.  I'll spend some time with the source to see
>>     
> if
>   
>> I can figure it out, but any tips from the experts would be much
>> appreciated. =)
>>
>> Thanks again!
>> Bryan
>>
>> -----Original Message-----
>> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
>> Sent: Wednesday, December 20, 2006 4:28 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: First search is slow after updating index .. subsequent
>> searches very fast
>>
>> To populate FieldCache, the number of matches doesn't matter.  There
>>     
> is
>   
>> no need to be scrimy there - you don't really save anything by running
>>     
> a
>   
>> query that matches only a few docs.  Just run something that looks
>>     
> like
>   
>> a common query.
>>
>> For warming up new indices, one can also use the `dd' trick under
>>     
> UNIX.
>   
>> Otis
>>
>> ----- Original Message ----
>> From: Bryan Dotzour <BDotzour@widen.com>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, December 20, 2006 5:23:40 PM
>> Subject: RE: First search is slow after updating index .. subsequent
>> searches very fast
>>
>> One question about this, Otis... When "warming up" the new searcher,
>> should the query return a lot of results, or does it matter?  Can I
>>     
> just
>   
>> do like an ID = X query and get one document back?  Is that sufficient
>> or is it better to run a query that will get lots of hits?
>>
>> Thanks again,
>> Bryan
>>
>> -----Original Message-----
>> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
>> Sent: Wednesday, December 20, 2006 3:28 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: First search is slow after updating index .. subsequent
>> searches very fast
>>
>> All sounds good.  Opening a new IndexReader can take a bit of time.
>>     
> If
>   
>> you use sorting of any kind other than default sorting by relevance,
>> this delay on the first search is also probably caused by the lazy
>> FieldCache population.  The cure for that is to open a new
>> IndexReader/Searcher before you close the old one, warm it up with a
>> query + sort, and then switch IndexReader/Searchers, closing the old
>> one.
>>
>> Otis
>>
>> ----- Original Message ----
>> From: Bryan Dotzour <BDotzour@widen.com>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, December 20, 2006 3:59:19 PM
>> Subject: First search is slow after updating index .. subsequent
>> searches very fast
>>
>> I'm investigating some performance issues with the way we're using
>> Lucene in our web app and am interested if anyone could shed some
>>     
> light
>   
>> on what might be going on.  Hopefully I can provide enough
>>     
> information,
>   
>> please let me know if there's more I can give.
>>
>>  
>>
>> We're using Lucene 2.0.0 and I'm currently working with disk-based
>> indexing (although in production I'll want to be using RAM indexing).
>> In our environment, we build up our Lucene index at application start
>>     
> up
>   
>> time and then we optimize the index.  From then on, updates and
>>     
> deletes
>   
>> to the index occur fairly frequently but we don't optimize until the
>> middle of the night when the impact would be at its minimum.  After a
>> while, what I see is that searches will be very fast (~400 ms) until I
>> make a modification that will require a single document to be
>> re-indexed.  Immediately after that has occurred, the next search will
>> take substantially longer (sometimes up to ~25s).  After that search
>>     
> has
>   
>> run, the next search will be back at the ~400ms time.
>>
>>  
>>
>> Our algorithm for handling the updates is as follows:
>>
>> 1.       open an IndexReader on the directory
>>
>> 2.       delete the document using the reader
>>
>> 3.       close the reader
>>
>> 4.       open an IndexWriter
>>
>> 5.       add the new document using the writer
>>
>> 6.       close the writer
>>
>>  
>>
>> For searches:
>>
>> 1.    We cache off an IndexReader for the index, as well as an
>> IndexSearcher, which uses that reader
>> 2.    When a search is initiated we check to see if the version of the
>> index has changed using getCurrentVersion()
>> 3.    If it has changed, we close our IndexSearcher, close the
>> IndexReader and re-open them both
>>
>>  
>>
>>  
>>
>> Anything sound non-standard in that workflow?  Does anyone have an
>>     
> idea
>   
>> of what might be happening during that slow down?
>>
>>  
>>
>> Thanks for your time,
>>
>> Bryan
>>
>>  
>>
>>  
>>
>>  
>>
>> (For a little more info, here is a very common stack trace snippet
>>     
> that
>   
>> I gather when the "slow search" is running.  It seems much of the time
>> is spent in MultiReader or MultiTermDocs)
>>
>>  
>>
>>     
> org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(Com
>   
>> poundFileReader.java:214)
>>  
>>
>>     
> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.jav
>   
>> a:64)
>>  
>>
>>     
> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.j
>   
>> ava:33)
>>       org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:56)
>>       org.apache.lucene.index.TermBuffer.read(TermBuffer.java:62)
>>  
>> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:117)
>>  
>>
>>     
> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:148)
>   
>>  
>>
>>     
> org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:15
>   
>> 7)
>>  
>> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:151)
>>  
>> org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:50)
>>  
>> org.apache.lucene.index.MultiTermDocs.termDocs(MultiReader.java:392)
>>       org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:348)
>>       org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
>>       org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
>>       org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)
>>  
>>
>>     
> org.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImpl.java:171)
>   
>>  
>>
>>     
> org.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImpl.java:153)
>   
>>  
>>
>>     
> org.apache.lucene.search.FieldCacheImpl.getAuto(FieldCacheImpl.java:349)
>   
>>  
>>
>>     
> org.apache.lucene.search.FieldSortedHitQueue.comparatorAuto(FieldSortedH
>   
>> itQueue.java:346)
>>  
>>
>>     
> org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSo
>   
>> rtedHitQueue.java:189)
>>  
>>
>>     
> org.apache.lucene.search.FieldSortedHitQueue.(FieldSortedHitQueue.java:5
>   
>> 8)
>>  
>>
>>     
> org.apache.lucene.search.TopFieldDocCollector.(TopFieldDocCollector.java
>   
>> :40)
>>  
>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:108)
>>       org.apache.lucene.search.Hits.getMoreDocs(Hits.java:65)
>>       org.apache.lucene.search.Hits.(Hits.java:52)
>>       org.apache.lucene.search.Searcher.search(Searcher.java:53)
>>
>>  
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>   
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 19:25:38 2006
Return-Path: <java-user-return-25178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49561 invoked from network); 22 Dec 2006 19:25:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 19:25:37 -0000
Received: (qmail 76494 invoked by uid 500); 22 Dec 2006 19:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76462 invoked by uid 500); 22 Dec 2006 19:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76441 invoked by uid 99); 22 Dec 2006 19:24:38 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 11:24:34 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2830568nfc
        for <java-user@lucene.apache.org>; Fri, 22 Dec 2006 11:22:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=pzOA8FYH0qfcaC7ym3nCB7iL+X4hMSK/lm/SCULSDhr1Mk5pQQOnmqrlSBGwC/fLr4FbvPj0X3ZErM4G3EzrnFAuXDpW4PlcAKiUzLOD26mE7YksAZg2iZBylJoZT45hHKvKPGM6oVMjZFmJptDIvB1OTbgA/3C+OI3hhBpDc80=
Received: by 10.82.120.14 with SMTP id s14mr64956buc.1166815349188;
        Fri, 22 Dec 2006 11:22:29 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Fri, 22 Dec 2006 11:22:29 -0800 (PST)
Message-ID: <c68e39170612221122nbed2c99ica81d92991bf83cd@mail.gmail.com>
Date: Fri, 22 Dec 2006 14:22:29 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: First search is slow after updating index .. subsequent searches very fast
In-Reply-To: <458C2BC4.2010007@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <9BF20741D07E824A9206E073EB6750E90330638B@exch2k3.widen.com>
	 <458C2BC4.2010007@gmail.com>
X-Google-Sender-Auth: 1c7149dac73cd9f9
X-Virus-Checked: Checked by ClamAV on apache.org

On 12/22/06, Mark Miller <markrmiller@gmail.com> wrote:
> So the first time you do a sort, the fieldcache is
> loaded up that stores the term to sort on for each document id.

Right.

> The actual sorting appears to happen just like with relevancy score
> sorting....using a priority queue that is loaded as a HitCollector
> visits each document.

Yes, every sorted query after the first will be pretty much the same
speed as queries sorted by relevancy.

> The way to avoid this warm up time that takes place (due to loading up
> those fieldcaches), is to pre-warm a Searcher. When an update is made to
> the index, instead of just opening a new Searcher, keep using the old
> Searcher to serve search requests, start up a new searcher in a
> different thread and perform a sorted search on it, then replace the
> stale Searcher with the new warmed up Searcher.

Yes, Solr does this warming in the background.
You also need to close the old searcher after all searches on it have
completed (for a time, searches could be running on both the old and
new searchers concurrently).  This requires something like reference
counting.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 19:36:36 2006
Return-Path: <java-user-return-25179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53266 invoked from network); 22 Dec 2006 19:36:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 19:36:35 -0000
Received: (qmail 96793 invoked by uid 500); 22 Dec 2006 19:36:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96756 invoked by uid 500); 22 Dec 2006 19:36:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96745 invoked by uid 99); 22 Dec 2006 19:36:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 11:36:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of suman.ghosh.1@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 11:36:24 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2833505nfc
        for <java-user@lucene.apache.org>; Fri, 22 Dec 2006 11:36:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=BJ3wylp8L6Ttp6OCEjIRTsFjb6B/7QJztKQhsB+UlBbfQ/clAHHMLOeiZwW6q0efTUzbH1x5bABOBlVk8T+99P3qU7HR5s9zMfN9S7fy1JpQ8p/pBlmsLrym4Jhh09FXVEO4sxLL9g45vg0nbAv1DCs7xpjzTNzxNOPeMOwGJSI=
Received: by 10.48.43.19 with SMTP id q19mr12140982nfq.1166816163104;
        Fri, 22 Dec 2006 11:36:03 -0800 (PST)
Received: by 10.49.17.8 with HTTP; Fri, 22 Dec 2006 11:36:03 -0800 (PST)
Message-ID: <a6c7e1410612221136v692f89d9t4caafc28e23d462f@mail.gmail.com>
Date: Fri, 22 Dec 2006 14:36:03 -0500
From: "Suman Ghosh" <suman.ghosh.1@gmail.com>
To: java-user@lucene.apache.org
Subject: java.lang.NoClassDefFoundError: com_cenqua_clover/g
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I am trying to use Lucene nightly build lucene-2006-12-22.tar.gz.

When my code tries to execute:

IndexSearcher searcher = new IndexSearcher("/home/lucene/index");

I am receiving the following error:

java.lang.NoClassDefFoundError: com_cenqua_clover/g
java.lang.NoClassDefFoundError: com_cenqua_clover/g
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:130)
        at org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:43)

Can you please tell me what am I missing on my setup? I have
lucene-core-nightly.jar on my classpath.

Thanks

Suman

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 22 21:20:37 2006
Return-Path: <java-user-return-25180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85842 invoked from network); 22 Dec 2006 21:20:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2006 21:20:36 -0000
Received: (qmail 99044 invoked by uid 500); 22 Dec 2006 21:20:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99016 invoked by uid 500); 22 Dec 2006 21:20:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99004 invoked by uid 99); 22 Dec 2006 21:20:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 13:20:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a19.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 13:20:24 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.dreamhost.com (Postfix) with ESMTP id AF0C9110A4
	for <java-user@lucene.apache.org>; Fri, 22 Dec 2006 13:20:00 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <a6c7e1410612221136v692f89d9t4caafc28e23d462f@mail.gmail.com>
References: <a6c7e1410612221136v692f89d9t4caafc28e23d462f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DDDAF4C9-CE8F-426B-B225-6C847849B404@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: java.lang.NoClassDefFoundError: com_cenqua_clover/g
Date: Fri, 22 Dec 2006 16:20:00 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

This is a bug that just got introduced by the new nightly build  
process.  See http://issues.apache.org/jira/browse/LUCENE-708

I will work to fix before tonight's build.

-Grant


On Dec 22, 2006, at 2:36 PM, Suman Ghosh wrote:

> I am trying to use Lucene nightly build lucene-2006-12-22.tar.gz.
>
> When my code tries to execute:
>
> IndexSearcher searcher = new IndexSearcher("/home/lucene/index");
>
> I am receiving the following error:
>
> java.lang.NoClassDefFoundError: com_cenqua_clover/g
> java.lang.NoClassDefFoundError: com_cenqua_clover/g
>        at org.apache.lucene.index.IndexReader.open(IndexReader.java: 
> 130)
>        at org.apache.lucene.search.IndexSearcher.<init> 
> (IndexSearcher.java:43)
>
> Can you please tell me what am I missing on my setup? I have
> lucene-core-nightly.jar on my classpath.
>
> Thanks
>
> Suman
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 23 05:03:20 2006
Return-Path: <java-user-return-25181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81048 invoked from network); 23 Dec 2006 05:03:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2006 05:03:18 -0000
Received: (qmail 70443 invoked by uid 500); 23 Dec 2006 05:03:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70240 invoked by uid 500); 23 Dec 2006 05:03:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70228 invoked by uid 99); 23 Dec 2006 05:03:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 21:03:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of simon.willnauer@googlemail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 21:02:43 -0800
Received: by ug-out-1314.google.com with SMTP id k40so3205146ugc
        for <java-user@lucene.apache.org>; Fri, 22 Dec 2006 21:01:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=LdLNZ25zZF6tYcRfaMOhNOOIfg+nY8bEVtqHCa27vefxGDdiDxd+mpit0caNZvm/BDAXkCF+eF0bzvrFleLrZAPrHT1ojvlzQROqi6PXeWJMDtV0GZ4t9Fvflpm8KiS+mNafrnPqQEVDTwGeit1skCR87a9WtDjrX0j4YCcSXsA=
Received: by 10.67.99.1 with SMTP id b1mr14624437ugm.1166850117286;
        Fri, 22 Dec 2006 21:01:57 -0800 (PST)
Received: by 10.67.22.3 with HTTP; Fri, 22 Dec 2006 21:01:57 -0800 (PST)
Message-ID: <f18c9dde0612222101l38c9942dx9d3395c8a46f0766@mail.gmail.com>
Date: Fri, 22 Dec 2006 21:01:57 -0800
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: "Van Nguyen" <vnguyen@ur.com>
Subject: Re: JAVA JVM Question
Cc: java-user@lucene.apache.org
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E8117DC2A42@UREXCHVS3.ur.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <0D6A3C278F4DC346B98DF4D2F1397E8117DC2A42@UREXCHVS3.ur.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Do you have a stack trace by any chance, well OOM do not create very
meanful stacktraces but it could help to figure out which error
occures. PermGenSpace belogs to the java heap btw.
The JBoss should actually be able to deal with your redeployment but
in live/production a restart is always requiered.

best regards simon

On 12/21/06, Van Nguyen <vnguyen@ur.com> wrote:
> This is a different OOM error.  This one is due to Java heap space.
> I've tried using Otis' suggestion and use the latest nightly build (I've
> actually tried using 12/19/2006 and 12/20/2006)... but I am still
> getting this OOS: Java heap space error.  I will try to profile this app
> to see if I can get more info.
>
> I've read about the PermGenSpace errors and I do get that from time to
> time on redeploys and heard that Java 6 was suppose to handle garbage
> collection better.  The only common classes are the ones provided by
> JBoss.  We have taken to restarting the app server every time we deploy
> an application... but we hope that that's not a permanent solution
> because we do not want to take down all of our applications because we
> need to redeploy one app.
>
>
> Van
>
> -----Original Message-----
> From: Simon Willnauer [mailto:simon.willnauer@googlemail.com]
> Sent: Wednesday, December 20, 2006 7:11 PM
> To: java-user@lucene.apache.org
> Subject: Re: JAVA JVM Question
>
> OOM Errors are not uncommon during redeployment on application server
> e.g. servlet container. Redeploy on Tomcat servers very often cause
> OOM due to the perm gen space which get not GCed(that should go away
> with 5.5). The JBoss can usually deal with these issue but just in
> case you could check your PerGenSpace via JMX or some profiler to see
> what happens with your loaded classes. If you redeploy in live /
> production env. make sure you restart your app. server.
> Do you use some common classes which are provided via parent
> classloader of your application? This could also cause such problems.
> If this is a PermGenSpace problem you might fix it by replacing one of
> the components in your software stack. This issues has been widely
> discussed and the finger of blame has been pointed to tomcat, cglib or
> even your JVM impl.
>
> best regards simon
>
> On 12/20/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > Are you using 2.1-dev version of Lucene? Try the latest nightly build,
> it as a fix for a certain OOM bug (see LUCENE-754).
> >
> > Otis
> >
> > ----- Original Message ----
> > From: Van Nguyen <vnguyen@ur.com>
> > To: java-user@lucene.apache.org
> > Sent: Wednesday, December 20, 2006 6:39:58 PM
> > Subject: JAVA JVM Question
> >
> > I have an index that's approximately 875MB.  I'm using JBoss
> Application
> > Server 4.04 w/ Apache HTTP Server 2.2.  My min/max JVM size is:
> > 128MB/512MB.  On initial startup, everything works fine.  I'm able to
> > search (although it takes a while doing the first search because it's
> > loading the index into memory - because I'm sorting on a field)...
> > everything's fine and dandy.  But if I stop the application and
> > redeploy, I get an OutOfMemoryError when I search (when the index gets
> > loaded into memory again).  I've tried this on both Java 5 and Java 6.
> >
> >
> >
> > When I stop the application, I made sure (or at least to the best of
> my
> > knowledge) that I close all searcher/reader/writer.  I'm pretty sure
> > that there are no locks on the index.  I've tried increasing the
> maximum
> > JVM size to 1GB.  Now I can redeploy the application twice before it
> > gives me the OutOfMemoryError.  It seems like the JVM isn't garbage
> > collecting the index.
> >
> >
> >
> > So is this a JVM issue where the index is still in memory and it isn't
> > being garbage collected?  Or am I not closing my
> searcher/reader/writer
> > correctly?  Has anyone else experienced this?
> >
> >
> >
> > Thanks,
> >
> >
> >
> > Van
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 23 05:37:01 2006
Return-Path: <java-user-return-25182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84235 invoked from network); 23 Dec 2006 05:37:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2006 05:37:00 -0000
Received: (qmail 86239 invoked by uid 500); 23 Dec 2006 05:37:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86193 invoked by uid 500); 23 Dec 2006 05:37:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86182 invoked by uid 99); 23 Dec 2006 05:37:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Dec 2006 21:37:01 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.227] (HELO web50314.mail.yahoo.com) (206.190.39.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Dec 2006 21:36:51 -0800
Received: (qmail 86098 invoked by uid 60001); 23 Dec 2006 05:36:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=I2bcyfXJ0n9923JSF9rolokkA182wNOB3JDQyeLFLgK5TNySJlX+x/xJE66aQcOyktw8tRD3NJ0zmtFWqBSDx6QRouvVjnO3K8NdXaaNwBqfHeScoqICRZ3oauTo9LNf7j5yORDJTSSLOuW7z49emVsoAd3VKHcY11b7HMlIaY4=  ;
Message-ID: <20061223053630.86096.qmail@web50314.mail.yahoo.com>
Received: from [74.65.202.166] by web50314.mail.yahoo.com via HTTP; Fri, 22 Dec 2006 21:36:30 PST
Date: Fri, 22 Dec 2006 21:36:30 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: JAVA JVM Question
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

The latest Java (6) does produce a stack trace when am OOM error happens.  =
It doesn't necessarily point to the source of the leak, though, just at the=
 unfortunate thing that needed the non-existent memory to do its work.=0A=
=0AOtis=0A=0A----- Original Message ----=0AFrom: Simon Willnauer <simon.wil=
lnauer@googlemail.com>=0ATo: Van Nguyen <vnguyen@ur.com>=0ACc: java-user@lu=
cene.apache.org=0ASent: Saturday, December 23, 2006 12:01:57 AM=0ASubject: =
Re: JAVA JVM Question=0A=0ADo you have a stack trace by any chance, well OO=
M do not create very=0Ameanful stacktraces but it could help to figure out =
which error=0Aoccures. PermGenSpace belogs to the java heap btw.=0AThe JBos=
s should actually be able to deal with your redeployment but=0Ain live/prod=
uction a restart is always requiered.=0A=0Abest regards simon=0A=0AOn 12/21=
/06, Van Nguyen <vnguyen@ur.com> wrote:=0A> This is a different OOM error. =
 This one is due to Java heap space.=0A> I've tried using Otis' suggestion =
and use the latest nightly build (I've=0A> actually tried using 12/19/2006 =
and 12/20/2006)... but I am still=0A> getting this OOS: Java heap space err=
or.  I will try to profile this app=0A> to see if I can get more info.=0A>=
=0A> I've read about the PermGenSpace errors and I do get that from time to=
=0A> time on redeploys and heard that Java 6 was suppose to handle garbage=
=0A> collection better.  The only common classes are the ones provided by=
=0A> JBoss.  We have taken to restarting the app server every time we deplo=
y=0A> an application... but we hope that that's not a permanent solution=0A=
> because we do not want to take down all of our applications because we=0A=
> need to redeploy one app.=0A>=0A>=0A> Van=0A>=0A> -----Original Message--=
---=0A> From: Simon Willnauer [mailto:simon.willnauer@googlemail.com]=0A> S=
ent: Wednesday, December 20, 2006 7:11 PM=0A> To: java-user@lucene.apache.o=
rg=0A> Subject: Re: JAVA JVM Question=0A>=0A> OOM Errors are not uncommon d=
uring redeployment on application server=0A> e.g. servlet container. Redepl=
oy on Tomcat servers very often cause=0A> OOM due to the perm gen space whi=
ch get not GCed(that should go away=0A> with 5.5). The JBoss can usually de=
al with these issue but just in=0A> case you could check your PerGenSpace v=
ia JMX or some profiler to see=0A> what happens with your loaded classes. I=
f you redeploy in live /=0A> production env. make sure you restart your app=
. server.=0A> Do you use some common classes which are provided via parent=
=0A> classloader of your application? This could also cause such problems.=
=0A> If this is a PermGenSpace problem you might fix it by replacing one of=
=0A> the components in your software stack. This issues has been widely=0A>=
 discussed and the finger of blame has been pointed to tomcat, cglib or=0A>=
 even your JVM impl.=0A>=0A> best regards simon=0A>=0A> On 12/20/06, Otis G=
ospodnetic <otis_gospodnetic@yahoo.com> wrote:=0A> > Are you using 2.1-dev =
version of Lucene? Try the latest nightly build,=0A> it as a fix for a cert=
ain OOM bug (see LUCENE-754).=0A> >=0A> > Otis=0A> >=0A> > ----- Original M=
essage ----=0A> > From: Van Nguyen <vnguyen@ur.com>=0A> > To: java-user@luc=
ene.apache.org=0A> > Sent: Wednesday, December 20, 2006 6:39:58 PM=0A> > Su=
bject: JAVA JVM Question=0A> >=0A> > I have an index that's approximately 8=
75MB.  I'm using JBoss=0A> Application=0A> > Server 4.04 w/ Apache HTTP Ser=
ver 2.2.  My min/max JVM size is:=0A> > 128MB/512MB.  On initial startup, e=
verything works fine.  I'm able to=0A> > search (although it takes a while =
doing the first search because it's=0A> > loading the index into memory - b=
ecause I'm sorting on a field)...=0A> > everything's fine and dandy.  But i=
f I stop the application and=0A> > redeploy, I get an OutOfMemoryError when=
 I search (when the index gets=0A> > loaded into memory again).  I've tried=
 this on both Java 5 and Java 6.=0A> >=0A> >=0A> >=0A> > When I stop the ap=
plication, I made sure (or at least to the best of=0A> my=0A> > knowledge) =
that I close all searcher/reader/writer.  I'm pretty sure=0A> > that there =
are no locks on the index.  I've tried increasing the=0A> maximum=0A> > JVM=
 size to 1GB.  Now I can redeploy the application twice before it=0A> > giv=
es me the OutOfMemoryError.  It seems like the JVM isn't garbage=0A> > coll=
ecting the index.=0A> >=0A> >=0A> >=0A> > So is this a JVM issue where the =
index is still in memory and it isn't=0A> > being garbage collected?  Or am=
 I not closing my=0A> searcher/reader/writer=0A> > correctly?  Has anyone e=
lse experienced this?=0A> >=0A> >=0A> >=0A> > Thanks,=0A> >=0A> >=0A> >=0A>=
 > Van=0A> >=0A> >=0A> >=0A> >=0A> >=0A> > --------------------------------=
-------------------------------------=0A> > To unsubscribe, e-mail: java-us=
er-unsubscribe@lucene.apache.org=0A> > For additional commands, e-mail: jav=
a-user-help@lucene.apache.org=0A> >=0A> >=0A>=0A> -------------------------=
--------------------------------------------=0A> To unsubscribe, e-mail: ja=
va-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: =
java-user-help@lucene.apache.org=0A>=0A=0A---------------------------------=
------------------------------------=0ATo unsubscribe, e-mail: java-user-un=
subscribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-he=
lp@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 23 12:42:24 2006
Return-Path: <java-user-return-25183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96595 invoked from network); 23 Dec 2006 12:42:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2006 12:42:23 -0000
Received: (qmail 48261 invoked by uid 500); 23 Dec 2006 12:42:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48231 invoked by uid 500); 23 Dec 2006 12:42:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48220 invoked by uid 99); 23 Dec 2006 12:42:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Dec 2006 04:42:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Dec 2006 04:42:12 -0800
Received: by wx-out-0506.google.com with SMTP id i29so3347693wxd
        for <java-user@lucene.apache.org>; Sat, 23 Dec 2006 04:41:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=XCkC4CMN0BexCh29WSxw3DneA0KiW41zKHdk3+XmKjXvKhSUzXsGjC3gWi6uzJPPRwAtmiFAMchswWkgyPXcgnR7XktXwW/3JWk1nzQbf1U7LBE78zy/P+86LKfhheCToJN98YGlsA0kSWaNjOoAUFQ9UJB8RyixzOY7xx69Q0I=
Received: by 10.70.111.2 with SMTP id j2mr18403288wxc.1166877711659;
        Sat, 23 Dec 2006 04:41:51 -0800 (PST)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 39sm32153886wrl.2006.12.23.04.41.50;
        Sat, 23 Dec 2006 04:41:51 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <DDDAF4C9-CE8F-426B-B225-6C847849B404@apache.org>
References: <a6c7e1410612221136v692f89d9t4caafc28e23d462f@mail.gmail.com> <DDDAF4C9-CE8F-426B-B225-6C847849B404@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <898C8C48-70E7-45CD-A3AE-ECF63AEDE86E@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: java.lang.NoClassDefFoundError: com_cenqua_clover/g
Date: Sat, 23 Dec 2006 07:41:48 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

OK, this should be fixed.


On Dec 22, 2006, at 4:20 PM, Grant Ingersoll wrote:

> This is a bug that just got introduced by the new nightly build  
> process.  See http://issues.apache.org/jira/browse/LUCENE-708
>
> I will work to fix before tonight's build.
>
> -Grant
>
>
> On Dec 22, 2006, at 2:36 PM, Suman Ghosh wrote:
>
>> I am trying to use Lucene nightly build lucene-2006-12-22.tar.gz.
>>
>> When my code tries to execute:
>>
>> IndexSearcher searcher = new IndexSearcher("/home/lucene/index");
>>
>> I am receiving the following error:
>>
>> java.lang.NoClassDefFoundError: com_cenqua_clover/g
>> java.lang.NoClassDefFoundError: com_cenqua_clover/g
>>        at org.apache.lucene.index.IndexReader.open 
>> (IndexReader.java:130)
>>        at org.apache.lucene.search.IndexSearcher.<init> 
>> (IndexSearcher.java:43)
>>
>> Can you please tell me what am I missing on my setup? I have
>> lucene-core-nightly.jar on my classpath.
>>
>> Thanks
>>
>> Suman
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org
>
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
> LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 23 12:56:51 2006
Return-Path: <java-user-return-25184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98040 invoked from network); 23 Dec 2006 12:56:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2006 12:56:50 -0000
Received: (qmail 53333 invoked by uid 500); 23 Dec 2006 12:56:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53296 invoked by uid 500); 23 Dec 2006 12:56:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53285 invoked by uid 99); 23 Dec 2006 12:56:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Dec 2006 04:56:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a5.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Dec 2006 04:56:39 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a5.dreamhost.com (Postfix) with ESMTP id DCB5A14D6B1
	for <java-user@lucene.apache.org>; Sat, 23 Dec 2006 04:56:17 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <830BEF35-F92A-48F6-A1C9-C3E7928AD0A5@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Grant Ingersoll <gsingers@apache.org>
Subject: Website changes
Date: Sat, 23 Dec 2006 07:56:15 -0500
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Luceners,

There have been several changes to the website (http:// 
lucene.apache.org/java/docs/index.html) that may or may not affect  
how people use Lucene documentation.

Previously, the website was, more or less, static since it was based  
on the latest official release.  Sometimes it was updated for news or  
when committers were added.  That has all changed now.  The main  
website is now based on the nightly build of the documentation.   
Additionally, the API documentation is based on the nightly build and  
reflects what is in the trunk of SVN.  Nightly builds of the source  
(binary distributions) can now be located on the "Developers" page  
via the Resources left-hand menu.

For those of you looking for documentation of a specific release, you  
can find it under the "Site Versions" section in the left-hand menu.   
Docs as far back as 1.4.3 are supported.  File a JIRA issue if you  
would like to see a prior release to that.

For those looking to start contributing, the Resources-> Developers  
page has some helpful starting points.  Notably, the Clover test  
coverage reports show where we are lacking in test coverage.  Writing  
tests is a good way to get an understanding of what is going on  
inside Lucene and are always welcome.

-Grant

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 23 19:41:52 2006
Return-Path: <java-user-return-25185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52990 invoked from network); 23 Dec 2006 19:41:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2006 19:41:51 -0000
Received: (qmail 6600 invoked by uid 500); 23 Dec 2006 19:41:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6446 invoked by uid 500); 23 Dec 2006 19:41:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6435 invoked by uid 99); 23 Dec 2006 19:41:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Dec 2006 11:41:49 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of nick.snels@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Dec 2006 11:41:39 -0800
Received: by py-out-1112.google.com with SMTP id a25so1757317pyi
        for <java-user@lucene.apache.org>; Sat, 23 Dec 2006 11:41:18 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=peSO3Srh7f6SNXQtxJ+/iDtAmpqGzEYr5HHNngrGqOg/AcD8Z9HsbHWk7ndvZuRrlbWb8Np9K7xWfv0TSWNmKQMeRwgMtBR6CAlwYjPg/zcGLjL+7QgjkeXqPTa8xdXSY7oa/2FDrtw8XAWqfXAv7cJXbOjGi+2B7345SbwwESk=
Received: by 10.35.21.1 with SMTP id y1mr19756608pyi.1166902878826;
        Sat, 23 Dec 2006 11:41:18 -0800 (PST)
Received: by 10.35.43.1 with HTTP; Sat, 23 Dec 2006 11:41:18 -0800 (PST)
Message-ID: <857ffc970612231141l2e4bd704q2e7de06d0ed09592@mail.gmail.com>
Date: Sat, 23 Dec 2006 20:41:18 +0100
From: "Nick Snels" <nick.snels@gmail.com>
To: java-user@lucene.apache.org
Subject: Restrict result returned by Morelikethis
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25464_20621082.1166902878800"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25464_20621082.1166902878800
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I have made a Morelikethis query to look up documents that match a certain
document id. This results in a search of the whole index. I would like the
Morelikethis query to search only part of the index. How can I do this?

I have already tried to create a BooleanQuery, like:

BooleanQuery comboQuery = new BooleanQuery();
comboQuery.add(mltQuery, true, false);
comboQuery.add(originalQuery, true, false);

But I get the error: cannot find symbol
                           [javac] symbol  : method add(
org.apache.lucene.search.Query,boolean,boolean)

What is the correct way to restrict the search area of a Morelikethis query?
Any help is welcome. Thanks.

Kind regards,

Nick Snels

------=_Part_25464_20621082.1166902878800--

From java-user-return-25186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 23 21:11:57 2006
Return-Path: <java-user-return-25186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69880 invoked from network); 23 Dec 2006 21:11:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2006 21:11:54 -0000
Received: (qmail 42998 invoked by uid 500); 23 Dec 2006 21:11:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42944 invoked by uid 500); 23 Dec 2006 21:11:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42933 invoked by uid 99); 23 Dec 2006 21:11:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Dec 2006 13:11:54 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 23 Dec 2006 13:11:42 -0800
Received: (qmail 77249 invoked by uid 60001); 23 Dec 2006 21:11:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Wgq8kBpHJiOspFfmX9Sp74h2jDHoKqDJWeHRCY93kjvhQWDPR9/S7k4o5URINgIpKq4w+p7DmOicm6cuTye3zUrJtPu+003HbeA5GrJKDqzrzzjx3eakYs+etiwll2KC/BPBHrWWxoudh7CSY1AMQci78fWLLPZ/255niNB3njk=  ;
Message-ID: <20061223211121.77247.qmail@web50312.mail.yahoo.com>
Received: from [74.65.202.166] by web50312.mail.yahoo.com via HTTP; Sat, 23 Dec 2006 13:11:21 PST
Date: Sat, 23 Dec 2006 13:11:21 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Website changes
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Excellent work, Mister!  Me like.=0AI reeeeeally don't care to push the Luc=
ene book for my personal reasons, but it may be worth adding a link to LIA =
either under Documentation or under Resources in the left navigation column=
.  I think that's where people who might find the book useful would look fi=
rst.=0AIs there a way to keep all tabs (like the ones on http://lucene.apac=
he.org/) even when one goes to a specific project?  For example, if one cli=
cks on the Nutch tab, have that tab be dark blue/selected, and make the oth=
er ones gray?=0A=0AOtis=0A=0A----- Original Message ----=0AFrom: Grant Inge=
rsoll <gsingers@apache.org>=0ATo: java-user@lucene.apache.org=0ASent: Satur=
day, December 23, 2006 7:56:15 AM=0ASubject: Website changes=0A=0AHey Lucen=
ers,=0A=0AThere have been several changes to the website (http:// =0Alucene=
.apache.org/java/docs/index.html) that may or may not affect  =0Ahow people=
 use Lucene documentation.=0A=0APreviously, the website was, more or less, =
static since it was based  =0Aon the latest official release.  Sometimes it=
 was updated for news or  =0Awhen committers were added.  That has all chan=
ged now.  The main  =0Awebsite is now based on the nightly build of the doc=
umentation.   =0AAdditionally, the API documentation is based on the nightl=
y build and  =0Areflects what is in the trunk of SVN.  Nightly builds of th=
e source  =0A(binary distributions) can now be located on the "Developers" =
page  =0Avia the Resources left-hand menu.=0A=0AFor those of you looking fo=
r documentation of a specific release, you  =0Acan find it under the "Site =
Versions" section in the left-hand menu.   =0ADocs as far back as 1.4.3 are=
 supported.  File a JIRA issue if you  =0Awould like to see a prior release=
 to that.=0A=0AFor those looking to start contributing, the Resources-> Dev=
elopers  =0Apage has some helpful starting points.  Notably, the Clover tes=
t  =0Acoverage reports show where we are lacking in test coverage.  Writing=
  =0Atests is a good way to get an understanding of what is going on  =0Ain=
side Lucene and are always welcome.=0A=0A-Grant=0A=0A----------------------=
----=0AGrant Ingersoll=0ACenter for Natural Language Processing=0Ahttp://ww=
w.cnlp.org=0A=0ARead the Lucene Java FAQ at http://wiki.apache.org/jakarta-=
lucene/ =0ALuceneFAQ=0A=0A=0A=0A-------------------------------------------=
--------------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@=
lucene.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.=
apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 23 21:36:43 2006
Return-Path: <java-user-return-25187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73343 invoked from network); 23 Dec 2006 21:36:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2006 21:36:41 -0000
Received: (qmail 59613 invoked by uid 500); 23 Dec 2006 21:36:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59573 invoked by uid 500); 23 Dec 2006 21:36:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59551 invoked by uid 99); 23 Dec 2006 21:36:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Dec 2006 13:36:41 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Dec 2006 13:36:32 -0800
Received: by nf-out-0910.google.com with SMTP id n28so3149601nfc
        for <java-user@lucene.apache.org>; Sat, 23 Dec 2006 13:36:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hyFfvccxZXCZpNvZq7IVoJxd/AEGrnlUeAPsI8tejMitVmfn+ANz9bdn+Ih4z+IVDp+c8Yyb4dLLy2u+mleRv+V3RckXgdYWTE0kriIR3UuKELVCOXiUzleIrh79wu1iYsjjEAo/8zFpEC7Y34LYTYu1HfI1Xs9I/DvitaKSvhU=
Received: by 10.82.153.5 with SMTP id a5mr2319542bue.1166909770536;
        Sat, 23 Dec 2006 13:36:10 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Sat, 23 Dec 2006 13:36:10 -0800 (PST)
Message-ID: <359a92830612231336x7e48f9a9h88adb88f878e32de@mail.gmail.com>
Date: Sat, 23 Dec 2006 16:36:10 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Website changes
In-Reply-To: <20061223211121.77247.qmail@web50312.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78924_20421842.1166909770348"
References: <20061223211121.77247.qmail@web50312.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78924_20421842.1166909770348
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Honestly! A guy slaves away making things better and what's the immediate
response? What *more* can you do for me <G>....

Nice work Grant (notice, no requests for you to do anything else......)

Erick

On 12/23/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> Excellent work, Mister!  Me like.
> I reeeeeally don't care to push the Lucene book for my personal reasons,
> but it may be worth adding a link to LIA either under Documentation or under
> Resources in the left navigation column.  I think that's where people who
> might find the book useful would look first.
> Is there a way to keep all tabs (like the ones on
> http://lucene.apache.org/) even when one goes to a specific project?  For
> example, if one clicks on the Nutch tab, have that tab be dark
> blue/selected, and make the other ones gray?
>
> Otis
>
> ----- Original Message ----
> From: Grant Ingersoll <gsingers@apache.org>
> To: java-user@lucene.apache.org
> Sent: Saturday, December 23, 2006 7:56:15 AM
> Subject: Website changes
>
> Hey Luceners,
>
> There have been several changes to the website (http://
> lucene.apache.org/java/docs/index.html) that may or may not affect
> how people use Lucene documentation.
>
> Previously, the website was, more or less, static since it was based
> on the latest official release.  Sometimes it was updated for news or
> when committers were added.  That has all changed now.  The main
> website is now based on the nightly build of the documentation.
> Additionally, the API documentation is based on the nightly build and
> reflects what is in the trunk of SVN.  Nightly builds of the source
> (binary distributions) can now be located on the "Developers" page
> via the Resources left-hand menu.
>
> For those of you looking for documentation of a specific release, you
> can find it under the "Site Versions" section in the left-hand menu.
> Docs as far back as 1.4.3 are supported.  File a JIRA issue if you
> would like to see a prior release to that.
>
> For those looking to start contributing, the Resources-> Developers
> page has some helpful starting points.  Notably, the Clover test
> coverage reports show where we are lacking in test coverage.  Writing
> tests is a good way to get an understanding of what is going on
> inside Lucene and are always welcome.
>
> -Grant
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org
>
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_78924_20421842.1166909770348--

From java-user-return-25188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 23 23:08:31 2006
Return-Path: <java-user-return-25188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91435 invoked from network); 23 Dec 2006 23:08:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2006 23:08:30 -0000
Received: (qmail 59475 invoked by uid 500); 23 Dec 2006 23:08:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59449 invoked by uid 500); 23 Dec 2006 23:08:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59436 invoked by uid 99); 23 Dec 2006 23:08:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Dec 2006 15:08:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Dec 2006 15:08:21 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B0B4C5B774; Sat, 23 Dec 2006 15:08:00 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id A259E7F403
	for <java-user@lucene.apache.org>; Sat, 23 Dec 2006 15:08:00 -0800 (PST)
Date: Sat, 23 Dec 2006 15:08:00 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Website changes
In-Reply-To: <830BEF35-F92A-48F6-A1C9-C3E7928AD0A5@apache.org>
Message-ID: <Pine.LNX.4.58.0612231504100.29268@hal.rescomp.berkeley.edu>
References: <830BEF35-F92A-48F6-A1C9-C3E7928AD0A5@apache.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


I hate "me too" emials but i seriously can't thank Grant enough for doing
this ... documentation is one of hte least glamourous parts of a project,
and "revamping" documentation that already exists just to make it easier
to use is the least glamourous of all -- but having the multiple site
versions (and a simple framework for adding more as future releases come
out) is relaly going to make providing help for people using older
releases a lot easier -- not to mention making the "latest greatest"
documentation more visible both for users on the bleeding edge, and for
developers who dont' allways notice that their javadocs or xdocs changes
are malformed untill they see them on a web page.

Thanks a lot Grant.

: There have been several changes to the website (http://
: lucene.apache.org/java/docs/index.html) that may or may not affect
: how people use Lucene documentation.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 23 23:18:35 2006
Return-Path: <java-user-return-25189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92871 invoked from network); 23 Dec 2006 23:18:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2006 23:18:34 -0000
Received: (qmail 67605 invoked by uid 500); 23 Dec 2006 23:18:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67081 invoked by uid 500); 23 Dec 2006 23:18:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67070 invoked by uid 99); 23 Dec 2006 23:18:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Dec 2006 15:18:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Dec 2006 15:18:25 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id E72A25B776; Sat, 23 Dec 2006 15:18:04 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E23A27F403
	for <java-user@lucene.apache.org>; Sat, 23 Dec 2006 15:18:04 -0800 (PST)
Date: Sat, 23 Dec 2006 15:18:04 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Restrict result returned by Morelikethis
In-Reply-To: <857ffc970612231141l2e4bd704q2e7de06d0ed09592@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0612231515070.29268@hal.rescomp.berkeley.edu>
References: <857ffc970612231141l2e4bd704q2e7de06d0ed09592@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


You appear to be trying to use an old method from the java 1.4.3 API for
BooleanQuery, but i'm assuming you are acctually using Lucene 2.0 or 1.9
... take a look at the 2.0 javadocs for BooleanQuery and i think you'll
see how do what you are attempting...

http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/search/BooleanQuery.html

(the approach you are taking towards your goal is sound by the way)

: Date: Sat, 23 Dec 2006 20:41:18 +0100
: From: Nick Snels <nick.snels@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Restrict result returned by Morelikethis
:
: Hi,
:
: I have made a Morelikethis query to look up documents that match a certain
: document id. This results in a search of the whole index. I would like the
: Morelikethis query to search only part of the index. How can I do this?
:
: I have already tried to create a BooleanQuery, like:
:
: BooleanQuery comboQuery = new BooleanQuery();
: comboQuery.add(mltQuery, true, false);
: comboQuery.add(originalQuery, true, false);
:
: But I get the error: cannot find symbol
:                            [javac] symbol  : method add(
: org.apache.lucene.search.Query,boolean,boolean)
:
: What is the correct way to restrict the search area of a Morelikethis query?
: Any help is welcome. Thanks.
:
: Kind regards,
:
: Nick Snels
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 24 10:26:34 2006
Return-Path: <java-user-return-25190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89951 invoked from network); 24 Dec 2006 10:26:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2006 10:26:33 -0000
Received: (qmail 96718 invoked by uid 500); 24 Dec 2006 10:26:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96438 invoked by uid 500); 24 Dec 2006 10:26:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96424 invoked by uid 99); 24 Dec 2006 10:26:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Dec 2006 02:26:34 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of nick.snels@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Dec 2006 02:26:24 -0800
Received: by py-out-1112.google.com with SMTP id d32so777933pye
        for <java-user@lucene.apache.org>; Sun, 24 Dec 2006 02:26:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=d0g1HSl6JY2N9OHEkm2EdM49HMYnfw1Aq1zSQservIMxuxO5HPzq8D9x4/cB4uNWtqE2MFOSt77AxLdHswKICIt8QcNpNN9SG4FDsO04iGhA+4QZovI3IQ9vbSezULIGjXp5HKwQlH+M1tDMIuhy4Zqh72K+362mBZJELZvIGIw=
Received: by 10.35.100.6 with SMTP id c6mr8341938pym.1166955963384;
        Sun, 24 Dec 2006 02:26:03 -0800 (PST)
Received: by 10.35.43.1 with HTTP; Sun, 24 Dec 2006 02:26:03 -0800 (PST)
Message-ID: <857ffc970612240226j13dfd7c6j259282fa184babf4@mail.gmail.com>
Date: Sun, 24 Dec 2006 11:26:03 +0100
From: "Nick Snels" <nick.snels@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Restrict result returned by Morelikethis
In-Reply-To: <Pine.LNX.4.58.0612231515070.29268@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28445_8194673.1166955963350"
References: <857ffc970612231141l2e4bd704q2e7de06d0ed09592@mail.gmail.com>
	 <Pine.LNX.4.58.0612231515070.29268@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28445_8194673.1166955963350
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the reply. I was indeed using the 1.4.3 API, when I actually had
to use the 2.0 version. Thanks for pointing that out. Everything is working
now.

Kind regards,

Nick Snels


On 12/24/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> You appear to be trying to use an old method from the java 1.4.3 API for
> BooleanQuery, but i'm assuming you are acctually using Lucene 2.0 or 1.9
> ... take a look at the 2.0 javadocs for BooleanQuery and i think you'll
> see how do what you are attempting...
>
>
> http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/search/BooleanQuery.html
>
> (the approach you are taking towards your goal is sound by the way)
>
> : Date: Sat, 23 Dec 2006 20:41:18 +0100
> : From: Nick Snels <nick.snels@gmail.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Restrict result returned by Morelikethis
> :
> : Hi,
> :
> : I have made a Morelikethis query to look up documents that match a
> certain
> : document id. This results in a search of the whole index. I would like
> the
> : Morelikethis query to search only part of the index. How can I do this?
> :
> : I have already tried to create a BooleanQuery, like:
> :
> : BooleanQuery comboQuery = new BooleanQuery();
> : comboQuery.add(mltQuery, true, false);
> : comboQuery.add(originalQuery, true, false);
> :
> : But I get the error: cannot find symbol
> :                            [javac] symbol  : method add(
> : org.apache.lucene.search.Query,boolean,boolean)
> :
> : What is the correct way to restrict the search area of a Morelikethis
> query?
> : Any help is welcome. Thanks.
> :
> : Kind regards,
> :
> : Nick Snels
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_28445_8194673.1166955963350--

From java-user-return-25191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 24 14:35:31 2006
Return-Path: <java-user-return-25191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39198 invoked from network); 24 Dec 2006 14:35:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2006 14:35:20 -0000
Received: (qmail 54058 invoked by uid 500); 24 Dec 2006 14:35:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54026 invoked by uid 500); 24 Dec 2006 14:35:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54015 invoked by uid 99); 24 Dec 2006 14:35:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Dec 2006 06:35:20 -0800
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=RATWARE_MPOP_WEBMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.42.65.69] (HELO storage.ukr.net) (212.42.65.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Dec 2006 06:35:09 -0800
Received: from mail by storage.ukr.net with local ID 1GyUR5-0006F9-G2
	for java-user@lucene.apache.org; Sun, 24 Dec 2006 16:34:47 +0200
Received: from [213.130.3.211] by e.ukr.net with HTTP;
	Sun, 24 Dec 2006 14:34:47 +0000 (GMT)
From: "Alex Novik" <alex_nv@ukr.net>
To: java-user@lucene.apache.org
Reply-To: "Alex Novik" <alex_nv@ukr.net>
Subject: Better way for use lucene search in ejb
Mime-Version: 1.0
X-Mailer: mPOP Web-Mail 2.19 advanced
X-Originating-IP: [213.130.3.211]
Content-Type: text/plain; charset=windows-1251
Content-Transfer-Encoding: 8bit
Message-Id: <E1GyUR5-0006F9-G2@storage.ukr.net>
Date: Sun, 24 Dec 2006 16:34:47 +0200
X-Virus-Checked: Checked by ClamAV on apache.org

I try to use lucene search in j2ee server (generic). 

Problem - improve performance.

- Server works with java 1.4.
- Many ( > 100) call for each client. 
- Index less then 10000 documents.
- Index changed very rare.
- can't use MBean as JBoss.
- can't use java 1.5

1. If use RemoteSearchable and RMI call - degradation of performance.
2. JCA Connector lucenerar - create IndexReader for each client and don't use connection pool.

I think better way use RAMDirectory as singleton object in connector.

What is the best way to use lucene search in ejb and improve performance?

Thanks so much for any help you can give me.
Alex.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 26 02:01:32 2006
Return-Path: <java-user-return-25192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33435 invoked from network); 26 Dec 2006 02:01:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 02:01:30 -0000
Received: (qmail 18247 invoked by uid 500); 26 Dec 2006 02:01:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18204 invoked by uid 500); 26 Dec 2006 02:01:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18193 invoked by uid 99); 26 Dec 2006 02:01:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 18:01:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of suman.ghosh.1@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 18:01:20 -0800
Received: by nf-out-0910.google.com with SMTP id n28so3776135nfc
        for <java-user@lucene.apache.org>; Mon, 25 Dec 2006 18:00:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=tQOv0YvMiFL+tyAYbyHg0fHT4oGWiiOA0QFBIYEbljnnU3wGHmQ4m0xkClyvJyP8PxSP+ms5P/hzu5cldidq3YckJIQaHnfqE3bjH1R5dV2JhlXPtYtGSChtOA4aS3/shO+sj3xhJLKqpKLqdbsc2BX6zz+cghMeZUZj6Ulyqj4=
Received: by 10.48.220.15 with SMTP id s15mr15646182nfg.1167098458536;
        Mon, 25 Dec 2006 18:00:58 -0800 (PST)
Received: by 10.49.17.8 with HTTP; Mon, 25 Dec 2006 18:00:58 -0800 (PST)
Message-ID: <a6c7e1410612251800x60b0b5b8p166416edc71f5f2b@mail.gmail.com>
Date: Mon, 25 Dec 2006 21:00:58 -0500
From: "Suman Ghosh" <suman.ghosh.1@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: boosting instead of sorting WAS: to boost or not to boost
In-Reply-To: <458A70AE.5070405@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <45896589.5090505@uni-hd.de> <200612201905.14593@danielnaber.de>
	 <458A5A2F.5040207@uni-hd.de> <458A70AE.5070405@getopt.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Andrzej,

I have been trying to solve a similar problem where I need to boost
score based on the document type. Your approach is very interesting
and I want to give it a try.

I have a implementation specific question. When you mention to put as
many "1" as the boost need to be, do you mean that the resultant field
should look like "1 1 1 1 1" or "1,1,1,1,1" so that the content is
tokenized and indexed?

Suman

On 12/21/06, Andrzej Bialecki <ab@getopt.org> wrote:
> Martin Braun wrote:
> > Hi Daniel,
> >
> >
> >>> so a doc from 1973 should get a boost of 1.1973 and a doc of 1975 should
> >>> get a boost of 1.1975 .
> >>>
> >> The boost is stored with a limited resolution. Try boosting one doc by 10,
> >> the other one by 20 or something like that.
> >>
> >
> > You're right. I thought that with the float values the resolution should
> > be good enough!
> > But there is only a difference in the score with a boosting diff of 0.2
> > (e.g. 1.7 and 1.9).
> >
> > I know that there were many questions on the list regarding scoring
> > better new documents.
> > But I want to avoid any overhead like "FunctionQuery" at query time,
> > and in my case I have some documents
> > which have same values in many fields (=>same score) and the only
> > difference is the year.
> >
> > However  I don't want to overboost the score so that the scoring for
> > other criteria is not considered.
> >
> > Shortly spoken: As a result of a search I have a list of book titles and
> > I want  a sort by score AND by year of publication.
> >
> > But for performance reasons I want to avoid this sorting at query-time
> > by boosting at index time.
> >
> > Is that possible?
> >
>
> Here's the trick that works for me, without the issues of boost
> resolution or FunctionQuery.
>
> Add a separate field, say "days", in which you will put as many "1" as
> many days elapsed since the epoch (not neccessarily since 1 Jan 1970 -
> pick a date that makes sense for you). Then, if you want to prioritize
> newer documents, just add "+days:1" to your query. Voila - the final
> results are a sum of other score factors plus a score factor that is
> higher for more recent document, containing more 1-s.
>
> If you are dealing with large time spans, you can split this into years
> and days-in-a-year, and apply query boosts, like "+years:1^10.0
> +days:1^0.02". Do some experiments and find what works best for you.
>
>
> --
> Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 26 04:08:18 2006
Return-Path: <java-user-return-25193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52907 invoked from network); 26 Dec 2006 04:08:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 04:08:17 -0000
Received: (qmail 67795 invoked by uid 500); 26 Dec 2006 04:08:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67764 invoked by uid 500); 26 Dec 2006 04:08:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67753 invoked by uid 99); 26 Dec 2006 04:08:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 20:08:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 20:08:07 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gz3bO-0007Lv-Vv
	for java-user@lucene.apache.org; Mon, 25 Dec 2006 20:07:46 -0800
Message-ID: <8050926.post@talk.nabble.com>
Date: Mon, 25 Dec 2006 20:07:46 -0800 (PST)
From: Venkateshprasanna <prasannahmv@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Re: Extracting data from Lucene index files
In-Reply-To: <OF28B68FF1.56A41F1F-ON8825724B.00227D94-8825724B.00235371@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: prasannahmv@yahoo.co.in
References: <7850919.post@talk.nabble.com> <9CB86CF1-2489-46C8-B948-F6039783EA82@apache.org> <7984092.post@talk.nabble.com> <OF28B68FF1.56A41F1F-ON8825724B.00227D94-8825724B.00235371@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks a lot Doron, it worked fine and thanks for your tip as well!

Prasanna



Using term vectors means passing on the terms too many times - i.e
- loop on terms
- - loop on docs of a term
- - - loop on terms of a doc

Would something like this be better:
    do {
      System.out.println(tenum.term()+" appears in "+tenum.docFreq()+"
docs!");
      TermDocs td = reader.termDocs(tenum.term());
      do {
        System.out.println("  In doc id: "+td.doc() + " it appears: " +
td.freq()+ " times");
      } while (td.next());
    } while (tenum.next());


Also, you can skip faster to a certain doc (id) or certain term using the
skipTo() methods.

Doron


-- 
View this message in context: http://www.nabble.com/Extracting-data-from-Lucene-index-files-tf2813318.html#a8050926
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 26 07:36:35 2006
Return-Path: <java-user-return-25194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76159 invoked from network); 26 Dec 2006 07:36:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 07:36:34 -0000
Received: (qmail 97717 invoked by uid 500); 26 Dec 2006 07:36:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97262 invoked by uid 500); 26 Dec 2006 07:36:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97250 invoked by uid 99); 26 Dec 2006 07:36:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 23:36:33 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rhapsodelico@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Dec 2006 23:36:23 -0800
Received: by ug-out-1314.google.com with SMTP id k40so3615718ugc
        for <java-user@lucene.apache.org>; Mon, 25 Dec 2006 23:36:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=jQF9NmPVPPPnvSs3iYzv2iTjJRTUnbRkh0S8pakF2e98s7nsz2rf9Um51FO3j57tsQ9zRSnuEs9CNpfXRsKH6yhNlhlj95Xo7frYj44o2qdrgFcw7cSGFQa6acjDd+jwZcG/IE4t98xFQu8a/22w2TjOtDyE1gKJStbsBSnTP74=
Received: by 10.78.183.15 with SMTP id g15mr1857221huf.1167118562135;
        Mon, 25 Dec 2006 23:36:02 -0800 (PST)
Received: by 10.78.192.11 with HTTP; Mon, 25 Dec 2006 23:35:56 -0800 (PST)
Message-ID: <fbab201c0612252335l1b2965c3u48589434cd662c8a@mail.gmail.com>
Date: Tue, 26 Dec 2006 15:35:56 +0800
From: "ra do" <rhapsodelico@gmail.com>
To: java-user@lucene.apache.org
Subject: bridging php lucene: php-java-bridge or solr, anything else ? how facebook do search ?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_69964_14110023.1167118556938"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_69964_14110023.1167118556938
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi there,
i know this topic has been discussed over time.  it seems like the current
two most possible solutions are :

1) using php-java-bridge to call java class from php code
http://sourceforge.net/projects/php-java-bridge

2) deploy solr and interact with php through http & xml
http://incubator.apache.org/solr/features.html

i'm curious that, any other solution come up recently ?  i'm inclined to use
2)Solr as i don't want to mess up java with php.  does anyone have
experience on doing that in production environment ?

one more question, does anyone have idea how facebook implement their search
? facebook uses php, guess they should face the same problem, their solution
should be very worth to reference.

cheers,
anson

------=_Part_69964_14110023.1167118556938--

From java-user-return-25195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 26 09:33:36 2006
Return-Path: <java-user-return-25195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7772 invoked from network); 26 Dec 2006 09:33:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 09:33:34 -0000
Received: (qmail 65600 invoked by uid 500); 26 Dec 2006 09:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65149 invoked by uid 500); 26 Dec 2006 09:33:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65130 invoked by uid 99); 26 Dec 2006 09:33:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 01:33:35 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [220.225.240.22] (HELO mail01.naukri.com) (220.225.240.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 01:33:25 -0800
Received: from [172.16.0.162] ([172.16.0.162])
          by mail01.naukri.com (Lotus Domino Release 7.0)
          with ESMTP id 2006122614575457-15216 ;
          Tue, 26 Dec 2006 14:57:54 +0530 
Message-ID: <4590EC75.5090606@naukri.com>
Date: Tue, 26 Dec 2006 15:03:41 +0530
From: Kapil Chhabra <kapil.chhabra@naukri.com>
User-Agent: Thunderbird 1.5.0.8 (X11/20061107)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Nested Queries
X-MIMETrack: Itemize by SMTP Server on noidaa88/naukri(Release 7.0|August 18, 2005) at
 12/26/2006 02:57:54 PM,
	Serialize by Router on noidaa88/naukri(Release 7.0|August 18, 2005) at 12/26/2006
 02:58:17 PM,
	Serialize complete at 12/26/2006 02:58:17 PM
Content-Type: multipart/alternative;
 boundary="------------020904090507050505010205"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------020904090507050505010205
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Hi,

Please see the following data-structure
+--------+----------+
| FIELD1 | FIELD2   |
+--------+----------+
| 1      | 2,3,4,6, |
| 2      | 3,1,5,7, |
| 3      | 1,2,     |
| 4      | 1,8,10,  |
| 5      | 2,9,     |
| 6      | 1,       |
| 7      | 2,9,     |
| 8      | 4,9,     |
| 9      | 5,7,8,   |
| 10     | 4,       |
+--------+----------+

My requirement is to find all values in FIELD1 where FIELD2 contains all 
values of FIELD1 where FIELD2 contains 3
Which means something like
FIELD2:(FIELD2:3)

Is it possible to achieve this in a single query? If yes, then how 
should I go about it?



Thanks in anticipation,
kapilChhabra

--------------020904090507050505010205--

From java-user-return-25196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 26 09:47:38 2006
Return-Path: <java-user-return-25196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10807 invoked from network); 26 Dec 2006 09:47:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 09:47:37 -0000
Received: (qmail 78014 invoked by uid 500); 26 Dec 2006 09:47:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77984 invoked by uid 500); 26 Dec 2006 09:47:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77973 invoked by uid 99); 26 Dec 2006 09:47:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 01:47:36 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [220.225.240.22] (HELO mail01.naukri.com) (220.225.240.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 01:47:26 -0800
Received: from [172.16.0.162] ([172.16.0.162])
          by mail01.naukri.com (Lotus Domino Release 7.0)
          with ESMTP id 2006122615115660-15510 ;
          Tue, 26 Dec 2006 15:11:56 +0530 
Message-ID: <4590EFC1.3040907@naukri.com>
Date: Tue, 26 Dec 2006 15:17:45 +0530
From: Kapil Chhabra <kapil.chhabra@naukri.com>
User-Agent: Thunderbird 1.5.0.8 (X11/20061107)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Nested Queries
References: <4590EC75.5090606@naukri.com>
In-Reply-To: <4590EC75.5090606@naukri.com>
X-MIMETrack: Itemize by SMTP Server on noidaa88/naukri(Release 7.0|August 18, 2005) at
 12/26/2006 03:11:56 PM,
	Serialize by Router on noidaa88/naukri(Release 7.0|August 18, 2005) at 12/26/2006
 03:12:18 PM,
	Serialize complete at 12/26/2006 03:12:18 PM
Content-Type: multipart/alternative;
 boundary="------------080103040908090806090803"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------080103040908090806090803
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Just to mention, I have tokenized FIELD2 on "," and indexed it.

FIELD2:3 should return 1,2
FIELD2:(FIELD2:3) should return something like the output of:

*FIELD2: 1 OR FIELD2: 2

*
Regards,
kapilChhabra*
*

Kapil Chhabra wrote:
> Hi,
>
> Please see the following data-structure
> +--------+----------+
> | FIELD1 | FIELD2   |
> +--------+----------+
> | 1      | 2,3,4,6, |
> | 2      | 3,1,5,7, |
> | 3      | 1,2,     |
> | 4      | 1,8,10,  |
> | 5      | 2,9,     |
> | 6      | 1,       |
> | 7      | 2,9,     |
> | 8      | 4,9,     |
> | 9      | 5,7,8,   |
> | 10     | 4,       |
> +--------+----------+
>
> My requirement is to find all values in FIELD1 where FIELD2 contains 
> all values of FIELD1 where FIELD2 contains 3
> Which means something like
> FIELD2:(FIELD2:3)
>
> Is it possible to achieve this in a single query? If yes, then how 
> should I go about it?
>
>
>
> Thanks in anticipation,
> kapilChhabra
>


--------------080103040908090806090803--

From java-user-return-25197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 26 11:57:13 2006
Return-Path: <java-user-return-25197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28549 invoked from network); 26 Dec 2006 11:57:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 11:57:13 -0000
Received: (qmail 53309 invoked by uid 500); 26 Dec 2006 11:57:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53162 invoked by uid 500); 26 Dec 2006 11:57:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53151 invoked by uid 99); 26 Dec 2006 11:57:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 03:57:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [217.160.230.40] (HELO mout.perfora.net) (217.160.230.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 03:56:35 -0800
Received: from [61.12.8.93] (helo=[61.12.8.93])
	by mrelay.perfora.net (node=mrelayus0) with ESMTP (Nemesis),
	id 0MKoyl-1GzAuD3m5d-0005GP; Tue, 26 Dec 2006 06:55:43 -0500
Message-ID: <45910E21.1060903@insideview.com>
Date: Tue, 26 Dec 2006 17:27:21 +0530
From: Harini Raghavan <harini.raghavan@insideview.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Merge Index Filling up Disk Space
References: <458AB30F.6030908@insideview.com> <458AD25D.8050001@mikemccandless.com> <458BFA5C.1050904@insideview.com> <458C14AB.8060405@mikemccandless.com>
In-Reply-To: <458C14AB.8060405@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: perfora.net abuse@perfora.net login:9759476ad67fa08aca5d9352c82c69ea
X-Virus-Checked: Checked by ClamAV on apache.org

Yes I think I got hit IOException. I assumed that the.tmp files are not 
required and deleted them manually from the indes directory as they were 
more than 10G. Is that ok?

Michael McCandless wrote:

> Harini Raghavan wrote:
>
>> Thank you for the response. I don't have readers open on the index, 
>> but while the optimize/merge was running I was searching on the 
>> index. Would that make any difference?
>
>
> You're welcome!  Right, a searcher opens an IndexReader.  So this
> means you should see peak @ 3X the starting index size (assuming you
> don't re-open some readers during the optimize in which case it could
> be > 3X).
>
>> Also after the optimizing the index I had some .tmp files which were 
>> > 10G and did not get merged. Could that also be related to having 
>> searchers open while running optimize?
>
>
> If you hit a disk full, then, I would expect unused .tmp files to be
> left around.  Did you actually hit an IOException due to disk full,
> and, is the timestamp of these .tmp files around the time it occurred?
>
> Note that the trunk version of Lucene has been fixed to not leave such
> unreferenced files even on IOException, but that's not yet released.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
Harini Raghavan
Software Engineer
Office : +91-40-23556255
harini.raghavan@insideview.com
we think, you sell
www.InsideView.com
InsideView 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 26 12:01:21 2006
Return-Path: <java-user-return-25198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29590 invoked from network); 26 Dec 2006 12:01:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 12:01:21 -0000
Received: (qmail 58223 invoked by uid 500); 26 Dec 2006 12:01:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58181 invoked by uid 500); 26 Dec 2006 12:01:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58170 invoked by uid 99); 26 Dec 2006 12:01:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 04:01:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 04:01:10 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id EC3A0591F4
	for <java-user@lucene.apache.org>; Tue, 26 Dec 2006 06:59:58 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Tue, 26 Dec 2006 06:59:58 -0500
X-Sasl-enc: EYU6wLnQj1B23ri4MjDE+NpaeBghraj6HfDspqMOKp5g 1167134398
Received: from [75.209.236.187] (187.sub-75-209-236.myvzw.com [75.209.236.187])
	by mail.messagingengine.com (Postfix) with ESMTP id 082D71E3F1
	for <java-user@lucene.apache.org>; Tue, 26 Dec 2006 06:59:57 -0500 (EST)
Message-ID: <45910EEA.8030700@mikemccandless.com>
Date: Tue, 26 Dec 2006 07:00:42 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Merge Index Filling up Disk Space
References: <458AB30F.6030908@insideview.com> <458AD25D.8050001@mikemccandless.com> <458BFA5C.1050904@insideview.com> <458C14AB.8060405@mikemccandless.com> <45910E21.1060903@insideview.com>
In-Reply-To: <45910E21.1060903@insideview.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Harini Raghavan wrote:
> Yes I think I got hit IOException. I assumed that the.tmp files are not 
> required and deleted them manually from the indes directory as they were 
> more than 10G. Is that ok?

Yes, they are indeed not necessary so deleting them is fine.  This
(deleting partially created files on an Exception) is what the trunk
version of Lucene now does if it hits a disk full exception while
merging.

So I think everything here is explained now?  I will update the
javadocs with that additional caveat about open readers against the
index while optimizing.

> Michael McCandless wrote:
> 
>> Harini Raghavan wrote:
>>
>>> Thank you for the response. I don't have readers open on the index, 
>>> but while the optimize/merge was running I was searching on the 
>>> index. Would that make any difference?
>>
>>
>> You're welcome!  Right, a searcher opens an IndexReader.  So this
>> means you should see peak @ 3X the starting index size (assuming you
>> don't re-open some readers during the optimize in which case it could
>> be > 3X).
>>
>>> Also after the optimizing the index I had some .tmp files which were 
>>> > 10G and did not get merged. Could that also be related to having 
>>> searchers open while running optimize?
>>
>>
>> If you hit a disk full, then, I would expect unused .tmp files to be
>> left around.  Did you actually hit an IOException due to disk full,
>> and, is the timestamp of these .tmp files around the time it occurred?
>>
>> Note that the trunk version of Lucene has been fixed to not leave such
>> unreferenced files even on IOException, but that's not yet released.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 26 12:04:46 2006
Return-Path: <java-user-return-25199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30175 invoked from network); 26 Dec 2006 12:04:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 12:04:45 -0000
Received: (qmail 61657 invoked by uid 500); 26 Dec 2006 12:04:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61619 invoked by uid 500); 26 Dec 2006 12:04:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61607 invoked by uid 99); 26 Dec 2006 12:04:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 04:04:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [217.160.230.41] (HELO mout.perfora.net) (217.160.230.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 04:04:35 -0800
Received: from [61.12.8.93] (helo=[61.12.8.93])
	by mrelay.perfora.net (node=mrelayus1) with ESMTP (Nemesis),
	id 0MKp2t-1GzB2S2axR-0000JD; Tue, 26 Dec 2006 07:04:14 -0500
Message-ID: <45911020.9010704@insideview.com>
Date: Tue, 26 Dec 2006 17:35:52 +0530
From: Harini Raghavan <harini.raghavan@insideview.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Merge Index Filling up Disk Space
References: <458AB30F.6030908@insideview.com> <458AD25D.8050001@mikemccandless.com> <458BFA5C.1050904@insideview.com> <458C0035.1020104@gmail.com>
In-Reply-To: <458C0035.1020104@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: perfora.net abuse@perfora.net login:9759476ad67fa08aca5d9352c82c69ea
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have another related problem. I am adding news articles for a company 
to the lucene index. As of now if the articles are mapped to more than 
one company, they are added so many times in the index. As the no. of 
companies mapped to each article increases, this will not be a scalable 
implementation as documents will be duplicated in the index. Is there a 
way to model the lucene index in a relational way such that the articles 
can be stored in an index and article-company mapping can be modelled 
separately?

Thanks,
Harini

Mark Miller wrote:

> A Searcher uses a Reader to read the index for searching.
>
> - Mark
>
> Harini Raghavan wrote:
>
>> Hi Mike,
>>
>> Thank you for the response. I don't have readers open on the index, 
>> but while the optimize/merge was running I was searching on the 
>> index. Would that make any difference?
>> Also after the optimizing the index I had some .tmp files which were 
>> > 10G and did not get merged. Could that also be related to having 
>> searchers open while running optimize?
>>
>> -Harini
>>
>> Michael McCandless wrote:
>>
>>> Harini Raghavan wrote:
>>>
>>>> I am using lucene 1.9.1 for search functionality in my j2ee 
>>>> application using JBoss as app server. The lucene index directory 
>>>> size is almost 20G right now. There is a Quartz job that is adding 
>>>> data to the index evey min and around 20000 documents get added to 
>>>> the index every day.When the documents are added and the segments 
>>>> are merged, the index size increases and sometimes grows to more 
>>>> than double its original size. This results in filling up the disk 
>>>> space. We have allotted a f/s size of 50G and even that is not 
>>>> sufficient at times. Is there an optimum vales for the f/s size to 
>>>> be allotted in such scenario.
>>>> Any suggestions would be appreciated.
>>>
>>>
>>>
>>> I believe optimize should use at most 2X the starting index size,
>>> transiently, if there are no readers open against the index.  And then
>>> when optimize is done the size should be around the starting size, or
>>> less.
>>>
>>> If there are open readers against the index when the optimize occurs,
>>> then, the segments that were merged cannot actually be deleted until
>>> those readers close.  Even on Unix, where it will look like the
>>> segments were deleted, they are still consuming disk space because
>>> open file handles keep them allocated ("delete on last close").
>>>
>>> This means if you have open readers you should see at most 3X the
>>> starting index size.  Worse, if some (but not all) readers are
>>> re-opening while the merge is underway it's possible to peak at even
>>> more than 3X the starting size.
>>>
>>> Do you have readers running against your index?
>>>
>>> I will call this out in the javadocs for optimize, addDocument,
>>> addIndexes...
>>>
>>> Mike
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
Harini Raghavan
Software Engineer
Office : +91-40-23556255
harini.raghavan@insideview.com
we think, you sell
www.InsideView.com
InsideView 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 26 15:01:24 2006
Return-Path: <java-user-return-25200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69367 invoked from network); 26 Dec 2006 15:01:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 15:01:24 -0000
Received: (qmail 87984 invoked by uid 500); 26 Dec 2006 15:01:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86946 invoked by uid 500); 26 Dec 2006 15:01:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86935 invoked by uid 99); 26 Dec 2006 15:01:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 07:01:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 07:01:15 -0800
Received: by ug-out-1314.google.com with SMTP id k40so3693220ugc
        for <java-user@lucene.apache.org>; Tue, 26 Dec 2006 07:00:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BXl6GQW1nop6auuxBQxJu+YjEQ5PK2HTFD5y086W9eBNebc7rRzYKfXE/YzKUHQpvdZpESMXdSv3A1jOa4VRlqywXJ85u/kSTkFib7AtpwfqsSynAPE9g6lI/lc7p04MW10rtkPR7oLpjmvEo0TuzXuJNULV2WpIxrRSlSb2Znc=
Received: by 10.82.113.6 with SMTP id l6mr715771buc.1167145253594;
        Tue, 26 Dec 2006 07:00:53 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Tue, 26 Dec 2006 07:00:53 -0800 (PST)
Message-ID: <359a92830612260700j885b00fqd54b8c15d5a7439f@mail.gmail.com>
Date: Tue, 26 Dec 2006 10:00:53 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Merge Index Filling up Disk Space
In-Reply-To: <45911020.9010704@insideview.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_97298_3530673.1167145253523"
References: <458AB30F.6030908@insideview.com>
	 <458AD25D.8050001@mikemccandless.com>
	 <458BFA5C.1050904@insideview.com> <458C0035.1020104@gmail.com>
	 <45911020.9010704@insideview.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_97298_3530673.1167145253523
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

First, it probably would have been a good thing to start a new thread on
this topic, since it's only vaguely related to disk space <G>...

That said, sure. Note that there's no requirement in lucene that all
documents in an index have the same fields. Also, there's no reason you
can't use two separate indexes. Finally, you have to think about how many
times you are going to add update a given article when choosing your
approach. Here are several possibilities.

1> Add a field (tokenized) to each article in your index that contains IDs
of the companies you want to associate with that article. The downside here
is that you need to delete and re-add the document every time you want to
add a company to that article.

2> Create a separate index that contains that relationship.

3> have two kinds of documents in your index, one that indexes articles and
one that relates those to companies. Something like this:

Articles are indexed with "text" and "artid" fields. (NOTE: artid is NOT the
Lucene document ID, those change)
Relations are indexed with "id" and "company id" fields.

id and artid are your relationship. You *don't* want to name the field the
same for both kinds of documents since they would be indexed together.

Now, given a search over some text, you get back a bunch of article IDs. You
then search on the id field of the relations documents to extract company id
fields.

You may be able to do some interesting things with termdocs/termenums to
make this efficient, but don't go there unless you need to.

At this point, though, I've got to ask if you have access to a database in
your application. If you do, why not store the relations there? Lucene is a
text-search engine, not a relational database. This kind of relation may be
perfectly valid to implement in Lucene, but you want to be careful if you
find yourself trying to do any more RDBMS-like things.

Best
Erick

On 12/26/06, Harini Raghavan <harini.raghavan@insideview.com> wrote:
>
> Hi,
>
> I have another related problem. I am adding news articles for a company
> to the lucene index. As of now if the articles are mapped to more than
> one company, they are added so many times in the index. As the no. of
> companies mapped to each article increases, this will not be a scalable
> implementation as documents will be duplicated in the index. Is there a
> way to model the lucene index in a relational way such that the articles
> can be stored in an index and article-company mapping can be modelled
> separately?
>
> Thanks,
> Harini
>
> Mark Miller wrote:
>
> > A Searcher uses a Reader to read the index for searching.
> >
> > - Mark
> >
> > Harini Raghavan wrote:
> >
> >> Hi Mike,
> >>
> >> Thank you for the response. I don't have readers open on the index,
> >> but while the optimize/merge was running I was searching on the
> >> index. Would that make any difference?
> >> Also after the optimizing the index I had some .tmp files which were
> >> > 10G and did not get merged. Could that also be related to having
> >> searchers open while running optimize?
> >>
> >> -Harini
> >>
> >> Michael McCandless wrote:
> >>
> >>> Harini Raghavan wrote:
> >>>
> >>>> I am using lucene 1.9.1 for search functionality in my j2ee
> >>>> application using JBoss as app server. The lucene index directory
> >>>> size is almost 20G right now. There is a Quartz job that is adding
> >>>> data to the index evey min and around 20000 documents get added to
> >>>> the index every day.When the documents are added and the segments
> >>>> are merged, the index size increases and sometimes grows to more
> >>>> than double its original size. This results in filling up the disk
> >>>> space. We have allotted a f/s size of 50G and even that is not
> >>>> sufficient at times. Is there an optimum vales for the f/s size to
> >>>> be allotted in such scenario.
> >>>> Any suggestions would be appreciated.
> >>>
> >>>
> >>>
> >>> I believe optimize should use at most 2X the starting index size,
> >>> transiently, if there are no readers open against the index.  And then
> >>> when optimize is done the size should be around the starting size, or
> >>> less.
> >>>
> >>> If there are open readers against the index when the optimize occurs,
> >>> then, the segments that were merged cannot actually be deleted until
> >>> those readers close.  Even on Unix, where it will look like the
> >>> segments were deleted, they are still consuming disk space because
> >>> open file handles keep them allocated ("delete on last close").
> >>>
> >>> This means if you have open readers you should see at most 3X the
> >>> starting index size.  Worse, if some (but not all) readers are
> >>> re-opening while the merge is underway it's possible to peak at even
> >>> more than 3X the starting size.
> >>>
> >>> Do you have readers running against your index?
> >>>
> >>> I will call this out in the javadocs for optimize, addDocument,
> >>> addIndexes...
> >>>
> >>> Mike
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> --
> Harini Raghavan
> Software Engineer
> Office : +91-40-23556255
> harini.raghavan@insideview.com
> we think, you sell
> www.InsideView.com
> InsideView
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_97298_3530673.1167145253523--

From java-user-return-25201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 26 16:22:03 2006
Return-Path: <java-user-return-25201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85604 invoked from network); 26 Dec 2006 16:22:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 16:22:02 -0000
Received: (qmail 62360 invoked by uid 500); 26 Dec 2006 16:22:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62192 invoked by uid 500); 26 Dec 2006 16:22:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62181 invoked by uid 99); 26 Dec 2006 16:22:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 08:22:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a3.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 08:21:51 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a3.dreamhost.com (Postfix) with ESMTP id 1678E196EBC
	for <java-user@lucene.apache.org>; Tue, 26 Dec 2006 08:21:28 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <E1GyUR5-0006F9-G2@storage.ukr.net>
References: <E1GyUR5-0006F9-G2@storage.ukr.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <84520403-C1DC-44DF-B497-AE9BAEE8618A@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Better way for use lucene search in ejb
Date: Tue, 26 Dec 2006 11:21:27 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Alex,

This seems like a pretty small setup, so I think we may need some  
more info.  I don't know a lot about EJBs, but what I wonder is if  
your bean is opening an Index Searcher for every connection.  Perhaps  
you could describe your architecture a little bit more and that will  
help us figure out what is going on?

I wouldn't think you would need RMI or anything like that.

-Grant

On Dec 24, 2006, at 9:34 AM, Alex Novik wrote:

> I try to use lucene search in j2ee server (generic).
>
> Problem - improve performance.
>
> - Server works with java 1.4.
> - Many ( > 100) call for each client.
> - Index less then 10000 documents.
> - Index changed very rare.
> - can't use MBean as JBoss.
> - can't use java 1.5
>
> 1. If use RemoteSearchable and RMI call - degradation of performance.
> 2. JCA Connector lucenerar - create IndexReader for each client and  
> don't use connection pool.
>
> I think better way use RAMDirectory as singleton object in connector.
>
> What is the best way to use lucene search in ejb and improve  
> performance?
>
> Thanks so much for any help you can give me.
> Alex.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 26 19:19:09 2006
Return-Path: <java-user-return-25202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13537 invoked from network); 26 Dec 2006 19:19:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 19:19:08 -0000
Received: (qmail 24372 invoked by uid 500); 26 Dec 2006 19:19:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24330 invoked by uid 500); 26 Dec 2006 19:19:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24319 invoked by uid 99); 26 Dec 2006 19:19:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 11:19:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 11:18:59 -0800
Received: from [10.116.40.92] (inet20908nb-0.eranet.pl [213.158.196.100])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id kBQJImc04614
	for <java-user@lucene.apache.org>; Tue, 26 Dec 2006 13:18:49 -0600
Message-ID: <4591758E.7080400@getopt.org>
Date: Tue, 26 Dec 2006 20:18:38 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: boosting instead of sorting WAS: to boost or not to boost
References: <45896589.5090505@uni-hd.de> <200612201905.14593@danielnaber.de>	 <458A5A2F.5040207@uni-hd.de> <458A70AE.5070405@getopt.org> <a6c7e1410612251800x60b0b5b8p166416edc71f5f2b@mail.gmail.com>
In-Reply-To: <a6c7e1410612251800x60b0b5b8p166416edc71f5f2b@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Suman Ghosh wrote:
> Andrzej,
>
> I have been trying to solve a similar problem where I need to boost
> score based on the document type. Your approach is very interesting
> and I want to give it a try.
>
> I have a implementation specific question. When you mention to put as
> many "1" as the boost need to be, do you mean that the resultant field
> should look like "1 1 1 1 1" or "1,1,1,1,1" so that the content is
> tokenized and indexed?

Yes.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 26 19:35:05 2006
Return-Path: <java-user-return-25203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15495 invoked from network); 26 Dec 2006 19:35:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 19:35:04 -0000
Received: (qmail 40666 invoked by uid 500); 26 Dec 2006 19:35:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40622 invoked by uid 500); 26 Dec 2006 19:35:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40611 invoked by uid 99); 26 Dec 2006 19:35:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 11:35:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [62.209.45.174] (HELO outbound4-fra-R.bigfish.com) (62.209.45.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 11:34:54 -0800
Received: from outbound4-fra.bigfish.com (localhost.localdomain [127.0.0.1])
	by outbound4-fra-R.bigfish.com (Postfix) with ESMTP id D95918D819E
	for <java-user@lucene.apache.org>; Tue, 26 Dec 2006 19:34:32 +0000 (UTC)
Received: from mail12-fra-R.bigfish.com (unknown [10.4.252.3])
	by outbound4-fra.bigfish.com (Postfix) with ESMTP id D7AE085004B
	for <java-user@lucene.apache.org>; Tue, 26 Dec 2006 19:34:32 +0000 (UTC)
Received: from mail12-fra (localhost.localdomain [127.0.0.1])
	by mail12-fra-R.bigfish.com (Postfix) with ESMTP id C36FE6D81DF
	for <java-user@lucene.apache.org>; Tue, 26 Dec 2006 19:34:32 +0000 (UTC)
X-BigFish: VP
Received: by mail12-fra (MessageSwitch) id 1167161671512313_11781; Tue, 26 Dec 2006 19:34:31 +0000 (UCT)
Received: from localhost.localdomain (unknown [12.106.254.103])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail12-fra.bigfish.com (Postfix) with ESMTP id A056615806A
	for <java-user@lucene.apache.org>; Tue, 26 Dec 2006 19:34:30 +0000 (UTC)
Received: from tu_asynch_1.tuc.com (tu_asynch_1.tuc.com [10.1.1.201])
	by localhost.localdomain (8.12.10/8.12.10) with ESMTP id kBQJYSts024371
	for <java-user@lucene.apache.org>; Tue, 26 Dec 2006 13:34:28 -0600
Received: from DOMNTU-MTA by tu_asynch_1.tuc.com
	with Novell_GroupWise; Tue, 26 Dec 2006 13:34:28 -0600
Message-Id: <s59124e4.068@tu_asynch_1.tuc.com>
X-Mailer: Novell GroupWise Internet Agent 6.5.5 
Date: Tue, 26 Dec 2006 13:33:49 -0600
From: "Eric Haszlakiewicz" <EHASZLA@transunion.com>
To: <java-user@lucene.apache.org>
Subject: help finding docs, creating analyzer objects
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org


I'm been having a hard time finding any kind of reasonable
documentation 
on lucene.  It seems that the javadocs are mostly empty, and the stuff
on 
the wiki really doesn't explain anything.  Is there a better place to
be looking?

So far, I've managed to get some basic stuff working.  Now I'm trying
to 
figure out where to get a spanish analyzer from.  I found a message 
from 2003 where someone tried to contribute one, but it got rejected 
because there's something called a snowball analyzer that supposedly 
supports spanish, but again, I couldn't find any documentation for how
to 
use it.  The closest I could find was a snippet of code that did this:

        Analyzer analyzer = new SnowballAnalyzer("Spanish");
Is that correct?  How do I know what name to pass to the constructor?

I tried building some code with that, but it seems the jar file (lucene
2.0.0) 
is missing all the snowball stuff.  It doesn't seem to be in the source
zip file
either, so I'm not too surprised that it's not in the jar file, but
(perhaps 
you detect a trend here) I couldn't find any documentation about where

to get a complete jar file from.  Where can I get this from?

Eric


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 26 23:29:47 2006
Return-Path: <java-user-return-25205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15385 invoked from network); 26 Dec 2006 23:29:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 23:29:46 -0000
Received: (qmail 33740 invoked by uid 500); 26 Dec 2006 21:37:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33699 invoked by uid 500); 26 Dec 2006 21:37:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33688 invoked by uid 99); 26 Dec 2006 21:37:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 13:37:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [62.209.45.174] (HELO outbound4-fra-R.bigfish.com) (62.209.45.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 13:37:38 -0800
Received: from outbound4-fra.bigfish.com (localhost.localdomain [127.0.0.1])
	by outbound4-fra-R.bigfish.com (Postfix) with ESMTP id B25E7B920C7;
	Tue, 26 Dec 2006 21:37:16 +0000 (UTC)
Received: from mail61-fra-R.bigfish.com (unknown [10.4.252.3])
	by outbound4-fra.bigfish.com (Postfix) with ESMTP id B0BDA85004B;
	Tue, 26 Dec 2006 21:37:16 +0000 (UTC)
Received: from mail61-fra (localhost.localdomain [127.0.0.1])
	by mail61-fra-R.bigfish.com (Postfix) with ESMTP id A367E8201AA;
	Tue, 26 Dec 2006 21:37:16 +0000 (UTC)
X-BigFish: VP
Received: by mail61-fra (MessageSwitch) id 1167169035193135_13211; Tue, 26 Dec 2006 21:37:15 +0000 (UCT)
Received: from localhost.localdomain (unknown [12.106.254.103])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail61-fra.bigfish.com (Postfix) with ESMTP id CA24521006B;
	Tue, 26 Dec 2006 21:37:14 +0000 (UTC)
Received: from CHI4EXC01.corp.transunion.com (chi4exc01.corp.transunion.com [10.8.27.23])
	by localhost.localdomain (8.12.10/8.12.10) with ESMTP id kBQLbDts001543;
	Tue, 26 Dec 2006 15:37:13 -0600
Received: from CHI4EXC08.corp.transunion.com ([10.8.27.30]) by CHI4EXC01.corp.transunion.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 26 Dec 2006 15:37:12 -0600
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C72935.D5C7E000"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Re: help finding docs, creating analyzer objects
Date: Tue, 26 Dec 2006 15:36:00 -0600
Message-ID: <42F6F4E5EC226C42A823270D5C523A3E050ABE8B@CHI4EXC08.corp.transunion.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Re: help finding docs, creating analyzer objects
Thread-Index: AccpNf69hU+sYF63QPiDhdsA90MmEg==
From: "Haszlakiewicz, Eric" <EHASZLA@transunion.com>
To: <gsingers@apache.org>, <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Dec 2006 21:37:12.0973 (UTC) FILETIME=[0146ABD0:01C72936]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C72935.D5C7E000
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

>>> Grant Ingersoll 12/26/2006 2:43 PM >>>
Hi Eric,

>I'm sorry you are not finding what you need.   The snowball analyzers =20
>come in a separate jar, in the release zip, under the contrib/=20
>snowball directory.  You may also want/need the analyzers in contrib/=20
>analyzers for other languages.  The README delivered w/ the release =20

uh.. maybe I'm being dense, but where exactly would I find this =
directory?
It seems that all of the mirrors I look at don't have it, nor even does =
the
main(?) url  (i.e. http://www.apache.org/dist/lucene/java/)


>probably should be updated to state that this is where you find the =20
>additional analyzers.  I will do that shortly (which doesn't help =20
>you, but should help others going forward)

thanks.

>Have you gone through the demo and the "Getting Started" section: =20
>http://lucene.apache.org/java/docs/gettingstarted.html ?

yeah, I did, but all I found there was some info about a demo =
application,
a link to the aforementioned download directory, and some links to the
online sources through svn.

>There are a number of articles, presentations and books available, =20
>many of which are listed at http://wiki.apache.org/jakarta-lucene/=20
>Resources

I'll take a closer look.  I just figured the best documentation would be =
on
the actual lucene site.

>Additionally, the "Lucene In Action" book is quite good and most of =20
>it still applies to 2.0 (I think the URL is www.lucenebook.com).

I was hoping to find an online overview of how things are supposed to =
work.
i.e. some thing that explains what the important classes are, how to use
them, etc..  Also a definition of vocabulary would be nice.=20
Here's a just a brief selection of questions that I had (have)=20
What is javacc?  Why do I care?  What is snowball?  What is a stemmer, =
and=20
how/why would I use one.  What's a term vector?  What happens when you
add a the same field to a document twice?  How do I combine two queries?
(I figured some of these out, don't answer them now)

 I was able to pick out some info from the faq, but a lot of
that seems to assume you already know what you're doing.  I ended up
doing a lot of trial and error to get things going.

For instance, it took me forever just to figure out how to combine a =
couple=20
of queries together.  The apparently appropriately named AndQuery class,
isn't what it seems, and the javadocs don't say anything that would =
point me
towards the correct class (which seems to be BooleanQuery)

>Also, please add an issue or two for any specific places you feel are =20
>unclear or are lacking and hopefully they can be addressed.  Patches =20
>are always welcome, especially for documentation and the Wiki only =20
>requires a username password to edit.
>-Grant

I know much of what I just said is basically just complaining about the
level of documentation, and I'd be happy to help, but I'm still feeling
a bit overwhelmed with the amount of implied knowledge that seems
to be necessary, so picking out specific places is a bit difficult.

I suppose the most useful thing would be a better getting started guide
that actually explains how things work, rather than just saying "look at
this app".=20

eric


------_=_NextPart_001_01C72935.D5C7E000--


From java-user-return-25204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 26 23:37:11 2006
Return-Path: <java-user-return-25204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20228 invoked from network); 26 Dec 2006 23:37:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2006 23:37:10 -0000
Received: (qmail 87768 invoked by uid 500); 26 Dec 2006 20:43:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86807 invoked by uid 500); 26 Dec 2006 20:43:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86791 invoked by uid 99); 26 Dec 2006 20:43:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 12:43:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a10.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 12:43:41 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.dreamhost.com (Postfix) with ESMTP id 669581631DC
	for <java-user@lucene.apache.org>; Tue, 26 Dec 2006 12:43:19 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <s59124e4.068@tu_asynch_1.tuc.com>
References: <s59124e4.068@tu_asynch_1.tuc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <55F59CDA-F584-4329-B62F-4C3DC7C1DE77@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: help finding docs, creating analyzer objects
Date: Tue, 26 Dec 2006 15:43:16 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Eric,

I'm sorry you are not finding what you need.   The snowball analyzers  
come in a separate jar, in the release zip, under the contrib/ 
snowball directory.  You may also want/need the analyzers in contrib/ 
analyzers for other languages.  The README delivered w/ the release  
probably should be updated to state that this is where you find the  
additional analyzers.  I will do that shortly (which doesn't help  
you, but should help others going forward)

Have you gone through the demo and the "Getting Started" section:  
http://lucene.apache.org/java/docs/gettingstarted.html ?

There are a number of articles, presentations and books available,  
many of which are listed at http://wiki.apache.org/jakarta-lucene/ 
Resources

Additionally, the "Lucene In Action" book is quite good and most of  
it still applies to 2.0 (I think the URL is www.lucenebook.com).

Also, please add an issue or two for any specific places you feel are  
unclear or are lacking and hopefully they can be addressed.  Patches  
are always welcome, especially for documentation and the Wiki only  
requires a username password to edit.

-Grant

On Dec 26, 2006, at 2:33 PM, Eric Haszlakiewicz wrote:

>
> I'm been having a hard time finding any kind of reasonable
> documentation
> on lucene.  It seems that the javadocs are mostly empty, and the stuff
> on
> the wiki really doesn't explain anything.  Is there a better place to
> be looking?
>
> So far, I've managed to get some basic stuff working.  Now I'm trying
> to
> figure out where to get a spanish analyzer from.  I found a message
> from 2003 where someone tried to contribute one, but it got rejected
> because there's something called a snowball analyzer that supposedly
> supports spanish, but again, I couldn't find any documentation for how
> to
> use it.  The closest I could find was a snippet of code that did this:
>
>         Analyzer analyzer = new SnowballAnalyzer("Spanish");
> Is that correct?  How do I know what name to pass to the constructor?
>
> I tried building some code with that, but it seems the jar file  
> (lucene
> 2.0.0)
> is missing all the snowball stuff.  It doesn't seem to be in the  
> source
> zip file
> either, so I'm not too surprised that it's not in the jar file, but
> (perhaps
> you detect a trend here) I couldn't find any documentation about where
>
> to get a complete jar file from.  Where can I get this from?
>
> Eric
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 00:43:40 2006
Return-Path: <java-user-return-25206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39440 invoked from network); 27 Dec 2006 00:43:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 00:43:39 -0000
Received: (qmail 60709 invoked by uid 500); 27 Dec 2006 00:43:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59760 invoked by uid 500); 27 Dec 2006 00:43:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59749 invoked by uid 99); 27 Dec 2006 00:43:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 16:43:40 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.46.51.80] (HELO outbound2-sin-R.bigfish.com) (207.46.51.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 16:43:29 -0800
Received: from outbound2-sin.bigfish.com (localhost.localdomain [127.0.0.1])
	by outbound2-sin-R.bigfish.com (Postfix) with ESMTP id B22E514F5670;
	Wed, 27 Dec 2006 00:43:06 +0000 (UTC)
Received: from mail66-sin-R.bigfish.com (unknown [10.3.252.3])
	by outbound2-sin.bigfish.com (Postfix) with ESMTP id 99DC7528054;
	Wed, 27 Dec 2006 00:43:06 +0000 (UTC)
Received: from mail66-sin (localhost.localdomain [127.0.0.1])
	by mail66-sin-R.bigfish.com (Postfix) with ESMTP id 76CB74F822B;
	Wed, 27 Dec 2006 00:43:06 +0000 (UTC)
X-BigFish: VP
Received: by mail66-sin (MessageSwitch) id 1167180185427659_20394; Wed, 27 Dec 2006 00:43:05 +0000 (UCT)
Received: from localhost.localdomain (unknown [12.106.254.103])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail66-sin.bigfish.com (Postfix) with ESMTP id C4C92182007B;
	Wed, 27 Dec 2006 00:43:04 +0000 (UTC)
Received: from CHI4EXC02.corp.transunion.com ([10.8.27.24])
	by localhost.localdomain (8.12.10/8.12.10) with ESMTP id kBR0h1ts003808;
	Tue, 26 Dec 2006 18:43:01 -0600
Received: from CHI4EXC08.corp.transunion.com ([10.8.27.30]) by CHI4EXC02.corp.transunion.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 26 Dec 2006 18:43:01 -0600
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7294F.D1A8BC00"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Re: help finding docs, creating analyzer objects
Date: Tue, 26 Dec 2006 18:42:00 -0600
Message-ID: <42F6F4E5EC226C42A823270D5C523A3E0507ADD0@CHI4EXC08.corp.transunion.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Re: help finding docs, creating analyzer objects
Thread-Index: AccpT/UEs/jPitJjSqikvzkmd02OuQ==
From: "Haszlakiewicz, Eric" <EHASZLA@transunion.com>
To: <gsingers@apache.org>, <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Dec 2006 00:43:01.0470 (UTC) FILETIME=[F64C4FE0:01C7294F]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7294F.D1A8BC00
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

>>> Grant Ingersoll 12/26/2006 2:43 PM >>>
>I'm sorry you are not finding what you need.   The snowball analyzers =20
>come in a separate jar, in the release zip, under the contrib/=20
>snowball directory.  You may also want/need the analyzers in contrib/=20
>analyzers for other languages.  The README delivered w/ the release =20
>probably should be updated to state that this is where you find the =20
>additional analyzers.  I will do that shortly (which doesn't help =20
>you, but should help others going forward)

Well, I looked everywhere I could think of for this contrib directory, =
with
no luck.  I ended up having to go install subversion on a separate =
machine
(I'm working on a HPUX machine that I don't control), check out the
sources, build them (by hand, since the machine doesn't have ant either)
and make my own tarball.  ugh.

This was much more difficult than it should have been, but at least I =
think
I got it working.

eric


------_=_NextPart_001_01C7294F.D1A8BC00--


From java-user-return-25207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 01:33:05 2006
Return-Path: <java-user-return-25207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50641 invoked from network); 27 Dec 2006 01:33:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 01:33:04 -0000
Received: (qmail 2911 invoked by uid 500); 27 Dec 2006 01:33:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2872 invoked by uid 500); 27 Dec 2006 01:33:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2861 invoked by uid 99); 27 Dec 2006 01:33:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 17:33:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 17:32:54 -0800
Received: by py-out-1112.google.com with SMTP id a25so2273952pyi
        for <java-user@lucene.apache.org>; Tue, 26 Dec 2006 17:32:34 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=JS0H7drazvvjM9f+NutOjtttUzNTNqArW6NXphR4F6MneBd6vykx3LEG/Pa3O+CG7BLqVVcg/FnsSMhHkWWs2l7Nnde5PCi0zQiQ0Y89E5EK0RfnyadTo+LMJvroEztergmUfc+mP9W4bVzA5D8dJ+UUUsiUzCdSqSFetiv7YPQ=
Received: by 10.35.65.17 with SMTP id s17mr13309312pyk.1167183154132;
        Tue, 26 Dec 2006 17:32:34 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id 8sm6235986nzn.2006.12.26.17.32.32;
        Tue, 26 Dec 2006 17:32:33 -0800 (PST)
Message-ID: <4591CD32.3000302@gmail.com>
Date: Tue, 26 Dec 2006 20:32:34 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: help finding docs, creating analyzer objects
References: <42F6F4E5EC226C42A823270D5C523A3E0507ADD0@CHI4EXC08.corp.transunion.com>
In-Reply-To: <42F6F4E5EC226C42A823270D5C523A3E0507ADD0@CHI4EXC08.corp.transunion.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You sound like a man that wants a manual. Lucene In Action is the way to 
go. It targets 1.4 instead of 2.0, so I'm sure you will still have 
complaints, but if you want to get up to speed on Lucene fast, LIA is 
the way to go. LIA will give you the overview and important classes, and 
then the documentation you have seen so far will suffice to catch you up 
on the 2.0 changes. Like Grant mentioned, if you want to learn on the 
cheap there are plenty of articles that give a quick tutorial on the 
main Lucene classes and how to use them as well. Lucene is surprising 
simple to use and I think that has contributed to the non manual-ish 
style of documentation.

- Mark

Haszlakiewicz, Eric wrote:
>>>> Grant Ingersoll 12/26/2006 2:43 PM >>>
>>>>         
>> I'm sorry you are not finding what you need.   The snowball analyzers  
>> come in a separate jar, in the release zip, under the contrib/ 
>> snowball directory.  You may also want/need the analyzers in contrib/ 
>> analyzers for other languages.  The README delivered w/ the release  
>> probably should be updated to state that this is where you find the  
>> additional analyzers.  I will do that shortly (which doesn't help  
>> you, but should help others going forward)
>>     
>
> Well, I looked everywhere I could think of for this contrib directory, with
> no luck.  I ended up having to go install subversion on a separate machine
> (I'm working on a HPUX machine that I don't control), check out the
> sources, build them (by hand, since the machine doesn't have ant either)
> and make my own tarball.  ugh.
>
> This was much more difficult than it should have been, but at least I think
> I got it working.
>
> eric
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 01:49:09 2006
Return-Path: <java-user-return-25208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52227 invoked from network); 27 Dec 2006 01:49:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 01:49:09 -0000
Received: (qmail 17011 invoked by uid 500); 27 Dec 2006 01:49:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16972 invoked by uid 500); 27 Dec 2006 01:49:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16960 invoked by uid 99); 27 Dec 2006 01:49:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 17:49:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 17:48:59 -0800
Received: by nf-out-0910.google.com with SMTP id n28so4081334nfc
        for <java-user@lucene.apache.org>; Tue, 26 Dec 2006 17:48:38 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EBlStd8GT62EOCwadHArHvpFwC+K4XVv/b0tWvMHPPqUQt1Zd8N92NhGbGIx6pDZZ1owKnEHlqDh1F2KS3QGrdFINhEEl6yS+AQFDVsM1THZ2z3bRi5y/A1dR1crmYuaWk9gCgmyFZoxjTJp6Z0zsliCWQ9PI9jWoGU9GSL2SRk=
Received: by 10.82.105.13 with SMTP id d13mr595882buc.1167184118393;
        Tue, 26 Dec 2006 17:48:38 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Tue, 26 Dec 2006 17:48:38 -0800 (PST)
Message-ID: <359a92830612261748o2b49e28ex5956b14f6a0ff9ab@mail.gmail.com>
Date: Tue, 26 Dec 2006 20:48:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: help finding docs, creating analyzer objects
In-Reply-To: <42F6F4E5EC226C42A823270D5C523A3E0507ADD0@CHI4EXC08.corp.transunion.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_104888_28398833.1167184118367"
References: <42F6F4E5EC226C42A823270D5C523A3E0507ADD0@CHI4EXC08.corp.transunion.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_104888_28398833.1167184118367
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Did you look in contrib/snowball? It should have been unpacked along with
everything else when you unpacked lucene 2.0, it's named something like
lucene-showball-2.0.0.jar.

That said, I've also had to poke around to find things, and I still don't
understand large portions of what Lucene does for me. Of course, the
documentation I'd really like is always an example that does exactly what
I'm looking for right now and nothing else <G>. An interesting place to look
is the unit tests for examples of how various classes are used, but they
also suffer from a dearth of explanations about why I should care about a
particular class.

But considering that it's free and how generous the the main players have
been with their time answering questions for me, I really don't have
anything to complain about...

Best
Erick

On 12/26/06, Haszlakiewicz, Eric <EHASZLA@transunion.com> wrote:
>
> >>> Grant Ingersoll 12/26/2006 2:43 PM >>>
> >I'm sorry you are not finding what you need.   The snowball analyzers
> >come in a separate jar, in the release zip, under the contrib/
> >snowball directory.  You may also want/need the analyzers in contrib/
> >analyzers for other languages.  The README delivered w/ the release
> >probably should be updated to state that this is where you find the
> >additional analyzers.  I will do that shortly (which doesn't help
> >you, but should help others going forward)
>
> Well, I looked everywhere I could think of for this contrib directory,
> with
> no luck.  I ended up having to go install subversion on a separate machine
> (I'm working on a HPUX machine that I don't control), check out the
> sources, build them (by hand, since the machine doesn't have ant either)
> and make my own tarball.  ugh.
>
> This was much more difficult than it should have been, but at least I
> think
> I got it working.
>
> eric
>
>
>

------=_Part_104888_28398833.1167184118367--

From java-user-return-25209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 04:13:08 2006
Return-Path: <java-user-return-25209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72039 invoked from network); 27 Dec 2006 04:13:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 04:13:07 -0000
Received: (qmail 90452 invoked by uid 500); 27 Dec 2006 04:13:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90423 invoked by uid 500); 27 Dec 2006 04:13:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90412 invoked by uid 99); 27 Dec 2006 04:13:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 20:13:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.62] (HELO spunkymail-a15.dreamhost.com) (208.97.132.62)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 20:12:55 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a15.dreamhost.com (Postfix) with ESMTP id D872A7F016
	for <java-user@lucene.apache.org>; Tue, 26 Dec 2006 20:12:34 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <42F6F4E5EC226C42A823270D5C523A3E0507ADD0@CHI4EXC08.corp.transunion.com>
References: <42F6F4E5EC226C42A823270D5C523A3E0507ADD0@CHI4EXC08.corp.transunion.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <208C433B-5FB7-420A-AB48-82A5F62926F5@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: help finding docs, creating analyzer objects
Date: Tue, 26 Dec 2006 23:12:33 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Eric,

Take a look at http://lucene.apache.org/java/docs/releases.html

Clicking through to the appropriate mirror, download/unzip  
lucene-2.0.0.zip.  In it you'll find the jars, contrib, README, demo,  
etc.   It really should contain everything you need outside of the  
actual Lucene source to get started.

I appreciate your comments on the docs.  You have many good  
suggestions for improvements, especially the definitions, etc.  Some  
of your questions can best be answered by searching for those terms  
(on Google/Yahoo/Search Engine of Choice) and maybe doing a little  
reading on Information Retrieval, but I agree a definitions page  
would be useful as well as some info on what pieces are important to  
Lucene.   One of my hopes/intents/goals for Lucene in '07 is to  
increase the level of documentation, both at the lower level for  
developers/committers and at the higher level for end users.  As with  
all open source, however, this takes time and a group effort.

Please contribute back any suggestions that you think will clear  
things up.  See http://wiki.apache.org/jakarta-lucene/HowToContribute  
for info on how to give back to Lucene.

As always, search this list and ask questions.

-Grant

On Dec 26, 2006, at 7:42 PM, Haszlakiewicz, Eric wrote:

>>>> Grant Ingersoll 12/26/2006 2:43 PM >>>
>> I'm sorry you are not finding what you need.   The snowball analyzers
>> come in a separate jar, in the release zip, under the contrib/
>> snowball directory.  You may also want/need the analyzers in contrib/
>> analyzers for other languages.  The README delivered w/ the release
>> probably should be updated to state that this is where you find the
>> additional analyzers.  I will do that shortly (which doesn't help
>> you, but should help others going forward)
>
> Well, I looked everywhere I could think of for this contrib  
> directory, with
> no luck.  I ended up having to go install subversion on a separate  
> machine
> (I'm working on a HPUX machine that I don't control), check out the
> sources, build them (by hand, since the machine doesn't have ant  
> either)
> and make my own tarball.  ugh.
>
> This was much more difficult than it should have been, but at least  
> I think
> I got it working.
>
> eric
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 04:24:49 2006
Return-Path: <java-user-return-25210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72721 invoked from network); 27 Dec 2006 04:24:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 04:24:48 -0000
Received: (qmail 96787 invoked by uid 500); 27 Dec 2006 04:24:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96234 invoked by uid 500); 27 Dec 2006 04:24:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96220 invoked by uid 99); 27 Dec 2006 04:24:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 20:24:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [220.225.240.22] (HELO mail01.naukri.com) (220.225.240.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 20:24:39 -0800
Received: from [172.16.0.162] ([172.16.0.162])
          by mail01.naukri.com (Lotus Domino Release 7.0)
          with ESMTP id 2006122709485108-16875 ;
          Wed, 27 Dec 2006 09:48:51 +0530 
Message-ID: <4591F594.6020309@naukri.com>
Date: Wed, 27 Dec 2006 09:54:52 +0530
From: Kapil Chhabra <kapil.chhabra@naukri.com>
User-Agent: Thunderbird 1.5.0.8 (X11/20061107)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Nested Queries
References: <4590EC75.5090606@naukri.com> <4590EFC1.3040907@naukri.com>
In-Reply-To: <4590EFC1.3040907@naukri.com>
X-MIMETrack: Itemize by SMTP Server on noidaa88/naukri(Release 7.0|August 18, 2005) at
 12/27/2006 09:48:51 AM,
	Serialize by Router on noidaa88/naukri(Release 7.0|August 18, 2005) at 12/27/2006
 09:49:19 AM,
	Serialize complete at 12/27/2006 09:49:19 AM
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,
Any pointers in this direction?

Thanks in advance.

Kapil

Kapil Chhabra wrote:
> Just to mention, I have tokenized FIELD2 on "," and indexed it.
>
> FIELD2:3 should return 1,2
> FIELD2:(FIELD2:3) should return something like the output of:
>
> *FIELD2: 1 OR FIELD2: 2
>
> *
> Regards,
> kapilChhabra*
> *
>
> Kapil Chhabra wrote:
>> Hi,
>>
>> Please see the following data-structure
>> +--------+----------+
>> | FIELD1 | FIELD2   |
>> +--------+----------+
>> | 1      | 2,3,4,6, |
>> | 2      | 3,1,5,7, |
>> | 3      | 1,2,     |
>> | 4      | 1,8,10,  |
>> | 5      | 2,9,     |
>> | 6      | 1,       |
>> | 7      | 2,9,     |
>> | 8      | 4,9,     |
>> | 9      | 5,7,8,   |
>> | 10     | 4,       |
>> +--------+----------+
>>
>> My requirement is to find all values in FIELD1 where FIELD2 contains 
>> all values of FIELD1 where FIELD2 contains 3
>> Which means something like
>> FIELD2:(FIELD2:3)
>>
>> Is it possible to achieve this in a single query? If yes, then how 
>> should I go about it?
>>
>>
>>
>> Thanks in anticipation,
>> kapilChhabra
>>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 04:58:26 2006
Return-Path: <java-user-return-25211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74510 invoked from network); 27 Dec 2006 04:58:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 04:58:25 -0000
Received: (qmail 12199 invoked by uid 500); 27 Dec 2006 04:58:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12164 invoked by uid 500); 27 Dec 2006 04:58:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12153 invoked by uid 99); 27 Dec 2006 04:58:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 20:58:26 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FUZZY_AMBIEN
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 20:58:15 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A9D9C30EFC18; Tue, 26 Dec 2006 23:57:54 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id F282E30EFC16
	for <java-user@lucene.apache.org>; Tue, 26 Dec 2006 23:57:39 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <42F6F4E5EC226C42A823270D5C523A3E050ABE8B@CHI4EXC08.corp.transunion.com>
References: <42F6F4E5EC226C42A823270D5C523A3E050ABE8B@CHI4EXC08.corp.transunion.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6396C226-092A-4FB6-BB00-F93E574EF053@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: help finding docs, creating analyzer objects
Date: Tue, 26 Dec 2006 23:57:36 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=AWL,BAYES_00,FUZZY_AMBIEN,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1

Mark's message was very nice to see about LIA, but I want to reply  
and second Eric's comments about the Lucene distributable.  I just  
downloaded and unpacked the 2.0 .zip to test out a newbie to Lucene,  
but Java savvy (our target audience), experience.

I opened docs/index.html and the first thing I noticed was a broken  
image link to the ASF logo in the upper left corner.

Eric has some great points, that I'll reply to below...

On Dec 26, 2006, at 4:36 PM, Haszlakiewicz, Eric wrote:
>> I'm sorry you are not finding what you need.   The snowball analyzers
>> come in a separate jar, in the release zip, under the contrib/
>> snowball directory.  You may also want/need the analyzers in contrib/
>> analyzers for other languages.  The README delivered w/ the release
>
> uh.. maybe I'm being dense, but where exactly would I find this  
> directory?

In the unpacked lucene-2.0.0.zip file, there is a contrib directory  
with lots of goodies hidden in plain sight there.  You're certainly  
right that there is very little documentation available for this  
stuff, even in javadocs.  We should leverage the Java Lucene wiki  
(which needs to be moved from jakarta-lucene URL structure) a lot  
more, ala Solr, to let the community contribute to the documentation  
area much more freely on all these pieces.

> It seems that all of the mirrors I look at don't have it, nor even  
> does the
> main(?) url  (i.e. http://www.apache.org/dist/lucene/java/)

	<http://www.apache.org/dyn/closer.cgi/lucene/java/>

which is "free download" from here <http://lucene.apache.org/java>

>> Have you gone through the demo and the "Getting Started" section:
>> http://lucene.apache.org/java/docs/gettingstarted.html ?
>
> yeah, I did, but all I found there was some info about a demo  
> application,
> a link to the aforementioned download directory, and some links to the
> online sources through svn.

Sadly, our demo application is pretty pathetic.  A better index/ 
search demo could fairly easily be whipped up that actually was real- 
world usable without even writing code for basic file system document  
searching.  The demo is barely usable in this capacity.  Again, we  
should look to Solr to shed some light (heh) on this path.

A real-world usable demo (you know, like command-line switches to  
control the indexers parameters a lot more, and customizable output  
from the command-line searcher (what fields, CSV/XML output), with  
the web application providing some computer usable response (doesn't  
have to be nearly as fancy as Solr here, even *gasp* just XML would  
do the trick).

>> There are a number of articles, presentations and books available,
>> many of which are listed at http://wiki.apache.org/jakarta-lucene/
>> Resources
>
> I'll take a closer look.  I just figured the best documentation  
> would be on
> the actual lucene site.

Point well taken, Eric.  I concur.

>  was hoping to find an online overview of how things are supposed  
> to work.
> i.e. some thing that explains what the important classes are, how  
> to use
> them, etc..  Also a definition of vocabulary would be nice.
> Here's a just a brief selection of questions that I had (have)
> What is javacc?  Why do I care?  What is snowball?  What is a  
> stemmer, and
> how/why would I use one.  What's a term vector?  What happens when you
> add a the same field to a document twice?  How do I combine two  
> queries?
> (I figured some of these out, don't answer them now)

All very poignant points.  We do have javadocs, which is ultimately  
where the low-level API stuff should go, and with decent summary  
pages we can guide users to the important classes.  We have good  
stuff at the core Lucene API, but now that we are blending the  
contrib pieces in (as well see below) we've lowered our overall  
published documentation quality.  We need to hold the contrib pieces  
to at least core API documentation standards for acceptance into the  
codebase.

A definition of vocabulary fits perfectly on the wiki.

javacc should be fairly well hidden in the documentation as it is  
Lucene developer related, not end-user related (at least not for an  
initial user of Lucene, only after getting familiar with QueryParser  
should one really be venturing into javacc land).

Snowball would fit well into a glossary wiki area, as would term  
vector - with of course links to the appropriate API documentation.

Adding the same field multiple times ought to be on our FAQ wiki page  
(I just looked, it's not, and "searching" comes before "indexing" in  
the FAQ sections, awkwardly).  Those FAQ URLs, *ugh*, we really need  
an overhaul of that area structurally.

>  I was able to pick out some info from the faq, but a lot of
> that seems to assume you already know what you're doing.

Mea culpa.

>   I ended up
> doing a lot of trial and error to get things going.

As we all did.  And once most of us have it figured out it seems so  
easy and obvious that going back and writing documentation has little  
appeal.  Your bringing these issues up to the list is an atypical and  
welcome step.  It brings our weaknesses to the forefront and is  
likely to spark positive changes.

> For instance, it took me forever just to figure out how to combine  
> a couple
> of queries together.  The apparently appropriately named AndQuery  
> class,
> isn't what it seems, and the javadocs don't say anything that would  
> point me
> towards the correct class (which seems to be BooleanQuery)

Now that _is_ confusing.  Ouch.  This comes from blending in the  
contrib javadocs and sure enough AndQuery is exactly what I would  
have expected to use myself.  That change to the API docs, having the  
contrib blended in, is new to 2.0, and our contrib pieces are not as  
well javadoc'd as the core.  I can see having the contrib stuff  
javadoc'd separately, but it is also nice to see it all blended as  
well.  I'd love to see others thoughts on how to make this a better  
Newcene experience.

AndQuery is part of the surround query language, which has likely not  
gotten much usage in the field - only niche environments would use  
it, I think.  Having it named that way, and near the top of the API  
list is way misleading.

> I know much of what I just said is basically just complaining about  
> the
> level of documentation, and I'd be happy to help, but I'm still  
> feeling
> a bit overwhelmed with the amount of implied knowledge that seems
> to be necessary, so picking out specific places is a bit difficult.

> I suppose the most useful thing would be a better getting started  
> guide
> that actually explains how things work, rather than just saying  
> "look at
> this app".



We will learn from your experience, thanks to your forwardness as  
well as the specific details of where things are lacking.  There are  
some easy steps we can take to get things improved for our next release:

    * Leverage the wiki lots more for a glossary, quick start user  
guides, and FAQs
      (revamping the wiki structure, renaming the top-level URL would  
go a long way to encouraging its use, and learning from Solr's great  
lead)

    * Tighten up our API docs specifically on the contrib pieces.

    * Tidy up and generalize the demo application, ship Luke too (if  
possible, licensing-wise).

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 05:04:19 2006
Return-Path: <java-user-return-25212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75127 invoked from network); 27 Dec 2006 05:04:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 05:04:19 -0000
Received: (qmail 14847 invoked by uid 500); 27 Dec 2006 05:04:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14810 invoked by uid 500); 27 Dec 2006 05:04:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14799 invoked by uid 99); 27 Dec 2006 05:04:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 21:04:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 21:04:10 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AB1B030EFC18; Wed, 27 Dec 2006 00:03:49 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id D1B0D30EFC16
	for <java-user@lucene.apache.org>; Wed, 27 Dec 2006 00:03:46 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <6396C226-092A-4FB6-BB00-F93E574EF053@ehatchersolutions.com>
References: <42F6F4E5EC226C42A823270D5C523A3E050ABE8B@CHI4EXC08.corp.transunion.com> <6396C226-092A-4FB6-BB00-F93E574EF053@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E3790BD2-F63F-4392-82BF-28FF19EFDFDC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: help finding docs, creating analyzer objects
Date: Wed, 27 Dec 2006 00:03:41 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1

I want to again thank Grant for recently taking a dedicated lead  
effort on the documentation revamping.  I haven't yet built a recent  
archive from trunk to see what it's out of the box experience is  
like, but I'm guessing that at least the issue mentioned below has  
been alleviated (?).

	Erik


On Dec 26, 2006, at 11:57 PM, Erik Hatcher wrote:
> I opened docs/index.html and the first thing I noticed was a broken  
> image link to the ASF logo in the upper left corner.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 05:19:55 2006
Return-Path: <java-user-return-25213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76095 invoked from network); 27 Dec 2006 05:19:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 05:19:54 -0000
Received: (qmail 22119 invoked by uid 500); 27 Dec 2006 05:19:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21170 invoked by uid 500); 27 Dec 2006 05:19:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21158 invoked by uid 99); 27 Dec 2006 05:19:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Dec 2006 21:19:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 26 Dec 2006 21:19:43 -0800
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 963
          for <java-user@lucene.apache.org>;
          Tue, 26 Dec 2006 21:19:03 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <42F6F4E5EC226C42A823270D5C523A3E0507ADD0@CHI4EXC08.corp.transunion.com>
References: <42F6F4E5EC226C42A823270D5C523A3E0507ADD0@CHI4EXC08.corp.transunion.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A8426229-EC0C-4BB5-9E7B-FB9755DDA126@marketingbrokers.com>
Content-Transfer-Encoding: 7bit
From: "Peter W." <peter@marketingbrokers.com>
Subject: Re: help finding docs, creating analyzer objects
Date: Tue, 26 Dec 2006 21:19:02 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I just got this working in three or four steps:

1. goto http://www.apache.org/dyn/closer.cgi/lucene/java/
2. click on any of the mirrors and download "lucene-2.0.0.zip"
3. unzip into preferred directory (step not shown), then use jar to  
look at snowball items:

jar tvf /opt/lucene-2.0.0/contrib/snowball/lucene-snowball-2.0.0.jar
      0 Fri May 26 10:02:02 PDT 2006 META-INF/
    329 Fri May 26 10:02:00 PDT 2006 META-INF/MANIFEST.MF
      0 Fri May 26 10:02:00 PDT 2006 net/
      0 Fri May 26 10:02:00 PDT 2006 net/sf/
      0 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/
      0 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/
      0 Fri May 26 10:02:00 PDT 2006 org/
      0 Fri May 26 10:02:00 PDT 2006 org/apache/
      0 Fri May 26 10:02:00 PDT 2006 org/apache/lucene/
      0 Fri May 26 10:02:00 PDT 2006 org/apache/lucene/analysis/
      0 Fri May 26 10:02:00 PDT 2006 org/apache/lucene/analysis/ 
snowball/
   1094 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/Among.class
   7339 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ 
SnowballProgram.class
   3018 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/TestApp.class
   5045 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/ 
DanishStemmer.class
   6786 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/ 
DutchStemmer.class
10857 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/ 
EnglishStemmer.class
   9955 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/ 
FinnishStemmer.class
12833 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/ 
FrenchStemmer.class
   5916 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/ 
German2Stemmer.class
   5580 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/ 
GermanStemmer.class
12375 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/ 
ItalianStemmer.class
14522 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/KpStemmer.class
21583 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/ 
LovinsStemmer.class
   4170 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/ 
NorwegianStemmer.class
   7916 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/ 
PorterStemmer.class
11813 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/ 
PortugueseStemmer.class
   8318 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/ 
RussianStemmer.class
12239 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/ 
SpanishStemmer.class
   4393 Fri May 26 10:02:00 PDT 2006 net/sf/snowball/ext/ 
SwedishStemmer.class
   1608 Fri May 26 10:02:00 PDT 2006 org/apache/lucene/analysis/ 
snowball/SnowballAnalyzer.class
   2415 Fri May 26 10:02:00 PDT 2006 org/apache/lucene/analysis/ 
snowball/SnowballFilter.class

Other, lucene specific analyzers are in lucene-2.0.0/contrib/ 
analyzers/lucene-analyzers-2.0.0.jar

Regards,

Peter


On Dec 26, 2006, at 4:42 PM, Haszlakiewicz, Eric wrote:

>>>> Grant Ingersoll 12/26/2006 2:43 PM >>>
>> I'm sorry you are not finding what you need.   The snowball analyzers
>> come in a separate jar, in the release zip, under the contrib/
>> snowball directory.  You may also want/need the analyzers in contrib/
>> analyzers for other languages.  The README delivered w/ the release
>> probably should be updated to state that this is where you find the
>> additional analyzers.  I will do that shortly (which doesn't help
>> you, but should help others going forward)
>
> Well, I looked everywhere I could think of for this contrib  
> directory, with
> no luck.  I ended up having to go install subversion on a separate  
> machine
> (I'm working on a HPUX machine that I don't control), check out the
> sources, build them (by hand, since the machine doesn't have ant  
> either)
> and make my own tarball.  ugh.
>
> This was much more difficult than it should have been, but at least  
> I think
> I got it working.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 13:13:11 2006
Return-Path: <java-user-return-25214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91270 invoked from network); 27 Dec 2006 13:13:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 13:13:10 -0000
Received: (qmail 49981 invoked by uid 500); 27 Dec 2006 13:13:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49947 invoked by uid 500); 27 Dec 2006 13:13:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49934 invoked by uid 99); 27 Dec 2006 13:13:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 05:13:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a18.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 05:13:00 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.dreamhost.com (Postfix) with ESMTP id 89E305B532
	for <java-user@lucene.apache.org>; Wed, 27 Dec 2006 05:12:39 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <4590EFC1.3040907@naukri.com>
References: <4590EC75.5090606@naukri.com> <4590EFC1.3040907@naukri.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <523922D6-332D-48DB-961B-A9E3C5A3C897@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Nested Queries
Date: Wed, 27 Dec 2006 08:12:36 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Kapil,

I am not sure exactly what you asking, could you give an example of  
the correct response?  Also, are you truly using numbers or are they  
just substitutes for text?  And are they part of a bigger problem  
requiring Lucene? If it is just numbers, maybe a DB might be the  
better way to go, since you would have SET operations that may make  
this easier.  Not saying Lucene can't do what you want, just thinking  
there are other ways

-Grant

On Dec 26, 2006, at 4:47 AM, Kapil Chhabra wrote:

> Just to mention, I have tokenized FIELD2 on "," and indexed it.
>
> FIELD2:3 should return 1,2
> FIELD2:(FIELD2:3) should return something like the output of:
>
> *FIELD2: 1 OR FIELD2: 2
>
> *
> Regards,
> kapilChhabra*
> *
>
> Kapil Chhabra wrote:
>> Hi,
>>
>> Please see the following data-structure
>> +--------+----------+
>> | FIELD1 | FIELD2   |
>> +--------+----------+
>> | 1      | 2,3,4,6, |
>> | 2      | 3,1,5,7, |
>> | 3      | 1,2,     |
>> | 4      | 1,8,10,  |
>> | 5      | 2,9,     |
>> | 6      | 1,       |
>> | 7      | 2,9,     |
>> | 8      | 4,9,     |
>> | 9      | 5,7,8,   |
>> | 10     | 4,       |
>> +--------+----------+
>>
>> My requirement is to find all values in FIELD1 where FIELD2  
>> contains all values of FIELD1 where FIELD2 contains 3
>> Which means something like
>> FIELD2:(FIELD2:3)
>>
>> Is it possible to achieve this in a single query? If yes, then how  
>> should I go about it?
>>
>>
>>
>> Thanks in anticipation,
>> kapilChhabra
>>
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 14:43:35 2006
Return-Path: <java-user-return-25215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10180 invoked from network); 27 Dec 2006 14:43:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 14:43:34 -0000
Received: (qmail 18454 invoked by uid 500); 27 Dec 2006 14:43:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18415 invoked by uid 500); 27 Dec 2006 14:43:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18404 invoked by uid 99); 27 Dec 2006 14:43:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 06:43:33 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [65.199.122.2] (HELO mainsequence.net) (65.199.122.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 06:43:22 -0800
Received: from 127.0.0.1 ([68.164.221.250])
	by mainsequence.net (mainsequence.net)
	(MDaemon PRO v9.5.4)
	with ESMTP id md50003235773.msg
	for <java-user@lucene.apache.org>; Wed, 27 Dec 2006 09:42:59 -0500
Reply-To: "Chris Salem" <chris@mainsequence.net>
From: "Chris Salem" <chris@mainsequence.net>
To: java-user@lucene.apache.org
CC: 
Subject: toomanyclauses exception
Date: Wed, 27 Dec 2006 14:42:55 -0000
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: PCRecruiter Emulation of Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: PCRecruiter Emulation of Microsoft MimeOLE V6.00.2800.1441
MIME-Version: 1.0
Content-Type: multipart/alternative;
      boundary="----=_pcr0F27DAFFC5A44493866468DF40EA4F81section1-b1"
X-Spam-Processed: mainsequence.net, Wed, 27 Dec 2006 09:42:59 -0500
	(not processed: message from valid local sender)
X-MDRemoteIP: 68.164.221.250
X-Return-Path: chris@mainsequence.net
X-Envelope-From: chris@mainsequence.net
X-MDaemon-Deliver-To: java-user@lucene.apache.org
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20061227144326.0D8F610FB00A@herse.apache.org>

------=_pcr0F27DAFFC5A44493866468DF40EA4F81section1-b1
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hi All,

I'm getting a 'TooManyClauses' Exception and I'm not sure how to fix this.  Here's a sample query that I'm using:

+(+freeform_text:exhibit* +(+freeform_text:dispaly +freeform_text:event*) +(+freeform_text:sale* +freeform_text:sells +freeform_text:develop*) +(+freeform_text:trade +freeform_text:show +freeform_text:trade +freeform_text:shows)) +degree_type:5 +position_desired:ftp +city:washington~0.5 +state:dc +ncountry:usa +last_modified:[2005-12-26 TO 2006-12-26]

Here's the exception I'm getting:

org.apache.lucene.search.BooleanQuery$TooManyClauses
 at org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:160)
 at org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:151)
 at org.apache.lucene.search.PrefixQuery.rewrite(PrefixQuery.java:52)
 at org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:372)
 at org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:372)
 at org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:372)
 at org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:137)
 at org.apache.lucene.search.Query.weight(Query.java:93)
 at org.apache.lucene.search.Hits.<init>(Hits.java:41)
 at org.apache.lucene.search.Searcher.search(Searcher.java:44)
 at org.apache.lucene.search.Searcher.search(Searcher.java:36)
 at net.mainsequence.pcr.lucene.LuceneHandler.multiSearch(LuceneHandler.java:382)
 at net.mainsequence.pcr.lucene.LuceneServlet.searchIndex(LuceneServlet.java:169)
 at net.mainsequence.pcr.lucene.LuceneServlet.processRequest(LuceneServlet.java:83)
 at net.mainsequence.pcr.lucene.LuceneServlet.doPost(LuceneServlet.java:72)
 at javax.servlet.http.HttpServlet.service(HttpServlet.java:709)
 at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
 at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
 at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
 at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
 at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
 at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
 at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
 at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)
 at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)
 at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
 at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
 at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
 at java.lang.Thread.run(Unknown Source)

Is there anyway to increase the amount of clauses lucene can take?  This kind of large query is not uncommon so any help would be greatly appreciated.


Chris Salem
440.946.5214 x5458
chris@mainsequence.net 

(The following links were included with this email:)
mailto:chris@mainsequence.net



(The following links were included with this email:)
mailto:chris@mainsequence.net



------=_pcr0F27DAFFC5A44493866468DF40EA4F81section1-b1--




From java-user-return-25216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 14:59:51 2006
Return-Path: <java-user-return-25216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12115 invoked from network); 27 Dec 2006 14:59:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 14:59:51 -0000
Received: (qmail 35013 invoked by uid 500); 27 Dec 2006 14:59:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34278 invoked by uid 500); 27 Dec 2006 14:59:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34261 invoked by uid 99); 27 Dec 2006 14:59:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 06:59:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.25] (HELO smtp-vbr5.xs4all.nl) (194.109.24.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 06:59:39 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr5.xs4all.nl (8.13.8/8.13.8) with ESMTP id kBRExHJG019771
	for <java-user@lucene.apache.org>; Wed, 27 Dec 2006 15:59:18 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: toomanyclauses exception
Date: Wed, 27 Dec 2006 15:59:15 +0100
User-Agent: KMail/1.8.2
References: <20061227144326.0D8F610FB00A@herse.apache.org>
In-Reply-To: <20061227144326.0D8F610FB00A@herse.apache.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200612271559.16617.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Chris,

On Wednesday 27 December 2006 15:42, Chris Salem wrote:
> Hi All,
> 
> I'm getting a 'TooManyClauses' Exception and I'm not sure how to fix this.  
Here's a sample query that I'm using:
> 
> +(+freeform_text:exhibit* +(+freeform_text:dispaly +freeform_text:event*) 
+(+freeform_text:sale* +freeform_text:sells +freeform_text:develop*) 
+(+freeform_text:trade +freeform_text:show +freeform_text:trade 
+freeform_text:shows)) +degree_type:5 +position_desired:ftp 
+city:washington~0.5 +state:dc +ncountry:usa +last_modified:[2005-12-26 TO 
2006-12-26]
> 
> Here's the exception I'm getting:
> 
> org.apache.lucene.search.BooleanQuery$TooManyClauses
>  at org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:160)
>  at org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:151)
>  at org.apache.lucene.search.PrefixQuery.rewrite(PrefixQuery.java:52)

One of the prefix queries is causing this, possibly event* or sale*.
Since they seem to be specific enough, increasing the maximum number
of boolean clauses that can be added to a boolean query appears to be
the good way to fix this, see BooleanQuery.setMaxClauseCount().

Regards,
Paul Elschot

>  at org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:372)
>  at org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:372)
>  at org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:372)
>  at org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:137)
>  at org.apache.lucene.search.Query.weight(Query.java:93)
>  at org.apache.lucene.search.Hits.<init>(Hits.java:41)
>  at org.apache.lucene.search.Searcher.search(Searcher.java:44)
>  at org.apache.lucene.search.Searcher.search(Searcher.java:36)
>  at 
net.mainsequence.pcr.lucene.LuceneHandler.multiSearch(LuceneHandler.java:382)
>  at 
net.mainsequence.pcr.lucene.LuceneServlet.searchIndex(LuceneServlet.java:169)
>  at 
net.mainsequence.pcr.lucene.LuceneServlet.processRequest(LuceneServlet.java:83)
>  at net.mainsequence.pcr.lucene.LuceneServlet.doPost(LuceneServlet.java:72)
>  at javax.servlet.http.HttpServlet.service(HttpServlet.java:709)
>  at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
>  at 
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
>  at 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
>  at 
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
>  at 
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
>  at 
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
>  at 
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
>  at 
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
>  at 
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
>  at 
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)
>  at 
org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)
>  at 
org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
>  at 
org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
>  at 
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
>  at java.lang.Thread.run(Unknown Source)
> 
> Is there anyway to increase the amount of clauses lucene can take?  This 
kind of large query is not uncommon so any help would be greatly appreciated.
> 
> 
> Chris Salem
> 440.946.5214 x5458
> chris@mainsequence.net 
> 
> (The following links were included with this email:)
> mailto:chris@mainsequence.net
> 
> 
> 
> (The following links were included with this email:)
> mailto:chris@mainsequence.net
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 15:54:25 2006
Return-Path: <java-user-return-25217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22357 invoked from network); 27 Dec 2006 15:54:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 15:54:24 -0000
Received: (qmail 99341 invoked by uid 500); 27 Dec 2006 15:54:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99312 invoked by uid 500); 27 Dec 2006 15:54:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99301 invoked by uid 99); 27 Dec 2006 15:54:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 07:54:23 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 07:54:13 -0800
Received: by nf-out-0910.google.com with SMTP id n28so4271607nfc
        for <java-user@lucene.apache.org>; Wed, 27 Dec 2006 07:53:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rliyKZza5jOM8AlqYKXWY6mpO/NgxpUmDNFgkJDLE3ld4aTt1EsBpXe98F4ol9y1dkXQCgXljpODhirZ/CVvFkmtGcOgWVkxPWmNe4UWgHCaVRJudIcbXLQnWhhLG4g8D9WDXpWJlevhnnMG0ZRa/wn867pbznip6h958/8HHz4=
Received: by 10.82.152.16 with SMTP id z16mr366061bud.1167234831321;
        Wed, 27 Dec 2006 07:53:51 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 27 Dec 2006 07:53:51 -0800 (PST)
Message-ID: <359a92830612270753x3d0e3511g634b8e9c145d4034@mail.gmail.com>
Date: Wed, 27 Dec 2006 10:53:51 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: toomanyclauses exception
In-Reply-To: <200612271559.16617.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_111535_15703071.1167234831288"
References: <20061227144326.0D8F610FB00A@herse.apache.org>
	 <200612271559.16617.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_111535_15703071.1167234831288
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Also, see the thread on this list titled "I just don't get wildcards at all"
to see an extensive discussion of this issue, as well as wildcards in
general. You might also search the archive for wildcards. The short form is
that any wildcard (including prefix queries) expands under the covers to
create a clause for each possible entry in the index for that field. For
instance, say a field had the following values:

abcd
abck
abt

Searching for ab* would expand to searching for ab, abck and abt under the
covers. When the number of possibilities gets above the default value of
1024, you see a TooManyClauses exception. Expanding the number of clauses
*may* fix you right up, but on any reasonably sized index, you can come up
with a query that'll exceed whatever number you set. Or you'll get to an
unacceptable performance/memory footprint. Imagine your query with things
like a*

Think seriously about how you're going to deal with this. There are several
options:
1> use filters for all your wildcard clauses and create your own
BooleanQuery. Be aware that using filters affects scoring.
2> Assume that any query that throws a TooManyClauses exception (after
you've set a suitable max as Paul suggested) is too broad to be useful and
respond to the user with some polite phrase asking them to refine the query.
3> Look over the SrndQuery classes. I don't fully understand these, but they
certainly behave much differently in this area. Note that SrndQuery limits
wildcards to having at least three non-wildcard characters.
4> Ask whether stemming is a complete or partial solution. Ditto for
Soundex. There's a good chance these won't apply, but they may.
5> <Insert the solution to your specific problem here>

This is a sticky wicket that will probably consume more time than you think
to handle. It's easy for your product manager to claim that "Of course, we
must support arbitrary wildcards", but I'd urge you to seriously ask what
value *arbitrary* wildcards bring to the product. When you start getting
thousands of responses to a query, is it actually valuable to return them to
the user? Or do you give her just as much value (and deliver product sooner)
by telling her up front that she's getting too many responses to be useful?
With this last strategy, you just catch the TooManyClauses exception and
respond with "refine your query".....

Best
Erick


On 12/27/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> Chris,
>
> On Wednesday 27 December 2006 15:42, Chris Salem wrote:
> > Hi All,
> >
> > I'm getting a 'TooManyClauses' Exception and I'm not sure how to fix
> this.
> Here's a sample query that I'm using:
> >
> > +(+freeform_text:exhibit* +(+freeform_text:dispaly
> +freeform_text:event*)
> +(+freeform_text:sale* +freeform_text:sells +freeform_text:develop*)
> +(+freeform_text:trade +freeform_text:show +freeform_text:trade
> +freeform_text:shows)) +degree_type:5 +position_desired:ftp
> +city:washington~0.5 +state:dc +ncountry:usa +last_modified:[2005-12-26 TO
> 2006-12-26]
> >
> > Here's the exception I'm getting:
> >
> > org.apache.lucene.search.BooleanQuery$TooManyClauses
> >  at org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:160)
> >  at org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:151)
> >  at org.apache.lucene.search.PrefixQuery.rewrite(PrefixQuery.java:52)
>
> One of the prefix queries is causing this, possibly event* or sale*.
> Since they seem to be specific enough, increasing the maximum number
> of boolean clauses that can be added to a boolean query appears to be
> the good way to fix this, see BooleanQuery.setMaxClauseCount().
>
> Regards,
> Paul Elschot
>
> >  at org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:372)
> >  at org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:372)
> >  at org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:372)
> >  at org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java
> :137)
> >  at org.apache.lucene.search.Query.weight(Query.java:93)
> >  at org.apache.lucene.search.Hits.<init>(Hits.java:41)
> >  at org.apache.lucene.search.Searcher.search(Searcher.java:44)
> >  at org.apache.lucene.search.Searcher.search(Searcher.java:36)
> >  at
> net.mainsequence.pcr.lucene.LuceneHandler.multiSearch(LuceneHandler.java
> :382)
> >  at
> net.mainsequence.pcr.lucene.LuceneServlet.searchIndex(LuceneServlet.java
> :169)
> >  at
> net.mainsequence.pcr.lucene.LuceneServlet.processRequest(
> LuceneServlet.java:83)
> >  at net.mainsequence.pcr.lucene.LuceneServlet.doPost(LuceneServlet.java
> :72)
> >  at javax.servlet.http.HttpServlet.service(HttpServlet.java:709)
> >  at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
> >  at
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(
> ApplicationFilterChain.java:252)
> >  at
> org.apache.catalina.core.ApplicationFilterChain.doFilter(
> ApplicationFilterChain.java:173)
> >  at
> org.apache.catalina.core.StandardWrapperValve.invoke(
> StandardWrapperValve.java:213)
> >  at
> org.apache.catalina.core.StandardContextValve.invoke(
> StandardContextValve.java:178)
> >  at
> org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java
> :126)
> >  at
> org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java
> :105)
> >  at
> org.apache.catalina.core.StandardEngineValve.invoke(
> StandardEngineValve.java:107)
> >  at
> org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java
> :148)
> >  at
> org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)
> >  at
>
> org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection
> (Http11BaseProtocol.java:664)
> >  at
> org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(
> PoolTcpEndpoint.java:527)
> >  at
> org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(
> LeaderFollowerWorkerThread.java:80)
> >  at
> org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(
> ThreadPool.java:684)
> >  at java.lang.Thread.run(Unknown Source)
> >
> > Is there anyway to increase the amount of clauses lucene can take?  This
> kind of large query is not uncommon so any help would be greatly
> appreciated.
> >
> >
> > Chris Salem
> > 440.946.5214 x5458
> > chris@mainsequence.net
> >
> > (The following links were included with this email:)
> > mailto:chris@mainsequence.net
> >
> >
> >
> > (The following links were included with this email:)
> > mailto:chris@mainsequence.net
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_111535_15703071.1167234831288--

From java-user-return-25218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 15:57:29 2006
Return-Path: <java-user-return-25218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22788 invoked from network); 27 Dec 2006 15:57:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 15:57:28 -0000
Received: (qmail 2431 invoked by uid 500); 27 Dec 2006 15:57:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2400 invoked by uid 500); 27 Dec 2006 15:57:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2387 invoked by uid 99); 27 Dec 2006 15:57:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 07:57:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 07:57:16 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gzb9E-0004MZ-8Y
	for java-user@lucene.apache.org; Wed, 27 Dec 2006 07:56:56 -0800
Message-ID: <8064135.post@talk.nabble.com>
Date: Wed, 27 Dec 2006 07:56:56 -0800 (PST)
From: Biggy <biggy97@web.de>
To: java-user@lucene.apache.org
Subject: Clustering Lucene with 40 Servers
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: biggy97@web.de
X-Virus-Checked: Checked by ClamAV on apache.org


I'm currently investigating the best ways of clustering Lucene.
I've heard of both Solr, Terracotta but do not know how well they scale.
Their examples talk of a 4 node cluster. This is way too small for my needs.

I have 30x JVMs each handling 3 requests/sec and each having their own
Lucene index. The index changes are propagated to the cluster members using
JGroups messages. This solution has more than reached its limit as JGroups
has become unstable and a source of many JVMs crashes. Based on current
traffic trends I anticipate needing to upgrade to 40x + JVMS very soon.

Can anybody suggest a way to effectivily cluster / replicate document
changes ?

P.S.: 
JMS is not a possible solution as this was the prior JGroups solution. We
had too many memory problems/queue full etc crashing the servers thereafter.

-- 
View this message in context: http://www.nabble.com/Clustering-Lucene-with-40-Servers-tf2886546.html#a8064135
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 16:34:20 2006
Return-Path: <java-user-return-25219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31791 invoked from network); 27 Dec 2006 16:34:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 16:34:20 -0000
Received: (qmail 55459 invoked by uid 500); 27 Dec 2006 16:34:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55364 invoked by uid 500); 27 Dec 2006 16:34:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55353 invoked by uid 99); 27 Dec 2006 16:34:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 08:34:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.21] (HELO smtp-vbr1.xs4all.nl) (194.109.24.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 08:34:08 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr1.xs4all.nl (8.13.8/8.13.8) with ESMTP id kBRGXldv093153
	for <java-user@lucene.apache.org>; Wed, 27 Dec 2006 17:33:47 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: toomanyclauses exception
Date: Wed, 27 Dec 2006 17:33:46 +0100
User-Agent: KMail/1.8.2
References: <20061227144326.0D8F610FB00A@herse.apache.org> <200612271559.16617.paul.elschot@xs4all.nl> <359a92830612270753x3d0e3511g634b8e9c145d4034@mail.gmail.com>
In-Reply-To: <359a92830612270753x3d0e3511g634b8e9c145d4034@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200612271733.47012.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 27 December 2006 16:53, Erick Erickson wrote:
...
> 3> Look over the SrndQuery classes. I don't fully understand these, but they
> certainly behave much differently in this area. Note that SrndQuery limits
> wildcards to having at least three non-wildcard characters.

In Lucene, the limit on the number of clauses is applied per (sub)query
that expands to a BooleanQuery.
In contrib/surround the limit on the maximum number of clauses
is applied for a full query including all subqueries.

The reason for the limitation in both cases is that each TermScorer
needs some buffer space, and without the limit Query.rewrite()
will run out of memory occasionaly.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 16:47:35 2006
Return-Path: <java-user-return-25220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33332 invoked from network); 27 Dec 2006 16:47:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 16:47:34 -0000
Received: (qmail 62632 invoked by uid 500); 27 Dec 2006 16:47:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62593 invoked by uid 500); 27 Dec 2006 16:47:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62582 invoked by uid 99); 27 Dec 2006 16:47:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 08:47:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [217.160.230.40] (HELO mout.perfora.net) (217.160.230.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 08:47:25 -0800
Received: from [59.144.77.124] (helo=[192.168.1.2])
	by mrelay.perfora.net (node=mrelayus1) with ESMTP (Nemesis),
	id 0MKp2t-1GzbvX2Y6R-0000IB; Wed, 27 Dec 2006 11:47:03 -0500
Message-ID: <4592A3E0.3070201@insideview.com>
Date: Wed, 27 Dec 2006 22:18:32 +0530
From: Harini Raghavan <harini.raghavan@insideview.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Modelling Relational Lucene Index
References: <458AB30F.6030908@insideview.com>	 <458AD25D.8050001@mikemccandless.com>	 <458BFA5C.1050904@insideview.com> <458C0035.1020104@gmail.com>	 <45911020.9010704@insideview.com> <359a92830612260700j885b00fqd54b8c15d5a7439f@mail.gmail.com>
In-Reply-To: <359a92830612260700j885b00fqd54b8c15d5a7439f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: perfora.net abuse@perfora.net login:9759476ad67fa08aca5d9352c82c69ea
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

Thank you for the detailed response.

First I would like to mention that my application has an index with 
company id & name indexed for article for the following reasons:
1. A search interface where we search across articles and companies.
2. Paging - I need to page the results after loading the hits due to 
which I don't want to separate out the text search and article-company 
matching logic. I want to load the articles using one single Lucene query.

I am using MySQL database to store the relations. But since I need to 
search across companies & keywords in article, I am also storing the 
company name and id in the index. The option 3 looks good to me. But I 
am concerned about degrading the performance of the existing system if I 
make the search into a 2 step process.

However I will try to evaluate your suggestions in detail.

Thank you again,
Harini

Erick Erickson wrote:

> First, it probably would have been a good thing to start a new thread on
> this topic, since it's only vaguely related to disk space <G>...
>
> That said, sure. Note that there's no requirement in lucene that all
> documents in an index have the same fields. Also, there's no reason you
> can't use two separate indexes. Finally, you have to think about how many
> times you are going to add update a given article when choosing your
> approach. Here are several possibilities.
>
> 1> Add a field (tokenized) to each article in your index that contains 
> IDs
> of the companies you want to associate with that article. The downside 
> here
> is that you need to delete and re-add the document every time you want to
> add a company to that article.
>
> 2> Create a separate index that contains that relationship.
>
> 3> have two kinds of documents in your index, one that indexes 
> articles and
> one that relates those to companies. Something like this:
>
> Articles are indexed with "text" and "artid" fields. (NOTE: artid is 
> NOT the
> Lucene document ID, those change)
> Relations are indexed with "id" and "company id" fields.
>
> id and artid are your relationship. You *don't* want to name the field 
> the
> same for both kinds of documents since they would be indexed together.
>
> Now, given a search over some text, you get back a bunch of article 
> IDs. You
> then search on the id field of the relations documents to extract 
> company id
> fields.
>
> You may be able to do some interesting things with termdocs/termenums to
> make this efficient, but don't go there unless you need to.
>
> At this point, though, I've got to ask if you have access to a 
> database in
> your application. If you do, why not store the relations there? Lucene 
> is a
> text-search engine, not a relational database. This kind of relation 
> may be
> perfectly valid to implement in Lucene, but you want to be careful if you
> find yourself trying to do any more RDBMS-like things.
>
> Best
> Erick
>
> On 12/26/06, Harini Raghavan <harini.raghavan@insideview.com> wrote:
>
>>
>> Hi,
>>
>> I have another related problem. I am adding news articles for a company
>> to the lucene index. As of now if the articles are mapped to more than
>> one company, they are added so many times in the index. As the no. of
>> companies mapped to each article increases, this will not be a scalable
>> implementation as documents will be duplicated in the index. Is there a
>> way to model the lucene index in a relational way such that the articles
>> can be stored in an index and article-company mapping can be modelled
>> separately?
>>
>> Thanks,
>> Harini
>>

Harini Raghavan
Software Engineer
Office : +91-40-23556255
harini.raghavan@insideview.com
we think, you sell
www.InsideView.com
InsideView 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 16:54:42 2006
Return-Path: <java-user-return-25221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34274 invoked from network); 27 Dec 2006 16:54:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 16:54:41 -0000
Received: (qmail 67341 invoked by uid 500); 27 Dec 2006 16:54:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67310 invoked by uid 500); 27 Dec 2006 16:54:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67299 invoked by uid 99); 27 Dec 2006 16:54:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 08:54:40 -0800
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ssellman@valueclick.com designates 216.34.207.14 as permitted sender)
Received: from [216.34.207.14] (HELO smtp2.corp.valueclick.com) (216.34.207.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 08:54:31 -0800
Received: from unknown (HELO LA-EXCLUST01.corp.valueclick.com) ([192.168.250.7])
  by smtp2.corp.valueclick.com with ESMTP; 27 Dec 2006 08:54:10 -0800
X-IronPort-AV: i="4.12,212,1165219200"; 
   d="scan'208"; a="90417957:sNHT23689925"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Clustering Lucene with 40 Servers
Date: Wed, 27 Dec 2006 08:54:10 -0800
Message-ID: <F7CE0FFA3A30084B9AD03275B9F4CFC894C3DB@LA-EXCLUST01.corp.valueclick.com>
In-Reply-To: <8064135.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Clustering Lucene with 40 Servers
Thread-Index: Accpz7U6srtcbtBDS8WNAaFVcXZ+AgAB4ETQ
From: "Scott Sellman" <ssellman@valueclick.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry if this seems na=EFve (I am new to Lucene), but why not keep one =
copy of the Lucene index on a NAS and have it shared by all servers? =20

-----Original Message-----
From: Biggy [mailto:biggy97@web.de]=20
Sent: Wednesday, December 27, 2006 7:57 AM
To: java-user@lucene.apache.org
Subject: Clustering Lucene with 40 Servers


I'm currently investigating the best ways of clustering Lucene.
I've heard of both Solr, Terracotta but do not know how well they scale.
Their examples talk of a 4 node cluster. This is way too small for my =
needs.

I have 30x JVMs each handling 3 requests/sec and each having their own
Lucene index. The index changes are propagated to the cluster members =
using
JGroups messages. This solution has more than reached its limit as =
JGroups
has become unstable and a source of many JVMs crashes. Based on current
traffic trends I anticipate needing to upgrade to 40x + JVMS very soon.

Can anybody suggest a way to effectivily cluster / replicate document
changes ?

P.S.:=20
JMS is not a possible solution as this was the prior JGroups solution. =
We
had too many memory problems/queue full etc crashing the servers =
thereafter.

--=20
View this message in context: =
http://www.nabble.com/Clustering-Lucene-with-40-Servers-tf2886546.html#a8=
064135
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 17:20:11 2006
Return-Path: <java-user-return-25222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37621 invoked from network); 27 Dec 2006 17:20:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 17:20:11 -0000
Received: (qmail 88423 invoked by uid 500); 27 Dec 2006 17:20:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87529 invoked by uid 500); 27 Dec 2006 17:20:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87518 invoked by uid 99); 27 Dec 2006 17:20:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 09:20:10 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 09:19:59 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GzcRH-0004df-2S
	for java-user@lucene.apache.org; Wed, 27 Dec 2006 09:19:39 -0800
Message-ID: <8065033.post@talk.nabble.com>
Date: Wed, 27 Dec 2006 09:19:39 -0800 (PST)
From: Biggy <biggy97@web.de>
To: java-user@lucene.apache.org
Subject: RE: Clustering Lucene with 40 Servers
In-Reply-To: <F7CE0FFA3A30084B9AD03275B9F4CFC894C3DB@LA-EXCLUST01.corp.valueclick.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: biggy97@web.de
References: <8064135.post@talk.nabble.com> <F7CE0FFA3A30084B9AD03275B9F4CFC894C3DB@LA-EXCLUST01.corp.valueclick.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Well try having say 30 servers try to write in the index at the same time a=
nd
10 others=20
to read. You'll get enough locks to make a grown man cry. :)


Scott Sellman wrote:
>=20
> Sorry if this seems na=C3=AFve (I am new to Lucene), but why not keep one=
 copy
> of the Lucene index on a NAS and have it shared by all servers? =20
>=20
> -----Original Message-----
> From: Biggy [mailto:biggy97@web.de]=20
> Sent: Wednesday, December 27, 2006 7:57 AM
> To: java-user@lucene.apache.org
> Subject: Clustering Lucene with 40 Servers
>=20
>=20
> I'm currently investigating the best ways of clustering Lucene.
> I've heard of both Solr, Terracotta but do not know how well they scale.
> Their examples talk of a 4 node cluster. This is way too small for my
> needs.
>=20
> I have 30x JVMs each handling 3 requests/sec and each having their own
> Lucene index. The index changes are propagated to the cluster members
> using
> JGroups messages. This solution has more than reached its limit as JGroup=
s
> has become unstable and a source of many JVMs crashes. Based on current
> traffic trends I anticipate needing to upgrade to 40x + JVMS very soon.
>=20
> Can anybody suggest a way to effectivily cluster / replicate document
> changes ?
>=20
> P.S.:=20
> JMS is not a possible solution as this was the prior JGroups solution. We
> had too many memory problems/queue full etc crashing the servers
> thereafter.
>=20
> --=20
> View this message in context:
> http://www.nabble.com/Clustering-Lucene-with-40-Servers-tf2886546.html#a8=
064135
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Clustering-Lucene-with-=
40-Servers-tf2886546.html#a8065033
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 17:35:35 2006
Return-Path: <java-user-return-25223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41315 invoked from network); 27 Dec 2006 17:35:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 17:35:34 -0000
Received: (qmail 5072 invoked by uid 500); 27 Dec 2006 17:35:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5026 invoked by uid 500); 27 Dec 2006 17:35:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5015 invoked by uid 99); 27 Dec 2006 17:35:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 09:35:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 09:35:24 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15CB99CF@mailer.syr.edu>; Wed, 27 Dec 2006 12:35:02 -0500
Message-ID: <4592AEC6.1060601@syr.edu>
Date: Wed, 27 Dec 2006 12:35:02 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Nested Queries
References: <4590EC75.5090606@naukri.com> <4590EFC1.3040907@naukri.com>
In-Reply-To: <4590EFC1.3040907@naukri.com>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Kapil,

Kapil Chhabra wrote:
> Just to mention, I have tokenized FIELD2 on "," and indexed it.
> 
> FIELD2:3 should return 1,2
> FIELD2:(FIELD2:3) should return something like the output of:
> 
> *FIELD2: 1 OR FIELD2: 2

Given your data table, I assume you mean:

   FIELD1:3 should return 1,2
   FIELD1:(FIELD2:3) should return something like the output of:

   *FIELD1: 1 OR FIELD1: 2

If you make FIELD1 stored, and search using "FIELD2:3", you can iterate
through the hits and return the values for FIELD1.

Are you looking for a query language that does this work for you?  That
is, one which can query on any field and then return information from
other field(s) in matching documents?  If so, I don't know of such a
query language that exists for Lucene.

There have been several integrations of Lucene with databases, some of
which enable SQL queries something like:

    SELECT FIELD1 WHERE FIELD2 CONTAINS('3');

1. Marcelo Ochoa's Oracle JVM implementation for Lucene DataStore:
<http://issues.apache.org/jira/browse/LUCENE-724>; see also these
threads on the Lucene Java-Users list:
<http://www.nabble.com/Oracle-and-Lucene-Integration-tf2689965.html>
<http://www.nabble.com/Oracle-Lucene-integration--status--tf2865873.html>

2. Mark Harwood's Lucene database bindings for HSQLDB and Derby:
<http://issues.apache.org/jira/browse/LUCENE-434>; see also this thread
on the Lucene Java-Users list:
<http://www.nabble.com/Lucene-database-bindings-tf316816.html>

3. Hibernate (as of v3.1, I think) Lucene Integration:
<http://www.hibernate.org/hib_docs/annotations/reference/en/html/lucene.html>

4. DBSight enables Lucene search with databases: <http://www.dbsight.net/>


Hope it helps,
Steve

> Kapil Chhabra wrote:
>> Hi,
>>
>> Please see the following data-structure
>> +--------+----------+
>> | FIELD1 | FIELD2   |
>> +--------+----------+
>> | 1      | 2,3,4,6, |
>> | 2      | 3,1,5,7, |
>> | 3      | 1,2,     |
>> | 4      | 1,8,10,  |
>> | 5      | 2,9,     |
>> | 6      | 1,       |
>> | 7      | 2,9,     |
>> | 8      | 4,9,     |
>> | 9      | 5,7,8,   |
>> | 10     | 4,       |
>> +--------+----------+
>>
>> My requirement is to find all values in FIELD1 where FIELD2 contains
>> all values of FIELD1 where FIELD2 contains 3
>> Which means something like
>> FIELD2:(FIELD2:3)
>>
>> Is it possible to achieve this in a single query? If yes, then how
>> should I go about it?
>>
>>
>>
>> Thanks in anticipation,
>> kapilChhabra
>>
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 17:44:16 2006
Return-Path: <java-user-return-25224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42882 invoked from network); 27 Dec 2006 17:44:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 17:44:16 -0000
Received: (qmail 16338 invoked by uid 500); 27 Dec 2006 17:44:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16308 invoked by uid 500); 27 Dec 2006 17:44:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16297 invoked by uid 99); 27 Dec 2006 17:44:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 09:44:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a19.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 09:44:04 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.dreamhost.com (Postfix) with ESMTP id 6B3BD113A4
	for <java-user@lucene.apache.org>; Wed, 27 Dec 2006 09:43:36 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <6396C226-092A-4FB6-BB00-F93E574EF053@ehatchersolutions.com>
References: <42F6F4E5EC226C42A823270D5C523A3E050ABE8B@CHI4EXC08.corp.transunion.com> <6396C226-092A-4FB6-BB00-F93E574EF053@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <80FF79DC-B349-49F6-9BFF-DEE9ADFC3F9A@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: help finding docs, creating analyzer objects
Date: Wed, 27 Dec 2006 12:43:37 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 26, 2006, at 11:57 PM, Erik Hatcher wrote:

>
> A definition of vocabulary fits perfectly on the wiki.
>

I started http://wiki.apache.org/jakarta-lucene/ 
ConceptsAndDefinitions which is linked to from the main Wiki page.  I  
started w/ the basics that Eric asked about and are very brief and no  
doubt need more editing, expansion, etc.

-Grant


--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 17:50:16 2006
Return-Path: <java-user-return-25225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43794 invoked from network); 27 Dec 2006 17:50:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 17:50:15 -0000
Received: (qmail 24098 invoked by uid 500); 27 Dec 2006 17:50:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24067 invoked by uid 500); 27 Dec 2006 17:50:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24056 invoked by uid 99); 27 Dec 2006 17:50:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 09:50:14 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 09:50:04 -0800
Received: by nf-out-0910.google.com with SMTP id n28so4297780nfc
        for <java-user@lucene.apache.org>; Wed, 27 Dec 2006 09:49:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ftu49Kkyskyv87n9h2/T0CF+eH0iKHnZnli/gkoqy5gxlinYmE9NGia0dlJQdaUVoWhym+wumBIPIFMUIlwe3BpZAmujt7ZS3K9p51nBW6Cg7zCHkpF9DEA0cOuZDJ9XcYGNOtqaJreitLUx23uIEU9zQCnnmDmTWQsqPaEoX0M=
Received: by 10.82.136.4 with SMTP id j4mr198957bud.1167241782502;
        Wed, 27 Dec 2006 09:49:42 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 27 Dec 2006 09:49:41 -0800 (PST)
Message-ID: <359a92830612270949u3f9e0112mc1e3f8734af51cf5@mail.gmail.com>
Date: Wed, 27 Dec 2006 12:49:41 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modelling Relational Lucene Index
In-Reply-To: <4592A3E0.3070201@insideview.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_113364_11976944.1167241781857"
References: <458AB30F.6030908@insideview.com>
	 <458AD25D.8050001@mikemccandless.com>
	 <458BFA5C.1050904@insideview.com> <458C0035.1020104@gmail.com>
	 <45911020.9010704@insideview.com>
	 <359a92830612260700j885b00fqd54b8c15d5a7439f@mail.gmail.com>
	 <4592A3E0.3070201@insideview.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_113364_11976944.1167241781857
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

One other note. If you do NOT store the article text, you can still search
it but your index size for storing the text data will be MUCH smaller. This
requires that you have access to the actual text somewhere in order to be
able to return it to the user, but it's a possibility. The scenario runs
something like this....

Index the text of the article WITHOUT storing it for each company. Have the
actual text out on disk someplace so you can fetch it to the user for
display.

Another alternative is to store the text in the index once (without
indexing) and index it (but not store it) for each company. Then you could
fetch the text out of the index when you needed but not pay the penalty for
storing the text for each company and wouldn't have to try coordinating the
disk storage, which can be a pain.

But I wouldn't try any of that until I generated some numbers. Take some
representative articles and index them, say, 10 different times, stored and
unstored and see what the index size is. Then do it again storing them, say,
100 times and look at the difference. You simply can't make architectural
decisions like this without some data to back it up. What is the eventual
number of articles you intend to index? How many times to you expect each
article to be indexed (that is, how many different companies do you expect
to associate with each company)? Why do you fear doing two searches? Do you
have any evidence at all that this will be unacceptably slow? The reason
that I keep asking these questions whenever someone starts talking about
efficiency is that I've spent far too much time making things complicated
for the sake of efficiency that, in the end, was wasted effort, meant that
the program was delivered later than it should have been and had more bugs
in it than it needed to.

Best
Erick

On 12/27/06, Harini Raghavan <harini.raghavan@insideview.com> wrote:
>
> Hi Erick,
>
> Thank you for the detailed response.
>
> First I would like to mention that my application has an index with
> company id & name indexed for article for the following reasons:
> 1. A search interface where we search across articles and companies.
> 2. Paging - I need to page the results after loading the hits due to
> which I don't want to separate out the text search and article-company
> matching logic. I want to load the articles using one single Lucene query.
>
> I am using MySQL database to store the relations. But since I need to
> search across companies & keywords in article, I am also storing the
> company name and id in the index. The option 3 looks good to me. But I
> am concerned about degrading the performance of the existing system if I
> make the search into a 2 step process.
>
> However I will try to evaluate your suggestions in detail.
>
> Thank you again,
> Harini
>
> Erick Erickson wrote:
>
> > First, it probably would have been a good thing to start a new thread on
> > this topic, since it's only vaguely related to disk space <G>...
> >
> > That said, sure. Note that there's no requirement in lucene that all
> > documents in an index have the same fields. Also, there's no reason you
> > can't use two separate indexes. Finally, you have to think about how
> many
> > times you are going to add update a given article when choosing your
> > approach. Here are several possibilities.
> >
> > 1> Add a field (tokenized) to each article in your index that contains
> > IDs
> > of the companies you want to associate with that article. The downside
> > here
> > is that you need to delete and re-add the document every time you want
> to
> > add a company to that article.
> >
> > 2> Create a separate index that contains that relationship.
> >
> > 3> have two kinds of documents in your index, one that indexes
> > articles and
> > one that relates those to companies. Something like this:
> >
> > Articles are indexed with "text" and "artid" fields. (NOTE: artid is
> > NOT the
> > Lucene document ID, those change)
> > Relations are indexed with "id" and "company id" fields.
> >
> > id and artid are your relationship. You *don't* want to name the field
> > the
> > same for both kinds of documents since they would be indexed together.
> >
> > Now, given a search over some text, you get back a bunch of article
> > IDs. You
> > then search on the id field of the relations documents to extract
> > company id
> > fields.
> >
> > You may be able to do some interesting things with termdocs/termenums to
> > make this efficient, but don't go there unless you need to.
> >
> > At this point, though, I've got to ask if you have access to a
> > database in
> > your application. If you do, why not store the relations there? Lucene
> > is a
> > text-search engine, not a relational database. This kind of relation
> > may be
> > perfectly valid to implement in Lucene, but you want to be careful if
> you
> > find yourself trying to do any more RDBMS-like things.
> >
> > Best
> > Erick
> >
> > On 12/26/06, Harini Raghavan <harini.raghavan@insideview.com> wrote:
> >
> >>
> >> Hi,
> >>
> >> I have another related problem. I am adding news articles for a company
> >> to the lucene index. As of now if the articles are mapped to more than
> >> one company, they are added so many times in the index. As the no. of
> >> companies mapped to each article increases, this will not be a scalable
> >> implementation as documents will be duplicated in the index. Is there a
> >> way to model the lucene index in a relational way such that the
> articles
> >> can be stored in an index and article-company mapping can be modelled
> >> separately?
> >>
> >> Thanks,
> >> Harini
> >>
>
> Harini Raghavan
> Software Engineer
> Office : +91-40-23556255
> harini.raghavan@insideview.com
> we think, you sell
> www.InsideView.com
> InsideView
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_113364_11976944.1167241781857--

From java-user-return-25226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 18:03:39 2006
Return-Path: <java-user-return-25226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45733 invoked from network); 27 Dec 2006 18:03:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 18:03:38 -0000
Received: (qmail 37285 invoked by uid 500); 27 Dec 2006 18:03:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37254 invoked by uid 500); 27 Dec 2006 18:03:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37243 invoked by uid 99); 27 Dec 2006 18:03:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 10:03:38 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of levent.bayindir@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 10:03:26 -0800
Received: by ug-out-1314.google.com with SMTP id k40so3970477ugc
        for <java-user@lucene.apache.org>; Wed, 27 Dec 2006 10:03:05 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=cXUVuGFmr+/lddHsF8++BtAdPIY3RWNq7mgLpEMl7eJ2eghrB6VGsRF1Eag93oHiXo8FpVvuSiHWDBRZjRjx43rYDBr4w22Wh43AMbQwAITpT3CC+UyCyzQAn4tdXw4m4Wvmh0IdxR63j0QgabQFcBhnZ+xPRu3edy/xd0pGlWI=
Received: by 10.66.232.11 with SMTP id e11mr20159962ugh.1167242584681;
        Wed, 27 Dec 2006 10:03:04 -0800 (PST)
Received: from ?144.122.71.136? ( [144.122.71.136])
        by mx.google.com with ESMTP id l40sm19681355ugc.2006.12.27.10.03.03;
        Wed, 27 Dec 2006 10:03:04 -0800 (PST)
Message-ID: <4592B564.4020303@gmail.com>
Date: Wed, 27 Dec 2006 20:03:16 +0200
From: Levent Bayindir <levent.bayindir@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Clustering Lucene with 40 Servers
References: <8064135.post@talk.nabble.com> <F7CE0FFA3A30084B9AD03275B9F4CFC894C3DB@LA-EXCLUST01.corp.valueclick.com> <8065033.post@talk.nabble.com>
In-Reply-To: <8065033.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am new to this too. But my plan is to use sth like this:

I will use and online and offline index. Offline index will be presented 
to search engine users and offline index will be updated continuously. 
Time to time offline index will be written over online index. (When 
update is considered to be stable enough.)

I will have 40-50 crawlers running continuously. They will get their 
jobs from a database and save their results to database again. And time 
to time i will update the index with the info available in database.

Although i coded most of this mechanism, i did not test it with 50+ 
crawlers. But i think, this is scalable enough for my future uses too. 
Since for my domain, i don't need to show daily/updated results, as far 
as i see, this mechanism will work for me.

I cant think how you have so much data updated so quickly. I mean which 
data is needed to be updated so frequently and needs 30+ servers to be 
handled. Let me know your thoughts..

Levent.

Biggy wrote:
> Well try having say 30 servers try to write in the index at the same time and
> 10 others 
> to read. You'll get enough locks to make a grown man cry. :)
> 
> 
> Scott Sellman wrote:
>> Sorry if this seems naÃ¯ve (I am new to Lucene), but why not keep one copy
>> of the Lucene index on a NAS and have it shared by all servers?  
>>
>> -----Original Message-----
>> From: Biggy [mailto:biggy97@web.de] 
>> Sent: Wednesday, December 27, 2006 7:57 AM
>> To: java-user@lucene.apache.org
>> Subject: Clustering Lucene with 40 Servers
>>
>>
>> I'm currently investigating the best ways of clustering Lucene.
>> I've heard of both Solr, Terracotta but do not know how well they scale.
>> Their examples talk of a 4 node cluster. This is way too small for my
>> needs.
>>
>> I have 30x JVMs each handling 3 requests/sec and each having their own
>> Lucene index. The index changes are propagated to the cluster members
>> using
>> JGroups messages. This solution has more than reached its limit as JGroups
>> has become unstable and a source of many JVMs crashes. Based on current
>> traffic trends I anticipate needing to upgrade to 40x + JVMS very soon.
>>
>> Can anybody suggest a way to effectivily cluster / replicate document
>> changes ?
>>
>> P.S.: 
>> JMS is not a possible solution as this was the prior JGroups solution. We
>> had too many memory problems/queue full etc crashing the servers
>> thereafter.
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/Clustering-Lucene-with-40-Servers-tf2886546.html#a8064135
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 18:16:57 2006
Return-Path: <java-user-return-25227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47371 invoked from network); 27 Dec 2006 18:16:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 18:16:57 -0000
Received: (qmail 47130 invoked by uid 500); 27 Dec 2006 18:16:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47100 invoked by uid 500); 27 Dec 2006 18:16:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47089 invoked by uid 99); 27 Dec 2006 18:16:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 10:16:57 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 10:16:48 -0800
Received: by nf-out-0910.google.com with SMTP id n28so4303970nfc
        for <java-user@lucene.apache.org>; Wed, 27 Dec 2006 10:16:27 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=oBe35d2pVVLYJXBYdahRybkpVdywdtpZNNDnL62H5GeS3dJ65x+8GLzpc1Nd+cTIpn6VfttzUIWp5JDCjsqawJQIr0mXOFgQOKaga3R7z0IyMXUXOd9gPlws3qAMELT66ZGikE1RzOIcH255iEploMCz8SxOyRB9mLVX05yBqmA=
Received: by 10.82.183.19 with SMTP id g19mr484472buf.1167243387084;
        Wed, 27 Dec 2006 10:16:27 -0800 (PST)
Received: by 10.82.176.16 with HTTP; Wed, 27 Dec 2006 10:16:26 -0800 (PST)
Message-ID: <6e3ae6310612271016ud3b732di8f13ad2d83ecf554@mail.gmail.com>
Date: Wed, 27 Dec 2006 10:16:26 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Clustering Lucene with 40 Servers
In-Reply-To: <8065033.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <8064135.post@talk.nabble.com>
	 <F7CE0FFA3A30084B9AD03275B9F4CFC894C3DB@LA-EXCLUST01.corp.valueclick.com>
	 <8065033.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Simply using NAS as just another file directory will cause these
locks. You need to use your own logic to control when to re-open the
index reader.

I think you can look into Nutch's distributed file system to see
whether that can help.
--=20
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com

On 12/27/06, Biggy <biggy97@web.de> wrote:
>
> Well try having say 30 servers try to write in the index at the same time=
 and
> 10 others
> to read. You'll get enough locks to make a grown man cry. :)
>
>
> Scott Sellman wrote:
> >
> > Sorry if this seems na=EFve (I am new to Lucene), but why not keep one =
copy
> > of the Lucene index on a NAS and have it shared by all servers?
> >
> > -----Original Message-----
> > From: Biggy [mailto:biggy97@web.de]
> > Sent: Wednesday, December 27, 2006 7:57 AM
> > To: java-user@lucene.apache.org
> > Subject: Clustering Lucene with 40 Servers
> >
> >
> > I'm currently investigating the best ways of clustering Lucene.
> > I've heard of both Solr, Terracotta but do not know how well they scale=
.
> > Their examples talk of a 4 node cluster. This is way too small for my
> > needs.
> >
> > I have 30x JVMs each handling 3 requests/sec and each having their own
> > Lucene index. The index changes are propagated to the cluster members
> > using
> > JGroups messages. This solution has more than reached its limit as JGro=
ups
> > has become unstable and a source of many JVMs crashes. Based on current
> > traffic trends I anticipate needing to upgrade to 40x + JVMS very soon.
> >
> > Can anybody suggest a way to effectivily cluster / replicate document
> > changes ?
> >
> > P.S.:
> > JMS is not a possible solution as this was the prior JGroups solution. =
We
> > had too many memory problems/queue full etc crashing the servers
> > thereafter.
> >
> > --
> > View this message in context:
> > http://www.nabble.com/Clustering-Lucene-with-40-Servers-tf2886546.html#=
a8064135
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context: http://www.nabble.com/Clustering-Lucene-wit=
h-40-Servers-tf2886546.html#a8065033
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 27 18:47:34 2006
Return-Path: <java-user-return-25228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58446 invoked from network); 27 Dec 2006 18:47:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2006 18:47:26 -0000
Received: (qmail 87978 invoked by uid 500); 27 Dec 2006 18:47:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87950 invoked by uid 500); 27 Dec 2006 18:47:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87939 invoked by uid 99); 27 Dec 2006 18:47:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 10:47:19 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sharrissf@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 10:47:09 -0800
Received: by ug-out-1314.google.com with SMTP id k40so3980000ugc
        for <java-user@lucene.apache.org>; Wed, 27 Dec 2006 10:46:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=pXrVrzYG7zrLke4jRsrqyOUCCJnLnz/4GnQA+oCBYZgx0sjZYcdciyumkJD97/69rPURsorDgvMc6O6gjpNR3Wqwf6Zlw5fcHSADHwtRdCctEcJcNpEyE1f22ycHRdKn7NkBbZYdSr7Eez3HZ9h5p1KDV8Iqmti1VCRy/DYn7G4=
Received: by 10.78.204.1 with SMTP id b1mr2914492hug.1167245208644;
        Wed, 27 Dec 2006 10:46:48 -0800 (PST)
Received: by 10.78.142.6 with HTTP; Wed, 27 Dec 2006 10:46:47 -0800 (PST)
Message-ID: <8fcbd19a0612271046k76d6f4bepc98fe4f44667f340@mail.gmail.com>
Date: Wed, 27 Dec 2006 10:46:47 -0800
From: "Steve Harris" <sharrissf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Clustering Lucene with 40 Servers
In-Reply-To: <8064135.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8064135.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Some quick questions/points:

What is the update rate?

The number of nodes you described is no problem, the query rate would be
no problem too (because they use read locks and act independently).

Do all nodes do updates or just 1? How often do these updates occur?

Probably best thing to do is give it a try and run a few tests.

Cheers,
Steve


On 12/27/06, Biggy <biggy97@web.de> wrote:
>
> I'm currently investigating the best ways of clustering Lucene.
> I've heard of both Solr, Terracotta but do not know how well they scale.
> Their examples talk of a 4 node cluster. This is way too small for my needs.
>
> I have 30x JVMs each handling 3 requests/sec and each having their own
> Lucene index. The index changes are propagated to the cluster members using
> JGroups messages. This solution has more than reached its limit as JGroups
> has become unstable and a source of many JVMs crashes. Based on current
> traffic trends I anticipate needing to upgrade to 40x + JVMS very soon.
>
> Can anybody suggest a way to effectivily cluster / replicate document
> changes ?
>
> P.S.:
> JMS is not a possible solution as this was the prior JGroups solution. We
> had too many memory problems/queue full etc crashing the servers thereafter.
>
> --
> View this message in context: http://www.nabble.com/Clustering-Lucene-with-40-Servers-tf2886546.html#a8064135
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 28 05:03:09 2006
Return-Path: <java-user-return-25229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85911 invoked from network); 28 Dec 2006 05:03:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 05:03:08 -0000
Received: (qmail 88528 invoked by uid 500); 28 Dec 2006 05:03:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88494 invoked by uid 500); 28 Dec 2006 05:03:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88483 invoked by uid 99); 28 Dec 2006 05:03:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 21:03:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Dec 2006 21:02:57 -0800
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 252
          for <java-user@lucene.apache.org>;
          Wed, 27 Dec 2006 21:02:36 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <1C573328-D736-4BD9-A904-EA7FD4228151@marketingbrokers.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Peter W. <peter@marketingbrokers.com>
Subject: Paging Lucene Results
Date: Wed, 27 Dec 2006 21:02:35 -0800
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I'm trying to iterate or page through Lucene document hits results.
Before reinventing this, is there an existing solution out there or  
in Solr?

Thanks in advance,

Peter

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 28 06:08:50 2006
Return-Path: <java-user-return-25230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95743 invoked from network); 28 Dec 2006 06:08:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 06:08:49 -0000
Received: (qmail 27280 invoked by uid 500); 28 Dec 2006 06:08:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27252 invoked by uid 500); 28 Dec 2006 06:08:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27241 invoked by uid 99); 28 Dec 2006 06:08:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 22:08:40 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [220.225.240.22] (HELO mail01.naukri.com) (220.225.240.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 22:08:23 -0800
Received: from [172.16.0.162] ([172.16.0.162])
          by mail01.naukri.com (Lotus Domino Release 7.0)
          with ESMTP id 2006122811262304-8166 ;
          Thu, 28 Dec 2006 11:26:23 +0530 
Message-ID: <45935DC9.7010205@naukri.com>
Date: Thu, 28 Dec 2006 11:31:45 +0530
From: Kapil Chhabra <kapil.chhabra@naukri.com>
User-Agent: Thunderbird 1.5.0.8 (X11/20061107)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Nested Queries
References: <4590EC75.5090606@naukri.com> <4590EFC1.3040907@naukri.com> <4592AEC6.1060601@syr.edu>
In-Reply-To: <4592AEC6.1060601@syr.edu>
X-MIMETrack: Itemize by SMTP Server on noidaa88/naukri(Release 7.0|August 18, 2005) at
 12/28/2006 11:26:23 AM,
	Serialize by Router on noidaa88/naukri(Release 7.0|August 18, 2005) at 12/28/2006
 11:32:59 AM,
	Serialize complete at 12/28/2006 11:32:59 AM
Content-Type: multipart/alternative;
 boundary="------------070505010204070301050803"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------070505010204070301050803
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Hi Steve,
Thanks for the response.
Actually I am not looking for a query language. My question is, whether 
Lucene supports Nested Queries or self joins?
As per 
http://lucene.apache.org/java/docs/api/org/apache/lucene/queryParser/QueryParser.html

In BNF, the query grammar is:

   Query  ::= ( Clause )*
   Clause ::= ["+", "-"] [<TERM> ":"] ( <TERM> | "(" Query ")" )
 
Which means that 
FIELD2:(FIELD2:3) 
is a correct query. Correct me if I am wrong.

What will this query translate into? Will it  be same as 
FIELD2: 1 OR FIELD2: 2


Thanks
kapilChhabra

Steven Rowe wrote:
> Hi Kapil,
>
> Kapil Chhabra wrote:
>   
>> Just to mention, I have tokenized FIELD2 on "," and indexed it.
>>
>> FIELD2:3 should return 1,2
>> FIELD2:(FIELD2:3) should return something like the output of:
>>
>> *FIELD2: 1 OR FIELD2: 2
>>     
>
> Given your data table, I assume you mean:
>
>    FIELD1:3 should return 1,2
>    FIELD1:(FIELD2:3) should return something like the output of:
>
>    *FIELD1: 1 OR FIELD1: 2
>
> If you make FIELD1 stored, and search using "FIELD2:3", you can iterate
> through the hits and return the values for FIELD1.
>
> Are you looking for a query language that does this work for you?  That
> is, one which can query on any field and then return information from
> other field(s) in matching documents?  If so, I don't know of such a
> query language that exists for Lucene.
>
> There have been several integrations of Lucene with databases, some of
> which enable SQL queries something like:
>
>     SELECT FIELD1 WHERE FIELD2 CONTAINS('3');
>
> 1. Marcelo Ochoa's Oracle JVM implementation for Lucene DataStore:
> <http://issues.apache.org/jira/browse/LUCENE-724>; see also these
> threads on the Lucene Java-Users list:
> <http://www.nabble.com/Oracle-and-Lucene-Integration-tf2689965.html>
> <http://www.nabble.com/Oracle-Lucene-integration--status--tf2865873.html>
>
> 2. Mark Harwood's Lucene database bindings for HSQLDB and Derby:
> <http://issues.apache.org/jira/browse/LUCENE-434>; see also this thread
> on the Lucene Java-Users list:
> <http://www.nabble.com/Lucene-database-bindings-tf316816.html>
>
> 3. Hibernate (as of v3.1, I think) Lucene Integration:
> <http://www.hibernate.org/hib_docs/annotations/reference/en/html/lucene.html>
>
> 4. DBSight enables Lucene search with databases: <http://www.dbsight.net/>
>
>
> Hope it helps,
> Steve
>
>   
>> Kapil Chhabra wrote:
>>     
>>> Hi,
>>>
>>> Please see the following data-structure
>>> +--------+----------+
>>> | FIELD1 | FIELD2   |
>>> +--------+----------+
>>> | 1      | 2,3,4,6, |
>>> | 2      | 3,1,5,7, |
>>> | 3      | 1,2,     |
>>> | 4      | 1,8,10,  |
>>> | 5      | 2,9,     |
>>> | 6      | 1,       |
>>> | 7      | 2,9,     |
>>> | 8      | 4,9,     |
>>> | 9      | 5,7,8,   |
>>> | 10     | 4,       |
>>> +--------+----------+
>>>
>>> My requirement is to find all values in FIELD1 where FIELD2 contains
>>> all values of FIELD1 where FIELD2 contains 3
>>> Which means something like
>>> FIELD2:(FIELD2:3)
>>>
>>> Is it possible to achieve this in a single query? If yes, then how
>>> should I go about it?
>>>
>>>
>>>
>>> Thanks in anticipation,
>>> kapilChhabra
>>>
>>>       
>>     
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   


--------------070505010204070301050803--

From java-user-return-25231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 28 06:34:10 2006
Return-Path: <java-user-return-25231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99776 invoked from network); 28 Dec 2006 06:34:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 06:34:09 -0000
Received: (qmail 44682 invoked by uid 500); 28 Dec 2006 06:34:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44647 invoked by uid 500); 28 Dec 2006 06:34:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44636 invoked by uid 99); 28 Dec 2006 06:34:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 22:34:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 22:33:59 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4104B30EFC17; Thu, 28 Dec 2006 01:33:39 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id AC20C30EFC16
	for <java-user@lucene.apache.org>; Thu, 28 Dec 2006 01:33:33 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <1C573328-D736-4BD9-A904-EA7FD4228151@marketingbrokers.com>
References: <1C573328-D736-4BD9-A904-EA7FD4228151@marketingbrokers.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9DD92FDE-71A5-45D8-A7BC-F21EB4295C06@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Paging Lucene Results
Date: Thu, 28 Dec 2006 01:33:31 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Dec 28, 2006, at 12:02 AM, Peter W. wrote:
> I'm trying to iterate or page through Lucene document hits results.
> Before reinventing this, is there an existing solution out there or  
> in Solr?

There really isn't much wheel to reinvent... you can "page" through  
Hits by simply starting at any point and going forward however many  
documents you want per page.  You could also use TopDocs  
returning .search() methods, which is what I think Solr does.  Again,  
not much to it - pick a starting point, and go from there.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 28 07:34:23 2006
Return-Path: <java-user-return-25232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5191 invoked from network); 28 Dec 2006 07:34:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 07:34:22 -0000
Received: (qmail 67724 invoked by uid 500); 28 Dec 2006 07:34:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67689 invoked by uid 500); 28 Dec 2006 07:34:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67678 invoked by uid 99); 28 Dec 2006 07:34:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 23:34:21 -0800
X-ASF-Spam-Status: No, hits=4.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FORGED_HOTMAIL_RCVD,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of aflem26@hotmail.com designates 65.54.246.172 as permitted sender)
Received: from [65.54.246.172] (HELO bay0-omc2-s36.bay0.hotmail.com) (65.54.246.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Dec 2006 23:34:10 -0800
Received: from BAY109-W3 ([64.4.19.103]) by bay0-omc2-s36.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Wed, 27 Dec 2006 23:33:37 -0800
X-Originating-IP: [67.166.126.34]
X-Originating-Email: [aflem26@hotmail.com]
Message-ID: <BAY109-W3167D4724AC7709BE1C5EA8C70@phx.gbl>
From: Adam Fleming <aflem26@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Clustering Lucene with 40 Servers
Date: Wed, 27 Dec 2006 23:33:37 -0800
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 28 Dec 2006 07:33:37.0844 (UTC) FILETIME=[7D226740:01C72A52]
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,=20

I saw that Doug Cutting had an interesting solution for his Technorati webs=
ite:=20
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12709.html

It sounds like it's a single-writer, many readers type of system, but quite=
 robust and efficient.

Cheers,=20

Adam=20



----------------------------------------
> Date: Wed, 27 Dec 2006 10:46:47 -0800
> From: sharrissf@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: Clustering Lucene with 40 Servers
>=20
> Some quick questions/points:
>=20
> What is the update rate?
>=20
> The number of nodes you described is no problem, the query rate would be
> no problem too (because they use read locks and act independently).
>=20
> Do all nodes do updates or just 1? How often do these updates occur?
>=20
> Probably best thing to do is give it a try and run a few tests.
>=20
> Cheers,
> Steve
>=20
>=20
> On 12/27/06, Biggy <biggy97@web.de> wrote:
> >
> > I'm currently investigating the best ways of clustering Lucene.
> > I've heard of both Solr, Terracotta but do not know how well they scale=
.
> > Their examples talk of a 4 node cluster. This is way too small for my n=
eeds.
> >
> > I have 30x JVMs each handling 3 requests/sec and each having their own
> > Lucene index. The index changes are propagated to the cluster members u=
sing
> > JGroups messages. This solution has more than reached its limit as JGro=
ups
> > has become unstable and a source of many JVMs crashes. Based on current
> > traffic trends I anticipate needing to upgrade to 40x + JVMS very soon.
> >
> > Can anybody suggest a way to effectivily cluster / replicate document
> > changes ?
> >
> > P.S.:
> > JMS is not a possible solution as this was the prior JGroups solution. =
We
> > had too many memory problems/queue full etc crashing the servers therea=
fter.
> >
> > --
> > View this message in context: http://www.nabble.com/Clustering-Lucene-w=
ith-40-Servers-tf2886546.html#a8064135
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

_________________________________________________________________
Fixing up the home? Live Search can help.
http://imagine-windowslive.com/search/kits/default.aspx?kit=3Dimprove&local=
e=3Den-US&source=3Dwlmemailtaglinenov06=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 28 13:00:49 2006
Return-Path: <java-user-return-25233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81051 invoked from network); 28 Dec 2006 13:00:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 13:00:48 -0000
Received: (qmail 60532 invoked by uid 500); 28 Dec 2006 13:00:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59990 invoked by uid 500); 28 Dec 2006 13:00:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59974 invoked by uid 99); 28 Dec 2006 13:00:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 05:00:47 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [81.255.54.11] (HELO mx.laposte.net) (81.255.54.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 05:00:37 -0800
Received: from smtp.laposte.net (10.150.9.35) by mx.laposte.net (7.2.060.1)
        id 457DD16600B72D28 for java-user@lucene.apache.org; Thu, 28 Dec 2006 14:00:07 +0100
Received: from smtpin.laposte.net (10.150.9.74) by smtp.laposte.net (7.3.105.2)
        id 4587A5AA00A8F481 for java-user@lucene.apache.org; Thu, 28 Dec 2006 13:59:31 +0100
Received: from thuban.adencf.local (212.99.51.254) by smtpin.laposte.net (7.2.060.1) (authenticated as sven.duzont)
        id 458943A40009F16E for java-user@lucene.apache.org; Thu, 28 Dec 2006 13:59:31 +0100
Date: Thu, 28 Dec 2006 13:58:53 +0100
From: Sven Duzont <sven.duzont@laposte.net>
X-Mailer: The Bat! (v3.62.14) Professional
Reply-To: Sven Duzont <sven.duzont@laposte.net>
X-Priority: 3 (Normal)
Message-ID: <1397763245.20061228135853@laposte.net>
To: java-user@lucene.apache.org
Subject: Re[2]: Clustering Lucene with 40 Servers
In-Reply-To: <BAY109-W3167D4724AC7709BE1C5EA8C70@phx.gbl>
References: <BAY109-W3167D4724AC7709BE1C5EA8C70@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Me (& my comp) have also implemented the Doug's index replication solution :
- One Node responsible of the indexing.
- X Nodes handling the search requests.
The difference is that it is the role of the indexer Node to notify
(via Jgroups) that an indexation process is over.

For now we dont have the problems with Jgroups coz we dont have such
many Nodes (we handle currently 2 to 7 nodes) and the number of
messages per minute is very very low.

Yours,

--- Sven


Le jeudi 28 décembre 2006 à 08:33:37, vous écriviez :

AF> Hello, 

AF> I saw that Doug Cutting had an interesting solution for his Technorati website:
AF> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12709.html

AF> It sounds like it's a single-writer, many readers type of system, but quite robust and efficient.

AF> Cheers, 

AF> Adam 



AF> ----------------------------------------
>> Date: Wed, 27 Dec 2006 10:46:47 -0800
>> From: sharrissf@gmail.com
>> To: java-user@lucene.apache.org
>> Subject: Re: Clustering Lucene with 40 Servers
>> 
>> Some quick questions/points:
>> 
>> What is the update rate?
>> 
>> The number of nodes you described is no problem, the query rate would be
>> no problem too (because they use read locks and act independently).
>> 
>> Do all nodes do updates or just 1? How often do these updates occur?
>> 
>> Probably best thing to do is give it a try and run a few tests.
>> 
>> Cheers,
>> Steve
>> 
>> 
>> On 12/27/06, Biggy <biggy97@web.de> wrote:
>> >
>> > I'm currently investigating the best ways of clustering Lucene.
>> > I've heard of both Solr, Terracotta but do not know how well they scale.
>> > Their examples talk of a 4 node cluster. This is way too small for my needs.
>> >
>> > I have 30x JVMs each handling 3 requests/sec and each having their own
>> > Lucene index. The index changes are propagated to the cluster members using
>> > JGroups messages. This solution has more than reached its limit as JGroups
>> > has become unstable and a source of many JVMs crashes. Based on current
>> > traffic trends I anticipate needing to upgrade to 40x + JVMS very soon.
>> >
>> > Can anybody suggest a way to effectivily cluster / replicate document
>> > changes ?
>> >
>> > P.S.:
>> > JMS is not a possible solution as this was the prior JGroups solution. We
>> > had too many memory problems/queue full etc crashing the servers thereafter.
>> >
>> > --
>> > View this message in context: http://www.nabble.com/Clustering-Lucene-with-40-Servers-tf2886546.html#a8064135
>> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 

AF> _________________________________________________________________
AF> Fixing up the home? Live Search can help.
AF> http://imagine-windowslive.com/search/kits/default.aspx?kit=improve&locale=en-US&source=wlmemailtaglinenov06
AF> ---------------------------------------------------------------------
AF> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
AF> For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 28 13:56:51 2006
Return-Path: <java-user-return-25234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90927 invoked from network); 28 Dec 2006 13:56:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 13:56:50 -0000
Received: (qmail 36199 invoked by uid 500); 28 Dec 2006 13:56:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36163 invoked by uid 500); 28 Dec 2006 13:56:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36152 invoked by uid 99); 28 Dec 2006 13:56:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 05:56:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 05:56:39 -0800
Received: by nf-out-0910.google.com with SMTP id n28so4568845nfc
        for <java-user@lucene.apache.org>; Thu, 28 Dec 2006 05:56:18 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Vc/RZHsRSnzSedCZTHLXBMBgwKqTNAH2Xa56sMye+nlw0RulucrwodbI51S3bEoQy34YuqFjJqeRVasnM1693U3jr2eSuTyoHTtsDk8Owe3KZUc0cW4dxs0aL1j4/qssgmSDEEERK/3mK5CyxgBL9pGYSi6I8Jt+DjZ4QaXskYo=
Received: by 10.82.118.2 with SMTP id q2mr959205buc.1167314178218;
        Thu, 28 Dec 2006 05:56:18 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Thu, 28 Dec 2006 05:56:18 -0800 (PST)
Message-ID: <359a92830612280556s2ce9d796m55b3c6d59a91737f@mail.gmail.com>
Date: Thu, 28 Dec 2006 08:56:18 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Nested Queries
In-Reply-To: <45935DC9.7010205@naukri.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_124583_21765609.1167314178166"
References: <4590EC75.5090606@naukri.com> <4590EFC1.3040907@naukri.com>
	 <4592AEC6.1060601@syr.edu> <45935DC9.7010205@naukri.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_124583_21765609.1167314178166
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No. Lucene is a text search engine, NOT a RDBMS. Whenever you think of joins
(self or otherwise), you're thinking in RDMBS terms, which Lucene is not. At
best, you'll have to use one of the DB integrations that Steve mentioned
(assuming they work). But I wouldn't keep looking for any magic internal to
Lucene to solve this problem.

On 12/28/06, Kapil Chhabra <kapil.chhabra@naukri.com> wrote:
>
> Hi Steve,
> Thanks for the response.
> Actually I am not looking for a query language. My question is, whether
> Lucene supports Nested Queries or self joins?
> As per
>
> http://lucene.apache.org/java/docs/api/org/apache/lucene/queryParser/QueryParser.html
>
> In BNF, the query grammar is:
>
>    Query  ::= ( Clause )*
>    Clause ::= ["+", "-"] [<TERM> ":"] ( <TERM> | "(" Query ")" )
>
> Which means that
> FIELD2:(FIELD2:3)
> is a correct query. Correct me if I am wrong.
>
> What will this query translate into? Will it  be same as
> FIELD2: 1 OR FIELD2: 2
>
>
> Thanks
> kapilChhabra
>
> Steven Rowe wrote:
> > Hi Kapil,
> >
> > Kapil Chhabra wrote:
> >
> >> Just to mention, I have tokenized FIELD2 on "," and indexed it.
> >>
> >> FIELD2:3 should return 1,2
> >> FIELD2:(FIELD2:3) should return something like the output of:
> >>
> >> *FIELD2: 1 OR FIELD2: 2
> >>
> >
> > Given your data table, I assume you mean:
> >
> >    FIELD1:3 should return 1,2
> >    FIELD1:(FIELD2:3) should return something like the output of:
> >
> >    *FIELD1: 1 OR FIELD1: 2
> >
> > If you make FIELD1 stored, and search using "FIELD2:3", you can iterate
> > through the hits and return the values for FIELD1.
> >
> > Are you looking for a query language that does this work for you?  That
> > is, one which can query on any field and then return information from
> > other field(s) in matching documents?  If so, I don't know of such a
> > query language that exists for Lucene.
> >
> > There have been several integrations of Lucene with databases, some of
> > which enable SQL queries something like:
> >
> >     SELECT FIELD1 WHERE FIELD2 CONTAINS('3');
> >
> > 1. Marcelo Ochoa's Oracle JVM implementation for Lucene DataStore:
> > <http://issues.apache.org/jira/browse/LUCENE-724>; see also these
> > threads on the Lucene Java-Users list:
> > <http://www.nabble.com/Oracle-and-Lucene-Integration-tf2689965.html>
> > <http://www.nabble.com/Oracle-Lucene-integration--status--tf2865873.html
> >
> >
> > 2. Mark Harwood's Lucene database bindings for HSQLDB and Derby:
> > <http://issues.apache.org/jira/browse/LUCENE-434>; see also this thread
> > on the Lucene Java-Users list:
> > <http://www.nabble.com/Lucene-database-bindings-tf316816.html>
> >
> > 3. Hibernate (as of v3.1, I think) Lucene Integration:
> > <
> http://www.hibernate.org/hib_docs/annotations/reference/en/html/lucene.html
> >
> >
> > 4. DBSight enables Lucene search with databases: <
> http://www.dbsight.net/>
> >
> >
> > Hope it helps,
> > Steve
> >
> >
> >> Kapil Chhabra wrote:
> >>
> >>> Hi,
> >>>
> >>> Please see the following data-structure
> >>> +--------+----------+
> >>> | FIELD1 | FIELD2   |
> >>> +--------+----------+
> >>> | 1      | 2,3,4,6, |
> >>> | 2      | 3,1,5,7, |
> >>> | 3      | 1,2,     |
> >>> | 4      | 1,8,10,  |
> >>> | 5      | 2,9,     |
> >>> | 6      | 1,       |
> >>> | 7      | 2,9,     |
> >>> | 8      | 4,9,     |
> >>> | 9      | 5,7,8,   |
> >>> | 10     | 4,       |
> >>> +--------+----------+
> >>>
> >>> My requirement is to find all values in FIELD1 where FIELD2 contains
> >>> all values of FIELD1 where FIELD2 contains 3
> >>> Which means something like
> >>> FIELD2:(FIELD2:3)
> >>>
> >>> Is it possible to achieve this in a single query? If yes, then how
> >>> should I go about it?
> >>>
> >>>
> >>>
> >>> Thanks in anticipation,
> >>> kapilChhabra
> >>>
> >>>
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
>
>

------=_Part_124583_21765609.1167314178166--

From java-user-return-25235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 28 15:34:18 2006
Return-Path: <java-user-return-25235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13916 invoked from network); 28 Dec 2006 15:34:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 15:34:16 -0000
Received: (qmail 85583 invoked by uid 500); 28 Dec 2006 15:34:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85097 invoked by uid 500); 28 Dec 2006 15:34:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85086 invoked by uid 99); 28 Dec 2006 15:34:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 07:34:16 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 07:34:06 -0800
Received: by nf-out-0910.google.com with SMTP id n28so4590647nfc
        for <java-user@lucene.apache.org>; Thu, 28 Dec 2006 07:33:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=r8XRbuCl0DUmyddQp5J+1xmlNnVCVZsUx0YiiYSMVczUe5JRn0qUhpB8wDBJ+xpfUC8bWKgGNQsejRm4cDIRsj37IqekP18gLUwKrEayLAim+fzUXRyXPp6mEqSepPQ6f2FTJZPK2U6K7m/DR7gcDB0JU9os1oa9WgkOgy7sra8=
Received: by 10.82.111.8 with SMTP id j8mr921072buc.1167320025415;
        Thu, 28 Dec 2006 07:33:45 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Thu, 28 Dec 2006 07:33:45 -0800 (PST)
Message-ID: <c68e39170612280733y9a0b15vb1d9933a3ade4109@mail.gmail.com>
Date: Thu, 28 Dec 2006 10:33:45 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Clustering Lucene with 40 Servers
In-Reply-To: <BAY109-W3167D4724AC7709BE1C5EA8C70@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <BAY109-W3167D4724AC7709BE1C5EA8C70@phx.gbl>
X-Google-Sender-Auth: ca124c329e059850
X-Virus-Checked: Checked by ClamAV on apache.org

On 12/28/06, Adam Fleming <aflem26@hotmail.com> wrote:
> I saw that Doug Cutting had an interesting solution for his Technorati website:
> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12709.html
>
> It sounds like it's a single-writer, many readers type of system, but quite robust and efficient.

Yes, this is exactly what Solr uses.
One advantage of it over using a network filesystem is that you get
native FS speed, and you don't have a single point of failure (from
the searcher perspective).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 28 16:23:04 2006
Return-Path: <java-user-return-25236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22696 invoked from network); 28 Dec 2006 16:23:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 16:23:03 -0000
Received: (qmail 56450 invoked by uid 500); 28 Dec 2006 16:23:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56426 invoked by uid 500); 28 Dec 2006 16:23:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56415 invoked by uid 99); 28 Dec 2006 16:23:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 08:23:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 08:22:52 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15CC04F6@mailer.syr.edu>; Thu, 28 Dec 2006 11:22:30 -0500
Message-ID: <4593EF46.1090103@syr.edu>
Date: Thu, 28 Dec 2006 11:22:30 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Nested Queries
References: <4590EC75.5090606@naukri.com> <4590EFC1.3040907@naukri.com> <4592AEC6.1060601@syr.edu> <45935DC9.7010205@naukri.com>
In-Reply-To: <45935DC9.7010205@naukri.com>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Kapil,

Kapil Chhabra wrote:
> Hi Steve,
> Thanks for the response.
> Actually I am not looking for a query language. My question is, whether
> Lucene supports Nested Queries or self joins?
> As per
> http://lucene.apache.org/java/docs/api/org/apache/lucene/queryParser/QueryParser.html
> 
> In BNF, the query grammar is:
> 
>   Query  ::= ( Clause )*
>   Clause ::= ["+", "-"] [<TERM> ":"] ( <TERM> | "(" Query ")" )
> 
> Which means that FIELD2:(FIELD2:3) is a correct query. Correct me if I
> am wrong.
> 
> What will this query translate into? Will it  be same as FIELD2: 1 OR
> FIELD2: 2

"FIELD2:(FIELD2:3)" translates to "FIELD2:3".  This is because the
FieldX in "FieldX:(TermA OR TermB)" is interpreted distributively - this
query is equivalent to "FieldX:TermA OR FieldX:TermB".  A field
specifier on a nested query term or clause overrides the containing
field specifier, so "FIELD1:(FIELD2:3)" translates to "FIELD2:3".

A more complicated example:

    "Field2:(Field3:TermA OR (Field4:TermB AND TermC))"

translates to:

    "Field3:TermA OR (Field4:TermB AND Field2:TermC)"

Lucene does have nested queries, but these are not the same thing as SQL
nested queries.  Unlike SQL nested queries, in which the nested query is
evaluated and the *results* of the nested query are used as input to the
containing query, Lucene's queries are evaluated all at once.

Of course, you could achieve (self) joins with Lucene manually, by
submitting two queries serially, first the nested query, and then the
containing query, constructed with results returned from the nested
query.  But I know of no built-in Lucene functionality that will invoke
the search machinery for you in this fashion[1].

>From <http://lucene.apache.org/java/docs/scoring.html>:

    Lucene scoring uses a combination of the Vector Space
    Model (VSM) of Information Retrieval[2] and the
    Boolean model[3] to determine how relevant a given
    Document is to a User's query. In general, the idea
    behind the VSM is the more times a query term appears
    in a document relative to the number of times the
    term appears in all the documents in the collection,
    the more relevant that document is to the query. It
    uses the Boolean model to first narrow down the
    documents that need to be scored based on the use of
    boolean logic in the Query specification.

Hope it helps,
Steve

[1] There is a tradition of using something like joins in Information
Retrieval: (Pseudo-)Relevance Feedback, in which a subset of the terms
found in a subset of the documents of an initial query's result set are
combined with the intial query's terms to produce an augmented query.
See Grant Ingersoll's ApacheCon 2005 presentation and code at
<http://www.cnlp.org/apachecon2005/> for an implementation of
Pseudo-Relevance Feedback using Lucene.
[2] <http://en.wikipedia.org/wiki/Vector_Space_Model>
[3] <http://en.wikipedia.org/wiki/Standard_Boolean_model>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 28 16:55:44 2006
Return-Path: <java-user-return-25237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28460 invoked from network); 28 Dec 2006 16:55:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 16:55:44 -0000
Received: (qmail 13596 invoked by uid 500); 28 Dec 2006 16:55:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12800 invoked by uid 500); 28 Dec 2006 16:55:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12789 invoked by uid 99); 28 Dec 2006 16:55:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 08:55:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [62.209.45.174] (HELO outbound4-fra-R.bigfish.com) (62.209.45.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 08:55:33 -0800
Received: from outbound4-fra.bigfish.com (localhost.localdomain [127.0.0.1])
	by outbound4-fra-R.bigfish.com (Postfix) with ESMTP id 75E778D8937;
	Thu, 28 Dec 2006 16:54:42 +0000 (UTC)
Received: from mail20-fra-R.bigfish.com (unknown [10.4.252.3])
	by outbound4-fra.bigfish.com (Postfix) with ESMTP id 73A5785004B;
	Thu, 28 Dec 2006 16:54:42 +0000 (UTC)
Received: from mail20-fra (localhost.localdomain [127.0.0.1])
	by mail20-fra-R.bigfish.com (Postfix) with ESMTP id 63A3E368125;
	Thu, 28 Dec 2006 16:54:42 +0000 (UTC)
X-BigFish: VP
Received: by mail20-fra (MessageSwitch) id 1167324882329249_10955; Thu, 28 Dec 2006 16:54:42 +0000 (UCT)
Received: from localhost.localdomain (unknown [12.106.254.103])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail20-fra.bigfish.com (Postfix) with ESMTP id 04696380065;
	Thu, 28 Dec 2006 16:54:41 +0000 (UTC)
Received: from CHI4EXC01.corp.transunion.com (chi4exc01.corp.transunion.com [10.8.27.23])
	by localhost.localdomain (8.12.10/8.12.10) with ESMTP id kBSGsets000354;
	Thu, 28 Dec 2006 10:54:40 -0600
Received: from CHI4EXC08.corp.transunion.com ([10.8.27.30]) by CHI4EXC01.corp.transunion.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 28 Dec 2006 10:54:40 -0600
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C72AA0.C5804400"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Re: help finding docs, creating analyzer objects
Date: Thu, 28 Dec 2006 10:54:00 -0600
Message-ID: <42F6F4E5EC226C42A823270D5C523A3E050EBCF8@CHI4EXC08.corp.transunion.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Re: help finding docs, creating analyzer objects
Thread-Index: AccqoNtZcERakoncTJurFyoL27f/dw==
From: "Haszlakiewicz, Eric" <EHASZLA@transunion.com>
To: <gsingers@apache.org>, <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Dec 2006 16:54:40.0497 (UTC) FILETIME=[DDA39E10:01C72AA0]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C72AA0.C5804400
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

>>> Grant Ingersoll 12/26/2006 10:12 PM >>>
>Hi Eric,
>
>Take a look at http://lucene.apache.org/java/docs/releases.html=20
>
>Clicking through to the appropriate mirror, download/unzip =20
>lucene-2.0.0.zip.  In it you'll find the jars, contrib, README, demo, =20
>etc.   It really should contain everything you need outside of the =20
>actual Lucene source to get started.

ok, I feel really stupid now.  I don't know how I missed that before. =20
I guess I wasn't expecting much more than the jar file to be in the zip.
Thanks for pointing that out.

>I appreciate your comments on the docs.  You have many good =20
>suggestions for improvements, especially the definitions, etc.  Some =20

For a start, how about changing java/docs/releases.html to briefly
explain what's in the release:

--- releases.html.old 2006-12-28 10:04:39.470041600 -0600
+++ releases.html 2006-12-28 10:14:13.144945600 -0600
@@ -200,6 +200,11 @@
 <p>Both binary and source releases are available for=20
         <a =
href=3D"http://www.apache.org/dyn/closer.cgi/lucene/java/">download
from the Apache Mirrors</a>
 </p>
+<p>
+ The zip file contains the lucene-core jar file, html documentation, a =
demo
+ application and various jar files containing contributed code. <br>
+ If all you need is the core jar file you can download that separately.
+</p>
 </div>
=20
=20
@@ -218,4 +223,4 @@
          2006 <a href=3D"http://www.apache.org/licenses/">The Apache =
Software
Foundation.</a>
 </div>
 </div>
-</body></html>
\ No newline at end of file
+</body></html>


------_=_NextPart_001_01C72AA0.C5804400--


From java-user-return-25238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 28 18:50:03 2006
Return-Path: <java-user-return-25238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55890 invoked from network); 28 Dec 2006 18:50:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 18:50:02 -0000
Received: (qmail 79712 invoked by uid 500); 28 Dec 2006 18:50:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79678 invoked by uid 500); 28 Dec 2006 18:50:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79667 invoked by uid 99); 28 Dec 2006 18:50:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 10:50:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Dec 2006 10:49:50 -0800
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 305
          for <java-user@lucene.apache.org>;
          Thu, 28 Dec 2006 10:49:19 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <9DD92FDE-71A5-45D8-A7BC-F21EB4295C06@ehatchersolutions.com>
References: <1C573328-D736-4BD9-A904-EA7FD4228151@marketingbrokers.com> <9DD92FDE-71A5-45D8-A7BC-F21EB4295C06@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <29439739-10E5-4FCC-BE4E-D23AA6669885@marketingbrokers.com>
Content-Transfer-Encoding: 7bit
From: "Peter W." <peter@marketingbrokers.com>
Subject: Re: Paging Lucene Results
Date: Thu, 28 Dec 2006 10:49:18 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks.

When you are trying to determine how many items to show on a results  
page
and you have:

1. number of hits you want to display (hpp)
2. total hitcount returned by Lucene from a query (hc)
3. the results page you are currently on (ipg)

there's some math involved and I was looking for that formula.

Here's  one possible solution...

    private static int decide_hitsper(int hpp,int hc,int ipg,String use)
       {
       int ri=0;
       if(use.indexOf("l") ! 
=-1)                                                         // LOW(MIN)
          { // LOW
          ri=((ipg*hpp)-(hpp-1));
          } // if
        
else                                                                     
           // HIGH(MAX)
          { // MAX
          if(hc>hpp)
             {
             if((ipg*hpp) <= hc)
                ri=(ipg*hpp);
              
else                                                                     
     // few results
                ri=hc;
             } // inner if
          else
             ri=hc;
          } // else
       return ri;
       }

Also, is there an available sample of using TopDocs .search()?

Peter W.



On Dec 27, 2006, at 10:33 PM, Erik Hatcher wrote:

>
> On Dec 28, 2006, at 12:02 AM, Peter W. wrote:
>> I'm trying to iterate or page through Lucene document hits results.
>> Before reinventing this, is there an existing solution out there  
>> or in Solr?
>
> There really isn't much wheel to reinvent... you can "page" through  
> Hits by simply starting at any point and going forward however many  
> documents you want per page.  You could also use TopDocs  
> returning .search() methods, which is what I think Solr does.   
> Again, not much to it - pick a starting point, and go from there.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 28 21:35:21 2006
Return-Path: <java-user-return-25239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87313 invoked from network); 28 Dec 2006 21:35:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 21:35:21 -0000
Received: (qmail 61005 invoked by uid 500); 28 Dec 2006 21:35:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60981 invoked by uid 500); 28 Dec 2006 21:35:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60970 invoked by uid 99); 28 Dec 2006 21:35:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 13:35:19 -0800
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DRUGS_ERECTILE,DRUGS_ERECTILE_OBFU,FUZZY_VPILL
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.32] (HELO smtp001.mail.ukl.yahoo.com) (217.12.11.32)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Dec 2006 13:35:09 -0800
Received: (qmail 91118 invoked from network); 28 Dec 2006 21:34:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=aV7VEBwIpxC56EpAPyyodYBT99QHXj7pTkgGozrPKmdr37cB4DjD2mPvKhbiijlhdvfev7w2ZunsaT3Bl+xLnBWQtkCMej+A64rXCsZfAl9dsOPcQ8qOmvTCGrLdQk0uBHOdJbNNXGSH8aoBMcl/lO2/aA/GOV6kDEX+Y8So9Nw=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp001.mail.ukl.yahoo.com with SMTP; 28 Dec 2006 21:34:47 -0000
X-YMail-OSG: MTOg.OQVM1m5LpuQhbfegpIt_UrprRr_7m8r20ZjYdGTL_T_tbQPK_NZGs4GEGAuGRmyQLqfxBjXWB_dYCcsE6_P5bLVSih3aRvbGTonQ6_vxAHbTeriiv.nPbk.j30jQfU3WMx1bmy4K6tfSB2XxdLsuFghssSIP9CQHbRpQb253CE9awoKE0NHEA--
Message-ID: <45943873.40207@yahoo.co.uk>
Date: Thu, 28 Dec 2006 21:34:43 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Clustering Lucene with 40 Servers
References: <BAY109-W3167D4724AC7709BE1C5EA8C70@phx.gbl>
In-Reply-To: <BAY109-W3167D4724AC7709BE1C5EA8C70@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Not quite yet gone up to this scale but here are some points for 
consideration based on a smaller scale system I have in production that 
may be of interest:


By clustering I presume you are only talking about replication.
When we talk about scaling and using multiple machines we need to think 
of "partitioning" and "replication" - they are 2 techniques for solving 
two different problems (scaling for data volumes and scaling for user 
volumes, respectively). If you have a large amount of data you need to 
partition the data into separate partitions or "shards", distributed on 
multiple machines and query them in parallel. If you have a large number 
of users you need to replicate copies of an index/shard and balance the 
query load across multiple replicated machines.

As for synchronizing I have previously used a centralized database as 
the definitive source of all data from which index search nodes pull 
their content. This has the benefits of using a database's powerful 
transactional, and backup/restore facilities to manage the integrity of 
the source data. Modulo n of a a hash of the database's primary key can 
be used to allocate a search partition ID for each record which is a way 
of evenly apportioning content to your n search partitions. Databases 
also have facilities to automate the timestamping of updated/deleted 
records. Each search server simply reads the latest 
updated/modified/deleted records from the central database for the 
partition(s) they manage and patches their index accordingly. Using this 
approach a search node can suffer a failure and always be able to 
recover without too much trouble. There are more efficient ways of 
distributed content than via JDBC and polling and better ways of 
building replicated indexes than duplicating the indexing logic on 
multiple machines but this has the advantage of being simple to 
implement and may suffice if the updates volume/frequency is relatively low.

Cheers
Mark




		
___________________________________________________________ 
All New Yahoo! Mail – Tired of Vi@gr@! come-ons? Let our SpamGuard protect you. http://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 28 22:15:22 2006
Return-Path: <java-user-return-25240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95315 invoked from network); 28 Dec 2006 22:15:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2006 22:15:21 -0000
Received: (qmail 14852 invoked by uid 500); 28 Dec 2006 22:15:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14826 invoked by uid 500); 28 Dec 2006 22:15:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14815 invoked by uid 99); 28 Dec 2006 22:15:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 14:15:20 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 14:15:09 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H03WS-0000Oq-MU
	for java-user@lucene.apache.org; Thu, 28 Dec 2006 14:14:48 -0800
Message-ID: <8080965.post@talk.nabble.com>
Date: Thu, 28 Dec 2006 14:14:48 -0800 (PST)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: newbie lucene indexing/search question
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I currently have a book containing content that is stored in the database by
paragraph. For example, a book contains content with 5 paragraphs. Therefore
each paragraph is stored as a distinct record in a database. In the object
domain, I have a Book object which holds a java.util.List of Paragraph
objects. In the relational world, this would be a One-to-Many for
book-paragraph.

Now, if I search for specific words against the Book's contents, will it
retrieve all of the paragraphs, combine them and then do the search, or will
it only search on a paragraph? For example, a "Guitar" book contains two
paragraphs like this:

paragraph 1: This is the first paragraph for learn
paragraph 2: guitar and other musical instruments.

Therefore there will be a record in the Book table linked with two records
in the Paragraph table. Now say I index the book and paragraph fields as is
and then have a lucene query that looks like this: [book:Guitar
paragraph:"learn guitar"]. Will this query return a hit?

Thanks in advance! 

-los
-- 
View this message in context: http://www.nabble.com/newbie-lucene-indexing-search-question-tf2892417.html#a8080965
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 29 04:59:18 2006
Return-Path: <java-user-return-25241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47541 invoked from network); 29 Dec 2006 04:59:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2006 04:59:18 -0000
Received: (qmail 59914 invoked by uid 500); 29 Dec 2006 04:59:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59868 invoked by uid 500); 29 Dec 2006 04:59:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59850 invoked by uid 99); 29 Dec 2006 04:59:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 20:59:17 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [129.79.225.189] (HELO cricket.bio.indiana.edu) (129.79.225.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Dec 2006 20:59:08 -0800
Received: (from gilbertd@localhost)
	by cricket.bio.indiana.edu (8.11.7p2+Sun/8.11.7) id kBT4wlu28912
	for java-user@lucene.apache.org; Thu, 28 Dec 2006 23:58:47 -0500 (EST)
Date: Thu, 28 Dec 2006 23:58:47 -0500 (EST)
From: Don Gilbert <gilbertd@bio.indiana.edu>
Message-Id: <200612290458.kBT4wlu28912@cricket.bio.indiana.edu>
To: java-user@lucene.apache.org
Subject: Major Bioinformatics center adopts Lucene to help biologists search "everything"
X-Virus-Checked: Checked by ClamAV on apache.org


from European Bioinformatics Institute (EBI) http://www.ebi.ac.uk/
---------------------------------
Better, faster, easier 
EMBL-EBI launches its new website with powerful search engine

Behind this new web interface lies the "EB-eye", a powerful
search engine allowing instant searches of all the
EBI's databases from a single query.

Crucially, navigating links between databases has become a lot easier;
genomes, genes, proteins, structures and biological functions can all
be explored through a single simple interface.

What is the EB-eye Search?
The system is developed on top of the Apache Lucene project framework,
which is an Open-source, high-performance, full-featured text search
engine library written entirely in Java. It uses this technology to
index EBI databases in various formats (e.g. flatfiles, XML dumps, OBO
format, etc.) and provides very fast access to the EBI's data
resources. The system allows the user to search globally across all
EBI databases or individually in selected resources by using an
Advance search.  http://www.ebi.ac.uk/inc/help/search_help.html
-----------------------------------

-- Don Gilbert (author of LuceGene; http://www.gmod.org/lucegene)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 29 08:46:09 2006
Return-Path: <java-user-return-25242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81617 invoked from network); 29 Dec 2006 08:46:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2006 08:46:08 -0000
Received: (qmail 3768 invoked by uid 500); 29 Dec 2006 08:46:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3736 invoked by uid 500); 29 Dec 2006 08:46:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3725 invoked by uid 99); 29 Dec 2006 08:46:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Dec 2006 00:46:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lukas.vlcek@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Dec 2006 00:45:57 -0800
Received: by nf-out-0910.google.com with SMTP id n28so4822001nfc
        for <java-user@lucene.apache.org>; Fri, 29 Dec 2006 00:45:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=amOfQgyF0t+jYAzakptRbsy4c599fXq03kzyS7Hrwka/FFWEhq/SuJ63zbNpJ6pEZhvA3xd/VS+1go9qJsBDKxll5yyp8sFH6VuPnxb2Jp6plUzvZOLmCyBtYZtpDlB79xk4Sfl01b/z7EZPH8TIf0BNYWkuy7h/5EYI3Mgjwjs=
Received: by 10.82.162.14 with SMTP id k14mr661544bue.1167381936471;
        Fri, 29 Dec 2006 00:45:36 -0800 (PST)
Received: by 10.82.147.11 with HTTP; Fri, 29 Dec 2006 00:45:36 -0800 (PST)
Message-ID: <52c3ddca0612290045v53ab59d1vc2ae1df736208605@mail.gmail.com>
Date: Fri, 29 Dec 2006 09:45:36 +0100
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
Reply-To: java-user@lucene.apache.org
To: java-user@lucene.apache.org
Subject: Re: Major Bioinformatics center adopts Lucene to help biologists search "everything"
In-Reply-To: <200612290458.kBT4wlu28912@cricket.bio.indiana.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_139682_15080814.1167381936449"
References: <200612290458.kBT4wlu28912@cricket.bio.indiana.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_139682_15080814.1167381936449
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Do you think you could give me some details about your index size?
I am interested in number of documents in all indices, how indices are they
distributed (are they hosted on single machine or spread all over the
world), did you use any other specific technology (Compass or other
framework)...

Regards,
Lukas

On 12/29/06, Don Gilbert <gilbertd@bio.indiana.edu> wrote:
>
>
> from European Bioinformatics Institute (EBI) http://www.ebi.ac.uk/
> ---------------------------------
> Better, faster, easier
> EMBL-EBI launches its new website with powerful search engine
>
> Behind this new web interface lies the "EB-eye", a powerful
> search engine allowing instant searches of all the
> EBI's databases from a single query.
>
> Crucially, navigating links between databases has become a lot easier;
> genomes, genes, proteins, structures and biological functions can all
> be explored through a single simple interface.
>
> What is the EB-eye Search?
> The system is developed on top of the Apache Lucene project framework,
> which is an Open-source, high-performance, full-featured text search
> engine library written entirely in Java. It uses this technology to
> index EBI databases in various formats (e.g. flatfiles, XML dumps, OBO
> format, etc.) and provides very fast access to the EBI's data
> resources. The system allows the user to search globally across all
> EBI databases or individually in selected resources by using an
> Advance search.  http://www.ebi.ac.uk/inc/help/search_help.html
> -----------------------------------
>
> -- Don Gilbert (author of LuceGene; http://www.gmod.org/lucegene)
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_139682_15080814.1167381936449--

From java-user-return-25243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 29 10:00:19 2006
Return-Path: <java-user-return-25243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7330 invoked from network); 29 Dec 2006 10:00:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2006 10:00:18 -0000
Received: (qmail 90102 invoked by uid 500); 29 Dec 2006 10:00:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90069 invoked by uid 500); 29 Dec 2006 10:00:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90042 invoked by uid 99); 29 Dec 2006 10:00:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Dec 2006 02:00:17 -0800
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.231] (HELO web60823.mail.yahoo.com) (209.73.178.231)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 29 Dec 2006 02:00:06 -0800
Received: (qmail 75560 invoked by uid 60001); 29 Dec 2006 09:59:46 -0000
Message-ID: <20061229095946.75558.qmail@web60823.mail.yahoo.com>
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=XlrL7i3lxle9XMUa2Kn4sY9fOQnItgt/tmwnTeVWaDMnU/V4LiETwaTmMKVgEBW9pLXur5KL4dGisojCW+rGELogu3jZYOV90bbsg2OzcX/hsDSllP9qxAUbrWbOxTUQt+cDHXOoRb9dKeJOS3Ik74NiJadrZE9UYcwh080GzZU=;
X-YMail-OSG: r1LIhcUVM1nUk7cf8BeIzUBU4ntCdXctc6Od3mxXmCtceDsFzcOalI52FYFrs1lLKaok6TJ0q91GuHSkOQKGB1atIh9PgndcczZdfQIiounMD0iwtgzpnvgecvIZh.3L9MY_7fNMeClN__ycuaHihZN4c.U-
Received: from [88.154.136.211] by web60823.mail.yahoo.com via HTTP; Fri, 29 Dec 2006 01:59:45 PST
Date: Fri, 29 Dec 2006 01:59:45 -0800 (PST)
From: zzzzz shalev <zzzzz_shalev@yahoo.com>
Subject: comparing Ramdirectory to MMap
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-646976222-1167386385=:72198"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

--0-646976222-1167386385=:72198
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

hey all,
   
  i am currently running lucene 1.43, i am loading all relevant searchable data into a ramdir and storing display data in oracle.
   
  i have read good things about mmap and was wondering about the following:
   
  1. does it require a 'warm up' to achieve sub-second results? if so, what is the behavior when new queries are requested that have not been cached?
  2. for a 20 million record index (each record contains about 2k data) what would be the memory requirements in mmap (ram)?
  3. what kind of performance numbers are we looking at (response time)?
   
  much much appreciated..
   

 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-646976222-1167386385=:72198--

From java-user-return-25244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 29 10:49:39 2006
Return-Path: <java-user-return-25244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14931 invoked from network); 29 Dec 2006 10:49:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2006 10:49:38 -0000
Received: (qmail 40489 invoked by uid 500); 29 Dec 2006 10:49:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40461 invoked by uid 500); 29 Dec 2006 10:49:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40442 invoked by uid 99); 29 Dec 2006 10:49:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Dec 2006 02:49:38 -0800
X-ASF-Spam-Status: No, hits=4.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE,RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [203.84.221.124] (HELO web8703.mail.in.yahoo.com) (203.84.221.124)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 29 Dec 2006 02:49:28 -0800
Received: (qmail 67755 invoked by uid 60001); 29 Dec 2006 10:49:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type;
  b=roU8oGQOAPQJt9h67jhmCxR8hodsKjufFqJd5fOosHP7ubhC2kftD7wRp2ZRvtfXPbvcvINR7L1lLa0bePJxhgbF2H9rM/aJTqcWpnF7Z27oXEL9OLzB2gnmJ3bumwuGhT9CC+JarZXtGN12P1J4UUqah0wzpgLNyZFQTWjBzzI=  ;
Message-ID: <20061229104904.67753.qmail@web8703.mail.in.yahoo.com>
Received: from [59.95.164.46] by web8703.mail.in.yahoo.com via HTTP; Fri, 29 Dec 2006 16:19:04 IST
Date: Fri, 29 Dec 2006 16:19:04 +0530 (IST)
From: aslam bari <iamaslamok@yahoo.co.in>
Subject: NewBie:- Which Analyzer is best for Text and Number Indexing
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1308559214-1167389344=:65333"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1308559214-1167389344=:65333
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable

Hello All,=0A I m new to Lucene and want to know which anayzer to use for i=
ndexing the Text and Numbers as well. But here is a problem.=0AI have a xml=
 file which has text and numbers in values. I want to index some(special) n=
odes value with [text and Numbers] but don't need all of the nodes to come =
in Number indexing, they should go with default text indexing.=0A=0A<City>=
=0A    <Garden>=0A        <Plot name=3D"Rjmahal 765 Nodia" place=3D"raghu 8=
988 ami">=0A        <Joy name=3D"Hum 700 fdfd">=0A    </Garden>=0A</City>=
=0A=0AIn this Example , i need to index only Plot\name value "Rjmahal 765 N=
odia" with text indexing as well as number indexing. All other values shoul=
d go text indexing. Because i need to search only on Plot\names number like=
 765. I don't need to search on 8988 and 700 etc.=0A=0AAny help will be app=
reciatable.=0A=0AThanks...=0A=0ASend free SMS to your Friends on Mobile fro=
m your Yahoo! Messenger. Download Now! http://messenger.yahoo.com/download.=
php
--0-1308559214-1167389344=:65333--

From java-user-return-25245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 29 15:53:41 2006
Return-Path: <java-user-return-25245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76508 invoked from network); 29 Dec 2006 15:53:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2006 15:53:40 -0000
Received: (qmail 65986 invoked by uid 500); 29 Dec 2006 15:53:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65955 invoked by uid 500); 29 Dec 2006 15:53:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65944 invoked by uid 99); 29 Dec 2006 15:53:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Dec 2006 07:53:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a5.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Dec 2006 07:53:28 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a5.dreamhost.com (Postfix) with ESMTP id 52EC714D6B4
	for <java-user@lucene.apache.org>; Fri, 29 Dec 2006 07:53:03 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <42F6F4E5EC226C42A823270D5C523A3E050EBCF8@CHI4EXC08.corp.transunion.com>
References: <42F6F4E5EC226C42A823270D5C523A3E050EBCF8@CHI4EXC08.corp.transunion.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6160B9E4-811F-4BA4-9DDE-A6933056A378@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: help finding docs, creating analyzer objects
Date: Fri, 29 Dec 2006 10:53:02 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

>
> --- releases.html.old 2006-12-28 10:04:39.470041600 -0600
> +++ releases.html 2006-12-28 10:14:13.144945600 -0600
> @@ -200,6 +200,11 @@
>  <p>Both binary and source releases are available for
>          <a href="http://www.apache.org/dyn/closer.cgi/lucene/ 
> java/">download
> from the Apache Mirrors</a>
>  </p>
> +<p>
> + The zip file contains the lucene-core jar file, html  
> documentation, a demo
> + application and various jar files containing contributed code. <br>
> + If all you need is the core jar file you can download that  
> separately.
> +</p>
>  </div>
>
>
> @@ -218,4 +223,4 @@
>           2006 <a href="http://www.apache.org/licenses/">The Apache  
> Software
> Foundation.</a>
>  </div>
>  </div>
> -</body></html>
> \ No newline at end of file
> +</body></html>
>


Applied.  Thanks Eric.  Changes should show up tonight.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 29 17:17:46 2006
Return-Path: <java-user-return-25246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92634 invoked from network); 29 Dec 2006 17:17:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2006 17:17:45 -0000
Received: (qmail 10409 invoked by uid 500); 29 Dec 2006 17:17:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10339 invoked by uid 500); 29 Dec 2006 17:17:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10265 invoked by uid 99); 29 Dec 2006 17:17:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Dec 2006 09:17:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Dec 2006 09:17:34 -0800
Received: by ug-out-1314.google.com with SMTP id k40so4457827ugc
        for <java-user@lucene.apache.org>; Fri, 29 Dec 2006 09:17:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=p51libDgoSzx3Nc0a38rFZq+cF5Ct4x8BFV0QQJEP1PyFfV+ZAd7PZbqtT+oCCKgEVwXpsR46yEQuKrZWLIq+twToz/QiMfUgpBykdIRf8McqzGsK9CieiTeLh5diDOGmCTCN5OdrSP1qbAsYAj06oHjM4wuPbWNONvmDW+RLD4=
Received: by 10.82.139.17 with SMTP id m17mr1102096bud.1167412633039;
        Fri, 29 Dec 2006 09:17:13 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Fri, 29 Dec 2006 09:17:12 -0800 (PST)
Message-ID: <359a92830612290917r20a5d3fh6db1b4c93bf26bba@mail.gmail.com>
Date: Fri, 29 Dec 2006 12:17:12 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: newbie lucene indexing/search question
In-Reply-To: <8080965.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_142128_2267192.1167412632896"
References: <8080965.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_142128_2267192.1167412632896
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It all depends upon how you index it <G>.... There are at least three
approaches.

1> each paragraph is a distinct Lucene document. You'd also index some data
with each paragraph that allows you to reconstruct what book it came from.
What relevance means on a per-book basis is a question you need to give some
thought to, but searching on the text field will search all your paragraphs.
This assumes that each lucene document indexes the paragraph in a field
labeled "text".

2> You index all the paragraphs of a single book together in one lucene
document. This really has two variants
2a> each paragraph gets it's own field in the document, i.e. fields like
paragraph1, paragraph2. I wouldn't do this since the queries you have to
construct are ugly.
2b> you index all the paragraphs into a single field per book, call it
"text". Now, searching against the text field will search all the paragraphs
you put in there. BTW, the following are equivalent (and note it's pseudo
code)

doc = new doc();
doc.add("text" "some text");
doc.add("text", "more stuff");
writer.add(doc);

and

doc = new doc();
doc.add("text", "some text more stuff");
writer.add(doc);

You can play some games with the offsets of the first word of each paragraph
if you need to know which paragraph the data was in (in the first form above
only). Search the mail archive for  PositionIncrementGap (?). The idea is
that your text position for the last token in, say, paragraph 1 is 129. You
can cause the first word of the next paragraph have an offset of 1,000, say.
This has some interesting ramifications about whether you want, say, phrase
searches to span pages or not, but that's another discussion....

And be aware that by default Lucene only indexes the first 10,000 tokens in
a field. You can set this as high as you need to but you have to do it
intentionally...

Best
Erick


On 12/28/06, moraleslos <moraleslos@hotmail.com> wrote:
>
>
> I currently have a book containing content that is stored in the database
> by
> paragraph. For example, a book contains content with 5 paragraphs.
> Therefore
> each paragraph is stored as a distinct record in a database. In the object
> domain, I have a Book object which holds a java.util.List of Paragraph
> objects. In the relational world, this would be a One-to-Many for
> book-paragraph.
>
> Now, if I search for specific words against the Book's contents, will it
> retrieve all of the paragraphs, combine them and then do the search, or
> will
> it only search on a paragraph? For example, a "Guitar" book contains two
> paragraphs like this:
>
> paragraph 1: This is the first paragraph for learn
> paragraph 2: guitar and other musical instruments.
>
> Therefore there will be a record in the Book table linked with two records
> in the Paragraph table. Now say I index the book and paragraph fields as
> is
> and then have a lucene query that looks like this: [book:Guitar
> paragraph:"learn guitar"]. Will this query return a hit?
>
> Thanks in advance!
>
> -los
> --
> View this message in context:
> http://www.nabble.com/newbie-lucene-indexing-search-question-tf2892417.html#a8080965
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_142128_2267192.1167412632896--

From java-user-return-25247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 29 17:23:54 2006
Return-Path: <java-user-return-25247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93910 invoked from network); 29 Dec 2006 17:23:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2006 17:23:53 -0000
Received: (qmail 21382 invoked by uid 500); 29 Dec 2006 17:23:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21344 invoked by uid 500); 29 Dec 2006 17:23:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21333 invoked by uid 99); 29 Dec 2006 17:23:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Dec 2006 09:23:53 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Dec 2006 09:23:44 -0800
Received: by ug-out-1314.google.com with SMTP id k40so4459306ugc
        for <java-user@lucene.apache.org>; Fri, 29 Dec 2006 09:23:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cVSVUHn7Myq5xYewSgH93gQXFP70xfqcGflUoS7XQjIzPkbNq/9daXMHz6pLSDPjIFyeNTI4O6VypTIgITneJS2FEOHX9Mkqkcu0aQbSUr+P7RHL+XmxtGuvnytSFFeVJ5lhaFE4udG69aLPVtsRcgx7pDschf+xioP/7i38scI=
Received: by 10.82.118.2 with SMTP id q2mr1159141buc.1167413003439;
        Fri, 29 Dec 2006 09:23:23 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Fri, 29 Dec 2006 09:23:23 -0800 (PST)
Message-ID: <359a92830612290923w41c9cc10id824fd8326bf7efe@mail.gmail.com>
Date: Fri, 29 Dec 2006 12:23:23 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NewBie:- Which Analyzer is best for Text and Number Indexing
In-Reply-To: <20061229104904.67753.qmail@web8703.mail.in.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_142240_22466681.1167413003411"
References: <20061229104904.67753.qmail@web8703.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_142240_22466681.1167413003411
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Assuming that you are indexing these in different fields in your Lucene
document, you can use a PerFieldAnalyzerWrapper to use different analyzers
for each field. Be sure you carefully coordinate the analyzer you use for
indexing with the one you use for searching or your results will not be what
you expect....

You could break the input stream up upon input, and use, say, a
SimpleAnalyzer to just break on whitespace. This is really using your own
custom analyzer that cracks your XML document and returns selected data from
specific fields.

Assuming your index structure allows you to use a different analyzer for
different fields in your lucene document, I'd recommend the
PerFieldAnalyzerWrapper....

Best
Erick

On 12/29/06, aslam bari <iamaslamok@yahoo.co.in> wrote:
>
> Hello All,
> I m new to Lucene and want to know which anayzer to use for indexing the
> Text and Numbers as well. But here is a problem.
> I have a xml file which has text and numbers in values. I want to index
> some(special) nodes value with [text and Numbers] but don't need all of the
> nodes to come in Number indexing, they should go with default text indexing.
>
> <City>
>     <Garden>
>         <Plot name="Rjmahal 765 Nodia" place="raghu 8988 ami">
>         <Joy name="Hum 700 fdfd">
>     </Garden>
> </City>
>
> In this Example , i need to index only Plot\name value "Rjmahal 765 Nodia"
> with text indexing as well as number indexing. All other values should go
> text indexing. Because i need to search only on Plot\names number like 765.
> I don't need to search on 8988 and 700 etc.
>
> Any help will be appreciatable.
>
> Thanks...
>
> Send free SMS to your Friends on Mobile from your Yahoo! Messenger.
> Download Now! http://messenger.yahoo.com/download.php
>

------=_Part_142240_22466681.1167413003411--

From java-user-return-25248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 29 20:25:34 2006
Return-Path: <java-user-return-25248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28419 invoked from network); 29 Dec 2006 20:25:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2006 20:25:32 -0000
Received: (qmail 77932 invoked by uid 500); 29 Dec 2006 20:25:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73508 invoked by uid 500); 29 Dec 2006 20:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65703 invoked by uid 99); 29 Dec 2006 20:24:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Dec 2006 12:24:00 -0800
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=RATWARE_MPOP_WEBMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [195.214.192.5] (HELO sonic.ukr.net) (195.214.192.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Dec 2006 12:22:57 -0800
Received: from mail by sonic.ukr.net with local ID 1H0OFG-0001sv-Fm
	for java-user@lucene.apache.org; Fri, 29 Dec 2006 22:22:26 +0200
Received: from [213.130.3.211] by e.ukr.net with HTTP;
	Fri, 29 Dec 2006 20:22:26 +0000 (GMT)
From: "Alex Novik" <alex_nv@ukr.net>
To: "Grant Ingersoll" <java-user@lucene.apache.org>
Reply-To: "Alex Novik" <alex_nv@ukr.net>
Subject: Re[2]: Better way for use lucene search in ejb
Mime-Version: 1.0
X-Mailer: mPOP Web-Mail 2.19 advanced
X-Originating-IP: [213.130.3.211]
Content-Type: text/plain; charset=windows-1251
Content-Transfer-Encoding: 8bit
Message-Id: <E1H0OFG-0001sv-Fm@sonic.ukr.net>
Date: Fri, 29 Dec 2006 22:22:26 +0200
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Grant.

Main (first) question is:
Improve performance of search in J2EE app.

Problems:
 1. In EJB container I can't start Thread.
 2. If i use RMI call from EJB container to Lucene app with binds RemoteSearch - perfomance ten times more then simple Java application.
 (sample) 
	LocateRegistry.createRegistry(1099);
	Searcher parallelSearcher = new ParallelMultiSearcher(searchables);
	RemoteSearchable parallelImpl = new RemoteSearchable(parallelSearcher);
	Naming.rebind("//localhost/multi_searcher", parallelImpl);

contingencies:
 - Server works with java 1.4.
 - Many ( > 100) call for each client.
 - Index less then 10000 documents.
 - Index changed very rare.
 - can't use MBean as JBoss.
 - can't use java 1.5

Second question:
  Can i use ParallelMultiSearcher(searchables) in JCA 1.0 as Singleton object for all clients.

> Hi Alex,

> This seems like a pretty small setup, so I think we may need some  
> more info.  I don't know a lot about EJBs, but what I wonder is if  
> your bean is opening an Index Searcher for every connection.  Perhaps
> you could describe your architecture a little bit more and that will  
> help us figure out what is going on?

> I wouldn't think you would need RMI or anything like that.

> -Grant

> On Dec 24, 2006, at 9:34 AM, Alex Novik wrote:

>> I try to use lucene search in j2ee server (generic).
>>
>> Problem - improve performance.
>>
>> - Server works with java 1.4.
>> - Many ( > 100) call for each client.
>> - Index less then 10000 documents.
>> - Index changed very rare.
>> - can't use MBean as JBoss.
>> - can't use java 1.5
>>
>> 1. If use RemoteSearchable and RMI call - degradation of performance.
>> 2. JCA Connector lucenerar - create IndexReader for each client and  
>> don't use connection pool.
>>
>> I think better way use RAMDirectory as singleton object in connector.
>>
>> What is the best way to use lucene search in ejb and improve  
>> performance?
>>
>> Thanks so much for any help you can give me.
>> Alex.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>

> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org

> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
> LuceneFAQ



> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



Best regards,
Alex







    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 30 22:19:16 2006
Return-Path: <java-user-return-25249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18938 invoked from network); 30 Dec 2006 22:19:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2006 22:19:16 -0000
Received: (qmail 69145 invoked by uid 500); 30 Dec 2006 22:19:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69103 invoked by uid 500); 30 Dec 2006 22:19:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69092 invoked by uid 99); 30 Dec 2006 22:19:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Dec 2006 14:19:16 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jeffrey.tiong@gmail.com designates 66.249.82.235 as permitted sender)
Received: from [66.249.82.235] (HELO wx-out-0506.google.com) (66.249.82.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Dec 2006 14:19:07 -0800
Received: by wx-out-0506.google.com with SMTP id i29so5321832wxd
        for <java-user@lucene.apache.org>; Sat, 30 Dec 2006 14:18:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=oVWC4Z0hX9PztmOCo3oqMOOOYuHW7Oy17l30Co9pAnYIDQuqs1+izK75zkS86mMmWiOaxBZbCtT4nAICs4N/WRLMHkjt8NcKfARudpbxOyOhPiDqxCpHquJNyVAixp3fQ7qbhYqnP6bIp/zc0kuqFUhuRJ4bupXSWpsi+YR85vk=
Received: by 10.90.25.3 with SMTP id 3mr13133696agy.1167517126553;
        Sat, 30 Dec 2006 14:18:46 -0800 (PST)
Received: by 10.90.115.14 with HTTP; Sat, 30 Dec 2006 14:18:46 -0800 (PST)
Message-ID: <9c6a2da10612301418w321cc5bdp728c2d89fd61b00f@mail.gmail.com>
Date: Sat, 30 Dec 2006 17:18:46 -0500
From: "Tiong Jeffrey" <jeffrey.tiong@gmail.com>
To: java-user@lucene.apache.org
Subject: Looking for people to develop specialized search engine
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_90720_10932044.1167517126522"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_90720_10932044.1167517126522
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

My name is Jeffrey Tiong. I am currently working on this startup that
develops a niche search engine. We are looking for people who has the
expertise in this area and we are planning to use Lucene as the engine and
modify it. If you are interested please send your resume to
makemeoneofu@patsnap.com.

Thanks and Happy New Year!

Regards,
Jeffrey

------=_Part_90720_10932044.1167517126522--

From java-user-return-25250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 30 23:25:24 2006
Return-Path: <java-user-return-25250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33424 invoked from network); 30 Dec 2006 23:25:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2006 23:25:24 -0000
Received: (qmail 6541 invoked by uid 500); 30 Dec 2006 23:25:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6507 invoked by uid 500); 30 Dec 2006 23:25:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 96729 invoked by uid 99); 30 Dec 2006 19:55:10 -0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,MIME_BOUND_NEXTPART,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of saurabh@danicorp.com designates 63.134.207.28 as permitted sender)
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary=----_SmarterMail_NextPart_2787857251805847
Date: Sat, 30 Dec 2006 12:53:45 -0700
Subject: Minalyzer
From: "Saurabh Dani" <saurabh@danicorp.com>
Reply-To: saurabh@danicorp.com
To: <java-user@lucene.apache.org>,<lucene-net-user@lucene.apache.org>
CC: 
Message-ID: <c720e8ed3bab459f9928b53783cd7290@danicorp.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------_SmarterMail_NextPart_2787857251805847
Content-Type: text/plain;
	charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0D=0A=0D=0AGreetings All,=0D=0A=0D=0AIn the past week, we have released th=
e first public beta of our first Lucene based product.=0D=0A=0D=0AMinalyzer=
 (Miner and Analyzer) is a unique product that combines search with data an=
alysis. We have found many scenarios where data analysis can be based on ph=
rases / keywords in the data and we are trying to target that market. Minal=
yzer also targets those lucene users who are looking at quick deployment of=
 full text indexing and search capabilities without any programming require=
d.=0D=0A=0D=0AMinalyzer index server is "like" a database server, where one=
 can create multiple datastores. Datastores in Minalyzer world are similar =
to "databases", where one can creates multiple "index collections" (like ta=
bles in databases). Each Index Collection within a datastore is a lucene in=
dex, which can be created without any programming knowledge. We have provid=
ed GUI Wizards to create index collections on log files (any delimited file=
), plain text files and relational databases.=0D=0A=0D=0AWe will be adding =
several more Wizards to easily index information and templates to generate =
reports. We do expect the application to have some minor bugs in Beta phase=
, and we plan a monthly release to address those bugs and to add new featur=
es.=0D=0A=0D=0AIf you want to try it out, we have provided step by step ins=
tructions to download, install and index a sample IIS log file. We have eve=
n provided a sample log file, so all you need is about 10-15 minutes to try=
 it out -> currently we are only supporting Windows platform -> http://tiny=
url.com/ybgeqx . You need a Windows machine with .net 2.0 installed to test=
 it.=0D=0A=0D=0AWe have provided some screen shots / demo of the End User I=
nterface (Smart Client), report designer interface and the interface for Ad=
ministrative client to Manage the index server here -> http://tinyurl.com/y=
6agap .=0D=0A=0D=0AIf you have any feedback / critique, we would love to he=
ar that.=0D=0A=0D=0AThanks for your time.=0D=0ASaurabh=0D=0A

------_SmarterMail_NextPart_2787857251805847--




From java-user-return-25251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 30 23:25:48 2006
Return-Path: <java-user-return-25251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33625 invoked from network); 30 Dec 2006 23:25:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2006 23:25:47 -0000
Received: (qmail 7974 invoked by uid 500); 30 Dec 2006 23:25:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7940 invoked by uid 500); 30 Dec 2006 23:25:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 13580 invoked by uid 99); 30 Dec 2006 20:32:45 -0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,MIME_BOUND_NEXTPART,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of saurabh@danicorp.com designates 63.134.207.28 as permitted sender)
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary=----_SmarterMail_NextPart_4786661375735485
Date: Sat, 30 Dec 2006 13:31:12 -0700
Subject: Minalyzer
From: "Saurabh Dani" <saurabh@danicorp.com>
Reply-To: saurabh@danicorp.com
To: <java-user@lucene.apache.org>
CC: <lucene-net-user@lucene.apache.org>
Message-ID: <09ed584b106a4a43ad649d4de4e6675e@danicorp.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------_SmarterMail_NextPart_4786661375735485
Content-Type: text/plain;
	charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0D=0A=0D=0AGreetings All,=0D=0A=0D=0AIn the past week, we have released th=
e first public beta of our first Lucene based product.=0D=0A=0D=0AMinalyzer=
 (Miner and Analyzer) is a unique product that combines search with data an=
alysis. We have found many scenarios where data analysis can be based on ph=
rases / keywords in the data and we are trying to target that market. Minal=
yzer also targets those lucene users who are looking at quick deployment of=
 full text indexing and search capabilities without any programming require=
d.=0D=0A=0D=0AMinalyzer index server is "like" a database server, where one=
 can create multiple datastores. Datastores in Minalyzer world are similar =
to "databases", where one can creates multiple "index collections" (like ta=
bles in databases). Each Index Collection within a datastore is a lucene in=
dex, which can be created without any programming knowledge. We have provid=
ed GUI Wizards to create index collections on log files (any delimited file=
), plain text files and relational databases.=0D=0A=0D=0AWe will be adding =
several more Wizards to easily index information and templates to generate =
reports. We do expect the application to have some minor bugs in Beta phase=
, and we plan a monthly release to address those bugs and to add new featur=
es.=0D=0A=0D=0AIf you want to try it out, we have provided step by step ins=
tructions to download, install and index a sample IIS log file. We have eve=
n provided a sample log file, so all you need is about 10-15 minutes to try=
 it out -> currently we are only supporting Windows platform -> http://tiny=
url.com/ybgeqx . You need a Windows machine with .net 2.0 installed to test=
 it.=0D=0A=0D=0AWe have provided some screen shots / demo of the End User I=
nterface (Smart Client), report designer interface and the interface for Ad=
ministrative client to Manage the index server here -> http://tinyurl.com/y=
6agap .=0D=0A=0D=0AIf you have any feedback / critique, we would love to he=
ar that.=0D=0A=0D=0AThanks for your time.=0D=0ASaurabh=0D=0A=0D=0A

------_SmarterMail_NextPart_4786661375735485--




From java-user-return-25252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 31 00:14:31 2006
Return-Path: <java-user-return-25252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42096 invoked from network); 31 Dec 2006 00:14:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Dec 2006 00:14:30 -0000
Received: (qmail 33418 invoked by uid 500); 31 Dec 2006 00:14:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33382 invoked by uid 500); 31 Dec 2006 00:14:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33369 invoked by uid 99); 31 Dec 2006 00:14:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Dec 2006 16:14:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Dec 2006 16:14:22 -0800
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Sat, 30 Dec 2006 16:13:56 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Minalyzer
Date: Sat, 30 Dec 2006 16:13:55 -0800
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E626278BA80A7@WDCCPMAIL01.markettools.com>
In-Reply-To: <c720e8ed3bab459f9928b53783cd7290@danicorp.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Minalyzer
thread-index: AccsaccuWTfYGcbwQQyB03s3/WUk5gABprpg
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>,
	<saurabh@danicorp.com>,
	<lucene-net-user@lucene.apache.org>
X-OriginalArrivalTime: 31 Dec 2006 00:13:56.0033 (UTC) FILETIME=[8F96C310:01C72C70]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am reluctant using tiny url links sent to mailing lists.  I would
suggest using in addition to the tiny url at the end of your email a
full URL so everyone can verify the URL before clicking on it.

Andreas



-----Original Message-----
From: Saurabh Dani [mailto:saurabh@danicorp.com]=20
Sent: Saturday, December 30, 2006 11:54 AM
To: java-user@lucene.apache.org; lucene-net-user@lucene.apache.org
Subject: Minalyzer



Greetings All,

In the past week, we have released the first public beta of our first
Lucene based product.

Minalyzer (Miner and Analyzer) is a unique product that combines search
with data analysis. We have found many scenarios where data analysis can
be based on phrases / keywords in the data and we are trying to target
that market. Minalyzer also targets those lucene users who are looking
at quick deployment of full text indexing and search capabilities
without any programming required.

Minalyzer index server is "like" a database server, where one can create
multiple datastores. Datastores in Minalyzer world are similar to
"databases", where one can creates multiple "index collections" (like
tables in databases). Each Index Collection within a datastore is a
lucene index, which can be created without any programming knowledge. We
have provided GUI Wizards to create index collections on log files (any
delimited file), plain text files and relational databases.

We will be adding several more Wizards to easily index information and
templates to generate reports. We do expect the application to have some
minor bugs in Beta phase, and we plan a monthly release to address those
bugs and to add new features.

If you want to try it out, we have provided step by step instructions to
download, install and index a sample IIS log file. We have even provided
a sample log file, so all you need is about 10-15 minutes to try it out
-> currently we are only supporting Windows platform ->
http://tinyurl.com/ybgeqx . You need a Windows machine with .net 2.0
installed to test it.

We have provided some screen shots / demo of the End User Interface
(Smart Client), report designer interface and the interface for
Administrative client to Manage the index server here ->
http://tinyurl.com/y6agap .

If you have any feedback / critique, we would love to hear that.

Thanks for your time.
Saurabh


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 31 01:33:30 2006
Return-Path: <java-user-return-25253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52733 invoked from network); 31 Dec 2006 01:33:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Dec 2006 01:33:29 -0000
Received: (qmail 71082 invoked by uid 500); 31 Dec 2006 01:33:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71040 invoked by uid 500); 31 Dec 2006 01:33:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71029 invoked by uid 99); 31 Dec 2006 01:33:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Dec 2006 17:33:30 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MIME_BOUND_NEXTPART,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of saurabh@danicorp.com designates 63.134.207.28 as permitted sender)
Received: from [63.134.207.28] (HELO gwa6.webcontrolcenter.com) (63.134.207.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Dec 2006 17:33:20 -0800
Received: from maila25.webcontrolcenter.com [216.119.106.22] by gwa6.webcontrolcenter.com with SMTP;
   Sat, 30 Dec 2006 18:32:39 -0700
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary=----_SmarterMail_NextPart_0753050042727271
Date: Sat, 30 Dec 2006 18:32:06 -0700
Received: from [68.83.185.176] by maila25.webcontrolcenter.com via HTTP; Sat, 30 Dec 2006 18:32:06 -0700
Subject: RE: Minalyzer
From: "Saurabh Dani" <saurabh@danicorp.com>
Reply-To: saurabh@danicorp.com
To: <java-user@lucene.apache.org>
CC: <Andreas.Guther@markettools.com>
Message-ID: <4b33a023eae043858d2a4e371a749fc5@danicorp.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------_SmarterMail_NextPart_0753050042727271
Content-Type: text/plain;
	charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0D=0A=0D=0A						Andreas: =0D=0A=0D=0A						I used tinyurl links as I did =
not want this e-mail to look like an effort to get back links for search en=
gines. Here are the diret links: =0D=0A=0D=0A						Steps to install and ind=
ex a test log file -> http://www.minalyzer.com/documentation/9=0D=0AScreen =
shots & Demo -> http://www.minalyzer.com/demo/demo.html =0D=0A=0D=0A						I=
 also apologize for sending the original e-mail twice. I did get a deliver =
failure from apache.org for the first one, but it was still delivered. =0D=
=0A=0D=0A						Thanks=0D=0ASaurabh =0D=0A=0D=0A----------------------------=
------------=0D=0A=0D=0ASubject: RE: Minalyzer=0D=0ADate: Sat, 30 Dec 2006 =
16:13:55 -0800=0D=0AMessage-ID: <3FB08D6A21B3EC4D8749EF6D9E626278BA80A7@WDC=
CPMAIL01.markettools.com>=0D=0AIn-Reply-To: <c720e8ed3bab459f9928b53783cd72=
90@danicorp.com>=0D=0AThread-Topic: Minalyzer=0D=0Athread-index: AccsaccuWT=
fYGcbwQQyB03s3/WUk5gABprpg=0D=0AFrom: "Andreas Guther" <Andreas.Guther@mark=
ettools.com>=0D=0ATo: <java-user@lucene.apache.org>,=0D=0A<saurabh@danicorp=
.com>,=0D=0A<lucene-net-user@lucene.apache.org>=0D=0A=0D=0AHi,=0D=0A=0D=0AI=
 am reluctant using tiny url links sent to mailing lists. I would=0D=0Asugg=
est using in addition to the tiny url at the end of your email a=0D=0Afull =
URL so everyone can verify the URL before clicking on it.=0D=0A=0D=0AAndrea=
s=0D=0A=0D=0A-----Original Message-----=0D=0AFrom: Saurabh Dani [mailto:sau=
rabh@danicorp.com] =0D=0ASent: Saturday, December 30, 2006 11:54 AM=0D=0ATo=
: java-user@lucene.apache.org; lucene-net-user@lucene.apache.org=0D=0ASubje=
ct: Minalyzer=0D=0A=0D=0AGreetings All,=0D=0A=0D=0AIn the past week, we hav=
e released the first public beta of our first=0D=0ALucene based product.=0D=
=0A=0D=0AMinalyzer (Miner and Analyzer) is a unique product that combines s=
earch=0D=0Awith data analysis. We have found many scenarios where data anal=
ysis can=0D=0Abe based on phrases / keywords in the data and we are trying =
to target=0D=0Athat market. Minalyzer also targets those lucene users who a=
re looking=0D=0Aat quick deployment of full text indexing and search capabi=
lities=0D=0Awithout any programming required.=0D=0A=0D=0AMinalyzer index se=
rver is "like" a database server, where one can create=0D=0Amultiple datast=
ores. Datastores in Minalyzer world are similar to=0D=0A"databases", where =
one can creates multiple "index collections" (like=0D=0Atables in databases=
). Each Index Collection within a datastore is a=0D=0Alucene index, which c=
an be created without any programming knowledge. We=0D=0Ahave provided GUI =
Wizards to create index collections on log files (any=0D=0Adelimited file),=
 plain text files and relational databases.=0D=0A=0D=0AWe will be adding se=
veral more Wizards to easily index information and=0D=0Atemplates to genera=
te reports. We do expect the application to have some=0D=0Aminor bugs in Be=
ta phase, and we plan a monthly release to address those=0D=0Abugs and to a=
dd new features.=0D=0A=0D=0AIf you want to try it out, we have provided ste=
p by step instructions to=0D=0Adownload, install and index a sample IIS log=
 file. We have even provided=0D=0Aa sample log file, so all you need is abo=
ut 10-15 minutes to try it out=0D=0A-> currently we are only supporting Win=
dows platform ->=0D=0Ahttp://tinyurl.com/ybgeqx . You need a Windows machin=
e with .net 2.0=0D=0Ainstalled to test it.=0D=0A=0D=0AWe have provided some=
 screen shots / demo of the End User Interface=0D=0A(Smart Client), report =
designer interface and the interface for=0D=0AAdministrative client to Mana=
ge the index server here ->=0D=0Ahttp://tinyurl.com/y6agap .=0D=0A=0D=0AIf =
you have any feedback / critique, we would love to hear that.=0D=0A=0D=0ATh=
anks for your time.=0D=0ASaurabh=0D=0A=0D=0A-------------------------------=
--------------------------------------=0D=0ATo unsubscribe, e-mail: java-us=
er-unsubscribe@lucene.apache.org=0D=0AFor additional commands, e-mail: java=
-user-help@lucene.apache.org=0D=0A=0D=0A

------_SmarterMail_NextPart_0753050042727271--




From java-user-return-25254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 31 01:46:20 2006
Return-Path: <java-user-return-25254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55373 invoked from network); 31 Dec 2006 01:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Dec 2006 01:46:20 -0000
Received: (qmail 80878 invoked by uid 500); 31 Dec 2006 01:46:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80564 invoked by uid 500); 31 Dec 2006 01:46:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80553 invoked by uid 99); 31 Dec 2006 01:46:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Dec 2006 17:46:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Dec 2006 17:46:11 -0800
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Sat, 30 Dec 2006 17:45:45 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C72C7D.63072020"
Subject: RE: Minalyzer
Date: Sat, 30 Dec 2006 17:45:43 -0800
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E626278BA80B3@WDCCPMAIL01.markettools.com>
In-Reply-To: <4b33a023eae043858d2a4e371a749fc5@danicorp.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Minalyzer
thread-index: Accse6mLwG0QJbEJQe2wUUQCqz858AAAZ6QA
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <saurabh@danicorp.com>,
	<java-user@lucene.apache.org>
X-OriginalArrivalTime: 31 Dec 2006 01:45:45.0276 (UTC) FILETIME=[635A87C0:01C72C7D]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C72C7D.63072020
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

I see the advantage of tiny urls and I use it from time to time as well.
It is just that you do not know where the link is taking you to.

=20

Andreas

=20

=20

________________________________

From: Saurabh Dani [mailto:saurabh@danicorp.com]=20
Sent: Saturday, December 30, 2006 5:32 PM
To: java-user@lucene.apache.org
Cc: Andreas Guther
Subject: RE: Minalyzer

=20

Andreas:=20

I used tinyurl links as I did not want this e-mail to look like an
effort to get back links for search engines. Here are the diret links:=20

Steps to install and index a test log file ->
http://www.minalyzer.com/documentation/9
Screen shots & Demo -> http://www.minalyzer.com/demo/demo.html=20

I also apologize for sending the original e-mail twice. I did get a
deliver failure from apache.org for the first one, but it was still
delivered.=20

Thanks
Saurabh=20

________________________________

Subject: RE: Minalyzer
Date: Sat, 30 Dec 2006 16:13:55 -0800
Message-ID:
<3FB08D6A21B3EC4D8749EF6D9E626278BA80A7@WDCCPMAIL01.markettools.com>
In-Reply-To: <c720e8ed3bab459f9928b53783cd7290@danicorp.com>
Thread-Topic: Minalyzer
thread-index: AccsaccuWTfYGcbwQQyB03s3/WUk5gABprpg
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>,
<saurabh@danicorp.com>,
<lucene-net-user@lucene.apache.org>


Hi,

I am reluctant using tiny url links sent to mailing lists. I would
suggest using in addition to the tiny url at the end of your email a
full URL so everyone can verify the URL before clicking on it.

Andreas



-----Original Message-----
From: Saurabh Dani [mailto:saurabh@danicorp.com]=20
Sent: Saturday, December 30, 2006 11:54 AM
To: java-user@lucene.apache.org; lucene-net-user@lucene.apache.org
Subject: Minalyzer



Greetings All,

In the past week, we have released the first public beta of our first
Lucene based product.

Minalyzer (Miner and Analyzer) is a unique product that combines search
with data analysis. We have found many scenarios where data analysis can
be based on phrases / keywords in the data and we are trying to target
that market. Minalyzer also targets those lucene users who are looking
at quick deployment of full text indexing and search capabilities
without any programming required.

Minalyzer index server is "like" a database server, where one can create
multiple datastores. Datastores in Minalyzer world are similar to
"databases", where one can creates multiple "index collections" (like
tables in databases). Each Index Collection within a datastore is a
lucene index, which can be created without any programming knowledge. We
have provided GUI Wizards to create index collections on log files (any
delimited file), plain text files and relational databases.

We will be adding several more Wizards to easily index information and
templates to generate reports. We do expect the application to have some
minor bugs in Beta phase, and we plan a monthly release to address those
bugs and to add new features.

If you want to try it out, we have provided step by step instructions to
download, install and index a sample IIS log file. We have even provided
a sample log file, so all you need is about 10-15 minutes to try it out
-> currently we are only supporting Windows platform ->
http://tinyurl.com/ybgeqx . You need a Windows machine with .net 2.0
installed to test it.

We have provided some screen shots / demo of the End User Interface
(Smart Client), report designer interface and the interface for
Administrative client to Manage the index server here ->
http://tinyurl.com/y6agap .

If you have any feedback / critique, we would love to hear that.

Thanks for your time.
Saurabh


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




------_=_NextPart_001_01C72C7D.63072020--

