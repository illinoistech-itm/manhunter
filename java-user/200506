From java-user-return-14681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 01 08:10:59 2005
Return-Path: <java-user-return-14681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29380 invoked from network); 1 Jun 2005 08:10:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2005 08:10:59 -0000
Received: (qmail 71856 invoked by uid 500); 1 Jun 2005 08:10:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71762 invoked by uid 500); 1 Jun 2005 08:10:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71684 invoked by uid 99); 1 Jun 2005 08:10:41 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Jun 2005 01:10:40 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id DD077E4843
	for <java-user@lucene.apache.org>; Wed,  1 Jun 2005 10:10:26 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id C2969E481A
	for <java-user@lucene.apache.org>; Wed,  1 Jun 2005 10:10:26 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <72161B22-4400-4697-A77E-BCBA89323D92@ehatchersolutions.com>
References: <19ADCC0B9D4CAD4582BB9900BBCE35740194503C@tayexc13.americas.cpqcorp.net> <72161B22-4400-4697-A77E-BCBA89323D92@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <f2701ae00f07be3a52d6a13a53cbb7a6@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: Indexing multiple languages
Date: Wed, 1 Jun 2005 10:10:24 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Le 1 juin 05, =E0 01:12, Erik Hatcher a =E9crit :
>> 1/ one index for all languages
>> 2/ one index for all languages, with an extra language field so=20
>> searches
>> can be constrained to a particular language
>> 3/ separate indices for each language?
> I would vote for option #2 as it gives the most flexibilty - you can=20=

> query with or without concern for language.

The way I've solved this is to make a different field-name per-language=20=

as our documents can be multilingual.
What's then done is query expansion at query time: given a term-query=20
for text, I duplicate it for each accepted language of the user with a=20=

factor related to the preference of the language (e.g. the q factor in=20=

Accept-Language http header). Presumably I could be using solution 2/=20
as well if my queries become too big, making several documents for each=20=

language of the document.

I think it's very important to care about guessing the accepted=20
languages of the user. Typically, the default behaviour of Google is to=20=

only give you matches in your primary language but then allow expansion=20=

in any language.

>> On the other hand, if people are searching for proper nouns in=20
>> metadata
>> (e.g. "DSpace") it may be advantageous to search all languages at=20
>> once.

This one may need particular treatment.

Tell us your success!

paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 01 08:24:05 2005
Return-Path: <java-user-return-14682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33862 invoked from network); 1 Jun 2005 08:24:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2005 08:24:05 -0000
Received: (qmail 96813 invoked by uid 500); 1 Jun 2005 08:23:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96791 invoked by uid 500); 1 Jun 2005 08:23:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96775 invoked by uid 99); 1 Jun 2005 08:23:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from libra.cs.put.poznan.pl (HELO libra.cs.put.poznan.pl) (150.254.30.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Jun 2005 01:23:56 -0700
Received: from libra.cs.put.poznan.pl (localhost [127.0.0.1])
	by libra (Postfix on VMS) with SMTP id 978173A77
	for <java-user@lucene.apache.org>; Wed,  1 Jun 2005 10:23:42 +0200 (CEST)
Received: from [150.254.24.146] (idss-dw-pnca.cs.put.poznan.pl [150.254.24.146])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id 3E4AB39C6
	for <java-user@lucene.apache.org>; Wed,  1 Jun 2005 10:23:42 +0200 (CEST)
Message-ID: <429D70A7.4030108@cs.put.poznan.pl>
Date: Wed, 01 Jun 2005 10:24:07 +0200
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Clustering Carrot2 vs TermVector Analysis
References: <26330038.1117465657707.JavaMail.root@wamui-andean.atl.sa.earthlink.net>
In-Reply-To: <26330038.1117465657707.JavaMail.root@wamui-andean.atl.sa.earthlink.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi Andrew,

Coming up with an answer... sorry for the delay.

> By using the carrot demo: 
> http://www.newsarch.com/archive/mailinglist/jakarta/lucene/user/msg03928.html
> 
> 
> I was able to easliy cluster search results based on the fields used
> by carrot( url, title, and summary). However I was wondering if there
> was a way to do something similar using term vector analysis and the
> built in TermVector / Similarity api.

Yes, most clustering methods are based just on that (term-vector
matrix). Carrot also uses this internally, but builds its own data
structure from the provided data instead of relying on Lucene's. It
shouldn't be a problem to write a clustering plugin to Carrot that
actually uses the term-vector data from Lucene.

> After doing a typical lucene search how can I get the  top 5 "key
> terms" for each of the top ten documents.  I was thinking that I sum
> these and then have a type of cluster.

The question is ill-defined, I'm afraid. "top 5 key terms" are very 
subjecting and depend on the strategy of score calculation, the way 
you're pruning stop words, etc.

I also don't get the: "each of the top ten documents". Do you mean: each 
of the ten top documents within a cluster?

D.

P.S. Please CC me directly; I read mails to newsgroups in batches every 
few days.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 01 08:30:30 2005
Return-Path: <java-user-return-14683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35297 invoked from network); 1 Jun 2005 08:30:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2005 08:30:29 -0000
Received: (qmail 8541 invoked by uid 500); 1 Jun 2005 08:30:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8520 invoked by uid 500); 1 Jun 2005 08:30:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8500 invoked by uid 99); 1 Jun 2005 08:30:22 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of burton@rojo.com designates 12.43.53.196 as permitted sender)
Received: from Unknown (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Jun 2005 01:30:21 -0700
Received: from [192.168.1.100] (dsl081-071-021.sfo1.dsl.speakeasy.net [64.81.71.21])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id j518U6UZ017371
	for <java-user@lucene.apache.org>; Wed, 1 Jun 2005 01:30:07 -0700
Message-ID: <429D720F.1000508@rojo.com>
Date: Wed, 01 Jun 2005 01:30:07 -0700
From: Kevin Burton <burton@rojo.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Macintosh/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Ability to load a document with ONLY a few fields for performance?
References: <9392937.1117407652629.JavaMail.root@wamui-blood.atl.sa.earthlink.net>
In-Reply-To: <9392937.1117407652629.JavaMail.root@wamui-blood.atl.sa.earthlink.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andrew Boyd wrote:

>The numbers look impressive.  If I build from the 1.9 trunck will I get the patch?
>
>  
>
Funny... I went ahead and imoplemented this myself and it didn't work.  
Of course I may have implemented it incorrectly.  I'll look at the patch 
source and try it out!

Something fun to do tomorrow!  w00t!

Kevin

-- 


Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
See irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

   Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 01 08:45:37 2005
Return-Path: <java-user-return-14684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41065 invoked from network); 1 Jun 2005 08:45:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2005 08:45:37 -0000
Received: (qmail 45159 invoked by uid 500); 1 Jun 2005 08:45:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45137 invoked by uid 500); 1 Jun 2005 08:45:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 29922 invoked by uid 99); 1 Jun 2005 00:38:24 -0000
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=1POhLLMh/wvpTbY4FK0pWCGYzXoBl8J6qD/z0p0FTHqV7awHq13X6cbRwUumeug5ERcsQzn0pgwfw/A3WOrt4PFGDgAQfpwUuIvcDbGma0niRcbXtf2NxX2ToloB1U9DfzJ7zNQx2eWM0fBgi0/1eh265kiyPMure8l0nxLK444=  ;
Message-ID: <20050601003820.32554.qmail@web32012.mail.mud.yahoo.com>
Date: Tue, 31 May 2005 17:38:20 -0700 (PDT)
From: Reece Wilton <reecewilton@yahoo.com>
Subject: SpanTermQuery issue?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Using a BooleanQuery to combine two SpanTermQuery objects causes
unexpected results on Lucene 1.9 RC1.  Is this a problem that is
already known about or has already been fixed?  

I have a test case and more info if this is a new issue.

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 01 09:28:22 2005
Return-Path: <java-user-return-14685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56612 invoked from network); 1 Jun 2005 09:28:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2005 09:28:21 -0000
Received: (qmail 26153 invoked by uid 500); 1 Jun 2005 09:28:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26080 invoked by uid 500); 1 Jun 2005 09:28:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26035 invoked by uid 99); 1 Jun 2005 09:28:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Jun 2005 02:28:09 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8C6B913E2008; Wed,  1 Jun 2005 05:27:51 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id D398413E200A
	for <java-user@lucene.apache.org>; Wed,  1 Jun 2005 05:27:35 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050601003820.32554.qmail@web32012.mail.mud.yahoo.com>
References: <20050601003820.32554.qmail@web32012.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B6AA0E96-1949-49EB-BB73-7E0527C85F84@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: SpanTermQuery issue?
Date: Wed, 1 Jun 2005 05:27:29 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.1 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On May 31, 2005, at 8:38 PM, Reece Wilton wrote:

> Hi,
>
> Using a BooleanQuery to combine two SpanTermQuery objects causes
> unexpected results on Lucene 1.9 RC1.  Is this a problem that is
> already known about or has already been fixed?
>
> I have a test case and more info if this is a new issue.

Interesingly I just encountered this very issue myself.  Yes, please  
open an issue and attach your test case.  I'll add the test case and  
start looking for the cause of this.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 01 14:11:17 2005
Return-Path: <java-user-return-14686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77100 invoked from network); 1 Jun 2005 14:11:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2005 14:11:17 -0000
Received: (qmail 27236 invoked by uid 500); 1 Jun 2005 14:11:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27210 invoked by uid 500); 1 Jun 2005 14:11:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27186 invoked by uid 99); 1 Jun 2005 14:11:08 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of pawo.shey.rab@gmail.com designates 64.233.184.206 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Jun 2005 07:11:05 -0700
Received: by wproxy.gmail.com with SMTP id 36so5225948wra
        for <java-user@lucene.apache.org>; Wed, 01 Jun 2005 07:10:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Z/1V0pxXTseuRLzoQehLNpxKrjnkOH0DredF1d9g10BelghbIuRWGliHunB2K3CBu+JWH3jNcIobq/ealGsOdK0cm+Jnwi61Y8s74jq5aOIPRxho1sAtoT5q404ILHUsqsoP8IH3PB6N7G6LasQxaz8jlremiwvOZsqWbhOrAuc=
Received: by 10.54.53.44 with SMTP id b44mr5148344wra;
        Wed, 01 Jun 2005 07:10:18 -0700 (PDT)
Received: by 10.54.29.77 with HTTP; Wed, 1 Jun 2005 07:10:18 -0700 (PDT)
Message-ID: <a654d064050601071064d97f59@mail.gmail.com>
Date: Wed, 1 Jun 2005 07:10:18 -0700
From: Shey Rab Pawo <pawo.shey.rab@gmail.com>
Reply-To: Shey Rab Pawo <pawo.shey.rab@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Stemming at Query time
In-Reply-To: <200505311959.11038@danielnaber.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <7551521.1117472052379.JavaMail.root@wamui-andean.atl.sa.earthlink.net>
	 <200505311959.11038@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If your stemmer worked on indexing, then won't the "breath" entry
automatically pick up all of these?  So, isn't the project unnecessary
and otiose?

On 5/31/05, Daniel Naber <lucenelist@danielnaber.de> wrote:
> On Monday 30 May 2005 18:54, Andrew Boyd wrote:
>=20
> > Now that the QueryParser knows about position increments has anyone
> > used this to do stemming at query time and not at indexing time? I
> > suppose one would need a reverse stemmer. Given the query breath it
> > would need to inject breathe, breathes, breathing etc.
>=20
> There are two things to consider: queries will get more complicated and
> thus slower and the implementation isn't that easy:  while stemming can b=
e
> done with a simple algorithm (for English), you'll need a dictionary with
> at least part-of-speech information for adding suffixes. That's because
> you cannot just add "ing" to any word, otherwise you'd end up with car +
> ing  =3D caring. (But once you have this dictionary the quality of your
> solution can be better than that of a stemmer, as stemmers also suffer
> form over-stemming, i.e. mapping two non-related words to the same form).
>=20
> Regards
>  Daniel
>=20
> --
> http://www.danielnaber.de
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
No one ever went blind looking at the bright side of life.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 01 14:28:00 2005
Return-Path: <java-user-return-14687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83950 invoked from network); 1 Jun 2005 14:28:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2005 14:28:00 -0000
Received: (qmail 77589 invoked by uid 500); 1 Jun 2005 14:27:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77567 invoked by uid 500); 1 Jun 2005 14:27:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77541 invoked by uid 99); 1 Jun 2005 14:27:54 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from pop05.mail.atl.earthlink.net (HELO pop05.mail.atl.earthlink.net) (207.69.200.58)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Jun 2005 07:27:47 -0700
Received: from wamui-backed.atl.sa.earthlink.net ([209.86.224.25])
	by pop05.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1DdUC2-000721-00; Wed, 01 Jun 2005 10:27:38 -0400
Message-ID: <6278438.1117636058149.JavaMail.root@wamui-backed.atl.sa.earthlink.net>
Date: Wed, 1 Jun 2005 10:27:38 -0400 (EDT)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Re: Clustering Carrot2 vs TermVector Analysis
Cc: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Responses inline prefixed with ****

-----Original Message-----
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
Sent: Jun 1, 2005 3:24 AM
To: java-user@lucene.apache.org
Subject: Re: Clustering Carrot2 vs TermVector Analysis


Hi Andrew,

Coming up with an answer... sorry for the delay.

> By using the carrot demo: 
> http://www.newsarch.com/archive/mailinglist/jakarta/lucene/user/msg03928.html
> 
> 
> I was able to easliy cluster search results based on the fields used
> by carrot( url, title, and summary). However I was wondering if there
> was a way to do something similar using term vector analysis and the
> built in TermVector / Similarity api.

Yes, most clustering methods are based just on that (term-vector
matrix). Carrot also uses this internally, but builds its own data
structure from the provided data instead of relying on Lucene's. It
shouldn't be a problem to write a clustering plugin to Carrot that
actually uses the term-vector data from Lucene.

> After doing a typical lucene search how can I get the  top 5 "key
> terms" for each of the top ten documents.  I was thinking that I sum
> these and then have a type of cluster.

The question is ill-defined, I'm afraid. "top 5 key terms" are very 
subjecting and depend on the strategy of score calculation, the way 
you're pruning stop words, etc.

**** What I meant was the top 5 terms of a document where top is based on 
wi = tfi * IDFi

I also don't get the: "each of the top ten documents". Do you mean: each 
of the ten top documents within a cluster?

**** with the carrot demo you used the top 100 documents returned from the query.  I really meant the top n documents from the query.

**** I hope I'm more clear now.  Thanks for the response.  
Andrew

D.

P.S. Please CC me directly; I read mails to newsgroups in batches every 
few days.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 01 16:45:13 2005
Return-Path: <java-user-return-14688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36130 invoked from network); 1 Jun 2005 16:45:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2005 16:45:13 -0000
Received: (qmail 27593 invoked by uid 500); 1 Jun 2005 16:45:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27535 invoked by uid 500); 1 Jun 2005 16:45:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27511 invoked by uid 99); 1 Jun 2005 16:45:05 -0000
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FORGED_YAHOO_RCVD,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web32012.mail.mud.yahoo.com (HELO web32012.mail.mud.yahoo.com) (68.142.207.109)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 01 Jun 2005 09:45:04 -0700
Received: (qmail 34802 invoked by uid 60001); 1 Jun 2005 16:44:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=T6aYBZgt6vlcYwxJb9AE7ISUFfVszKj/JKXyauGd3Wsms0FKaeqscXkDOaIRBpyJWFoAOmPeuX1MLhoiAbEy8RpQQ4ex5VezWgcJ8ZI6+cgWvELRGyMlTGxtmSe8CeEL0q+MBu4M1O3o4brVs8rJIIfCzIYrXhHAQjFcrPmgUtM=  ;
Message-ID: <20050601164449.34800.qmail@web32012.mail.mud.yahoo.com>
Received: from [207.171.180.101] by web32012.mail.mud.yahoo.com via HTTP; Wed, 01 Jun 2005 09:44:48 PDT
Date: Wed, 1 Jun 2005 09:44:48 -0700 (PDT)
From: <yahootintin-lucene@yahoo.com>
Reply-To: yahootintin-lucene@yahoo.com
Subject: Re: SpanTermQuery issue?
To: java-user@lucene.apache.org
In-Reply-To: <B6AA0E96-1949-49EB-BB73-7E0527C85F84@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik,

Here is the bug report with the test case:
http://issues.apache.org/bugzilla/show_bug.cgi?id=35157

The scoring algorithm doesn't seem to work correctly when
SpanTermQuerys are in a BooleanQuery.  I will look for the
problem.  Any advice on what I should look for?

Thanks,
Reece

--- Erik Hatcher <erik@ehatchersolutions.com> wrote:

> 
> On May 31, 2005, at 8:38 PM, Reece Wilton wrote:
> 
> > Hi,
> >
> > Using a BooleanQuery to combine two SpanTermQuery objects
> causes
> > unexpected results on Lucene 1.9 RC1.  Is this a problem
> that is
> > already known about or has already been fixed?
> >
> > I have a test case and more info if this is a new issue.
> 
> Interesingly I just encountered this very issue myself.  Yes,
> please  
> open an issue and attach your test case.  I'll add the test
> case and  
> start looking for the cause of this.
> 
>      Erik
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 01 19:01:16 2005
Return-Path: <java-user-return-14689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99590 invoked from network); 1 Jun 2005 19:01:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2005 19:01:16 -0000
Received: (qmail 66602 invoked by uid 500); 1 Jun 2005 19:01:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66555 invoked by uid 500); 1 Jun 2005 19:01:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66536 invoked by uid 99); 1 Jun 2005 19:01:08 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of burton@rojo.com designates 12.43.53.196 as permitted sender)
Received: from Unknown (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Jun 2005 12:01:04 -0700
Received: from [192.168.1.146] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id j51J0nUj031663
	for <java-user@lucene.apache.org>; Wed, 1 Jun 2005 12:00:49 -0700
Message-ID: <429E05DC.1040504@rojo.com>
Date: Wed, 01 Jun 2005 12:00:44 -0700
From: Kevin Burton <burton@rojo.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Macintosh/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Performance tuning and org.apache.lucene.store.InputStream.BUFFER_SIZE
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I was doing a JProfiler install of our webapp/lucene last week and of 
course a large part of our app is spent in RandomAccessFile.readBytes ...

This is called by InputStream.readByte which internally uses a 
BUFFER_SIZE of 1024 (which is the default).

This value seems too small for a default. Most filesystem block sizes 
are 4096 and a lot of controllers will refuse to read in block sizes 
smaller than 16384.

On top of that you also have the the physical disks that have a minimum 
block size and also RAID controller block sizes.

I tried to tune this variable this weekend with different settings and 
had strange results. Mostly because (I'm assuming) that my Linux 
filesystem cache and RAID controller cache were getting in the way (and 
right now I have no way to fix this).

So my questions are:

1.  What do people thing about changing this value?  Does anyone else do it?

2.  Has anyone run any benchmarks here?  Does anyone have any solid 
lucene benchmarks they can run with before/after runs with this var changed?

3.  Does anyone else think that 1024 is too small of a default value for 
modern systems?

4. Does anyone know what the default block size for other filesystems? I 
know that XFS is 4096.  What about ext2? ext3? JFS? ReiserFS? NTFS? UFS? 
etc....

Kevin

-- 


Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
See irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

   Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 01 19:09:12 2005
Return-Path: <java-user-return-14690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2613 invoked from network); 1 Jun 2005 19:09:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2005 19:09:12 -0000
Received: (qmail 85956 invoked by uid 500); 1 Jun 2005 19:09:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85931 invoked by uid 500); 1 Jun 2005 19:09:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85897 invoked by uid 99); 1 Jun 2005 19:09:04 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of john.wang@gmail.com designates 64.233.162.194 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Jun 2005 12:09:02 -0700
Received: by zproxy.gmail.com with SMTP id 8so2434242nzo
        for <java-user@lucene.apache.org>; Wed, 01 Jun 2005 12:08:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=SN8joRmegOjd+fO6q3h1697MCTCKjgE+FVYUiYXhEuW6UDoJN6ufrM/I1JlGEhn+fGKSCcnhE1Kjk/aXxTQJhw/v/T+DZpOPOyewpchQNGfGnKLX0WOoFeffdUgxSXZn6wFQy7Uffd18kvGk1w9fLUr8ukekluZSL3VxEVMOpSo=
Received: by 10.36.222.24 with SMTP id u24mr51468nzg;
        Wed, 01 Jun 2005 12:08:45 -0700 (PDT)
Received: by 10.36.10.19 with HTTP; Wed, 1 Jun 2005 12:08:45 -0700 (PDT)
Message-ID: <8837fb77050601120840322700@mail.gmail.com>
Date: Wed, 1 Jun 2005 12:08:45 -0700
From: John Wang <john.wang@gmail.com>
Reply-To: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: FieldCache and Sort
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi:

   In the current Lucene sorting implementation, FieldCache is used to
retrieve 2 arrays, the lookup array and the order array. The order
array at load time stores the position of the term in the lookup
array. The lookup array is already sorted because it is read in from
the index.

   My question is that since the order array contains all the
information on the order of the terms, why do we keep it around in
memory? Can we implement a SortComparator that is more memory
efficient?


Just and idea

Thanks

-John

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 01 20:16:40 2005
Return-Path: <java-user-return-14691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46319 invoked from network); 1 Jun 2005 20:16:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2005 20:16:40 -0000
Received: (qmail 52860 invoked by uid 500); 1 Jun 2005 20:16:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52806 invoked by uid 500); 1 Jun 2005 20:16:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52761 invoked by uid 99); 1 Jun 2005 20:16:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from gwia201.syr.edu (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Jun 2005 13:16:29 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Wed, 01 Jun 2005 16:16:18 -0400
Message-Id: <s29ddf52.033@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.5.1 
Date: Wed, 01 Jun 2005 16:15:56 -0400
From: "Grant Ingersoll" <GSIngers@syr.edu>
To: <java-user@lucene.apache.org>
Subject: Re: Adding to the termFreqVector
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't think you need to parse the toString, you have the
TermFreqVector object which lets you access the appropriate pieces of
information (string, freq).  You could then turn around and delete/index
the new document based on the vector with the increments.  I don't know
whether it would scale or not, but at some point you have to do the
work, right?  Lucene is quite fast, you might be surprised what
"scales".

Where is the information coming from that allows you to increment "red"
below?  Is the information known at indexing?  Perhaps your token
filters could just add the value  onto the token stream when you index. 
Of course, this _may_ screw up position information, but you haven't
said anything about needing that, so I will assume you don't

-Grant


>>> ryan@skow.org 5/31/2005 6:02:53 PM >>>

Adding new terms and re-indexing the document is the desired behavior.

One (non-scalable) solution would be to parse the toString of the
termFreqVector (freq {myTermField: red/2, green/1, blue/1}) and create
a
new string representation of the expanded terms:  (red red green blue)

This obviously isn't a good solution.  Finding a way to simply do a
document.addTerm("red"); and then re-indexing would be ideal.



> Is your intent to persist the changed vector somehow or just use it
in
> your application for the immediate search?
>
> TermFreqVector is an interface, so if you aren't persisting, I would
> write a wrapper class around the one that is returned by Lucene that
has
> add/set methods on it for manipulating the underlying vector and
pass
> that around in your application.  Other option, is to get the source
and
> modify the TermFreqVector for your needs.
>
> Persistance is a bit harder, but would probably involve manipulating
> the document and then re-indexing it so that it's new vector has the
> updated frequencies by adding some dummy terms onto the document.
>
> Is that what you are looking for?
>
>>>> ryan@skow.org 5/30/2005 12:37:54 PM >>>
>
> How would one go about adding additional terms to a field which is
not
>
> stored literally, but instead has a termFreqVector?  For example:
>
> If DocumentA was indexed originally with:
>     myTermField: red green blue
>
> termFreqVector would look like:
>    freq {myTermField: red/1, green/1, blue/1}
>
> Now, I'd like to add some more terms (red, yellow) and desire the
> termFreqVector to look like this:
>    freq {myTermField: red/2, green/1, blue/1, yellow/1}
>
> It would seem like there would be a covenant way of accomplishing
this,
>
> but I must be missing something.
>
> Any advice would be greatly appreciated!
>
>
>
---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
> For additional commands, e-mail: java-user-help@lucene.apache.org 
>
>
>
---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
> For additional commands, e-mail: java-user-help@lucene.apache.org 
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 01 21:24:29 2005
Return-Path: <java-user-return-14692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74692 invoked from network); 1 Jun 2005 21:24:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2005 21:24:29 -0000
Received: (qmail 94090 invoked by uid 500); 1 Jun 2005 21:24:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94042 invoked by uid 500); 1 Jun 2005 21:24:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94026 invoked by uid 99); 1 Jun 2005 21:24:21 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,RCVD_BY_IP,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dns1.fastgt.com (HELO sol.fastgt.com) (65.103.179.233)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Jun 2005 14:24:19 -0700
Received: from mail.skow.org (12-216-64-83.client.mchsi.com [12.216.64.83])
	by sol.fastgt.com (8.12.11/8.12.8) with SMTP id j51LNZK1019582
	for <java-user@lucene.apache.org>; Wed, 1 Jun 2005 16:23:40 -0500
Received: from xavier.skow.org (localhost [127.0.0.1])
	by mail.skow.org (8.12.11/8.12.11) with ESMTP id j51LNZb7000480
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 1 Jun 2005 16:23:35 -0500
Received: (from apache@localhost)
	by xavier.skow.org (8.12.11/8.12.11/Submit) id j51LNXui000479;
	Wed, 1 Jun 2005 16:23:33 -0500
X-Authentication-Warning: xavier.skow.org: apache set sender to ryan@skow.org using -f
Received: from 192.168.1.2 (proxying for 12.152.207.5)
        (SquirrelMail authenticated user skow)
        by 192.168.1.29 with HTTP;
        Wed, 1 Jun 2005 16:23:33 -0500 (CDT)
Message-ID: <48030.192.168.1.2.1117661013.squirrel@192.168.1.29>
In-Reply-To: <s29ddf52.033@gwia201.syr.edu>
References: <s29ddf52.033@gwia201.syr.edu>
Date: Wed, 1 Jun 2005 16:23:33 -0500 (CDT)
Subject: Re: Adding to the termFreqVector
From: "Ryan Skow" <ryan@skow.org>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4-1.FC2
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Lucene's scalability is not in question.  The simple solution of
rebuilding the string of terms is what I referred to as not being
scalable.  For instance, consider the following term vector:
termFreqVector (freq {myTermField: red/699999, green/799999, blue/8999999})
Recreating a string with 699999 'reds' and a lot of greens and blues is
definitely not memory or time efficient.  That solution I proposed was
simply to show an example of the effect I was hoping for and not something
that one would want to do.  A spin off that theme could be used though -
if the numbers were normalized, a relative number of reds, greens, and
blues could be created...  Still not convenient, but an option.

The new information, to increment 'red' for instance, would come at
runtime - after the initial indexing.  I would have no issues with being
able to up the 'red' bucket in the term vector and reindex the document
with the new term vector, but it looks like the term vector is read-only
and can not be modified once retrieved from the IndexReader for the given
field of a document.  I'm not familiar with how to add to an existing term
frequency vector - if you have an example of doing so that would be great!
 At this point in time the term positions are not of interest.

Thanks for your replies!

Ryan

> I don't think you need to parse the toString, you have the
> TermFreqVector object which lets you access the appropriate pieces of
> information (string, freq).  You could then turn around and delete/index
> the new document based on the vector with the increments.  I don't know
> whether it would scale or not, but at some point you have to do the
> work, right?  Lucene is quite fast, you might be surprised what
> "scales".
>
> Where is the information coming from that allows you to increment "red"
> below?  Is the information known at indexing?  Perhaps your token
> filters could just add the value  onto the token stream when you index.
> Of course, this _may_ screw up position information, but you haven't
> said anything about needing that, so I will assume you don't
>
> -Grant
>
>
>>>> ryan@skow.org 5/31/2005 6:02:53 PM >>>
>
> Adding new terms and re-indexing the document is the desired behavior.
>
> One (non-scalable) solution would be to parse the toString of the
> termFreqVector (freq {myTermField: red/2, green/1, blue/1}) and create
> a
> new string representation of the expanded terms:  (red red green blue)
>
> This obviously isn't a good solution.  Finding a way to simply do a
> document.addTerm("red"); and then re-indexing would be ideal.
>
>
>
>> Is your intent to persist the changed vector somehow or just use it
> in
>> your application for the immediate search?
>>
>> TermFreqVector is an interface, so if you aren't persisting, I would
>> write a wrapper class around the one that is returned by Lucene that
> has
>> add/set methods on it for manipulating the underlying vector and
> pass
>> that around in your application.  Other option, is to get the source
> and
>> modify the TermFreqVector for your needs.
>>
>> Persistance is a bit harder, but would probably involve manipulating
>> the document and then re-indexing it so that it's new vector has the
>> updated frequencies by adding some dummy terms onto the document.
>>
>> Is that what you are looking for?
>>
>>>>> ryan@skow.org 5/30/2005 12:37:54 PM >>>
>>
>> How would one go about adding additional terms to a field which is
> not
>>
>> stored literally, but instead has a termFreqVector?  For example:
>>
>> If DocumentA was indexed originally with:
>>     myTermField: red green blue
>>
>> termFreqVector would look like:
>>    freq {myTermField: red/1, green/1, blue/1}
>>
>> Now, I'd like to add some more terms (red, yellow) and desire the
>> termFreqVector to look like this:
>>    freq {myTermField: red/2, green/1, blue/1, yellow/1}
>>
>> It would seem like there would be a covenant way of accomplishing
> this,
>>
>> but I must be missing something.
>>
>> Any advice would be greatly appreciated!
>>
>>
>>
> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 01 21:42:22 2005
Return-Path: <java-user-return-14693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81885 invoked from network); 1 Jun 2005 21:42:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jun 2005 21:42:22 -0000
Received: (qmail 32903 invoked by uid 500); 1 Jun 2005 21:42:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32875 invoked by uid 500); 1 Jun 2005 21:42:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32862 invoked by uid 99); 1 Jun 2005 21:42:17 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from pop05.mail.atl.earthlink.net (HELO pop05.mail.atl.earthlink.net) (207.69.200.58)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Jun 2005 14:42:17 -0700
Received: from wamui-backed.atl.sa.earthlink.net ([209.86.224.25])
	by pop05.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1Ddayc-0001Ym-00
	for java-user@lucene.apache.org; Wed, 01 Jun 2005 17:42:14 -0400
Message-ID: <4209310.1117662134422.JavaMail.root@wamui-backed.atl.sa.earthlink.net>
Date: Wed, 1 Jun 2005 17:42:14 -0400 (EDT)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Highlighter ArrayIndexOutOfBoundsException - W/Fix
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
  I'm getting an ArrayIndexOutOfBoundsException within the highlighter:
 java.lang.ArrayIndexOutOfBoundsException: 50
     at org.apache.lucene.search.highlight.TokenGroup.addToken(TokenGroup.java:47)
     at org.apache.lucene.search.highlight.Highlighter.getBestDocFragments(Highlighter.java:184)
     at org.apache.lucene.search.highlight.Highlighter.getBestFragments(Highlighter.java:101)
     at org.apache.lucene.search.highlight.Highlighter.getBestFragments(Highlighter.java:363)

It was working fine but I was having trouble getting highlights for phrases.  I was advised to make sure
that I was using the same analyzer as when I indexed.  I made that change and I'm now getting the exception.

The reason I'm getting the exception now, I'm sure, is that I have synonym capability in my application and when I use the synonym feature I exceed TokenGroup.MAX_NUM_TOKENS_PER_GROUP.

I've made a fix in my implementation.  Here  it is:

	void addToken(Token token, float score)
	{
	    if(numTokens < MAX_NUM_TOKENS_PER_GROUP)  // new line
            {
                if(numTokens == 0){
                    startOffset = token.startOffset();
                    endOffset = token.endOffset();
                } else{
                    startOffset = Math.min(startOffset, token.startOffset());
                    endOffset = Math.max(endOffset, token.endOffset());
                }
                tokens[numTokens] = token;     // place where the exception was occuring.
                scores[numTokens] = score;
                numTokens++;
            } // new line
	 }

Cheers,

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 09:39:03 2005
Return-Path: <java-user-return-14694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55475 invoked from network); 2 Jun 2005 09:39:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 09:39:02 -0000
Received: (qmail 89803 invoked by uid 500); 2 Jun 2005 09:38:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89769 invoked by uid 500); 2 Jun 2005 09:38:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89754 invoked by uid 99); 2 Jun 2005 09:38:54 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from pop05.mail.atl.earthlink.net (HELO pop05.mail.atl.earthlink.net) (207.69.200.58)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 02:38:52 -0700
Received: from wamui-chipeau.atl.sa.earthlink.net ([209.86.224.30])
	by pop05.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1Ddm9v-0003my-00
	for java-user@lucene.apache.org; Thu, 02 Jun 2005 05:38:39 -0400
Message-ID: <6117430.1117705119579.JavaMail.root@wamui-chipeau.atl.sa.earthlink.net>
Date: Thu, 2 Jun 2005 04:38:39 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: calculate wi = tfi * IDFi for each document.
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If I have search results how can I calculate, using lucene's API,  wi = tfi * IDFi for each document.

wi    = term weight
tfi    = term frequency in a document
IDFi = inverse document frequency = log(D/dfi)
dfi   = document frequency or number of documents containing term i
D    = number of documents in my search result

Thanks,

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 09:49:28 2005
Return-Path: <java-user-return-14695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58657 invoked from network); 2 Jun 2005 09:49:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 09:49:27 -0000
Received: (qmail 11819 invoked by uid 500); 2 Jun 2005 09:49:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11798 invoked by uid 500); 2 Jun 2005 09:49:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11762 invoked by uid 99); 2 Jun 2005 09:49:21 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from pop05.mail.atl.earthlink.net (HELO pop05.mail.atl.earthlink.net) (207.69.200.58)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 02:49:18 -0700
Received: from wamui-chipeau.atl.sa.earthlink.net ([209.86.224.30])
	by pop05.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1DdmK5-0005Ei-00
	for java-user@lucene.apache.org; Thu, 02 Jun 2005 05:49:09 -0400
Message-ID: <1719307.1117705749105.JavaMail.root@wamui-chipeau.atl.sa.earthlink.net>
Date: Thu, 2 Jun 2005 04:49:08 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Lucene and Documentum
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,
  Has anyone had any experience using lucene to search a documentum respoitory?

Thanks

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 09:54:26 2005
Return-Path: <java-user-return-14696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60210 invoked from network); 2 Jun 2005 09:54:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 09:54:26 -0000
Received: (qmail 22987 invoked by uid 500); 2 Jun 2005 09:54:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22938 invoked by uid 500); 2 Jun 2005 09:54:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22921 invoked by uid 99); 2 Jun 2005 09:54:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from envoy.cybage.com (HELO envoy.cybage.com) (203.199.150.190)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 02:54:17 -0700
Received: from santanud ([192.168.11.214]) by envoy.cybage.com with Microsoft SMTPSVC(6.0.3790.211);
	 Thu, 2 Jun 2005 15:22:48 +0530
From: "Santanu Dutta" <santanud@cybage.com>
To: <java-user@lucene.apache.org>,
	"Andrew Boyd" <Andrew.Boyd@bbtech.net>
Subject: RE: Lucene and Documentum
Date: Thu, 2 Jun 2005 15:23:59 +0530
Message-ID: <FBEBKIMOEGPCGHBICEHPAELDCDAA.santanud@cybage.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <1719307.1117705749105.JavaMail.root@wamui-chipeau.atl.sa.earthlink.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Importance: Normal
X-OriginalArrivalTime: 02 Jun 2005 09:52:48.0641 (UTC) FILETIME=[D57C6710:01C56758]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Andrew

I have experience using lucene for Content Management System (Content
Repository). We are using different file types and different
locale(fe,de,us,ru)

Santanu

-----Original Message-----
From: Andrew Boyd [mailto:andrew.boyd@mindspring.com]
Sent: Thursday, June 02, 2005 3:19 PM
To: java-user@lucene.apache.org
Subject: Lucene and Documentum


Hi All,
  Has anyone had any experience using lucene to search a documentum
respoitory?

Thanks

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 10:34:59 2005
Return-Path: <java-user-return-14697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74874 invoked from network); 2 Jun 2005 10:34:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 10:34:59 -0000
Received: (qmail 15528 invoked by uid 500); 2 Jun 2005 10:34:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15497 invoked by uid 500); 2 Jun 2005 10:34:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15478 invoked by uid 99); 2 Jun 2005 10:34:53 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from panacea.is.nl (HELO panacea.is.nl) (213.133.34.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 03:34:51 -0700
Received: from hai01.hippo.local ([213.133.51.241]) by panacea.is.nl with Microsoft SMTPSVC(5.0.2195.4905);
	 Thu, 2 Jun 2005 12:32:17 +0200
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
Subject: RE: calculate wi = tfi * IDFi for each document.
Date: Thu, 2 Jun 2005 12:33:17 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C4189D1@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: calculate wi = tfi * IDFi for each document.
Thread-Index: AcVnVuavxKrqM2fRTuSIiQxVotwseAAB24PA
From: "Max Pfingsthorn" <m.pfingsthorn@hippo.nl>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 02 Jun 2005 10:32:17.0691 (UTC) FILETIME=[598CBEB0:01C5675E]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

DefaultSimilarity uses exactly this weighting scheme. Makes sense since =
it's a pretty standard relevance measure...

Bye!
max

-----Original Message-----
From: Andrew Boyd [mailto:andrew.boyd@mindspring.com]
Sent: Thursday, June 02, 2005 11:39
To: java-user@lucene.apache.org
Subject: calculate wi =3D tfi * IDFi for each document.


If I have search results how can I calculate, using lucene's API,  wi =
=3D tfi * IDFi for each document.

wi    =3D term weight
tfi    =3D term frequency in a document
IDFi =3D inverse document frequency =3D log(D/dfi)
dfi   =3D document frequency or number of documents containing term i
D    =3D number of documents in my search result

Thanks,

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 10:52:34 2005
Return-Path: <java-user-return-14698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80143 invoked from network); 2 Jun 2005 10:52:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 10:52:34 -0000
Received: (qmail 64160 invoked by uid 500); 2 Jun 2005 10:52:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64128 invoked by uid 500); 2 Jun 2005 10:52:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64115 invoked by uid 99); 2 Jun 2005 10:52:27 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from fallback02.mail.atl.earthlink.net (HELO fallback02.mail.atl.earthlink.net) (207.69.200.241)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 03:52:21 -0700
Received: from pop05.mail.atl.earthlink.net (pop05.mail.atl.earthlink.net [207.69.200.58])
	by fallback02.mail.atl.earthlink.net (8.11.7+Sun/8.11.6) with ESMTP id j52AGNv18629
	for <java-user@lucene.apache.org>; Thu, 2 Jun 2005 06:16:23 -0400 (EDT)
Received: from wamui-chipeau.atl.sa.earthlink.net ([209.86.224.30])
	by pop05.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1DdmkP-0001hy-00
	for java-user@lucene.apache.org; Thu, 02 Jun 2005 06:16:21 -0400
Message-ID: <10359004.1117707381259.JavaMail.root@wamui-chipeau.atl.sa.earthlink.net>
Date: Thu, 2 Jun 2005 05:16:21 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: RE: Lucene and Documentum
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Santanu,
  What type of API does Documentum provide?  Does it expose the meta-data for all
of its stored documents?  Does it provide access to the actuall documents?

Thanks,

Andrew 

-----Original Message-----
From: Santanu Dutta <santanud@cybage.com>
Sent: Jun 2, 2005 4:53 AM
To: java-user@lucene.apache.org, Andrew Boyd <Andrew.Boyd@bbtech.net>
Subject: RE: Lucene and Documentum

Hi Andrew

I have experience using lucene for Content Management System (Content
Repository). We are using different file types and different
locale(fe,de,us,ru)

Santanu

-----Original Message-----
From: Andrew Boyd [mailto:andrew.boyd@mindspring.com]
Sent: Thursday, June 02, 2005 3:19 PM
To: java-user@lucene.apache.org
Subject: Lucene and Documentum


Hi All,
  Has anyone had any experience using lucene to search a documentum
respoitory?

Thanks

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



Andrew Boyd
Software Architect
Sun Certified J2EE Architect
B&B Technical Services Inc.
205.422.2557

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 12:17:21 2005
Return-Path: <java-user-return-14699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12463 invoked from network); 2 Jun 2005 12:17:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 12:17:20 -0000
Received: (qmail 74611 invoked by uid 500); 2 Jun 2005 12:17:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74566 invoked by uid 500); 2 Jun 2005 12:17:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74551 invoked by uid 99); 2 Jun 2005 12:17:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from gwia201.syr.edu (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 05:17:07 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Thu, 02 Jun 2005 07:55:01 -0400
Message-Id: <s29ebb55.053@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.5.1 
Date: Thu, 02 Jun 2005 07:54:35 -0400
From: "Grant Ingersoll" <GSIngers@syr.edu>
To: <java-user@lucene.apache.org>
Subject: Re: Adding to the termFreqVector
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't think you need to add to a term vector.

I guess what I was thinking (and this is just a guess not knowing your
architecture) is that you could have a TokenStreamFilter/Analyzer that
took in the appropriate term vectors, along with your runtime
incremental information.  Then, as you are "indexing" you add things to
the token stream from the term vector (doing this the number of times
needed based on its frequency).  If a specific term is in your runtime
incremental information, you add that many more terms unto the token
stream.  If your runtime info is stored in a Map then this lookup would
be quite fast and you indexing performance should be about what it was
for the original document.



>>> ryan@skow.org 6/1/2005 5:23:33 PM >>>
Lucene's scalability is not in question.  The simple solution of
rebuilding the string of terms is what I referred to as not being
scalable.  For instance, consider the following term vector:
termFreqVector (freq {myTermField: red/699999, green/799999,
blue/8999999})
Recreating a string with 699999 'reds' and a lot of greens and blues
is
definitely not memory or time efficient.  That solution I proposed was
simply to show an example of the effect I was hoping for and not
something
that one would want to do.  A spin off that theme could be used though
-
if the numbers were normalized, a relative number of reds, greens, and
blues could be created...  Still not convenient, but an option.


The new information, to increment 'red' for instance, would come at
runtime - after the initial indexing.  I would have no issues with
being
able to up the 'red' bucket in the term vector and reindex the
document
with the new term vector, but it looks like the term vector is
read-only
and can not be modified once retrieved from the IndexReader for the
given
field of a document.  I'm not familiar with how to add to an existing
term
frequency vector - if you have an example of doing so that would be
great!
 At this point in time the term positions are not of interest.

Thanks for your replies!

Ryan

> I don't think you need to parse the toString, you have the
> TermFreqVector object which lets you access the appropriate pieces
of
> information (string, freq).  You could then turn around and
delete/index
> the new document based on the vector with the increments.  I don't
know
> whether it would scale or not, but at some point you have to do the
> work, right?  Lucene is quite fast, you might be surprised what
> "scales".
>
> Where is the information coming from that allows you to increment
"red"
> below?  Is the information known at indexing?  Perhaps your token
> filters could just add the value  onto the token stream when you
index.
> Of course, this _may_ screw up position information, but you haven't
> said anything about needing that, so I will assume you don't
>
> -Grant
>
>
>>>> ryan@skow.org 5/31/2005 6:02:53 PM >>>
>
> Adding new terms and re-indexing the document is the desired
behavior.
>
> One (non-scalable) solution would be to parse the toString of the
> termFreqVector (freq {myTermField: red/2, green/1, blue/1}) and
create
> a
> new string representation of the expanded terms:  (red red green
blue)
>
> This obviously isn't a good solution.  Finding a way to simply do a
> document.addTerm("red"); and then re-indexing would be ideal.
>
>
>
>> Is your intent to persist the changed vector somehow or just use it
> in
>> your application for the immediate search?
>>
>> TermFreqVector is an interface, so if you aren't persisting, I
would
>> write a wrapper class around the one that is returned by Lucene
that
> has
>> add/set methods on it for manipulating the underlying vector and
> pass
>> that around in your application.  Other option, is to get the
source
> and
>> modify the TermFreqVector for your needs.
>>
>> Persistance is a bit harder, but would probably involve
manipulating
>> the document and then re-indexing it so that it's new vector has
the
>> updated frequencies by adding some dummy terms onto the document.
>>
>> Is that what you are looking for?
>>
>>>>> ryan@skow.org 5/30/2005 12:37:54 PM >>>
>>
>> How would one go about adding additional terms to a field which is
> not
>>
>> stored literally, but instead has a termFreqVector?  For example:
>>
>> If DocumentA was indexed originally with:
>>     myTermField: red green blue
>>
>> termFreqVector would look like:
>>    freq {myTermField: red/1, green/1, blue/1}
>>
>> Now, I'd like to add some more terms (red, yellow) and desire the
>> termFreqVector to look like this:
>>    freq {myTermField: red/2, green/1, blue/1, yellow/1}
>>
>> It would seem like there would be a covenant way of accomplishing
> this,
>>
>> but I must be missing something.
>>
>> Any advice would be greatly appreciated!
>>
>>
>>
>
---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
>> For additional commands, e-mail: java-user-help@lucene.apache.org 
>>
>>
>>
>
---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
>> For additional commands, e-mail: java-user-help@lucene.apache.org 
>>
>
>
>
---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
> For additional commands, e-mail: java-user-help@lucene.apache.org 
>
>
>
---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
> For additional commands, e-mail: java-user-help@lucene.apache.org 
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 14:58:19 2005
Return-Path: <java-user-return-14700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1000 invoked from network); 2 Jun 2005 14:58:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 14:58:19 -0000
Received: (qmail 95001 invoked by uid 500); 2 Jun 2005 14:58:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94970 invoked by uid 500); 2 Jun 2005 14:58:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94951 invoked by uid 99); 2 Jun 2005 14:58:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.fetchbook.info (HELO gc.fetchbook.info) (69.61.19.221)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 02 Jun 2005 07:58:11 -0700
Received: (qmail 29531 invoked from network); 2 Jun 2005 14:57:55 -0000
Received: from aeli.bb.netvision.net.il (HELO mickey) (212.143.80.6)
  by gc.fetchbook.info with SMTP; 2 Jun 2005 14:57:55 -0000
From: "M. Mokotov" <mk@mokotov.org>
To: <java-user@lucene.apache.org>
Subject: RE: using the CachingWrapperFilter
Date: Thu, 2 Jun 2005 17:56:19 +0200
Message-ID: <01e801c5678b$9f245280$0700000a@mickey>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
In-Reply-To: <E7728B0B-1F4E-4E40-B327-4D54031056FB@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik,

Thank you very much for your reply.

The problem is I need only the caching without any date or query
functionality.
Since the only two constructable-without-wrapping Filters are the
QueryFilter and DateFilter, I need either to have a dummy filter, or to =
have
a constructor for the CachingWrapperFilter that doesn't wrap (meaning a
constructor that doesn't get a filter as a parameter).

Am I missing something?

Regards,
Mickey.=20


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Thursday, May 26, 2005 2:52 PM
To: java-user@lucene.apache.org
Subject: Re: using the CachingWrapperFilter



On May 26, 2005, at 5:02 AM, M. Mokotov wrote:
> Can someone please explain me how do I use the CachingWrapperFilter?

There is a bit of it demonstrated in Lucene in Action.  Here are some =20
snippets that (sort of) describe it:

     http://www.lucenebook.com/search?query=3DCachingWrapperFilter

You can grab the LIA source code from that site also.

> I see that it's built in a decorator way (getting on the
> constructor another
> filter and decorate it with caching), still I don't see any basic =20
> filter to
> be the 'root'.

There are two concrete Filters built in to Lucene - QueryFilter and =20
DateFilter.  QueryFilter already has built-in caching, but DateFilter =20
does not.  CachingWrapperFilter was created to separate caching from =20
the filtering aspects, allowing filters to free themselves from =20
having to cache themselves.

> On the tests I saw there is a MockFilter, but I couldn't find it on
> the
> jars.

We don't package up the test code as a JAR file - but if you check =20
out Lucene's code from Subversion you'll find it under src/test

> Do I need to create such a filter myself? Does anyone using the
> cache needs
> to create his own dummy class?

This all depends on what you're trying to do.  A Filter is used for =20
long standing constraints of the document search space.  You would =20
not use a "dummy" class, but rather a real filter such as the ones =20
just mentioned.  And whether you use the CachingWrapperFilter depends =20
on which filter you choose or if you create a custom one.  The Lucene =20
in Action source code has an example of a custom Filter.

     Erik




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 15:38:17 2005
Return-Path: <java-user-return-14701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29191 invoked from network); 2 Jun 2005 15:38:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 15:38:16 -0000
Received: (qmail 20600 invoked by uid 500); 2 Jun 2005 15:38:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20561 invoked by uid 500); 2 Jun 2005 15:38:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20520 invoked by uid 99); 2 Jun 2005 15:38:06 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_40_50,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of Rossen.Angelov@sourcemedia.com designates 207.241.10.34 as permitted sender)
Received: from tmgate2.thomsonmedia.com (HELO tmgate2.thomsonmedia.com) (207.241.10.34)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 08:38:04 -0700
Received: from tmskoex01.tm.thomsonmedia.com (ip-33.bankinfo.com [207.241.10.33])
	by tmgate2.thomsonmedia.com (Switch-3.1.7/Switch-3.1.7) with ESMTP id j52FboK3028296
	for <java-user@lucene.apache.org>; Thu, 2 Jun 2005 10:37:51 -0500 (CDT)
Received: by tmskoex01.thomsonmedia.com with Internet Mail Service (5.5.2657.72)
	id <LDKFGV3L>; Thu, 2 Jun 2005 10:37:50 -0500
Message-ID: <4F8DDDFDAC9A864AAED5BB875129DF4B0690CCE2@tmskoex01.thomsonmedia.com>
From: "Angelov, Rossen" <Rossen.Angelov@SourceMedia.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: how long should optimizing take
Date: Thu, 2 Jun 2005 10:37:49 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C56788.C72DE7A0"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C56788.C72DE7A0
Content-Type: text/plain;
	charset="iso-8859-1"

I would like to bring that issue up again as I haven't resolved it yet and
haven't found what's causing it.

Any help, ideas or sharing experience are welcome!

Thanks,
Ross

-----Original Message-----
From: Angelov, Rossen 
Sent: Friday, May 27, 2005 10:42 AM
To: 'java-user@lucene.apache.org'
Subject: how long should optimizing take


Hi,

I'm having problems with the Lucene optimization. Two of the indexes are
about 2BG big and every day about 30 documents are added to each of these
indexes. At the end of the indexing the IndexWriter optimize() method is
executed and it takes about 30 minutes to finish the optimization for each
index.

The indexing happens through a web service. A servlet takes an http request
and executes methods to index the new documents and optimize the indexes.

The problem is that the request takes too long to finish because of the
optimization and the web server doesn't return a response. The browser will
keep waiting forever.

Has anybody else experienced similar behavior with the optimization process?

Thanks,
Ross

"This communication is intended solely for the addressee and is
confidential and not for third party unauthorized distribution."


"This communication is intended solely for the addressee and is
confidential and not for third party unauthorized distribution."


------_=_NextPart_001_01C56788.C72DE7A0--

From java-user-return-14702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 16:11:01 2005
Return-Path: <java-user-return-14702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41321 invoked from network); 2 Jun 2005 16:11:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 16:11:00 -0000
Received: (qmail 7022 invoked by uid 500); 2 Jun 2005 16:10:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6966 invoked by uid 500); 2 Jun 2005 16:10:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6929 invoked by uid 99); 2 Jun 2005 16:10:52 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.203 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 09:10:50 -0700
Received: by zproxy.gmail.com with SMTP id 8so225857nzo
        for <java-user@lucene.apache.org>; Thu, 02 Jun 2005 09:10:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=lQ8xtdAL2Ag0+j4os8cxSRQFjmThVNhPFeBosrU7bbRthoZZxmhbZMFewtShagKEp+P70rc3fE9CDySldW/Ih0YpAh2jGTcY3ARJH9IBKZHVo3uGjBgULfwwye2ttknwx0VK5wA8dBZaKDrOy2OHg0HnbhPv5E813i8WiAwVKG8=
Received: by 10.36.222.24 with SMTP id u24mr657367nzg;
        Thu, 02 Jun 2005 09:10:27 -0700 (PDT)
Received: from ?172.22.19.82? ([129.176.197.15])
        by mx.gmail.com with ESMTP id 17sm999609nzo.2005.06.02.09.10.27;
        Thu, 02 Jun 2005 09:10:27 -0700 (PDT)
Message-ID: <429F2F71.9050004@gmail.com>
Date: Thu, 02 Jun 2005 11:10:25 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: how long should optimizing take
References: <4F8DDDFDAC9A864AAED5BB875129DF4B0690CCE2@tmskoex01.thomsonmedia.com>
In-Reply-To: <4F8DDDFDAC9A864AAED5BB875129DF4B0690CCE2@tmskoex01.thomsonmedia.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I would run your optimize process in a separate thread, so that your web 
client doesn't have to wait for it to return.

You may even want to set the optimize part up to run on a weekly 
schedule, at a low load time.  I probably wouldn't reoptimize after 
every 30 documents, on an index that size.

Optimizing takes a while on your index, because it basically has to copy 
the entire index to a new index, so it will take how ever long it takes 
to copy 2 GB's on your hardware + a small amount of overhead...

Dan

Angelov, Rossen wrote:

>I would like to bring that issue up again as I haven't resolved it yet and
>haven't found what's causing it.
>
>Any help, ideas or sharing experience are welcome!
>
>Thanks,
>Ross
>
>-----Original Message-----
>From: Angelov, Rossen 
>Sent: Friday, May 27, 2005 10:42 AM
>To: 'java-user@lucene.apache.org'
>Subject: how long should optimizing take
>
>
>Hi,
>
>I'm having problems with the Lucene optimization. Two of the indexes are
>about 2BG big and every day about 30 documents are added to each of these
>indexes. At the end of the indexing the IndexWriter optimize() method is
>executed and it takes about 30 minutes to finish the optimization for each
>index.
>
>The indexing happens through a web service. A servlet takes an http request
>and executes methods to index the new documents and optimize the indexes.
>
>The problem is that the request takes too long to finish because of the
>optimization and the web server doesn't return a response. The browser will
>keep waiting forever.
>
>Has anybody else experienced similar behavior with the optimization process?
>
>Thanks,
>Ross
>
>"This communication is intended solely for the addressee and is
>confidential and not for third party unauthorized distribution."
>
>
>
>"This communication is intended solely for the addressee and is
>confidential and not for third party unauthorized distribution."
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 16:12:54 2005
Return-Path: <java-user-return-14703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42976 invoked from network); 2 Jun 2005 16:12:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 16:12:54 -0000
Received: (qmail 14244 invoked by uid 500); 2 Jun 2005 16:12:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14219 invoked by uid 500); 2 Jun 2005 16:12:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14180 invoked by uid 99); 2 Jun 2005 16:12:46 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of chenjian1227@gmail.com designates 64.233.170.193 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 09:12:44 -0700
Received: by rproxy.gmail.com with SMTP id 1so19246rny
        for <java-user@lucene.apache.org>; Thu, 02 Jun 2005 09:12:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=N2j2wh3VIOvL666Ag49GBGM7b3PTFQpB4g3H+pIY0rWx/Yun6Ju9CU2wSmfw/DK33uI6UbKHVZtkjYbDIK0Q0uU8juknEJdFKrjSuhtCw3HzTwnWr9/iTHPSYtNl1pDGWW45x1/v3CJx6lJF1A+rDBn1ZMZs1GRQYO51jviQjAY=
Received: by 10.38.8.41 with SMTP id 41mr42217rnh;
        Thu, 02 Jun 2005 09:12:21 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Thu, 2 Jun 2005 09:12:21 -0700 (PDT)
Message-ID: <7ca123910506020912c3c57ee@mail.gmail.com>
Date: Thu, 2 Jun 2005 09:12:21 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how long should optimizing take
In-Reply-To: <4F8DDDFDAC9A864AAED5BB875129DF4B0690CCE2@tmskoex01.thomsonmedia.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4F8DDDFDAC9A864AAED5BB875129DF4B0690CCE2@tmskoex01.thomsonmedia.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

optimize() merges the index segments into one single index segment. In
your case, I guess the 2G index segment is quite large, if you merge
it with any other small index segments, the merging process definitely
will be slow.

I think the performance should be ok without calling optimize().
Moreover, could you call optimize() every several days, say, every
week?

Cheers,

Jian

I think you don't need to call optimize() that often, given you only
have 30 documents each day to be added to the index.

On 6/2/05, Angelov, Rossen <Rossen.Angelov@sourcemedia.com> wrote:
> I would like to bring that issue up again as I haven't resolved it yet an=
d
> haven't found what's causing it.
>=20
> Any help, ideas or sharing experience are welcome!
>=20
> Thanks,
> Ross
>=20
> -----Original Message-----
> From: Angelov, Rossen
> Sent: Friday, May 27, 2005 10:42 AM
> To: 'java-user@lucene.apache.org'
> Subject: how long should optimizing take
>=20
>=20
> Hi,
>=20
> I'm having problems with the Lucene optimization. Two of the indexes are
> about 2BG big and every day about 30 documents are added to each of these
> indexes. At the end of the indexing the IndexWriter optimize() method is
> executed and it takes about 30 minutes to finish the optimization for eac=
h
> index.
>=20
> The indexing happens through a web service. A servlet takes an http reque=
st
> and executes methods to index the new documents and optimize the indexes.
>=20
> The problem is that the request takes too long to finish because of the
> optimization and the web server doesn't return a response. The browser wi=
ll
> keep waiting forever.
>=20
> Has anybody else experienced similar behavior with the optimization proce=
ss?
>=20
> Thanks,
> Ross
>=20
> "This communication is intended solely for the addressee and is
> confidential and not for third party unauthorized distribution."
>=20
>=20
>=20
> "This communication is intended solely for the addressee and is
> confidential and not for third party unauthorized distribution."
>=20
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 17:08:34 2005
Return-Path: <java-user-return-14704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63632 invoked from network); 2 Jun 2005 17:08:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 17:08:34 -0000
Received: (qmail 59734 invoked by uid 500); 2 Jun 2005 17:08:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59704 invoked by uid 500); 2 Jun 2005 17:08:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59678 invoked by uid 99); 2 Jun 2005 17:08:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 10:08:23 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C1E8F13E200A; Thu,  2 Jun 2005 13:08:02 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id F1E9813E2007
	for <java-user@lucene.apache.org>; Thu,  2 Jun 2005 13:07:29 -0400 (EDT)
In-Reply-To: <01e801c5678b$9f245280$0700000a@mickey>
References: <01e801c5678b$9f245280$0700000a@mickey>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6725A704-D015-41C6-AB22-C235E95213F2@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: using the CachingWrapperFilter
Date: Thu, 2 Jun 2005 13:07:28 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 2, 2005, at 11:56 AM, M. Mokotov wrote:

> Hi Erik,
>
> Thank you very much for your reply.
>
> The problem is I need only the caching without any date or query
> functionality.
> Since the only two constructable-without-wrapping Filters are the
> QueryFilter and DateFilter, I need either to have a dummy filter,  
> or to have
> a constructor for the CachingWrapperFilter that doesn't wrap  
> (meaning a
> constructor that doesn't get a filter as a parameter).
>
> Am I missing something?

One of us is missing something, that's for sure!  :)  I'm not at all  
understanding what it is you want to cache at this point.

Please elaborate on what you're trying to do.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 18:35:51 2005
Return-Path: <java-user-return-14705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2712 invoked from network); 2 Jun 2005 18:35:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 18:35:51 -0000
Received: (qmail 85697 invoked by uid 500); 2 Jun 2005 18:35:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85628 invoked by uid 500); 2 Jun 2005 18:35:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85614 invoked by uid 99); 2 Jun 2005 18:35:43 -0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_30_40,HTML_MESSAGE,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ntgwgate.loc.gov (HELO loc.gov) (140.147.137.18)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 11:35:37 -0700
Received: from LCHub-MTA by loc.gov
	with Novell_GroupWise; Thu, 02 Jun 2005 14:41:19 -0400
Message-Id: <s29f1a8f.096@loc.gov>
X-Mailer: Novell GroupWise Internet Agent 6.5.4 
Date: Thu, 02 Jun 2005 14:39:22 -0400
From: "Corey Keith" <ckeith@loc.gov>
To: <java-user@lucene.apache.org>
Subject: Indexing and Hit Highlighting OCR Data
Mime-Version: 1.0
Content-Type: multipart/alternative; boundary="=__PartAD8E7D4A.0__="
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=__PartAD8E7D4A.0__=
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable

Hi,
=20
I am involved in a project which is trying to provide searching and hit =
highlighting on the scanned image of historical newspapers.  We have an =
XML based OCR format.  A sample is below.  We need to index the CONTENT =
attribute of the String element which is the easy part.  We would like to =
be able find the "hits" within this XML document in order to use the =
positioning information to draw the highlight boxes on the image.  It =
doesn't make a lot of sense to just extract the CONTENT and index that =
because we loose the positioning information.  My second thought was to =
make a custom analyzer which dropped everything except for the content =
element and then used the highlighting class in the sandbox to reanalyze =
the XML document and mark the hits.  With the marked hits in the XML we =
could find the position information and draw on the image.  Has anyone =
else worked with OCR information and lucene.  What was your approach?  =
Does this approach seem sound?  Any recommendations?
=20
Thanks, Corey
=20
     <TextLine HEIGHT=3D"2307.0" WIDTH=3D"2284.0" HPOS=3D"1316.0" =
VPOS=3D"123644.0">
      <String STYLEREFS=3D"ID4" HEIGHT=3D"1922.0" WIDTH=3D"244.0" =
HPOS=3D"1316.0" VPOS=3D"123644.0" CONTENT=3D"The" WC=3D"1.0"/>
      <SP WIDTH=3D"-244.0" HPOS=3D"1560.0" VPOS=3D"123644.0"/>
      <String STYLEREFS=3D"ID4" HEIGHT=3D"1914.0" WIDTH=3D"424.0" =
HPOS=3D"1664.0" VPOS=3D"123711.0" CONTENT=3D"female" WC=3D"1.0"/>
      <SP WIDTH=3D"184.0" HPOS=3D"1480.0" VPOS=3D"123644.0"/>
      <String STYLEREFS=3D"ID4" HEIGHT=3D"2174.0" WIDTH=3D"240.0" =
HPOS=3D"2192.0" VPOS=3D"123711.0" CONTENT=3D"lays" WC=3D"1.0"/>
      <SP WIDTH=3D"104.0" HPOS=3D"2088.0" VPOS=3D"123711.0"/>
      <String STYLEREFS=3D"ID4" HEIGHT=3D"1981.0" WIDTH=3D"360.0" =
HPOS=3D"2528.0" VPOS=3D"123711.0" CONTENT=3D"about" WC=3D"1.0"/>
      <SP WIDTH=3D"236.0" HPOS=3D"2292.0" VPOS=3D"123711.0"/>
      <String STYLEREFS=3D"ID4" HEIGHT=3D"1855.0" WIDTH=3D"216.0" =
HPOS=3D"3000.0" VPOS=3D"123770.0" CONTENT=3D"140" WC=3D"1.0"/>
      <SP WIDTH=3D"112.0" HPOS=3D"2888.0" VPOS=3D"123711.0"/>
      <String STYLEREFS=3D"ID4" HEIGHT=3D"1729.0" WIDTH=3D"284.0" =
HPOS=3D"3316.0" VPOS=3D"124223.0" CONTENT=3D"eggs" WC=3D"1.0"/>
      <SP WIDTH=3D"100.0" HPOS=3D"3216.0" VPOS=3D"123770.0"/>
     </TextLine>



--=__PartAD8E7D4A.0__=--

From java-user-return-14706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 19:22:00 2005
Return-Path: <java-user-return-14706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33598 invoked from network); 2 Jun 2005 19:22:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 19:22:00 -0000
Received: (qmail 10727 invoked by uid 500); 2 Jun 2005 19:21:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10676 invoked by uid 500); 2 Jun 2005 19:21:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10659 invoked by uid 99); 2 Jun 2005 19:21:51 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from pop06.mail.atl.earthlink.net (HELO pop06.mail.atl.earthlink.net) (207.69.200.40)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 12:21:49 -0700
Received: from wamui-cedar.atl.sa.earthlink.net ([209.86.224.29])
	by pop06.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1DdvG3-0001dc-00
	for java-user@lucene.apache.org; Thu, 02 Jun 2005 15:21:35 -0400
Message-ID: <26208150.1117740095452.JavaMail.root@wamui-cedar.atl.sa.earthlink.net>
Date: Thu, 2 Jun 2005 14:21:35 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: RE: calculate wi = tfi * IDFi for each document.
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok.  So if I get 10 Documents back from a search and I want to get the top 5 weighted terms for each of the 10 documents what API call should I use?  I'm unable to find the connection between Similarity and a Document.

I know I'm missing the elephant that must be in the middle of the room.  Or maybe it's not there.
Is what I'm trying to do do-able?

Thanks,

Andrew

-----Original Message-----
From: Max Pfingsthorn <m.pfingsthorn@hippo.nl>
Sent: Jun 2, 2005 5:33 AM
To: java-user@lucene.apache.org
Subject: RE: calculate wi = tfi * IDFi for each document.

Hi,

DefaultSimilarity uses exactly this weighting scheme. Makes sense since it's a pretty standard relevance measure...

Bye!
max

-----Original Message-----
From: Andrew Boyd [mailto:andrew.boyd@mindspring.com]
Sent: Thursday, June 02, 2005 11:39
To: java-user@lucene.apache.org
Subject: calculate wi = tfi * IDFi for each document.


If I have search results how can I calculate, using lucene's API,  wi = tfi * IDFi for each document.

wi    = term weight
tfi    = term frequency in a document
IDFi = inverse document frequency = log(D/dfi)
dfi   = document frequency or number of documents containing term i
D    = number of documents in my search result

Thanks,

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 19:31:44 2005
Return-Path: <java-user-return-14707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37144 invoked from network); 2 Jun 2005 19:31:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 19:31:43 -0000
Received: (qmail 37895 invoked by uid 500); 2 Jun 2005 19:31:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37856 invoked by uid 500); 2 Jun 2005 19:31:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37841 invoked by uid 99); 2 Jun 2005 19:31:38 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_40_50,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of Rossen.Angelov@sourcemedia.com designates 207.241.10.34 as permitted sender)
Received: from tmgate2.thomsonmedia.com (HELO tmgate2.thomsonmedia.com) (207.241.10.34)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 12:31:36 -0700
Received: from tmskoex01.tm.thomsonmedia.com (ip-33.bankinfo.com [207.241.10.33])
	by tmgate2.thomsonmedia.com (Switch-3.1.7/Switch-3.1.7) with ESMTP id j52JVPgu004375
	for <java-user@lucene.apache.org>; Thu, 2 Jun 2005 14:31:25 -0500 (CDT)
Received: by tmskoex01.thomsonmedia.com with Internet Mail Service (5.5.2657.72)
	id <LDKFG70S>; Thu, 2 Jun 2005 14:31:25 -0500
Message-ID: <4F8DDDFDAC9A864AAED5BB875129DF4B0690CCE4@tmskoex01.thomsonmedia.com>
From: "Angelov, Rossen" <Rossen.Angelov@SourceMedia.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: how long should optimizing take
Date: Thu, 2 Jun 2005 14:31:23 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C567A8.C5E26534"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C567A8.C5E26534
Content-Type: text/plain;
	charset="iso-8859-1"

Thanks for the suggestion, Jian Chen's idea is very similar too.
Probably optimizing that often is not necessary and not that critical for
speeding up the searches.

I'll try changing the index process not to optimize at all and execute the
optimization independently of the indexing on a weekly bases.

Ross

-----Original Message-----
From: Dan Armbrust [mailto:daniel.armbrust.list@gmail.com]
Sent: Thursday, June 02, 2005 11:10 AM
To: java-user@lucene.apache.org
Subject: Re: how long should optimizing take


I would run your optimize process in a separate thread, so that your web 
client doesn't have to wait for it to return.

You may even want to set the optimize part up to run on a weekly 
schedule, at a low load time.  I probably wouldn't reoptimize after 
every 30 documents, on an index that size.

Optimizing takes a while on your index, because it basically has to copy 
the entire index to a new index, so it will take how ever long it takes 
to copy 2 GB's on your hardware + a small amount of overhead...

Dan

Angelov, Rossen wrote:

>I would like to bring that issue up again as I haven't resolved it yet and
>haven't found what's causing it.
>
>Any help, ideas or sharing experience are welcome!
>
>Thanks,
>Ross
>
>-----Original Message-----
>From: Angelov, Rossen 
>Sent: Friday, May 27, 2005 10:42 AM
>To: 'java-user@lucene.apache.org'
>Subject: how long should optimizing take
>
>
>Hi,
>
>I'm having problems with the Lucene optimization. Two of the indexes are
>about 2BG big and every day about 30 documents are added to each of these
>indexes. At the end of the indexing the IndexWriter optimize() method is
>executed and it takes about 30 minutes to finish the optimization for each
>index.
>
>The indexing happens through a web service. A servlet takes an http request
>and executes methods to index the new documents and optimize the indexes.
>
>The problem is that the request takes too long to finish because of the
>optimization and the web server doesn't return a response. The browser will
>keep waiting forever.
>
>Has anybody else experienced similar behavior with the optimization
process?
>
>Thanks,
>Ross
>
>"This communication is intended solely for the addressee and is
>confidential and not for third party unauthorized distribution."
>
>
>
>"This communication is intended solely for the addressee and is
>confidential and not for third party unauthorized distribution."
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

"This communication is intended solely for the addressee and is
confidential and not for third party unauthorized distribution."


------_=_NextPart_001_01C567A8.C5E26534--

From java-user-return-14708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 19:44:00 2005
Return-Path: <java-user-return-14708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40767 invoked from network); 2 Jun 2005 19:44:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 19:44:00 -0000
Received: (qmail 70376 invoked by uid 500); 2 Jun 2005 19:43:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70347 invoked by uid 500); 2 Jun 2005 19:43:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70334 invoked by uid 99); 2 Jun 2005 19:43:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from tayrelbas04.tay.hp.com (HELO tayrelbas04.tay.hp.com) (161.114.80.247)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 12:43:46 -0700
Received: from tayexg11.americas.cpqcorp.net (tayexg11.americas.cpqcorp.net [16.103.130.186])
	by tayrelbas04.tay.hp.com (Postfix) with ESMTP id 2D6D22000143
	for <java-user@lucene.apache.org>; Thu,  2 Jun 2005 15:43:33 -0400 (EDT)
Received: from tayexc13.americas.cpqcorp.net ([16.103.130.26]) by tayexg11.americas.cpqcorp.net with Microsoft SMTPSVC(6.0.3790.211);
	 Thu, 2 Jun 2005 15:42:52 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Indexing multiple languages
Date: Thu, 2 Jun 2005 15:42:51 -0400
Message-ID: <19ADCC0B9D4CAD4582BB9900BBCE3574019450A0@tayexc13.americas.cpqcorp.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing multiple languages
Thread-Index: AcVmgXERRepaLfgIRyegyuSx+OofjgBKMrjg
From: "Tansley, Robert" <robert.tansley@hp.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 02 Jun 2005 19:42:52.0981 (UTC) FILETIME=[441DF650:01C567AB]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks all for the useful comments.

It seems that there are even more options --

4/ One index, with a separate Lucene document for each (item,language) =
combination, with one field that specifies the language
5/ One index, one Lucene document per item, with field names that =
include the language (e.g. title_en, title_cn)

I quite like 4, because you can search with no language constraint, or =
with one as Paul suggests below.  However, some "non language-specific" =
data might need to be repeated (e.g. dates), unless we had an extra =
Lucene document for all that.  I wonder what the various pros and cons =
in terms of index size and performance would be in each case?  I really =
don't have enough knowledge of Lucene to have any idea...

 Robert Tansley / Digital Media Systems Programme / HP Labs
  http://www.hpl.hp.com/personal/Robert_Tansley/

> -----Original Message-----
> From: Paul Libbrecht [mailto:paul@activemath.org]=20
> Sent: 01 June 2005 04:10
> To: java-user@lucene.apache.org
> Subject: Re: Indexing multiple languages
>=20
> Le 1 juin 05, =E0 01:12, Erik Hatcher a =E9crit :
> >> 1/ one index for all languages
> >> 2/ one index for all languages, with an extra language field so=20
> >> searches
> >> can be constrained to a particular language
> >> 3/ separate indices for each language?
> > I would vote for option #2 as it gives the most flexibilty=20
> - you can=20
> > query with or without concern for language.
>=20
> The way I've solved this is to make a different field-name=20
> per-language=20
> as our documents can be multilingual.
> What's then done is query expansion at query time: given a term-query=20
> for text, I duplicate it for each accepted language of the=20
> user with a=20
> factor related to the preference of the language (e.g. the q=20
> factor in=20
> Accept-Language http header). Presumably I could be using solution 2/=20
> as well if my queries become too big, making several=20
> documents for each=20
> language of the document.
>=20
> I think it's very important to care about guessing the accepted=20
> languages of the user. Typically, the default behaviour of=20
> Google is to=20
> only give you matches in your primary language but then allow=20
> expansion=20
> in any language.
>=20
> >> On the other hand, if people are searching for proper nouns in=20
> >> metadata
> >> (e.g. "DSpace") it may be advantageous to search all languages at=20
> >> once.
>=20
> This one may need particular treatment.
>=20
> Tell us your success!
>=20
> paul
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 20:10:27 2005
Return-Path: <java-user-return-14709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51287 invoked from network); 2 Jun 2005 20:10:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 20:10:27 -0000
Received: (qmail 26165 invoked by uid 500); 2 Jun 2005 20:10:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26103 invoked by uid 500); 2 Jun 2005 20:10:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26060 invoked by uid 99); 2 Jun 2005 20:10:15 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.203 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 13:10:13 -0700
Received: by zproxy.gmail.com with SMTP id 16so492365nzp
        for <java-user@lucene.apache.org>; Thu, 02 Jun 2005 13:10:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=WuM3DrTT/LoMh9UNojC37t6JeajCPNIE0e7DFLbmzcUt4AkbJHUpfw+4DoMbA/93LplYR5EGcwcOt/hp1DGe/B+dZjHQ8qhxCgPBMHYhWJAPMHXajfot6Y3ZRK/nvkYDej5/qGDPRE2legnqKCCVR0kUMLo3A7j3f5emeLKyZFc=
Received: by 10.36.41.6 with SMTP id o6mr615141nzo;
        Thu, 02 Jun 2005 13:10:01 -0700 (PDT)
Received: from ?172.22.19.82? ([129.176.197.15])
        by mx.gmail.com with ESMTP id 15sm1276031nzo.2005.06.02.13.10.01;
        Thu, 02 Jun 2005 13:10:01 -0700 (PDT)
Message-ID: <429F6798.10806@gmail.com>
Date: Thu, 02 Jun 2005 15:10:00 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: how long should optimizing take
References: <4F8DDDFDAC9A864AAED5BB875129DF4B0690CCE4@tmskoex01.thomsonmedia.com>
In-Reply-To: <4F8DDDFDAC9A864AAED5BB875129DF4B0690CCE4@tmskoex01.thomsonmedia.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You should be careful, however, not to end up with two VM instances each 
trying to open an index writer at the same time - one of them is going 
to fail.

Aka, if someone using your web interface tries to add a new document to 
the index while you have the optimizer running standalone, the web 
interface is not going to be able to get a lock on the index to add the 
documents. 

Dan

Angelov, Rossen wrote:

>Thanks for the suggestion, Jian Chen's idea is very similar too.
>Probably optimizing that often is not necessary and not that critical for
>speeding up the searches.
>
>I'll try changing the index process not to optimize at all and execute the
>optimization independently of the indexing on a weekly bases.
>
>Ross
>
>  
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 02 20:18:15 2005
Return-Path: <java-user-return-14710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54224 invoked from network); 2 Jun 2005 20:18:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jun 2005 20:18:15 -0000
Received: (qmail 41151 invoked by uid 500); 2 Jun 2005 20:18:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41127 invoked by uid 500); 2 Jun 2005 20:18:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41095 invoked by uid 99); 2 Jun 2005 20:18:08 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_40_50,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of Rossen.Angelov@sourcemedia.com designates 207.241.10.34 as permitted sender)
Received: from tmgate2.thomsonmedia.com (HELO tmgate2.thomsonmedia.com) (207.241.10.34)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 13:18:07 -0700
Received: from tmskoex01.tm.thomsonmedia.com (ip-33.bankinfo.com [207.241.10.33])
	by tmgate2.thomsonmedia.com (Switch-3.1.7/Switch-3.1.7) with ESMTP id j52KHude011690
	for <java-user@lucene.apache.org>; Thu, 2 Jun 2005 15:17:56 -0500 (CDT)
Received: by tmskoex01.thomsonmedia.com with Internet Mail Service (5.5.2657.72)
	id <LDKFG9QS>; Thu, 2 Jun 2005 15:17:56 -0500
Message-ID: <4F8DDDFDAC9A864AAED5BB875129DF4B0690CCE5@tmskoex01.thomsonmedia.com>
From: "Angelov, Rossen" <Rossen.Angelov@SourceMedia.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: how long should optimizing take
Date: Thu, 2 Jun 2005 15:17:55 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C567AF.72E478E0"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C567AF.72E478E0
Content-Type: text/plain;
	charset="iso-8859-1"

I'll make sure no indexing is started before the optimization is done.
Most likely Sunday will be the optimization day for the indexes and every
other night the documents will be added to the index.

Only searching will be available through the web service while optimizing,
but this should not be a problem as an IndexReader will be opened, not a
second IndexWriter.

Ross

-----Original Message-----
From: Dan Armbrust [mailto:daniel.armbrust.list@gmail.com]
Sent: Thursday, June 02, 2005 3:10 PM
To: java-user@lucene.apache.org
Subject: Re: how long should optimizing take


You should be careful, however, not to end up with two VM instances each 
trying to open an index writer at the same time - one of them is going 
to fail.

Aka, if someone using your web interface tries to add a new document to 
the index while you have the optimizer running standalone, the web 
interface is not going to be able to get a lock on the index to add the 
documents. 

Dan

Angelov, Rossen wrote:

>Thanks for the suggestion, Jian Chen's idea is very similar too.
>Probably optimizing that often is not necessary and not that critical for
>speeding up the searches.
>
>I'll try changing the index process not to optimize at all and execute the
>optimization independently of the indexing on a weekly bases.
>
>Ross
>
>  
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

"This communication is intended solely for the addressee and is
confidential and not for third party unauthorized distribution."


------_=_NextPart_001_01C567AF.72E478E0--

From java-user-return-14711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 01:02:59 2005
Return-Path: <java-user-return-14711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41341 invoked from network); 3 Jun 2005 01:02:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 01:02:58 -0000
Received: (qmail 66158 invoked by uid 500); 3 Jun 2005 01:02:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66126 invoked by uid 500); 3 Jun 2005 01:02:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66111 invoked by uid 99); 3 Jun 2005 01:02:51 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 18:02:50 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 971CC5B837; Thu,  2 Jun 2005 18:02:44 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 945077F466
	for <java-user@lucene.apache.org>; Thu,  2 Jun 2005 18:02:44 -0700 (PDT)
Date: Thu, 2 Jun 2005 18:02:44 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Indexing and Hit Highlighting OCR Data
In-Reply-To: <s29f1a8f.096@loc.gov>
Message-ID: <Pine.LNX.4.58.0506021755110.20866@hal.rescomp.berkeley.edu>
References: <s29f1a8f.096@loc.gov>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


This is a pretty interesting problem.  I envy you.

I would avoid the existing highlighter for your purposes -- highlighting
in token space is a very differnet problem from "highlihgting" in 2D
space.

based on the XML sample you provided, it looks like your XML files
are allready a "tokenized" form of the orriginal OCR data -- by which i
mean the page has allready been tokenized into words who position is
recorded.

I would parse these XML docs to generate two things:
    1) a stream of words for analysis/filtering (ie: stop words, stemming,
       synonyms)
    2) a datastructure mapping words to lists of positions (ie: if the
       same word apears in multiple places, list the word once, followed
       by each set of coordinates)

use #1 in the usual way, and add a serialized form of #2 to your index as
a Stored Keyword -- at query time, the words from your initial query can
be looked up in that data strucutre to find the regions to "highlight"



: I am involved in a project which is trying to provide searching and hit highlighting on the scanned image of historical newspapers.  We have an XML based OCR format.  A sample is below.  We need to index the CONTENT attribute of the String element which is the easy part.  We would like to be able find the "hits" within this XML document in order to use the positioning information to draw the highlight boxes on the image.  It doesn't make a lot of sense to just extract the CONTENT and index that because we loose the positioning information.  My second thought was to make a custom analyzer which dropped everything except for the content element and then used the highlighting class in the sandbox to reanalyze the XML document and mark the hits.  With the marked hits in the XML we could find the position information and draw on the image.  Has anyone else worked with OCR information and lucene.  What was your approach?  Does this approach seem sound?  Any recommendations?
:
: Thanks, Corey
:
:      <TextLine HEIGHT="2307.0" WIDTH="2284.0" HPOS="1316.0" VPOS="123644.0">
:       <String STYLEREFS="ID4" HEIGHT="1922.0" WIDTH="244.0" HPOS="1316.0" VPOS="123644.0" CONTENT="The" WC="1.0"/>
:       <SP WIDTH="-244.0" HPOS="1560.0" VPOS="123644.0"/>
:       <String STYLEREFS="ID4" HEIGHT="1914.0" WIDTH="424.0" HPOS="1664.0" VPOS="123711.0" CONTENT="female" WC="1.0"/>
:       <SP WIDTH="184.0" HPOS="1480.0" VPOS="123644.0"/>
:       <String STYLEREFS="ID4" HEIGHT="2174.0" WIDTH="240.0" HPOS="2192.0" VPOS="123711.0" CONTENT="lays" WC="1.0"/>
:       <SP WIDTH="104.0" HPOS="2088.0" VPOS="123711.0"/>
:       <String STYLEREFS="ID4" HEIGHT="1981.0" WIDTH="360.0" HPOS="2528.0" VPOS="123711.0" CONTENT="about" WC="1.0"/>
:       <SP WIDTH="236.0" HPOS="2292.0" VPOS="123711.0"/>
:       <String STYLEREFS="ID4" HEIGHT="1855.0" WIDTH="216.0" HPOS="3000.0" VPOS="123770.0" CONTENT="140" WC="1.0"/>
:       <SP WIDTH="112.0" HPOS="2888.0" VPOS="123711.0"/>
:       <String STYLEREFS="ID4" HEIGHT="1729.0" WIDTH="284.0" HPOS="3316.0" VPOS="124223.0" CONTENT="eggs" WC="1.0"/>
:       <SP WIDTH="100.0" HPOS="3216.0" VPOS="123770.0"/>
:      </TextLine>
:
:
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 01:08:42 2005
Return-Path: <java-user-return-14712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42396 invoked from network); 3 Jun 2005 01:08:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 01:08:42 -0000
Received: (qmail 76949 invoked by uid 500); 3 Jun 2005 01:08:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76877 invoked by uid 500); 3 Jun 2005 01:08:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76852 invoked by uid 99); 3 Jun 2005 01:08:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mx.dynix.com (HELO dynix.com) (192.150.149.249)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 02 Jun 2005 18:08:31 -0700
Received: from ([10.1.102.55])
	by mx.dynix.com with ESMTP  id 4028803.5568417;
	Thu, 02 Jun 2005 19:08:10 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Indexing multiple languages
Date: Thu, 2 Jun 2005 19:06:51 -0600
Message-ID: <27DC6F1B1943DE42A2BBC21BEC8974DB7D1B45@POSTAL.corp.dynix.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing multiple languages
Thread-Index: AcVmgXERRepaLfgIRyegyuSx+OofjgBKMrjgAAtCuuA=
From: "Bob Cheung" <bcheung@dynix.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik,

I am a new comer to this list and please allow me to ask a dumb
question.

For the StandardAnalyzer, will it have to be modified to accept
different character encodings.

We have customers in China, Taiwan and Hong Kong.  Chinese data may come
in 3 different encoding:  Big5, GB and UTF8.

What is the default encoding for the StandardAnalyser.

Btw, I did try running the lucene demo (web template) to index the HTML
files after I added one including English and Chinese characters.  I was
not able to search for any Chinese in that HTML file (returned no hits).
I wonder whether I need to change some of the java programs to index
Chinese and/or accept Chinese as search term.  I was able to search for
the HTML file if I used English word that appeared in the added HTML
file.

Thanks,

Bob


On May 31, 2005, Erik wrote:

Jian - have you tried Lucene's StandardAnalyzer with Chinese?  It
will keep English as-is (removing stop words, lowercasing, and such)
and separate CJK characters into separate tokens also.

     Erik


On May 31, 2005, at 5:49 PM, jian chen wrote:

> Hi,
>
> Interesting topic. I thought about this as well. I wanted to index
> Chinese text with English, i.e., I want to treat the English text
> inside Chinese text as English tokens rather than Chinese text tokens.
>
> Right now I think maybe I have to write a special analyzer that takes
> the text input, and detect if the character is an ASCII char, if it
> is, assembly them together and make it as a token, if not, then, make
> it as a Chinese word token.
>
> So, bottom line is, just one analyzer for all the text and do the
> if/else statement inside the analyzer.
>
> I would like to learn more thoughts about this!
>
> Thanks,
>
> Jian
>
> On 5/31/05, Tansley, Robert <robert.tansley@hp.com> wrote:
>
>> Hi all,
>>
>> The DSpace (www.dspace.org) currently uses Lucene to index metadata
>> (Dublin Core standard) and extracted full-text content of documents
>> stored in it.  Now the system is being used globally, it needs to
>> support multi-language indexing.
>>
>> I've looked through the mailing list archives etc. and it seems it's
>> easy to plug in analyzers for different languages.
>>
>> What if we're trying to index multiple languages in the same
>> site?  Is
>> it best to have:
>>
>> 1/ one index for all languages
>> 2/ one index for all languages, with an extra language field so
>> searches
>> can be constrained to a particular language
>> 3/ separate indices for each language?
>>
>> I don't fully understand the consequences in terms of performance for
>> 1/, but I can see that false hits could turn up where one word
>> appears
>> in different languages (stemming could increase the changes of this).
>> Also some languages' analyzers are quite dramatically different (e.g.
>> the Chinese one which just treats every character as a separate
>> token/word).
>>
>> On the other hand, if people are searching for proper nouns in
>> metadata
>> (e.g. "DSpace") it may be advantageous to search all languages at
>> once.
>>
>>
>> I'm also not sure of the storage and performance consequences of 2/.
>>
>> Approach 3/ seems like it might be the most complex from an
>> implementation/code point of view.
>>
>> Does anyone have any thoughts or recommendations on this?
>>
>> Many thanks,
>>
>>  Robert Tansley / Digital Media Systems Programme / HP Labs
>>   http://www.hpl.hp.com/personal/Robert_Tansley/
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 08:42:50 2005
Return-Path: <java-user-return-14713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10501 invoked from network); 3 Jun 2005 08:42:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 08:42:50 -0000
Received: (qmail 64651 invoked by uid 500); 3 Jun 2005 08:42:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64335 invoked by uid 500); 3 Jun 2005 08:42:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64315 invoked by uid 99); 3 Jun 2005 08:42:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from fmailm1.svr.pol.co.uk (HELO fmailm1.svr.pol.co.uk) (195.92.193.217)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 01:42:38 -0700
Received: from [195.92.195.172] (helo=cmailg2.svr.pol.co.uk)
	by fmailm1.svr.pol.co.uk with esmtp (Exim 4.41)
	id 1De7kv-0005TQ-R5
	for java-user@lucene.apache.org; Fri, 03 Jun 2005 09:42:17 +0100
Received: from user-1221.l4.c1.dsl.pol.co.uk ([81.77.228.197] helo=[192.168.1.2])
	by cmailg2.svr.pol.co.uk with esmtp (Exim 4.41)
	id 1De7iz-00070s-8E
	for java-user@lucene.apache.org; Fri, 03 Jun 2005 09:40:17 +0100
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Re: Indexing multiple languages
Date: Fri, 3 Jun 2005 09:41:12 +0000
User-Agent: KMail/1.8.1
References: <27DC6F1B1943DE42A2BBC21BEC8974DB7D1B45@POSTAL.corp.dynix.com>
In-Reply-To: <27DC6F1B1943DE42A2BBC21BEC8974DB7D1B45@POSTAL.corp.dynix.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506030941.12800.mail@andy-roberts.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 03 Jun 2005 01:06, Bob Cheung wrote:
> For the StandardAnalyzer, will it have to be modified to accept
> different character encodings.
>
> We have customers in China, Taiwan and Hong Kong.  Chinese data may come
> in 3 different encoding:  Big5, GB and UTF8.
>
> What is the default encoding for the StandardAnalyser.

The analysers themselves do not worry about encodings, per se. Java uses 
Unicode strings throughout, which is adequate enough to describing all 
languages.  When reading in text files, it's a matter of letting the reader 
know which encoding the file is in, this helps Java to read in the text, and 
essentially map that encoding to the Unicode encoding. All the string 
operations, like analysing are done on these Unicode strings.

So, the task is making sure the file reader you use to open a document for 
indexing is given the required information for correctly decoding your file. 
If you don't specify, Java will use one based on the locale that your OS 
uses. For me, that's Latin1 as I'm in Britain. This clearly is inadequate for 
non-Latin texts and wouldn't be able to read in Chinese texts properly as the 
Latin1 encoding doesn't support such characters. You need to specify Big5 
yourself. Read the info on InputStreamReaders:

http://java.sun.com/j2se/1.5.0/docs/api/java/io/InputStreamReader.html

Andy

>
> Btw, I did try running the lucene demo (web template) to index the HTML
> files after I added one including English and Chinese characters.  I was
> not able to search for any Chinese in that HTML file (returned no hits).
> I wonder whether I need to change some of the java programs to index
> Chinese and/or accept Chinese as search term.  I was able to search for
> the HTML file if I used English word that appeared in the added HTML
> file.
>
> Thanks,
>
> Bob
>
>
> On May 31, 2005, Erik wrote:
>
> Jian - have you tried Lucene's StandardAnalyzer with Chinese?  It
> will keep English as-is (removing stop words, lowercasing, and such)
> and separate CJK characters into separate tokens also.
>
>      Erik
>
> On May 31, 2005, at 5:49 PM, jian chen wrote:
> > Hi,
> >
> > Interesting topic. I thought about this as well. I wanted to index
> > Chinese text with English, i.e., I want to treat the English text
> > inside Chinese text as English tokens rather than Chinese text tokens.
> >
> > Right now I think maybe I have to write a special analyzer that takes
> > the text input, and detect if the character is an ASCII char, if it
> > is, assembly them together and make it as a token, if not, then, make
> > it as a Chinese word token.
> >
> > So, bottom line is, just one analyzer for all the text and do the
> > if/else statement inside the analyzer.
> >
> > I would like to learn more thoughts about this!
> >
> > Thanks,
> >
> > Jian
> >
> > On 5/31/05, Tansley, Robert <robert.tansley@hp.com> wrote:
> >> Hi all,
> >>
> >> The DSpace (www.dspace.org) currently uses Lucene to index metadata
> >> (Dublin Core standard) and extracted full-text content of documents
> >> stored in it.  Now the system is being used globally, it needs to
> >> support multi-language indexing.
> >>
> >> I've looked through the mailing list archives etc. and it seems it's
> >> easy to plug in analyzers for different languages.
> >>
> >> What if we're trying to index multiple languages in the same
> >> site?  Is
> >> it best to have:
> >>
> >> 1/ one index for all languages
> >> 2/ one index for all languages, with an extra language field so
> >> searches
> >> can be constrained to a particular language
> >> 3/ separate indices for each language?
> >>
> >> I don't fully understand the consequences in terms of performance for
> >> 1/, but I can see that false hits could turn up where one word
> >> appears
> >> in different languages (stemming could increase the changes of this).
> >> Also some languages' analyzers are quite dramatically different (e.g.
> >> the Chinese one which just treats every character as a separate
> >> token/word).
> >>
> >> On the other hand, if people are searching for proper nouns in
> >> metadata
> >> (e.g. "DSpace") it may be advantageous to search all languages at
> >> once.
> >>
> >>
> >> I'm also not sure of the storage and performance consequences of 2/.
> >>
> >> Approach 3/ seems like it might be the most complex from an
> >> implementation/code point of view.
> >>
> >> Does anyone have any thoughts or recommendations on this?
> >>
> >> Many thanks,
> >>
> >>  Robert Tansley / Digital Media Systems Programme / HP Labs
> >>   http://www.hpl.hp.com/personal/Robert_Tansley/
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 09:13:50 2005
Return-Path: <java-user-return-14714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21346 invoked from network); 3 Jun 2005 09:13:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 09:13:50 -0000
Received: (qmail 37558 invoked by uid 500); 3 Jun 2005 09:13:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37320 invoked by uid 500); 3 Jun 2005 09:13:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37307 invoked by uid 99); 3 Jun 2005 09:13:44 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from panacea.is.nl (HELO panacea.is.nl) (213.133.34.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 02:13:42 -0700
Received: from hai01.hippo.local ([213.133.51.241]) by panacea.is.nl with Microsoft SMTPSVC(5.0.2195.4905);
	 Fri, 3 Jun 2005 11:12:31 +0200
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
Subject: RE: calculate wi = tfi * IDFi for each document.
Date: Fri, 3 Jun 2005 11:13:30 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C41A7AC@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: calculate wi = tfi * IDFi for each document.
Thread-Index: AcVnqFZ5ja5dcI0CRhGCDFmrhjjv0gAb9Icg
From: "Max Pfingsthorn" <m.pfingsthorn@hippo.nl>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Jun 2005 09:12:31.0175 (UTC) FILETIME=[5EFA1D70:01C5681C]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

when IndexSearcher.search gives you a Hits object back, all results are =
already sorted by their score, which is computed internally using the =
Similarity. You can access it via Hits.score(n) (see =
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Hits.html=
). This is also shown in the demo in org.apache.lucene.demo.SearchFiles =
from SVN. (see =
http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/demo/org/apache/l=
ucene/demo/SearchFiles.java?rev=3D150739&view=3Dmarkup).

Hope that helps.
max


-----Original Message-----
From: Andrew Boyd [mailto:andrew.boyd@mindspring.com]
Sent: Thursday, June 02, 2005 21:22
To: java-user@lucene.apache.org
Subject: RE: calculate wi =3D tfi * IDFi for each document.


Ok.  So if I get 10 Documents back from a search and I want to get the =
top 5 weighted terms for each of the 10 documents what API call should I =
use?  I'm unable to find the connection between Similarity and a =
Document.

I know I'm missing the elephant that must be in the middle of the room.  =
Or maybe it's not there.
Is what I'm trying to do do-able?

Thanks,

Andrew

-----Original Message-----
From: Max Pfingsthorn <m.pfingsthorn@hippo.nl>
Sent: Jun 2, 2005 5:33 AM
To: java-user@lucene.apache.org
Subject: RE: calculate wi =3D tfi * IDFi for each document.

Hi,

DefaultSimilarity uses exactly this weighting scheme. Makes sense since =
it's a pretty standard relevance measure...

Bye!
max

-----Original Message-----
From: Andrew Boyd [mailto:andrew.boyd@mindspring.com]
Sent: Thursday, June 02, 2005 11:39
To: java-user@lucene.apache.org
Subject: calculate wi =3D tfi * IDFi for each document.


If I have search results how can I calculate, using lucene's API,  wi =
=3D tfi * IDFi for each document.

wi    =3D term weight
tfi    =3D term frequency in a document
IDFi =3D inverse document frequency =3D log(D/dfi)
dfi   =3D document frequency or number of documents containing term i
D    =3D number of documents in my search result

Thanks,

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 09:30:08 2005
Return-Path: <java-user-return-14715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29713 invoked from network); 3 Jun 2005 09:30:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 09:30:08 -0000
Received: (qmail 75696 invoked by uid 500); 3 Jun 2005 09:30:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75672 invoked by uid 500); 3 Jun 2005 09:30:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75649 invoked by uid 99); 3 Jun 2005 09:30:01 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of markus.wiederkehr@gmail.com designates 64.233.184.204 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 02:29:59 -0700
Received: by wproxy.gmail.com with SMTP id 50so1473233wri
        for <java-user@lucene.apache.org>; Fri, 03 Jun 2005 02:29:48 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=VaKAVKHGy3WLRqZMehPB5tGhpyUldn6Fi9qHdTb38PBsAUwoWZ5RpBAchxOuMAyiQhUcioPyqZyMF+rDHGmvFo1rfkdLgUK8yMtSRLE1zvDNqlRInQjK86JIgu6UQA8kiQ8KeN/Kl6YhZyVfZ10Rka3sIlAk3eNtAMbG1CUsZlc=
Received: by 10.54.32.48 with SMTP id f48mr1020941wrf;
        Fri, 03 Jun 2005 02:29:21 -0700 (PDT)
Received: by 10.54.51.73 with HTTP; Fri, 3 Jun 2005 02:29:19 -0700 (PDT)
Message-ID: <a9257396050603022975ce13ee@mail.gmail.com>
Date: Fri, 3 Jun 2005 11:29:19 +0200
From: Markus Wiederkehr <markus.wiederkehr@gmail.com>
Reply-To: Markus Wiederkehr <markus.wiederkehr@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: managing docids for ParallelReader (was Augmenting an existing index)
In-Reply-To: <429CAAEF.4090306@apache.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <FBA9F803D33470489B9B4676A6B09F0B014AE879@mt-exch1.montreal.speechworks.com>
	 <20050530202052.GN915@amok.local>
	 <10D0C917-EB85-4C06-A450-EE28786F454C@cenqua.com>
	 <429CAAEF.4090306@apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 5/31/05, Doug Cutting <cutting@apache.org> wrote:
> > I have wondered about this as well. Are there any *sure fire* ways of
> > creating (and updating) two indices so that doc numbers in one index
> > deliberately correspond to doc numbers in the other index?
>=20
> If you add the documents in the same order to both indexes and perform
> the same deletions on both indexes then they'll have the same numbers.

Would it be possible to write an IndexReader that combines two indexes
by a common field, for example a document ID? And how performant would
such an implementation be?

Markus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 09:49:31 2005
Return-Path: <java-user-return-14716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37447 invoked from network); 3 Jun 2005 09:49:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 09:49:31 -0000
Received: (qmail 20492 invoked by uid 500); 3 Jun 2005 09:49:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20470 invoked by uid 500); 3 Jun 2005 09:49:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20456 invoked by uid 99); 3 Jun 2005 09:49:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 02:49:19 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0AD8513E2007; Fri,  3 Jun 2005 05:17:32 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 9379513E200A
	for <java-user@lucene.apache.org>; Fri,  3 Jun 2005 05:17:01 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <Pine.LNX.4.58.0506021755110.20866@hal.rescomp.berkeley.edu>
References: <s29f1a8f.096@loc.gov> <Pine.LNX.4.58.0506021755110.20866@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <58859657-FE93-43FA-9428-EC982E954F7B@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Indexing and Hit Highlighting OCR Data
Date: Fri, 3 Jun 2005 05:16:59 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.1 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 2, 2005, at 9:02 PM, Chris Hostetter wrote:
> This is a pretty interesting problem.  I envy you.
>
> I would avoid the existing highlighter for your purposes --  
> highlighting
> in token space is a very differnet problem from "highlihgting" in 2D
> space.
>
> based on the XML sample you provided, it looks like your XML files
> are allready a "tokenized" form of the orriginal OCR data -- by  
> which i
> mean the page has allready been tokenized into words who position is
> recorded.
>
> I would parse these XML docs to generate two things:
>     1) a stream of words for analysis/filtering (ie: stop words,  
> stemming,
>        synonyms)
>     2) a datastructure mapping words to lists of positions (ie: if the
>        same word apears in multiple places, list the word once,  
> followed
>        by each set of coordinates)
>
> use #1 in the usual way, and add a serialized form of #2 to your  
> index as
> a Stored Keyword -- at query time, the words from your initial  
> query can
> be looked up in that data strucutre to find the regions to "highlight"

Chris - that is great recommendation.  I second it.  The only minor  
thing I'll add is that you probably should use an unindexed field for  
#2 rather than literally a Field.Keyword - no point in indexing it as  
you would never search on that data structure.

     Erik

>
>
>
> : I am involved in a project which is trying to provide searching  
> and hit highlighting on the scanned image of historical  
> newspapers.  We have an XML based OCR format.  A sample is below.   
> We need to index the CONTENT attribute of the String element which  
> is the easy part.  We would like to be able find the "hits" within  
> this XML document in order to use the positioning information to  
> draw the highlight boxes on the image.  It doesn't make a lot of  
> sense to just extract the CONTENT and index that because we loose  
> the positioning information.  My second thought was to make a  
> custom analyzer which dropped everything except for the content  
> element and then used the highlighting class in the sandbox to  
> reanalyze the XML document and mark the hits.  With the marked hits  
> in the XML we could find the position information and draw on the  
> image.  Has anyone else worked with OCR information and lucene.   
> What was your approach?  Does this approach seem sound?  Any  
> recommendations?
> :
> : Thanks, Corey
> :
> :      <TextLine HEIGHT="2307.0" WIDTH="2284.0" HPOS="1316.0"  
> VPOS="123644.0">
> :       <String STYLEREFS="ID4" HEIGHT="1922.0" WIDTH="244.0"  
> HPOS="1316.0" VPOS="123644.0" CONTENT="The" WC="1.0"/>
> :       <SP WIDTH="-244.0" HPOS="1560.0" VPOS="123644.0"/>
> :       <String STYLEREFS="ID4" HEIGHT="1914.0" WIDTH="424.0"  
> HPOS="1664.0" VPOS="123711.0" CONTENT="female" WC="1.0"/>
> :       <SP WIDTH="184.0" HPOS="1480.0" VPOS="123644.0"/>
> :       <String STYLEREFS="ID4" HEIGHT="2174.0" WIDTH="240.0"  
> HPOS="2192.0" VPOS="123711.0" CONTENT="lays" WC="1.0"/>
> :       <SP WIDTH="104.0" HPOS="2088.0" VPOS="123711.0"/>
> :       <String STYLEREFS="ID4" HEIGHT="1981.0" WIDTH="360.0"  
> HPOS="2528.0" VPOS="123711.0" CONTENT="about" WC="1.0"/>
> :       <SP WIDTH="236.0" HPOS="2292.0" VPOS="123711.0"/>
> :       <String STYLEREFS="ID4" HEIGHT="1855.0" WIDTH="216.0"  
> HPOS="3000.0" VPOS="123770.0" CONTENT="140" WC="1.0"/>
> :       <SP WIDTH="112.0" HPOS="2888.0" VPOS="123711.0"/>
> :       <String STYLEREFS="ID4" HEIGHT="1729.0" WIDTH="284.0"  
> HPOS="3316.0" VPOS="124223.0" CONTENT="eggs" WC="1.0"/>
> :       <SP WIDTH="100.0" HPOS="3216.0" VPOS="123770.0"/>
> :      </TextLine>
> :
> :
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 10:04:11 2005
Return-Path: <java-user-return-14717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41929 invoked from network); 3 Jun 2005 10:04:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 10:04:11 -0000
Received: (qmail 52986 invoked by uid 500); 3 Jun 2005 10:04:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52950 invoked by uid 500); 3 Jun 2005 10:04:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52937 invoked by uid 99); 3 Jun 2005 10:04:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 03:04:03 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2B08C13E2008; Fri,  3 Jun 2005 06:03:47 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id D5FB413E2007
	for <java-user@lucene.apache.org>; Fri,  3 Jun 2005 06:03:33 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <27DC6F1B1943DE42A2BBC21BEC8974DB7D1B45@POSTAL.corp.dynix.com>
References: <27DC6F1B1943DE42A2BBC21BEC8974DB7D1B45@POSTAL.corp.dynix.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7FA87315-305D-475F-8CC2-6EEA7B85930E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Indexing multiple languages
Date: Fri, 3 Jun 2005 06:03:31 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.1 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 2, 2005, at 9:06 PM, Bob Cheung wrote:
> Btw, I did try running the lucene demo (web template) to index the  
> HTML
> files after I added one including English and Chinese characters.   
> I was
> not able to search for any Chinese in that HTML file (returned no  
> hits).
> I wonder whether I need to change some of the java programs to index
> Chinese and/or accept Chinese as search term.  I was able to search  
> for
> the HTML file if I used English word that appeared in the added HTML
> file.

Bob - Andy provided thorough information on the StandardAnalyzer  
issue (in short, it deals with Unicode directly not encodings).  As  
for the Lucene demo - you will have to adjust it to read the files in  
the proper encoding.  The IndexFiles program indexes files using the  
default encoding which won't be sufficient for your purpose.  The two  
files to check are HtmlDocument and FileDocument.  These files read  
the HTML and text files that the demo indexes.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 11:53:01 2005
Return-Path: <java-user-return-14718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75533 invoked from network); 3 Jun 2005 11:53:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 11:53:01 -0000
Received: (qmail 78514 invoked by uid 500); 3 Jun 2005 11:52:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78484 invoked by uid 500); 3 Jun 2005 11:52:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78471 invoked by uid 99); 3 Jun 2005 11:52:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from gwia201.syr.edu (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 04:52:48 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Fri, 03 Jun 2005 07:52:15 -0400
Message-Id: <s2a00c2f.037@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.5.1 
Date: Fri, 03 Jun 2005 07:51:58 -0400
From: "Grant Ingersoll" <GSIngers@syr.edu>
To: <java-user@lucene.apache.org>
Subject: RE: calculate wi = tfi * IDFi for each document.
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think the TermFreqVector (reader.getTermVector) has the info you want
per document.  You will need to sort it by frequency to get the top
terms in each document.  It doesn't give you the wi, just tfi, but the
whole score is implied by the fact that you have the top 10 documents, I
think.

-Grant

>>> andrew.boyd@mindspring.com 6/2/2005 3:21:35 PM >>>
Ok.  So if I get 10 Documents back from a search and I want to get the
top 5 weighted terms for each of the 10 documents what API call should I
use?  I'm unable to find the connection between Similarity and a
Document.

I know I'm missing the elephant that must be in the middle of the room.
 Or maybe it's not there.
Is what I'm trying to do do-able?

Thanks,

Andrew

-----Original Message-----
From: Max Pfingsthorn <m.pfingsthorn@hippo.nl>
Sent: Jun 2, 2005 5:33 AM
To: java-user@lucene.apache.org 
Subject: RE: calculate wi = tfi * IDFi for each document.

Hi,

DefaultSimilarity uses exactly this weighting scheme. Makes sense since
it's a pretty standard relevance measure...

Bye!
max

-----Original Message-----
From: Andrew Boyd [mailto:andrew.boyd@mindspring.com] 
Sent: Thursday, June 02, 2005 11:39
To: java-user@lucene.apache.org 
Subject: calculate wi = tfi * IDFi for each document.


If I have search results how can I calculate, using lucene's API,  wi =
tfi * IDFi for each document.

wi    = term weight
tfi    = term frequency in a document
IDFi = inverse document frequency = log(D/dfi)
dfi   = document frequency or number of documents containing term i
D    = number of documents in my search result

Thanks,

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
For additional commands, e-mail: java-user-help@lucene.apache.org 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 11:59:03 2005
Return-Path: <java-user-return-14719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77230 invoked from network); 3 Jun 2005 11:59:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 11:59:03 -0000
Received: (qmail 93682 invoked by uid 500); 3 Jun 2005 11:58:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93662 invoked by uid 500); 3 Jun 2005 11:58:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93638 invoked by uid 99); 3 Jun 2005 11:58:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from gwia201.syr.edu (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 04:58:54 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Fri, 03 Jun 2005 07:58:44 -0400
Message-Id: <s2a00db4.014@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.5.1 
Date: Fri, 03 Jun 2005 07:58:37 -0400
From: "Grant Ingersoll" <GSIngers@syr.edu>
To: <java-user@lucene.apache.org>
Subject: Re: Indexing multiple languages
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

http://wiki.apache.org/jakarta-lucene/IndexingOtherLanguages

>>> erik@ehatchersolutions.com 6/3/2005 6:03:31 AM >>>

On Jun 2, 2005, at 9:06 PM, Bob Cheung wrote:
> Btw, I did try running the lucene demo (web template) to index the  
> HTML
> files after I added one including English and Chinese characters.   
> I was
> not able to search for any Chinese in that HTML file (returned no  
> hits).
> I wonder whether I need to change some of the java programs to index
> Chinese and/or accept Chinese as search term.  I was able to search 

> for
> the HTML file if I used English word that appeared in the added HTML
> file.

Bob - Andy provided thorough information on the StandardAnalyzer  
issue (in short, it deals with Unicode directly not encodings).  As  
for the Lucene demo - you will have to adjust it to read the files in 

the proper encoding.  The IndexFiles program indexes files using the  
default encoding which won't be sufficient for your purpose.  The two 

files to check are HtmlDocument and FileDocument.  These files read  
the HTML and text files that the demo indexes.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 12:00:11 2005
Return-Path: <java-user-return-14720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77633 invoked from network); 3 Jun 2005 12:00:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 12:00:11 -0000
Received: (qmail 96288 invoked by uid 500); 3 Jun 2005 12:00:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96266 invoked by uid 500); 3 Jun 2005 12:00:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96253 invoked by uid 99); 3 Jun 2005 12:00:03 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from pop06.mail.atl.earthlink.net (HELO pop06.mail.atl.earthlink.net) (207.69.200.40)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 04:59:59 -0700
Received: from wamui-cedar.atl.sa.earthlink.net ([209.86.224.29])
	by pop06.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1DeAq0-0000Hc-00
	for java-user@lucene.apache.org; Fri, 03 Jun 2005 07:59:44 -0400
Message-ID: <20473442.1117799984335.JavaMail.root@wamui-cedar.atl.sa.earthlink.net>
Date: Fri, 3 Jun 2005 06:59:44 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: RE: calculate wi = tfi * IDFi for each document.
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for bearing with me Max.  

I do understand that the hits come back sorted by decending score after their Similarity has been computed relative to the query vector.  What I was hoping to do was use the built in fuctionality of lucene to calculate some term weights specifically wi = ti * IDFi.

Assuming I had Hits I was <b>hoping</b> to do something like this:

for(int idx = 0; idx < hits.lingth(); idx++){
   int id = hits.id(idx);

   TermFreqVector[] termFreqVec = indexReader.getTermFreqVectors(id);

   // Using the termFreqVec calculate the wi for each term in that document.
   for(termFreqVec){
       TermWeight wi = Similarity.wi(termFreqVec[],  termFreqVec.length); 

       ...
   }

}

Andrew


-----Original Message-----
From: Max Pfingsthorn <m.pfingsthorn@hippo.nl>
Sent: Jun 3, 2005 4:13 AM
To: java-user@lucene.apache.org
Subject: RE: calculate wi = tfi * IDFi for each document.

Hi,

when IndexSearcher.search gives you a Hits object back, all results are already sorted by their score, which is computed internally using the Similarity. You can access it via Hits.score(n) (see http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Hits.html). This is also shown in the demo in org.apache.lucene.demo.SearchFiles from SVN. (see http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/demo/org/apache/lucene/demo/SearchFiles.java?rev=150739&view=markup).

Hope that helps.
max


-----Original Message-----
From: Andrew Boyd [mailto:andrew.boyd@mindspring.com]
Sent: Thursday, June 02, 2005 21:22
To: java-user@lucene.apache.org
Subject: RE: calculate wi = tfi * IDFi for each document.


Ok.  So if I get 10 Documents back from a search and I want to get the top 5 weighted terms for each of the 10 documents what API call should I use?  I'm unable to find the connection between Similarity and a Document.

I know I'm missing the elephant that must be in the middle of the room.  Or maybe it's not there.
Is what I'm trying to do do-able?

Thanks,

Andrew

-----Original Message-----
From: Max Pfingsthorn <m.pfingsthorn@hippo.nl>
Sent: Jun 2, 2005 5:33 AM
To: java-user@lucene.apache.org
Subject: RE: calculate wi = tfi * IDFi for each document.

Hi,

DefaultSimilarity uses exactly this weighting scheme. Makes sense since it's a pretty standard relevance measure...

Bye!
max

-----Original Message-----
From: Andrew Boyd [mailto:andrew.boyd@mindspring.com]
Sent: Thursday, June 02, 2005 11:39
To: java-user@lucene.apache.org
Subject: calculate wi = tfi * IDFi for each document.


If I have search results how can I calculate, using lucene's API,  wi = tfi * IDFi for each document.

wi    = term weight
tfi    = term frequency in a document
IDFi = inverse document frequency = log(D/dfi)
dfi   = document frequency or number of documents containing term i
D    = number of documents in my search result

Thanks,

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



Andrew Boyd
Software Architect
Sun Certified J2EE Architect
B&B Technical Services Inc.
205.422.2557

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 12:19:37 2005
Return-Path: <java-user-return-14721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85644 invoked from network); 3 Jun 2005 12:19:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 12:19:37 -0000
Received: (qmail 33857 invoked by uid 500); 3 Jun 2005 12:19:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33832 invoked by uid 500); 3 Jun 2005 12:19:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33796 invoked by uid 99); 3 Jun 2005 12:19:29 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from pop06.mail.atl.earthlink.net (HELO pop06.mail.atl.earthlink.net) (207.69.200.40)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 05:19:28 -0700
Received: from wamui-cedar.atl.sa.earthlink.net ([209.86.224.29])
	by pop06.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1DeB8v-0004mV-00
	for java-user@lucene.apache.org; Fri, 03 Jun 2005 08:19:17 -0400
Message-ID: <8447007.1117801157230.JavaMail.root@wamui-cedar.atl.sa.earthlink.net>
Date: Fri, 3 Jun 2005 07:19:16 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: RE: calculate wi = tfi * IDFi for each document.
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the reply.  It looks like I can use parts of Similarity.

I'll post back once I get it working or at least closer ;-)

Andrew

-----Original Message-----
From: Grant Ingersoll <GSIngers@syr.edu>
Sent: Jun 3, 2005 6:51 AM
To: java-user@lucene.apache.org
Subject: RE: calculate wi = tfi * IDFi for each document.

I think the TermFreqVector (reader.getTermVector) has the info you want
per document.  You will need to sort it by frequency to get the top
terms in each document.  It doesn't give you the wi, just tfi, but the
whole score is implied by the fact that you have the top 10 documents, I
think.

-Grant

>>> andrew.boyd@mindspring.com 6/2/2005 3:21:35 PM >>>
Ok.  So if I get 10 Documents back from a search and I want to get the
top 5 weighted terms for each of the 10 documents what API call should I
use?  I'm unable to find the connection between Similarity and a
Document.

I know I'm missing the elephant that must be in the middle of the room.
 Or maybe it's not there.
Is what I'm trying to do do-able?

Thanks,

Andrew

-----Original Message-----
From: Max Pfingsthorn <m.pfingsthorn@hippo.nl>
Sent: Jun 2, 2005 5:33 AM
To: java-user@lucene.apache.org 
Subject: RE: calculate wi = tfi * IDFi for each document.

Hi,

DefaultSimilarity uses exactly this weighting scheme. Makes sense since
it's a pretty standard relevance measure...

Bye!
max

-----Original Message-----
From: Andrew Boyd [mailto:andrew.boyd@mindspring.com] 
Sent: Thursday, June 02, 2005 11:39
To: java-user@lucene.apache.org 
Subject: calculate wi = tfi * IDFi for each document.


If I have search results how can I calculate, using lucene's API,  wi =
tfi * IDFi for each document.

wi    = term weight
tfi    = term frequency in a document
IDFi = inverse document frequency = log(D/dfi)
dfi   = document frequency or number of documents containing term i
D    = number of documents in my search result

Thanks,

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
For additional commands, e-mail: java-user-help@lucene.apache.org 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



Andrew Boyd
Software Architect
Sun Certified J2EE Architect
B&B Technical Services Inc.
205.422.2557

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 12:46:53 2005
Return-Path: <java-user-return-14722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93555 invoked from network); 3 Jun 2005 12:46:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 12:46:53 -0000
Received: (qmail 91169 invoked by uid 500); 3 Jun 2005 12:46:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91145 invoked by uid 500); 3 Jun 2005 12:46:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91124 invoked by uid 99); 3 Jun 2005 12:46:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ntgwgate.loc.gov (HELO loc.gov) (140.147.137.18)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 05:46:41 -0700
Received: from LCHub-MTA by loc.gov
	with Novell_GroupWise; Fri, 03 Jun 2005 08:52:28 -0400
Message-Id: <s2a01a4c.006@loc.gov>
X-Mailer: Novell GroupWise Internet Agent 6.5.4 
Date: Fri, 03 Jun 2005 08:50:26 -0400
From: "Corey Keith" <ckeith@loc.gov>
To: <java-user@lucene.apache.org>
Subject: Re: Indexing and Hit Highlighting OCR Data
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

With this approach all work is done at the word level.  When we have a =
phrase query the results will contain pages with the entire phrase but =
when we go to highlight the document _all_ words in the phrase regardless =
of being in the phrase will be highlighted.  Is that correct?  It would =
also be difficult to get the best fragment in a similar way to the current =
highlighter? =20

>>> hossman_lucene@fucit.org 06/02/05 9:02 PM >>>

This is a pretty interesting problem.  I envy you.

I would avoid the existing highlighter for your purposes -- highlighting
in token space is a very differnet problem from "highlihgting" in 2D
space.

based on the XML sample you provided, it looks like your XML files
are allready a "tokenized" form of the orriginal OCR data -- by which i
mean the page has allready been tokenized into words who position is
recorded.

I would parse these XML docs to generate two things:
    1) a stream of words for analysis/filtering (ie: stop words, stemming,
       synonyms)
    2) a datastructure mapping words to lists of positions (ie: if the
       same word apears in multiple places, list the word once, followed
       by each set of coordinates)

use #1 in the usual way, and add a serialized form of #2 to your index as
a Stored Keyword -- at query time, the words from your initial query can
be looked up in that data strucutre to find the regions to "highlight"



: I am involved in a project which is trying to provide searching and hit =
highlighting on the scanned image of historical newspapers.  We have an =
XML based OCR format.  A sample is below.  We need to index the CONTENT =
attribute of the String element which is the easy part.  We would like to =
be able find the "hits" within this XML document in order to use the =
positioning information to draw the highlight boxes on the image.  It =
doesn't make a lot of sense to just extract the CONTENT and index that =
because we loose the positioning information.  My second thought was to =
make a custom analyzer which dropped everything except for the content =
element and then used the highlighting class in the sandbox to reanalyze =
the XML document and mark the hits.  With the marked hits in the XML we =
could find the position information and draw on the image.  Has anyone =
else worked with OCR information and lucene.  What was your approach?  =
Does this approach seem sound?  Any recommendations?
:
: Thanks, Corey
:
:      <TextLine HEIGHT=3D"2307.0" WIDTH=3D"2284.0" HPOS=3D"1316.0" =
VPOS=3D"123644.0">
:       <String STYLEREFS=3D"ID4" HEIGHT=3D"1922.0" WIDTH=3D"244.0" =
HPOS=3D"1316.0" VPOS=3D"123644.0" CONTENT=3D"The" WC=3D"1.0"/>
:       <SP WIDTH=3D"-244.0" HPOS=3D"1560.0" VPOS=3D"123644.0"/>
:       <String STYLEREFS=3D"ID4" HEIGHT=3D"1914.0" WIDTH=3D"424.0" =
HPOS=3D"1664.0" VPOS=3D"123711.0" CONTENT=3D"female" WC=3D"1.0"/>
:       <SP WIDTH=3D"184.0" HPOS=3D"1480.0" VPOS=3D"123644.0"/>
:       <String STYLEREFS=3D"ID4" HEIGHT=3D"2174.0" WIDTH=3D"240.0" =
HPOS=3D"2192.0" VPOS=3D"123711.0" CONTENT=3D"lays" WC=3D"1.0"/>
:       <SP WIDTH=3D"104.0" HPOS=3D"2088.0" VPOS=3D"123711.0"/>
:       <String STYLEREFS=3D"ID4" HEIGHT=3D"1981.0" WIDTH=3D"360.0" =
HPOS=3D"2528.0" VPOS=3D"123711.0" CONTENT=3D"about" WC=3D"1.0"/>
:       <SP WIDTH=3D"236.0" HPOS=3D"2292.0" VPOS=3D"123711.0"/>
:       <String STYLEREFS=3D"ID4" HEIGHT=3D"1855.0" WIDTH=3D"216.0" =
HPOS=3D"3000.0" VPOS=3D"123770.0" CONTENT=3D"140" WC=3D"1.0"/>
:       <SP WIDTH=3D"112.0" HPOS=3D"2888.0" VPOS=3D"123711.0"/>
:       <String STYLEREFS=3D"ID4" HEIGHT=3D"1729.0" WIDTH=3D"284.0" =
HPOS=3D"3316.0" VPOS=3D"124223.0" CONTENT=3D"eggs" WC=3D"1.0"/>
:       <SP WIDTH=3D"100.0" HPOS=3D"3216.0" VPOS=3D"123770.0"/>
:      </TextLine>
:
:
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 12:51:20 2005
Return-Path: <java-user-return-14723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94388 invoked from network); 3 Jun 2005 12:51:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 12:51:20 -0000
Received: (qmail 6033 invoked by uid 500); 3 Jun 2005 12:51:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5994 invoked by uid 500); 3 Jun 2005 12:51:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5979 invoked by uid 99); 3 Jun 2005 12:51:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of richard.krenek@gmail.com designates 64.233.184.198 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 05:51:08 -0700
Received: by wproxy.gmail.com with SMTP id 50so1548616wri
        for <java-user@lucene.apache.org>; Fri, 03 Jun 2005 05:50:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IVboD6uRjjz5LwSM/Q7loJgEJ1gm8LstjBDmOlBcV4yBIgJuYuZehsP8oWkiyZ92rXfoVd1C5KMFsC9v/ZJFReHbISGgDOr9N4/XTpEs86Pa6IHwsc5Bpb0ZYWj6pY8hXFws6tkIHUcIRw83tVCPXwmlFH/EdG+gJ1OtrvEWAWs=
Received: by 10.54.23.26 with SMTP id 26mr1100926wrw;
        Fri, 03 Jun 2005 05:50:07 -0700 (PDT)
Received: by 10.54.72.5 with HTTP; Fri, 3 Jun 2005 05:50:06 -0700 (PDT)
Message-ID: <4ef6647e050603055042d8720f@mail.gmail.com>
Date: Fri, 3 Jun 2005 06:50:06 -0600
From: Richard Krenek <richard.krenek@gmail.com>
Reply-To: Richard Krenek <richard.krenek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing and Hit Highlighting OCR Data
In-Reply-To: <s29f1a8f.096@loc.gov>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <s29f1a8f.096@loc.gov>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Corey,
  I have one off the wall approach that may or may not work for you.
If you convert your scanned images to PDF then use something like
Acrobat to convert those PDFs into PDFs with hidden text (The OCR
data). You can then tell Acrobat Reader via XML what to highlight when
your user opens the PDF.
  Not sure if that helps you but may give you some alternate ideas.

Richard


On 6/2/05, Corey Keith <ckeith@loc.gov> wrote:
> Hi,
>=20
> I am involved in a project which is trying to provide searching and hit h=
ighlighting on the scanned image of historical newspapers.  We have an XML =
based OCR format.  A sample is below.  We need to index the CONTENT attribu=
te of the String element which is the easy part.  We would like to be able =
find the "hits" within this XML document in order to use the positioning in=
formation to draw the highlight boxes on the image.  It doesn't make a lot =
of sense to just extract the CONTENT and index that because we loose the po=
sitioning information.  My second thought was to make a custom analyzer whi=
ch dropped everything except for the content element and then used the high=
lighting class in the sandbox to reanalyze the XML document and mark the hi=
ts.  With the marked hits in the XML we could find the position information=
 and draw on the image.  Has anyone else worked with OCR information and lu=
cene.  What was your approach?  Does this approach seem sound?  Any recomme=
ndations?
>=20
> Thanks, Corey
>=20
>      <TextLine HEIGHT=3D"2307.0" WIDTH=3D"2284.0" HPOS=3D"1316.0" VPOS=3D=
"123644.0">
>       <String STYLEREFS=3D"ID4" HEIGHT=3D"1922.0" WIDTH=3D"244.0" HPOS=3D=
"1316.0" VPOS=3D"123644.0" CONTENT=3D"The" WC=3D"1.0"/>
>       <SP WIDTH=3D"-244.0" HPOS=3D"1560.0" VPOS=3D"123644.0"/>
>       <String STYLEREFS=3D"ID4" HEIGHT=3D"1914.0" WIDTH=3D"424.0" HPOS=3D=
"1664.0" VPOS=3D"123711.0" CONTENT=3D"female" WC=3D"1.0"/>
>       <SP WIDTH=3D"184.0" HPOS=3D"1480.0" VPOS=3D"123644.0"/>
>       <String STYLEREFS=3D"ID4" HEIGHT=3D"2174.0" WIDTH=3D"240.0" HPOS=3D=
"2192.0" VPOS=3D"123711.0" CONTENT=3D"lays" WC=3D"1.0"/>
>       <SP WIDTH=3D"104.0" HPOS=3D"2088.0" VPOS=3D"123711.0"/>
>       <String STYLEREFS=3D"ID4" HEIGHT=3D"1981.0" WIDTH=3D"360.0" HPOS=3D=
"2528.0" VPOS=3D"123711.0" CONTENT=3D"about" WC=3D"1.0"/>
>       <SP WIDTH=3D"236.0" HPOS=3D"2292.0" VPOS=3D"123711.0"/>
>       <String STYLEREFS=3D"ID4" HEIGHT=3D"1855.0" WIDTH=3D"216.0" HPOS=3D=
"3000.0" VPOS=3D"123770.0" CONTENT=3D"140" WC=3D"1.0"/>
>       <SP WIDTH=3D"112.0" HPOS=3D"2888.0" VPOS=3D"123711.0"/>
>       <String STYLEREFS=3D"ID4" HEIGHT=3D"1729.0" WIDTH=3D"284.0" HPOS=3D=
"3316.0" VPOS=3D"124223.0" CONTENT=3D"eggs" WC=3D"1.0"/>
>       <SP WIDTH=3D"100.0" HPOS=3D"3216.0" VPOS=3D"123770.0"/>
>      </TextLine>
>=20
>=20
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 12:54:44 2005
Return-Path: <java-user-return-14724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95398 invoked from network); 3 Jun 2005 12:54:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 12:54:44 -0000
Received: (qmail 14904 invoked by uid 500); 3 Jun 2005 12:54:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14649 invoked by uid 500); 3 Jun 2005 12:54:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14626 invoked by uid 99); 3 Jun 2005 12:54:37 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 05:54:36 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 76C85E4829
	for <java-user@lucene.apache.org>; Fri,  3 Jun 2005 14:22:42 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 63EC4E47DF
	for <java-user@lucene.apache.org>; Fri,  3 Jun 2005 14:22:42 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <19ADCC0B9D4CAD4582BB9900BBCE3574019450A0@tayexc13.americas.cpqcorp.net>
References: <19ADCC0B9D4CAD4582BB9900BBCE3574019450A0@tayexc13.americas.cpqcorp.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <13d71366e35f29cf1bf7b1eea8eea006@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: Indexing multiple languages
Date: Fri, 3 Jun 2005 14:22:38 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Robert,

Le 2 juin 05, =E0 21:42, Tansley, Robert a =E9crit :
> It seems that there are even more options --
> 4/ One index, with a separate Lucene document for each (item,language)=20=

> combination, with one field that specifies the language
> 5/ One index, one Lucene document per item, with field names that=20
> include the language (e.g. title_en, title_cn)
> I quite like 4, because you can search with no language constraint, or=20=

> with one as Paul suggests below.

You can in both cases. In the second, you need to expand the query (ie=20=

searching for carrot would search text_en:carrot or text_cn:carrot",=20
which, I think is fair as long as you don't a two kilometer's list of=20
languages.

> However, some "non language-specific" data might need to be repeated=20=

> (e.g. dates), unless we had an extra Lucene document for all that.  I=20=

> wonder what the various pros and cons in terms of index size and=20
> performance would be in each case?  I really don't have enough=20
> knowledge of Lucene to have any idea...

If you separate the indices you won't, as far as I know, be able to=20
query simultaneously (e.g. some text which, as well, is new=20
enough....).

paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 13:04:54 2005
Return-Path: <java-user-return-14725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99359 invoked from network); 3 Jun 2005 13:04:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 13:04:54 -0000
Received: (qmail 56216 invoked by uid 500); 3 Jun 2005 13:04:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56193 invoked by uid 500); 3 Jun 2005 13:04:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56179 invoked by uid 99); 3 Jun 2005 13:04:46 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from panacea.is.nl (HELO panacea.is.nl) (213.133.34.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 06:04:43 -0700
Received: from hai01.hippo.local ([213.133.51.241]) by panacea.is.nl with Microsoft SMTPSVC(5.0.2195.4905);
	 Fri, 3 Jun 2005 15:02:01 +0200
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
Subject: RE: calculate wi = tfi * IDFi for each document.
Date: Fri, 3 Jun 2005 15:03:01 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C41A7AE@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: calculate wi = tfi * IDFi for each document.
Thread-Index: AcVoM8kRMZPCMfZlR7u8cYd3EtmE8AAB2JwQ
From: "Max Pfingsthorn" <m.pfingsthorn@hippo.nl>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Jun 2005 13:02:01.0556 (UTC) FILETIME=[6EC38140:01C5683C]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Aha :)

So you want to do blind relevance feedback?
I guess the term vectors will be the way to go then. Otherwise, I don't =
know how to access the terms of a document. And: Are you sure you need =
the TF.IDF weights for each term ]? Maybe it would be enough to just use =
TF for sorting, as that is already present in the term vector. In any =
case, Similarity knows how to compute IDF for a term.

Bye!
max

-----Original Message-----
From: Andrew Boyd [mailto:andrew.boyd@mindspring.com]
Sent: Friday, June 03, 2005 14:00
To: java-user@lucene.apache.org
Subject: RE: calculate wi =3D tfi * IDFi for each document.


Thanks for bearing with me Max. =20

I do understand that the hits come back sorted by decending score after =
their Similarity has been computed relative to the query vector.  What I =
was hoping to do was use the built in fuctionality of lucene to =
calculate some term weights specifically wi =3D ti * IDFi.

Assuming I had Hits I was <b>hoping</b> to do something like this:

for(int idx =3D 0; idx < hits.lingth(); idx++){
   int id =3D hits.id(idx);

   TermFreqVector[] termFreqVec =3D indexReader.getTermFreqVectors(id);

   // Using the termFreqVec calculate the wi for each term in that =
document.
   for(termFreqVec){
       TermWeight wi =3D Similarity.wi(termFreqVec[],  =
termFreqVec.length);=20

       ...
   }

}

Andrew


-----Original Message-----
From: Max Pfingsthorn <m.pfingsthorn@hippo.nl>
Sent: Jun 3, 2005 4:13 AM
To: java-user@lucene.apache.org
Subject: RE: calculate wi =3D tfi * IDFi for each document.

Hi,

when IndexSearcher.search gives you a Hits object back, all results are =
already sorted by their score, which is computed internally using the =
Similarity. You can access it via Hits.score(n) (see =
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Hits.html=
). This is also shown in the demo in org.apache.lucene.demo.SearchFiles =
from SVN. (see =
http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/demo/org/apache/l=
ucene/demo/SearchFiles.java?rev=3D150739&view=3Dmarkup).

Hope that helps.
max


-----Original Message-----
From: Andrew Boyd [mailto:andrew.boyd@mindspring.com]
Sent: Thursday, June 02, 2005 21:22
To: java-user@lucene.apache.org
Subject: RE: calculate wi =3D tfi * IDFi for each document.


Ok.  So if I get 10 Documents back from a search and I want to get the =
top 5 weighted terms for each of the 10 documents what API call should I =
use?  I'm unable to find the connection between Similarity and a =
Document.

I know I'm missing the elephant that must be in the middle of the room.  =
Or maybe it's not there.
Is what I'm trying to do do-able?

Thanks,

Andrew

-----Original Message-----
From: Max Pfingsthorn <m.pfingsthorn@hippo.nl>
Sent: Jun 2, 2005 5:33 AM
To: java-user@lucene.apache.org
Subject: RE: calculate wi =3D tfi * IDFi for each document.

Hi,

DefaultSimilarity uses exactly this weighting scheme. Makes sense since =
it's a pretty standard relevance measure...

Bye!
max

-----Original Message-----
From: Andrew Boyd [mailto:andrew.boyd@mindspring.com]
Sent: Thursday, June 02, 2005 11:39
To: java-user@lucene.apache.org
Subject: calculate wi =3D tfi * IDFi for each document.


If I have search results how can I calculate, using lucene's API,  wi =
=3D tfi * IDFi for each document.

wi    =3D term weight
tfi    =3D term frequency in a document
IDFi =3D inverse document frequency =3D log(D/dfi)
dfi   =3D document frequency or number of documents containing term i
D    =3D number of documents in my search result

Thanks,

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



Andrew Boyd
Software Architect
Sun Certified J2EE Architect
B&B Technical Services Inc.
205.422.2557

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 13:06:29 2005
Return-Path: <java-user-return-14726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 317 invoked from network); 3 Jun 2005 13:06:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 13:06:28 -0000
Received: (qmail 61113 invoked by uid 500); 3 Jun 2005 13:06:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60927 invoked by uid 500); 3 Jun 2005 13:06:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60912 invoked by uid 99); 3 Jun 2005 13:06:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from gwia201.syr.edu (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 06:06:12 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Fri, 03 Jun 2005 09:05:50 -0400
Message-Id: <s2a01d6e.084@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.5.1 
Date: Fri, 03 Jun 2005 09:05:20 -0400
From: "Grant Ingersoll" <GSIngers@syr.edu>
To: <java-user@lucene.apache.org>
Subject: RE: calculate wi = tfi * IDFi for each document.
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you can, I think there has been enough interest in the past on this,
a patch that exposes the wi information would probably be useful to
others (not that I am saying it would be committed, as I can't speak for
the committers on the project)

>>> andrew.boyd@mindspring.com 6/3/2005 8:19:16 AM >>>
Thanks for the reply.  It looks like I can use parts of Similarity.

I'll post back once I get it working or at least closer ;-)

Andrew

-----Original Message-----
From: Grant Ingersoll <GSIngers@syr.edu>
Sent: Jun 3, 2005 6:51 AM
To: java-user@lucene.apache.org 
Subject: RE: calculate wi = tfi * IDFi for each document.

I think the TermFreqVector (reader.getTermVector) has the info you
want
per document.  You will need to sort it by frequency to get the top
terms in each document.  It doesn't give you the wi, just tfi, but the
whole score is implied by the fact that you have the top 10 documents,
I
think.

-Grant

>>> andrew.boyd@mindspring.com 6/2/2005 3:21:35 PM >>>
Ok.  So if I get 10 Documents back from a search and I want to get the
top 5 weighted terms for each of the 10 documents what API call should
I
use?  I'm unable to find the connection between Similarity and a
Document.

I know I'm missing the elephant that must be in the middle of the
room.
 Or maybe it's not there.
Is what I'm trying to do do-able?

Thanks,

Andrew

-----Original Message-----
From: Max Pfingsthorn <m.pfingsthorn@hippo.nl>
Sent: Jun 2, 2005 5:33 AM
To: java-user@lucene.apache.org 
Subject: RE: calculate wi = tfi * IDFi for each document.

Hi,

DefaultSimilarity uses exactly this weighting scheme. Makes sense
since
it's a pretty standard relevance measure...

Bye!
max

-----Original Message-----
From: Andrew Boyd [mailto:andrew.boyd@mindspring.com] 
Sent: Thursday, June 02, 2005 11:39
To: java-user@lucene.apache.org 
Subject: calculate wi = tfi * IDFi for each document.


If I have search results how can I calculate, using lucene's API,  wi
=
tfi * IDFi for each document.

wi    = term weight
tfi    = term frequency in a document
IDFi = inverse document frequency = log(D/dfi)
dfi   = document frequency or number of documents containing term i
D    = number of documents in my search result

Thanks,

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
For additional commands, e-mail: java-user-help@lucene.apache.org 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
For additional commands, e-mail: java-user-help@lucene.apache.org 



Andrew Boyd
Software Architect
Sun Certified J2EE Architect
B&B Technical Services Inc.
205.422.2557

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 13:07:11 2005
Return-Path: <java-user-return-14727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 471 invoked from network); 3 Jun 2005 13:07:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 13:07:10 -0000
Received: (qmail 63619 invoked by uid 500); 3 Jun 2005 13:07:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63577 invoked by uid 500); 3 Jun 2005 13:07:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63562 invoked by uid 99); 3 Jun 2005 13:07:03 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from panacea.is.nl (HELO panacea.is.nl) (213.133.34.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 06:07:03 -0700
Received: from hai01.hippo.local ([213.133.51.241]) by panacea.is.nl with Microsoft SMTPSVC(5.0.2195.4905);
	 Fri, 3 Jun 2005 15:05:51 +0200
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
Subject: RE: Indexing multiple languages
Date: Fri, 3 Jun 2005 15:06:51 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C4189DA@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing multiple languages
Thread-Index: AcVoO2fZftcd5wgVRCqnkO1pOqwvtQAAYvPg
From: "Max Pfingsthorn" <m.pfingsthorn@hippo.nl>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Jun 2005 13:05:51.0487 (UTC) FILETIME=[F7D030F0:01C5683C]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

You could use the ParalellReader for this if you have all documents in =
all languages. Then, the metadata fields can be stored in one of the =
field data files, while each languages gets its own field data file...

max

-----Original Message-----
From: Paul Libbrecht [mailto:paul@activemath.org]
Sent: Friday, June 03, 2005 14:23
To: java-user@lucene.apache.org
Subject: Re: Indexing multiple languages


Robert,

Le 2 juin 05, =E0 21:42, Tansley, Robert a =E9crit :
> It seems that there are even more options --
> 4/ One index, with a separate Lucene document for each (item,language) =

> combination, with one field that specifies the language
> 5/ One index, one Lucene document per item, with field names that=20
> include the language (e.g. title_en, title_cn)
> I quite like 4, because you can search with no language constraint, or =

> with one as Paul suggests below.

You can in both cases. In the second, you need to expand the query (ie=20
searching for carrot would search text_en:carrot or text_cn:carrot",=20
which, I think is fair as long as you don't a two kilometer's list of=20
languages.

> However, some "non language-specific" data might need to be repeated=20
> (e.g. dates), unless we had an extra Lucene document for all that.  I=20
> wonder what the various pros and cons in terms of index size and=20
> performance would be in each case?  I really don't have enough=20
> knowledge of Lucene to have any idea...

If you separate the indices you won't, as far as I know, be able to=20
query simultaneously (e.g. some text which, as well, is new=20
enough....).

paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 13:36:52 2005
Return-Path: <java-user-return-14728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26515 invoked from network); 3 Jun 2005 13:36:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 13:36:51 -0000
Received: (qmail 40957 invoked by uid 500); 3 Jun 2005 13:36:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40914 invoked by uid 500); 3 Jun 2005 13:36:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40769 invoked by uid 99); 3 Jun 2005 13:36:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.aurisp.de (HELO mail.aurisp.de) (81.169.158.23)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 06:36:42 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.aurisp.de (Postfix) with ESMTP id 19A17B807
	for <java-user@lucene.apache.org>; Fri,  3 Jun 2005 15:36:30 +0200 (CEST)
Received: from mail.aurisp.de ([127.0.0.1])
	by localhost (mail.aurisp.de [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id 16824-06 for <java-user@lucene.apache.org>;
	Fri, 3 Jun 2005 15:36:23 +0200 (CEST)
Received: from localhost (vb1-4.wlan.uni-bonn.de [131.220.201.4])
	by mail.aurisp.de (Postfix) with ESMTP id 61E86B806
	for <java-user@lucene.apache.org>; Fri,  3 Jun 2005 15:36:23 +0200 (CEST)
Date: Fri, 3 Jun 2005 15:36:20 +0200
From: Sebastian Marius Kirsch <skirsch@sebastian-kirsch.org>
To: java-user@lucene.apache.org
Subject: Re: managing docids for ParallelReader
Message-ID: <20050603133620.GB9251@amok.local>
References: <FBA9F803D33470489B9B4676A6B09F0B014AE879@mt-exch1.montreal.speechworks.com> <20050530202052.GN915@amok.local> <10D0C917-EB85-4C06-A450-EE28786F454C@cenqua.com> <429CAAEF.4090306@apache.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <429CAAEF.4090306@apache.org>
User-Agent: Mutt/1.4i
X-Virus-Scanned: by amavisd-maia-1.0.0-rc5 (Debian) at aurisp.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Doug,

I took up your suggestion to use a ParallelReader for adding more
fields to existing documents. I now have two indexes with the same
number of documents, but different fields. One field is duplicated
(the id field.)

I wrote a small class to merge those two indexes into one index; it is
attached to this message. However, when I run this class in order to
merge the two indexes, I get a NullPointerException:

Exception in thread "main" java.lang.NullPointerException
	at org.apache.lucene.index.ParallelReader$ParallelTermPositions.seek(ParallelReader.java:318)
	at org.apache.lucene.index.ParallelReader$ParallelTermDocs.seek(ParallelReader.java:294)
	at org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:325)
	at org.apache.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java:296)
	at org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:270)
	at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:234)
	at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:96)
	at org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:596)
	at org.sebastiankirsch.thesis.util.ParallelIndexMergeTool.main(ParallelIndexMergeTool.java:27)

I'm afraid that this is my first journey into the bowels of Lucene,
and I don't know where to look for sources of the problem. I tried
removing the duplicate field, but the symptoms stay the same. Does
this mean that I cannot merge two indexes from a ParallelReader into
one normal? Or is it a problem with my index? Or a problem somewhere
else?

I am using revision 179785 from the svn repo.

Thanks very much for your time, Sebastian


	public static void main(String[] args) throws IOException {
		IndexWriter writer = new IndexWriter(args[0], new StandardAnalyzer(), true);
		ParallelReader reader = new ParallelReader();
		
		for (int i = 1; i < args.length; i++) {
			reader.add(IndexReader.open(args[i]));
		}
		
		writer.addIndexes(new IndexReader[] { reader });
		writer.optimize();
		writer.close();
	}

-- 
Sebastian Kirsch <skirsch@sebastian-kirsch.org> [http://www.sebastian-kirsch.org/]

NOTE: New email address! Please update your address book.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 15:13:41 2005
Return-Path: <java-user-return-14729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71199 invoked from network); 3 Jun 2005 15:13:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 15:13:41 -0000
Received: (qmail 8279 invoked by uid 500); 3 Jun 2005 15:13:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8252 invoked by uid 500); 3 Jun 2005 15:13:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8205 invoked by uid 99); 3 Jun 2005 15:13:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 08:13:31 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E7BDE13E210D; Fri,  3 Jun 2005 11:12:32 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id B5B7713E20EF
	for <java-user@lucene.apache.org>; Fri,  3 Jun 2005 11:12:20 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <s2a01a4c.006@loc.gov>
References: <s2a01a4c.006@loc.gov>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BE087A77-18F1-4DB3-854F-566F9706CAD8@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Indexing and Hit Highlighting OCR Data
Date: Fri, 3 Jun 2005 11:12:18 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 3, 2005, at 8:50 AM, Corey Keith wrote:

> With this approach all work is done at the word level.  When we  
> have a phrase query the results will contain pages with the entire  
> phrase but when we go to highlight the document _all_ words in the  
> phrase regardless of being in the phrase will be highlighted.  Is  
> that correct?  It would also be difficult to get the best fragment  
> in a similar way to the current highlighter?

The current Highlighter also does it by Term even if the query is a  
PhraseQuery - so you're not losing capability by not using  
Highlighter in this case.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 16:24:33 2005
Return-Path: <java-user-return-14730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99100 invoked from network); 3 Jun 2005 16:24:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 16:24:33 -0000
Received: (qmail 7842 invoked by uid 500); 3 Jun 2005 16:24:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7805 invoked by uid 500); 3 Jun 2005 16:24:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7774 invoked by uid 99); 3 Jun 2005 16:24:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc13.comcast.net (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 09:24:22 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc13) with ESMTP
          id <20050603162356015009amr8e>; Fri, 3 Jun 2005 16:23:56 +0000
Message-ID: <42A0841C.2090202@apache.org>
Date: Fri, 03 Jun 2005 09:23:56 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.3 (X11/20050513)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Indexing multiple languages
References: <19ADCC0B9D4CAD4582BB9900BBCE35740194503C@tayexc13.americas.cpqcorp.net>
In-Reply-To: <19ADCC0B9D4CAD4582BB9900BBCE35740194503C@tayexc13.americas.cpqcorp.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Tansley, Robert wrote:
> What if we're trying to index multiple languages in the same site?  Is
> it best to have:
> 
> 1/ one index for all languages
> 2/ one index for all languages, with an extra language field so searches
> can be constrained to a particular language
> 3/ separate indices for each language?

I'd use 2/.  In particular, use the same field for the content, title, 
etc., even if when produced by different analyzers.  Have a "lang" field 
that names the language of the document.

At query time, use an analyzer selected by the user's environment (e.g., 
HTTP lang header).  If folks are getting false positives, where a term 
in another language that means something different is matching their 
query, they can use a "lang" pulldown to remove documents from other 
languages, implemented as a Lucene Filter.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 16:37:27 2005
Return-Path: <java-user-return-14731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4313 invoked from network); 3 Jun 2005 16:37:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 16:37:27 -0000
Received: (qmail 40659 invoked by uid 500); 3 Jun 2005 16:37:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40633 invoked by uid 500); 3 Jun 2005 16:37:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40615 invoked by uid 99); 3 Jun 2005 16:37:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc13.comcast.net (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 09:37:20 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc13) with ESMTP
          id <200506031637020150098pmae>; Fri, 3 Jun 2005 16:37:02 +0000
Message-ID: <42A0872D.1070107@apache.org>
Date: Fri, 03 Jun 2005 09:37:01 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.3 (X11/20050513)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: managing docids for ParallelReader
References: <FBA9F803D33470489B9B4676A6B09F0B014AE879@mt-exch1.montreal.speechworks.com> <20050530202052.GN915@amok.local> <10D0C917-EB85-4C06-A450-EE28786F454C@cenqua.com> <429CAAEF.4090306@apache.org> <20050603133620.GB9251@amok.local>
In-Reply-To: <20050603133620.GB9251@amok.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sebastian Marius Kirsch wrote:
> I took up your suggestion to use a ParallelReader for adding more
> fields to existing documents. I now have two indexes with the same
> number of documents, but different fields.

Does search work using the ParalleReader?

> One field is duplicated
> (the id field.)

Why is this duplicated?  Just curious.  That shouldn't cause a problem.

> I wrote a small class to merge those two indexes into one index; it is
> attached to this message. However, when I run this class in order to
> merge the two indexes, I get a NullPointerException:

Why are you merging?  Why not just search using the ParallelReader? 
Again, just curious.  This should work.

> Exception in thread "main" java.lang.NullPointerException
> 	at org.apache.lucene.index.ParallelReader$ParallelTermPositions.seek(ParallelReader.java:318)
> 	at org.apache.lucene.index.ParallelReader$ParallelTermDocs.seek(ParallelReader.java:294)
> 	at org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:325)
> 	at org.apache.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java:296)
> 	at org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:270)
> 	at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:234)
> 	at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:96)
> 	at org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:596)
> 	at org.sebastiankirsch.thesis.util.ParallelIndexMergeTool.main(ParallelIndexMergeTool.java:27)

This could be a bug.  I have not tested merging with a ParallelReader. 
Can you please try to adding a test case to TestParallelReader that 
demonstrates this?

Thanks,

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 16:50:36 2005
Return-Path: <java-user-return-14732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11018 invoked from network); 3 Jun 2005 16:50:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 16:50:36 -0000
Received: (qmail 78010 invoked by uid 500); 3 Jun 2005 16:50:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77985 invoked by uid 500); 3 Jun 2005 16:50:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77924 invoked by uid 99); 3 Jun 2005 16:50:27 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from panacea.is.nl (HELO panacea.is.nl) (213.133.34.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 09:50:25 -0700
Received: from hai01.hippo.local ([213.133.51.241]) by panacea.is.nl with Microsoft SMTPSVC(5.0.2195.4905);
	 Fri, 3 Jun 2005 18:49:13 +0200
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
Subject: deleting on a keyword field
Date: Fri, 3 Jun 2005 18:50:12 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C41A7AF@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: deleting on a keyword field
Thread-Index: AcVoXE9vwvZi8xRCRNO0+ftrIDj/KQ==
From: "Max Pfingsthorn" <m.pfingsthorn@hippo.nl>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Jun 2005 16:49:13.0448 (UTC) FILETIME=[2C012680:01C5685C]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi!

I'm trying to delete a document from the index. Somehow it doesn't work. =
I made a Field.Keyword out of my document's URI and would now like to =
delete a document with a certain uri like so:

reader.delete(new Term(URI_FIELD, uri));

This does not remove anything. Do I have to make the uri a normal field?

Thanks for your help in advance!

Best regards,

Max Pfingsthorn

Hippo =20

Oosteinde 11
1017WT Amsterdam
The Netherlands
Tel  +31 (0)20 5224466
-------------------------------------------------------------
m.pfingsthorn@hippo.nl / www.hippo.nl
--------------------------------------------------------------

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 17:06:48 2005
Return-Path: <java-user-return-14733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17116 invoked from network); 3 Jun 2005 17:06:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 17:06:48 -0000
Received: (qmail 19269 invoked by uid 500); 3 Jun 2005 17:06:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19226 invoked by uid 500); 3 Jun 2005 17:06:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19207 invoked by uid 99); 3 Jun 2005 17:06:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc13.comcast.net (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 10:06:37 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc13) with ESMTP
          id <20050603170626015009f6ose>; Fri, 3 Jun 2005 17:06:26 +0000
Message-ID: <42A08E11.7030004@apache.org>
Date: Fri, 03 Jun 2005 10:06:25 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.3 (X11/20050513)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Preserving original HTML file offsets for highlighting, need
  HTMLTokenizer?
References: <6.2.1.2.2.20050530134630.063ae978@fast.synernet.com>
In-Reply-To: <6.2.1.2.2.20050530134630.063ae978@fast.synernet.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Fred Toth wrote:
> I'm thinking we need something like "HTMLTokenizer" which bridges the
> gap between StandardAnalyzer and an external HTML parser. Since so
> many of us are dealing with HTML, I would think this would be generally
> useful for many problems. It could work this way:
> 
> Given this input:
> 
> <html><head><title>Howdy there</title></head><body>Hello 
> world</body></html>
> 
> An HTMLTokenizer would deliver something like this sort of token stream
> (the numbers represent the start/end offsets for the token):
> 
> TAG, <html>, 0, 6
> TAG, <head>, 6, 12
> TAG, <title>, 12, 18
> WORD, Howdy, 18, 22
> WORD, there, 23, 28
> TAG, </title>, 28, 36
> etc.
> 
> Given the above, a filter could then strip out the HTML, but pass the 
> WORDs on
> to Lucene, preserving the offsets in the source file. These would be 
> used later
> during highlighting. Clever filters could be selective about what gets 
> stripped and
> what gets passed on.

For what it's worth, I think that's a good design and would love to see 
this as a contribution.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 17:46:20 2005
Return-Path: <java-user-return-14734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34618 invoked from network); 3 Jun 2005 17:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 17:46:20 -0000
Received: (qmail 16820 invoked by uid 500); 3 Jun 2005 17:46:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16799 invoked by uid 500); 3 Jun 2005 17:46:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16781 invoked by uid 99); 3 Jun 2005 17:46:13 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 10:46:09 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3587F13E210D; Fri,  3 Jun 2005 13:45:38 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 3B05213E2007
	for <java-user@lucene.apache.org>; Fri,  3 Jun 2005 13:45:33 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C41A7AF@hai01.hippo.local>
References: <A955EA1F8FE31749AEC8C998082F6C7C41A7AF@hai01.hippo.local>
Content-Type: multipart/alternative; boundary=Apple-Mail-1--73381591
Message-Id: <DD4B5674-6D81-46F1-A3A8-B8026615635E@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: deleting on a keyword field
Date: Fri, 3 Jun 2005 13:37:35 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00,HTML_40_50,
	HTML_MESSAGE,MIME_QP_LONG_LINE autolearn=ham version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-1--73381591
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed


On Jun 3, 2005, at 12:50 PM, Max Pfingsthorn wrote:

> Hi!
>
> I'm trying to delete a document from the index. Somehow it doesn't  
> work. I made a Field.Keyword out of my document's URI and would now  
> like to delete a document with a certain uri like so:
>
> reader.delete(new Term(URI_FIELD, uri));
>
> This does not remove anything. Do I have to make the uri a normal  
> field?

Try a search using a TermQuery for that Term - are the document(s)  
you expect to be deleted found?  If not, then you'll have to research  
how you indexed to ensure the keyword

     Erik


--Apple-Mail-1--73381591--

From java-user-return-14735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 18:09:04 2005
Return-Path: <java-user-return-14735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43610 invoked from network); 3 Jun 2005 18:09:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 18:09:04 -0000
Received: (qmail 70232 invoked by uid 500); 3 Jun 2005 18:08:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70205 invoked by uid 500); 3 Jun 2005 18:08:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70192 invoked by uid 99); 3 Jun 2005 18:08:56 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lucenelist@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from smtprelay04.ispgateway.de (HELO smtprelay04.ispgateway.de) (80.67.18.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 11:08:53 -0700
Received: (qmail 24875 invoked from network); 3 Jun 2005 18:08:31 -0000
Received: from unknown (HELO p54966BA4.dip.t-dialin.net) ([pbs]695637@[84.150.107.164])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 3 Jun 2005 18:08:31 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: deleting on a keyword field
Date: Fri, 3 Jun 2005 20:09:33 +0200
User-Agent: KMail/1.8
References: <A955EA1F8FE31749AEC8C998082F6C7C41A7AF@hai01.hippo.local>
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C41A7AF@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506032009.33703@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 03 June 2005 18:50, Max Pfingsthorn wrote:

> reader.delete(new Term(URI_FIELD, uri));
>
> This does not remove anything. Do I have to make the uri a normal field?

How do you know nothing was deleted? Are you aware that you need to re-open 
your IndexSearcher/Reader in order to see the changes made to the index?

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 18:17:53 2005
Return-Path: <java-user-return-14736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48914 invoked from network); 3 Jun 2005 18:17:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 18:17:53 -0000
Received: (qmail 90281 invoked by uid 500); 3 Jun 2005 18:17:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90261 invoked by uid 500); 3 Jun 2005 18:17:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90248 invoked by uid 99); 3 Jun 2005 18:17:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from smtp207.mail.sc5.yahoo.com (HELO smtp207.mail.sc5.yahoo.com) (216.136.129.97)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 03 Jun 2005 11:17:43 -0700
Received: (qmail 92059 invoked from network); 3 Jun 2005 18:17:27 -0000
Received: from unknown (HELO ?24.232.184.152?) (desantisernesto@24.232.184.152 with login)
  by smtp207.mail.sc5.yahoo.com with SMTP; 3 Jun 2005 18:17:25 -0000
Received: from 127.0.0.1 (AVG SMTP 7.0.322 [267.4.1]); Fri, 03 Jun 2005 15:17:30 -0300
Message-ID: <42A09EB9.5040709@colaborativa.net>
Date: Fri, 03 Jun 2005 15:17:29 -0300
From: Ernesto De Santis <ernesto.desantis@colaborativa.net>
Organization: Colaborativa.net
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: es-ar, es, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: deleting on a keyword field
References: <A955EA1F8FE31749AEC8C998082F6C7C41A7AF@hai01.hippo.local> <200506032009.33703@danielnaber.de>
In-Reply-To: <200506032009.33703@danielnaber.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

from javadoc:

public final int *delete*(Term <cid:part1.00050007.06010306@colaborativa.net> term)
                 throws IOException <http://java.sun.com/j2se/1.4/docs/api/java/io/IOException.html>

Deletes all documents containing |term|. This is useful if one uses a 
document field to hold a unique ID string for the document. Then to 
delete such a document, one merely constructs a term with the 
appropriate field and the unique ID string as its text and passes it to 
this method.* Returns the number of documents deleted.*

bye
Ernesto.


Daniel Naber escribi:

>On Friday 03 June 2005 18:50, Max Pfingsthorn wrote:
>
>  
>
>>reader.delete(new Term(URI_FIELD, uri));
>>
>>This does not remove anything. Do I have to make the uri a normal field?
>>    
>>
>
>How do you know nothing was deleted? Are you aware that you need to re-open 
>your IndexSearcher/Reader in order to see the changes made to the index?
>
>Regards
> Daniel
>
>  
>

-- 
Ernesto De Santis - Colaborativa.net
La Plata, Argentina.
http://www.colaborativa.net/


		
___________________________________ 
A tu celular no le falta algo? 
Us Yahoo! Messenger y Correo Yahoo! en tu telfono celular. 
Ms informacin en http://movil.yahoo.com.ar

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 03 20:50:01 2005
Return-Path: <java-user-return-14737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34270 invoked from network); 3 Jun 2005 20:49:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jun 2005 20:49:38 -0000
Received: (qmail 93151 invoked by uid 500); 3 Jun 2005 20:49:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93118 invoked by uid 500); 3 Jun 2005 20:49:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93098 invoked by uid 99); 3 Jun 2005 20:49:30 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mailspool.conxion.net (HELO mailspool.conxion.net) (206.204.4.37)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Jun 2005 13:49:28 -0700
Received: from iss04.interliant.com (iss04.interliant.com [207.113.241.148])
	by mailspool.conxion.net (8.12.10+Sun/8.12.10) with ESMTP id j53Kn7iv010062
	for <java-user@lucene.apache.org>; Fri, 3 Jun 2005 13:49:08 -0700 (PDT)
Received: from EX-008.mail.navisite.com (ex-008.interliant.com [207.113.240.188])
	by iss04.interliant.com (8.10.2/8.10.2) with ESMTP id j53Ko6k07567
	for <java-user@lucene.apache.org>; Fri, 3 Jun 2005 15:50:06 -0500 (CDT)
Received: from EX-101.mail.navisite.com ([172.16.1.24]) by EX-008.mail.navisite.com with Microsoft SMTPSVC(6.0.3790.211);
	 Fri, 3 Jun 2005 15:49:04 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Indexing multiple languages
Date: Fri, 3 Jun 2005 15:49:06 -0500
Message-ID: <E1F190DAC247C64FAA46B38316FA151D014AEB7A@EX-101.mail.navisite.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing multiple languages
Thread-Index: AcVoWMA7iVVBi+KOQ7mPR5RIwxa5TQAJJp1Q
From: "Bruce Ritchie" <bruce@jivesoftware.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Jun 2005 20:49:04.0981 (UTC) FILETIME=[AE06D050:01C5687D]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Tansley, Robert wrote:
> > What if we're trying to index multiple languages in the=20
> same site?  Is=20
> > it best to have:
> >=20
> > 1/ one index for all languages
> > 2/ one index for all languages, with an extra language field so=20
> > searches can be constrained to a particular language 3/ separate=20
> > indices for each language?
>=20
> I'd use 2/.  In particular, use the same field for the=20
> content, title, etc., even if when produced by different=20
> analyzers.  Have a "lang" field that names the language of=20
> the document.

We use 2/ and use filters when we want to search only within a =
particular language. Just be sure touse the same analyzer when indexing =
and=20
searching within a particular language.


Regards,

Bruce Ritchie

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 04 23:07:12 2005
Return-Path: <java-user-return-14738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15447 invoked from network); 4 Jun 2005 23:07:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jun 2005 23:07:12 -0000
Received: (qmail 60897 invoked by uid 500); 4 Jun 2005 23:07:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59985 invoked by uid 500); 4 Jun 2005 23:07:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59969 invoked by uid 99); 4 Jun 2005 23:07:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.aurisp.de (HELO mail.aurisp.de) (81.169.158.23)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 04 Jun 2005 16:07:04 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.aurisp.de (Postfix) with ESMTP id E67AEB807
	for <java-user@lucene.apache.org>; Sun,  5 Jun 2005 01:07:00 +0200 (CEST)
Received: from mail.aurisp.de ([127.0.0.1])
	by localhost (mail.aurisp.de [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id 20981-06 for <java-user@lucene.apache.org>;
	Sun, 5 Jun 2005 01:06:55 +0200 (CEST)
Received: from localhost (p508859C7.dip.t-dialin.net [80.136.89.199])
	by mail.aurisp.de (Postfix) with ESMTP id 6EAC0B806
	for <java-user@lucene.apache.org>; Sun,  5 Jun 2005 01:06:53 +0200 (CEST)
Date: Sun, 5 Jun 2005 01:06:50 +0200
From: Sebastian Marius Kirsch <skirsch@sebastian-kirsch.org>
To: java-user@lucene.apache.org
Subject: Re: managing docids for ParallelReader
Message-ID: <20050604230650.GD9251@amok.local>
References: <FBA9F803D33470489B9B4676A6B09F0B014AE879@mt-exch1.montreal.speechworks.com> <20050530202052.GN915@amok.local> <10D0C917-EB85-4C06-A450-EE28786F454C@cenqua.com> <429CAAEF.4090306@apache.org> <20050603133620.GB9251@amok.local> <42A0872D.1070107@apache.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <42A0872D.1070107@apache.org>
User-Agent: Mutt/1.4i
X-Virus-Scanned: by amavisd-maia-1.0.0-rc5 (Debian) at aurisp.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dear Doug,

thanks for your message.

On Fri, Jun 03, 2005 at 09:37:01AM -0700, Doug Cutting wrote:
> Sebastian Marius Kirsch wrote:
> >I took up your suggestion to use a ParallelReader for adding more
> >fields to existing documents. I now have two indexes with the same
> >number of documents, but different fields.
> Does search work using the ParalleReader?

I have to admit that I didn't test *that* yet, sorry. I thought that
merging the index into another one would be a good test anyway.

> >One field is duplicated (the id field.)
> Why is this duplicated?  Just curious.  That shouldn't cause a problem.

Just as a precaution, so that I can tell afterwards whether two
indexes are in sync or not. (Iterate over the documents in both
indexes and check whether the id fields match.)

> Why are you merging?  Why not just search using the ParallelReader? 
> Again, just curious.  This should work.

Interoperability. That way, I can later hand the index over to another
application that knows nothing about parallel indexes, and don't have
to make sure that this other application combines the indexes the
right way.

(Oh, and I can use Luke to check the index for plausibility. That's an
important point for me.)

> This could be a bug.  I have not tested merging with a ParallelReader. 
> Can you please try to adding a test case to TestParallelReader that 
> demonstrates this?

I have attached the diff for the test case, and the output of the test
run.

I have played around with the code for a couple of hours, but cannot
find a fix for this. If I change ParallelTermPosition.seek(TermEnum
termEnum) to check for termEnum.term() being null, and then hand this
null over to the correct IndexReader, instead of calling
.seek(termEnum.term()), then I get a different
error. (NullPointerException in
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:140).)
Apparently, TermPositions are not made for seeking to a null.

On the other hand, I don't know where the null is coming from in the
first case. It comes from the termEnum of one of the underlying
IndexReaders, and if that's a problem, it should be a problem outside
of ParallelReader too.

I'm confused (in case you couldn't tell that yet.) I'll try to find
out more tomorrow.

Regards, Sebastian

PS: I'm rather new to this whole Java thing; I tried to import lucene
into Eclipse for easier debugging, but failed. If any of the
developers use Eclipse, I'd be grateful for some hints regarding
this. Thanks for bearing with me.

$ svn diff
Index: src/test/org/apache/lucene/index/TestParallelReader.java
===================================================================
--- src/test/org/apache/lucene/index/TestParallelReader.java    (revision 179785)
+++ src/test/org/apache/lucene/index/TestParallelReader.java    (working copy)
@@ -57,6 +57,13 @@
 
   }
 
+  public void testMerge() throws Exception {
+    Directory dir = new RAMDirectory();
+    IndexWriter w = new IndexWriter(dir, new StandardAnalyzer(), true);
+    w.addIndexes(new IndexReader[] { ((IndexSearcher) parallel).getIndexReader() });
+    w.close();
+  }
+  
   private void queryTest(Query query) throws IOException {
     Hits parallelHits = parallel.search(query);
     Hits singleHits = single.search(query);
$ ant -Dtestcase=TestParallelReader test
Buildfile: build.xml
[...]
test:
    [mkdir] Created dir: /Users/skirsch/text/lectures/da/thirdparty/lucene-trunk/build/test
    [junit] Testsuite: org.apache.lucene.index.TestParallelReader
    [junit] Tests run: 2, Failures: 0, Errors: 1, Time elapsed: 1.993 sec

    [junit] Testcase: testMerge(org.apache.lucene.index.TestParallelReader):   Caused an ERROR
    [junit] null
    [junit] java.lang.NullPointerException
    [junit]     at org.apache.lucene.index.ParallelReader$ParallelTermPositions.seek(ParallelReader.java:318)
    [junit]     at org.apache.lucene.index.ParallelReader$ParallelTermDocs.seek(ParallelReader.java:294)
    [junit]     at org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:325)
    [junit]     at org.apache.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java:296)
    [junit]     at org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:270)
    [junit]     at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:234)
    [junit]     at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:96)
    [junit]     at org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:596)
    [junit]     at org.apache.lucene.index.TestParallelReader.testMerge(TestParallelReader.java:63)
    [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    [junit]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)


    [junit] Test org.apache.lucene.index.TestParallelReader FAILED

BUILD FAILED
/Users/skirsch/text/lectures/da/thirdparty/lucene-trunk/common-build.xml:188: Tests failed!

Total time: 16 seconds
$

-- 
Sebastian Kirsch <skirsch@sebastian-kirsch.org> [http://www.sebastian-kirsch.org/]

NOTE: New email address! Please update your address book.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 05 05:12:08 2005
Return-Path: <java-user-return-14739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80394 invoked from network); 5 Jun 2005 05:12:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2005 05:12:07 -0000
Received: (qmail 3651 invoked by uid 500); 5 Jun 2005 05:12:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3620 invoked by uid 500); 5 Jun 2005 05:12:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3607 invoked by uid 99); 5 Jun 2005 05:12:01 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp109.mail.sc5.yahoo.com (HELO smtp109.mail.sc5.yahoo.com) (66.163.170.7)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 04 Jun 2005 22:12:00 -0700
Received: (qmail 66489 invoked from network); 5 Jun 2005 05:11:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:Message-ID:Date:From:User-Agent:X-Accept-Language:MIME-Version:To:Subject:Content-Type:Content-Transfer-Encoding;
  b=e42s0rdaDeura650AKJ7avjwShblLF5YD0fxsiwyJCCtj8iZ0qna9phkTHCw9g3XN/Hokoch6VRajeE2UJe5MufuaOfBzNGqEdgFdPI8yICsLRzoLrsWNu6qvxMIemqkTMHdi66fp8bPtnwPEzEl+lyc+CoBCP8cA29kPbX68Yk=  ;
Received: from unknown (HELO ?192.168.15.5?) (rhodepc@67.171.78.161 with plain)
  by smtp109.mail.sc5.yahoo.com with SMTP; 5 Jun 2005 05:11:58 -0000
Message-ID: <42A2899D.6060303@yahoo.com>
Date: Sun, 05 Jun 2005 01:11:57 -0400
From: Phillip Rhodes <rhodepc@yahoo.com>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: What *is* a lucene document?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I understand that  "Documents are the primary retrievable units from a 
Lucene query"  But I don't know if I want to have 12 documents in the 
lucene index that represent the same business object, or if I should 
place 12 different business documents within the lucene index.

Here is the background:
I want to index a product catalog (some data in database and some data 
on the filesystem, I have cross-reference between the two).
Each product is associated to attributes, categories and one or more 
PDF/MS Word documents, HTML descriptions, images, etc...
A product could have 12 different files associated to it.

Is it okay if I create as many documents as assets that I want to return 
from a search and add information to each document tying it back to the 
product that it is assocated with?  Is that the right approach?

Thanks, it's keeping me up at night.


BTW, I am working on a release of a professional-grade ecommerce suite 
that is open-source (apache license), I wouldn't mind help on the 
lucene/search stuff.   There's plenty more for me to do.  120+ tables, 
going to prod for a client this weekend (without search;)  Contact me!





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 05 10:22:58 2005
Return-Path: <java-user-return-14740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52818 invoked from network); 5 Jun 2005 10:22:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2005 10:22:58 -0000
Received: (qmail 27036 invoked by uid 500); 5 Jun 2005 10:22:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27004 invoked by uid 500); 5 Jun 2005 10:22:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26984 invoked by uid 99); 5 Jun 2005 10:22:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 05 Jun 2005 03:22:50 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 95DF713E2007; Sun,  5 Jun 2005 06:22:47 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 4615713E2005
	for <java-user@lucene.apache.org>; Sun,  5 Jun 2005 06:21:36 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42A2899D.6060303@yahoo.com>
References: <42A2899D.6060303@yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E5D73A6C-0E48-4515-B0D5-493D9B620DD3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: What *is* a lucene document?
Date: Sun, 5 Jun 2005 06:21:36 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.1 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 5, 2005, at 1:11 AM, Phillip Rhodes wrote:
> I understand that  "Documents are the primary retrievable units  
> from a Lucene query"  But I don't know if I want to have 12  
> documents in the lucene index that represent the same business  
> object, or if I should place 12 different business documents within  
> the lucene index.

Deciding how to slice a domain into Documents is one of the most  
important decisions to make with Lucene usage, and not one that  
Lucene itself gives an answer to.  There are precedents that have  
been set and advice that users here can give, but ultimately how to  
represent your domain in Lucene is up to you.

> Here is the background:
> I want to index a product catalog (some data in database and some  
> data on the filesystem, I have cross-reference between the two).
> Each product is associated to attributes, categories and one or  
> more PDF/MS Word documents, HTML descriptions, images, etc...
> A product could have 12 different files associated to it.
>
> Is it okay if I create as many documents as assets that I want to  
> return from a search and add information to each document tying it  
> back to the product that it is assocated with?  Is that the right  
> approach?

Do users of your search system need to know about the PDF/Word/HTML  
documents?  Or should they simply know about "products"?  If all you  
need back is the product, then the simplest approach would be to  
create one Lucene Document per product, parse all the files and data  
associated with it and add it as text to fields.  If the search  
system is simple in that fielded search is not needed, simply create  
two fields per Document: id and text.  Field "id" is the product id,  
and "text" is an aggregation of all the text associated with the  
product regardless of where it came from (careful if you're doing  
string concatenation to put whitespace between so you don't blur  
words together).

There are many other ways to approach this and my recommendation is  
just the simplest one based on the description of your needs.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 05 12:51:21 2005
Return-Path: <java-user-return-14741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78860 invoked from network); 5 Jun 2005 12:51:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jun 2005 12:51:20 -0000
Received: (qmail 48872 invoked by uid 500); 5 Jun 2005 12:51:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48808 invoked by uid 500); 5 Jun 2005 12:51:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48765 invoked by uid 99); 5 Jun 2005 12:51:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 05 Jun 2005 05:51:08 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4E01713E2007; Sun,  5 Jun 2005 08:51:03 -0400 (EDT)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 7550813E2005
	for <java-user@lucene.apache.org>; Sun,  5 Jun 2005 08:50:41 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42A2899D.6060303@yahoo.com>
References: <42A2899D.6060303@yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E5D73A6C-0E48-4515-B0D5-493D9B620DD3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: What *is* a lucene document?
Date: Sun, 5 Jun 2005 06:21:36 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.1 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 5, 2005, at 1:11 AM, Phillip Rhodes wrote:
> I understand that  "Documents are the primary retrievable units  
> from a Lucene query"  But I don't know if I want to have 12  
> documents in the lucene index that represent the same business  
> object, or if I should place 12 different business documents within  
> the lucene index.

Deciding how to slice a domain into Documents is one of the most  
important decisions to make with Lucene usage, and not one that  
Lucene itself gives an answer to.  There are precedents that have  
been set and advice that users here can give, but ultimately how to  
represent your domain in Lucene is up to you.

> Here is the background:
> I want to index a product catalog (some data in database and some  
> data on the filesystem, I have cross-reference between the two).
> Each product is associated to attributes, categories and one or  
> more PDF/MS Word documents, HTML descriptions, images, etc...
> A product could have 12 different files associated to it.
>
> Is it okay if I create as many documents as assets that I want to  
> return from a search and add information to each document tying it  
> back to the product that it is assocated with?  Is that the right  
> approach?

Do users of your search system need to know about the PDF/Word/HTML  
documents?  Or should they simply know about "products"?  If all you  
need back is the product, then the simplest approach would be to  
create one Lucene Document per product, parse all the files and data  
associated with it and add it as text to fields.  If the search  
system is simple in that fielded search is not needed, simply create  
two fields per Document: id and text.  Field "id" is the product id,  
and "text" is an aggregation of all the text associated with the  
product regardless of where it came from (careful if you're doing  
string concatenation to put whitespace between so you don't blur  
words together).

There are many other ways to approach this and my recommendation is  
just the simplest one based on the description of your needs.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 05:05:07 2005
Return-Path: <java-user-return-14742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46153 invoked from network); 6 Jun 2005 05:05:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 05:05:07 -0000
Received: (qmail 78143 invoked by uid 500); 6 Jun 2005 05:05:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78084 invoked by uid 500); 6 Jun 2005 05:05:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78066 invoked by uid 99); 6 Jun 2005 05:05:00 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 05 Jun 2005 22:04:59 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 02A025B7AA; Sun,  5 Jun 2005 22:04:54 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 018017F467
	for <java-user@lucene.apache.org>; Sun,  5 Jun 2005 22:04:54 -0700 (PDT)
Date: Sun, 5 Jun 2005 22:04:53 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: What *is* a lucene document?
In-Reply-To: <E5D73A6C-0E48-4515-B0D5-493D9B620DD3@ehatchersolutions.com>
Message-ID: <Pine.LNX.4.58.0506052150550.22609@hal.rescomp.berkeley.edu>
References: <42A2899D.6060303@yahoo.com> <E5D73A6C-0E48-4515-B0D5-493D9B620DD3@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: There are many other ways to approach this and my recommendation is
: just the simplest one based on the description of your needs.

I'd like to add one thing to Erik's excellent advice, something many
people (especially people use to dealing with rgorously structured data)
tend to overlook:

   Documents in a Lucene index can be heterogenous.

You can have some documents in your index with fields A, B, and C; and you
can have other documents in your index with field X, Y and Z.  And in some
cases you can have a search result of docs from that first set of
documents, in other cases you can have a search result with docs from the
second set, or you can return a mixed bag of both -- it all depends on how
you structure your query, and which fields you search on.

Consider a simplified example of your orriginal question:  What if you had
products with specs, and reviews of produduts.  You could have one
document per review, indexing all the text of the review, and the product
Ids of the products mentioned in it.  You can also have one document per
product, indexing all the spec data.  If a user does a search for "dell"
you can return results containing a mix of products and reviews that
contain the word dell.  By making the product Id field stored and indexed
in all documents, you can even provide links next to reviews to see all
the products mentioned in the review, or next to a product to see all
reviews that mention that product.

There's no need to limit yourself and say "based on my data, I will make
one document per X in my data model." you can make one doc per X, and one
doc per Y, and one doc per Z -- all depending on the desired behavior at
search time.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 07:00:35 2005
Return-Path: <java-user-return-14743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 748 invoked from network); 6 Jun 2005 07:00:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 07:00:35 -0000
Received: (qmail 30301 invoked by uid 500); 6 Jun 2005 07:00:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30249 invoked by uid 500); 6 Jun 2005 07:00:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30186 invoked by uid 99); 6 Jun 2005 07:00:24 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=HTML_MESSAGE,MIME_BOUND_NEXTPART,SUBJ_ALL_CAPS,UPPERCASE_50_75
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 06 Jun 2005 00:00:21 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IHNHMC00.PC2 for <java-user@lucene.apache.org>; Mon, 6
          Jun 2005 12:19:24 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <java-user@lucene.apache.org>
Subject: RE REQUEST: SPECIFIC HIT
Date: Mon, 6 Jun 2005 12:10:57 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKEEKJCDAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPartTM-000-068dcfb4-fdae-4d07-911c-12aba9609fc5"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPartTM-000-068dcfb4-fdae-4d07-911c-12aba9609fc5
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0000_01C56A90.CBFD7EF0"

------=_NextPart_000_0000_01C56A90.CBFD7EF0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hi

Guys.

Apologies.....

with refrence to my last main dted  Mon, 14 Mar 2005

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200503.mbox/%3COBE
LINLGKPEMCIEIJJNKEEIACCAA.karthik@controlnet.co.in%3E

I would like to again request some Help in the search Concepts.

I have Indexed documents sucessfully and they would be

Document 1 contains   =   ELECTRONICS  DIGITAL CAMERA
Document 2 contains   =   ELECTRONICS  DIGITAL CAMERA BATTERY ACCESSORIES
Document 3 contains   =   ELECTRONICS  DIGITAL CAMERA 0PTICS
Document 4 contains   =   ELECTRONICS  DIGITAL CAMERA ACCESSORIES
Document 5 contains   =   ELECTRONICS  DIGITAL CAMERA CABEL ACCESSORIES
Document 6 contains   =   ELECTRONICS  DIGITAL CAMERA OPTICS CABEL
ACCESSORIES
Document 7 contains   =   ELECTRONICS  DIGITAL CAMERA APPERAL ACCESSORIES

On Search  "Digital Camera Optics" , the hit has to return me 3rd Document
ONLY
instead of other Documents  [ The word DIGITAL CAMERA is common word in all
cases and could be in any order of sequence].

To Solve this Problem I creating a new Field called 'IGNORE WORD' and this
field would be as shown below

Document 1 contains   =   ELECTRONICS  DIGITAL CAMERA
'IGNORE WORD = BATTERY,ACCESSORIES,0PTICS,CABEL,APPERAL

Document 2 contains   =   ELECTRONICS  DIGITAL CAMERA BATTERY ACCESSORIES
'IGNORE WORD = ACCESSORIES,0PTICS,CABEL,APPERAL

Document 3 contains   =   ELECTRONICS  DIGITAL CAMERA 0PTICS
'IGNORE WORD = BATTERY,ACCESSORIES,CABEL,APPERAL

Document 4 contains   =   ELECTRONICS  DIGITAL CAMERA ACCESSORIES
'IGNORE WORD = BATTERY,0PTICS,CABEL,APPERAL

Document 5 contains   =   ELECTRONICS  DIGITAL CAMERA CABEL ACCESSORIE
'IGNORE WORD = BATTERY,0PTICS,APPERAL

Document 6 contains   =   ELECTRONICS  DIGITAL CAMERA OPTICS CABEL
ACCESSORIES
'IGNORE WORD = BATTERY,APPERAL

Document 7 contains   =   ELECTRONICS  DIGITAL CAMERA APPERAL ACCESSORIES
'IGNORE WORD = BATTERY,0PTICS,CABEL


For Every search I feed the 'IGNORE WORD' to the query such as


Search  = DIGITAL CAMERA 0PTICS
Query   = +KEYSRC:Digital +KEYSRC:Camera +KEYSRC:Cabel -KEYSRC:(BATTERY
ACCESSORIES CABEL APPERAL)

The resultant hit would be the 3rd doc instead of 3rd and 5th..


The Problem here is of 2 conditions

1) Search could be  DIGITAL CAMERA 0PTICS  or OPTICS CAMERAS DIIGTAL  or
CAMERA OPTICS should retrieve same hit results.

2) The process of creation of  'IGNORE WORD' list is very time
consuming...[ Document is in very large numbers ]
    and also permutation /combination for the same is very expensive.

 Does anybody in here have some idea on how to process.


Thx in advance
Karthik


------=_NextPart_000_0000_01C56A90.CBFD7EF0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<STYLE><!-- body, P.msoNormal, LI.msoNormal, PRE, BLOCKQUOTE, a, MENU, =
dd, UL, DT { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } dir, ADDRESS, h1, h2, h3, h4, h5, =
h6, HR { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } --></STYLE>

<META content=3D"MSHTML 6.00.2600.0" name=3DGENERATOR></HEAD>
<BODY id=3DridBody>
<P><SPAN class=3D437191606-06062005><FONT face=3DVerdana =
size=3D2>Hi</FONT></SPAN></P>
<P><SPAN class=3D437191606-06062005><FONT face=3DVerdana=20
size=3D2>Guys.</FONT></SPAN></P>
<P><SPAN class=3D437191606-06062005><FONT face=3DVerdana=20
size=3D2>Apologies.....</FONT></SPAN></P>
<P><SPAN class=3D437191606-06062005><FONT face=3DVerdana size=3D2>with =
refrence to my=20
last main dted&nbsp;<!--StartFragment --><FONT size=3D3> Mon, 14 Mar =
2005=20
</FONT></FONT></SPAN></P>
<P><SPAN class=3D437191606-06062005><FONT face=3DVerdana size=3D2><A=20
href=3D"http://mail-archives.apache.org/mod_mbox/lucene-java-user/200503.=
mbox/%3COBELINLGKPEMCIEIJJNKEEIACCAA.karthik@controlnet.co.in%3E">http://=
mail-archives.apache.org/mod_mbox/lucene-java-user/200503.mbox/%3COBELINL=
GKPEMCIEIJJNKEEIACCAA.karthik@controlnet.co.in%3E</A>&nbsp;</FONT></SPAN>=
</P>
<P><SPAN class=3D437191606-06062005><FONT face=3DVerdana size=3D2>I =
would like to=20
again request some Help in the search Concepts.</FONT></SPAN><SPAN=20
class=3D437191606-06062005><FONT face=3DVerdana =
size=3D2>&nbsp;</FONT></P><PRE><FONT face=3DVerdana><FONT size=3D2>I =
have Indexed documents sucessfully and they would be=20
</FONT></FONT><FONT face=3DVerdana><FONT =
size=3D2></FONT></FONT></PRE><PRE><FONT face=3DVerdana><FONT =
size=3D2>Document 1 contains   =3D   ELECTRONICS  DIGITAL CAMERA
Document 2 contains   =3D   ELECTRONICS  DIGITAL CAMERA BATTERY =
ACCESSORIES</FONT></FONT></PRE><PRE><FONT face=3DVerdana><FONT =
size=3D2>Document 3 contains   =3D   ELECTRONICS  DIGITAL CAMERA 0PTICS
Document 4 contains   =3D   ELECTRONICS  DIGITAL CAMERA ACCESSORIES
Document 5 contains   =3D   ELECTRONICS  DIGITAL CAMERA CABEL =
ACCESSORIES
Document 6 contains   =3D   ELECTRONICS  DIGITAL CAMERA OPTICS CABEL =
ACCESSORIES
Document 7 contains   =3D   ELECTRONICS  DIGITAL CAMERA APPERAL =
ACCESSORIES
</FONT></FONT></PRE><PRE><FONT face=3DVerdana><FONT size=3D2>On Search  =
"Digital Camera Optics" , the hit has to return me 3rd Document ONLY
instead of other Documents  [ The word DIGITAL CAMERA is common word in =
all cases and could be in any order of =
sequence].</FONT></FONT></PRE><PRE><FONT face=3DVerdana =
size=3D2></FONT>&nbsp;</PRE><PRE><FONT face=3DVerdana size=3D2>To Solve =
this Problem I creating a new Field called 'IGNORE WORD' and this field =
would be as shown below</FONT></PRE><PRE><FONT face=3DVerdana =
size=3D2></FONT>&nbsp;</PRE><PRE><FONT face=3DVerdana size=3D2>Document =
1 contains   =3D   ELECTRONICS  DIGITAL CAMERA                           =
          </FONT></PRE><PRE><FONT face=3DVerdana size=3D2>'IGNORE WORD =
=3D BATTERY,ACCESSORIES,0PTICS,CABEL,APPERAL</FONT></PRE><PRE><FONT =
face=3DVerdana size=3D2></FONT>&nbsp;</PRE><PRE><FONT face=3DVerdana =
size=3D2>Document 2 contains   =3D   ELECTRONICS  DIGITAL CAMERA BATTERY =
ACCESSORIES     </FONT></PRE><PRE><FONT face=3DVerdana size=3D2>'IGNORE =
WORD =3D ACCESSORIES,0PTICS,CABEL,APPERAL</FONT></PRE><PRE><FONT =
face=3DVerdana size=3D2></FONT>&nbsp;</PRE><PRE><FONT face=3DVerdana =
size=3D2>Document 3 contains   =3D   ELECTRONICS  DIGITAL CAMERA =
0PTICS</FONT></PRE><PRE><FONT face=3DVerdana size=3D2>'IGNORE WORD =3D =
BATTERY,ACCESSORIES,CABEL,APPERAL</FONT></PRE><PRE><FONT face=3DVerdana =
size=3D2></FONT>&nbsp;</PRE><PRE><FONT face=3DVerdana size=3D2>Document =
4 contains   =3D   ELECTRONICS  DIGITAL CAMERA ACCESSORIES
'IGNORE WORD =3D BATTERY,0PTICS,CABEL,APPERAL</FONT></PRE><PRE><FONT =
face=3DVerdana size=3D2></FONT>&nbsp;</PRE><PRE><FONT face=3DVerdana =
size=3D2>Document 5 contains   =3D   ELECTRONICS  DIGITAL CAMERA CABEL =
ACCESSORIE</FONT></PRE><PRE></SPAN><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2>'IGNORE WORD =
=3D BATTERY,0PTICS,APPERAL</FONT></SPAN></PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana =
size=3D2></FONT></SPAN>&nbsp;</PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2>Document 6 =
contains   =3D   ELECTRONICS  DIGITAL CAMERA OPTICS CABEL =
ACCESSORIES</FONT></SPAN></PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2>'IGNORE WORD =
=3D BATTERY,APPERAL</FONT></SPAN></PRE><PRE><SPAN =
class=3D437191606-06062005></SPAN><SPAN class=3D437191606-06062005><FONT =
face=3DVerdana size=3D2></FONT></SPAN>&nbsp;</PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2>Document 7 =
contains   =3D   ELECTRONICS  DIGITAL CAMERA APPERAL =
ACCESSORIES</FONT></SPAN></PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2>'IGNORE WORD =
=3D BATTERY,0PTICS,CABEL</FONT></SPAN></PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana =
size=3D2></FONT></SPAN>&nbsp;</PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana =
size=3D2></FONT></SPAN>&nbsp;</PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2>For Every =
search I feed the <SPAN class=3D437191606-06062005><FONT face=3DVerdana =
size=3D2>'IGNORE WORD' to the query such =
as</FONT></SPAN></FONT></SPAN></PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005></SPAN></FONT></SPAN>&nbsp;</PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005></SPAN></FONT></SPAN>&nbsp;</PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005>Search  =3D DIGITAL CAMERA 0PTICS =
</SPAN></FONT></SPAN></PRE><PRE><SPAN class=3D437191606-06062005><FONT =
face=3DVerdana size=3D2><SPAN class=3D437191606-06062005>Query   =3D =
+KEYSRC:Digital +KEYSRC:Camera +KEYSRC:Cabel -KEYSRC:(BATTERY =
ACCESSORIES CABEL APPERAL)</SPAN></FONT></SPAN></PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005></SPAN></FONT></SPAN>&nbsp;</PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005>The resultant hit would be the 3rd doc =
instead of 3rd and 5th..</SPAN></FONT></SPAN></PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005></SPAN></FONT></SPAN>&nbsp;</PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005></SPAN></FONT></SPAN>&nbsp;</PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005>The Problem here is of 2 =
conditions</SPAN></FONT></SPAN></PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005></SPAN></FONT></SPAN>&nbsp;</PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005>1) Search could be  DIGITAL CAMERA 0PTICS  or =
OPTICS CAMERAS DIIGTAL  or CAMERA OPTICS should retrieve same hit =
results.</SPAN></FONT></SPAN></PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005></SPAN></FONT></SPAN>&nbsp;</PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005>2) The process of creation of  <SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2>'IGNORE WORD' =
list is very time consuming...[ Document is in very large numbers =
]</FONT></SPAN></SPAN></FONT></SPAN></PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005><SPAN class=3D437191606-06062005>    and also =
permutation /combination for the same is very =
expensive.</SPAN></SPAN></FONT></SPAN></PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005><SPAN =
class=3D437191606-06062005></SPAN></SPAN></FONT></SPAN>&nbsp;</PRE><PRE><=
SPAN class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005><SPAN class=3D437191606-06062005> Does =
anybody in here have some idea on how to =
process.</SPAN></SPAN></FONT></SPAN></PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005><SPAN =
class=3D437191606-06062005></SPAN></SPAN></FONT></SPAN>&nbsp;</PRE><PRE><=
SPAN class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005><SPAN =
class=3D437191606-06062005></SPAN></SPAN></FONT></SPAN>&nbsp;</PRE><PRE><=
SPAN class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005><SPAN class=3D437191606-06062005>Thx in =
advance</SPAN></SPAN></FONT></SPAN></PRE><PRE><SPAN =
class=3D437191606-06062005><FONT face=3DVerdana size=3D2><SPAN =
class=3D437191606-06062005><SPAN =
class=3D437191606-06062005>Karthik</SPAN></SPAN></FONT></SPAN></PRE></BOD=
Y></HTML>

------=_NextPart_000_0000_01C56A90.CBFD7EF0--



------=_NextPartTM-000-068dcfb4-fdae-4d07-911c-12aba9609fc5
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPartTM-000-068dcfb4-fdae-4d07-911c-12aba9609fc5--


From java-user-return-14744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 09:24:09 2005
Return-Path: <java-user-return-14744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80085 invoked from network); 6 Jun 2005 09:24:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 09:24:09 -0000
Received: (qmail 14565 invoked by uid 500); 6 Jun 2005 09:24:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14497 invoked by uid 500); 6 Jun 2005 09:24:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14481 invoked by uid 99); 6 Jun 2005 09:24:01 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_AHBL_RHSBL,DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ms001msg.fastwebnet.it (HELO ms001msg.fastwebnet.it) (213.140.2.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 02:23:58 -0700
Received: from mndev.cs.ucl.ac.uk (128.16.12.205) by ms001msg.fastwebnet.it (7.2.052.3) (authenticated as stefano.buliani)
        id 4276BF530091E88E for java-user@lucene.apache.org; Mon, 6 Jun 2005 11:21:54 +0200
Subject: searches and updates concurrency problem
From: Stefano Buliani <stefano.buliani@fastwebnet.it>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Mon, 06 Jun 2005 10:11:15 +0100
Message-Id: <1118049075.14987.18.camel@mndev>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.2 (2.0.2-3) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi everyone,
I'm a newbie of Lucene, just installed it.
My problem is that the index update procedure and the searches could run
simultaneously, and, if they do, they corrupt the index file.
Is there a way to let Lucene handle this concurrency automatically (like
stop the searches till the update is finished)?
Thanks,
	Stefano


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 09:42:40 2005
Return-Path: <java-user-return-14745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87690 invoked from network); 6 Jun 2005 09:42:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 09:42:40 -0000
Received: (qmail 54932 invoked by uid 500); 6 Jun 2005 09:42:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54910 invoked by uid 500); 6 Jun 2005 09:42:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54886 invoked by uid 99); 6 Jun 2005 09:42:33 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of blizzy-keyword-lucene_user.f5486d@blizzy.de designates 212.79.22.222 as permitted sender)
Received: from subshell.com (HELO subshell.com) (212.79.22.222)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 02:42:31 -0700
Received: (qmail 4331 invoked from network); 6 Jun 2005 11:42:01 +0200
Received: from unknown (HELO ?10.0.0.10?) (212.79.22.193)
  by subshell.com with SMTP; 6 Jun 2005 11:42:01 +0200
Message-ID: <42A41A69.7060407@blizzy.de>
Date: Mon, 06 Jun 2005 11:42:01 +0200
From: Maik Schreiber <blizzy-keyword-lucene_user.f5486d@blizzy.de>
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050326)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: searches and updates concurrency problem
References: <1118049075.14987.18.camel@mndev>
In-Reply-To: <1118049075.14987.18.camel@mndev>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> My problem is that the index update procedure and the searches could run
> simultaneously, and, if they do, they corrupt the index file.
> Is there a way to let Lucene handle this concurrency automatically (like
> stop the searches till the update is finished)?

Lucene does not handle this by itself but relies on outside synchronization.
You might want to have a look at LuceneIndexAccessor (please see
http://issues.apache.org/bugzilla/show_bug.cgi?id=34995)

-- 
Maik Schreiber   *   http://www.blizzy.de

GPG public key: http://pgp.mit.edu:11371/pks/lookup?op=get&search=0x1F11D713
Key fingerprint: CF19 AFCE 6E3D 5443 9599 18B5 5640 1F11 D713

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 10:43:10 2005
Return-Path: <java-user-return-14746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29398 invoked from network); 6 Jun 2005 10:43:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 10:43:10 -0000
Received: (qmail 87033 invoked by uid 500); 6 Jun 2005 10:43:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86990 invoked by uid 500); 6 Jun 2005 10:43:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86971 invoked by uid 99); 6 Jun 2005 10:43:02 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of thomanski@gmx.de designates 213.165.64.20 as permitted sender)
Received: from pop.gmx.net (HELO mail.gmx.net) (213.165.64.20)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 06 Jun 2005 03:42:59 -0700
Received: (qmail 32003 invoked by uid 0); 6 Jun 2005 10:42:46 -0000
Received: from 84.143.90.99 by www48.gmx.net with HTTP;
	Mon, 6 Jun 2005 12:42:46 +0200 (MEST)
Date: Mon, 6 Jun 2005 12:42:46 +0200 (MEST)
From: =?ISO-8859-1?Q?=22Thomas_Pl=FCmpe=22?= <thomanski@gmx.de>
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <1118049075.14987.18.camel@mndev>
Subject: Re: searches and updates concurrency problem
X-Priority: 3 (Normal)
X-Authenticated: #1165889
Message-ID: <1857.1118054566@www48.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Stefano,

well done. It's not for sure that the concurrently running
updates and searches do corrupt the index (a full update that
removes the files and rebuilds them can obviously do so), but
I'm sure they'll get the point and will tell us how things like
that are handled.

Best,
Thomas


> --- Ursprngliche Nachricht ---
> Von: Stefano Buliani <stefano.buliani@fastwebnet.it>
> An: java-user@lucene.apache.org
> Betreff: searches and updates concurrency problem
> Datum: Mon, 06 Jun 2005 10:11:15 +0100
> 
> Hi everyone,
> I'm a newbie of Lucene, just installed it.
> My problem is that the index update procedure and the searches could run
> simultaneously, and, if they do, they corrupt the index file.
> Is there a way to let Lucene handle this concurrency automatically (like
> stop the searches till the update is finished)?
> Thanks,
> 	Stefano
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
Geschenkt: 3 Monate GMX ProMail gratis + 3 Ausgaben stern gratis
++ Jetzt anmelden & testen ++ http://www.gmx.net/de/go/promail ++

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 11:07:40 2005
Return-Path: <java-user-return-14747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69234 invoked from network); 6 Jun 2005 11:07:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 11:07:40 -0000
Received: (qmail 40026 invoked by uid 500); 6 Jun 2005 11:07:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40001 invoked by uid 500); 6 Jun 2005 11:07:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39942 invoked by uid 99); 6 Jun 2005 11:07:31 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from panacea.is.nl (HELO panacea.is.nl) (213.133.34.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 04:07:29 -0700
Received: from hai01.hippo.local ([213.133.51.241]) by panacea.is.nl with Microsoft SMTPSVC(5.0.2195.4905);
	 Mon, 6 Jun 2005 13:06:17 +0200
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
Subject: RE: deleting on a keyword field
Date: Mon, 6 Jun 2005 13:07:16 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C41A7B1@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: deleting on a keyword field
Thread-Index: AcVoZ1DidrqAqqM0RpGpE6YSowzYhACHGcXA
From: "Max Pfingsthorn" <m.pfingsthorn@hippo.nl>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Jun 2005 11:06:17.0092 (UTC) FILETIME=[C2C7A440:01C56A87]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi!

Thanks for all the replies. I do know that the readers should be =
reopened, but that is not the problem. I try to remove some docs, and =
add their new versions again to incrementally update the index. After =
updating the index with the same document twice, I opened the index in =
luke. There I saw that the file's uri was present three times in the uri =
field. So, I concluded, it didn't delete the docs right as there are in =
total three documents which contain this term, right? By the way, =
Reader.delete() returned 0 as well.

I thought I used Field.Keyword(), but actually I use

doc.add(new Field(URI_FIELD, uri, true, true, false));

to add the uri to the doc. I can see it in luke, and even find the docs =
when searching for it (using the KeywordAnalyzer).

Any ideas?

Thanks!
max


-----Original Message-----
From: Daniel Naber [mailto:lucenelist@danielnaber.de]
Sent: Friday, June 03, 2005 20:10
To: java-user@lucene.apache.org
Subject: Re: deleting on a keyword field


On Friday 03 June 2005 18:50, Max Pfingsthorn wrote:

> reader.delete(new Term(URI_FIELD, uri));
>
> This does not remove anything. Do I have to make the uri a normal =
field?

How do you know nothing was deleted? Are you aware that you need to =
re-open=20
your IndexSearcher/Reader in order to see the changes made to the index?

Regards
 Daniel

--=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 14:31:26 2005
Return-Path: <java-user-return-14748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75484 invoked from network); 6 Jun 2005 14:31:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 14:31:26 -0000
Received: (qmail 19299 invoked by uid 500); 6 Jun 2005 14:31:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19219 invoked by uid 500); 6 Jun 2005 14:31:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19202 invoked by uid 99); 6 Jun 2005 14:31:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.197 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.197)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 07:31:16 -0700
Received: by rproxy.gmail.com with SMTP id b11so797968rne
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2005 07:30:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=YZ8Twd18+OYhXIQTwZWPBnRjHJTQQGog1m2TozF0FvymvqXlZJ81L1xwlia8PtiV+cNj2KIDye2SUgGJTzmpjgDWQnm+rFgjIB2xRCWE61HNolND2zWNz0cld4QTGamvaTa+/RPSAcOXQy8q/zP1C0mrNx4YaFsd7GqF9gfMJNw=
Received: by 10.38.71.22 with SMTP id t22mr281467rna;
        Mon, 06 Jun 2005 07:24:10 -0700 (PDT)
Received: by 10.38.12.41 with HTTP; Mon, 6 Jun 2005 07:24:10 -0700 (PDT)
Message-ID: <c68e39170506060724339e6832@mail.gmail.com>
Date: Mon, 6 Jun 2005 10:24:10 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org, John Wang <john.wang@gmail.com>
Subject: Re: FieldCache and Sort
In-Reply-To: <8837fb77050601120840322700@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <8837fb77050601120840322700@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Why do we keep the lookup array around?
The actual field value is needed to sort results from multiple
searchers (multisearcher).

-Yonik

On 6/1/05, John Wang <john.wang@gmail.com> wrote:
> Hi:
>=20
>    In the current Lucene sorting implementation, FieldCache is used to
> retrieve 2 arrays, the lookup array and the order array. The order
> array at load time stores the position of the term in the lookup
> array. The lookup array is already sorted because it is read in from
> the index.
>=20
>    My question is that since the order array contains all the
> information on the order of the terms, why do we keep it around in
> memory? Can we implement a SortComparator that is more memory
> efficient?
>=20
>=20
> Just and idea
>=20
> Thanks
>=20
> -John
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 17:03:09 2005
Return-Path: <java-user-return-14749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82939 invoked from network); 6 Jun 2005 17:03:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 17:03:09 -0000
Received: (qmail 87041 invoked by uid 500); 6 Jun 2005 17:03:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87016 invoked by uid 500); 6 Jun 2005 17:03:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87002 invoked by uid 99); 6 Jun 2005 17:03:02 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=FORGED_RCVD_HELO,UPPERCASE_50_75
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr6.xs4all.nl (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 10:02:59 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.3/8.13.3) with ESMTP id j56H2YIc045218
	for <java-user@lucene.apache.org>; Mon, 6 Jun 2005 19:02:34 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: RE REQUEST: SPECIFIC HIT
Date: Mon, 6 Jun 2005 19:02:33 +0200
User-Agent: KMail/1.5.4
References: <OBELINLGKPEMCIEIJJNKEEKJCDAA.karthik@controlnet.co.in>
In-Reply-To: <OBELINLGKPEMCIEIJJNKEEKJCDAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506061902.33774.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 06 June 2005 08:40, Karthik N S wrote:
> Hi
> 
> Guys.
> 
> Apologies.....
> 
> with refrence to my last main dted  Mon, 14 Mar 2005
> 
> http://mail-archives.apache.org/mod_mbox/lucene-java-user/200503.mbox/%3COBE
> LINLGKPEMCIEIJJNKEEIACCAA.karthik@controlnet.co.in%3E
> 
> I would like to again request some Help in the search Concepts.
> 
> I have Indexed documents sucessfully and they would be
> 
> Document 1 contains   =   ELECTRONICS  DIGITAL CAMERA
> Document 2 contains   =   ELECTRONICS  DIGITAL CAMERA BATTERY ACCESSORIES
> Document 3 contains   =   ELECTRONICS  DIGITAL CAMERA 0PTICS
> Document 4 contains   =   ELECTRONICS  DIGITAL CAMERA ACCESSORIES
> Document 5 contains   =   ELECTRONICS  DIGITAL CAMERA CABEL ACCESSORIES
> Document 6 contains   =   ELECTRONICS  DIGITAL CAMERA OPTICS CABEL
> ACCESSORIES
> Document 7 contains   =   ELECTRONICS  DIGITAL CAMERA APPERAL ACCESSORIES
> 
> On Search  "Digital Camera Optics" , the hit has to return me 3rd Document
> ONLY
> instead of other Documents  [ The word DIGITAL CAMERA is common word in all
> cases and could be in any order of sequence].
> 
> To Solve this Problem I creating a new Field called 'IGNORE WORD' and this
> field would be as shown below
> 
> Document 1 contains   =   ELECTRONICS  DIGITAL CAMERA
> 'IGNORE WORD = BATTERY,ACCESSORIES,0PTICS,CABEL,APPERAL
> 
> Document 2 contains   =   ELECTRONICS  DIGITAL CAMERA BATTERY ACCESSORIES
> 'IGNORE WORD = ACCESSORIES,0PTICS,CABEL,APPERAL
> 
> Document 3 contains   =   ELECTRONICS  DIGITAL CAMERA 0PTICS
> 'IGNORE WORD = BATTERY,ACCESSORIES,CABEL,APPERAL
> 
> Document 4 contains   =   ELECTRONICS  DIGITAL CAMERA ACCESSORIES
> 'IGNORE WORD = BATTERY,0PTICS,CABEL,APPERAL
> 
> Document 5 contains   =   ELECTRONICS  DIGITAL CAMERA CABEL ACCESSORIE
> 'IGNORE WORD = BATTERY,0PTICS,APPERAL
> 
> Document 6 contains   =   ELECTRONICS  DIGITAL CAMERA OPTICS CABEL
> ACCESSORIES
> 'IGNORE WORD = BATTERY,APPERAL
> 
> Document 7 contains   =   ELECTRONICS  DIGITAL CAMERA APPERAL ACCESSORIES
> 'IGNORE WORD = BATTERY,0PTICS,CABEL
> 
> 
> For Every search I feed the 'IGNORE WORD' to the query such as
> 
> 
> Search  = DIGITAL CAMERA 0PTICS
> Query   = +KEYSRC:Digital +KEYSRC:Camera +KEYSRC:Cabel -KEYSRC:(BATTERY
> ACCESSORIES CABEL APPERAL)
> 
> The resultant hit would be the 3rd doc instead of 3rd and 5th..
> 
> 
> The Problem here is of 2 conditions
> 
> 1) Search could be  DIGITAL CAMERA 0PTICS  or OPTICS CAMERAS DIIGTAL  or
> CAMERA OPTICS should retrieve same hit results.

Here (and also above) 'optics' is written in to forms:
starting with a zero as 0PTICS, and
starting with a capital O as OPTICS.

Is that perhaps part of the problem?

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 17:22:59 2005
Return-Path: <java-user-return-14750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89458 invoked from network); 6 Jun 2005 17:22:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 17:22:59 -0000
Received: (qmail 32020 invoked by uid 500); 6 Jun 2005 17:22:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31979 invoked by uid 500); 6 Jun 2005 17:22:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31946 invoked by uid 99); 6 Jun 2005 17:22:49 -0000
X-ASF-Spam-Status: No, hits=4.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FORGED_YAHOO_RCVD,FROM_ENDS_IN_NUMS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web32107.mail.mud.yahoo.com (HELO web32107.mail.mud.yahoo.com) (68.142.207.121)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 06 Jun 2005 10:22:45 -0700
Received: (qmail 14247 invoked by uid 60001); 6 Jun 2005 17:22:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=qX5EyyBMtIx0RsjG9+15Cd+vmxsueveNxcBBaD8HW7XfroM1ZAS5uDDDxHbiMfsK7L5aOnvYOuFLAifbndVc4bo6Tz8eSgjf13Ij32HeVAFT5URtL01UmAlhPSxNJ+579qodS8j/QBNCxGSPyEN/qjzWLjbnvdRf+F/AwKg90fA=  ;
Message-ID: <20050606172228.14245.qmail@web32107.mail.mud.yahoo.com>
Received: from [206.13.63.69] by web32107.mail.mud.yahoo.com via HTTP; Mon, 06 Jun 2005 10:22:28 PDT
Date: Mon, 6 Jun 2005 10:22:28 -0700 (PDT)
From: Aalap Parikh <aloo77@yahoo.com>
Subject: Re: searches and updates concurrency problem
To: java-user@lucene.apache.org
In-Reply-To: <42A41A69.7060407@blizzy.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

As per my understanding of Lucene, I think concurrent
search and update to an index should not corrupt the
index, given that only a single index-modifying
operation is executing at any point of time. So in
short, you can have multiple search operations and not
more than one index update (add and/or delete)
operation in progress at any time and that should not
corrupt the index.


Thanks,
Aalap.
 
--- Maik Schreiber
<blizzy-keyword-lucene_user.f5486d@blizzy.de> wrote:

> > My problem is that the index update procedure and
> the searches could run
> > simultaneously, and, if they do, they corrupt the
> index file.
> > Is there a way to let Lucene handle this
> concurrency automatically (like
> > stop the searches till the update is finished)?
> 
> Lucene does not handle this by itself but relies on
> outside synchronization.
> You might want to have a look at LuceneIndexAccessor
> (please see
>
http://issues.apache.org/bugzilla/show_bug.cgi?id=34995)
> 
> -- 
> Maik Schreiber   *   http://www.blizzy.de
> 
> GPG public key:
>
http://pgp.mit.edu:11371/pks/lookup?op=get&search=0x1F11D713
> Key fingerprint: CF19 AFCE 6E3D 5443 9599 18B5 5640
> 1F11 D713
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



		
__________________________________ 
Yahoo! Mail 
Stay connected, organized, and protected. Take the tour: 
http://tour.mail.yahoo.com/mailtour.html 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 18:05:49 2005
Return-Path: <java-user-return-14751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10196 invoked from network); 6 Jun 2005 18:05:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 18:05:49 -0000
Received: (qmail 30853 invoked by uid 500); 6 Jun 2005 18:05:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30826 invoked by uid 500); 6 Jun 2005 18:05:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30795 invoked by uid 99); 6 Jun 2005 18:05:41 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lucenelist@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from smtprelay03.ispgateway.de (HELO smtprelay03.ispgateway.de) (80.67.18.15)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 11:05:39 -0700
Received: (qmail 21971 invoked from network); 6 Jun 2005 18:05:04 -0000
Received: from unknown (HELO p54966FC8.dip.t-dialin.net) ([pbs]695637@[84.150.111.200])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 6 Jun 2005 18:05:04 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: searches and updates concurrency problem
Date: Mon, 6 Jun 2005 20:06:16 +0200
User-Agent: KMail/1.8
References: <1118049075.14987.18.camel@mndev>
In-Reply-To: <1118049075.14987.18.camel@mndev>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506062006.16479@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 06 June 2005 11:11, Stefano Buliani wrote:

> My problem is that the index update procedure and the searches could run
> simultaneously, and, if they do, they corrupt the index file.

Search is a read-only thing, so why should it corrupt the index? Even 
having several writers at the same time will not corrupt the index, you'll 
get an IOException because of the lock files instead.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 19:15:13 2005
Return-Path: <java-user-return-14752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45165 invoked from network); 6 Jun 2005 19:15:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 19:15:13 -0000
Received: (qmail 4215 invoked by uid 500); 6 Jun 2005 19:14:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4094 invoked by uid 500); 6 Jun 2005 19:14:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4009 invoked by uid 99); 6 Jun 2005 19:14:57 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS,SUB_FREE_OFFER
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from pop05.mail.atl.earthlink.net (HELO pop05.mail.atl.earthlink.net) (207.69.200.58)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 12:14:53 -0700
Received: from wamui-bichon.atl.sa.earthlink.net ([209.86.224.26])
	by pop05.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1DfN3Y-0001Zq-00
	for java-user@lucene.apache.org; Mon, 06 Jun 2005 15:14:40 -0400
Message-ID: <8356093.1118085280594.JavaMail.root@wamui-bichon.atl.sa.earthlink.net>
Date: Mon, 6 Jun 2005 14:14:40 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Free IR testbed
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Can someone point me to a free ir testbed?

I was hoping for a testbed that has at least 500k+ documents.

I did see TRAC which it looks like a for pay test bed.

Thanks,

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 19:27:12 2005
Return-Path: <java-user-return-14753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71449 invoked from network); 6 Jun 2005 19:27:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 19:27:12 -0000
Received: (qmail 41078 invoked by uid 500); 6 Jun 2005 19:27:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41057 invoked by uid 500); 6 Jun 2005 19:27:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41036 invoked by uid 99); 6 Jun 2005 19:27:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mailer.syr.edu (HELO mailer.syr.edu) (128.230.18.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 12:27:02 -0700
Received: from [128.230.38.212] (syru38-212.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1423084E@mailer.syr.edu>; Mon, 6 Jun 2005 15:26:49 -0400
Message-ID: <42A4A379.2060608@syr.edu>
Date: Mon, 06 Jun 2005 15:26:49 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050411)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Indexing and Hit Highlighting OCR Data
References: <s29f1a8f.096@loc.gov>
In-Reply-To: <s29f1a8f.096@loc.gov>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

There is a proposal to extend indexing (item #11 in the API Changes 
section):

http://wiki.apache.org/jakarta-lucene/Lucene2Whiteboard

An excerpt:

    11. (Hard) Make indexing more flexible, so that one could
    e.g., not store positions or even frequencies, or alternately,
    to store extra information with each position, or to even use
    different posting compression algorithms.

I'm pretty sure that an implementation of this proposal would allow you 
to store the positioning information with each position/token.

Doug Cutting posted recently about this (at the bottom of the message):

http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200505.mbox/%3c4291FDB7.30500@apache.org%3e

Steve

Corey Keith wrote:
> I am involved in a project which is trying to provide searching and 
> hit highlighting on the scanned image of historical newspapers. We
> have an XML based OCR format. A sample is below. We need to index the
> CONTENT attribute of the String element which is the easy part. We
> would like to be able find the "hits" within this XML document in
> order to use the positioning information to draw the highlight boxes
> on the image. It doesn't make a lot of sense to just extract the
> CONTENT and index that because we loose the positioning information.
> My second thought was to make a custom analyzer which dropped
> everything except for the content element and then used the
> highlighting class in the sandbox to reanalyze the XML document and
> mark the hits. With the marked hits in the XML we could find the
> position information and draw on the image. Has anyone else worked
> with OCR information and lucene. What was your approach? Does this
> approach seem sound? Any recommendations?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 19:43:39 2005
Return-Path: <java-user-return-14754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92520 invoked from network); 6 Jun 2005 19:43:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 19:43:39 -0000
Received: (qmail 87989 invoked by uid 500); 6 Jun 2005 19:43:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87959 invoked by uid 500); 6 Jun 2005 19:43:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87945 invoked by uid 99); 6 Jun 2005 19:43:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp02corp.interwoven.com (HELO smtp02corp.interwoven.com) (65.161.4.46)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 12:43:27 -0700
Received: from exbesv01.Interwoven.com (localhost [127.0.0.1])
	by smtp02corp.interwoven.com (8.12.10/8.12.10) with ESMTP id j56JgiJB006335
	for <java-user@lucene.apache.org>; Mon, 6 Jun 2005 12:43:05 -0700 (PDT)
Received: from exbecg01.Interwoven.com ([10.5.18.35]) by exbesv01.Interwoven.com with Microsoft SMTPSVC(6.0.3790.211);
	 Mon, 6 Jun 2005 12:42:52 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C56ACD.1114E767"
Subject: Is there a thai language analyzer available
Date: Mon, 6 Jun 2005 14:22:22 -0500
Message-ID: <91B8D84A21EFD746B9191AC1CFD665490149E1A6@exbecg01.Interwoven.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Is there a thai language analyzer available
Thread-Index: AcVqzRCHo2mpLiNMQryMawRo8m2xTQ==
From: "Randy Darling" <rdarling@interwoven.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Jun 2005 19:42:52.0149 (UTC) FILETIME=[ED460250:01C56ACF]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C56ACD.1114E767
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Does anyone know of a good Thai language analyzer for Lucene?
=20
I saw this email out there for a Thai language analyzer:
=20
http://mail-archives.apache.org/mod_mbox/jakarta-lucene-dev/200402.mbox/
%3C20040218004604.61360.qmail@web41501.mail.yahoo.com%3E
=20
But it looks like it requires modifying the existing parser which I
would prefer not to do if I do not have to.
=20
Thanks,
Randy Darling

------_=_NextPart_001_01C56ACD.1114E767--

From java-user-return-14755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 20:15:28 2005
Return-Path: <java-user-return-14755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21117 invoked from network); 6 Jun 2005 20:15:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 20:15:28 -0000
Received: (qmail 76248 invoked by uid 500); 6 Jun 2005 20:15:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76186 invoked by uid 500); 6 Jun 2005 20:15:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76128 invoked by uid 99); 6 Jun 2005 20:15:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from vpn3.cymfony.com (HELO webmail.cymfony.com) (65.209.1.80)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 13:15:17 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: issues with concurrent indexing and searching with HitCollector 
Date: Mon, 6 Jun 2005 16:13:57 -0400
Message-ID: <13F36D2926AD444697093282F20041B701322804@buf-ex01.cymfony.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: issues with concurrent indexing and searching with HitCollector 
Thread-Index: AcVq1ET4A1VJmyXFSuWLSlm/8+JgYg==
From: "Peter Kim" <pkim@cymfony.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I did a quick google search and couldn't find any info on this...

I seem to be having a problem when I try to execute a search using a
HitCollector while the index is being indexed. Does it make sense that I
could be getting this error because the index is being merged while the
HitCollector is sifting through the results and therefore some of the
files are being renamed/deleted/moved?

Here's the error:
java.io.FileNotFoundException: /cym/dciindex/_x22w.fnm (No such file or
directory)
	java.io.RandomAccessFile.open(Native Method)
	java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
=09
org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java
:376)
=09
org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
=09
org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
	org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:53)
=09
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:109)
=09
org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:94)
=09
org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:122)
	org.apache.lucene.store.Lock$With.run(Lock.java:109)
	org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
	org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
=09
org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)

Thanks!
peter

-----
Peter Kim
Software Engineer
pkim@cymfony.com

Cymfony
125 Walnut Street, Suite 205
Watertown, MA 02472
tel: 617-673-6031
fax: 617-924-6167
www.cymfony.com =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 20:59:54 2005
Return-Path: <java-user-return-14756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39417 invoked from network); 6 Jun 2005 20:59:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 20:59:54 -0000
Received: (qmail 91726 invoked by uid 500); 6 Jun 2005 20:59:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91674 invoked by uid 500); 6 Jun 2005 20:59:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91648 invoked by uid 99); 6 Jun 2005 20:59:48 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of andyliu1227@gmail.com designates 64.233.184.207 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 13:59:47 -0700
Received: by wproxy.gmail.com with SMTP id 50so3012600wri
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2005 13:59:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=jG3gd+/BeeMylo+WAbEgtxpM/70ZCwUPuJliYtzPF+UbUv+Y5sbdLNQThSaU+N7EDGMKSlkeWgB9H13AAtftBsUcZo/fr+3KWTkn9zv3Xi0G8hmPkgJe0usaJw2Ek/v3LRgocNIMMaUQJaWRRdPHc02ssS5E6RW9gFjhdqssdwc=
Received: by 10.54.123.10 with SMTP id v10mr1240372wrc;
        Mon, 06 Jun 2005 13:59:23 -0700 (PDT)
Received: by 10.54.7.51 with HTTP; Mon, 6 Jun 2005 13:59:23 -0700 (PDT)
Message-ID: <32dca9ed0506061359535a6afc@mail.gmail.com>
Date: Mon, 6 Jun 2005 16:59:23 -0400
From: Andy Liu <andyliu1227@gmail.com>
Reply-To: Andy Liu <andyliu1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Relative term frequency?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is there a way to calculate term frequency scores that are relative to
the number of terms in the field of the document?  We want to override
tf() in this way to curb keyword spamming in web pages.  In
Similarity, only the document's term frequency is passed into the tf()
method:

float tf(int freq)

It would be nice to have something like:

float tf(int freq, String fieldName, int numTerms)

If this isn't available out of the box, how difficult would it be to
hack up Lucene to allow for this?

Thanks,
Andy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 22:03:03 2005
Return-Path: <java-user-return-14757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75547 invoked from network); 6 Jun 2005 22:03:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 22:03:03 -0000
Received: (qmail 59682 invoked by uid 500); 6 Jun 2005 22:02:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59628 invoked by uid 500); 6 Jun 2005 22:02:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59590 invoked by uid 99); 6 Jun 2005 22:02:56 -0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO w10.bloglines.com) (216.148.252.101)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 06 Jun 2005 15:02:54 -0700
Received: (qmail 24425 invoked by uid 99); 6 Jun 2005 22:02:41 -0000
Message-ID: <1118095361.3440113565.24424.sendItem@bloglines.com>
Date: 6 Jun 2005 22:02:41 -0000
From: yahootintin.11533894@bloglines.com
To: java-user@lucene.apache.org
Subject: Calculating idf across multiple indexes
MIME-Version: 1.0
Content-Type: text/plain;charset="utf-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Due to the size of my index, I need to break it into several different
segments.  I have a service that gets a query from the user and contacts each
index searcher service asynchronously and waits for the results.  The results
are then collated and returned to the user.

The problem is that the idf
isn't being calculated correctly because each index searcher service doesn't
know the total document frequency for each term.  How are others working around
this issue?

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 22:33:05 2005
Return-Path: <java-user-return-14758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3610 invoked from network); 6 Jun 2005 22:33:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 22:33:05 -0000
Received: (qmail 29824 invoked by uid 500); 6 Jun 2005 22:32:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29777 invoked by uid 500); 6 Jun 2005 22:32:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29756 invoked by uid 99); 6 Jun 2005 22:32:56 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lucenelist@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from smtprelay02.ispgateway.de (HELO smtprelay02.ispgateway.de) (80.67.18.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 15:32:52 -0700
Received: (qmail 31889 invoked from network); 6 Jun 2005 22:05:54 -0000
Received: from unknown (HELO p54964AA6.dip.t-dialin.net) ([pbs]695637@[84.150.74.166])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 6 Jun 2005 22:05:54 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Calculating idf across multiple indexes
Date: Tue, 7 Jun 2005 00:07:08 +0200
User-Agent: KMail/1.8
References: <1118095361.3440113565.24424.sendItem@bloglines.com>
In-Reply-To: <1118095361.3440113565.24424.sendItem@bloglines.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200506070007.08276@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 07 June 2005 00:02, yahootintin.11533894@bloglines.com wrote:

> =C2=A0How are others working around
> this issue?

This has been fixed in the development version  of Lucene. It's already=20
quite stable, so I suggest to try it (needs to be checked out from SVN).

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 22:49:40 2005
Return-Path: <java-user-return-14759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14517 invoked from network); 6 Jun 2005 22:49:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 22:49:39 -0000
Received: (qmail 76330 invoked by uid 500); 6 Jun 2005 22:49:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76308 invoked by uid 500); 6 Jun 2005 22:49:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76287 invoked by uid 99); 6 Jun 2005 22:49:32 -0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO w10.bloglines.com) (216.148.252.101)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 06 Jun 2005 15:49:28 -0700
Received: (qmail 26070 invoked by uid 99); 6 Jun 2005 22:49:16 -0000
Message-ID: <1118098156.1727431276.26069.sendItem@bloglines.com>
Date: 6 Jun 2005 22:49:16 -0000
From: yahootintin.11533894@bloglines.com
To: java-user@lucene.apache.org
Subject: Re: Calculating idf across multiple indexes
MIME-Version: 1.0
Content-Type: text/plain;charset="utf-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Daniel,

The problem is that if I tell Lucene about only one of the indexes
it has no way of knowing what the total document frequency is across the other
index servers.

Does that make sense?  I think my collator will need to
calculate the idf somehow.

Thanks.

--- java-user@lucene.apache.org wrote:

On Tuesday 07 June 2005 00:02, yahootintin.11533894@bloglines.com wrote:

> 
> > How are others working around
> > this issue?
> 
> This has
been fixed in the development version  of Lucene. It's already 
> quite stable,
so I suggest to try it (needs to be checked out from SVN).
> 
> Regards

>  Daniel
> 
> -- 
> http://www.danielnaber.de
> 
> ---------------------------------------------------------------------

> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For
additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 06 23:07:40 2005
Return-Path: <java-user-return-14760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22978 invoked from network); 6 Jun 2005 23:07:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jun 2005 23:07:40 -0000
Received: (qmail 31324 invoked by uid 500); 6 Jun 2005 23:07:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31301 invoked by uid 500); 6 Jun 2005 23:07:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31287 invoked by uid 99); 6 Jun 2005 23:07:32 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lucenelist@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from smtprelay01.ispgateway.de (HELO smtprelay01.ispgateway.de) (80.67.18.13)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 16:07:29 -0700
Received: (qmail 23717 invoked from network); 6 Jun 2005 23:07:23 -0000
Received: from unknown (HELO p54966093.dip.t-dialin.net) ([pbs]695637@[84.150.96.147])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 6 Jun 2005 23:07:23 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Calculating idf across multiple indexes
Date: Tue, 7 Jun 2005 01:08:36 +0200
User-Agent: KMail/1.8
References: <1118098156.1727431276.26069.sendItem@bloglines.com>
In-Reply-To: <1118098156.1727431276.26069.sendItem@bloglines.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506070108.36299@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 07 June 2005 00:49, yahootintin.11533894@bloglines.com wrote:

> The problem is that if I tell Lucene about only one of the indexes
> it has no way of knowing what the total document frequency is across the
> other index servers.

Can't you use ParallelMultiSearcher and/or RemoteSearchable?

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 00:21:26 2005
Return-Path: <java-user-return-14761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49780 invoked from network); 7 Jun 2005 00:21:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 00:21:25 -0000
Received: (qmail 87335 invoked by uid 500); 7 Jun 2005 00:21:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87263 invoked by uid 500); 7 Jun 2005 00:21:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87249 invoked by uid 99); 7 Jun 2005 00:21:17 -0000
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,INFO_TLD,NO_REAL_NAME,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of afonseca@portugalmail.com designates 195.245.179.73 as permitted sender)
Received: from galadriel.portugalmail.pt (HELO galadriel.portugalmail.pt) (195.245.179.73)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 17:21:16 -0700
Received: by galadriel.portugalmail.pt (Postfix, from userid 30)
	id 9F91C71846; Tue,  7 Jun 2005 01:21:08 +0100 (WEST)
Received: from 213-58-9-99.acesso.portugalmail.pt (213-58-9-99.acesso.portugalmail.pt [213.58.9.99]) 
	by gold.portugalmail.pt (IMP) with HTTP 
	for <afonseca@portugalmail.com@localhost>; Tue,  7 Jun 2005 01:21:08 +0100
Message-ID: <1118103668.42a4e874610d8@gold3.portugalmail.pt>
Date: Tue,  7 Jun 2005 01:21:08 +0100
From: afonseca@portugalmail.com
To: java-user@lucene.apache.org
Subject: log4j:WARN No appenders could be found for logger 
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 4.0-cvs
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi!

I'm newbie in java, and not a real coder.
I'm implementing a digital library (windows)with 2 open sources:
a server aplications called FEDORA (www.fedora.info) and a JSPs interface called ELATED (http://elated.sourceforge.net).

when I start the fedora server I get:

c:\fedora-2.0\server\bin>fedora-start
Starting Fedora server...
Deploying API-M and API-A...
Waiting for server to start...
log4j:WARN No appenders could be found for logger (org.acs.elated.lucene.LuceneInterface).
log4j:WARN Please initialize the log4j system properly.
Processing file C:\fedora-2.0\server\config\deployAPI-A.wsdd
<admin>Done processing</Admin>
Processing file C:\fedora-2.0\server\config\deploy.wsdd
<admin>Done processing</Admin>
Initializing Fedora Server instance...
Fedora Version: 2.0
Fedora Build: 1
Server Host Name: localhost
Server Port: 8080
Debugging: false
OK
Finished.  To stop the server, use fedora-stop.
c:\fedora-2.0\server\bin>

I dont understand the error:
log4j:WARN No appenders could be found for logger (org.acs.elated.lucene.LuceneInterface).
log4j:WARN Please initialize the log4j system properly.

Can anyone tell me what is this error?

Thanks in advance
Antnio Fonseca

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 00:25:13 2005
Return-Path: <java-user-return-14762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50598 invoked from network); 7 Jun 2005 00:25:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 00:25:13 -0000
Received: (qmail 95877 invoked by uid 500); 7 Jun 2005 00:25:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95853 invoked by uid 500); 7 Jun 2005 00:25:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95825 invoked by uid 99); 7 Jun 2005 00:25:04 -0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO w10.bloglines.com) (216.148.252.101)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 06 Jun 2005 17:25:03 -0700
Received: (qmail 18859 invoked by uid 99); 7 Jun 2005 00:24:56 -0000
Message-ID: <1118103896.2890902712.18858.sendItem@bloglines.com>
Date: 7 Jun 2005 00:24:56 -0000
From: yahootintin.11533894@bloglines.com
To: java-user@lucene.apache.org
Subject: Re: Calculating idf across multiple indexes
MIME-Version: 1.0
Content-Type: text/plain;charset="utf-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hmmm... I'll look into that.  I thought the MultiSearcher would still need
access to each index.  Does the RemoteSearchable avoid that?  Will it allow
me to delegate searching to multiple boxes and then collate the results correctly?


Thanks for the tip about the RemoteSearchable.

--- java-user@lucene.apache.org
wrote:
On Tuesday 07 June 2005 00:49, yahootintin.11533894@bloglines.com
wrote:
> 
> > The problem is that if I tell Lucene about only one of the
indexes
> > it has no way of knowing what the total document frequency is
across the
> > other index servers.
> 
> Can't you use ParallelMultiSearcher
and/or RemoteSearchable?
> 
> Regards
>  Daniel
> 
> -- 
> http://www.danielnaber.de

> 
> ---------------------------------------------------------------------

> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For
additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 01:41:26 2005
Return-Path: <java-user-return-14763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87928 invoked from network); 7 Jun 2005 01:41:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 01:41:26 -0000
Received: (qmail 40597 invoked by uid 500); 7 Jun 2005 01:41:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40570 invoked by uid 500); 7 Jun 2005 01:41:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40534 invoked by uid 99); 7 Jun 2005 01:41:19 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of burton@rojo.com designates 12.43.53.196 as permitted sender)
Received: from Unknown (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 18:41:17 -0700
Received: from [192.168.1.146] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id j571f8at022932
	for <java-user@lucene.apache.org>; Mon, 6 Jun 2005 18:41:08 -0700
Message-ID: <42A4FB31.3020509@rojo.com>
Date: Mon, 06 Jun 2005 18:41:05 -0700
From: Kevin Burton <burton@rojo.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Macintosh/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Fastest way to fetch N documents with unique keys within large numbers
 of indexes..
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey.

I'm trying to figure out the FASTEST way to solve this problem.

We have a system where I'll be given 10 or 20 unique keys.  Which are 
stored as non-tokenized fields within Lucene.  Each key represents a 
unique document.

Internally I'm creating a new Term and then calling 
IndexReader.termDocs() on this term.  Then if termdocs.next() matches 
then I'll return this document.

The problem is that this doesn't work very fast either.  This is not an 
academic debate as I've put the system in a profiler and Lucene is the 
top bottleneck (by far).

I don't think there's anything faster than this right?  Could I maybe 
cache a TermEnum and keep it as a pointer to the FIRST field for these 
IDs and then reuse that?  This might allow me to search faster to the 
start of my terms?

Does Lucene internally do a binary search for my term?

I could of course do an index merge of all this content but thats a 
separate problem.  We have a lot of indexes and often have more than 40 
and constantly merging these into a multigig index just takes FOREVER.

It seems that internally IO is the problem. I'm about as fast on IO as I 
can get as I'm on a SCSI RAID array at RAID0 on FAST scsi disks...  I 
also tried tweaking InputStream.BUFFER_SIZE with no visible change in 
performance.

Kevin

-- 


Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
See irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

   Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 02:50:18 2005
Return-Path: <java-user-return-14764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1594 invoked from network); 7 Jun 2005 02:50:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 02:50:18 -0000
Received: (qmail 61178 invoked by uid 500); 7 Jun 2005 02:50:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61143 invoked by uid 500); 7 Jun 2005 02:50:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61129 invoked by uid 99); 7 Jun 2005 02:50:11 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 19:50:09 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4345F5B78F; Mon,  6 Jun 2005 19:49:53 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 405F17F460
	for <java-user@lucene.apache.org>; Mon,  6 Jun 2005 19:49:53 -0700 (PDT)
Date: Mon, 6 Jun 2005 19:49:53 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Fastest way to fetch N documents with unique keys within large
 numbers of indexes..
In-Reply-To: <42A4FB31.3020509@rojo.com>
Message-ID: <Pine.LNX.4.58.0506061946040.28351@hal.rescomp.berkeley.edu>
References: <42A4FB31.3020509@rojo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I haven't profiled either of thse suggestions but:

1) have you tried constructing a BooleanQuery of all 10-20 terms? Is the
   total time to execute the search, and access each Hit slower then your
   termDocs approach?

2) have you tried sorting your terms first, then opening a TermDocs on the
   first one, and seeking to each of the remaining terms?  it seems like
   that would be faster then opening a new TermDocs for each Term.

: The problem is that this doesn't work very fast either.  This is not an
: academic debate as I've put the system in a profiler and Lucene is the
: top bottleneck (by far).

The tricky thing about profiling code: something is allways the bottleneck.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 03:21:01 2005
Return-Path: <java-user-return-14765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11236 invoked from network); 7 Jun 2005 03:21:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 03:21:01 -0000
Received: (qmail 13205 invoked by uid 500); 7 Jun 2005 03:20:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13173 invoked by uid 500); 7 Jun 2005 03:20:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13093 invoked by uid 99); 7 Jun 2005 03:20:50 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rs15.luxsci.com (HELO rs15.luxsci.com) (65.61.166.71)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 20:20:48 -0700
Received: from [192.168.70.100] (ppp115-120.static.internode.on.net [150.101.115.120])
	(authenticated bits=0)
	by rs15.luxsci.com (8.12.11/8.12.11) with ESMTP id j573KWmI008632
	for <java-user@lucene.apache.org>; Mon, 6 Jun 2005 22:20:33 -0500
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42A4FB31.3020509@rojo.com>
References: <42A4FB31.3020509@rojo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2D298772-F6C9-4DDF-9E73-8AE80D9E8A94@cenqua.com>
Content-Transfer-Encoding: 7bit
From: Matt Quail <matt@cenqua.com>
Subject: Re: Fastest way to fetch N documents with unique keys within large numbers of indexes..
Date: Tue, 7 Jun 2005 13:20:28 +1000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> We have a system where I'll be given 10 or 20 unique keys.

I assume you mean you have one unique-key field, and you are given  
10-20 values to find for this one field?
>
> Internally I'm creating a new Term and then calling  
> IndexReader.termDocs() on this term.  Then if termdocs.next()  
> matches then I'll return this document.

Are you calling reader.termDocs() inside a (tight) loop? It might be  
better to create one TermEnum, and use "seek". Something like this:

reader = ...;
td = reader.termDocs();

String[] keys = ....; // your unique keys;
sort(keys); // this probably helps seek() below

for (key in keys) {
     Term t = new Term("unique", key);
     td.seek(t);
     if (td.next()) {
         // found a match
     }
}

I'm pretty sure that will work. And if you can avoid the multi- 
threading issues, you might try and use the same TermDocs object for  
as long as possible (that is, move it up out of as many tight loops  
as you can).

=Matt

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 03:51:52 2005
Return-Path: <java-user-return-14766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19996 invoked from network); 7 Jun 2005 03:51:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 03:51:52 -0000
Received: (qmail 65096 invoked by uid 500); 7 Jun 2005 03:51:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65074 invoked by uid 500); 7 Jun 2005 03:51:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65040 invoked by uid 99); 7 Jun 2005 03:51:46 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=SUBJ_ALL_CAPS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 06 Jun 2005 20:51:44 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IHP4XV00.GIE for <java-user@lucene.apache.org>; Tue, 7
          Jun 2005 09:40:43 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: RE REQUEST: SPECIFIC HIT
Date: Tue, 7 Jun 2005 09:32:17 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKGEKNCDAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <200506061902.33774.paul.elschot@xs4all.nl>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi


Apologies.....

The problem is not with Optics or 'O' ,

Since the 3rd and 6th Document is Indexed as

Document 3 contains   =   ELECTRONICS  DIGITAL CAMERA 0PTICS
Document 6 contains   =   ELECTRONICS  DIGITAL CAMERA OPTICS CABEL


A search Criteria for 'digital camera Optics'  should return only 3rd
document Only and

NOT 6th Document.

For a Query in either 'DIGITAL CAMERA 0PTICS'  or 'OPTICS CAMERAS DIIGTAL'
or

'CAMERA OPTICS' to return similar hits, we have to Inject the 'IGNOREWORDS'
to the query as  ' -cabel '

for Natural Language processing.

Now the main problem is to find the permutation /combination of all such
words to be fed into the field 'IGNOREWORDS'
for the query to be processed.


Any Ideas Please

Karthik




-----Original Message-----
From: Paul Elschot [mailto:paul.elschot@xs4all.nl]
Sent: Monday, June 06, 2005 10:33 PM
To: java-user@lucene.apache.org
Subject: Re: RE REQUEST: SPECIFIC HIT


On Monday 06 June 2005 08:40, Karthik N S wrote:
> Hi
>
> Guys.
>
> Apologies.....
>
> with refrence to my last main dted  Mon, 14 Mar 2005
>
>
http://mail-archives.apache.org/mod_mbox/lucene-java-user/200503.mbox/%3COBE
> LINLGKPEMCIEIJJNKEEIACCAA.karthik@controlnet.co.in%3E
>
> I would like to again request some Help in the search Concepts.
>
> I have Indexed documents sucessfully and they would be
>
> Document 1 contains   =   ELECTRONICS  DIGITAL CAMERA
> Document 2 contains   =   ELECTRONICS  DIGITAL CAMERA BATTERY ACCESSORIES
> Document 3 contains   =   ELECTRONICS  DIGITAL CAMERA 0PTICS
> Document 4 contains   =   ELECTRONICS  DIGITAL CAMERA ACCESSORIES
> Document 5 contains   =   ELECTRONICS  DIGITAL CAMERA CABEL ACCESSORIES
> Document 6 contains   =   ELECTRONICS  DIGITAL CAMERA OPTICS CABEL
> ACCESSORIES
> Document 7 contains   =   ELECTRONICS  DIGITAL CAMERA APPERAL ACCESSORIES
>
> On Search  "Digital Camera Optics" , the hit has to return me 3rd Document
> ONLY
> instead of other Documents  [ The word DIGITAL CAMERA is common word in
all
> cases and could be in any order of sequence].
>
> To Solve this Problem I creating a new Field called 'IGNORE WORD' and this
> field would be as shown below
>
> Document 1 contains   =   ELECTRONICS  DIGITAL CAMERA
> 'IGNORE WORD = BATTERY,ACCESSORIES,0PTICS,CABEL,APPERAL
>
> Document 2 contains   =   ELECTRONICS  DIGITAL CAMERA BATTERY ACCESSORIES
> 'IGNORE WORD = ACCESSORIES,0PTICS,CABEL,APPERAL
>
> Document 3 contains   =   ELECTRONICS  DIGITAL CAMERA 0PTICS
> 'IGNORE WORD = BATTERY,ACCESSORIES,CABEL,APPERAL
>
> Document 4 contains   =   ELECTRONICS  DIGITAL CAMERA ACCESSORIES
> 'IGNORE WORD = BATTERY,0PTICS,CABEL,APPERAL
>
> Document 5 contains   =   ELECTRONICS  DIGITAL CAMERA CABEL ACCESSORIE
> 'IGNORE WORD = BATTERY,0PTICS,APPERAL
>
> Document 6 contains   =   ELECTRONICS  DIGITAL CAMERA OPTICS CABEL
> ACCESSORIES
> 'IGNORE WORD = BATTERY,APPERAL
>
> Document 7 contains   =   ELECTRONICS  DIGITAL CAMERA APPERAL ACCESSORIES
> 'IGNORE WORD = BATTERY,0PTICS,CABEL
>
>
> For Every search I feed the 'IGNORE WORD' to the query such as
>
>
> Search  = DIGITAL CAMERA 0PTICS
> Query   = +KEYSRC:Digital +KEYSRC:Camera +KEYSRC:Cabel -KEYSRC:(BATTERY
> ACCESSORIES CABEL APPERAL)
>
> The resultant hit would be the 3rd doc instead of 3rd and 5th..
>
>
> The Problem here is of 2 conditions
>
> 1) Search could be  DIGITAL CAMERA 0PTICS  or OPTICS CAMERAS DIIGTAL  or
> CAMERA OPTICS should retrieve same hit results.

Here (and also above) 'optics' is written in to forms:
starting with a zero as 0PTICS, and
starting with a capital O as OPTICS.

Is that perhaps part of the problem?

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 05:02:44 2005
Return-Path: <java-user-return-14767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47333 invoked from network); 7 Jun 2005 05:02:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 05:02:43 -0000
Received: (qmail 87992 invoked by uid 500); 7 Jun 2005 05:02:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87959 invoked by uid 500); 7 Jun 2005 05:02:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87918 invoked by uid 99); 7 Jun 2005 05:02:36 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of burton@rojo.com designates 12.43.53.196 as permitted sender)
Received: from Unknown (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 22:02:35 -0700
Received: from [10.0.1.97] (h-66-134-200-194.snvacaid.covad.net [66.134.200.194])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id j5752Djg027142
	for <java-user@lucene.apache.org>; Mon, 6 Jun 2005 22:02:17 -0700
Message-ID: <42A52A52.1060805@rojo.com>
Date: Mon, 06 Jun 2005 22:02:10 -0700
From: Kevin Burton <burton@rojo.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Macintosh/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Fastest way to fetch N documents with unique keys within large
 numbers of indexes..
References: <42A4FB31.3020509@rojo.com> <Pine.LNX.4.58.0506061946040.28351@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0506061946040.28351@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Hostetter wrote:

>I haven't profiled either of thse suggestions but:
>
>1) have you tried constructing a BooleanQuery of all 10-20 terms? Is the
>   total time to execute the search, and access each Hit slower then your
>   termDocs approach?
>  
>
Actually using any type of query was very slow.  The problem was when it 
was computing the score.  This was a big performance gain.  About 2x and 
since its the slowest part of our app it was a nice one. :)

We were using a TermQuery though. 

I wonder if there's a way to tell lucene not to score.  Maybe I could 
then use a BooleanQuery with internal TermQueries and then scan the 
indexes once each. 

>2) have you tried sorting your terms first, then opening a TermDocs on the
>   first one, and seeking to each of the remaining terms?  it seems like
>   that would be faster then opening a new TermDocs for each Term.
>  
>
How do I do this?  I just assumed that termDocs was already sorted...

I don't see any mention of this in the API...

Kevin

-- 


Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
See irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

   Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 05:17:48 2005
Return-Path: <java-user-return-14768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51824 invoked from network); 7 Jun 2005 05:17:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 05:17:48 -0000
Received: (qmail 14521 invoked by uid 500); 7 Jun 2005 05:17:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14495 invoked by uid 500); 7 Jun 2005 05:17:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14454 invoked by uid 99); 7 Jun 2005 05:17:40 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of burton@rojo.com designates 12.43.53.196 as permitted sender)
Received: from Unknown (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 22:17:37 -0700
Received: from [10.0.1.97] (h-66-134-200-194.snvacaid.covad.net [66.134.200.194])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id j575HBhi027437
	for <java-user@lucene.apache.org>; Mon, 6 Jun 2005 22:17:16 -0700
Message-ID: <42A52DD0.4030009@rojo.com>
Date: Mon, 06 Jun 2005 22:17:04 -0700
From: Kevin Burton <burton@rojo.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Macintosh/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Fastest way to fetch N documents with unique keys within large
 numbers of indexes..
References: <42A4FB31.3020509@rojo.com> <2D298772-F6C9-4DDF-9E73-8AE80D9E8A94@cenqua.com>
In-Reply-To: <2D298772-F6C9-4DDF-9E73-8AE80D9E8A94@cenqua.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Matt Quail wrote:

>> We have a system where I'll be given 10 or 20 unique keys.
>
>
> I assume you mean you have one unique-key field, and you are given  
> 10-20 values to find for this one field?
>
>>
>> Internally I'm creating a new Term and then calling  
>> IndexReader.termDocs() on this term.  Then if termdocs.next()  
>> matches then I'll return this document.
>
>
> Are you calling reader.termDocs() inside a (tight) loop? It might be  
> better to create one TermEnum, and use "seek". Something like this:

Yes.. this is another approach I was thinking of taking.  I was thinking 
of building up a list of indexes which had a high probability of holding 
the given document and then searching for each of them.

What I'm worried about though is that it would be a bit slower...  I'm 
just going to have to test out different implementations to see....

<snip>

>
>
> I'm pretty sure that will work. And if you can avoid the multi- 
> threading issues, you might try and use the same TermDocs object for  
> as long as possible (that is, move it up out of as many tight loops  
> as you can).

Well... that doesn't look like the biggest overhead.  The bottleneck 
seens to be in seek() and the fact that its using an InputStream to read 
bytes off disk.  I actually tried to speed that up by crainking 
InputSteam.BUFFER_SIZE var higher but that didn't work either though I'm 
not sure if its a caching issue.  I sent an email to the list about this 
earlier but no one responded.

So it seems like my bottleneck is in seek() so It would make sense to 
figure out how to limit this.

Is this O(log(N))  btw or is it O(N) ?

Kevin

-- 


Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
See irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

   Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 06:02:07 2005
Return-Path: <java-user-return-14769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82508 invoked from network); 7 Jun 2005 06:02:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 06:02:07 -0000
Received: (qmail 86020 invoked by uid 500); 7 Jun 2005 06:02:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85999 invoked by uid 500); 7 Jun 2005 06:01:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85970 invoked by uid 99); 7 Jun 2005 06:01:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from koutmail.amdocs.com (HELO koutmail.amdocs.com) (212.179.127.169)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 23:01:56 -0700
Received: from omail2.amdocs.com ([212.179.127.133])
	by koutmail.amdocs.com (8.12.11/8.12.9) with ESMTP id j575iB0x020566
	for <java-user@lucene.apache.org>; Tue, 7 Jun 2005 08:44:11 +0300
Received: from tlvmail7.corp.amdocs.com (localhost.localdomain [127.0.0.1])
	by omail2.amdocs.com (8.12.11/8.12.11) with ESMTP id j5761XYi015785
	for <java-user@lucene.apache.org>; Tue, 7 Jun 2005 09:01:33 +0300
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Is there a thai language analyzer available
Date: Tue, 7 Jun 2005 09:01:57 +0300
Message-ID: <191B11CF22BAC54292E97F3B5CDC9C8506C617@tlvmail7.corp.amdocs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Is there a thai language analyzer available
Thread-Index: AcVqzRCHo2mpLiNMQryMawRo8m2xTQAWUOWw
From: "Alex Kiselevski" <ALEXKIS@Amdocs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Randy,

Did you find any solution for Hebrew analyzer ?=0D


Alex Kiselevski=0D

+9.729.776.4346 (desk)
+9.729.776.1504 (fax)

AMDOCS > INTEGRATED CUSTOMER MANAGEMENT


-----Original Message-----
From: Randy Darling [mailto:rdarling@interwoven.com]=0D
Sent: Monday, June 06, 2005 10:22 PM
To: java-user@lucene.apache.org
Subject: Is there a thai language analyzer available

Does anyone know of a good Thai language analyzer for Lucene?
=0D
I saw this email out there for a Thai language analyzer:
=0D
http://mail-archives.apache.org/mod_mbox/jakarta-lucene-dev/200402.mbox/
%3C20040218004604.61360.qmail@web41501.mail.yahoo.com%3E
=0D
But it looks like it requires modifying the existing parser which I
would prefer not to do if I do not have to.
=0D
Thanks,
Randy Darling

The information contained in this message is proprietary of Amdocs,
protected from disclosure, and may be privileged.
The information is intended to be conveyed only to the designated=
 recipient(s)
of the message. If the reader of this message is not the intended=
 recipient,
you are hereby notified that any dissemination, use, distribution or=
 copying of=0D
this communication is strictly prohibited and may be unlawful.=0D
If you have received this communication in error, please notify us=
 immediately
by replying to the message and deleting it from your computer.
Thank you.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 06:14:27 2005
Return-Path: <java-user-return-14770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85764 invoked from network); 7 Jun 2005 06:14:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 06:14:27 -0000
Received: (qmail 12086 invoked by uid 500); 7 Jun 2005 06:14:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12061 invoked by uid 500); 7 Jun 2005 06:14:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12045 invoked by uid 99); 7 Jun 2005 06:14:20 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 23:14:17 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A4CE45B81F; Mon,  6 Jun 2005 23:13:46 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8DDCA7F460
	for <java-user@lucene.apache.org>; Mon,  6 Jun 2005 23:13:46 -0700 (PDT)
Date: Mon, 6 Jun 2005 23:13:46 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Fastest way to fetch N documents with unique keys within large
 numbers of indexes..
In-Reply-To: <42A52A52.1060805@rojo.com>
Message-ID: <Pine.LNX.4.58.0506062306080.11614@hal.rescomp.berkeley.edu>
References: <42A4FB31.3020509@rojo.com> <Pine.LNX.4.58.0506061946040.28351@hal.rescomp.berkeley.edu>
 <42A52A52.1060805@rojo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: was computing the score.  This was a big performance gain.  About 2x and
: since its the slowest part of our app it was a nice one. :)
:
: We were using a TermQuery though.

I believe that one search on one BooleanQuery containing 20
TermQueries should be faster then 20 searches on 20 TermQueries.

: >2) have you tried sorting your terms first, then opening a TermDocs on the
: >   first one, and seeking to each of the remaining terms?  it seems like
: >   that would be faster then opening a new TermDocs for each Term.
: >
: >
: How do I do this?  I just assumed that termDocs was already sorted...
:
: I don't see any mention of this in the API...

I'm not talking about any special API to sort a TermDocs -- it is sorted.

I'm saying you should start by sorting your input (the 10-20 unique IDs
you mentioned) and then seek to the first ID, then using the same
TermDocs instance, seek to the second ID, etc....


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 06:41:08 2005
Return-Path: <java-user-return-14771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95838 invoked from network); 7 Jun 2005 06:41:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 06:41:08 -0000
Received: (qmail 62787 invoked by uid 500); 7 Jun 2005 06:41:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62759 invoked by uid 500); 7 Jun 2005 06:41:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62745 invoked by uid 99); 7 Jun 2005 06:41:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of newreaders@gmail.com designates 64.233.184.199 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.199)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Jun 2005 23:41:00 -0700
Received: by wproxy.gmail.com with SMTP id 50so93139wri
        for <java-user@lucene.apache.org>; Mon, 06 Jun 2005 23:40:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=B3PYUQeyEwncrUDsEgbhfOOoCvGIfhCZnkGJQ7lFEfPwhrEgoU11za3H49XYUdsnLGx1lMrwRGDreCueKvlr1RqEfFYteyU6YdBbL7GCJdF/ijSsYNfG7Fo928pITTcoG0OuKOaToHXtd7oGvsFxBqOyEQaBpCGgTGCih9Punas=
Received: by 10.54.30.54 with SMTP id d54mr3657231wrd;
        Mon, 06 Jun 2005 23:40:38 -0700 (PDT)
Received: by 10.54.23.39 with HTTP; Mon, 6 Jun 2005 23:40:37 -0700 (PDT)
Message-ID: <5f4a6461050606234078585ec5@mail.gmail.com>
Date: Tue, 7 Jun 2005 16:40:37 +1000
From: Ben <newreaders@gmail.com>
Reply-To: Ben <newreaders@gmail.com>
To: Lucene <java-user@lucene.apache.org>
Subject: Lucene in clustered environment (Tomcat)
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

I would like to use Lucene in a clustered environment, what are the
things that I should consider and do?

I would like to use the same ordinary index storage for all the nodes
in the the cluster, possible?

Thanks,
Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 07:02:05 2005
Return-Path: <java-user-return-14772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6191 invoked from network); 7 Jun 2005 07:02:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 07:02:04 -0000
Received: (qmail 3572 invoked by uid 500); 7 Jun 2005 07:01:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3548 invoked by uid 500); 7 Jun 2005 07:01:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3526 invoked by uid 99); 7 Jun 2005 07:01:57 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr7.xs4all.nl (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 00:01:55 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.13.3/8.13.3) with ESMTP id j5771eSc046154
	for <java-user@lucene.apache.org>; Tue, 7 Jun 2005 09:01:40 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Relative term frequency?
Date: Tue, 7 Jun 2005 09:01:39 +0200
User-Agent: KMail/1.5.4
References: <32dca9ed0506061359535a6afc@mail.gmail.com>
In-Reply-To: <32dca9ed0506061359535a6afc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506070901.40045.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 06 June 2005 22:59, Andy Liu wrote:
> Is there a way to calculate term frequency scores that are relative to
> the number of terms in the field of the document?  We want to override
> tf() in this way to curb keyword spamming in web pages.  In
> Similarity, only the document's term frequency is passed into the tf()
> method:
> 
> float tf(int freq)
> 
> It would be nice to have something like:
> 
> float tf(int freq, String fieldName, int numTerms)
> 
> If this isn't available out of the box, how difficult would it be to
> hack up Lucene to allow for this?

Have a look here:
http://issues.apache.org/bugzilla/show_bug.cgi?id=31784

It scores terms by density and it uses a separate table mapping
the norms stored in the index to inverse doc lengths. 
This table could be adapted as needed.
When that is not enough, it's probably a good start for what
you need.

Regards,
Paul Elschot.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 07:02:58 2005
Return-Path: <java-user-return-14773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6691 invoked from network); 7 Jun 2005 07:02:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 07:02:58 -0000
Received: (qmail 6245 invoked by uid 500); 7 Jun 2005 07:02:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6220 invoked by uid 500); 7 Jun 2005 07:02:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6180 invoked by uid 99); 7 Jun 2005 07:02:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from proserver2.ifit.uni-klu.ac.at (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 00:02:47 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 7 Jun 2005 09:02:33 +0200
Message-ID: <42A54688.4050405@ifit.uni-klu.ac.at>
Date: Tue, 07 Jun 2005 09:02:32 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Indexing multiple languages
References: <19ADCC0B9D4CAD4582BB9900BBCE35740194503C@tayexc13.americas.cpqcorp.net>
In-Reply-To: <19ADCC0B9D4CAD4582BB9900BBCE35740194503C@tayexc13.americas.cpqcorp.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 07 Jun 2005 07:02:33.0206 (UTC) FILETIME=[E0AD7960:01C56B2E]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Tansley, Robert wrote:

>Hi all,
>
>The DSpace (www.dspace.org) currently uses Lucene to index metadata
>(Dublin Core standard) and extracted full-text content of documents
>stored in it.  Now the system is being used globally, it needs to
>support multi-language indexing.
>
>I've looked through the mailing list archives etc. and it seems it's
>easy to plug in analyzers for different languages.
>
>What if we're trying to index multiple languages in the same site?  Is
>it best to have:
>
>1/ one index for all languages
>2/ one index for all languages, with an extra language field so searches
>can be constrained to a particular language
>3/ separate indices for each language?
>
>I don't fully understand the consequences in terms of performance for
>1/, but I can see that false hits could turn up where one word appears
>in different languages (stemming could increase the changes of this).
>Also some languages' analyzers are quite dramatically different (e.g.
>the Chinese one which just treats every character as a separate
>token/word).
>  
>
>On the other hand, if people are searching for proper nouns in metadata
>(e.g. "DSpace") it may be advantageous to search all languages at once.
>
>
>I'm also not sure of the storage and performance consequences of 2/.
>
>Approach 3/ seems like it might be the most complex from an
>implementation/code point of view.  
>  
>
But this will be the most robust solution. You have to differentiate 
between languages anyway,
and as you pointed here, you can differentiate by adding a Keyword field 
for language, or you can create different
indexes.

If you need to use complex search strings over multiple fields and 
indexes then I recommend you to use the QueryParser
to compute the search string. When you instantiate a QueryPArser you 
will need to provide an analyzer, that will be different
for different languages.

I think that the differences in performance won't be noticable between  
2nd and 3rd solutions, but from maintenance point of
view, I would choose the third solution.

Of course there are other factors that must be take in account when 
designing such an application:
number of documents to be indexed, number of document fields, index 
change frequency, server load (number of concurrent sessions), etc.

 Hope this hints help you a little,

 Best,

 Sergiu



>Does anyone have any thoughts or recommendations on this?
>
>Many thanks,
>
> Robert Tansley / Digital Media Systems Programme / HP Labs
>  http://www.hpl.hp.com/personal/Robert_Tansley/
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 07:12:14 2005
Return-Path: <java-user-return-14774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9255 invoked from network); 7 Jun 2005 07:12:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 07:12:13 -0000
Received: (qmail 27039 invoked by uid 500); 7 Jun 2005 07:12:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27019 invoked by uid 500); 7 Jun 2005 07:12:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26986 invoked by uid 99); 7 Jun 2005 07:12:04 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_40_50,HTML_MESSAGE,HTML_TITLE_EMPTY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from proserver2.ifit.uni-klu.ac.at (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 00:12:02 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 7 Jun 2005 09:10:20 +0200
Message-ID: <42A5485B.8000305@ifit.uni-klu.ac.at>
Date: Tue, 07 Jun 2005 09:10:19 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Finding minimum and maximum value of a field?
References: <17124207.1117540462125.JavaMail.root@wamui-andean.atl.sa.earthlink.net> <429CA27A.6030309@rojo.com>
In-Reply-To: <429CA27A.6030309@rojo.com>
Content-Type: multipart/alternative;
 boundary="------------020804050801000502050604"
X-OriginalArrivalTime: 07 Jun 2005 07:10:20.0218 (UTC) FILETIME=[F709D9A0:01C56B2F]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------020804050801000502050604
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

I think that the solution is to sort the results and to get the first 
result.

See:

*org.apache.lucene.search.Sort

*

Best,

 Sergiu




 Kevin Burton wrote:

> Andrew Boyd wrote:
>
>> How about using range query?
>>
>> private Term begin, end;
>>
>> begin = new Term("dateField",  
>> DateTools.dateToString(Date.valueOf(<"backInTimeStringDate">)));
>> end = new Term("dateField",  
>> DateTools.dateToString(Date.valueOf(<"farFutureStringDate">)));
>>
>> RangeQuery query = new RangeQuery(begin, end, true);
>>
>> IndexSearcher searcher = new IndexSearcher(directory);
>>
>> Hits hits = searcher.search(query);
>>
>> Document minDoc = hits.doc(0);
>> Document maxDoc = hits.doc(hits.length()-1);
>>
>> String minDateString = minDoc.get("dateField");
>> String maxDateString = maxDoc.get("dateField");
>>
>>  
>>
> This certainly is an interesting solution.  How would lucene score 
> this result set?  The first and last will depend on the score...
>
> I  guess I can build up a quick test........
>
> Kevin
>


--------------020804050801000502050604--

From java-user-return-14775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 07:16:19 2005
Return-Path: <java-user-return-14775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29273 invoked from network); 7 Jun 2005 07:16:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 07:16:19 -0000
Received: (qmail 36163 invoked by uid 500); 7 Jun 2005 07:16:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36141 invoked by uid 500); 7 Jun 2005 07:16:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36118 invoked by uid 99); 7 Jun 2005 07:16:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from proserver2.ifit.uni-klu.ac.at (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 00:16:10 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 7 Jun 2005 09:15:45 +0200
Message-ID: <42A549A1.60202@ifit.uni-klu.ac.at>
Date: Tue, 07 Jun 2005 09:15:45 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Finding minimum and maximum value of a field?
References: <429C0D0A.8040409@rojo.com>
In-Reply-To: <429C0D0A.8040409@rojo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 07 Jun 2005 07:15:45.0789 (UTC) FILETIME=[B9180AD0:01C56B30]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



Kevin Burton wrote:

> I have an index with a date field.  I want to quickly find the minimum 
> and maximum values in the index.
>
> Is there a quick way to do this?  I looked at using TermInfos and 
> finding the first one but how to I find the last?
>
> I also tried the new sort API and the performance was horrible :-/
>
> Any ideas?

You may keep a history of the MIN and MAX values in an external file.
Let's say, you can write in a text file the MIN_DATE and MAX_DATE,
and keep them up to date when indexing, deleting documents.

Best,

 Sergiu

>
> Kevin
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 07:22:51 2005
Return-Path: <java-user-return-14776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37306 invoked from network); 7 Jun 2005 07:22:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 07:22:51 -0000
Received: (qmail 48295 invoked by uid 500); 7 Jun 2005 07:22:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48268 invoked by uid 500); 7 Jun 2005 07:22:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48252 invoked by uid 99); 7 Jun 2005 07:22:43 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr13.xs4all.nl (HELO smtp-vbr13.xs4all.nl) (194.109.24.33)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 00:22:41 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr13.xs4all.nl (8.13.3/8.13.3) with ESMTP id j577MLoU034102
	for <java-user@lucene.apache.org>; Tue, 7 Jun 2005 09:22:21 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Fastest way to fetch N documents with unique keys within large numbers of indexes..
Date: Tue, 7 Jun 2005 09:22:21 +0200
User-Agent: KMail/1.5.4
References: <42A4FB31.3020509@rojo.com> <2D298772-F6C9-4DDF-9E73-8AE80D9E8A94@cenqua.com> <42A52DD0.4030009@rojo.com>
In-Reply-To: <42A52DD0.4030009@rojo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506070922.21027.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 07 June 2005 07:17, Kevin Burton wrote:
> Matt Quail wrote:
> 
> >> We have a system where I'll be given 10 or 20 unique keys.
> >
> >
> > I assume you mean you have one unique-key field, and you are given  
> > 10-20 values to find for this one field?
> >
> >>
> >> Internally I'm creating a new Term and then calling  
> >> IndexReader.termDocs() on this term.  Then if termdocs.next()  
> >> matches then I'll return this document.
> >
> >
> > Are you calling reader.termDocs() inside a (tight) loop? It might be  
> > better to create one TermEnum, and use "seek". Something like this:
> 
> Yes.. this is another approach I was thinking of taking.  I was thinking 
> of building up a list of indexes which had a high probability of holding 
> the given document and then searching for each of them.
> 
> What I'm worried about though is that it would be a bit slower...  I'm 
> just going to have to test out different implementations to see....
> 
> <snip>
> 
> >
> >
> > I'm pretty sure that will work. And if you can avoid the multi- 
> > threading issues, you might try and use the same TermDocs object for  
> > as long as possible (that is, move it up out of as many tight loops  
> > as you can).
> 
> Well... that doesn't look like the biggest overhead.  The bottleneck 
> seens to be in seek() and the fact that its using an InputStream to read 
> bytes off disk.  I actually tried to speed that up by crainking 
> InputSteam.BUFFER_SIZE var higher but that didn't work either though I'm 
> not sure if its a caching issue.  I sent an email to the list about this 
> earlier but no one responded.
> 
> So it seems like my bottleneck is in seek() so It would make sense to 
> figure out how to limit this.
> 
> Is this O(log(N))  btw or is it O(N) ?

Seeking terms should be O(log(N)), and the fastest way to do that
is by sorting the terms first, but that does not really help much.

The biggest increase in performance that I had for a similar problem
was to first collect all the document numbers, then sort them, and
then fetch all the corresponding docs. See also the file formats.
This avoids the disk head going between the terms and the stored docs,
and it also minimizes the head movement for retrieving the docs.

For a single term, the document numbers are already ordered, for
multiple terms the sort is needed.

For a large number of indexes, it may be necessary to do this over
multiple indexes by first getting the doc numbers for all indexes,
then sorting these per index, then retrieving them
from all indexes, and repeating the whole thing using terms determined
from the retrieved docs.

With the indexes on multiple discs, some parallellism can be introduced.
A thread per disk could be used.
In case there are multiple requests pending, they can be serialized just 
before the sorting of the terms, and just before the sorting of the document
numbers.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 07:28:11 2005
Return-Path: <java-user-return-14777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39036 invoked from network); 7 Jun 2005 07:28:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 07:28:11 -0000
Received: (qmail 58411 invoked by uid 500); 7 Jun 2005 07:28:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58384 invoked by uid 500); 7 Jun 2005 07:28:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58370 invoked by uid 99); 7 Jun 2005 07:28:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.bayt.net (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 00:28:01 -0700
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id AF07E35E003A; Tue, 07 Jun 2005 03:38:47 -0400
Message-ID: <42A54C69.7060604@bayt.net>
Date: Tue, 07 Jun 2005 11:27:37 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene in clustered environment (Tomcat)
References: <5f4a6461050606234078585ec5@mail.gmail.com>
In-Reply-To: <5f4a6461050606234078585ec5@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Declude-Sender: nsh@bayt.net [192.168.1.24]
X-Declude-Spoolname: D4F06E35E003A32F7.SMD
X-Declude-Note: Scanned by Declude 2.0.6 (http://www.declude.com/x-note.htm) for spam.
X-Declude-Scan: Score [0] at 03:38:48 on 07 Jun 2005
X-Declude-Tests: Whitelisted
X-Country-Chain: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

IMHO, Issues that you need to consider

    * Atomicity of updates and deletes if you are using multiple indexes
      on multiple machines (the case if your cluster is over a wide network)
    * Scheduled indecies to core data comparison and sanitization
      (intensive)

This all depends on what the volume of change is on your index and 
whether you'll be using a Memory resident index or an FS index.

This should start the ball rolling, we've been using Lucene successfully 
on a distributed cluster for a while now, and as long as you're aware of 
some basic NDS limitations/constraints you should be fine.

Hope this helps

Nader Henein

Ben wrote:

>Hi
>
>I would like to use Lucene in a clustered environment, what are the
>things that I should consider and do?
>
>I would like to use the same ordinary index storage for all the nodes
>in the the cluster, possible?
>
>Thanks,
>Ben
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>
>  
>

-- 

Nader S. Henein
Senior Applications Architect

Bayt.com





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 07:36:12 2005
Return-Path: <java-user-return-14778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41551 invoked from network); 7 Jun 2005 07:36:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 07:36:12 -0000
Received: (qmail 77398 invoked by uid 500); 7 Jun 2005 07:36:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77252 invoked by uid 500); 7 Jun 2005 07:36:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77228 invoked by uid 99); 7 Jun 2005 07:36:04 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr8.xs4all.nl (HELO smtp-vbr8.xs4all.nl) (194.109.24.28)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 00:36:02 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr8.xs4all.nl (8.13.3/8.13.3) with ESMTP id j577ZjT7016655
	for <java-user@lucene.apache.org>; Tue, 7 Jun 2005 09:35:46 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Fastest way to fetch N documents with unique keys within large numbers of indexes..
Date: Tue, 7 Jun 2005 09:35:45 +0200
User-Agent: KMail/1.5.4
References: <42A4FB31.3020509@rojo.com> <42A52DD0.4030009@rojo.com> <200506070922.21027.paul.elschot@xs4all.nl>
In-Reply-To: <200506070922.21027.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200506070935.45811.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 07 June 2005 09:22, Paul Elschot wrote:
=2E..
>=20
> With the indexes on multiple discs, some parallellism can be introduced.
> A thread per disk could be used.
> In case there are multiple requests pending, they can be serialized just=
=20
> before the sorting of the terms, and just before the sorting of the docum=
ent
> numbers.

That should be 'merged' instead of 'serialized'.
=A0
> Regards,
> Paul Elschot
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 07:42:49 2005
Return-Path: <java-user-return-14779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43435 invoked from network); 7 Jun 2005 07:42:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 07:42:49 -0000
Received: (qmail 88724 invoked by uid 500); 7 Jun 2005 07:42:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88673 invoked by uid 500); 7 Jun 2005 07:42:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88650 invoked by uid 99); 7 Jun 2005 07:42:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.bayt.net (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 00:42:38 -0700
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id A6E6499300F4; Tue, 07 Jun 2005 03:04:06 -0400
Message-ID: <42A54448.3010008@bayt.net>
Date: Tue, 07 Jun 2005 10:52:56 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene in clustered environment (Tomcat)
References: <5f4a6461050606234078585ec5@mail.gmail.com>
In-Reply-To: <5f4a6461050606234078585ec5@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Declude-Sender: nsh@bayt.net [192.168.1.24]
X-Declude-Spoolname: D46E5499300F42A66.SMD
X-Declude-Note: Scanned by Declude 2.0.6 (http://www.declude.com/x-note.htm) for spam.
X-Declude-Scan: Score [0] at 03:04:07 on 07 Jun 2005
X-Declude-Tests: Whitelisted
X-Country-Chain: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

IMHO, Issues that you need to consider

    * Atomicity of updates and deletes if you are using multiple indexes
      on multiple machines (the case if your cluster is over a wide network)
    * Scheduled indecies to core data comparison and sanitization
      (intensive)

This all depends on what the volume of change is on your index and 
whether you'll be using a Memory resident index or an FS index.

This should start the ball rolling, we've been using Lucene successfully 
on a distributed cluster for a while now, and as long as you're aware of 
some basic NDS limitations/constraints you should be fine.

Hope this helps

Nader Henein

Ben wrote:

>Hi
>
>I would like to use Lucene in a clustered environment, what are the
>things that I should consider and do?
>
>I would like to use the same ordinary index storage for all the nodes
>in the the cluster, possible?
>
>Thanks,
>Ben
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>
>  
>

-- 

Nader S. Henein
Senior Applications Architect

Bayt.com





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 08:53:02 2005
Return-Path: <java-user-return-14780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66521 invoked from network); 7 Jun 2005 08:53:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 08:53:02 -0000
Received: (qmail 38548 invoked by uid 500); 7 Jun 2005 08:52:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38507 invoked by uid 500); 7 Jun 2005 08:52:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38490 invoked by uid 99); 7 Jun 2005 08:52:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of newreaders@gmail.com designates 64.233.184.194 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 01:52:53 -0700
Received: by wproxy.gmail.com with SMTP id 50so177521wri
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2005 01:52:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Yczq0Rp3jvIqQh2UohcHZmoC/5TJQUyTtP37j++2jbn+xal2eMKZL+7i0VuSDDErF7JHrhsL3RyhXIwxCcBK2O5LH+AgilaxDCO5YBipksAgID9bQyeBTz391TQgzORnFyf2LVqaiFDqA0XTFK3qwMbfyKyeVOhEy8tGfLhxyBE=
Received: by 10.54.26.62 with SMTP id 62mr3696030wrz;
        Tue, 07 Jun 2005 01:51:56 -0700 (PDT)
Received: by 10.54.23.39 with HTTP; Tue, 7 Jun 2005 01:51:55 -0700 (PDT)
Message-ID: <5f4a64610506070151f9bc000@mail.gmail.com>
Date: Tue, 7 Jun 2005 18:51:55 +1000
From: Ben <newreaders@gmail.com>
Reply-To: Ben <newreaders@gmail.com>
To: java-user@lucene.apache.org, nsh@bayt.net
Subject: Re: Lucene in clustered environment (Tomcat)
In-Reply-To: <42A54448.3010008@bayt.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <5f4a6461050606234078585ec5@mail.gmail.com>
	 <42A54448.3010008@bayt.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My cluster is on a single machine and I am using FS index.

I have already integrated Lucene into my web application for use in a
non-clustered environment. I don't know what I need to do to make it
work in a clustered environment.

Thanks,
Ben

On 6/7/05, Nader Henein <nsh@bayt.net> wrote:
> IMHO, Issues that you need to consider
>=20
>     * Atomicity of updates and deletes if you are using multiple indexes
>       on multiple machines (the case if your cluster is over a wide netwo=
rk)
>     * Scheduled indecies to core data comparison and sanitization
>       (intensive)
>=20
> This all depends on what the volume of change is on your index and
> whether you'll be using a Memory resident index or an FS index.
>=20
> This should start the ball rolling, we've been using Lucene successfully
> on a distributed cluster for a while now, and as long as you're aware of
> some basic NDS limitations/constraints you should be fine.
>=20
> Hope this helps
>=20
> Nader Henein
>=20
> Ben wrote:
>=20
> >Hi
> >
> >I would like to use Lucene in a clustered environment, what are the
> >things that I should consider and do?
> >
> >I would like to use the same ordinary index storage for all the nodes
> >in the the cluster, possible?
> >
> >Thanks,
> >Ben
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> >
> >
> >
> >
>=20
> --
>=20
> Nader S. Henein
> Senior Applications Architect
>=20
> Bayt.com
>=20
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 08:58:58 2005
Return-Path: <java-user-return-14781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68803 invoked from network); 7 Jun 2005 08:58:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 08:58:58 -0000
Received: (qmail 53475 invoked by uid 500); 7 Jun 2005 08:58:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53449 invoked by uid 500); 7 Jun 2005 08:58:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53426 invoked by uid 99); 7 Jun 2005 08:58:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mars.sogitec.fr (HELO mars.sogitec.fr) (62.161.171.73)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 01:58:49 -0700
Received: by mars.sogitec.fr; id LAA17476; Tue, 7 Jun 2005 11:31:36 +0200 (CEST)
Message-Id: <200506070931.LAA17476@mars.sogitec.fr>
X-Authentication-Warning: antivirus.sogitec.fr: iscan owned process doing -bs
Subject: URLDirectory
Date: Tue, 7 Jun 2005 10:52:29 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C56B3E.92D8326E"
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Content-class: urn:content-classes:message
Thread-Topic: URLDirectory
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Thread-Index: AcVrPjwh8YoTHh+lSjSJOg5KfBUk8g==
From: "LABATTE Jacques" <jlabatte@sogitec.fr>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 07 Jun 2005 08:54:55.0041 (UTC) FILETIME=[931FDB10:01C56B3E]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C56B3E.92D8326E
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

I'm looking for URLDirectory implementation NOT based on RAMDirectory =
because the size of my indexes is up to 500Mo.

Thanks.

Jacques LABATTE.


------_=_NextPart_001_01C56B3E.92D8326E--

From java-user-return-14782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 09:05:24 2005
Return-Path: <java-user-return-14782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71617 invoked from network); 7 Jun 2005 09:05:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 09:05:23 -0000
Received: (qmail 69377 invoked by uid 500); 7 Jun 2005 09:05:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69349 invoked by uid 500); 7 Jun 2005 09:05:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69335 invoked by uid 99); 7 Jun 2005 09:05:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.bayt.net (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 02:05:14 -0700
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id A5D7356300AA; Tue, 07 Jun 2005 05:16:07 -0400
Message-ID: <42A56339.6050001@bayt.net>
Date: Tue, 07 Jun 2005 13:04:57 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene in clustered environment (Tomcat)
References: <5f4a6461050606234078585ec5@mail.gmail.com>	 <42A54448.3010008@bayt.net> <5f4a64610506070151f9bc000@mail.gmail.com>
In-Reply-To: <5f4a64610506070151f9bc000@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Declude-Sender: nsh@bayt.net [192.168.1.24]
X-Declude-Spoolname: D65D6356300AA4507.SMD
X-Declude-Note: Scanned by Declude 2.0.6 (http://www.declude.com/x-note.htm) for spam.
X-Declude-Scan: Score [0] at 05:16:08 on 07 Jun 2005
X-Declude-Tests: Whitelisted
X-Country-Chain: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

When you say your cluster is on a single machine, do you mean that you 
have multiple webservers on the same machine all of which search a 
single Lucene index? Because if that's the case, your solution is 
simple, as long as you persist to a single DB and then designate one of 
your servers (or even another server) to update/delete the index. Do you 
use Lucene as your persistent store or do you have a DB back there? and 
what is your current update/delete strategy because real time inserts 
from the webservers directly to the index will not work because you 
can't have multiple writers. Updating a dirty flag on rows that need to 
be indexed/deleted, or using a table for this task and then batching 
your updates would be ideal, and if you're using server specific 
scheduling, I strongly recommend Quartz, it's rock solid and really 
versatile.

My two cents.

Nader Henein


Ben wrote:

>My cluster is on a single machine and I am using FS index.
>
>I have already integrated Lucene into my web application for use in a
>non-clustered environment. I don't know what I need to do to make it
>work in a clustered environment.
>
>Thanks,
>Ben
>
>On 6/7/05, Nader Henein <nsh@bayt.net> wrote:
>  
>
>>IMHO, Issues that you need to consider
>>
>>    * Atomicity of updates and deletes if you are using multiple indexes
>>      on multiple machines (the case if your cluster is over a wide network)
>>    * Scheduled indecies to core data comparison and sanitization
>>      (intensive)
>>
>>This all depends on what the volume of change is on your index and
>>whether you'll be using a Memory resident index or an FS index.
>>
>>This should start the ball rolling, we've been using Lucene successfully
>>on a distributed cluster for a while now, and as long as you're aware of
>>some basic NDS limitations/constraints you should be fine.
>>
>>Hope this helps
>>
>>Nader Henein
>>
>>Ben wrote:
>>
>>    
>>
>>>Hi
>>>
>>>I would like to use Lucene in a clustered environment, what are the
>>>things that I should consider and do?
>>>
>>>I would like to use the same ordinary index storage for all the nodes
>>>in the the cluster, possible?
>>>
>>>Thanks,
>>>Ben
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>      
>>>
>>--
>>
>>Nader S. Henein
>>Senior Applications Architect
>>
>>Bayt.com
>>
>>
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>
>  
>

-- 

Nader S. Henein
Senior Applications Architect

Bayt.com





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 09:42:42 2005
Return-Path: <java-user-return-14783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90350 invoked from network); 7 Jun 2005 09:42:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 09:42:42 -0000
Received: (qmail 50716 invoked by uid 500); 7 Jun 2005 09:42:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50607 invoked by uid 500); 7 Jun 2005 09:42:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50367 invoked by uid 99); 7 Jun 2005 09:42:33 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rs15.luxsci.com (HELO rs15.luxsci.com) (65.61.166.71)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 02:42:29 -0700
Received: from [192.168.70.100] (ppp115-120.static.internode.on.net [150.101.115.120])
	(authenticated bits=0)
	by rs15.luxsci.com (8.12.11/8.12.11) with ESMTP id j579gEOm016299
	for <java-user@lucene.apache.org>; Tue, 7 Jun 2005 04:42:15 -0500
Mime-Version: 1.0 (Apple Message framework v730)
Content-Transfer-Encoding: 7bit
Message-Id: <FFB3B0F0-B219-49C7-AF3A-C1CEEA8B9656@cenqua.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Matt Quail <matt@cenqua.com>
Subject: Documents returned by Scorer
Date: Tue, 7 Jun 2005 19:42:10 +1000
X-Mailer: Apple Mail (2.730)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've been playing around with a custom Query, and I've just realized  
that my Scorer is likely to return the same document more then once.  
Before I delve a bit further, can anyone tell me if this is this a  
Bad Thing?

=Matt

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 11:07:51 2005
Return-Path: <java-user-return-14784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21923 invoked from network); 7 Jun 2005 11:07:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 11:07:51 -0000
Received: (qmail 32786 invoked by uid 500); 7 Jun 2005 11:07:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32737 invoked by uid 500); 7 Jun 2005 11:07:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32720 invoked by uid 99); 7 Jun 2005 11:07:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of newreaders@gmail.com designates 64.233.184.192 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 04:07:37 -0700
Received: by wproxy.gmail.com with SMTP id 50so266659wri
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2005 04:07:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=jGnkMKnnBH8d3JJ0SLeCAX7sxazQpIfRs/OLdrxRRnjAaCskbhJTNRw/sx7mTN+qeXYyZk+p2JhDFR4s6ywQ/2mMvIr0Xy9kbYQ9+G+3MiIqgrWT+82n3yQpzzXyT4V9Bta74y8mxQmRwzh3IPSjMUUCsxi/UIR3pYuRKq+g/pk=
Received: by 10.54.13.66 with SMTP id 66mr3776225wrm;
        Tue, 07 Jun 2005 04:07:24 -0700 (PDT)
Received: by 10.54.23.39 with HTTP; Tue, 7 Jun 2005 04:07:24 -0700 (PDT)
Message-ID: <5f4a646105060704071f6caa58@mail.gmail.com>
Date: Tue, 7 Jun 2005 21:07:24 +1000
From: Ben <newreaders@gmail.com>
Reply-To: Ben <newreaders@gmail.com>
To: java-user@lucene.apache.org, nsh@bayt.net
Subject: Re: Lucene in clustered environment (Tomcat)
In-Reply-To: <42A56339.6050001@bayt.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <5f4a6461050606234078585ec5@mail.gmail.com>
	 <42A54448.3010008@bayt.net> <5f4a64610506070151f9bc000@mail.gmail.com>
	 <42A56339.6050001@bayt.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> When you say your cluster is on a single machine, do you mean that you ha=
ve multiple webservers on the same machine all of which search a single Luc=
ene index?

Yes, this is my case.

> Do you use Lucene as your persistent store or do you have a DB back there=
?

I use Lucene to search for data stored in a PostgreSQL server.

> what is your current update/delete strategy because real time inserts fro=
m the webservers directly to the index will not work because you can't have=
 multiple writers.

I have to do this in real time, what are the available solutions? My
application has the ability to do batch update/delete to a Lucene
index but I would like to do this in real time.

One solution I am thinking is to have each cluster has it own index
and use parallel search. This makes my application even more complex.

> I strongly recommend Quartz, it's rock solid and really versatile.

I am using Quartz, it is really great and supports cluster.

Thanks,
Ben


On 6/7/05, Nader Henein <nsh@bayt.net> wrote:
> When you say your cluster is on a single machine, do you mean that you
> have multiple webservers on the same machine all of which search a
> single Lucene index? Because if that's the case, your solution is
> simple, as long as you persist to a single DB and then designate one of
> your servers (or even another server) to update/delete the index. Do you
> use Lucene as your persistent store or do you have a DB back there? and
> what is your current update/delete strategy because real time inserts
> from the webservers directly to the index will not work because you
> can't have multiple writers. Updating a dirty flag on rows that need to
> be indexed/deleted, or using a table for this task and then batching
> your updates would be ideal, and if you're using server specific
> scheduling, I strongly recommend Quartz, it's rock solid and really
> versatile.
>=20
> My two cents.
>=20
> Nader Henein
>=20
>=20
> Ben wrote:
>=20
> >My cluster is on a single machine and I am using FS index.
> >
> >I have already integrated Lucene into my web application for use in a
> >non-clustered environment. I don't know what I need to do to make it
> >work in a clustered environment.
> >
> >Thanks,
> >Ben
> >
> >On 6/7/05, Nader Henein <nsh@bayt.net> wrote:
> >
> >
> >>IMHO, Issues that you need to consider
> >>
> >>    * Atomicity of updates and deletes if you are using multiple indexe=
s
> >>      on multiple machines (the case if your cluster is over a wide net=
work)
> >>    * Scheduled indecies to core data comparison and sanitization
> >>      (intensive)
> >>
> >>This all depends on what the volume of change is on your index and
> >>whether you'll be using a Memory resident index or an FS index.
> >>
> >>This should start the ball rolling, we've been using Lucene successfull=
y
> >>on a distributed cluster for a while now, and as long as you're aware o=
f
> >>some basic NDS limitations/constraints you should be fine.
> >>
> >>Hope this helps
> >>
> >>Nader Henein
> >>
> >>Ben wrote:
> >>
> >>
> >>
> >>>Hi
> >>>
> >>>I would like to use Lucene in a clustered environment, what are the
> >>>things that I should consider and do?
> >>>
> >>>I would like to use the same ordinary index storage for all the nodes
> >>>in the the cluster, possible?
> >>>
> >>>Thanks,
> >>>Ben
> >>>
> >>>---------------------------------------------------------------------
> >>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>--
> >>
> >>Nader S. Henein
> >>Senior Applications Architect
> >>
> >>Bayt.com
> >>
> >>
> >>
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >>
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> >
> >
> >
> >
>=20
> --
>=20
> Nader S. Henein
> Senior Applications Architect
>=20
> Bayt.com
>=20
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 13:03:37 2005
Return-Path: <java-user-return-14785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37649 invoked from network); 7 Jun 2005 13:03:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 13:03:37 -0000
Received: (qmail 32504 invoked by uid 500); 7 Jun 2005 13:03:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32466 invoked by uid 500); 7 Jun 2005 13:03:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32323 invoked by uid 99); 7 Jun 2005 13:03:27 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=DATE_IN_PAST_06_12
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 06:03:20 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id DCF0213E2006; Tue,  7 Jun 2005 09:03:09 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 47A7813E2006
	for <java-user@lucene.apache.org>; Tue,  7 Jun 2005 09:02:48 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C41A7B1@hai01.hippo.local>
References: <A955EA1F8FE31749AEC8C998082F6C7C41A7B1@hai01.hippo.local>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5F7CA540-EE59-46D7-B7D4-321D0238D887@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: deleting on a keyword field
Date: Mon, 6 Jun 2005 21:36:34 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 6, 2005, at 7:07 AM, Max Pfingsthorn wrote:
> Thanks for all the replies. I do know that the readers should be  
> reopened, but that is not the problem.

Could you work up a test case that shows this issue?  From all I can  
see, you're doing the right thing.  Something is amiss somewhere though.

> I try to remove some docs, and add their new versions again to  
> incrementally update the index. After updating the index with the  
> same document twice, I opened the index in luke. There I saw that  
> the file's uri was present three times in the uri field. So, I  
> concluded, it didn't delete the docs right as there are in total  
> three documents which contain this term, right? By the way,  
> Reader.delete() returned 0 as well.
>
> I thought I used Field.Keyword(), but actually I use
>
> doc.add(new Field(URI_FIELD, uri, true, true, false));

Same thing in this case.  new Field(name, value, true, true, false)  
is the same as Field.Keyword(name, value)

> to add the uri to the doc. I can see it in luke, and even find the  
> docs when searching for it (using the KeywordAnalyzer).
>
> Any ideas?

Nothing comes to mind from what I've seen thus far.  An easily  
runnable example demonstrating this issue would be the next step.

     Erik


>
> Thanks!
> max
>
>
> -----Original Message-----
> From: Daniel Naber [mailto:lucenelist@danielnaber.de]
> Sent: Friday, June 03, 2005 20:10
> To: java-user@lucene.apache.org
> Subject: Re: deleting on a keyword field
>
>
> On Friday 03 June 2005 18:50, Max Pfingsthorn wrote:
>
>
>> reader.delete(new Term(URI_FIELD, uri));
>>
>> This does not remove anything. Do I have to make the uri a normal  
>> field?
>>
>
> How do you know nothing was deleted? Are you aware that you need to  
> re-open
> your IndexSearcher/Reader in order to see the changes made to the  
> index?
>
> Regards
>  Daniel
>
> -- 
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 13:09:42 2005
Return-Path: <java-user-return-14786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40731 invoked from network); 7 Jun 2005 13:09:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 13:09:42 -0000
Received: (qmail 51042 invoked by uid 500); 7 Jun 2005 13:09:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51018 invoked by uid 500); 7 Jun 2005 13:09:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50978 invoked by uid 99); 7 Jun 2005 13:09:34 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from panacea.is.nl (HELO panacea.is.nl) (213.133.34.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 06:09:32 -0700
Received: from hai01.hippo.local ([213.133.51.241]) by panacea.is.nl with Microsoft SMTPSVC(5.0.2195.4905);
	 Tue, 7 Jun 2005 15:06:55 +0200
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
Subject: RE: deleting on a keyword field
Date: Tue, 7 Jun 2005 15:07:54 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C4189E8@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: deleting on a keyword field
Thread-Index: AcVrYVGYUOv/6I1vRYmnlZ1+2RsvYwAADf5A
From: "Max Pfingsthorn" <m.pfingsthorn@hippo.nl>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 07 Jun 2005 13:06:55.0718 (UTC) FILETIME=[C7C01060:01C56B61]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello!

Ehem, I have to apologize. It was my stupidity that caused this problem. =
I simply mixed up field names... I did the deletion of items in a =
superclass, which of course didn't know about the change in the uri =
field name. Duh! Everything works now, just like it should.

Sorry again! Thanks for bearing with me though!

max

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Tuesday, June 07, 2005 03:37
To: java-user@lucene.apache.org
Subject: Re: deleting on a keyword field



On Jun 6, 2005, at 7:07 AM, Max Pfingsthorn wrote:
> Thanks for all the replies. I do know that the readers should be =20
> reopened, but that is not the problem.

Could you work up a test case that shows this issue?  From all I can =20
see, you're doing the right thing.  Something is amiss somewhere though.

> I try to remove some docs, and add their new versions again to =20
> incrementally update the index. After updating the index with the =20
> same document twice, I opened the index in luke. There I saw that =20
> the file's uri was present three times in the uri field. So, I =20
> concluded, it didn't delete the docs right as there are in total =20
> three documents which contain this term, right? By the way, =20
> Reader.delete() returned 0 as well.
>
> I thought I used Field.Keyword(), but actually I use
>
> doc.add(new Field(URI_FIELD, uri, true, true, false));

Same thing in this case.  new Field(name, value, true, true, false) =20
is the same as Field.Keyword(name, value)

> to add the uri to the doc. I can see it in luke, and even find the =20
> docs when searching for it (using the KeywordAnalyzer).
>
> Any ideas?

Nothing comes to mind from what I've seen thus far.  An easily =20
runnable example demonstrating this issue would be the next step.

     Erik


>
> Thanks!
> max
>
>
> -----Original Message-----
> From: Daniel Naber [mailto:lucenelist@danielnaber.de]
> Sent: Friday, June 03, 2005 20:10
> To: java-user@lucene.apache.org
> Subject: Re: deleting on a keyword field
>
>
> On Friday 03 June 2005 18:50, Max Pfingsthorn wrote:
>
>
>> reader.delete(new Term(URI_FIELD, uri));
>>
>> This does not remove anything. Do I have to make the uri a normal =20
>> field?
>>
>
> How do you know nothing was deleted? Are you aware that you need to =20
> re-open
> your IndexSearcher/Reader in order to see the changes made to the =20
> index?
>
> Regards
>  Daniel
>
> --=20
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 13:37:30 2005
Return-Path: <java-user-return-14787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71398 invoked from network); 7 Jun 2005 13:37:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 13:37:30 -0000
Received: (qmail 42625 invoked by uid 500); 7 Jun 2005 13:37:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42600 invoked by uid 500); 7 Jun 2005 13:37:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42587 invoked by uid 99); 7 Jun 2005 13:37:23 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 06:37:22 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C4EDB13E2006; Tue,  7 Jun 2005 09:37:10 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 7ACA013E2005
	for <java-user@lucene.apache.org>; Tue,  7 Jun 2005 09:36:43 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <1118103668.42a4e874610d8@gold3.portugalmail.pt>
References: <1118103668.42a4e874610d8@gold3.portugalmail.pt>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <AA588A13-FB0F-425F-89FC-2ED4A2523616@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: log4j:WARN No appenders could be found for logger 
Date: Tue, 7 Jun 2005 09:36:44 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ant=F3nio,

This error is not coming from Lucene, but rather from the ELATED =20
library (as you can tell from package name).  Lucene does not use =20
Log4j at all.  Please address this issue to either the Fedora or =20
ELATED groups.

     Erik

On Jun 6, 2005, at 8:21 PM, afonseca@portugalmail.com wrote:

> Hi!
>
> I'm newbie in java, and not a real coder.
> I'm implementing a digital library (windows)with 2 open sources:
> a server aplications called FEDORA (www.fedora.info) and a JSPs =20
> interface called ELATED (http://elated.sourceforge.net).
>
> when I start the fedora server I get:
>
> c:\fedora-2.0\server\bin>fedora-start
> Starting Fedora server...
> Deploying API-M and API-A...
> Waiting for server to start...
> log4j:WARN No appenders could be found for logger =20
> (org.acs.elated.lucene.LuceneInterface).
> log4j:WARN Please initialize the log4j system properly.
> Processing file C:\fedora-2.0\server\config\deployAPI-A.wsdd
> <admin>Done processing</Admin>
> Processing file C:\fedora-2.0\server\config\deploy.wsdd
> <admin>Done processing</Admin>
> Initializing Fedora Server instance...
> Fedora Version: 2.0
> Fedora Build: 1
> Server Host Name: localhost
> Server Port: 8080
> Debugging: false
> OK
> Finished.  To stop the server, use fedora-stop.
> c:\fedora-2.0\server\bin>
>
> I dont understand the error:
> log4j:WARN No appenders could be found for logger =20
> (org.acs.elated.lucene.LuceneInterface).
> log4j:WARN Please initialize the log4j system properly.
>
> Can anyone tell me what is this error?
>
> Thanks in advance
> Ant=F3nio Fonseca
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 13:47:55 2005
Return-Path: <java-user-return-14788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75529 invoked from network); 7 Jun 2005 13:47:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 13:47:55 -0000
Received: (qmail 71693 invoked by uid 500); 7 Jun 2005 13:47:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71630 invoked by uid 500); 7 Jun 2005 13:47:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71617 invoked by uid 99); 7 Jun 2005 13:47:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.bayt.net (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 06:47:41 -0700
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id A804343D011C; Tue, 07 Jun 2005 09:58:28 -0400
Message-ID: <42A5A565.9030500@bayt.net>
Date: Tue, 07 Jun 2005 17:47:17 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene in clustered environment (Tomcat)
References: <5f4a6461050606234078585ec5@mail.gmail.com>	 <42A54448.3010008@bayt.net> <5f4a64610506070151f9bc000@mail.gmail.com>	 <42A56339.6050001@bayt.net> <5f4a646105060704071f6caa58@mail.gmail.com>
In-Reply-To: <5f4a646105060704071f6caa58@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Declude-Sender: nsh@bayt.net [192.168.1.24]
X-Declude-Spoolname: DA803343D011C7397.SMD
X-Declude-Note: Scanned by Declude 2.0.6 (http://www.declude.com/x-note.htm) for spam.
X-Declude-Scan: Score [0] at 09:58:29 on 07 Jun 2005
X-Declude-Tests: Whitelisted
X-Country-Chain: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I realize I've already asked you this question, but do you need 100% 
real time, because you could run batch them every 2 minutes, and 
concerning Parallel search, unless you really need it, it's overkill in 
this case, a communal index will serve you well and will be much easier 
to maintain. You have to way requirement vs. complexity/ debug time.

Nader Henein

Ben wrote:

>>When you say your cluster is on a single machine, do you mean that you have multiple webservers on the same machine all of which search a single Lucene index?
>>    
>>
>
>Yes, this is my case.
>
>  
>
>>Do you use Lucene as your persistent store or do you have a DB back there?
>>    
>>
>
>I use Lucene to search for data stored in a PostgreSQL server.
>
>  
>
>>what is your current update/delete strategy because real time inserts from the webservers directly to the index will not work because you can't have multiple writers.
>>    
>>
>
>I have to do this in real time, what are the available solutions? My
>application has the ability to do batch update/delete to a Lucene
>index but I would like to do this in real time.
>
>One solution I am thinking is to have each cluster has it own index
>and use parallel search. This makes my application even more complex.
>
>  
>
>>I strongly recommend Quartz, it's rock solid and really versatile.
>>    
>>
>
>I am using Quartz, it is really great and supports cluster.
>
>Thanks,
>Ben
>
>
>On 6/7/05, Nader Henein <nsh@bayt.net> wrote:
>  
>
>>When you say your cluster is on a single machine, do you mean that you
>>have multiple webservers on the same machine all of which search a
>>single Lucene index? Because if that's the case, your solution is
>>simple, as long as you persist to a single DB and then designate one of
>>your servers (or even another server) to update/delete the index. Do you
>>use Lucene as your persistent store or do you have a DB back there? and
>>what is your current update/delete strategy because real time inserts
>>from the webservers directly to the index will not work because you
>>can't have multiple writers. Updating a dirty flag on rows that need to
>>be indexed/deleted, or using a table for this task and then batching
>>your updates would be ideal, and if you're using server specific
>>scheduling, I strongly recommend Quartz, it's rock solid and really
>>versatile.
>>
>>My two cents.
>>
>>Nader Henein
>>
>>
>>Ben wrote:
>>
>>    
>>
>>>My cluster is on a single machine and I am using FS index.
>>>
>>>I have already integrated Lucene into my web application for use in a
>>>non-clustered environment. I don't know what I need to do to make it
>>>work in a clustered environment.
>>>
>>>Thanks,
>>>Ben
>>>
>>>On 6/7/05, Nader Henein <nsh@bayt.net> wrote:
>>>
>>>
>>>      
>>>
>>>>IMHO, Issues that you need to consider
>>>>
>>>>   * Atomicity of updates and deletes if you are using multiple indexes
>>>>     on multiple machines (the case if your cluster is over a wide network)
>>>>   * Scheduled indecies to core data comparison and sanitization
>>>>     (intensive)
>>>>
>>>>This all depends on what the volume of change is on your index and
>>>>whether you'll be using a Memory resident index or an FS index.
>>>>
>>>>This should start the ball rolling, we've been using Lucene successfully
>>>>on a distributed cluster for a while now, and as long as you're aware of
>>>>some basic NDS limitations/constraints you should be fine.
>>>>
>>>>Hope this helps
>>>>
>>>>Nader Henein
>>>>
>>>>Ben wrote:
>>>>
>>>>
>>>>
>>>>        
>>>>
>>>>>Hi
>>>>>
>>>>>I would like to use Lucene in a clustered environment, what are the
>>>>>things that I should consider and do?
>>>>>
>>>>>I would like to use the same ordinary index storage for all the nodes
>>>>>in the the cluster, possible?
>>>>>
>>>>>Thanks,
>>>>>Ben
>>>>>
>>>>>---------------------------------------------------------------------
>>>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>          
>>>>>
>>>>--
>>>>
>>>>Nader S. Henein
>>>>Senior Applications Architect
>>>>
>>>>Bayt.com
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>---------------------------------------------------------------------
>>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>>        
>>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>      
>>>
>>--
>>
>>Nader S. Henein
>>Senior Applications Architect
>>
>>Bayt.com
>>
>>
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>
>  
>

-- 

Nader S. Henein
Senior Applications Architect

Bayt.com





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 14:30:41 2005
Return-Path: <java-user-return-14789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95596 invoked from network); 7 Jun 2005 14:30:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 14:30:40 -0000
Received: (qmail 178 invoked by uid 500); 7 Jun 2005 14:30:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 148 invoked by uid 500); 7 Jun 2005 14:30:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 134 invoked by uid 99); 7 Jun 2005 14:30:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of newreaders@gmail.com designates 64.233.184.192 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 07:30:25 -0700
Received: by wproxy.gmail.com with SMTP id 50so415692wri
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2005 07:30:13 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=gejtqn52BVzQ6pemLHW53RC59pRu0vXUHZwvOxlLItQBcKVqrz0iPFaBbtsOSVZFkSvQbGU/9tku0RCLa3wBC35gZ9ki8EmZF+yGSrWIa1009fiDDuIcjsXsxhkg5do2pwYAWd9gxYnZyf7qX8L8sD3LyPBai4kMnxK3rHKijCM=
Received: by 10.54.5.47 with SMTP id 47mr3872644wre;
        Tue, 07 Jun 2005 07:20:50 -0700 (PDT)
Received: by 10.54.23.39 with HTTP; Tue, 7 Jun 2005 07:20:50 -0700 (PDT)
Message-ID: <5f4a6461050607072068a173b1@mail.gmail.com>
Date: Wed, 8 Jun 2005 00:20:50 +1000
From: Ben <newreaders@gmail.com>
Reply-To: Ben <newreaders@gmail.com>
To: java-user@lucene.apache.org, nsh@bayt.net
Subject: Re: Lucene in clustered environment (Tomcat)
In-Reply-To: <42A5A565.9030500@bayt.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <5f4a6461050606234078585ec5@mail.gmail.com>
	 <42A54448.3010008@bayt.net> <5f4a64610506070151f9bc000@mail.gmail.com>
	 <42A56339.6050001@bayt.net>
	 <5f4a646105060704071f6caa58@mail.gmail.com>
	 <42A5A565.9030500@bayt.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How about using JavaGroups to notify other nodes in the cluster about
the changes?

Essentially, each node has the same index stored in a different
location. When one node updates/deletes a record, other nodes will get
a notification about the changes and update their index accordingly?
By using this method, I don't have to modify my Lucene code, I just
need to add additional code to notify other nodes. I believe this
method also scales better.

Cheers,
Ben


On 6/7/05, Nader Henein <nsh@bayt.net> wrote:
> I realize I've already asked you this question, but do you need 100%
> real time, because you could run batch them every 2 minutes, and
> concerning Parallel search, unless you really need it, it's overkill in
> this case, a communal index will serve you well and will be much easier
> to maintain. You have to way requirement vs. complexity/ debug time.
>=20
> Nader Henein
>=20
> Ben wrote:
>=20
> >>When you say your cluster is on a single machine, do you mean that you =
have multiple webservers on the same machine all of which search a single L=
ucene index?
> >>
> >>
> >
> >Yes, this is my case.
> >
> >
> >
> >>Do you use Lucene as your persistent store or do you have a DB back the=
re?
> >>
> >>
> >
> >I use Lucene to search for data stored in a PostgreSQL server.
> >
> >
> >
> >>what is your current update/delete strategy because real time inserts f=
rom the webservers directly to the index will not work because you can't ha=
ve multiple writers.
> >>
> >>
> >
> >I have to do this in real time, what are the available solutions? My
> >application has the ability to do batch update/delete to a Lucene
> >index but I would like to do this in real time.
> >
> >One solution I am thinking is to have each cluster has it own index
> >and use parallel search. This makes my application even more complex.
> >
> >
> >
> >>I strongly recommend Quartz, it's rock solid and really versatile.
> >>
> >>
> >
> >I am using Quartz, it is really great and supports cluster.
> >
> >Thanks,
> >Ben
> >
> >
> >On 6/7/05, Nader Henein <nsh@bayt.net> wrote:
> >
> >
> >>When you say your cluster is on a single machine, do you mean that you
> >>have multiple webservers on the same machine all of which search a
> >>single Lucene index? Because if that's the case, your solution is
> >>simple, as long as you persist to a single DB and then designate one of
> >>your servers (or even another server) to update/delete the index. Do yo=
u
> >>use Lucene as your persistent store or do you have a DB back there? and
> >>what is your current update/delete strategy because real time inserts
> >>from the webservers directly to the index will not work because you
> >>can't have multiple writers. Updating a dirty flag on rows that need to
> >>be indexed/deleted, or using a table for this task and then batching
> >>your updates would be ideal, and if you're using server specific
> >>scheduling, I strongly recommend Quartz, it's rock solid and really
> >>versatile.
> >>
> >>My two cents.
> >>
> >>Nader Henein
> >>
> >>
> >>Ben wrote:
> >>
> >>
> >>
> >>>My cluster is on a single machine and I am using FS index.
> >>>
> >>>I have already integrated Lucene into my web application for use in a
> >>>non-clustered environment. I don't know what I need to do to make it
> >>>work in a clustered environment.
> >>>
> >>>Thanks,
> >>>Ben
> >>>
> >>>On 6/7/05, Nader Henein <nsh@bayt.net> wrote:
> >>>
> >>>
> >>>
> >>>
> >>>>IMHO, Issues that you need to consider
> >>>>
> >>>>   * Atomicity of updates and deletes if you are using multiple index=
es
> >>>>     on multiple machines (the case if your cluster is over a wide ne=
twork)
> >>>>   * Scheduled indecies to core data comparison and sanitization
> >>>>     (intensive)
> >>>>
> >>>>This all depends on what the volume of change is on your index and
> >>>>whether you'll be using a Memory resident index or an FS index.
> >>>>
> >>>>This should start the ball rolling, we've been using Lucene successfu=
lly
> >>>>on a distributed cluster for a while now, and as long as you're aware=
 of
> >>>>some basic NDS limitations/constraints you should be fine.
> >>>>
> >>>>Hope this helps
> >>>>
> >>>>Nader Henein
> >>>>
> >>>>Ben wrote:
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>>Hi
> >>>>>
> >>>>>I would like to use Lucene in a clustered environment, what are the
> >>>>>things that I should consider and do?
> >>>>>
> >>>>>I would like to use the same ordinary index storage for all the node=
s
> >>>>>in the the cluster, possible?
> >>>>>
> >>>>>Thanks,
> >>>>>Ben
> >>>>>
> >>>>>--------------------------------------------------------------------=
-
> >>>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>--
> >>>>
> >>>>Nader S. Henein
> >>>>Senior Applications Architect
> >>>>
> >>>>Bayt.com
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>---------------------------------------------------------------------
> >>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>---------------------------------------------------------------------
> >>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>--
> >>
> >>Nader S. Henein
> >>Senior Applications Architect
> >>
> >>Bayt.com
> >>
> >>
> >>
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >>
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> >
> >
> >
> >
>=20
> --
>=20
> Nader S. Henein
> Senior Applications Architect
>=20
> Bayt.com
>=20
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 15:21:11 2005
Return-Path: <java-user-return-14790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31076 invoked from network); 7 Jun 2005 15:21:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 15:21:11 -0000
Received: (qmail 70127 invoked by uid 500); 7 Jun 2005 15:21:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70051 invoked by uid 500); 7 Jun 2005 15:21:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70000 invoked by uid 99); 7 Jun 2005 15:21:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of newreaders@gmail.com designates 64.233.184.201 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.201)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 08:20:56 -0700
Received: by wproxy.gmail.com with SMTP id 50so460505wri
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2005 08:20:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=emuvOF9st8/cUUsesKfndFI8yU9d0HNV/9cuMQFgypMfzK2+Uy8HyZjx6uvZF1mYK2fdbEBmqst1wysHpM/O7CrtB3/hEOhvybxEdTuPfGAFfuhjyeRVeKTbGqAN2NSVGlV4fUmue8lgxoIAwS5APSaCNEFVQkthg8ZPUiuKSoc=
Received: by 10.54.23.26 with SMTP id 26mr3884698wrw;
        Tue, 07 Jun 2005 07:30:30 -0700 (PDT)
Received: by 10.54.23.39 with HTTP; Tue, 7 Jun 2005 07:30:30 -0700 (PDT)
Message-ID: <5f4a6461050607073023c82dd5@mail.gmail.com>
Date: Wed, 8 Jun 2005 00:30:30 +1000
From: Ben <newreaders@gmail.com>
Reply-To: Ben <newreaders@gmail.com>
To: java-user@lucene.apache.org, nsh@bayt.net
Subject: Re: Lucene in clustered environment (Tomcat)
In-Reply-To: <5f4a6461050607072068a173b1@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <5f4a6461050606234078585ec5@mail.gmail.com>
	 <42A54448.3010008@bayt.net> <5f4a64610506070151f9bc000@mail.gmail.com>
	 <42A56339.6050001@bayt.net>
	 <5f4a646105060704071f6caa58@mail.gmail.com>
	 <42A5A565.9030500@bayt.net>
	 <5f4a6461050607072068a173b1@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Wouldn't it defeat the purpose of clustering if you have a single
server to manage a single index? What would happen if this server
failed?

Cheers,
Ben

On 6/8/05, Ben <newreaders@gmail.com> wrote:
> How about using JavaGroups to notify other nodes in the cluster about
> the changes?
>=20
> Essentially, each node has the same index stored in a different
> location. When one node updates/deletes a record, other nodes will get
> a notification about the changes and update their index accordingly?
> By using this method, I don't have to modify my Lucene code, I just
> need to add additional code to notify other nodes. I believe this
> method also scales better.
>=20
> Cheers,
> Ben
>=20
>=20
> On 6/7/05, Nader Henein <nsh@bayt.net> wrote:
> > I realize I've already asked you this question, but do you need 100%
> > real time, because you could run batch them every 2 minutes, and
> > concerning Parallel search, unless you really need it, it's overkill in
> > this case, a communal index will serve you well and will be much easier
> > to maintain. You have to way requirement vs. complexity/ debug time.
> >
> > Nader Henein
> >
> > Ben wrote:
> >
> > >>When you say your cluster is on a single machine, do you mean that yo=
u have multiple webservers on the same machine all of which search a single=
 Lucene index?
> > >>
> > >>
> > >
> > >Yes, this is my case.
> > >
> > >
> > >
> > >>Do you use Lucene as your persistent store or do you have a DB back t=
here?
> > >>
> > >>
> > >
> > >I use Lucene to search for data stored in a PostgreSQL server.
> > >
> > >
> > >
> > >>what is your current update/delete strategy because real time inserts=
 from the webservers directly to the index will not work because you can't =
have multiple writers.
> > >>
> > >>
> > >
> > >I have to do this in real time, what are the available solutions? My
> > >application has the ability to do batch update/delete to a Lucene
> > >index but I would like to do this in real time.
> > >
> > >One solution I am thinking is to have each cluster has it own index
> > >and use parallel search. This makes my application even more complex.
> > >
> > >
> > >
> > >>I strongly recommend Quartz, it's rock solid and really versatile.
> > >>
> > >>
> > >
> > >I am using Quartz, it is really great and supports cluster.
> > >
> > >Thanks,
> > >Ben
> > >
> > >
> > >On 6/7/05, Nader Henein <nsh@bayt.net> wrote:
> > >
> > >
> > >>When you say your cluster is on a single machine, do you mean that yo=
u
> > >>have multiple webservers on the same machine all of which search a
> > >>single Lucene index? Because if that's the case, your solution is
> > >>simple, as long as you persist to a single DB and then designate one =
of
> > >>your servers (or even another server) to update/delete the index. Do =
you
> > >>use Lucene as your persistent store or do you have a DB back there? a=
nd
> > >>what is your current update/delete strategy because real time inserts
> > >>from the webservers directly to the index will not work because you
> > >>can't have multiple writers. Updating a dirty flag on rows that need =
to
> > >>be indexed/deleted, or using a table for this task and then batching
> > >>your updates would be ideal, and if you're using server specific
> > >>scheduling, I strongly recommend Quartz, it's rock solid and really
> > >>versatile.
> > >>
> > >>My two cents.
> > >>
> > >>Nader Henein
> > >>
> > >>
> > >>Ben wrote:
> > >>
> > >>
> > >>
> > >>>My cluster is on a single machine and I am using FS index.
> > >>>
> > >>>I have already integrated Lucene into my web application for use in =
a
> > >>>non-clustered environment. I don't know what I need to do to make it
> > >>>work in a clustered environment.
> > >>>
> > >>>Thanks,
> > >>>Ben
> > >>>
> > >>>On 6/7/05, Nader Henein <nsh@bayt.net> wrote:
> > >>>
> > >>>
> > >>>
> > >>>
> > >>>>IMHO, Issues that you need to consider
> > >>>>
> > >>>>   * Atomicity of updates and deletes if you are using multiple ind=
exes
> > >>>>     on multiple machines (the case if your cluster is over a wide =
network)
> > >>>>   * Scheduled indecies to core data comparison and sanitization
> > >>>>     (intensive)
> > >>>>
> > >>>>This all depends on what the volume of change is on your index and
> > >>>>whether you'll be using a Memory resident index or an FS index.
> > >>>>
> > >>>>This should start the ball rolling, we've been using Lucene success=
fully
> > >>>>on a distributed cluster for a while now, and as long as you're awa=
re of
> > >>>>some basic NDS limitations/constraints you should be fine.
> > >>>>
> > >>>>Hope this helps
> > >>>>
> > >>>>Nader Henein
> > >>>>
> > >>>>Ben wrote:
> > >>>>
> > >>>>
> > >>>>
> > >>>>
> > >>>>
> > >>>>>Hi
> > >>>>>
> > >>>>>I would like to use Lucene in a clustered environment, what are th=
e
> > >>>>>things that I should consider and do?
> > >>>>>
> > >>>>>I would like to use the same ordinary index storage for all the no=
des
> > >>>>>in the the cluster, possible?
> > >>>>>
> > >>>>>Thanks,
> > >>>>>Ben
> > >>>>>
> > >>>>>------------------------------------------------------------------=
---
> > >>>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >>>>>For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>--
> > >>>>
> > >>>>Nader S. Henein
> > >>>>Senior Applications Architect
> > >>>>
> > >>>>Bayt.com
> > >>>>
> > >>>>
> > >>>>
> > >>>>
> > >>>>
> > >>>>-------------------------------------------------------------------=
--
> > >>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >>>>For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>>>
> > >>>>
> > >>>>
> > >>>>
> > >>>>
> > >>>>
> > >>>--------------------------------------------------------------------=
-
> > >>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >>>For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>>
> > >>>
> > >>>
> > >>>
> > >>>
> > >>>
> > >>>
> > >>>
> > >>>
> > >>>
> > >>>
> > >>--
> > >>
> > >>Nader S. Henein
> > >>Senior Applications Architect
> > >>
> > >>Bayt.com
> > >>
> > >>
> > >>
> > >>
> > >>
> > >>---------------------------------------------------------------------
> > >>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >>For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >>
> > >>
> > >
> > >---------------------------------------------------------------------
> > >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> >
> > --
> >
> > Nader S. Henein
> > Senior Applications Architect
> >
> > Bayt.com
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 15:24:17 2005
Return-Path: <java-user-return-14791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33053 invoked from network); 7 Jun 2005 15:24:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 15:24:17 -0000
Received: (qmail 82064 invoked by uid 500); 7 Jun 2005 15:24:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82038 invoked by uid 500); 7 Jun 2005 15:24:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 63886 invoked by uid 99); 7 Jun 2005 15:18:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of anthony.vito@gmail.com designates 64.233.170.206 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:cc:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=h/F9zRon8JV1Mv9rJElo05is4moIBzBBD2a7xgRkSHjbCkHzWw1EfXEeBJmtIbnge0J6fmZfhqRg8OstGw9zjWH/59FYywy8dZ2KJGvikUDOPK48b4NcaWlTz5sA3g0CZuSclYyCbQ3dpCZiYrXa55nBc6/prr221KuHLy1JIec=
Message-ID: <41672bf405060708182e6328da@mail.gmail.com>
Date: Tue, 7 Jun 2005 11:18:15 -0400
From: Anthony Vito <anthony.vito@gmail.com>
Reply-To: mythtv-users@mythtv.org
To: java-user@lucene.apache.org
Subject: Re: Using jdbcdirectory
Cc: ivan.frade@fundacionctic.org
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wed, 2005-05-18 at 17:30 +0200, Ivan Frade wrote:
> Hello,
>=20
>  I'm trying to use JDBCDirectory in my project. Now (the project) is
> working fine with FSDirectory, but if i simple replace FSDirectory with
> JDBCDirectory the things don't go well: I can create the index, but when
> try to connect (to insert a document) i find a corrupted index. Looking
> database content, i found "segmets" file with 0 bytes length.
>=20
>  My questions are:
>=20
> * Is this a problem of JDBCDirectory or i'm using it in wrong way (I use
> the _same_ code i run with FSDirectory)
> * Exists other alternatives to JDBCDirectory to store the index in a
> database? (mysql or oracle)
>=20
>  Thank you, excuse me my english
>=20
> Frade

 Thanks for trying out JDBCDirectory. The problem you are having is with
the way I designed JDBCDirectory. I designed it to solved a business
problem. I index a whole bunch of stuff _once_ and from there I use the
index as read only. Because of this, I implemented it to only write out
the file lengths when the directory is closed. So the steps you need to
take to use the JDBCDirectory v0.05 are...

1) open up a JDBCDirectory object.
2) insert all your documents.
3) close the JDBCDirectory object.
---
in your 'searching' program
1) open up a JDBCDirectory object on the same index
2) start searching


 Lately I have been working on my own time to correct this and some
other issues with JDBCDirectory. The latest features I'm working toward
are:

- File lengths updated on write.
    This is done, except.. I'm not sure how well this will work yet with
multiple JDBCDirectory objects access the same index. Some deeper
locking may be needed, or maybe not...
- Works out of the box with Postgres.
    Not done yet. Thanks to the work of a contributer I should be able
to support postgres with the same code base, and no abstraction.
- Autocommit can be on or off
    This is done. Also, leaving it off will provide a speed boost.( I
think) ( The length writes are committed with data writes. )

 I recently moved so I put up a temporary site,
http://www.anthonyvito.com ,where you can download the latest
development code from. Don't expect any miracles, but it might work for
you with a bit of hacking. Send back comments, issues.. Thanks!!

 Make sure you look at the AbstractTestCase for how to setup statement
pools in your application. You want that or everything will be much
slower.


--=20
Anthony Vito
Software Engineer
Perspective Partners LLC
vito@perspectivepartners.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 15:33:29 2005
Return-Path: <java-user-return-14792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38188 invoked from network); 7 Jun 2005 15:33:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 15:33:29 -0000
Received: (qmail 3835 invoked by uid 500); 7 Jun 2005 15:33:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3808 invoked by uid 500); 7 Jun 2005 15:33:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3795 invoked by uid 99); 7 Jun 2005 15:33:21 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr4.xs4all.nl (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 08:33:19 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr4.xs4all.nl (8.13.3/8.13.3) with ESMTP id j57FX4Cl028734
	for <java-user@lucene.apache.org>; Tue, 7 Jun 2005 17:33:05 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Documents returned by Scorer
Date: Tue, 7 Jun 2005 17:33:04 +0200
User-Agent: KMail/1.5.4
References: <FFB3B0F0-B219-49C7-AF3A-C1CEEA8B9656@cenqua.com>
In-Reply-To: <FFB3B0F0-B219-49C7-AF3A-C1CEEA8B9656@cenqua.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506071733.04754.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 07 June 2005 11:42, Matt Quail wrote:
> I've been playing around with a custom Query, and I've just realized  
> that my Scorer is likely to return the same document more then once.  
> Before I delve a bit further, can anyone tell me if this is this a  
> Bad Thing?

Normally, yes. A query is expected to provide a single score for
each matching document. The Hits class depends on this.
One can suppress later 'hits' by using a BitVector.

When your scorer implements skipTo it would normally have
to return the documents in document number order.

In the development version all scorers implement skipTo.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 16:35:05 2005
Return-Path: <java-user-return-14793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75517 invoked from network); 7 Jun 2005 16:35:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 16:35:04 -0000
Received: (qmail 74132 invoked by uid 500); 7 Jun 2005 16:34:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74095 invoked by uid 500); 7 Jun 2005 16:34:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74068 invoked by uid 99); 7 Jun 2005 16:34:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of john.wang@gmail.com designates 64.233.162.192 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 09:34:56 -0700
Received: by zproxy.gmail.com with SMTP id 8so170294nzo
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2005 09:34:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ur7rjwGd2BL6VKiUar3cGZynnomXrWDnSDbfnEGws9RqqTu0ZhggdVlItop16RoWVkXuKkS/zNtCOIFi70lVrNM9m0flat4RQLg6wqe6qyb5uHkhUYIscykRzvcWu6SgY9CYPp4O8D9ufFFrL3g9Qt7uQxSySInIF6iMG7unLsU=
Received: by 10.36.220.9 with SMTP id s9mr1532396nzg;
        Tue, 07 Jun 2005 09:34:41 -0700 (PDT)
Received: by 10.36.10.19 with HTTP; Tue, 7 Jun 2005 09:34:41 -0700 (PDT)
Message-ID: <8837fb7705060709343c4c6a6a@mail.gmail.com>
Date: Tue, 7 Jun 2005 09:34:41 -0700
From: John Wang <john.wang@gmail.com>
Reply-To: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Finding minimum and maximum value of a field?
In-Reply-To: <42A549A1.60202@ifit.uni-klu.ac.at>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <429C0D0A.8040409@rojo.com> <42A549A1.60202@ifit.uni-klu.ac.at>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can try to load the fieldcache:

if you get the StringIndex from the fieldcache, the last element in
the lookup array is the largest value (lexically) in the field.

-John


On 6/7/05, sergiu gordea <gsergiu@ifit.uni-klu.ac.at> wrote:
>=20
>=20
> Kevin Burton wrote:
>=20
> > I have an index with a date field.  I want to quickly find the minimum
> > and maximum values in the index.
> >
> > Is there a quick way to do this?  I looked at using TermInfos and
> > finding the first one but how to I find the last?
> >
> > I also tried the new sort API and the performance was horrible :-/
> >
> > Any ideas?
>=20
> You may keep a history of the MIN and MAX values in an external file.
> Let's say, you can write in a text file the MIN_DATE and MAX_DATE,
> and keep them up to date when indexing, deleting documents.
>=20
> Best,
>=20
>  Sergiu
>=20
> >
> > Kevin
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 17:10:26 2005
Return-Path: <java-user-return-14794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39520 invoked from network); 7 Jun 2005 17:10:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 17:10:26 -0000
Received: (qmail 80105 invoked by uid 500); 7 Jun 2005 17:10:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80074 invoked by uid 500); 7 Jun 2005 17:10:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80028 invoked by uid 99); 7 Jun 2005 17:10:14 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from gateway.reims.net (HELO gateway.reims.net) (194.75.234.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 10:10:13 -0700
Received: (from uucp@localhost)
	by gateway.reims.net (8.9.3/8.9.3) id NAA10547
	for <java-user@lucene.apache.org>; Tue, 7 Jun 2005 13:56:49 +0100 (BST)
From: Paul.Illingworth@saaconsultants.com
Received: from smtpgate.saa-cons.co.uk(10.10.10.182) by gateway.reims.net via smap (3.2)
	id xma010532; Tue, 7 Jun 05 13:56:46 +0100
Received: (from uucp@localhost)
	by smtpgate.saa-cons.co.uk (8.8.8/8.8.8) id NAA06471
	for <java-user@lucene.apache.org>; Tue, 7 Jun 2005 13:45:59 +0100 (BST)
	(envelope-from Paul.Illingworth@saaconsultants.com)
Received: from domino-mail.saa-cons.co.uk(10.10.10.4) by smtpgate.saa-cons.co.uk via smap (V2.1)
	id xma006469; Tue, 7 Jun 05 13:45:39 +0100
Subject: Flushing IndexWriters and IndexReaders
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.1 January 21, 2004
Message-ID: <OF8AF99867.F54E3C02-ON80257019.0045F540-80257019.0046376B@SAAConsultants.com>
Date: Tue, 7 Jun 2005 13:45:38 +0100
X-MIMETrack: Serialize by Router on domino-mail/Saa(Release 6.5.1|January 21, 2004) at
 07/06/2005 13:45:38
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N





I am using Lucene in an environment where searches are being carried out
whilst documents are being added and deleted.
Currently I have some index management code which caches the IndexReader
and IndexWriter instances ensuring only one is ever open at a time. When a
document is added then an IndexWriter is created and the document added.
The IndexWriter is now kept open in case any other documents are added in
which case the same IndexWriter is used. If a search request comes in then
the IndexWriter is closed and an IndexReader is created ensuring searches
are carried out on the most up to date index. If the system is idle for
some time with an IndexWriter open then I am closing the IndexWriter
flushing any unwritten data to the disk.
My question(s) are
1) Does this seem like a sensible approach - I was worried about keeping an
IndexWriter open for long periods with unwritten data. If the server
crashed or the application process was killed off without closing the
IndexWriter would this lead to index corruption? Or, would it just mean any
unwritten documents would not appear in the index?
2) Does the same logic apply to IndexReader and delete() operations? Do I
need to flush these too? When do the deletes get commited to the files on
disk?
3) In an environment like this would it be sensible to optimise the index
after a certain number of adds or deletes from the index? Is there any easy
way to determine if an index would benefit from being optimised? When does
the version number of the index get updated and could I use this (if I
recorded the version of the index that was last optimised) to determine how
much activity there had been on an index?

Regards
Paul I.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 17:57:46 2005
Return-Path: <java-user-return-14795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68616 invoked from network); 7 Jun 2005 17:57:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 17:57:45 -0000
Received: (qmail 21252 invoked by uid 500); 7 Jun 2005 17:57:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21220 invoked by uid 500); 7 Jun 2005 17:57:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21207 invoked by uid 99); 7 Jun 2005 17:57:39 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lorenzo.viscanti@gmail.com designates 64.233.162.193 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 10:57:38 -0700
Received: by zproxy.gmail.com with SMTP id 8so195644nzo
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2005 10:57:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type;
        b=VEHYbUrT+xFW3tmya/lInzDzLjfxOh+R5PS03BSdjASJvS8KmhW7KEkF/2m08ezQbj9UKp0n+4xsFsYqLOQ2LcAiXyE69SOrzJ+TaZSMOg0p5ecAmX+LNZ++PEk0CIMcMvxj9hW9uJ+Td4TZk5Mhz4jjT+Nn2M7IWpCIBL6UGBQ=
Received: by 10.36.222.33 with SMTP id u33mr1559724nzg;
        Tue, 07 Jun 2005 10:50:46 -0700 (PDT)
Received: by 10.36.9.2 with HTTP; Tue, 7 Jun 2005 10:50:46 -0700 (PDT)
Message-ID: <e72c67f7050607105066c955e0@mail.gmail.com>
Date: Tue, 7 Jun 2005 19:50:46 +0200
From: Lorenzo <lorenzo.viscanti@gmail.com>
Reply-To: Lorenzo <lorenzo.viscanti@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene search clusters
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19052_3785478.1118166646061"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_19052_3785478.1118166646061
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I'm writing this message trying to find some people interested in creating =
a=20
'general purpose' lucene search results' clustering extension.
I wrote a simply implementation of clustering, and I would like to=20
contribute to lucene development by releasing an open source clustering=20
implementation. I know that maybe each project need a different=20
implementation but that would be a useful basis for everyone to develop his=
=20
own project.
Is anyone interested in it?
Lorenzo

------=_Part_19052_3785478.1118166646061--

From java-user-return-14796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 18:59:54 2005
Return-Path: <java-user-return-14796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91206 invoked from network); 7 Jun 2005 18:59:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 18:59:54 -0000
Received: (qmail 15420 invoked by uid 500); 7 Jun 2005 18:59:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15389 invoked by uid 500); 7 Jun 2005 18:59:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15375 invoked by uid 99); 7 Jun 2005 18:59:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of brogar@gmail.com designates 64.233.184.203 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 11:59:45 -0700
Received: by wproxy.gmail.com with SMTP id 36so681070wra
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2005 11:59:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=qL36knPXjwXBwCRYEe7xlBWVWyUYjgowALp+YQdQfp3+GxjMRZPiFeV/bvO+uxFWZDc+0Puv1AmzYI4lF/c3uRPLKyGXMc7zzJpALdb1Z1uJ6bO+e/5XNZJL2MOomqZalS/Rz2AXauiEe1etPgfUEacg7lI+ylNvX3+4AhXrc0I=
Received: by 10.54.150.2 with SMTP id x2mr4213346wrd;
        Tue, 07 Jun 2005 11:59:30 -0700 (PDT)
Received: by 10.54.62.19 with HTTP; Tue, 7 Jun 2005 11:59:29 -0700 (PDT)
Message-ID: <34cc3b0a05060711591dfccb32@mail.gmail.com>
Date: Tue, 7 Jun 2005 14:59:29 -0400
From: Chris D <brogar@gmail.com>
Reply-To: Chris D <brogar@gmail.com>
To: java-user@lucene.apache.org
Subject: Adding document with FileReader and deletions.
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi list,

I've been trying to use lucene to index documents that change
occasionally with fields that change frequently. When I add the
contents of the file they are removed when I try to delete and readd
the document. I and am using something like the following.

public void index(String stuff, File f, boolean doContents){
   Document doc =3D new Document();
   writer.close()
   reader =3D IndexReader.open(directory);
   TermDocs td =3D reader.termDocs(new Term("fileid", fileid));
   //Load the document into memory and delete the document from the index.
   if(td.next()){
      doc =3D reader.document(tc.doc());
      reader.delect(new Term("fileid", fileid)); //*******
   }
   //We're done deleting so we can move along.
   reader.close();
   writer =3D new IndexWriter(...);

   doc.removeFields("stuff");
   doc.add(new Field("stuff", stuff, File.Store.YES, File.Index.TOKENIZED))=
;
   //More fields...

   //If the contents need to be readded... Do so.
   if(doContents){
      doc.removeFields("contents");
      doc.add(new Field("contents", new FileReader(f), Field.TermVector.YES=
));
      //System.out.println(doc.get("contents"));
   }
   writeDoc(doc)
}

There are other fields in doc that will stay the same when it updates
which is why I do the removeFields instead of just deleting the doc
and replacing it.

Now if I remove the reader.delete call that's starred the contents get
added. (Albeit over and over again) If it remains then all of the
contents go missing in the index. (Verified with Luke and by searching
for contents:a* etc)

I figure I'm missing something silly, hopefully someone can help me
out, I've been fighting with this for a day or two now, with little
progress, but many more printlns.

Cheers,
Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 19:20:34 2005
Return-Path: <java-user-return-14797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21226 invoked from network); 7 Jun 2005 19:20:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 19:20:34 -0000
Received: (qmail 75288 invoked by uid 500); 7 Jun 2005 19:20:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75239 invoked by uid 500); 7 Jun 2005 19:20:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74971 invoked by uid 99); 7 Jun 2005 19:20:21 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of burton@rojo.com designates 12.43.53.196 as permitted sender)
Received: from Unknown (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 12:20:19 -0700
Received: from [192.168.1.146] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id j57I6CbD011788
	for <java-user@lucene.apache.org>; Tue, 7 Jun 2005 11:06:17 -0700
Message-ID: <42A5E210.3040704@rojo.com>
Date: Tue, 07 Jun 2005 11:06:08 -0700
From: Kevin Burton <burton@rojo.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Macintosh/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: use of LinkedList in ConjunctionScorer hurting performance?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This is a strange anomaly I wanted to point out:

http://www.flickr.com/photos/burtonator/18030919/

This is a jprofiler screenshot.  I can give you a jprofiler "snapshot" 
if you want but it requires the clientside app.

I'm not sure why this should be hot... in a linked list this should be 
fast ... maybe we're calling it too often?

I didn't have much time to look at it but I wanted to illuminate the issue.

Kevin

-- 


Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
See irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

   Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 19:36:38 2005
Return-Path: <java-user-return-14798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30703 invoked from network); 7 Jun 2005 19:36:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 19:36:38 -0000
Received: (qmail 29583 invoked by uid 500); 7 Jun 2005 19:36:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29269 invoked by uid 500); 7 Jun 2005 19:36:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29036 invoked by uid 99); 7 Jun 2005 19:36:14 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from server1.alagad.com (HELO alagad.com) (69.45.152.8)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 12:36:06 -0700
Received: from doug ([67.22.212.241]) by alagad.com with MailEnable ESMTP; Tue, 07 Jun 2005 13:51:12 -0400
From: "Doug Hughes" <dhughes@alagad.com>
To: <java-user@lucene.apache.org>
Subject: Indexing from multiple applications to a central index.
Date: Tue, 7 Jun 2005 13:36:28 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0010_01C56B65.E90672B0"
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcVrh29GyA28tMJ4Rku/LCjahcUelw==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0010_01C56B65.E90672B0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

 
Hello,
 
I have a situation where I need to have multiple applications, potentially
located on different servers, and which have no knowledge of each other,
indexing into and searching from the same Lucene index.  I anticipate
problems with locks.  
 
Let's say I have two applications and, at any time, either of them may try
to index upwards of 1000 documents (or more!).  If, by luck, these
applications do not attempt to write to the index at the same time then
things are fine.  However, if both of them try to write to the index at the
same time, one of them will fail due to the index being locked.  
 
My first solution to this problem was to have both applications check to see
if the index is locked and to let them sleep until the index was unlocked.
The problem with this is that if, while indexing, an application is shut
down or killed, the index may not be unlocked.  This will block other
applications from indexing and may cause them to hang.
 
Clearly I have a threading problems.  I think I may know a solution to this
problem and I would appreciate verification of the solution or suggestions
on approaches.
 
I am thinking that I can make all of the applications index into their own
index, not the central shared index.  Their own index might be a FSDirectory
or a RAMDirectory.  When done indexing, the applications' indexes would be
merged with the central index for consumption by all applications sharing
the index.
 
>From what I understand, the process of merging indexes takes a lot less time
than the process of inserting into or deleting from an index.  This seems to
mean that I'm less "likely" to run into locking issues.  I can more safely
have process sleep until the index is unlocked and can gain access to merge
their index with the central index.  If these applications use their own
FSDirectory I should be able to continue working with their FS directory in
the case of an unclean shutdowns and should still be able to merge it with
the central index.
 
Does anyone have any advice to offer on this? 
 
Thank you,
 
Doug Hughes
dhughes@alagad.com

------=_NextPart_000_0010_01C56B65.E90672B0--



From java-user-return-14799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 20:19:49 2005
Return-Path: <java-user-return-14799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49395 invoked from network); 7 Jun 2005 20:19:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 20:19:49 -0000
Received: (qmail 63531 invoked by uid 500); 7 Jun 2005 20:19:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63495 invoked by uid 500); 7 Jun 2005 20:19:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63477 invoked by uid 99); 7 Jun 2005 20:19:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from dydimus.dreamhost.com (HELO dydimus.dreamhost.com) (66.33.197.17)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 13:19:28 -0700
Received: from [66.235.34.24] (c66-235-34-24.sea2.cablespeed.com [66.235.34.24])
	by dydimus.dreamhost.com (Postfix) with ESMTP id 93F8C4F898
	for <java-user@lucene.apache.org>; Tue,  7 Jun 2005 13:19:07 -0700 (PDT)
User-Agent: Microsoft-Entourage/11.0.0.040405
Date: Tue, 07 Jun 2005 13:19:03 -0700
Subject: Cannot search on plain numbers
From: "Peter T. Brown" <peter@flippyhead.com>
To: <java-user@lucene.apache.org>
Message-ID: <BECB4F47.977C%peter@flippyhead.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello. I am using lucene 1.4.3

I am indexing a Java Long number using a Lucene Keyword field, but no matter
what I do, I cannot find any documents I know have been indexed with this
field. My logs show that the number "4" is being indexed as "4" but doing
any searches in that field for "4" return no hits.

Is there something special I need to do to index and search on fields that
contain ONLY numbers?


Thank You 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 20:26:27 2005
Return-Path: <java-user-return-14800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52300 invoked from network); 7 Jun 2005 20:26:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 20:26:27 -0000
Received: (qmail 87027 invoked by uid 500); 7 Jun 2005 20:26:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86998 invoked by uid 500); 7 Jun 2005 20:26:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86978 invoked by uid 99); 7 Jun 2005 20:26:19 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lucenelist@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from smtprelay03.ispgateway.de (HELO smtprelay03.ispgateway.de) (80.67.18.15)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 13:26:16 -0700
Received: (qmail 29800 invoked from network); 7 Jun 2005 20:25:54 -0000
Received: from unknown (HELO p549647B8.dip.t-dialin.net) ([pbs]695637@[84.150.71.184])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 7 Jun 2005 20:25:54 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Cannot search on plain numbers
Date: Tue, 7 Jun 2005 22:27:09 +0200
User-Agent: KMail/1.8
References: <BECB4F47.977C%peter@flippyhead.com>
In-Reply-To: <BECB4F47.977C%peter@flippyhead.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506072227.09438@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 07 June 2005 22:19, Peter T. Brown wrote:

> I am indexing a Java Long number using a Lucene Keyword field, but no
> matter what I do, I cannot find any documents I know have been indexed
> with this field. My logs show that the number "4" is being indexed as
> "4" but doing any searches in that field for "4" return no hits.

Please check the FAQ:
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-3558e5121806fb4fce80fc022d889484a9248b71

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 20:33:15 2005
Return-Path: <java-user-return-14801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55138 invoked from network); 7 Jun 2005 20:33:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 20:33:14 -0000
Received: (qmail 3623 invoked by uid 500); 7 Jun 2005 20:33:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3568 invoked by uid 500); 7 Jun 2005 20:33:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3555 invoked by uid 99); 7 Jun 2005 20:33:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 13:33:03 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Cannot search on plain numbers
Date: Tue, 7 Jun 2005 16:32:44 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA01082AAB@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Cannot search on plain numbers
thread-index: AcVrny7Q46xxm1GRRtuZuOsqBWcdJgAANiVw
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

this depends on the analyzer you are using, use luke and check that =
numbers are actually in the index. if not then use an analyzer that does =
index numbers.

omar

-----Original Message-----
From: Daniel Naber [mailto:lucenelist@danielnaber.de]
Sent: Tuesday, June 07, 2005 4:27 PM
To: java-user@lucene.apache.org
Subject: Re: Cannot search on plain numbers


On Tuesday 07 June 2005 22:19, Peter T. Brown wrote:

> I am indexing a Java Long number using a Lucene Keyword field, but no
> matter what I do, I cannot find any documents I know have been indexed
> with this field. My logs show that the number "4" is being indexed as
> "4" but doing any searches in that field for "4" return no hits.

Please check the FAQ:
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-3558e5121806fb4fce80=
fc022d889484a9248b71

--=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 20:49:13 2005
Return-Path: <java-user-return-14802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74220 invoked from network); 7 Jun 2005 20:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 20:49:11 -0000
Received: (qmail 60140 invoked by uid 500); 7 Jun 2005 20:48:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60057 invoked by uid 500); 7 Jun 2005 20:48:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59979 invoked by uid 99); 7 Jun 2005 20:48:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from dydimus.dreamhost.com (HELO dydimus.dreamhost.com) (66.33.197.17)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 13:48:52 -0700
Received: from [66.235.34.24] (c66-235-34-24.sea2.cablespeed.com [66.235.34.24])
	by dydimus.dreamhost.com (Postfix) with ESMTP id 6C9C14F894
	for <java-user@lucene.apache.org>; Tue,  7 Jun 2005 13:48:10 -0700 (PDT)
User-Agent: Microsoft-Entourage/11.0.0.040405
Date: Tue, 07 Jun 2005 13:48:07 -0700
Subject: Re: Cannot search on plain numbers
From: "Peter T. Brown" <peter@flippyhead.com>
To: <java-user@lucene.apache.org>
Message-ID: <BECB5617.9782%peter@flippyhead.com>
In-Reply-To: <200506072227.09438@danielnaber.de>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank You. I've re-read the FAQ and I think I've got a better understanding
of how I am confused. Presently I am using this arrangement to get my
analyzer:

    public static class DefaultAnalyzer extends Analyzer {
        public TokenStream tokenStream(String fieldName, Reader reader) {
            LetterTokenizer tokenizer = new LetterTokenizer(reader);
            TokenStream result = null;
            result = new LowerCaseFilter(tokenizer);
            result = new StopFilter(result,
StopAnalyzer.ENGLISH_STOP_WORDS);
            result = new PorterStemFilter(result);


            return result;
        }
    } 


However, for reasons I do not yet understand, it filters out search on plain
numbers. How can I modify this to keep the benefits of the filters currently
in use but also search on plain numbers?


Thanks again

> From: Daniel Naber <lucenelist@danielnaber.de>
> Reply-To: <java-user@lucene.apache.org>
> Date: Tue, 7 Jun 2005 22:27:09 +0200
> To: <java-user@lucene.apache.org>
> Subject: Re: Cannot search on plain numbers
> 
> On Tuesday 07 June 2005 22:19, Peter T. Brown wrote:
> 
>> I am indexing a Java Long number using a Lucene Keyword field, but no
>> matter what I do, I cannot find any documents I know have been indexed
>> with this field. My logs show that the number "4" is being indexed as
>> "4" but doing any searches in that field for "4" return no hits.
> 
> Please check the FAQ:
> http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-3558e5121806fb4fce80fc022
> d889484a9248b71
> 
> -- 
> http://www.danielnaber.de
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 20:55:41 2005
Return-Path: <java-user-return-14803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84329 invoked from network); 7 Jun 2005 20:55:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 20:55:41 -0000
Received: (qmail 84223 invoked by uid 500); 7 Jun 2005 20:55:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84198 invoked by uid 500); 7 Jun 2005 20:55:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84178 invoked by uid 99); 7 Jun 2005 20:55:34 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr2.xs4all.nl (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 13:55:32 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr2.xs4all.nl (8.13.3/8.13.3) with ESMTP id j57KtIVi042197
	for <java-user@lucene.apache.org>; Tue, 7 Jun 2005 22:55:18 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: use of LinkedList in ConjunctionScorer hurting performance?
Date: Tue, 7 Jun 2005 22:55:18 +0200
User-Agent: KMail/1.5.4
References: <42A5E210.3040704@rojo.com>
In-Reply-To: <42A5E210.3040704@rojo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506072255.18336.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 07 June 2005 20:06, Kevin Burton wrote:
> This is a strange anomaly I wanted to point out:
> 
> http://www.flickr.com/photos/burtonator/18030919/
> 
> This is a jprofiler screenshot.  I can give you a jprofiler "snapshot" 
> if you want but it requires the clientside app.
> 
> I'm not sure why this should be hot... in a linked list this should be 
> fast ... maybe we're calling it too often?
> 
> I didn't have much time to look at it but I wanted to illuminate the issue.

It's straightforward to reimplement the linked list as a modulo indexed
array. That might be a somewhat faster, but until now I expected the
runtime to be dominated by the I/O.

In case you would like to profile an implementation with such an array
just let me know, so I can add it in a bug report. It's a never finished
version I have lying around here, and it would need a bit of tinkering
before posting.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 22:18:09 2005
Return-Path: <java-user-return-14804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35027 invoked from network); 7 Jun 2005 22:18:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 22:18:09 -0000
Received: (qmail 6134 invoked by uid 500); 7 Jun 2005 22:18:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6090 invoked by uid 500); 7 Jun 2005 22:18:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6058 invoked by uid 99); 7 Jun 2005 22:18:02 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=HTML_20_30,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lorenzo.viscanti@gmail.com designates 64.233.162.196 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 15:18:02 -0700
Received: by zproxy.gmail.com with SMTP id 8so26652nzo
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2005 15:18:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=IW0juLMsc2+gaUs/+0XaqGP9plfBp4lZM9IwQe8rPvN6sOnXYzQPf4S+voMl/ArGfCZGgbVS4n36gnjC1FONxObOCiPw/rovxVgboynyDKbCaqyCU4o+6oxUULAydgEAbKfJHXx3S3cExoj2WsdJalD//v5ULRWcip4roFgdf2k=
Received: by 10.36.58.19 with SMTP id g19mr146348nza;
        Tue, 07 Jun 2005 15:18:00 -0700 (PDT)
Received: by 10.36.9.2 with HTTP; Tue, 7 Jun 2005 15:18:00 -0700 (PDT)
Message-ID: <e72c67f7050607151887c5eb3@mail.gmail.com>
Date: Wed, 8 Jun 2005 00:18:00 +0200
From: Lorenzo <lorenzo.viscanti@gmail.com>
Reply-To: Lorenzo <lorenzo.viscanti@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search clusters
In-Reply-To: <e72c67f7050607105066c955e0@mail.gmail.com>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20178_19144772.1118182680437"
References: <e72c67f7050607105066c955e0@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_20178_19144772.1118182680437
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Some people just replied, but I forgot the most important thing...
I'm thinking of this project as part of the Google's Summer of Code program=
,=20
so I'm looking for other students.
I've sent an email to Erik and he told me that we can propose this as part=
=20
of Google's SoC if we find some other people interested in it.
Lorenzo

On 6/7/05, Lorenzo <lorenzo.viscanti@gmail.com> wrote:
>=20
> I'm writing this message trying to find some people interested in creatin=
g=20
> a 'general purpose' lucene search results' clustering extension.
> I wrote a simply implementation of clustering, and I would like to=20
> contribute to lucene development by releasing an open source clustering=
=20
> implementation. I know that maybe each project need a different=20
> implementation but that would be a useful basis for everyone to develop h=
is=20
> own project.
> Is anyone interested in it?
> Lorenzo
>

------=_Part_20178_19144772.1118182680437--

From java-user-return-14805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 22:34:24 2005
Return-Path: <java-user-return-14805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41856 invoked from network); 7 Jun 2005 22:34:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 22:34:24 -0000
Received: (qmail 33606 invoked by uid 500); 7 Jun 2005 22:34:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33567 invoked by uid 500); 7 Jun 2005 22:34:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33500 invoked by uid 99); 7 Jun 2005 22:34:15 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of burton@rojo.com designates 12.43.53.196 as permitted sender)
Received: from Unknown (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 15:34:13 -0700
Received: from [192.168.1.146] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id j57MY4ah018162
	for <java-user@lucene.apache.org>; Tue, 7 Jun 2005 15:34:05 -0700
Message-ID: <42A620D9.5010906@rojo.com>
Date: Tue, 07 Jun 2005 15:34:01 -0700
From: Kevin Burton <burton@rojo.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Macintosh/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Fastest way to fetch N documents with unique keys within large
 numbers of indexes..
References: <42A4FB31.3020509@rojo.com> <Pine.LNX.4.58.0506061946040.28351@hal.rescomp.berkeley.edu> <42A52A52.1060805@rojo.com> <Pine.LNX.4.58.0506062306080.11614@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0506062306080.11614@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Hostetter wrote:

>: was computing the score.  This was a big performance gain.  About 2x and
>: since its the slowest part of our app it was a nice one. :)
>:
>: We were using a TermQuery though.
>
>I believe that one search on one BooleanQuery containing 20
>TermQueries should be faster then 20 searches on 20 TermQueries.
>  
>
Actually.. it wasn't... :-/

It was about 4x slower.

Ug...

Kevin

-- 


Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
See irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

   Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 23:02:38 2005
Return-Path: <java-user-return-14806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52440 invoked from network); 7 Jun 2005 23:02:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 23:02:38 -0000
Received: (qmail 85119 invoked by uid 500); 7 Jun 2005 23:02:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85089 invoked by uid 500); 7 Jun 2005 23:02:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85073 invoked by uid 99); 7 Jun 2005 23:02:32 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fast.jack@gmx.net designates 213.165.64.20 as permitted sender)
Received: from imap.gmx.net (HELO mail.gmx.net) (213.165.64.20)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 07 Jun 2005 16:02:31 -0700
Received: (qmail invoked by alias); 07 Jun 2005 23:02:27 -0000
Received: from p5489D404.dip.t-dialin.net (EHLO local.effjay.kicks-ass.org) [84.137.212.4]
  by mail.gmx.net (mp012) with SMTP; 08 Jun 2005 01:02:27 +0200
X-Authenticated: #255453
Message-ID: <42A62787.206@gmx.net>
Date: Wed, 08 Jun 2005 01:02:31 +0200
From: Daniel Stephan <fast.jack@gmx.net>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene search clusters
References: <e72c67f7050607105066c955e0@mail.gmail.com> <e72c67f7050607151887c5eb3@mail.gmail.com>
In-Reply-To: <e72c67f7050607151887c5eb3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am currently writing sth about text retrieval using EM clustering. The
approach represents documents as high-dimensional vectors, but still it
is not related to Lucene (yet?).
How would you add clustering to Lucene? I think it may be a very
interesting technique to improve search results. If it works. My current
experience shows that it scales rather bad for larger document collections.

I don't think I will take part in Googles SoC, as I have my own "summer
of code" right now. But I would surely like to take part in discussions
about that topic, or at least read it and throw 2cents at it now and then.

cheers
Daniel


Lorenzo schrieb:

>Some people just replied, but I forgot the most important thing...
>I'm thinking of this project as part of the Google's Summer of Code program, 
>so I'm looking for other students.
>I've sent an email to Erik and he told me that we can propose this as part 
>of Google's SoC if we find some other people interested in it.
>Lorenzo
>
>On 6/7/05, Lorenzo <lorenzo.viscanti@gmail.com> wrote:
>  
>
>>I'm writing this message trying to find some people interested in creating 
>>a 'general purpose' lucene search results' clustering extension.
>>I wrote a simply implementation of clustering, and I would like to 
>>contribute to lucene development by releasing an open source clustering 
>>implementation. I know that maybe each project need a different 
>>implementation but that would be a useful basis for everyone to develop his 
>>own project.
>>Is anyone interested in it?
>>Lorenzo
>>
>>    
>>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 23:19:03 2005
Return-Path: <java-user-return-14807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57795 invoked from network); 7 Jun 2005 23:19:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 23:19:02 -0000
Received: (qmail 16922 invoked by uid 500); 7 Jun 2005 23:18:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16890 invoked by uid 500); 7 Jun 2005 23:18:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16877 invoked by uid 99); 7 Jun 2005 23:18:55 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of burton@rojo.com designates 12.43.53.196 as permitted sender)
Received: from Unknown (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 16:18:54 -0700
Received: from [192.168.1.146] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id j57NIpfH019155
	for <java-user@lucene.apache.org>; Tue, 7 Jun 2005 16:18:51 -0700
Message-ID: <42A62B58.3030703@rojo.com>
Date: Tue, 07 Jun 2005 16:18:48 -0700
From: Kevin Burton <burton@rojo.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Macintosh/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Fastest way to fetch N documents with unique keys within large
 numbers of indexes..
References: <42A4FB31.3020509@rojo.com> <2D298772-F6C9-4DDF-9E73-8AE80D9E8A94@cenqua.com> <42A52DD0.4030009@rojo.com> <200506070922.21027.paul.elschot@xs4all.nl>
In-Reply-To: <200506070922.21027.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul Elschot wrote:

>For a large number of indexes, it may be necessary to do this over
>multiple indexes by first getting the doc numbers for all indexes,
>then sorting these per index, then retrieving them
>from all indexes, and repeating the whole thing using terms determined
>from the retrieved docs.
>  
>
Well this was a BIG win.  Just benchmarking it out shows a 10x -> 50x 
performance increase.

Times in milliseconds:

Before:

duration: 1127
duration: 449
duration: 394
duration: 564

After:

duration: 182
duration: 39
duration: 12
duration: 11

The values of 2-4  I'm sure are due to the filesystem buffer cache but I 
can't imagine why they'd be faster in the second round.  It might be 
that Linux is deciding not to buffer the document blocks.

Kevin

-- 

Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
See irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

   Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 23:20:06 2005
Return-Path: <java-user-return-14808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57933 invoked from network); 7 Jun 2005 23:20:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 23:20:05 -0000
Received: (qmail 19137 invoked by uid 500); 7 Jun 2005 23:20:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19108 invoked by uid 500); 7 Jun 2005 23:20:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19093 invoked by uid 99); 7 Jun 2005 23:20:00 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=HTML_20_30,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lorenzo.viscanti@gmail.com designates 64.233.162.197 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.197)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 16:19:57 -0700
Received: by zproxy.gmail.com with SMTP id 13so50283nzn
        for <java-user@lucene.apache.org>; Tue, 07 Jun 2005 16:19:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=NS5cxHV8BOyUtwyxPIF3L4j/OlmGL3rOaUzj4NpASPCByZysczI1wIe5NZA1iYlsVfaeJLKSf9R6Bl2knLfhrk+ML/fbsXIr0Dz78bPK6RaZuwJxFu9+BOw4BYE5rTu72ZQ2gVHe+htTxYB6qIwImo2Lg2/PpeUcnyvmOIHDsD4=
Received: by 10.36.222.75 with SMTP id u75mr132267nzg;
        Tue, 07 Jun 2005 16:19:54 -0700 (PDT)
Received: by 10.36.9.2 with HTTP; Tue, 7 Jun 2005 16:19:54 -0700 (PDT)
Message-ID: <e72c67f705060716194546feb1@mail.gmail.com>
Date: Wed, 8 Jun 2005 01:19:54 +0200
From: Lorenzo <lorenzo.viscanti@gmail.com>
Reply-To: Lorenzo <lorenzo.viscanti@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search clusters
In-Reply-To: <42A62787.206@gmx.net>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20363_5493166.1118186394459"
References: <e72c67f7050607105066c955e0@mail.gmail.com>
	 <e72c67f7050607151887c5eb3@mail.gmail.com> <42A62787.206@gmx.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_20363_5493166.1118186394459
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

My approach uses the same technique, but I'm using mostly HAG clustering.
I did manage to add clustering support to a lucene based application (a=20
customized solution), but I'd like to try to create a 'general purpose'=20
library. I know it ain't easy!
I've found many scaling issues, but I saw that with an optimized algorithms=
=20
you can have pretty good results. Reading a carrot2 and lucene related=20
messages, I figured out that I can cluster only the n first results,=20
avoiding any performance issue in that way.
Lucene offers a good support to a clustering framework, based on a tf idf=
=20
analysis (not thinking of k-means or EM 'til now).
The most interesting problem is creating the architecture for such a system=
,=20
being general purpose but also very efficient.
Thanks,=20
Lorenzo

On 6/8/05, Daniel Stephan <fast.jack@gmx.net> wrote:
>=20
> I am currently writing sth about text retrieval using EM clustering. The
> approach represents documents as high-dimensional vectors, but still it
> is not related to Lucene (yet?).
> How would you add clustering to Lucene? I think it may be a very
> interesting technique to improve search results. If it works. My current
> experience shows that it scales rather bad for larger document=20
> collections.
>=20
> I don't think I will take part in Googles SoC, as I have my own "summer
> of code" right now. But I would surely like to take part in discussions
> about that topic, or at least read it and throw 2cents at it now and then=
.
>=20
> cheers
> Daniel
>=20
>=20
> Lorenzo schrieb:
>=20
> >Some people just replied, but I forgot the most important thing...
> >I'm thinking of this project as part of the Google's Summer of Code=20
> program,
> >so I'm looking for other students.
> >I've sent an email to Erik and he told me that we can propose this as=20
> part
> >of Google's SoC if we find some other people interested in it.
> >Lorenzo
> >
> >On 6/7/05, Lorenzo <lorenzo.viscanti@gmail.com> wrote:
> >
> >
> >>I'm writing this message trying to find some people interested in=20
> creating
> >>a 'general purpose' lucene search results' clustering extension.
> >>I wrote a simply implementation of clustering, and I would like to
> >>contribute to lucene development by releasing an open source clustering
> >>implementation. I know that maybe each project need a different
> >>implementation but that would be a useful basis for everyone to develop=
=20
> his
> >>own project.
> >>Is anyone interested in it?
> >>Lorenzo
> >>
> >>
> >>
> >
> >
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

------=_Part_20363_5493166.1118186394459--

From java-user-return-14809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 07 23:31:08 2005
Return-Path: <java-user-return-14809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61981 invoked from network); 7 Jun 2005 23:31:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jun 2005 23:31:08 -0000
Received: (qmail 48137 invoked by uid 500); 7 Jun 2005 23:31:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48098 invoked by uid 500); 7 Jun 2005 23:31:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48077 invoked by uid 99); 7 Jun 2005 23:31:02 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rs15.luxsci.com (HELO rs15.luxsci.com) (65.61.166.71)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 16:31:00 -0700
Received: from [192.168.70.100] (ppp115-120.static.internode.on.net [150.101.115.120])
	(authenticated bits=0)
	by rs15.luxsci.com (8.12.11/8.12.11) with ESMTP id j57NUnjs007121
	for <java-user@lucene.apache.org>; Tue, 7 Jun 2005 18:30:50 -0500
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <200506071733.04754.paul.elschot@xs4all.nl>
References: <FFB3B0F0-B219-49C7-AF3A-C1CEEA8B9656@cenqua.com> <200506071733.04754.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B8FA1ED4-3612-4929-9554-5C7E525FF590@cenqua.com>
Content-Transfer-Encoding: 7bit
From: Matt Quail <matt@cenqua.com>
Subject: Doing a Join across indexes [was Documents returned by Scorer]
Date: Wed, 8 Jun 2005 09:30:46 +1000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On 08/06/2005, at 1:33 AM, Paul Elschot wrote:

> On Tuesday 07 June 2005 11:42, Matt Quail wrote:
>
>> I've been playing around with a custom Query, and I've just realized
>> that my Scorer is likely to return the same document more then once.
>> Before I delve a bit further, can anyone tell me if this is this a
>> Bad Thing?
>>
>
> Normally, yes. A query is expected to provide a single score for
> each matching document. The Hits class depends on this.
> One can suppress later 'hits' by using a BitVector.


Yes, further delving revealed that returning a document multiple  
times, and returning doc-ids out-of-order, is a bad idea.


What I'm actually trying to implement is an efficient join between  
two indices. I'll describe my current strategy, all comments welcome.

Imagine you have two indices, and they have some field in common.  
This might often be a "primary key" field, giving you a 1-1  
relationship between documents in the two indices, but it general it  
could be any 1-N, N-1 or M-N relationship.

(Why are there two indices? There could be many reasons, one that was  
mentioned on this list recently was an ACL index. You could update/ 
delete/add from the ACL index without having to re-index the  
"primary" index).

Lets call the two indices Left and Right. We want to find documents  
in Left, where leftdoc.leftfield == rightdoc.rightfield, for some set  
of rightdoc's satisfying some query.

Here is the pseudo-code for first attempt, which works but is not  
necessarily that efficient:

Inputs:
- leftJoinField name
- rightJoinField name
- rightQuery

1) Compute a BitSet of all the docids that match the given query in  
the right, call it rightDocs.
2) Create a TermDocs for the left index
3) Create a TermEnum and a TermDocs, for iterating through all the  
<term,docid> pairs in the right index for the rightJoinField
4) for each rterm on the right where there is a <rterm, docid> pair  
that is in rightDocs:
4.1) initialize the left termdoc to new Term(leftField, rterm.text())
4.2) iterate through those left docs ids for that term. These are our  
matching left documents


Consider the case of a 1-1 relationship, where rightDocs just  
contains one document. Step 4 requires us to iterate through all the  
terms on the rightJoinField (effectively, all the documents), just to  
find the term corresponding to that one document This is not very  
efficient. For a small number of rightDocs (for some value of  
'small'), it would be better to iterate through the Documents, and  
extract the (stored) term that way.

However, for a large number of rightDocs, the "bitset" approach in  
the above algorithm might be better.

In my second attempt, I might choose between the bitset and extract- 
document approach, depending on some threshold.

One cute thing you might be able to do with the extract-document  
approach is to actually use a Hits object (or HitCollector), which  
gives you a score for each document. You could feed this score into  
the join by returning the left documents via a custom Query/Scorer.  
(okay, I agree this might be troublesome to implement efficiently.)


Any comments? Has anyone ever attempted something similar?

=Matt

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 06:46:17 2005
Return-Path: <java-user-return-14810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64573 invoked from network); 8 Jun 2005 06:46:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 06:46:17 -0000
Received: (qmail 64113 invoked by uid 500); 8 Jun 2005 06:46:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64080 invoked by uid 500); 8 Jun 2005 06:46:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64046 invoked by uid 99); 8 Jun 2005 06:46:08 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from kogni.poznan.pl (HELO libra.cs.put.poznan.pl) (150.254.30.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Jun 2005 23:46:06 -0700
Received: from libra.cs.put.poznan.pl (localhost [127.0.0.1])
	by libra (Postfix on VMS) with SMTP id C98983AD1
	for <java-user@lucene.apache.org>; Wed,  8 Jun 2005 08:45:51 +0200 (CEST)
Received: from [150.254.24.146] (idss-dw-pnca.cs.put.poznan.pl [150.254.24.146])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id C16383AC5
	for <java-user@lucene.apache.org>; Wed,  8 Jun 2005 08:45:50 +0200 (CEST)
Message-ID: <42A693BC.3030700@cs.put.poznan.pl>
Date: Wed, 08 Jun 2005 08:44:12 +0200
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene search clusters
References: <e72c67f7050607105066c955e0@mail.gmail.com>
In-Reply-To: <e72c67f7050607105066c955e0@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi Lorenzo,

Search in the list's archives -- I posted a glue code that lets Lucene 
results be clustered with Carrot2 clusterers (there are a few 
implementations there).

http://java2.5341.com/msg/82310.html

The official Web site of the project is at:

http://carrot2.sourceforge.net/

You'll find some links to demo pages there as well.

Let me know if you have any questions/ concerns (or if you want to 
contribute in any way).

Dawid



Lorenzo wrote:
> I'm writing this message trying to find some people interested in creating a 
> 'general purpose' lucene search results' clustering extension.
> I wrote a simply implementation of clustering, and I would like to 
> contribute to lucene development by releasing an open source clustering 
> implementation. I know that maybe each project need a different 
> implementation but that would be a useful basis for everyone to develop his 
> own project.
> Is anyone interested in it?
> Lorenzo
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 07:36:15 2005
Return-Path: <java-user-return-14811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8309 invoked from network); 8 Jun 2005 07:36:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 07:36:15 -0000
Received: (qmail 63306 invoked by uid 500); 8 Jun 2005 07:36:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63243 invoked by uid 500); 8 Jun 2005 07:36:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63229 invoked by uid 99); 8 Jun 2005 07:36:01 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr6.xs4all.nl (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Jun 2005 00:35:57 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.3/8.13.3) with ESMTP id j587ZgOk033912
	for <java-user@lucene.apache.org>; Wed, 8 Jun 2005 09:35:42 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Fastest way to fetch N documents with unique keys within large numbers of indexes..
Date: Wed, 8 Jun 2005 09:35:42 +0200
User-Agent: KMail/1.5.4
References: <42A4FB31.3020509@rojo.com> <200506070922.21027.paul.elschot@xs4all.nl> <42A62B58.3030703@rojo.com>
In-Reply-To: <42A62B58.3030703@rojo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506080935.42290.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 08 June 2005 01:18, Kevin Burton wrote:
> Paul Elschot wrote:
> 
> >For a large number of indexes, it may be necessary to do this over
> >multiple indexes by first getting the doc numbers for all indexes,
> >then sorting these per index, then retrieving them
> >from all indexes, and repeating the whole thing using terms determined
> >from the retrieved docs.
> >  
> >
> Well this was a BIG win.  Just benchmarking it out shows a 10x -> 50x 
> performance increase.
> 
> Times in milliseconds:
> 
> Before:
> 
> duration: 1127
> duration: 449
> duration: 394
> duration: 564
> 
> After:
> 
> duration: 182
> duration: 39
> duration: 12
> duration: 11

There is no need for a relational db when you have Lucene :)
Thanks for reporting the old and the new times.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 07:37:30 2005
Return-Path: <java-user-return-14812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8970 invoked from network); 8 Jun 2005 07:37:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 07:37:29 -0000
Received: (qmail 66396 invoked by uid 500); 8 Jun 2005 07:37:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66377 invoked by uid 500); 8 Jun 2005 07:37:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66351 invoked by uid 99); 8 Jun 2005 07:37:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mars.sogitec.fr (HELO mars.sogitec.fr) (62.161.171.73)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Jun 2005 00:37:18 -0700
Received: by mars.sogitec.fr; id KAA05161; Wed, 8 Jun 2005 10:13:59 +0200 (CEST)
Message-Id: <200506080813.KAA05161@mars.sogitec.fr>
X-Authentication-Warning: antivirus.sogitec.fr: iscan owned process doing -bs
Subject: URL-based access
Date: Wed, 8 Jun 2005 09:35:02 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C56BFC.ED500D20"
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Content-class: urn:content-classes:message
Thread-Topic: URL-based access
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Thread-Index: AcVr/JUhgfWI9Y5pTjW18IyAcJBsmw==
From: "LABATTE Jacques" <jlabatte@sogitec.fr>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Jun 2005 07:37:31.0270 (UTC) FILETIME=[EDA26260:01C56BFC]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C56BFC.ED500D20
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Is there a way to allow Lucene to function using URL-based access ?

Reader and writer requests are in the first machine ; Documents to index =
and indexes are in a second machine.

Jacques.


------_=_NextPart_001_01C56BFC.ED500D20--

From java-user-return-14813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 07:55:17 2005
Return-Path: <java-user-return-14813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20088 invoked from network); 8 Jun 2005 07:55:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 07:55:17 -0000
Received: (qmail 7878 invoked by uid 500); 8 Jun 2005 07:55:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7854 invoked by uid 500); 8 Jun 2005 07:55:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7840 invoked by uid 99); 8 Jun 2005 07:55:07 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lorenzo.viscanti@gmail.com designates 64.233.162.200 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Jun 2005 00:55:06 -0700
Received: by zproxy.gmail.com with SMTP id 8so121587nzo
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2005 00:54:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=X2TzA522qTvbgV6LB5LIgw+vpXQ+8oHuM3rFRp8tq1buiUX0Qpx8LOoBCyf85cWwyzVG7egX2Ruy2Ia5vSN8Ra7Vr/GVUlZTd+fVZaFQEJgXny7aTwbozezRiAOTvxojCREGTsf0GNYjwYGyD5+Rg+iBK7+aaz4AkeDPAqOWrCM=
Received: by 10.36.148.20 with SMTP id v20mr2050219nzd;
        Wed, 08 Jun 2005 00:54:39 -0700 (PDT)
Received: by 10.36.9.2 with HTTP; Wed, 8 Jun 2005 00:54:38 -0700 (PDT)
Message-ID: <e72c67f705060800544c1aee5f@mail.gmail.com>
Date: Wed, 8 Jun 2005 09:54:38 +0200
From: Lorenzo <lorenzo.viscanti@gmail.com>
Reply-To: Lorenzo <lorenzo.viscanti@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search clusters
In-Reply-To: <42A62787.206@gmx.net>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1637_19212937.1118217278949"
References: <e72c67f7050607105066c955e0@mail.gmail.com>
	 <e72c67f7050607151887c5eb3@mail.gmail.com> <42A62787.206@gmx.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1637_19212937.1118217278949
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Daniel, could you explain to me why you are using em clustering? Is there=
=20
any best field or case for that technique?
I don't have any em experience and would like to know something about that=
=20
(just studying some papers...)
Thanks,
Lorenzo

------=_Part_1637_19212937.1118217278949--

From java-user-return-14814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 09:35:40 2005
Return-Path: <java-user-return-14814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28046 invoked from network); 8 Jun 2005 09:35:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 09:35:40 -0000
Received: (qmail 75681 invoked by uid 500); 8 Jun 2005 09:35:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75656 invoked by uid 500); 8 Jun 2005 09:35:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75636 invoked by uid 99); 8 Jun 2005 09:35:31 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of mail.to.falko@gmx.de designates 213.165.64.20 as permitted sender)
Received: from imap.gmx.net (HELO mail.gmx.net) (213.165.64.20)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 08 Jun 2005 02:35:28 -0700
Received: (qmail invoked by alias); 08 Jun 2005 09:35:15 -0000
Received: from p54B3D777.dip.t-dialin.net (EHLO [192.168.0.104]) [84.179.215.119]
  by mail.gmx.net (mp007) with SMTP; 08 Jun 2005 11:35:15 +0200
X-Authenticated: #3816566
Message-ID: <42A6BBCF.2010007@gmx.de>
Date: Wed, 08 Jun 2005 11:35:11 +0200
From: Falko Guderian <mail.to.falko@gmx.de>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene search clusters
References: <e72c67f7050607105066c955e0@mail.gmail.com> <e72c67f7050607151887c5eb3@mail.gmail.com>
In-Reply-To: <e72c67f7050607151887c5eb3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can add the WEKA packages http://www.cs.waikato.ac.nz/ml/weka/ . It 
has an EM clusterer.

-Falko

>Some people just replied, but I forgot the most important thing...
>I'm thinking of this project as part of the Google's Summer of Code program, 
>so I'm looking for other students.
>I've sent an email to Erik and he told me that we can propose this as part 
>of Google's SoC if we find some other people interested in it.
>Lorenzo
>
>On 6/7/05, Lorenzo <lorenzo.viscanti@gmail.com> wrote:
>  
>
>>I'm writing this message trying to find some people interested in creating 
>>a 'general purpose' lucene search results' clustering extension.
>>I wrote a simply implementation of clustering, and I would like to 
>>contribute to lucene development by releasing an open source clustering 
>>implementation. I know that maybe each project need a different 
>>implementation but that would be a useful basis for everyone to develop his 
>>own project.
>>Is anyone interested in it?
>>Lorenzo
>>
>>    
>>
>
>  
>
>------------------------------------------------------------------------
>
>No virus found in this incoming message.
>Checked by AVG Anti-Virus.
>Version: 7.0.323 / Virus Database: 267.6.2 - Release Date: 04.06.2005
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 09:50:19 2005
Return-Path: <java-user-return-14815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38659 invoked from network); 8 Jun 2005 09:50:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 09:50:19 -0000
Received: (qmail 20497 invoked by uid 500); 8 Jun 2005 09:50:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20472 invoked by uid 500); 8 Jun 2005 09:50:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20452 invoked by uid 99); 8 Jun 2005 09:50:13 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lorenzo.viscanti@gmail.com designates 64.233.162.197 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.197)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Jun 2005 02:50:10 -0700
Received: by zproxy.gmail.com with SMTP id 8so142259nzo
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2005 02:49:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=JhXvSAQpYFIbCl4KmTx2jJOwooXRpHh9xSw406JgqDcIkcHpFwJM8TV510JTT718cdACN1S7ieJ5/iG5oMa7uXk4UpufeNJrPhZY05JgE0ZxClZJ8zDehw3yDBfhUEx/v7EsBuQ8MdWcw5j6s7wdX784J2AmnooTZfwQ128aKh0=
Received: by 10.36.148.20 with SMTP id v20mr2109528nzd;
        Wed, 08 Jun 2005 02:49:51 -0700 (PDT)
Received: by 10.36.9.2 with HTTP; Wed, 8 Jun 2005 02:49:51 -0700 (PDT)
Message-ID: <e72c67f705060802492bd9a40e@mail.gmail.com>
Date: Wed, 8 Jun 2005 11:49:51 +0200
From: Lorenzo <lorenzo.viscanti@gmail.com>
Reply-To: Lorenzo <lorenzo.viscanti@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search clusters
In-Reply-To: <42A6BBCF.2010007@gmx.de>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1959_27102617.1118224191965"
References: <e72c67f7050607105066c955e0@mail.gmail.com>
	 <e72c67f7050607151887c5eb3@mail.gmail.com> <42A6BBCF.2010007@gmx.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1959_27102617.1118224191965
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I see some noise about clustering and lucene, but I'm still waiting for=20
someone that will help me creating a clustering extension.
I know both carrot2 and weka (the first can be integrated with Lucene, the=
=20
latter may be - Falko can you tell me?) but would like to write something=
=20
that could be included in the sandbox (or similar) with an implementation=
=20
that we'll find the better for a general purpose environment. Maybe carrot2=
=20
or other will be the best one (I really hope, I'm a lazy coder;-) ) and so=
=20
we will simply ask David to extend his code, but first want to make some=20
tests.
bye
Lorenzo

------=_Part_1959_27102617.1118224191965--

From java-user-return-14816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 12:13:17 2005
Return-Path: <java-user-return-14816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 996 invoked from network); 8 Jun 2005 12:13:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 12:13:17 -0000
Received: (qmail 60218 invoked by uid 500); 8 Jun 2005 12:13:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60170 invoked by uid 500); 8 Jun 2005 12:13:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60157 invoked by uid 99); 8 Jun 2005 12:13:09 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from kogni.poznan.pl (HELO libra.cs.put.poznan.pl) (150.254.30.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Jun 2005 05:13:06 -0700
Received: from libra.cs.put.poznan.pl (localhost [127.0.0.1])
	by libra (Postfix on VMS) with SMTP id AD90B3AD2
	for <java-user@lucene.apache.org>; Wed,  8 Jun 2005 14:12:54 +0200 (CEST)
Received: from [150.254.24.146] (idss-dw-pnca.cs.put.poznan.pl [150.254.24.146])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id 8EB8E3AA9
	for <java-user@lucene.apache.org>; Wed,  8 Jun 2005 14:12:54 +0200 (CEST)
Message-ID: <42A6E066.6010002@cs.put.poznan.pl>
Date: Wed, 08 Jun 2005 14:11:18 +0200
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene search clusters
References: <e72c67f7050607105066c955e0@mail.gmail.com>	 <e72c67f7050607151887c5eb3@mail.gmail.com> <42A6BBCF.2010007@gmx.de> <e72c67f705060802492bd9a40e@mail.gmail.com>
In-Reply-To: <e72c67f705060802492bd9a40e@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


You should state your requirements clearly:

1. What data you want to cluster? (whole index/ search results)
2. What is the role of the extension? How is it going to be used? 
(front-end clusters, query refinement, etc)
3. Do you need the implementation or an API for clustering in the
source code? (I'd personally stick to the API; there are many products 
out there that perform clustering. Carrot2 is no exception -- there is 
an excellent (in my humble opinion :) open source clustering algorithm 
Lingo, but there is also a commercial component that is much faster and 
more customizable. You can start off with an open source clusterer then 
and switch to a commercial product if you want higher scalability or 
different functionality. I implemented such an API in Nutch -- take a 
look in its source code for hints).

Dawid

Lorenzo wrote:
> I see some noise about clustering and lucene, but I'm still waiting for 
> someone that will help me creating a clustering extension.
> I know both carrot2 and weka (the first can be integrated with Lucene, the 
> latter may be - Falko can you tell me?) but would like to write something 
> that could be included in the sandbox (or similar) with an implementation 
> that we'll find the better for a general purpose environment. Maybe carrot2 
> or other will be the best one (I really hope, I'm a lazy coder;-) ) and so 
> we will simply ask David to extend his code, but first want to make some 
> tests.
> bye
> Lorenzo
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 13:34:23 2005
Return-Path: <java-user-return-14817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41404 invoked from network); 8 Jun 2005 13:34:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 13:34:23 -0000
Received: (qmail 83497 invoked by uid 500); 8 Jun 2005 13:34:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83473 invoked by uid 500); 8 Jun 2005 13:34:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83457 invoked by uid 99); 8 Jun 2005 13:34:16 -0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lorenzo.viscanti@gmail.com designates 64.233.162.196 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Jun 2005 06:34:15 -0700
Received: by zproxy.gmail.com with SMTP id 8so195623nzo
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2005 06:33:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=C3D/7gEY4Y+lda9DbbahXXYe8DnhPZzExG3ZTG3TGwRq3AtuLDx3SDFGY31BgLZkppLobm+Ua7eAvaPNxrJ1aB0a+cWkq7AHPgVt0pOx8NaA8uzjIHXkL6gjzykH9c2LoMw01KPcRRw/ja4626b+/jjTN+DUdxxX3r9TRLnTDtU=
Received: by 10.36.222.74 with SMTP id u74mr2182064nzg;
        Wed, 08 Jun 2005 06:33:26 -0700 (PDT)
Received: by 10.36.9.2 with HTTP; Wed, 8 Jun 2005 06:33:26 -0700 (PDT)
Message-ID: <e72c67f7050608063329239ed2@mail.gmail.com>
Date: Wed, 8 Jun 2005 15:33:26 +0200
From: Lorenzo <lorenzo.viscanti@gmail.com>
Reply-To: Lorenzo <lorenzo.viscanti@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search clusters
In-Reply-To: <42A6E066.6010002@cs.put.poznan.pl>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2974_10514170.1118237606722"
References: <e72c67f7050607105066c955e0@mail.gmail.com>
	 <e72c67f7050607151887c5eb3@mail.gmail.com> <42A6BBCF.2010007@gmx.de>
	 <e72c67f705060802492bd9a40e@mail.gmail.com>
	 <42A6E066.6010002@cs.put.poznan.pl>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2974_10514170.1118237606722
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

First, thanks for your reply.
I was wondering about adding some extra clustering functionalities to=20
Lucene. I wrote a clustering engine, based on hac/ahc and k-means algorithm=
s=20
based on Lucene search results. That work is based on a customized solution=
,=20
and so I decided to write some general code . Right now I'm looking at this=
=20
class com/mwroblewski/carrot/filter/ahcfilter/AHCFilter from carrot2 and=20
found it to be very similar to my work;-)
My aim is to provide some basic clustering functionalities to lucene search=
=20
results. Carrot2 offers a lot of functionalities, like many inputs, I'm jus=
t=20
trying to offer a simpler (much simpler!) clustering opportunity for lucene=
=20
users.
Hope I can get some good advices from you!
ciao,
Lorenzo


On 6/8/05, Dawid Weiss <dawid.weiss@cs.put.poznan.pl> wrote:
>=20
>=20
> You should state your requirements clearly:
>=20
> 1. What data you want to cluster? (whole index/ search results)
> 2. What is the role of the extension? How is it going to be used?
> (front-end clusters, query refinement, etc)
> 3. Do you need the implementation or an API for clustering in the
> source code? (I'd personally stick to the API; there are many products
> out there that perform clustering. Carrot2 is no exception -- there is
> an excellent (in my humble opinion :) open source clustering algorithm
> Lingo, but there is also a commercial component that is much faster and
> more customizable. You can start off with an open source clusterer then
> and switch to a commercial product if you want higher scalability or
> different functionality. I implemented such an API in Nutch -- take a
> look in its source code for hints).
>=20
> Dawid
>=20
> Lorenzo wrote:
> > I see some noise about clustering and lucene, but I'm still waiting for
> > someone that will help me creating a clustering extension.
> > I know both carrot2 and weka (the first can be integrated with Lucene,=
=20
> the
> > latter may be - Falko can you tell me?) but would like to write=20
> something
> > that could be included in the sandbox (or similar) with an=20
> implementation
> > that we'll find the better for a general purpose environment. Maybe=20
> carrot2
> > or other will be the best one (I really hope, I'm a lazy coder;-) ) and=
=20
> so
> > we will simply ask David to extend his code, but first want to make som=
e
> > tests.
> > bye
> > Lorenzo
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

------=_Part_2974_10514170.1118237606722--

From java-user-return-14818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 13:47:19 2005
Return-Path: <java-user-return-14818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54876 invoked from network); 8 Jun 2005 13:47:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 13:47:18 -0000
Received: (qmail 15958 invoked by uid 500); 8 Jun 2005 13:47:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15922 invoked by uid 500); 8 Jun 2005 13:47:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15902 invoked by uid 99); 8 Jun 2005 13:47:11 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from kogni.poznan.pl (HELO libra.cs.put.poznan.pl) (150.254.30.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Jun 2005 06:47:08 -0700
Received: from libra.cs.put.poznan.pl (localhost [127.0.0.1])
	by libra (Postfix on VMS) with SMTP id 73B3D380B
	for <java-user@lucene.apache.org>; Wed,  8 Jun 2005 15:45:22 +0200 (CEST)
Received: from [150.254.24.146] (idss-dw-pnca.cs.put.poznan.pl [150.254.24.146])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id 2A06537B1
	for <java-user@lucene.apache.org>; Wed,  8 Jun 2005 15:45:22 +0200 (CEST)
Message-ID: <42A6F613.8050707@cs.put.poznan.pl>
Date: Wed, 08 Jun 2005 15:43:47 +0200
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene search clusters
References: <e72c67f7050607105066c955e0@mail.gmail.com>	 <e72c67f7050607151887c5eb3@mail.gmail.com> <42A6BBCF.2010007@gmx.de>	 <e72c67f705060802492bd9a40e@mail.gmail.com>	 <42A6E066.6010002@cs.put.poznan.pl> <e72c67f7050608063329239ed2@mail.gmail.com>
In-Reply-To: <e72c67f7050608063329239ed2@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Lorenzo... Did you take a look at the mail I posted before? There was a 
ready-to-use clustering for Lucene there. It _is_ simple. I don't know 
what you mean by "much simpler" -- much simpler to use? You really don't 
have to know all of Carrot2 code to use it. You build, or fetch a 
precompiled clustering component and add an input to it. This is 
basically what I did before and it took just a few lines of code to 
integrate clustering into Lucene, so I can hardly find it difficult.

AHC and k-means are all classic clustering algorithms, so their 
implementation will always look similar. They, unfortunately, need a lot 
of tuning to get the results right. With Lingo clustering you can avoid 
much of that work.

But anyway, if you're up to the challange, feel free to contribute in 
any way you want to. I'll be glad to compare your clustering to ours.

D.

Lorenzo wrote:
> First, thanks for your reply.
> I was wondering about adding some extra clustering functionalities to 
> Lucene. I wrote a clustering engine, based on hac/ahc and k-means algorithms 
> based on Lucene search results. That work is based on a customized solution, 
> and so I decided to write some general code . Right now I'm looking at this 
> class com/mwroblewski/carrot/filter/ahcfilter/AHCFilter from carrot2 and 
> found it to be very similar to my work;-)
> My aim is to provide some basic clustering functionalities to lucene search 
> results. Carrot2 offers a lot of functionalities, like many inputs, I'm just 
> trying to offer a simpler (much simpler!) clustering opportunity for lucene 
> users.
> Hope I can get some good advices from you!
> ciao,
> Lorenzo
> 
> 
> On 6/8/05, Dawid Weiss <dawid.weiss@cs.put.poznan.pl> wrote:
> 
>>
>>You should state your requirements clearly:
>>
>>1. What data you want to cluster? (whole index/ search results)
>>2. What is the role of the extension? How is it going to be used?
>>(front-end clusters, query refinement, etc)
>>3. Do you need the implementation or an API for clustering in the
>>source code? (I'd personally stick to the API; there are many products
>>out there that perform clustering. Carrot2 is no exception -- there is
>>an excellent (in my humble opinion :) open source clustering algorithm
>>Lingo, but there is also a commercial component that is much faster and
>>more customizable. You can start off with an open source clusterer then
>>and switch to a commercial product if you want higher scalability or
>>different functionality. I implemented such an API in Nutch -- take a
>>look in its source code for hints).
>>
>>Dawid
>>
>>Lorenzo wrote:
>>
>>>I see some noise about clustering and lucene, but I'm still waiting for
>>>someone that will help me creating a clustering extension.
>>>I know both carrot2 and weka (the first can be integrated with Lucene, 
>>
>>the
>>
>>>latter may be - Falko can you tell me?) but would like to write 
>>
>>something
>>
>>>that could be included in the sandbox (or similar) with an 
>>
>>implementation
>>
>>>that we'll find the better for a general purpose environment. Maybe 
>>
>>carrot2
>>
>>>or other will be the best one (I really hope, I'm a lazy coder;-) ) and 
>>
>>so
>>
>>>we will simply ask David to extend his code, but first want to make some
>>>tests.
>>>bye
>>>Lorenzo
>>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 14:15:27 2005
Return-Path: <java-user-return-14819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69137 invoked from network); 8 Jun 2005 14:15:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 14:15:26 -0000
Received: (qmail 4277 invoked by uid 500); 8 Jun 2005 14:15:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4255 invoked by uid 500); 8 Jun 2005 14:15:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4242 invoked by uid 99); 8 Jun 2005 14:15:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of brogar@gmail.com designates 64.233.184.196 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Jun 2005 07:15:16 -0700
Received: by wproxy.gmail.com with SMTP id 36so582069wra
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2005 07:15:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=OGKQ2oGZEwcQO/SzN+SJqhs1x2p30/4XCV5x+S6gR4Os9bm2EYcOsFdEOlw0c9a8/b0P4V1KikQbXnkHCxfXDh1ZrmXYieVnFTVwyF1AGtf4pA1kKFMOTUVT3ehFUe9Gfe5q4koY7+ZJKVcKtu+UQOFT44JhEifP3VGb8bidm4Q=
Received: by 10.54.34.77 with SMTP id h77mr4752468wrh;
        Wed, 08 Jun 2005 07:15:04 -0700 (PDT)
Received: by 10.54.62.19 with HTTP; Wed, 8 Jun 2005 07:15:04 -0700 (PDT)
Message-ID: <34cc3b0a05060807157563ef49@mail.gmail.com>
Date: Wed, 8 Jun 2005 10:15:04 -0400
From: Chris D <brogar@gmail.com>
Reply-To: Chris D <brogar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Adding document with FileReader and deletions.
In-Reply-To: <34cc3b0a05060711591dfccb32@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <34cc3b0a05060711591dfccb32@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/7/05, Chris D <brogar@gmail.com> wrote:
> Hi list,
>=20
> I've been trying to use lucene to index documents that change
> occasionally with fields that change frequently. When I add the
> contents of the file they are removed when I try to delete and readd
> the document. I and am using something like the following.
>=20
> public void index(String stuff, File f, boolean doContents){
>    Document doc =3D new Document();
>    writer.close()
>    reader =3D IndexReader.open(directory);
>    TermDocs td =3D reader.termDocs(new Term("fileid", fileid));
>    //Load the document into memory and delete the document from the index=
.
>    if(td.next()){
>       doc =3D reader.document(tc.doc());
>       reader.delect(new Term("fileid", fileid)); //*******
>    }
>    //We're done deleting so we can move along.
>    reader.close();
>    writer =3D new IndexWriter(...);
>=20
>    doc.removeFields("stuff");
>    doc.add(new Field("stuff", stuff, File.Store.YES, File.Index.TOKENIZED=
));
>    //More fields...
>=20
>    //If the contents need to be readded... Do so.
>    if(doContents){
>       doc.removeFields("contents");
>       doc.add(new Field("contents", new FileReader(f), Field.TermVector.Y=
ES));
>       //System.out.println(doc.get("contents"));
>    }
>    writeDoc(doc)
> }
>=20
> There are other fields in doc that will stay the same when it updates
> which is why I do the removeFields instead of just deleting the doc
> and replacing it.
>=20
> Now if I remove the reader.delete call that's starred the contents get
> added. (Albeit over and over again) If it remains then all of the
> contents go missing in the index. (Verified with Luke and by searching
> for contents:a* etc)
>=20
> I figure I'm missing something silly, hopefully someone can help me
> out, I've been fighting with this for a day or two now, with little
> progress, but many more printlns.
>=20
> Cheers,
> Chris

What I think is happening is that because "contents" isn't stored,
when I read the document and delete it I delete any of the information
that was held in that fied. Is there a way to retrieve that
information so that it doesn't disappear?

Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 15:17:53 2005
Return-Path: <java-user-return-14820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52368 invoked from network); 8 Jun 2005 15:17:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 15:17:53 -0000
Received: (qmail 71774 invoked by uid 500); 8 Jun 2005 15:17:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71705 invoked by uid 500); 8 Jun 2005 15:17:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71692 invoked by uid 99); 8 Jun 2005 15:17:46 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fast.jack@gmx.net designates 213.165.64.20 as permitted sender)
Received: from pop.gmx.net (HELO mail.gmx.net) (213.165.64.20)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 08 Jun 2005 08:17:44 -0700
Received: (qmail invoked by alias); 08 Jun 2005 15:17:22 -0000
Received: from p5489FE4E.dip.t-dialin.net (EHLO local.effjay.kicks-ass.org) [84.137.254.78]
  by mail.gmx.net (mp014) with SMTP; 08 Jun 2005 17:17:22 +0200
X-Authenticated: #255453
Message-ID: <42A70BFE.1000909@gmx.net>
Date: Wed, 08 Jun 2005 17:17:18 +0200
From: Daniel Stephan <fast.jack@gmx.net>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene search clusters
References: <e72c67f7050607105066c955e0@mail.gmail.com>	 <e72c67f7050607151887c5eb3@mail.gmail.com> <42A62787.206@gmx.net> <e72c67f705060800544c1aee5f@mail.gmail.com>
In-Reply-To: <e72c67f705060800544c1aee5f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My experience is also limited and stems mostly from having read some
papers with promising results. I went from the k-Means to the EM,
because I was hoping that it would be able to model more complex
relationships of my data. After all, EM is using multivariate gaussians,
so its results should mirror the reality more closely (in other words:
in reality there is little black and white, but its all some shades of
gray, and the gaussian probability distributions should model that).

My results are currently rather mixed, though. I think I may have too
much noise in the data. It seems to be very important to get the input
right, shit in - shit out :-).

cheers
Daniel



Lorenzo schrieb:

>Daniel, could you explain to me why you are using em clustering? Is there 
>any best field or case for that technique?
>I don't have any em experience and would like to know something about that 
>(just studying some papers...)
>Thanks,
>Lorenzo
>
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 15:36:05 2005
Return-Path: <java-user-return-14821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66099 invoked from network); 8 Jun 2005 15:36:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 15:36:05 -0000
Received: (qmail 29560 invoked by uid 500); 8 Jun 2005 15:35:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29523 invoked by uid 500); 8 Jun 2005 15:35:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29509 invoked by uid 99); 8 Jun 2005 15:35:56 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from kogni.poznan.pl (HELO libra.cs.put.poznan.pl) (150.254.30.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Jun 2005 08:35:50 -0700
Received: from libra.cs.put.poznan.pl (localhost [127.0.0.1])
	by libra (Postfix on VMS) with SMTP id A649A3AA9
	for <java-user@lucene.apache.org>; Wed,  8 Jun 2005 17:35:18 +0200 (CEST)
Received: from [150.254.24.146] (idss-dw-pnca.cs.put.poznan.pl [150.254.24.146])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id 82C9B37C0
	for <java-user@lucene.apache.org>; Wed,  8 Jun 2005 17:35:18 +0200 (CEST)
Message-ID: <42A70FD8.9050009@cs.put.poznan.pl>
Date: Wed, 08 Jun 2005 17:33:44 +0200
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene search clusters
References: <e72c67f7050607105066c955e0@mail.gmail.com>	 <e72c67f7050607151887c5eb3@mail.gmail.com> <42A62787.206@gmx.net> <e72c67f705060800544c1aee5f@mail.gmail.com> <42A70BFE.1000909@gmx.net>
In-Reply-To: <42A70BFE.1000909@gmx.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> right, shit in - shit out :-).

True. But in most cases clustering of search results can yield sensible 
clusters. Try, for example:

http://demo.carrot-search.com/carrot2-remote-controller/newsearch.do?query=chips&processingChain=carrot2.process.lingo-cluster-odp&resultsRequested=200

We in fact use Lucene for this demo (indexing ODP categories) --

http://www.carrot-search.com/demos.html

An open source clustering component isn't much worse (with Google 
serving as the data source):

http://carrot.cs.put.poznan.pl/carrot2-remote-controller/newsearch.do?query=chips&processingChain=carrot2.process.lingo-google-en&resultsRequested=100

Compare it with (same algorithm) AllTheWeb:

http://carrot.cs.put.poznan.pl/carrot2-remote-controller/newsearch.do?query=chips&processingChain=carrot2.process.lingo-alltheweb-en&resultsRequested=100

As you said -- much depends on the data, but there is also a lot of 
space for the clustering algorithm (try identical inputs and different 
algorithms and you'll see the difference).

D.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 15:59:20 2005
Return-Path: <java-user-return-14822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83486 invoked from network); 8 Jun 2005 15:59:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 15:59:20 -0000
Received: (qmail 98467 invoked by uid 500); 8 Jun 2005 15:59:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98435 invoked by uid 500); 8 Jun 2005 15:59:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98411 invoked by uid 99); 8 Jun 2005 15:59:13 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fast.jack@gmx.net designates 213.165.64.20 as permitted sender)
Received: from pop.gmx.net (HELO mail.gmx.net) (213.165.64.20)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 08 Jun 2005 08:59:08 -0700
Received: (qmail invoked by alias); 08 Jun 2005 15:58:36 -0000
Received: from p5489FE4E.dip.t-dialin.net (EHLO local.effjay.kicks-ass.org) [84.137.254.78]
  by mail.gmx.net (mp030) with SMTP; 08 Jun 2005 17:58:36 +0200
X-Authenticated: #255453
Message-ID: <42A715A8.90409@gmx.net>
Date: Wed, 08 Jun 2005 17:58:32 +0200
From: Daniel Stephan <fast.jack@gmx.net>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene search clusters
References: <e72c67f7050607105066c955e0@mail.gmail.com>	 <e72c67f7050607151887c5eb3@mail.gmail.com> <42A62787.206@gmx.net> <e72c67f705060800544c1aee5f@mail.gmail.com> <42A70BFE.1000909@gmx.net> <42A70FD8.9050009@cs.put.poznan.pl>
In-Reply-To: <42A70FD8.9050009@cs.put.poznan.pl>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Your application works very well, congrats! May I ask how the input is
looking? How are the terms selected, how do you model phrases? Do you
handle titles different from the short summaries?

What I am doing is: I remove stopwords, stem terms using snowballs
default english stemmer, and then already build feature vectors for the
selected terms. I don't have information about phrases in there, yet.
I ask, because the descriptions of your clusters are very nice. How are
they done? (I know you are using SVD to do it, and I am too, but I am
only having single terms, and you have nicely formulated phrases.)

Cheers
Daniel


Dawid Weiss schrieb:

>
>> right, shit in - shit out :-).
>
>
> True. But in most cases clustering of search results can yield
> sensible clusters. Try, for example:
>
> http://demo.carrot-search.com/carrot2-remote-controller/newsearch.do?query=chips&processingChain=carrot2.process.lingo-cluster-odp&resultsRequested=200
>
>
> We in fact use Lucene for this demo (indexing ODP categories) --
>
> http://www.carrot-search.com/demos.html
>
> An open source clustering component isn't much worse (with Google
> serving as the data source):
>
> http://carrot.cs.put.poznan.pl/carrot2-remote-controller/newsearch.do?query=chips&processingChain=carrot2.process.lingo-google-en&resultsRequested=100
>
>
> Compare it with (same algorithm) AllTheWeb:
>
> http://carrot.cs.put.poznan.pl/carrot2-remote-controller/newsearch.do?query=chips&processingChain=carrot2.process.lingo-alltheweb-en&resultsRequested=100
>
>
> As you said -- much depends on the data, but there is also a lot of
> space for the clustering algorithm (try identical inputs and different
> algorithms and you'll see the difference).
>
> D.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 16:36:30 2005
Return-Path: <java-user-return-14823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7995 invoked from network); 8 Jun 2005 16:36:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 16:36:30 -0000
Received: (qmail 1884 invoked by uid 500); 8 Jun 2005 16:36:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1655 invoked by uid 500); 8 Jun 2005 16:36:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1608 invoked by uid 99); 8 Jun 2005 16:36:01 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr10.xs4all.nl (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Jun 2005 09:35:58 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.3/8.13.3) with ESMTP id j58FxMxS037801
	for <java-user@lucene.apache.org>; Wed, 8 Jun 2005 17:59:22 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Doing a Join across indexes [was Documents returned by Scorer]
Date: Wed, 8 Jun 2005 17:59:21 +0200
User-Agent: KMail/1.5.4
References: <FFB3B0F0-B219-49C7-AF3A-C1CEEA8B9656@cenqua.com> <200506071733.04754.paul.elschot@xs4all.nl> <B8FA1ED4-3612-4929-9554-5C7E525FF590@cenqua.com>
In-Reply-To: <B8FA1ED4-3612-4929-9554-5C7E525FF590@cenqua.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506081759.21791.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 08 June 2005 01:30, Matt Quail wrote:
> 
> On 08/06/2005, at 1:33 AM, Paul Elschot wrote:
> 
> > On Tuesday 07 June 2005 11:42, Matt Quail wrote:
> >
> >> I've been playing around with a custom Query, and I've just realized
> >> that my Scorer is likely to return the same document more then once.
> >> Before I delve a bit further, can anyone tell me if this is this a
> >> Bad Thing?
> >>
> >
> > Normally, yes. A query is expected to provide a single score for
> > each matching document. The Hits class depends on this.
> > One can suppress later 'hits' by using a BitVector.
> 
> 
> Yes, further delving revealed that returning a document multiple  
> times, and returning doc-ids out-of-order, is a bad idea.
> 
> 
> What I'm actually trying to implement is an efficient join between  
> two indices. I'll describe my current strategy, all comments welcome.
> 
> Imagine you have two indices, and they have some field in common.  
> This might often be a "primary key" field, giving you a 1-1  
> relationship between documents in the two indices, but it general it  
> could be any 1-N, N-1 or M-N relationship.
> 
> (Why are there two indices? There could be many reasons, one that was  
> mentioned on this list recently was an ACL index. You could update/ 
> delete/add from the ACL index without having to re-index the  
> "primary" index).
> 
> Lets call the two indices Left and Right. We want to find documents  
> in Left, where leftdoc.leftfield == rightdoc.rightfield, for some set  
> of rightdoc's satisfying some query.
> 
> Here is the pseudo-code for first attempt, which works but is not  
> necessarily that efficient:
> 
> Inputs:
> - leftJoinField name
> - rightJoinField name
> - rightQuery
> 
> 1) Compute a BitSet of all the docids that match the given query in  
> the right, call it rightDocs.
> 2) Create a TermDocs for the left index
> 3) Create a TermEnum and a TermDocs, for iterating through all the  
> <term,docid> pairs in the right index for the rightJoinField
> 4) for each rterm on the right where there is a <rterm, docid> pair  
> that is in rightDocs:
> 4.1) initialize the left termdoc to new Term(leftField, rterm.text())
> 4.2) iterate through those left docs ids for that term. These are our  
> matching left documents
> 
> 
> Consider the case of a 1-1 relationship, where rightDocs just  
> contains one document. Step 4 requires us to iterate through all the  
> terms on the rightJoinField (effectively, all the documents), just to  
> find the term corresponding to that one document This is not very  
> efficient. For a small number of rightDocs (for some value of  
> 'small'), it would be better to iterate through the Documents, and  
> extract the (stored) term that way.
> 
> However, for a large number of rightDocs, the "bitset" approach in  
> the above algorithm might be better.
> 
> In my second attempt, I might choose between the bitset and extract- 
> document approach, depending on some threshold.
> 
> One cute thing you might be able to do with the extract-document  
> approach is to actually use a Hits object (or HitCollector), which  
> gives you a score for each document. You could feed this score into  
> the join by returning the left documents via a custom Query/Scorer.  
> (okay, I agree this might be troublesome to implement efficiently.)
> 
> 
> Any comments? Has anyone ever attempted something similar?

Using Hits for this is probably not a good idea.
Have a look at the very recent thread on the fastest way to fetch
N documents with unique keys within large numbers of indexes.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 18:32:55 2005
Return-Path: <java-user-return-14824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63226 invoked from network); 8 Jun 2005 18:32:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 18:32:55 -0000
Received: (qmail 15960 invoked by uid 500); 8 Jun 2005 18:32:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15937 invoked by uid 500); 8 Jun 2005 18:32:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15915 invoked by uid 99); 8 Jun 2005 18:32:46 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lucenelist@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from smtprelay02.ispgateway.de (HELO smtprelay02.ispgateway.de) (80.67.18.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Jun 2005 11:32:44 -0700
Received: (qmail 31250 invoked from network); 8 Jun 2005 18:32:34 -0000
Received: from unknown (HELO p54964C1C.dip.t-dialin.net) ([pbs]695637@[84.150.76.28])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 8 Jun 2005 18:32:34 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Indexing from multiple applications to a central index.
Date: Wed, 8 Jun 2005 20:33:51 +0200
User-Agent: KMail/1.8
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200506082033.51785@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 07 June 2005 19:36, Doug Hughes wrote:

> I am thinking that I can make all of the applications index into their
> own index, not the central shared index. =C2=A0Their own index might be a
> FSDirectory or a RAMDirectory. =C2=A0When done indexing, the applications'
> indexes would be merged with the central index for consumption by all
> applications sharing the index.

Why not just work on more than one index without merging and search using=20
MultiSearcher?

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 18:34:39 2005
Return-Path: <java-user-return-14825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63547 invoked from network); 8 Jun 2005 18:34:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 18:34:39 -0000
Received: (qmail 20750 invoked by uid 500); 8 Jun 2005 18:34:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20722 invoked by uid 500); 8 Jun 2005 18:34:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20709 invoked by uid 99); 8 Jun 2005 18:34:31 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lucenelist@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from smtprelay03.ispgateway.de (HELO smtprelay03.ispgateway.de) (80.67.18.15)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Jun 2005 11:34:29 -0700
Received: (qmail 4878 invoked from network); 8 Jun 2005 18:34:17 -0000
Received: from unknown (HELO p54964C1C.dip.t-dialin.net) ([pbs]695637@[84.150.76.28])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 8 Jun 2005 18:34:17 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Cannot search on plain numbers
Date: Wed, 8 Jun 2005 20:35:34 +0200
User-Agent: KMail/1.8
References: <BECB5617.9782%peter@flippyhead.com>
In-Reply-To: <BECB5617.9782%peter@flippyhead.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200506082035.34623@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 07 June 2005 22:48, Peter T. Brown wrote:

> Thank You. I've re-read the FAQ and I think I've got a better
> understanding of how I am confused. Presently I am using this
> arrangement to get my analyzer:
>
> =C2=A0 =C2=A0 public static class DefaultAnalyzer extends Analyzer {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 public TokenStream tokenStream(String fieldNa=
me, Reader reader)
> { LetterTokenizer tokenizer =3D new LetterTokenizer(reader);

The LetterTokenizer removes numbers. Either create your own=20
"LetterNumberTokenizer" or use StandardTokenizer.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 19:35:12 2005
Return-Path: <java-user-return-14826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5644 invoked from network); 8 Jun 2005 19:35:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 19:35:12 -0000
Received: (qmail 74581 invoked by uid 500); 8 Jun 2005 19:34:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74521 invoked by uid 500); 8 Jun 2005 19:34:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74353 invoked by uid 99); 8 Jun 2005 19:34:57 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from kogni.poznan.pl (HELO libra.cs.put.poznan.pl) (150.254.30.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Jun 2005 12:34:55 -0700
Received: from libra.cs.put.poznan.pl (localhost [127.0.0.1])
	by libra (Postfix on VMS) with SMTP id 342C037BF
	for <java-user@lucene.apache.org>; Wed,  8 Jun 2005 21:34:39 +0200 (CEST)
Received: from [150.254.24.146] (idss-dw-pnca.cs.put.poznan.pl [150.254.24.146])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id E68F037AD
	for <java-user@lucene.apache.org>; Wed,  8 Jun 2005 21:34:38 +0200 (CEST)
Message-ID: <42A747F3.1070405@cs.put.poznan.pl>
Date: Wed, 08 Jun 2005 21:33:07 +0200
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene search clusters
References: <e72c67f7050607105066c955e0@mail.gmail.com>	 <e72c67f7050607151887c5eb3@mail.gmail.com> <42A62787.206@gmx.net> <e72c67f705060800544c1aee5f@mail.gmail.com> <42A70BFE.1000909@gmx.net> <42A70FD8.9050009@cs.put.poznan.pl> <42A715A8.90409@gmx.net>
In-Reply-To: <42A715A8.90409@gmx.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> Your application works very well, congrats! May I ask how the input is
> looking? How are the terms selected, how do you model phrases? Do you
> handle titles different from the short summaries?

Only search results (snippets and titles) are used.

> I ask, because the descriptions of your clusters are very nice. How are
> they done? 

You'll have some answers in here:

http://www.cs.put.poznan.pl/dweiss/site/publications/download/iipwm-osinski-weiss-stefanowski-2004-lingo.pdf

D.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 21:36:11 2005
Return-Path: <java-user-return-14827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3556 invoked from network); 8 Jun 2005 21:36:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 21:36:11 -0000
Received: (qmail 8539 invoked by uid 500); 8 Jun 2005 21:36:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8482 invoked by uid 500); 8 Jun 2005 21:36:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8446 invoked by uid 99); 8 Jun 2005 21:36:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of john.wang@gmail.com designates 64.233.162.193 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Jun 2005 14:36:01 -0700
Received: by zproxy.gmail.com with SMTP id 8so350024nzo
        for <java-user@lucene.apache.org>; Wed, 08 Jun 2005 14:35:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=egS/E0NyqIYiHcq19dA/XDWQTvDWVKpOzvIaGlYMVADOzG/DzW+LPQfQ06CNVBGeF2oPFDryjW55WDyIxkTXccuEw81/J0zVtVfaAv44t3rhp1TVmFUjHFZtxZTv9WH4yH3x0uPCdxc3lRvy8TQ2n2m4C2vOoqL0+hMoNZ7tvmY=
Received: by 10.36.222.24 with SMTP id u24mr2500184nzg;
        Wed, 08 Jun 2005 14:35:58 -0700 (PDT)
Received: by 10.36.10.19 with HTTP; Wed, 8 Jun 2005 14:35:58 -0700 (PDT)
Message-ID: <8837fb7705060814354a4d2d66@mail.gmail.com>
Date: Wed, 8 Jun 2005 14:35:58 -0700
From: John Wang <john.wang@gmail.com>
Reply-To: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: final modifier on IndexReader class
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi:

   Why is there a final modifier on IndexReader.finalize? IndexReader
is an abstract class and therefore is meant to be derived. The problem
here is I am not able to provide a finalize method for my subclass
since the finalized method is "finaled".

    I will create a bug.

Thanks

-John

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 08 21:49:11 2005
Return-Path: <java-user-return-14828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11456 invoked from network); 8 Jun 2005 21:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jun 2005 21:49:11 -0000
Received: (qmail 38460 invoked by uid 500); 8 Jun 2005 21:49:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38428 invoked by uid 500); 8 Jun 2005 21:49:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38403 invoked by uid 99); 8 Jun 2005 21:49:03 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lucenelist@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from smtprelay01.ispgateway.de (HELO smtprelay01.ispgateway.de) (80.67.18.13)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Jun 2005 14:49:02 -0700
Received: (qmail 21551 invoked from network); 8 Jun 2005 21:48:55 -0000
Received: from unknown (HELO p54967B64.dip.t-dialin.net) ([pbs]695637@[84.150.123.100])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 8 Jun 2005 21:48:55 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: final modifier on IndexReader class
Date: Wed, 8 Jun 2005 23:50:10 +0200
User-Agent: KMail/1.8
References: <8837fb7705060814354a4d2d66@mail.gmail.com>
In-Reply-To: <8837fb7705060814354a4d2d66@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200506082350.10335@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 08 June 2005 23:35, John Wang wrote:

> =C2=A0 =C2=A0Why is there a final modifier on IndexReader.finalize?

This has already been removed in the development version, no need for a bug=
=20
report.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 09 01:25:14 2005
Return-Path: <java-user-return-14829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48127 invoked from network); 9 Jun 2005 01:25:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2005 01:25:14 -0000
Received: (qmail 59502 invoked by uid 500); 9 Jun 2005 01:25:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59479 invoked by uid 500); 9 Jun 2005 01:25:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59466 invoked by uid 500); 9 Jun 2005 01:25:06 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 59453 invoked by uid 99); 9 Jun 2005 01:25:06 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mda.demon.nl (HELO franken.ws) (212.238.156.229)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Jun 2005 18:25:03 -0700
Received: from [192.168.1.2] ([192.168.1.2]) by franken.ws with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 9 Jun 2005 03:25:05 +0200
Message-ID: <42A79A71.7010807@zilverline.org>
Date: Thu, 09 Jun 2005 03:25:05 +0200
From: Zilverline info <info@zilverline.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: nl, en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Zilverline Search Engine version 1.4.0 released
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 09 Jun 2005 01:25:05.0015 (UTC) FILETIME=[10A43870:01C56C92]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

All,

I've just released Zilverline version 1.4.0.

This version indexes in the background, detects
ISBN numbers, and has (some) IMAP support.

This version is fully webbased, all settings, collections, preferences
can be set via the web interface.

The source will be made available as well very soon.

Zilverline is protected by a Collaborative Source License. You can read
more on this type of licensing at http://www.zilverline.org

Zilverline is a fully webbased search engine based on lucene that's
ready to roll, and can be simply dropped in a Servlet Engine. It runs
out of the box, and supports PDF, WORD, HTM, TXT, RTF, Excel, Powerpoint
and CHM, and can index zip, rar, and many other formats. Both on
Windows and Linux.

Zilverline supports plugins. You can create your own extractors
for various file formats. I've provided Extractors for RTF, Text, PDF,
Word, Excel, Powerpoint and HTML.

Zilverline supports collections. A collection is a set of files and
directories in a directory. A collection can be indexed, and searched.
The results of the search can be retrieved from local disk or remotely,
if you run a webserver on your machine. Files inside zip, rar and chm
files are extracted, indexed and can be cached. The cache can be mapped
to sit behind your webserver as well.

It's also possible to specify your own handlers for archives. Say you
have a RAR archive, and you have a program on your system that can
extract the content from it, then you can specify that Zilverline should
use this program.


Please take look at http://www.zilverline.org, and have a swing at it.

cheers,

   Michael Franken






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 09 08:50:30 2005
Return-Path: <java-user-return-14830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12057 invoked from network); 9 Jun 2005 08:50:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2005 08:50:30 -0000
Received: (qmail 92515 invoked by uid 500); 9 Jun 2005 08:50:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92486 invoked by uid 500); 9 Jun 2005 08:50:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92473 invoked by uid 99); 9 Jun 2005 08:50:23 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from pop03.mail.atl.earthlink.net (HELO pop03.mail.atl.earthlink.net) (207.69.200.48)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Jun 2005 01:50:18 -0700
Received: from wamui-blood.atl.sa.earthlink.net ([209.86.224.28])
	by pop03.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1DgIjn-0007Tf-00
	for java-user@lucene.apache.org; Thu, 09 Jun 2005 04:50:07 -0400
Message-ID: <5000698.1118307007912.JavaMail.root@wamui-blood.atl.sa.earthlink.net>
Date: Thu, 9 Jun 2005 04:50:07 -0400 (EDT)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Re: Fastest way to fetch N documents with unique keys within large
 numbers of indexes..
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Kevin,
  Those results are awsome.  Could you please give those of us that were following but not quite understanding everything some pseudo code or some more explaination?

Thanks,

andrew

-----Original Message-----
From: Kevin Burton <burton@rojo.com>
Sent: Jun 7, 2005 7:18 PM
To: java-user@lucene.apache.org
Subject: Re: Fastest way to fetch N documents with unique keys within large numbers of indexes..

Paul Elschot wrote:

>For a large number of indexes, it may be necessary to do this over
>multiple indexes by first getting the doc numbers for all indexes,
>then sorting these per index, then retrieving them
>from all indexes, and repeating the whole thing using terms determined
>from the retrieved docs.
>  
>
Well this was a BIG win.  Just benchmarking it out shows a 10x -> 50x 
performance increase.

Times in milliseconds:

Before:

duration: 1127
duration: 449
duration: 394
duration: 564

After:

duration: 182
duration: 39
duration: 12
duration: 11

The values of 2-4  I'm sure are due to the filesystem buffer cache but I 
can't imagine why they'd be faster in the second round.  It might be 
that Linux is deciding not to buffer the document blocks.

Kevin

-- 

Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
See irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

   Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 09 09:56:08 2005
Return-Path: <java-user-return-14831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36401 invoked from network); 9 Jun 2005 09:56:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2005 09:56:07 -0000
Received: (qmail 50783 invoked by uid 500); 9 Jun 2005 09:55:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49901 invoked by uid 500); 9 Jun 2005 09:55:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49852 invoked by uid 99); 9 Jun 2005 09:55:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.fib.upc.es (HELO mail.fib.upc.es) (147.83.41.105)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Jun 2005 02:55:53 -0700
Received: from [147.83.58.160] (tarragona.fib.upc.es [147.83.58.160])
	by mail.fib.upc.es (Postfix) with ESMTP id C6920C9A14
	for <java-user@lucene.apache.org>; Thu,  9 Jun 2005 11:55:32 +0200 (CEST)
Message-ID: <42A81214.6010102@fib.upc.edu>
Date: Thu, 09 Jun 2005 11:55:32 +0200
From: Daniel Cortes <dcortes@fib.upc.edu>
Organization: FIB
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: About Stemmers and Analyzers
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scaned-FIB: AntiVirus/AntiSpam en fib.upc.es
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have 2 stop words list  (the platform works with two language at same 
time, and it's very normal that the people use in the search)and I've to 
create a new class that extends Analyzer true? I'm basing on Gerhard 
Schwarz's work for GermanAnalyzer.
How have I  to compile all the trunk/contrib/analysis  code in SVN if I 
want have a new lucene jar with all?
thks for all, and exucse for my silly questions  :D



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 09 10:18:00 2005
Return-Path: <java-user-return-14832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46847 invoked from network); 9 Jun 2005 10:18:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2005 10:18:00 -0000
Received: (qmail 7907 invoked by uid 500); 9 Jun 2005 10:17:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7833 invoked by uid 500); 9 Jun 2005 10:17:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7776 invoked by uid 99); 9 Jun 2005 10:17:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.fetchbook.info (HELO gc.fetchbook.info) (69.61.19.221)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Jun 2005 03:17:48 -0700
Received: (qmail 22869 invoked from network); 9 Jun 2005 10:16:48 -0000
Received: from aeli.bb.netvision.net.il (HELO mickey) (212.143.80.6)
  by gc.fetchbook.info with SMTP; 9 Jun 2005 10:16:48 -0000
From: "M. Mokotov" <mk@mokotov.org>
To: <java-user@lucene.apache.org>
Subject: OR query on multiple fields causes low coord
Date: Thu, 9 Jun 2005 13:14:50 +0200
Message-ID: <00b201c56ce4$76ef1350$0700000a@mickey>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00B3_01C56CF5.3A77E350"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00B3_01C56CF5.3A77E350
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,
 
I have a question with regards to an OR query on multiple fields.
 
It seems that the more fields I'm splitting the documents into, the lower
the coord is getting.
As a result when I want to query the string S on many fields (a query like
F1:(S) F2:(S) ... Fn:(S) ) I'm getting close-to-zero coords, which causes a
poor matching score.
I assume (and forgive me for assuming) that the reason is when calling
coord( overlap, maxOverlap ), maxOverlap=|S|*n (where n is the number of
fields on the query)
 
Is there any way to avoid that?
Can I have the coord computed per field? 
 
Thanks a lot for the help!

------=_NextPart_000_00B3_01C56CF5.3A77E350--


From java-user-return-14833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 09 11:30:31 2005
Return-Path: <java-user-return-14833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84335 invoked from network); 9 Jun 2005 11:30:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2005 11:30:31 -0000
Received: (qmail 374 invoked by uid 500); 9 Jun 2005 11:30:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 328 invoked by uid 500); 9 Jun 2005 11:30:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 312 invoked by uid 500); 9 Jun 2005 11:30:21 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 305 invoked by uid 99); 9 Jun 2005 11:30:20 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mda.demon.nl (HELO franken.ws) (212.238.156.229)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Jun 2005 04:30:19 -0700
Received: from [192.168.1.2] ([192.168.1.2]) by franken.ws with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 9 Jun 2005 13:30:25 +0200
Message-ID: <42A82847.2080306@zilverline.org>
Date: Thu, 09 Jun 2005 13:30:15 +0200
From: Zilverline info <info@zilverline.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: nl, en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Source Code of Zilverline Search Engine version 1.4.0 released
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 09 Jun 2005 11:30:25.0718 (UTC) FILETIME=[A177AD60:01C56CE6]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

All,

I've just released the Source Code of Zilverline version 1.4.0.

Please take look at http://www.zilverline.org, and have a swing at it.

cheers,

   Michael Franken






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 09 18:11:07 2005
Return-Path: <java-user-return-14834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59624 invoked from network); 9 Jun 2005 18:11:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2005 18:11:07 -0000
Received: (qmail 77359 invoked by uid 500); 9 Jun 2005 18:11:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77306 invoked by uid 500); 9 Jun 2005 18:11:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77288 invoked by uid 99); 9 Jun 2005 18:10:59 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from main.gmane.org (HELO ciao.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Jun 2005 11:10:58 -0700
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1DgQqz-00018V-HH
	for java-user@lucene.apache.org; Thu, 09 Jun 2005 19:30:06 +0200
Received: from adsl-68-94-44-28.dsl.rcsntx.swbell.net ([68.94.44.28])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 09 Jun 2005 19:30:05 +0200
Received: from avrootshell by adsl-68-94-44-28.dsl.rcsntx.swbell.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 09 Jun 2005 19:30:05 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  avrootshell <avrootshell@roomity.com>
Subject:  Exception in full text search
Date:  Thu, 09 Jun 2005 11:06:07 -0500
Lines: 33
Message-ID: <d89p6d$5qu$2@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: adsl-68-94-44-28.dsl.rcsntx.swbell.net
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

    I'm able to create index file for full text search.And i'm sure it 
has the required entries as i have traced the traversal path through the 
tables i have specified. And also documents are added to the index file.

But when i specify some string to search,it throws an exception like this.


.E
Time: 0.234
There was 1 error:
1) 
testSrch(com.board.fts.FtsSearchCmdTest)java.lang.NullPointerException: 
null values not allowed
	at 
org.apache.commons.collections.map.ReferenceMap.put(ReferenceMap.java:571)
	at com.sandra.servicer.txtsrch.SrchMan.search(SrchMan.java:108)
	at com.board.fts.FtsSearchCmd.execute(FtsSearchCmd.java)
	at com.board.fts.FtsSearchCmdTest.testSrch(FtsSearchCmdTest.java)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at com.board.fts.FtsSearchCmdTest.main(FtsSearchCmdTest.java)

FAILURES!!!
Tests run: 1,  Failures: 0,  Errors: 1


Is there any way to view the contents of index file which has been created?
If anyone comes up with some suggesions for this kind of error,I appreciate.

TIA,


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 09 18:11:30 2005
Return-Path: <java-user-return-14835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59745 invoked from network); 9 Jun 2005 18:11:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2005 18:11:30 -0000
Received: (qmail 78734 invoked by uid 500); 9 Jun 2005 18:11:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78709 invoked by uid 500); 9 Jun 2005 18:11:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78682 invoked by uid 99); 9 Jun 2005 18:11:23 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr6.xs4all.nl (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Jun 2005 11:11:18 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.3/8.13.3) with ESMTP id j59IAZHY093577
	for <java-user@lucene.apache.org>; Thu, 9 Jun 2005 20:10:35 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: OR query on multiple fields causes low coord
Date: Thu, 9 Jun 2005 20:10:35 +0200
User-Agent: KMail/1.5.4
References: <00b201c56ce4$76ef1350$0700000a@mickey>
In-Reply-To: <00b201c56ce4$76ef1350$0700000a@mickey>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506092010.35318.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 09 June 2005 13:14, M. Mokotov wrote:
> Hi,
>  
> I have a question with regards to an OR query on multiple fields.
>  
> It seems that the more fields I'm splitting the documents into, the lower
> the coord is getting.
> As a result when I want to query the string S on many fields (a query like
> F1:(S) F2:(S) ... Fn:(S) ) I'm getting close-to-zero coords, which causes a
> poor matching score.
> I assume (and forgive me for assuming) that the reason is when calling
> coord( overlap, maxOverlap ), maxOverlap=|S|*n (where n is the number of
> fields on the query)
>  
> Is there any way to avoid that?
> Can I have the coord computed per field? 

Yes. For the query above, use a BooleanQuery with a Similarity that
has a constant returning coord() method. This is difficult to do the
QueryParser, but it is easy to construct it in your own code.
For the subqueries on the fields you can still use the default similarity,
as you see fit.

Have a look at the MultiFieldQueryParser in the source:
http://svn.apache.org/viewcvs.cgi/lucene/java/tags/lucene_1_4_3/src/java/org/apache/lucene/queryParser/
Instead of the BooleanQuery constructed there, use a BooleanQuery
that overrides getSimilarity().

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 09 19:25:05 2005
Return-Path: <java-user-return-14836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45679 invoked from network); 9 Jun 2005 19:25:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2005 19:25:05 -0000
Received: (qmail 79291 invoked by uid 500); 9 Jun 2005 19:24:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79261 invoked by uid 500); 9 Jun 2005 19:24:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79247 invoked by uid 99); 9 Jun 2005 19:24:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mx.laposte.net (HELO mx.laposte.net) (80.245.62.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Jun 2005 12:24:57 -0700
Received: from zaripha (82.225.66.75) by mx.laposte.net (7.0.028) (authenticated as sven.duzont)
        id 4291895A00A62B08 for java-user@lucene.apache.org; Thu, 9 Jun 2005 21:24:14 +0200
Date: Thu, 9 Jun 2005 21:24:48 +0200
From: Sven Duzont <sven.duzont@laposte.net>
X-Mailer: The Bat! (v3.0.1.33) Professional
Reply-To: Sven Duzont <sven.duzont@laposte.net>
X-Priority: 3 (Normal)
Message-ID: <76519954.20050609212448@laposte.net>
To: avrootshell <java-user@lucene.apache.org>
Subject: Re: Exception in full text search
In-Reply-To: <d89p6d$5qu$2@sea.gmane.org>
References: <d89p6d$5qu$2@sea.gmane.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi, 
this exception does not seems to be lucene related 
concerning the way to look at index content, you could try luke (http://www.getopt.org/luke/)
hope it will help

--- sven



Le jeudi 9 juin 2005  18:06:07, vous criviez :

a> Hello,

a>     I'm able to create index file for full text search.And i'm sure it
a> has the required entries as i have traced the traversal path through the
a> tables i have specified. And also documents are added to the index file.

a> But when i specify some string to search,it throws an exception like this.


a> .E
a> Time: 0.234
a> There was 1 error:
a> 1) 
a> testSrch(com.board.fts.FtsSearchCmdTest)java.lang.NullPointerException:
a> null values not allowed
a>         at 
a> org.apache.commons.collections.map.ReferenceMap.put(ReferenceMap.java:571)
a>         at
a> com.sandra.servicer.txtsrch.SrchMan.search(SrchMan.java:108)
a>         at com.board.fts.FtsSearchCmd.execute(FtsSearchCmd.java)
a>         at
a> com.board.fts.FtsSearchCmdTest.testSrch(FtsSearchCmdTest.java)
a>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
a>         at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
a>         at
a> sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
a>         at
a> com.board.fts.FtsSearchCmdTest.main(FtsSearchCmdTest.java)

a> FAILURES!!!
a> Tests run: 1,  Failures: 0,  Errors: 1


a> Is there any way to view the contents of index file which has been created?
a> If anyone comes up with some suggesions for this kind of error,I appreciate.

a> TIA,


a> ---------------------------------------------------------------------
a> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
a> For additional commands, e-mail: java-user-help@lucene.apache.org






-- 
Cordialement,
 Sven                            mailto:sven.duzont@laposte.net


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 09 19:40:33 2005
Return-Path: <java-user-return-14837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51094 invoked from network); 9 Jun 2005 19:40:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2005 19:40:33 -0000
Received: (qmail 5635 invoked by uid 500); 9 Jun 2005 19:40:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5612 invoked by uid 500); 9 Jun 2005 19:40:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5585 invoked by uid 99); 9 Jun 2005 19:40:25 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of burton@rojo.com designates 12.43.53.196 as permitted sender)
Received: from Unknown (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Jun 2005 12:40:22 -0700
Received: from [192.168.1.146] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id j59IvYKF030978
	for <java-user@lucene.apache.org>; Thu, 9 Jun 2005 11:57:34 -0700
Message-ID: <42A8911A.9050907@rojo.com>
Date: Thu, 09 Jun 2005 11:57:30 -0700
From: Kevin Burton <burton@rojo.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Macintosh/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Fastest way to fetch N documents with unique keys within large
 numbers of indexes..
References: <5000698.1118307007912.JavaMail.root@wamui-blood.atl.sa.earthlink.net>
In-Reply-To: <5000698.1118307007912.JavaMail.root@wamui-blood.atl.sa.earthlink.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andrew Boyd wrote:

>Kevin,
>  Those results are awsome.  Could you please give those of us that were following but not quite understanding everything some pseudo code or some more explaination?
>
>  
>
Ug.. I hate to say this bug ignore these numbers.  Turns out that I was 
hitting a cache ... I thought I had disable this but I set the wrong 
var. :-/

If only it was true ;)

Kevin

-- 


Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
See irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

   Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 09 19:58:26 2005
Return-Path: <java-user-return-14838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57636 invoked from network); 9 Jun 2005 19:58:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2005 19:58:26 -0000
Received: (qmail 52640 invoked by uid 500); 9 Jun 2005 19:58:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52612 invoked by uid 500); 9 Jun 2005 19:58:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52596 invoked by uid 99); 9 Jun 2005 19:58:17 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of burton@rojo.com designates 12.43.53.196 as permitted sender)
Received: from Unknown (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Jun 2005 12:58:15 -0700
Received: from [192.168.1.146] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id j59JvqgQ032110
	for <java-user@lucene.apache.org>; Thu, 9 Jun 2005 12:57:53 -0700
Message-ID: <42A89F36.1050900@rojo.com>
Date: Thu, 09 Jun 2005 12:57:42 -0700
From: Kevin Burton <burton@rojo.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Macintosh/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Optimizing indexes with mulitiple processors?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is it possible to get Lucene to do an index optimize on multiple 
processors?

Its a single threaded algorithm currently right?

Its a shame since I have a quad  machine but I'm only using 1/4th of the 
capacity.  Thats a heck of a performance hit.

Kevin

-- 


Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
See irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

   Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 09 20:28:15 2005
Return-Path: <java-user-return-14839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69740 invoked from network); 9 Jun 2005 20:28:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2005 20:28:15 -0000
Received: (qmail 37408 invoked by uid 500); 9 Jun 2005 20:28:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37378 invoked by uid 500); 9 Jun 2005 20:28:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37356 invoked by uid 99); 9 Jun 2005 20:28:08 -0000
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31108.mail.mud.yahoo.com (HELO web31108.mail.mud.yahoo.com) (68.142.200.41)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Jun 2005 13:28:05 -0700
Received: (qmail 40498 invoked by uid 60001); 9 Jun 2005 20:27:53 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=IzsTOC4BLu/i7FTMfJN2/MvJiTf2397LYI3VVDOeElVPaoAL74mqi7Pbu+HGDKznVX5CrZIEDeNnFPLJZ9ZCqJ+XLOxh9AfhNfRcbDBQ+c5lgAwvAv4VRK4ucEB5RwWbGNmnEUdu+zlTBsKcp+vKNAbk8DJpBuiv7idsk9Jfts0=  ;
Message-ID: <20050609202753.40496.qmail@web31108.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31108.mail.mud.yahoo.com via HTTP; Thu, 09 Jun 2005 13:27:53 PDT
Date: Thu, 9 Jun 2005 13:27:53 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing from multiple applications to a central index.
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think your setup is right for a centralized IndexQueueManager that is
subscribed to topics to which your distributed servers push data to
index via JMS.  That way you get an easy way to add more machines to
the cluster, you get persistence of not-yet-indexed data, and you get a
queuing mechanism that takes care of locking issues.

Otis


--- Doug Hughes <dhughes@alagad.com> wrote:

>  
> Hello,
>  
> I have a situation where I need to have multiple applications,
> potentially
> located on different servers, and which have no knowledge of each
> other,
> indexing into and searching from the same Lucene index.  I anticipate
> problems with locks.  
>  
> Let's say I have two applications and, at any time, either of them
> may try
> to index upwards of 1000 documents (or more!).  If, by luck, these
> applications do not attempt to write to the index at the same time
> then
> things are fine.  However, if both of them try to write to the index
> at the
> same time, one of them will fail due to the index being locked.  
>  
> My first solution to this problem was to have both applications check
> to see
> if the index is locked and to let them sleep until the index was
> unlocked.
> The problem with this is that if, while indexing, an application is
> shut
> down or killed, the index may not be unlocked.  This will block other
> applications from indexing and may cause them to hang.
>  
> Clearly I have a threading problems.  I think I may know a solution
> to this
> problem and I would appreciate verification of the solution or
> suggestions
> on approaches.
>  
> I am thinking that I can make all of the applications index into
> their own
> index, not the central shared index.  Their own index might be a
> FSDirectory
> or a RAMDirectory.  When done indexing, the applications' indexes
> would be
> merged with the central index for consumption by all applications
> sharing
> the index.
>  
> From what I understand, the process of merging indexes takes a lot
> less time
> than the process of inserting into or deleting from an index.  This
> seems to
> mean that I'm less "likely" to run into locking issues.  I can more
> safely
> have process sleep until the index is unlocked and can gain access to
> merge
> their index with the central index.  If these applications use their
> own
> FSDirectory I should be able to continue working with their FS
> directory in
> the case of an unclean shutdowns and should still be able to merge it
> with
> the central index.
>  
> Does anyone have any advice to offer on this? 
>  
> Thank you,
>  
> Doug Hughes
> dhughes@alagad.com
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 09 21:37:02 2005
Return-Path: <java-user-return-14840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94092 invoked from network); 9 Jun 2005 21:37:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2005 21:37:02 -0000
Received: (qmail 29163 invoked by uid 500); 9 Jun 2005 21:36:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29134 invoked by uid 500); 9 Jun 2005 21:36:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29093 invoked by uid 99); 9 Jun 2005 21:36:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of bill.w.au@gmail.com designates 64.233.184.201 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.201)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Jun 2005 14:36:51 -0700
Received: by wproxy.gmail.com with SMTP id 50so324956wri
        for <java-user@lucene.apache.org>; Thu, 09 Jun 2005 14:36:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=iy1CXjbzmLzc2wuvTeYnBF0RUWj+cM8+BHNupb8FbDuhwvhSoSQ+zxe9z66bjlqdzZI2Levobd8QzRe70AVlFuZb16a8s6YwRtV+6y+WhrV5abEbG/JZb6FRQx75RPXjFpgPuxkHSmJz66/LbYK/lt+kqvwCoty3AQlbgV+FxPI=
Received: by 10.54.144.9 with SMTP id r9mr578214wrd;
        Thu, 09 Jun 2005 14:36:28 -0700 (PDT)
Received: by 10.54.52.21 with HTTP; Thu, 9 Jun 2005 14:36:28 -0700 (PDT)
Message-ID: <3b5f720305060914363281d64b@mail.gmail.com>
Date: Thu, 9 Jun 2005 17:36:28 -0400
From: Bill Au <bill.w.au@gmail.com>
Reply-To: Bill Au <bill.w.au@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Optimizing indexes with mulitiple processors?
In-Reply-To: <42A89F36.1050900@rojo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42A89F36.1050900@rojo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Optimize is disk I/O bound.  So I am not sure what multiple CPUs will buy y=
ou.

Bill

On 6/9/05, Kevin Burton <burton@rojo.com> wrote:
> Is it possible to get Lucene to do an index optimize on multiple
> processors?
>=20
> Its a single threaded algorithm currently right?
>=20
> Its a shame since I have a quad  machine but I'm only using 1/4th of the
> capacity.  Thats a heck of a performance hit.
>=20
> Kevin
>=20
> --
>=20
>=20
> Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com.
> See irc.freenode.net #rojo if you want to chat.
>=20
> Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html
>=20
>    Kevin A. Burton, Location - San Francisco, CA
>       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
> GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 09 23:03:26 2005
Return-Path: <java-user-return-14841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32810 invoked from network); 9 Jun 2005 23:03:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2005 23:03:26 -0000
Received: (qmail 97013 invoked by uid 500); 9 Jun 2005 23:03:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96985 invoked by uid 500); 9 Jun 2005 23:03:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96972 invoked by uid 99); 9 Jun 2005 23:03:19 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web50603.mail.yahoo.com (HELO web50603.mail.yahoo.com) (206.190.38.90)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Jun 2005 16:03:17 -0700
Received: (qmail 33696 invoked by uid 60001); 9 Jun 2005 23:03:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=S6O3ynLGkwuGyS4ZY5qrMZJaZWGomM5r0PKRPPAW6yXZ/fkFEswMDb4F9oXIbe9umlbdnOVbOoImLhyKQkTCwLACFVORYoldobPIte35oLz37EGtdmkK9c4T1gPGdu/Z/ZnCe12ZhGR8y1AxQhAvcg5LQ0rmP8xe0ylov1G4LXY=  ;
Message-ID: <20050609230312.33694.qmail@web50603.mail.yahoo.com>
Received: from [209.172.74.46] by web50603.mail.yahoo.com via HTTP; Thu, 09 Jun 2005 16:03:11 PDT
Date: Thu, 9 Jun 2005 16:03:11 -0700 (PDT)
From: Chris Collins <chris_j_collins@yahoo.com>
Subject: Re: Optimizing indexes with mulitiple processors?
To: java-user@lucene.apache.org
In-Reply-To: <42A89F36.1050900@rojo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can segment your indexes into n physical parts (perhaps 4), then index
those n parts concurrently.  When you query you will use some kind of mulit
searcher to span the parts.  The one thing you may care about is that if you
are going todo a recrawl / update of documents against the existing index, then
you will need to have a reproducible way of hashing your documents over the
index (assuming you are deleting the previous document).  

Hope that helps

Chris

--- Kevin Burton <burton@rojo.com> wrote:

> Is it possible to get Lucene to do an index optimize on multiple 
> processors?
> 
> Its a single threaded algorithm currently right?
> 
> Its a shame since I have a quad  machine but I'm only using 1/4th of the 
> capacity.  Thats a heck of a performance hit.
> 
> Kevin
> 
> -- 
> 
> 
> Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
> See irc.freenode.net #rojo if you want to chat.
> 
> Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html
> 
>    Kevin A. Burton, Location - San Francisco, CA
>       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
> GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 09 23:04:47 2005
Return-Path: <java-user-return-14842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32996 invoked from network); 9 Jun 2005 23:04:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2005 23:04:47 -0000
Received: (qmail 2068 invoked by uid 500); 9 Jun 2005 23:04:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2041 invoked by uid 500); 9 Jun 2005 23:04:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2028 invoked by uid 500); 9 Jun 2005 23:04:41 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 2023 invoked by uid 99); 9 Jun 2005 23:04:41 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_RCVD_HELO,PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from exprod6og2.obsmtp.com (HELO psmtp.com) (64.18.1.122)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Jun 2005 16:04:39 -0700
Received: from source ([139.56.4.14]) by exprod6ob2.obsmtp.com ([64.18.5.12]) with SMTP;
	Thu, 09 Jun 2005 16:04:18 PDT
Received: from triangulum1.broadvision.com (triangulum1.broadvision.com [10.10.102.100])
	by nebula3.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id j59N41L22795
	for <lucene-user@jakarta.apache.org>; Thu, 9 Jun 2005 16:04:01 -0700 (PDT)
Received: from rw-gw-02.BroadVision.com (localhost [127.0.0.1])
	by triangulum1.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id QAA02199
	for <lucene-user@jakarta.apache.org>; Thu, 9 Jun 2005 16:04:32 -0700 (PDT)
Received: by rw-gw-02.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <FB9RNH47>; Thu, 9 Jun 2005 16:04:40 -0700
Message-ID: <6B68C05FFDF8D540BBC67FE6CE864C32D5461E@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'lucene-user@jakarta.apache.org'" <lucene-user@jakarta.apache.org>
Cc: "Wu, James" <James.Wu@broadvision.com>,
   "Tou, Fred"
	 <Fred.Tou@broadvision.com>,
   "Lipinsky, Ed" <Ed.Lipinsky@broadvision.com>
Subject: Lucene 1.4.3  QueryParser cannot parse "great!" ?
Date: Thu, 9 Jun 2005 16:04:39 -0700 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

We are using lucene 1.4.3, we indexed a string

Company picnic is great!

by IndexWriter created with StandardAnalyzer, into
a field called "all". I also confirmed StandardAnalyzer 
processed my input string as tokens:

company
picnic
great

as I expected.

But when I try to create Query by QueryParser 

Query q = QueryParser.parse("great!", "all", new StandardAnalyzer());

I got the ParseException:

##########################
Encountered "<EOF>" at line 1, column 7.
Was expecting one of:
    "(" ...
    <QUOTED> ...
    <TERM> ...
    <PREFIXTERM> ...
    <WILDTERM> ...
    "[" ...
    "{" ...
    <NUMBER> ...
#########################

Surely if I use "great" or some other special symbols
at the end like "great-" or "great+", QueryParser is OK.

I would expect QueryParser can process "great!" to take
away "!" so this query is the same as "great"? Is this behavior 
expected or is a bug?

Thanks very much for helps, 

Lisheng Zhang, Software engineer
    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 09 23:18:16 2005
Return-Path: <java-user-return-14843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38508 invoked from network); 9 Jun 2005 23:18:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2005 23:18:16 -0000
Received: (qmail 26790 invoked by uid 500); 9 Jun 2005 23:18:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26751 invoked by uid 500); 9 Jun 2005 23:18:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26738 invoked by uid 99); 9 Jun 2005 23:18:10 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=PLING_QUERY,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of richard.krenek@gmail.com designates 64.233.184.198 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Jun 2005 16:18:08 -0700
Received: by wproxy.gmail.com with SMTP id 50so352940wri
        for <java-user@lucene.apache.org>; Thu, 09 Jun 2005 16:17:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=k6m1MAGw5Pir2pYnea5C754NjJeOP92Ds25E5Ouix6UIfK5Mf0TA9bB1sHNcjrtQrJvSY2Dq1ph0t2Z+xGmyEl2J5iwPXKrp9/4TSNBR5UFtqDj96bHSPj+I9REUiUJpvwpLoHC6aH2L/J5H5qv5ugI4ABagbIj6NxjG/FnEF9w=
Received: by 10.54.77.7 with SMTP id z7mr629370wra;
        Thu, 09 Jun 2005 16:17:59 -0700 (PDT)
Received: by 10.54.72.5 with HTTP; Thu, 9 Jun 2005 16:17:59 -0700 (PDT)
Message-ID: <4ef6647e05060916172c97286c@mail.gmail.com>
Date: Thu, 9 Jun 2005 17:17:59 -0600
From: Richard Krenek <richard.krenek@gmail.com>
Reply-To: Richard Krenek <richard.krenek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 1.4.3 QueryParser cannot parse "great!" ?
In-Reply-To: <6B68C05FFDF8D540BBC67FE6CE864C32D5461E@rw-msg-02.broadvision.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6B68C05FFDF8D540BBC67FE6CE864C32D5461E@rw-msg-02.broadvision.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Here is a list of special characters that must be excaped in a query.

+ - && || ! ( ) { } [ ] ^ " ~ * ? : \

Query q =3D QueryParser.parse("great\!", "all", new StandardAnalyzer());



On 6/9/05, Zhang, Lisheng <Lisheng.Zhang@broadvision.com> wrote:
> Hi,
>=20
> We are using lucene 1.4.3, we indexed a string
>=20
> Company picnic is great!
>=20
> by IndexWriter created with StandardAnalyzer, into
> a field called "all". I also confirmed StandardAnalyzer
> processed my input string as tokens:
>=20
> company
> picnic
> great
>=20
> as I expected.
>=20
> But when I try to create Query by QueryParser
>=20
> Query q =3D QueryParser.parse("great!", "all", new StandardAnalyzer());
>=20
> I got the ParseException:
>=20
> ##########################
> Encountered "<EOF>" at line 1, column 7.
> Was expecting one of:
>     "(" ...
>     <QUOTED> ...
>     <TERM> ...
>     <PREFIXTERM> ...
>     <WILDTERM> ...
>     "[" ...
>     "{" ...
>     <NUMBER> ...
> #########################
>=20
> Surely if I use "great" or some other special symbols
> at the end like "great-" or "great+", QueryParser is OK.
>=20
> I would expect QueryParser can process "great!" to take
> away "!" so this query is the same as "great"? Is this behavior
> expected or is a bug?
>=20
> Thanks very much for helps,
>=20
> Lisheng Zhang, Software engineer
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 09 23:53:58 2005
Return-Path: <java-user-return-14844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45630 invoked from network); 9 Jun 2005 23:53:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jun 2005 23:53:58 -0000
Received: (qmail 77245 invoked by uid 500); 9 Jun 2005 23:53:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77218 invoked by uid 500); 9 Jun 2005 23:53:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77193 invoked by uid 99); 9 Jun 2005 23:53:52 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_RCVD_HELO,PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from exprod6og6.obsmtp.com (HELO psmtp.com) (64.18.1.126)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Jun 2005 16:53:50 -0700
Received: from source ([139.56.4.14]) by exprod6ob6.obsmtp.com ([64.18.5.12]) with SMTP;
	Thu, 09 Jun 2005 16:53:48 PDT
Received: from triangulum1.broadvision.com (triangulum1.broadvision.com [10.10.102.100])
	by nebula3.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id j59NgFL23307
	for <java-user@lucene.apache.org>; Thu, 9 Jun 2005 16:42:15 -0700 (PDT)
Received: from rw-gw-01.BroadVision.com (localhost [127.0.0.1])
	by triangulum1.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id QAA02678
	for <java-user@lucene.apache.org>; Thu, 9 Jun 2005 16:42:46 -0700 (PDT)
Received: by rw-gw-01.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <LZH5F287>; Thu, 9 Jun 2005 16:42:55 -0700
Message-ID: <6B68C05FFDF8D540BBC67FE6CE864C32D5461F@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Cc: "Wu, James" <James.Wu@broadvision.com>,
   "Tou, Fred"
	 <Fred.Tou@broadvision.com>,
   "Lipinsky, Ed" <Ed.Lipinsky@broadvision.com>
Subject: RE: Lucene 1.4.3 QueryParser cannot parse "great!" ?
Date: Thu, 9 Jun 2005 16:42:54 -0700 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Richard,

Thanks very much! That works.

Lisheng

-----Original Message-----
From: Richard Krenek [mailto:richard.krenek@gmail.com]
Sent: Thursday, June 09, 2005 3:18 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene 1.4.3 QueryParser cannot parse "great!" ?


Here is a list of special characters that must be excaped in a query.

+ - && || ! ( ) { } [ ] ^ " ~ * ? : \

Query q = QueryParser.parse("great\!", "all", new StandardAnalyzer());



On 6/9/05, Zhang, Lisheng <Lisheng.Zhang@broadvision.com> wrote:
> Hi,
> 
> We are using lucene 1.4.3, we indexed a string
> 
> Company picnic is great!
> 
> by IndexWriter created with StandardAnalyzer, into
> a field called "all". I also confirmed StandardAnalyzer
> processed my input string as tokens:
> 
> company
> picnic
> great
> 
> as I expected.
> 
> But when I try to create Query by QueryParser
> 
> Query q = QueryParser.parse("great!", "all", new StandardAnalyzer());
> 
> I got the ParseException:
> 
> ##########################
> Encountered "<EOF>" at line 1, column 7.
> Was expecting one of:
>     "(" ...
>     <QUOTED> ...
>     <TERM> ...
>     <PREFIXTERM> ...
>     <WILDTERM> ...
>     "[" ...
>     "{" ...
>     <NUMBER> ...
> #########################
> 
> Surely if I use "great" or some other special symbols
> at the end like "great-" or "great+", QueryParser is OK.
> 
> I would expect QueryParser can process "great!" to take
> away "!" so this query is the same as "great"? Is this behavior
> expected or is a bug?
> 
> Thanks very much for helps,
> 
> Lisheng Zhang, Software engineer
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 00:52:57 2005
Return-Path: <java-user-return-14845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56270 invoked from network); 10 Jun 2005 00:52:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 00:52:57 -0000
Received: (qmail 69377 invoked by uid 500); 10 Jun 2005 00:52:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69352 invoked by uid 500); 10 Jun 2005 00:52:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69294 invoked by uid 99); 10 Jun 2005 00:52:47 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web50601.mail.yahoo.com (HELO web50601.mail.yahoo.com) (206.190.38.88)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Jun 2005 17:52:45 -0700
Received: (qmail 82893 invoked by uid 60001); 10 Jun 2005 00:52:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=gMzB6xLCDcP52etrk0KYbLE+aOBHLBFb5bKrU2FEF5baLGaus2BGyxJduJwcN0HsEJOkVcflXCai8TlY19YJexmyAzxr0NBW34cvqeXfAfbsIbR3dRx+4YVHb0tjgPCGq08LHUCBahkHlssQH+wBovLLHGkBJSGNQLo+YIyfPhs=  ;
Message-ID: <20050610005238.82891.qmail@web50601.mail.yahoo.com>
Received: from [209.172.74.46] by web50601.mail.yahoo.com via HTTP; Thu, 09 Jun 2005 17:52:38 PDT
Date: Thu, 9 Jun 2005 17:52:38 -0700 (PDT)
From: Chris Collins <chris_j_collins@yahoo.com>
Subject: Re: Optimizing indexes with mulitiple processors?
To: java-user@lucene.apache.org, Bill Au <bill.w.au@gmail.com>
In-Reply-To: <3b5f720305060914363281d64b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I found with a fast RAID controller that I can easily be CPU bound, some of the
io is related to latency.  You can hide the latency by having overlapping IO
(you get that with multiple indexers going on at the same time).

I think there possibly could be more horsepower you can get out of the inverter
and merge aspects of the indexing.  I am currently jprobeing this at the
moment.

If your using high latency disks (such as a filer) during merge you may want to
consider increasing the size of the buffers to reduce the amount of rpc's to
the filer....however my previous attempts to change this failed.

C 

--- Bill Au <bill.w.au@gmail.com> wrote:

> Optimize is disk I/O bound.  So I am not sure what multiple CPUs will buy
> you.
> 
> Bill
> 
> On 6/9/05, Kevin Burton <burton@rojo.com> wrote:
> > Is it possible to get Lucene to do an index optimize on multiple
> > processors?
> > 
> > Its a single threaded algorithm currently right?
> > 
> > Its a shame since I have a quad  machine but I'm only using 1/4th of the
> > capacity.  Thats a heck of a performance hit.
> > 
> > Kevin
> > 
> > --
> > 
> > 
> > Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com.
> > See irc.freenode.net #rojo if you want to chat.
> > 
> > Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html
> > 
> >    Kevin A. Burton, Location - San Francisco, CA
> >       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
> > GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 02:03:31 2005
Return-Path: <java-user-return-14846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86900 invoked from network); 10 Jun 2005 02:03:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 02:03:31 -0000
Received: (qmail 76857 invoked by uid 500); 10 Jun 2005 02:03:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76826 invoked by uid 500); 10 Jun 2005 02:03:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76786 invoked by uid 99); 10 Jun 2005 02:03:23 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=PLING_QUERY,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.202 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Jun 2005 19:03:19 -0700
Received: by rproxy.gmail.com with SMTP id c51so182040rne
        for <java-user@lucene.apache.org>; Thu, 09 Jun 2005 19:03:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=qIT0hcV5yFSLjXeqVX+ImOw44Ao+0jHgTC8tWdUwIiUWt3G6kHtaZATbQJ+sMqJohfGC8bF9+t4XVDzSwHlJX7B9zs2FNPWTM3+CewQjV5ntsxoIcodj7PppVer1CXlzSBFTotntlL84ej/+FH2oQkw9R2Qr0bKnGUfPd17G+Kg=
Received: by 10.38.101.40 with SMTP id y40mr122355rnb;
        Thu, 09 Jun 2005 19:03:12 -0700 (PDT)
Received: by 10.38.104.77 with HTTP; Thu, 9 Jun 2005 19:03:12 -0700 (PDT)
Message-ID: <88c6a67205060919033b2f86c4@mail.gmail.com>
Date: Thu, 9 Jun 2005 21:03:12 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 1.4.3 QueryParser cannot parse "great!" ?
In-Reply-To: <6B68C05FFDF8D540BBC67FE6CE864C32D5461F@rw-msg-02.broadvision.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6B68C05FFDF8D540BBC67FE6CE864C32D5461F@rw-msg-02.broadvision.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

See QueryParser.escape(), it automatically escapes these special
characters for you.

On 6/9/05, Zhang, Lisheng <Lisheng.Zhang@broadvision.com> wrote:
> Hi Richard,
>=20
> Thanks very much! That works.
>=20
> Lisheng
>=20
> -----Original Message-----
> From: Richard Krenek [mailto:richard.krenek@gmail.com]
> Sent: Thursday, June 09, 2005 3:18 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene 1.4.3 QueryParser cannot parse "great!" ?
>=20
>=20
> Here is a list of special characters that must be excaped in a query.
>=20
> + - && || ! ( ) { } [ ] ^ " ~ * ? : \
>=20
> Query q =3D QueryParser.parse("great\!", "all", new StandardAnalyzer());
>=20
>=20
>=20
> On 6/9/05, Zhang, Lisheng <Lisheng.Zhang@broadvision.com> wrote:
> > Hi,
> >
> > We are using lucene 1.4.3, we indexed a string
> >
> > Company picnic is great!
> >
> > by IndexWriter created with StandardAnalyzer, into
> > a field called "all". I also confirmed StandardAnalyzer
> > processed my input string as tokens:
> >
> > company
> > picnic
> > great
> >
> > as I expected.
> >
> > But when I try to create Query by QueryParser
> >
> > Query q =3D QueryParser.parse("great!", "all", new StandardAnalyzer());
> >
> > I got the ParseException:
> >
> > ##########################
> > Encountered "<EOF>" at line 1, column 7.
> > Was expecting one of:
> >     "(" ...
> >     <QUOTED> ...
> >     <TERM> ...
> >     <PREFIXTERM> ...
> >     <WILDTERM> ...
> >     "[" ...
> >     "{" ...
> >     <NUMBER> ...
> > #########################
> >
> > Surely if I use "great" or some other special symbols
> > at the end like "great-" or "great+", QueryParser is OK.
> >
> > I would expect QueryParser can process "great!" to take
> > away "!" so this query is the same as "great"? Is this behavior
> > expected or is a bug?
> >
> > Thanks very much for helps,
> >
> > Lisheng Zhang, Software engineer
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 03:21:27 2005
Return-Path: <java-user-return-14847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22776 invoked from network); 10 Jun 2005 03:21:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 03:21:27 -0000
Received: (qmail 20854 invoked by uid 500); 10 Jun 2005 03:21:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20806 invoked by uid 500); 10 Jun 2005 03:21:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20785 invoked by uid 99); 10 Jun 2005 03:21:16 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_RCVD_HELO,PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from exprod6og8.obsmtp.com (HELO psmtp.com) (64.18.1.128)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Jun 2005 20:21:09 -0700
Received: from source ([139.56.4.14]) by exprod6ob8.obsmtp.com ([64.18.5.12]) with SMTP;
	Thu, 09 Jun 2005 20:20:55 PDT
Received: from triangulum1.broadvision.com (triangulum1.broadvision.com [10.10.102.100])
	by nebula3.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id j5A3KbL24985
	for <java-user@lucene.apache.org>; Thu, 9 Jun 2005 20:20:37 -0700 (PDT)
Received: from rw-gw-01.BroadVision.com (localhost [127.0.0.1])
	by triangulum1.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id UAA04093
	for <java-user@lucene.apache.org>; Thu, 9 Jun 2005 20:21:09 -0700 (PDT)
Received: by rw-gw-01.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <LZH5FJ1F>; Thu, 9 Jun 2005 20:21:17 -0700
Message-ID: <6B68C05FFDF8D540BBC67FE6CE864C32D54621@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Cc: "Wu, James" <James.Wu@broadvision.com>,
   "Tou, Fred"
	 <Fred.Tou@broadvision.com>,
   "Lipinsky, Ed" <Ed.Lipinsky@broadvision.com>
Subject: RE: Lucene 1.4.3 QueryParser cannot parse "great!" ?
Date: Thu, 9 Jun 2005 20:21:15 -0700 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Chris,

Thanks very much, that also works well!

Lisheng

-----Original Message-----
From: Chris Lamprecht [mailto:clamprecht@gmail.com]
Sent: Thursday, June 09, 2005 6:03 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene 1.4.3 QueryParser cannot parse "great!" ?


See QueryParser.escape(), it automatically escapes these special
characters for you.

On 6/9/05, Zhang, Lisheng <Lisheng.Zhang@broadvision.com> wrote:
> Hi Richard,
> 
> Thanks very much! That works.
> 
> Lisheng
> 
> -----Original Message-----
> From: Richard Krenek [mailto:richard.krenek@gmail.com]
> Sent: Thursday, June 09, 2005 3:18 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene 1.4.3 QueryParser cannot parse "great!" ?
> 
> 
> Here is a list of special characters that must be excaped in a query.
> 
> + - && || ! ( ) { } [ ] ^ " ~ * ? : \
> 
> Query q = QueryParser.parse("great\!", "all", new StandardAnalyzer());
> 
> 
> 
> On 6/9/05, Zhang, Lisheng <Lisheng.Zhang@broadvision.com> wrote:
> > Hi,
> >
> > We are using lucene 1.4.3, we indexed a string
> >
> > Company picnic is great!
> >
> > by IndexWriter created with StandardAnalyzer, into
> > a field called "all". I also confirmed StandardAnalyzer
> > processed my input string as tokens:
> >
> > company
> > picnic
> > great
> >
> > as I expected.
> >
> > But when I try to create Query by QueryParser
> >
> > Query q = QueryParser.parse("great!", "all", new StandardAnalyzer());
> >
> > I got the ParseException:
> >
> > ##########################
> > Encountered "<EOF>" at line 1, column 7.
> > Was expecting one of:
> >     "(" ...
> >     <QUOTED> ...
> >     <TERM> ...
> >     <PREFIXTERM> ...
> >     <WILDTERM> ...
> >     "[" ...
> >     "{" ...
> >     <NUMBER> ...
> > #########################
> >
> > Surely if I use "great" or some other special symbols
> > at the end like "great-" or "great+", QueryParser is OK.
> >
> > I would expect QueryParser can process "great!" to take
> > away "!" so this query is the same as "great"? Is this behavior
> > expected or is a bug?
> >
> > Thanks very much for helps,
> >
> > Lisheng Zhang, Software engineer
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 04:39:18 2005
Return-Path: <java-user-return-14848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51693 invoked from network); 10 Jun 2005 04:39:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 04:39:18 -0000
Received: (qmail 45087 invoked by uid 500); 10 Jun 2005 04:39:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45043 invoked by uid 500); 10 Jun 2005 04:39:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45019 invoked by uid 99); 10 Jun 2005 04:39:09 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_RCVD_HELO,PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from exprod6og2.obsmtp.com (HELO psmtp.com) (64.18.1.122)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Jun 2005 21:39:07 -0700
Received: from source ([139.56.4.14]) by exprod6ob2.obsmtp.com ([64.18.5.12]) with SMTP;
	Thu, 09 Jun 2005 21:38:57 PDT
Received: from triangulum1.broadvision.com (triangulum1.broadvision.com [10.10.102.100])
	by nebula3.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id j5A4cdL25559
	for <java-user@lucene.apache.org>; Thu, 9 Jun 2005 21:38:39 -0700 (PDT)
Received: from rw-gw-01.BroadVision.com (localhost [127.0.0.1])
	by triangulum1.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id VAA04552
	for <java-user@lucene.apache.org>; Thu, 9 Jun 2005 21:39:11 -0700 (PDT)
Received: by rw-gw-01.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <LZH5FJF8>; Thu, 9 Jun 2005 21:39:19 -0700
Message-ID: <6B68C05FFDF8D540BBC67FE6CE864C32D54622@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Lucene 1.4.3 QueryParser cannot parse "great!" ?
Date: Thu, 9 Jun 2005 21:39:19 -0700 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Thanks for the info, that solved my problem, may
I ask one question further: what is the reason
why "!" must be escaped? 

I can see why "+ - * ? \ ~ :" must be escaped since 
they have some usage in query formulation, is "!" 
part of the query syntax?

Best regards, Lisheng


-----Original Message-----
From: Richard Krenek [mailto:richard.krenek@gmail.com]
Sent: Thursday, June 09, 2005 3:18 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene 1.4.3 QueryParser cannot parse "great!" ?


Here is a list of special characters that must be excaped in a query.

+ - && || ! ( ) { } [ ] ^ " ~ * ? : \

Query q = QueryParser.parse("great\!", "all", new StandardAnalyzer());



On 6/9/05, Zhang, Lisheng <Lisheng.Zhang@broadvision.com> wrote:
> Hi,
> 
> We are using lucene 1.4.3, we indexed a string
> 
> Company picnic is great!
> 
> by IndexWriter created with StandardAnalyzer, into
> a field called "all". I also confirmed StandardAnalyzer
> processed my input string as tokens:
> 
> company
> picnic
> great
> 
> as I expected.
> 
> But when I try to create Query by QueryParser
> 
> Query q = QueryParser.parse("great!", "all", new StandardAnalyzer());
> 
> I got the ParseException:
> 
> ##########################
> Encountered "<EOF>" at line 1, column 7.
> Was expecting one of:
>     "(" ...
>     <QUOTED> ...
>     <TERM> ...
>     <PREFIXTERM> ...
>     <WILDTERM> ...
>     "[" ...
>     "{" ...
>     <NUMBER> ...
> #########################
> 
> Surely if I use "great" or some other special symbols
> at the end like "great-" or "great+", QueryParser is OK.
> 
> I would expect QueryParser can process "great!" to take
> away "!" so this query is the same as "great"? Is this behavior
> expected or is a bug?
> 
> Thanks very much for helps,
> 
> Lisheng Zhang, Software engineer
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 04:42:18 2005
Return-Path: <java-user-return-14849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52156 invoked from network); 10 Jun 2005 04:42:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 04:42:17 -0000
Received: (qmail 49551 invoked by uid 500); 10 Jun 2005 04:42:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49527 invoked by uid 500); 10 Jun 2005 04:42:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49458 invoked by uid 99); 10 Jun 2005 04:42:07 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=PLING_QUERY,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.200 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Jun 2005 21:42:06 -0700
Received: by rproxy.gmail.com with SMTP id c51so194993rne
        for <java-user@lucene.apache.org>; Thu, 09 Jun 2005 21:41:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=CVEqWefGKWk6sxzFWmLLV1mVIugB05H5lDMp2oFZIE4bpXrK5g5hex7CoW0/GldGqFqzW9S+4UIaV0RPhfxnYRlXFXvGmlVrJ/fduxDuQizYTltZ0XYlJg5TdKz8DInUocjvexBqd8k8YPJEJR85iepzJbLvbDQzYjrCM1O14Oc=
Received: by 10.38.66.14 with SMTP id o14mr648626rna;
        Thu, 09 Jun 2005 21:41:55 -0700 (PDT)
Received: by 10.38.104.77 with HTTP; Thu, 9 Jun 2005 21:41:55 -0700 (PDT)
Message-ID: <88c6a6720506092141729defe2@mail.gmail.com>
Date: Thu, 9 Jun 2005 23:41:55 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 1.4.3 QueryParser cannot parse "great!" ?
In-Reply-To: <6B68C05FFDF8D540BBC67FE6CE864C32D54622@rw-msg-02.broadvision.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6B68C05FFDF8D540BBC67FE6CE864C32D54622@rw-msg-02.broadvision.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

! can be used before a term for NOT, similar to - (minus). =20


On 6/9/05, Zhang, Lisheng <Lisheng.Zhang@broadvision.com> wrote:
> Hi,
>=20
> Thanks for the info, that solved my problem, may
> I ask one question further: what is the reason
> why "!" must be escaped?
>=20
> I can see why "+ - * ? \ ~ :" must be escaped since
> they have some usage in query formulation, is "!"
> part of the query syntax?
>=20
> Best regards, Lisheng
>=20
>=20
> -----Original Message-----
> From: Richard Krenek [mailto:richard.krenek@gmail.com]
> Sent: Thursday, June 09, 2005 3:18 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene 1.4.3 QueryParser cannot parse "great!" ?
>=20
>=20
> Here is a list of special characters that must be excaped in a query.
>=20
> + - && || ! ( ) { } [ ] ^ " ~ * ? : \
>=20
> Query q =3D QueryParser.parse("great\!", "all", new StandardAnalyzer());
>=20
>=20
>=20
> On 6/9/05, Zhang, Lisheng <Lisheng.Zhang@broadvision.com> wrote:
> > Hi,
> >
> > We are using lucene 1.4.3, we indexed a string
> >
> > Company picnic is great!
> >
> > by IndexWriter created with StandardAnalyzer, into
> > a field called "all". I also confirmed StandardAnalyzer
> > processed my input string as tokens:
> >
> > company
> > picnic
> > great
> >
> > as I expected.
> >
> > But when I try to create Query by QueryParser
> >
> > Query q =3D QueryParser.parse("great!", "all", new StandardAnalyzer());
> >
> > I got the ParseException:
> >
> > ##########################
> > Encountered "<EOF>" at line 1, column 7.
> > Was expecting one of:
> >     "(" ...
> >     <QUOTED> ...
> >     <TERM> ...
> >     <PREFIXTERM> ...
> >     <WILDTERM> ...
> >     "[" ...
> >     "{" ...
> >     <NUMBER> ...
> > #########################
> >
> > Surely if I use "great" or some other special symbols
> > at the end like "great-" or "great+", QueryParser is OK.
> >
> > I would expect QueryParser can process "great!" to take
> > away "!" so this query is the same as "great"? Is this behavior
> > expected or is a bug?
> >
> > Thanks very much for helps,
> >
> > Lisheng Zhang, Software engineer
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 04:58:44 2005
Return-Path: <java-user-return-14850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54759 invoked from network); 10 Jun 2005 04:58:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 04:58:44 -0000
Received: (qmail 73104 invoked by uid 500); 10 Jun 2005 04:58:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73074 invoked by uid 500); 10 Jun 2005 04:58:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73060 invoked by uid 99); 10 Jun 2005 04:58:38 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web50608.mail.yahoo.com (HELO web50608.mail.yahoo.com) (206.190.38.95)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Jun 2005 21:58:36 -0700
Received: (qmail 92272 invoked by uid 60001); 10 Jun 2005 04:58:14 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=lPcBV6JEMtxU+40flSR81Na1TInSLflTQk3TNfG94TZiH1ZJnSkaxfvinKCtDfca72XUtALnktqNajq3ESdrbzbRwfJduI4E+lW0pFs+22oGKMUq0s7AwoIo8KeIZmMQcW4sR2zpyqgOVKS+UQXNeF18j0yT5jIiQT2biFDci6U=  ;
Message-ID: <20050610045814.92270.qmail@web50608.mail.yahoo.com>
Received: from [67.188.144.134] by web50608.mail.yahoo.com via HTTP; Thu, 09 Jun 2005 21:58:14 PDT
Date: Thu, 9 Jun 2005 21:58:14 -0700 (PDT)
From: Chris Collins <chris_j_collins@yahoo.com>
Subject: Re: Optimizing indexes with mulitiple processors?
To: java-user@lucene.apache.org, Bill Au <bill.w.au@gmail.com>
In-Reply-To: <20050610005238.82891.qmail@web50601.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

To follow up.  I was surprised to find that from the experiment of indexing 4k
documents to local disk (Dell PE with onboard RAID with 256MB cache). I got the
following data from my profile:

70 % time was spent in inverting the document
30 % in merge

Ok that part isnt surprising.  However only about 1% of 30% of the merge was
spent in the OS.flush call (not very IO bound at all with this controller). 
And almost all of the invert was in the StandardAnalyzer pegged in the javacc
generated code.  The profile was based upon duration and not cpu. The profiler
was JProbe.  I was using a lower case analyzer and this was a slightly hacked
lucene-1.4.3 source code line that I swapped out some of the synchronized data
structures (hashtable ->hashmap,  Vector->ArrayList).

<<ChRiS>>

--- Chris Collins <chris_j_collins@yahoo.com> wrote:

> I found with a fast RAID controller that I can easily be CPU bound, some of
> the
> io is related to latency.  You can hide the latency by having overlapping IO
> (you get that with multiple indexers going on at the same time).
> 
> I think there possibly could be more horsepower you can get out of the
> inverter
> and merge aspects of the indexing.  I am currently jprobeing this at the
> moment.
> 
> If your using high latency disks (such as a filer) during merge you may want
> to
> consider increasing the size of the buffers to reduce the amount of rpc's to
> the filer....however my previous attempts to change this failed.
> 
> C 
> 
> --- Bill Au <bill.w.au@gmail.com> wrote:
> 
> > Optimize is disk I/O bound.  So I am not sure what multiple CPUs will buy
> > you.
> > 
> > Bill
> > 
> > On 6/9/05, Kevin Burton <burton@rojo.com> wrote:
> > > Is it possible to get Lucene to do an index optimize on multiple
> > > processors?
> > > 
> > > Its a single threaded algorithm currently right?
> > > 
> > > Its a shame since I have a quad  machine but I'm only using 1/4th of the
> > > capacity.  Thats a heck of a performance hit.
> > > 
> > > Kevin
> > > 
> > > --
> > > 
> > > 
> > > Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com.
> > > See irc.freenode.net #rojo if you want to chat.
> > > 
> > > Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html
> > > 
> > >    Kevin A. Burton, Location - San Francisco, CA
> > >       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
> > > GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
> > > 
> > > 
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > 
> > >
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 06:29:52 2005
Return-Path: <java-user-return-14851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71946 invoked from network); 10 Jun 2005 06:29:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 06:29:52 -0000
Received: (qmail 7791 invoked by uid 500); 10 Jun 2005 06:29:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7748 invoked by uid 500); 10 Jun 2005 06:29:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7727 invoked by uid 99); 10 Jun 2005 06:29:43 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of burton@rojo.com designates 12.43.53.196 as permitted sender)
Received: from Unknown (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Jun 2005 23:29:41 -0700
Received: from [192.168.1.100] (dsl081-071-021.sfo1.dsl.speakeasy.net [64.81.71.21])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id j5A6TPT7013164
	for <java-user@lucene.apache.org>; Thu, 9 Jun 2005 23:29:26 -0700
Message-ID: <42A93345.9040404@rojo.com>
Date: Thu, 09 Jun 2005 23:29:25 -0700
From: Kevin Burton <burton@rojo.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Macintosh/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Optimizing indexes with mulitiple processors?
References: <42A89F36.1050900@rojo.com> <3b5f720305060914363281d64b@mail.gmail.com>
In-Reply-To: <3b5f720305060914363281d64b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Bill Au wrote:

>Optimize is disk I/O bound.  So I am not sure what multiple CPUs will buy you.
>  
>

Now on my system with large indexes... I often have the CPU at 100%...

Kevin

-- 


Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
See irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

   Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 06:31:13 2005
Return-Path: <java-user-return-14852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72074 invoked from network); 10 Jun 2005 06:31:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 06:31:13 -0000
Received: (qmail 10010 invoked by uid 500); 10 Jun 2005 06:31:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9977 invoked by uid 500); 10 Jun 2005 06:31:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9955 invoked by uid 99); 10 Jun 2005 06:31:03 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of burton@rojo.com designates 12.43.53.196 as permitted sender)
Received: from Unknown (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Jun 2005 23:31:02 -0700
Received: from [192.168.1.100] (dsl081-071-021.sfo1.dsl.speakeasy.net [64.81.71.21])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id j5A6Uk0n013222;
	Thu, 9 Jun 2005 23:30:46 -0700
Message-ID: <42A93391.6070205@rojo.com>
Date: Thu, 09 Jun 2005 23:30:41 -0700
From: Kevin Burton <burton@rojo.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Macintosh/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Bill Au <bill.w.au@gmail.com>
Subject: Re: Optimizing indexes with mulitiple processors?
References: <20050610045814.92270.qmail@web50608.mail.yahoo.com>
In-Reply-To: <20050610045814.92270.qmail@web50608.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Collins wrote:

>To follow up.  I was surprised to find that from the experiment of indexing 4k
>documents to local disk (Dell PE with onboard RAID with 256MB cache). I got the
>following data from my profile:
>
>70 % time was spent in inverting the document
>30 % in merge
>
>  
>
Oh.. yeah.. thats indexing.  I'm more interested in merging multiple 
indexes...

Kevin

-- 


Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
See irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

   Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 06:55:13 2005
Return-Path: <java-user-return-14853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77952 invoked from network); 10 Jun 2005 06:55:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 06:55:13 -0000
Received: (qmail 33738 invoked by uid 500); 10 Jun 2005 06:54:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33710 invoked by uid 500); 10 Jun 2005 06:54:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33696 invoked by uid 99); 10 Jun 2005 06:54:48 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web50604.mail.yahoo.com (HELO web50604.mail.yahoo.com) (206.190.38.91)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Jun 2005 23:54:42 -0700
Received: (qmail 55222 invoked by uid 60001); 10 Jun 2005 06:52:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:Cc:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=FVmVER47nkWd1hjAkp1YYDsYb5pr15atkjezDVJCgiwZ5HAg3yH+Nw0iZIH0kbK6our8h7Sho0De9YXHS218zWrv9BD9VXv4jybLVmAi/mchiLTJyIrYDvN5jk9WSf7pUNMqYfTRP75QhVSp/1FGj/MqBepoaPmMRNQrhzWUAUA=  ;
Message-ID: <20050610065256.55218.qmail@web50604.mail.yahoo.com>
Received: from [67.188.144.134] by web50604.mail.yahoo.com via HTTP; Thu, 09 Jun 2005 23:52:56 PDT
Date: Thu, 9 Jun 2005 23:52:56 -0700 (PDT)
From: Chris Collins <chris_j_collins@yahoo.com>
Subject: Re: Optimizing indexes with mulitiple processors?
To: java-user@lucene.apache.org
Cc: Bill Au <bill.w.au@gmail.com>
In-Reply-To: <42A93391.6070205@rojo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Well I am currently looking at merging too.  In my application merging will
occur against a filer (read as higher latency device).  I am currently working
on how to stage indices on local disk before moving to a filer.  Assume I must
move to a filer eventually for whatever crazzy reason I need to....dont ask it
aint funny :-}

In that case I have a different performance issue, that is that FSInputStream
and FSOutputStream inherit the buffer size of 1k from OS and IS  This would be
useful to increase to reduce the amount of RPC's to the filer when doing merges
..... assuming that reads and writes are sequential (CIFS supports a 64k block
and NFS supports upto I think 32k).  I haven't spent much time on this so far
so its not like I know its hard todo.  From preliminary experiments its obvious
that changing the OS buffersize is not the thing todo. 

If anyone has successfully increased the FSOutputStream and FSInputStream
buffers and got it not to blow up on array copies I would love to know the
short cut.

Chris

--- Kevin Burton <burton@rojo.com> wrote:

> Chris Collins wrote:
> 
> >To follow up.  I was surprised to find that from the experiment of indexing
> 4k
> >documents to local disk (Dell PE with onboard RAID with 256MB cache). I got
> the
> >following data from my profile:
> >
> >70 % time was spent in inverting the document
> >30 % in merge
> >
> >  
> >
> Oh.. yeah.. thats indexing.  I'm more interested in merging multiple 
> indexes...
> 
> Kevin
> 
> -- 
> 
> 
> Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
> See irc.freenode.net #rojo if you want to chat.
> 
> Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html
> 
>    Kevin A. Burton, Location - San Francisco, CA
>       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
> GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 07:04:19 2005
Return-Path: <java-user-return-14854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79497 invoked from network); 10 Jun 2005 07:04:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 07:04:19 -0000
Received: (qmail 41921 invoked by uid 500); 10 Jun 2005 07:04:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41898 invoked by uid 500); 10 Jun 2005 07:04:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41881 invoked by uid 99); 10 Jun 2005 07:04:02 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web50605.mail.yahoo.com (HELO web50605.mail.yahoo.com) (206.190.38.92)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 10 Jun 2005 00:04:01 -0700
Received: (qmail 43059 invoked by uid 60001); 10 Jun 2005 06:56:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=2CCiCluKqjobXcljJUZH/ocD7ancY66SVMNI0J50O5Bg8zyhg+KPZJtbHpgH+YKz9i3LNgsrfywp4HdUscXzxTOkN8tdXHlFTes0g++QoDl9LoypaZTgEwMWWY05p8potBXqYNELY1WExWJZBtR4D4aBlWZP4/dEugAsJhV5Y+k=  ;
Message-ID: <20050610065634.43057.qmail@web50605.mail.yahoo.com>
Received: from [67.188.144.134] by web50605.mail.yahoo.com via HTTP; Thu, 09 Jun 2005 23:56:34 PDT
Date: Thu, 9 Jun 2005 23:56:34 -0700 (PDT)
From: Chris Collins <chris_j_collins@yahoo.com>
Subject: Re: Optimizing indexes with mulitiple processors?
To: java-user@lucene.apache.org
In-Reply-To: <42A93345.9040404@rojo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Kevin I would be curious to know more about your merging issues.  As I
mentioned I am concerned about merge time and in my case its against a filer
that of course have high latency.  The other issue is that I effectively index
things with a primary key.  I need to ensure an efficient way of preventing old
records from trampling on new records , this occurs due to potential out of
order set of writes to the index from multiple nodes in a processing farm.

C

--- Kevin Burton <burton@rojo.com> wrote:

> Bill Au wrote:
> 
> >Optimize is disk I/O bound.  So I am not sure what multiple CPUs will buy
> you.
> >  
> >
> 
> Now on my system with large indexes... I often have the CPU at 100%...
> 
> Kevin
> 
> -- 
> 
> 
> Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
> See irc.freenode.net #rojo if you want to chat.
> 
> Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html
> 
>    Kevin A. Burton, Location - San Francisco, CA
>       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
> GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 13:32:21 2005
Return-Path: <java-user-return-14855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2025 invoked from network); 10 Jun 2005 13:32:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 13:32:21 -0000
Received: (qmail 70276 invoked by uid 500); 10 Jun 2005 13:32:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70168 invoked by uid 500); 10 Jun 2005 13:32:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70153 invoked by uid 99); 10 Jun 2005 13:32:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of bill.w.au@gmail.com designates 64.233.184.197 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.197)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Jun 2005 06:32:06 -0700
Received: by wproxy.gmail.com with SMTP id 50so574413wri
        for <java-user@lucene.apache.org>; Fri, 10 Jun 2005 06:31:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=n664HwKMk0ycbA1R/1ZXdBCyhelLRtLifvqolYDJRMW0YHSujf5q82MYiO+vrrBDTVP9+EzGHXaJDaJGV+NuJ0Cp2BfvHVbxYmTs/vPUY0MQjfSrHaa/DefDKJfoHebOyrqnkCN7GuEKMj8hPqGo9OIoMDDHKHXiYVOuhEHwKRI=
Received: by 10.54.50.79 with SMTP id x79mr925306wrx;
        Fri, 10 Jun 2005 05:31:18 -0700 (PDT)
Received: by 10.54.52.21 with HTTP; Fri, 10 Jun 2005 05:31:18 -0700 (PDT)
Message-ID: <3b5f7203050610053115a77ea@mail.gmail.com>
Date: Fri, 10 Jun 2005 08:31:18 -0400
From: Bill Au <bill.w.au@gmail.com>
Reply-To: Bill Au <bill.w.au@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Optimizing indexes with mulitiple processors?
In-Reply-To: <42A93345.9040404@rojo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42A89F36.1050900@rojo.com>
	 <3b5f720305060914363281d64b@mail.gmail.com>
	 <42A93345.9040404@rojo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That's not true in my case.  The CPU never went over 50%.  I/O wait is
often greater
the CPU and can be as high as 90%.

Bill

On 6/10/05, Kevin Burton <burton@rojo.com> wrote:
> Bill Au wrote:
>=20
> >Optimize is disk I/O bound.  So I am not sure what multiple CPUs will bu=
y you.
> >
> >
>=20
> Now on my system with large indexes... I often have the CPU at 100%...
>=20
> Kevin
>=20
> --
>=20
>=20
> Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com.
> See irc.freenode.net #rojo if you want to chat.
>=20
> Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html
>=20
>    Kevin A. Burton, Location - San Francisco, CA
>       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
> GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 13:44:19 2005
Return-Path: <java-user-return-14856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15305 invoked from network); 10 Jun 2005 13:44:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 13:44:19 -0000
Received: (qmail 16289 invoked by uid 500); 10 Jun 2005 13:43:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16260 invoked by uid 500); 10 Jun 2005 13:43:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15724 invoked by uid 99); 10 Jun 2005 13:43:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from pb-exchcon2.scansoft.com (HELO pb-exchcon2.scansoft.com) (198.71.67.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Jun 2005 06:43:52 -0700
Received: by pb-exchcon2.pb.scansoft.com with Internet Mail Service (5.5.2658.27)
	id <MRS3FQB0>; Fri, 10 Jun 2005 08:57:36 -0400
Message-ID: <FBA9F803D33470489B9B4676A6B09F0B0152561E@mt-exch1.montreal.speechworks.com>
From: "Robichaud, Jean-Philippe" <Jean-Philippe.Robichaud@scansoft.com>
To: java-user@lucene.apache.org
Subject: SimilarityDelegator examples ?
Date: Fri, 10 Jun 2005 08:57:57 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2658.27)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C56DBC.060F0DBA"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C56DBC.060F0DBA
Content-Type: text/plain

Hi Everyone, 

 

 I've been using Lucene a lot and I would like to know how the
SimilarityDelegator should be used.  I would like to override only the
lengthNorm member of the DefaultSimilarity and I understand that this is
exactly the purpose of SimilarityDelegator ?  Am I right? Does this class
have another usage?  A simple code example would be fine!

 

Thanks, 

 

Jp

 


------_=_NextPart_001_01C56DBC.060F0DBA--

From java-user-return-14857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 13:51:00 2005
Return-Path: <java-user-return-14857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20203 invoked from network); 10 Jun 2005 13:50:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 13:50:59 -0000
Received: (qmail 49666 invoked by uid 500); 10 Jun 2005 13:50:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49624 invoked by uid 500); 10 Jun 2005 13:50:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49602 invoked by uid 99); 10 Jun 2005 13:50:49 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web50608.mail.yahoo.com (HELO web50608.mail.yahoo.com) (206.190.38.95)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 10 Jun 2005 06:50:47 -0700
Received: (qmail 17075 invoked by uid 60001); 10 Jun 2005 06:43:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=V55uJ5xo47ZmZNdVT1HwT+w4PyFaVpXLm3eY5HO1gbJ7No7ghSSTRluKylgLJ4CYov9SHGirGZhBu28fRHpt4ljVuyafxMxzLC09Zsz6Mgt2CaF59rIx7UkCr57g5wkNiEWGkB9YssqKGnOh4wcKDenxLy/0mHvhPhXktEHyKl8=  ;
Message-ID: <20050610064349.17073.qmail@web50608.mail.yahoo.com>
Received: from [67.188.144.134] by web50608.mail.yahoo.com via HTTP; Thu, 09 Jun 2005 23:43:49 PDT
Date: Thu, 9 Jun 2005 23:43:49 -0700 (PDT)
From: Chris Collins <chris_j_collins@yahoo.com>
Subject: Re: Optimizing indexes with mulitiple processors?
To: java-user@lucene.apache.org
In-Reply-To: <42A93345.9040404@rojo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes, that would line up with being pretty much cpu bound.  So if you were to
have 2 xeon's with HT then you kinda have almost 4 resources (threads) of
execution you could take advantage of.

So from my current tests where I have a multiple threads producing work for an
index and one index writer (one thread doing addDocument), I am seeing that I
am cpu bound on the indexer. Since I am on a dual xeon with HT, I could if I
was using 4 indices improve my throughput by > 1x but < 4x.

C 

--- Kevin Burton <burton@rojo.com> wrote:

> Bill Au wrote:
> 
> >Optimize is disk I/O bound.  So I am not sure what multiple CPUs will buy
> you.
> >  
> >
> 
> Now on my system with large indexes... I often have the CPU at 100%...
> 
> Kevin
> 
> -- 
> 
> 
> Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
> See irc.freenode.net #rojo if you want to chat.
> 
> Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html
> 
>    Kevin A. Burton, Location - San Francisco, CA
>       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
> GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 14:58:42 2005
Return-Path: <java-user-return-14858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67356 invoked from network); 10 Jun 2005 14:58:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 14:58:42 -0000
Received: (qmail 41012 invoked by uid 500); 10 Jun 2005 14:58:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40983 invoked by uid 500); 10 Jun 2005 14:58:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40946 invoked by uid 99); 10 Jun 2005 14:58:33 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 66-7-233-83.scalix.com (HELO hagrid.scalix.local) (66.7.233.83)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Jun 2005 07:58:31 -0700
Received: from hagrid.scalix.local (localhost.localdomain [127.0.0.1])
	by hagrid.scalix.local (8.12.11/8.12.11) with ESMTP id j5A7LniW025435
	for <java-user@lucene.apache.org>; Fri, 10 Jun 2005 00:21:49 -0700
Received: from hagrid.scalix.local (root@localhost)
	by hagrid.scalix.local (8.12.11/8.12.11/Submit) with ESMTP id j5A7LnwJ025433
	for <java-user@lucene.apache.org>; Fri, 10 Jun 2005 00:21:49 -0700
Received: from [10.11.108.17] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 9.2.1.27)
    via ESMTP; Fri, 10 Jun 2005 08:21:47 +0100 (BST)
Date: Fri, 10 Jun 2005 08:21:46 +0100
From: John Haxby <jch@scalix.com>
Sender: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <42A93F8A.9080106@scalix.com>
In-Reply-To: <20050610045814.92270.qmail@web50608.mail.yahoo.com>
References: <20050610045814.92270.qmail@web50608.mail.yahoo.com>
Subject: Re: Optimizing indexes with mulitiple processors?
x-scalix-Hops: 3
User-Agent: Mozilla Thunderbird  (X11/20050322)
X-Accept-Language: en-us, en
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1";
	format="flowed"
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Collins wrote:

>Ok that part isnt surprising.  However only about 1% of 30% of the merge was
>spent in the OS.flush call (not very IO bound at all with this controller).
>  
>
On Linux, at least, measuring the time taken in OS.flush is not a good 
way to determine if you're I/O bound -- all that does is transfer the 
data to the kernel.   Later, possibly much later, the kernel will 
actually write the data to the disk.

The upshot of this is that if the size of the index is around the size 
of physical memory in the system, optimizing will appear CPU bound.   
Once the index exceeds the size of physical memory, you'll see the 
effects of I/O.   OS.flush will still probably be ver quick, but you'll 
see a lot of I/O wait if you run, say, top.

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 15:28:41 2005
Return-Path: <java-user-return-14859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82206 invoked from network); 10 Jun 2005 15:28:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 15:28:41 -0000
Received: (qmail 49477 invoked by uid 500); 10 Jun 2005 15:28:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49397 invoked by uid 500); 10 Jun 2005 15:28:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49375 invoked by uid 99); 10 Jun 2005 15:28:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from www.trekspace.com (HELO trekspace.trekspace.com) (207.245.223.231)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Jun 2005 08:28:27 -0700
Received: from trekspace.trekspace.com (trekspace@trekspace.trekspace.com [192.168.2.234])
	by trekspace.trekspace.com (8.12.3/8.12.3/Debian-7.1) with ESMTP id j5AFSDZZ017345
	for <java-user@lucene.apache.org>; Fri, 10 Jun 2005 11:28:13 -0400
Message-ID: <3795834713779942874HVPYVRVDZA.tlai@trekspace.com>
Date: Fri, 10 Jun 2005 11:28:13 -0400 (EDT)
From: Terence Lai <tlai@trekspace.com>
Reply-To: Terence Lai <tlai@trekspace.com>
To: java-user@lucene.apache.org
Subject: Question on lucene sandbox highlighter
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: Treklogic MailTool v1.6 http://www.treklogic.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

I have a couple questions regarding to the Highlighter.

Question 1:
===========
I download the highlighter source files. When I compile the code, I got the following error:

----------------
org/apache/lucene/search/highlight/TokenSources.java [19:1] cannot resolve symbol
symbol  : class TermVectorOffsetInfo 
location: package index
import org.apache.lucene.index.TermVectorOffsetInfo;
----------------

Note that I have lucene 1.4.2 jar file in my class path. However, it does not have org.apache.lucene.index.TermVectorOffsetInfo. Does anyone know whether I am missing some other jar files?


Question 2:
===========
I use lucene to search HTML document. Before I create the the seach index, I used another open source parser to remove all the HTML tag from the search field contents so that the HTML tag will not be part of the searchable values.

Now, I would like to apply the highlighter to my original HTML document. Is there any way for me to ignore the HTML tag while I perform the hightlight. For example, my search criteria is "html". I don't what the highlighter to highlight "<HTML>" tag.


Thanks,
Terence
   




----------------------------------------------------------
Get your free email account from http://www.trekspace.com
          Your Internet Virtual Desktop!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 15:47:14 2005
Return-Path: <java-user-return-14860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95168 invoked from network); 10 Jun 2005 15:47:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 15:47:13 -0000
Received: (qmail 26423 invoked by uid 500); 10 Jun 2005 15:47:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26391 invoked by uid 500); 10 Jun 2005 15:47:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26341 invoked by uid 99); 10 Jun 2005 15:47:05 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web50607.mail.yahoo.com (HELO web50607.mail.yahoo.com) (206.190.38.94)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 10 Jun 2005 08:47:03 -0700
Received: (qmail 59023 invoked by uid 60001); 10 Jun 2005 15:46:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Ib16HNjwXDzl4ugJgRfHRlQ+gnEn/OKDhnJAuOr6GhsQv9rz+BPCvFBzqh+8MzWZMI5MqYWvKpphr9spIwyfpAsRvcKtWwaWkLeqhq/r4YoBFWpl2Eue7eN6CHwvPXcZm92qtbZy1YdpzSkBSi5mVzVPG+arRrOqpoS+rAZz7HQ=  ;
Message-ID: <20050610154643.59021.qmail@web50607.mail.yahoo.com>
Received: from [67.188.144.134] by web50607.mail.yahoo.com via HTTP; Fri, 10 Jun 2005 08:46:43 PDT
Date: Fri, 10 Jun 2005 08:46:43 -0700 (PDT)
From: Chris Collins <chris_j_collins@yahoo.com>
Subject: Re: Optimizing indexes with mulitiple processors?
To: java-user@lucene.apache.org
In-Reply-To: <42A93F8A.9080106@scalix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi John, your comments are correct.  But based on the fact we know on our box
we have almost 80MB sustainable bandwidth and very low latency to disk per
second, and observing that the io we are doing in lucene is small in comparison
a 1 second I am reasonably confident that this time spent is not far out (for
this run).  

As I may have mentioned before, in my case we have reasonably fast hardware
raid.  At that point the bottlenecks of course change.  We also have the case
where we write to a filer which has good bandwidth but high latency.  Here we
see that merge is io bound as you would expect.  Thats why I assume changing
the buffer sizes of the FS streams could help assuming the merge operations
read and write to the segments in a linear fashionin this case, the latency is
not really a function of the disks, but a function of the latency in the rpc
between the client (indexer) and the filer.  By increasing the buffer sizes we
would reduce the amount of RPCs. 

>From an IO bound point of view one needs to consider if you have saturated the
device or you are just stuck waiting for the disk to rotate around.  Long gone
is escalator algorithm as the preferred disk optimization of seagate :-}, disk
can take many instructions and re-order them to minimize latency issues. If its
a latency issue and not necessarily bandwidth then using overlapping io can
improve throughput (splitting the index and having multiple writer threads
would give you that). In fact in my silly filer example having multiple writers
does show good effect.  Of course this depends on if you can finagle your
application to allow you to split the indices.

Further I have done longer runs to plot throughput over time (16M doc crawls). 
I only profiled 4k docs since I didnt want to wait forever with JProbe.  Not
sure what the correct jargon is here so excuse my description.  The in memory
objects were merged out to disk but we didnt get the second order effect of the
maybeMerge function finding enough segments on that level to trigger the
merging of multiple segments for the next tier (segments * mergefactor). 
Indexer throughput is not of course constant, over time the time to index one
document does increase when you take into account the cost of the merges.  But
due to the pyramid effect of how the merger works, the larger order merges of
course happen less and less.  

Back to my observations.  From the CPU part of indexing, the inversion aspect
is dwarfed by the standard tokenizer.  My hat off to Doug (what is hogging the
cpu is auto generated code :-} )Given multiple cores / ht/ smp your certainly
can capitalize on them if you so wish to write the code.  Not all IO bound
problems are created equal, if it is merely latency then you still have room to
improve throughput if you massage your indexing approach.  Using a single
indexing thread and seeing your io bound should not be a reason to give up :-} 

As you can tell I have two indexing worlds, one where my disk is fast (CPU
Bound) and one where it is slow (IO Bound).  I have to capitalize on the
effects of both to get my job done and each of them have distinctive
challenges.

Regards

Chris
--- John Haxby <jch@scalix.com> wrote:

> Chris Collins wrote:
> 
> >Ok that part isnt surprising.  However only about 1% of 30% of the merge was
> >spent in the OS.flush call (not very IO bound at all with this controller).
> >  
> >
> On Linux, at least, measuring the time taken in OS.flush is not a good 
> way to determine if you're I/O bound -- all that does is transfer the 
> data to the kernel.   Later, possibly much later, the kernel will 
> actually write the data to the disk.
> 
> The upshot of this is that if the size of the index is around the size 
> of physical memory in the system, optimizing will appear CPU bound.   
> Once the index exceeds the size of physical memory, you'll see the 
> effects of I/O.   OS.flush will still probably be ver quick, but you'll 
> see a lot of I/O wait if you run, say, top.
> 
> jch
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 16:10:07 2005
Return-Path: <java-user-return-14861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10024 invoked from network); 10 Jun 2005 16:10:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 16:10:06 -0000
Received: (qmail 97069 invoked by uid 500); 10 Jun 2005 16:09:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97004 invoked by uid 500); 10 Jun 2005 16:09:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96982 invoked by uid 99); 10 Jun 2005 16:09:57 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.usask.ca (HELO mail.usask.ca) (128.233.192.250)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Jun 2005 09:09:55 -0700
Received: from conversion-daemon.mail.usask.ca by mail.usask.ca
 (iPlanet Messaging Server 5.2 HotFix 1.21 (built Sep  8 2003))
 id <0IHV00E01M5IGP@mail.usask.ca> (original mail from mfw127@mail.usask.ca)
 for java-user@lucene.apache.org; Fri, 10 Jun 2005 10:09:19 -0600 (CST)
Received: from [128.233.104.117] (dolphin.usask.ca [128.233.104.117])
 by mail.usask.ca
 (iPlanet Messaging Server 5.2 HotFix 1.21 (built Sep  8 2003)) with ESMTPA id
 <0IHV00K08M7J6B@mail.usask.ca> for java-user@lucene.apache.org; Fri,
 10 Jun 2005 10:09:19 -0600 (CST)
Date: Fri, 10 Jun 2005 10:11:01 -0600
From: Mike Winter <mfw127@mail.usask.ca>
Subject: Usenet Bridge or LSA Support?
To: java-user@lucene.apache.org
Message-id: <42A9BB95.6040808@mail.usask.ca>
Organization: University of Saskatchewan
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040804
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Pardon me if this has been asked before, but I was wondering if there 
exists a Lucene -> Usenet bridge or support for latent semantic 
scoring?  Thanks for any information.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 16:19:04 2005
Return-Path: <java-user-return-14862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16105 invoked from network); 10 Jun 2005 16:19:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 16:19:04 -0000
Received: (qmail 28111 invoked by uid 500); 10 Jun 2005 16:18:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28077 invoked by uid 500); 10 Jun 2005 16:18:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28059 invoked by uid 99); 10 Jun 2005 16:18:56 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from smtpauth05.mail.atl.earthlink.net (HELO smtpauth05.mail.atl.earthlink.net) (209.86.89.65)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Jun 2005 09:18:54 -0700
Received: from [69.235.198.125] (helo=[172.16.1.2])
	by smtpauth05.mail.atl.earthlink.net with asmtp (TLSv1:RC4-SHA:128)
	(Exim 4.34)
	id 1DgmDN-0002rU-2w
	for java-user@lucene.apache.org; Fri, 10 Jun 2005 12:18:37 -0400
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050610065256.55218.qmail@web50604.mail.yahoo.com>
References: <20050610065256.55218.qmail@web50604.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FC0A135B-E65B-4685-B883-B36536EACBC6@corp.earthlink.net>
Content-Transfer-Encoding: 7bit
From: "Peter A. Friend" <octavian@corp.earthlink.net>
Subject: Re: Optimizing indexes with mulitiple processors?
Date: Fri, 10 Jun 2005 09:18:35 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-ELNK-Trace: e38a400786bfeea01aa676d7e74259b7b3291a7d08dfec799cb1ae20476228691ebaafbf61b976ae350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 69.235.198.125
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 9, 2005, at 11:52 PM, Chris Collins wrote:

> In that case I have a different performance issue, that is that  
> FSInputStream
> and FSOutputStream inherit the buffer size of 1k from OS and IS   
> This would be
> useful to increase to reduce the amount of RPC's to the filer when  
> doing merges
> ..... assuming that reads and writes are sequential (CIFS supports  
> a 64k block
> and NFS supports upto I think 32k).  I haven't spent much time on  
> this so far
> so its not like I know its hard todo.  From preliminary experiments  
> its obvious
> that changing the OS buffersize is not the thing todo.
>
> If anyone has successfully increased the FSOutputStream and  
> FSInputStream
> buffers and got it not to blow up on array copies I would love to  
> know the
> short cut.

I just started up with Lucene, and I have been looking at the NFS  
issues. Since the OS doesn't report the block size in use by the  
Netapp, EMC, whatever, you need to tweak it manually. I found this in  
src/java/org/apache/lucene/store/OutputStream.java:

/** Abstract class for output to a file in a Directory.  A random- 
access output
* stream.  Used for all Lucene index output operations.
* @see Directory
* @see InputStream
*/
public abstract class OutputStream {
   static final int BUFFER_SIZE = 1024;

I changed that value to 8k, and based on the truss output from an  
index run, it is working. Haven't gotten much beyond that to see if  
it causes problems elsewhere. The value also needs to be altered on  
the read end of things. Ideally, this will be made settable via a  
system property.

Peter


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 16:33:34 2005
Return-Path: <java-user-return-14863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24609 invoked from network); 10 Jun 2005 16:33:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 16:33:33 -0000
Received: (qmail 70188 invoked by uid 500); 10 Jun 2005 16:33:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70166 invoked by uid 500); 10 Jun 2005 16:33:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70145 invoked by uid 99); 10 Jun 2005 16:33:25 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web50607.mail.yahoo.com (HELO web50607.mail.yahoo.com) (206.190.38.94)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 10 Jun 2005 09:33:22 -0700
Received: (qmail 74857 invoked by uid 60001); 10 Jun 2005 16:33:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=TTg0X2GDc4QVd6zAwlzaXhALZYSXqJKUNg08zdcek29ydOWVF7GDVXbtIWgm0i57UHOB8Glp5hq2bZriiOlzH5OnS0/QfIMqf5dbXbSaTwlBszk5AIUT7lABr/+lPeMyu4nEo2w1OjsymLkD548+KanBcxzzHhhsJ4QL4+bG0pU=  ;
Message-ID: <20050610163311.74855.qmail@web50607.mail.yahoo.com>
Received: from [67.188.144.134] by web50607.mail.yahoo.com via HTTP; Fri, 10 Jun 2005 09:33:11 PDT
Date: Fri, 10 Jun 2005 09:33:11 -0700 (PDT)
From: Chris Collins <chris_j_collins@yahoo.com>
Subject: Re: Optimizing indexes with mulitiple processors?
To: java-user@lucene.apache.org
In-Reply-To: <FC0A135B-E65B-4685-B883-B36536EACBC6@corp.earthlink.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How many documents did you try to index?  I am using a relatively large
minMergeDoc that causes me to run out of memory when I make such a change. (I
am using 1/2 gb of heap btw).  I believe changing it in the outputstream object
means that a lot of in memory only objects use that size too...I assume that
the real bang for the buck is for the FSOutputStream and FSInputStream. 
Unravelling that case drops me into array copy issues that I have to debug.

I dont know I would of used truss in this regard, this only points out what
size hit the kernel not what went over the wire.  I would suggest using
ethereal to ensure thats how its ending up on the wire.  As for what goes over
the wire, thats something the cifs / nfs client negotiates with the server.  I
believe NetApp for instance supports upto 32k on nfs and almost 64k with cifs. 


Regards

<<ChRiS>>

--- "Peter A. Friend" <octavian@corp.earthlink.net> wrote:

> 
> On Jun 9, 2005, at 11:52 PM, Chris Collins wrote:
> 
> > In that case I have a different performance issue, that is that  
> > FSInputStream
> > and FSOutputStream inherit the buffer size of 1k from OS and IS   
> > This would be
> > useful to increase to reduce the amount of RPC's to the filer when  
> > doing merges
> > ..... assuming that reads and writes are sequential (CIFS supports  
> > a 64k block
> > and NFS supports upto I think 32k).  I haven't spent much time on  
> > this so far
> > so its not like I know its hard todo.  From preliminary experiments  
> > its obvious
> > that changing the OS buffersize is not the thing todo.
> >
> > If anyone has successfully increased the FSOutputStream and  
> > FSInputStream
> > buffers and got it not to blow up on array copies I would love to  
> > know the
> > short cut.
> 
> I just started up with Lucene, and I have been looking at the NFS  
> issues. Since the OS doesn't report the block size in use by the  
> Netapp, EMC, whatever, you need to tweak it manually. I found this in  
> src/java/org/apache/lucene/store/OutputStream.java:
> 
> /** Abstract class for output to a file in a Directory.  A random- 
> access output
> * stream.  Used for all Lucene index output operations.
> * @see Directory
> * @see InputStream
> */
> public abstract class OutputStream {
>    static final int BUFFER_SIZE = 1024;
> 
> I changed that value to 8k, and based on the truss output from an  
> index run, it is working. Haven't gotten much beyond that to see if  
> it causes problems elsewhere. The value also needs to be altered on  
> the read end of things. Ideally, this will be made settable via a  
> system property.
> 
> Peter
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 16:47:36 2005
Return-Path: <java-user-return-14864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31380 invoked from network); 10 Jun 2005 16:47:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 16:47:36 -0000
Received: (qmail 13635 invoked by uid 500); 10 Jun 2005 16:47:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13601 invoked by uid 500); 10 Jun 2005 16:47:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13588 invoked by uid 99); 10 Jun 2005 16:47:27 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from main.gmane.org (HELO ciao.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Jun 2005 09:47:26 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DglqI-0007F3-1Y
	for java-user@lucene.apache.org; Fri, 10 Jun 2005 17:54:46 +0200
Received: from adsl-68-94-44-28.dsl.rcsntx.swbell.net ([68.94.44.28])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 10 Jun 2005 17:54:46 +0200
Received: from avrootshell by adsl-68-94-44-28.dsl.rcsntx.swbell.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 10 Jun 2005 17:54:46 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  avrootshell <avrootshell@roomity.com>
Subject:  view index file
Date:  Fri, 10 Jun 2005 10:58:25 -0500
Lines: 8
Message-ID: <d8cd3p$so6$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: adsl-68-94-44-28.dsl.rcsntx.swbell.net
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

   I'm curious to know,if there is any way to view the .cfs file(the 
index file created).

Someone plz shred some light on this.

Tia.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 16:55:01 2005
Return-Path: <java-user-return-14865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35071 invoked from network); 10 Jun 2005 16:55:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 16:55:01 -0000
Received: (qmail 38172 invoked by uid 500); 10 Jun 2005 16:54:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38061 invoked by uid 500); 10 Jun 2005 16:54:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37983 invoked by uid 99); 10 Jun 2005 16:54:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.bayt.net (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Jun 2005 09:54:51 -0700
Received: from [192.168.0.2] [217.165.86.47] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id A86EE1007C; Fri, 10 Jun 2005 13:05:50 -0400
Message-ID: <42A9C5C4.3040907@bayt.net>
Date: Fri, 10 Jun 2005 20:54:28 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: view index file
References: <d8cd3p$so6$1@sea.gmane.org>
In-Reply-To: <d8cd3p$so6$1@sea.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Declude-Sender: nsh@bayt.net [192.168.0.2]
X-Declude-Spoolname: DC86A00E1007CCA1F.SMD
X-Declude-Note: Scanned by Declude 2.0.6 (http://www.declude.com/x-note.htm) for spam.
X-Declude-Scan: Score [0] at 13:05:51 on 10 Jun 2005
X-Declude-Tests: Whitelisted
X-Country-Chain: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The one browsing utility I've come across to browse through Lucene 
Indecies was Luke (I use it successfully to debug index issues) check it 
out, http://www.getopt.org/luke/

Hope this answers your question

Nader Henein

avrootshell wrote:

> Hi,
>
>   I'm curious to know,if there is any way to view the .cfs file(the 
> index file created).
>
> Someone plz shred some light on this.
>
> Tia.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>

-- 
Nader S. Henein
Senior Applications Developer

Bayt.com





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 17:01:40 2005
Return-Path: <java-user-return-14866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37884 invoked from network); 10 Jun 2005 17:01:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 17:01:39 -0000
Received: (qmail 57042 invoked by uid 500); 10 Jun 2005 17:01:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57017 invoked by uid 500); 10 Jun 2005 17:01:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56970 invoked by uid 99); 10 Jun 2005 17:01:34 -0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FORGED_YAHOO_RCVD,FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web32113.mail.mud.yahoo.com (HELO web32113.mail.mud.yahoo.com) (68.142.207.127)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 10 Jun 2005 10:01:32 -0700
Received: (qmail 80829 invoked by uid 60001); 10 Jun 2005 17:01:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=iEYPIAftg0ZuYEBqR8z6Xioc4E33rtBNKQ0QMQW0OAW7UaHF6twV033PVUgehUkT8BKIEljyDfxSi2TyB/2pEp86T7i3z3YdPScuUtkJ57mCf5isYeUVcYgrwKIArvR0LsrF1aPC02WEc3AZ52AwDypLS/dvj2hv2UNlnELiRdw=  ;
Message-ID: <20050610170117.80827.qmail@web32113.mail.mud.yahoo.com>
Received: from [206.13.63.69] by web32113.mail.mud.yahoo.com via HTTP; Fri, 10 Jun 2005 10:01:17 PDT
Date: Fri, 10 Jun 2005 10:01:17 -0700 (PDT)
From: Aalap Parikh <aloo77@yahoo.com>
Subject: Re: view index file
To: java-user@lucene.apache.org
In-Reply-To: <d8cd3p$so6$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Use Luke. It's an excellent tool and everybody in the
Lucene community uses that.

http://www.getopt.org/luke/

Aalap.

--- avrootshell <avrootshell@roomity.com> wrote:

> Hi,
> 
>    I'm curious to know,if there is any way to view
> the .cfs file(the 
> index file created).
> 
> Someone plz shred some light on this.
> 
> Tia.
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



		
__________________________________ 
Discover Yahoo! 
Stay in touch with email, IM, photo sharing and more. Check it out! 
http://discover.yahoo.com/stayintouch.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 17:09:37 2005
Return-Path: <java-user-return-14867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40135 invoked from network); 10 Jun 2005 17:09:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 17:09:37 -0000
Received: (qmail 75230 invoked by uid 500); 10 Jun 2005 17:09:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75192 invoked by uid 500); 10 Jun 2005 17:09:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75156 invoked by uid 99); 10 Jun 2005 17:09:28 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from smtpauth09.mail.atl.earthlink.net (HELO smtpauth09.mail.atl.earthlink.net) (209.86.89.69)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Jun 2005 10:09:27 -0700
Received: from [69.227.26.161] (helo=[69.227.26.161])
	by smtpauth09.mail.atl.earthlink.net with asmtp (TLSv1:RC4-SHA:128)
	(Exim 4.34)
	id 1Dgn0R-0004ig-58
	for java-user@lucene.apache.org; Fri, 10 Jun 2005 13:09:19 -0400
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050610163311.74855.qmail@web50607.mail.yahoo.com>
References: <20050610163311.74855.qmail@web50607.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <62F51FD5-E137-49F2-AD08-AE5577B51972@corp.earthlink.net>
Content-Transfer-Encoding: 7bit
From: "Peter A. Friend" <octavian@corp.earthlink.net>
Subject: Re: Optimizing indexes with mulitiple processors?
Date: Fri, 10 Jun 2005 10:09:16 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-ELNK-Trace: e38a400786bfeea01aa676d7e74259b7b3291a7d08dfec79d0fba56b4bb3a8194a0fd1ce717cc7ce350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 69.227.26.161
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 10, 2005, at 9:33 AM, Chris Collins wrote:

> How many documents did you try to index?

Only about 4000 at the moment.

>   I am using a relatively large
> minMergeDoc that causes me to run out of memory when I make such a  
> change. (I
> am using 1/2 gb of heap btw).

I was running out of memory as well until I gave Java a larger heap  
to work with. I am assuming that a dedicated indexing machine (as  
well as search) is going to need a mountain of memory. I figure I  
will be giving Java gigs to play with.

> I believe changing it in the outputstream object
> means that a lot of in memory only objects use that size too.

This I need to look into. At a guess, I would think that there would  
be an OutputStream object for each open segment, and each file in  
that segment. A consolidated index *might* use less but of course we  
are trying to improve performance here, and the consolidated index  
does incur a cost. Assuming 10 segments and 10 files within each  
segment, that's 100 OutputStream objects or 809,600 bytes. That'll  
grow quickly with merge tweaks. Those larger writes do save a bunch  
of system calls and make (maybe) better use of your filers block  
size. This grows quickly with maxMerge tweaks. Of course this could  
be utterly incorrect, I need to look into this a bit more carefully.

> I dont know I would of used truss in this regard, this only points  
> out what
> size hit the kernel not what went over the wire.  I would suggest  
> using
> ethereal to ensure thats how its ending up on the wire.

True, hadn't gotten that far yet. :-)

Peter



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 17:51:47 2005
Return-Path: <java-user-return-14868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61206 invoked from network); 10 Jun 2005 17:51:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 17:51:46 -0000
Received: (qmail 93691 invoked by uid 500); 10 Jun 2005 17:51:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93670 invoked by uid 500); 10 Jun 2005 17:51:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93657 invoked by uid 99); 10 Jun 2005 17:51:38 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of burton@rojo.com designates 12.43.53.196 as permitted sender)
Received: from Unknown (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Jun 2005 10:51:35 -0700
Received: from [192.168.1.146] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id j5AHp9Mc026558;
	Fri, 10 Jun 2005 10:51:09 -0700
Message-ID: <42A9D308.8010908@rojo.com>
Date: Fri, 10 Jun 2005 10:51:04 -0700
From: Kevin Burton <burton@rojo.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Macintosh/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Bill Au <bill.w.au@gmail.com>
Subject: Re: Optimizing indexes with mulitiple processors?
References: <20050610065256.55218.qmail@web50604.mail.yahoo.com>
In-Reply-To: <20050610065256.55218.qmail@web50604.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Collins wrote:

>Well I am currently looking at merging too.  In my application merging will
>occur against a filer (read as higher latency device).  I am currently working
>on how to stage indices on local disk before moving to a filer.  Assume I must
>move to a filer eventually for whatever crazzy reason I need to....dont ask it
>aint funny :-}
>
>In that case I have a different performance issue, that is that FSInputStream
>and FSOutputStream inherit the buffer size of 1k from OS and IS  This would be
>useful to increase to reduce the amount of RPC's to the filer when doing merges
>..... assuming that reads and writes are sequential (CIFS supports a 64k block
>and NFS supports upto I think 32k). 
>
Yeah.. I already did this actually ... on local disks the performance 
benefit wasn't noticable.  The variables are  private/final ... I made 
them public and non-final and it worked.

Note that OutputStream has a bug when I set it higher... I don't have 
the trace I'm afraid...

> I haven't spent much time on this so far
>so its not like I know its hard todo.  From preliminary experiments its obvious
>that changing the OS buffersize is not the thing todo. 
>
>If anyone has successfully increased the FSOutputStream and FSInputStream
>buffers and got it not to blow up on array copies I would love to know the
>short cut
>
Maybe that was my problem...

Kevin

-- 


Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
See irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

   Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 17:55:29 2005
Return-Path: <java-user-return-14869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62633 invoked from network); 10 Jun 2005 17:55:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 17:55:29 -0000
Received: (qmail 6459 invoked by uid 500); 10 Jun 2005 17:55:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6399 invoked by uid 500); 10 Jun 2005 17:55:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6349 invoked by uid 99); 10 Jun 2005 17:55:21 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of burton@rojo.com designates 12.43.53.196 as permitted sender)
Received: from Unknown (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Jun 2005 10:55:19 -0700
Received: from [192.168.1.146] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id j5AHt093026647
	for <java-user@lucene.apache.org>; Fri, 10 Jun 2005 10:55:05 -0700
Message-ID: <42A9D3EA.1090501@rojo.com>
Date: Fri, 10 Jun 2005 10:54:50 -0700
From: Kevin Burton <burton@rojo.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Macintosh/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Optimizing indexes with mulitiple processors?
References: <20050610065256.55218.qmail@web50604.mail.yahoo.com> <FC0A135B-E65B-4685-B883-B36536EACBC6@corp.earthlink.net>
In-Reply-To: <FC0A135B-E65B-4685-B883-B36536EACBC6@corp.earthlink.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Peter A. Friend wrote:

>
> I changed that value to 8k, and based on the truss output from an  
> index run, it is working. Haven't gotten much beyond that to see if  
> it causes problems elsewhere. The value also needs to be altered on  
> the read end of things. Ideally, this will be made settable via a  
> system property.

Has anyone tried to tweak this on a RAID array on XFS?  Its confusing to figure out the ideal read size.

My performance benchmarks didn't show any benefit to setting this variable higher but I'm worried this is due to caching.

I tried to flush the caches by creating a 5G file and then cating that to /dev/null but I have no way to verify that this actually works.

I just made the BUFFER_SIZE veriables non-final so that I can set them at any time. 

Kevin

-- 


Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
See irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

   Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 17:58:40 2005
Return-Path: <java-user-return-14870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64428 invoked from network); 10 Jun 2005 17:58:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 17:58:40 -0000
Received: (qmail 21333 invoked by uid 500); 10 Jun 2005 17:58:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21310 invoked by uid 500); 10 Jun 2005 17:58:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21055 invoked by uid 99); 10 Jun 2005 17:58:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Jun 2005 10:58:26 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id DEF8313E2006; Fri, 10 Jun 2005 13:57:53 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id D725813E2005
	for <java-user@lucene.apache.org>; Fri, 10 Jun 2005 13:57:24 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <3795834713779942874HVPYVRVDZA.tlai@trekspace.com>
References: <3795834713779942874HVPYVRVDZA.tlai@trekspace.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B3F6D091-A48C-4A96-A664-E08218754FC2@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Question on lucene sandbox highlighter
Date: Fri, 10 Jun 2005 13:57:33 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-5.8 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 10, 2005, at 11:28 AM, Terence Lai wrote:
> Hi all,
>
> I have a couple questions regarding to the Highlighter.
>
> Question 1:
> ===========
> I download the highlighter source files. When I compile the code, I  
> got the following error:
>
> ----------------
> org/apache/lucene/search/highlight/TokenSources.java [19:1] cannot  
> resolve symbol
> symbol  : class TermVectorOffsetInfo
> location: package index
> import org.apache.lucene.index.TermVectorOffsetInfo;
> ----------------
>
> Note that I have lucene 1.4.2 jar file in my class path. However,  
> it does not have org.apache.lucene.index.TermVectorOffsetInfo. Does  
> anyone know whether I am missing some other jar files?

The latest Highlighter source code is now specific to the TRUNK of  
the core Lucene API (which will be Lucene 1.9/2.0).  You will need to  
pull a previous version somehow (I'm not sure if the Subversion  
repository for contrib goes back that far or you'll need to get at  
the CVS attic for jakarta-lucene-sandbox).

You can get a binary of a 1.4 compatible Highlighter JAR from the  
source code that comes with Lucene in Action at http:// 
www.lucenebook.com

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 18:32:47 2005
Return-Path: <java-user-return-14871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1923 invoked from network); 10 Jun 2005 18:32:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 18:32:47 -0000
Received: (qmail 17855 invoked by uid 500); 10 Jun 2005 18:32:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17830 invoked by uid 500); 10 Jun 2005 18:32:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17763 invoked by uid 99); 10 Jun 2005 18:32:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.bayt.net (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Jun 2005 11:32:36 -0700
Received: from [192.168.0.2] [217.165.86.47] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id A8052820056; Fri, 10 Jun 2005 14:12:21 -0400
Message-ID: <42A9D55D.2030405@bayt.net>
Date: Fri, 10 Jun 2005 22:01:01 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene in clustered environment (Tomcat)
References: <5f4a6461050606234078585ec5@mail.gmail.com>	 <42A54448.3010008@bayt.net> <5f4a64610506070151f9bc000@mail.gmail.com>	 <42A56339.6050001@bayt.net>	 <5f4a646105060704071f6caa58@mail.gmail.com>	 <42A5A565.9030500@bayt.net>	 <5f4a6461050607072068a173b1@mail.gmail.com> <5f4a6461050607073023c82dd5@mail.gmail.com>
In-Reply-To: <5f4a6461050607073023c82dd5@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Declude-Sender: nsh@bayt.net [192.168.0.2]
X-Declude-Spoolname: DD80402820056D089.SMD
X-Declude-Note: Scanned by Declude 2.0.6 (http://www.declude.com/x-note.htm) for spam.
X-Declude-Scan: Score [0] at 14:12:23 on 10 Jun 2005
X-Declude-Tests: Whitelisted
X-Country-Chain: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Considering you have all your servers on one machine a simple memory failure and the whole thing goes south. But you're right, we have an independent Lucene index sitting next to each one of our webservers on each machine, but they are all updated from a central location powered and organized by an application that accesses our persistent store on an 
oracle database and creates XML files which are then copied to each of the Lucene servers and indexed, if the central utility fails, then the backup kicks in, at worst the indecies aren't up to date for as long as it takes to point the webservers to the Oracle Standby. I wrote a preliminary paper (will send you separately coz the mailing list doesn't allow attachments) about Lucene strategies in a clustered environment, this is a bout 6 months old, I've gone a long way since and I'm finalizing a newer version which I hope to publish so as to offer a solid case study to anyone out there taking that step. Once again this paper is old, but it should get you going.

Nader Henein



Ben wrote:

>Wouldn't it defeat the purpose of clustering if you have a single
>server to manage a single index? What would happen if this server
>failed?
>
>Cheers,
>Ben
>
>On 6/8/05, Ben <newreaders@gmail.com> wrote:
>  
>
>>How about using JavaGroups to notify other nodes in the cluster about
>>the changes?
>>
>>Essentially, each node has the same index stored in a different
>>location. When one node updates/deletes a record, other nodes will get
>>a notification about the changes and update their index accordingly?
>>By using this method, I don't have to modify my Lucene code, I just
>>need to add additional code to notify other nodes. I believe this
>>method also scales better.
>>
>>Cheers,
>>Ben
>>
>>
>>On 6/7/05, Nader Henein <nsh@bayt.net> wrote:
>>    
>>
>>>I realize I've already asked you this question, but do you need 100%
>>>real time, because you could run batch them every 2 minutes, and
>>>concerning Parallel search, unless you really need it, it's overkill in
>>>this case, a communal index will serve you well and will be much easier
>>>to maintain. You have to way requirement vs. complexity/ debug time.
>>>
>>>Nader Henein
>>>
>>>Ben wrote:
>>>
>>>      
>>>
>>>>>When you say your cluster is on a single machine, do you mean that you have multiple webservers on the same machine all of which search a single Lucene index?
>>>>>
>>>>>
>>>>>          
>>>>>
>>>>Yes, this is my case.
>>>>
>>>>
>>>>
>>>>        
>>>>
>>>>>Do you use Lucene as your persistent store or do you have a DB back there?
>>>>>
>>>>>
>>>>>          
>>>>>
>>>>I use Lucene to search for data stored in a PostgreSQL server.
>>>>
>>>>
>>>>
>>>>        
>>>>
>>>>>what is your current update/delete strategy because real time inserts from the webservers directly to the index will not work because you can't have multiple writers.
>>>>>
>>>>>
>>>>>          
>>>>>
>>>>I have to do this in real time, what are the available solutions? My
>>>>application has the ability to do batch update/delete to a Lucene
>>>>index but I would like to do this in real time.
>>>>
>>>>One solution I am thinking is to have each cluster has it own index
>>>>and use parallel search. This makes my application even more complex.
>>>>
>>>>
>>>>
>>>>        
>>>>
>>>>>I strongly recommend Quartz, it's rock solid and really versatile.
>>>>>
>>>>>
>>>>>          
>>>>>
>>>>I am using Quartz, it is really great and supports cluster.
>>>>
>>>>Thanks,
>>>>Ben
>>>>
>>>>
>>>>On 6/7/05, Nader Henein <nsh@bayt.net> wrote:
>>>>
>>>>
>>>>        
>>>>
>>>>>When you say your cluster is on a single machine, do you mean that you
>>>>>have multiple webservers on the same machine all of which search a
>>>>>single Lucene index? Because if that's the case, your solution is
>>>>>simple, as long as you persist to a single DB and then designate one of
>>>>>your servers (or even another server) to update/delete the index. Do you
>>>>>use Lucene as your persistent store or do you have a DB back there? and
>>>>>what is your current update/delete strategy because real time inserts
>>>>>          
>>>>>
>>>>>from the webservers directly to the index will not work because you
>>>>        
>>>>
>>>>>can't have multiple writers. Updating a dirty flag on rows that need to
>>>>>be indexed/deleted, or using a table for this task and then batching
>>>>>your updates would be ideal, and if you're using server specific
>>>>>scheduling, I strongly recommend Quartz, it's rock solid and really
>>>>>versatile.
>>>>>
>>>>>My two cents.
>>>>>
>>>>>Nader Henein
>>>>>
>>>>>
>>>>>Ben wrote:
>>>>>
>>>>>
>>>>>
>>>>>          
>>>>>
>>>>>>My cluster is on a single machine and I am using FS index.
>>>>>>
>>>>>>I have already integrated Lucene into my web application for use in a
>>>>>>non-clustered environment. I don't know what I need to do to make it
>>>>>>work in a clustered environment.
>>>>>>
>>>>>>Thanks,
>>>>>>Ben
>>>>>>
>>>>>>On 6/7/05, Nader Henein <nsh@bayt.net> wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>            
>>>>>>
>>>>>>>IMHO, Issues that you need to consider
>>>>>>>
>>>>>>>  * Atomicity of updates and deletes if you are using multiple indexes
>>>>>>>    on multiple machines (the case if your cluster is over a wide network)
>>>>>>>  * Scheduled indecies to core data comparison and sanitization
>>>>>>>    (intensive)
>>>>>>>
>>>>>>>This all depends on what the volume of change is on your index and
>>>>>>>whether you'll be using a Memory resident index or an FS index.
>>>>>>>
>>>>>>>This should start the ball rolling, we've been using Lucene successfully
>>>>>>>on a distributed cluster for a while now, and as long as you're aware of
>>>>>>>some basic NDS limitations/constraints you should be fine.
>>>>>>>
>>>>>>>Hope this helps
>>>>>>>
>>>>>>>Nader Henein
>>>>>>>
>>>>>>>Ben wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>              
>>>>>>>
>>>>>>>>Hi
>>>>>>>>
>>>>>>>>I would like to use Lucene in a clustered environment, what are the
>>>>>>>>things that I should consider and do?
>>>>>>>>
>>>>>>>>I would like to use the same ordinary index storage for all the nodes
>>>>>>>>in the the cluster, possible?
>>>>>>>>
>>>>>>>>Thanks,
>>>>>>>>Ben
>>>>>>>>
>>>>>>>>---------------------------------------------------------------------
>>>>>>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                
>>>>>>>>
>>>>>>>--
>>>>>>>
>>>>>>>Nader S. Henein
>>>>>>>Senior Applications Architect
>>>>>>>
>>>>>>>Bayt.com
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>---------------------------------------------------------------------
>>>>>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>              
>>>>>>>
>>>>>>---------------------------------------------------------------------
>>>>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>            
>>>>>>
>>>>>--
>>>>>
>>>>>Nader S. Henein
>>>>>Senior Applications Architect
>>>>>
>>>>>Bayt.com
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>---------------------------------------------------------------------
>>>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>          
>>>>>
>>>>---------------------------------------------------------------------
>>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>        
>>>>
>>>--
>>>
>>>Nader S. Henein
>>>Senior Applications Architect
>>>
>>>Bayt.com
>>>
>>>
>>>
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>      
>>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>
>  
>

-- 
Nader S. Henein
Senior Applications Developer

Bayt.com





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 20:30:58 2005
Return-Path: <java-user-return-14872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58544 invoked from network); 10 Jun 2005 20:30:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 20:30:58 -0000
Received: (qmail 88432 invoked by uid 500); 10 Jun 2005 20:30:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88404 invoked by uid 500); 10 Jun 2005 20:30:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88378 invoked by uid 99); 10 Jun 2005 20:30:48 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web50609.mail.yahoo.com (HELO web50609.mail.yahoo.com) (206.190.38.248)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 10 Jun 2005 13:30:45 -0700
Received: (qmail 95673 invoked by uid 60001); 10 Jun 2005 20:30:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=j4VNXKMbSvZ5G2A11QJlPxDCtOA1nfQftgqUpx/664m94yYWW9B6KcjGeQSaIDhvn+SquzWxv1ARTSEoIu49cKaWvYbaFnV418v/Y1gzZ6KuwITISgeKwufP+z4GLjDue3oW6HWNcB0mCisedoj+rCQT1x/QCoOQyT3W97GzRNE=  ;
Message-ID: <20050610203036.95671.qmail@web50609.mail.yahoo.com>
Received: from [209.172.74.45] by web50609.mail.yahoo.com via HTTP; Fri, 10 Jun 2005 13:30:35 PDT
Date: Fri, 10 Jun 2005 13:30:35 -0700 (PDT)
From: Chris Collins <chris_j_collins@yahoo.com>
Subject: Re: Optimizing indexes with mulitiple processors?
To: java-user@lucene.apache.org
In-Reply-To: <62F51FD5-E137-49F2-AD08-AE5577B51972@corp.earthlink.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dont forget that when a document is indexed it starts life in its own segment. 
If you have min merge of 4k you could have an awefull lot of 1 doc segments on
the segment stack.....thats why I run out of memory.  If that is the case that
each of these at some point has a buffer of 8k or say 64k you blow up pretty
quickly.

regards

C

--- "Peter A. Friend" <octavian@corp.earthlink.net> wrote:

> 
> On Jun 10, 2005, at 9:33 AM, Chris Collins wrote:
> 
> > How many documents did you try to index?
> 
> Only about 4000 at the moment.
> 
> >   I am using a relatively large
> > minMergeDoc that causes me to run out of memory when I make such a  
> > change. (I
> > am using 1/2 gb of heap btw).
> 
> I was running out of memory as well until I gave Java a larger heap  
> to work with. I am assuming that a dedicated indexing machine (as  
> well as search) is going to need a mountain of memory. I figure I  
> will be giving Java gigs to play with.
> 
> > I believe changing it in the outputstream object
> > means that a lot of in memory only objects use that size too.
> 
> This I need to look into. At a guess, I would think that there would  
> be an OutputStream object for each open segment, and each file in  
> that segment. A consolidated index *might* use less but of course we  
> are trying to improve performance here, and the consolidated index  
> does incur a cost. Assuming 10 segments and 10 files within each  
> segment, that's 100 OutputStream objects or 809,600 bytes. That'll  
> grow quickly with merge tweaks. Those larger writes do save a bunch  
> of system calls and make (maybe) better use of your filers block  
> size. This grows quickly with maxMerge tweaks. Of course this could  
> be utterly incorrect, I need to look into this a bit more carefully.
> 
> > I dont know I would of used truss in this regard, this only points  
> > out what
> > size hit the kernel not what went over the wire.  I would suggest  
> > using
> > ethereal to ensure thats how its ending up on the wire.
> 
> True, hadn't gotten that far yet. :-)
> 
> Peter
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 10 20:38:34 2005
Return-Path: <java-user-return-14873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63055 invoked from network); 10 Jun 2005 20:38:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jun 2005 20:38:34 -0000
Received: (qmail 4190 invoked by uid 500); 10 Jun 2005 20:38:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4151 invoked by uid 500); 10 Jun 2005 20:38:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4132 invoked by uid 99); 10 Jun 2005 20:38:25 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web50606.mail.yahoo.com (HELO web50606.mail.yahoo.com) (206.190.38.93)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 10 Jun 2005 13:38:24 -0700
Received: (qmail 88846 invoked by uid 60001); 10 Jun 2005 20:31:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:Cc:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=aHhRERR09SZL/ByS6GF4u32qVUjFnWZZ2Xlz+dO0xVSrA2ns+u0yNMq8AJjFIYQDvW3E/oKfoL2MVZOl4yACV6luFtW2toleWqrZ/LnhN6dooCZcie5qE7/SlqOlUcfnMaSQLih5OUTU1Npd5QoyMfEqgi4SlsPijez1snYeMno=  ;
Message-ID: <20050610203138.88844.qmail@web50606.mail.yahoo.com>
Received: from [209.172.74.45] by web50606.mail.yahoo.com via HTTP; Fri, 10 Jun 2005 13:31:38 PDT
Date: Fri, 10 Jun 2005 13:31:38 -0700 (PDT)
From: Chris Collins <chris_j_collins@yahoo.com>
Subject: Re: Optimizing indexes with mulitiple processors?
To: java-user@lucene.apache.org
Cc: Bill Au <bill.w.au@gmail.com>
In-Reply-To: <42A9D308.8010908@rojo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yeh I think the bug is related to an array copy that expects 1k blocks (if I
recall it was RAMDirectory or something like that).  

C

--- Kevin Burton <burton@rojo.com> wrote:

> Chris Collins wrote:
> 
> >Well I am currently looking at merging too.  In my application merging will
> >occur against a filer (read as higher latency device).  I am currently
> working
> >on how to stage indices on local disk before moving to a filer.  Assume I
> must
> >move to a filer eventually for whatever crazzy reason I need to....dont ask
> it
> >aint funny :-}
> >
> >In that case I have a different performance issue, that is that
> FSInputStream
> >and FSOutputStream inherit the buffer size of 1k from OS and IS  This would
> be
> >useful to increase to reduce the amount of RPC's to the filer when doing
> merges
> >..... assuming that reads and writes are sequential (CIFS supports a 64k
> block
> >and NFS supports upto I think 32k). 
> >
> Yeah.. I already did this actually ... on local disks the performance 
> benefit wasn't noticable.  The variables are  private/final ... I made 
> them public and non-final and it worked.
> 
> Note that OutputStream has a bug when I set it higher... I don't have 
> the trace I'm afraid...
> 
> > I haven't spent much time on this so far
> >so its not like I know its hard todo.  From preliminary experiments its
> obvious
> >that changing the OS buffersize is not the thing todo. 
> >
> >If anyone has successfully increased the FSOutputStream and FSInputStream
> >buffers and got it not to blow up on array copies I would love to know the
> >short cut
> >
> Maybe that was my problem...
> 
> Kevin
> 
> -- 
> 
> 
> Use Rojo (RSS/Atom aggregator)! - visit http://rojo.com. 
> See irc.freenode.net #rojo if you want to chat.
> 
> Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html
> 
>    Kevin A. Burton, Location - San Francisco, CA
>       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
> GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 11 07:27:00 2005
Return-Path: <java-user-return-14874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95353 invoked from network); 11 Jun 2005 07:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2005 07:27:00 -0000
Received: (qmail 14118 invoked by uid 500); 11 Jun 2005 07:26:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14076 invoked by uid 500); 11 Jun 2005 07:26:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14059 invoked by uid 99); 11 Jun 2005 07:26:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of chris.lu@gmail.com designates 64.233.162.201 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.201)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 11 Jun 2005 00:26:52 -0700
Received: by zproxy.gmail.com with SMTP id 8so556899nzo
        for <java-user@lucene.apache.org>; Sat, 11 Jun 2005 00:26:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:content-type:content-transfer-encoding;
        b=d5bubfwk7jW3a/5Qr1hksFe9LdLvKdftK+Sj0LmT2YSdwEUz9ugkHPswIgJl5r9ZNlJcAQk7zZU3UXFMl8sGDOdSmOsE95dyED7QxFhdLPsQEu5uTJXMx1+UK0+LVWcIm5EjXtK9SuOa9R5PPvwewNIMY2YQSQ3D382zCWica5Y=
Received: by 10.36.74.17 with SMTP id w17mr1832429nza;
        Sat, 11 Jun 2005 00:26:49 -0700 (PDT)
Received: from ?192.168.0.3? ([67.188.85.52])
        by mx.gmail.com with ESMTP id 34sm932121nza.2005.06.11.00.26.48;
        Sat, 11 Jun 2005 00:26:49 -0700 (PDT)
Message-ID: <42AA91E5.9050007@gmail.com>
Date: Sat, 11 Jun 2005 00:25:25 -0700
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: DBSight, search on database by Lucene
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Lucene developers,

I would like to introduce myself and say thanks to Lucene contributors
and this mailing list.
We have just released DBSight 1.0, which is a J2EE application that can
create a search engine on any relational database.

You can build a vertical search website within hours if your data is in
a JDBC-enabled database.

To demonstrate the search capability, DBSight created a demo search
on 1.7 million CD albums information by freedb.org provided data.
http://search.dbsight.com/

DBSight is a highly configurable platform to create search.
It can crawl your database, create indexes, display search results.
You can customize most of the components, and manage the indexes -- all 
by web interface.

DBSight is built with Lucene for searching, JDBC for crawling, and 
Velocity for rendering.

Will this qualify DBSight to be listed on "Powered By Lucene" wiki page?

Here is a step by step tutorial on how the demo search is created.

Resources:
    Step by step tutorial : 
http://www.dbsight.net/mediawiki/index.php?title=Step_by_step
    Demo Search on freedb.org's data: http://search.dbsight.com/
    Feature List: http://www.dbsight.net/?q=node/34

Chris Lu


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 11 08:39:38 2005
Return-Path: <java-user-return-14875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6118 invoked from network); 11 Jun 2005 08:39:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2005 08:39:38 -0000
Received: (qmail 29632 invoked by uid 500); 11 Jun 2005 08:39:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29595 invoked by uid 500); 11 Jun 2005 08:39:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29573 invoked by uid 99); 11 Jun 2005 08:39:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from poros.telenet-ops.be (HELO poros.telenet-ops.be) (195.130.132.44)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 11 Jun 2005 01:39:29 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by poros.telenet-ops.be (Postfix) with SMTP id ED59D3BC328
	for <java-user@lucene.apache.org>; Sat, 11 Jun 2005 10:39:23 +0200 (MEST)
Received: from [127.0.0.1] (dD5E0EA56.access.telenet.be [213.224.234.86])
	by poros.telenet-ops.be (Postfix) with ESMTP id C89193BC2A1
	for <java-user@lucene.apache.org>; Sat, 11 Jun 2005 10:39:23 +0200 (MEST)
Message-ID: <42AAA33B.8000206@pandora.be>
Date: Sat, 11 Jun 2005 10:39:23 +0200
From: Edwin Mol <edwin.mol@pandora.be>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: International Stemmers and Character Encoding
References: <42AA91E5.9050007@gmail.com>
In-Reply-To: <42AA91E5.9050007@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have downloaded the analysers sources from the sandbox area, but for 
every *Stemmer class I'm having compilation problems:
"Invalid Character Constant".
Here is how a code snipper looks like from the DutchtStemmer class:

  /**
   * Substitute , , , , ,  , , , , 
   */
  private void substitute(StringBuffer buffer) {
    for (int i = 0; i < buffer.length(); i++) {
      switch (buffer.charAt(i)) {
        case '':
        case '':
          {
            buffer.setCharAt(i, 'a');
            break;
          }
        case '':
        case ''::

In this example the '' Character causes a problem.

I think the code is messed up because of wrong character encoding of the 
java file.
Does anyone know if I'm correct and more importantly how to solve this 
problem.

Thanks,

Edwin Mol


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 11 09:08:27 2005
Return-Path: <java-user-return-14876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10624 invoked from network); 11 Jun 2005 09:08:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2005 09:08:27 -0000
Received: (qmail 73235 invoked by uid 500); 11 Jun 2005 09:08:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73209 invoked by uid 500); 11 Jun 2005 09:08:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73196 invoked by uid 99); 11 Jun 2005 09:08:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from europa.telenet-ops.be (HELO europa.telenet-ops.be) (195.130.132.60)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 11 Jun 2005 02:08:17 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by europa.telenet-ops.be (Postfix) with SMTP id 96ADC19812E
	for <java-user@lucene.apache.org>; Sat, 11 Jun 2005 11:08:12 +0200 (MEST)
Received: from [127.0.0.1] (dD5E0EA56.access.telenet.be [213.224.234.86])
	by europa.telenet-ops.be (Postfix) with ESMTP id 77B9D198156
	for <java-user@lucene.apache.org>; Sat, 11 Jun 2005 11:08:12 +0200 (MEST)
Message-ID: <42AAA9FC.3020308@pandora.be>
Date: Sat, 11 Jun 2005 11:08:12 +0200
From: Edwin Mol <edwin.mol@pandora.be>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: International Stemmers and Character Encoding
References: <42AA91E5.9050007@gmail.com> <42AAA33B.8000206@pandora.be>
In-Reply-To: <42AAA33B.8000206@pandora.be>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Please ignore my previous post, I have solved the problem.
Turned out that my IDE(eclipse) didn't use UTF-8 encoding by default.

Edwin


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 11 10:44:16 2005
Return-Path: <java-user-return-14877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31475 invoked from network); 11 Jun 2005 10:44:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2005 10:44:16 -0000
Received: (qmail 22746 invoked by uid 500); 11 Jun 2005 10:44:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22692 invoked by uid 500); 11 Jun 2005 10:44:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22667 invoked by uid 99); 11 Jun 2005 10:44:07 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of sackley@cfl.rr.com designates 65.32.5.134 as permitted sender)
Received: from ms-smtp-04-smtplb.tampabay.rr.com (HELO ms-smtp-04.tampabay.rr.com) (65.32.5.134)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 11 Jun 2005 03:44:05 -0700
Received: from Electron (43.152.202.68.cfl.res.rr.com [68.202.152.43])
	by ms-smtp-04.tampabay.rr.com (8.12.10/8.12.7) with SMTP id j593jad7018150
	for <java-user@lucene.apache.org>; Wed, 8 Jun 2005 23:45:37 -0400 (EDT)
Message-ID: <001a01c56cae$54115ae0$6502a8c0@Electron>
Reply-To: "Ryan Ackley" <sackley@apache.org>
From: "Ryan Ackley" <sackley@cfl.rr.com>
To: <java-user@lucene.apache.org>
References: <42A79A71.7010807@zilverline.org>
Subject: Re: Zilverline Search Engine version 1.4.0 released
Date: Wed, 8 Jun 2005 23:47:19 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Scanned: Symantec AntiVirus Scan Engine
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael,

Cool, looks nice. I downloaded the distribution and I notice that you are 
using several bsd-licensed libraries besides lucene including the 
textmining.org library. I couldn't find any acknowledgement of those 
libraries in your documentation. The Apache 2.0 license lets you just 
include a notice file in your distribution. It could be my fault for not 
looking hard enough.

-Ryan

----- Original Message ----- 
From: "Zilverline info" <info@zilverline.org>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, June 08, 2005 8:25 PM
Subject: Zilverline Search Engine version 1.4.0 released


> All,
>
> I've just released Zilverline version 1.4.0.
>
> This version indexes in the background, detects
> ISBN numbers, and has (some) IMAP support.
>
> This version is fully webbased, all settings, collections, preferences
> can be set via the web interface.
>
> The source will be made available as well very soon.
>
> Zilverline is protected by a Collaborative Source License. You can read
> more on this type of licensing at http://www.zilverline.org
>
> Zilverline is a fully webbased search engine based on lucene that's
> ready to roll, and can be simply dropped in a Servlet Engine. It runs
> out of the box, and supports PDF, WORD, HTM, TXT, RTF, Excel, Powerpoint
> and CHM, and can index zip, rar, and many other formats. Both on
> Windows and Linux.
>
> Zilverline supports plugins. You can create your own extractors
> for various file formats. I've provided Extractors for RTF, Text, PDF,
> Word, Excel, Powerpoint and HTML.
>
> Zilverline supports collections. A collection is a set of files and
> directories in a directory. A collection can be indexed, and searched.
> The results of the search can be retrieved from local disk or remotely,
> if you run a webserver on your machine. Files inside zip, rar and chm
> files are extracted, indexed and can be cached. The cache can be mapped
> to sit behind your webserver as well.
>
> It's also possible to specify your own handlers for archives. Say you
> have a RAR archive, and you have a program on your system that can
> extract the content from it, then you can specify that Zilverline should
> use this program.
>
>
> Please take look at http://www.zilverline.org, and have a swing at it.
>
> cheers,
>
>   Michael Franken
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> -- 
> No virus found in this incoming message.
> Checked by AVG Anti-Virus.
> Version: 7.0.323 / Virus Database: 267.6.6 - Release Date: 6/8/2005
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 11 11:48:58 2005
Return-Path: <java-user-return-14878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49810 invoked from network); 11 Jun 2005 11:48:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2005 11:48:58 -0000
Received: (qmail 9779 invoked by uid 500); 11 Jun 2005 11:48:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9747 invoked by uid 500); 11 Jun 2005 11:48:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9699 invoked by uid 99); 11 Jun 2005 11:48:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 11 Jun 2005 04:48:47 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E927C13E2005; Sat, 11 Jun 2005 07:48:27 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id C6D0713E2005
	for <java-user@lucene.apache.org>; Sat, 11 Jun 2005 07:48:22 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42AA91E5.9050007@gmail.com>
References: <42AA91E5.9050007@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8B3AF14F-1085-4573-B750-66A19E63C3FC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: DBSight, search on database by Lucene
Date: Sat, 11 Jun 2005 07:48:32 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 11, 2005, at 3:25 AM, Chris Lu wrote:
> To demonstrate the search capability, DBSight created a demo search
> on 1.7 million CD albums information by freedb.org provided data.
> http://search.dbsight.com/

Nice job!  Here's the best query:

     <http://www.dbsight.com/dbs/search.do? 
indexName=freedb&templateName=free&q=%22tim+reynolds%22+-dave>

:)

> Will this qualify DBSight to be listed on "Powered By Lucene" wiki  
> page?

Of course.  The wiki is community maintained, so anyone who has  
Lucene Inside is welcome to add their project/product there.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 11 17:10:22 2005
Return-Path: <java-user-return-14879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72843 invoked from network); 11 Jun 2005 17:10:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2005 17:10:22 -0000
Received: (qmail 89317 invoked by uid 500); 11 Jun 2005 17:10:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89282 invoked by uid 500); 11 Jun 2005 17:10:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89269 invoked by uid 99); 11 Jun 2005 17:10:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of chris.lu@gmail.com designates 64.233.184.193 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 11 Jun 2005 10:10:09 -0700
Received: by wproxy.gmail.com with SMTP id 50so932251wri
        for <java-user@lucene.apache.org>; Sat, 11 Jun 2005 10:10:05 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=NZWVE6WnG/CTDNqFEBnq4BdjjcKZH7oMbjK8MnZ3IqTXul8IM1lhbw/Gv9+EhCqgcqsOy2DOwDpF06KlkfTwRIye1vED2CRr9iy8axxBJjUm7RHXzhEdqyiuTXZFqNniNSyii49MOJjO7rAljPZEBsSrT95KRh1wH4m9l4NeUFw=
Received: by 10.54.110.12 with SMTP id i12mr984581wrc;
        Sat, 11 Jun 2005 10:10:05 -0700 (PDT)
Received: from ?192.168.0.3? ([67.188.85.52])
        by mx.gmail.com with ESMTP id 8sm2488971wrl.2005.06.11.10.10.05;
        Sat, 11 Jun 2005 10:10:05 -0700 (PDT)
Message-ID: <42AB1A99.4060100@gmail.com>
Date: Sat, 11 Jun 2005 10:08:41 -0700
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: DBSight, search on database by Lucene
References: <42AA91E5.9050007@gmail.com> <8B3AF14F-1085-4573-B750-66A19E63C3FC@ehatchersolutions.com>
In-Reply-To: <8B3AF14F-1085-4573-B750-66A19E63C3FC@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks.

Somehow I found the "Powered By" Lucene page is "Immutable Page", even 
if I logged in.
http://wiki.apache.org/jakarta-lucene/PoweredBy

Chris Lu

Erik Hatcher wrote:

>
> On Jun 11, 2005, at 3:25 AM, Chris Lu wrote:
>
>> To demonstrate the search capability, DBSight created a demo search
>> on 1.7 million CD albums information by freedb.org provided data.
>> http://search.dbsight.com/
>
>
> Nice job!  Here's the best query:
>
>     <http://www.dbsight.com/dbs/search.do? 
> indexName=freedb&templateName=free&q=%22tim+reynolds%22+-dave>
>
> :)
>
>> Will this qualify DBSight to be listed on "Powered By Lucene" wiki  
>> page?
>
>
> Of course.  The wiki is community maintained, so anyone who has  
> Lucene Inside is welcome to add their project/product there.
>
>     Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 11 20:24:23 2005
Return-Path: <java-user-return-14880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20588 invoked from network); 11 Jun 2005 20:24:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2005 20:24:23 -0000
Received: (qmail 7519 invoked by uid 500); 11 Jun 2005 20:24:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7495 invoked by uid 500); 11 Jun 2005 20:24:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 80401 invoked by uid 99); 11 Jun 2005 18:01:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of falko.guderian@gmx.de designates 213.165.64.20 as permitted sender)
X-Authenticated: #9521745
Message-ID: <42AB26FE.8040507@gmx.de>
Date: Sat, 11 Jun 2005 20:01:34 +0200
From: Falko Guderian <falko.guderian@gmx.de>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene search clusters
References: <e72c67f7050607105066c955e0@mail.gmail.com> <e72c67f7050607151887c5eb3@mail.gmail.com>
In-Reply-To: <e72c67f7050607151887c5eb3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You have to combine lucene and weka on your own.
I don't know an open source implementation or some other tools.
Sorry, you have to write a wrapper.

-Falko

>Some people just replied, but I forgot the most important thing...
>I'm thinking of this project as part of the Google's Summer of Code program, 
>so I'm looking for other students.
>I've sent an email to Erik and he told me that we can propose this as part 
>of Google's SoC if we find some other people interested in it.
>Lorenzo
>
>On 6/7/05, Lorenzo <lorenzo.viscanti@gmail.com> wrote:
>  
>
>>I'm writing this message trying to find some people interested in creating 
>>a 'general purpose' lucene search results' clustering extension.
>>I wrote a simply implementation of clustering, and I would like to 
>>contribute to lucene development by releasing an open source clustering 
>>implementation. I know that maybe each project need a different 
>>implementation but that would be a useful basis for everyone to develop his 
>>own project.
>>Is anyone interested in it?
>>Lorenzo
>>
>>    
>>
>
>  
>
>------------------------------------------------------------------------
>
>No virus found in this incoming message.
>Checked by AVG Anti-Virus.
>Version: 7.0.323 / Virus Database: 267.6.2 - Release Date: 04.06.2005
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 11 20:32:10 2005
Return-Path: <java-user-return-14881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21060 invoked from network); 11 Jun 2005 20:32:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jun 2005 20:32:10 -0000
Received: (qmail 18848 invoked by uid 500); 11 Jun 2005 20:32:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18574 invoked by uid 500); 11 Jun 2005 20:32:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18550 invoked by uid 99); 11 Jun 2005 20:32:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 11 Jun 2005 13:32:00 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5292B13E2005; Sat, 11 Jun 2005 16:31:58 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP
	id EDB5913E2005; Sat, 11 Jun 2005 16:31:43 -0400 (EDT)
In-Reply-To: <42AB1A99.4060100@gmail.com>
References: <42AA91E5.9050007@gmail.com> <8B3AF14F-1085-4573-B750-66A19E63C3FC@ehatchersolutions.com> <42AB1A99.4060100@gmail.com>
Mime-Version: 1.0 (Apple Message framework v730)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0B96EBE6-443E-404F-BA71-E9C95D9C0CD7@ehatchersolutions.com>
Cc: infrastructure@apache.org
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: DBSight, search on database by Lucene
Date: Sat, 11 Jun 2005 16:31:54 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 11, 2005, at 1:08 PM, Chris Lu wrote:

> Thanks.
>
> Somehow I found the "Powered By" Lucene page is "Immutable Page",  
> even if I logged in.
> http://wiki.apache.org/jakarta-lucene/PoweredBy

Wow, it sure is.  I'm CC'ing infrastructure to find out why this page  
is immutable.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 12 01:00:04 2005
Return-Path: <java-user-return-14882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66538 invoked from network); 12 Jun 2005 01:00:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2005 01:00:03 -0000
Received: (qmail 86564 invoked by uid 500); 12 Jun 2005 00:59:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86543 invoked by uid 500); 12 Jun 2005 00:59:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 4396 invoked by uid 99); 12 Jun 2005 00:03:34 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
X-Sasl-enc: bsJVuSxdqVhPNWl2oegm5L2IF7q+aYhcNMBwerDUDNlb 1118534608
Date: Sat, 11 Jun 2005 20:04:02 -0400 (Eastern Daylight Time)
From: Joshua Slive <joshua@slive.ca>
To: Erik Hatcher <erik@ehatchersolutions.com>
cc: java-user@lucene.apache.org, infrastructure@apache.org
Subject: Re: DBSight, search on database by Lucene
In-Reply-To: <0B96EBE6-443E-404F-BA71-E9C95D9C0CD7@ehatchersolutions.com>
Message-ID: <Pine.WNT.4.61.0506111958150.1432@bronfman504>
References: <42AA91E5.9050007@gmail.com> <8B3AF14F-1085-4573-B750-66A19E63C3FC@ehatchersolutions.com>
 <42AB1A99.4060100@gmail.com> <0B96EBE6-443E-404F-BA71-E9C95D9C0CD7@ehatchersolutions.com>
X-X-Sender: slive@fastmail.fm@mail.messagingengine.com
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N




On Sat, 11 Jun 2005, Erik Hatcher wrote:

>
> On Jun 11, 2005, at 1:08 PM, Chris Lu wrote:
>
>> Thanks.
>> 
>> Somehow I found the "Powered By" Lucene page is "Immutable Page", even if I 
>> logged in.
>> http://wiki.apache.org/jakarta-lucene/PoweredBy
>
> Wow, it sure is.  I'm CC'ing infrastructure to find out why this page is 
> immutable.


Ughhh... Looks like another caching problem.

A shift- or ctrl-refresh should get you the right thing.  You know if you 
have the right page if your userid appears in the upper-right.

It seems like technically moin needs to send Vary: cookie, but this would
completely destroy our ability to cache.

What we want is for anything with a Cookie: header to totally bypass the 
cache.  I don't know of any way to configure that.

Joshua.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 12 05:55:59 2005
Return-Path: <java-user-return-14883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38249 invoked from network); 12 Jun 2005 05:55:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2005 05:55:58 -0000
Received: (qmail 73222 invoked by uid 500); 12 Jun 2005 05:55:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73183 invoked by uid 500); 12 Jun 2005 05:55:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73169 invoked by uid 99); 12 Jun 2005 05:55:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.fetchbook.info (HELO gc.fetchbook.info) (69.61.19.221)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 11 Jun 2005 22:55:50 -0700
Received: (qmail 15275 invoked from network); 12 Jun 2005 05:55:44 -0000
Received: from aeli.bb.netvision.net.il (HELO mickey) (212.143.80.6)
  by gc.fetchbook.info with SMTP; 12 Jun 2005 05:55:44 -0000
From: "M. Mokotov" <mk@mokotov.org>
To: <java-user@lucene.apache.org>
Subject: RE: OR query on multiple fields causes low coord
Date: Sun, 12 Jun 2005 08:53:50 +0200
Message-ID: <002001c56f1b$7df2a020$0700000a@mickey>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
In-Reply-To: <200506092010.35318.paul.elschot@xs4all.nl>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Paul,

Thanks for the help.

-----Original Message-----
From: Paul Elschot [mailto:paul.elschot@xs4all.nl]=20
Sent: Thursday, June 09, 2005 8:11 PM
To: java-user@lucene.apache.org
Subject: Re: OR query on multiple fields causes low coord


On Thursday 09 June 2005 13:14, M. Mokotov wrote:
> Hi,
> =20
> I have a question with regards to an OR query on multiple fields.
> =20
> It seems that the more fields I'm splitting the documents into, the=20
> lower the coord is getting. As a result when I want to query the=20
> string S on many fields (a query like
> F1:(S) F2:(S) ... Fn:(S) ) I'm getting close-to-zero coords, which=20
> causes a poor matching score. I assume (and forgive me for assuming)=20
> that the reason is when calling coord( overlap, maxOverlap ),=20
> maxOverlap=3D|S|*n (where n is the number of fields on the query)
> =20
> Is there any way to avoid that?
> Can I have the coord computed per field?

Yes. For the query above, use a BooleanQuery with a Similarity that has =
a
constant returning coord() method. This is difficult to do the =
QueryParser,
but it is easy to construct it in your own code. For the subqueries on =
the
fields you can still use the default similarity, as you see fit.

Have a look at the MultiFieldQueryParser in the source:
http://svn.apache.org/viewcvs.cgi/lucene/java/tags/lucene_1_4_3/src/java/=
org
/apache/lucene/queryParser/
Instead of the BooleanQuery constructed there, use a BooleanQuery that
overrides getSimilarity().

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 12 08:51:20 2005
Return-Path: <java-user-return-14884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88756 invoked from network); 12 Jun 2005 08:51:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2005 08:51:20 -0000
Received: (qmail 87398 invoked by uid 500); 12 Jun 2005 08:51:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87335 invoked by uid 500); 12 Jun 2005 08:51:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87317 invoked by uid 99); 12 Jun 2005 08:51:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of chris.lu@gmail.com designates 64.233.162.195 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 12 Jun 2005 01:51:12 -0700
Received: by zproxy.gmail.com with SMTP id 18so878508nzp
        for <java-user@lucene.apache.org>; Sun, 12 Jun 2005 01:51:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=tIiut/0zejWdZHpAJbeJnbBG5csEmOgXUKlAzRN02BvsoCnVV0nLnS4UJJMVDSnSp+MnQ3pC8ECiytjfujbY60g7xMCmmOCztuDgIDsAX9pXBf7y4nAsBvFTicMNc68PU0tM1VvwmM/ByBE2e5OX4BoljViwhXvVygcmsHmpg6I=
Received: by 10.36.39.19 with SMTP id m19mr2099905nzm;
        Sun, 12 Jun 2005 01:51:08 -0700 (PDT)
Received: from ?192.168.0.3? ([67.188.85.52])
        by mx.gmail.com with ESMTP id 19sm2026398nzp.2005.06.12.01.51.08;
        Sun, 12 Jun 2005 01:51:08 -0700 (PDT)
Message-ID: <42ABF725.6030906@gmail.com>
Date: Sun, 12 Jun 2005 01:49:41 -0700
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
CC: Erik Hatcher <erik@ehatchersolutions.com>,  infrastructure@apache.org
Subject: Re: DBSight, search on database by Lucene
References: <42AA91E5.9050007@gmail.com> <8B3AF14F-1085-4573-B750-66A19E63C3FC@ehatchersolutions.com> <42AB1A99.4060100@gmail.com> <0B96EBE6-443E-404F-BA71-E9C95D9C0CD7@ehatchersolutions.com> <Pine.WNT.4.61.0506111958150.1432@bronfman504>
In-Reply-To: <Pine.WNT.4.61.0506111958150.1432@bronfman504>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks, guys!

I have made the changes to the wiki, following Joshua's advice.
It's the cookie/refreshing problem.

Chris Lu

Joshua Slive wrote:

>
>
>
> On Sat, 11 Jun 2005, Erik Hatcher wrote:
>
>>
>> On Jun 11, 2005, at 1:08 PM, Chris Lu wrote:
>>
>>> Thanks.
>>>
>>> Somehow I found the "Powered By" Lucene page is "Immutable Page", 
>>> even if I logged in.
>>> http://wiki.apache.org/jakarta-lucene/PoweredBy
>>
>>
>> Wow, it sure is.  I'm CC'ing infrastructure to find out why this page 
>> is immutable.
>
>
>
> Ughhh... Looks like another caching problem.
>
> A shift- or ctrl-refresh should get you the right thing.  You know if 
> you have the right page if your userid appears in the upper-right.
>
> It seems like technically moin needs to send Vary: cookie, but this would
> completely destroy our ability to cache.
>
> What we want is for anything with a Cookie: header to totally bypass 
> the cache.  I don't know of any way to configure that.
>
> Joshua.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 12 08:52:35 2005
Return-Path: <java-user-return-14885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88836 invoked from network); 12 Jun 2005 08:52:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2005 08:52:35 -0000
Received: (qmail 89476 invoked by uid 500); 12 Jun 2005 08:52:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89462 invoked by uid 500); 12 Jun 2005 08:52:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 66616 invoked by uid 99); 12 Jun 2005 03:08:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
X-AuthUser: chip@force-elite.com
Message-ID: <42ABA71A.3060901@apache.org>
Date: Sat, 11 Jun 2005 20:08:10 -0700
From: Paul Querna <pquerna@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Joshua Slive <joshua@slive.ca>
CC: Erik Hatcher <erik@ehatchersolutions.com>, 
 java-user@lucene.apache.org,  infrastructure@apache.org
Subject: Re: DBSight, search on database by Lucene
References: <42AA91E5.9050007@gmail.com> <8B3AF14F-1085-4573-B750-66A19E63C3FC@ehatchersolutions.com> <42AB1A99.4060100@gmail.com> <0B96EBE6-443E-404F-BA71-E9C95D9C0CD7@ehatchersolutions.com> <Pine.WNT.4.61.0506111958150.1432@bronfman504>
In-Reply-To: <Pine.WNT.4.61.0506111958150.1432@bronfman504>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Joshua Slive wrote:
> 
> 
> 
> On Sat, 11 Jun 2005, Erik Hatcher wrote:
> 
>>
>> On Jun 11, 2005, at 1:08 PM, Chris Lu wrote:
>>
>>> Thanks.
>>>
>>> Somehow I found the "Powered By" Lucene page is "Immutable Page", 
>>> even if I logged in.
>>> http://wiki.apache.org/jakarta-lucene/PoweredBy
>>
>>
>> Wow, it sure is.  I'm CC'ing infrastructure to find out why this page 
>> is immutable.
> 
> 
> 
> Ughhh... Looks like another caching problem.
> 
> A shift- or ctrl-refresh should get you the right thing.  You know if 
> you have the right page if your userid appears in the upper-right.
> 
> It seems like technically moin needs to send Vary: cookie, but this would
> completely destroy our ability to cache.

Not if we applied the patch I sent to dev@httpd on Friday.  It fixes 
mod_disk_cache's handling of Vary: to keep separate copies for each 
combo, instead of only a single copy.

> What we want is for anything with a Cookie: header to totally bypass the 
> cache.  I don't know of any way to configure that.

Moin should be sending Cache-Control: Private in these cases, in 
addition to the Vary: Cookie header.  If they don't they will break with 
other upstream proxies that we have no control over.  Fixing it so httpd 
can cache fixes upstream proxies too, so it is the right thing to do.

-Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 12 09:21:58 2005
Return-Path: <java-user-return-14886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92876 invoked from network); 12 Jun 2005 09:21:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2005 09:21:58 -0000
Received: (qmail 30147 invoked by uid 500); 12 Jun 2005 09:21:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30056 invoked by uid 500); 12 Jun 2005 09:21:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30040 invoked by uid 99); 12 Jun 2005 09:21:52 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 20.70-84-109.reverse.theplanet.com (HELO box4.just-hosting.com) (70.84.109.20)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 12 Jun 2005 02:21:50 -0700
Received: from [85.99.45.51] (helo=[127.0.0.1])
	by box4.just-hosting.com with esmtpa (Exim 4.43)
	id 1DhOf5-00044p-IO
	for java-user@lucene.apache.org; Sun, 12 Jun 2005 09:21:48 +0000
Message-ID: <42ABFE88.8050206@axtelsoft.com>
Date: Sun, 12 Jun 2005 12:21:12 +0300
From: Ahmet Aksoy <ahmetax@axtelsoft.com>
Reply-To:  ahmetax@axtelsoft.com
Organization: Axtelsoft
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Webstart problem with Lucene
Content-Type: text/plain; charset=ISO-8859-9; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - box4.just-hosting.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - axtelsoft.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I prepared a dictionary application which uses Lucene.
I made my application to be downloaded with webstart.
Everything is OK, but I can't access Lucene index files.
When I made a search on the internet about the subject,
I found some clues saying that it is impossible to put Lucene
indexes into jar files; because of random access need.
Now I put all of my files into a zip file. Users download,
and unzip that file to a directory, and every thing is alright.
This is no problem for the normal java users. But I want
any one could run my application, even they have no java
on their computers.
Do you have any suggestions for that purpose?
Thanks in advance.
Ahmet Aksoy


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 12 14:38:02 2005
Return-Path: <java-user-return-14887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68259 invoked from network); 12 Jun 2005 14:38:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2005 14:38:02 -0000
Received: (qmail 80696 invoked by uid 500); 12 Jun 2005 14:37:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80654 invoked by uid 500); 12 Jun 2005 14:37:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80638 invoked by uid 99); 12 Jun 2005 14:37:55 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from grassmarket.ucs.ed.ac.uk (HELO grassmarket.ucs.ed.ac.uk) (129.215.166.64)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 12 Jun 2005 07:37:54 -0700
Received: from grassmarket.ucs.ed.ac.uk (localhost [127.0.0.1])
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.10) with ESMTP id j5CEbo1a007546
	for <java-user@lucene.apache.org>; Sun, 12 Jun 2005 15:37:50 +0100 (BST)
Received: (from nobody@localhost)
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.9/Submit) id j5CEbo68007545
	for java-user@lucene.apache.org; Sun, 12 Jun 2005 15:37:50 +0100 (BST)
X-Authentication-Warning: grassmarket.ucs.ed.ac.uk: nobody set sender to s0454888@sms.ed.ac.uk using -f
Received: from hippolyte.inf.ed.ac.uk (hippolyte.inf.ed.ac.uk [129.215.45.105]) 
	by sms.ed.ac.uk (IMP) with HTTP 
	for <s0454888@sms.ed.ac.uk>; Sun, 12 Jun 2005 15:37:50 +0100
Message-ID: <1118587070.42ac48be751be@sms.ed.ac.uk>
Date: Sun, 12 Jun 2005 15:37:50 +0100
From: Dave Kor <s0454888@sms.ed.ac.uk>
To: java-user@lucene.apache.org
Subject: Ideas Needed - Finding Duplicate Documents
References: <42ABFE88.8050206@axtelsoft.com>
In-Reply-To: <42ABFE88.8050206@axtelsoft.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.3
X-Scanned-By: MIMEDefang 2.33 (www . roaringpenguin . com / mimedefang)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I would like to poll the community's opinion on good strategies for identifying
duplicate documents in a lucene index.

You see, I have an index containing roughly 25 million lucene documents. My task
requires me to work at sentence level so each lucene document actually contains
exactly one sentence. The issue I have right now is that sometimes, certain
sentences are duplicated and I'ld like to be able to identify them as a BitSet
so that I can filter away these duplicates in my search.

Obviously the brute force method of pairwise compares would take forever. I have
tried grouping sentences using their hashCodes() and then do a pairwise compare
between sentences that has the same hashCode, but even with a 1GB heap I ran
out of memory after comparing 200k sentences.

Any other ideas?


Regards
Dave Kor.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 12 18:46:31 2005
Return-Path: <java-user-return-14888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29254 invoked from network); 12 Jun 2005 18:46:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2005 18:46:31 -0000
Received: (qmail 98856 invoked by uid 500); 12 Jun 2005 18:46:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98834 invoked by uid 500); 12 Jun 2005 18:46:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98778 invoked by uid 99); 12 Jun 2005 18:46:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.193 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 12 Jun 2005 11:46:17 -0700
Received: by rproxy.gmail.com with SMTP id c51so406758rne
        for <java-user@lucene.apache.org>; Sun, 12 Jun 2005 11:46:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=U1hoZhsv7Q9KOV3Wvp+ncTTPLf4vMrKpABPJCfAjBru/ws2zPiWq/reor8pYGuKUlqQZg1g5t6vtdorjGHZJkt9I+blKmeZFiPmYvHn2P8D7WYU6PAtG8ELCTFfrXNGvYJyCS121ZF2gQ1L+ymxxPGcyb8i/IwC2RsH1GruAsEY=
Received: by 10.38.101.36 with SMTP id y36mr639950rnb;
        Sun, 12 Jun 2005 11:46:08 -0700 (PDT)
Received: by 10.38.104.77 with HTTP; Sun, 12 Jun 2005 11:46:08 -0700 (PDT)
Message-ID: <88c6a67205061211465fc2bd23@mail.gmail.com>
Date: Sun, 12 Jun 2005 13:46:08 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Ideas Needed - Finding Duplicate Documents
In-Reply-To: <1118587070.42ac48be751be@sms.ed.ac.uk>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42ABFE88.8050206@axtelsoft.com>
	 <1118587070.42ac48be751be@sms.ed.ac.uk>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dave,

Can you define exactly what you consider "duplicate sentences"?  Is it
the same exact string, or the same words in the same order, or the
same words in any order, etc?

If you can normalize each sentence first, so two "duplicate" sentences
are always the exact same string, then you should be able to fit a
hash of each sentence in RAM.  By hash, I mean a
cryptographic-strength hash, such as MD5.  The big difference between
an MD5 hash and a hashCode() hash is you won't get collisions with the
MD5 hash.  (More accurately, the probability of two different objects
having the same MD5 hash is astronomically low).  Each MD5 takes 16
bytes, so 16 * 25M sentences =3D 400MB of memory.  You can probably get
away with a smaller hash in your case, maybe half of an MD5 (64 bits),
saving you RAM.  You could also store this MD5 in your lucene index as
a keyword field (after converting the 16-byte MD5 value into a 32-byte
hex string, for example), providing a fast way to find duplicates at
search time.

If you can give more details on your requirements, people in this list
can probably come up with some pretty good solutions.

-chris

On 6/12/05, Dave Kor <s0454888@sms.ed.ac.uk> wrote:
> Hi,
>=20
> I would like to poll the community's opinion on good strategies for ident=
ifying
> duplicate documents in a lucene index.
>=20
> You see, I have an index containing roughly 25 million lucene documents. =
My task
> requires me to work at sentence level so each lucene document actually co=
ntains
> exactly one sentence. The issue I have right now is that sometimes, certa=
in
> sentences are duplicated and I'ld like to be able to identify them as a B=
itSet
> so that I can filter away these duplicates in my search.
>=20
> Obviously the brute force method of pairwise compares would take forever.=
 I have
> tried grouping sentences using their hashCodes() and then do a pairwise c=
ompare
> between sentences that has the same hashCode, but even with a 1GB heap I =
ran
> out of memory after comparing 200k sentences.
>=20
> Any other ideas?
>=20
>=20
> Regards
> Dave Kor.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 12 21:34:29 2005
Return-Path: <java-user-return-14889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83032 invoked from network); 12 Jun 2005 21:34:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2005 21:34:29 -0000
Received: (qmail 78953 invoked by uid 500); 12 Jun 2005 21:34:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78918 invoked by uid 500); 12 Jun 2005 21:34:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78898 invoked by uid 99); 12 Jun 2005 21:34:23 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from grassmarket.ucs.ed.ac.uk (HELO grassmarket.ucs.ed.ac.uk) (129.215.166.64)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 12 Jun 2005 14:34:20 -0700
Received: from grassmarket.ucs.ed.ac.uk (localhost [127.0.0.1])
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.10) with ESMTP id j5CLYG1a025320;
	Sun, 12 Jun 2005 22:34:16 +0100 (BST)
Received: (from nobody@localhost)
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.9/Submit) id j5CLYFgA025315;
	Sun, 12 Jun 2005 22:34:15 +0100 (BST)
X-Authentication-Warning: grassmarket.ucs.ed.ac.uk: nobody set sender to s0454888@sms.ed.ac.uk using -f
Received: from beans.cache.ed.ac.uk (beans.cache.ed.ac.uk [129.215.16.12]) 
	by sms.ed.ac.uk (IMP) with HTTP 
	for <s0454888@sms.ed.ac.uk>; Sun, 12 Jun 2005 22:34:15 +0100
Message-ID: <1118612055.42acaa57af6bd@sms.ed.ac.uk>
Date: Sun, 12 Jun 2005 22:34:15 +0100
From: Dave Kor <s0454888@sms.ed.ac.uk>
To: java-user@lucene.apache.org, Chris Lamprecht <clamprecht@gmail.com>
Subject: Re: Ideas Needed - Finding Duplicate Documents
References: <42ABFE88.8050206@axtelsoft.com>  <1118587070.42ac48be751be@sms.ed.ac.uk> <88c6a67205061211465fc2bd23@mail.gmail.com>
In-Reply-To: <88c6a67205061211465fc2bd23@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.3
X-Scanned-By: MIMEDefang 2.33 (www . roaringpenguin . com / mimedefang)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the quick reply, Chris.

Yes, when I say "duplicate" sentences, they are exact copies of the same string.

The MD5 hash is a good idea, I wish I had thought of it earlier as it would have
saved me a lot of trouble. Right now it is not feasible to reindex again because
indexing is a very slow and cpu intensive task for me. I'm adding
part-of-speech, chunk, named entity and coreference information as I index,
which means it takes 4 separate servers and 4-5 days of processing to create a
new index. And as far as I know, you can't change the index once its created.
Am I correct?

Any other ideas that don't require me to re-index the whole thing?


Quoting Chris Lamprecht <clamprecht@gmail.com>:

> Dave,
>
> Can you define exactly what you consider "duplicate sentences"?  Is it
> the same exact string, or the same words in the same order, or the
> same words in any order, etc?
>
> If you can normalize each sentence first, so two "duplicate" sentences
> are always the exact same string, then you should be able to fit a
> hash of each sentence in RAM.  By hash, I mean a
> cryptographic-strength hash, such as MD5.  The big difference between
> an MD5 hash and a hashCode() hash is you won't get collisions with the
> MD5 hash.  (More accurately, the probability of two different objects
> having the same MD5 hash is astronomically low).  Each MD5 takes 16
> bytes, so 16 * 25M sentences = 400MB of memory.  You can probably get
> away with a smaller hash in your case, maybe half of an MD5 (64 bits),
> saving you RAM.  You could also store this MD5 in your lucene index as
> a keyword field (after converting the 16-byte MD5 value into a 32-byte
> hex string, for example), providing a fast way to find duplicates at
> search time.
>
> If you can give more details on your requirements, people in this list
> can probably come up with some pretty good solutions.
>
> -chris
>
> On 6/12/05, Dave Kor <s0454888@sms.ed.ac.uk> wrote:
> > Hi,
> >
> > I would like to poll the community's opinion on good strategies for
> identifying
> > duplicate documents in a lucene index.
> >
> > You see, I have an index containing roughly 25 million lucene documents. My
> task
> > requires me to work at sentence level so each lucene document actually
> contains
> > exactly one sentence. The issue I have right now is that sometimes, certain
> > sentences are duplicated and I'ld like to be able to identify them as a
> BitSet
> > so that I can filter away these duplicates in my search.
> >
> > Obviously the brute force method of pairwise compares would take forever. I
> have
> > tried grouping sentences using their hashCodes() and then do a pairwise
> compare
> > between sentences that has the same hashCode, but even with a 1GB heap I
> ran
> > out of memory after comparing 200k sentences.
> >
> > Any other ideas?
> >
> >
> > Regards
> > Dave Kor.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 12 22:46:39 2005
Return-Path: <java-user-return-14890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93191 invoked from network); 12 Jun 2005 22:46:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2005 22:46:39 -0000
Received: (qmail 80840 invoked by uid 500); 12 Jun 2005 22:46:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80781 invoked by uid 500); 12 Jun 2005 22:46:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 40339 invoked by uid 99); 12 Jun 2005 17:13:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
From: "Karsten Konrad" <karsten.konrad@dacos.com>
To: <java-user@lucene.apache.org>
Subject: AW: Ideas Needed - Finding Duplicate Documents
Date: Sun, 12 Jun 2005 19:16:43 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <1118587070.42ac48be751be@sms.ed.ac.uk>
Thread-Index: AcVvXFfDwYcwKZYRQhCYykGANI8bYwAFFEPA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Message-Id: <20050612171336.CF7D95F802A@mail.deepweb.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

=20
Hi David,

>>
I would like to poll the community's opinion on good strategies for =
identifying
duplicate documents in a lucene index.
>>

Do you mean 100% duplicates or some kind of similarity?

>>
Obviously the brute force method of pairwise compares would take =
forever. I have tried
grouping sentences using their hashCodes() and then do a pairwise =
compare between
sentences that has the same hashCode, but even with a 1GB heap I ran out =
of memory
after comparing 200k sentences.
>>

If you are only after 100% duplicates, you are on the right track with
hash code.

You could encode the hash code of the strings into the index by adding =
it into a
separate field - your analyzer must index numbers for this! Then, =
iterate over all
tokens of that field, retrieving each document enumerator; wherever you =
find more than
one document, do the pairwise comparision as usual. This way, you should =
never need to
compare more than a few documents.

All the best,

Karsten

--

Dr.-Ing. Karsten Konrad

Research & Development
DACOS Software GmbH
Stuhlsatzenhausweg 3
D-66123 Saarbr=FCcken
http://www.dacos.com

Tel: ++49/ (0) 681 - 302 64834
Fax: ++49/ (0) 681 - 302 64827



-----Urspr=FCngliche Nachricht-----
Von: Dave Kor [mailto:s0454888@sms.ed.ac.uk]=20
Gesendet: Sonntag, 12. Juni 2005 16:38
An: java-user@lucene.apache.org
Betreff: Ideas Needed - Finding Duplicate Documents

Hi,

I would like to poll the community's opinion on good strategies for =
identifying
duplicate documents in a lucene index.

You see, I have an index containing roughly 25 million lucene documents. =
My task
requires me to work at sentence level so each lucene document actually =
contains exactly
one sentence. The issue I have right now is that sometimes, certain =
sentences are
duplicated and I'ld like to be able to identify them as a BitSet so that =
I can filter
away these duplicates in my search.

Obviously the brute force method of pairwise compares would take =
forever. I have tried
grouping sentences using their hashCodes() and then do a pairwise =
compare between
sentences that has the same hashCode, but even with a 1GB heap I ran out =
of memory
after comparing 200k sentences.

Any other ideas?


Regards
Dave Kor.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 12 22:57:25 2005
Return-Path: <java-user-return-14891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94359 invoked from network); 12 Jun 2005 22:57:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2005 22:57:25 -0000
Received: (qmail 97704 invoked by uid 500); 12 Jun 2005 22:57:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96938 invoked by uid 500); 12 Jun 2005 22:57:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96922 invoked by uid 99); 12 Jun 2005 22:57:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.204 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 12 Jun 2005 15:57:17 -0700
Received: by rproxy.gmail.com with SMTP id c51so418566rne
        for <java-user@lucene.apache.org>; Sun, 12 Jun 2005 15:57:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=VliGDe2m6Upm2e+FouiaZKy+R/TOFNJKThhahLZDYyULwYlDXDTgAmJ1TqVYKe2XtNOBpk3HbUTGRerJ55IUoQkmVRHHnB2VexJbJ+pr0uH0U/Cvqkk2OKP0xiZP4iYKe0D6fG9sGrvyV5cLV+7qrr4ZfAYjfRnMtN5tS0hpXJ4=
Received: by 10.38.66.68 with SMTP id o68mr703830rna;
        Sun, 12 Jun 2005 15:57:15 -0700 (PDT)
Received: by 10.38.104.77 with HTTP; Sun, 12 Jun 2005 15:57:15 -0700 (PDT)
Message-ID: <88c6a67205061215577c9955ae@mail.gmail.com>
Date: Sun, 12 Jun 2005 17:57:15 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org, Dave Kor <s0454888@sms.ed.ac.uk>
Subject: Re: Ideas Needed - Finding Duplicate Documents
In-Reply-To: <1118612055.42acaa57af6bd@sms.ed.ac.uk>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42ABFE88.8050206@axtelsoft.com>
	 <1118587070.42ac48be751be@sms.ed.ac.uk>
	 <88c6a67205061211465fc2bd23@mail.gmail.com>
	 <1118612055.42acaa57af6bd@sms.ed.ac.uk>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'd have to see your indexing code to see if there are any obvious
performance gotchas there.  If you can run your indexer under a
profiler (OptimizeIt, JProbe, or just the free one with java using
-Xprof), it will tell you in which methods most of your CPU time is
spent.  If you're using StandardAnalyzer, then this may be it --
StandardAnalyzer is a fairly advanced grammar-based parser, but it is
pretty slow.  If you don't need its functionality, then try using a
simpler Analyzer, (like WhitespaceAnalyzer or a subclass).

As far as changing a document within an index -- there is no "update"
operation for documents, there's just delete and add (and then
optimize).  Delete only marks docs as deleted (so they don't come back
in search results); they aren't physically removed from the index
files until you optimize.

Also, it isn't fatal that your current index doesn't have MD5 info in
it.  It's pretty fast to compute MD5 at search time for each document
returned (much faster than the I/O-bound part -- actually retrieving
the docs from the Lucene index).  So you could try just doing all your
duplicate detection at search time.  If this is too slow, you could
consider caching the computed MD5 for your docs.

-chris

On 6/12/05, Dave Kor <s0454888@sms.ed.ac.uk> wrote:
> Thanks for the quick reply, Chris.
>=20
> Yes, when I say "duplicate" sentences, they are exact copies of the same =
string.
>=20
> The MD5 hash is a good idea, I wish I had thought of it earlier as it wou=
ld have
> saved me a lot of trouble. Right now it is not feasible to reindex again =
because
> indexing is a very slow and cpu intensive task for me. I'm adding
> part-of-speech, chunk, named entity and coreference information as I inde=
x,
> which means it takes 4 separate servers and 4-5 days of processing to cre=
ate a
> new index. And as far as I know, you can't change the index once its crea=
ted.
> Am I correct?
>=20
> Any other ideas that don't require me to re-index the whole thing?
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 12 23:29:43 2005
Return-Path: <java-user-return-14892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98569 invoked from network); 12 Jun 2005 23:29:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jun 2005 23:29:43 -0000
Received: (qmail 36038 invoked by uid 500); 12 Jun 2005 23:29:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36000 invoked by uid 500); 12 Jun 2005 23:29:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35983 invoked by uid 99); 12 Jun 2005 23:29:39 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 12 Jun 2005 16:29:37 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F1C675B78C; Sun, 12 Jun 2005 16:29:33 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP
	id E8A5F7F45E; Sun, 12 Jun 2005 16:29:33 -0700 (PDT)
Date: Sun, 12 Jun 2005 16:29:33 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Cc: Chris Lamprecht <clamprecht@gmail.com>
Subject: Re: Ideas Needed - Finding Duplicate Documents
In-Reply-To: <1118612055.42acaa57af6bd@sms.ed.ac.uk>
Message-ID: <Pine.LNX.4.58.0506121623150.2227@hal.rescomp.berkeley.edu>
References: <42ABFE88.8050206@axtelsoft.com>  <1118587070.42ac48be751be@sms.ed.ac.uk>
 <88c6a67205061211465fc2bd23@mail.gmail.com> <1118612055.42acaa57af6bd@sms.ed.ac.uk>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Yes, when I say "duplicate" sentences, they are exact copies of the same
: string.

you still haven't explained how you indexed these sentences, what do you
mean by "each lucene document actually contains exactly one sentence." ?

Did you tokenize the sentence into one field? do you a field for verbs and
a field for nouns?  what does the structure of your documents look liike?

if (per chance) you have one field in each document that contains the
orriginal, untokenized sentence as an indexed keyword, then finding
duplicates would be pretty damn easy by iterating over a TermEnum on that
field and looking or any term in more then one document.

admitedly, that's a pretty contrived case, and most likely that isn't the
situation you are in -- but it serves as an example of how understanding
your index structure can help people answer your question.

can you send the code the code you used to index these documents?  that
might help people spot novel ways of finding likely duplicates.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 03:57:06 2005
Return-Path: <java-user-return-14893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66186 invoked from network); 13 Jun 2005 03:57:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 03:57:06 -0000
Received: (qmail 18998 invoked by uid 500); 13 Jun 2005 03:56:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18928 invoked by uid 500); 13 Jun 2005 03:56:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18897 invoked by uid 99); 13 Jun 2005 03:56:57 -0000
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fersher@hotmail.com designates 65.54.224.23 as permitted sender)
Received: from bay105-f13.bay105.hotmail.com (HELO hotmail.com) (65.54.224.23)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 12 Jun 2005 20:56:55 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Sun, 12 Jun 2005 20:56:47 -0700
Message-ID: <BAY105-F137C2C2D1D2C656AB24604B2F00@phx.gbl>
Received: from 65.54.224.200 by by105fd.bay105.hotmail.msn.com with HTTP;
	Mon, 13 Jun 2005 03:56:47 GMT
X-Originating-IP: [65.54.224.200]
X-Originating-Email: [fersher@hotmail.com]
X-Sender: fersher@hotmail.com
From: "christopher may" <fersher@hotmail.com>
To: java-user@lucene.apache.org
Cc: general-help@lucene.apache.org
Bcc: 
Subject: Mobile Lucene
Date: Sun, 12 Jun 2005 23:56:47 -0400
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 13 Jun 2005 03:56:47.0464 (UTC) FILETIME=[EBC6B680:01C56FCB]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey all I am working on a project that requires a search engine on a 
embedded linux that is also bluetooth capable. Is there a lucene mobile or 
can I recompile the code in the J2me wireless toolkit ? Any help would be 
appreciated, Thanks



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 06:24:35 2005
Return-Path: <java-user-return-14894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96778 invoked from network); 13 Jun 2005 06:24:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 06:24:35 -0000
Received: (qmail 71717 invoked by uid 500); 13 Jun 2005 06:24:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71648 invoked by uid 500); 13 Jun 2005 06:24:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71634 invoked by uid 99); 13 Jun 2005 06:24:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 69.182.12.190.adsl.snet.net (HELO sharelogic) (69.182.12.190)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 12 Jun 2005 23:24:22 -0700
X-WM-Posted-At: sharelogic; Mon, 13 Jun 05 02:12:20 -0400
X-WebMail-UserID:  sthota
Date: Mon, 13 Jun 2005 02:12:20 -0400
Sender: sriram Thota <sthota@sharelogicinc.com>
From: sriram Thota <sthota@sharelogicinc.com>
To: java-user@lucene.apache.org
X-EXP32-SerialNo: 50000117
Subject: Some problems with lucene in searching
Message-ID: <42A9CE84@sharelogic>
Mime-Version: 1.0
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit
X-Mailer: InterChange (Hydra) SMTP v3.61
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

   I am working on lucene.I had seen ur suggestion about lucene in google 
search.Iam facing some problems in searching.Please go through my sample code 
and suggest me where i had gone wrong.

I will be thankful to you.



This is my sample code:

private static Document createDocument(File fFile) {
Document document = new Document();
try{
   // here the contents of the file "file.txt" are converted to document 
object.
   document.add(Field.Text("sFileDoc",new FileReader (fFile)));
   }catch(FileNotFoundException fnfe) {
   ;
   }
return document;
}


public static void indexDocs(IndexWriter writer , File file) throws
IOException{
String[] files = new String[]{};
File fFile = new File("file.txt");
Document doc = new Document();
int iCount = 0;
BufferedWriter out = null;
if (file.canRead()) {
    if (file.isDirectory()) {
    files = file.list();
    if (files != null) {
        for (int i = 0; i < files.length; i++) {
        indexDocs(writer, new File(file, files[i]));
        iCount++;
        }
     }
     }else {
        sFile = sFile+file.getName();
     }
   }
if(files.length == iCount){
try{
   out = new BufferedWriter(new FileWriter(fFile));
   //here iam writing the names of files to file.txt
   out.write(sFile.toLowerCase());
   //here iam converting the file.txt to document object
   doc = createDocument(fFile);
   writer.addDocument(doc);
   out.close();
   }catch(Exception excep){
   ;
   }
}
}

   Here i am able to write the names of the files in file.txt and able to 
index file.txt and before indexing i had converted the file names to 
lowercase,but iam not able to search with filenames.Iam giving the complete 
filename.

Please help me.


                                                                       
Sriram.T


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 08:32:29 2005
Return-Path: <java-user-return-14895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53039 invoked from network); 13 Jun 2005 08:32:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 08:32:29 -0000
Received: (qmail 2289 invoked by uid 500); 13 Jun 2005 08:32:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2221 invoked by uid 500); 13 Jun 2005 08:32:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2203 invoked by uid 99); 13 Jun 2005 08:32:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 69.182.12.190.adsl.snet.net (HELO sharelogic) (69.182.12.190)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 01:32:17 -0700
X-WM-Posted-At: sharelogic; Mon, 13 Jun 05 04:20:23 -0400
X-WebMail-UserID:  sthota
Date: Mon, 13 Jun 2005 04:20:23 -0400
Sender: sriram Thota <sthota@sharelogicinc.com>
From: sriram Thota <sthota@sharelogicinc.com>
To: java-user@lucene.apache.org
X-EXP32-SerialNo: 50000117
Subject: Some problems with lucene in searching
Message-ID: <42A9CEA8@sharelogic>
Mime-Version: 1.0
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit
X-Mailer: InterChange (Hydra) SMTP v3.61
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

   I am working on lucene.I had seen ur suggestion about lucene in google
search.Iam facing some problems in searching.Please go through my sample code
and suggest me where i had gone wrong.

I will be thankful to you.



This is my sample code:

private static Document createDocument(File fFile) {
Document document = new Document();
try{
   // here the contents of the file "file.txt" are converted to document
object.
   document.add(Field.Text("sFileDoc",new FileReader (fFile)));
   }catch(FileNotFoundException fnfe) {
   ;
   }
return document;
}


public static void indexDocs(IndexWriter writer , File file) throws
IOException{
String[] files = new String[]{};
File fFile = new File("file.txt");
Document doc = new Document();
int iCount = 0;
BufferedWriter out = null;
if (file.canRead()) {
    if (file.isDirectory()) {
    files = file.list();
    if (files != null) {
        for (int i = 0; i < files.length; i++) {
        indexDocs(writer, new File(file, files[i]));
        iCount++;
        }
     }
     }else {
        sFile = sFile+file.getName();
     }
   }
if(files.length == iCount){
try{
   out = new BufferedWriter(new FileWriter(fFile));
   //here iam writing the names of files to file.txt
   out.write(sFile.toLowerCase());
   //here iam converting the file.txt to document object
   doc = createDocument(fFile);
   writer.addDocument(doc);
   out.close();
   }catch(Exception excep){
   ;
   }
}
}

   Here i am able to write the names of the files in file.txt and able to
index file.txt and before indexing i had converted the file names to
lowercase,but iam not able to search with filenames.Iam giving the complete
filename.

Please help me.


                                                                      Sriram.T


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 09:52:27 2005
Return-Path: <java-user-return-14896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76751 invoked from network); 13 Jun 2005 09:52:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 09:52:27 -0000
Received: (qmail 77842 invoked by uid 500); 13 Jun 2005 09:52:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77790 invoked by uid 500); 13 Jun 2005 09:52:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77754 invoked by uid 99); 13 Jun 2005 09:52:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from spooler.completel.net (HELO spooler2.completel.net) (83.145.110.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 02:52:13 -0700
Received: from smtp-out.completel.net (smtp-out.completel.net [83.145.110.36])
	by spooler2.completel.net (8.13.1/8.13.1) with ESMTP id j5D9K27h019701;
	Mon, 13 Jun 2005 11:20:02 +0200
Received: from [192.168.1.195] (unknown [213.30.157.202])
	by smtp-out.completel.net (Postfix) with ESMTP
	id 8836128005F; Mon, 13 Jun 2005 11:19:57 +0200 (CEST)
Message-ID: <42AD4EAF.9010707@opsys.fr>
Date: Mon, 13 Jun 2005 11:15:27 +0200
From: Antoine Brun <abrun@opsys.fr>
User-Agent: Mozilla Thunderbird 1.0 (X11/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Subject: Re: How to navigate through indexed terms
References: <s2943cc3.020@gwia201.syr.edu>
In-Reply-To: <s2943cc3.020@gwia201.syr.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

thanks for the hint.
I guess that the best solution would be to implement a previous() method.
I was wondering if anyone has ever planned on doing this?

Antoine Brun

>
>Of course, you could also add a previous() method into the source and
>submit the patch, as the code would be very similar to the next()
>functionality, I think.
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 11:06:05 2005
Return-Path: <java-user-return-14897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25047 invoked from network); 13 Jun 2005 11:06:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 11:06:04 -0000
Received: (qmail 51647 invoked by uid 500); 13 Jun 2005 11:05:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51614 invoked by uid 500); 13 Jun 2005 11:05:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51601 invoked by uid 99); 13 Jun 2005 11:05:57 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 04:05:53 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id EE76FE4815
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 13:05:41 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id DB1E8E4801
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 13:05:41 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <1118587070.42ac48be751be@sms.ed.ac.uk>
References: <42ABFE88.8050206@axtelsoft.com> <1118587070.42ac48be751be@sms.ed.ac.uk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <5c45d174755c96a26bb3e0a26dd54b11@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: Ideas Needed - Finding Duplicate Documents
Date: Mon, 13 Jun 2005 13:04:40 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Have you tried comparing TermVectors ?
I would expect them, or an adjustment of them, to allow comparison to=20
focus on "important terms" (e.g. about a 100-200 terms) and then allow=20=

a more reasonable computation.

paul


Le 12 juin 05, =E0 16:37, Dave Kor a =E9crit :

> Hi,
>
> I would like to poll the community's opinion on good strategies for=20
> identifying
> duplicate documents in a lucene index.
>
> You see, I have an index containing roughly 25 million lucene=20
> documents. My task
> requires me to work at sentence level so each lucene document actually=20=

> contains
> exactly one sentence. The issue I have right now is that sometimes,=20
> certain
> sentences are duplicated and I'ld like to be able to identify them as=20=

> a BitSet
> so that I can filter away these duplicates in my search.
>
> Obviously the brute force method of pairwise compares would take=20
> forever. I have
> tried grouping sentences using their hashCodes() and then do a=20
> pairwise compare
> between sentences that has the same hashCode, but even with a 1GB heap=20=

> I ran
> out of memory after comparing 200k sentences.
>
> Any other ideas?
>
>
> Regards
> Dave Kor.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 11:35:15 2005
Return-Path: <java-user-return-14898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38608 invoked from network); 13 Jun 2005 11:35:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 11:35:15 -0000
Received: (qmail 24368 invoked by uid 500); 13 Jun 2005 11:35:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24345 invoked by uid 500); 13 Jun 2005 11:35:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24332 invoked by uid 99); 13 Jun 2005 11:35:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of markus.wiederkehr@gmail.com designates 64.233.184.206 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 04:35:03 -0700
Received: by wproxy.gmail.com with SMTP id 50so1441542wri
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 04:34:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=IPOhthao3SvlhQOZ3XFl+mV/8zqm8MhNQYuGlBX7UCRRMXJtZ+bWqvHv1OUFbeSqPDBOZJYgy1HHLBdCxriV+vxTIp1QZ6onaZyorTL3d7whXMegC8v5cVVCLmGRqMe19qPktMlgqSd9iPRG9fDyGJyWmOGMGtQYD3PaqojUyco=
Received: by 10.54.86.2 with SMTP id j2mr2450975wrb;
        Mon, 13 Jun 2005 04:08:06 -0700 (PDT)
Received: by 10.54.51.73 with HTTP; Mon, 13 Jun 2005 04:08:04 -0700 (PDT)
Message-ID: <a92573960506130408576f0883@mail.gmail.com>
Date: Mon, 13 Jun 2005 13:08:04 +0200
From: Markus Wiederkehr <markus.wiederkehr@gmail.com>
Reply-To: Markus Wiederkehr <markus.wiederkehr@gmail.com>
To: Lucene users <java-user@lucene.apache.org>
Subject: Hypenated word
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I work on an application that has to index OCR texts of scanned books.
Naturally there occur many words that are hyphenated across lines.

I wonder if there is already an Analyzer or maybe a TokenFilter that
can merge those syllables back into whole words? It looks like Erik
Hatcher uses something like that at http://www.lucenebook.com/.

Thanks in advance,

Markus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 11:48:18 2005
Return-Path: <java-user-return-14899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43063 invoked from network); 13 Jun 2005 11:48:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 11:48:18 -0000
Received: (qmail 52006 invoked by uid 500); 13 Jun 2005 11:48:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51985 invoked by uid 500); 13 Jun 2005 11:48:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51972 invoked by uid 99); 13 Jun 2005 11:48:10 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FORGED_RCVD_HELO,WEIRD_QUOTING
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mx1.idowa.net (HELO mx1.idowa.net) (217.7.81.164)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 04:48:05 -0700
Received: from mx1.idowa.net (localhost [127.0.0.1])
	by mx1-int.idowa.de (Postfix) with ESMTP id 44E1D1013C9
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 13:47:47 +0200 (CEST)
Received: from mail0.vn.idowa.de (vl-gw-float.sr.idowa.net [217.7.81.140])
	by mx1-sa.idowa.net (Postfix) with ESMTP id 3417E1013C4
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 13:47:47 +0200 (CEST)
Received: from [192.168.31.5] (unknown [192.168.31.5])
	by mail0.vn.idowa.de (Postfix) with ESMTP id 0332FA543
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 13:47:47 +0200 (CEST)
Message-ID: <42AD7234.1030607@idowa.de>
Date: Mon, 13 Jun 2005 13:47:00 +0200
From: Harald Stowasser <stowasser.h@idowa.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; de-AT; rv:1.7.2) Gecko/20040803
X-Accept-Language: de, en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: TooManyClauses in BooleanQuery
X-Enigmail-Version: 0.86.1.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enig4C2EA3A27E96BBB47F29765E"
X-Spam-Checker-Version: SpamAssassin 3.0.0 (2004-09-13) on hermes.idowa.de
X-Spam-Level: 
X-Spam-Status: No, score=-0.3 required=5.0 tests=AWL,BAYES_50,WEIRD_QUOTING 
	autolearn=no version=3.0.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------enig4C2EA3A27E96BBB47F29765E
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hello lucene-list readers,

first I want to introduce myself a little. Because I am new at this List:

I am a programmer in a publishing company, 32 years of Age and you can
find my picture at http://www.idowa.de/service/kontakt.
We release some local newspapers and a website (http://www.idowa.de)
with the main focus on regional content.

We use Lucene to create an index over the whole newspaper and website
content. So there is more than 2GB text to indicate.

And now I will tell you my problems in my implementation[1]:

1. Sorting by Date is ruinously slow. So I deactivated it.
2. Because the sorting is so slow, I want to allow the user specifying a
Date-Range. But Lucene throws an BooleanQuery$TooManyClauses[2].
Anywhere I read if you give lucene a higher MaxClauseCount, this will
solve that Problem. But it doesn't work :-(
3. I also read that we should save the Date as YYYYMMDD-String. I don't
like this solution, because I don't know that this will work. And then I
have to reindex the whole Data!

So could you give me a little hint, how i can solve my Date-Prblems?



[1]
Implementation:

  BooleanQuery query= new BooleanQuery();
  query.setMaxClauseCount(262144);
  Query q1= QueryParser.parse(query,"content",analyzer);
  query.add(q1,true,false);
  if(area.length()>2)
  {
    Query q2=new TermQuery( new Term("bereich",area) );
    query.add(q2,true,false);
  }
  try {
    DateFormat df = DateFormat.getDateInstance(
       DateFormat.DATE_FIELD, Locale.GERMAN);
    df.setLenient(true);
    Date d1 = df.parse(date_from);
    Date d2 = df.parse(date_to);
    date_from = DateField.dateToString(d1);
    date_to = DateField.dateToString(d2);
  }   catch (Exception e) { }
  Query q3=new RangeQuery( new Term("datum",date_from),
                           new Term("datum",date_to),true );
  query.add(q3,true,false);
  /*Sort csort= new Sort();
  if (sort.length()>2)
  {
     csort.setSort(sort,reverse);
  }*/
  Hits hits = searcher.search(query);
  //Hits hits = searcher.search(query,csort);
  makeOutput(hits, start, length);
  Date ende= new Date();
  long zeit=(ende.getTime()-anfang.getTime())/100 ;
  ausgabe.append("|" + (float)zeit/10);



  private void makeOutput(Hits hits,int start,int length)
    throws Exception
  {
    int i=start;
    if (hits.length()>0)
    {
      ausgabe.append("<table>");
      for (;(i<hits.length() && (i<start+length));i++)
      {
        Document doc=hits.doc(i);
        ausgabe.append("<tr><td>");
        ausgabe.append(doc.getField("bereich").stringValue()
        ausgabe.append(""</td><td>"");
        DateFormat df = DateFormat.getDateInstance(
          DateFormat.DATE_FIELD, Locale.GERMAN);
        df.setLenient(true);
        ausgabe.append(df.format(
          DateField.stringToDate(doc.getField("datum").stringValue())));
        ausgabe.append("</td><td>");
        ausgabe.append("<a href=\""+doc.getField("link").stringValue());
        ausgabe.append(doc.getField("content_id").stringValue()+ "\">");
        ausgabe.append(doc.getField("content_vorschau").stringValue()
        ausgabe.append("</a>");
        ausgabe.append("</td></tr>");
      }
      ausgabe.append("</table>");
    }
    ausgabe.append("|X|" + hits.length() + "|" + start + "|" + i);
  }

__________________________________________________

[2]
StackTrace:

org.apache.lucene.search.BooleanQuery$TooManyClauses
        at org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:79)
        at org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:71)
        at org.apache.lucene.search.RangeQuery.rewrite(RangeQuery.java:99)
        at
org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:243)
        at
org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:166)
        at org.apache.lucene.search.Query.weight(Query.java:84)
        at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:117)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:51)
        at org.apache.lucene.search.Searcher.search(Searcher.java:41)
        at suchmaschine.LuceneSearcher.erweitert(LuceneSearcher.java:138)
        at suchmaschine.XmlRpcSearcher.erweitert(XmlRpcSearcher.java:49)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.xmlrpc.Invoker.execute(Invoker.java:168)
        at
org.apache.xmlrpc.XmlRpcWorker.invokeHandler(XmlRpcWorker.java:123)
        at org.apache.xmlrpc.XmlRpcWorker.execute(XmlRpcWorker.java:185)
        at org.apache.xmlrpc.XmlRpcServer.execute(XmlRpcServer.java:151)
        at org.apache.xmlrpc.XmlRpcServer.execute(XmlRpcServer.java:139)
        at org.apache.xmlrpc.WebServer$Connection.run(WebServer.java:773)
        at org.apache.xmlrpc.WebServer$Runner.run(WebServer.java:656)
        at java.lang.Thread.run(Thread.java:595)

__________________________________________________
[3]
My Fields:
  neu.setBoost( boost  );
  neu.add(Field.UnStored("content",content));
  neu.add(Field.Keyword("keyword",keyword));
  ConfDate date = new ConfDate(datum);
  neu.add(Field.Keyword("datum",(Date)date.getUtilDate()));
  neu.add(Field.UnIndexed("content_vorschau",content_vorschau));
  neu.add(Field.UnIndexed("content_id",""+content_id));
  neu.add(Field.UnIndexed("zeitstempel",zeitstempel));
  neu.add(Field.UnIndexed("link",link));
  neu.add(Field.Keyword("bereich",bereich));
  index.addDocument(neu);



--------------enig4C2EA3A27E96BBB47F29765E
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFCrXI4d2ByLviqWmYRAgF6AJ4wWC7qY7RKgBmX7D3OKydqFUsD8ACeNBWV
55XPMsO+C5OC0dTQpsOYrqo=
=QHW9
-----END PGP SIGNATURE-----

--------------enig4C2EA3A27E96BBB47F29765E--


From java-user-return-14900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 12:17:04 2005
Return-Path: <java-user-return-14900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53126 invoked from network); 13 Jun 2005 12:17:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 12:17:04 -0000
Received: (qmail 15201 invoked by uid 500); 13 Jun 2005 12:16:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15169 invoked by uid 500); 13 Jun 2005 12:16:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15136 invoked by uid 99); 13 Jun 2005 12:16:57 -0000
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_40_50,HTML_FONT_INVISIBLE,HTML_MESSAGE,NO_REAL_NAME,WEIRD_QUOTING
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.makrolog.de (HELO mail.makrolog.de) (213.216.6.131)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 05:16:53 -0700
Received: from notes30.makrolog.de ([192.168.0.72])
          by mail.makrolog.de (Lotus Domino Release 6.5.4)
          with ESMTP id 2005061314030846-9371 ;
          Mon, 13 Jun 2005 14:03:08 +0200 
In-Reply-To: <42AD7234.1030607@idowa.de>
To: java-user@lucene.apache.org
Subject: Re: TooManyClauses in BooleanQuery
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.2 June 01, 2004
Message-ID: <OF14B099F4.6BB89CBD-ONC125701F.0041DA9A-C125701F.00423272@makrolog.de>
From: a.herberger@makrolog.de
Date: Mon, 13 Jun 2005 14:03:02 +0200
X-MIMETrack: Serialize by Router on notes30.makrolog.de/Makrolog(Release 6.5.4|March 27, 2005) at
 13.06.2005 14:03:08,
	Serialize complete at 13.06.2005 14:03:08,
	Itemize by SMTP Server on notes31.makrolog.de/Makrolog(Release 6.5.4|March
 27, 2005) at 13.06.2005 14:03:08,
	Serialize by Router on notes31.makrolog.de/Makrolog(Release 6.5.4|March 27, 2005) at
 13.06.2005 14:16:52,
	Serialize complete at 13.06.2005 14:16:52
Content-Type: multipart/alternative; boundary="=_alternative 0042326DC125701F_="
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=_alternative 0042326DC125701F_=
Content-Type: text/plain; charset="US-ASCII"

Hi Harald,

its nice too see, that there are others out there in Germany dealing with 
the same problems as we have been doing in the past years :-)

So for the "too many clauses" problem I have a solution for you, that I 
want to share:
Just include somewhere at the very beginning of your program (retrieval 
part) the call:

BooleanQuery.setMaxClauseCount(1000*1000);

We have had similar problems (it applies also to searches with left 
truncation: *word) and could work around this quite good with increasing 
this setting.

Regarding the sorting we have also implemented our own class (at the time 
beeing there was no sorting support in Lucene), but this was very 
application specific and we had to limit it to about 5000 hits we are 
sorting due to speed limitations. I can give you more information on this, 
if you want.

Hope, I have been of some help
best regards from Wiesbaden

Andreas M. Herberger
mailto: aherberger@makrolog.de
http://www.makrolog.de






Harald Stowasser <stowasser.h@idowa.de> 
13.06.2005 13:47

Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
TooManyClauses in BooleanQuery






Hello lucene-list readers,

first I want to introduce myself a little. Because I am new at this List:

I am a programmer in a publishing company, 32 years of Age and you can
find my picture at http://www.idowa.de/service/kontakt.
We release some local newspapers and a website (http://www.idowa.de)
with the main focus on regional content.

We use Lucene to create an index over the whole newspaper and website
content. So there is more than 2GB text to indicate.

And now I will tell you my problems in my implementation[1]:

1. Sorting by Date is ruinously slow. So I deactivated it.
2. Because the sorting is so slow, I want to allow the user specifying a
Date-Range. But Lucene throws an BooleanQuery$TooManyClauses[2].
Anywhere I read if you give lucene a higher MaxClauseCount, this will
solve that Problem. But it doesn't work :-(
3. I also read that we should save the Date as YYYYMMDD-String. I don't
like this solution, because I don't know that this will work. And then I
have to reindex the whole Data!

So could you give me a little hint, how i can solve my Date-Prblems?



[1]
Implementation:

  BooleanQuery query= new BooleanQuery();
  query.setMaxClauseCount(262144);
  Query q1= QueryParser.parse(query,"content",analyzer);
  query.add(q1,true,false);
  if(area.length()>2)
  {
    Query q2=new TermQuery( new Term("bereich",area) );
    query.add(q2,true,false);
  }
  try {
    DateFormat df = DateFormat.getDateInstance(
       DateFormat.DATE_FIELD, Locale.GERMAN);
    df.setLenient(true);
    Date d1 = df.parse(date_from);
    Date d2 = df.parse(date_to);
    date_from = DateField.dateToString(d1);
    date_to = DateField.dateToString(d2);
  }   catch (Exception e) { }
  Query q3=new RangeQuery( new Term("datum",date_from),
                           new Term("datum",date_to),true );
  query.add(q3,true,false);
  /*Sort csort= new Sort();
  if (sort.length()>2)
  {
     csort.setSort(sort,reverse);
  }*/
  Hits hits = searcher.search(query);
  //Hits hits = searcher.search(query,csort);
  makeOutput(hits, start, length);
  Date ende= new Date();
  long zeit=(ende.getTime()-anfang.getTime())/100 ;
  ausgabe.append("|" + (float)zeit/10);



  private void makeOutput(Hits hits,int start,int length)
    throws Exception
  {
    int i=start;
    if (hits.length()>0)
    {
      ausgabe.append("<table>");
      for (;(i<hits.length() && (i<start+length));i++)
      {
        Document doc=hits.doc(i);
        ausgabe.append("<tr><td>");
        ausgabe.append(doc.getField("bereich").stringValue()
        ausgabe.append(""</td><td>"");
        DateFormat df = DateFormat.getDateInstance(
          DateFormat.DATE_FIELD, Locale.GERMAN);
        df.setLenient(true);
        ausgabe.append(df.format(
          DateField.stringToDate(doc.getField("datum").stringValue())));
        ausgabe.append("</td><td>");
        ausgabe.append("<a href=\""+doc.getField("link").stringValue());
        ausgabe.append(doc.getField("content_id").stringValue()+ "\">");
        ausgabe.append(doc.getField("content_vorschau").stringValue()
        ausgabe.append("</a>");
        ausgabe.append("</td></tr>");
      }
      ausgabe.append("</table>");
    }
    ausgabe.append("|X|" + hits.length() + "|" + start + "|" + i);
  }

__________________________________________________

[2]
StackTrace:

org.apache.lucene.search.BooleanQuery$TooManyClauses
        at org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:79)
        at org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:71)
        at org.apache.lucene.search.RangeQuery.rewrite(RangeQuery.java:99)
        at
org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:243)
        at
org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:166)
        at org.apache.lucene.search.Query.weight(Query.java:84)
        at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:117)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:51)
        at org.apache.lucene.search.Searcher.search(Searcher.java:41)
        at suchmaschine.LuceneSearcher.erweitert(LuceneSearcher.java:138)
        at suchmaschine.XmlRpcSearcher.erweitert(XmlRpcSearcher.java:49)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.xmlrpc.Invoker.execute(Invoker.java:168)
        at
org.apache.xmlrpc.XmlRpcWorker.invokeHandler(XmlRpcWorker.java:123)
        at org.apache.xmlrpc.XmlRpcWorker.execute(XmlRpcWorker.java:185)
        at org.apache.xmlrpc.XmlRpcServer.execute(XmlRpcServer.java:151)
        at org.apache.xmlrpc.XmlRpcServer.execute(XmlRpcServer.java:139)
        at org.apache.xmlrpc.WebServer$Connection.run(WebServer.java:773)
        at org.apache.xmlrpc.WebServer$Runner.run(WebServer.java:656)
        at java.lang.Thread.run(Thread.java:595)

__________________________________________________
[3]
My Fields:
  neu.setBoost( boost  );
  neu.add(Field.UnStored("content",content));
  neu.add(Field.Keyword("keyword",keyword));
  ConfDate date = new ConfDate(datum);
  neu.add(Field.Keyword("datum",(Date)date.getUtilDate()));
  neu.add(Field.UnIndexed("content_vorschau",content_vorschau));
  neu.add(Field.UnIndexed("content_id",""+content_id));
  neu.add(Field.UnIndexed("zeitstempel",zeitstempel));
  neu.add(Field.UnIndexed("link",link));
  neu.add(Field.Keyword("bereich",bereich));
  index.addDocument(neu);


[attachment "signature.asc" deleted by Andreas Herberger/Makrolog] 
ForwardSourceID:NT000DE0DA 

--=_alternative 0042326DC125701F_=--

From java-user-return-14901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 12:31:44 2005
Return-Path: <java-user-return-14901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58015 invoked from network); 13 Jun 2005 12:31:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 12:31:44 -0000
Received: (qmail 48429 invoked by uid 500); 13 Jun 2005 12:31:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48405 invoked by uid 500); 13 Jun 2005 12:31:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48385 invoked by uid 99); 13 Jun 2005 12:31:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of markus.wiederkehr@gmail.com designates 64.233.184.203 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 05:31:35 -0700
Received: by wproxy.gmail.com with SMTP id 50so1460371wri
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 05:31:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=d9sLSsUs6opQvZHYPzCHK3fVaFEd+ie5k3dhREZPDJDDhfRPmXDkP2Hdne9QbgFAP2Otmv32LBBy3kSXWe/+dxzv79gmleUgTC9Lpgf3ciTH0gAKM6f7dch9B/ChNtwGGUFCXiXl6qWckHlljBBUWXBkkaNfGqADx+KOtgt/U1A=
Received: by 10.54.18.5 with SMTP id 5mr2489857wrr;
        Mon, 13 Jun 2005 05:24:41 -0700 (PDT)
Received: by 10.54.51.73 with HTTP; Mon, 13 Jun 2005 05:24:41 -0700 (PDT)
Message-ID: <a925739605061305242f1b1de0@mail.gmail.com>
Date: Mon, 13 Jun 2005 14:24:41 +0200
From: Markus Wiederkehr <markus.wiederkehr@gmail.com>
Reply-To: Markus Wiederkehr <markus.wiederkehr@gmail.com>
To: Lucene users <java-user@lucene.apache.org>
Subject: Updating documents
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

I would like to update a document as follows.

1) retrieve the document from an IndexReader/Searcher
2) delete the document
3) manipulate the document, that is remove and add fields
4) save the document using an IndexWriter

When I do this all fields that were indexed and/or tokenized but not
stored get lost.

So is there any way to preserve fields that were not stored?
Reconstructing these fields is to expensive in my application.

Thanks in advance,

Markus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 12:32:05 2005
Return-Path: <java-user-return-14902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58232 invoked from network); 13 Jun 2005 12:32:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 12:32:04 -0000
Received: (qmail 49755 invoked by uid 500); 13 Jun 2005 12:31:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49696 invoked by uid 500); 13 Jun 2005 12:31:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49627 invoked by uid 99); 13 Jun 2005 12:31:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 05:31:53 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2564A13E2008; Mon, 13 Jun 2005 08:31:44 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id E1EEA13E2007
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 08:31:28 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42AD7234.1030607@idowa.de>
References: <42AD7234.1030607@idowa.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <81839D95-EA7A-402A-971B-EC8736E340E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: TooManyClauses in BooleanQuery
Date: Mon, 13 Jun 2005 08:31:41 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 13, 2005, at 7:47 AM, Harald Stowasser wrote:
> 1. Sorting by Date is ruinously slow. So I deactivated it.

How were you sorting by date?

> 3. I also read that we should save the Date as YYYYMMDD-String. I  
> don't
> like this solution, because I don't know that this will work. And  
> then I
> have to reindex the whole Data!

It will work :)  Terms need to be lexicographically orderable - and  
using YYYYMMDD will do just that as long as you don't need  
granularity beyond day.  However, before reindexing with YYYYMMDD -  
what are your searching/sorting needs?  If day is the granularity,  
then YYYYMMDD will be fine.  However you may want to break it into  
more fields such as year, month, and day separately.  Note: keep  
numbers padded to the same number of characters (1 for a day field  
should be "01" for example).

For sorting, you may find that once you've used YYYYMMDD that you can  
then sort with the field type as INT on that same field (use  
Field.Keyword for indexing).

> [3]
> My Fields:
>   neu.setBoost( boost  );
>   neu.add(Field.UnStored("content",content));
>   neu.add(Field.Keyword("keyword",keyword));
>   ConfDate date = new ConfDate(datum);
>   neu.add(Field.Keyword("datum",(Date)date.getUtilDate()));
>   neu.add(Field.UnIndexed("content_vorschau",content_vorschau));
>   neu.add(Field.UnIndexed("content_id",""+content_id));
>   neu.add(Field.UnIndexed("zeitstempel",zeitstempel));
>   neu.add(Field.UnIndexed("link",link));
>   neu.add(Field.Keyword("bereich",bereich));
>   index.addDocument(neu);

What kind of granularity for dates does ConfDate.getUtilDate() return?

Using Date for Field.Keyword indexes to the millisecond granularity -  
that is very unlikely to be of use to you at that level.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 12:44:29 2005
Return-Path: <java-user-return-14903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63979 invoked from network); 13 Jun 2005 12:44:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 12:44:29 -0000
Received: (qmail 83009 invoked by uid 500); 13 Jun 2005 12:44:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82985 invoked by uid 500); 13 Jun 2005 12:44:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82971 invoked by uid 99); 13 Jun 2005 12:44:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from redhat.sirma.bg (HELO redhat.sirma.bg) (62.213.161.130)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 05:44:19 -0700
Received: from [192.168.128.211] (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id j5DCi19W013358
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 15:44:01 +0300
Message-ID: <42AD7F8F.5070205@sirma.bg>
Date: Mon, 13 Jun 2005 15:43:59 +0300
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: OutOfMemory when indexing
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

High guys,
Building some huge index (about 500,000 docs totaling to 10megs of plain 
text) we've run into the following problem:
Most of the time the IndexWriter process consumes a fairly small amount 
of memory (about 32 megs).
However, as the index size grows, the memory usage sporadically bursts 
to levels of (say) 1000 gigs and then falls back to its level.
The problem is that unless te process is started with some option like 
-Xmx1000m this situation causes an OutOfMemoryException which terminates 
the indexing process.

My question is - is there a way to avoid it?

Regards
Stanislav

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 12:49:18 2005
Return-Path: <java-user-return-14904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66174 invoked from network); 13 Jun 2005 12:49:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 12:49:18 -0000
Received: (qmail 93232 invoked by uid 500); 13 Jun 2005 12:49:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93207 invoked by uid 500); 13 Jun 2005 12:49:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93193 invoked by uid 99); 13 Jun 2005 12:49:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 05:49:07 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 31A1C13E2006; Mon, 13 Jun 2005 08:21:10 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id D2CA813E2005
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 08:20:38 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <a92573960506130408576f0883@mail.gmail.com>
References: <a92573960506130408576f0883@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7D6991A0-4E27-493B-8B31-EB9A549E8B1C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Hypenated word
Date: Mon, 13 Jun 2005 08:20:50 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 13, 2005, at 7:08 AM, Markus Wiederkehr wrote:
> I work on an application that has to index OCR texts of scanned books.
> Naturally there occur many words that are hyphenated across lines.
>
> I wonder if there is already an Analyzer or maybe a TokenFilter that
> can merge those syllables back into whole words? It looks like Erik
> Hatcher uses something like that at http://www.lucenebook.com/.

Markus - you're right, I did develop something to handle hyphenated  
words for lucenebook.com.  It was sort of a hack in that I had to  
build in a static list of exceptions in how I handled this, so you'll  
likely have to use caution as well.  The LiaAnalyzer is this:

   public TokenStream tokenStream(String fieldName, Reader reader) {
     TokenFilter filter = new DashSplitterFilter(
               new HyphenatedFilter(
                 new DashDashFilter(
                   new LiaTokenizer(reader))));

     filter = new LengthFilter(3, filter);
     filter = new StopFilter(filter, stopSet);

     if (stem) {
       filter = new SnowballFilter(filter, "English");
     }

     return filter;
   }


And my HyphenatedFilter is this:

public class HyphenatedFilter extends TokenFilter {
   private HashMap exceptions = new HashMap();

   private static final String[] EXCEPTION_LIST = {
      "full-text", "information-retrieval", "license-code", "old- 
fashioned",
      "well-designed", "free-form", "file-based", "ramdirectory- 
based", "ram-based",
      "index-modifying", "read-only",
      "top-scoring", "most-recently-used", "queryparser-parsed",
      "in-order", "per-document", "lower-caser", "domain-specific",  
"high-level",
      "utf-encoding", "non-english", "phraseprefix-it", "all-inclusive",
      "date-range", "computation-intensive", "hits-returning", "lower- 
level",
      "number-padding", "utf-address-book", "third-party", "plain- 
text", "google-like",
      "re-add", "english-specific", "file-handling", "already- 
created", "d-add", "d-add",
      "hits-length", "hits-doc", "hits-score", "d-get", "writer-new",  
"porteranalyzer-new",
      "writer-set", "document-new", "doc-add", "field-keyword",  
"field-unstored", "writer-add",
      "writer-optimize", "queryparser-new", "porteranalyzer-new",  
"parser-parse", "indexsearcher-new",
      "hitcollector-new", "searcher-doc", "searcher-search", "jakarta- 
lucene", "www-ibm", "java-specific",
      "non-java", "vis--vis", "medium-sized", "browser-based", "utf- 
before", "concept-based",
      "natural-language", "queue-based", "high-likelihood", "slp-or",  
"noisy-channel", "al-rasheed",
      "hands-free", "top-notch", "google-esque", "search-config",  
"java-related",
      "lucene-so", "lucene-tar", "lucene-jar", "lucene-demos-jar",  
"lucene-web", "lucene-webindex",
      "command-line", "lucene-version", "issue-tracking"
   };

   protected HyphenatedFilter(TokenStream tokenStream) {
     super(tokenStream);

     for (int i = 0; i < EXCEPTION_LIST.length; i++) {
       exceptions.put(EXCEPTION_LIST[i], "");
     }
   }

   private Token savedToken;

   public Token next() throws IOException {

     if (savedToken != null) {
       Token token = savedToken;
       savedToken = null;
       return token;
     }

     Token firstToken = input.next();

     if (firstToken == null)
       return firstToken;


     if (firstToken.termText().endsWith("-")) {
       String firstPart;
       firstPart = firstToken.termText();

       // consume next token
       Token secondToken = input.next();
       if (secondToken == null)
         return firstToken;

       String termText = firstPart.substring(0, firstPart.length() -  
1) + secondToken.termText();

       if (exceptions.containsKey(firstPart + secondToken.termText())) {
         savedToken = secondToken;
         return firstToken;
       }

       return new Token(termText, firstToken.startOffset(),  
firstToken.endOffset() + secondToken.termText().length() + 1);
     }

     return firstToken;
   }
}

Not all that pretty, I'm afraid, but by all means use it if its useful.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 12:51:27 2005
Return-Path: <java-user-return-14905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67098 invoked from network); 13 Jun 2005 12:51:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 12:51:27 -0000
Received: (qmail 98506 invoked by uid 500); 13 Jun 2005 12:51:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98473 invoked by uid 500); 13 Jun 2005 12:51:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98459 invoked by uid 99); 13 Jun 2005 12:51:20 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mx1.idowa.net (HELO mx1.idowa.net) (217.7.81.164)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 05:51:16 -0700
Received: from mx1.idowa.net (localhost [127.0.0.1])
	by mx1-int.idowa.de (Postfix) with ESMTP id D658010143C
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 14:28:23 +0200 (CEST)
Received: from mail0.vn.idowa.de (vl-gw-float.sr.idowa.net [217.7.81.140])
	by mx1-sa.idowa.net (Postfix) with ESMTP id BCD9B101431
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 14:28:23 +0200 (CEST)
Received: from [192.168.31.5] (unknown [192.168.31.5])
	by mail0.vn.idowa.de (Postfix) with ESMTP id 828EF36110
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 14:28:23 +0200 (CEST)
Message-ID: <42AD7BB8.8090100@idowa.de>
Date: Mon, 13 Jun 2005 14:27:36 +0200
From: Harald Stowasser <stowasser.h@idowa.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; de-AT; rv:1.7.2) Gecko/20040803
X-Accept-Language: de, en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: TooManyClauses in BooleanQuery
References: <OF14B099F4.6BB89CBD-ONC125701F.0041DA9A-C125701F.00423272@makrolog.de>
In-Reply-To: <OF14B099F4.6BB89CBD-ONC125701F.0041DA9A-C125701F.00423272@makrolog.de>
X-Enigmail-Version: 0.86.1.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enig412E6FC0FF5DE2ACAF2D1082"
X-Spam-Checker-Version: SpamAssassin 3.0.0 (2004-09-13) on hermes.idowa.de
X-Spam-Level: 
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_50 autolearn=ham 
	version=3.0.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------enig412E6FC0FF5DE2ACAF2D1082
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

a.herberger@makrolog.de schrieb:

> Hi Harald,
> 
> its nice too see, that there are others out there in Germany dealing with 
> the same problems as we have been doing in the past years :-)
> 
> So for the "too many clauses" problem I have a solution for you, that I 
> want to share:
> Just include somewhere at the very beginning of your program (retrieval 
> part) the call:
> 
> BooleanQuery.setMaxClauseCount(1000*1000);

As you can see in the source code, I tried this already:
  query.setMaxClauseCount(262144);
It even don't work with higher values, it just crashed with Not enough
Memory -Error :-(

--------------enig412E6FC0FF5DE2ACAF2D1082
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFCrXu9d2ByLviqWmYRAtGUAJ4nEV2zxlQfOK+zmScMorqOAS9+fwCfdTRA
+rikFoC7IGWEZEVI7OIaVXc=
=R6Zy
-----END PGP SIGNATURE-----

--------------enig412E6FC0FF5DE2ACAF2D1082--


From java-user-return-14906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 13:03:22 2005
Return-Path: <java-user-return-14906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73549 invoked from network); 13 Jun 2005 13:03:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 13:03:22 -0000
Received: (qmail 29507 invoked by uid 500); 13 Jun 2005 13:03:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29462 invoked by uid 500); 13 Jun 2005 13:03:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29444 invoked by uid 99); 13 Jun 2005 13:03:16 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mx1.idowa.net (HELO mx1.idowa.net) (217.7.81.164)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 06:03:16 -0700
Received: from mx1.idowa.net (localhost [127.0.0.1])
	by mx1-int.idowa.de (Postfix) with ESMTP id 9165710150D
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 14:45:13 +0200 (CEST)
Received: from mail0.vn.idowa.de (vl-gw-float.sr.idowa.net [217.7.81.140])
	by mx1-sa.idowa.net (Postfix) with ESMTP id 81F011014C6
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 14:45:13 +0200 (CEST)
Received: from [192.168.31.5] (unknown [192.168.31.5])
	by mail0.vn.idowa.de (Postfix) with ESMTP id 76DFE4637A
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 14:45:13 +0200 (CEST)
Message-ID: <42AD7FA9.8070204@idowa.de>
Date: Mon, 13 Jun 2005 14:44:25 +0200
From: Harald Stowasser <stowasser.h@idowa.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; de-AT; rv:1.7.2) Gecko/20040803
X-Accept-Language: de, en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: TooManyClauses in BooleanQuery
References: <42AD7234.1030607@idowa.de>
In-Reply-To: <42AD7234.1030607@idowa.de>
X-Enigmail-Version: 0.86.1.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enigC93F3D52543BAA22DCF9B772"
X-Spam-Checker-Version: SpamAssassin 3.0.0 (2004-09-13) on hermes.idowa.de
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------enigC93F3D52543BAA22DCF9B772
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Harald Stowasser schrieb:

P.S.
I tried now to use DateFilter. This works, but is very slow on longer
Date-Ranges. (30sec. )



--------------enigC93F3D52543BAA22DCF9B772
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFCrX+ud2ByLviqWmYRAvcjAJ9hViCnwd2a1NLU+Jbhs1lWTHq1SQCfUlQ4
uZ+Fe86fap3zUFdE61/cDag=
=sRGb
-----END PGP SIGNATURE-----

--------------enigC93F3D52543BAA22DCF9B772--


From java-user-return-14907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 13:37:53 2005
Return-Path: <java-user-return-14907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5508 invoked from network); 13 Jun 2005 13:37:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 13:37:53 -0000
Received: (qmail 4295 invoked by uid 500); 13 Jun 2005 13:37:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4261 invoked by uid 500); 13 Jun 2005 13:37:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4247 invoked by uid 99); 13 Jun 2005 13:37:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of markus.wiederkehr@gmail.com designates 64.233.184.202 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 06:37:44 -0700
Received: by wproxy.gmail.com with SMTP id 50so1485502wri
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 06:37:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=OujAIHhNK9GCS/o7Dn1ir8Ra7OCdwkhAtxoAy2+6hmP7Xag5wR1+GyPxTWWTE4Akdf8HLmF2RoKxNvH4hCSalUaWBJKC1Z48Zjzr3er/oGkK8BfVpIE5PsWz9YvbmybOvBzMdjsb+EphH9IYHFBpY6dHoNr6L3KfLE0UMrH8gX8=
Received: by 10.54.30.40 with SMTP id d40mr2537826wrd;
        Mon, 13 Jun 2005 06:30:50 -0700 (PDT)
Received: by 10.54.51.73 with HTTP; Mon, 13 Jun 2005 06:30:50 -0700 (PDT)
Message-ID: <a925739605061306307c83aa7b@mail.gmail.com>
Date: Mon, 13 Jun 2005 15:30:50 +0200
From: Markus Wiederkehr <markus.wiederkehr@gmail.com>
Reply-To: Markus Wiederkehr <markus.wiederkehr@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory when indexing
In-Reply-To: <42AD7F8F.5070205@sirma.bg>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42AD7F8F.5070205@sirma.bg>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am not an expert, but maybe the occasionally high memory usage is
because Lucene is merging multiple index segments together.

Maybe it would help if you set maxMergeDocs to 10,000 or something. In
your case that would mean that the minimum number of index segments
would be 50.

But again, this may be completely wrong...

Markus

On 6/13/05, Stanislav Jordanov <stenly@sirma.bg> wrote:
> High guys,
> Building some huge index (about 500,000 docs totaling to 10megs of plain
> text) we've run into the following problem:
> Most of the time the IndexWriter process consumes a fairly small amount
> of memory (about 32 megs).
> However, as the index size grows, the memory usage sporadically bursts
> to levels of (say) 1000 gigs and then falls back to its level.
> The problem is that unless te process is started with some option like
> -Xmx1000m this situation causes an OutOfMemoryException which terminates
> the indexing process.
>=20
> My question is - is there a way to avoid it?
>=20
> Regards
> Stanislav

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 13:40:31 2005
Return-Path: <java-user-return-14908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6683 invoked from network); 13 Jun 2005 13:40:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 13:40:31 -0000
Received: (qmail 12373 invoked by uid 500); 13 Jun 2005 13:40:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12309 invoked by uid 500); 13 Jun 2005 13:40:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12054 invoked by uid 99); 13 Jun 2005 13:40:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 06:40:20 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: TooManyClauses in BooleanQuery
Date: Mon, 13 Jun 2005 09:38:42 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA01082AB4@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: TooManyClauses in BooleanQuery
thread-index: AcVwFp1J8/T4HW91RrKtZS5jzlFImgABmL3Q
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

if you get an OutOfMemoryException, I beleive the only thing you can do
is just increase the JVM heap to a larger size.

-----Original Message-----
From: Harald Stowasser [mailto:stowasser.h@idowa.de]
Sent: Monday, June 13, 2005 8:28 AM
To: java-user@lucene.apache.org
Subject: Re: TooManyClauses in BooleanQuery


a.herberger@makrolog.de schrieb:

> Hi Harald,
>=20
> its nice too see, that there are others out there in Germany dealing
with=20
> the same problems as we have been doing in the past years :-)
>=20
> So for the "too many clauses" problem I have a solution for you, that
I=20
> want to share:
> Just include somewhere at the very beginning of your program
(retrieval=20
> part) the call:
>=20
> BooleanQuery.setMaxClauseCount(1000*1000);

As you can see in the source code, I tried this already:
  query.setMaxClauseCount(262144);
It even don't work with higher values, it just crashed with Not enough
Memory -Error :-(

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 13:45:38 2005
Return-Path: <java-user-return-14909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9390 invoked from network); 13 Jun 2005 13:45:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 13:45:38 -0000
Received: (qmail 23056 invoked by uid 500); 13 Jun 2005 13:45:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23036 invoked by uid 500); 13 Jun 2005 13:45:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23023 invoked by uid 99); 13 Jun 2005 13:45:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of markus.wiederkehr@gmail.com designates 64.233.184.194 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 06:45:27 -0700
Received: by wproxy.gmail.com with SMTP id 50so1488686wri
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 06:45:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=i5sYARmjyfxW6zEgz56DQavWO3fOMPUGNFfdBAfVz6WUYXrSv9eVymnmFwOJsnrt6KxZsvdFNFsKdUSRtNSq+jylFr/SYYfzMG5bxJXIF8AKWsx8GAZGfKfgqM6pyRubOAVq/vZSFxTivIMnbW1n+PR1r6txoGt0tGzmADUMbH4=
Received: by 10.54.36.66 with SMTP id j66mr2521800wrj;
        Mon, 13 Jun 2005 06:18:37 -0700 (PDT)
Received: by 10.54.51.73 with HTTP; Mon, 13 Jun 2005 06:18:36 -0700 (PDT)
Message-ID: <a9257396050613061831b6302d@mail.gmail.com>
Date: Mon, 13 Jun 2005 15:18:36 +0200
From: Markus Wiederkehr <markus.wiederkehr@gmail.com>
Reply-To: Markus Wiederkehr <markus.wiederkehr@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Hypenated word
In-Reply-To: <7D6991A0-4E27-493B-8B31-EB9A549E8B1C@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <a92573960506130408576f0883@mail.gmail.com>
	 <7D6991A0-4E27-493B-8B31-EB9A549E8B1C@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I see, the list of exceptions makes this a lot more complicated than I
thought... Thanks a lot, Erik!

Markus

On 6/13/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>=20
> On Jun 13, 2005, at 7:08 AM, Markus Wiederkehr wrote:
> > I work on an application that has to index OCR texts of scanned books.
> > Naturally there occur many words that are hyphenated across lines.
> >
> > I wonder if there is already an Analyzer or maybe a TokenFilter that
> > can merge those syllables back into whole words? It looks like Erik
> > Hatcher uses something like that at http://www.lucenebook.com/.
>=20
> Markus - you're right, I did develop something to handle hyphenated
> words for lucenebook.com.  It was sort of a hack in that I had to
> build in a static list of exceptions in how I handled this, so you'll
> likely have to use caution as well.  The LiaAnalyzer is this:
>=20
>    public TokenStream tokenStream(String fieldName, Reader reader) {
>      TokenFilter filter =3D new DashSplitterFilter(
>                new HyphenatedFilter(
>                  new DashDashFilter(
>                    new LiaTokenizer(reader))));
>=20
>      filter =3D new LengthFilter(3, filter);
>      filter =3D new StopFilter(filter, stopSet);
>=20
>      if (stem) {
>        filter =3D new SnowballFilter(filter, "English");
>      }
>=20
>      return filter;
>    }
>=20
>=20
> And my HyphenatedFilter is this:
>=20
> public class HyphenatedFilter extends TokenFilter {
>    private HashMap exceptions =3D new HashMap();
>=20
>    private static final String[] EXCEPTION_LIST =3D {
>       "full-text", "information-retrieval", "license-code", "old-
> fashioned",
>       "well-designed", "free-form", "file-based", "ramdirectory-
> based", "ram-based",
>       "index-modifying", "read-only",
>       "top-scoring", "most-recently-used", "queryparser-parsed",
>       "in-order", "per-document", "lower-caser", "domain-specific",
> "high-level",
>       "utf-encoding", "non-english", "phraseprefix-it", "all-inclusive",
>       "date-range", "computation-intensive", "hits-returning", "lower-
> level",
>       "number-padding", "utf-address-book", "third-party", "plain-
> text", "google-like",
>       "re-add", "english-specific", "file-handling", "already-
> created", "d-add", "d-add",
>       "hits-length", "hits-doc", "hits-score", "d-get", "writer-new",
> "porteranalyzer-new",
>       "writer-set", "document-new", "doc-add", "field-keyword",
> "field-unstored", "writer-add",
>       "writer-optimize", "queryparser-new", "porteranalyzer-new",
> "parser-parse", "indexsearcher-new",
>       "hitcollector-new", "searcher-doc", "searcher-search", "jakarta-
> lucene", "www-ibm", "java-specific",
>       "non-java", "vis--vis", "medium-sized", "browser-based", "utf-
> before", "concept-based",
>       "natural-language", "queue-based", "high-likelihood", "slp-or",
> "noisy-channel", "al-rasheed",
>       "hands-free", "top-notch", "google-esque", "search-config",
> "java-related",
>       "lucene-so", "lucene-tar", "lucene-jar", "lucene-demos-jar",
> "lucene-web", "lucene-webindex",
>       "command-line", "lucene-version", "issue-tracking"
>    };
>=20
>    protected HyphenatedFilter(TokenStream tokenStream) {
>      super(tokenStream);
>=20
>      for (int i =3D 0; i < EXCEPTION_LIST.length; i++) {
>        exceptions.put(EXCEPTION_LIST[i], "");
>      }
>    }
>=20
>    private Token savedToken;
>=20
>    public Token next() throws IOException {
>=20
>      if (savedToken !=3D null) {
>        Token token =3D savedToken;
>        savedToken =3D null;
>        return token;
>      }
>=20
>      Token firstToken =3D input.next();
>=20
>      if (firstToken =3D=3D null)
>        return firstToken;
>=20
>=20
>      if (firstToken.termText().endsWith("-")) {
>        String firstPart;
>        firstPart =3D firstToken.termText();
>=20
>        // consume next token
>        Token secondToken =3D input.next();
>        if (secondToken =3D=3D null)
>          return firstToken;
>=20
>        String termText =3D firstPart.substring(0, firstPart.length() -
> 1) + secondToken.termText();
>=20
>        if (exceptions.containsKey(firstPart + secondToken.termText())) {
>          savedToken =3D secondToken;
>          return firstToken;
>        }
>=20
>        return new Token(termText, firstToken.startOffset(),
> firstToken.endOffset() + secondToken.termText().length() + 1);
>      }
>=20
>      return firstToken;
>    }
> }
>=20
> Not all that pretty, I'm afraid, but by all means use it if its useful.
>=20
>      Erik
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
Always remember you're unique. Just like everyone else.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 13:54:28 2005
Return-Path: <java-user-return-14910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13858 invoked from network); 13 Jun 2005 13:54:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 13:54:27 -0000
Received: (qmail 41995 invoked by uid 500); 13 Jun 2005 13:54:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41971 invoked by uid 500); 13 Jun 2005 13:54:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41957 invoked by uid 99); 13 Jun 2005 13:54:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from cmailm1.svr.pol.co.uk (HELO cmailm1.svr.pol.co.uk) (195.92.193.18)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 06:54:20 -0700
Received: from user-5583.lns5-c7.dsl.pol.co.uk ([84.67.53.207] helo=[192.168.1.3])
	by cmailm1.svr.pol.co.uk with esmtp (Exim 4.41)
	id 1DhpO8-0001bj-UY
	for java-user@lucene.apache.org; Mon, 13 Jun 2005 14:54:05 +0100
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Re: Hypenated word
Date: Mon, 13 Jun 2005 14:55:17 +0000
User-Agent: KMail/1.8.1
References: <a92573960506130408576f0883@mail.gmail.com> <7D6991A0-4E27-493B-8B31-EB9A549E8B1C@ehatchersolutions.com> <a9257396050613061831b6302d@mail.gmail.com>
In-Reply-To: <a9257396050613061831b6302d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506131455.17637.mail@andy-roberts.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 13 Jun 2005 13:18, Markus Wiederkehr wrote:
> I see, the list of exceptions makes this a lot more complicated than I
> thought... Thanks a lot, Erik!
>

I expect you'll need to do some pre-processing. Read in your text into a 
buffer, line-by-line. If a given line ends with a hyphen, you can manipulate 
the buffer to merge the hyphenated tokens.

Andy


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 14:16:37 2005
Return-Path: <java-user-return-14911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23061 invoked from network); 13 Jun 2005 14:16:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 14:16:37 -0000
Received: (qmail 460 invoked by uid 500); 13 Jun 2005 14:16:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 436 invoked by uid 500); 13 Jun 2005 14:16:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 422 invoked by uid 99); 13 Jun 2005 14:16:30 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mx1.idowa.net (HELO mx1.idowa.net) (217.7.81.164)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 07:16:29 -0700
Received: from mx1.idowa.net (localhost [127.0.0.1])
	by mx1-int.idowa.de (Postfix) with ESMTP id C2AF5101510
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 15:17:22 +0200 (CEST)
Received: from mail0.vn.idowa.de (vl-gw-float.sr.idowa.net [217.7.81.140])
	by mx1-sa.idowa.net (Postfix) with ESMTP id B31541014F8
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 15:17:22 +0200 (CEST)
Received: from [192.168.31.5] (unknown [192.168.31.5])
	by mail0.vn.idowa.de (Postfix) with ESMTP id A92C845C02
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 15:17:22 +0200 (CEST)
Message-ID: <42AD8734.9070205@idowa.de>
Date: Mon, 13 Jun 2005 15:16:36 +0200
From: Harald Stowasser <stowasser.h@idowa.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; de-AT; rv:1.7.2) Gecko/20040803
X-Accept-Language: de, en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory when indexing
References: <42AD7F8F.5070205@sirma.bg>
In-Reply-To: <42AD7F8F.5070205@sirma.bg>
X-Enigmail-Version: 0.86.1.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enig2B14CF68AD60B3A86BEFEE80"
X-Spam-Checker-Version: SpamAssassin 3.0.0 (2004-09-13) on hermes.idowa.de
X-Spam-Level: 
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_50 autolearn=ham 
	version=3.0.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------enig2B14CF68AD60B3A86BEFEE80
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Stanislav Jordanov schrieb:

> High guys,
> Building some huge index (about 500,000 docs totaling to 10megs of plain
> text) we've run into the following problem:
> Most of the time the IndexWriter process consumes a fairly small amount
> of memory (about 32 megs).
> However, as the index size grows, the memory usage sporadically bursts
> to levels of (say) 1000 gigs and then falls back to its level.
> The problem is that unless te process is started with some option like
> -Xmx1000m this situation causes an OutOfMemoryException which terminates
> the indexing process.
> 
> My question is - is there a way to avoid it?


1.
I start my programm with:
java -Xms256M -Xmx512M -jar Suchmaschine.jar &

This protect me now from OutOfMemoryException. After I use
iterative-subroutines.

2.
Free your variables as soon as possible.
like "term=null;"
This will help your Garbage-Collector!

3.
Maybe you should watch totalMemory and R.freeMemory() from
Runtime.getRuntime()
That will help you to find the "Memory-dissipater"

4.
I had the problem when deleting Documents from Index. I used a
Subroutine to delete single Documents.
It runs much better when I replaced it into a "iterative" subroutine
like this:

  public int deleteMany(String keywords)
  {
    int anzahl=0;
    try
    {
      openReader();
      String[] temp = keywords.split(",");
      //Runtime R = Runtime.getRuntime();
      for (int i = 0 ; i < temp.length ; i++)
      {
        Term term =new Term("keyword",temp[i]);
        anzahl+= mReader.delete(term);
        term=null;
        /*System.out.println("deleted " + temp[i]
                   +" t:"+R.totalMemory()
                   +" f:"+R.freeMemory()
                   +" m"+R.maxMemory());
        */
      }
      close();
    } catch (Exception e){
      cIdowa.error( "Could not delete Documents:" + keywords
            +". Because:"+ e.getMessage() + "\n" +e.toString() );
    }
    return anzahl;
  }




--------------enig2B14CF68AD60B3A86BEFEE80
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFCrYc4d2ByLviqWmYRAvHcAJ4rJZBZ28nchkB9U5fCpm+Fp5bNgQCcDmlK
+B0jZ52nRIw3wy5Fl9NP0IA=
=jnmG
-----END PGP SIGNATURE-----

--------------enig2B14CF68AD60B3A86BEFEE80--


From java-user-return-14912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 14:43:25 2005
Return-Path: <java-user-return-14912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31582 invoked from network); 13 Jun 2005 14:43:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 14:43:25 -0000
Received: (qmail 70478 invoked by uid 500); 13 Jun 2005 14:43:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70461 invoked by uid 500); 13 Jun 2005 14:43:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70421 invoked by uid 99); 13 Jun 2005 14:43:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 07:43:13 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 1D1CC13E2006; Mon, 13 Jun 2005 10:42:15 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 1D50713E2005
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 10:42:00 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42AD7FA9.8070204@idowa.de>
References: <42AD7234.1030607@idowa.de> <42AD7FA9.8070204@idowa.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <50840C6D-6707-488B-BF88-0B880641A709@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: TooManyClauses in BooleanQuery
Date: Mon, 13 Jun 2005 10:42:13 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 13, 2005, at 8:44 AM, Harald Stowasser wrote:

> Harald Stowasser schrieb:
>
> P.S.
> I tried now to use DateFilter. This works, but is very slow on longer
> Date-Ranges. (30sec. )

Filters in general were meant for one-time creation and caching.  If  
the date ranges are fixed and the index not being updated, then  
DateFilters will work fine as you only create each filter once.  If  
the index updates, thats ok, as you can simply reinstantiate the  
filters when that occurs.

My recommendation is for you to consider using YYYYMMDD format for  
your dates to begin with, but I'd like to see more about the range of  
dates that you're indexing and what kind of ranges you need to  
accommodate for searching.

     Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 14:59:24 2005
Return-Path: <java-user-return-14913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37109 invoked from network); 13 Jun 2005 14:59:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 14:59:24 -0000
Received: (qmail 3542 invoked by uid 500); 13 Jun 2005 14:59:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3519 invoked by uid 500); 13 Jun 2005 14:59:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3493 invoked by uid 99); 13 Jun 2005 14:59:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of markus.wiederkehr@gmail.com designates 64.233.184.195 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 07:59:16 -0700
Received: by wproxy.gmail.com with SMTP id 50so1518791wri
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 07:59:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=bYaj9MbxRrcO6ShOCuPy/4pgxzbdeTgIp/6l4fROOmsTVf+IOZt0g2ymmDboEYfEHn+XqWxZWGcc4kXVsaRCBVGa4Jlcklc6Jt8RM+K+Mhnd3afP8tpNMCL5jq4sXA9XYBPcMF3NXT3FnPvbuzdQx2+NIWm3bVKqQegHjRJVEI0=
Received: by 10.54.116.2 with SMTP id o2mr2572630wrc;
        Mon, 13 Jun 2005 07:52:23 -0700 (PDT)
Received: by 10.54.51.73 with HTTP; Mon, 13 Jun 2005 07:52:23 -0700 (PDT)
Message-ID: <a925739605061307521296251@mail.gmail.com>
Date: Mon, 13 Jun 2005 16:52:23 +0200
From: Markus Wiederkehr <markus.wiederkehr@gmail.com>
Reply-To: Markus Wiederkehr <markus.wiederkehr@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Hypenated word
In-Reply-To: <200506131455.17637.mail@andy-roberts.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <a92573960506130408576f0883@mail.gmail.com>
	 <7D6991A0-4E27-493B-8B31-EB9A549E8B1C@ehatchersolutions.com>
	 <a9257396050613061831b6302d@mail.gmail.com>
	 <200506131455.17637.mail@andy-roberts.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/13/05, Andy Roberts <mail@andy-roberts.net> wrote:
> On Monday 13 Jun 2005 13:18, Markus Wiederkehr wrote:
> > I see, the list of exceptions makes this a lot more complicated than I
> > thought... Thanks a lot, Erik!
> >
>=20
> I expect you'll need to do some pre-processing. Read in your text into a
> buffer, line-by-line. If a given line ends with a hyphen, you can manipul=
ate
> the buffer to merge the hyphenated tokens.

As Erik wrote it is not that simple, unfortunately. For example, if
one line ends with "read-" and the next line begins with "only" the
correct word is "read-only" not "readonly". Whereas "work-" and "ing"
should of course be merged into "working".

Markus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 15:15:31 2005
Return-Path: <java-user-return-14914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43771 invoked from network); 13 Jun 2005 15:15:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 15:15:31 -0000
Received: (qmail 50747 invoked by uid 500); 13 Jun 2005 15:15:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50730 invoked by uid 500); 13 Jun 2005 15:15:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50717 invoked by uid 99); 13 Jun 2005 15:15:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from blackhole.fatwire.com (HELO blackhole.fatwire.com) (209.212.94.12)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 08:15:19 -0700
Received: by blackhole.fatwire.com with Internet Mail Service (5.5.2656.59)
	id <LYFBNT5C>; Mon, 13 Jun 2005 10:58:54 -0400
Message-ID: <E9C070038E79D411B73700D0B73EC81006DBA111@blackhole.fatwire.com>
From: "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Displaying relevant text with Search results
Date: Mon, 13 Jun 2005 10:58:53 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2656.59)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C57028.6A1E4AA0"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C57028.6A1E4AA0
Content-Type: text/plain

Hi,

I have a simple index with one default field that is stored and indexed. I
want to display the query results along with some relevant text from the
default field, the way search is implemented at http://www.lucenebook.com/
<http://www.lucenebook.com/> . 

 

For example, searching for 'wonderful'
(http://www.lucenebook.com/search?query=Wonderful
<http://www.lucenebook.com/search?query=Wonderful> ) generates results that
have highlighting on relevant words in the result. 

 

One way to implement this would be get documents from search result and
physically parse the contents of the default field for the occurrence of the
search word or one of its synonyms (Wonderful: wonder, wonderfully.. ). Then
display a few words before and after a match for contextual information. 

However, in order to really do it correctly, one needs to get to the 'best'
part field's text where the density of searched word(s) is highest. This
could be a very expensive process. Does Lucene give any help is achieving
this? 

 

Thanks

-Hareesh

 


------_=_NextPart_001_01C57028.6A1E4AA0--

From java-user-return-14915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 15:26:15 2005
Return-Path: <java-user-return-14915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47317 invoked from network); 13 Jun 2005 15:26:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 15:26:15 -0000
Received: (qmail 84533 invoked by uid 500); 13 Jun 2005 15:26:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84511 invoked by uid 500); 13 Jun 2005 15:26:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84497 invoked by uid 99); 13 Jun 2005 15:26:06 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from smtpauth07.mail.atl.earthlink.net (HELO smtpauth07.mail.atl.earthlink.net) (209.86.89.67)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 08:26:03 -0700
Received: from [69.235.198.125] (helo=[172.16.1.2])
	by smtpauth07.mail.atl.earthlink.net with asmtp (TLSv1:RC4-SHA:128)
	(Exim 4.34)
	id 1Dhqly-0001IU-Jr
	for java-user@lucene.apache.org; Mon, 13 Jun 2005 11:22:46 -0400
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <a9257396050613061831b6302d@mail.gmail.com>
References: <a92573960506130408576f0883@mail.gmail.com> <7D6991A0-4E27-493B-8B31-EB9A549E8B1C@ehatchersolutions.com> <a9257396050613061831b6302d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D77D1440-D10E-4AF7-8AF1-E91D953C0C15@corp.earthlink.net>
Content-Transfer-Encoding: 7bit
From: "Peter A. Friend" <octavian@corp.earthlink.net>
Subject: Re: Hypenated word
Date: Mon, 13 Jun 2005 08:22:44 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-ELNK-Trace: e38a400786bfeea01aa676d7e74259b7b3291a7d08dfec795c92b11f7274396ac3e20cd135570317350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 69.235.198.125
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 13, 2005, at 6:18 AM, Markus Wiederkehr wrote:

> I see, the list of exceptions makes this a lot more complicated than I
> thought... Thanks a lot, Erik!

There is a section about the problems that hyphens create in  
"Foundations of Statistical Natural Language Processing". Not only  
are the cases numerous, but seemingly simple rules such as joining  
hyphenated forms at the ends of lines does not always work. Sometimes  
the hyphen was added to break the word, sometimes you are already  
dealing with a hyphenated form that just happened to occur at the end  
of a line, so the hyphen serves two purposes. I've toyed with the  
idea of indexing hyphenated words in their raw as well as split  
forms, but I think that would wreak havoc on the word position stuff,  
as well as bloat the index with potentially meaningless gibberish.

Peter


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 15:56:19 2005
Return-Path: <java-user-return-14916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59234 invoked from network); 13 Jun 2005 15:56:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 15:56:19 -0000
Received: (qmail 57279 invoked by uid 500); 13 Jun 2005 15:56:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57233 invoked by uid 500); 13 Jun 2005 15:56:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57179 invoked by uid 99); 13 Jun 2005 15:56:10 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from main.gmane.org (HELO ciao.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 08:56:06 -0700
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1DhrCr-0003Q0-CZ
	for java-user@lucene.apache.org; Mon, 13 Jun 2005 17:50:33 +0200
Received: from linagora.net8.nerim.net ([213.41.176.138])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 17:50:33 +0200
Received: from sbailliez by linagora.net8.nerim.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 17:50:33 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Stephane Bailliez <sbailliez@apache.org>
Subject:  Indexes auto creation
Date:  Mon, 13 Jun 2005 17:48:05 +0200
Lines: 48
Message-ID: <d8k9ir$82n$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: linagora.net8.nerim.net
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a very stupid question that puzzles me so far in the API. (I'm 
using Lucene 1.4.3)

There is a boolean flag over the creation of the Directory which is 
basically: use it as is or delete the storage area

Same for the index, the IndexWriter use a flag 'use the existing or 
create a new one'.

If you're creating an indexwriter with 'create' set to false. It could 
blow up with an IOException because the index does not exist.
But it could also blow up for other reasons with an IOException..which 
does not help much in identifying the source problem.


What I would like to is something like: if the index does not exist, 
then create one for me, otherwise use it.

I could do that with something like

try {
    writer = new IndexWriter(directory, analyzer, false)
} catch (IOException e){
     writer = new IndexWriter(directory, analyzer, true);
}

but this is not exactly true, and I could possibly delete an existing 
index if an IOException happens which is not due to a non-existing index.

Apparently a way to check there is an existing index would be (based on 
the Lucene source code) to do something like:

try {
    writer = new IndexWriter(directory, analyzer, false)
} catch (IOException e){
    if ( !directory.exists(IndexFileNames.SEGMENTS) ) {
        // the index really does not exists, so create it
        writer = new IndexWriter(directory, analyzer, true);
    } else {
        throw e;
    }
}

Is this correct or is there something even more simpler that I'm missing ?

Ideally I would have liked a subclassed IOException on the IndexWriter 
to differentiate the cases (like FileNotFoundException for example) but 
maybe I'm missing some trivial thing.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 16:38:30 2005
Return-Path: <java-user-return-14917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73716 invoked from network); 13 Jun 2005 16:38:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 16:38:29 -0000
Received: (qmail 58637 invoked by uid 500); 13 Jun 2005 16:38:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58610 invoked by uid 500); 13 Jun 2005 16:38:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58597 invoked by uid 99); 13 Jun 2005 16:38:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from blackhole.fatwire.com (HELO blackhole.fatwire.com) (209.212.94.12)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 09:38:21 -0700
Received: by blackhole.fatwire.com with Internet Mail Service (5.5.2656.59)
	id <LYFBN4MN>; Mon, 13 Jun 2005 12:37:43 -0400
Message-ID: <E9C070038E79D411B73700D0B73EC81006DBA116@blackhole.fatwire.com>
From: "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Indexes auto creation
Date: Mon, 13 Jun 2005 12:37:42 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2656.59)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I ran into a related problem; when I create an IndexWriter with a
FSDirectory created with create=true, an existing index would somehow get
corrupted (Luke would come back with a message saying that the index is
corrupt). IndexWriter will tell you that it has 0 documents at that stage
even though the index had several documents prior to creating this instance
of IndexWriter. It is interesting that the sizes of the index files remain
same. It seems that, creating an IndexWriter with a FSDirectory with
create=true on an existing index somehow corrupts the index. 

I figured there must be a bug here (I am using 1.4.3), has anyone run into
this? I had to fall back on an inelegant solution. First check if a
directory exists, if not create a dummy index and close it. After that
always create IndexWriter with create=false.

Thanks
-Hareesh




-----Original Message-----
From: Stephane Bailliez [mailto:sbailliez@apache.org] 
Sent: Monday, June 13, 2005 11:48 AM
To: java-user@lucene.apache.org
Subject: Indexes auto creation

I have a very stupid question that puzzles me so far in the API. (I'm 
using Lucene 1.4.3)

There is a boolean flag over the creation of the Directory which is 
basically: use it as is or delete the storage area

Same for the index, the IndexWriter use a flag 'use the existing or 
create a new one'.

If you're creating an indexwriter with 'create' set to false. It could 
blow up with an IOException because the index does not exist.
But it could also blow up for other reasons with an IOException..which 
does not help much in identifying the source problem.


What I would like to is something like: if the index does not exist, 
then create one for me, otherwise use it.

I could do that with something like

try {
    writer = new IndexWriter(directory, analyzer, false)
} catch (IOException e){
     writer = new IndexWriter(directory, analyzer, true);
}

but this is not exactly true, and I could possibly delete an existing 
index if an IOException happens which is not due to a non-existing index.

Apparently a way to check there is an existing index would be (based on 
the Lucene source code) to do something like:

try {
    writer = new IndexWriter(directory, analyzer, false)
} catch (IOException e){
    if ( !directory.exists(IndexFileNames.SEGMENTS) ) {
        // the index really does not exists, so create it
        writer = new IndexWriter(directory, analyzer, true);
    } else {
        throw e;
    }
}

Is this correct or is there something even more simpler that I'm missing ?

Ideally I would have liked a subclassed IOException on the IndexWriter 
to differentiate the cases (like FileNotFoundException for example) but 
maybe I'm missing some trivial thing.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 16:54:38 2005
Return-Path: <java-user-return-14918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79846 invoked from network); 13 Jun 2005 16:54:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 16:54:38 -0000
Received: (qmail 96877 invoked by uid 500); 13 Jun 2005 16:54:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96832 invoked by uid 500); 13 Jun 2005 16:54:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96814 invoked by uid 99); 13 Jun 2005 16:54:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from redhat.sirma.bg (HELO redhat.sirma.bg) (62.213.161.130)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 09:54:31 -0700
Received: from [192.168.128.211] (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id j5DDDM9W016411
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 16:13:22 +0300
Message-ID: <42AD8670.8040609@sirma.bg>
Date: Mon, 13 Jun 2005 16:13:20 +0300
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Out of Memory (correction)
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

A small correction to my last letter: "1000gigs" should be "1000 megs" 
(sorry)
Here's the corrected version:

High guys,
Building some huge index (about 500,000 docs totaling to 10megs of plain 
text) we've run into the following problem:
Most of the time the IndexWriter process consumes a fairly small amount 
of memory (about 32 megs).
However, as the index size grows, the memory usage sporadically bursts 
to levels of (say) 1000 megs and then falls back to its level.
The problem is that unless te process is started with some option like 
-Xmx1000m this situation causes an OutOfMemoryException which terminates 
the indexing process.

My question is - is there a way to avoid it?

Regards
Stanislav

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 16:56:28 2005
Return-Path: <java-user-return-14919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80514 invoked from network); 13 Jun 2005 16:56:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 16:56:28 -0000
Received: (qmail 4072 invoked by uid 500); 13 Jun 2005 16:56:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4041 invoked by uid 500); 13 Jun 2005 16:56:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4021 invoked by uid 99); 13 Jun 2005 16:56:21 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from main.gmane.org (HELO ciao.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 09:56:20 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1Dhs9J-0005jY-3b
	for java-user@lucene.apache.org; Mon, 13 Jun 2005 18:50:57 +0200
Received: from linagora.net8.nerim.net ([213.41.176.138])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 18:50:57 +0200
Received: from sbailliez by linagora.net8.nerim.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 18:50:57 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Stephane Bailliez <sbailliez@apache.org>
Subject:  Re: Indexes auto creation
Date:  Mon, 13 Jun 2005 18:55:09 +0200
Lines: 11
Message-ID: <d8kdgi$kr7$1@sea.gmane.org>
References:  <d8k9ir$82n$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: linagora.net8.nerim.net
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
In-Reply-To: <d8k9ir$82n$1@sea.gmane.org>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Stephane Bailliez wrote:
[...]
> try {
>    writer = new IndexWriter(directory, analyzer, false)
> } catch (IOException e){
>     writer = new IndexWriter(directory, analyzer, true);
> }

On a related note, the code above does not work if the index does not 
exist because of the lock created by the first IndexWriter that is still 
lying around.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 17:06:56 2005
Return-Path: <java-user-return-14920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83526 invoked from network); 13 Jun 2005 17:06:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 17:06:55 -0000
Received: (qmail 30539 invoked by uid 500); 13 Jun 2005 17:06:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30508 invoked by uid 500); 13 Jun 2005 17:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30461 invoked by uid 99); 13 Jun 2005 17:06:46 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail2.stellent.com (HELO mail2.intranetsolutions.com) (12.40.184.222)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 10:06:45 -0700
Received: from [10.10.20.20] ([10.10.20.20]) by mail2.intranetsolutions.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 13 Jun 2005 11:43:07 -0500
Subject: Re: Indexes auto creation
From: Luke Francl <luke.francl@stellent.com>
To: java-user@lucene.apache.org
In-Reply-To: <d8k9ir$82n$1@sea.gmane.org>
References: <d8k9ir$82n$1@sea.gmane.org>
Content-Type: text/plain
Message-Id: <1118680980.17393.2.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Mon, 13 Jun 2005 11:43:00 -0500
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 13 Jun 2005 16:43:07.0567 (UTC) FILETIME=[FA0DA3F0:01C57036]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You may want to try using IndexReader's indexExists family of methods.
They will tell you whether or not an index is there.

http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#indexExists(org.apache.lucene.store.Directory)



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 17:11:50 2005
Return-Path: <java-user-return-14921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85332 invoked from network); 13 Jun 2005 17:11:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 17:11:50 -0000
Received: (qmail 44735 invoked by uid 500); 13 Jun 2005 17:11:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44681 invoked by uid 500); 13 Jun 2005 17:11:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44657 invoked by uid 99); 13 Jun 2005 17:11:45 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO uar.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 10:11:43 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id 1C39A1BD30
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 20:11:27 +0300 (EEST)
Message-ID: <42ADBE3E.1090906@i-hypergrid.com>
Date: Mon, 13 Jun 2005 20:11:26 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexes auto creation
References: <d8k9ir$82n$1@sea.gmane.org>
In-Reply-To: <d8k9ir$82n$1@sea.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hello

I'm using following code in the startup of my program


    String indexDirectory = //some init
    try {
      if ( !IndexReader.indexExists(indexDirectory)) {
        // working index doesn't exist so try to create a dummy index.
        IndexWriter iw = new IndexWriter(indexDirectory, new 
StandardAnalyzer(), true);
        iw.close();
      } else {
        IndexReader.unlock(FSDirectory.getDirectory(indexDirectory, false));
      }
    } catch (IOException e) {
      // Exception happened when trying to unlock working index
    }

regards,
Volodymyr Bychkoviak


Stephane Bailliez wrote:

> I have a very stupid question that puzzles me so far in the API. (I'm 
> using Lucene 1.4.3)
>
> There is a boolean flag over the creation of the Directory which is 
> basically: use it as is or delete the storage area
>
> Same for the index, the IndexWriter use a flag 'use the existing or 
> create a new one'.
>
> If you're creating an indexwriter with 'create' set to false. It could 
> blow up with an IOException because the index does not exist.
> But it could also blow up for other reasons with an IOException..which 
> does not help much in identifying the source problem.
>
>
> What I would like to is something like: if the index does not exist, 
> then create one for me, otherwise use it.
>
> I could do that with something like
>
> try {
>    writer = new IndexWriter(directory, analyzer, false)
> } catch (IOException e){
>     writer = new IndexWriter(directory, analyzer, true);
> }
>
> but this is not exactly true, and I could possibly delete an existing 
> index if an IOException happens which is not due to a non-existing index.
>
> Apparently a way to check there is an existing index would be (based 
> on the Lucene source code) to do something like:
>
> try {
>    writer = new IndexWriter(directory, analyzer, false)
> } catch (IOException e){
>    if ( !directory.exists(IndexFileNames.SEGMENTS) ) {
>        // the index really does not exists, so create it
>        writer = new IndexWriter(directory, analyzer, true);
>    } else {
>        throw e;
>    }
> }
>
> Is this correct or is there something even more simpler that I'm 
> missing ?
>
> Ideally I would have liked a subclassed IOException on the IndexWriter 
> to differentiate the cases (like FileNotFoundException for example) 
> but maybe I'm missing some trivial thing.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 17:14:04 2005
Return-Path: <java-user-return-14922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86416 invoked from network); 13 Jun 2005 17:14:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 17:14:04 -0000
Received: (qmail 51454 invoked by uid 500); 13 Jun 2005 17:13:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51438 invoked by uid 500); 13 Jun 2005 17:13:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51425 invoked by uid 99); 13 Jun 2005 17:13:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lucene-list@lucenedotnet.com designates 69.93.125.162 as permitted sender)
Received: from cpanel37.gzo.com (HELO cpanel37.gzo.com) (69.93.125.162)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 10:13:54 -0700
Received: from [195.96.81.145] (helo=pb)
	by cpanel37.gzo.com with esmtpa (Exim 4.50)
	id 1Dhrj4-0004h2-BR
	for java-user@lucene.apache.org; Mon, 13 Jun 2005 11:23:52 -0500
From: "Pasha Bizhan" <lucene-list@lucenedotnet.com>
To: <java-user@lucene.apache.org>
Subject: RE: Displaying relevant text with Search results
Date: Mon, 13 Jun 2005 20:29:09 +0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
In-Reply-To: <E9C070038E79D411B73700D0B73EC81006DBA111@blackhole.fatwire.com>
thread-index: AcVwKrggaj9mrLSnREebEoGYIG8ifQACap5w
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - cpanel37.gzo.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - lucenedotnet.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 

> From: Kadlabalu, Hareesh [mailto:hareesh.kadlabalu@fatwire.com] 

> However, in order to really do it correctly, one needs to get 
> to the 'best'
> part field's text where the density of searched word(s) is 
> highest. This could be a very expensive process. Does Lucene 
> give any help is achieving this? 

You need the Highlighter package.
http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/contrib/highlighter/src/
java/org/apache/lucene/search/highlight/package.html?view=markup

http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/contrib/highlighter/

Pasha Bizhan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 17:14:11 2005
Return-Path: <java-user-return-14923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86462 invoked from network); 13 Jun 2005 17:14:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 17:14:11 -0000
Received: (qmail 52443 invoked by uid 500); 13 Jun 2005 17:14:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52415 invoked by uid 500); 13 Jun 2005 17:14:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52373 invoked by uid 99); 13 Jun 2005 17:14:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lucene-list@lucenedotnet.com designates 69.93.125.162 as permitted sender)
Received: from cpanel37.gzo.com (HELO cpanel37.gzo.com) (69.93.125.162)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 10:14:03 -0700
Received: from [195.96.81.145] (helo=pb)
	by cpanel37.gzo.com with esmtpa (Exim 4.50)
	id 1Dhrdg-00048B-Qu
	for java-user@lucene.apache.org; Mon, 13 Jun 2005 11:18:18 -0500
From: "Pasha Bizhan" <lucene-list@lucenedotnet.com>
To: <java-user@lucene.apache.org>
Subject: RE: Indexes auto creation
Date: Mon, 13 Jun 2005 20:23:30 +0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
In-Reply-To: <d8k9ir$82n$1@sea.gmane.org>
thread-index: AcVwMGqnFG2VjHfqThmzyKCfQoh60AAA0jaA
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - cpanel37.gzo.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - lucenedotnet.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 

> From: news [mailto:news@sea.gmane.org] On Behalf Of Stephane Bailliez
> 
> What I would like to is something like: if the index does not 
> exist, then create one for me, otherwise use it.

Look at IndexReader.indexExists method.

Your code will be like this:

bool createIndex = ! (IndexReader.indexExists(directory));
writer = new IndexWriter(directory, analyzer, createIndex );

Pasha Bizhan
http://lucenedotnet.com 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 17:14:31 2005
Return-Path: <java-user-return-14924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86637 invoked from network); 13 Jun 2005 17:14:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 17:14:31 -0000
Received: (qmail 54278 invoked by uid 500); 13 Jun 2005 17:14:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54256 invoked by uid 500); 13 Jun 2005 17:14:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54212 invoked by uid 99); 13 Jun 2005 17:14:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 10:14:19 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5114013E20EF; Mon, 13 Jun 2005 13:13:55 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 4CA6813E2007
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 13:13:40 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <E9C070038E79D411B73700D0B73EC81006DBA111@blackhole.fatwire.com>
References: <E9C070038E79D411B73700D0B73EC81006DBA111@blackhole.fatwire.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F55126D3-3AE9-4BC4-8206-1C3483B8E758@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Displaying relevant text with Search results
Date: Mon, 13 Jun 2005 13:13:45 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 13, 2005, at 10:58 AM, Kadlabalu, Hareesh wrote:

> Hi,
>
> I have a simple index with one default field that is stored and  
> indexed. I
> want to display the query results along with some relevant text  
> from the
> default field, the way search is implemented at http:// 
> www.lucenebook.com/
> <http://www.lucenebook.com/> .
>
>
>
> For example, searching for 'wonderful'
> (http://www.lucenebook.com/search?query=Wonderful
> <http://www.lucenebook.com/search?query=Wonderful> ) generates  
> results that
> have highlighting on relevant words in the result.
>
>
>
> One way to implement this would be get documents from search result  
> and
> physically parse the contents of the default field for the  
> occurrence of the
> search word or one of its synonyms (Wonderful: wonder,  
> wonderfully.. ). Then
> display a few words before and after a match for contextual  
> information.
>
> However, in order to really do it correctly, one needs to get to  
> the 'best'
> part field's text where the density of searched word(s) is highest.  
> This
> could be a very expensive process. Does Lucene give any help is  
> achieving
> this?

The Highlighter (under contrib in the Lucene Subversion repository)  
does a bit of finding the best fragments - you can customize this  
aspect of it.  Check the source code and test cases for more details  
on how to customize this sort of thing.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 17:23:48 2005
Return-Path: <java-user-return-14925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89695 invoked from network); 13 Jun 2005 17:23:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 17:23:47 -0000
Received: (qmail 73959 invoked by uid 500); 13 Jun 2005 17:23:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73934 invoked by uid 500); 13 Jun 2005 17:23:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73908 invoked by uid 99); 13 Jun 2005 17:23:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 10:23:38 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E17D513E2006; Mon, 13 Jun 2005 10:52:18 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 9ABF613E2006
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 10:52:06 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <200506131455.17637.mail@andy-roberts.net>
References: <a92573960506130408576f0883@mail.gmail.com> <7D6991A0-4E27-493B-8B31-EB9A549E8B1C@ehatchersolutions.com> <a9257396050613061831b6302d@mail.gmail.com> <200506131455.17637.mail@andy-roberts.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8D76BC52-0C05-436F-9736-FC3E27AF435B@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Hypenated word
Date: Mon, 13 Jun 2005 10:52:19 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 13, 2005, at 10:55 AM, Andy Roberts wrote:

> On Monday 13 Jun 2005 13:18, Markus Wiederkehr wrote:
>
>> I see, the list of exceptions makes this a lot more complicated  
>> than I
>> thought... Thanks a lot, Erik!
>>
>>
>
> I expect you'll need to do some pre-processing. Read in your text  
> into a
> buffer, line-by-line. If a given line ends with a hyphen, you can  
> manipulate
> the buffer to merge the hyphenated tokens.

The problem I encountered when indexing "Lucene in Action" was that I  
couldn't just blindly concatenate two tokens because the first ends  
with a hyphen.  Some lines ended with a hyphen because it was a dash,  
not a hyphenated word.

I'm sure other more clever implementations could do this better, by  
looking up the concatenated word in a dictionary for instance.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 17:59:00 2005
Return-Path: <java-user-return-14926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21354 invoked from network); 13 Jun 2005 17:59:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 17:59:00 -0000
Received: (qmail 81452 invoked by uid 500); 13 Jun 2005 17:58:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81420 invoked by uid 500); 13 Jun 2005 17:58:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81400 invoked by uid 99); 13 Jun 2005 17:58:52 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from main.gmane.org (HELO ciao.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 10:58:50 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1Dht7O-0007eh-VG
	for java-user@lucene.apache.org; Mon, 13 Jun 2005 19:53:03 +0200
Received: from ip-176.net-82-216-240.rev.numericable.fr ([82.216.240.176])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 19:53:02 +0200
Received: from sbailliez by ip-176.net-82-216-240.rev.numericable.fr with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 19:53:02 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Stephane Bailliez <sbailliez@apache.org>
Subject:  Re: Indexes auto creation
Date:  Mon, 13 Jun 2005 19:56:23 +0200
Lines: 9
Message-ID:  <42ADC8C7.7070707@apache.org>
References:  <d8k9ir$82n$1@sea.gmane.org> <1118680980.17393.2.camel@localhost>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: ip-176.net-82-216-240.rev.numericable.fr
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
In-Reply-To: <1118680980.17393.2.camel@localhost>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Luke Francl wrote:
> You may want to try using IndexReader's indexExists family of methods.
> They will tell you whether or not an index is there.
> 
> http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#indexExists(org.apache.lucene.store.Directory)

Good grief ! I missed that one.

Thanks to all who have replied.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 18:39:59 2005
Return-Path: <java-user-return-14927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56287 invoked from network); 13 Jun 2005 18:39:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 18:39:59 -0000
Received: (qmail 80077 invoked by uid 500); 13 Jun 2005 18:39:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80044 invoked by uid 500); 13 Jun 2005 18:39:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80010 invoked by uid 99); 13 Jun 2005 18:39:49 -0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FORGED_YAHOO_RCVD,FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web32110.mail.mud.yahoo.com (HELO web32110.mail.mud.yahoo.com) (68.142.207.124)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 13 Jun 2005 11:39:48 -0700
Received: (qmail 89398 invoked by uid 60001); 13 Jun 2005 18:39:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=sLGUC8mUszIcqyp4iKtdzjDtEsPgTAObXU/y05FlmNgbfN1KTy703ksPaoErlWt1bo6uHxGP0jO7hhOHDAR8rjYuVVQ/sLDl+TVuJMuJZjjlhZYYIlGY/Ik8hI9uCy3DVHgKRJERZaivmaWsifWA0iVNixoj0cg0uCQq2z6MHWM=  ;
Message-ID: <20050613183936.89396.qmail@web32110.mail.mud.yahoo.com>
Received: from [206.13.63.69] by web32110.mail.mud.yahoo.com via HTTP; Mon, 13 Jun 2005 11:39:36 PDT
Date: Mon, 13 Jun 2005 11:39:36 -0700 (PDT)
From: Aalap Parikh <aloo77@yahoo.com>
Subject: Pros/Cons of a split index over a single large index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I just a general question: What are the pros and cons
of a split index(a number of small indexes) as opposed
to a single large index?

As I have repeatedly seen in various posts at this
group, people have opted for split indexes in cases
where they have a large number of documents (say > 1
million) in the index and in such cases updating and
merging of indexes becomes costly in terms of
performance. I have also had the same experience. So
was wondering if splitting the index into a number of
smaller indexes would improve the performance of
index-modifying operations, while at the same time NOT
SACRIFICING the index search operation.

Any ideas on this?

Thanks,
Aalap.

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 19:12:45 2005
Return-Path: <java-user-return-14928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69816 invoked from network); 13 Jun 2005 19:12:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 19:12:44 -0000
Received: (qmail 60105 invoked by uid 500); 13 Jun 2005 19:12:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59806 invoked by uid 500); 13 Jun 2005 19:12:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59789 invoked by uid 99); 13 Jun 2005 19:12:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from lilzmailso01.liwest.at (HELO lilzmailso01.liwest.at) (212.33.55.23)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 12:12:33 -0700
Received: from cm66-207.liwest.at ([212.241.66.207] helo=[192.168.0.4])
	by lilzmailso01.liwest.at with esmtp (Exim 4.24)
	id 1DhuMA-0005za-O9
	for java-user@lucene.apache.org; Mon, 13 Jun 2005 21:12:22 +0200
Message-ID: <42ADDA97.105@eduhi.at>
Date: Mon, 13 Jun 2005 21:12:23 +0200
From: Gusenbauer Stefan <gusenbauer@eduhi.at>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: OutOfMemory when indexing
References: <42AD7F8F.5070205@sirma.bg> <42AD8734.9070205@idowa.de>
In-Reply-To: <42AD8734.9070205@idowa.de>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Harald Stowasser wrote:

>Stanislav Jordanov schrieb:
>
>  
>
>>High guys,
>>Building some huge index (about 500,000 docs totaling to 10megs of plain
>>text) we've run into the following problem:
>>Most of the time the IndexWriter process consumes a fairly small amount
>>of memory (about 32 megs).
>>However, as the index size grows, the memory usage sporadically bursts
>>to levels of (say) 1000 gigs and then falls back to its level.
>>The problem is that unless te process is started with some option like
>>-Xmx1000m this situation causes an OutOfMemoryException which terminates
>>the indexing process.
>>
>>My question is - is there a way to avoid it?
>>    
>>
>
>
>1.
>I start my programm with:
>java -Xms256M -Xmx512M -jar Suchmaschine.jar &
>
>This protect me now from OutOfMemoryException. After I use
>iterative-subroutines.
>
>2.
>Free your variables as soon as possible.
>like "term=null;"
>This will help your Garbage-Collector!
>
>3.
>Maybe you should watch totalMemory and R.freeMemory() from
>Runtime.getRuntime()
>That will help you to find the "Memory-dissipater"
>
>4.
>I had the problem when deleting Documents from Index. I used a
>Subroutine to delete single Documents.
>It runs much better when I replaced it into a "iterative" subroutine
>like this:
>
>  public int deleteMany(String keywords)
>  {
>    int anzahl=0;
>    try
>    {
>      openReader();
>      String[] temp = keywords.split(",");
>      //Runtime R = Runtime.getRuntime();
>      for (int i = 0 ; i < temp.length ; i++)
>      {
>        Term term =new Term("keyword",temp[i]);
>        anzahl+= mReader.delete(term);
>        term=null;
>        /*System.out.println("deleted " + temp[i]
>                   +" t:"+R.totalMemory()
>                   +" f:"+R.freeMemory()
>                   +" m"+R.maxMemory());
>        */
>      }
>      close();
>    } catch (Exception e){
>      cIdowa.error( "Could not delete Documents:" + keywords
>            +". Because:"+ e.getMessage() + "\n" +e.toString() );
>    }
>    return anzahl;
>  }
>
>
>
>  
>
A few weeks before I had a similar problem too. I will write my problem
and the solution for it:
I'm indexing docs and every parsed document is stored in an ArrayList.
This solution worked for little directories with a little number of
files in it but when the things are growing you're in trouble.
My solution was whenever I will run out of memory I will "save" the
documents. I open the indexwriter and write every document from the
arraylist to the index. Then I set the arraylist and some other stuff =
null and try to invoke the garbage collector. Then I do some
reinitializing and continue indexing.
 Looks easy but it wasn't. How do I check if i will run out of memory?
Runtimeclass and its methods for getting information about the free
memory were very unreliable.
Therefore I changed to Java 1.5 and implemented a memorynotification
listener which is support by the java.lang.management package. There you
can adjust a threshold when you should be informed. After the
notification I perform a "save".

Hope this will help you
Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 19:20:13 2005
Return-Path: <java-user-return-14929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91218 invoked from network); 13 Jun 2005 19:20:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 19:20:13 -0000
Received: (qmail 81176 invoked by uid 500); 13 Jun 2005 19:20:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81153 invoked by uid 500); 13 Jun 2005 19:20:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81113 invoked by uid 99); 13 Jun 2005 19:20:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp.battelle.org (HELO ws-bco-smtp1.IM.BATTELLE.ORG) (131.167.253.61)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 12:20:05 -0700
Received: from [131.167.170.26] by smtp.BATTELLE.ORG (PMDF V6.2-X26 #30874)
 with ESMTP id <QYTR08Q9BAF06E02KG@smtp.BATTELLE.ORG> for
 java-user@lucene.apache.org; Mon,
 13 Jun 2005 15:12:22 -0400 (Eastern Daylight Time)
Date: Mon, 13 Jun 2005 15:10:46 -0400
From: Dan Funk <funkd@BATTELLE.ORG>
Subject: Re: Mobile Lucene
In-reply-to: <BAY105-F137C2C2D1D2C656AB24604B2F00@phx.gbl>
To: java-user@lucene.apache.org
Message-id: <42ADDA36.3050904@battelle.org>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7bit
X-Accept-Language: en-us, en
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050317)
References: <BAY105-F137C2C2D1D2C656AB24604B2F00@phx.gbl>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have Sharp zaurus SL-C3000 running J2me - I was able to use the 
current lucene without modification.

christopher may wrote:

> Hey all I am working on a project that requires a search engine on a 
> embedded linux that is also bluetooth capable. Is there a lucene 
> mobile or can I recompile the code in the J2me wireless toolkit ? Any 
> help would be appreciated, Thanks
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
Dan Funk
Software Engineer

Information Technology Solutions
Battelle Charlottesville Operations
1000 Research Park Boulevard, Suite 105
Charlottesville, Virginia 22911

434.984.0951 x244
434.984.0947 (fax)
FunkD@Battelle.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 19:30:15 2005
Return-Path: <java-user-return-14930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96620 invoked from network); 13 Jun 2005 19:30:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 19:30:15 -0000
Received: (qmail 11468 invoked by uid 500); 13 Jun 2005 19:30:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11446 invoked by uid 500); 13 Jun 2005 19:30:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11431 invoked by uid 99); 13 Jun 2005 19:30:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from fmailg1.svr.pol.co.uk (HELO fmailg1.svr.pol.co.uk) (195.92.195.183)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 12:30:03 -0700
Received: from [195.92.193.18] (helo=cmailm1.svr.pol.co.uk)
	by fmailg1.svr.pol.co.uk with esmtp (Exim 4.41)
	id 1DhqtT-00028d-7r
	for java-user@lucene.apache.org; Mon, 13 Jun 2005 16:30:31 +0100
Received: from user-5583.lns5-c7.dsl.pol.co.uk ([84.67.53.207] helo=[192.168.1.3])
	by cmailm1.svr.pol.co.uk with esmtp (Exim 4.41)
	id 1DhqtR-0000cT-8s
	for java-user@lucene.apache.org; Mon, 13 Jun 2005 16:30:29 +0100
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Re: Hypenated word
Date: Mon, 13 Jun 2005 16:31:41 +0000
User-Agent: KMail/1.8.1
References: <a92573960506130408576f0883@mail.gmail.com> <200506131455.17637.mail@andy-roberts.net> <a925739605061307521296251@mail.gmail.com>
In-Reply-To: <a925739605061307521296251@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506131631.41845.mail@andy-roberts.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 13 Jun 2005 14:52, Markus Wiederkehr wrote:
> On 6/13/05, Andy Roberts <mail@andy-roberts.net> wrote:
> > On Monday 13 Jun 2005 13:18, Markus Wiederkehr wrote:
> > > I see, the list of exceptions makes this a lot more complicated than I
> > > thought... Thanks a lot, Erik!
> >
> > I expect you'll need to do some pre-processing. Read in your text into a
> > buffer, line-by-line. If a given line ends with a hyphen, you can
> > manipulate the buffer to merge the hyphenated tokens.
>
> As Erik wrote it is not that simple, unfortunately. For example, if
> one line ends with "read-" and the next line begins with "only" the
> correct word is "read-only" not "readonly". Whereas "work-" and "ing"
> should of course be merged into "working".
>
> Markus

Perhaps you do some crude checking against a dictionary. Combine the word 
anyway and check if it's in the dictionary. If so, keep it merged otherwise, 
it's a compound and so revert back to the hyphenated form.

Word lists come part of all good OSS dictionary projects, as well as other 
language resources, like the BNC word lists etc.

Andy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 19:30:38 2005
Return-Path: <java-user-return-14931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96807 invoked from network); 13 Jun 2005 19:30:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 19:30:37 -0000
Received: (qmail 12880 invoked by uid 500); 13 Jun 2005 19:30:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12855 invoked by uid 500); 13 Jun 2005 19:30:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12841 invoked by uid 99); 13 Jun 2005 19:30:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp06.web.de (HELO smtp06.web.de) (217.72.192.224)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 12:30:27 -0700
Received: from [80.134.152.141] (helo=[192.168.1.3])
	by smtp06.web.de with asmtp (WEB.DE 4.105 #291)
	id 1DhudK-0007fH-00
	for java-user@lucene.apache.org; Mon, 13 Jun 2005 21:30:06 +0200
Message-ID: <42ADDECD.7010700@web.de>
Date: Mon, 13 Jun 2005 21:30:21 +0200
From: Barbara Krausz <bkrausz@web.de>
Reply-To:  java-user@lucene.apache.org
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8a3) Gecko/20040817
X-Accept-Language: de, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Determining the IDF while searching for documents
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Sender: bkrausz@web.de
X-Sender: bkrausz@web.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

is it possible to determine the IDF (the documents in which a term 
appears) while searching for documents? I implemented an index based on 
trigrams, i.e. the indexterms are now Strings of 3 characters so that my 
search engine finds documents with OCR-Errors. When I'm searching for 
the term "rainstorm" for example I split it up into the trigrams __r, 
_ra, rai, ain, ins...
First I look for documents which contain at least 8 of the 11 trigrams 
of "rainstorm" (the misspelled "ranstorm" contains 8 of the 11 
trigrams), then I check if the trigrams form a term like "rainstorm". In 
order to compute the TF I count the occurences of terms which are 
similar to the term. But I've got problems to compute the IDF, because I 
must know the number of documents in which the term appears before 
searching for the documents (in the method sumOfSquaredWeights() in my 
weight). I used hsqldb during indexing and saved the number of documents 
for each term. But it's really slow.
My question is the following: When I'm searching for documents which 
contain terms similar to the searchterm I actually get the number of 
documents that contain the term. But I need the IDF before searching 
these documents for example for BooleanQueries which need the IDF to 
normalize the queryvector. Can I solve this problem, i.e. can I 
determine the IDF later and normalize the BooleanQuery?

Thanks
Barbara

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 20:28:13 2005
Return-Path: <java-user-return-14932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19497 invoked from network); 13 Jun 2005 20:28:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 20:28:13 -0000
Received: (qmail 54052 invoked by uid 500); 13 Jun 2005 20:28:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54022 invoked by uid 500); 13 Jun 2005 20:28:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54009 invoked by uid 99); 13 Jun 2005 20:28:04 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lucenelist@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from smtprelay04.ispgateway.de (HELO smtprelay04.ispgateway.de) (80.67.18.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 13:28:03 -0700
Received: (qmail 1387 invoked from network); 13 Jun 2005 17:41:07 -0000
Received: from unknown (HELO p54964CA6.dip.t-dialin.net) ([pbs]695637@[84.150.76.166])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 13 Jun 2005 17:41:07 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Indexes auto creation
Date: Mon, 13 Jun 2005 19:42:33 +0200
User-Agent: KMail/1.8
References: <E9C070038E79D411B73700D0B73EC81006DBA116@blackhole.fatwire.com>
In-Reply-To: <E9C070038E79D411B73700D0B73EC81006DBA116@blackhole.fatwire.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506131942.33247@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 13 June 2005 18:37, Kadlabalu, Hareesh wrote:

> I ran into a related problem; when I create an IndexWriter with a
> FSDirectory created with create=true, an existing index would somehow
> get corrupted

Well, it doesn't get corrupted, it gets deleted. That's what create=true is 
supposed to do, isn't it?

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 20:53:21 2005
Return-Path: <java-user-return-14933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25971 invoked from network); 13 Jun 2005 20:53:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 20:53:21 -0000
Received: (qmail 8628 invoked by uid 500); 13 Jun 2005 20:53:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8494 invoked by uid 500); 13 Jun 2005 20:53:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8460 invoked by uid 99); 13 Jun 2005 20:53:12 -0000
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fersher@hotmail.com designates 65.54.224.46 as permitted sender)
Received: from bay105-f36.bay105.hotmail.com (HELO hotmail.com) (65.54.224.46)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 13:53:10 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Mon, 13 Jun 2005 13:52:56 -0700
Message-ID: <BAY105-F36A18437CADC5F993872CEB2F00@phx.gbl>
Received: from 65.54.224.200 by by105fd.bay105.hotmail.msn.com with HTTP;
	Mon, 13 Jun 2005 20:52:56 GMT
X-Originating-IP: [65.54.224.200]
X-Originating-Email: [fersher@hotmail.com]
X-Sender: fersher@hotmail.com
In-Reply-To: <42ADDA36.3050904@battelle.org>
From: "christopher may" <fersher@hotmail.com>
To: java-user@lucene.apache.org
Bcc: 
Subject: Re: Mobile Lucene
Date: Mon, 13 Jun 2005 16:52:56 -0400
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 13 Jun 2005 20:52:56.0548 (UTC) FILETIME=[E02EA240:01C57059]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


  What are you running as far as the OS ? And thanks for the responce.

>From: Dan Funk <funkd@BATTELLE.ORG>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: Mobile Lucene
>Date: Mon, 13 Jun 2005 15:10:46 -0400
>
>I have Sharp zaurus SL-C3000 running J2me - I was able to use the current 
>lucene without modification.
>
>christopher may wrote:
>
>>Hey all I am working on a project that requires a search engine on a 
>>embedded linux that is also bluetooth capable. Is there a lucene mobile or 
>>can I recompile the code in the J2me wireless toolkit ? Any help would be 
>>appreciated, Thanks
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>--
>Dan Funk
>Software Engineer
>
>Information Technology Solutions
>Battelle Charlottesville Operations
>1000 Research Park Boulevard, Suite 105
>Charlottesville, Virginia 22911
>
>434.984.0951 x244
>434.984.0947 (fax)
>FunkD@Battelle.org
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 13 21:37:41 2005
Return-Path: <java-user-return-14934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38973 invoked from network); 13 Jun 2005 21:37:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jun 2005 21:37:41 -0000
Received: (qmail 91246 invoked by uid 500); 13 Jun 2005 21:37:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91193 invoked by uid 500); 13 Jun 2005 21:37:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91180 invoked by uid 99); 13 Jun 2005 21:37:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp.battelle.org (HELO ws-bco-smtp1.IM.BATTELLE.ORG) (131.167.253.61)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 14:37:33 -0700
Received: from [131.167.170.26] by smtp.BATTELLE.ORG (PMDF V6.2-X26 #30874)
 with ESMTP id <ZJ1J08QFRYT46E029C@smtp.BATTELLE.ORG> for
 java-user@lucene.apache.org; Mon,
 13 Jun 2005 17:16:36 -0400 (Eastern Daylight Time)
Date: Mon, 13 Jun 2005 17:15:01 -0400
From: Dan Funk <funkd@BATTELLE.ORG>
Subject: Re: Mobile Lucene
In-reply-to: <BAY105-F36A18437CADC5F993872CEB2F00@phx.gbl>
To: java-user@lucene.apache.org
Message-id: <42ADF755.90403@battelle.org>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7bit
X-Accept-Language: en-us, en
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050317)
References: <BAY105-F36A18437CADC5F993872CEB2F00@phx.gbl>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It comes with Linux installed - looks like they wrapped their own - no 
official distribution.
You can, with a little effort, put debian on it ( 
http://www.eleves.ens.fr/home/leurent/zaurus.html ).

It doesn't come with Java, but you can get an official version from sun 
that works very well ( 
http://java.sun.com/developer/earlyAccess/pp4zaurus/ )

I re-compiled my application for java 1.1  and put the Lucene binary I 
downloaded in my path - I didn't alter it at all.  Everything worked 
right out of the box.  I should note that a GUI based application would 
have been far more difficult to port - all I had  was a web service- and 
that moved over without a hitch.


christopher may wrote:

>
>  What are you running as far as the OS ? And thanks for the responce.
>
>> From: Dan Funk <funkd@BATTELLE.ORG>
>> Reply-To: java-user@lucene.apache.org
>> To: java-user@lucene.apache.org
>> Subject: Re: Mobile Lucene
>> Date: Mon, 13 Jun 2005 15:10:46 -0400
>>
>> I have Sharp zaurus SL-C3000 running J2me - I was able to use the 
>> current lucene without modification.
>>
>> christopher may wrote:
>>
>>> Hey all I am working on a project that requires a search engine on a 
>>> embedded linux that is also bluetooth capable. Is there a lucene 
>>> mobile or can I recompile the code in the J2me wireless toolkit ? 
>>> Any help would be appreciated, Thanks
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> -- 
>> Dan Funk
>> Software Engineer
>>
>> Information Technology Solutions
>> Battelle Charlottesville Operations
>> 1000 Research Park Boulevard, Suite 105
>> Charlottesville, Virginia 22911
>>
>> 434.984.0951 x244
>> 434.984.0947 (fax)
>> FunkD@Battelle.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
Dan Funk
Software Engineer

Information Technology Solutions
Battelle Charlottesville Operations
1000 Research Park Boulevard, Suite 105
Charlottesville, Virginia 22911

434.984.0951 x244
434.984.0947 (fax)
FunkD@Battelle.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 14 01:24:36 2005
Return-Path: <java-user-return-14935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5649 invoked from network); 14 Jun 2005 01:24:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2005 01:24:36 -0000
Received: (qmail 49941 invoked by uid 500); 14 Jun 2005 01:24:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49922 invoked by uid 500); 14 Jun 2005 01:24:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 50814 invoked by uid 99); 13 Jun 2005 21:17:55 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
X-Sasl-enc: Ap4ZI4Iadn0meh3eoTriAUIJ+MCtZRc6COfw68bXgqXC 1118693606
Message-ID: <42ADE918.1050005@slive.ca>
Date: Mon, 13 Jun 2005 16:14:16 -0400
From: Joshua Slive <joshua@slive.ca>
User-Agent: Mozilla Thunderbird 1.0+ (Windows/20050422)
MIME-Version: 1.0
To: Paul Querna <pquerna@apache.org>
CC: Erik Hatcher <erik@ehatchersolutions.com>, 
 java-user@lucene.apache.org,  infrastructure@apache.org
Subject: wiki now sends Vary: Cookie (was Re: DBSight, search on database
 by Lucene)
References: <42AA91E5.9050007@gmail.com> <8B3AF14F-1085-4573-B750-66A19E63C3FC@ehatchersolutions.com> <42AB1A99.4060100@gmail.com> <0B96EBE6-443E-404F-BA71-E9C95D9C0CD7@ehatchersolutions.com> <Pine.WNT.4.61.0506111958150.1432@bronfman504> <42ABA71A.3060901@apache.org>
In-Reply-To: <42ABA71A.3060901@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



Paul Querna wrote:
> Joshua Slive wrote:
>> What we want is for anything with a Cookie: header to totally bypass 
>> the cache.  I don't know of any way to configure that.
> 
> 
> Moin should be sending Cache-Control: Private in these cases, in 
> addition to the Vary: Cookie header.  If they don't they will break with 
> other upstream proxies that we have no control over.  Fixing it so httpd 
> can cache fixes upstream proxies too, so it is the right thing to do.

I've added the Vary: Cookie header.  I believe that even with the 
current naive Vary handling, this should work ok in mod_cache, since it 
won't store any of the logged-in pages due to the Cache-Control headers.
So the non-cookie version should hang around in the cache.

Anyway, I hope this makes things much less confusing for people trying 
to edit the pages.

Joshua.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 14 06:26:06 2005
Return-Path: <java-user-return-14936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99366 invoked from network); 14 Jun 2005 06:26:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2005 06:26:06 -0000
Received: (qmail 10418 invoked by uid 500); 14 Jun 2005 06:25:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10345 invoked by uid 500); 14 Jun 2005 06:25:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10327 invoked by uid 99); 14 Jun 2005 06:25:58 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 23:25:55 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7BBC25B78A; Mon, 13 Jun 2005 23:25:20 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP
	id 727137F45E; Mon, 13 Jun 2005 23:25:20 -0700 (PDT)
Date: Mon, 13 Jun 2005 23:25:20 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: Lucene users <java-user@lucene.apache.org>,
	Markus Wiederkehr <markus.wiederkehr@gmail.com>
Subject: Re: Updating documents
In-Reply-To: <a925739605061305242f1b1de0@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0506132322310.4422@hal.rescomp.berkeley.edu>
References: <a925739605061305242f1b1de0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: When I do this all fields that were indexed and/or tokenized but not
: stored get lost.
:
: So is there any way to preserve fields that were not stored?
: Reconstructing these fields is to expensive in my application.

"preserving" those fields is pretty much the oposite of "not storing"
them.

i think some people have discussed the idea of using the term vector info
to reconstruct the token stream to recreate a doc with identical
properties from a search perspective, but in general, the most straight
forward way to achieve what you want is to store every field.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 14 06:49:03 2005
Return-Path: <java-user-return-14937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3735 invoked from network); 14 Jun 2005 06:49:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2005 06:49:03 -0000
Received: (qmail 52954 invoked by uid 500); 14 Jun 2005 06:48:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52929 invoked by uid 500); 14 Jun 2005 06:48:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52916 invoked by uid 99); 14 Jun 2005 06:48:53 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Jun 2005 23:48:49 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id DCF735B848; Mon, 13 Jun 2005 23:48:37 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D3DCB7F45E
	for <java-user@lucene.apache.org>; Mon, 13 Jun 2005 23:48:37 -0700 (PDT)
Date: Mon, 13 Jun 2005 23:48:37 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Determining the IDF while searching for documents
In-Reply-To: <42ADDECD.7010700@web.de>
Message-ID: <Pine.LNX.4.58.0506132342030.4422@hal.rescomp.berkeley.edu>
References: <42ADDECD.7010700@web.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I'm not 100% sure I understand your question, but...

: order to compute the TF I count the occurences of terms which are
: similar to the term. But I've got problems to compute the IDF, because I
: must know the number of documents in which the term appears before
: searching for the documents (in the method sumOfSquaredWeights() in my

...to get the number of docs that contain a specific term, you can use
IndexReader.docFreq(Term)



: Date: Mon, 13 Jun 2005 21:30:21 +0200
: From: Barbara Krausz <bkrausz@web.de>
: Reply-To: java-user@lucene.apache.org, java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Determining the IDF while searching for documents
:
: Hi all,
:
: is it possible to determine the IDF (the documents in which a term
: appears) while searching for documents? I implemented an index based on
: trigrams, i.e. the indexterms are now Strings of 3 characters so that my
: search engine finds documents with OCR-Errors. When I'm searching for
: the term "rainstorm" for example I split it up into the trigrams __r,
: _ra, rai, ain, ins...
: First I look for documents which contain at least 8 of the 11 trigrams
: of "rainstorm" (the misspelled "ranstorm" contains 8 of the 11
: trigrams), then I check if the trigrams form a term like "rainstorm". In
: order to compute the TF I count the occurences of terms which are
: similar to the term. But I've got problems to compute the IDF, because I
: must know the number of documents in which the term appears before
: searching for the documents (in the method sumOfSquaredWeights() in my
: weight). I used hsqldb during indexing and saved the number of documents
: for each term. But it's really slow.
: My question is the following: When I'm searching for documents which
: contain terms similar to the searchterm I actually get the number of
: documents that contain the term. But I need the IDF before searching
: these documents for example for BooleanQueries which need the IDF to
: normalize the queryvector. Can I solve this problem, i.e. can I
: determine the IDF later and normalize the BooleanQuery?
:
: Thanks
: Barbara
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 14 08:51:44 2005
Return-Path: <java-user-return-14938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76266 invoked from network); 14 Jun 2005 08:51:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2005 08:51:44 -0000
Received: (qmail 23334 invoked by uid 500); 14 Jun 2005 08:51:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23289 invoked by uid 500); 14 Jun 2005 08:51:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23265 invoked by uid 99); 14 Jun 2005 08:51:37 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from panacea.is.nl (HELO panacea.is.nl) (213.133.34.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Jun 2005 01:51:36 -0700
Received: from hai01.hippo.local ([213.133.51.241]) by panacea.is.nl with Microsoft SMTPSVC(5.0.2195.4905);
	 Tue, 14 Jun 2005 10:50:21 +0200
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: document score modification on the fly?
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Date: Tue, 14 Jun 2005 10:51:18 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C41A7B9@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: document score modification on the fly?
thread-index: AcVwvjr26GVk687ORe6s/aRL6yf6bQ==
From: "Max Pfingsthorn" <m.pfingsthorn@hippo.nl>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 14 Jun 2005 08:50:21.0902 (UTC) FILETIME=[193666E0:01C570BE]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi!

I have a problem regarding the integration of a PageRank score to the =
existing TF.IDF based one provided by lucene. I already have a database =
with PageRank values, but where should I start integration? I have a =
pretty simple setup, only very few fields (all but two unstored). Can I =
use the HitCollector? Or do I have to extend Similarity? The thing is =
that I need to access one field in the doc to get the PageRank value out =
of the database...
By the way, efficiency is not an issue, this is more of a proof of =
concept.
Any help or advice would be greatly appreciated!

Best regards,

Max Pfingsthorn

PS: I tried to look into Nutch for this, but I didn't recognize much =
from Lucene there...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 14 09:23:15 2005
Return-Path: <java-user-return-14939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89808 invoked from network); 14 Jun 2005 09:23:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2005 09:23:15 -0000
Received: (qmail 769 invoked by uid 500); 14 Jun 2005 09:23:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 730 invoked by uid 500); 14 Jun 2005 09:23:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 671 invoked by uid 99); 14 Jun 2005 09:23:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from redhat.sirma.bg (HELO redhat.sirma.bg) (62.213.161.130)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Jun 2005 02:23:03 -0700
Received: from [192.168.128.211] (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id j5E7XE9W014649;
	Tue, 14 Jun 2005 10:33:14 +0300
Message-ID: <42AE883A.7080806@sirma.bg>
Date: Tue, 14 Jun 2005 10:33:14 +0300
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: gusenbauer@eduhi.at
CC: java-user@lucene.apache.org
Subject: Re: OutOfMemory when indexing
References: <42AD7F8F.5070205@sirma.bg> <42AD8734.9070205@idowa.de> <42ADDA97.105@eduhi.at>
In-Reply-To: <42ADDA97.105@eduhi.at>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Gusenbauer Stefan wrote:

>A few weeks before I had a similar problem too. I will write my problem
>and the solution for it:
>I'm indexing docs and every parsed document is stored in an ArrayList.
>This solution worked for little directories with a little number of
>files in it but when the things are growing you're in trouble.
>My solution was whenever I will run out of memory I will "save" the
>documents. I open the indexwriter and write every document from the
>arraylist to the index. Then I set the arraylist and some other stuff =
>null and try to invoke the garbage collector. Then I do some
>reinitializing and continue indexing.
> Looks easy but it wasn't. How do I check if i will run out of memory?
>Runtimeclass and its methods for getting information about the free
>memory were very unreliable.
>Therefore I changed to Java 1.5 and implemented a memorynotification
>listener which is support by the java.lang.management package. There you
>can adjust a threshold when you should be informed. After the
>notification I perform a "save".
>
>Hope this will help you
>Stefan
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>
Thank you Stefan,
unfortunately, our situation is a bit different - we are not caching 
parsed docs in any way.
When a document is parsed it is indexed immediately.
So in our case it is not the accumulation of documents waiting to be 
indexed that causes the OutOfMemory exception.
I believe it is a "pure lucene" issue - just as at some point when the 
next doc is added to the index, and this causes (perhaps)
the merging of segments, the memory consumption raises drastically.

Regards
Stanislav


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 14 09:23:29 2005
Return-Path: <java-user-return-14940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89885 invoked from network); 14 Jun 2005 09:23:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2005 09:23:28 -0000
Received: (qmail 2330 invoked by uid 500); 14 Jun 2005 09:23:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2185 invoked by uid 500); 14 Jun 2005 09:23:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2060 invoked by uid 99); 14 Jun 2005 09:23:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of stenly@sirma.bg designates 62.213.161.130 as permitted sender)
Received: from redhat.sirma.bg (HELO redhat.sirma.bg) (62.213.161.130)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Jun 2005 02:23:12 -0700
Received: from [192.168.128.211] (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id j5E7bq9W015036;
	Tue, 14 Jun 2005 10:37:53 +0300
Message-ID: <42AE8950.9000706@sirma.bg>
Date: Tue, 14 Jun 2005 10:37:52 +0300
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: markus.wiederkehr@gmail.com
CC: java-user@lucene.apache.org
Subject: Re: OutOfMemory when indexing
References: <42AD7F8F.5070205@sirma.bg> <a925739605061306307c83aa7b@mail.gmail.com>
In-Reply-To: <a925739605061306307c83aa7b@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the advice,
I think this may be a solution.
In case you've experimented with this setting, could you please tell me 
what are the side effects of limitting segment size?
This will probably cause searches to run slower?

Markus Wiederkehr wrote:

>I am not an expert, but maybe the occasionally high memory usage is
>because Lucene is merging multiple index segments together.
>
>Maybe it would help if you set maxMergeDocs to 10,000 or something. In
>your case that would mean that the minimum number of index segments
>would be 50.
>
>But again, this may be completely wrong...
>
>Markus
>
>On 6/13/05, Stanislav Jordanov <stenly@sirma.bg> wrote:
>  
>
>>High guys,
>>Building some huge index (about 500,000 docs totaling to 10megs of plain
>>text) we've run into the following problem:
>>Most of the time the IndexWriter process consumes a fairly small amount
>>of memory (about 32 megs).
>>However, as the index size grows, the memory usage sporadically bursts
>>to levels of (say) 1000 gigs and then falls back to its level.
>>The problem is that unless te process is started with some option like
>>-Xmx1000m this situation causes an OutOfMemoryException which terminates
>>the indexing process.
>>
>>My question is - is there a way to avoid it?
>>
>>Regards
>>Stanislav
>>    
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 14 10:35:15 2005
Return-Path: <java-user-return-14941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25742 invoked from network); 14 Jun 2005 10:35:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2005 10:35:15 -0000
Received: (qmail 82008 invoked by uid 500); 14 Jun 2005 10:35:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81944 invoked by uid 500); 14 Jun 2005 10:35:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 68747 invoked by uid 99); 14 Jun 2005 10:30:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Subject: problem with IndexSearcher
From: Stefano Buliani <stefano@meganexus.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Tue, 14 Jun 2005 11:29:24 +0000
Message-Id: <1118748564.13213.14.camel@mndev>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.1.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I'm currently using Lucene on a java web site; I've a class containing a
synchronized method that runs all the update on the index, this class
also contains a method (not synchronized) called getSearcher which
returns an IndexSearcher object.

I'm using the singleton pattern for this class so there can be only one
instance.
When I update the index I close() the IndexSearcher object in the class,
run the update then create a new IndexSearcher.

This is my problem:
I add a document to the index and search for I can find it.
If I remove the document and search for it again it doesn't find
anything (correct behaviour).
If I add again the same document to the index I can't find it until I
restart the application server (I should be able to find it).

I've noticed that if I create a new IndexSearcher every time they call
the method getSearcher instead of returning the one already instanced it
works fine, that's strange because I create a new IndexSearcher every
time I run the synchronized update method.
Any suggestion?

Regards,
	Stefano
 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 14 12:14:42 2005
Return-Path: <java-user-return-14942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65784 invoked from network); 14 Jun 2005 12:14:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2005 12:14:42 -0000
Received: (qmail 29407 invoked by uid 500); 14 Jun 2005 12:14:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29378 invoked by uid 500); 14 Jun 2005 12:14:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29330 invoked by uid 99); 14 Jun 2005 12:14:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from svr.ftp1.com (HELO svr.ftp1.com) (64.74.127.3)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Jun 2005 05:14:30 -0700
Received: from graphite by svr.ftp1.com with local (Exim 4.44)
	id 1DiAIy-0000tT-Cq
	for java-user@lucene.apache.org; Tue, 14 Jun 2005 07:14:08 -0500
Received: from 192.223.163.5 ([192.223.163.5])
        (SquirrelMail authenticated user tony@simpleobjects.com);
        by www.simpleobjects.com with HTTP;
        Tue, 14 Jun 2005 08:14:08 -0400 (EDT)
Message-ID: <46808.192.223.163.5.1118751248.squirrel@192.223.163.5>
In-Reply-To: <1118748564.13213.14.camel@mndev>
References: <1118748564.13213.14.camel@mndev>
Date: Tue, 14 Jun 2005 08:14:08 -0400 (EDT)
Subject: Re: problem with IndexSearcher
From: "Tony Schwartz" <tony@simpleobjects.com>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3a
X-Mailer: SquirrelMail/1.4.3a
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - svr.ftp1.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [32036 808] / [47 12]
X-AntiAbuse: Sender Address Domain - simpleobjects.com
X-Source: /usr/local/cpanel/3rdparty/bin/php
X-Source-Args: /usr/local/cpanel/3rdparty/bin/php /usr/local/cpanel/base/3rdparty/squirrelmail/src/compose.php 
X-Source-Dir: :/base/3rdparty/squirrelmail/src
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It appears you have answered your own question.  The problem seems to be in your code. 
Without seeing it though, how can we help?

Tony Schwartz
tony@simpleobjects.com
"What we need is more cowbell."


> Hi,
> I'm currently using Lucene on a java web site; I've a class containing a
> synchronized method that runs all the update on the index, this class
> also contains a method (not synchronized) called getSearcher which
> returns an IndexSearcher object.
>
> I'm using the singleton pattern for this class so there can be only one
> instance.
> When I update the index I close() the IndexSearcher object in the class,
> run the update then create a new IndexSearcher.
>
> This is my problem:
> I add a document to the index and search for I can find it.
> If I remove the document and search for it again it doesn't find
> anything (correct behaviour).
> If I add again the same document to the index I can't find it until I
> restart the application server (I should be able to find it).
>
> I've noticed that if I create a new IndexSearcher every time they call
> the method getSearcher instead of returning the one already instanced it
> works fine, that's strange because I create a new IndexSearcher every
> time I run the synchronized update method.
> Any suggestion?
>
> Regards,
> 	Stefano
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 14 12:21:04 2005
Return-Path: <java-user-return-14943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67847 invoked from network); 14 Jun 2005 12:21:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2005 12:21:04 -0000
Received: (qmail 45669 invoked by uid 500); 14 Jun 2005 12:20:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45644 invoked by uid 500); 14 Jun 2005 12:20:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45630 invoked by uid 99); 14 Jun 2005 12:20:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from fmmailgate05.web.de (HELO fmmailgate05.web.de) (217.72.192.243)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Jun 2005 05:20:54 -0700
Received: by fmmailgate05.web.de (8.12.10/8.12.10/webde Linux 0.7) with SMTP id j5EBkh21029750 
        for <java-user@lucene.apache.org>; Tue, 14 Jun 2005 13:47:04 +0200
Received: from [194.95.66.1] by freemailng0301.web.de with HTTP;
	Tue, 14 Jun 2005 13:47:03 +0200
Date: Tue, 14 Jun 2005 13:47:03 +0200
Message-Id: <1459897493@web.de>
MIME-Version: 1.0
From: Barbara Krausz <bkrausz@web.de>
To: java-user@lucene.apache.org
Subject: Re: Determining the IDF while searching for documents
Organization: http://freemail.web.de/
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


java-user@lucene.apache.org schrieb am 14.06.05 08:49:11:


I'm not 100% sure I understand your question, but...

: order to compute the TF I count the occurences of terms which are
: similar to the term. But I've got problems to compute the IDF, because I
: must know the number of documents in which the term appears before
: searching for the documents (in the method sumOfSquaredWeights() in my

...to get the number of docs that contain a specific term, you can use
IndexReader.docFreq(Term)

That's not possible, because my indexelements are trigrams, so with IndexReader.docFreq(trigram) I get the number of docs which contain this trigram, but I need the number of docs that contain a whole term.

Barbara



__________________________________________________________
Mit WEB.DE FreePhone mit hoechster Qualitaet ab 0 Ct./Min.
weltweit telefonieren! http://freephone.web.de/?mc=021201


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 14 15:02:25 2005
Return-Path: <java-user-return-14944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48287 invoked from network); 14 Jun 2005 15:02:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2005 15:02:25 -0000
Received: (qmail 72410 invoked by uid 500); 14 Jun 2005 15:02:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72299 invoked by uid 500); 14 Jun 2005 15:02:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72274 invoked by uid 99); 14 Jun 2005 15:02:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from vpn3.cymfony.com (HELO webmail.cymfony.com) (65.209.1.80)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Jun 2005 08:02:12 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: issues with concurrent indexing and searching with HitCollector 
Date: Tue, 14 Jun 2005 11:00:44 -0400
Message-ID: <13F36D2926AD444697093282F20041B701323436@buf-ex01.cymfony.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: issues with concurrent indexing and searching with HitCollector 
Thread-Index: AcVq1ET4A1VJmyXFSuWLSlm/8+JgYgGHWdGA
From: "Peter Kim" <pkim@cymfony.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I did a quick google search and couldn't find any info on this...

I seem to be having a problem when I try to execute a search using a
HitCollector while the index is being indexed. Does it make sense that I
could be getting this error because the index is being merged while the
HitCollector is sifting through the results and therefore some of the
files are being renamed/deleted/moved?

Here's the error:
java.io.FileNotFoundException: /cym/dciindex/_x22w.fnm (No such file or
directory)
	java.io.RandomAccessFile.open(Native Method)
	java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
=09
org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java
:376)
=09
org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
=09
org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
	org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:53)
=09
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:109)
=09
org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:94)
=09
org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:122)
	org.apache.lucene.store.Lock$With.run(Lock.java:109)
	org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
	org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
=09
org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)

Thanks!
peter


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 14 16:47:13 2005
Return-Path: <java-user-return-14945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87148 invoked from network); 14 Jun 2005 16:47:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2005 16:47:13 -0000
Received: (qmail 53957 invoked by uid 500); 14 Jun 2005 16:46:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53916 invoked by uid 500); 14 Jun 2005 16:46:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53898 invoked by uid 99); 14 Jun 2005 16:46:49 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from smtpauth05.mail.atl.earthlink.net (HELO smtpauth05.mail.atl.earthlink.net) (209.86.89.65)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Jun 2005 09:46:45 -0700
Received: from [69.235.198.125] (helo=[172.16.1.2])
	by smtpauth05.mail.atl.earthlink.net with asmtp (TLSv1:RC4-SHA:128)
	(Exim 4.34)
	id 1DiEYX-0001iq-Po
	for java-user@lucene.apache.org; Tue, 14 Jun 2005 12:46:29 -0400
Mime-Version: 1.0 (Apple Message framework v730)
Content-Transfer-Encoding: 7bit
Message-Id: <7DE53FB6-BAE3-454C-BBE0-521BAC52388B@corp.earthlink.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: "Peter A. Friend" <octavian@corp.earthlink.net>
Subject: fields that change over time
Date: Tue, 14 Jun 2005 09:46:27 -0700
X-Mailer: Apple Mail (2.730)
X-ELNK-Trace: e38a400786bfeea01aa676d7e74259b7b3291a7d08dfec792d5004a1e0e232874dd8ece3716dcef6350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 69.235.198.125
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

 From reading the docs, it appears that Lucene supports addition of  
new fields over time to an existing index. This is very handy for  
folks whose indexing requirements change over time. My question has  
to do with a change in an existing field name that goes from being  
unstored to stored. Obviously any previously indexed document will  
not have the stored value, but will Lucene handle a mix of unstored  
and stored values for a given field name, within the same index?

Thanks in advance,

Peter

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 14 19:28:31 2005
Return-Path: <java-user-return-14946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67777 invoked from network); 14 Jun 2005 19:28:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2005 19:28:31 -0000
Received: (qmail 1638 invoked by uid 500); 14 Jun 2005 19:28:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1463 invoked by uid 500); 14 Jun 2005 19:28:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1381 invoked by uid 99); 14 Jun 2005 19:28:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Jun 2005 12:28:15 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id DB78913E2006; Tue, 14 Jun 2005 15:27:16 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 8028513E2005
	for <java-user@lucene.apache.org>; Tue, 14 Jun 2005 15:27:09 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <7DE53FB6-BAE3-454C-BBE0-521BAC52388B@corp.earthlink.net>
References: <7DE53FB6-BAE3-454C-BBE0-521BAC52388B@corp.earthlink.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3BA70B58-46A3-4256-A93E-7F0469E16806@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: fields that change over time
Date: Tue, 14 Jun 2005 15:27:24 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 14, 2005, at 12:46 PM, Peter A. Friend wrote:

> From reading the docs, it appears that Lucene supports addition of  
> new fields over time to an existing index. This is very handy for  
> folks whose indexing requirements change over time. My question has  
> to do with a change in an existing field name that goes from being  
> unstored to stored. Obviously any previously indexed document will  
> not have the stored value, but will Lucene handle a mix of unstored  
> and stored values for a given field name, within the same index?

Yes, it will handle that situation just fine.  Stored fields are per- 
document, so it won't matter that some documents used field "foo" as  
unstored and other documents stored their value in "foo".

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 14 19:57:59 2005
Return-Path: <java-user-return-14947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76670 invoked from network); 14 Jun 2005 19:57:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2005 19:57:59 -0000
Received: (qmail 79959 invoked by uid 500); 14 Jun 2005 19:57:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79923 invoked by uid 500); 14 Jun 2005 19:57:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79902 invoked by uid 99); 14 Jun 2005 19:57:52 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from pop04.mail.atl.earthlink.net (HELO pop04.mail.atl.earthlink.net) (207.69.200.28)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Jun 2005 12:57:50 -0700
Received: from wamui-andean.atl.sa.earthlink.net ([209.86.224.24])
	by pop04.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1DiHXX-0000Up-00
	for java-user@lucene.apache.org; Tue, 14 Jun 2005 15:57:39 -0400
Message-ID: <33094884.1118779059009.JavaMail.root@wamui-andean.atl.sa.earthlink.net>
Date: Tue, 14 Jun 2005 15:57:38 -0400 (EDT)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Highlighter problem with SpanNearQuery w/Fix
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,
  I have overidden QueryParser's getFieldQuery() so that it returns a SpanNearQuery instead of a PhraseQuery.
 but that stopped the Highlighter working.  I added the following to QueryTermExtractor:


	private static final void getTerms(Query query, HashSet terms,boolean prohibited)
	{
		if (query instanceof BooleanQuery)
			getTermsFromBooleanQuery((BooleanQuery) query, terms, prohibited);
		else
			if (query instanceof PhraseQuery)
				getTermsFromPhraseQuery((PhraseQuery) query, terms);
			else
				if (query instanceof TermQuery)
					getTermsFromTermQuery((TermQuery) query, terms);
        else
                    if(query instanceof SpanNearQuery)  // <<< new <<<<
                        getTermsFromSpanNearQuery((SpanNearQuery) query, terms);

// and 

    private static final void getTermsFromSpanNearQuery(SpanNearQuery query, HashSet terms){
        Collection queryTerms = query.getTerms();
        for(Iterator iterator = queryTerms.iterator(); iterator.hasNext();){
            // break it out for debugging.
            Term term = (Term) iterator.next();
            String text = term.text();
            terms.add(new WeightedTerm(query.getBoost(), text));

        }
    }

And that seemed to fix it.

Hope this helps,
Andrew

Andrew Boyd
Software Architect
Sun Certified J2EE Architect
B&B Technical Services Inc.
205.422.2557

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 14 23:24:28 2005
Return-Path: <java-user-return-14948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32629 invoked from network); 14 Jun 2005 23:24:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jun 2005 23:24:28 -0000
Received: (qmail 5851 invoked by uid 500); 14 Jun 2005 23:24:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5795 invoked by uid 500); 14 Jun 2005 23:24:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5766 invoked by uid 99); 14 Jun 2005 23:24:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jayallenhill@gmail.com designates 64.233.170.195 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Jun 2005 16:24:00 -0700
Received: by rproxy.gmail.com with SMTP id c51so718423rne
        for <java-user@lucene.apache.org>; Tue, 14 Jun 2005 16:23:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=LebmWM+WyOznBFq9R9DCz1h0X7ru4gRDAeeo7iaEII4BKBJg75tirruFe9whEAqPBiUX+EYInqAXSBaxpD+JrfgvC+NbnpX1LjH0c9O15il9/MEp0tkAQckS//Azr8IrbqUGcEuQr4YEHltpR6daMbNQa4+pwchQcMO1O4tSsDk=
Received: by 10.38.101.36 with SMTP id y36mr1813213rnb;
        Tue, 14 Jun 2005 16:23:21 -0700 (PDT)
Received: by 10.38.78.75 with HTTP; Tue, 14 Jun 2005 16:23:21 -0700 (PDT)
Message-ID: <d0e6561a05061416234a6b5d57@mail.gmail.com>
Date: Tue, 14 Jun 2005 16:23:21 -0700
From: Jay Hill <jayallenhill@gmail.com>
Reply-To: Jay Hill <jayallenhill@gmail.com>
To: java-user@lucene.apache.org
Subject: Need a way to set a result limit on a particular field
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a need to limit my Hits returned based on one of the indexed
fields. This is a web application and we want to limit the number of
hits from any one host. We have a field named "host_id" and I'd like
to be able to limit my results to no more than three results for any
one host_id.

Any help is appreciated.

Thanks,
-Jay

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 15 00:12:13 2005
Return-Path: <java-user-return-14949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44690 invoked from network); 15 Jun 2005 00:12:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2005 00:12:13 -0000
Received: (qmail 10827 invoked by uid 500); 15 Jun 2005 00:12:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10799 invoked by uid 500); 15 Jun 2005 00:12:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10781 invoked by uid 99); 15 Jun 2005 00:12:07 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from ddsl-216-68-218-166.fuse.net (HELO home.simpleobjects.com) (216.68.218.166)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Jun 2005 17:12:02 -0700
Received: from graphite (graphite.intranet [192.168.2.2])
	by home.simpleobjects.com (Postfix) with ESMTP
	id 6508D33C42; Tue, 14 Jun 2005 20:11:47 -0400 (EDT)
From: "Tony Schwartz" <tony@simpleobjects.com>
To: <java-user@lucene.apache.org>,
	"'Jay Hill'" <jayallenhill@gmail.com>
Subject: RE: Need a way to set a result limit on a particular field
Date: Tue, 14 Jun 2005 20:11:46 -0400
Message-ID: <002101c5713e$d22fdbb0$0202a8c0@graphite>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <d0e6561a05061416234a6b5d57@mail.gmail.com>
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't see a way to do this today.  How many different hosts are there?  If
it's small, you could execute the query that many times only grabbing the
top 3 results from each.  Otherwise, you'll have to use brute force with a
HitCollector and read the field for each doc.  Good luck!

Tony Schwartz
tony@simpleobjects.com


-----Original Message-----
From: Jay Hill [mailto:jayallenhill@gmail.com] 
Sent: Tuesday, June 14, 2005 7:23 PM
To: java-user@lucene.apache.org
Subject: Need a way to set a result limit on a particular field

I have a need to limit my Hits returned based on one of the indexed
fields. This is a web application and we want to limit the number of
hits from any one host. We have a field named "host_id" and I'd like
to be able to limit my results to no more than three results for any
one host_id.

Any help is appreciated.

Thanks,
-Jay

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 15 00:58:29 2005
Return-Path: <java-user-return-14950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56848 invoked from network); 15 Jun 2005 00:58:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2005 00:58:29 -0000
Received: (qmail 4339 invoked by uid 500); 15 Jun 2005 00:58:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4289 invoked by uid 500); 15 Jun 2005 00:58:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4247 invoked by uid 99); 15 Jun 2005 00:58:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Jun 2005 17:58:17 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7108E13E2007; Tue, 14 Jun 2005 20:58:00 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id CE7D813E2006
	for <java-user@lucene.apache.org>; Tue, 14 Jun 2005 20:57:55 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <d0e6561a05061416234a6b5d57@mail.gmail.com>
References: <d0e6561a05061416234a6b5d57@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5C6D1362-7790-44F4-823D-7631C0C725A3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Need a way to set a result limit on a particular field
Date: Tue, 14 Jun 2005 20:58:11 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 14, 2005, at 7:23 PM, Jay Hill wrote:
> I have a need to limit my Hits returned based on one of the indexed
> fields. This is a web application and we want to limit the number of
> hits from any one host. We have a field named "host_id" and I'd like
> to be able to limit my results to no more than three results for any
> one host_id.

I may not be fully understanding your question, but I'll go with my  
assumptions... wrap the users query into a BooleanQuery as a required  
clause and then add another clause with a TermQuery for the specific  
host_id.  Then simply constrain the number of Hits shown to the first  
3.  Does that do what you're after?

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 15 15:41:35 2005
Return-Path: <java-user-return-14951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81479 invoked from network); 15 Jun 2005 15:41:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2005 15:41:35 -0000
Received: (qmail 87774 invoked by uid 500); 15 Jun 2005 15:41:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87749 invoked by uid 500); 15 Jun 2005 15:41:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87730 invoked by uid 99); 15 Jun 2005 15:41:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: error (hermes.apache.org: local policy)
Received: from Unknown (HELO pb-exchcon2.scansoft.com) (199.4.160.64)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Jun 2005 08:41:20 -0700
Received: by pb-exchcon2.pb.scansoft.com with Internet Mail Service (5.5.2658.27)
	id <M0JAYKZ0>; Wed, 15 Jun 2005 11:40:19 -0400
Message-ID: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com>
From: "Robichaud, Jean-Philippe" <Jean-Philippe.Robichaud@scansoft.com>
To: java-user@lucene.apache.org
Subject: Queries boost and scoring problems 
Date: Wed, 15 Jun 2005 11:40:48 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2658.27)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Ok, I know that usually, the scores returned by Lucene do not mean "really"
something.  But in my case, it does, I play with the similarity and bla bla
bla...  Now my concern is that the Query.setBoost() does not always seems to
affect the score.  I've built a simple test (code completely at the end) and
I have the following output.  I'm not using the Hits object but rather the
TopDocs, so that I can have access to the raw un-normalized score.  Query1
and query2 gets exactly the same score, while I was expecting that query2
would have half the score of query one.  Query3 seems to have been affected
by the query boost.  

Is it a "normal behaviour" ?  how can I know if the boost was applied or
not?  Even more, how can I "force" the score to be applied?  In this case, I
use the QueryParser in others, I create my own TermQuery and set a boost on
it. I have the same "problem" with my TermQueries, the boost just don't get
applied.  

Any clues?  This is a major showstopper for me...

Thanks, 

Jp



== OUTPUT ==
QUERY_1=labeltxt:post labeltxt:office
QUERY_2=(labeltxt:post labeltxt:office)^0.5
QUERY_3=labeltxt:post^0.5 labeltxt:office

score_1: 5.139783
score_2: 5.139783
score_3: 4.8512564

explanation for qlbl_1:main post office
5.139783 = sum of:
  3.7358308 = weight(labeltxt:post in 28114), product of:
    0.85255265 = queryWeight(labeltxt:post), product of:
      8.763871 = idf(docFreq=16)
      0.097280376 = queryNorm
    4.3819356 = fieldWeight(labeltxt:post in 28114), product of:
      1.0 = tf(termFreq(labeltxt:post)=1)
      8.763871 = idf(docFreq=16)
      0.5 = fieldNorm(field=labeltxt, doc=28114)
  1.4039522 = weight(labeltxt:office in 28114), product of:
    0.52264136 = queryWeight(labeltxt:office), product of:
      5.372526 = idf(docFreq=504)
      0.097280376 = queryNorm
    2.686263 = fieldWeight(labeltxt:office in 28114), product of:
      1.0 = tf(termFreq(labeltxt:office)=1)
      5.372526 = idf(docFreq=504)
      0.5 = fieldNorm(field=labeltxt, doc=28114)

explanation for qlbl_2: main post office
5.139783 = sum of:
  3.7358308 = weight(labeltxt:post in 28114), product of:
    0.85255265 = queryWeight(labeltxt:post), product of:
      8.763871 = idf(docFreq=16)
      0.097280376 = queryNorm
    4.3819356 = fieldWeight(labeltxt:post in 28114), product of:
      1.0 = tf(termFreq(labeltxt:post)=1)
      8.763871 = idf(docFreq=16)
      0.5 = fieldNorm(field=labeltxt, doc=28114)
  1.4039522 = weight(labeltxt:office in 28114), product of:
    0.52264136 = queryWeight(labeltxt:office), product of:
      5.372526 = idf(docFreq=504)
      0.097280376 = queryNorm
    2.686263 = fieldWeight(labeltxt:office in 28114), product of:
      1.0 = tf(termFreq(labeltxt:office)=1)
      5.372526 = idf(docFreq=504)
      0.5 = fieldNorm(field=labeltxt, doc=28114)

explanation for qlbl_3: main post office
4.8512564 = sum of:
  2.7695916 = weight(labeltxt:post^0.5 in 28114), product of:
    0.63204753 = queryWeight(labeltxt:post^0.5), product of:
      0.5 = boost
      8.763871 = idf(docFreq=16)
      0.14423935 = queryNorm
    4.3819356 = fieldWeight(labeltxt:post in 28114), product of:
      1.0 = tf(termFreq(labeltxt:post)=1)
      8.763871 = idf(docFreq=16)
      0.5 = fieldNorm(field=labeltxt, doc=28114)
  2.081665 = weight(labeltxt:office in 28114), product of:
    0.7749297 = queryWeight(labeltxt:office), product of:
      5.372526 = idf(docFreq=504)
      0.14423935 = queryNorm
    2.686263 = fieldWeight(labeltxt:office in 28114), product of:
      1.0 = tf(termFreq(labeltxt:office)=1)
      5.372526 = idf(docFreq=504)
      0.5 = fieldNorm(field=labeltxt, doc=28114)

== Java Code ==
package testing;

import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.DefaultSimilarity;
import org.apache.lucene.search.Explanation;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.TopDocs;

public class TestBoostQueries {

  public static void main(String[] args) {
    int maxSearchResults = 1;
    WhitespaceAnalyzer analyzer = new WhitespaceAnalyzer();
    try {
      IndexSearcher labelSearcher = new
IndexSearcher("/tmp/Approach2/indices/memphis_tn_labels");
      labelSearcher.setSimilarity(new DefaultSimilarity());
      
      Document dd_1,dd_2,dd_3;
      float score_1,score_2,score_3;
      float fact = 0.5f;
        
      Query  qlbl_1 = QueryParser.parse("post office","labeltxt",analyzer);

      Query  qlbl_2 = QueryParser.parse("post office","labeltxt",analyzer);
      qlbl_2.setBoost(fact);

      Query  qlbl_3 = QueryParser.parse("post^" +fact + "
office","labeltxt",analyzer);
      
      System.out.println("QUERY_1=" + qlbl_1.toString());
      System.out.println("QUERY_2=" + qlbl_2.toString());
      System.out.println("QUERY_3=" + qlbl_3.toString());
      
      TopDocs docs_1 = labelSearcher.search(qlbl_1,null,maxSearchResults);
      TopDocs docs_2 = labelSearcher.search(qlbl_2,null,maxSearchResults);
      TopDocs docs_3 = labelSearcher.search(qlbl_3,null,maxSearchResults);
      
      for(int j=0; j < docs_1.scoreDocs.length; j++) {
        dd_1 = labelSearcher.doc(docs_1.scoreDocs[j].doc);
        dd_2 = labelSearcher.doc(docs_2.scoreDocs[j].doc);
        dd_3 = labelSearcher.doc(docs_3.scoreDocs[j].doc);
        
        System.out.println();
        
        score_1 = docs_1.scoreDocs[j].score;
        score_2 = docs_2.scoreDocs[j].score;
        score_3 = docs_3.scoreDocs[j].score;

        System.out.println("score_1: " +score_1);
        System.out.println("score_2: " +score_2);
        System.out.println("score_3: " +score_3);
        System.out.println();
        
        Explanation ex_1 =
labelSearcher.explain(qlbl_1,docs_1.scoreDocs[j].doc);
        Explanation ex_2 =
labelSearcher.explain(qlbl_2,docs_2.scoreDocs[j].doc);
        Explanation ex_3 =
labelSearcher.explain(qlbl_2,docs_3.scoreDocs[j].doc);
        System.out.println("explanation for qlbl_1:" +
dd_1.get("labeltxt"));
        System.out.println(ex_1.toString());
        System.out.println("explanation for qlbl_2: " +
dd_2.get("labeltxt"));
        System.out.println(ex_2.toString());
        System.out.println("explanation for qlbl_3: " +
dd_3.get("labeltxt"));
        System.out.println(ex_3.toString());

      }
      
      
    } catch (Exception e) {
      e.printStackTrace();
    }
  }
}


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 15 16:11:15 2005
Return-Path: <java-user-return-14952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92469 invoked from network); 15 Jun 2005 16:11:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2005 16:11:14 -0000
Received: (qmail 60862 invoked by uid 500); 15 Jun 2005 16:11:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60820 invoked by uid 500); 15 Jun 2005 16:11:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60797 invoked by uid 99); 15 Jun 2005 16:11:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail2.cos.com (HELO mail2.cos.com) (198.76.172.218)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Jun 2005 09:11:01 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail2.cos.com (Postfix) with ESMTP id 7C962222EF2
	for <java-user@lucene.apache.org>; Wed, 15 Jun 2005 12:10:50 -0400 (EDT)
Received: from mail2.cos.com ([127.0.0.1])
 by localhost (mail2.cos.com [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 11338-09 for <java-user@lucene.apache.org>;
 Wed, 15 Jun 2005 12:10:49 -0400 (EDT)
Received: from [10.10.1.51] (unknown [192.168.0.237])
	by mail2.cos.com (Postfix) with ESMTP id B4CDE222EEC
	for <java-user@lucene.apache.org>; Wed, 15 Jun 2005 12:10:49 -0400 (EDT)
Message-ID: <42B05381.9060409@cos.com>
Date: Wed, 15 Jun 2005 12:12:49 -0400
From: Mike Barry <mbarry@cos.com>
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: QueryParser, phrases and stopwords
References: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com>
In-Reply-To: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a situation where a query such as "climate control" is returning
documents with the phrase "climate of control".  (I'm using QueryParser).

After searching, I found  the similar issue on the mailing list from
Greg Robertson
with a patch from Steve Rowe.

Looking at the source repository for StopFilter.java, the patch was applied
in November of 2003 and then reverted in Dec 2003 (by Erik), with the note:

revert position increment change due to conflict with PhraseQuery

(the patch  incremented the token position to inhibit exact matching across
removed stopword(s)).

I couldn't find any info on how/why this approach conflicted with
PhraseQuery.
Can anyone elighten me on this? Does anyone know of a way to inhibit
exact matching across removed stopwords(s)?

Pointers to nutch are appreciated, pointers into nutch where this
situation is
handled are appreciated even more :-)

Thanks, MikeB.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 15 16:56:23 2005
Return-Path: <java-user-return-14953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14654 invoked from network); 15 Jun 2005 16:56:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2005 16:56:23 -0000
Received: (qmail 72972 invoked by uid 500); 15 Jun 2005 16:56:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72947 invoked by uid 500); 15 Jun 2005 16:56:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72872 invoked by uid 99); 15 Jun 2005 16:56:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc11.comcast.net (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Jun 2005 09:56:11 -0700
Received: from [192.168.168.81] (c-24-5-160-217.hsd1.ca.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2005061516402201300rukf9e>; Wed, 15 Jun 2005 16:40:22 +0000
Message-ID: <42B059F5.7090700@apache.org>
Date: Wed, 15 Jun 2005 09:40:21 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.3 (X11/20050513)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Queries boost and scoring problems
References: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com>
In-Reply-To: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The method Similarity.queryNorm() normalizes query term weights.  To 
disable this you could define it to return 1.0 in your own Similarity 
implementation.

http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html#queryNorm(float)

Doug

Robichaud, Jean-Philippe wrote:
> Ok, I know that usually, the scores returned by Lucene do not mean "really"
> something.  But in my case, it does, I play with the similarity and bla bla
> bla...  Now my concern is that the Query.setBoost() does not always seems to
> affect the score.  I've built a simple test (code completely at the end) and
> I have the following output.  I'm not using the Hits object but rather the
> TopDocs, so that I can have access to the raw un-normalized score.  Query1
> and query2 gets exactly the same score, while I was expecting that query2
> would have half the score of query one.  Query3 seems to have been affected
> by the query boost.  
> 
> Is it a "normal behaviour" ?  how can I know if the boost was applied or
> not?  Even more, how can I "force" the score to be applied?  In this case, I
> use the QueryParser in others, I create my own TermQuery and set a boost on
> it. I have the same "problem" with my TermQueries, the boost just don't get
> applied.  
> 
> Any clues?  This is a major showstopper for me...
> 
> Thanks, 
> 
> Jp
> 
> 
> 
> == OUTPUT ==
> QUERY_1=labeltxt:post labeltxt:office
> QUERY_2=(labeltxt:post labeltxt:office)^0.5
> QUERY_3=labeltxt:post^0.5 labeltxt:office
> 
> score_1: 5.139783
> score_2: 5.139783
> score_3: 4.8512564
> 
> explanation for qlbl_1:main post office
> 5.139783 = sum of:
>   3.7358308 = weight(labeltxt:post in 28114), product of:
>     0.85255265 = queryWeight(labeltxt:post), product of:
>       8.763871 = idf(docFreq=16)
>       0.097280376 = queryNorm
>     4.3819356 = fieldWeight(labeltxt:post in 28114), product of:
>       1.0 = tf(termFreq(labeltxt:post)=1)
>       8.763871 = idf(docFreq=16)
>       0.5 = fieldNorm(field=labeltxt, doc=28114)
>   1.4039522 = weight(labeltxt:office in 28114), product of:
>     0.52264136 = queryWeight(labeltxt:office), product of:
>       5.372526 = idf(docFreq=504)
>       0.097280376 = queryNorm
>     2.686263 = fieldWeight(labeltxt:office in 28114), product of:
>       1.0 = tf(termFreq(labeltxt:office)=1)
>       5.372526 = idf(docFreq=504)
>       0.5 = fieldNorm(field=labeltxt, doc=28114)
> 
> explanation for qlbl_2: main post office
> 5.139783 = sum of:
>   3.7358308 = weight(labeltxt:post in 28114), product of:
>     0.85255265 = queryWeight(labeltxt:post), product of:
>       8.763871 = idf(docFreq=16)
>       0.097280376 = queryNorm
>     4.3819356 = fieldWeight(labeltxt:post in 28114), product of:
>       1.0 = tf(termFreq(labeltxt:post)=1)
>       8.763871 = idf(docFreq=16)
>       0.5 = fieldNorm(field=labeltxt, doc=28114)
>   1.4039522 = weight(labeltxt:office in 28114), product of:
>     0.52264136 = queryWeight(labeltxt:office), product of:
>       5.372526 = idf(docFreq=504)
>       0.097280376 = queryNorm
>     2.686263 = fieldWeight(labeltxt:office in 28114), product of:
>       1.0 = tf(termFreq(labeltxt:office)=1)
>       5.372526 = idf(docFreq=504)
>       0.5 = fieldNorm(field=labeltxt, doc=28114)
> 
> explanation for qlbl_3: main post office
> 4.8512564 = sum of:
>   2.7695916 = weight(labeltxt:post^0.5 in 28114), product of:
>     0.63204753 = queryWeight(labeltxt:post^0.5), product of:
>       0.5 = boost
>       8.763871 = idf(docFreq=16)
>       0.14423935 = queryNorm
>     4.3819356 = fieldWeight(labeltxt:post in 28114), product of:
>       1.0 = tf(termFreq(labeltxt:post)=1)
>       8.763871 = idf(docFreq=16)
>       0.5 = fieldNorm(field=labeltxt, doc=28114)
>   2.081665 = weight(labeltxt:office in 28114), product of:
>     0.7749297 = queryWeight(labeltxt:office), product of:
>       5.372526 = idf(docFreq=504)
>       0.14423935 = queryNorm
>     2.686263 = fieldWeight(labeltxt:office in 28114), product of:
>       1.0 = tf(termFreq(labeltxt:office)=1)
>       5.372526 = idf(docFreq=504)
>       0.5 = fieldNorm(field=labeltxt, doc=28114)
> 
> == Java Code ==
> package testing;
> 
> import org.apache.lucene.analysis.WhitespaceAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.queryParser.QueryParser;
> import org.apache.lucene.search.DefaultSimilarity;
> import org.apache.lucene.search.Explanation;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.search.TopDocs;
> 
> public class TestBoostQueries {
> 
>   public static void main(String[] args) {
>     int maxSearchResults = 1;
>     WhitespaceAnalyzer analyzer = new WhitespaceAnalyzer();
>     try {
>       IndexSearcher labelSearcher = new
> IndexSearcher("/tmp/Approach2/indices/memphis_tn_labels");
>       labelSearcher.setSimilarity(new DefaultSimilarity());
>       
>       Document dd_1,dd_2,dd_3;
>       float score_1,score_2,score_3;
>       float fact = 0.5f;
>         
>       Query  qlbl_1 = QueryParser.parse("post office","labeltxt",analyzer);
> 
>       Query  qlbl_2 = QueryParser.parse("post office","labeltxt",analyzer);
>       qlbl_2.setBoost(fact);
> 
>       Query  qlbl_3 = QueryParser.parse("post^" +fact + "
> office","labeltxt",analyzer);
>       
>       System.out.println("QUERY_1=" + qlbl_1.toString());
>       System.out.println("QUERY_2=" + qlbl_2.toString());
>       System.out.println("QUERY_3=" + qlbl_3.toString());
>       
>       TopDocs docs_1 = labelSearcher.search(qlbl_1,null,maxSearchResults);
>       TopDocs docs_2 = labelSearcher.search(qlbl_2,null,maxSearchResults);
>       TopDocs docs_3 = labelSearcher.search(qlbl_3,null,maxSearchResults);
>       
>       for(int j=0; j < docs_1.scoreDocs.length; j++) {
>         dd_1 = labelSearcher.doc(docs_1.scoreDocs[j].doc);
>         dd_2 = labelSearcher.doc(docs_2.scoreDocs[j].doc);
>         dd_3 = labelSearcher.doc(docs_3.scoreDocs[j].doc);
>         
>         System.out.println();
>         
>         score_1 = docs_1.scoreDocs[j].score;
>         score_2 = docs_2.scoreDocs[j].score;
>         score_3 = docs_3.scoreDocs[j].score;
> 
>         System.out.println("score_1: " +score_1);
>         System.out.println("score_2: " +score_2);
>         System.out.println("score_3: " +score_3);
>         System.out.println();
>         
>         Explanation ex_1 =
> labelSearcher.explain(qlbl_1,docs_1.scoreDocs[j].doc);
>         Explanation ex_2 =
> labelSearcher.explain(qlbl_2,docs_2.scoreDocs[j].doc);
>         Explanation ex_3 =
> labelSearcher.explain(qlbl_2,docs_3.scoreDocs[j].doc);
>         System.out.println("explanation for qlbl_1:" +
> dd_1.get("labeltxt"));
>         System.out.println(ex_1.toString());
>         System.out.println("explanation for qlbl_2: " +
> dd_2.get("labeltxt"));
>         System.out.println(ex_2.toString());
>         System.out.println("explanation for qlbl_3: " +
> dd_3.get("labeltxt"));
>         System.out.println(ex_3.toString());
> 
>       }
>       
>       
>     } catch (Exception e) {
>       e.printStackTrace();
>     }
>   }
> }
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 15 18:01:39 2005
Return-Path: <java-user-return-14954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37186 invoked from network); 15 Jun 2005 18:01:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2005 18:01:39 -0000
Received: (qmail 17704 invoked by uid 500); 15 Jun 2005 18:01:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17670 invoked by uid 500); 15 Jun 2005 18:01:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17628 invoked by uid 99); 15 Jun 2005 18:01:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jayallenhill@gmail.com designates 64.233.170.200 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Jun 2005 11:01:28 -0700
Received: by rproxy.gmail.com with SMTP id c51so827777rne
        for <java-user@lucene.apache.org>; Wed, 15 Jun 2005 11:01:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ZTZh6l/IN5Z4IdcAwsK13pGUwtrKtXaME0Plsgz50RM13tCrTikYSYXGhPAAIBPQ9xLGG6O2PJ5ZiRDH/BZB2y6fDIIpOmmuIzWb+SynOJeUY72KpIszXT+HUrY6uqlGY02Mhth4+YPTsAfXwO1KuY45a0metcX5mvh1hADGago=
Received: by 10.38.88.14 with SMTP id l14mr8142rnb;
        Wed, 15 Jun 2005 11:01:17 -0700 (PDT)
Received: by 10.38.78.75 with HTTP; Wed, 15 Jun 2005 11:01:17 -0700 (PDT)
Message-ID: <d0e6561a0506151101190aa4af@mail.gmail.com>
Date: Wed, 15 Jun 2005 11:01:17 -0700
From: Jay Hill <jayallenhill@gmail.com>
Reply-To: Jay Hill <jayallenhill@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Need a way to set a result limit on a particular field
In-Reply-To: <5C6D1362-7790-44F4-823D-7631C0C725A3@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <d0e6561a05061416234a6b5d57@mail.gmail.com>
	 <5C6D1362-7790-44F4-823D-7631C0C725A3@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Tony and Erik for the replies. The trick is we don't know the
hosts that will be returned in advance, we just don't want more than 3
from any one host. It's not unlike searching on Google where you might
see a link that says "More results from foo.com". We essentially want
to discard any results > 3 for any one host. In some of our searches
we might get high scores on 20 or 30 documents, but we don't want to
show page after page from the same host, we'd rather limit it to 3
from each for more diversity.

I may have to use a brute force approach using HitCollector as Tony
suggests. I was hoping to avoid the HitCollector, but there may be no
other way right now.

Many thanks,
-Jay


On 6/14/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>=20
> On Jun 14, 2005, at 7:23 PM, Jay Hill wrote:
> > I have a need to limit my Hits returned based on one of the indexed
> > fields. This is a web application and we want to limit the number of
> > hits from any one host. We have a field named "host_id" and I'd like
> > to be able to limit my results to no more than three results for any
> > one host_id.
>=20
> I may not be fully understanding your question, but I'll go with my
> assumptions... wrap the users query into a BooleanQuery as a required
> clause and then add another clause with a TermQuery for the specific
> host_id.  Then simply constrain the number of Hits shown to the first
> 3.  Does that do what you're after?
>=20
>      Erik
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 15 18:29:18 2005
Return-Path: <java-user-return-14955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51620 invoked from network); 15 Jun 2005 18:29:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2005 18:29:18 -0000
Received: (qmail 3933 invoked by uid 500); 15 Jun 2005 18:29:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3904 invoked by uid 500); 15 Jun 2005 18:29:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3832 invoked by uid 99); 15 Jun 2005 18:29:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: error (hermes.apache.org: local policy)
Received: from Unknown (HELO pb-exchcon2.scansoft.com) (199.4.160.64)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Jun 2005 11:29:02 -0700
Received: by pb-exchcon2.pb.scansoft.com with Internet Mail Service (5.5.2658.27)
	id <M0P8CV5F>; Wed, 15 Jun 2005 14:12:14 -0400
Message-ID: <FBA9F803D33470489B9B4676A6B09F0B0155FAB0@mt-exch1.montreal.speechworks.com>
From: "Robichaud, Jean-Philippe" <Jean-Philippe.Robichaud@scansoft.com>
To: java-user@lucene.apache.org
Subject: RE: Need a way to set a result limit on a particular field
Date: Wed, 15 Jun 2005 14:12:38 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2658.27)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


It may be simpler and more effective to use the Hits object and keep the
number of time each host was actually "returned" to the user and skip it if
the limit has been reach.  This way, if your users just look at the 10-20
highest hits, you will save you a lot of processing time, especially if your
index is huge...

Here is some pseudo code stripped from a class I once wrote


Hits hits = iSearcher.search(myQuery);
IntHash hostFreqCount = new IntHash();

int i=0;
int j=0;

while(i < hist.length) {
 j=0;
 for(; (i<hits.length && j < 10); i++,j++) {

  Document doc = iSearcher.doc(hits.doc(i));
  String host_id = doc.get("host_id");
  hostFreqCount.inc(host_id);

   if(hostFreqCount.get(host_id) > 3) continue;

  ///  show the hit to the use...  

 }
}

 
Hope it helped !

Jp


-----Original Message-----
From: Jay Hill [mailto:jayallenhill@gmail.com] 
Sent: Wednesday, June 15, 2005 2:01 PM
To: java-user@lucene.apache.org
Subject: Re: Need a way to set a result limit on a particular field

Thanks Tony and Erik for the replies. The trick is we don't know the
hosts that will be returned in advance, we just don't want more than 3
from any one host. It's not unlike searching on Google where you might
see a link that says "More results from foo.com". We essentially want
to discard any results > 3 for any one host. In some of our searches
we might get high scores on 20 or 30 documents, but we don't want to
show page after page from the same host, we'd rather limit it to 3
from each for more diversity.

I may have to use a brute force approach using HitCollector as Tony
suggests. I was hoping to avoid the HitCollector, but there may be no
other way right now.

Many thanks,
-Jay


On 6/14/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> 
> On Jun 14, 2005, at 7:23 PM, Jay Hill wrote:
> > I have a need to limit my Hits returned based on one of the indexed
> > fields. This is a web application and we want to limit the number of
> > hits from any one host. We have a field named "host_id" and I'd like
> > to be able to limit my results to no more than three results for any
> > one host_id.
> 
> I may not be fully understanding your question, but I'll go with my
> assumptions... wrap the users query into a BooleanQuery as a required
> clause and then add another clause with a TermQuery for the specific
> host_id.  Then simply constrain the number of Hits shown to the first
> 3.  Does that do what you're after?
> 
>      Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 15 22:08:08 2005
Return-Path: <java-user-return-14956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42833 invoked from network); 15 Jun 2005 22:08:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jun 2005 22:08:08 -0000
Received: (qmail 44101 invoked by uid 500); 15 Jun 2005 22:08:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44060 invoked by uid 500); 15 Jun 2005 22:07:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44039 invoked by uid 99); 15 Jun 2005 22:07:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jayallenhill@gmail.com designates 64.233.170.195 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Jun 2005 15:07:56 -0700
Received: by rproxy.gmail.com with SMTP id c51so25604rne
        for <java-user@lucene.apache.org>; Wed, 15 Jun 2005 15:07:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=MYTpU4oCwnKOsTeE0Dt+RQdsItuC1kinz+dn/SGkBqwybDaOOMCaQJm6gHu5Vj9DsmA3ClfSdlmexXZfTAZEhGSBsNuRC9XoyBEvudClGHJzoENaHZ/niFN90Vl3mZK/Jy5wG7jd09cL0d49whUnjreZNaPywh/2FyHuZLXOL3Q=
Received: by 10.38.65.51 with SMTP id n51mr79126rna;
        Wed, 15 Jun 2005 15:07:03 -0700 (PDT)
Received: by 10.38.78.75 with HTTP; Wed, 15 Jun 2005 15:07:03 -0700 (PDT)
Message-ID: <d0e6561a05061515073167c606@mail.gmail.com>
Date: Wed, 15 Jun 2005 15:07:03 -0700
From: Jay Hill <jayallenhill@gmail.com>
Reply-To: Jay Hill <jayallenhill@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Need a way to set a result limit on a particular field
In-Reply-To: <FBA9F803D33470489B9B4676A6B09F0B0155FAB0@mt-exch1.montreal.speechworks.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <FBA9F803D33470489B9B4676A6B09F0B0155FAB0@mt-exch1.montreal.speechworks.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I like this approach. This may be what I'm looking for.

Thanks JP!
-Jay

On 6/15/05, Robichaud, Jean-Philippe
<Jean-Philippe.Robichaud@scansoft.com> wrote:
>=20
> It may be simpler and more effective to use the Hits object and keep the
> number of time each host was actually "returned" to the user and skip it =
if
> the limit has been reach.  This way, if your users just look at the 10-20
> highest hits, you will save you a lot of processing time, especially if y=
our
> index is huge...
>=20
> Here is some pseudo code stripped from a class I once wrote
>=20
>=20
> Hits hits =3D iSearcher.search(myQuery);
> IntHash hostFreqCount =3D new IntHash();
>=20
> int i=3D0;
> int j=3D0;
>=20
> while(i < hist.length) {
>  j=3D0;
>  for(; (i<hits.length && j < 10); i++,j++) {
>=20
>   Document doc =3D iSearcher.doc(hits.doc(i));
>   String host_id =3D doc.get("host_id");
>   hostFreqCount.inc(host_id);
>=20
>    if(hostFreqCount.get(host_id) > 3) continue;
>=20
>   ///  show the hit to the use...
>=20
>  }
> }
>=20
>=20
> Hope it helped !
>=20
> Jp
>=20
>=20
> -----Original Message-----
> From: Jay Hill [mailto:jayallenhill@gmail.com]
> Sent: Wednesday, June 15, 2005 2:01 PM
> To: java-user@lucene.apache.org
> Subject: Re: Need a way to set a result limit on a particular field
>=20
> Thanks Tony and Erik for the replies. The trick is we don't know the
> hosts that will be returned in advance, we just don't want more than 3
> from any one host. It's not unlike searching on Google where you might
> see a link that says "More results from foo.com". We essentially want
> to discard any results > 3 for any one host. In some of our searches
> we might get high scores on 20 or 30 documents, but we don't want to
> show page after page from the same host, we'd rather limit it to 3
> from each for more diversity.
>=20
> I may have to use a brute force approach using HitCollector as Tony
> suggests. I was hoping to avoid the HitCollector, but there may be no
> other way right now.
>=20
> Many thanks,
> -Jay
>=20
>=20
> On 6/14/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> >
> > On Jun 14, 2005, at 7:23 PM, Jay Hill wrote:
> > > I have a need to limit my Hits returned based on one of the indexed
> > > fields. This is a web application and we want to limit the number of
> > > hits from any one host. We have a field named "host_id" and I'd like
> > > to be able to limit my results to no more than three results for any
> > > one host_id.
> >
> > I may not be fully understanding your question, but I'll go with my
> > assumptions... wrap the users query into a BooleanQuery as a required
> > clause and then add another clause with a TermQuery for the specific
> > host_id.  Then simply constrain the number of Hits shown to the first
> > 3.  Does that do what you're after?
> >
> >      Erik
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 00:32:49 2005
Return-Path: <java-user-return-14957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82488 invoked from network); 16 Jun 2005 00:32:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 00:32:49 -0000
Received: (qmail 93410 invoked by uid 500); 16 Jun 2005 00:32:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93333 invoked by uid 500); 16 Jun 2005 00:32:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93318 invoked by uid 99); 16 Jun 2005 00:32:38 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ddenboer@apple.com designates 17.254.13.23 as permitted sender)
Received: from mail-out4.apple.com (HELO mail-out4.apple.com) (17.254.13.23)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Jun 2005 17:32:35 -0700
Received: from mailgate1.apple.com (a17-128-100-225.apple.com [17.128.100.225])
	by mail-out4.apple.com (8.12.11/8.12.11) with ESMTP id j5G0Aukv011599
	for <java-user@lucene.apache.org>; Wed, 15 Jun 2005 17:10:56 -0700 (PDT)
Received: from relay2.apple.com (relay2.apple.com) by mailgate1.apple.com
 (Content Technologies SMTPRS 4.3.17) with ESMTP id <T718d642af1118064e1420@mailgate1.apple.com> for <java-user@lucene.apache.org>;
 Wed, 15 Jun 2005 17:10:56 -0700
Received: from [17.216.24.193] (silentbob.apple.com [17.216.24.193])
	by relay2.apple.com (8.12.11/8.12.11) with ESMTP id j5G0Aseu022405
	for <java-user@lucene.apache.org>; Wed, 15 Jun 2005 17:10:55 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v730)
Content-Transfer-Encoding: 7bit
Message-Id: <6570B0E3-69D1-44F0-A219-2019DB60CDE4@apple.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: David denBoer <ddenboer@apple.com>
Subject: Indexing/Querying problem
Date: Wed, 15 Jun 2005 17:10:54 -0700
X-Mailer: Apple Mail (2.730)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

We are getting ready to implement our lucene search tools and want to  
know if the following scenario is even possible :

The application user has a group and a role.
Document has name, author, body, and a list (of groups and roles it  
is visible to), and a list of smart groups (dynamic list of groups  
that can change outside of our app)

We want the user to only see documents for his specific role and group 
(s).

So if a document had these properties :
  name : foo
  author : bar
  body : blah blah blah
  smartGroups : ( {'FRED','MANAGER'} )
  groupRoles : ( {'SanJose','MANAGER'}, {'LosAngeles','ASST MANAGER'} )

and smartGroup FRED currently has these groups  
('SanJose','NewYork','Dallas','Vancouver')
and our user is in the MANAGER role for 'Vancouver'

How can I return a search result that would be valid for my user?


Any pointers are greatly appreciated.

David.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 02:17:46 2005
Return-Path: <java-user-return-14958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25189 invoked from network); 16 Jun 2005 02:17:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 02:17:46 -0000
Received: (qmail 28766 invoked by uid 500); 16 Jun 2005 02:17:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28734 invoked by uid 500); 16 Jun 2005 02:17:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28707 invoked by uid 99); 16 Jun 2005 02:17:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Jun 2005 19:17:34 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D8C4F13E2005; Wed, 15 Jun 2005 22:17:22 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id D05FF13E2005
	for <java-user@lucene.apache.org>; Wed, 15 Jun 2005 22:17:17 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42B05381.9060409@cos.com>
References: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com> <42B05381.9060409@cos.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E32D5763-D04B-4EBD-A96A-8FCFDD9A4EA5@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser, phrases and stopwords
Date: Wed, 15 Jun 2005 22:17:34 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 15, 2005, at 12:12 PM, Mike Barry wrote:

> I have a situation where a query such as "climate control" is  
> returning
> documents with the phrase "climate of control".  (I'm using  
> QueryParser).
>
> After searching, I found  the similar issue on the mailing list from
> Greg Robertson
> with a patch from Steve Rowe.
>
> Looking at the source repository for StopFilter.java, the patch was  
> applied
> in November of 2003 and then reverted in Dec 2003 (by Erik), with  
> the note:
>
> revert position increment change due to conflict with PhraseQuery
>
> (the patch  incremented the token position to inhibit exact  
> matching across
> removed stopword(s)).
>
> I couldn't find any info on how/why this approach conflicted with
> PhraseQuery.
> Can anyone elighten me on this? Does anyone know of a way to inhibit
> exact matching across removed stopwords(s)?

PhraseQuery originally did not account for gaps left in the terms of  
the phrase.

PhraseQuery was modified last year to allow for this though:

r150509 | goller | 2004-09-15 05:38:50 -0400 (Wed, 15 Sep 2004) | 5  
lines

PhraseQuery and PhrasePrefixQuery are extended. It's now
possible to specify the relative position of a term within
a phrase. This allows gaps and multiple terms at the same
position.
-----

So we could change StopFilter to put the gaps back in safely now, I  
think.

Thoughts?

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 08:09:12 2005
Return-Path: <java-user-return-14959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52809 invoked from network); 16 Jun 2005 08:09:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 08:09:11 -0000
Received: (qmail 67646 invoked by uid 500); 16 Jun 2005 08:09:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67624 invoked by uid 500); 16 Jun 2005 08:09:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67608 invoked by uid 99); 16 Jun 2005 08:09:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jm.tinghir@gmail.com designates 64.233.184.203 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 01:09:02 -0700
Received: by wproxy.gmail.com with SMTP id 36so314561wra
        for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 01:08:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=oPwdSDk9sxlvzPGMW635JhsAyCmJaygdTG1196pzchxFj8r28Z2Qiugvf+gWDqmntYeznDpyOpNnUEE5fVdqxHQ0l6nrP0einfNIL27r3SslAYuosMM60FbHjSk0ahACGpIPcY5A9lPhfffPjje90vnHArYZiNcYiQma3/v+3i0=
Received: by 10.54.34.4 with SMTP id h4mr341945wrh;
        Thu, 16 Jun 2005 01:08:15 -0700 (PDT)
Received: by 10.54.62.20 with HTTP; Thu, 16 Jun 2005 01:08:15 -0700 (PDT)
Message-ID: <6f3b2429050616010878ce73e1@mail.gmail.com>
Date: Thu, 16 Jun 2005 10:08:15 +0200
From: JM Tinghir <jm.tinghir@gmail.com>
Reply-To: JM Tinghir <jm.tinghir@gmail.com>
To: java-user@lucene.apache.org
Subject: Performance with multi index
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have a 25 Mb index and was wondering if it would be better to divide
it in about 10 indexes and search in it with MutliSearcher.
Would searching be faster this way?
The indexing would be faster I guess, as it is getting slower and
slower while indexes get bigger.
But searching?

Jean-Marie

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 08:42:19 2005
Return-Path: <java-user-return-14960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67665 invoked from network); 16 Jun 2005 08:42:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 08:42:19 -0000
Received: (qmail 42859 invoked by uid 500); 16 Jun 2005 08:42:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42816 invoked by uid 500); 16 Jun 2005 08:42:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42797 invoked by uid 99); 16 Jun 2005 08:42:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of john.wang@gmail.com designates 64.233.162.200 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 01:42:12 -0700
Received: by zproxy.gmail.com with SMTP id 8so181675nzo
        for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 01:42:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=lLOi6QvSTp4Ki3FNLrB3JbURGocOrGfLKKROLnDMJEBS5UjyfLeBxGRC4Y8JaG8e+ODEHN40kco0xNjQdX8UghV0FjmglP7nTUntrwPkH7WLBYcxdaV/5qdxtZVLiFhnrxtu1J8fd8aNEKm9/IxtHbePZvB6/dHNIfVRpky1FHg=
Received: by 10.36.133.14 with SMTP id g14mr241418nzd;
        Wed, 15 Jun 2005 23:55:20 -0700 (PDT)
Received: by 10.36.10.19 with HTTP; Wed, 15 Jun 2005 23:55:20 -0700 (PDT)
Message-ID: <8837fb7705061523556ff8bdfd@mail.gmail.com>
Date: Wed, 15 Jun 2005 23:55:20 -0700
From: John Wang <john.wang@gmail.com>
Reply-To: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: dangers of fieldcache
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi:

   I am having some problems with the field cache.

   My application keeps a reader in memory for a amount of time and
then polls for a new reader, at which point a new reader is loaded
into memory and the older reader is then closed.

   However, after the reader is loaded, I do some operations such as
sorting which implicitly makes use of and stores data into the default
field cache, which lives in the static memory.

   Now even if I close the reader, the huge amounts of data remains in
the field cache. There isn't a way to flush or clear the fieldcache,
one can only rely the GC do the right thing and pull the soft
references from the WeekHashMap.

   This is baaaaaaaaaaaaad for me.

   Can an method to flush the cache be added to FieldCache? Or any
other suggestions?

    Please let me know, I can file a bug/enhancement for this.

Thanks

-John

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 10:04:28 2005
Return-Path: <java-user-return-14961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2353 invoked from network); 16 Jun 2005 10:04:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 10:04:28 -0000
Received: (qmail 30956 invoked by uid 500); 16 Jun 2005 10:04:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30922 invoked by uid 500); 16 Jun 2005 10:04:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30905 invoked by uid 99); 16 Jun 2005 10:04:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 03:04:17 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2797513E2006; Thu, 16 Jun 2005 06:03:58 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id CF33D13E2005
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 06:03:51 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <6f3b2429050616010878ce73e1@mail.gmail.com>
References: <6f3b2429050616010878ce73e1@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <41850F94-FC92-4270-BBAB-6998673CA7FC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Performance with multi index
Date: Thu, 16 Jun 2005 06:04:09 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 16, 2005, at 4:08 AM, JM Tinghir wrote:
> I have a 25 Mb index and was wondering if it would be better to divide
> it in about 10 indexes and search in it with MutliSearcher.
> Would searching be faster this way?
> The indexing would be faster I guess, as it is getting slower and
> slower while indexes get bigger.
> But searching?

I think keeping it in one index is preferable in this situation.   
Perhaps you need to optimize the index?  Could you qualify a bit more  
about what is slow?  What types of queries?  How "slow" are they?

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 13:28:15 2005
Return-Path: <java-user-return-14962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10202 invoked from network); 16 Jun 2005 13:28:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 13:28:15 -0000
Received: (qmail 14645 invoked by uid 500); 16 Jun 2005 13:28:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14604 invoked by uid 500); 16 Jun 2005 13:28:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14581 invoked by uid 99); 16 Jun 2005 13:28:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail1.cos.com (HELO mail1.cos.com) (198.76.172.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 06:28:00 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail1.cos.com (Postfix) with ESMTP id 79D49207032
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 08:55:15 -0400 (EDT)
Received: from mail1.cos.com ([127.0.0.1])
 by localhost (mail1.cos.com [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 31753-10 for <java-user@lucene.apache.org>;
 Thu, 16 Jun 2005 08:55:14 -0400 (EDT)
Received: from ntmailer.cos.com (ntmailer.cos.com [192.168.0.32])
	by mail1.cos.com (Postfix) with ESMTP id 48480207031
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 08:55:14 -0400 (EDT)
Received: by ntmailer.cos.com with Internet Mail Service (5.5.2653.19)
	id <M0K9L2VY>; Thu, 16 Jun 2005 09:04:57 -0400
Received: from [10.10.1.51] (barry.cos.com [10.10.1.51]) by ntmailer.cos.com with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2653.13)
	id M0K9L2VW; Thu, 16 Jun 2005 09:04:52 -0400
From: Mike Barry <MBarry@cos.com>
To: java-user@lucene.apache.org
Message-ID: <42B17724.2060002@cos.com>
Date: Thu, 16 Jun 2005 08:57:08 -0400
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
Subject: Re: QueryParser, phrases and stopwords
References: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com> <42B05381.9060409@cos.com> <E32D5763-D04B-4EBD-A96A-8FCFDD9A4EA5@ehatchersolutions.com>
In-Reply-To: <E32D5763-D04B-4EBD-A96A-8FCFDD9A4EA5@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik,
   Thanks, I applied the changes found in  version 150148 of StopFilter.java
and they work great for me. I did remove the setting of position=1 before
the return of the token since that seemed spurious to me. Here's a context
diff of the current StopFilter.java and my changes:

*** analysis/StopFilter.java.old        Thu Jun 16 07:42:28 2005
--- analysis/StopFilter.java    Thu Jun 16 08:44:50 2005
***************
*** 94,109 ****
     * Returns the next input Token whose termText() is not a stop word.
     */
    public final Token next() throws IOException {
-     int position = 1;
-
      // return the first non-stop word found
!     for (Token token = input.next(); token != null; token =
input.next()) {
!       if (!stopWords.contains(token.termText)) {
!         token.setPositionIncrement( position );
          return token;
-       }
-       position++;
-     }
      // reached EOS -- return null
      return null;
    }
--- 94,103 ----
     * Returns the next input Token whose termText() is not a stop word.
     */
    public final Token next() throws IOException {
      // return the first non-stop word found
!     for (Token token = input.next(); token != null; token = input.next())
!       if (!stopWords.contains(token.termText))
          return token;
      // reached EOS -- return null
      return null;
    }




Erik Hatcher wrote:

>
> On Jun 15, 2005, at 12:12 PM, Mike Barry wrote:
>
>> I have a situation where a query such as "climate control" is  returning
>> documents with the phrase "climate of control".  (I'm using 
>> QueryParser).
>>
>> After searching, I found  the similar issue on the mailing list from
>> Greg Robertson
>> with a patch from Steve Rowe.
>>
>> Looking at the source repository for StopFilter.java, the patch was 
>> applied
>> in November of 2003 and then reverted in Dec 2003 (by Erik), with 
>> the note:
>>
>> revert position increment change due to conflict with PhraseQuery
>>
>> (the patch  incremented the token position to inhibit exact  matching
>> across
>> removed stopword(s)).
>>
>> I couldn't find any info on how/why this approach conflicted with
>> PhraseQuery.
>> Can anyone elighten me on this? Does anyone know of a way to inhibit
>> exact matching across removed stopwords(s)?
>
>
> PhraseQuery originally did not account for gaps left in the terms of 
> the phrase.
>
> PhraseQuery was modified last year to allow for this though:
>
> r150509 | goller | 2004-09-15 05:38:50 -0400 (Wed, 15 Sep 2004) | 5 
> lines
>
> PhraseQuery and PhrasePrefixQuery are extended. It's now
> possible to specify the relative position of a term within
> a phrase. This allows gaps and multiple terms at the same
> position.
> -----
>
> So we could change StopFilter to put the gaps back in safely now, I 
> think.
>
> Thoughts?
>
>     Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 14:16:24 2005
Return-Path: <java-user-return-14963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32369 invoked from network); 16 Jun 2005 14:16:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 14:16:24 -0000
Received: (qmail 21313 invoked by uid 500); 16 Jun 2005 14:16:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21280 invoked by uid 500); 16 Jun 2005 14:16:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21267 invoked by uid 99); 16 Jun 2005 14:16:17 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from harbinger.sirma.bg (HELO harbinger.sirma.bg) (62.213.161.140)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 07:16:17 -0700
Received: from redhat.sirma.bg (mail.sirma.bg [62.213.161.133])
	by harbinger.sirma.bg (Sirma mail/Sirma/Sirma Linux 0.6) with ESMTP id j5GDJch9011847
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 16:19:39 +0300
Received: from [192.168.128.211] ([192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id j5GDJdtM017872
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 16:19:39 +0300
Message-ID: <42B17C69.6050609@sirma.bg>
Date: Thu, 16 Jun 2005 16:19:37 +0300
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Poor memory performance over a large index 
References: <6f3b2429050616010878ce73e1@mail.gmail.com> <41850F94-FC92-4270-BBAB-6998673CA7FC@ehatchersolutions.com>
In-Reply-To: <41850F94-FC92-4270-BBAB-6998673CA7FC@ehatchersolutions.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We are in a similar situatuin.
The index contains about 1,000,000 docs and its total size is 31G (note: 
Gigabytes, not Megabytes).
The problem is not the search speed - it is the memory usage.
Opening the first IndexSearcher and running a query consumes about 325M 
of RAM
Strange, but opening a second IndexSearcher and running another query 
consumes another 560M of RAM.
In our case the results are always sorted by some column(s).
The app is supposed to be a multithreaded multiuser environment.
At the begining the design was that each user session has its own 
IndexSearcher.
But later we've made an observation that the first time an IndexSearcher 
is sorting on specific column, it takes significantly more time then the 
next sorts on the same column.
This forms a performance penalty when changing the sort column. That's 
why we've decided to keep a distinct opened IndexSearcher for each 
possible sort column.
And each session upon executing its query will obtain the "right" 
IndexSearcher that is quick on sorting by that specific column.
The problem is that (having in mind the abovementioned 325M & 540M) the 
memory gets exhausted too quickly which really leaves no room for 
multiple users running queries simultaneously.

Any idea that may help will be appreciated :)

Regards
Stenly

Erik Hatcher wrote:

>
> On Jun 16, 2005, at 4:08 AM, JM Tinghir wrote:
>
>> I have a 25 Mb index and was wondering if it would be better to divide
>> it in about 10 indexes and search in it with MutliSearcher.
>> Would searching be faster this way?
>> The indexing would be faster I guess, as it is getting slower and
>> slower while indexes get bigger.
>> But searching?
>
>
> I think keeping it in one index is preferable in this situation.   
> Perhaps you need to optimize the index?  Could you qualify a bit more  
> about what is slow?  What types of queries?  How "slow" are they?
>
>     Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 14:24:21 2005
Return-Path: <java-user-return-14964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36055 invoked from network); 16 Jun 2005 14:24:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 14:24:21 -0000
Received: (qmail 40509 invoked by uid 500); 16 Jun 2005 14:24:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40468 invoked by uid 500); 16 Jun 2005 14:24:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40448 invoked by uid 99); 16 Jun 2005 14:24:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 07:24:09 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 35AE513E2007; Thu, 16 Jun 2005 10:23:44 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id C0F9B13E2005
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 10:22:52 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42B17724.2060002@cos.com>
References: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com> <42B05381.9060409@cos.com> <E32D5763-D04B-4EBD-A96A-8FCFDD9A4EA5@ehatchersolutions.com> <42B17724.2060002@cos.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F77F76EA-FF3F-4208-8D48-E42F8F9D9FA3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser, phrases and stopwords
Date: Thu, 16 Jun 2005 10:23:07 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Are there any other issues or concerns with making this change to  
StopFilter?  Should we make this change in 1.9?  Or wait until after  
2.0 is released?

Mike - if you could create some test cases for this scenario and  
contribute your patch and tests to Bugzilla, barring no objections,  
I'll apply it.

     Erik


On Jun 16, 2005, at 8:57 AM, Mike Barry wrote:

> Erik,
>    Thanks, I applied the changes found in  version 150148 of  
> StopFilter.java
> and they work great for me. I did remove the setting of position=1  
> before
> the return of the token since that seemed spurious to me. Here's a  
> context
> diff of the current StopFilter.java and my changes:
>
> *** analysis/StopFilter.java.old        Thu Jun 16 07:42:28 2005
> --- analysis/StopFilter.java    Thu Jun 16 08:44:50 2005
> ***************
> *** 94,109 ****
>      * Returns the next input Token whose termText() is not a stop  
> word.
>      */
>     public final Token next() throws IOException {
> -     int position = 1;
> -
>       // return the first non-stop word found
> !     for (Token token = input.next(); token != null; token =
> input.next()) {
> !       if (!stopWords.contains(token.termText)) {
> !         token.setPositionIncrement( position );
>           return token;
> -       }
> -       position++;
> -     }
>       // reached EOS -- return null
>       return null;
>     }
> --- 94,103 ----
>      * Returns the next input Token whose termText() is not a stop  
> word.
>      */
>     public final Token next() throws IOException {
>       // return the first non-stop word found
> !     for (Token token = input.next(); token != null; token =  
> input.next())
> !       if (!stopWords.contains(token.termText))
>           return token;
>       // reached EOS -- return null
>       return null;
>     }
>
>
>
>
> Erik Hatcher wrote:
>
>
>>
>> On Jun 15, 2005, at 12:12 PM, Mike Barry wrote:
>>
>>
>>> I have a situation where a query such as "climate control" is   
>>> returning
>>> documents with the phrase "climate of control".  (I'm using
>>> QueryParser).
>>>
>>> After searching, I found  the similar issue on the mailing list from
>>> Greg Robertson
>>> with a patch from Steve Rowe.
>>>
>>> Looking at the source repository for StopFilter.java, the patch was
>>> applied
>>> in November of 2003 and then reverted in Dec 2003 (by Erik), with
>>> the note:
>>>
>>> revert position increment change due to conflict with PhraseQuery
>>>
>>> (the patch  incremented the token position to inhibit exact   
>>> matching
>>> across
>>> removed stopword(s)).
>>>
>>> I couldn't find any info on how/why this approach conflicted with
>>> PhraseQuery.
>>> Can anyone elighten me on this? Does anyone know of a way to inhibit
>>> exact matching across removed stopwords(s)?
>>>
>>
>>
>> PhraseQuery originally did not account for gaps left in the terms of
>> the phrase.
>>
>> PhraseQuery was modified last year to allow for this though:
>>
>> r150509 | goller | 2004-09-15 05:38:50 -0400 (Wed, 15 Sep 2004) | 5
>> lines
>>
>> PhraseQuery and PhrasePrefixQuery are extended. It's now
>> possible to specify the relative position of a term within
>> a phrase. This allows gaps and multiple terms at the same
>> position.
>> -----
>>
>> So we could change StopFilter to put the gaps back in safely now, I
>> think.
>>
>> Thoughts?
>>
>>     Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 14:30:19 2005
Return-Path: <java-user-return-14965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37724 invoked from network); 16 Jun 2005 14:30:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 14:30:19 -0000
Received: (qmail 50858 invoked by uid 500); 16 Jun 2005 14:30:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50836 invoked by uid 500); 16 Jun 2005 14:30:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50820 invoked by uid 99); 16 Jun 2005 14:30:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jm.tinghir@gmail.com designates 64.233.184.201 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.201)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 07:30:12 -0700
Received: by wproxy.gmail.com with SMTP id 36so514823wra
        for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 07:29:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=fM7XIDUE2mlqMB/rL4C7Fuvq0QA96Q6Vq1R+WmqjKP7Hfmy1Ky/yL2q0A+JFaTUBazLrlcg2J6okj97jIyUEy65zkLH0wmEBM0fnCerKVOK1/Ts84ETbSd1lWhZXzsFSWD4lxazCuVbKlAurclbcFL+8r7KUvgiNgxSsMFhrd1E=
Received: by 10.54.39.1 with SMTP id m1mr495421wrm;
        Thu, 16 Jun 2005 07:29:24 -0700 (PDT)
Received: by 10.54.62.20 with HTTP; Thu, 16 Jun 2005 07:29:24 -0700 (PDT)
Message-ID: <6f3b242905061607296b6f181a@mail.gmail.com>
Date: Thu, 16 Jun 2005 16:29:24 +0200
From: JM Tinghir <jm.tinghir@gmail.com>
Reply-To: JM Tinghir <jm.tinghir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Performance with multi index
In-Reply-To: <41850F94-FC92-4270-BBAB-6998673CA7FC@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6f3b2429050616010878ce73e1@mail.gmail.com>
	 <41850F94-FC92-4270-BBAB-6998673CA7FC@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Could you qualify a bit more about what is slow?=20

Well, it just took 145 minutes to index 2670 files (450 MB) in one
index (29 MB).
It only took 33 minutes when I did it into ~10 indexes (global size of 32 M=
B).


> Perhaps you need to optimize the index? =20

Perhaps, never tried it...

JM

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 14:36:45 2005
Return-Path: <java-user-return-14966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40827 invoked from network); 16 Jun 2005 14:36:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 14:36:45 -0000
Received: (qmail 66772 invoked by uid 500); 16 Jun 2005 14:36:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66730 invoked by uid 500); 16 Jun 2005 14:36:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66681 invoked by uid 99); 16 Jun 2005 14:36:38 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO uar.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 07:36:38 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id 2871B217A8
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 17:36:19 +0300 (EEST)
Message-ID: <42B18E62.7030100@i-hypergrid.com>
Date: Thu, 16 Jun 2005 17:36:18 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Performance with multi index
References: <6f3b2429050616010878ce73e1@mail.gmail.com>	 <41850F94-FC92-4270-BBAB-6998673CA7FC@ehatchersolutions.com> <6f3b242905061607296b6f181a@mail.gmail.com>
In-Reply-To: <6f3b242905061607296b6f181a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



JM Tinghir wrote:

>>Could you qualify a bit more about what is slow? 
>>    
>>
>
>Well, it just took 145 minutes to index 2670 files (450 MB) in one
>index (29 MB).
>It only took 33 minutes when I did it into ~10 indexes (global size of 32 MB).
>
>
>  
>
I think it took so much time, because it's merged too ofter.
try to increase IndexWriter.mergeFactor (but be aware of 
TooManyOpenFiles Exception when setting too high)  (default 10)
and try to increase IndexWriter.minMergeDocs (consume more ram, but 
works faster). (default 10)

playing a bit with this parameters you can speed up your indexing process.

>>Perhaps you need to optimize the index?  
>>    
>>
>
>Perhaps, never tried it...
>
>JM
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>  
>

regards,
Volodymyr Bychkoviak

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 14:41:06 2005
Return-Path: <java-user-return-14967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43483 invoked from network); 16 Jun 2005 14:41:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 14:41:05 -0000
Received: (qmail 77771 invoked by uid 500); 16 Jun 2005 14:40:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77745 invoked by uid 500); 16 Jun 2005 14:40:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77706 invoked by uid 99); 16 Jun 2005 14:40:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jm.tinghir@gmail.com designates 64.233.184.195 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 07:40:58 -0700
Received: by wproxy.gmail.com with SMTP id 36so522178wra
        for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 07:40:34 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=TDHhtU/utgJC/PhWOjZT9oRbO3770zffrf84nSGI1h9ogSoov6V9O1vRPof1n0JXPgJXkB7HQb1V6sj49obO9b1CVNfnrZIvDp+3xv3eIjPEEhgy6keEb7YJD/kG68LfSJypTtxvDIiX2+skAvLefNiVPIHycYmaM+cwQTS1bf0=
Received: by 10.54.150.2 with SMTP id x2mr502339wrd;
        Thu, 16 Jun 2005 07:33:44 -0700 (PDT)
Received: by 10.54.62.20 with HTTP; Thu, 16 Jun 2005 07:33:42 -0700 (PDT)
Message-ID: <6f3b242905061607336fb36f70@mail.gmail.com>
Date: Thu, 16 Jun 2005 16:33:42 +0200
From: JM Tinghir <jm.tinghir@gmail.com>
Reply-To: JM Tinghir <jm.tinghir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Performance with multi index
In-Reply-To: <6f3b242905061607296b6f181a@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6f3b2429050616010878ce73e1@mail.gmail.com>
	 <41850F94-FC92-4270-BBAB-6998673CA7FC@ehatchersolutions.com>
	 <6f3b242905061607296b6f181a@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Well, it just took 145 minutes to index 2670 files (450 MB) in one
> index (29 MB).
> It only took 33 minutes when I did it into ~10 indexes (global size of 32=
 MB).

Forgot to add, that it does not only indexes files, it also creates
XML documents. So don't worry if takes 30 minutes to index 450 MB.

But the difference in time is due to the fact of indexing in one index or n=
ot.

JM

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 15:49:14 2005
Return-Path: <java-user-return-14968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73762 invoked from network); 16 Jun 2005 15:49:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 15:49:14 -0000
Received: (qmail 47578 invoked by uid 500); 16 Jun 2005 15:49:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47519 invoked by uid 500); 16 Jun 2005 15:49:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47505 invoked by uid 99); 16 Jun 2005 15:49:07 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FORGED_RCVD_HELO,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from gateway.reims.net (HELO smtpgate.saa-cons.co.uk) (194.75.234.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 08:49:07 -0700
Received: (from uucp@localhost)
	by smtpgate.saa-cons.co.uk (8.8.8/8.8.8) id QAA19106
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 16:49:02 +0100 (BST)
	(envelope-from Paul.Illingworth@saaconsultants.com)
Received: from domino-mail.saa-cons.co.uk(10.10.10.4) by smtpgate.saa-cons.co.uk via smap (V2.1)
	id xma019092; Thu, 16 Jun 05 16:48:45 +0100
In-Reply-To: <6f3b242905061607336fb36f70@mail.gmail.com>
Subject: Re: Performance with multi index
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.1 January 21, 2004
Message-ID: <OF4827EFD0.1E104CC6-ON80257022.00566AD4-80257022.0056F576@SAAConsultants.com>
From: Paul.Illingworth@saaconsultants.com
Date: Thu, 16 Jun 2005 16:48:41 +0100
X-MIMETrack: Serialize by Router on domino-mail/Saa(Release 6.5.1|January 21, 2004) at
 16/06/2005 16:48:41
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N






I guess that if you have 10 indexes each with a merge factor of 10 with
documents evenly distributed across those indexes then on average there
will be a merge every 100 documents.

If you have a single index there will be a merge every 10 documents.

If you increase your merge factor from 10 to 100 on your single index then
maybe you'll see similar performance but bear in mind the limitations about
the number of open files and memory consumption. I have seen quoted
somewhere that this should be no bigger than 50 (where I can't remember).

PI.


                                                                           
             JM Tinghir                                                    
             <jm.tinghir@gmail                                             
             .com>                                                      To 
                                       java-user@lucene.apache.org         
             16/06/2005 15:33                                           cc 
                                                                           
                                                                   Subject 
             Please respond to         Re: Performance with multi index    
             java-user@lucene.                                             
                apache.org                                                 
                                                                           
                                                                           
                                                                           
                                                                           




> Well, it just took 145 minutes to index 2670 files (450 MB) in one
> index (29 MB).
> It only took 33 minutes when I did it into ~10 indexes (global size of 32
MB).

Forgot to add, that it does not only indexes files, it also creates
XML documents. So don't worry if takes 30 minutes to index 450 MB.

But the difference in time is due to the fact of indexing in one index or
not.

JM

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 15:56:20 2005
Return-Path: <java-user-return-14969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76326 invoked from network); 16 Jun 2005 15:56:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 15:56:19 -0000
Received: (qmail 61117 invoked by uid 500); 16 Jun 2005 15:56:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61092 invoked by uid 500); 16 Jun 2005 15:56:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61079 invoked by uid 99); 16 Jun 2005 15:56:13 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO uar.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 08:56:13 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id 12B161EAA0
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 18:55:43 +0300 (EEST)
Message-ID: <42B1A0FE.2010105@i-hypergrid.com>
Date: Thu, 16 Jun 2005 18:55:42 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Performance with multi index
References: <6f3b2429050616010878ce73e1@mail.gmail.com>	 <41850F94-FC92-4270-BBAB-6998673CA7FC@ehatchersolutions.com>	 <6f3b242905061607296b6f181a@mail.gmail.com> <6f3b242905061607336fb36f70@mail.gmail.com>
In-Reply-To: <6f3b242905061607336fb36f70@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

my previous message lost somewhere :(
reposting

can you measure "pure" index creation time (without creating XMLs)

and one more question:
do you keep your indexWriter open all the time during process?

best way to determine bottlenecks is profiling :)

regards,
Volodymyr Bychkoviak

JM Tinghir wrote:

>>Well, it just took 145 minutes to index 2670 files (450 MB) in one
>>index (29 MB).
>>It only took 33 minutes when I did it into ~10 indexes (global size of 32 MB).
>>    
>>
>
>Forgot to add, that it does not only indexes files, it also creates
>XML documents. So don't worry if takes 30 minutes to index 450 MB.
>
>But the difference in time is due to the fact of indexing in one index or not.
>
>JM
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 15:56:36 2005
Return-Path: <java-user-return-14970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76429 invoked from network); 16 Jun 2005 15:56:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 15:56:36 -0000
Received: (qmail 62416 invoked by uid 500); 16 Jun 2005 15:56:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62385 invoked by uid 500); 16 Jun 2005 15:56:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62369 invoked by uid 99); 16 Jun 2005 15:56:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from plesk2.axarnet.com (HELO plesk1.axarnet.com) (213.200.101.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 08:56:27 -0700
Received: (qmail 8750 invoked from network); 16 Jun 2005 15:55:22 -0000
Received: from 172.red-217-127-83.pooles.rima-tde.net (HELO ?192.168.1.5?) (217.127.83.172)
  by iil.es with SMTP; 16 Jun 2005 15:55:22 -0000
Message-ID: <42B1A106.90202@xeridia.com>
Date: Thu, 16 Jun 2005 17:55:50 +0200
From: =?ISO-8859-1?Q?Diego_Manilla_Su=E1rez?= <diego.manilla@xeridia.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Grouping search results
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi! I'm trying to group the search results, just like when Google shows 
sub-results within the same domain than the main result. In my case, I 
need to index contents and their attached files. The ideal behaviour 
would be that, if there is a match in one of the associated files, the 
main result would be the content that file is attached to, and below it, 
the link to the file. If there are matches in several documents attached 
to the same content and/or the content itself, they all would have to be 
shown under their parent content.

Example: the content "MyContent" has 3 pdf's attached to it. The user 
queries Lucene and there are matches in MyContent and 2 of its attached 
files. The result would be:

- "My Content title"
       - link to file 1
       - link to file 3
       (file 2 didn't have any matches)
- Subsequent matches...

Now, I don't know what's the best way to implement this using Lucene. I 
suppose that some kind of post-processing is needed, so I would 
appreciate any tips about how to minimize the overhead.

Thanks in advance.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 16:00:36 2005
Return-Path: <java-user-return-14971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78216 invoked from network); 16 Jun 2005 16:00:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 16:00:36 -0000
Received: (qmail 72746 invoked by uid 500); 16 Jun 2005 16:00:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72686 invoked by uid 500); 16 Jun 2005 16:00:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72672 invoked by uid 99); 16 Jun 2005 16:00:28 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=HTML_20_30,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web50605.mail.yahoo.com (HELO web50605.mail.yahoo.com) (206.190.38.92)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 16 Jun 2005 09:00:28 -0700
Received: (qmail 39995 invoked by uid 60001); 16 Jun 2005 15:59:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=lxfttgvpuh5gRmHvtz47/SN4IGjm8AQrTmowmo+iZReUaFM5fUGAa+/NmAXmpWH9AXLq3Y9zXIQNKVCGXzRv9DqepOeHCGwOLphTlo+T2B1dT2MyCymiOcRMNPjPO+IhJG/mpO0CuB8kjA1o6imdvXxYeCuUZPNN+KON91CEwwY=  ;
Message-ID: <20050616155956.39990.qmail@web50605.mail.yahoo.com>
Received: from [67.188.144.134] by web50605.mail.yahoo.com via HTTP; Thu, 16 Jun 2005 08:59:56 PDT
Date: Thu, 16 Jun 2005 08:59:56 -0700 (PDT)
From: Chris Collins <chris_j_collins@yahoo.com>
Subject: Re: Performance with multi index
To: java-user@lucene.apache.org
In-Reply-To: <42B18E62.7030100@i-hypergrid.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1267623591-1118937596=:39061"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1267623591-1118937596=:39061
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

I contest to the value of increasing the minMergeDocs.....it directly effects how much IO gets performed in indexing.
 
Splitting it into multiple indices (if you want to pay the price of complexity), may well increase your throughput.  Assuming you are not utilizing all of the resources the system offers that is.  Say for example you have two indexing threads and one writer per thread.  You can benifit in a few ways here.  Firstly indexing is a mixture of cpu and io bound (certainly easier to observe that effect when you increase the minMergeDocs).  If you have an smp or ht box then you potentially have the ability to use two "hardware threads" to concurrently use.  Further you will have more chance for overlapping io.
 
A quick profile run may also give you clues on how inefficient your code is.
  
C

Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com> wrote:


JM Tinghir wrote:

>>Could you qualify a bit more about what is slow? 
>> 
>>
>
>Well, it just took 145 minutes to index 2670 files (450 MB) in one
>index (29 MB).
>It only took 33 minutes when I did it into ~10 indexes (global size of 32 MB).
>
>
> 
>
I think it took so much time, because it's merged too ofter.
try to increase IndexWriter.mergeFactor (but be aware of 
TooManyOpenFiles Exception when setting too high) (default 10)
and try to increase IndexWriter.minMergeDocs (consume more ram, but 
works faster). (default 10)

playing a bit with this parameters you can speed up your indexing process.

>>Perhaps you need to optimize the index? 
>> 
>>
>
>Perhaps, never tried it...
>
>JM
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

regards,
Volodymyr Bychkoviak

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




--0-1267623591-1118937596=:39061--

From java-user-return-14972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 16:04:12 2005
Return-Path: <java-user-return-14972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79976 invoked from network); 16 Jun 2005 16:04:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 16:04:12 -0000
Received: (qmail 81428 invoked by uid 500); 16 Jun 2005 16:04:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81394 invoked by uid 500); 16 Jun 2005 16:04:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81366 invoked by uid 99); 16 Jun 2005 16:04:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of seanoc5@gmail.com designates 64.233.184.207 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 09:04:01 -0700
Received: by wproxy.gmail.com with SMTP id 50so509269wri
        for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 09:03:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=HjioN12e+zFRo+kB3d19G9oN3HkTK3dP7o7dvT9urojJYpQqL43UigtvS6CBz+G0IiTI28syy4/jLDaVgHN05zey8TqAcvMiuw59Nb8De8rJZGLoYWihpJoSctZhaCwdZ3Flx3Em51saiR77AMdSVFDsfjWpqGxCetHX7AGiHAg=
Received: by 10.54.106.2 with SMTP id e2mr696873wrc;
        Thu, 16 Jun 2005 09:03:46 -0700 (PDT)
Received: by 10.54.71.4 with HTTP; Thu, 16 Jun 2005 09:03:46 -0700 (PDT)
Message-ID: <455d9df30506160903678c94e8@mail.gmail.com>
Date: Thu, 16 Jun 2005 12:03:46 -0400
From: Sean O'Connor <seanoc5@gmail.com>
Reply-To: Sean O'Connor <seanoc5@gmail.com>
To: java-user@lucene.apache.org
Subject: Search Hit frequency and location
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,
    I am trying to find the right approach for finding frequency (and,
slightly lower in priority, location) of search hits in a document. I
am working through the online documentation and the helpful "Lucene in
Action" book. There are several examples and explanations which seem
close, but not quite what I am looking for. Can anyone point me in the
right direction?

    I have a set of queries, say 10000 different 'things' I want to
find. They range from single word matches (e.g. Lucene) to prefix
queries (e.g. index*) to phrases (e.g. "Lucene in Action", stopword
irrelevant, so "Lucene Action"?). I will also be delving into the more
advanced topics like proximity, fuzzy, snowball and such. For the
moment though, I will stick with the first three I mention, which I
believe translate to: TermQuery, PrefixQuery, and PhraseQuery.

    How do I find how many hits occur in a document? I've seen the faq:
Is there a way to retrieve the original term positions during the search?

Yes, see the Javadoc for IndexReader.termPositions().
    I'm probably missing the obvious here, but I assume this refers to
the analyzed terms (i.e. individual words, possibly transmogrified by
the analyzer).
I further assume that this does not directly relate to the results of
a search for "Lucene in Action". Where do I find information about the
search hits? Have I skimmed over this part of the API?
Thanks in advance,

Sean

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 16:40:39 2005
Return-Path: <java-user-return-14973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95276 invoked from network); 16 Jun 2005 16:40:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 16:40:39 -0000
Received: (qmail 64943 invoked by uid 500); 16 Jun 2005 16:40:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64892 invoked by uid 500); 16 Jun 2005 16:40:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64870 invoked by uid 99); 16 Jun 2005 16:40:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of richard.krenek@gmail.com designates 64.233.184.194 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 09:40:28 -0700
Received: by wproxy.gmail.com with SMTP id 50so525164wri
        for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 09:40:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=id+NZ0Oy8JFPXbS4UquxK0fJvYhy13N3JagMsN178qdRGl/EpKPrP1GW2ikNT426u4eAdBv8ktihBteJB4LnwaZgGgHs+vssxz74uovh8ZfyMaw1AoOVk4Xhxq53PxZ7KNFaOrRhojDtDItsH058bmIl6rGrk0k0IaPw/JWTeRQ=
Received: by 10.54.101.11 with SMTP id y11mr379695wrb;
        Thu, 16 Jun 2005 09:13:35 -0700 (PDT)
Received: by 10.54.72.5 with HTTP; Thu, 16 Jun 2005 09:13:35 -0700 (PDT)
Message-ID: <4ef6647e05061609135d1227ed@mail.gmail.com>
Date: Thu, 16 Jun 2005 10:13:35 -0600
From: Richard Krenek <richard.krenek@gmail.com>
Reply-To: Richard Krenek <richard.krenek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Need a way to set a result limit on a particular field
In-Reply-To: <d0e6561a05061515073167c606@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <FBA9F803D33470489B9B4676A6B09F0B0155FAB0@mt-exch1.montreal.speechworks.com>
	 <d0e6561a05061515073167c606@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

To add to this option, you may want to use this patch
http://issues.apache.org/bugzilla/show_bug.cgi?id=3D27743
This way instead of pulling the entire document back each time, just
pull back your host field. Then do your check and only pull pack the
rest of the document if you need to. This will help with speed if you
are going through a lot of documents and each document is big.

On 6/15/05, Jay Hill <jayallenhill@gmail.com> wrote:
> I like this approach. This may be what I'm looking for.
>=20
> Thanks JP!
> -Jay
>=20
> On 6/15/05, Robichaud, Jean-Philippe
> <Jean-Philippe.Robichaud@scansoft.com> wrote:
> >
> > It may be simpler and more effective to use the Hits object and keep th=
e
> > number of time each host was actually "returned" to the user and skip i=
t if
> > the limit has been reach.  This way, if your users just look at the 10-=
20
> > highest hits, you will save you a lot of processing time, especially if=
 your
> > index is huge...
> >
> > Here is some pseudo code stripped from a class I once wrote
> >
> >
> > Hits hits =3D iSearcher.search(myQuery);
> > IntHash hostFreqCount =3D new IntHash();
> >
> > int i=3D0;
> > int j=3D0;
> >
> > while(i < hist.length) {
> >  j=3D0;
> >  for(; (i<hits.length && j < 10); i++,j++) {
> >
> >   Document doc =3D iSearcher.doc(hits.doc(i));
> >   String host_id =3D doc.get("host_id");
> >   hostFreqCount.inc(host_id);
> >
> >    if(hostFreqCount.get(host_id) > 3) continue;
> >
> >   ///  show the hit to the use...
> >
> >  }
> > }
> >
> >
> > Hope it helped !
> >
> > Jp
> >
> >
> > -----Original Message-----
> > From: Jay Hill [mailto:jayallenhill@gmail.com]
> > Sent: Wednesday, June 15, 2005 2:01 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Need a way to set a result limit on a particular field
> >
> > Thanks Tony and Erik for the replies. The trick is we don't know the
> > hosts that will be returned in advance, we just don't want more than 3
> > from any one host. It's not unlike searching on Google where you might
> > see a link that says "More results from foo.com". We essentially want
> > to discard any results > 3 for any one host. In some of our searches
> > we might get high scores on 20 or 30 documents, but we don't want to
> > show page after page from the same host, we'd rather limit it to 3
> > from each for more diversity.
> >
> > I may have to use a brute force approach using HitCollector as Tony
> > suggests. I was hoping to avoid the HitCollector, but there may be no
> > other way right now.
> >
> > Many thanks,
> > -Jay
> >
> >
> > On 6/14/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> > >
> > > On Jun 14, 2005, at 7:23 PM, Jay Hill wrote:
> > > > I have a need to limit my Hits returned based on one of the indexed
> > > > fields. This is a web application and we want to limit the number o=
f
> > > > hits from any one host. We have a field named "host_id" and I'd lik=
e
> > > > to be able to limit my results to no more than three results for an=
y
> > > > one host_id.
> > >
> > > I may not be fully understanding your question, but I'll go with my
> > > assumptions... wrap the users query into a BooleanQuery as a required
> > > clause and then add another clause with a TermQuery for the specific
> > > host_id.  Then simply constrain the number of Hits shown to the first
> > > 3.  Does that do what you're after?
> > >
> > >      Erik
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 17:50:14 2005
Return-Path: <java-user-return-14974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29754 invoked from network); 16 Jun 2005 17:50:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 17:50:14 -0000
Received: (qmail 44148 invoked by uid 500); 16 Jun 2005 17:50:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44105 invoked by uid 500); 16 Jun 2005 17:50:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44065 invoked by uid 99); 16 Jun 2005 17:50:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 10:50:04 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C84F613E2006; Thu, 16 Jun 2005 13:49:47 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 4067613E2005
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 13:49:30 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <455d9df30506160903678c94e8@mail.gmail.com>
References: <455d9df30506160903678c94e8@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <75D3AAF4-DD69-4091-8F98-296B5A7A5122@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Search Hit frequency and location
Date: Thu, 16 Jun 2005 13:49:44 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 16, 2005, at 12:03 PM, Sean O'Connor wrote:
> Yes, see the Javadoc for IndexReader.termPositions().
>     I'm probably missing the obvious here, but I assume this refers to
> the analyzed terms (i.e. individual words, possibly transmogrified by
> the analyzer).

Just to respond to part of your mail:

Terms do not necessarily come from analysis... they could be  
specified directly using Field.Keyword() for example.  Any _indexed_  
field has term(s), with the possibility that the indexed field is  
analyzed or not.

     Erik




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 18:12:32 2005
Return-Path: <java-user-return-14975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40757 invoked from network); 16 Jun 2005 18:12:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 18:12:32 -0000
Received: (qmail 3831 invoked by uid 500); 16 Jun 2005 18:12:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3792 invoked by uid 500); 16 Jun 2005 18:12:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3685 invoked by uid 99); 16 Jun 2005 18:12:21 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO uar.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 11:12:21 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id 568E11B7FC
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 17:45:00 +0300 (EEST)
Message-ID: <42B1906C.2000903@i-hypergrid.com>
Date: Thu, 16 Jun 2005 17:45:00 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Performance with multi index
References: <6f3b2429050616010878ce73e1@mail.gmail.com>	 <41850F94-FC92-4270-BBAB-6998673CA7FC@ehatchersolutions.com>	 <6f3b242905061607296b6f181a@mail.gmail.com> <6f3b242905061607336fb36f70@mail.gmail.com>
In-Reply-To: <6f3b242905061607336fb36f70@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

can you measure "pure" index creation time (without creating XMLs)

and one more question:
do you keep your indexWriter open all the time during process?

JM Tinghir wrote:

>>Well, it just took 145 minutes to index 2670 files (450 MB) in one
>>index (29 MB).
>>It only took 33 minutes when I did it into ~10 indexes (global size of 32 MB).
>>    
>>
>
>Forgot to add, that it does not only indexes files, it also creates
>XML documents. So don't worry if takes 30 minutes to index 450 MB.
>
>But the difference in time is due to the fact of indexing in one index or not.
>
>JM
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 18:28:56 2005
Return-Path: <java-user-return-14976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48376 invoked from network); 16 Jun 2005 18:28:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 18:28:56 -0000
Received: (qmail 39252 invoked by uid 500); 16 Jun 2005 18:28:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39229 invoked by uid 500); 16 Jun 2005 18:28:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39216 invoked by uid 99); 16 Jun 2005 18:28:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lucenelist@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from smtprelay03.ispgateway.de (HELO smtprelay03.ispgateway.de) (80.67.18.15)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 11:28:45 -0700
Received: (qmail 2403 invoked from network); 16 Jun 2005 18:01:55 -0000
Received: from unknown (HELO p54967830.dip.t-dialin.net) ([pbs]695637@[84.150.120.48])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 16 Jun 2005 18:01:55 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: QueryParser, phrases and stopwords
Date: Thu, 16 Jun 2005 20:03:27 +0200
User-Agent: KMail/1.8
References: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com> <42B05381.9060409@cos.com> <E32D5763-D04B-4EBD-A96A-8FCFDD9A4EA5@ehatchersolutions.com>
In-Reply-To: <E32D5763-D04B-4EBD-A96A-8FCFDD9A4EA5@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200506162003.27303@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 16 June 2005 04:17, Erik Hatcher wrote:

> So we could change StopFilter to put the gaps back in safely now, I =C2=A0
> think.
>
> Thoughts?

I personally don't have a problem with this, but shouldn't such a change be=
=20
optional? Like a parameter for StopFilter or a StopGapFilter? I'm sure=20
there are people who prefer the way it is done now.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 18:56:05 2005
Return-Path: <java-user-return-14977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59856 invoked from network); 16 Jun 2005 18:56:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 18:56:05 -0000
Received: (qmail 13778 invoked by uid 500); 16 Jun 2005 18:55:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13734 invoked by uid 500); 16 Jun 2005 18:55:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13720 invoked by uid 99); 16 Jun 2005 18:55:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 11:55:57 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7FB8E13E2005; Thu, 16 Jun 2005 14:55:42 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 7492313E2005
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 14:55:36 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <200506162003.27303@danielnaber.de>
References: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com> <42B05381.9060409@cos.com> <E32D5763-D04B-4EBD-A96A-8FCFDD9A4EA5@ehatchersolutions.com> <200506162003.27303@danielnaber.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <976FC5C5-255F-4671-B844-0B2A1593A3AC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser, phrases and stopwords
Date: Thu, 16 Jun 2005 14:55:54 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 16, 2005, at 2:03 PM, Daniel Naber wrote:

> On Thursday 16 June 2005 04:17, Erik Hatcher wrote:
>
>
>> So we could change StopFilter to put the gaps back in safely now, I
>> think.
>>
>> Thoughts?
>>
>
> I personally don't have a problem with this, but shouldn't such a  
> change be
> optional? Like a parameter for StopFilter or a StopGapFilter? I'm sure
> there are people who prefer the way it is done now.

Making it optional is ok by me, though I'm curious about a use case  
that would prefer it the way it is now.  Searching for "lucene in  
action" and having it match documents with "lucene action" in them  
seems awkward to me in a precision context.  Google allows  
wildcarding of words with an asterisk:

     <http://www.google.com/search?client=safari&rls=en&q=%22lucene+* 
+action%22&ie=UTF-8&oe=UTF-8>

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 19:22:50 2005
Return-Path: <java-user-return-14978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85531 invoked from network); 16 Jun 2005 19:22:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 19:22:50 -0000
Received: (qmail 84790 invoked by uid 500); 16 Jun 2005 19:22:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84737 invoked by uid 500); 16 Jun 2005 19:22:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84712 invoked by uid 99); 16 Jun 2005 19:22:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 12:22:37 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7FB8E13E2005; Thu, 16 Jun 2005 14:55:42 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 7492313E2005
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 14:55:36 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <200506162003.27303@danielnaber.de>
References: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com> <42B05381.9060409@cos.com> <E32D5763-D04B-4EBD-A96A-8FCFDD9A4EA5@ehatchersolutions.com> <200506162003.27303@danielnaber.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <976FC5C5-255F-4671-B844-0B2A1593A3AC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser, phrases and stopwords
Date: Thu, 16 Jun 2005 14:55:54 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 16, 2005, at 2:03 PM, Daniel Naber wrote:

> On Thursday 16 June 2005 04:17, Erik Hatcher wrote:
>
>
>> So we could change StopFilter to put the gaps back in safely now, I
>> think.
>>
>> Thoughts?
>>
>
> I personally don't have a problem with this, but shouldn't such a  
> change be
> optional? Like a parameter for StopFilter or a StopGapFilter? I'm sure
> there are people who prefer the way it is done now.

Making it optional is ok by me, though I'm curious about a use case  
that would prefer it the way it is now.  Searching for "lucene in  
action" and having it match documents with "lucene action" in them  
seems awkward to me in a precision context.  Google allows  
wildcarding of words with an asterisk:

     <http://www.google.com/search?client=safari&rls=en&q=%22lucene+* 
+action%22&ie=UTF-8&oe=UTF-8>

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 19:51:58 2005
Return-Path: <java-user-return-14979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1122 invoked from network); 16 Jun 2005 19:51:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 19:51:58 -0000
Received: (qmail 89742 invoked by uid 500); 16 Jun 2005 19:51:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89620 invoked by uid 500); 16 Jun 2005 19:51:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89516 invoked by uid 99); 16 Jun 2005 19:51:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail1.cos.com (HELO mail1.cos.com) (198.76.172.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 12:51:33 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail1.cos.com (Postfix) with ESMTP id 98CD6207033
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 15:24:37 -0400 (EDT)
Received: from mail1.cos.com ([127.0.0.1])
 by localhost (mail1.cos.com [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 03112-06 for <java-user@lucene.apache.org>;
 Thu, 16 Jun 2005 15:24:36 -0400 (EDT)
Received: from ntmailer.cos.com (ntmailer.cos.com [192.168.0.32])
	by mail1.cos.com (Postfix) with ESMTP id CA7F9207024
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 15:24:36 -0400 (EDT)
Received: by ntmailer.cos.com with Internet Mail Service (5.5.2653.19)
	id <M0K9LK1S>; Thu, 16 Jun 2005 15:34:20 -0400
Received: from [10.10.1.51] (barry.cos.com [10.10.1.51]) by ntmailer.cos.com with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2653.13)
	id M0K9LK1R; Thu, 16 Jun 2005 15:34:18 -0400
From: Mike Barry <MBarry@cos.com>
To: java-user@lucene.apache.org
Message-ID: <42B1D26A.7070303@cos.com>
Date: Thu, 16 Jun 2005 15:26:34 -0400
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
Subject: Re: QueryParser, phrases and stopwords
References: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com> <42B05381.9060409@cos.com> <E32D5763-D04B-4EBD-A96A-8FCFDD9A4EA5@ehatchersolutions.com> <200506162003.27303@danielnaber.de>
In-Reply-To: <200506162003.27303@danielnaber.de>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:

>On Thursday 16 June 2005 04:17, Erik Hatcher wrote:
>
>  
>
>>So we could change StopFilter to put the gaps back in safely now, I  
>>think.
>>
>>Thoughts?
>>    
>>
>
>I personally don't have a problem with this, but shouldn't such a change be 
>optional? Like a parameter for StopFilter or a StopGapFilter? I'm sure 
>there are people who prefer the way it is done now.
>
>Regards
> Daniel
>  
>

To me the change is more consistent with with the documentation
for Phrase Query.  If you need it to be a bit looser, set the slop
accordingly.

If you need "lucene action" to match "Lucene In Action",
you should adjust your query  (using QueryParser syntax):

"lucene action"~2


-MikeB.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 19:53:25 2005
Return-Path: <java-user-return-14980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1937 invoked from network); 16 Jun 2005 19:53:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 19:53:25 -0000
Received: (qmail 98447 invoked by uid 500); 16 Jun 2005 19:53:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98415 invoked by uid 500); 16 Jun 2005 19:53:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98379 invoked by uid 99); 16 Jun 2005 19:53:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from pb-exchcon2.scansoft.com (HELO pb-exchcon2.scansoft.com) (199.4.160.64)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 12:53:14 -0700
Received: by pb-exchcon2.pb.scansoft.com with Internet Mail Service (5.5.2658.27)
	id <NB4RD0HR>; Thu, 16 Jun 2005 15:53:03 -0400
Message-ID: <FBA9F803D33470489B9B4676A6B09F0B0155FDBF@mt-exch1.montreal.speechworks.com>
From: "Robichaud, Jean-Philippe" <Jean-Philippe.Robichaud@scansoft.com>
To: java-user@lucene.apache.org
Subject: Getting the "directory/location" of an IndexReader/IndexWriter
Date: Thu, 16 Jun 2005 15:53:33 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2658.27)
Content-Type: text/plain
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Everyone.

I'm currently in a situation where I have multiples indexSearcher opened at
the same, each on different indices.  They are kept inside a
"IndicesManager" that export getSearcherAtLocation/FreeSearcher method. I
would like to be able to log the "path" used by a searcher I'm about to
"close" from the FreeSearcher method.  Is that possible without keeping an
external hash ?  I don't see any "getDirectoryName" in the definition of
IndexReader/IndexWriter.  I know that the "location" of a Lucene index is
quite abstract (db, ram, filesystem), but still, it would be good to have
some kind of a trace, no?

Any idea?

Thanks,

Jp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 19:58:41 2005
Return-Path: <java-user-return-14981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4007 invoked from network); 16 Jun 2005 19:58:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 19:58:41 -0000
Received: (qmail 22257 invoked by uid 500); 16 Jun 2005 19:58:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22213 invoked by uid 500); 16 Jun 2005 19:58:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22183 invoked by uid 99); 16 Jun 2005 19:58:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of sean@oconeco.com designates 216.239.128.26 as permitted sender)
Received: from smtp.omnis.com (HELO smtp.omnis.com) (216.239.128.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 12:58:14 -0700
Message-ID: <42B1CCFB.2030308@oconeco.com>
Date: Thu, 16 Jun 2005 15:03:23 -0400
From: Sean O'Connor <sean@oconeco.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Search Hit frequency and location
References: <455d9df30506160903678c94e8@mail.gmail.com> <75D3AAF4-DD69-4091-8F98-296B5A7A5122@ehatchersolutions.com>
In-Reply-To: <75D3AAF4-DD69-4091-8F98-296B5A7A5122@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the clarification. I had assumed that to be the case, but 
assumptions have a tendency to come back and bite me in inappropriate 
places. By pointing that out, you've probably saved me from beating my 
head against the wall in the near future : -).

The big stumbling block I have at the moment is understanding whether 
Terms can be used to find something like a phrase query, proximity 
query, or boolean query. I think the answer is no, two different 
concepts. But I also tend to think that the wheel has already been 
invented to find how many times a phrase (i.e. "Lucene in Action") 
appears in a document. Before I go digging through the source code, and 
possibly creating some rather embarrassing hack(s), I thought I would 
check to see if there is a 'right' way to go about this.

Alternatively, any suggestions on what to google, or where to look to 
educate myself would be welcome as well.
Cheers,

Sean


Erik Hatcher wrote:

>
> On Jun 16, 2005, at 12:03 PM, Sean O'Connor wrote:
>
>> Yes, see the Javadoc for IndexReader.termPositions().
>>     I'm probably missing the obvious here, but I assume this refers to
>> the analyzed terms (i.e. individual words, possibly transmogrified by
>> the analyzer).
>
>
> Just to respond to part of your mail:
>
> Terms do not necessarily come from analysis... they could be  
> specified directly using Field.Keyword() for example.  Any _indexed_  
> field has term(s), with the possibility that the indexed field is  
> analyzed or not.
>
>     Erik
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 20:07:07 2005
Return-Path: <java-user-return-14982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9085 invoked from network); 16 Jun 2005 20:07:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 20:07:06 -0000
Received: (qmail 58333 invoked by uid 500); 16 Jun 2005 20:06:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58195 invoked by uid 500); 16 Jun 2005 20:06:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58158 invoked by uid 99); 16 Jun 2005 20:06:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 13:06:30 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7FB8E13E2005; Thu, 16 Jun 2005 14:55:42 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 7492313E2005
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 14:55:36 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <200506162003.27303@danielnaber.de>
References: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com> <42B05381.9060409@cos.com> <E32D5763-D04B-4EBD-A96A-8FCFDD9A4EA5@ehatchersolutions.com> <200506162003.27303@danielnaber.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <976FC5C5-255F-4671-B844-0B2A1593A3AC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser, phrases and stopwords
Date: Thu, 16 Jun 2005 14:55:54 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 16, 2005, at 2:03 PM, Daniel Naber wrote:

> On Thursday 16 June 2005 04:17, Erik Hatcher wrote:
>
>
>> So we could change StopFilter to put the gaps back in safely now, I
>> think.
>>
>> Thoughts?
>>
>
> I personally don't have a problem with this, but shouldn't such a  
> change be
> optional? Like a parameter for StopFilter or a StopGapFilter? I'm sure
> there are people who prefer the way it is done now.

Making it optional is ok by me, though I'm curious about a use case  
that would prefer it the way it is now.  Searching for "lucene in  
action" and having it match documents with "lucene action" in them  
seems awkward to me in a precision context.  Google allows  
wildcarding of words with an asterisk:

     <http://www.google.com/search?client=safari&rls=en&q=%22lucene+* 
+action%22&ie=UTF-8&oe=UTF-8>

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 20:25:04 2005
Return-Path: <java-user-return-14983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19908 invoked from network); 16 Jun 2005 20:25:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 20:25:04 -0000
Received: (qmail 44367 invoked by uid 500); 16 Jun 2005 20:24:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44146 invoked by uid 500); 16 Jun 2005 20:24:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44086 invoked by uid 99); 16 Jun 2005 20:24:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail1.cos.com (HELO mail1.cos.com) (198.76.172.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 13:24:52 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail1.cos.com (Postfix) with ESMTP id 98CD6207033
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 15:24:37 -0400 (EDT)
Received: from mail1.cos.com ([127.0.0.1])
 by localhost (mail1.cos.com [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 03112-06 for <java-user@lucene.apache.org>;
 Thu, 16 Jun 2005 15:24:36 -0400 (EDT)
Received: from ntmailer.cos.com (ntmailer.cos.com [192.168.0.32])
	by mail1.cos.com (Postfix) with ESMTP id CA7F9207024
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 15:24:36 -0400 (EDT)
Received: by ntmailer.cos.com with Internet Mail Service (5.5.2653.19)
	id <M0K9LK1S>; Thu, 16 Jun 2005 15:34:20 -0400
Received: from [10.10.1.51] (barry.cos.com [10.10.1.51]) by ntmailer.cos.com with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2653.13)
	id M0K9LK1R; Thu, 16 Jun 2005 15:34:18 -0400
From: Mike Barry <MBarry@cos.com>
To: java-user@lucene.apache.org
Message-ID: <42B1D26A.7070303@cos.com>
Date: Thu, 16 Jun 2005 15:26:34 -0400
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
Subject: Re: QueryParser, phrases and stopwords
References: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com> <42B05381.9060409@cos.com> <E32D5763-D04B-4EBD-A96A-8FCFDD9A4EA5@ehatchersolutions.com> <200506162003.27303@danielnaber.de>
In-Reply-To: <200506162003.27303@danielnaber.de>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:

>On Thursday 16 June 2005 04:17, Erik Hatcher wrote:
>
>  
>
>>So we could change StopFilter to put the gaps back in safely now, I  
>>think.
>>
>>Thoughts?
>>    
>>
>
>I personally don't have a problem with this, but shouldn't such a change be 
>optional? Like a parameter for StopFilter or a StopGapFilter? I'm sure 
>there are people who prefer the way it is done now.
>
>Regards
> Daniel
>  
>

To me the change is more consistent with with the documentation
for Phrase Query.  If you need it to be a bit looser, set the slop
accordingly.

If you need "lucene action" to match "Lucene In Action",
you should adjust your query  (using QueryParser syntax):

"lucene action"~2


-MikeB.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 20:27:26 2005
Return-Path: <java-user-return-14984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20627 invoked from network); 16 Jun 2005 20:27:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 20:27:25 -0000
Received: (qmail 53261 invoked by uid 500); 16 Jun 2005 20:27:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53029 invoked by uid 500); 16 Jun 2005 20:27:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52950 invoked by uid 99); 16 Jun 2005 20:27:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 13:26:59 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0B52313E2008; Thu, 16 Jun 2005 16:26:30 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id CC2E813E2006
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 16:26:07 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42B1CCFB.2030308@oconeco.com>
References: <455d9df30506160903678c94e8@mail.gmail.com> <75D3AAF4-DD69-4091-8F98-296B5A7A5122@ehatchersolutions.com> <42B1CCFB.2030308@oconeco.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B5C6C402-489A-4181-A7D1-CADB3E856E7E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Search Hit frequency and location
Date: Thu, 16 Jun 2005 16:26:23 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 16, 2005, at 3:03 PM, Sean O'Connor wrote:
> The big stumbling block I have at the moment is understanding  
> whether Terms can be used to find something like a phrase query,  
> proximity query, or boolean query. I think the answer is no, two  
> different concepts.

Terms are the heart of searching.  All queries boil down to finding  
specific terms.  A PhraseQuery finds terms exactly side-by-side  
position-wise (or near by some slop factor).  BooleanQuery is an  
aggregation of other primitive queries, so its sort of special in  
that it doesn't deal with terms directly, but all primitive  
aggregated queries do.  A PrefixQuery is not a "primitive" query - it  
rewrites itself to a BooleanQuery OR'd with all the matching terms.   
So the terms are the "atoms" of Lucene.  Hopefully this is in-line  
with the conceptual stumbling block.

> But I also tend to think that the wheel has already been invented  
> to find how many times a phrase (i.e. "Lucene in Action") appears  
> in a document. Before I go digging through the source code, and  
> possibly creating some rather embarrassing hack(s), I thought I  
> would check to see if there is a 'right' way to go about this.

Deep within PhraseQuery the number of occurrences is tracked and used  
in scoring.  But at the high level of searching, that detail is not  
exposed.  Using IndexSearcher.explain to see the tf() of a  
PhraseQuery may help, but by default it'll be the square root of the  
number of occurrences.  (at least I hope I'm on track with that  
explanation - please correct me if I've misspoken)  I'd love to hear  
how others have done this sort of thing - find the number of  
occurrences of a phrase.

> Alternatively, any suggestions on what to google, or where to look  
> to educate myself would be welcome as well.

You're in the right place.  Keep asking - we're all here to learn and  
share what we know.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 20:39:35 2005
Return-Path: <java-user-return-14985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25655 invoked from network); 16 Jun 2005 20:39:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 20:39:34 -0000
Received: (qmail 2360 invoked by uid 500); 16 Jun 2005 20:39:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2299 invoked by uid 500); 16 Jun 2005 20:39:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2231 invoked by uid 99); 16 Jun 2005 20:39:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from pb-exchcon2.scansoft.com (HELO pb-exchcon2.scansoft.com) (199.4.160.64)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 13:39:21 -0700
Received: by pb-exchcon2.pb.scansoft.com with Internet Mail Service (5.5.2658.27)
	id <NB4RD0HR>; Thu, 16 Jun 2005 15:53:03 -0400
Message-ID: <FBA9F803D33470489B9B4676A6B09F0B0155FDBF@mt-exch1.montreal.speechworks.com>
From: "Robichaud, Jean-Philippe" <Jean-Philippe.Robichaud@scansoft.com>
To: java-user@lucene.apache.org
Subject: Getting the "directory/location" of an IndexReader/IndexWriter
Date: Thu, 16 Jun 2005 15:53:33 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2658.27)
Content-Type: text/plain
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Everyone.

I'm currently in a situation where I have multiples indexSearcher opened at
the same, each on different indices.  They are kept inside a
"IndicesManager" that export getSearcherAtLocation/FreeSearcher method. I
would like to be able to log the "path" used by a searcher I'm about to
"close" from the FreeSearcher method.  Is that possible without keeping an
external hash ?  I don't see any "getDirectoryName" in the definition of
IndexReader/IndexWriter.  I know that the "location" of a Lucene index is
quite abstract (db, ram, filesystem), but still, it would be good to have
some kind of a trace, no?

Any idea?

Thanks,

Jp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 20:40:27 2005
Return-Path: <java-user-return-14986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25881 invoked from network); 16 Jun 2005 20:40:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 20:40:26 -0000
Received: (qmail 5165 invoked by uid 500); 16 Jun 2005 20:40:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5130 invoked by uid 500); 16 Jun 2005 20:40:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5101 invoked by uid 99); 16 Jun 2005 20:40:17 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr12.xs4all.nl (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 13:40:10 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr12.xs4all.nl (8.13.3/8.13.3) with ESMTP id j5GKdrBt017746
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 22:39:54 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Search Hit frequency and location
Date: Thu, 16 Jun 2005 22:39:53 +0200
User-Agent: KMail/1.5.4
References: <455d9df30506160903678c94e8@mail.gmail.com> <75D3AAF4-DD69-4091-8F98-296B5A7A5122@ehatchersolutions.com> <42B1CCFB.2030308@oconeco.com>
In-Reply-To: <42B1CCFB.2030308@oconeco.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506162239.53497.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 16 June 2005 21:03, Sean O'Connor wrote:
> Thanks for the clarification. I had assumed that to be the case, but 
> assumptions have a tendency to come back and bite me in inappropriate 
> places. By pointing that out, you've probably saved me from beating my 
> head against the wall in the near future : -).
> 
> The big stumbling block I have at the moment is understanding whether 
> Terms can be used to find something like a phrase query, proximity 
> query, or boolean query. I think the answer is no, two different 

Terms are normally used as building blocks all of these.

> concepts. But I also tend to think that the wheel has already been 
> invented to find how many times a phrase (i.e. "Lucene in Action") 
> appears in a document. Before I go digging through the source code, and 
> possibly creating some rather embarrassing hack(s), I thought I would 
> check to see if there is a 'right' way to go about this.

Counting how often a query occurs is actually a simplification
of the normal query search. A PhraseQuery for the phrase
"lucene in action" provides an ExactPhraseScorer to score
each document. Have a look at the code of that scorer, its superclass
PhraseScorer only needs a minor modification to provide the phrase
frequency in a document as the score() for that document.
Getting from a Query to a Scorer is somewhat involved, but
it is documented in the javadocs of Weight.
An easy way to implement this is to copy the PhraseQuery
to one of your own so it uses your modified versions of (Exact)PhraseScorer.
Once this query works, override the corresponding get...() method in
your subclass of QueryParser to return that query instead of PhraseQuery.
For testing, have a look at TestPhraseQuery.java in the src/test directory.
 
> Alternatively, any suggestions on what to google, or where to look to 
> educate myself would be welcome as well.

TermQuery and TermScorer make a good starting point. To save
some reading, ignore the explain() methods initially.

> Cheers,
> Sean

Proost,
Paul Elschot.
 
> 
> 
> Erik Hatcher wrote:
> 
> >
> > On Jun 16, 2005, at 12:03 PM, Sean O'Connor wrote:
> >
> >> Yes, see the Javadoc for IndexReader.termPositions().
> >>     I'm probably missing the obvious here, but I assume this refers to
> >> the analyzed terms (i.e. individual words, possibly transmogrified by
> >> the analyzer).
> >
> >
> > Just to respond to part of your mail:
> >
> > Terms do not necessarily come from analysis... they could be  
> > specified directly using Field.Keyword() for example.  Any _indexed_  
> > field has term(s), with the possibility that the indexed field is  
> > analyzed or not.
> >
> >     Erik
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 20:50:05 2005
Return-Path: <java-user-return-14987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30625 invoked from network); 16 Jun 2005 20:50:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 20:50:05 -0000
Received: (qmail 41274 invoked by uid 500); 16 Jun 2005 20:49:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41205 invoked by uid 500); 16 Jun 2005 20:49:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41183 invoked by uid 99); 16 Jun 2005 20:49:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 13:49:53 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0B52313E2008; Thu, 16 Jun 2005 16:26:30 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id CC2E813E2006
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 16:26:07 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42B1CCFB.2030308@oconeco.com>
References: <455d9df30506160903678c94e8@mail.gmail.com> <75D3AAF4-DD69-4091-8F98-296B5A7A5122@ehatchersolutions.com> <42B1CCFB.2030308@oconeco.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B5C6C402-489A-4181-A7D1-CADB3E856E7E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Search Hit frequency and location
Date: Thu, 16 Jun 2005 16:26:23 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 16, 2005, at 3:03 PM, Sean O'Connor wrote:
> The big stumbling block I have at the moment is understanding  
> whether Terms can be used to find something like a phrase query,  
> proximity query, or boolean query. I think the answer is no, two  
> different concepts.

Terms are the heart of searching.  All queries boil down to finding  
specific terms.  A PhraseQuery finds terms exactly side-by-side  
position-wise (or near by some slop factor).  BooleanQuery is an  
aggregation of other primitive queries, so its sort of special in  
that it doesn't deal with terms directly, but all primitive  
aggregated queries do.  A PrefixQuery is not a "primitive" query - it  
rewrites itself to a BooleanQuery OR'd with all the matching terms.   
So the terms are the "atoms" of Lucene.  Hopefully this is in-line  
with the conceptual stumbling block.

> But I also tend to think that the wheel has already been invented  
> to find how many times a phrase (i.e. "Lucene in Action") appears  
> in a document. Before I go digging through the source code, and  
> possibly creating some rather embarrassing hack(s), I thought I  
> would check to see if there is a 'right' way to go about this.

Deep within PhraseQuery the number of occurrences is tracked and used  
in scoring.  But at the high level of searching, that detail is not  
exposed.  Using IndexSearcher.explain to see the tf() of a  
PhraseQuery may help, but by default it'll be the square root of the  
number of occurrences.  (at least I hope I'm on track with that  
explanation - please correct me if I've misspoken)  I'd love to hear  
how others have done this sort of thing - find the number of  
occurrences of a phrase.

> Alternatively, any suggestions on what to google, or where to look  
> to educate myself would be welcome as well.

You're in the right place.  Keep asking - we're all here to learn and  
share what we know.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 21:22:49 2005
Return-Path: <java-user-return-14988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47345 invoked from network); 16 Jun 2005 21:22:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 21:22:49 -0000
Received: (qmail 74430 invoked by uid 500); 16 Jun 2005 21:22:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74411 invoked by uid 500); 16 Jun 2005 21:22:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74383 invoked by uid 99); 16 Jun 2005 21:22:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 14:22:35 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0B52313E2008; Thu, 16 Jun 2005 16:26:30 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id CC2E813E2006
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 16:26:07 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42B1CCFB.2030308@oconeco.com>
References: <455d9df30506160903678c94e8@mail.gmail.com> <75D3AAF4-DD69-4091-8F98-296B5A7A5122@ehatchersolutions.com> <42B1CCFB.2030308@oconeco.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B5C6C402-489A-4181-A7D1-CADB3E856E7E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Search Hit frequency and location
Date: Thu, 16 Jun 2005 16:26:23 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 16, 2005, at 3:03 PM, Sean O'Connor wrote:
> The big stumbling block I have at the moment is understanding  
> whether Terms can be used to find something like a phrase query,  
> proximity query, or boolean query. I think the answer is no, two  
> different concepts.

Terms are the heart of searching.  All queries boil down to finding  
specific terms.  A PhraseQuery finds terms exactly side-by-side  
position-wise (or near by some slop factor).  BooleanQuery is an  
aggregation of other primitive queries, so its sort of special in  
that it doesn't deal with terms directly, but all primitive  
aggregated queries do.  A PrefixQuery is not a "primitive" query - it  
rewrites itself to a BooleanQuery OR'd with all the matching terms.   
So the terms are the "atoms" of Lucene.  Hopefully this is in-line  
with the conceptual stumbling block.

> But I also tend to think that the wheel has already been invented  
> to find how many times a phrase (i.e. "Lucene in Action") appears  
> in a document. Before I go digging through the source code, and  
> possibly creating some rather embarrassing hack(s), I thought I  
> would check to see if there is a 'right' way to go about this.

Deep within PhraseQuery the number of occurrences is tracked and used  
in scoring.  But at the high level of searching, that detail is not  
exposed.  Using IndexSearcher.explain to see the tf() of a  
PhraseQuery may help, but by default it'll be the square root of the  
number of occurrences.  (at least I hope I'm on track with that  
explanation - please correct me if I've misspoken)  I'd love to hear  
how others have done this sort of thing - find the number of  
occurrences of a phrase.

> Alternatively, any suggestions on what to google, or where to look  
> to educate myself would be welcome as well.

You're in the right place.  Keep asking - we're all here to learn and  
share what we know.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 21:23:04 2005
Return-Path: <java-user-return-14989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47398 invoked from network); 16 Jun 2005 21:23:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 21:23:03 -0000
Received: (qmail 74602 invoked by uid 500); 16 Jun 2005 21:22:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74414 invoked by uid 500); 16 Jun 2005 21:22:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74382 invoked by uid 99); 16 Jun 2005 21:22:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 14:22:35 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7FB8E13E2005; Thu, 16 Jun 2005 14:55:42 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 7492313E2005
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 14:55:36 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <200506162003.27303@danielnaber.de>
References: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com> <42B05381.9060409@cos.com> <E32D5763-D04B-4EBD-A96A-8FCFDD9A4EA5@ehatchersolutions.com> <200506162003.27303@danielnaber.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <976FC5C5-255F-4671-B844-0B2A1593A3AC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser, phrases and stopwords
Date: Thu, 16 Jun 2005 14:55:54 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 16, 2005, at 2:03 PM, Daniel Naber wrote:

> On Thursday 16 June 2005 04:17, Erik Hatcher wrote:
>
>
>> So we could change StopFilter to put the gaps back in safely now, I
>> think.
>>
>> Thoughts?
>>
>
> I personally don't have a problem with this, but shouldn't such a  
> change be
> optional? Like a parameter for StopFilter or a StopGapFilter? I'm sure
> there are people who prefer the way it is done now.

Making it optional is ok by me, though I'm curious about a use case  
that would prefer it the way it is now.  Searching for "lucene in  
action" and having it match documents with "lucene action" in them  
seems awkward to me in a precision context.  Google allows  
wildcarding of words with an asterisk:

     <http://www.google.com/search?client=safari&rls=en&q=%22lucene+* 
+action%22&ie=UTF-8&oe=UTF-8>

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 21:49:52 2005
Return-Path: <java-user-return-14990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72900 invoked from network); 16 Jun 2005 21:49:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 21:49:52 -0000
Received: (qmail 6672 invoked by uid 500); 16 Jun 2005 21:49:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6643 invoked by uid 500); 16 Jun 2005 21:49:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6469 invoked by uid 99); 16 Jun 2005 21:49:27 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr12.xs4all.nl (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Jun 2005 14:49:25 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr12.xs4all.nl (8.13.3/8.13.3) with ESMTP id j5GKdrBt017746
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 22:39:54 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Search Hit frequency and location
Date: Thu, 16 Jun 2005 22:39:53 +0200
User-Agent: KMail/1.5.4
References: <455d9df30506160903678c94e8@mail.gmail.com> <75D3AAF4-DD69-4091-8F98-296B5A7A5122@ehatchersolutions.com> <42B1CCFB.2030308@oconeco.com>
In-Reply-To: <42B1CCFB.2030308@oconeco.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506162239.53497.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 16 June 2005 21:03, Sean O'Connor wrote:
> Thanks for the clarification. I had assumed that to be the case, but 
> assumptions have a tendency to come back and bite me in inappropriate 
> places. By pointing that out, you've probably saved me from beating my 
> head against the wall in the near future : -).
> 
> The big stumbling block I have at the moment is understanding whether 
> Terms can be used to find something like a phrase query, proximity 
> query, or boolean query. I think the answer is no, two different 

Terms are normally used as building blocks all of these.

> concepts. But I also tend to think that the wheel has already been 
> invented to find how many times a phrase (i.e. "Lucene in Action") 
> appears in a document. Before I go digging through the source code, and 
> possibly creating some rather embarrassing hack(s), I thought I would 
> check to see if there is a 'right' way to go about this.

Counting how often a query occurs is actually a simplification
of the normal query search. A PhraseQuery for the phrase
"lucene in action" provides an ExactPhraseScorer to score
each document. Have a look at the code of that scorer, its superclass
PhraseScorer only needs a minor modification to provide the phrase
frequency in a document as the score() for that document.
Getting from a Query to a Scorer is somewhat involved, but
it is documented in the javadocs of Weight.
An easy way to implement this is to copy the PhraseQuery
to one of your own so it uses your modified versions of (Exact)PhraseScorer.
Once this query works, override the corresponding get...() method in
your subclass of QueryParser to return that query instead of PhraseQuery.
For testing, have a look at TestPhraseQuery.java in the src/test directory.
 
> Alternatively, any suggestions on what to google, or where to look to 
> educate myself would be welcome as well.

TermQuery and TermScorer make a good starting point. To save
some reading, ignore the explain() methods initially.

> Cheers,
> Sean

Proost,
Paul Elschot.
 
> 
> 
> Erik Hatcher wrote:
> 
> >
> > On Jun 16, 2005, at 12:03 PM, Sean O'Connor wrote:
> >
> >> Yes, see the Javadoc for IndexReader.termPositions().
> >>     I'm probably missing the obvious here, but I assume this refers to
> >> the analyzed terms (i.e. individual words, possibly transmogrified by
> >> the analyzer).
> >
> >
> > Just to respond to part of your mail:
> >
> > Terms do not necessarily come from analysis... they could be  
> > specified directly using Field.Keyword() for example.  Any _indexed_  
> > field has term(s), with the possibility that the indexed field is  
> > analyzed or not.
> >
> >     Erik
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 22:59:59 2005
Return-Path: <java-user-return-14991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1564 invoked from network); 16 Jun 2005 22:59:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 22:59:59 -0000
Received: (qmail 69120 invoked by uid 500); 16 Jun 2005 22:59:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68996 invoked by uid 500); 16 Jun 2005 22:59:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68967 invoked by uid 99); 16 Jun 2005 22:59:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jayallenhill@gmail.com designates 64.233.170.200 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2005 15:59:37 -0700
Received: by rproxy.gmail.com with SMTP id c51so224547rne
        for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 15:58:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=bIFcgUrPq3jPjM6nzvUjigU2ZKeNm3+KgORi8mKYaolgkfnCrColuiPgF+FuCEWWAe1JVgPhqw8Ww8AC25McPOnAgj8eg2Ou6XLiw5FPc3C28OpiFA7+8Im0HES6XQiUAPL3uEdM1zEB9iQdjSUWBR0nX7tQcpLERQJtplnqLFE=
Received: by 10.39.3.25 with SMTP id f25mr813553rni;
        Thu, 16 Jun 2005 15:52:15 -0700 (PDT)
Received: by 10.38.78.75 with HTTP; Thu, 16 Jun 2005 15:52:15 -0700 (PDT)
Message-ID: <d0e6561a05061615522895901b@mail.gmail.com>
Date: Thu, 16 Jun 2005 15:52:15 -0700
From: Jay Hill <jayallenhill@gmail.com>
Reply-To: Jay Hill <jayallenhill@gmail.com>
To: java-user@lucene.apache.org, Richard Krenek <richard.krenek@gmail.com>
Subject: Re: Need a way to set a result limit on a particular field
In-Reply-To: <4ef6647e05061609135d1227ed@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <FBA9F803D33470489B9B4676A6B09F0B0155FAB0@mt-exch1.montreal.speechworks.com>
	 <d0e6561a05061515073167c606@mail.gmail.com>
	 <4ef6647e05061609135d1227ed@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Richard, I'll check it out.

-Jay

On 6/16/05, Richard Krenek <richard.krenek@gmail.com> wrote:
> To add to this option, you may want to use this patch
> http://issues.apache.org/bugzilla/show_bug.cgi?id=3D27743
> This way instead of pulling the entire document back each time, just
> pull back your host field. Then do your check and only pull pack the
> rest of the document if you need to. This will help with speed if you
> are going through a lot of documents and each document is big.
>=20
> On 6/15/05, Jay Hill <jayallenhill@gmail.com> wrote:
> > I like this approach. This may be what I'm looking for.
> >
> > Thanks JP!
> > -Jay
> >
> > On 6/15/05, Robichaud, Jean-Philippe
> > <Jean-Philippe.Robichaud@scansoft.com> wrote:
> > >
> > > It may be simpler and more effective to use the Hits object and keep =
the
> > > number of time each host was actually "returned" to the user and skip=
 it if
> > > the limit has been reach.  This way, if your users just look at the 1=
0-20
> > > highest hits, you will save you a lot of processing time, especially =
if your
> > > index is huge...
> > >
> > > Here is some pseudo code stripped from a class I once wrote
> > >
> > >
> > > Hits hits =3D iSearcher.search(myQuery);
> > > IntHash hostFreqCount =3D new IntHash();
> > >
> > > int i=3D0;
> > > int j=3D0;
> > >
> > > while(i < hist.length) {
> > >  j=3D0;
> > >  for(; (i<hits.length && j < 10); i++,j++) {
> > >
> > >   Document doc =3D iSearcher.doc(hits.doc(i));
> > >   String host_id =3D doc.get("host_id");
> > >   hostFreqCount.inc(host_id);
> > >
> > >    if(hostFreqCount.get(host_id) > 3) continue;
> > >
> > >   ///  show the hit to the use...
> > >
> > >  }
> > > }
> > >
> > >
> > > Hope it helped !
> > >
> > > Jp
> > >
> > >
> > > -----Original Message-----
> > > From: Jay Hill [mailto:jayallenhill@gmail.com]
> > > Sent: Wednesday, June 15, 2005 2:01 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Need a way to set a result limit on a particular field
> > >
> > > Thanks Tony and Erik for the replies. The trick is we don't know the
> > > hosts that will be returned in advance, we just don't want more than =
3
> > > from any one host. It's not unlike searching on Google where you migh=
t
> > > see a link that says "More results from foo.com". We essentially want
> > > to discard any results > 3 for any one host. In some of our searches
> > > we might get high scores on 20 or 30 documents, but we don't want to
> > > show page after page from the same host, we'd rather limit it to 3
> > > from each for more diversity.
> > >
> > > I may have to use a brute force approach using HitCollector as Tony
> > > suggests. I was hoping to avoid the HitCollector, but there may be no
> > > other way right now.
> > >
> > > Many thanks,
> > > -Jay
> > >
> > >
> > > On 6/14/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> > > >
> > > > On Jun 14, 2005, at 7:23 PM, Jay Hill wrote:
> > > > > I have a need to limit my Hits returned based on one of the index=
ed
> > > > > fields. This is a web application and we want to limit the number=
 of
> > > > > hits from any one host. We have a field named "host_id" and I'd l=
ike
> > > > > to be able to limit my results to no more than three results for =
any
> > > > > one host_id.
> > > >
> > > > I may not be fully understanding your question, but I'll go with my
> > > > assumptions... wrap the users query into a BooleanQuery as a requir=
ed
> > > > clause and then add another clause with a TermQuery for the specifi=
c
> > > > host_id.  Then simply constrain the number of Hits shown to the fir=
st
> > > > 3.  Does that do what you're after?
> > > >
> > > >      Erik
> > > >
> > > >
> > > > -------------------------------------------------------------------=
--
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 23:05:04 2005
Return-Path: <java-user-return-14992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5069 invoked from network); 16 Jun 2005 23:05:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 23:05:04 -0000
Received: (qmail 88028 invoked by uid 500); 16 Jun 2005 23:04:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87994 invoked by uid 500); 16 Jun 2005 23:04:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87757 invoked by uid 99); 16 Jun 2005 23:04:51 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr12.xs4all.nl (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2005 16:04:49 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr12.xs4all.nl (8.13.3/8.13.3) with ESMTP id j5GKdrBt017746
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 22:39:54 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Search Hit frequency and location
Date: Thu, 16 Jun 2005 22:39:53 +0200
User-Agent: KMail/1.5.4
References: <455d9df30506160903678c94e8@mail.gmail.com> <75D3AAF4-DD69-4091-8F98-296B5A7A5122@ehatchersolutions.com> <42B1CCFB.2030308@oconeco.com>
In-Reply-To: <42B1CCFB.2030308@oconeco.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506162239.53497.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 16 June 2005 21:03, Sean O'Connor wrote:
> Thanks for the clarification. I had assumed that to be the case, but 
> assumptions have a tendency to come back and bite me in inappropriate 
> places. By pointing that out, you've probably saved me from beating my 
> head against the wall in the near future : -).
> 
> The big stumbling block I have at the moment is understanding whether 
> Terms can be used to find something like a phrase query, proximity 
> query, or boolean query. I think the answer is no, two different 

Terms are normally used as building blocks all of these.

> concepts. But I also tend to think that the wheel has already been 
> invented to find how many times a phrase (i.e. "Lucene in Action") 
> appears in a document. Before I go digging through the source code, and 
> possibly creating some rather embarrassing hack(s), I thought I would 
> check to see if there is a 'right' way to go about this.

Counting how often a query occurs is actually a simplification
of the normal query search. A PhraseQuery for the phrase
"lucene in action" provides an ExactPhraseScorer to score
each document. Have a look at the code of that scorer, its superclass
PhraseScorer only needs a minor modification to provide the phrase
frequency in a document as the score() for that document.
Getting from a Query to a Scorer is somewhat involved, but
it is documented in the javadocs of Weight.
An easy way to implement this is to copy the PhraseQuery
to one of your own so it uses your modified versions of (Exact)PhraseScorer.
Once this query works, override the corresponding get...() method in
your subclass of QueryParser to return that query instead of PhraseQuery.
For testing, have a look at TestPhraseQuery.java in the src/test directory.
 
> Alternatively, any suggestions on what to google, or where to look to 
> educate myself would be welcome as well.

TermQuery and TermScorer make a good starting point. To save
some reading, ignore the explain() methods initially.

> Cheers,
> Sean

Proost,
Paul Elschot.
 
> 
> 
> Erik Hatcher wrote:
> 
> >
> > On Jun 16, 2005, at 12:03 PM, Sean O'Connor wrote:
> >
> >> Yes, see the Javadoc for IndexReader.termPositions().
> >>     I'm probably missing the obvious here, but I assume this refers to
> >> the analyzed terms (i.e. individual words, possibly transmogrified by
> >> the analyzer).
> >
> >
> > Just to respond to part of your mail:
> >
> > Terms do not necessarily come from analysis... they could be  
> > specified directly using Field.Keyword() for example.  Any _indexed_  
> > field has term(s), with the possibility that the indexed field is  
> > analyzed or not.
> >
> >     Erik
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 23:32:16 2005
Return-Path: <java-user-return-14993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22255 invoked from network); 16 Jun 2005 23:32:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 23:32:16 -0000
Received: (qmail 76404 invoked by uid 500); 16 Jun 2005 23:32:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76370 invoked by uid 500); 16 Jun 2005 23:32:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76356 invoked by uid 99); 16 Jun 2005 23:32:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2005 16:32:09 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4D4AC5B782; Thu, 16 Jun 2005 16:31:52 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4AB497F467
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 16:31:52 -0700 (PDT)
Date: Thu, 16 Jun 2005 16:31:52 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Determining the IDF while searching for documents
In-Reply-To: <1459897493@web.de>
Message-ID: <Pine.LNX.4.58.0506161630350.18016@hal.rescomp.berkeley.edu>
References: <1459897493@web.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: ...to get the number of docs that contain a specific term, you can use
: IndexReader.docFreq(Term)

: That's not possible, because my indexelements are trigrams, so with
: IndexReader.docFreq(trigram) I get the number of docs which contain this
: trigram, but I need the number of docs that contain a whole term.

just becuase you search on a field that contains terms which are trigrams
doesn't mean you can also have a field which contains the orriginal raw
terms, and use that ield to determine the docFreq of each "Term".




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 23:32:34 2005
Return-Path: <java-user-return-14994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22333 invoked from network); 16 Jun 2005 23:32:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 23:32:34 -0000
Received: (qmail 77700 invoked by uid 500); 16 Jun 2005 23:32:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77654 invoked by uid 500); 16 Jun 2005 23:32:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77627 invoked by uid 99); 16 Jun 2005 23:32:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2005 16:32:24 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0B52313E2008; Thu, 16 Jun 2005 16:26:30 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id CC2E813E2006
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 16:26:07 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42B1CCFB.2030308@oconeco.com>
References: <455d9df30506160903678c94e8@mail.gmail.com> <75D3AAF4-DD69-4091-8F98-296B5A7A5122@ehatchersolutions.com> <42B1CCFB.2030308@oconeco.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B5C6C402-489A-4181-A7D1-CADB3E856E7E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Search Hit frequency and location
Date: Thu, 16 Jun 2005 16:26:23 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 16, 2005, at 3:03 PM, Sean O'Connor wrote:
> The big stumbling block I have at the moment is understanding  
> whether Terms can be used to find something like a phrase query,  
> proximity query, or boolean query. I think the answer is no, two  
> different concepts.

Terms are the heart of searching.  All queries boil down to finding  
specific terms.  A PhraseQuery finds terms exactly side-by-side  
position-wise (or near by some slop factor).  BooleanQuery is an  
aggregation of other primitive queries, so its sort of special in  
that it doesn't deal with terms directly, but all primitive  
aggregated queries do.  A PrefixQuery is not a "primitive" query - it  
rewrites itself to a BooleanQuery OR'd with all the matching terms.   
So the terms are the "atoms" of Lucene.  Hopefully this is in-line  
with the conceptual stumbling block.

> But I also tend to think that the wheel has already been invented  
> to find how many times a phrase (i.e. "Lucene in Action") appears  
> in a document. Before I go digging through the source code, and  
> possibly creating some rather embarrassing hack(s), I thought I  
> would check to see if there is a 'right' way to go about this.

Deep within PhraseQuery the number of occurrences is tracked and used  
in scoring.  But at the high level of searching, that detail is not  
exposed.  Using IndexSearcher.explain to see the tf() of a  
PhraseQuery may help, but by default it'll be the square root of the  
number of occurrences.  (at least I hope I'm on track with that  
explanation - please correct me if I've misspoken)  I'd love to hear  
how others have done this sort of thing - find the number of  
occurrences of a phrase.

> Alternatively, any suggestions on what to google, or where to look  
> to educate myself would be welcome as well.

You're in the right place.  Keep asking - we're all here to learn and  
share what we know.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 23:42:39 2005
Return-Path: <java-user-return-14995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27142 invoked from network); 16 Jun 2005 23:42:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 23:42:39 -0000
Received: (qmail 7457 invoked by uid 500); 16 Jun 2005 23:42:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7432 invoked by uid 500); 16 Jun 2005 23:42:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7419 invoked by uid 99); 16 Jun 2005 23:42:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from pb-exchcon2.scansoft.com (HELO pb-exchcon2.scansoft.com) (199.4.160.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2005 16:42:31 -0700
Received: by pb-exchcon2.pb.scansoft.com with Internet Mail Service (5.5.2658.27)
	id <NB4RD0HR>; Thu, 16 Jun 2005 15:53:03 -0400
Message-ID: <FBA9F803D33470489B9B4676A6B09F0B0155FDBF@mt-exch1.montreal.speechworks.com>
From: "Robichaud, Jean-Philippe" <Jean-Philippe.Robichaud@scansoft.com>
To: java-user@lucene.apache.org
Subject: Getting the "directory/location" of an IndexReader/IndexWriter
Date: Thu, 16 Jun 2005 15:53:33 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2658.27)
Content-Type: text/plain
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Everyone.

I'm currently in a situation where I have multiples indexSearcher opened at
the same, each on different indices.  They are kept inside a
"IndicesManager" that export getSearcherAtLocation/FreeSearcher method. I
would like to be able to log the "path" used by a searcher I'm about to
"close" from the FreeSearcher method.  Is that possible without keeping an
external hash ?  I don't see any "getDirectoryName" in the definition of
IndexReader/IndexWriter.  I know that the "location" of a Lucene index is
quite abstract (db, ram, filesystem), but still, it would be good to have
some kind of a trace, no?

Any idea?

Thanks,

Jp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 23:47:31 2005
Return-Path: <java-user-return-14996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29573 invoked from network); 16 Jun 2005 23:47:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 23:47:31 -0000
Received: (qmail 22835 invoked by uid 500); 16 Jun 2005 23:47:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22809 invoked by uid 500); 16 Jun 2005 23:47:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22796 invoked by uid 99); 16 Jun 2005 23:47:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2005 16:47:25 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id BAFCF5B782; Thu, 16 Jun 2005 16:47:00 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP
	id B860B7F467; Thu, 16 Jun 2005 16:47:00 -0700 (PDT)
Date: Thu, 16 Jun 2005 16:47:00 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org, John Wang <john.wang@gmail.com>
Subject: Re: dangers of fieldcache
In-Reply-To: <8837fb7705061523556ff8bdfd@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0506161639530.18016@hal.rescomp.berkeley.edu>
References: <8837fb7705061523556ff8bdfd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I don't have a commiter-bit, so i can't say for a fact that a patch like
this would/wouldn't be accepted, but it seems like a pretty simple
change...

1) add a "public void suggestRemove(IndexReader r)" method to
   FieldCache.java
2) add an implimentation of that method to FieldCacheImpl.java which calls
   cache.remove(r)

...even without a patch, you should be able to do the same thing by
writting your own subclass of FieldCacheImpl and assigning an
instance of it to FieldCache.DEFAULT before you open any IndexReaders.

BUT!

I would seriously question wether or not this is needed, i'm hard pressed
to think of any situation in which the GC wouldn't clean up those weak
refrences for you in a timely manner ... unless ... perhaps ... you still
have a hard refrence to your IndexReader somewhere that you aren't
noticing which you don't let go of for quite a while?



: Date: Wed, 15 Jun 2005 23:55:20 -0700
: From: John Wang <john.wang@gmail.com>
: Reply-To: java-user@lucene.apache.org, John Wang <john.wang@gmail.com>
: To: java-user@lucene.apache.org
: Subject: dangers of fieldcache
:
: Hi:
:
:    I am having some problems with the field cache.
:
:    My application keeps a reader in memory for a amount of time and
: then polls for a new reader, at which point a new reader is loaded
: into memory and the older reader is then closed.
:
:    However, after the reader is loaded, I do some operations such as
: sorting which implicitly makes use of and stores data into the default
: field cache, which lives in the static memory.
:
:    Now even if I close the reader, the huge amounts of data remains in
: the field cache. There isn't a way to flush or clear the fieldcache,
: one can only rely the GC do the right thing and pull the soft
: references from the WeekHashMap.
:
:    This is baaaaaaaaaaaaad for me.
:
:    Can an method to flush the cache be added to FieldCache? Or any
: other suggestions?
:
:     Please let me know, I can file a bug/enhancement for this.
:
: Thanks
:
: -John
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 23:49:18 2005
Return-Path: <java-user-return-14997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30011 invoked from network); 16 Jun 2005 23:49:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 23:49:18 -0000
Received: (qmail 26541 invoked by uid 500); 16 Jun 2005 23:49:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26513 invoked by uid 500); 16 Jun 2005 23:49:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26499 invoked by uid 99); 16 Jun 2005 23:49:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2005 16:49:11 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7FB8E13E2005; Thu, 16 Jun 2005 14:55:42 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 7492313E2005
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 14:55:36 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <200506162003.27303@danielnaber.de>
References: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com> <42B05381.9060409@cos.com> <E32D5763-D04B-4EBD-A96A-8FCFDD9A4EA5@ehatchersolutions.com> <200506162003.27303@danielnaber.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <976FC5C5-255F-4671-B844-0B2A1593A3AC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser, phrases and stopwords
Date: Thu, 16 Jun 2005 14:55:54 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 16, 2005, at 2:03 PM, Daniel Naber wrote:

> On Thursday 16 June 2005 04:17, Erik Hatcher wrote:
>
>
>> So we could change StopFilter to put the gaps back in safely now, I
>> think.
>>
>> Thoughts?
>>
>
> I personally don't have a problem with this, but shouldn't such a  
> change be
> optional? Like a parameter for StopFilter or a StopGapFilter? I'm sure
> there are people who prefer the way it is done now.

Making it optional is ok by me, though I'm curious about a use case  
that would prefer it the way it is now.  Searching for "lucene in  
action" and having it match documents with "lucene action" in them  
seems awkward to me in a precision context.  Google allows  
wildcarding of words with an asterisk:

     <http://www.google.com/search?client=safari&rls=en&q=%22lucene+* 
+action%22&ie=UTF-8&oe=UTF-8>

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 16 23:56:07 2005
Return-Path: <java-user-return-14998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32534 invoked from network); 16 Jun 2005 23:56:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jun 2005 23:56:07 -0000
Received: (qmail 39389 invoked by uid 500); 16 Jun 2005 23:56:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39348 invoked by uid 500); 16 Jun 2005 23:56:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39328 invoked by uid 99); 16 Jun 2005 23:56:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of sean@oconeco.com designates 216.239.128.26 as permitted sender)
Received: from smtp.omnis.com (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2005 16:55:59 -0700
Message-ID: <42B1CCFB.2030308@oconeco.com>
Date: Thu, 16 Jun 2005 15:03:23 -0400
From: Sean O'Connor <sean@oconeco.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Search Hit frequency and location
References: <455d9df30506160903678c94e8@mail.gmail.com> <75D3AAF4-DD69-4091-8F98-296B5A7A5122@ehatchersolutions.com>
In-Reply-To: <75D3AAF4-DD69-4091-8F98-296B5A7A5122@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the clarification. I had assumed that to be the case, but 
assumptions have a tendency to come back and bite me in inappropriate 
places. By pointing that out, you've probably saved me from beating my 
head against the wall in the near future : -).

The big stumbling block I have at the moment is understanding whether 
Terms can be used to find something like a phrase query, proximity 
query, or boolean query. I think the answer is no, two different 
concepts. But I also tend to think that the wheel has already been 
invented to find how many times a phrase (i.e. "Lucene in Action") 
appears in a document. Before I go digging through the source code, and 
possibly creating some rather embarrassing hack(s), I thought I would 
check to see if there is a 'right' way to go about this.

Alternatively, any suggestions on what to google, or where to look to 
educate myself would be welcome as well.
Cheers,

Sean


Erik Hatcher wrote:

>
> On Jun 16, 2005, at 12:03 PM, Sean O'Connor wrote:
>
>> Yes, see the Javadoc for IndexReader.termPositions().
>>     I'm probably missing the obvious here, but I assume this refers to
>> the analyzed terms (i.e. individual words, possibly transmogrified by
>> the analyzer).
>
>
> Just to respond to part of your mail:
>
> Terms do not necessarily come from analysis... they could be  
> specified directly using Field.Keyword() for example.  Any _indexed_  
> field has term(s), with the possibility that the indexed field is  
> analyzed or not.
>
>     Erik
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-14999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 00:18:22 2005
Return-Path: <java-user-return-14999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42134 invoked from network); 17 Jun 2005 00:18:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 00:18:21 -0000
Received: (qmail 95799 invoked by uid 500); 17 Jun 2005 00:18:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95754 invoked by uid 500); 17 Jun 2005 00:18:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95741 invoked by uid 99); 17 Jun 2005 00:18:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail1.cos.com (HELO mail1.cos.com) (198.76.172.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2005 17:18:15 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail1.cos.com (Postfix) with ESMTP id 98CD6207033
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 15:24:37 -0400 (EDT)
Received: from mail1.cos.com ([127.0.0.1])
 by localhost (mail1.cos.com [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 03112-06 for <java-user@lucene.apache.org>;
 Thu, 16 Jun 2005 15:24:36 -0400 (EDT)
Received: from ntmailer.cos.com (ntmailer.cos.com [192.168.0.32])
	by mail1.cos.com (Postfix) with ESMTP id CA7F9207024
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 15:24:36 -0400 (EDT)
Received: by ntmailer.cos.com with Internet Mail Service (5.5.2653.19)
	id <M0K9LK1S>; Thu, 16 Jun 2005 15:34:20 -0400
Received: from [10.10.1.51] (barry.cos.com [10.10.1.51]) by ntmailer.cos.com with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2653.13)
	id M0K9LK1R; Thu, 16 Jun 2005 15:34:18 -0400
From: Mike Barry <MBarry@cos.com>
To: java-user@lucene.apache.org
Message-ID: <42B1D26A.7070303@cos.com>
Date: Thu, 16 Jun 2005 15:26:34 -0400
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
Subject: Re: QueryParser, phrases and stopwords
References: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com> <42B05381.9060409@cos.com> <E32D5763-D04B-4EBD-A96A-8FCFDD9A4EA5@ehatchersolutions.com> <200506162003.27303@danielnaber.de>
In-Reply-To: <200506162003.27303@danielnaber.de>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:

>On Thursday 16 June 2005 04:17, Erik Hatcher wrote:
>
>  
>
>>So we could change StopFilter to put the gaps back in safely now, I  
>>think.
>>
>>Thoughts?
>>    
>>
>
>I personally don't have a problem with this, but shouldn't such a change be 
>optional? Like a parameter for StopFilter or a StopGapFilter? I'm sure 
>there are people who prefer the way it is done now.
>
>Regards
> Daniel
>  
>

To me the change is more consistent with with the documentation
for Phrase Query.  If you need it to be a bit looser, set the slop
accordingly.

If you need "lucene action" to match "Lucene In Action",
you should adjust your query  (using QueryParser syntax):

"lucene action"~2


-MikeB.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 00:27:28 2005
Return-Path: <java-user-return-15000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44770 invoked from network); 17 Jun 2005 00:27:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 00:27:28 -0000
Received: (qmail 21534 invoked by uid 500); 17 Jun 2005 00:27:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21500 invoked by uid 500); 17 Jun 2005 00:27:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21470 invoked by uid 99); 17 Jun 2005 00:27:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jun 2005 17:27:21 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F1E8B5B782; Thu, 16 Jun 2005 17:05:08 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id EE5FC7F467
	for <java-user@lucene.apache.org>; Thu, 16 Jun 2005 17:05:08 -0700 (PDT)
Date: Thu, 16 Jun 2005 17:05:08 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Poor memory performance over a large index 
In-Reply-To: <42B17C69.6050609@sirma.bg>
Message-ID: <Pine.LNX.4.58.0506161657350.21981@hal.rescomp.berkeley.edu>
References: <6f3b2429050616010878ce73e1@mail.gmail.com>
 <41850F94-FC92-4270-BBAB-6998673CA7FC@ehatchersolutions.com>
 <42B17C69.6050609@sirma.bg>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: Strange, but opening a second IndexSearcher and running another query
: consumes another 560M of RAM.
: In our case the results are always sorted by some column(s).
: The app is supposed to be a multithreaded multiuser environment.
: At the begining the design was that each user session has its own
: IndexSearcher.
: But later we've made an observation that the first time an IndexSearcher
: is sorting on specific column, it takes significantly more time then the
: next sorts on the same column.
: This forms a performance penalty when changing the sort column. That's
: why we've decided to keep a distinct opened IndexSearcher for each
: possible sort column.
: And each session upon executing its query will obtain the "right"
: IndexSearcher that is quick on sorting by that specific column.

wow.  this seems way more complicated then it needs to be.

the reason you see the memory footprint go up so much with each search
that uses a sort on a field, is because of the FieldCache.  You shoudl
search arround for an explanation/description of what/why it is and how it
works, but the bottomline is that time/memory cost is only paid once per
field you search on *per* IndexReader ... so opening a seperate
IndexSearcher/IndexReader per user is definitely not hte best way to go,
but open a seperate IndexSearcher per sort field should also be
unneccessary.  you should be able to use *one* IndexSearcher for all
searches, with the same memory footprint, and reduced complexity.

: The problem is that (having in mind the abovementioned 325M & 540M) the
: memory gets exhausted too quickly which really leaves no room for
: multiple users running queries simultaneously.

the only advice i have is to increase your heap size, and minimize the
number of IndexSearchers.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 08:40:13 2005
Return-Path: <java-user-return-15001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6746 invoked from network); 17 Jun 2005 08:40:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 08:40:12 -0000
Received: (qmail 33484 invoked by uid 500); 17 Jun 2005 08:40:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33451 invoked by uid 500); 17 Jun 2005 08:40:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33437 invoked by uid 99); 17 Jun 2005 08:40:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from plesk2.axarnet.com (HELO plesk1.axarnet.com) (213.200.101.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2005 01:40:06 -0700
Received: (qmail 3343 invoked from network); 17 Jun 2005 07:15:00 -0000
Received: from 172.red-217-127-83.pooles.rima-tde.net (HELO ?192.168.1.5?) (217.127.83.172)
  by iil.es with SMTP; 17 Jun 2005 07:15:00 -0000
Message-ID: <42B2789D.4040706@xeridia.com>
Date: Fri, 17 Jun 2005 09:15:41 +0200
From: =?ISO-8859-1?Q?Diego_Manilla_Su=E1rez?= <diego.manilla@xeridia.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Wordperfect file parser
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, does anyone know if a Wordperfect file (*.wpd) parser exist for Java?

Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 10:56:27 2005
Return-Path: <java-user-return-15002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57616 invoked from network); 17 Jun 2005 10:56:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 10:56:27 -0000
Received: (qmail 87061 invoked by uid 500); 17 Jun 2005 10:56:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87030 invoked by uid 500); 17 Jun 2005 10:56:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87017 invoked by uid 99); 17 Jun 2005 10:56:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jm.tinghir@gmail.com designates 64.233.184.198 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2005 03:56:19 -0700
Received: by wproxy.gmail.com with SMTP id 36so1046738wra
        for <java-user@lucene.apache.org>; Fri, 17 Jun 2005 03:55:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=VhxHvSEXJBoTzkHcL+tAvPD+f0swPg/Y33eja7hVgi3yiYLykzJ0d0hKc/L7gArOmNpJQBLO1x114iYoSxwegp6PSH6RNWZ85RcOTefLCpM/JeG+7DrnLb1WhL3esmpY4i4wVEmGecojWuKMpokEn4NrJnWYMYBbcEvWyNIOIf4=
Received: by 10.54.150.2 with SMTP id x2mr1009337wrd;
        Fri, 17 Jun 2005 02:55:26 -0700 (PDT)
Received: by 10.54.62.20 with HTTP; Fri, 17 Jun 2005 02:55:26 -0700 (PDT)
Message-ID: <6f3b242905061702553d93afcf@mail.gmail.com>
Date: Fri, 17 Jun 2005 11:55:26 +0200
From: JM Tinghir <jm.tinghir@gmail.com>
Reply-To: JM Tinghir <jm.tinghir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Performance with multi index
In-Reply-To: <42B1906C.2000903@i-hypergrid.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6f3b2429050616010878ce73e1@mail.gmail.com>
	 <41850F94-FC92-4270-BBAB-6998673CA7FC@ehatchersolutions.com>
	 <6f3b242905061607296b6f181a@mail.gmail.com>
	 <6f3b242905061607336fb36f70@mail.gmail.com>
	 <42B1906C.2000903@i-hypergrid.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> do you keep your indexWriter open all the time during process?

I think that might be the real cause. And as it reopen it all the
time, the mergeFactor isn't used at all I guess...
I'll try to modify that.

Thanks.

Jean-Marie Tinghir

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 11:02:30 2005
Return-Path: <java-user-return-15003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67822 invoked from network); 17 Jun 2005 11:02:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 11:02:30 -0000
Received: (qmail 99002 invoked by uid 500); 17 Jun 2005 11:02:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98973 invoked by uid 500); 17 Jun 2005 11:02:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98959 invoked by uid 99); 17 Jun 2005 11:02:23 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO uar.i-hypergrid.com) (194.44.193.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2005 04:02:23 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id D894E1FDE9
	for <java-user@lucene.apache.org>; Fri, 17 Jun 2005 14:01:59 +0300 (EEST)
Message-ID: <42B2ADA7.9070004@i-hypergrid.com>
Date: Fri, 17 Jun 2005 14:01:59 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Performance with multi index
References: <6f3b2429050616010878ce73e1@mail.gmail.com>	 <41850F94-FC92-4270-BBAB-6998673CA7FC@ehatchersolutions.com>	 <6f3b242905061607296b6f181a@mail.gmail.com>	 <6f3b242905061607336fb36f70@mail.gmail.com>	 <42B1906C.2000903@i-hypergrid.com> <6f3b242905061702553d93afcf@mail.gmail.com>
In-Reply-To: <6f3b242905061702553d93afcf@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Each time you close indexWriter ram cached documents are flushed to 
disk. In case you open and close it per document many one-document 
segments are created on disk. 
minMergeDocs sets number of documents that are cached in ram.

JM Tinghir wrote:

>>do you keep your indexWriter open all the time during process?
>>    
>>
>
>I think that might be the real cause. And as it reopen it all the
>time, the mergeFactor isn't used at all I guess...
>I'll try to modify that.
>
>Thanks.
>
>Jean-Marie Tinghir
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 12:31:21 2005
Return-Path: <java-user-return-15004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98153 invoked from network); 17 Jun 2005 12:31:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 12:31:20 -0000
Received: (qmail 50485 invoked by uid 500); 17 Jun 2005 12:31:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50437 invoked by uid 500); 17 Jun 2005 12:31:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50419 invoked by uid 99); 17 Jun 2005 12:31:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2005 05:31:11 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 94F2113E2008; Fri, 17 Jun 2005 08:30:47 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id B7A7A13E2007
	for <java-user@lucene.apache.org>; Fri, 17 Jun 2005 08:30:26 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42B2789D.4040706@xeridia.com>
References: <42B2789D.4040706@xeridia.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <D349A9F0-8783-41C9-B5E9-EBAC808B3CFF@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Wordperfect file parser
Date: Fri, 17 Jun 2005 08:30:46 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 17, 2005, at 3:15 AM, Diego Manilla Su=E1rez wrote:

> Hi, does anyone know if a Wordperfect file (*.wpd) parser exist for =20=

> Java?

The OpenOffice SDK provides this capability (from what I've read).  =20
It's not a pure Java solution, but has a Java API.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 14:48:21 2005
Return-Path: <java-user-return-15005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84569 invoked from network); 17 Jun 2005 14:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 14:48:21 -0000
Received: (qmail 72570 invoked by uid 500); 17 Jun 2005 14:48:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72457 invoked by uid 500); 17 Jun 2005 14:48:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72440 invoked by uid 99); 17 Jun 2005 14:48:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web32212.mail.mud.yahoo.com (HELO web32212.mail.mud.yahoo.com) (68.142.207.143)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Jun 2005 07:48:06 -0700
Received: (qmail 2772 invoked by uid 60001); 17 Jun 2005 14:47:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=MnTxumgw86CKWsQSdbcsiotHov2IhhotRsXFyWW6q3rWCUu0TZtyVU/4DyJWt+Rh7xmVG8rusVfcTACK5AIEbBTfLoQzrTN23+znnm5QpHS8gtAEJidwzEo5oaz5wTlCFh9IU8BZMe5z1Gy+LafF4hlfviZ6NXmRBnwbM0At2pQ=  ;
Message-ID: <20050617144749.2770.qmail@web32212.mail.mud.yahoo.com>
Received: from [12.21.236.10] by web32212.mail.mud.yahoo.com via HTTP; Fri, 17 Jun 2005 07:47:49 PDT
Date: Fri, 17 Jun 2005 07:47:49 -0700 (PDT)
From: Brian <okmred@yahoo.com>
Subject: IndexHTML.java location
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Not sure if this is the right address, to request this
kind of help, so if it isn't please point me else
where.

Basically I think I have an understanding of how
Lucene works, in general.

I believe I'm at a point where I need to change the
"default" url, so I was planning to make the change in
the IndexHTML.java file. However I don't know where
that file is located. I've already done the simple, a
seacrh of my HD, and renaming the files etc... Hasn't
helped. Any pointers would be appreciated.
Thanks, B


		
__________________________________ 
Do you Yahoo!? 
Yahoo! Mail - Helps protect you from nasty viruses. 
http://promotions.yahoo.com/new_mail

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 14:56:43 2005
Return-Path: <java-user-return-15006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88065 invoked from network); 17 Jun 2005 14:56:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 14:56:42 -0000
Received: (qmail 94851 invoked by uid 500); 17 Jun 2005 14:56:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94826 invoked by uid 500); 17 Jun 2005 14:56:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94806 invoked by uid 99); 17 Jun 2005 14:56:29 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from junkyard.uniface.compuware.com (HELO bitbucket.extern.uniface.nl) (212.72.53.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2005 07:56:28 -0700
Received: from cwnl-ams-svc01.nl.compuware.com (unknown [172.16.17.84])
	by bitbucket.extern.uniface.nl (Postfix) with ESMTP id 520602B812
	for <java-user@lucene.apache.org>; Fri, 17 Jun 2005 16:56:09 +0200 (CEST)
Received: by cwnl-ams-svc01.nl.compuware.com with Internet Mail Service (5.5.2657.72)
	id <J54KQ0X5>; Fri, 17 Jun 2005 16:56:09 +0200
Message-ID: <D913221A882FD31198D90008C75D69090DC4720B@cwnl-ams-pri01.nl.compuware.com>
From: "Hondros, Constantine" <Constantine.Hondros@nl.compuware.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: IndexHTML.java location
Date: Fri, 17 Jun 2005 16:54:41 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

IndexHTML.java is located in the demo jarfile which is named differently
depending on whether you built it yourself with Ant or just downloaded it
ready-jarred.

What do you mean by "default URL"? The location of the document-set to
index, the location of the document-set to search (presumably through
index.jsp in the samples), or the URL of the lucene application as seen
through Tomcat?

-----Original Message-----
From: Brian [mailto:okmred@yahoo.com]
Sent: 17 June 2005 16:48
To: java-user@lucene.apache.org
Subject: IndexHTML.java location


Not sure if this is the right address, to request this
kind of help, so if it isn't please point me else
where.

Basically I think I have an understanding of how
Lucene works, in general.

I believe I'm at a point where I need to change the
"default" url, so I was planning to make the change in
the IndexHTML.java file. However I don't know where
that file is located. I've already done the simple, a
seacrh of my HD, and renaming the files etc... Hasn't
helped. Any pointers would be appreciated.
Thanks, B


		
__________________________________ 
Do you Yahoo!? 
Yahoo! Mail - Helps protect you from nasty viruses. 
http://promotions.yahoo.com/new_mail

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


-- 
The contents of this e-mail are intended for the named addressee only. It
contains information that may be confidential. Unless you are the named
addressee or an authorized designee, you may not copy or use it, or disclose
it to anyone else. If you received it in error please notify us immediately
and then destroy it. 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 15:15:47 2005
Return-Path: <java-user-return-15007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99609 invoked from network); 17 Jun 2005 15:15:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 15:15:47 -0000
Received: (qmail 41997 invoked by uid 500); 17 Jun 2005 15:15:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41900 invoked by uid 500); 17 Jun 2005 15:15:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41875 invoked by uid 99); 17 Jun 2005 15:15:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web32215.mail.mud.yahoo.com (HELO web32215.mail.mud.yahoo.com) (68.142.207.146)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Jun 2005 08:15:35 -0700
Received: (qmail 11177 invoked by uid 60001); 17 Jun 2005 15:14:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=LlJiu7eORlzLWypeZFvswpUmpe9Wn/ovTBoIdbaygpyp69p64QXxH79E7pSy1+yQZD5ibbJpTmb0IcjFSrtgQvPWLFefTHiQ0cJohnN9T55W4/eV+i3qljX3XDY9rJD/HzlSCderO4+9FS7rp6ZpF2LIjQfugTZN5AWrO10RFuk=  ;
Message-ID: <20050617151455.11174.qmail@web32215.mail.mud.yahoo.com>
Received: from [12.21.236.10] by web32215.mail.mud.yahoo.com via HTTP; Fri, 17 Jun 2005 08:14:55 PDT
Date: Fri, 17 Jun 2005 08:14:55 -0700 (PDT)
From: Brian <okmred@yahoo.com>
Subject: RE: IndexHTML.java location
To: java-user@lucene.apache.org
In-Reply-To: <D913221A882FD31198D90008C75D69090DC4720B@cwnl-ams-pri01.nl.compuware.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Right Now, I'm just using the compiled version that I
downloaded.
By Default URL, I mean the location of the indexed
files.

I have the sample web project (index.jsp) on server A,
and my indexed files are on server B. Everything works
till I click on the link in the results.jsp page. It
looks one directory higher than where the web project
is. I was hoping to have it look at server B in the
appropriate directory.

Thanks, B

--- "Hondros, Constantine"
<Constantine.Hondros@nl.compuware.com> wrote:

> IndexHTML.java is located in the demo jarfile which
> is named differently
> depending on whether you built it yourself with Ant
> or just downloaded it
> ready-jarred.
> 
> What do you mean by "default URL"? The location of
> the document-set to
> index, the location of the document-set to search
> (presumably through
> index.jsp in the samples), or the URL of the lucene
> application as seen
> through Tomcat?
> 
> -----Original Message-----
> From: Brian [mailto:okmred@yahoo.com]
> Sent: 17 June 2005 16:48
> To: java-user@lucene.apache.org
> Subject: IndexHTML.java location
> 
> 
> Not sure if this is the right address, to request
> this
> kind of help, so if it isn't please point me else
> where.
> 
> Basically I think I have an understanding of how
> Lucene works, in general.
> 
> I believe I'm at a point where I need to change the
> "default" url, so I was planning to make the change
> in
> the IndexHTML.java file. However I don't know where
> that file is located. I've already done the simple,
> a
> seacrh of my HD, and renaming the files etc...
> Hasn't
> helped. Any pointers would be appreciated.
> Thanks, B
> 
> 
> 		
> __________________________________ 
> Do you Yahoo!? 
> Yahoo! Mail - Helps protect you from nasty viruses. 
> http://promotions.yahoo.com/new_mail
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 
> -- 
> The contents of this e-mail are intended for the
> named addressee only. It
> contains information that may be confidential.
> Unless you are the named
> addressee or an authorized designee, you may not
> copy or use it, or disclose
> it to anyone else. If you received it in error
> please notify us immediately
> and then destroy it. 
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 19:28:52 2005
Return-Path: <java-user-return-15008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10299 invoked from network); 17 Jun 2005 19:28:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 19:28:52 -0000
Received: (qmail 82664 invoked by uid 500); 17 Jun 2005 19:28:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82352 invoked by uid 500); 17 Jun 2005 19:28:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82113 invoked by uid 99); 17 Jun 2005 19:28:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.193 as permitted sender)
Received: from zproxy.gmail.com (HELO zproxy.gmail.com) (64.233.162.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2005 12:28:40 -0700
Received: by zproxy.gmail.com with SMTP id 8so847974nzo
        for <java-user@lucene.apache.org>; Fri, 17 Jun 2005 12:28:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:content-type:content-transfer-encoding;
        b=lRDaGrgkve1dYlWrr8kldHe4Zt1FkpZpXWtKj5bJKDY1zI3whRZA7DuYJI5Llw5sF80AUcCRI85wPP58eGl2hH/qmHU/8siU6D724gz9SzptjsHqU8TjlsGx/Hqkl5I/LS/Dfn/uqPUmmegwqtIghROoapoVmJdpK1VRGz0w3Cc=
Received: by 10.36.10.18 with SMTP id 18mr1582034nzj;
        Fri, 17 Jun 2005 12:28:09 -0700 (PDT)
Received: from ?172.22.19.82? ([129.176.197.15])
        by mx.gmail.com with ESMTP id 8sm2730581nzn.2005.06.17.12.28.09;
        Fri, 17 Jun 2005 12:28:09 -0700 (PDT)
Message-ID: <42B32447.9020505@gmail.com>
Date: Fri, 17 Jun 2005 14:28:07 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Search for documents where field does not exist?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm pretty sure the answer is no.. but I'll check with the guru's anyway...

In my collection of documents, I have a non-tokenized field that only 
occurs 0 or 1 time per document.

It is possible to create a query so that a documents would be returned if

(field == "some value" OR field does not exist)

documents would not be returned if
(field == "some other value")


Thanks,

Dan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 19:46:53 2005
Return-Path: <java-user-return-15009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16349 invoked from network); 17 Jun 2005 19:46:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 19:46:52 -0000
Received: (qmail 25499 invoked by uid 500); 17 Jun 2005 19:46:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25467 invoked by uid 500); 17 Jun 2005 19:46:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25453 invoked by uid 99); 17 Jun 2005 19:46:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web50601.mail.yahoo.com (HELO web50601.mail.yahoo.com) (206.190.38.88)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Jun 2005 12:46:45 -0700
Received: (qmail 51657 invoked by uid 60001); 17 Jun 2005 19:46:22 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=zMp2VP2cv8QhHTPI57TBh1n129p7rjqvdCtqM73+E/oZTPVTakNJLfkUKDs5lu2xTS+eKd9hISr/wNWSVcd+87L+fnc67UaKvjQx4WTN5zYMXvk4ti5NZaK4L4tgwpJVPZmhZeyCk1s09ALJxTLuFGZ/5jljwb1egMQrDpauV3w=  ;
Message-ID: <20050617194622.51652.qmail@web50601.mail.yahoo.com>
Received: from [209.172.74.45] by web50601.mail.yahoo.com via HTTP; Fri, 17 Jun 2005 12:46:21 PDT
Date: Fri, 17 Jun 2005 12:46:21 -0700 (PDT)
From: Chris Collins <chris_j_collins@yahoo.com>
Subject: Re: Search for documents where field does not exist?
To: java-user@lucene.apache.org
In-Reply-To: <42B32447.9020505@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I dont believe you can.  What you can do is index a NULL term.  That is, a term
that will not occur naturally in your index.  Then you can do such a search:

field:NULL

This requires you to index NULL when you know the field is going to be empty.

C

--- Dan Armbrust <daniel.armbrust.list@gmail.com> wrote:

> I'm pretty sure the answer is no.. but I'll check with the guru's anyway...
> 
> In my collection of documents, I have a non-tokenized field that only 
> occurs 0 or 1 time per document.
> 
> It is possible to create a query so that a documents would be returned if
> 
> (field == "some value" OR field does not exist)
> 
> documents would not be returned if
> (field == "some other value")
> 
> 
> Thanks,
> 
> Dan
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 20:19:40 2005
Return-Path: <java-user-return-15010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27009 invoked from network); 17 Jun 2005 20:19:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 20:19:40 -0000
Received: (qmail 260 invoked by uid 500); 17 Jun 2005 20:19:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 223 invoked by uid 500); 17 Jun 2005 20:19:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 210 invoked by uid 99); 17 Jun 2005 20:19:35 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.controldocs.com (HELO mail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2005 13:19:32 -0700
Received: from webmail.controldocs.com (localhost [127.0.0.1])
	by mail.controldocs.com (8.12.11/8.12.11) with ESMTP id j5HK5S3h020634
	for <java-user@lucene.apache.org>; Fri, 17 Jun 2005 15:05:28 -0500
Received: from 65.117.150.250
        (SquirrelMail authenticated user tareque);
        by webmail.controldocs.com with HTTP;
        Fri, 17 Jun 2005 15:05:28 -0500 (CDT)
Message-ID: <41598.65.117.150.250.1119038728.squirrel@65.117.150.250>
In-Reply-To: <20050617194622.51652.qmail@web50601.mail.yahoo.com>
References: <42B32447.9020505@gmail.com>
    <20050617194622.51652.qmail@web50601.mail.yahoo.com>
Date: Fri, 17 Jun 2005 15:05:28 -0500 (CDT)
Subject: discrepancy in the number of hits
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3-RC1
X-Mailer: SquirrelMail/1.4.3-RC1
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Scanned-By: MIMEDefang 2.42
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I just installed lucene for full text search,since mysql was too slow at
that. But I see, for same query (e.g. 'information') lucene is returning a
slightly fewer number of documents than mySQL. I checked the docs missing
from the result set and found that those documents actually contain the
word 'information' but lucene is not returning them anyway. Is it a known
issue? Any way around?

Thanks
Tareque


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 20:19:52 2005
Return-Path: <java-user-return-15011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27103 invoked from network); 17 Jun 2005 20:19:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 20:19:52 -0000
Received: (qmail 1409 invoked by uid 500); 17 Jun 2005 20:19:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1384 invoked by uid 500); 17 Jun 2005 20:19:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1371 invoked by uid 99); 17 Jun 2005 20:19:46 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of tareque@controldocs.com designates 65.117.150.145 as permitted sender)
Received: from mail.controldocs.com (HELO mail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2005 13:19:43 -0700
Received: from webmail.controldocs.com (localhost [127.0.0.1])
	by mail.controldocs.com (8.12.11/8.12.11) with ESMTP id j5HK4xXP020621
	for <java-user@lucene.apache.org>; Fri, 17 Jun 2005 15:05:00 -0500
Received: from 65.117.150.250
        (SquirrelMail authenticated user tareque);
        by webmail.controldocs.com with HTTP;
        Fri, 17 Jun 2005 15:05:00 -0500 (CDT)
Message-ID: <41595.65.117.150.250.1119038700.squirrel@65.117.150.250>
In-Reply-To: <20050617194622.51652.qmail@web50601.mail.yahoo.com>
References: <42B32447.9020505@gmail.com>
    <20050617194622.51652.qmail@web50601.mail.yahoo.com>
Date: Fri, 17 Jun 2005 15:05:00 -0500 (CDT)
Subject: Re: Search for documents where field does not exist?
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3-RC1
X-Mailer: SquirrelMail/1.4.3-RC1
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Scanned-By: MIMEDefang 2.42
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I just installed lucene for full text search,since mysql was too slow at
that. But I see, for same query (e.g. 'information') lucene is returning a
slightly fewer number of documents than mySQL. I checked the docs missing
from the result set and found that those documents actually contain the
word 'information' but lucene is not returning them anyway. Is it a known
issue? Any way around?

Thanks
Tareque


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 20:29:19 2005
Return-Path: <java-user-return-15012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29876 invoked from network); 17 Jun 2005 20:29:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 20:29:19 -0000
Received: (qmail 27855 invoked by uid 500); 17 Jun 2005 20:29:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27829 invoked by uid 500); 17 Jun 2005 20:29:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27815 invoked by uid 99); 17 Jun 2005 20:29:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31109.mail.mud.yahoo.com (HELO web31109.mail.mud.yahoo.com) (68.142.200.42)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Jun 2005 13:29:10 -0700
Received: (qmail 12543 invoked by uid 60001); 17 Jun 2005 20:28:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=x0CQSmLEMMfY6Ib2Rz1LiHfngZImyOLnQCttLlrnEwv7fXOf2X1oNYnWB/3CTyPDaR1Nr9Ai2ni2WF8lE/low/WOa5k56JTDDl//bBlNKC0SD4M8RB+ewVWDXibNK1QKGJz+k5p0s/cNhOox2zWXSG3G6ykbWt01Otc5Xm1Jfm8=  ;
Message-ID: <20050617202832.12541.qmail@web31109.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31109.mail.mud.yahoo.com via HTTP; Fri, 17 Jun 2005 13:28:32 PDT
Date: Fri, 17 Jun 2005 13:28:32 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Search for documents where field does not exist?
To: java-user@lucene.apache.org
In-Reply-To: <41595.65.117.150.250.1119038700.squirrel@65.117.150.250>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Are the missing documents relatively long?
If so, check this:
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.html#maxFieldLength

Otis


--- tareque@controldocs.com wrote:

> I just installed lucene for full text search,since mysql was too slow
> at
> that. But I see, for same query (e.g. 'information') lucene is
> returning a
> slightly fewer number of documents than mySQL. I checked the docs
> missing
> from the result set and found that those documents actually contain
> the
> word 'information' but lucene is not returning them anyway. Is it a
> known
> issue? Any way around?
> 
> Thanks
> Tareque
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 20:59:55 2005
Return-Path: <java-user-return-15013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37561 invoked from network); 17 Jun 2005 20:59:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 20:59:55 -0000
Received: (qmail 95645 invoked by uid 500); 17 Jun 2005 20:59:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95615 invoked by uid 500); 17 Jun 2005 20:59:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95595 invoked by uid 99); 17 Jun 2005 20:59:50 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2005 13:59:50 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id B9A75E47D4
	for <java-user@lucene.apache.org>; Fri, 17 Jun 2005 22:27:32 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 94004E47C9
	for <java-user@lucene.apache.org>; Fri, 17 Jun 2005 22:27:32 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
Content-Transfer-Encoding: 7bit
Message-Id: <fc91a2d481488f2ae639ac7e8db6c9a6@activemath.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: java-user@lucene.apache.org
From: Paul Libbrecht <paul@activemath.org>
Subject: About the field of PhraseQuery
Date: Fri, 17 Jun 2005 22:27:31 +0200
X-Mailer: Apple Mail (2.622)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi,

I spent an hour today to make my field-name feed correctly into my 
phrase-query. A ridiculous bug of mine. Debugging experience seemed to 
indicate that the field was the field of the first term sent.

But it struck me that the word field simply does not appear in the 
javadoc of PhraseQuery (only as javadoc field!) whereas I would feel it 
much more natural than a PhraseQuery be constructed or set to a 
field-name than that it would take Terms instead of tokens...

Or is there something I did not understand ?
PhraseQuery certainly does not match several fields simultaneously, or ?

paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 21:21:44 2005
Return-Path: <java-user-return-15014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65795 invoked from network); 17 Jun 2005 21:21:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 21:21:44 -0000
Received: (qmail 51371 invoked by uid 500); 17 Jun 2005 21:21:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51345 invoked by uid 500); 17 Jun 2005 21:21:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51331 invoked by uid 99); 17 Jun 2005 21:21:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lucenelist@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from smtprelay02.ispgateway.de (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2005 14:21:33 -0700
Received: (qmail 26119 invoked from network); 17 Jun 2005 21:21:08 -0000
Received: from unknown (HELO p54965E56.dip.t-dialin.net) ([pbs]695637@[84.150.94.86])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 17 Jun 2005 21:21:08 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Search for documents where field does not exist?
Date: Fri, 17 Jun 2005 23:22:44 +0200
User-Agent: KMail/1.8
References: <42B32447.9020505@gmail.com> <20050617194622.51652.qmail@web50601.mail.yahoo.com> <41595.65.117.150.250.1119038700.squirrel@65.117.150.250>
In-Reply-To: <41595.65.117.150.250.1119038700.squirrel@65.117.150.250>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506172322.44863@danielnaber.de>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 17 June 2005 22:05, tareque@controldocs.com wrote:

>  I checked the docs missing
> from the result set and found that those documents actually contain the
> word 'information' but lucene is not returning them anyway. Is it a
> known issue? Any way around?

See
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.html#maxFieldLength

Please do not reply to a post on the list if your message actually isn't a 
reply. Post a new message instead.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 17 21:55:37 2005
Return-Path: <java-user-return-15015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79590 invoked from network); 17 Jun 2005 21:55:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jun 2005 21:55:37 -0000
Received: (qmail 26413 invoked by uid 500); 17 Jun 2005 21:55:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26380 invoked by uid 500); 17 Jun 2005 21:55:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26362 invoked by uid 99); 17 Jun 2005 21:55:23 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.controldocs.com (HELO mail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jun 2005 14:55:22 -0700
Received: from webmail.controldocs.com (localhost [127.0.0.1])
	by mail.controldocs.com (8.12.11/8.12.11) with ESMTP id j5HLsoMl021673
	for <java-user@lucene.apache.org>; Fri, 17 Jun 2005 16:54:51 -0500
Received: from 65.117.150.250
        (SquirrelMail authenticated user tareque);
        by webmail.controldocs.com with HTTP;
        Fri, 17 Jun 2005 16:54:51 -0500 (CDT)
Message-ID: <43752.65.117.150.250.1119045291.squirrel@65.117.150.250>
In-Reply-To: <200506172322.44863@danielnaber.de>
References: <42B32447.9020505@gmail.com>
    <20050617194622.51652.qmail@web50601.mail.yahoo.com>
    <41595.65.117.150.250.1119038700.squirrel@65.117.150.250>
    <200506172322.44863@danielnaber.de>
Date: Fri, 17 Jun 2005 16:54:51 -0500 (CDT)
Subject: Re: Search for documents where field does not exist?
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3-RC1
X-Mailer: SquirrelMail/1.4.3-RC1
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Scanned-By: MIMEDefang 2.42
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> On Friday 17 June 2005 22:05, tareque@controldocs.com wrote:
>
>>  I checked the docs missing
>> from the result set and found that those documents actually contain the
>> word 'information' but lucene is not returning them anyway. Is it a
>> known issue? Any way around?
>
> See
> http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.html#maxFieldLength

thanks!

>
> Please do not reply to a post on the list if your message actually isn't a
> reply. Post a new message instead.

Sorry about that.. wasn't intentional.. clicked reply to get the reply
address and then forgot to change the subject :)

>
> Regards
>  Daniel
>
> --
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 18 07:44:46 2005
Return-Path: <java-user-return-15016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22403 invoked from network); 18 Jun 2005 07:44:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jun 2005 07:44:45 -0000
Received: (qmail 21899 invoked by uid 500); 18 Jun 2005 07:44:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21867 invoked by uid 500); 18 Jun 2005 07:44:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21853 invoked by uid 99); 18 Jun 2005 07:44:40 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr11.xs4all.nl (HELO smtp-vbr11.xs4all.nl) (194.109.24.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Jun 2005 00:44:38 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr11.xs4all.nl (8.13.3/8.13.3) with ESMTP id j5I7i3eT055309
	for <java-user@lucene.apache.org>; Sat, 18 Jun 2005 09:44:03 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: About the field of PhraseQuery
Date: Sat, 18 Jun 2005 09:44:02 +0200
User-Agent: KMail/1.5.4
References: <fc91a2d481488f2ae639ac7e8db6c9a6@activemath.org>
In-Reply-To: <fc91a2d481488f2ae639ac7e8db6c9a6@activemath.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506180944.02812.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 17 June 2005 22:27, Paul Libbrecht wrote:
> hi,
> 
> I spent an hour today to make my field-name feed correctly into my 
> phrase-query. A ridiculous bug of mine. Debugging experience seemed to 
> indicate that the field was the field of the first term sent.
> 
> But it struck me that the word field simply does not appear in the 
> javadoc of PhraseQuery (only as javadoc field!) whereas I would feel it 
> much more natural than a PhraseQuery be constructed or set to a 
> field-name than that it would take Terms instead of tokens...
> 
> Or is there something I did not understand ?
> PhraseQuery certainly does not match several fields simultaneously, or ?

It will throw an IllegalArgumentException when a Term is added
with a different field, which is probably what happened.

For PhraseQuery the field name and the term text could have been
used separately in the interface, which might have prevented your bug.
For example an alternative PhraseQuery could have constructor with a
field name argument, and term texts could be added at phrase positions.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 18 11:22:47 2005
Return-Path: <java-user-return-15017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88372 invoked from network); 18 Jun 2005 11:22:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jun 2005 11:22:47 -0000
Received: (qmail 33542 invoked by uid 500); 18 Jun 2005 11:22:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33464 invoked by uid 500); 18 Jun 2005 11:22:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33450 invoked by uid 99); 18 Jun 2005 11:22:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Jun 2005 04:22:37 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D295413E2005; Sat, 18 Jun 2005 07:01:07 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 3080B13E2005
	for <java-user@lucene.apache.org>; Sat, 18 Jun 2005 06:59:48 -0400 (EDT)
In-Reply-To: <43752.65.117.150.250.1119045291.squirrel@65.117.150.250>
References: <42B32447.9020505@gmail.com> <20050617194622.51652.qmail@web50601.mail.yahoo.com> <41595.65.117.150.250.1119038700.squirrel@65.117.150.250> <200506172322.44863@danielnaber.de> <43752.65.117.150.250.1119045291.squirrel@65.117.150.250>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FDA21B57-2240-4394-B4F6-CEC964389C92@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Search for documents where field does not exist?
Date: Sat, 18 Jun 2005 07:00:08 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 17, 2005, at 5:54 PM, tareque@controldocs.com wrote:
>> Please do not reply to a post on the list if your message actually  
>> isn't a
>> reply. Post a new message instead.
>>
>
> Sorry about that.. wasn't intentional.. clicked reply to get the reply
> address and then forgot to change the subject :)

Even changing the subject after doing a "reply" is not sufficient as  
it will still end up in the same thread erroneously.  You need to  
create a new message to start a new thread.  (certainly this varies  
by mail client, though)

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 19 09:22:02 2005
Return-Path: <java-user-return-15018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15102 invoked from network); 19 Jun 2005 09:22:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2005 09:22:02 -0000
Received: (qmail 78789 invoked by uid 500); 19 Jun 2005 09:21:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78740 invoked by uid 500); 19 Jun 2005 09:21:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78705 invoked by uid 99); 19 Jun 2005 09:21:55 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=NO_REAL_NAME,PRIORITY_NO_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from bounce-software.com (HELO bounce-software.com) (82.76.107.31)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 19 Jun 2005 02:21:55 -0700
Received: (qmail 1430 invoked by uid 204); 19 Jun 2005 09:21:35 -0000
X-Virus-Scan: Scanned by clamdmail(Bounce Software patch, clamav) on bounce-software.com (no viruses);
  Sun, 19 Jun 2005 12:21:35 +0300
Received: from dazoot.intranet.bounce-software.com (192.168.100.2)
  by bounce-software.com with SMTP; 19 Jun 2005 09:21:35 -0000
Date: Sun, 19 Jun 2005 12:17:13 +0300
From: catalin-lucene@dazoot.ro
Reply-To: Catalin Constantin <catalin@bounce-software.com>
Organization: Bounce Software
X-Priority: 3 (Normal)
Message-ID: <1779000970.20050619121713@bounce-software.com>
To: java-user@lucene.apache.org
Subject: md5 keyword field issue
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Spam-Rating: bounce-software.com 1.6.2 0/600/N
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi there,

i have an index with the following infos in it:
url - keyword - Field("url", this.url, Field.Store.YES, Field.Index.UN_TOKENIZED);
md5 - keyword - Field("md5", this.url, Field.Store.YES, Field.Index.UN_TOKENIZED);
alt - Field("alt", this.alt, Field.Store.YES, Field.Index.TOKENIZED);

i use it to index my images.
now it happens that the same image (eg: same md5) is used in different
locations (eg: different urls).
filename: mylogo.gif used in
http://site.com/project1/mylogo.gif and also
http://site.com/project2/some_other_bubu/mylogo.gif

the ALT is different (eg: different text)

now on my image search app when i search mylogo i get "several"
results with the same image.

i would like to reduce the nr of results in that way that the md5 is
unique.
Note: i can't delete from the index the 2nd image cause the ALT might
be different, so in general all the properties put together (md5, url,
alt) compose a different "entity".


i bought "Lucene in Action" book, which is a GREAT book.
i was looking into "filters".

i quote: "If all the information needed to perform filtering is in the
index, there is no need to write your own filter because QueryFilter
can handle it."

i can't seem to figure it out, how query filter can help me.

also tried to write my own filter but not that much info on that
direction either.


any info, links, thoughts, would be highly appreciated !

-- 
Catalin Constantin
http://www.dazoot.ro/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 19 21:54:21 2005
Return-Path: <java-user-return-15019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88607 invoked from network); 19 Jun 2005 21:54:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2005 21:54:21 -0000
Received: (qmail 72643 invoked by uid 500); 19 Jun 2005 21:54:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72619 invoked by uid 500); 19 Jun 2005 21:54:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 69628 invoked by uid 99); 18 Jun 2005 23:39:33 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Mime-Version: 1.0 (Apple Message framework v622)
Content-Transfer-Encoding: 7bit
Message-Id: <a99821206864725ee0186f6f9062108f@activemath.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: java-user@lucene.apache.org
From: Paul Libbrecht <paul.libbrecht@activemath.org>
Subject: Lucene scoring bounds ??
Date: Sun, 19 Jun 2005 01:39:10 +0200
X-Mailer: Apple Mail (2.622)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

I read the lucene-book about scoring and read a bit of the javadoc but 
I can't seem to find somewhere expectations of the bouds for the score 
value.
I had believe the score would end up between 0 and 1 but I seem to keep 
having values under 0.2. It may be due to my special requests but... 
how can I be sure of this ?

thanks

paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 19 23:02:18 2005
Return-Path: <java-user-return-15020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 712 invoked from network); 19 Jun 2005 23:02:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jun 2005 23:02:18 -0000
Received: (qmail 62329 invoked by uid 500); 19 Jun 2005 23:02:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62303 invoked by uid 500); 19 Jun 2005 23:02:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62287 invoked by uid 99); 19 Jun 2005 23:02:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from sccrmhc13.comcast.net (HELO sccrmhc13.comcast.net) (204.127.202.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2005 16:02:09 -0700
Received: from jma (c-67-165-8-214.hsd1.ct.comcast.net[67.165.8.214])
          by comcast.net (sccrmhc13) with SMTP
          id <20050619230150016000ps87e>; Sun, 19 Jun 2005 23:01:50 +0000
From: "Joseph MarkAnthony" <mrjama@comcast.net>
To: <java-user@lucene.apache.org>
Subject: Problems with concurrency using Tomcat
Date: Sun, 19 Jun 2005 19:05:06 -0400
Message-ID: <000001c57523$56199730$54e11dbf@jma>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook CWS, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <DEC86E90-5FE8-4242-8A94-6953341488E4@ehatchersolutions.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I have been struggling with this problem for months and have made no
progress.
I have created a simple web app for my Lucene indices that allow the user to
rebuild or update the index.
In the *same* web app (perhaps this is important), I have the search module.

The update module works fine - until someone tries a search.  Then the
update will no longer be allowed to access the index directory.  The error
is somethign like "cannot delete _a.cfs" or somethign similar.

I'm running Tomcat on Win2000, and I've pretty much confirmed that it's a
WINDOWS locking problem, not a lucene problem per se.  This is the windows
"Cannot delete, File may be in use" situation that you may often get if
someone else if using a file and you try to delete it.  You see this
situation many times outside of Lucene.

Does anyone know how to solve this?  It seems to be a Tomcat problem because
I cannot duplicate the error in a standalone Java app.  I've seen a few
posts on this and the resolution is often to copy the index and then update,
then copy it back.  This can't be the only way to fix this.

Any thoughts?

Thanks,
Joe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 06:58:26 2005
Return-Path: <java-user-return-15021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16852 invoked from network); 20 Jun 2005 06:58:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 06:58:26 -0000
Received: (qmail 98255 invoked by uid 500); 20 Jun 2005 06:58:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98086 invoked by uid 500); 20 Jun 2005 06:58:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97785 invoked by uid 99); 20 Jun 2005 06:58:13 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from corp-206.dfki.uni-sb.de (HELO mail.dfki.de) (134.96.188.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jun 2005 23:58:13 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 155C3E47CD
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 08:57:56 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 01B40E47CC
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 08:57:56 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <200506180944.02812.paul.elschot@xs4all.nl>
References: <fc91a2d481488f2ae639ac7e8db6c9a6@activemath.org> <200506180944.02812.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <3e451aa97cc50a213b01b8ab35afa811@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: About the field of PhraseQuery
Date: Mon, 20 Jun 2005 08:57:53 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

So why is there no such constructor
  PhraseQuery(String fieldName)
and a method
   add(Token tok)
??
That would be much more intuitive I feel!

paul


Le 18 juin 05, =E0 09:44, Paul Elschot a =E9crit :

> It will throw an IllegalArgumentException when a Term is added
> with a different field, which is probably what happened.
>
> For PhraseQuery the field name and the term text could have been
> used separately in the interface, which might have prevented your bug.
> For example an alternative PhraseQuery could have constructor with a
> field name argument, and term texts could be added at phrase =
positions.=


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 07:33:42 2005
Return-Path: <java-user-return-15022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55482 invoked from network); 20 Jun 2005 07:33:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 07:33:41 -0000
Received: (qmail 57830 invoked by uid 500); 20 Jun 2005 07:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57804 invoked by uid 500); 20 Jun 2005 07:33:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57791 invoked by uid 99); 20 Jun 2005 07:33:35 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 66-7-233-83.scalix.com (HELO hagrid.scalix.local) (66.7.233.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 00:33:33 -0700
Received: from hagrid.scalix.local (localhost.localdomain [127.0.0.1])
	by hagrid.scalix.local (8.12.11/8.12.11) with ESMTP id j5K7XDo0020860
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 00:33:13 -0700
Received: from hagrid.scalix.local (root@localhost)
	by hagrid.scalix.local (8.12.11/8.12.11/Submit) with ESMTP id j5K7XDsn020858
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 00:33:13 -0700
Received: from [192.168.0.22] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 9.2.1.30)
    via ESMTP; Mon, 20 Jun 2005 08:33:11 +0100 (BST)
Date: Mon, 20 Jun 2005 08:33:10 +0100
From: John Haxby <jch@scalix.com>
Sender: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <42B67136.1080402@scalix.com>
In-Reply-To: <FDA21B57-2240-4394-B4F6-CEC964389C92@ehatchersolutions.com>
References: <42B32447.9020505@gmail.com>
References: <20050617194622.51652.qmail@web50601.mail.yahoo.com>
References: <41595.65.117.150.250.1119038700.squirrel@65.117.150.250>
References: <200506172322.44863@danielnaber.de>
References: <43752.65.117.150.250.1119045291.squirrel@65.117.150.250>
References: <FDA21B57-2240-4394-B4F6-CEC964389C92@ehatchersolutions.com>
Subject: Re: Search for documents where field does not exist?
x-scalix-Hops: 3
User-Agent: Mozilla Thunderbird  (X11/20050322)
X-Accept-Language: en-us, en
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1";
	format="flowed"
Content-Disposition: inline
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

>
> On Jun 17, 2005, at 5:54 PM, tareque@controldocs.com wrote:
>
>>> Please do not reply to a post on the list if your message actually  
>>> isn't a
>>> reply. Post a new message instead.
>>>
>>
>> Sorry about that.. wasn't intentional.. clicked reply to get the reply
>> address and then forgot to change the subject :)
>
>
> Even changing the subject after doing a "reply" is not sufficient as  
> it will still end up in the same thread erroneously.  You need to  
> create a new message to start a new thread.  (certainly this varies  
> by mail client, though)

The reason for this is that when you reply to a message you get an 
"in-reply-to" header that refers to the message-id of the original 
header; you may also get a "references" header that performs a similar 
function for other message in the thread.   I haven't come across a mail 
client  that drops the in-reply-to when you change the subject.

If you want to find out exactly what your particular mail client does; 
reply to a message of your own and then look at the message source or 
the original message headers (what you're looking for depends on the 
client, sometimes it's obvious, sometimes its hidden in message properties.)

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 07:44:20 2005
Return-Path: <java-user-return-15023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57684 invoked from network); 20 Jun 2005 07:44:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 07:44:20 -0000
Received: (qmail 73856 invoked by uid 500); 20 Jun 2005 07:44:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73835 invoked by uid 500); 20 Jun 2005 07:44:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73822 invoked by uid 99); 20 Jun 2005 07:44:14 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ip3e83f5aa.speed.planet.nl (HELO mokolo.com) (62.131.245.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 00:44:14 -0700
Received: by mokolo.com (Postfix, from userid 500)
	id E79945563D; Mon, 20 Jun 2005 09:16:29 +0200 (CEST)
Date: Mon, 20 Jun 2005 09:16:29 +0200
From: Fred Vos <fred@fredvos.org>
To: java-user@lucene.apache.org
Subject: Re: Problems with concurrency using Tomcat
Message-ID: <20050620071629.GG11299@mopti.mokolo>
References: <DEC86E90-5FE8-4242-8A94-6953341488E4@ehatchersolutions.com> <000001c57523$56199730$54e11dbf@jma>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <000001c57523$56199730$54e11dbf@jma>
X-PGP-Key-ID: 0xF12F6072
User-Agent: Mutt/1.5.6i
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sun, Jun 19, 2005 at 07:05:06PM -0400, Joseph MarkAnthony wrote:
> 
> I have been struggling with this problem for months and have made no
> progress.
> I have created a simple web app for my Lucene indices that allow the user to
> rebuild or update the index.
> In the *same* web app (perhaps this is important), I have the search module.
> 
> The update module works fine - until someone tries a search.  Then the
> update will no longer be allowed to access the index directory.  The error
> is somethign like "cannot delete _a.cfs" or somethign similar.
> 
> I'm running Tomcat on Win2000, and I've pretty much confirmed that it's a
> WINDOWS locking problem, not a lucene problem per se.  This is the windows
> "Cannot delete, File may be in use" situation that you may often get if
> someone else if using a file and you try to delete it.  You see this
> situation many times outside of Lucene.
> 
> Does anyone know how to solve this?  It seems to be a Tomcat problem because
> I cannot duplicate the error in a standalone Java app.  I've seen a few
> posts on this and the resolution is often to copy the index and then update,
> then copy it back.  This can't be the only way to fix this.

Have you tried to add the -DdisableLuceneLocks=true flag to the RUNJAVA
command of catalina.sh? I had to add it to run servlets accessing lucene, but
I'm not sure what my problem was.

Lines 219-227 of my catalina.sh (running jakarta tomcat 5.0.16 under linux):

  else
    "$_RUNJAVA" $JAVA_OPTS $CATALINA_OPTS \
      -Djava.endorsed.dirs="$JAVA_ENDORSED_DIRS" -classpath "$CLASSPATH" \
      -Dcatalina.base="$CATALINA_BASE" \
      -Dcatalina.home="$CATALINA_HOME" \
      -Djava.io.tmpdir="$CATALINA_TMPDIR" \
      -DdisableLuceneLocks=true \
      org.apache.catalina.startup.Bootstrap "$@" start \
      >> "$CATALINA_BASE"/logs/catalina.out 2>&1 &

Fred

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 08:18:58 2005
Return-Path: <java-user-return-15024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71059 invoked from network); 20 Jun 2005 08:18:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 08:18:58 -0000
Received: (qmail 31829 invoked by uid 500); 20 Jun 2005 08:18:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31801 invoked by uid 500); 20 Jun 2005 08:18:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31788 invoked by uid 99); 20 Jun 2005 08:18:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from smtp5.wanadoo.fr (HELO smtp5.wanadoo.fr) (193.252.22.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 01:18:50 -0700
Received: from smtp5.wanadoo.fr (mwinf0501 [172.22.136.23])
	by mwinf0505.wanadoo.fr (SMTP Server) with ESMTP id 2F33674044BA
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 10:18:28 +0200 (CEST)
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf0501.wanadoo.fr (SMTP Server) with ESMTP id 1CB3B1C000EC
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 10:18:18 +0200 (CEST)
Received: from riguel (LNeuilly-152-22-15-32.w82-127.abo.wanadoo.fr [82.127.94.32])
	by mwinf0501.wanadoo.fr (SMTP Server) with ESMTP id DC3111C000C0
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 10:18:17 +0200 (CEST)
X-ME-UUID: 20050620081817902.DC3111C000C0@mwinf0501.wanadoo.fr
Received: from actarus.spotk.net ([192.168.100.55])
	by riguel with esmtp (Exim 4.50)
	id 1DkHU0-0000Ef-G6
	for java-user@lucene.apache.org; Mon, 20 Jun 2005 10:18:17 +0200
Message-ID: <42B67BC7.8040604@spotk.net>
Date: Mon, 20 Jun 2005 10:18:15 +0200
From: Xavier Lembo <xav@spotk.net>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: fr, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
X-Enigmail-Version: 0.89.5.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-SA-Exim-Connect-IP: 192.168.100.55
X-SA-Exim-Mail-From: xav@spotk.net
Subject: tried to access field org.apache.lucene.analysis.Token.termText from
 class org.apache.lucene.analysis.StopFilter
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on riguel
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on riguel)
X-Old-Spam-Status: No, score=-2.8 required=5.0 tests=ALL_TRUSTED,AWL 
	autolearn=disabled version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi list,

i'm facing an exception that i don't understand when trying to index a
source with the StandardAlayzer

everything works fine when i use my french AnalyserFr() , but exception
is raised when using the StandardAnalyzer

Can somebody help me find the cause of this error because i really have
no idea where to search to solve this problem?

Thanks

Xavier


------------------------------------------------------------
here is the exception:

java.lang.IllegalAccessError: tried to access field
org.apache.lucene.analysis.Token.termText from class
org.apache.lucene.analysis.StopFilter
at org.apache.lucene.analysis.StopFilter.next(StopFilter.java:99)
at
org.apache.lucene.index.DocumentWriter.invertDocument(DocumentWriter.java:155)
at
org.apache.lucene.index.DocumentWriter.addDocument(DocumentWriter.java:84)
at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:410)
at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:396)
at org.elix.indexer.VeilleIndexer.newIndexVeille(Unknown Source)

and here is the code i use to index my document:

------------------------------------------------------------
if (langage.equals("fr")){
	analyzer = new AnalyserFr();
	logger.debug("Indexation de la veille en utilisant les stemmers FR ");
   }
else {
	analyzer =	new StandardAnalyzer();
	logger.debug("Indexation de la veille en utilisant le stemmers EN
Standard ");
}

IndexWriter writer = null;
try {
	writer = new IndexWriter(indexPath, analyzer, createIndex);
				logger.info("Ajout de la veille: " + 						rs.getString("titre"));
			
//On recupere le champ content du document arriv pour y ajouter un boost
Field content = doc.getField("sourcecontent");
content.setBoost(bcontent);
				
// on ajoute les colonnes utilises au document lucene en detachant la
construction
//des champs afin de pouvoir leur assigner un boost

Field ftitre = Field.Text("titre",titre);
ftitre.setBoost(btitre);
Field fresume= Field.Text("resume", resume);
fresume.setBoost(bresume);
Field fdetail= Field.Text("detail", detail);
				
Field fkeywords = Field.Keyword("keywords", keywords);
fkeywords.setBoost(bkeywords);
				
doc.add(Field.Keyword("veille_id", id));
doc.add(Field.Keyword("theme_id", theme_id));
doc.add(Field.Keyword("themeLeft", Functions.padString(themeLeft, "0", 6)));
doc.add(Field.Keyword("secteur_id", secteur_id));
doc.add(Field.Keyword("secteurLeft", Functions.padString(secteurLeft,
"0", 6)));
doc.add(fkeywords);
doc.add(Field.Keyword("indexDate", new Date()));
doc.add(ftitre);
doc.add(fresume);
doc.add(fdetail);

				
//Ajout d'un champ contenant tous les textes
doc.add(Field.UnStored("allcontent", fkeywords + " " + ftitre + " " +
fresume +  " " + fdetail +  " " + content));

// On ajoute notre document a l'index
writer.addDocument(doc);
writer.optimize();
writer.close();

}  catch(Exception ee){
	throw ee;
}
finally{
	 writer.close();
}
--------------------------------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 12:39:46 2005
Return-Path: <java-user-return-15025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12454 invoked from network); 20 Jun 2005 12:39:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 12:39:46 -0000
Received: (qmail 31895 invoked by uid 500); 20 Jun 2005 12:39:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31855 invoked by uid 500); 20 Jun 2005 12:39:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31834 invoked by uid 99); 20 Jun 2005 12:39:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from web86901.mail.ukl.yahoo.com (HELO web86901.mail.ukl.yahoo.com) (217.12.13.53)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Jun 2005 05:39:32 -0700
Received: (qmail 17128 invoked by uid 60001); 20 Jun 2005 12:39:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=OKeF/s5VIRbg87dsjrT0rkLQKEMOZhb544iIx8ou1OyYSOVSwM4YYB2B0VhPpegjvo/ZUwEBgDf5m/t8W0FbrS9LlTis+0cul+56FqJHcFe6ZenZ0owHhDi55r3ugHWAoVFtUEywzR0fo08ATbvf5gUryOIFPf/Fx1nNdhBz2r0=  ;
Message-ID: <20050620123907.17126.qmail@web86901.mail.ukl.yahoo.com>
Received: from [84.131.250.75] by web86901.mail.ukl.yahoo.com via HTTP; Mon, 20 Jun 2005 13:39:07 BST
Date: Mon, 20 Jun 2005 13:39:07 +0100 (BST)
From: eks dev <eksdev@yahoo.co.uk>
Subject: RAMDirectory without positions or frequencies?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I have a need for minimum memory footprint of the
index during search (would like to have it in RAM).
Good thing in the story, similarity calculation is not
necessary, only pure boolean model is OK. 
I am sure I have seen somewhere one explanation from
Doug about disabling norms... but cannot find it now.
Could I implement my Similarity where all, idf, tf, 
coord, lengthnorm return constant value... WIll this
disable loading of norms/positions/freqs in memory
during search? Also, if I use RAMDirectory in this
case (loading from FSDirectory) will these elements be
loaded in RAM?

Better expressed: If one needs only boolean model (no
score calculation needed), what shouls I do to
minimize memory usage and optimize speed. 
My collection has a lot of very short documents (a
couple tokens per field), 5-7 fields,  (approx 20Mio).
Indexing is not critical. Memory in runtime is just
about to fit in RAM.


thanks in advance, eksdev



		
___________________________________________________________ 
How much free photo storage do you get? Store your holiday 
snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 12:49:39 2005
Return-Path: <java-user-return-15026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15415 invoked from network); 20 Jun 2005 12:49:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 12:49:39 -0000
Received: (qmail 48233 invoked by uid 500); 20 Jun 2005 12:49:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48209 invoked by uid 500); 20 Jun 2005 12:49:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48196 invoked by uid 99); 20 Jun 2005 12:49:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 05:49:32 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 98D0413E2006; Mon, 20 Jun 2005 08:49:13 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id C62B113E2005
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 08:48:58 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <a99821206864725ee0186f6f9062108f@activemath.org>
References: <a99821206864725ee0186f6f9062108f@activemath.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FDEC8750-344B-4EBA-BA1A-484500CA32E7@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucene scoring bounds ??
Date: Mon, 20 Jun 2005 08:49:20 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 18, 2005, at 7:39 PM, Paul Libbrecht wrote:
> I read the lucene-book about scoring and read a bit of the javadoc  
> but I can't seem to find somewhere expectations of the bouds for  
> the score value.
> I had believe the score would end up between 0 and 1 but I seem to  
> keep having values under 0.2. It may be due to my special requests  
> but... how can I be sure of this ?

Hits from all non-HitCollector searches are "normalized".  Normalized  
in this sense means that if the top-scoring document scores higher  
than 1.0 it is normalized to 1.0 and that ratio is used to normalize  
all scores.  However, if the top-scoring document is under 1.0, the  
scores are left as-is.

Searches using a HitCollector are always left as-is.

Have a look at IndexSearcher.explain() results for document/query  
combinations to see what is causing the lower than expected scores.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 13:22:48 2005
Return-Path: <java-user-return-15027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48911 invoked from network); 20 Jun 2005 13:22:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 13:22:38 -0000
Received: (qmail 19202 invoked by uid 500); 20 Jun 2005 13:22:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19094 invoked by uid 500); 20 Jun 2005 13:22:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19061 invoked by uid 99); 20 Jun 2005 13:22:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 06:22:28 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C4CA413E2006; Mon, 20 Jun 2005 08:55:37 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 1190013E2005
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 08:55:12 -0400 (EDT)
In-Reply-To: <1779000970.20050619121713@bounce-software.com>
References: <1779000970.20050619121713@bounce-software.com>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4B838408-68D6-4675-8BAD-5AE64018D490@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: md5 keyword field issue
Date: Mon, 20 Jun 2005 08:55:36 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 19, 2005, at 5:17 AM, catalin-lucene@dazoot.ro wrote:

> Hi there,
>
> i have an index with the following infos in it:
> url - keyword - Field("url", this.url, Field.Store.YES,  
> Field.Index.UN_TOKENIZED);
> md5 - keyword - Field("md5", this.url, Field.Store.YES,  
> Field.Index.UN_TOKENIZED);
> alt - Field("alt", this.alt, Field.Store.YES, Field.Index.TOKENIZED);
>
> i use it to index my images.
> now it happens that the same image (eg: same md5) is used in different
> locations (eg: different urls).
> filename: mylogo.gif used in
> http://site.com/project1/mylogo.gif and also
> http://site.com/project2/some_other_bubu/mylogo.gif
>
> the ALT is different (eg: different text)
>
> now on my image search app when i search mylogo i get "several"
> results with the same image.
>
> i would like to reduce the nr of results in that way that the md5 is
> unique.
> Note: i can't delete from the index the 2nd image cause the ALT might
> be different, so in general all the properties put together (md5, url,
> alt) compose a different "entity".


It seems you have conflicting goals here.  You want (md5, url, alt)  
to be unique in one sense, yet you want md5 itself to be unique in  
another sense.

> i bought "Lucene in Action" book, which is a GREAT book.

Thank you!  :)

> i was looking into "filters".
>
> i quote: "If all the information needed to perform filtering is in the
> index, there is no need to write your own filter because QueryFilter
> can handle it."
>
> i can't seem to figure it out, how query filter can help me.
>
> also tried to write my own filter but not that much info on that
> direction either.

Filters reduce the search space to a subset of the documents in the  
index.  Which document would you want returned when there are  
multiple documents in the index with the same MD5?  Or do you want to  
cluster them by MD5?

Do you want to cluster them by MD5 perhaps, but still return multiple  
documents back from a search?

I'm not sure if a Filter is the appropriate technique for this  
scenario or not.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 13:43:26 2005
Return-Path: <java-user-return-15028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58185 invoked from network); 20 Jun 2005 13:43:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 13:43:25 -0000
Received: (qmail 66295 invoked by uid 500); 20 Jun 2005 13:43:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66251 invoked by uid 500); 20 Jun 2005 13:43:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66225 invoked by uid 99); 20 Jun 2005 13:43:19 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=NO_REAL_NAME,PRIORITY_NO_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from bounce-software.com (HELO bounce-software.com) (82.76.107.31)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Jun 2005 06:43:19 -0700
Received: (qmail 15777 invoked by uid 204); 20 Jun 2005 13:42:51 -0000
X-Virus-Scan: Scanned by clamdmail(Bounce Software patch, clamav) on bounce-software.com (no viruses);
  Mon, 20 Jun 2005 16:42:51 +0300
Received: from dazoot.intranet.bounce-software.com (192.168.100.2)
  by bounce-software.com with SMTP; 20 Jun 2005 13:42:51 -0000
Date: Mon, 20 Jun 2005 16:38:27 +0300
From: catalin-lucene@dazoot.ro
Reply-To: Catalin Constantin <catalin@bounce-software.com>
Organization: Bounce Software
X-Priority: 3 (Normal)
Message-ID: <718481582.20050620163827@bounce-software.com>
To: java-user@lucene.apache.org
Subject: Re[2]: md5 keyword field issue
In-Reply-To: <4B838408-68D6-4675-8BAD-5AE64018D490@ehatchersolutions.com>
References: <1779000970.20050619121713@bounce-software.com>
 <4B838408-68D6-4675-8BAD-5AE64018D490@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Spam-Rating: bounce-software.com 1.6.2 0/600/N
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Monday, June 20, 2005, 3:55:36 PM, Erik Hatcher wrote:
> Filters reduce the search space to a subset of the documents in the
> index.  Which document would you want returned when there are  
> multiple documents in the index with the same MD5?  Or do you want to
> cluster them by MD5?

i think cluster by md5 is more appropriate.

> Do you want to cluster them by MD5 perhaps, but still return multiple
> documents back from a search?

i want to return just the 1st image (the more relevant one). no use to
show duplicates in an image search app.

> I'm not sure if a Filter is the appropriate technique for this  
> scenario or not.

well, i am not sure either.
one solution would be when i iterate through the hits collection and
send them to the webapp, to group them by md5 or some.

is this a good way to do it ?
(the bad thing is i would have to do lots of hits.doc(index) in
advance, to make this group by md5 thing, and if the results are
paginated << which is the case >>, on the 2nd page i would need to
keep in session the last "index" or to recalculate it again.. - oh
nein !:)

in sql this would be:
select distinct md5, url, alt from table group by md5 order by score asc;

if i had the score in the DB (which is not the case).

-- 
Catalin Constantin


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 14:42:06 2005
Return-Path: <java-user-return-15029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83134 invoked from network); 20 Jun 2005 14:42:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 14:42:06 -0000
Received: (qmail 23296 invoked by uid 500); 20 Jun 2005 14:41:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23241 invoked by uid 500); 20 Jun 2005 14:41:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23227 invoked by uid 99); 20 Jun 2005 14:41:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from panacea.is.nl (HELO panacea.is.nl) (213.133.34.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 07:41:56 -0700
Received: from hai01.hippo.local ([213.133.51.241]) by panacea.is.nl with Microsoft SMTPSVC(5.0.2195.4905);
	 Mon, 20 Jun 2005 16:40:26 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Implicit Stopping in StandardTokenizer??
Date: Mon, 20 Jun 2005 16:41:22 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C41A7BE@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Implicit Stopping in StandardTokenizer??
thread-index: AcV1piBpo1IdgPJZSMiwxo//CxJnZg==
From: "Max Pfingsthorn" <m.pfingsthorn@hippo.nl>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Jun 2005 14:40:26.0968 (UTC) FILETIME=[FFAF9D80:01C575A5]
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi!

I've been trying to make an Analyzer which works like the =
StandardAnalyzer but without stopping. For some reason though, I still =
don't get words like "is" or "a" out of it... I checked with Luke (one =
doc in one index with the contents =
"hello,this,is,a,keyword,hello!,nicetomeetyou". This should tokenize =
into "hello this is a keyword hello nicetomeetyou", but actually it does =
"hello keyword hello nicetomeetyou". Does anyone know why it drops those =
extra terms?

Best regards,

Max Pfingsthorn

Hippo =20

Oosteinde 11
1017WT Amsterdam
The Netherlands
Tel  +31 (0)20 5224466
-------------------------------------------------------------
m.pfingsthorn@hippo.nl / www.hippo.nl
--------------------------------------------------------------

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 14:49:18 2005
Return-Path: <java-user-return-15030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87128 invoked from network); 20 Jun 2005 14:49:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 14:49:17 -0000
Received: (qmail 46828 invoked by uid 500); 20 Jun 2005 14:49:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46752 invoked by uid 500); 20 Jun 2005 14:49:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46695 invoked by uid 99); 20 Jun 2005 14:49:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 07:49:04 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9F8CB13E2005; Mon, 20 Jun 2005 10:48:42 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id C1D0513E2007
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 10:48:32 -0400 (EDT)
In-Reply-To: <718481582.20050620163827@bounce-software.com>
References: <1779000970.20050619121713@bounce-software.com> <4B838408-68D6-4675-8BAD-5AE64018D490@ehatchersolutions.com> <718481582.20050620163827@bounce-software.com>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <94338630-E81B-4FC7-A3A6-34BAFE5A9F68@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Re[2]: md5 keyword field issue
Date: Mon, 20 Jun 2005 10:48:30 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 20, 2005, at 9:38 AM, catalin-lucene@dazoot.ro wrote:

> Monday, June 20, 2005, 3:55:36 PM, Erik Hatcher wrote:
>
>> Filters reduce the search space to a subset of the documents in the
>> index.  Which document would you want returned when there are
>> multiple documents in the index with the same MD5?  Or do you want to
>> cluster them by MD5?
>>
>
> i think cluster by md5 is more appropriate.
>
>
>> Do you want to cluster them by MD5 perhaps, but still return multiple
>> documents back from a search?
>>
>
> i want to return just the 1st image (the more relevant one). no use to
> show duplicates in an image search app.

Now you've just said the same conflicting thing a different way.  You  
want to cluster but only return one.  :)

If you only want one image returned, then it seems that only indexing  
the same image once is the way to go.  When you find a duplicate MD5,  
don't index that as a second document.  You will, instead, update the  
document by adding additional ALT text and perhaps the additional URL.

Is there a reason why indexing each unique image (by MD5) is not a  
good way to go in your case?

> in sql this would be:
> select distinct md5, url, alt from table group by md5 order by  
> score asc;

This would give you multiple records for the same MD5.  You said  
above you only want one per MD5.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 14:50:52 2005
Return-Path: <java-user-return-15031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87423 invoked from network); 20 Jun 2005 14:50:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 14:50:52 -0000
Received: (qmail 49672 invoked by uid 500); 20 Jun 2005 14:50:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49645 invoked by uid 500); 20 Jun 2005 14:50:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49632 invoked by uid 99); 20 Jun 2005 14:50:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 07:50:41 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7E58C13E2006; Mon, 20 Jun 2005 10:23:02 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 11C1413E2005
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 10:22:32 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050617151455.11174.qmail@web32215.mail.mud.yahoo.com>
References: <20050617151455.11174.qmail@web32215.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D07573A9-B3B4-4221-A4D2-8378D83655A9@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: IndexHTML.java location
Date: Mon, 20 Jun 2005 10:22:22 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Brian,

The Lucene demo web application is a basic and woefully under- 
achieving example of Lucene.  My recommendation is to dig under the  
covers a bit deeper and tweak the code to suit your needs, or simply  
borrow enough pieces to learn the API usage.  There is very little  
actual Lucene-using code under the covers of the demo, and the bulk  
of most Lucene-using projects is in the code and interface specific  
to the application rather than in interacting with Lucene.

     Erik


On Jun 17, 2005, at 11:14 AM, Brian wrote:

> Right Now, I'm just using the compiled version that I
> downloaded.
> By Default URL, I mean the location of the indexed
> files.
>
> I have the sample web project (index.jsp) on server A,
> and my indexed files are on server B. Everything works
> till I click on the link in the results.jsp page. It
> looks one directory higher than where the web project
> is. I was hoping to have it look at server B in the
> appropriate directory.
>
> Thanks, B
>
> --- "Hondros, Constantine"
> <Constantine.Hondros@nl.compuware.com> wrote:
>
>
>> IndexHTML.java is located in the demo jarfile which
>> is named differently
>> depending on whether you built it yourself with Ant
>> or just downloaded it
>> ready-jarred.
>>
>> What do you mean by "default URL"? The location of
>> the document-set to
>> index, the location of the document-set to search
>> (presumably through
>> index.jsp in the samples), or the URL of the lucene
>> application as seen
>> through Tomcat?
>>
>> -----Original Message-----
>> From: Brian [mailto:okmred@yahoo.com]
>> Sent: 17 June 2005 16:48
>> To: java-user@lucene.apache.org
>> Subject: IndexHTML.java location
>>
>>
>> Not sure if this is the right address, to request
>> this
>> kind of help, so if it isn't please point me else
>> where.
>>
>> Basically I think I have an understanding of how
>> Lucene works, in general.
>>
>> I believe I'm at a point where I need to change the
>> "default" url, so I was planning to make the change
>> in
>> the IndexHTML.java file. However I don't know where
>> that file is located. I've already done the simple,
>> a
>> seacrh of my HD, and renaming the files etc...
>> Hasn't
>> helped. Any pointers would be appreciated.
>> Thanks, B
>>
>>
>>
>> __________________________________
>> Do you Yahoo!?
>> Yahoo! Mail - Helps protect you from nasty viruses.
>> http://promotions.yahoo.com/new_mail
>>
>>
>>
> ---------------------------------------------------------------------
>
>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>
>>
>> -- 
>> The contents of this e-mail are intended for the
>> named addressee only. It
>> contains information that may be confidential.
>> Unless you are the named
>> addressee or an authorized designee, you may not
>> copy or use it, or disclose
>> it to anyone else. If you received it in error
>> please notify us immediately
>> and then destroy it.
>>
>>
>>
>>
> ---------------------------------------------------------------------
>
>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>
>>
>>
>
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 14:52:02 2005
Return-Path: <java-user-return-15032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87608 invoked from network); 20 Jun 2005 14:52:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 14:52:02 -0000
Received: (qmail 52014 invoked by uid 500); 20 Jun 2005 14:51:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51991 invoked by uid 500); 20 Jun 2005 14:51:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51977 invoked by uid 99); 20 Jun 2005 14:51:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail1.cos.com (HELO mail1.cos.com) (198.76.172.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 07:51:51 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail1.cos.com (Postfix) with ESMTP id 796A620700C
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 10:51:23 -0400 (EDT)
Received: from mail1.cos.com ([127.0.0.1])
 by localhost (mail1.cos.com [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 17357-05 for <java-user@lucene.apache.org>;
 Mon, 20 Jun 2005 10:51:22 -0400 (EDT)
Received: from ntmailer.cos.com (ntmailer.cos.com [192.168.0.32])
	by mail1.cos.com (Postfix) with ESMTP id B12F6207026
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 10:51:22 -0400 (EDT)
Received: by ntmailer.cos.com with Internet Mail Service (5.5.2653.19)
	id <M0K9MFY0>; Mon, 20 Jun 2005 11:01:05 -0400
Received: from [10.10.1.51] (barry.cos.com [10.10.1.51]) by ntmailer.cos.com with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2653.13)
	id M0K9MFY9; Mon, 20 Jun 2005 11:01:04 -0400
From: Mike Barry <MBarry@cos.com>
To: java-user@lucene.apache.org
Message-ID: <42B6D861.5050209@cos.com>
Date: Mon, 20 Jun 2005 10:53:21 -0400
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
Subject: Re: Implicit Stopping in StandardTokenizer??
References: <A955EA1F8FE31749AEC8C998082F6C7C41A7BE@hai01.hippo.local>
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C41A7BE@hai01.hippo.local>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Max Pfingsthorn wrote:

>Hi!
>
>I've been trying to make an Analyzer which works like the StandardAnalyzer but without stopping. For some reason though, I still don't get words like "is" or "a" out of it... I checked with Luke (one doc in one index with the contents "hello,this,is,a,keyword,hello!,nicetomeetyou". This should tokenize into "hello this is a keyword hello nicetomeetyou", but actually it does "hello keyword hello nicetomeetyou". Does anyone know why it drops those extra terms?
>
>Best regards,
>
>Max Pfingsthorn
>
>Hippo  
>  
>
StandardAnaylzer has a constructor which allows you to send your own
array of stop words. So an array with zero elements should do the
trick:


String[] stopWords        = new String[0];
StandardAnalyzer analyzer = new StandardAnalyzer(stopWords);

-MikeB.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 14:58:54 2005
Return-Path: <java-user-return-15033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91231 invoked from network); 20 Jun 2005 14:58:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 14:58:54 -0000
Received: (qmail 71158 invoked by uid 500); 20 Jun 2005 14:58:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71133 invoked by uid 500); 20 Jun 2005 14:58:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71120 invoked by uid 99); 20 Jun 2005 14:58:47 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=NO_REAL_NAME,PRIORITY_NO_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from bounce-software.com (HELO bounce-software.com) (82.76.107.31)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Jun 2005 07:58:47 -0700
Received: (qmail 1051 invoked by uid 204); 20 Jun 2005 14:58:28 -0000
X-Virus-Scan: Scanned by clamdmail(Bounce Software patch, clamav) on bounce-software.com (no viruses);
  Mon, 20 Jun 2005 17:58:28 +0300
Received: from dazoot.intranet.bounce-software.com (192.168.100.2)
  by bounce-software.com with SMTP; 20 Jun 2005 14:58:28 -0000
Date: Mon, 20 Jun 2005 17:54:05 +0300
From: catalin-lucene@dazoot.ro
Reply-To: Catalin Constantin <catalin@bounce-software.com>
Organization: Bounce Software
X-Priority: 3 (Normal)
Message-ID: <62184227.20050620175405@bounce-software.com>
To: java-user@lucene.apache.org
Subject: Re[4]: md5 keyword field issue
In-Reply-To: <94338630-E81B-4FC7-A3A6-34BAFE5A9F68@ehatchersolutions.com>
References: <1779000970.20050619121713@bounce-software.com>
 <4B838408-68D6-4675-8BAD-5AE64018D490@ehatchersolutions.com>
 <718481582.20050620163827@bounce-software.com>
 <94338630-E81B-4FC7-A3A6-34BAFE5A9F68@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Spam-Rating: bounce-software.com 1.6.2 0/600/N
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Monday, June 20, 2005, 5:48:30 PM, Erik Hatcher wrote:
> Now you've just said the same conflicting thing a different way.  You
> want to cluster but only return one.  :)

i think i missunderstood here the Term: cluster.
so yes, i just want one image returned.

> If you only want one image returned, then it seems that only indexing
> the same image once is the way to go.  When you find a duplicate MD5,
> don't index that as a second document.  You will, instead, update the
> document by adding additional ALT text and perhaps the additional URL.

this sounds pretty ok !

> Is there a reason why indexing each unique image (by MD5) is not a  
> good way to go in your case?

>> in sql this would be:
>> select distinct md5, url, alt from table group by md5 order by  
>> score asc;

> This would give you multiple records for the same MD5.  You said  
> above you only want one per MD5.

here i'm afraid you are not correct, because i have GROUP BY MD5
clause which will return no duplicates.

(tested it on mysql)
for the query above.
170 rows in set (0.13 sec)

select distinct md5 from image;
| e127d0e91af5d8b2522138fb46c2e1bc |
| 7a18b029925d8357599878a85fd6b02f |
+----------------------------------+
170 rows in set (0.00 sec)

same nr of rows :D




-- 
Catalin Constantin



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 15:22:43 2005
Return-Path: <java-user-return-15034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1973 invoked from network); 20 Jun 2005 15:22:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 15:22:43 -0000
Received: (qmail 26479 invoked by uid 500); 20 Jun 2005 15:22:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26434 invoked by uid 500); 20 Jun 2005 15:22:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26421 invoked by uid 99); 20 Jun 2005 15:22:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 08:22:30 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 1C6FA13E2007; Mon, 20 Jun 2005 10:57:04 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 9FC9913E2005
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 10:56:50 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C41A7BE@hai01.hippo.local>
References: <A955EA1F8FE31749AEC8C998082F6C7C41A7BE@hai01.hippo.local>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7556DEDA-6968-458A-8211-B0D398FAD3CC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Implicit Stopping in StandardTokenizer??
Date: Mon, 20 Jun 2005 10:56:49 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 20, 2005, at 10:41 AM, Max Pfingsthorn wrote:

> Hi!
>
> I've been trying to make an Analyzer which works like the  
> StandardAnalyzer but without stopping. For some reason though, I  
> still don't get words like "is" or "a" out of it... I checked with  
> Luke (one doc in one index with the contents  
> "hello,this,is,a,keyword,hello!,nicetomeetyou". This should  
> tokenize into "hello this is a keyword hello nicetomeetyou", but  
> actually it does "hello keyword hello nicetomeetyou". Does anyone  
> know why it drops those extra terms?

Show us the code of your analyzer.

If all you want is StandardAnalyzer to not remove stop words, you can  
construct it this way:

     analyzer = new StandardAnalyzer(new String[] {});

The String[] are the stop words to remove, in this case none.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 15:49:07 2005
Return-Path: <java-user-return-15035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14967 invoked from network); 20 Jun 2005 15:49:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 15:49:07 -0000
Received: (qmail 95457 invoked by uid 500); 20 Jun 2005 15:48:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95431 invoked by uid 500); 20 Jun 2005 15:48:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95416 invoked by uid 99); 20 Jun 2005 15:48:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from panacea.is.nl (HELO panacea.is.nl) (213.133.34.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 08:48:58 -0700
Received: from hai01.hippo.local ([213.133.51.241]) by panacea.is.nl with Microsoft SMTPSVC(5.0.2195.4905);
	 Mon, 20 Jun 2005 17:47:42 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Implicit Stopping in StandardTokenizer??
Date: Mon, 20 Jun 2005 17:48:38 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C41A7BF@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Implicit Stopping in StandardTokenizer??
thread-index: AcV1q+Q9cn409HExQYqMgM0083P08AAASMgA
From: "Max Pfingsthorn" <m.pfingsthorn@hippo.nl>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Jun 2005 15:47:42.0651 (UTC) FILETIME=[6523F8B0:01C575AF]
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi!

Here is the code:


import java.io.Reader;

import org.apache.lucene.analysis.standard.StandardTokenizer;
import org.apache.lucene.analysis.standard.StandardFilter;
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.LowerCaseFilter;
import org.apache.lucene.analysis.StopAnalyzer;
import org.apache.lucene.analysis.StopFilter;
import org.apache.lucene.analysis.TokenStream;

public class SimpleStandardAnalyzer extends Analyzer {
  public SimpleStandardAnalyzer() {
  }

  public TokenStream tokenStream(String fieldName, Reader reader) {
    return new LowerCaseFilter(
      new StandardFilter(
        new StandardTokenizer(reader)
	  )
	);
  }
}

I need it to be easily dynamically loaded via Class.forName() because we =
use it in a xml-configured environment (i.e. Avalon-like). So, passing =
extra stuff to constructors is not really what I am looking for. =
However, I guess I could make a wrapper like this:

public class SimpleStandardAnalyzer extends StandardAnalyzer {

  public SimpleStandardAnalyzer()
  {
    super(new String[0]);
  }
}

I tried this too, but still the same effect. "This" and "is", etc, get =
filtered out even with no stopwords set. Any ideas?

Thanks a lot!
max


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Monday, June 20, 2005 16:57
To: java-user@lucene.apache.org
Subject: Re: Implicit Stopping in StandardTokenizer??



On Jun 20, 2005, at 10:41 AM, Max Pfingsthorn wrote:

> Hi!
>
> I've been trying to make an Analyzer which works like the =20
> StandardAnalyzer but without stopping. For some reason though, I =20
> still don't get words like "is" or "a" out of it... I checked with =20
> Luke (one doc in one index with the contents =20
> "hello,this,is,a,keyword,hello!,nicetomeetyou". This should =20
> tokenize into "hello this is a keyword hello nicetomeetyou", but =20
> actually it does "hello keyword hello nicetomeetyou". Does anyone =20
> know why it drops those extra terms?

Show us the code of your analyzer.

If all you want is StandardAnalyzer to not remove stop words, you can =20
construct it this way:

     analyzer =3D new StandardAnalyzer(new String[] {});

The String[] are the stop words to remove, in this case none.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 16:33:41 2005
Return-Path: <java-user-return-15036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35828 invoked from network); 20 Jun 2005 16:33:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 16:33:41 -0000
Received: (qmail 4429 invoked by uid 500); 20 Jun 2005 16:33:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4359 invoked by uid 500); 20 Jun 2005 16:33:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4333 invoked by uid 99); 20 Jun 2005 16:33:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ehatchersolutions.com (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 09:33:33 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4283E13E2007; Mon, 20 Jun 2005 12:33:11 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 7431E13E2005
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 12:32:05 -0400 (EDT)
In-Reply-To: <62184227.20050620175405@bounce-software.com>
References: <1779000970.20050619121713@bounce-software.com> <4B838408-68D6-4675-8BAD-5AE64018D490@ehatchersolutions.com> <718481582.20050620163827@bounce-software.com> <94338630-E81B-4FC7-A3A6-34BAFE5A9F68@ehatchersolutions.com> <62184227.20050620175405@bounce-software.com>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DAD3CAD3-F08B-4C60-B5A5-C493C8594B0E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Re[4]: md5 keyword field issue
Date: Mon, 20 Jun 2005 12:32:04 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 20, 2005, at 10:54 AM, catalin-lucene@dazoot.ro wrote:
> Monday, June 20, 2005, 5:48:30 PM, Erik Hatcher wrote:
>
>> Now you've just said the same conflicting thing a different way.  You
>> want to cluster but only return one.  :)
>>
>
> i think i missunderstood here the Term: cluster.
> so yes, i just want one image returned.

Maybe my interpretation of "cluster" is clouded by the search  
domain.  In the search domain, cluster means grouping multiple things.

>> If you only want one image returned, then it seems that only indexing
>> the same image once is the way to go.  When you find a duplicate MD5,
>> don't index that as a second document.  You will, instead, update the
>> document by adding additional ALT text and perhaps the additional  
>> URL.
>>
>
> this sounds pretty ok !

The tricks are to do a search when indexing to find duplicates, and  
to "update" the document by deleting and re-adding it (you'll  
probably want to store the field data so you can retrieve it easily  
and use it for the new updated document.

The negative to this approach is you want know specifically which  
page the image was on in results, though you could keep all URL's  
that point to it as a document can have multiple fields named "URL"  
for example.

>>> in sql this would be:
>>> select distinct md5, url, alt from table group by md5 order by
>>> score asc;
>>>
>
>
>> This would give you multiple records for the same MD5.  You said
>> above you only want one per MD5.
>>
>
> here i'm afraid you are not correct, because i have GROUP BY MD5
> clause which will return no duplicates.

Sorry, I missed the GROUP BY clause there in my first human parse of  
the expression - I was too busy focusing on DISTINCT.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 18:54:22 2005
Return-Path: <java-user-return-15037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97358 invoked from network); 20 Jun 2005 18:54:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 18:54:22 -0000
Received: (qmail 37250 invoked by uid 500); 20 Jun 2005 18:54:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37219 invoked by uid 500); 20 Jun 2005 18:54:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37171 invoked by uid 99); 20 Jun 2005 18:54:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 11:54:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 11:54:14 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id F34A213E2006; Mon, 20 Jun 2005 14:54:08 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 0A5DD13E2005
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 14:53:45 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C41A7BF@hai01.hippo.local>
References: <A955EA1F8FE31749AEC8C998082F6C7C41A7BF@hai01.hippo.local>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AB2B1174-92F8-4614-8CD8-892CA4794D6A@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Implicit Stopping in StandardTokenizer??
Date: Mon, 20 Jun 2005 14:53:44 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 20, 2005, at 11:48 AM, Max Pfingsthorn wrote:
> import java.io.Reader;
>
> import org.apache.lucene.analysis.standard.StandardTokenizer;
> import org.apache.lucene.analysis.standard.StandardFilter;
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.LowerCaseFilter;
> import org.apache.lucene.analysis.StopAnalyzer;
> import org.apache.lucene.analysis.StopFilter;
> import org.apache.lucene.analysis.TokenStream;
>
> public class SimpleStandardAnalyzer extends Analyzer {
>   public SimpleStandardAnalyzer() {
>   }
>
>   public TokenStream tokenStream(String fieldName, Reader reader) {
>     return new LowerCaseFilter(
>       new StandardFilter(
>         new StandardTokenizer(reader)
>       )
>     );
>   }
> }

That looks fine.  Stop words will not (well, "should not" it appears  
to you!) be removed from that analyzer.

> I tried this too, but still the same effect. "This" and "is", etc,  
> get filtered out even with no stopwords set. Any ideas?

The only idea I have is that you're running StandardAnalyzer and not  
this custom one by something amiss in your indirect configuration.

For example, I typed in "this is" to the AnalyzerDemo that ships with  
the Lucene in Action source code (get it from http:// 
www.lucenebook.com) after modifying AnalyzerDemo to construct a  
StandardAnalyzer like this:

     new StandardAnalyzer(new String[] {})

And got this output:

$ ant AnalyzerDemo

AnalyzerDemo:
     [input] String to analyze: [This string will be analyzed.]
this is
      [echo] Running lia.analysis.AnalyzerDemo...
      [java] Analyzing "this is"
      [java]   WhitespaceAnalyzer:
      [java]     [this] [is]

      [java]   SimpleAnalyzer:
      [java]     [this] [is]

      [java]   StopAnalyzer:
      [java]

      [java]   StandardAnalyzer:
      [java]     [this] [is]

      [java]   SnowballAnalyzer:
      [java]     [this] [is]

      [java]   SnowballAnalyzer:
      [java]     [this] [is]

      [java]   SnowballAnalyzer:
      [java]     [thi] [i]

As you can see [this] and [is] made it fine through StandardAnalyzer.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 19:00:32 2005
Return-Path: <java-user-return-15038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99909 invoked from network); 20 Jun 2005 19:00:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 19:00:32 -0000
Received: (qmail 52091 invoked by uid 500); 20 Jun 2005 19:00:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52043 invoked by uid 500); 20 Jun 2005 19:00:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51961 invoked by uid 99); 20 Jun 2005 19:00:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 12:00:22 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.28] (HELO smtp-vbr8.xs4all.nl) (194.109.24.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 12:00:16 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr8.xs4all.nl (8.13.3/8.13.3) with ESMTP id j5KJ0CNu068003
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 21:00:13 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: About the field of PhraseQuery
Date: Mon, 20 Jun 2005 21:00:12 +0200
User-Agent: KMail/1.5.4
References: <fc91a2d481488f2ae639ac7e8db6c9a6@activemath.org> <200506180944.02812.paul.elschot@xs4all.nl> <3e451aa97cc50a213b01b8ab35afa811@activemath.org>
In-Reply-To: <3e451aa97cc50a213b01b8ab35afa811@activemath.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200506202100.12576.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 20 June 2005 08:57, Paul Libbrecht wrote:
> So why is there no such constructor
>   PhraseQuery(String fieldName)
> and a method
>    add(Token tok)
> ??

Tradition?

> That would be much more intuitive I feel!

Regards,
Paul Elschot

>=20
> paul
>=20
>=20
> Le 18 juin 05, =E0 09:44, Paul Elschot a =E9crit :
>=20
> > It will throw an IllegalArgumentException when a Term is added
> > with a different field, which is probably what happened.
> >
> > For PhraseQuery the field name and the term text could have been
> > used separately in the interface, which might have prevented your bug.
> > For example an alternative PhraseQuery could have constructor with a
> > field name argument, and term texts could be added at phrase positions.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 19:36:35 2005
Return-Path: <java-user-return-15039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33922 invoked from network); 20 Jun 2005 19:36:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 19:36:35 -0000
Received: (qmail 43277 invoked by uid 500); 20 Jun 2005 19:36:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43231 invoked by uid 500); 20 Jun 2005 19:36:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43199 invoked by uid 99); 20 Jun 2005 19:36:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 12:36:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yourabi@gmail.com designates 64.233.184.202 as permitted sender)
Received: from [64.233.184.202] (HELO wproxy.gmail.com) (64.233.184.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 12:36:30 -0700
Received: by wproxy.gmail.com with SMTP id 36so1044822wra
        for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 12:36:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=oy2moftFVlEU7qB6KBs8V/8Sc6IfdVaCMHsMvY0S4aYt8x+rAARbLyGmBNKwB4R5Jve8mWDM572F8ux98Qc9oXHCy2BFN9UAPI9mxOWpToBlK9F8FbCt0ntcBlhOcPBCATM5x2JOLrawx4a1PgH+K+xF4G7Aj+mJslL41w6ejc4=
Received: by 10.54.53.15 with SMTP id b15mr2699915wra;
        Mon, 20 Jun 2005 12:36:27 -0700 (PDT)
Received: by 10.54.14.24 with HTTP; Mon, 20 Jun 2005 12:36:27 -0700 (PDT)
Message-ID: <b13f3f060506201236e9f8511@mail.gmail.com>
Date: Mon, 20 Jun 2005 12:36:27 -0700
From: Yousef Ourabi <yourabi@gmail.com>
Reply-To: Yousef Ourabi <yourabi@gmail.com>
To: java-user@lucene.apache.org
Subject: Configuration Strategies
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello:
I have a couple of quesitons on configuration strategies. I have a
project where I have to deal with changing search requirements, for
example one search may want to use term-vectors to find "keywords like
this" or whatever, and the next may not.

Another requirement is that when I call a "shutdown" call, the current
settings are saved to an xml file, so that the nex time the main
SearchFacade class is started it re-reads this file and picks-up where
it left off.

How have other lucene users dealt with this? Thanks for any input.

Best,
Yousef

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 20 20:24:49 2005
Return-Path: <java-user-return-15040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50105 invoked from network); 20 Jun 2005 20:24:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jun 2005 20:24:49 -0000
Received: (qmail 7237 invoked by uid 500); 20 Jun 2005 20:24:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7213 invoked by uid 500); 20 Jun 2005 20:24:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7200 invoked by uid 99); 20 Jun 2005 20:24:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 13:24:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 13:24:46 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id F2D5713E2007; Mon, 20 Jun 2005 16:24:38 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 19E3413E2006
	for <java-user@lucene.apache.org>; Mon, 20 Jun 2005 16:24:30 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <b13f3f060506201236e9f8511@mail.gmail.com>
References: <b13f3f060506201236e9f8511@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <85358726-EFD0-4204-978D-E27A05E08CCC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Configuration Strategies
Date: Mon, 20 Jun 2005 16:24:28 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 20, 2005, at 3:36 PM, Yousef Ourabi wrote:

> Hello:
> I have a couple of quesitons on configuration strategies. I have a
> project where I have to deal with changing search requirements, for
> example one search may want to use term-vectors to find "keywords like
> this" or whatever, and the next may not.
>
> Another requirement is that when I call a "shutdown" call, the current
> settings are saved to an xml file, so that the nex time the main
> SearchFacade class is started it re-reads this file and picks-up where
> it left off.
>
> How have other lucene users dealt with this? Thanks for any input.

You might find some useful tidbits in the "I Love Lucene" case study  
of TheServerSide which was written for "Lucene in Action":

     <http://www.theserverside.com/articles/article.tss?l=ILoveLucene>

The XML configuration file concepts discussed are along the lines of  
what you're after, I think.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 02:23:58 2005
Return-Path: <java-user-return-15041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1845 invoked from network); 21 Jun 2005 02:23:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 02:23:57 -0000
Received: (qmail 25829 invoked by uid 500); 21 Jun 2005 02:23:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25763 invoked by uid 500); 21 Jun 2005 02:23:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25702 invoked by uid 99); 21 Jun 2005 02:23:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 19:23:49 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [221.146.159.218] (HELO dns.nannet.co.kr) (221.146.159.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 19:23:51 -0700
Received: from win98 ([192.168.1.98])
	by dns.nannet.co.kr (8.13.1/8.13.1) with SMTP id j5L2Njiw004694
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 11:23:46 +0900
Message-ID: <000b01c57608$e6261ac0$6201a8c0@win98>
Reply-To: "Youngho Cho" <youngho@nannet.co.kr>
From: "Youngho Cho" <youngho@nannet.co.kr>
To: <java-user@lucene.apache.org>
References: <a99821206864725ee0186f6f9062108f@activemath.org> <FDEC8750-344B-4EBA-BA1A-484500CA32E7@ehatchersolutions.com>
Subject: Strange Error Problem
Date: Tue, 21 Jun 2005 11:28:23 +0900
Organization: Nannet
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SGVsbG8sDQoNCkkgZGV2ZWxvcCBvdXIgc3lzdGVtIHVzaW5nIGx1Y2VuZSAxLjQuMyB3aXRoIFJl
bW90ZVNlYXJjaGFibGUuDQpDdXJyZW50bHkgSSBnb3QgdGhlIGZvbGxvd2luZyBlcnJvciBtZXNz
YWdlLg0KQnV0IEkgZG9uJ3Qga29udyB3aHkgaXQgaGFwcGVuZCBhbmQgaG93IHRvIGZpeCBpdC4N
Cg0KQ291bGQgeW91IGV4cGxhaW4gd2hhdCBzaXR1YXRpb24gZ2l2ZSB0aGUgZm9sbG93aW5nIGVy
cm9yICA/Pz8NCg0KVGhhbmtzLg0KDQpZb3VuZ2hvDQoNCmphdmEuaW8uSU9FeGNlcHRpb246IHJl
YWQgcGFzdCBFT0YNCiAgICAgICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc3RvcmUuSW5wdXRTdHJl
YW0ucmVmaWxsKElucHV0U3RyZWFtLmphdmE6MTU0KQ0KICAgICAgICBhdCBvcmcuYXBhY2hlLmx1
Y2VuZS5zdG9yZS5JbnB1dFN0cmVhbS5yZWFkQnl0ZShJbnB1dFN0cmVhbS5qYXZhOjQzKQ0KICAg
ICAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5JbnB1dFN0cmVhbS5yZWFkQnl0ZXMoSW5w
dXRTdHJlYW0uamF2YTo1NykNCiAgICAgICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguU2Vn
bWVudFJlYWRlci5ub3JtcyhTZWdtZW50UmVhZGVyLmphdmE6MzU2KQ0KICAgICAgICBhdCBvcmcu
YXBhY2hlLmx1Y2VuZS5pbmRleC5NdWx0aVJlYWRlci5ub3JtcyhNdWx0aVJlYWRlci5qYXZhOjE1
OSkNCiAgICAgICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLlRlcm1RdWVyeSRUZXJtV2Vp
Z2h0LnNjb3JlcihUZXJtUXVlcnkuamF2YTo2NCkNCiAgICAgICAgYXQgb3JnLmFwYWNoZS5sdWNl
bmUuc2VhcmNoLkJvb2xlYW5RdWVyeSRCb29sZWFuV2VpZ2h0LnNjb3JlcihCb29sZWFuUXVlcnku
amF2YToxNjUpDQogICAgICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5JbmRleFNlYXJj
aGVyLnNlYXJjaChJbmRleFNlYXJjaGVyLmphdmE6ODUpDQogICAgICAgIGF0IG9yZy5hcGFjaGUu
bHVjZW5lLnNlYXJjaC5SZW1vdGVTZWFyY2hhYmxlLnNlYXJjaChSZW1vdGVTZWFyY2hhYmxlLmph
dmE6NjApDQogICAgICAgIGF0IHN1bi5yZWZsZWN0Lk5hdGl2ZU1ldGhvZEFjY2Vzc29ySW1wbC5p
bnZva2UwKE5hdGl2ZSBNZXRob2QpDQogICAgICAgIGF0IHN1bi5yZWZsZWN0Lk5hdGl2ZU1ldGhv
ZEFjY2Vzc29ySW1wbC5pbnZva2UoTmF0aXZlTWV0aG9kQWNjZXNzb3JJbXBsLmphdmE6MzkpDQog
ICAgICAgIGF0IHN1bi5yZWZsZWN0LkRlbGVnYXRpbmdNZXRob2RBY2Nlc3NvckltcGwuaW52b2tl
KERlbGVnYXRpbmdNZXRob2RBY2Nlc3NvckltcGwuamF2YToyNSkNCiAgICAgICAgYXQgamF2YS5s
YW5nLnJlZmxlY3QuTWV0aG9kLmludm9rZShNZXRob2QuamF2YTozMjQpDQogICAgICAgIGF0IHN1
bi5ybWkuc2VydmVyLlVuaWNhc3RTZXJ2ZXJSZWYuZGlzcGF0Y2goVW5pY2FzdFNlcnZlclJlZi5q
YXZhOjI2MSkNCiAgICAgICAgYXQgc3VuLnJtaS50cmFuc3BvcnQuVHJhbnNwb3J0JDEucnVuKFRy
YW5zcG9ydC5qYXZhOjE0OCkNCiAgICAgICAgYXQgamF2YS5zZWN1cml0eS5BY2Nlc3NDb250cm9s
bGVyLmRvUHJpdmlsZWdlZChOYXRpdmUgTWV0aG9kKQ0KICAgICAgICBhdCBzdW4ucm1pLnRyYW5z
cG9ydC5UcmFuc3BvcnQuc2VydmljZUNhbGwoVHJhbnNwb3J0LmphdmE6MTQ0KQ0KICAgICAgICBh
dCBzdW4ucm1pLnRyYW5zcG9ydC50Y3AuVENQVHJhbnNwb3J0LmhhbmRsZU1lc3NhZ2VzKFRDUFRy
YW5zcG9ydC5qYXZhOjQ2MCkNCiAgICAgICAgYXQgc3VuLnJtaS50cmFuc3BvcnQudGNwLlRDUFRy
YW5zcG9ydCRDb25uZWN0aW9uSGFuZGxlci5ydW4oVENQVHJhbnNwb3J0LmphdmE6NzAxKQ0KICAg
ICAgICBhdCBqYXZhLmxhbmcuVGhyZWFkLnJ1bihUaHJlYWQuamF2YTo1MzQpDQogICAgICAgIGF0
IHN1bi5ybWkudHJhbnNwb3J0LlN0cmVhbVJlbW90ZUNhbGwuZXhjZXB0aW9uUmVjZWl2ZWRGcm9t
U2VydmVyKFN0cmVhbVJlbW90ZUNhbGwuamF2YToyNDcpDQogICAgICAgIGF0IHN1bi5ybWkudHJh
bnNwb3J0LlN0cmVhbVJlbW90ZUNhbGwuZXhlY3V0ZUNhbGwoU3RyZWFtUmVtb3RlQ2FsbC5qYXZh
OjIyMykNCiAgICAgICAgYXQgc3VuLnJtaS5zZXJ2ZXIuVW5pY2FzdFJlZi5pbnZva2UoVW5pY2Fz
dFJlZi5qYXZhOjEzMykNCiAgICAgICAgYXQgY29tLm5hbm5ldC5mdWxjcnVtLmx1Y2VuZS51dGls
LlJlZmluZWRSZW1vdGVTZWFyY2hhYmxlX1N0dWIuc2VhcmNoKFVua25vd24gU291cmNlKQ0KICAg
ICAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guTXVsdGlTZWFyY2hlclRocmVhZC5ydW4o
UGFyYWxsZWxNdWx0aVNlYXJjaGVyLmphdmE6MjUxKQ==




From java-user-return-15042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 06:13:32 2005
Return-Path: <java-user-return-15042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72329 invoked from network); 21 Jun 2005 06:13:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 06:13:31 -0000
Received: (qmail 40087 invoked by uid 500); 21 Jun 2005 06:13:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40069 invoked by uid 500); 21 Jun 2005 06:13:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40055 invoked by uid 99); 21 Jun 2005 06:13:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 23:13:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [204.127.202.59] (HELO sccrmhc14.comcast.net) (204.127.202.59)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jun 2005 23:13:26 -0700
Received: from jma (c-67-165-8-214.hsd1.ct.comcast.net[67.165.8.214])
          by comcast.net (sccrmhc14) with SMTP
          id <2005062106132301400mq7k7e>; Tue, 21 Jun 2005 06:13:23 +0000
From: "JMA" <mrjama@comcast.net>
To: <java-user@lucene.apache.org>
Subject: RE: Problems with concurrency using Tomcat
Date: Tue, 21 Jun 2005 02:16:38 -0400
Message-ID: <000501c57628$c970cef0$54e11dbf@jma>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook CWS, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <20050620071629.GG11299@mopti.mokolo>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Importance: Normal
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I will try that thanks

-----Original Message-----
From: Fred Vos [mailto:fred@fredvos.org]
Sent: Monday, June 20, 2005 3:16 AM
To: java-user@lucene.apache.org
Subject: Re: Problems with concurrency using Tomcat


On Sun, Jun 19, 2005 at 07:05:06PM -0400, Joseph MarkAnthony wrote:
>
> I have been struggling with this problem for months and have made no
> progress.
> I have created a simple web app for my Lucene indices that allow the user
to
> rebuild or update the index.
> In the *same* web app (perhaps this is important), I have the search
module.
>
> The update module works fine - until someone tries a search.  Then the
> update will no longer be allowed to access the index directory.  The error
> is somethign like "cannot delete _a.cfs" or somethign similar.
>
> I'm running Tomcat on Win2000, and I've pretty much confirmed that it's a
> WINDOWS locking problem, not a lucene problem per se.  This is the windows
> "Cannot delete, File may be in use" situation that you may often get if
> someone else if using a file and you try to delete it.  You see this
> situation many times outside of Lucene.
>
> Does anyone know how to solve this?  It seems to be a Tomcat problem
because
> I cannot duplicate the error in a standalone Java app.  I've seen a few
> posts on this and the resolution is often to copy the index and then
update,
> then copy it back.  This can't be the only way to fix this.

Have you tried to add the -DdisableLuceneLocks=true flag to the RUNJAVA
command of catalina.sh? I had to add it to run servlets accessing lucene,
but
I'm not sure what my problem was.

Lines 219-227 of my catalina.sh (running jakarta tomcat 5.0.16 under linux):

  else
    "$_RUNJAVA" $JAVA_OPTS $CATALINA_OPTS \
      -Djava.endorsed.dirs="$JAVA_ENDORSED_DIRS" -classpath "$CLASSPATH" \
      -Dcatalina.base="$CATALINA_BASE" \
      -Dcatalina.home="$CATALINA_HOME" \
      -Djava.io.tmpdir="$CATALINA_TMPDIR" \
      -DdisableLuceneLocks=true \
      org.apache.catalina.startup.Bootstrap "$@" start \
      >> "$CATALINA_BASE"/logs/catalina.out 2>&1 &

Fred

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 11:58:52 2005
Return-Path: <java-user-return-15043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52183 invoked from network); 21 Jun 2005 11:58:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 11:58:52 -0000
Received: (qmail 70398 invoked by uid 500); 21 Jun 2005 11:58:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70371 invoked by uid 500); 21 Jun 2005 11:58:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70355 invoked by uid 99); 21 Jun 2005 11:58:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 04:58:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.207.144] (HELO web32213.mail.mud.yahoo.com) (68.142.207.144)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 21 Jun 2005 04:58:46 -0700
Received: (qmail 42326 invoked by uid 60001); 21 Jun 2005 11:58:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=e27W2UJ2KmqgFJw8pvqFRizPNk0AaBuQXIINbyOQyy1k0oyufcWhLg11PopEvAXlJ/ZtUYyNvcnMVHKLrl0OwTV6UpA4YeS+Ajj/RfoZ9tlZjRd8dPhPk3jYVBHfO1m22Dc10jca/7WIws9DGnEhC1i0SgaBQXPOKjsVOs2t2RE=  ;
Message-ID: <20050621115843.42324.qmail@web32213.mail.mud.yahoo.com>
Received: from [12.21.236.10] by web32213.mail.mud.yahoo.com via HTTP; Tue, 21 Jun 2005 04:58:43 PDT
Date: Tue, 21 Jun 2005 04:58:43 -0700 (PDT)
From: Brian <okmred@yahoo.com>
Subject: Using the Searcher.java sample in a web application
To: java-user@lucene.apache.org
In-Reply-To: <D07573A9-B3B4-4221-A4D2-8378D83655A9@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,
     I recently downloaded lia source code and see
that the chapter 1 sample cod e shold do all I need
for now.

My questions are:
1) How would I take the Searcher.java sample and put
it in a web application.
2) How would I go about automating the indexer.java?

Just looking for pointers. I'm new to java and lucene.

Thanks in advance.
Brian


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 12:06:07 2005
Return-Path: <java-user-return-15044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55059 invoked from network); 21 Jun 2005 12:06:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 12:06:07 -0000
Received: (qmail 88297 invoked by uid 500); 21 Jun 2005 12:06:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88272 invoked by uid 500); 21 Jun 2005 12:06:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88259 invoked by uid 99); 21 Jun 2005 12:06:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 05:06:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jm.tinghir@gmail.com designates 64.233.184.199 as permitted sender)
Received: from [64.233.184.199] (HELO wproxy.gmail.com) (64.233.184.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 05:06:02 -0700
Received: by wproxy.gmail.com with SMTP id 36so1457811wra
        for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 05:05:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=k2eXN/5EOVManZ1r59irefUfN/UB8MAR7gD1aMMuYhHkycxW9XQ1awYICKm7dArMfBJXfZQdRiEKtULsD+1gcv/9lV+Xsz9oN1GIQWNPLk5vHCpwLv7U56XBm3+ZNO65sPjYKltp+D8ULWQALqjDLpmP96spru//aJEQw+0Orp0=
Received: by 10.54.54.18 with SMTP id c18mr3127866wra;
        Tue, 21 Jun 2005 05:05:59 -0700 (PDT)
Received: by 10.54.61.19 with HTTP; Tue, 21 Jun 2005 05:05:59 -0700 (PDT)
Message-ID: <6f3b242905062105057fe7cade@mail.gmail.com>
Date: Tue, 21 Jun 2005 14:05:59 +0200
From: JM Tinghir <jm.tinghir@gmail.com>
Reply-To: JM Tinghir <jm.tinghir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using the Searcher.java sample in a web application
In-Reply-To: <20050621115843.42324.qmail@web32213.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <D07573A9-B3B4-4221-A4D2-8378D83655A9@ehatchersolutions.com>
	 <20050621115843.42324.qmail@web32213.mail.mud.yahoo.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,=20

> Just looking for pointers. I'm new to java and lucene.

I guess you're new to J2EE too... You should study servlets and jsps a bit.
You'll have to call Searcher.java in your servlet, unless you use
frameworks like struts then it'll be in your business code.

Good luck!

Jean-Marie Tinghir

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 12:35:37 2005
Return-Path: <java-user-return-15045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71509 invoked from network); 21 Jun 2005 12:35:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 12:35:37 -0000
Received: (qmail 48693 invoked by uid 500); 21 Jun 2005 12:35:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48665 invoked by uid 500); 21 Jun 2005 12:35:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48645 invoked by uid 99); 21 Jun 2005 12:35:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 05:35:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 05:35:31 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D739213E200A; Tue, 21 Jun 2005 08:35:23 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 3914C13E2006
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 08:35:05 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050621115843.42324.qmail@web32213.mail.mud.yahoo.com>
References: <20050621115843.42324.qmail@web32213.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <69A09E21-2295-4A20-8CDA-9D31508600FB@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Using the Searcher.java sample in a web application
Date: Tue, 21 Jun 2005 08:34:57 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 21, 2005, at 7:58 AM, Brian wrote:

> Hello all,
>      I recently downloaded lia source code and see
> that the chapter 1 sample cod e shold do all I need
> for now.
>
> My questions are:
> 1) How would I take the Searcher.java sample and put
> it in a web application.
> 2) How would I go about automating the indexer.java?
>
> Just looking for pointers. I'm new to java and lucene.

Brian - it is beyond the scope of this e-mail list to go into  
building a web application, though with some trial and error you  
should be able to get something running within a day or less.  Here  
are some general pointers:

Download the latest Tomcat binary release, install it, and get its  
built-in samples working.  Since you've already toyed with Lucene's  
web demo, you're probably already at this point.  Create a new  
directory under Tomcat's webapps directory, place a WEB-INF directory  
under that, then copy the Lucene web app's web.xml over to your new  
WEB-INF directory.  Place a simple "hello world" JSP file in your new  
web app directory (above WEB-INF).  Restart Tomcat, and make sure you  
can navigate to http://localhost:8080/<dirname>/some.jsp and see what  
you put there.  Now copy Lucene's JAR file over to WEB-INF/lib.   
You're now ready to start integrating the search piece into the JSP,  
and here is where you start borrowing pieces of code from LIA's  
Searcher.java and the Lucene demo web app.

I hope some of that helps.  Java is a big big scary world, so I can  
sympathize with the learning curve ahead of you.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 13:20:02 2005
Return-Path: <java-user-return-15046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11106 invoked from network); 21 Jun 2005 13:20:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 13:20:02 -0000
Received: (qmail 53553 invoked by uid 500); 21 Jun 2005 13:19:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53311 invoked by uid 500); 21 Jun 2005 13:19:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53298 invoked by uid 99); 21 Jun 2005 13:19:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 06:19:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.40.70] (HELO fluffy.torchbox.com) (81.187.40.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 06:19:57 -0700
Received: from grenache.internal.torchbox.com ([192.168.1.81])
	by fluffy.torchbox.com with esmtp (Exim 4.34)
	id 1DkifR-0004Fn-1N
	for java-user@lucene.apache.org; Tue, 21 Jun 2005 14:19:53 +0100
Date: Tue, 21 Jun 2005 14:19:52 +0100 (BST)
From: Nick Burch <nick@torchbox.com>
X-X-Sender: nick@localhost.localdomain
To: java-user@lucene.apache.org
Subject: How do lucene IDs work with MultiReader and MultiSearcher?
Message-ID: <Pine.LNX.4.61.0506211350520.4333@localhost.localdomain>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Spam-Score: -105.9 (---------------------------------------------------)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

I've been scanning the JavaDocs, but I can't see anything on this.


Let's say I have two indexes. Both have just been optimised, so each have 
lucene IDs 1-10 in them.

Now, I build a MultiSearcher over these two indexes. I search, get back a 
Hits object, and from that a lucene ID

>From my testing, it seems that the MultiSearcher has handily offset all 
the lucene IDs from the second index, so they don't clash with the first. 
It also seems that if I pass that ID to a MultiReader built on the same 
set of indexes, I get the right document back.

(i.e. my hits object gives me a lucene ID of 5 for my first hit, and if I 
ask the multireader for document with lucene ID 5, I get the same 
document)


Is this always going to be the case? Do I simply have to ensure that I 
open the MultiReader and MultiSearcher with the indexes in the right order 
to ensure the lucene IDs will be identically munged, or is it trickier 
than that?

Thanks
Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 14:01:52 2005
Return-Path: <java-user-return-15047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36430 invoked from network); 21 Jun 2005 14:01:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 14:01:52 -0000
Received: (qmail 28865 invoked by uid 500); 21 Jun 2005 14:01:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28835 invoked by uid 500); 21 Jun 2005 14:01:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28822 invoked by uid 99); 21 Jun 2005 14:01:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 07:01:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.65.18.194] (HELO gwserv161.interdoms.net) (69.65.18.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 07:01:47 -0700
Received: from ws97.brusselsvillage.be ([194.183.227.97] helo=[10.10.91.251])
	by gwserv161.interdoms.net with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.50)
	id 1DkjJy-0002A0-DB
	for java-user@lucene.apache.org; Tue, 21 Jun 2005 16:01:46 +0200
Message-ID: <42B81DC5.7000409@attentio.com>
Date: Tue, 21 Jun 2005 16:01:41 +0200
From: Roxana Angheluta <roxana@attentio.com>
User-Agent: Mozilla Thunderbird 1.0 (X11/20041207)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: index phrases
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - gwserv161.interdoms.net
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - attentio.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dear all,

I am using Lucene for indexing documents.

I would like to include phrases (of a certain maximum length given as a 
parameter) in the index. I know this is non-standard for e.g. searching, 
where a PhraseQuery can be built which makes use of the terms positions. 
However, I am not interested in searching, but rather in using the 
indexing terms for some statistics.

What would be an efficient way to do this? Is it possible to build 
phrases in a filter after tokenization?

Thanks,
roxana

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 14:14:15 2005
Return-Path: <java-user-return-15048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42327 invoked from network); 21 Jun 2005 14:14:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 14:14:15 -0000
Received: (qmail 48282 invoked by uid 500); 21 Jun 2005 14:13:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48133 invoked by uid 500); 21 Jun 2005 14:13:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48084 invoked by uid 99); 21 Jun 2005 14:13:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 07:13:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 07:13:57 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3A04513E2006; Tue, 21 Jun 2005 10:13:51 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 4E53D13E2005
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 10:13:27 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <Pine.LNX.4.61.0506211350520.4333@localhost.localdomain>
References: <Pine.LNX.4.61.0506211350520.4333@localhost.localdomain>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1368AA4B-5067-4A95-BA58-CE71C112C50B@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How do lucene IDs work with MultiReader and MultiSearcher?
Date: Tue, 21 Jun 2005 10:13:27 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 21, 2005, at 9:19 AM, Nick Burch wrote:

> Hi
>
> I've been scanning the JavaDocs, but I can't see anything on this.
>
>
> Let's say I have two indexes. Both have just been optimised, so  
> each have lucene IDs 1-10 in them.
>
> Now, I build a MultiSearcher over these two indexes. I search, get  
> back a Hits object, and from that a lucene ID
>
>
>> From my testing, it seems that the MultiSearcher has handily  
>> offset all
>>
> the lucene IDs from the second index, so they don't clash with the  
> first. It also seems that if I pass that ID to a MultiReader built  
> on the same set of indexes, I get the right document back.
>
> (i.e. my hits object gives me a lucene ID of 5 for my first hit,  
> and if I ask the multireader for document with lucene ID 5, I get  
> the same document)
>
>
> Is this always going to be the case? Do I simply have to ensure  
> that I open the MultiReader and MultiSearcher with the indexes in  
> the right order to ensure the lucene IDs will be identically  
> munged, or is it trickier than that?

lucenebook.com uses MultiSearcher and hits from different indexes are  
handled differently.  Blog hits are shown fully.  Book section hits  
are shown as snippets.  Here's how it's done:

       MultiSearcher searcher = (MultiSearcher) context.getAttribute 
("searcher");
       IndexReader[] readers = (IndexReader[]) context.getAttribute 
("readers");

       for (int i = startHit; i <= endHit; i++) {
         int position = i - 1;
         Document doc = hits.doc(position);
         int indexIndex = searcher.subSearcher(hits.id(position));
         IndexReader reader = readers[indexIndex];

         // ...
       }

MulitSearcher handles the offsetting based on the specific IndexReader.

Look at the MultiSearcher API.  There is also a subDoc() method to  
get the document number for it's specific index.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 14:29:24 2005
Return-Path: <java-user-return-15049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52174 invoked from network); 21 Jun 2005 14:29:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 14:29:23 -0000
Received: (qmail 79799 invoked by uid 500); 21 Jun 2005 14:29:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79765 invoked by uid 500); 21 Jun 2005 14:29:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79752 invoked by uid 99); 21 Jun 2005 14:29:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 07:29:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.220.33.2] (HELO webshield.solers.local) (65.220.33.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 07:29:16 -0700
Received: from ava-es3.solers.local(172.30.0.123) by webshield.solers.local via csmap 
	 id 00b5a7aa_e262_11d9_9a47_00304829cd86_32114;
	Tue, 21 Jun 2005 10:37:33 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5766D.9719AD9F"
Subject: Using FSDirectory after a write
Date: Tue, 21 Jun 2005 10:29:10 -0400
Message-ID: <78CC38B659D30A439315C39FA5257AAF2DC157@ava-es3.solers.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using FSDirectory after a write
Thread-Index: AcV2bc9IUTdGUS0xTm23bzP3RhcTsQ==
From: "Erdman, Jon" <Jon.Erdman@solers.com>
To: <java-user@lucene.apache.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5766D.9719AD9F
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I am working on an application that requires indexing of a relatively
constant stream of data.  All of the documentation that I have read
seems to indicate that writing to the index will not affect searching,
but I have run into some problems using FSDirectory in this case. =20

=20

It looks like FSDirectory only locks the database for long enough to
read the segment information and create input streams to the files.  It
does not try to read the input streams until an actual search occurs,
after the commit.lock has been released.  If the index is has been
modified since then the search will result in an IOException as it tries
to read the input stream to a file that no longer exists.  I have
included a full sample class below that will reproduce this error.

=20

Our application is currently creating a new FSDirectory instance for
each search.  This is causing a bottleneck when retrieving the lock and
loading the segments due to the large number of searches we receive.  Is
there anyway to reuse a FSDirectory in a safe way?  We have considered
using RAMDirectory instead but our index can grow too large to store in
memory.

=20

Thanks,

Jon

=20

=20

package search;

=20

import org.apache.lucene.analysis.Analyzer;

import org.apache.lucene.analysis.standard.StandardAnalyzer;

import org.apache.lucene.document.Document;

import org.apache.lucene.document.Field;

import org.apache.lucene.index.IndexWriter;

import org.apache.lucene.queryParser.ParseException;

import org.apache.lucene.queryParser.QueryParser;

import org.apache.lucene.search.Hits;

import org.apache.lucene.search.IndexSearcher;

import org.apache.lucene.search.Query;

import org.apache.lucene.store.Directory;

import org.apache.lucene.store.FSDirectory;

import java.io.IOException;

=20

public class LuceneLockTest {

=20

    public static final String INDEX_DIR =3D
"C:\\testIndex\\lucene-index";

=20

    public LuceneLockTest() {

    }

=20

    public static void main(String[] args) throws Exception {

        Directory directory =3D null;

        Directory ramDir =3D null;

        try {

            LuceneLockTest test =3D new LuceneLockTest();

            //initial index

            test.indexArticle("test 1", true);

            directory =3D test.getFSDirectory(INDEX_DIR, false);

            IndexSearcher is =3D new IndexSearcher(directory);

            System.out.println("Search 1: ");

            //initial search succeeds

            test.search ("test", is);

            test.indexArticle("test 2", false);

            System.out.println("Search 2: ");

            //search after second index fails with old searcher

            test.search("test", is);

        } finally {

            if (directory !=3D null) {

                directory.close();

            }

        }

    }

=20

    private Directory getFSDirectory(String indexDirectory, boolean
create) throws IOException {

        return FSDirectory.getDirectory(indexDirectory, create);

    }

=20

    private Directory getRAMDirectory(Directory dir) throws IOException
{

        return new RAMDirectory(dir);

    }

=20

    public void search(String searchCriteria, IndexSearcher is) throws
IOException, ParseException {

        Analyzer analyzer =3D new StandardAnalyzer();

        QueryParser parser =3D new QueryParser("title", analyzer);

        Query query =3D parser.parse(searchCriteria);

        Hits hits =3D is.search(query);

        for (int i =3D 0; i < hits.length(); i++) {

            Document doc =3D hits.doc(i);

            System.out.println(doc.getField("title"));

        }

        is.close();

    }

=20

    public void indexArticle(String title, boolean create)

            throws Exception {

        Document document =3D createDocument(title);

        indexDocument(document, create);

    }

=20

    private void indexDocument(Document document, boolean create) throws
Exception {

        IndexWriter writer =3D null;

        Directory directory =3D null;

        try {

            directory =3D getFSDirectory(INDEX_DIR, false);

            Analyzer analyzer =3D new StandardAnalyzer();

            writer =3D new IndexWriter(directory, analyzer, create);

            writer.addDocument(document);

            //writer.optimize();

        } finally {

            writer.close();

            directory.close();

        }

    }

=20

    private Document createDocument(String title) {

        Document document =3D new Document();

        document.add(Field.Text("title", title));

        return document;

    }

}


------_=_NextPart_001_01C5766D.9719AD9F--

From java-user-return-15050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 14:46:21 2005
Return-Path: <java-user-return-15050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60066 invoked from network); 21 Jun 2005 14:46:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 14:46:21 -0000
Received: (qmail 21407 invoked by uid 500); 21 Jun 2005 14:46:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21379 invoked by uid 500); 21 Jun 2005 14:46:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 7875 invoked by uid 99); 21 Jun 2005 14:42:38 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of MA2412@gmx.de designates 213.165.64.20 as permitted sender)
Date: Tue, 21 Jun 2005 16:42:34 +0200 (MEST)
From: "Markus Atteneder" <MA2412@gmx.de>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Updateing Documents:
X-Priority: 3 (Normal)
X-Authenticated: #1194641
Message-ID: <8776.1119364954@www57.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am looking for a SearchEngine for our Intranet and so i deal with Lucene.
I  have read the FAQ and some Postings and i got first experiences with it
and now i have some questions. 
1. Is lucene a suitable SearchEngine for a Intranetsearch? I've experienced
with poi and pdfbox for indexing Word/Excel/PDF files.
2. Files are changing frequently, so the indexing should run at least daily.
Is there a possibility out of the box to delete changed files from the index
and readd them to the index? I've read that documents only can be deleted if
you know the ID of the document in the index and that could change after a
optimization of the index. Is there a "best practice" for that? I thind a
full indexing every day is not a good solution because of the datavolume.
3. Does anyone know a project based on lucene that offers a complete
solution for a Intranetsearch?

-- 
Geschenkt: 3 Monate GMX ProMail gratis + 3 Ausgaben stern gratis
++ Jetzt anmelden & testen ++ http://www.gmx.net/de/go/promail ++

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 14:50:36 2005
Return-Path: <java-user-return-15051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61356 invoked from network); 21 Jun 2005 14:50:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 14:50:33 -0000
Received: (qmail 32117 invoked by uid 500); 21 Jun 2005 14:50:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32097 invoked by uid 500); 21 Jun 2005 14:50:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32083 invoked by uid 99); 21 Jun 2005 14:50:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 07:50:20 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.199 as permitted sender)
Received: from [64.233.170.199] (HELO rproxy.gmail.com) (64.233.170.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 07:50:22 -0700
Received: by rproxy.gmail.com with SMTP id 1so37281rny
        for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 07:50:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Z3oi5rKMZ0Agn+bON4vHZzG7Kl0adxIplGDahYCfbSiA3N65uKv6z1CIylEEF2kZ+NNsaLpG2XBcIBmsH5i4bj4ipM+MpA2ry1hyFSwQx10ZUzdraO0GjRz9y7TE8NHDjw9V3+A+atrDWlZy7ZFoYgsudAmi+WftBm/hiW7q6ps=
Received: by 10.38.103.16 with SMTP id a16mr21239rnc;
        Tue, 21 Jun 2005 07:50:19 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Tue, 21 Jun 2005 07:50:19 -0700 (PDT)
Message-ID: <7ca123910506210750676d015a@mail.gmail.com>
Date: Tue, 21 Jun 2005 07:50:19 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Updateing Documents:
In-Reply-To: <8776.1119364954@www57.gmx.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <8776.1119364954@www57.gmx.net>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

You may look at this website
http://www.zilverline.org

Cheers,

Jian

On 6/21/05, Markus Atteneder <MA2412@gmx.de> wrote:
> I am looking for a SearchEngine for our Intranet and so i deal with Lucen=
e.
> I  have read the FAQ and some Postings and i got first experiences with i=
t
> and now i have some questions.
> 1. Is lucene a suitable SearchEngine for a Intranetsearch? I've experienc=
ed
> with poi and pdfbox for indexing Word/Excel/PDF files.
> 2. Files are changing frequently, so the indexing should run at least dai=
ly.
> Is there a possibility out of the box to delete changed files from the in=
dex
> and readd them to the index? I've read that documents only can be deleted=
 if
> you know the ID of the document in the index and that could change after =
a
> optimization of the index. Is there a "best practice" for that? I thind a
> full indexing every day is not a good solution because of the datavolume.
> 3. Does anyone know a project based on lucene that offers a complete
> solution for a Intranetsearch?
>=20
> --
> Geschenkt: 3 Monate GMX ProMail gratis + 3 Ausgaben stern gratis
> ++ Jetzt anmelden & testen ++ http://www.gmx.net/de/go/promail ++
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 15:14:20 2005
Return-Path: <java-user-return-15052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73016 invoked from network); 21 Jun 2005 15:14:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 15:14:20 -0000
Received: (qmail 4065 invoked by uid 500); 21 Jun 2005 15:14:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4031 invoked by uid 500); 21 Jun 2005 15:14:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4013 invoked by uid 99); 21 Jun 2005 15:14:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 08:14:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 08:14:13 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D6D7213E2006; Tue, 21 Jun 2005 11:14:09 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 0558E13E2005
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 11:13:59 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42B81DC5.7000409@attentio.com>
References: <42B81DC5.7000409@attentio.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C6F0C73B-12F6-4AFC-9C63-49953651215C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: index phrases
Date: Tue, 21 Jun 2005 11:13:57 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 21, 2005, at 10:01 AM, Roxana Angheluta wrote:

> Dear all,
>
> I am using Lucene for indexing documents.
>
> I would like to include phrases (of a certain maximum length given  
> as a parameter) in the index. I know this is non-standard for e.g.  
> searching, where a PhraseQuery can be built which makes use of the  
> terms positions. However, I am not interested in searching, but  
> rather in using the indexing terms for some statistics.
>
> What would be an efficient way to do this? Is it possible to build  
> phrases in a filter after tokenization?

Roxana- could you give us a concrete example of what you're wanting  
to do?

A TokenFilter could certainly be used to aggregate multiple terms  
into a single term that represents a phrase.  This would happen  
during the analysis process, which occurs along with tokenization.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 15:14:30 2005
Return-Path: <java-user-return-15053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73089 invoked from network); 21 Jun 2005 15:14:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 15:14:29 -0000
Received: (qmail 5112 invoked by uid 500); 21 Jun 2005 15:14:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5072 invoked by uid 500); 21 Jun 2005 15:14:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5023 invoked by uid 99); 21 Jun 2005 15:14:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 08:14:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.51.67.154] (HELO mail.efoundry.com) (66.51.67.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 08:14:21 -0700
Received: from uraniumnew ([10.1.1.37])
        by mail.efoundry.com (Merak 8.0.3) with ESMTP id EFJ68587
        for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 11:14:18 -0400
From: "Paddy Kalathur" <paddy@efoundry.com>
To: <java-user@lucene.apache.org>
Subject: First time user Question 
Date: Tue, 21 Jun 2005 11:14:18 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcV2c+KXhiCwGC4qQwywHOqD9MtdQg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Message-Id: <20050621151421.E38EC10FB2D8@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I want Lucene to search as well as sort data . What I am not sure is, how to
index my data so that I can sort and search.

For example :  I have a 3 rows in the database with name field value
"Geoffrey Rush" , "Will Smith", and "Eva Smith" . 

I want to index these names so that :
1.If a user searches for "Smith" I get "Will Smith" and "Eva Smith" . 
2.If a user searches for "Eva Smith" I get only "Eva Smith". 
3.When I list all the names available in my Index I sort them in alphabetic
order.
4.The searches should be case insensitive.       

How should I index the data so that I can achieve the above.   
   

Paddy Kalathur
eFoundry Corp
http://www.efoundry.com
978-371-3325


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 16:21:09 2005
Return-Path: <java-user-return-15054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3116 invoked from network); 21 Jun 2005 16:21:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 16:21:09 -0000
Received: (qmail 53319 invoked by uid 500); 21 Jun 2005 16:20:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53129 invoked by uid 500); 21 Jun 2005 16:20:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53042 invoked by uid 99); 21 Jun 2005 16:20:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 09:20:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of george.abraham.lists@gmail.com designates 64.233.170.203 as permitted sender)
Received: from [64.233.170.203] (HELO rproxy.gmail.com) (64.233.170.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 09:20:46 -0700
Received: by rproxy.gmail.com with SMTP id g11so414989rne
        for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 09:20:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=rJvRrIvh82SJi7mFOYfwuHp3gFqTfrfTT9eXtwqqcMmTpHqw/lLHGgm++lyOR99DIXFxLuCKGQbk6QFuZJw+jy8FUnaExJxZ0WGyMIRdFzYfLXs8AEaeiCkM4sPLfK/Nos6tdoqhui3ctWtm8Px0EvY7CV3nenQYcYhDJAlkr74=
Received: by 10.38.24.51 with SMTP id 51mr2488634rnx;
        Tue, 21 Jun 2005 09:20:43 -0700 (PDT)
Received: by 10.38.10.62 with HTTP; Tue, 21 Jun 2005 09:20:43 -0700 (PDT)
Message-ID: <5fca8ecd0506210920756e5756@mail.gmail.com>
Date: Tue, 21 Jun 2005 12:20:43 -0400
From: George Abraham <george.abraham.lists@gmail.com>
Reply-To: George Abraham <george.abraham.lists@gmail.com>
To: java-user@lucene.apache.org
Subject: indexing values which might be null
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I am using Lucene to index database content. I have two questions:

1. Along with some of the fields that I want indexed, there are some
fields that I want stored (not indexed) in the index so as to return
with hits. However I also want to be able to sort a search result
using these non-indexed fields. Which method should I use in the Field
class then?
2. As is usual with some database content, sometimes fields that have
to be indexed turn out to be null. Using the Keyword method, the
indexing procedure gives me an error that 'value cannot be null'. How
do I then go about this?

Thanks,
George

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 16:46:26 2005
Return-Path: <java-user-return-15055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14717 invoked from network); 21 Jun 2005 16:46:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 16:46:25 -0000
Received: (qmail 13167 invoked by uid 500); 21 Jun 2005 16:46:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13134 invoked by uid 500); 21 Jun 2005 16:46:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13110 invoked by uid 99); 21 Jun 2005 16:46:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 09:46:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.169.158.23] (HELO mail.aurisp.de) (81.169.158.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 09:46:17 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.aurisp.de (Postfix) with ESMTP id 806B8B809
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 18:46:13 +0200 (CEST)
Received: from mail.aurisp.de ([127.0.0.1])
	by localhost (mail.aurisp.de [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id 00307-08 for <java-user@lucene.apache.org>;
	Tue, 21 Jun 2005 18:46:07 +0200 (CEST)
Received: from localhost (vb1-12.wlan.uni-bonn.de [131.220.201.12])
	by mail.aurisp.de (Postfix) with ESMTP id 1AD3DB807
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 18:46:07 +0200 (CEST)
Date: Tue, 21 Jun 2005 18:46:11 +0200
From: Sebastian Marius Kirsch <skirsch@sebastian-kirsch.org>
To: java-user@lucene.apache.org
Subject: Re: index phrases
Message-ID: <20050621164611.GA656@amok.local>
References: <42B81DC5.7000409@attentio.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <42B81DC5.7000409@attentio.com>
User-Agent: Mutt/1.4i
X-Virus-Scanned: by amavisd-maia-1.0.0-rc5 (Debian) at aurisp.de
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, Jun 21, 2005 at 04:01:41PM +0200, Roxana Angheluta wrote:
> I would like to include phrases (of a certain maximum length given as a 
> parameter) in the index. I know this is non-standard for e.g. searching, 
> where a PhraseQuery can be built which makes use of the terms positions. 
> However, I am not interested in searching, but rather in using the 
> indexing terms for some statistics.

I built a filter for exactly this purpose (statistics over word
combinations); I will send it to you directly. It uses some containers
from org.apache.commons.collections, so I guess it's not suitable yet
for inclusion in the lucene distribution.

The filter handles position increments > 1 by inserting fillers, so a
phrase "look at my car" will become "look _ _ car" when the words "at"
and "my" are filtered out from the stream, and "car" is assigned a
position increment of 3. But since StopFilter does not currently
produce position increments, you will hardly ever see them. The filter
does not handle position increments == 0. (But will produce them for
ngrams that start at the same position.)

I think there is also some stuff for ngram indexing in nutch.

Regards, Sebastian

-- 
Sebastian Kirsch <skirsch@sebastian-kirsch.org> [http://www.sebastian-kirsch.org/]

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 18:07:01 2005
Return-Path: <java-user-return-15056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93954 invoked from network); 21 Jun 2005 18:07:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 18:07:01 -0000
Received: (qmail 44472 invoked by uid 500); 21 Jun 2005 18:06:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44337 invoked by uid 500); 21 Jun 2005 18:06:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44182 invoked by uid 99); 21 Jun 2005 18:06:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 11:06:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 11:06:44 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6A32D13E2006; Tue, 21 Jun 2005 14:06:37 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 7F25713E2005
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 14:06:33 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050621164611.GA656@amok.local>
References: <42B81DC5.7000409@attentio.com> <20050621164611.GA656@amok.local>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C3DF255C-7D26-4966-B5FA-0C3EBB391112@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: index phrases
Date: Tue, 21 Jun 2005 14:06:31 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 21, 2005, at 12:46 PM, Sebastian Marius Kirsch wrote:

> On Tue, Jun 21, 2005 at 04:01:41PM +0200, Roxana Angheluta wrote:
>
>> I would like to include phrases (of a certain maximum length given  
>> as a
>> parameter) in the index. I know this is non-standard for e.g.  
>> searching,
>> where a PhraseQuery can be built which makes use of the terms  
>> positions.
>> However, I am not interested in searching, but rather in using the
>> indexing terms for some statistics.
>>
>
> I built a filter for exactly this purpose (statistics over word
> combinations); I will send it to you directly. It uses some containers
> from org.apache.commons.collections, so I guess it's not suitable yet
> for inclusion in the lucene distribution.

A contribution with dependencies is fine, especially Apache ones.  We  
can put this code in the contrib area if you'd like to contribute  
it.  If so, please create a Bugzilla issue and attach the sources.

     Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 18:59:33 2005
Return-Path: <java-user-return-15057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18666 invoked from network); 21 Jun 2005 18:59:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 18:59:33 -0000
Received: (qmail 47920 invoked by uid 500); 21 Jun 2005 18:59:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47745 invoked by uid 500); 21 Jun 2005 18:59:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47722 invoked by uid 99); 21 Jun 2005 18:59:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 11:59:23 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.117.150.145] (HELO mail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 11:59:25 -0700
Received: from webmail.controldocs.com (localhost [127.0.0.1])
	by mail.controldocs.com (8.12.11/8.12.11) with ESMTP id j5LIxLsI022809
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 13:59:21 -0500
Received: from 65.117.150.250
        (SquirrelMail authenticated user tareque);
        by webmail.controldocs.com with HTTP;
        Tue, 21 Jun 2005 13:59:21 -0500 (CDT)
Message-ID: <14187.65.117.150.250.1119380361.squirrel@65.117.150.250>
Date: Tue, 21 Jun 2005 13:59:21 -0500 (CDT)
Subject: Anomaly in defining search phrase
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3-RC1
X-Mailer: SquirrelMail/1.4.3-RC1
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Scanned-By: MIMEDefang 2.42
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I found a discrepancy in results for an identical search ("processing")
done with lucene and mysql. Seems like lucene is not returning results
where the search word is associated with "-"(hyphen) or '."(period). For
example it didn't returned result for a text that contained
"processing-7-bit" and "straighforwerd.processing" but mysql did. Is there
any settings issue or it is something unavoidable?

Thanks
Tareque
ControlDOCS

PS: In contrast to that, I previously found lucene returning some other
results those mysql didn't. For example search phrase associated with "'"
(apostrophe)  and "_"(underscore). I am not complaining about this. Rather
I found it preferable for my purpose.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 19:20:54 2005
Return-Path: <java-user-return-15058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37308 invoked from network); 21 Jun 2005 19:20:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 19:20:54 -0000
Received: (qmail 92902 invoked by uid 500); 21 Jun 2005 19:20:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92871 invoked by uid 500); 21 Jun 2005 19:20:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92858 invoked by uid 99); 21 Jun 2005 19:20:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 12:20:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 12:20:49 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 928AF13E2006; Tue, 21 Jun 2005 15:20:41 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id E3C9113E2005
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 15:20:35 -0400 (EDT)
In-Reply-To: <14187.65.117.150.250.1119380361.squirrel@65.117.150.250>
References: <14187.65.117.150.250.1119380361.squirrel@65.117.150.250>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <78EB0907-550D-4EFC-80F5-B22EC5C5E0E4@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Anomaly in defining search phrase
Date: Tue, 21 Jun 2005 15:20:33 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 21, 2005, at 2:59 PM, tareque@controldocs.com wrote:

> I found a discrepancy in results for an identical search  
> ("processing")
> done with lucene and mysql. Seems like lucene is not returning results
> where the search word is associated with "-"(hyphen) or  
> '."(period). For
> example it didn't returned result for a text that contained
> "processing-7-bit" and "straighforwerd.processing" but mysql did.  
> Is there
> any settings issue or it is something unavoidable?
>
> Thanks
> Tareque
> ControlDOCS
>
> PS: In contrast to that, I previously found lucene returning some  
> other
> results those mysql didn't. For example search phrase associated  
> with "'"
> (apostrophe)  and "_"(underscore). I am not complaining about this.  
> Rather
> I found it preferable for my purpose.

These all boil down to your choice of analyzer.  What analyzer are  
you using?

As you can see below, "processing-7-bit" is tokenized quite  
differently depending on the analyzer:

$ ant AnalyzerDemo
Buildfile: build.xml

     [input] String to analyze: [This string will be analyzed.]
processing-7-bit
      [echo] Running lia.analysis.AnalyzerDemo...
      [java] Analyzing "processing-7-bit"
      [java]   WhitespaceAnalyzer:
      [java]     [processing-7-bit]

      [java]   SimpleAnalyzer:
      [java]     [processing] [bit]

      [java]   StopAnalyzer:
      [java]     [processing] [bit]

      [java]   StandardAnalyzer:
      [java]     [processing-7-bit]

If you're using the StandardAnalyzer, you are not indexing the word  
"processing" at all.  Grab the source code from Lucene in Action at  
lucenebook.com and type "ant AnalyzerDemo" to try out the basic  
analyzers.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 20:56:39 2005
Return-Path: <java-user-return-15059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77388 invoked from network); 21 Jun 2005 20:56:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 20:56:38 -0000
Received: (qmail 55888 invoked by uid 500); 21 Jun 2005 20:56:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55784 invoked by uid 500); 21 Jun 2005 20:56:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55751 invoked by uid 99); 21 Jun 2005 20:56:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 13:56:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.161.4.46] (HELO smtp01corp.interwoven.com) (65.161.4.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 13:56:33 -0700
Received: from exbesv01.Interwoven.com (localhost [127.0.0.1])
	by smtp01corp.interwoven.com (8.12.10/8.12.10) with ESMTP id j5LKtxxb004640
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 13:56:28 -0700 (PDT)
Received: from exbecg01.Interwoven.com ([10.5.18.35]) by exbesv01.Interwoven.com with Microsoft SMTPSVC(6.0.3790.211);
	 Tue, 21 Jun 2005 13:56:08 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C576A1.FDCB8E7A"
Subject: Looking for someone to develop Thai Lucene Analyzer
Date: Tue, 21 Jun 2005 15:44:19 -0500
Message-ID: <91B8D84A21EFD746B9191AC1CFD6654901667DC8@exbecg01.Interwoven.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Looking for someone to develop Thai Lucene Analyzer
Thread-Index: AcV2of+FK2cICIyjQSmXXlMxTb1AgQ==
From: "Randy Darling" <rdarling@interwoven.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Jun 2005 20:56:08.0750 (UTC) FILETIME=[A60C54E0:01C576A3]
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C576A1.FDCB8E7A
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Not sure if this is the appropriate forum to ask this.
=20
We are currently looking for an implementation of a Lucene
Analyzer for the Thai language.
=20
We are looking to pay a developer/consultant for a Thai Analyzer
implementation.
=20
Thanks,
Randy
=20
=20

------_=_NextPart_001_01C576A1.FDCB8E7A--

From java-user-return-15060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 20:59:04 2005
Return-Path: <java-user-return-15060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78017 invoked from network); 21 Jun 2005 20:59:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 20:59:04 -0000
Received: (qmail 59078 invoked by uid 500); 21 Jun 2005 20:58:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59046 invoked by uid 500); 21 Jun 2005 20:58:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59032 invoked by uid 99); 21 Jun 2005 20:58:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 13:58:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.36] (HELO web31103.mail.mud.yahoo.com) (68.142.200.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 21 Jun 2005 13:58:59 -0700
Received: (qmail 17128 invoked by uid 60001); 21 Jun 2005 20:58:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=UGIriuORR1QOg+Fg+u/2dnnbbdahUgfYJ//nXFTS88Odmtta3DLNShPjKEZ4Qge/A2hEPenkKa+Fo+mZz1e2IzCusO1eUSnkYiotvgET5WwvM+ycjEjuE+BpjSQIN8/P8oNdLQk97Ky9KVmbiGS+oZqZeyEuajktPBp8IjoADY0=  ;
Message-ID: <20050621205856.17126.qmail@web31103.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31103.mail.mud.yahoo.com via HTTP; Tue, 21 Jun 2005 13:58:56 PDT
Date: Tue, 21 Jun 2005 13:58:56 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: First time user Question 
To: java-user@lucene.apache.org
In-Reply-To: <20050621151421.E38EC10FB2D8@asf.osuosl.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Paddy,

Just make sure you index the sortable fields without tokenizing them.
c.f. http://www.lucenebook.com/search?query=index+for+sorting

Otis


--- Paddy Kalathur <paddy@efoundry.com> wrote:

> I want Lucene to search as well as sort data . What I am not sure is,
> how to
> index my data so that I can sort and search.
> 
> For example :  I have a 3 rows in the database with name field value
> "Geoffrey Rush" , "Will Smith", and "Eva Smith" . 
> 
> I want to index these names so that :
> 1.If a user searches for "Smith" I get "Will Smith" and "Eva Smith" .
> 
> 2.If a user searches for "Eva Smith" I get only "Eva Smith". 
> 3.When I list all the names available in my Index I sort them in
> alphabetic
> order.
> 4.The searches should be case insensitive.       
> 
> How should I index the data so that I can achieve the above.   
>    
> 
> Paddy Kalathur
> eFoundry Corp
> http://www.efoundry.com
> 978-371-3325



____________________________________________________________________
Simpy -- simpy.com -- tags, social bookmarks, personal search engine

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 21:02:07 2005
Return-Path: <java-user-return-15061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79240 invoked from network); 21 Jun 2005 21:02:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 21:02:07 -0000
Received: (qmail 69039 invoked by uid 500); 21 Jun 2005 21:01:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68838 invoked by uid 500); 21 Jun 2005 21:01:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68800 invoked by uid 99); 21 Jun 2005 21:01:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 14:01:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.34] (HELO web31101.mail.mud.yahoo.com) (68.142.200.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 21 Jun 2005 14:01:53 -0700
Received: (qmail 84503 invoked by uid 60001); 21 Jun 2005 21:01:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=c8JaxP9ivHBrv8zToq68Q759zCqXKOqpygVW9TwBdREuEjXe3eGyE5FMnEfywuHXL/uMtS8I7Y+cAAe7KIPrLCcNWVuq9dZ1VKJca+5NaVmWa77quJW/5uifW0BPsWMIFfItDSjnBQxuXCX59agjUoFZLjgtQAgeV7cjKtTgOds=  ;
Message-ID: <20050621210150.84501.qmail@web31101.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31101.mail.mud.yahoo.com via HTTP; Tue, 21 Jun 2005 14:01:50 PDT
Date: Tue, 21 Jun 2005 14:01:50 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: indexing values which might be null
To: java-user@lucene.apache.org,
  George Abraham <george.abraham.lists@gmail.com>
In-Reply-To: <5fca8ecd0506210920756e5756@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi George,

A field value needs to be indexed if you want to sort by it - see
http://www.lucenebook.com/search?query=index+for+sorting .

As for null fields, you could use an empty string, or better yet, some
"custom field value" that means "NULL" for your application.

Otis


--- George Abraham <george.abraham.lists@gmail.com> wrote:

> Hi,
> I am using Lucene to index database content. I have two questions:
> 
> 1. Along with some of the fields that I want indexed, there are some
> fields that I want stored (not indexed) in the index so as to return
> with hits. However I also want to be able to sort a search result
> using these non-indexed fields. Which method should I use in the
> Field
> class then?
> 2. As is usual with some database content, sometimes fields that have
> to be indexed turn out to be null. Using the Keyword method, the
> indexing procedure gives me an error that 'value cannot be null'. How
> do I then go about this?
> 
> Thanks,
> George


____________________________________________________________________
Simpy -- simpy.com -- tags, social bookmarks, personal search engine

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 21:16:37 2005
Return-Path: <java-user-return-15062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83388 invoked from network); 21 Jun 2005 21:16:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 21:16:37 -0000
Received: (qmail 5242 invoked by uid 500); 21 Jun 2005 21:16:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5200 invoked by uid 500); 21 Jun 2005 21:16:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5187 invoked by uid 99); 21 Jun 2005 21:16:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 14:16:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.51.67.154] (HELO mail.efoundry.com) (66.51.67.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 14:16:32 -0700
Received: from uraniumnew ([10.1.1.37])
        by mail.efoundry.com (Merak 8.0.3) with ESMTP id EFJ68587
        for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 17:16:25 -0400
From: "Paddy Kalathur" <paddy@efoundry.com>
To: <java-user@lucene.apache.org>
Subject: RE: First time user Question 
Date: Tue, 21 Jun 2005 17:16:25 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <20050621205856.17126.qmail@web31103.mail.mud.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcV2pAuGTMYLGZryTfagMAKHv5yMhQAAW2gw
Message-Id: <20050621211632.5451C10FB2D7@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If I use Field.Keyword("name", "Will Smith") to index the name, will I be
able to search for it if a user searched for just "will" or "Smith" ?  I
think Field.Keyword does not tokenize and hence I should be able to sort it
also . 


-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Tuesday, June 21, 2005 4:59 PM
To: java-user@lucene.apache.org
Subject: Re: First time user Question 

Hi Paddy,

Just make sure you index the sortable fields without tokenizing them.
c.f. http://www.lucenebook.com/search?query=index+for+sorting

Otis


--- Paddy Kalathur <paddy@efoundry.com> wrote:

> I want Lucene to search as well as sort data . What I am not sure is, 
> how to index my data so that I can sort and search.
> 
> For example :  I have a 3 rows in the database with name field value 
> "Geoffrey Rush" , "Will Smith", and "Eva Smith" .
> 
> I want to index these names so that :
> 1.If a user searches for "Smith" I get "Will Smith" and "Eva Smith" .
> 
> 2.If a user searches for "Eva Smith" I get only "Eva Smith". 
> 3.When I list all the names available in my Index I sort them in 
> alphabetic order.
> 4.The searches should be case insensitive.       
> 
> How should I index the data so that I can achieve the above.   
>    
> 
> Paddy Kalathur
> eFoundry Corp
> http://www.efoundry.com
> 978-371-3325



____________________________________________________________________
Simpy -- simpy.com -- tags, social bookmarks, personal search engine

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 21:26:32 2005
Return-Path: <java-user-return-15063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86390 invoked from network); 21 Jun 2005 21:26:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 21:26:31 -0000
Received: (qmail 27291 invoked by uid 500); 21 Jun 2005 21:26:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27265 invoked by uid 500); 21 Jun 2005 21:26:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27248 invoked by uid 99); 21 Jun 2005 21:26:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 14:26:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.169.158.23] (HELO mail.aurisp.de) (81.169.158.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 14:26:25 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.aurisp.de (Postfix) with ESMTP id 3F18BB809
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 23:26:22 +0200 (CEST)
Received: from mail.aurisp.de ([127.0.0.1])
	by localhost (mail.aurisp.de [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id 22102-07 for <java-user@lucene.apache.org>;
	Tue, 21 Jun 2005 23:26:17 +0200 (CEST)
Received: from localhost (p50886238.dip.t-dialin.net [80.136.98.56])
	by mail.aurisp.de (Postfix) with ESMTP id 5D737B807
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 23:26:16 +0200 (CEST)
Date: Tue, 21 Jun 2005 23:26:20 +0200
From: Sebastian Marius Kirsch <skirsch@sebastian-kirsch.org>
To: java-user@lucene.apache.org
Subject: Re: index phrases
Message-ID: <20050621212620.GC656@amok.local>
References: <42B81DC5.7000409@attentio.com> <20050621164611.GA656@amok.local> <C3DF255C-7D26-4966-B5FA-0C3EBB391112@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <C3DF255C-7D26-4966-B5FA-0C3EBB391112@ehatchersolutions.com>
User-Agent: Mutt/1.4i
X-Virus-Scanned: by amavisd-maia-1.0.0-rc5 (Debian) at aurisp.de
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, Jun 21, 2005 at 02:06:31PM -0400, Erik Hatcher wrote:
> A contribution with dependencies is fine, especially Apache ones.  We  
> can put this code in the contrib area if you'd like to contribute  
> it.  If so, please create a Bugzilla issue and attach the sources.

Hi Erik,

thanks for the suggestion; I posted the code at

http://issues.apache.org/bugzilla/show_bug.cgi?id=35456

Comments welcome. (And sorry for the messed-up indenting on two of the
source files. Please re-indent.)

Regards, Sebastian

-- 
Sebastian Kirsch <skirsch@sebastian-kirsch.org> [http://www.sebastian-kirsch.org/]

NOTE: New email address! Please update your address book.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 21 22:45:37 2005
Return-Path: <java-user-return-15064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12434 invoked from network); 21 Jun 2005 22:45:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jun 2005 22:45:37 -0000
Received: (qmail 27631 invoked by uid 500); 21 Jun 2005 22:45:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26745 invoked by uid 500); 21 Jun 2005 22:45:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26732 invoked by uid 99); 21 Jun 2005 22:45:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 15:45:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yourabi@gmail.com designates 64.233.184.197 as permitted sender)
Received: from [64.233.184.197] (HELO wproxy.gmail.com) (64.233.184.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 15:45:32 -0700
Received: by wproxy.gmail.com with SMTP id 36so1828931wra
        for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 15:45:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=e/EuJnFfdAtoHYcmq0CR7DxPgFY91tuqZBvfDC63hqHOiPrYAxEMZd5vdVpcU98q+oh4PAWPGyXPUSx6sz4kRwFCwchBgaqhtpOGlmECQ8kNuEvwBgEo3drfplK0vO/6rkMRw2CfV5pEU67VS6EE+zEKcghYHupLnlSDo3dRUwo=
Received: by 10.54.2.26 with SMTP id 26mr72657wrb;
        Tue, 21 Jun 2005 15:45:29 -0700 (PDT)
Received: by 10.54.14.24 with HTTP; Tue, 21 Jun 2005 15:45:29 -0700 (PDT)
Message-ID: <b13f3f060506211545608ab14d@mail.gmail.com>
Date: Tue, 21 Jun 2005 15:45:29 -0700
From: Yousef Ourabi <yourabi@gmail.com>
Reply-To: Yousef Ourabi <yourabi@gmail.com>
To: java-user@lucene.apache.org
Subject: Junit Tests for Indexer / Searcher
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey All:
So Obviously the lucene dev-team uses unit tests when building the
api, but what are people's experiences with using unit tests to test
that indexing is working, that searching is working. Are there
pre-developed test-suits for such things, so that I can make a change
to a some search parameter, run the test-suite and be certain that
lucene works?

I greatly appreciate any help.

Best,
Yousef

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 01:30:15 2005
Return-Path: <java-user-return-15065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57622 invoked from network); 22 Jun 2005 01:30:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 01:30:07 -0000
Received: (qmail 8411 invoked by uid 500); 22 Jun 2005 01:29:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2935 invoked by uid 500); 22 Jun 2005 01:28:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 482 invoked by uid 99); 22 Jun 2005 01:28:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 18:28:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 17:57:21 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DktSL-000572-Hn
	for java-user@lucene.apache.org; Wed, 22 Jun 2005 02:51:05 +0200
Received: from 209-6-140-168.c3-0.bkl-ubr2.sbo-bkl.ma.cable.rcn.com ([209.6.140.168])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 02:51:05 +0200
Received: from rnewson by 209-6-140-168.c3-0.bkl-ubr2.sbo-bkl.ma.cable.rcn.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 02:51:05 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Robert Newson <rnewson@connected.com>
Subject:  Re: indexing values which might be null
Date:  Tue, 21 Jun 2005 20:57:02 -0400
Lines: 54
Message-ID: <d9acld$67g$1@sea.gmane.org>
References:  <5fca8ecd0506210920756e5756@mail.gmail.com> <20050621210150.84501.qmail@web31101.mail.mud.yahoo.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: 209-6-140-168.c3-0.bkl-ubr2.sbo-bkl.ma.cable.rcn.com
User-Agent: Debian Thunderbird 1.0.2 (X11/20050331)
X-Accept-Language: en-us, en
In-Reply-To: <20050621210150.84501.qmail@web31101.mail.mud.yahoo.com>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


An approach I've used successfully is to add a separate field called 
'empty' and include the names of other fields that are empty, e.g,

empty: subject

You can search for;

+empty:subject

for messages with empty (null) subjects.

This approach means you don't need to think of a magical value that (you 
hope) doesn't match other legitimate values. Additionally, you only add 
one new field to your index for any number of null-able fields.

B.

Otis Gospodnetic wrote:
> Hi George,
> 
> A field value needs to be indexed if you want to sort by it - see
> http://www.lucenebook.com/search?query=index+for+sorting .
> 
> As for null fields, you could use an empty string, or better yet, some
> "custom field value" that means "NULL" for your application.
> 
> Otis
> 
> 
> --- George Abraham <george.abraham.lists@gmail.com> wrote:
> 
> 
>>Hi,
>>I am using Lucene to index database content. I have two questions:
>>
>>1. Along with some of the fields that I want indexed, there are some
>>fields that I want stored (not indexed) in the index so as to return
>>with hits. However I also want to be able to sort a search result
>>using these non-indexed fields. Which method should I use in the
>>Field
>>class then?
>>2. As is usual with some database content, sometimes fields that have
>>to be indexed turn out to be null. Using the Keyword method, the
>>indexing procedure gives me an error that 'value cannot be null'. How
>>do I then go about this?
>>
>>Thanks,
>>George
> 
> 
> 
> ____________________________________________________________________
> Simpy -- simpy.com -- tags, social bookmarks, personal search engine


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 02:20:41 2005
Return-Path: <java-user-return-15066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78510 invoked from network); 22 Jun 2005 02:20:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 02:20:39 -0000
Received: (qmail 66058 invoked by uid 500); 22 Jun 2005 02:19:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63052 invoked by uid 500); 22 Jun 2005 02:19:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55169 invoked by uid 99); 22 Jun 2005 02:18:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 19:18:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jun 2005 17:20:28 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E609D13E2006; Tue, 21 Jun 2005 20:20:22 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id A2B9B13E2005
	for <java-user@lucene.apache.org>; Tue, 21 Jun 2005 20:19:55 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <b13f3f060506211545608ab14d@mail.gmail.com>
References: <b13f3f060506211545608ab14d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <799A9EDD-6947-4EAD-B4F6-2614191E5A15@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Junit Tests for Indexer / Searcher
Date: Tue, 21 Jun 2005 20:19:54 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 21, 2005, at 6:45 PM, Yousef Ourabi wrote:

> Hey All:
> So Obviously the lucene dev-team uses unit tests when building the
> api, but what are people's experiences with using unit tests to test
> that indexing is working, that searching is working. Are there
> pre-developed test-suits for such things, so that I can make a change
> to a some search parameter, run the test-suite and be certain that
> lucene works?

I don't know of any pre-developed test suites for something like you  
describe.  Unit testing with Lucene is incredibly easy thanks to  
RAMDirectory.  Could you elaborate a bit more on what you're after  
that couldn't be done in a handful of lines of code already?

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 07:22:56 2005
Return-Path: <java-user-return-15067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59527 invoked from network); 22 Jun 2005 07:22:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 07:22:56 -0000
Received: (qmail 53432 invoked by uid 500); 22 Jun 2005 07:22:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53154 invoked by uid 500); 22 Jun 2005 07:22:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53141 invoked by uid 99); 22 Jun 2005 07:22:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 00:22:50 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of MA2412@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jun 2005 00:22:51 -0700
Received: (qmail 8348 invoked by uid 0); 22 Jun 2005 07:22:48 -0000
Received: from 80.240.228.94 by www76.gmx.net with HTTP;
	Wed, 22 Jun 2005 09:22:48 +0200 (MEST)
Date: Wed, 22 Jun 2005 09:22:48 +0200 (MEST)
From: "Markus Atteneder" <MA2412@gmx.de>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Question for Wildcard Search:
X-Priority: 3 (Normal)
X-Authenticated: #1194641
Message-ID: <12704.1119424968@www76.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

There is a possibility for searching with the "*" and "?" wildcard at the
end and in the middle of a search string, but not at the beginning, is there
way to do this?

-- 
Geschenkt: 3 Monate GMX ProMail gratis + 3 Ausgaben stern gratis
++ Jetzt anmelden & testen ++ http://www.gmx.net/de/go/promail ++

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 07:43:45 2005
Return-Path: <java-user-return-15068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66551 invoked from network); 22 Jun 2005 07:43:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 07:43:44 -0000
Received: (qmail 90330 invoked by uid 500); 22 Jun 2005 07:43:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90246 invoked by uid 500); 22 Jun 2005 07:43:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90201 invoked by uid 99); 22 Jun 2005 07:43:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 00:43:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.65.18.194] (HELO gwserv161.interdoms.net) (69.65.18.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 00:43:17 -0700
Received: from ws97.brusselsvillage.be ([194.183.227.97] helo=[10.10.91.251])
	by gwserv161.interdoms.net with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.50)
	id 1DkztE-0000Eh-9n
	for java-user@lucene.apache.org; Wed, 22 Jun 2005 09:43:16 +0200
Message-ID: <42B9168F.10501@attentio.com>
Date: Wed, 22 Jun 2005 09:43:11 +0200
From: Roxana Angheluta <roxana@attentio.com>
User-Agent: Mozilla Thunderbird 1.0 (X11/20041207)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: index phrases
References: <42B81DC5.7000409@attentio.com> <C6F0C73B-12F6-4AFC-9C63-49953651215C@ehatchersolutions.com>
In-Reply-To: <C6F0C73B-12F6-4AFC-9C63-49953651215C@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - gwserv161.interdoms.net
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - attentio.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


>> Dear all,
>>
>> I am using Lucene for indexing documents.
>>
>> I would like to include phrases (of a certain maximum length given  
>> as a parameter) in the index. I know this is non-standard for e.g.  
>> searching, where a PhraseQuery can be built which makes use of the  
>> terms positions. However, I am not interested in searching, but  
>> rather in using the indexing terms for some statistics.
>>
>> What would be an efficient way to do this? Is it possible to build  
>> phrases in a filter after tokenization?
>
> Roxana- could you give us a concrete example of what you're wanting  
> to do?
>
> A TokenFilter could certainly be used to aggregate multiple terms  
> into a single term that represents a phrase.  This would happen  
> during the analysis process, which occurs along with tokenization.
Hi Erik, thanks for the answer.
I would like to index the following document:

This is a sample document.

something like:
"this"
"is"
"a"
"sample"
"document"
"this is"
"is a"
"a sample"
"this a"
"is sample"
"a document"
"sample document"
"this is a"
"is a sample"
"a sample document"

In this example the maximum length of an n-gram is 3 and the length of 
the moving window accross text is also 3.
In fact I would like a full analyzer to do the job, i.e. define a 
strategy to filter out/clean spurious n-grams: e.g. remove n-grams made 
out only/partially of stopwords, eliminate just stopwords from the n-gram.

Sebastian has kindly provided his code, which does the job.

roxana

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 08:04:08 2005
Return-Path: <java-user-return-15069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75160 invoked from network); 22 Jun 2005 08:04:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 08:04:08 -0000
Received: (qmail 16707 invoked by uid 500); 22 Jun 2005 08:03:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16685 invoked by uid 500); 22 Jun 2005 08:03:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16672 invoked by uid 99); 22 Jun 2005 08:03:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 01:03:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 01:04:00 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id D1E5F23C45
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 10:03:56 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 03066-05 for <java-user@lucene.apache.org>;
 Wed, 22 Jun 2005 10:03:56 +0200 (CEST)
Received: from tucholsky.office.tanto.de (tucholsky.office.tanto.de [10.0.0.35])
	by mail.tanto.de (Postfix) with ESMTP id B3B3E23BF5
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 10:03:56 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@localhost [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j5M81YNu027165
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 10:01:34 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) id j5M81WJ0027161;
	Wed, 22 Jun 2005 10:01:32 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17081.6873.177777.675795@tanto-xipolis.de>
Date: Wed, 22 Jun 2005 10:01:29 +0200
To: java-user@lucene.apache.org
Subject: Re: Question for Wildcard Search:
In-Reply-To: <12704.1119424968@www76.gmx.net>
References: <12704.1119424968@www76.gmx.net>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Markus Atteneder writes:
> There is a possibility for searching with the "*" and "?" wildcard at the
> end and in the middle of a search string, but not at the beginning, is there
> way to do this?
> 
Sure. Simply index reversed words.

The reason why QP prohibits wildcards at the beginning is performance.
If there is some prefix, only terms using this prefix need to be examined,
if they match the wildcard.
IIRC you can use wildcards in the beginning if you create the query using
the api but it will be slow.

So the performant solution is to have an additional field containing the
tokens in reversed character order.
Won't help for *foo* though.

HTH
	Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 10:06:49 2005
Return-Path: <java-user-return-15070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34445 invoked from network); 22 Jun 2005 10:06:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 10:06:48 -0000
Received: (qmail 62900 invoked by uid 500); 22 Jun 2005 10:06:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62829 invoked by uid 500); 22 Jun 2005 10:06:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62793 invoked by uid 99); 22 Jun 2005 10:06:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 03:06:20 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DATE_IN_PAST_96_XX
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 03:06:17 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 22 Jun 2005 12:06:13 +0200
Message-ID: <41D7D5A5.7080601@ifit.uni-klu.ac.at>
Date: Sun, 02 Jan 2005 12:06:13 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: index phrases
References: <42B81DC5.7000409@attentio.com> <C6F0C73B-12F6-4AFC-9C63-49953651215C@ehatchersolutions.com> <42B9168F.10501@attentio.com>
In-Reply-To: <42B9168F.10501@attentio.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 22 Jun 2005 10:06:13.0540 (UTC) FILETIME=[05813E40:01C57712]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

 Ciau,

 Ce mai faci?
Cred ca te-am mai intrebat ce lucrezi,  dar am uitat.
In viitorul apropiat s-ar putea sa lucrez si eu putin in directia text 
mining
si bineinteles ca am sa refolosesc ce e implementat in lucene.

 S-ar putea ca munca noastra sa aiba ceva puncte comune .. te 
intereseaza sa
mai schimbam cate o opinie din cand in cand?

 Numai bine,

 Sergiu

Roxana Angheluta wrote:

>
>>> Dear all,
>>>
>>> I am using Lucene for indexing documents.
>>>
>>> I would like to include phrases (of a certain maximum length given  
>>> as a parameter) in the index. I know this is non-standard for e.g.  
>>> searching, where a PhraseQuery can be built which makes use of the  
>>> terms positions. However, I am not interested in searching, but  
>>> rather in using the indexing terms for some statistics.
>>>
>>> What would be an efficient way to do this? Is it possible to build  
>>> phrases in a filter after tokenization?
>>
>>
>> Roxana- could you give us a concrete example of what you're wanting  
>> to do?
>>
>> A TokenFilter could certainly be used to aggregate multiple terms  
>> into a single term that represents a phrase.  This would happen  
>> during the analysis process, which occurs along with tokenization.
>
> Hi Erik, thanks for the answer.
> I would like to index the following document:
>
> This is a sample document.
>
> something like:
> "this"
> "is"
> "a"
> "sample"
> "document"
> "this is"
> "is a"
> "a sample"
> "this a"
> "is sample"
> "a document"
> "sample document"
> "this is a"
> "is a sample"
> "a sample document"
>
> In this example the maximum length of an n-gram is 3 and the length of 
> the moving window accross text is also 3.
> In fact I would like a full analyzer to do the job, i.e. define a 
> strategy to filter out/clean spurious n-grams: e.g. remove n-grams 
> made out only/partially of stopwords, eliminate just stopwords from 
> the n-gram.
>
> Sebastian has kindly provided his code, which does the job.
>
> roxana
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 11:04:59 2005
Return-Path: <java-user-return-15071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61693 invoked from network); 22 Jun 2005 11:04:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 11:04:59 -0000
Received: (qmail 64725 invoked by uid 500); 22 Jun 2005 11:04:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64685 invoked by uid 500); 22 Jun 2005 11:04:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64672 invoked by uid 99); 22 Jun 2005 11:04:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 04:04:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.48.164.4] (HELO atitlan.it) (212.48.164.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jun 2005 04:04:53 -0700
Received: (qmail 30047 invoked by uid 506); 22 Jun 2005 11:01:42 -0000
Received: from unknown (HELO Fujitsu) (62.94.201.41)
  by atitlan.it with SMTP; 22 Jun 2005 11:01:42 -0000
Message-ID: <00d801c5771a$342f0940$2f00a8c0@Fujitsu>
From: "Giovanni Dima" <g.dima@atitlan.it>
To: <java-user@lucene.apache.org>
Subject: How lucene and nucth work together?
Date: Wed, 22 Jun 2005 13:04:47 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00D5_01C5772A.F77C2FD0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00D5_01C5772A.F77C2FD0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi!

We're trying to use nutch as web-spider and lucene as indexer and =
searcher.
Nutch and Lucene work good separately, but we do not succeed to link =
lucene to the index created by nutch.
We've modified the file "configuring.jsp"  specifying in the =
"indexLocation" the index file created by Nutch, but we obtain always 0 =
results in the result-list.

We don't find documentation about nutch and lucene work together.


Tanks for your help

Best Regards


Giovanni

------=_NextPart_000_00D5_01C5772A.F77C2FD0--


From java-user-return-15072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 12:13:23 2005
Return-Path: <java-user-return-15072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98459 invoked from network); 22 Jun 2005 12:13:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 12:13:23 -0000
Received: (qmail 71897 invoked by uid 500); 22 Jun 2005 12:13:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71830 invoked by uid 500); 22 Jun 2005 12:13:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71794 invoked by uid 99); 22 Jun 2005 12:13:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 05:13:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.207.134] (HELO web32203.mail.mud.yahoo.com) (68.142.207.134)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jun 2005 05:13:16 -0700
Received: (qmail 16801 invoked by uid 60001); 22 Jun 2005 12:13:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=DSCVK6GyQYGbEhZuATDksxUO0eYWFPqNsNG0Treu6mqvAx2WLZIcv5SAqsT2kvK/uujdckaoJhtcqo2JUSy31CyeHkxb54lwZQ7nLpo+L6agTTYhstFtOb2iOIlPUP8HUxbhyDnSPpcKK4Abvq1k4b0tESbYOsLoDlSxiP0jG3g=  ;
Message-ID: <20050622121313.16799.qmail@web32203.mail.mud.yahoo.com>
Received: from [12.21.236.10] by web32203.mail.mud.yahoo.com via HTTP; Wed, 22 Jun 2005 05:13:13 PDT
Date: Wed, 22 Jun 2005 05:13:13 -0700 (PDT)
From: Brian <okmred@yahoo.com>
Subject: results link 
To: java-user@lucene.apache.org
In-Reply-To: <85358726-EFD0-4204-978D-E27A05E08CCC@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

All,
    I've been able to create an index across the
network. However when I do my search, the link I'm
trying to generate show's null. What it actually
points to is http://localhost/mywebapp

Where should I be looking in order to have my link
generated correctly.

Thanks in advance.
Brian


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 12:34:39 2005
Return-Path: <java-user-return-15073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10177 invoked from network); 22 Jun 2005 12:34:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 12:34:39 -0000
Received: (qmail 10712 invoked by uid 500); 22 Jun 2005 12:34:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10687 invoked by uid 500); 22 Jun 2005 12:34:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10674 invoked by uid 99); 22 Jun 2005 12:34:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 05:34:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 05:34:34 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7F7A113E2005; Wed, 22 Jun 2005 08:34:28 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id E235513E2005
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 08:34:07 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050622121313.16799.qmail@web32203.mail.mud.yahoo.com>
References: <20050622121313.16799.qmail@web32203.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FC5D8D01-2B7C-4BAB-BC33-917158BEA982@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: results link 
Date: Wed, 22 Jun 2005 08:34:02 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 22, 2005, at 8:13 AM, Brian wrote:
> All,
>     I've been able to create an index across the
> network. However when I do my search, the link I'm
> trying to generate show's null. What it actually
> points to is http://localhost/mywebapp
>
> Where should I be looking in order to have my link
> generated correctly.

Brian - you'll have to give us some more details than this.  What  
does your Document look like you received back from Hits?  You can do  
a .toString on it to get a snapshot of it.  What does your code look  
like that is generating the link.

Keep in mind that probably 99.9% of the folks on this list have never  
run the Lucene web demo nor know its internals, so you'll have to be  
specific with some (short) code snippets to get good answers here.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 12:37:45 2005
Return-Path: <java-user-return-15074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12596 invoked from network); 22 Jun 2005 12:37:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 12:37:44 -0000
Received: (qmail 16034 invoked by uid 500); 22 Jun 2005 12:37:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16009 invoked by uid 500); 22 Jun 2005 12:37:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15995 invoked by uid 99); 22 Jun 2005 12:37:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 05:37:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 05:37:39 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j5MCbhS16986
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 07:37:43 -0500
Message-ID: <42B95B8F.30604@getopt.org>
Date: Wed, 22 Jun 2005 14:37:35 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How lucene and nucth work together?
References: <00d801c5771a$342f0940$2f00a8c0@Fujitsu>
In-Reply-To: <00d801c5771a$342f0940$2f00a8c0@Fujitsu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Giovanni Dima wrote:
> Hi!
> 
> We're trying to use nutch as web-spider and lucene as indexer and searcher.
> Nutch and Lucene work good separately, but we do not succeed to link lucene to the index created by nutch.
> We've modified the file "configuring.jsp"  specifying in the "indexLocation" the index file created by Nutch, but we obtain always 0 results in the result-list.
> 
> We don't find documentation about nutch and lucene work together.

Nutch already uses Lucene, in fact it wouldn't be able to do without it. 
Nutch creates so called "segments" (meaning is different from Lucene 
segments), which can be indexed to produce Lucene indexes, which are 
then used for searching.

I suggest to use Luke (http://www.getopt.org/luke) to investigate such 
index first, before using it in a separate application. Nutch uses 
non-standard analyzer, so that the terms in the index are sometimes 
different (e.g. some words are combined into bi-grams).

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 12:42:40 2005
Return-Path: <java-user-return-15075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15332 invoked from network); 22 Jun 2005 12:42:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 12:42:40 -0000
Received: (qmail 25093 invoked by uid 500); 22 Jun 2005 12:42:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25069 invoked by uid 500); 22 Jun 2005 12:42:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25056 invoked by uid 99); 22 Jun 2005 12:42:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 05:42:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.207.146] (HELO web32215.mail.mud.yahoo.com) (68.142.207.146)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jun 2005 05:42:34 -0700
Received: (qmail 7925 invoked by uid 60001); 22 Jun 2005 12:42:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=jvnGPX0ML+SCipK+p+oJFSSnVAzSZ8uf2XICJJi1HPnoKekr3M8BAFdec6N2uLTBYz0yQXMP7Iw53UUrfQb00SvA4P5XWtqzYdBEtnBnGB1lnQaPcWChFMKF870N9wG2rSTpm3+0Mr+bSbxmBQcOyuywsFKttgUrKIm5Vpj7SmY=  ;
Message-ID: <20050622124231.7923.qmail@web32215.mail.mud.yahoo.com>
Received: from [12.21.236.10] by web32215.mail.mud.yahoo.com via HTTP; Wed, 22 Jun 2005 05:42:31 PDT
Date: Wed, 22 Jun 2005 05:42:31 -0700 (PDT)
From: Brian <okmred@yahoo.com>
Subject: Re: results link 
To: java-user@lucene.apache.org
In-Reply-To: <FC5D8D01-2B7C-4BAB-BC33-917158BEA982@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Never mind, disregard the original request.

Erik, dude, do you not sleep?

Anyway I figured it out. As for the demo...hehe, you
guys were right, I basically started from scratch
yesterday.

Thanks all.
I'm sure I'll have more questions later, but for now,
I'm on a roll!!

:-)

B


--- Erik Hatcher <erik@ehatchersolutions.com> wrote:

> 
> On Jun 22, 2005, at 8:13 AM, Brian wrote:
> > All,
> >     I've been able to create an index across the
> > network. However when I do my search, the link I'm
> > trying to generate show's null. What it actually
> > points to is http://localhost/mywebapp
> >
> > Where should I be looking in order to have my link
> > generated correctly.
> 
> Brian - you'll have to give us some more details
> than this.  What  
> does your Document look like you received back from
> Hits?  You can do  
> a .toString on it to get a snapshot of it.  What
> does your code look  
> like that is generating the link.
> 
> Keep in mind that probably 99.9% of the folks on
> this list have never  
> run the Lucene web demo nor know its internals, so
> you'll have to be  
> specific with some (short) code snippets to get good
> answers here.
> 
>      Erik
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



		
____________________________________________________ 
Yahoo! Sports 
Rekindle the Rivalries. Sign up for Fantasy Football 
http://football.fantasysports.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 12:49:45 2005
Return-Path: <java-user-return-15076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19552 invoked from network); 22 Jun 2005 12:49:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 12:49:45 -0000
Received: (qmail 42121 invoked by uid 500); 22 Jun 2005 12:49:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42075 invoked by uid 500); 22 Jun 2005 12:49:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42046 invoked by uid 99); 22 Jun 2005 12:49:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 05:49:38 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of MA2412@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jun 2005 05:49:38 -0700
Received: (qmail 18136 invoked by uid 0); 22 Jun 2005 12:49:35 -0000
Received: from 80.240.228.94 by www69.gmx.net with HTTP;
	Wed, 22 Jun 2005 14:49:35 +0200 (MEST)
Date: Wed, 22 Jun 2005 14:49:35 +0200 (MEST)
From: "Markus Atteneder" <MA2412@gmx.de>
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <17081.6873.177777.675795@tanto-xipolis.de>
Subject: Re: Question for Wildcard Search:
X-Priority: 3 (Normal)
X-Authenticated: #1194641
Message-ID: <2432.1119444575@www69.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> > 
> Sure. Simply index reversed words.
> 
Since I do not have much experience with lucene can you explain it more
exactly for me? THX!

-- 
Weitersagen: GMX DSL-Flatrates mit Tempo-Garantie!
Ab 4,99 Euro/Monat: http://www.gmx.net/de/go/dsl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 13:06:49 2005
Return-Path: <java-user-return-15077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30459 invoked from network); 22 Jun 2005 13:06:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 13:06:49 -0000
Received: (qmail 68169 invoked by uid 500); 22 Jun 2005 13:06:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67929 invoked by uid 500); 22 Jun 2005 13:06:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67877 invoked by uid 99); 22 Jun 2005 13:06:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 06:06:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 06:06:31 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EDA8D13E2006; Wed, 22 Jun 2005 09:06:22 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 04F6713E2005
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 09:05:24 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <17081.6873.177777.675795@tanto-xipolis.de>
References: <12704.1119424968@www76.gmx.net> <17081.6873.177777.675795@tanto-xipolis.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D3188A0C-B427-4286-9D1C-AE5E98BFBE84@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Question for Wildcard Search:
Date: Wed, 22 Jun 2005 09:05:24 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 22, 2005, at 4:01 AM, Morus Walter wrote:

> Markus Atteneder writes:
>
>> There is a possibility for searching with the "*" and "?" wildcard  
>> at the
>> end and in the middle of a search string, but not at the  
>> beginning, is there
>> way to do this?
>>
>>
> Sure. Simply index reversed words.
>
> The reason why QP prohibits wildcards at the beginning is performance.
> If there is some prefix, only terms using this prefix need to be  
> examined,
> if they match the wildcard.
> IIRC you can use wildcards in the beginning if you create the query  
> using
> the api but it will be slow.
>
> So the performant solution is to have an additional field  
> containing the
> tokens in reversed character order.
> Won't help for *foo* though.

There is a technique from the book Managing Gigabytes that I've  
mentioned here before (in February).  Here's a snippet from it:

----
...technique I found in the book Managing Gigabytes, making  
"*string*" queries drastically more efficient for searching (though  
also impacting index size).  Take the term "cat".  It would be  
indexed with all rotated variations with an end of word marker added:

     cat$
     at$c
     t$ca
     $cat

The query for "*at*" would be preprocessed and rotated such that the  
wildcards are collapsed at the end to search for "at*" as a  
PrefixQuery.  A wildcard in the middle of a string like "c*t" would  
become a prefix query for "t$c*".
----

Anyone tried this technique with Lucene?

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 13:28:22 2005
Return-Path: <java-user-return-15078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58731 invoked from network); 22 Jun 2005 13:28:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 13:28:22 -0000
Received: (qmail 13067 invoked by uid 500); 22 Jun 2005 13:28:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13039 invoked by uid 500); 22 Jun 2005 13:28:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13026 invoked by uid 99); 22 Jun 2005 13:28:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 06:28:15 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_30_40,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.48.164.4] (HELO atitlan.it) (212.48.164.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jun 2005 06:28:16 -0700
Received: (qmail 1762 invoked by uid 506); 22 Jun 2005 13:25:06 -0000
Received: from unknown (HELO Fujitsu) (62.94.201.41)
  by atitlan.it with SMTP; 22 Jun 2005 13:25:06 -0000
Message-ID: <00c701c5772e$3ca1e110$2f00a8c0@Fujitsu>
From: "Giovanni Dima" <g.dima@atitlan.it>
To: <java-user@lucene.apache.org>
Subject: Re:Re:How lucene and nucth work together?
Date: Wed, 22 Jun 2005 15:28:11 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00C4_01C5773E.FFC8E200"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00C4_01C5773E.FFC8E200
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Andrzej, tanks for the reply.
I'm sorry but i've another (similar) question...
Lucene and nutch use the same parser and analyzer? I seems to understand =
that the segments created from the nutch  are different from those =
creating from lucene.
I've installed nutch and I've created folders db and segments. Then, as =
explained in the tutorial, i've created a new database, injected urls =
into it, generated a fetchlist from the database and indexed the segment =
with the command
bin/nutch index ..
May I use as lucene's "indexLocation" the index folder created in this =
way?=20
If I may not, how can I make a valid index for lucene?=20

Thanks in advance.

Giovanni
Atitlan Engineering, Pisa
------=_NextPart_000_00C4_01C5773E.FFC8E200--


From java-user-return-15079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 14:49:26 2005
Return-Path: <java-user-return-15079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13304 invoked from network); 22 Jun 2005 14:49:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 14:49:25 -0000
Received: (qmail 48536 invoked by uid 500); 22 Jun 2005 14:49:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48488 invoked by uid 500); 22 Jun 2005 14:49:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48473 invoked by uid 99); 22 Jun 2005 14:49:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 07:49:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of george.abraham.lists@gmail.com designates 64.233.170.194 as permitted sender)
Received: from [64.233.170.194] (HELO rproxy.gmail.com) (64.233.170.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 07:49:18 -0700
Received: by rproxy.gmail.com with SMTP id g11so125159rne
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 07:49:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=tV+jKWR9JbSrd6JS8BzHTwyGeGK87Rpx5F9ycRstOYKQLo9jQPEkrjrD5wplmJ5eaoaHIHzvJ6nBdEdvTaKNCpFMCjy7+HEdzFfC41XEdPjGuYEoEX47ypDGbjMfeKkuvnzPar3OXK5Ezdt150V4J+oxnCQDfSBH7gOq74SE5Vg=
Received: by 10.38.59.50 with SMTP id h50mr369225rna;
        Wed, 22 Jun 2005 07:49:16 -0700 (PDT)
Received: by 10.38.10.62 with HTTP; Wed, 22 Jun 2005 07:49:16 -0700 (PDT)
Message-ID: <5fca8ecd0506220749225221d8@mail.gmail.com>
Date: Wed, 22 Jun 2005 10:49:16 -0400
From: George Abraham <george.abraham.lists@gmail.com>
Reply-To: George Abraham <george.abraham.lists@gmail.com>
To: java-user@lucene.apache.org
Subject: querying multiple fields
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

All,
Forgive me for the basic question. When you are querying multiple
fields using QueryParser, what is the exact code?

I tried QueryParser.parse(queryString, "SearchTerms", analyzer) where
queryString was "SearchTerms:visnu temple ImageExistsBit:1",
SearchTerms and ImageExistsBit being the two fields I want searched.
However it does not seem to do what I want it to do.

TIA,
George

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 15:35:11 2005
Return-Path: <java-user-return-15080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50507 invoked from network); 22 Jun 2005 15:35:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 15:35:10 -0000
Received: (qmail 51288 invoked by uid 500); 22 Jun 2005 15:35:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51270 invoked by uid 500); 22 Jun 2005 15:35:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51257 invoked by uid 99); 22 Jun 2005 15:35:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 08:35:05 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.117.150.145] (HELO mail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 08:35:06 -0700
Received: from webmail.controldocs.com (localhost [127.0.0.1])
	by mail.controldocs.com (8.12.11/8.12.11) with ESMTP id j5MFZ3dP031921
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 10:35:03 -0500
Received: from 65.117.150.250
        (SquirrelMail authenticated user tareque);
        by webmail.controldocs.com with HTTP;
        Wed, 22 Jun 2005 10:35:03 -0500 (CDT)
Message-ID: <28218.65.117.150.250.1119454503.squirrel@65.117.150.250>
In-Reply-To: <78EB0907-550D-4EFC-80F5-B22EC5C5E0E4@ehatchersolutions.com>
References: <14187.65.117.150.250.1119380361.squirrel@65.117.150.250>
    <78EB0907-550D-4EFC-80F5-B22EC5C5E0E4@ehatchersolutions.com>
Date: Wed, 22 Jun 2005 10:35:03 -0500 (CDT)
Subject: Re: Anomaly in defining search phrase
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3-RC1
X-Mailer: SquirrelMail/1.4.3-RC1
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>
> On Jun 21, 2005, at 2:59 PM, tareque@controldocs.com wrote:
>
>> I found a discrepancy in results for an identical search
>> ("processing")
>> done with lucene and mysql. Seems like lucene is not returning results
>> where the search word is associated with "-"(hyphen) or
>> '."(period). For
>> example it didn't returned result for a text that contained
>> "processing-7-bit" and "straighforwerd.processing" but mysql did.
>> Is there
>> any settings issue or it is something unavoidable?
>>
>> Thanks
>> Tareque
>> ControlDOCS
>>
>> PS: In contrast to that, I previously found lucene returning some
>> other
>> results those mysql didn't. For example search phrase associated
>> with "'"
>> (apostrophe)  and "_"(underscore). I am not complaining about this.
>> Rather
>> I found it preferable for my purpose.
>
> These all boil down to your choice of analyzer.  What analyzer are
> you using?
>
> As you can see below, "processing-7-bit" is tokenized quite
> differently depending on the analyzer:
>
> $ ant AnalyzerDemo
> Buildfile: build.xml
>
>      [input] String to analyze: [This string will be analyzed.]
> processing-7-bit
>       [echo] Running lia.analysis.AnalyzerDemo...
>       [java] Analyzing "processing-7-bit"
>       [java]   WhitespaceAnalyzer:
>       [java]     [processing-7-bit]
>
>       [java]   SimpleAnalyzer:
>       [java]     [processing] [bit]
>
>       [java]   StopAnalyzer:
>       [java]     [processing] [bit]
>
>       [java]   StandardAnalyzer:
>       [java]     [processing-7-bit]
>
> If you're using the StandardAnalyzer, you are not indexing the word
> "processing" at all.  Grab the source code from Lucene in Action at
> lucenebook.com and type "ant AnalyzerDemo" to try out the basic
> analyzers.
>
>      Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


Thanks! Using StopAnalyzer helped solving the problem. Is there any detail
documentation of what each of this analyzers do?

Tareque


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 15:37:02 2005
Return-Path: <java-user-return-15081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51648 invoked from network); 22 Jun 2005 15:37:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 15:37:02 -0000
Received: (qmail 55650 invoked by uid 500); 22 Jun 2005 15:36:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55459 invoked by uid 500); 22 Jun 2005 15:36:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55445 invoked by uid 99); 22 Jun 2005 15:36:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 08:36:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 08:36:57 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j5MFb4S07216
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 10:37:04 -0500
Message-ID: <42B98595.4090205@getopt.org>
Date: Wed, 22 Jun 2005 17:36:53 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How lucene and nucth work together?
References: <00c701c5772e$3ca1e110$2f00a8c0@Fujitsu>
In-Reply-To: <00c701c5772e$3ca1e110$2f00a8c0@Fujitsu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Giovanni Dima wrote:
> Andrzej, tanks for the reply. I'm sorry but i've another (similar)
> question... Lucene and nutch use the same parser and analyzer?

No, they don't.

> I seems to understand that the segments created from the nutch  are
> different from those creating from lucene. I've installed nutch and

They are not simply different - they represent completely different data 
structures, only accidentally named the same...

> I've created folders db and segments. Then, as explained in the
> tutorial, i've created a new database, injected urls into it,
> generated a fetchlist from the database and indexed the segment with
> the command bin/nutch index .. May I use as lucene's "indexLocation"
> the index folder created in this way? If I may not, how can I make a
> valid index for lucene?

In Lucene API there is no such thing as "indexLocation". You probably 
refer to the search demo application, included in Lucene distribution. 
If that's the case, then the answer is no - it won't work with indexes 
created by Nutch. However, if you use Lucene API, you can work with them 
just fine - they are normal Lucene indexes, just the field names, and 
analyzers used are different.

I suggest you to look inside the demo app., and see how Lucene's API is 
used.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 16:14:33 2005
Return-Path: <java-user-return-15082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78368 invoked from network); 22 Jun 2005 16:14:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 16:14:33 -0000
Received: (qmail 50725 invoked by uid 500); 22 Jun 2005 16:14:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50688 invoked by uid 500); 22 Jun 2005 16:14:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50674 invoked by uid 99); 22 Jun 2005 16:14:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 09:14:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 09:14:28 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9F4BE13E2006; Wed, 22 Jun 2005 12:14:22 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id BA5CA13E2005
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 12:14:14 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <5fca8ecd0506220749225221d8@mail.gmail.com>
References: <5fca8ecd0506220749225221d8@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1E207881-C5F9-48A3-A2B4-D8A949CD0742@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: querying multiple fields
Date: Wed, 22 Jun 2005 12:14:14 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 22, 2005, at 10:49 AM, George Abraham wrote:

> All,
> Forgive me for the basic question. When you are querying multiple
> fields using QueryParser, what is the exact code?
>
> I tried QueryParser.parse(queryString, "SearchTerms", analyzer) where
> queryString was "SearchTerms:visnu temple ImageExistsBit:1",
> SearchTerms and ImageExistsBit being the two fields I want searched.
> However it does not seem to do what I want it to do.

What analyzer are you using?   What is the .toString of the generated  
Query instance?  How did you index those fields?

Without answering those, it'd be guess work to offer any help.

     Erik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 16:29:09 2005
Return-Path: <java-user-return-15083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87296 invoked from network); 22 Jun 2005 16:29:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 16:29:08 -0000
Received: (qmail 87614 invoked by uid 500); 22 Jun 2005 16:29:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87589 invoked by uid 500); 22 Jun 2005 16:29:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87567 invoked by uid 99); 22 Jun 2005 16:29:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 09:29:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 09:29:04 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8E57C13E2005; Wed, 22 Jun 2005 12:28:57 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 678CA13E2005
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 12:28:36 -0400 (EDT)
In-Reply-To: <28218.65.117.150.250.1119454503.squirrel@65.117.150.250>
References: <14187.65.117.150.250.1119380361.squirrel@65.117.150.250> <78EB0907-550D-4EFC-80F5-B22EC5C5E0E4@ehatchersolutions.com> <28218.65.117.150.250.1119454503.squirrel@65.117.150.250>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <22190B9C-0843-490C-9ACD-FD0FE5534B08@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Anomaly in defining search phrase
Date: Wed, 22 Jun 2005 12:28:36 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 22, 2005, at 11:35 AM, tareque@controldocs.com wrote:
> Thanks! Using StopAnalyzer helped solving the problem. Is there any  
> detail
> documentation of what each of this analyzers do?

Here are some pointers:

     - Lucene's javadocs give a brief description, such as <http:// 
lucene.apache.org/java/docs/api/org/apache/lucene/analysis/ 
StopAnalyzer.html>

     - The source code is the ultimate documentation: <http:// 
svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/java/org/apache/ 
lucene/analysis/StopAnalyzer.java?rev=168970&view=markup> - look at  
the tokenStream method

     - Several Lucene articles: <http://wiki.apache.org/jakarta- 
lucene/Resources> with the most relevant being my java.net article  
here: <http://today.java.net/pub/a/today/2003/07/30/LuceneIntro.html>  
where the AnalysisDemo code is provided.

     - And last but certainly not least, "Lucene in Action" :)  You  
can search for details of analyzers at the lucenebook.com site, like  
this: <http://www.lucenebook.com/search?query=StopAnalyzer> The  
Analysis chapter in LIA provides in-depth details of each of the  
built-in analyzers.

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 16:33:55 2005
Return-Path: <java-user-return-15084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90112 invoked from network); 22 Jun 2005 16:33:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 16:33:55 -0000
Received: (qmail 98398 invoked by uid 500); 22 Jun 2005 16:33:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98368 invoked by uid 500); 22 Jun 2005 16:33:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98355 invoked by uid 99); 22 Jun 2005 16:33:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 09:33:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO zproxy.gmail.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 09:33:50 -0700
Received: by zproxy.gmail.com with SMTP id 9so462388nzo
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 09:33:48 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:content-type:content-transfer-encoding;
        b=rEqH7JKpCfWR4wdIxjwYQPyrLMA1LwpEhD8tHNg6BMu0xDqOctCGk2bn8s3jeDzu9rlGVwxdkG7NOmIylTd6XEUMQDTePzkQy2usRrs/Bi/vbcba9L5+do8U7Dgkk+CkRYwKZGoIqaoGbGbC5VZ7z0iFR1fHAhD1RlZAoEIW5cE=
Received: by 10.36.108.16 with SMTP id g16mr662314nzc;
        Wed, 22 Jun 2005 09:33:47 -0700 (PDT)
Received: from ?172.22.19.82? ([129.176.197.15])
        by mx.gmail.com with ESMTP id 15sm969668nzo.2005.06.22.09.33.47;
        Wed, 22 Jun 2005 09:33:47 -0700 (PDT)
Message-ID: <42B992EA.1060705@gmail.com>
Date: Wed, 22 Jun 2005 11:33:46 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: weight score based on a fields value
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is there a straightforward way that I could change the scoring algorithm 
such that it would break ties based on looking at the value of a field?  
I'm not actually searching for the value in the field, so its not part 
of the query - I just want documents that have a particular field set to 
a particular value to score higher than documents that don't have that 
field set to that value - in cases where otherwise, they both would have 
scored the same.

Thanks,

Dan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 16:40:22 2005
Return-Path: <java-user-return-15085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94079 invoked from network); 22 Jun 2005 16:40:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 16:40:21 -0000
Received: (qmail 9473 invoked by uid 500); 22 Jun 2005 16:40:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9273 invoked by uid 500); 22 Jun 2005 16:40:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9258 invoked by uid 99); 22 Jun 2005 16:40:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 09:40:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [66.163.170.82] (HELO smtp812.mail.sc5.yahoo.com) (66.163.170.82)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jun 2005 09:40:16 -0700
Received: (qmail 28331 invoked from network); 22 Jun 2005 16:40:11 -0000
Received: from unknown (HELO ?192.168.1.42?) (kkrugler@pacbell.net@63.200.72.125 with plain)
  by smtp812.mail.sc5.yahoo.com with SMTP; 22 Jun 2005 16:40:11 -0000
Mime-Version: 1.0
Message-Id: <p06210281bedf2a365443@[192.168.1.42]>
In-Reply-To: <17081.6873.177777.675795@tanto-xipolis.de>
References: <12704.1119424968@www76.gmx.net>
 <17081.6873.177777.675795@tanto-xipolis.de>
Date: Wed, 22 Jun 2005 07:48:55 -0700
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: Question for Wildcard Search:
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>Markus Atteneder writes:
>>  There is a possibility for searching with the "*" and "?" wildcard at the
>>  end and in the middle of a search string, but not at the beginning, is there
>>  way to do this?
>>
>Sure. Simply index reversed words.
>
>The reason why QP prohibits wildcards at the beginning is performance.
>If there is some prefix, only terms using this prefix need to be examined,
>if they match the wildcard.
>IIRC you can use wildcards in the beginning if you create the query using
>the api but it will be slow.
>
>So the performant solution is to have an additional field containing the
>tokens in reversed character order.
>Won't help for *foo* though.

You can also index ngrams - say 3-grams. Every word gets tokenized & 
indexed as a sequence of three letter sub-strings. E.g. "tokenized" 
would be indexed as "tok" "oke" "ken" "eni" "niz" "ize" "zed".

That would help you find *foo*, but not *ha*.

-- Ken
-- 
Ken Krugler
TransPac Software, Inc.
<http://www.transpac.com>
+1 530-470-9200

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 17:02:46 2005
Return-Path: <java-user-return-15086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5922 invoked from network); 22 Jun 2005 17:02:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 17:02:45 -0000
Received: (qmail 44406 invoked by uid 500); 22 Jun 2005 17:02:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44383 invoked by uid 500); 22 Jun 2005 17:02:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44370 invoked by uid 99); 22 Jun 2005 17:02:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 10:02:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.76] (HELO web31114.mail.mud.yahoo.com) (68.142.201.76)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jun 2005 10:02:39 -0700
Received: (qmail 37925 invoked by uid 60001); 22 Jun 2005 17:02:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=jMIBHQfWa2CXlDKupY//avAP61GSyi1rXRgWY4v55Dz0tADEoTVx2DV0i/5gSissj+e6POR7QNRRAGukkkyemH1sFfbnD3Mt/Coyq+TuVaEq1FIFR3+IiNI3QNlkqCyRYrnnZkKAMpgdVEdjrs2r7l1/DUg21r4+GvEBC3vTodg=  ;
Message-ID: <20050622170235.37923.qmail@web31114.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31114.mail.mud.yahoo.com via HTTP; Wed, 22 Jun 2005 10:02:35 PDT
Date: Wed, 22 Jun 2005 10:02:35 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: querying multiple fields
To: java-user@lucene.apache.org,
  George Abraham <george.abraham.lists@gmail.com>
In-Reply-To: <5fca8ecd0506220749225221d8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

George,

You can use MultiFieldQueryParser instead of QueryParser.

Otis


--- George Abraham <george.abraham.lists@gmail.com> wrote:

> All,
> Forgive me for the basic question. When you are querying multiple
> fields using QueryParser, what is the exact code?
> 
> I tried QueryParser.parse(queryString, "SearchTerms", analyzer) where
> queryString was "SearchTerms:visnu temple ImageExistsBit:1",
> SearchTerms and ImageExistsBit being the two fields I want searched.
> However it does not seem to do what I want it to do.
> 
> TIA,
> George
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 17:13:42 2005
Return-Path: <java-user-return-15087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9640 invoked from network); 22 Jun 2005 17:13:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 17:13:42 -0000
Received: (qmail 62137 invoked by uid 500); 22 Jun 2005 17:13:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62112 invoked by uid 500); 22 Jun 2005 17:13:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 77327 invoked by uid 500); 22 Jun 2005 16:25:56 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ac080KDYLxvhGM82juIOdYETWOL4RF70+QK0Wbax8CQaUpVwAwdw2hgjmYibf9498eSsj2slsACPcZ0aJdzoV7FfSLk+KO7D++YZzP1DKisarDqKlUT6KFQWH5JIAOgmkcPa+C4RtSMDyGVnxws5IQwc9BSJqoMCK95KZYa+7kc=  ;
Message-ID: <20050622162548.37109.qmail@web26107.mail.ukl.yahoo.com>
Date: Wed, 22 Jun 2005 17:25:48 +0100 (BST)
From: Peter Lewis <william_siwel@yahoo.co.uk>
Subject: Indexing emails from Exchange
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2120721361-1119457548=:35824"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-2120721361-1119457548=:35824
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi all
 
Has anyone got an example of how to index emails from Microsoft Exchange using Lucene?
 
TIA
 
William

		
---------------------------------
How much free photo storage do you get? Store your holiday snaps for FREE with Yahoo! Photos. Get Yahoo! Photos
--0-2120721361-1119457548=:35824--

From java-user-return-15088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 17:16:02 2005
Return-Path: <java-user-return-15088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10146 invoked from network); 22 Jun 2005 17:16:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 17:16:02 -0000
Received: (qmail 66709 invoked by uid 500); 22 Jun 2005 17:15:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66688 invoked by uid 500); 22 Jun 2005 17:15:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 8588 invoked by uid 99); 22 Jun 2005 16:39:39 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Message-ID: <0AF2CD6C1B288D4BB2724288590DBCB34973BC@www.prismanet.ch>
From: Urs Eichmann <urs.eichmann@prismanet.ch>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Weird Problem with Lucene
Date: Wed, 22 Jun 2005 18:39:26 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C57748.F3B51A10"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C57748.F3B51A10
Content-Type: text/plain

My index consists of about 26 fields. I have a very wierd problem: On
certain fields, I cannot search - i.e. the search always returns 0
documents. I used Luke's Lucene Index Toolbox, and the behaviour there is
weird as well:
 
I do the following in Luke's Program:
 
a) go to the Documents Tab
b) Enter term field-name: unit and value="DOSE", hit "Show all docs"
c) A list of 5 documents is displayed, which is ok. The query is unit:DOSE.
The parsed query is unit:DOSE and the rewritten query is unit:dose
d) Then I just hit the "Search" button without changing the query
e) now the result list is empty. The only difference I can see is that the
parsed query is unit:dose now instead of unit:DOSE.
 
Does anyone have an explanation for this behaviour? The problem is, the same
behaviour is in my program, e.g. if I look for "unit:DOSE", I will get no
documents returned. However, on many of the other 26 fields, it runs OK, and
I can't see any difference in the field definitions.
 
I had this problem in 1.4.3, changed now to 1.9 RC1, but the problem is
still the same.
 
Many thanks for any help!
Urs
 

------_=_NextPart_001_01C57748.F3B51A10--

From java-user-return-15089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 17:24:11 2005
Return-Path: <java-user-return-15089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12188 invoked from network); 22 Jun 2005 17:24:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 17:24:11 -0000
Received: (qmail 76789 invoked by uid 500); 22 Jun 2005 17:24:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76553 invoked by uid 500); 22 Jun 2005 17:24:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76539 invoked by uid 99); 22 Jun 2005 17:24:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 10:24:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of george.abraham.lists@gmail.com designates 64.233.170.199 as permitted sender)
Received: from [64.233.170.199] (HELO rproxy.gmail.com) (64.233.170.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 10:24:03 -0700
Received: by rproxy.gmail.com with SMTP id g11so158711rne
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 10:24:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=UBItOGSQaqG3Ijn/F3cy1RKf+PxNZ4gRYlm9ft4pTlcqhXrXahiljOsRvtCfZQrpxHqusJmasbUqAHmOuR3GcnW3TtE/YV/E9N5/Izw7aEnH/m94Tb5+cLLG+NjW6khke9DxWL8CwKyxUagpOyRyWb6oaPl4fgsFX5jjL+JWxJ0=
Received: by 10.38.67.28 with SMTP id p28mr442654rna;
        Wed, 22 Jun 2005 10:24:01 -0700 (PDT)
Received: by 10.38.10.62 with HTTP; Wed, 22 Jun 2005 10:24:01 -0700 (PDT)
Message-ID: <5fca8ecd050622102423fe8921@mail.gmail.com>
Date: Wed, 22 Jun 2005 13:24:01 -0400
From: George Abraham <george.abraham.lists@gmail.com>
Reply-To: George Abraham <george.abraham.lists@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: querying multiple fields
In-Reply-To: <20050622170235.37923.qmail@web31114.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <5fca8ecd0506220749225221d8@mail.gmail.com>
	 <20050622170235.37923.qmail@web31114.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis,
I think MultiFieldQueryParser (if I am not mistaken) uses the same
query string to search multiple fields. Let me know if it is
otherwise.

Erik,
Let me see if I can answer those questions. Here are some code
snippets, by the way.

FOR INDEX
IndexWriter writer =3D new IndexWriter(indexDir, new StopAnalyzer(), true);
while (rs.next()){ //rs is a database resultset I am looping over
  Document doc =3D new Document();
  doc.add(Field.Keyword("ObjectID", ObjectID));
  doc.add(Field.Keyword("ImageExistsBit",
ImageExistsBit));//ImageExistsBit is 1 or 0
  doc.add(Field.Text("SearchTerms", SearchTerms));
  writer.addDocument(doc);
  writer.optimize();
  writer.close();
}

FOR SEARCH
searcher =3D new IndexSearcher(IndexReader.open(indexPath) );
Analyzer analyzer =3D new StopAnalyzer();
luceneQuery =3D QueryParser.parse(queryString, "SearchTerms", analyzer);
hits =3D searcher.search(luceneQuery);
System.out.println("Found " + hits.length() + " document(s).");

What I want: I want all the ObjectIDs that have the term 'visnu
temple' in the SearchTerms field and has ImageExistsBit=3D1. So the
queryString above is: SearchTerms:\"visnu temple\" ImageExistsBit:1".
The .toString() for this query is SearchTerms:"visnu temple"

Thanks,
George



On 6/22/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> George,
>=20
> You can use MultiFieldQueryParser instead of QueryParser.
>=20
> Otis
>=20
>=20
> --- George Abraham <george.abraham.lists@gmail.com> wrote:
>=20
> > All,
> > Forgive me for the basic question. When you are querying multiple
> > fields using QueryParser, what is the exact code?
> >
> > I tried QueryParser.parse(queryString, "SearchTerms", analyzer) where
> > queryString was "SearchTerms:visnu temple ImageExistsBit:1",
> > SearchTerms and ImageExistsBit being the two fields I want searched.
> > However it does not seem to do what I want it to do.
> >
> > TIA,
> > George
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 17:25:15 2005
Return-Path: <java-user-return-15090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12815 invoked from network); 22 Jun 2005 17:25:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 17:25:15 -0000
Received: (qmail 79528 invoked by uid 500); 22 Jun 2005 17:25:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79452 invoked by uid 500); 22 Jun 2005 17:25:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79427 invoked by uid 99); 22 Jun 2005 17:25:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 10:25:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [66.163.171.25] (HELO smtp838.mail.sc5.yahoo.com) (66.163.171.25)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jun 2005 10:25:10 -0700
Received: (qmail 95460 invoked from network); 22 Jun 2005 17:25:07 -0000
Received: from unknown (HELO ?192.168.1.42?) (kkrugler@pacbell.net@63.200.72.125 with plain)
  by smtp838.mail.sc5.yahoo.com with SMTP; 22 Jun 2005 17:25:07 -0000
Mime-Version: 1.0
Message-Id: <p0621028bbedf4eeaee88@[192.168.1.42]>
In-Reply-To:
 <91B8D84A21EFD746B9191AC1CFD6654901667DC8@exbecg01.Interwoven.com>
References:
 <91B8D84A21EFD746B9191AC1CFD6654901667DC8@exbecg01.Interwoven.com>
Date: Wed, 22 Jun 2005 10:23:53 -0700
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: Looking for someone to develop Thai Lucene Analyzer
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>Not sure if this is the appropriate forum to ask this.
>
>We are currently looking for an implementation of a Lucene
>Analyzer for the Thai language.
>
>We are looking to pay a developer/consultant for a Thai Analyzer
>implementation.

Note that ICU has support for Thai word breaking, and is available in 
a Java implementation, so this shouldn't be all that hard. See 
<http://www-306.ibm.com/software/globalization/topics/thaiusabilities/text.jsp>

-- Ken
-- 
Ken Krugler
TransPac Software, Inc.
<http://www.transpac.com>
+1 530-470-9200

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 17:43:13 2005
Return-Path: <java-user-return-15091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20348 invoked from network); 22 Jun 2005 17:43:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 17:43:13 -0000
Received: (qmail 7901 invoked by uid 500); 22 Jun 2005 17:43:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7528 invoked by uid 500); 22 Jun 2005 17:43:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7511 invoked by uid 99); 22 Jun 2005 17:43:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 10:43:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 10:43:08 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 02C7713E2005; Wed, 22 Jun 2005 13:43:02 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id C1EED13E2005
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 13:42:55 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <5fca8ecd050622102423fe8921@mail.gmail.com>
References: <5fca8ecd0506220749225221d8@mail.gmail.com> <20050622170235.37923.qmail@web31114.mail.mud.yahoo.com> <5fca8ecd050622102423fe8921@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <684FA0EE-D73E-4FB2-A032-280D5F8D054B@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: querying multiple fields
Date: Wed, 22 Jun 2005 13:42:55 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Jun 22, 2005, at 1:24 PM, George Abraham wrote:
> Otis,
> I think MultiFieldQueryParser (if I am not mistaken) uses the same
> query string to search multiple fields. Let me know if it is
> otherwise.
>
> Erik,
> Let me see if I can answer those questions. Here are some code
> snippets, by the way.
>
> FOR INDEX
> IndexWriter writer = new IndexWriter(indexDir, new StopAnalyzer(),  
> true);
> while (rs.next()){ //rs is a database resultset I am looping over
>   Document doc = new Document();
>   doc.add(Field.Keyword("ObjectID", ObjectID));
>   doc.add(Field.Keyword("ImageExistsBit",
> ImageExistsBit));//ImageExistsBit is 1 or 0
>   doc.add(Field.Text("SearchTerms", SearchTerms));
>   writer.addDocument(doc);
>   writer.optimize();
>   writer.close();
> }
>
> FOR SEARCH
> searcher = new IndexSearcher(IndexReader.open(indexPath) );
> Analyzer analyzer = new StopAnalyzer();
> luceneQuery = QueryParser.parse(queryString, "SearchTerms", analyzer);
> hits = searcher.search(luceneQuery);
> System.out.println("Found " + hits.length() + " document(s).");
>
> What I want: I want all the ObjectIDs that have the term 'visnu
> temple' in the SearchTerms field and has ImageExistsBit=1. So the
> queryString above is: SearchTerms:\"visnu temple\" ImageExistsBit:1".
> The .toString() for this query is SearchTerms:"visnu temple"

Your analyzer is eating the ImageExistsBit:1 because "1" returns no  
tokens through StopAnalyzer.  Here's a solution, adapted from the  
code that powers lucenebook.com.  Use this as your analyzer:

       PerFieldAnalyzerWrapper analyzer = new PerFieldAnalyzerWrapper 
(new StopAnalyzer());
       analyzer.addAnalyzer("ImageExistsBit", new WhitespaceAnalyzer());

That should do the trick.

     Erik




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 18:02:11 2005
Return-Path: <java-user-return-15092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27598 invoked from network); 22 Jun 2005 18:02:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 18:02:11 -0000
Received: (qmail 31936 invoked by uid 500); 22 Jun 2005 18:02:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31774 invoked by uid 500); 22 Jun 2005 18:02:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31760 invoked by uid 99); 22 Jun 2005 18:02:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 11:02:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of george.abraham.lists@gmail.com designates 64.233.170.192 as permitted sender)
Received: from [64.233.170.192] (HELO rproxy.gmail.com) (64.233.170.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 11:02:06 -0700
Received: by rproxy.gmail.com with SMTP id g11so166460rne
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 11:02:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=dGLytIr2jD7U4F+JthXF9HWij6R22srVPUStUNPOKfuJKFIBaQDallba/cSOlYydIhtcbmzyqgBWjNqr1b1s6cz7nhNBXh8p0zxcV70z3GU5F5DbAi7quuxlQpBnTQcdBnfkDjsNO5dDXP7qo516HJN7BqJW8439pv7SvBqiG6s=
Received: by 10.38.152.42 with SMTP id z42mr460264rnd;
        Wed, 22 Jun 2005 11:02:04 -0700 (PDT)
Received: by 10.38.10.62 with HTTP; Wed, 22 Jun 2005 11:02:04 -0700 (PDT)
Message-ID: <5fca8ecd050622110278aaf3dd@mail.gmail.com>
Date: Wed, 22 Jun 2005 14:02:04 -0400
From: George Abraham <george.abraham.lists@gmail.com>
Reply-To: George Abraham <george.abraham.lists@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: querying multiple fields
In-Reply-To: <684FA0EE-D73E-4FB2-A032-280D5F8D054B@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <5fca8ecd0506220749225221d8@mail.gmail.com>
	 <20050622170235.37923.qmail@web31114.mail.mud.yahoo.com>
	 <5fca8ecd050622102423fe8921@mail.gmail.com>
	 <684FA0EE-D73E-4FB2-A032-280D5F8D054B@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik,
That worked like a charm. It seems to me that reading up on the
different analyzers would solve a lot of questions in my mind.
Unfortunately your book has not arrived yet from Amazon. Aarrgh!

Thanks a ton!
George

> Your analyzer is eating the ImageExistsBit:1 because "1" returns no
> tokens through StopAnalyzer.  Here's a solution, adapted from the
> code that powers lucenebook.com.  Use this as your analyzer:
>=20
>       PerFieldAnalyzerWrapper analyzer =3D new PerFieldAnalyzerWrapper
> (new StopAnalyzer());
>       analyzer.addAnalyzer("ImageExistsBit", new WhitespaceAnalyzer());
>=20
> That should do the trick.
>=20
>     Erik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 18:34:41 2005
Return-Path: <java-user-return-15093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41356 invoked from network); 22 Jun 2005 18:34:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 18:34:40 -0000
Received: (qmail 92449 invoked by uid 500); 22 Jun 2005 18:34:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92429 invoked by uid 500); 22 Jun 2005 18:34:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92416 invoked by uid 99); 22 Jun 2005 18:34:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 11:34:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 11:34:35 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 950B613E2006; Wed, 22 Jun 2005 14:34:29 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 6967C13E2005
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 14:34:08 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <5fca8ecd050622110278aaf3dd@mail.gmail.com>
References: <5fca8ecd0506220749225221d8@mail.gmail.com> <20050622170235.37923.qmail@web31114.mail.mud.yahoo.com> <5fca8ecd050622102423fe8921@mail.gmail.com> <684FA0EE-D73E-4FB2-A032-280D5F8D054B@ehatchersolutions.com> <5fca8ecd050622110278aaf3dd@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <511A363A-9C48-4386-90A3-461C7C6C9638@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: querying multiple fields
Date: Wed, 22 Jun 2005 14:34:07 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 22, 2005, at 2:02 PM, George Abraham wrote:

> Erik,
> That worked like a charm. It seems to me that reading up on the
> different analyzers would solve a lot of questions in my mind.

It would solve a lot of folks questions!  I find the analysis part of  
Lucene fascinating.  The really interesting thing is that its  
actually quite simple, yet packs a lot of power.  What makes a word a  
"word" (or term, in the Lucene sense) - that is quite a fun  
rhetorical question to ask.  This is why I strongly advocate the use  
of the AnalyzerDemo from the Lucene in Action source code, or some  
variant thereof (like Luke's capability to do the same sort of  
thing).  Visually seeing what comes out of the analysis process for  
sample strings is really eye opening.

> Unfortunately your book has not arrived yet from Amazon. Aarrgh!

Wow, they're slow... 'cause I know you ordered it back in December  
when it was released :))

Don't forget that you can get the book from Manning (www.manning.com)  
in e-book form and have the hard-copy of it as well.

     Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 19:06:34 2005
Return-Path: <java-user-return-15094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52476 invoked from network); 22 Jun 2005 19:06:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 19:06:34 -0000
Received: (qmail 41797 invoked by uid 500); 22 Jun 2005 19:06:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41722 invoked by uid 500); 22 Jun 2005 19:06:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41709 invoked by uid 99); 22 Jun 2005 19:06:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 12:06:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.200.246.100] (HELO prsrvnt03.prismanet.ch) (213.200.246.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 12:06:29 -0700
Received: by www.prismanet.ch with Internet Mail Service (5.5.2653.19)
	id <M0PP2BLY>; Wed, 22 Jun 2005 21:06:25 +0200
Message-ID: <0AF2CD6C1B288D4BB2724288590DBCB33F5284@www.prismanet.ch>
From: Urs Eichmann <urs.eichmann@prismanet.ch>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Can't find documents with certain terms
Date: Wed, 22 Jun 2005 21:06:23 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My index consists of about 26 different fields. I have a very weird problem:
On certain fields, I cannot search - i.e. the search always returns 0
documents. I used Luke's Lucene Index Toolbox, and the behaviour there is
weird as well:
 
I do the following in Luke's Program:
 
a) go to the Documents Tab
b) Enter term field "unit" and value="DOSE", hit "Show all docs"
c) A list of 5 documents is displayed, which is ok. The query which was
generated is unit:DOSE. The parsed query is unit:DOSE and the rewritten
query is unit:dose
d) Then I just hit the "Search" button without changing the query or
anything
e) now the result list is empty. The only difference I can see is that the
parsed query is unit:dose now instead of unit:DOSE as before.

The unit field is non-tokenized, indexed, stored.
 
Does anyone have an explanation for this behaviour? The problem is, the same
behaviour is found in my program, e.g. if I look for "unit:DOSE", I will get
no documents returned. However, on many of the other 26 fields, it runs OK,
and I can't see any difference in the field definitions.
 
I had this problem in 1.4.3, changed now to 1.9 RC1, but the problem is
still the same.

Perhaps I should metion that I have built the index with the dotNet version
of Lucene (dotLucene), but since the Luke (java) program shows the same
behaviour, I don't believe it is a problem with the dotNet port.

Many thanks for any help or suggestions!
Urs
 
 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 19:36:54 2005
Return-Path: <java-user-return-15095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78492 invoked from network); 22 Jun 2005 19:36:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 19:36:54 -0000
Received: (qmail 96715 invoked by uid 500); 22 Jun 2005 19:36:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96685 invoked by uid 500); 22 Jun 2005 19:36:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96659 invoked by uid 99); 22 Jun 2005 19:36:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 12:36:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jm.tinghir@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 12:36:48 -0700
Received: by wproxy.gmail.com with SMTP id 36so57847wra
        for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 12:36:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=H+IPrK3Hgp68Mwty31Ep8soSU78M9+3kxokjP5A8PJhcTMW2xRQmfz/kPSSP1WBfnN/L8nPlmX0/ulXXgmPftCMOPH9ndL6rnLmVu8eVZpS1Qhhbp3Zc/aJNQgXv7vKgRVEZKuMSe0j5iNt0BlcvH37FZotiDON1ypFoTGKY2Yw=
Received: by 10.54.54.4 with SMTP id c4mr176710wra;
        Wed, 22 Jun 2005 12:36:44 -0700 (PDT)
Received: by 10.54.61.19 with HTTP; Wed, 22 Jun 2005 12:36:44 -0700 (PDT)
Message-ID: <6f3b242905062212365c49491f@mail.gmail.com>
Date: Wed, 22 Jun 2005 21:36:44 +0200
From: JM Tinghir <jm.tinghir@gmail.com>
Reply-To: JM Tinghir <jm.tinghir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Weird Problem with Lucene
In-Reply-To: <0AF2CD6C1B288D4BB2724288590DBCB34973BC@www.prismanet.ch>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <0AF2CD6C1B288D4BB2724288590DBCB34973BC@www.prismanet.ch>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Actually I have the same problem. Queries are working on a few fields
but not all of them, although the index is ok (checked it with luke).

But I have no idea to solve that...


Jean-Marie Tinghir


2005/6/22, Urs Eichmann <urs.eichmann@prismanet.ch>:
> My index consists of about 26 fields. I have a very wierd problem: On
> certain fields, I cannot search - i.e. the search always returns 0
> documents. I used Luke's Lucene Index Toolbox, and the behaviour there is
> weird as well:
>=20
> I do the following in Luke's Program:
>=20
> a) go to the Documents Tab
> b) Enter term field-name: unit and value=3D"DOSE", hit "Show all docs"
> c) A list of 5 documents is displayed, which is ok. The query is unit:DOS=
E.
> The parsed query is unit:DOSE and the rewritten query is unit:dose
> d) Then I just hit the "Search" button without changing the query
> e) now the result list is empty. The only difference I can see is that th=
e
> parsed query is unit:dose now instead of unit:DOSE.
>=20
> Does anyone have an explanation for this behaviour? The problem is, the s=
ame
> behaviour is in my program, e.g. if I look for "unit:DOSE", I will get no
> documents returned. However, on many of the other 26 fields, it runs OK, =
and
> I can't see any difference in the field definitions.
>=20
> I had this problem in 1.4.3, changed now to 1.9 RC1, but the problem is
> still the same.
>=20
> Many thanks for any help!
> Urs
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 20:01:10 2005
Return-Path: <java-user-return-15096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89770 invoked from network); 22 Jun 2005 20:01:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 20:01:10 -0000
Received: (qmail 44376 invoked by uid 500); 22 Jun 2005 20:01:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44023 invoked by uid 500); 22 Jun 2005 20:01:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44010 invoked by uid 99); 22 Jun 2005 20:01:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 13:01:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 13:01:06 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 1F13413E2006; Wed, 22 Jun 2005 16:01:00 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 3238113E2005
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 16:00:12 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <6f3b242905062212365c49491f@mail.gmail.com>
References: <0AF2CD6C1B288D4BB2724288590DBCB34973BC@www.prismanet.ch> <6f3b242905062212365c49491f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1BFD03E4-92AC-4D81-BE83-12686224EAF3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Weird Problem with Lucene
Date: Wed, 22 Jun 2005 16:00:11 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Please send us a (short and sweet) example that demonstrates this  
issue - preferably using RAMDirectory in a way that is easily  
runnable by someone else.

Thanks,
     Erik


On Jun 22, 2005, at 3:36 PM, JM Tinghir wrote:

> Hi,
>
> Actually I have the same problem. Queries are working on a few fields
> but not all of them, although the index is ok (checked it with luke).
>
> But I have no idea to solve that...
>
>
> Jean-Marie Tinghir
>
>
> 2005/6/22, Urs Eichmann <urs.eichmann@prismanet.ch>:
>
>> My index consists of about 26 fields. I have a very wierd problem: On
>> certain fields, I cannot search - i.e. the search always returns 0
>> documents. I used Luke's Lucene Index Toolbox, and the behaviour  
>> there is
>> weird as well:
>>
>> I do the following in Luke's Program:
>>
>> a) go to the Documents Tab
>> b) Enter term field-name: unit and value="DOSE", hit "Show all docs"
>> c) A list of 5 documents is displayed, which is ok. The query is  
>> unit:DOSE.
>> The parsed query is unit:DOSE and the rewritten query is unit:dose
>> d) Then I just hit the "Search" button without changing the query
>> e) now the result list is empty. The only difference I can see is  
>> that the
>> parsed query is unit:dose now instead of unit:DOSE.
>>
>> Does anyone have an explanation for this behaviour? The problem  
>> is, the same
>> behaviour is in my program, e.g. if I look for "unit:DOSE", I will  
>> get no
>> documents returned. However, on many of the other 26 fields, it  
>> runs OK, and
>> I can't see any difference in the field definitions.
>>
>> I had this problem in 1.4.3, changed now to 1.9 RC1, but the  
>> problem is
>> still the same.
>>
>> Many thanks for any help!
>> Urs
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 21:48:31 2005
Return-Path: <java-user-return-15097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32547 invoked from network); 22 Jun 2005 21:48:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 21:48:31 -0000
Received: (qmail 90557 invoked by uid 500); 22 Jun 2005 21:48:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90536 invoked by uid 500); 22 Jun 2005 21:48:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90523 invoked by uid 99); 22 Jun 2005 21:48:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 14:48:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 14:48:25 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j5MLmW332315
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 16:48:33 -0500
Message-ID: <42B9DC9F.3040201@getopt.org>
Date: Wed, 22 Jun 2005 23:48:15 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Can't find documents with certain terms
References: <0AF2CD6C1B288D4BB2724288590DBCB33F5284@www.prismanet.ch>
In-Reply-To: <0AF2CD6C1B288D4BB2724288590DBCB33F5284@www.prismanet.ch>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Urs Eichmann wrote:
> My index consists of about 26 different fields. I have a very weird problem:
> On certain fields, I cannot search - i.e. the search always returns 0
> documents. I used Luke's Lucene Index Toolbox, and the behaviour there is
> weird as well:
>  
> I do the following in Luke's Program:
>  
> a) go to the Documents Tab
> b) Enter term field "unit" and value="DOSE", hit "Show all docs"
> c) A list of 5 documents is displayed, which is ok. The query which was
> generated is unit:DOSE. The parsed query is unit:DOSE and the rewritten
> query is unit:dose
> d) Then I just hit the "Search" button without changing the query or
> anything
> e) now the result list is empty. The only difference I can see is that the
> parsed query is unit:dose now instead of unit:DOSE as before.

There are two possible explanations:

1. perhaps the actual term in the index is 'DOSE', and you are looking 
for 'dose' (what counts is what the "rewritten query" shows). Lucene 
doesn't lowercase automatically, so these two terms won't match. Or 
perhaps the term is 'DOSE ' (whitespace included)?

2. or, the hits you are getting are below the threshold. Please use the 
HitCollector interface to collect all hits, no matter how small the score.

You can write a simple class using IndexReader to iterate over all index 
terms, and see if the exact term exists (with exactly the same case as 
in your rewritten query).

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 22:45:20 2005
Return-Path: <java-user-return-15098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48915 invoked from network); 22 Jun 2005 22:45:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 22:45:20 -0000
Received: (qmail 33834 invoked by uid 500); 22 Jun 2005 22:45:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33781 invoked by uid 500); 22 Jun 2005 22:45:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33740 invoked by uid 99); 22 Jun 2005 22:45:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 15:45:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.40] (HELO web31107.mail.mud.yahoo.com) (68.142.200.40)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jun 2005 15:45:14 -0700
Received: (qmail 59542 invoked by uid 60001); 22 Jun 2005 22:45:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=woSAFTf22xzRe+5IOa9jnTx0ygFJ4yshkHFeu5jCvPCZgurNtQ9TSz2G7T5npYYbPRGRmzJ4qt9CfXloV8x5cvvscoQ3p9FD5hKm4ZM2HyeLzORIFku1QHWMUna1EjUuINYmcj72KBtVDuTavRcZqX5lKhDUfKFuk64u9jUd4cQ=  ;
Message-ID: <20050622224511.59540.qmail@web31107.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31107.mail.mud.yahoo.com via HTTP; Wed, 22 Jun 2005 15:45:11 PDT
Date: Wed, 22 Jun 2005 15:45:11 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing emails from Exchange
To: java-user@lucene.apache.org
In-Reply-To: <20050622162548.37109.qmail@web26107.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Peter, see this:
http://www.tropo.com/techno/java/lucene/imap.html
http://guests.evectors.it/zoe/

Otis

--- Peter Lewis <william_siwel@yahoo.co.uk> wrote:

> Hi all
>  
> Has anyone got an example of how to index emails from Microsoft
> Exchange using Lucene?
>  
> TIA
>  
> William
> 
> 		
> ---------------------------------
> How much free photo storage do you get? Store your holiday snaps for
> FREE with Yahoo! Photos. Get Yahoo! Photos


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 22 23:02:14 2005
Return-Path: <java-user-return-15099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54175 invoked from network); 22 Jun 2005 23:02:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jun 2005 23:02:14 -0000
Received: (qmail 48399 invoked by uid 500); 22 Jun 2005 23:02:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48379 invoked by uid 500); 22 Jun 2005 23:02:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48366 invoked by uid 99); 22 Jun 2005 23:02:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 16:02:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jun 2005 16:02:10 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id BDACF5B7C0; Wed, 22 Jun 2005 16:02:07 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B3FD97F460
	for <java-user@lucene.apache.org>; Wed, 22 Jun 2005 16:02:07 -0700 (PDT)
Date: Wed, 22 Jun 2005 16:02:07 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Re: Weird Problem with Lucene
In-Reply-To: <0AF2CD6C1B288D4BB2724288590DBCB34973BC@www.prismanet.ch>
Message-ID: <Pine.LNX.4.58.0506221552280.14732@hal.rescomp.berkeley.edu>
References: <0AF2CD6C1B288D4BB2724288590DBCB34973BC@www.prismanet.ch>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: I do the following in Luke's Program:

I have to confess, i've never acctually gotten arround to using Luke, but
if i understand what you're saying, and if Luke is doing what i think it
is, then i believe your problem is an Analyzer issue...

: b) Enter term field-name: unit and value="DOSE", hit "Show all docs"
: c) A list of 5 documents is displayed, which is ok. The query is unit:DOSE.
: The parsed query is unit:DOSE and the rewritten query is unit:dose

I'm assuming that when you enter that info in, Luke is doing a strict
TermDocs lookup for Term("unit","DOSE") and finding your docs.  Then maybe
it's making a TermQuery out of that Term, showing you the toString on that
query, and the toString of hte query it gets from the QueryParser ... but
it looks like the QueryParser is using an Analizer that lowercases your
term (making it "dose" instead of "DOSE")

When you do a search on this new TermQuery -- you get nothing, becuase
that's not the acctual term in your index.

: Does anyone have an explanation for this behaviour? The problem is, the same
: behaviour is in my program, e.g. if I look for "unit:DOSE", I will get no
: documents returned. However, on many of the other 26 fields, it runs OK, and
: I can't see any difference in the field definitions.

do you see common behavior for all fields which are (non-)tokenized?

if so, then like i said: analyzer.  your query parser is probabbly not
using the analyzer you want it to.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 07:31:50 2005
Return-Path: <java-user-return-15100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45147 invoked from network); 23 Jun 2005 07:31:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 07:31:50 -0000
Received: (qmail 80399 invoked by uid 500); 23 Jun 2005 07:31:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80233 invoked by uid 500); 23 Jun 2005 07:31:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80220 invoked by uid 99); 23 Jun 2005 07:31:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 00:31:43 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.215.166.64] (HELO grassmarket.ucs.ed.ac.uk) (129.215.166.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 00:31:44 -0700
Received: from grassmarket.ucs.ed.ac.uk (localhost [127.0.0.1])
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.10) with ESMTP id j5N7Ve1a027838
	for <java-user@lucene.apache.org>; Thu, 23 Jun 2005 08:31:40 +0100 (BST)
Received: (from nobody@localhost)
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.9/Submit) id j5N7Veb4027837
	for java-user@lucene.apache.org; Thu, 23 Jun 2005 08:31:40 +0100 (BST)
X-Authentication-Warning: grassmarket.ucs.ed.ac.uk: nobody set sender to s0454888@sms.ed.ac.uk using -f
Received: from sausages.cache.ed.ac.uk (sausages.cache.ed.ac.uk [129.215.16.39]) 
	by sms.ed.ac.uk (IMP) with HTTP 
	for <s0454888@sms.ed.ac.uk>; Thu, 23 Jun 2005 08:31:40 +0100
Message-ID: <1119511900.42ba655c58945@sms.ed.ac.uk>
Date: Thu, 23 Jun 2005 08:31:40 +0100
From: Dave Kor <s0454888@sms.ed.ac.uk>
To: java-user@lucene.apache.org
Subject: Re: Question for Wildcard Search:
References: <12704.1119424968@www76.gmx.net> <17081.6873.177777.675795@tanto-xipolis.de> <D3188A0C-B427-4286-9D1C-AE5E98BFBE84@ehatchersolutions.com>
In-Reply-To: <D3188A0C-B427-4286-9D1C-AE5E98BFBE84@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.3
X-Scanned-By: MIMEDefang 2.33 (www . roaringpenguin . com / mimedefang)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Quoting Erik Hatcher <erik@ehatchersolutions.com>:

> Anyone tried this technique with Lucene?

Actually, the problem is that the wildcard code has to search over a large
subset of terms because the list of terms is, well, a linear structure.

If, for example, all terms in the index is arranged as a suffix tree, the sort
of wildcard search that currently is cpu intensive will no longer be cpu
intensive.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 07:50:36 2005
Return-Path: <java-user-return-15101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53524 invoked from network); 23 Jun 2005 07:50:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 07:50:36 -0000
Received: (qmail 1683 invoked by uid 500); 23 Jun 2005 07:49:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1523 invoked by uid 500); 23 Jun 2005 07:49:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1509 invoked by uid 99); 23 Jun 2005 07:49:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 00:49:53 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [164.15.59.220] (HELO bonito.ulb.ac.be) (164.15.59.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 00:49:53 -0700
Received: from mach.vub.ac.be (maxi.ulb.ac.be [164.15.128.8])
	by bonito.ulb.ac.be (Postfix) with ESMTP id ADB7314B
	for <java-user@lucene.apache.org>; Thu, 23 Jun 2005 09:49:51 +0200 (CEST)
Received: by mach.vub.ac.be (Postfix, from userid 21099)
	id DAF758D2D; Thu, 23 Jun 2005 09:49:44 +0200 (CEST)
Received: from ORION (bebif01.ulb.ac.be [164.15.125.4])
	by mach.vub.ac.be (Postfix) with SMTP id CC8628D3C
	for <java-user@lucene.apache.org>; Thu, 23 Jun 2005 09:49:42 +0200 (CEST)
Message-ID: <001801c577c8$1dab0940$0700000a@ORION>
From: "johan duflost" <jduflost@ben.vub.ac.be>
To: <java-user@lucene.apache.org>
Subject: lucene highlighter
Date: Thu, 23 Jun 2005 09:49:41 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2527
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2527
X-Spam-Checker-Version: maxi.ulb.ac.be SA 2.63 (2004-01-11)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=0.1, level=
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Dear list,

I try to use the Term Highlighter in my webapp but I have a problem. I want 
to highlight the terms in a text without extracting the most relevant 
sections.
The highlighting works but the last characters are trimmed !

Here is a portion of my code :


  Analyzer analyzer = new StandardAnalyzer();
  Query query = null;
  try {
   query = QueryParser.parse(queryStr, "scientificName", analyzer);
   query = query.rewrite(IndexReader.open("E:/specimenset-index"));
  } catch (ParseException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  } catch (IOException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  }

  QueryScorer scorer = new QueryScorer(query);
  SimpleHTMLFormatter formatter = new SimpleHTMLFormatter(
    "<span class=\"highlight\">", "</span>");

  Highlighter highlighter = new Highlighter(formatter, scorer);

  TokenStream tokenStream = analyzer.tokenStream("scientificName",
    new StringReader(text));

  String highlightedText = null;

  try {
   highlightedText = highlighter.getBestFragment(
    tokenStream, text);
  } catch (IOException e1) {
   // TODO Auto-generated catch block
   e1.printStackTrace();
  }
  return highlightedText ;



A value for text variable is for instance :
    <a href='taxoninfo.html?id=112'><span class='genus-species'>Capparimyia 
savastani</span> (Martelli)</a>

The corresponding value for highlightedText variable is :
    <a href='taxoninfo.html?id=112'><span class='genus-species'><span 
class="highlight">Capparimyia</span> savastani</span> (Martelli

The ")</a>" are trimmed for some mysterious reason !! I try to play with 
Encoder and Fragmenter classes but without success !

Any help would be appreciate.

Best regards,

Johan

Johan Duflost
Belgian Biodiversity Information Facility (BeBIF)
Universite Libre de Bruxelles


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 08:00:36 2005
Return-Path: <java-user-return-15102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57466 invoked from network); 23 Jun 2005 08:00:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 08:00:35 -0000
Received: (qmail 12588 invoked by uid 500); 23 Jun 2005 08:00:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12564 invoked by uid 500); 23 Jun 2005 08:00:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12547 invoked by uid 99); 23 Jun 2005 08:00:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 01:00:31 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.215.166.64] (HELO grassmarket.ucs.ed.ac.uk) (129.215.166.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 01:00:32 -0700
Received: from grassmarket.ucs.ed.ac.uk (localhost [127.0.0.1])
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.10) with ESMTP id j5N80T1a016088
	for <java-user@lucene.apache.org>; Thu, 23 Jun 2005 09:00:29 +0100 (BST)
Received: (from nobody@localhost)
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.9/Submit) id j5N80T4Y016087
	for java-user@lucene.apache.org; Thu, 23 Jun 2005 09:00:29 +0100 (BST)
X-Authentication-Warning: grassmarket.ucs.ed.ac.uk: nobody set sender to s0454888@sms.ed.ac.uk using -f
Received: from neeps.cache.ed.ac.uk (neeps.cache.ed.ac.uk [129.215.13.84]) 
	by sms.ed.ac.uk (IMP) with HTTP 
	for <s0454888@sms.ed.ac.uk>; Thu, 23 Jun 2005 09:00:29 +0100
Message-ID: <1119513629.42ba6c1d3db99@sms.ed.ac.uk>
Date: Thu, 23 Jun 2005 09:00:29 +0100
From: Dave Kor <s0454888@sms.ed.ac.uk>
To: java-user@lucene.apache.org
Subject: Re: Question for Wildcard Search:
References: <12704.1119424968@www76.gmx.net> <17081.6873.177777.675795@tanto-xipolis.de> <D3188A0C-B427-4286-9D1C-AE5E98BFBE84@ehatchersolutions.com> <1119511900.42ba655c58945@sms.ed.ac.uk>
In-Reply-To: <1119511900.42ba655c58945@sms.ed.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.3
X-Scanned-By: MIMEDefang 2.33 (www . roaringpenguin . com / mimedefang)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Quoting Dave Kor <s0454888@sms.ed.ac.uk>:

> Quoting Erik Hatcher <erik@ehatchersolutions.com>:
>
> > Anyone tried this technique with Lucene?
>
> Actually, the problem is that the wildcard code has to search over a large
> subset of terms because the list of terms is, well, a linear structure.
>
> If, for example, all terms in the index is arranged as a suffix tree, the
> sort
> of wildcard search that currently is cpu intensive will no longer be cpu
> intensive.

Hmm I realized I should add a qualifier to the above statement. Searching for
matching terms would no longer be cpu intensive, especially for wildcards like
*foo* or *foo. The other wildcard search problem of having too many matching
terms to lookup in the index still remains unsolved.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 10:02:36 2005
Return-Path: <java-user-return-15103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6790 invoked from network); 23 Jun 2005 10:02:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 10:02:36 -0000
Received: (qmail 76743 invoked by uid 500); 23 Jun 2005 10:02:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76714 invoked by uid 500); 23 Jun 2005 10:02:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76700 invoked by uid 99); 23 Jun 2005 10:02:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 03:02:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.219] (HELO web26008.mail.ukl.yahoo.com) (217.12.10.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Jun 2005 03:02:29 -0700
Received: (qmail 65762 invoked by uid 60001); 23 Jun 2005 10:02:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=3ntUJXjld2ZYuvkIzo1ImUpE0FgrtloMv3mb9EIrGesGMB6KA6V9yOpvG+LWhWeiEX+wzaDwBKGIboKMOEZktkOpBkEprrRM6EErMDzjhH/qhN9Mqz2S4y0fgMRNG8FComlnZAb3WgVRf2ZTH0EF9SLiHEjBwaIZxq4aN35B5AI=  ;
Message-ID: <20050623100226.65760.qmail@web26008.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26008.mail.ukl.yahoo.com via HTTP; Thu, 23 Jun 2005 11:02:26 BST
Date: Thu, 23 Jun 2005 11:02:26 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: lucene highlighter
To: java-user@lucene.apache.org
In-Reply-To: <001801c577c8$1dab0940$0700000a@ORION>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Johan,
To avoid selecting fragments see here:
http://www.mail-archive.com/java-user@lucene.apache.org/msg01097.html

Be aware though that the highlighter is really
designed to decorate plain-text by adding highlight
tags - if your text already includes any HTML mark-up
it becomes hard to correctly add highlighter mark-up
into the text in a way which guarantees a legal
document. To work reliably the highlighter would need
to understand the structure of the existing tags eg to
understand that the "height" attribute in an image tag
should not be marked up if the user searched for
"height". You may also have to concern yourself with
handling badly marked-up content (ie most web pages)
where tags are not always closed. This level of
functionality is beyond the scope of the highlighter.
If you want to preserve existing mark-up someone made
reference to a custom solution for handling this here:

http://www.mail-archive.com/java-user@lucene.apache.org/msg01108.html

Cheers,
Mark


		
___________________________________________________________ 
How much free photo storage do you get? Store your holiday 
snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 10:27:37 2005
Return-Path: <java-user-return-15104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16836 invoked from network); 23 Jun 2005 10:27:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 10:27:37 -0000
Received: (qmail 8569 invoked by uid 500); 23 Jun 2005 10:27:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7661 invoked by uid 500); 23 Jun 2005 10:27:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7648 invoked by uid 99); 23 Jun 2005 10:27:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 03:27:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.44.193.196] (HELO uar.i-hypergrid.com) (194.44.193.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 03:27:18 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id 8CD1D242D3
	for <java-user@lucene.apache.org>; Thu, 23 Jun 2005 13:27:13 +0300 (EEST)
Message-ID: <42BA8E80.8040301@i-hypergrid.com>
Date: Thu, 23 Jun 2005 13:27:12 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Question for Wildcard Search:
References: <12704.1119424968@www76.gmx.net> <17081.6873.177777.675795@tanto-xipolis.de> <D3188A0C-B427-4286-9D1C-AE5E98BFBE84@ehatchersolutions.com> <1119511900.42ba655c58945@sms.ed.ac.uk> <1119513629.42ba6c1d3db99@sms.ed.ac.uk>
In-Reply-To: <1119513629.42ba6c1d3db99@sms.ed.ac.uk>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello
about 3 months ago I posted some idea about wildcard searching.

main idea was to index every character of input as separate term. and 
then search using PhraseQuery.
for example word "12345" would be indexed as "1" "2" "3" "4" "5". to 
find "*23*"  you can use PhraseQuery with this two terms ("2" "3"). But 
this approach is limited only to queries with wildcards in the begin or end.

Later I did some research and wrote Extension to PhraseQuery that allows 
to set term relative position to range of values (to insert gaps for "*" 
and "?") this approach is good because it does not rewrite queries and 
never run into OutOfMemory or TooManyClauses Exceptions

regards,
Volodymyr Bychkoviak


14.03.2005 13:54

Dave Kor wrote:

>Quoting Dave Kor <s0454888@sms.ed.ac.uk>:
>
>  
>
>>Quoting Erik Hatcher <erik@ehatchersolutions.com>:
>>
>>    
>>
>>>Anyone tried this technique with Lucene?
>>>      
>>>
>>Actually, the problem is that the wildcard code has to search over a large
>>subset of terms because the list of terms is, well, a linear structure.
>>
>>If, for example, all terms in the index is arranged as a suffix tree, the
>>sort
>>of wildcard search that currently is cpu intensive will no longer be cpu
>>intensive.
>>    
>>
>
>Hmm I realized I should add a qualifier to the above statement. Searching for
>matching terms would no longer be cpu intensive, especially for wildcards like
>*foo* or *foo. The other wildcard search problem of having too many matching
>terms to lookup in the index still remains unsolved.
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 10:42:41 2005
Return-Path: <java-user-return-15105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21431 invoked from network); 23 Jun 2005 10:42:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 10:42:40 -0000
Received: (qmail 24217 invoked by uid 500); 23 Jun 2005 10:42:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23308 invoked by uid 500); 23 Jun 2005 10:42:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 21950 invoked by uid 99); 23 Jun 2005 10:41:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Mime-Version: 1.0 (Apple Message framework v730)
Content-Transfer-Encoding: 7bit
Message-Id: <89FA3553-6FBC-41B3-A289-C3C6253AA775@schinz.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Ulrich Schinz <uli@schinz.de>
Subject: getting text-snippets
Date: Thu, 23 Jun 2005 12:41:39 +0200
X-Mailer: Apple Mail (2.730)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi there!

first of all: im new here in the list, my name is uli. hello to all !

im quite new in using lucene. i created different indices, some with  
GermanAnalyzer some with StandardAnalyzer...
i added Fields to my Documents with doc.add(Field.Text("contents",new  
FileReader(f)); and doc.add(Field.Keyword 
("filename",g.getCanonicalPath());

in the search i getresults with doc.get("filename"), where i get the  
right filenames, containing search-query.
if i try to get doc.get("contents"); nothig is returned...

aim is: i wanna get the filename to generate link on top of an  
result. after i'd like to have an text-snipped, where the query-term
in this document occured. just like google or some other search- 
engines... i have seen this in nutch as well... so it should be
possible, but im not sure, how i can get these text-snippets...

maybe someone can give me some hints, how to manage that.

thx in advance,

regards,
uli

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 10:53:15 2005
Return-Path: <java-user-return-15106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25185 invoked from network); 23 Jun 2005 10:53:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 10:53:15 -0000
Received: (qmail 37732 invoked by uid 500); 23 Jun 2005 10:53:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37707 invoked by uid 500); 23 Jun 2005 10:53:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37694 invoked by uid 99); 23 Jun 2005 10:53:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 03:53:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.200.246.100] (HELO prsrvnt03.prismanet.ch) (213.200.246.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 03:53:11 -0700
Received: by www.prismanet.ch with Internet Mail Service (5.5.2653.19)
	id <M0PP2B44>; Thu, 23 Jun 2005 12:53:07 +0200
Message-ID: <0AF2CD6C1B288D4BB2724288590DBCB34973C6@www.prismanet.ch>
From: Urs Eichmann <urs.eichmann@prismanet.ch>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Weird Problem with Lucene
Date: Thu, 23 Jun 2005 12:53:05 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

First, sorry for the double post. I had problems with subscribing to the
mailing list and thought my first message didn't go through.

Thanks you Chris and the others for your valuable tips. It was indeed a
problem with the Analyzer. I used the SimpleAnalyzer and thought from the
doc's that it will change uppercase to lowercase. It seems like it didn't do
that. I changed the Analyzer to WhitespaceAnalyzer, and now it seems to work
OK. I don't completely understand why it didn't work before, but now it
does, and that is all it counts...

Urs
 

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: Thursday, June 23, 2005 1:02 AM
To: 'java-user@lucene.apache.org'
Subject: Re: Weird Problem with Lucene

: I do the following in Luke's Program:

I have to confess, i've never acctually gotten arround to using Luke, but if
i understand what you're saying, and if Luke is doing what i think it is,
then i believe your problem is an Analyzer issue...

: b) Enter term field-name: unit and value="DOSE", hit "Show all docs"
: c) A list of 5 documents is displayed, which is ok. The query is
unit:DOSE.
: The parsed query is unit:DOSE and the rewritten query is unit:dose

I'm assuming that when you enter that info in, Luke is doing a strict
TermDocs lookup for Term("unit","DOSE") and finding your docs.  Then maybe
it's making a TermQuery out of that Term, showing you the toString on that
query, and the toString of hte query it gets from the QueryParser ... but it
looks like the QueryParser is using an Analizer that lowercases your term
(making it "dose" instead of "DOSE")

When you do a search on this new TermQuery -- you get nothing, becuase
that's not the acctual term in your index.

: Does anyone have an explanation for this behaviour? The problem is, the
same
: behaviour is in my program, e.g. if I look for "unit:DOSE", I will get no
: documents returned. However, on many of the other 26 fields, it runs OK,
and
: I can't see any difference in the field definitions.

do you see common behavior for all fields which are (non-)tokenized?

if so, then like i said: analyzer.  your query parser is probabbly not using
the analyzer you want it to.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 12:27:46 2005
Return-Path: <java-user-return-15107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60640 invoked from network); 23 Jun 2005 12:27:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 12:27:46 -0000
Received: (qmail 58457 invoked by uid 500); 23 Jun 2005 12:27:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58433 invoked by uid 500); 23 Jun 2005 12:27:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58419 invoked by uid 99); 23 Jun 2005 12:27:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 05:27:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 05:27:40 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3BC7B13E2005; Thu, 23 Jun 2005 08:27:35 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 310A513E2005
	for <java-user@lucene.apache.org>; Thu, 23 Jun 2005 08:27:23 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <89FA3553-6FBC-41B3-A289-C3C6253AA775@schinz.de>
References: <89FA3553-6FBC-41B3-A289-C3C6253AA775@schinz.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <41F0759F-D92E-4DC4-A4DB-7C2FBB9E682E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: getting text-snippets
Date: Thu, 23 Jun 2005 08:27:23 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 23, 2005, at 6:41 AM, Ulrich Schinz wrote:
> hi there!
>
> first of all: im new here in the list, my name is uli. hello to all !
>
> im quite new in using lucene. i created different indices, some  
> with GermanAnalyzer some with StandardAnalyzer...
> i added Fields to my Documents with doc.add(Field.Text 
> ("contents",new FileReader(f)); and doc.add(Field.Keyword 
> ("filename",g.getCanonicalPath());
>
> in the search i getresults with doc.get("filename"), where i get  
> the right filenames, containing search-query.
> if i try to get doc.get("contents"); nothig is returned...

Field.Text(String, Reader) is not a stored field.  This is why doc.get 
("contents") is empty.

> aim is: i wanna get the filename to generate link on top of an  
> result. after i'd like to have an text-snipped, where the query-term
> in this document occured. just like google or some other search- 
> engines... i have seen this in nutch as well... so it should be
> possible, but im not sure, how i can get these text-snippets...
>
> maybe someone can give me some hints, how to manage that.

You have some options... change to using a stored field by reading  
the file contents into a String and using Field.Text(String, String)  
instead.  Or, when rendering the results, go directly to the file  
pointed to by doc.get("filename") and read its contents then.  There  
are pros/cons to both of these approaches.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 14:31:12 2005
Return-Path: <java-user-return-15108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33224 invoked from network); 23 Jun 2005 14:31:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 14:31:11 -0000
Received: (qmail 87321 invoked by uid 500); 23 Jun 2005 14:31:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87256 invoked by uid 500); 23 Jun 2005 14:31:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 57588 invoked by uid 99); 23 Jun 2005 14:16:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <41F0759F-D92E-4DC4-A4DB-7C2FBB9E682E@ehatchersolutions.com>
References: <89FA3553-6FBC-41B3-A289-C3C6253AA775@schinz.de> <41F0759F-D92E-4DC4-A4DB-7C2FBB9E682E@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0932BE11-F10F-4106-9D18-7DE4C8EC95C1@schinz.de>
Content-Transfer-Encoding: 7bit
From: Ulrich Schinz <uli@schinz.de>
Subject: Re: getting text-snippets
Date: Thu, 23 Jun 2005 16:17:11 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Field.Text(String, Reader) is not a stored field.  This is why  
> doc.get("contents") is empty.
>

ok, i read that in javadoc of lucene... in dont understand what  
Field.Text(String,Reader,boolean) does... if i set boolean to true,
what is the stortermvector??

>
> You have some options... change to using a stored field by reading  
> the file contents into a String and using Field.Text(String,  
> String) instead.  Or, when rendering the results, go directly to  
> the file pointed to by doc.get("filename") and read its contents  
> then.  There are pros/cons to both of these approaches.
>

ok, i started to try this... but i also try to index pdf-files.. so i  
get an InputStream from pdftotext. if i try to convert that to a  
String it takes really long time,
and we have a lot of data to index....
i tried different ways to get that done:
1.
String ret = "";
InputStream is=null;
String[] cmd = {"/usr/bin/pdftotext", "test.pdf", "-"};
byte[] buffer = new byte[80];
child = Runtime.getRuntime().exec(cmd);
is = child.getInputStream();
BufferedInputStream bis = new BufferedInputStream(is,80);
while(next != -1){
++t;
next = bis.read(buffer,bis.pos, 80);
String input = new String(buffer,0,next);
ret += input;
}

not really that way, but conceptual (in real it compiles :-) )
2.
String ret = "";
InputStream is=null;
String[] cmd = {"/usr/bin/pdftotext", "test.pdf", "-"};
byte[] buffer = new byte[80];
child = Runtime.getRuntime().exec(cmd);
is = child.getInputStream();
while(next != -1){
++t;
next = is.read();
ret += String(next);
}

but those versions are both really slow... it takes me more than 20  
minutes (minimum) to get a pdf file of size 900 k...
is there a way to get that faster???


regards,
uli


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 15:10:11 2005
Return-Path: <java-user-return-15109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51078 invoked from network); 23 Jun 2005 15:10:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 15:10:11 -0000
Received: (qmail 64240 invoked by uid 500); 23 Jun 2005 15:10:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64213 invoked by uid 500); 23 Jun 2005 15:10:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64200 invoked by uid 99); 23 Jun 2005 15:10:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 08:10:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.209.138.28] (HELO baseview.com) (63.209.138.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 08:10:03 -0700
Received: from [66.108.249.195] (HELO [192.168.1.51])
  by baseview.com (CommuniGate Pro SMTP 4.2.8)
  with ESMTP-TLS id 20714583 for java-user@lucene.apache.org; Thu, 23 Jun 2005 11:09:58 -0400
X-Message-Flag: This email may contain strong language, violence, and sexual content. Parental discretion is advised.
Mime-Version: 1.0 (Apple Message framework v730)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A4A2A1E4-69AD-4E22-BF92-8292F4ECB9F3@baseview.com>
Content-Transfer-Encoding: 7bit
X-Image-Url: http://www.drissman.com/avi/pic.jpg
From: Avi Drissman <avi_drissman@baseview.com>
Subject: Is a field in use?
Date: Thu, 23 Jun 2005 11:09:57 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Suppose I have an index with a varying number of fields in a  
document. Some documents have some fields, and some documents have  
others. Is there a quick way to query the index to see if a  
particular field name is in use at all by any document in the index?

For example, if document 1 has fields (A, B, C), document 2 fields  
(B, C, D), document 3 fields (A, E, F), then document 2 is deleted, I  
need to be able to answer, "Does any document have field 'D'" with "no".

Thanks.

Avi
-- 
Avi 'rlwimi' Drissman
avi@baseview.com
Argh! This darn mail server is trunca


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 16:01:55 2005
Return-Path: <java-user-return-15110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75373 invoked from network); 23 Jun 2005 16:01:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 16:01:55 -0000
Received: (qmail 56026 invoked by uid 500); 23 Jun 2005 16:01:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56005 invoked by uid 500); 23 Jun 2005 16:01:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55992 invoked by uid 99); 23 Jun 2005 16:01:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 09:01:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.48.164.4] (HELO atitlan.it) (212.48.164.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Jun 2005 09:01:49 -0700
Received: (qmail 6408 invoked by uid 506); 23 Jun 2005 15:58:33 -0000
Received: from unknown (HELO Fujitsu) (62.94.201.41)
  by atitlan.it with SMTP; 23 Jun 2005 15:58:33 -0000
Message-ID: <002c01c5780c$d8773980$2f00a8c0@Fujitsu>
From: "Giovanni Dima" <g.dima@atitlan.it>
To: <java-user@lucene.apache.org>
Subject: Re:Re:How lucene and nucth work together?
Date: Thu, 23 Jun 2005 18:01:41 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0029_01C5781D.9BBD3420"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0029_01C5781D.9BBD3420
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Andrzej,
I'm so sorry about still disturbing you!

I followed your suggest and i have found this code:

        try {
        searcher =3D new IndexSearcher(
                        IndexReader.open(indexName)     //create an =
indexSearcher for our page
                );
        } catch (Exception e) {        =20

IndexSearcher is a class of  Lucene API, isn't this?

I have used as "indexName" the index created by nutch. When I access the =
lucene web page of my application, the system not produce any exception, =
but the result list is always empty  (for any search keyword used).

What's wrong?


Thanks in advance.

Giovanni
Atitlan Engineering, Pisa
------=_NextPart_000_0029_01C5781D.9BBD3420--


From java-user-return-15111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 16:16:29 2005
Return-Path: <java-user-return-15111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81285 invoked from network); 23 Jun 2005 16:16:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 16:16:29 -0000
Received: (qmail 82725 invoked by uid 500); 23 Jun 2005 16:16:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82688 invoked by uid 500); 23 Jun 2005 16:16:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82674 invoked by uid 99); 23 Jun 2005 16:16:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 09:16:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 09:16:23 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j5NGGSR15404
	for <java-user@lucene.apache.org>; Thu, 23 Jun 2005 11:16:29 -0500
Message-ID: <42BAE051.5090205@getopt.org>
Date: Thu, 23 Jun 2005 18:16:17 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How lucene and nucth work together?
References: <002c01c5780c$d8773980$2f00a8c0@Fujitsu>
In-Reply-To: <002c01c5780c$d8773980$2f00a8c0@Fujitsu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Giovanni Dima wrote:
> Andrzej, I'm so sorry about still disturbing you!
> 
> I followed your suggest and i have found this code:
> 
> try { searcher = new IndexSearcher( IndexReader.open(indexName)
> //create an indexSearcher for our page ); } catch (Exception e) {
> 
> 
> IndexSearcher is a class of  Lucene API, isn't this?

Yes.

> 
> I have used as "indexName" the index created by nutch. When I access
> the lucene web page of my application, the system not produce any

Lucene doesn't have any "web page" - Lucene is a library. This means 
that you are using some kind of web application based on Lucene. The 
exact details of how a query is run with the index (e.g. the default 
field, analyzer, etc) depend on the application. You cannot just blindly 
use a specific application (which assumes specific things about the 
index) with any random index, and hope that it works...

Well, perhaps the only exception to that rule would be Luke 
(http://www.getopt.org/luke), which you should try anyway to get a 
better understanding of what's in the index.

> exception, but the result list is always empty  (for any search
> keyword used).
> 
> What's wrong?

What is the query? What is the analyzer?


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 18:06:03 2005
Return-Path: <java-user-return-15112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21979 invoked from network); 23 Jun 2005 18:06:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 18:06:03 -0000
Received: (qmail 77372 invoked by uid 500); 23 Jun 2005 18:05:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77352 invoked by uid 500); 23 Jun 2005 18:05:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77339 invoked by uid 99); 23 Jun 2005 18:05:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 11:05:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 11:05:57 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 67E8B13E2006; Thu, 23 Jun 2005 14:05:51 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 6B39113E2005
	for <java-user@lucene.apache.org>; Thu, 23 Jun 2005 14:05:29 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <0932BE11-F10F-4106-9D18-7DE4C8EC95C1@schinz.de>
References: <89FA3553-6FBC-41B3-A289-C3C6253AA775@schinz.de> <41F0759F-D92E-4DC4-A4DB-7C2FBB9E682E@ehatchersolutions.com> <0932BE11-F10F-4106-9D18-7DE4C8EC95C1@schinz.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A297727C-5D46-4898-9446-131BADD4BC59@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: getting text-snippets
Date: Thu, 23 Jun 2005 14:05:27 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Jun 23, 2005, at 10:17 AM, Ulrich Schinz wrote:
>> Field.Text(String, Reader) is not a stored field.  This is why  
>> doc.get("contents") is empty.
>>
>>
>
> ok, i read that in javadoc of lucene... in dont understand what  
> Field.Text(String,Reader,boolean) does... if i set boolean to true,
> what is the stortermvector??

Term vectors is additional index storage allowing you to find out how  
many of each term occurred in a field.  For your purposes, you don't  
need to use that feature.

>> You have some options... change to using a stored field by reading  
>> the file contents into a String and using Field.Text(String,  
>> String) instead.  Or, when rendering the results, go directly to  
>> the file pointed to by doc.get("filename") and read its contents  
>> then.  There are pros/cons to both of these approaches.
>>
>>
>
> ok, i started to try this... but i also try to index pdf-files.. so  
> i get an InputStream from pdftotext. if i try to convert that to a  
> String it takes really long time,
> and we have a lot of data to index....
> i tried different ways to get that done:
> 1.
> String ret = "";
> InputStream is=null;
> String[] cmd = {"/usr/bin/pdftotext", "test.pdf", "-"};
> byte[] buffer = new byte[80];
> child = Runtime.getRuntime().exec(cmd);
> is = child.getInputStream();
> BufferedInputStream bis = new BufferedInputStream(is,80);
> while(next != -1){
> ++t;
> next = bis.read(buffer,bis.pos, 80);
> String input = new String(buffer,0,next);
> ret += input;
> }
>
> not really that way, but conceptual (in real it compiles :-) )
> 2.
> String ret = "";
> InputStream is=null;
> String[] cmd = {"/usr/bin/pdftotext", "test.pdf", "-"};
> byte[] buffer = new byte[80];
> child = Runtime.getRuntime().exec(cmd);
> is = child.getInputStream();
> while(next != -1){
> ++t;
> next = is.read();
> ret += String(next);
> }
>
> but those versions are both really slow... it takes me more than 20  
> minutes (minimum) to get a pdf file of size 900 k...
> is there a way to get that faster???

You should consider using PDFBox for reading PDF files.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 18:18:36 2005
Return-Path: <java-user-return-15113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27814 invoked from network); 23 Jun 2005 18:18:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 18:18:36 -0000
Received: (qmail 7944 invoked by uid 500); 23 Jun 2005 18:18:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7804 invoked by uid 500); 23 Jun 2005 18:18:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7768 invoked by uid 99); 23 Jun 2005 18:18:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 11:18:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from [80.67.18.15] (HELO smtprelay03.ispgateway.de) (80.67.18.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 11:18:18 -0700
Received: (qmail 6819 invoked from network); 23 Jun 2005 18:18:12 -0000
Received: from unknown (HELO p5496C551.dip.t-dialin.net) ([pbs]695637@[84.150.197.81])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 23 Jun 2005 18:18:12 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Is a field in use?
Date: Thu, 23 Jun 2005 20:19:56 +0200
User-Agent: KMail/1.8
References: <A4A2A1E4-69AD-4E22-BF92-8292F4ECB9F3@baseview.com>
In-Reply-To: <A4A2A1E4-69AD-4E22-BF92-8292F4ECB9F3@baseview.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200506232019.56804@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 23 June 2005 17:09, Avi Drissman wrote:

> Suppose I have an index with a varying number of fields in a =C2=A0
> document. Some documents have some fields, and some documents have =C2=A0
> others. Is there a quick way to query the index to see if a =C2=A0
> particular field name is in use at all by any document in the index?

Maybe IndexReader.getFieldNames()?

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 18:23:55 2005
Return-Path: <java-user-return-15114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29344 invoked from network); 23 Jun 2005 18:23:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 18:23:55 -0000
Received: (qmail 24307 invoked by uid 500); 23 Jun 2005 18:23:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24263 invoked by uid 500); 23 Jun 2005 18:23:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24250 invoked by uid 99); 23 Jun 2005 18:23:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 11:23:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.209.138.28] (HELO baseview.com) (63.209.138.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 11:23:50 -0700
Received: from [66.108.249.195] (HELO [192.168.1.51])
  by baseview.com (CommuniGate Pro SMTP 4.2.8)
  with ESMTP-TLS id 20721328 for java-user@lucene.apache.org; Thu, 23 Jun 2005 14:23:47 -0400
X-Message-Flag: This email may contain strong language, violence, and sexual content. Parental discretion is advised.
In-Reply-To: <200506232019.56804@danielnaber.de>
References: <A4A2A1E4-69AD-4E22-BF92-8292F4ECB9F3@baseview.com> <200506232019.56804@danielnaber.de>
Mime-Version: 1.0 (Apple Message framework v730)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <79A35BAE-6AAC-4B41-AF82-490EC9BB3573@baseview.com>
Content-Transfer-Encoding: 7bit
X-Image-Url: http://www.drissman.com/avi/pic.jpg
From: Avi Drissman <avi_drissman@baseview.com>
Subject: Re: Is a field in use?
Date: Thu, 23 Jun 2005 14:23:45 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Jun 23, 2005, at 2:19 PM, Daniel Naber wrote:

> Maybe IndexReader.getFieldNames()?

But will that not list fields that were in use at one time but are no  
longer?

Avi
-- 
Avi 'rlwimi' Drissman
avi@baseview.com
Argh! This darn mail server is trunca


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 18:37:18 2005
Return-Path: <java-user-return-15115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33603 invoked from network); 23 Jun 2005 18:37:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 18:37:18 -0000
Received: (qmail 43427 invoked by uid 500); 23 Jun 2005 18:37:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43400 invoked by uid 500); 23 Jun 2005 18:37:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43387 invoked by uid 99); 23 Jun 2005 18:37:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 11:37:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO zproxy.gmail.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 11:37:13 -0700
Received: by zproxy.gmail.com with SMTP id 13so1005664nzn
        for <java-user@lucene.apache.org>; Thu, 23 Jun 2005 11:37:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=qNPI6lsw5no9O5u+XUQyuYOcWcuaLouv+J8zJ53W9CXuSuwfTSJWCqENDoEaIQApDW9IXPAOus8nY2oP9Ivz3ltb2BmxDqmlLAJBuF4zM61akwvmlBN3C0jVl80qGS0Yg1Z7k1mU1NzpX0DIn3fleWun+wwbq+g+Hs2kI25LLsU=
Received: by 10.36.56.16 with SMTP id e16mr1651567nza;
        Thu, 23 Jun 2005 11:37:09 -0700 (PDT)
Received: from ?172.22.19.82? ([129.176.197.15])
        by mx.gmail.com with ESMTP id 15sm2253331nzn.2005.06.23.11.37.09;
        Thu, 23 Jun 2005 11:37:09 -0700 (PDT)
Message-ID: <42BB0154.7070606@gmail.com>
Date: Thu, 23 Jun 2005 13:37:08 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Is a field in use?
References: <A4A2A1E4-69AD-4E22-BF92-8292F4ECB9F3@baseview.com>
In-Reply-To: <A4A2A1E4-69AD-4E22-BF92-8292F4ECB9F3@baseview.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In my indexes where the available fields vary by document, I maintain an 
additional field that lists out what fields are in used per document.  
That way, I can query for all documents that contain field "foo", or all 
documents that contain a field "foo", and don't contain "bar"... etc.





Avi Drissman wrote:

> Suppose I have an index with a varying number of fields in a  
> document. Some documents have some fields, and some documents have  
> others. Is there a quick way to query the index to see if a  
> particular field name is in use at all by any document in the index?
>
> For example, if document 1 has fields (A, B, C), document 2 fields  
> (B, C, D), document 3 fields (A, E, F), then document 2 is deleted, I  
> need to be able to answer, "Does any document have field 'D'" with "no".
>
> Thanks.
>
> Avi


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 19:25:24 2005
Return-Path: <java-user-return-15116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13175 invoked from network); 23 Jun 2005 19:25:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 19:25:24 -0000
Received: (qmail 20925 invoked by uid 500); 23 Jun 2005 19:25:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20807 invoked by uid 500); 23 Jun 2005 19:25:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20758 invoked by uid 99); 23 Jun 2005 19:25:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 12:25:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.209.138.28] (HELO baseview.com) (63.209.138.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 12:25:16 -0700
Received: from [66.108.249.195] (HELO [192.168.1.51])
  by baseview.com (CommuniGate Pro SMTP 4.2.8)
  with ESMTP-TLS id 20724440 for java-user@lucene.apache.org; Thu, 23 Jun 2005 15:25:04 -0400
X-Message-Flag: This email may contain strong language, violence, and sexual content. Parental discretion is advised.
In-Reply-To: <42BB0154.7070606@gmail.com>
References: <A4A2A1E4-69AD-4E22-BF92-8292F4ECB9F3@baseview.com> <42BB0154.7070606@gmail.com>
Mime-Version: 1.0 (Apple Message framework v730)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1778E2FD-7C53-493C-8461-5885CA853A9E@baseview.com>
Content-Transfer-Encoding: 7bit
X-Image-Url: http://www.drissman.com/avi/pic.jpg
From: Avi Drissman <avi_drissman@baseview.com>
Subject: Re: Is a field in use?
Date: Thu, 23 Jun 2005 15:25:02 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Jun 23, 2005, at 2:37 PM, Dan Armbrust wrote:

> In my indexes where the available fields vary by document, I  
> maintain an additional field that lists out what fields are in used  
> per document.

Excellent idea! Thanks.

Avi

-- 
Avi 'rlwimi' Drissman
avi@baseview.com
Argh! This darn mail server is trunca


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 23:12:46 2005
Return-Path: <java-user-return-15117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5614 invoked from network); 23 Jun 2005 23:12:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 23:12:45 -0000
Received: (qmail 64092 invoked by uid 500); 23 Jun 2005 23:11:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63972 invoked by uid 500); 23 Jun 2005 23:11:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63912 invoked by uid 99); 23 Jun 2005 23:11:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 16:11:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 16:11:16 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 697E15B7DB; Thu, 23 Jun 2005 16:11:10 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 608867F467
	for <java-user@lucene.apache.org>; Thu, 23 Jun 2005 16:11:10 -0700 (PDT)
Date: Thu, 23 Jun 2005 16:11:10 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Updateing Documents:
In-Reply-To: <8776.1119364954@www57.gmx.net>
Message-ID: <Pine.LNX.4.58.0506231610190.3133@hal.rescomp.berkeley.edu>
References: <8776.1119364954@www57.gmx.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: 3. Does anyone know a project based on lucene that offers a complete
: solution for a Intranetsearch?

nutch...
http://lucene.apache.org/nutch/



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 23 23:46:33 2005
Return-Path: <java-user-return-15118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12710 invoked from network); 23 Jun 2005 23:46:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jun 2005 23:46:33 -0000
Received: (qmail 8111 invoked by uid 500); 23 Jun 2005 23:46:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8088 invoked by uid 500); 23 Jun 2005 23:46:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8075 invoked by uid 99); 23 Jun 2005 23:46:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 16:46:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 16:46:27 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 215AC5B781; Thu, 23 Jun 2005 16:46:21 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1FA297F460
	for <java-user@lucene.apache.org>; Thu, 23 Jun 2005 16:46:21 -0700 (PDT)
Date: Thu, 23 Jun 2005 16:46:21 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: weight score based on a fields value
In-Reply-To: <42B992EA.1060705@gmail.com>
Message-ID: <Pine.LNX.4.58.0506231635360.3133@hal.rescomp.berkeley.edu>
References: <42B992EA.1060705@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Your question can be read two ways...

1) score documents in which field "FFF" has value "VVV" slightly higher
   then documents in which field FFF does not contain value "VVV". (or any
   value)
2) score documents in which field "FFF" has some numeric value in such
   a way that the score of hte document is proportional to the value of
   the field

#2 is somewhat difficult, and would require a very customized Scorer.  I
haven't seen a general solution, but i really wish i had time to try
writting one.

#1 can be fairly straight forward using a BooleanQuery.

Assume "Query q" represents the query you normally would search on.
Assume "TermQuery fudge = new TermQuery("FFF","VVV")"

If q is an instanceof BooleanQuery, and at least once of the BooleanClauses is
"required" then you can add fudge to q as an optional sub-clause.  if q is
not a BooleanQuery, or q contains only optional clauses, then construct a
new BooleanQuery, and add q to it as a required clause, and fudge to it as
an optional clause.

now when you execute your search, the result set you get back should still
be the same, but documents containing the term FFF:VVV should have a
slightly increased score.

fudge.setBoost() can be used to change how much it affects the final
score.



: Date: Wed, 22 Jun 2005 11:33:46 -0500
: From: Dan Armbrust <daniel.armbrust.list@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: weight score based on a fields value
:
: Is there a straightforward way that I could change the scoring algorithm
: such that it would break ties based on looking at the value of a field?
: I'm not actually searching for the value in the field, so its not part
: of the query - I just want documents that have a particular field set to
: a particular value to score higher than documents that don't have that
: field set to that value - in cases where otherwise, they both would have
: scored the same.
:
: Thanks,
:
: Dan
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 00:42:45 2005
Return-Path: <java-user-return-15119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29267 invoked from network); 24 Jun 2005 00:42:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 00:42:45 -0000
Received: (qmail 57345 invoked by uid 500); 24 Jun 2005 00:42:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57317 invoked by uid 500); 24 Jun 2005 00:42:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57304 invoked by uid 99); 24 Jun 2005 00:42:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jun 2005 17:42:40 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.73] (HELO smtpout03-03.mesa1.secureserver.net) (64.202.165.73)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Jun 2005 17:42:41 -0700
Received: (qmail 18820 invoked from network); 24 Jun 2005 00:42:37 -0000
Received: from unknown (HELO gem-wbe03.mesa1.secureserver.net) (64.202.189.35)
  by smtpout03-03.mesa1.secureserver.net with SMTP; 24 Jun 2005 00:42:37 -0000
Received: (qmail 19469 invoked by uid 99); 24 Jun 2005 00:42:37 -0000
Message-ID: <20050624004237.19468.qmail@gem-wbe03.mesa1.secureserver.net>
Date: Thu, 23 Jun 2005 17:42:37 -0700
From: jobs@darthdex.com
Subject: Job Opening for Technical Operations Manager / Systems Engineer
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: TEXT/plain; CHARSET=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

JOB TITLE:  Technical Operations Manager / Systems Engineer
LOCATION:  Mountain View, California, USA

Want to build the next generation of search from scratch?  In this role
as Technical Operations Manager / System Engineer, you will be asked to
hit the ground running to build and scale a technical operations and
data center while quickly commanding the respect of an A+ engineering
team.  As you will be the one who carries the pager, you will need to
take a lot of initiative to ensure customers have access to our system. 
This role is for a hands-on leader, passionate to do big things, who
will establish strong cross-functional working relationships within a
growing organization.

Headquartered in Mountain View, we are privately held and VC-backed.

QUALIFICATIONS:
-8+ years technical operations experience involving high-volume document
processing
-Demonstrated ability to build complex operations with commodity
hardware
-Expertise in Linux, Java and other Internet technologies
-High degree of integrity and drive
-MS in Computer Science or equivalent experience
-Available to address operations issues on a moments notice
-Experience hiring, growing, and managing change in an operations group
helpful
-US work authorization required

Send resume and cover letter to jobs@darthdex.com with the subject: 
Technical Operations Manager.  

KEYWORDS:
o Search Engine / Search Engines
o Internet Search
o Technical Operations
o Operations



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 07:25:50 2005
Return-Path: <java-user-return-15120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99085 invoked from network); 24 Jun 2005 07:25:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 07:25:50 -0000
Received: (qmail 4392 invoked by uid 500); 24 Jun 2005 07:25:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3542 invoked by uid 500); 24 Jun 2005 07:25:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3529 invoked by uid 99); 24 Jun 2005 07:25:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 00:25:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [204.127.202.59] (HELO sccrmhc14.comcast.net) (204.127.202.59)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 00:25:46 -0700
Received: from jma (c-67-165-8-214.hsd1.ct.comcast.net[67.165.8.214])
          by comcast.net (sccrmhc14) with SMTP
          id <20050624072542014004gnore>; Fri, 24 Jun 2005 07:25:42 +0000
From: "JMA" <mrjama@comcast.net>
To: <java-user@lucene.apache.org>
Subject: Best way to index document page by page?
Date: Fri, 24 Jun 2005 03:28:58 -0400
Message-ID: <000f01c5788e$63641640$54e11dbf@jma>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook CWS, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <D3188A0C-B427-4286-9D1C-AE5E98BFBE84@ehatchersolutions.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Greetings,
  I have a requirement to search documents page by page.  For example, in a
500 page document, if someone searches for "foo", I need to return "Found
foo on page 4,6,24,100,223,401, and 455".

The way I've implemented this is to index each *page* separately, so my 500
page document is actually treated as not one but 500 documents.  Then when I
get hits, I can play sort games to aggregate the results to look as
necessary.

Is this the best way to do this?  Is there a way to store location
information associated with each term within a field?  Note that there can
be thousands of documents containing thousands of pages.

Thanks in advance,
JMA


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 10:49:04 2005
Return-Path: <java-user-return-15121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62296 invoked from network); 24 Jun 2005 10:49:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 10:49:04 -0000
Received: (qmail 77704 invoked by uid 500); 24 Jun 2005 10:48:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77678 invoked by uid 500); 24 Jun 2005 10:48:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77665 invoked by uid 99); 24 Jun 2005 10:48:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 03:48:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 03:48:57 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B681E13E2006; Fri, 24 Jun 2005 06:48:06 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 9529013E2005
	for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 06:48:00 -0400 (EDT)
In-Reply-To: <000f01c5788e$63641640$54e11dbf@jma>
References: <000f01c5788e$63641640$54e11dbf@jma>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <454D3284-F635-4888-87C5-5BD3325D00C9@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Best way to index document page by page?
Date: Fri, 24 Jun 2005 06:48:00 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 24, 2005, at 3:28 AM, JMA wrote:

>
> Greetings,
>   I have a requirement to search documents page by page.  For  
> example, in a
> 500 page document, if someone searches for "foo", I need to return  
> "Found
> foo on page 4,6,24,100,223,401, and 455".
>
> The way I've implemented this is to index each *page* separately,  
> so my 500
> page document is actually treated as not one but 500 documents.   
> Then when I
> get hits, I can play sort games to aggregate the results to look as
> necessary.
>
> Is this the best way to do this?

That's a great way to do it.  For comparison, lucenebook.com slices  
"Lucene in Action" by section, so each Lucene Document represents a  
single section of the book, with each Document also getting some  
additional information like the starting page and the number of pages  
(and even, though unpresented at the moment) per-page section for  
sections that span across pages.

>   Is there a way to store location
> information associated with each term within a field?  Note that  
> there can
> be thousands of documents containing thousands of pages.

I believe what you want is to store a document identifier for every  
Lucene Document.  In other words, add a field to each Document (which  
represented a page) for the document identifier.  You can then query  
across documents or pages in various ways, narrowing a search to a  
particular document by AND'ing a query with a TermQuery for the  
document identifier.  Does that cover what you're after?

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 12:43:34 2005
Return-Path: <java-user-return-15122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9098 invoked from network); 24 Jun 2005 12:43:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 12:43:34 -0000
Received: (qmail 46755 invoked by uid 500); 24 Jun 2005 12:43:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46555 invoked by uid 500); 24 Jun 2005 12:43:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46528 invoked by uid 99); 24 Jun 2005 12:43:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 05:43:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 05:43:26 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DlnQE-0006t0-CJ
	for java-user@lucene.apache.org; Fri, 24 Jun 2005 14:36:38 +0200
Received: from linagora.net8.nerim.net ([213.41.176.138])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 14:36:38 +0200
Received: from sbailliez by linagora.net8.nerim.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 14:36:38 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Stephane Bailliez <sbailliez@apache.org>
Subject:  Sorting by field from a given 'offset'
Date:  Fri, 24 Jun 2005 14:42:45 +0200
Lines: 24
Message-ID: <d9gunt$4a4$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: linagora.net8.nerim.net
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,


I'm trying to do the following:

"starting from document that has field f1 = a, give me the first n 
documents sorted by field 'z' ordered by asc/desc"

Is it possible to build a complex query more efficient than:

1) search for the document where f1 = a
2) get the field f2 from this document
3) give me the nth sorted documents (in either asc or desc order)


In sql that would be something like:

select LIMIT 0 count * from table where f2 < (SELECT f2 FROM table WHERE 
f1 = 'a') order by f2 desc


Thanks

Stephane


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 13:16:46 2005
Return-Path: <java-user-return-15123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36727 invoked from network); 24 Jun 2005 13:16:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 13:16:46 -0000
Received: (qmail 1252 invoked by uid 500); 24 Jun 2005 13:16:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1232 invoked by uid 500); 24 Jun 2005 13:16:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1217 invoked by uid 99); 24 Jun 2005 13:16:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 06:16:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.48.164.4] (HELO atitlan.it) (212.48.164.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 24 Jun 2005 06:16:40 -0700
Received: (qmail 3090 invoked by uid 506); 24 Jun 2005 13:13:22 -0000
Received: from unknown (HELO Fujitsu) (62.94.201.41)
  by atitlan.it with SMTP; 24 Jun 2005 13:13:22 -0000
Message-ID: <00dc01c578be$f0699da0$2f00a8c0@Fujitsu>
From: "Giovanni Dima" <g.dima@atitlan.it>
To: <java-user@lucene.apache.org>
Subject: Re:Re:How lucene and nucth work together?
Date: Fri, 24 Jun 2005 15:16:31 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00D9_01C578CF.B3B93530"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00D9_01C578CF.B3B93530
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi Andrzej.
Thanks a lot for your advices! Using Luke I've resolved my problem!

Bye!

Giovanni
------=_NextPart_000_00D9_01C578CF.B3B93530--


From java-user-return-15124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 13:44:51 2005
Return-Path: <java-user-return-15124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57146 invoked from network); 24 Jun 2005 13:44:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 13:44:51 -0000
Received: (qmail 47168 invoked by uid 500); 24 Jun 2005 13:44:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47147 invoked by uid 500); 24 Jun 2005 13:44:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47133 invoked by uid 99); 24 Jun 2005 13:44:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 06:44:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 06:44:46 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DloN2-000511-M8
	for java-user@lucene.apache.org; Fri, 24 Jun 2005 15:37:24 +0200
Received: from linagora.net8.nerim.net ([213.41.176.138])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 15:37:24 +0200
Received: from sbailliez by linagora.net8.nerim.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 15:37:24 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Stephane Bailliez <sbailliez@apache.org>
Subject:  Re: Sorting by field from a given 'offset'
Date:  Fri, 24 Jun 2005 15:42:33 +0200
Lines: 34
Message-ID: <d9h281$icl$1@sea.gmane.org>
References:  <d9gunt$4a4$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: linagora.net8.nerim.net
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
In-Reply-To: <d9gunt$4a4$1@sea.gmane.org>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Stephane Bailliez wrote:

> Hi all,
> 
> "starting from document that has field f1 = a, give me the first n 
> documents sorted by field 'z' ordered by asc/desc"
To be more specific, that's something like:

[...]

// get the document field 'dt' from a search
...

// search must occur starting from the dt we just found
Term upperTerm = new Term(FIELD_DT, descending ? MIN_DT:MAX_DT);
Term lowerTerm = new Term(FIELD_DT, dt);
RangeQuery rangeQuery = new RangeQuery(lowerTerm, upperTerm, false);

// we will search in the content
Query contentQuery = QueryParser.parse(queryString, FIELD_DATACONTENT, 
analyzer);

// a document must have both query required
BooleanQuery query = new BooleanQuery();
query.add(rangeQuery, true, false);
query.add(contentQuery, true, false);

// sort according to dt
Sort sort = new Sort( new SortField(FIELD_DT, SortField.STRING, 
descending) );

// return only a given number of docs
TopFieldDocs topFieldDocs = searcher.search(query, null, maxlength, sort);
...


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 14:46:57 2005
Return-Path: <java-user-return-15125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82043 invoked from network); 24 Jun 2005 14:46:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 14:46:57 -0000
Received: (qmail 59159 invoked by uid 500); 24 Jun 2005 14:46:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59099 invoked by uid 500); 24 Jun 2005 14:46:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59086 invoked by uid 99); 24 Jun 2005 14:46:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 07:46:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.48.164.4] (HELO atitlan.it) (212.48.164.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 24 Jun 2005 07:46:51 -0700
Received: (qmail 5168 invoked by uid 506); 24 Jun 2005 14:43:32 -0000
Received: from unknown (HELO Fujitsu) (62.94.201.41)
  by atitlan.it with SMTP; 24 Jun 2005 14:43:32 -0000
Message-ID: <001401c578cb$89440e00$2f00a8c0@Fujitsu>
From: "Giovanni Dima" <g.dima@atitlan.it>
To: <java-user@lucene.apache.org>
Subject:  SimpleHTMLFormatter Class
Date: Fri, 24 Jun 2005 16:46:42 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0011_01C578DC.4C74ABE0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0011_01C578DC.4C74ABE0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I would want to create an extract of text in order to evidence the text =
part in which some keywords appear (tipical of seach engine results). =
The java class SimpleHTMLFormatter, Highlighter can be useful to this? =
They belong package lucene or th are the other java package?=20
Thanks..

Giovanni 
------=_NextPart_000_0011_01C578DC.4C74ABE0--


From java-user-return-15126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 18:24:11 2005
Return-Path: <java-user-return-15126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64455 invoked from network); 24 Jun 2005 18:24:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 18:24:11 -0000
Received: (qmail 17842 invoked by uid 500); 24 Jun 2005 18:24:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17810 invoked by uid 500); 24 Jun 2005 18:24:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17797 invoked by uid 99); 24 Jun 2005 18:24:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 11:24:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 11:24:05 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1Dlsjk-0008Lh-90
	for java-user@lucene.apache.org; Fri, 24 Jun 2005 20:17:08 +0200
Received: from adsl-68-94-44-28.dsl.rcsntx.swbell.net ([68.94.44.28])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 20:17:08 +0200
Received: from avrootshell by adsl-68-94-44-28.dsl.rcsntx.swbell.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 20:17:08 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  avrootshell <avrootshell@roomity.com>
Subject:  IndexSearcher
Date:  Fri, 24 Jun 2005 13:22:35 -0500
Lines: 20
Message-ID: <d9himo$lqm$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: adsl-68-94-44-28.dsl.rcsntx.swbell.net
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

   I'm using using lucene for full text search.
It worked gr8.
But now when i try to search,its throwing an error like this:

.java.io.IOException: Lock obtain timed out: 
Lock@C:\DOCUME~1\tom\LOCALS~1\Temp\lucene-81022e186820264e5b78801c219b8e8b-commit.lock
	at org.apache.lucene.store.Lock.obtain(Lock.java:58)
	at org.apache.lucene.store.Lock$With.run(Lock.java:108)
	at org.apache.lucene.index.IndexReader.open(IndexReader.java:152)
	at org.apache.lucene.index.IndexReader.open(IndexReader.java:121)
	at org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:39)
..............

.........
.....
Can anyone help me to find why is this happenning.

TIA.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 18:46:29 2005
Return-Path: <java-user-return-15127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72816 invoked from network); 24 Jun 2005 18:46:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 18:46:29 -0000
Received: (qmail 52653 invoked by uid 500); 24 Jun 2005 18:46:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52626 invoked by uid 500); 24 Jun 2005 18:46:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52613 invoked by uid 99); 24 Jun 2005 18:46:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 11:46:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yourabi@gmail.com designates 64.233.184.201 as permitted sender)
Received: from [64.233.184.201] (HELO wproxy.gmail.com) (64.233.184.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 11:46:23 -0700
Received: by wproxy.gmail.com with SMTP id 36so1271267wra
        for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 11:46:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=BmVgCT3cCdy/qVaLLWdYTJ+01oAOOaMu4Avon0gXybpdSGV0ZvRE7XNUVa8l+ZRqQsARfCn8VvHDICEK889bz0U7DoibboVMl0tQGQ/nldB+xlKn1XNG6cdQu5pE8xvb94yvx8mwPT3q0iZ4f2TqmdkXCxM/CKjdXWjd/Nf97hA=
Received: by 10.54.53.39 with SMTP id b39mr1965784wra;
        Fri, 24 Jun 2005 11:46:19 -0700 (PDT)
Received: by 10.54.14.63 with HTTP; Fri, 24 Jun 2005 11:46:18 -0700 (PDT)
Message-ID: <b13f3f06050624114638671b75@mail.gmail.com>
Date: Fri, 24 Jun 2005 11:46:18 -0700
From: Yousef Ourabi <yourabi@gmail.com>
Reply-To: Yousef Ourabi <yourabi@gmail.com>
To: java-user@lucene.apache.org
Subject: Field.Keyword vs new Field(String, String, true, true, true)
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a quick question on the Field class. What is the difference between =
this:

for ()
Field content =3D new Field("content", contentArray[i], true, true, true, t=
rue);
doc.add(content);

and this:

doc.add(Field.Keyword("userAlias", userAlias ));

In the first example where the constructor is uesed will the second
term be entered as a Keyword by default? I am a little confused
because the JavaDoc's list both and I am not clear on the difference.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 18:55:10 2005
Return-Path: <java-user-return-15128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76645 invoked from network); 24 Jun 2005 18:55:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 18:55:10 -0000
Received: (qmail 62314 invoked by uid 500); 24 Jun 2005 18:55:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61423 invoked by uid 500); 24 Jun 2005 18:55:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61404 invoked by uid 99); 24 Jun 2005 18:55:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 11:55:05 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.253.83.141] (HELO authusersmtp.mail.cornell.edu) (128.253.83.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 11:55:06 -0700
Received: from Mayfly.cornell.edu (mayfly.mannlib.cornell.edu [128.253.87.13])
	(authenticated bits=0)
	by authusersmtp.mail.cornell.edu (8.13.1/8.12.10) with ESMTP id j5OIwXOJ009963
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 14:58:37 -0400 (EDT)
Message-Id: <6.2.1.2.2.20050624144520.027a9e10@postoffice8.mail.cornell.edu>
X-Mailer: QUALCOMM Windows Eudora Version 6.2.1.2
Date: Fri, 24 Jun 2005 14:54:59 -0400
To: java-user@lucene.apache.org
From: John Fereira <jaf30@cornell.edu>
Subject: QueryParser implicit conjunction
In-Reply-To: <d9himo$lqm$1@sea.gmane.org>
References: <d9himo$lqm$1@sea.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Last month there was a brief thread about changing the implicit conjuction 
for search terms from an OR to AND with a response that the API provides a 
setOperator method for doing so.

A site I am developing also required that "AND" be the implicit conjuction 
so I've tried changing that using the QueryParser.setOperator(1) method. I 
put in some logging to confirm that the implicit operator is changing but 
the search results still seem to be producing results using ORing the 
terms.  Here's what the code looks like:

QueryParser qp = new QueryParser( queryField, analyzer);
logger.info("operator before: "+qp.getOperator());
qp.setOperator(1);
logger.info("operator after: "+qp.getOperator());
query = qp.parse(searchterms, queryField, analyzer);

In the log files it shows that the operator is 0 before the setOperator(1) 
call has been made, and returns a 1 afterwords.  However, when the search 
is performed it still seems to OR the terms.

As a workaround, we just changed the default operator setting in 
QueryParser.java and rebuilt the jar file but I would prefer to use an 
official release so that we can update without applying our patch.





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 19:08:55 2005
Return-Path: <java-user-return-15129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80723 invoked from network); 24 Jun 2005 19:08:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 19:08:55 -0000
Received: (qmail 71924 invoked by uid 500); 24 Jun 2005 19:08:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71036 invoked by uid 500); 24 Jun 2005 19:08:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71022 invoked by uid 99); 24 Jun 2005 19:08:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 12:08:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yourabi@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 12:08:50 -0700
Received: by wproxy.gmail.com with SMTP id 36so1283368wra
        for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 12:08:47 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=nIxCwnOT2mA3w3Hk2bB3l9vv8dy0f2XsxxVDAUTgd5hKmV0Fd/CkX3YFaFtYdS/URMXR6KDNVl5w77uMLSl0ofPagU65WsJoVPvmo/pJrGOTENBF0zQSk7W4PP5Au/EmEcOsv/mNJRQR7PgRDzE6eXAqtBXoqYJMTFHmDiB3uto=
Received: by 10.54.45.1 with SMTP id s1mr1089801wrs;
        Fri, 24 Jun 2005 12:08:46 -0700 (PDT)
Received: by 10.54.14.63 with HTTP; Fri, 24 Jun 2005 12:08:46 -0700 (PDT)
Message-ID: <b13f3f0605062412084db1ec98@mail.gmail.com>
Date: Fri, 24 Jun 2005 12:08:46 -0700
From: Yousef Ourabi <yourabi@gmail.com>
Reply-To: Yousef Ourabi <yourabi@gmail.com>
To: java-user@lucene.apache.org
Subject: Document ID
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello:
Is there any way to force the document id inside the lucene index, if
I have my own internal numbering scheme, it would be nice to have that
reflected inside the lucene index...anyway?

IF not is the document ID created on creation or on addition to the
index? And is there a way to retrieve it before it is added to the
index?

Thanks,
Yousef

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 19:15:42 2005
Return-Path: <java-user-return-15130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94795 invoked from network); 24 Jun 2005 19:15:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 19:15:42 -0000
Received: (qmail 83177 invoked by uid 500); 24 Jun 2005 19:15:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83094 invoked by uid 500); 24 Jun 2005 19:15:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83073 invoked by uid 99); 24 Jun 2005 19:15:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 12:15:35 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.117.150.145] (HELO mail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 12:15:35 -0700
Received: from webmail.controldocs.com (localhost [127.0.0.1])
	by mail.controldocs.com (8.12.11/8.12.11) with ESMTP id j5OJFVbc023558
	for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 14:15:31 -0500
Received: from 65.117.150.250
        (SquirrelMail authenticated user tareque);
        by webmail.controldocs.com with HTTP;
        Fri, 24 Jun 2005 14:15:31 -0500 (CDT)
Message-ID: <2557.65.117.150.250.1119640531.squirrel@65.117.150.250>
Date: Fri, 24 Jun 2005 14:15:31 -0500 (CDT)
Subject: Re-indexing
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3-RC1
X-Mailer: SquirrelMail/1.4.3-RC1
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does lucene have adaptive re-indexing option? I have indexed several large
tables. I need to add extra documents to the tables every now and then. Do
I need to re-index the whole table all the time or there is any way to add
the new documents to the indexing with less fuss?

Thanks
Tareque


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 19:43:21 2005
Return-Path: <java-user-return-15131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11129 invoked from network); 24 Jun 2005 19:43:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 19:43:21 -0000
Received: (qmail 14277 invoked by uid 500); 24 Jun 2005 19:43:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14253 invoked by uid 500); 24 Jun 2005 19:43:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14240 invoked by uid 99); 24 Jun 2005 19:43:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 12:43:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 12:43:15 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 74CF313E2006; Fri, 24 Jun 2005 15:43:08 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id F109413E2005
	for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 15:42:57 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <6.2.1.2.2.20050624144520.027a9e10@postoffice8.mail.cornell.edu>
References: <d9himo$lqm$1@sea.gmane.org> <6.2.1.2.2.20050624144520.027a9e10@postoffice8.mail.cornell.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DE06FC18-B370-4468-9766-9E7461068A22@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser implicit conjunction
Date: Fri, 24 Jun 2005 15:42:56 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 24, 2005, at 2:54 PM, John Fereira wrote:

>
> Last month there was a brief thread about changing the implicit  
> conjuction for search terms from an OR to AND with a response that  
> the API provides a setOperator method for doing so.
>
> A site I am developing also required that "AND" be the implicit  
> conjuction so I've tried changing that using the  
> QueryParser.setOperator(1) method. I put in some logging to confirm  
> that the implicit operator is changing but the search results still  
> seem to be producing results using ORing the terms.  Here's what  
> the code looks like:
>
> QueryParser qp = new QueryParser( queryField, analyzer);
> logger.info("operator before: "+qp.getOperator());
> qp.setOperator(1);
> logger.info("operator after: "+qp.getOperator());
> query = qp.parse(searchterms, queryField, analyzer);
>
> In the log files it shows that the operator is 0 before the  
> setOperator(1) call has been made, and returns a 1 afterwords.   
> However, when the search is performed it still seems to OR the terms.
>
> As a workaround, we just changed the default operator setting in  
> QueryParser.java and rebuilt the jar file but I would prefer to use  
> an official release so that we can update without applying our patch.

Aha!  Look at the method signature of your parse() call.  That is the  
culprit.  To call the non-static method so that you use the  
*instance* of QueryParser rather than the default settings, change to  
this:

     query = qp.parse(searchterms);

Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 19:46:32 2005
Return-Path: <java-user-return-15132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12118 invoked from network); 24 Jun 2005 19:46:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 19:46:32 -0000
Received: (qmail 20079 invoked by uid 500); 24 Jun 2005 19:46:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19893 invoked by uid 500); 24 Jun 2005 19:46:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19879 invoked by uid 99); 24 Jun 2005 19:46:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 12:46:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 12:46:26 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 692B313E2005; Fri, 24 Jun 2005 15:46:20 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 1708413E2005
	for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 15:46:06 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <b13f3f0605062412084db1ec98@mail.gmail.com>
References: <b13f3f0605062412084db1ec98@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7101F1FB-7141-440F-BCB1-56CEFD697105@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Document ID
Date: Fri, 24 Jun 2005 15:46:05 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 24, 2005, at 3:08 PM, Yousef Ourabi wrote:

> Hello:
> Is there any way to force the document id inside the lucene index, if
> I have my own internal numbering scheme, it would be nice to have that
> reflected inside the lucene index...anyway?

For a domain-centric identifier, use a custom field to store (and  
index perhaps?) it.  Lucene's Document id's are internal and not  
controllable.

> IF not is the document ID created on creation or on addition to the
> index? And is there a way to retrieve it before it is added to the
> index?

The id is created on addition to the index - the id is merely the  
position of the document in the index and changes when documents are  
deleted before it and the index optimized.  Document id's are not to  
be relied in the long-term.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 19:47:54 2005
Return-Path: <java-user-return-15133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12517 invoked from network); 24 Jun 2005 19:47:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 19:47:54 -0000
Received: (qmail 24296 invoked by uid 500); 24 Jun 2005 19:47:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24241 invoked by uid 500); 24 Jun 2005 19:47:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24185 invoked by uid 99); 24 Jun 2005 19:47:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 12:47:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 12:47:37 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4111213E2007; Fri, 24 Jun 2005 15:47:32 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id D49B713E2006
	for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 15:47:22 -0400 (EDT)
In-Reply-To: <2557.65.117.150.250.1119640531.squirrel@65.117.150.250>
References: <2557.65.117.150.250.1119640531.squirrel@65.117.150.250>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <23185A8A-A0C7-4362-83CA-DBCB116B8B12@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Re-indexing
Date: Fri, 24 Jun 2005 15:47:11 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 24, 2005, at 3:15 PM, tareque@controldocs.com wrote:
> Does lucene have adaptive re-indexing option? I have indexed  
> several large
> tables. I need to add extra documents to the tables every now and  
> then. Do
> I need to re-index the whole table all the time or there is any way  
> to add
> the new documents to the indexing with less fuss?

Lucene quite pleasantly supports incremental indexing.  Simply open  
an existing index and write new documents to it, no problem.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 19:48:01 2005
Return-Path: <java-user-return-15134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12592 invoked from network); 24 Jun 2005 19:48:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 19:48:01 -0000
Received: (qmail 25033 invoked by uid 500); 24 Jun 2005 19:47:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24976 invoked by uid 500); 24 Jun 2005 19:47:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 76742 invoked by uid 99); 24 Jun 2005 19:11:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mario@ops.co.at designates 194.152.182.4 as permitted sender)
Message-ID: <42BC5AD9.1020302@ops.co.at>
Date: Fri, 24 Jun 2005 21:11:21 +0200
From: Mario Ivankovits <mario@ops.co.at>
User-Agent: Mozilla Thunderbird 1.0 (X11/20041207)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Document ID
References: <b13f3f0605062412084db1ec98@mail.gmail.com>
In-Reply-To: <b13f3f0605062412084db1ec98@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 2.64 (2004-01-11) on smtp.ops.co.at
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-7.7 required=7.0 tests=AWL,BAYES_00,RATWR10_MESSID,
	SARE_TOCC_USER autolearn=no version=2.64
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi!
>Is there any way to force the document id inside the lucene index, if
>I have my own internal numbering scheme, it would be nice to have that
>reflected inside the lucene index...anyway?
>  
Simply put your ID as additional field to your document. You never 
should rely on lucenes document id as it might change due to delete 
documents during optimize.

---
Mario


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 19:52:04 2005
Return-Path: <java-user-return-15135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13615 invoked from network); 24 Jun 2005 19:52:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 19:52:03 -0000
Received: (qmail 31741 invoked by uid 500); 24 Jun 2005 19:51:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31471 invoked by uid 500); 24 Jun 2005 19:51:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31458 invoked by uid 99); 24 Jun 2005 19:51:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 12:51:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 12:51:56 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2B33613E2006; Fri, 24 Jun 2005 15:51:51 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 816F413E2005
	for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 15:51:41 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <b13f3f06050624114638671b75@mail.gmail.com>
References: <b13f3f06050624114638671b75@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DEA0C7F3-890B-4B2D-9659-C8343A45D10D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Field.Keyword vs new Field(String, String, true, true, true)
Date: Fri, 24 Jun 2005 15:51:40 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 24, 2005, at 2:46 PM, Yousef Ourabi wrote:

> I have a quick question on the Field class. What is the difference  
> between this:
>
> for ()
> Field content = new Field("content", contentArray[i], true, true,  
> true, true);
> doc.add(content);
>
> and this:
>
> doc.add(Field.Keyword("userAlias", userAlias ));

The boolean parameters line up to these flags, in order: boolean  
store, boolean index, boolean token, boolean storeTermVector

Field.Keyword is the same as true, true, false, false

Your first call stores, indexes, tokenizes, and stores term vectors.   
Your second call is a field that is stored and indexed, but neither  
tokenized nor storing term vectors.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 19:59:20 2005
Return-Path: <java-user-return-15136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15099 invoked from network); 24 Jun 2005 19:59:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 19:59:20 -0000
Received: (qmail 41498 invoked by uid 500); 24 Jun 2005 19:59:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41240 invoked by uid 500); 24 Jun 2005 19:59:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41225 invoked by uid 99); 24 Jun 2005 19:59:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 12:59:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [131.167.253.61] (HELO ws-bco-smtp1.IM.BATTELLE.ORG) (131.167.253.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 12:59:15 -0700
Received: from [131.167.170.26] by smtp.BATTELLE.ORG (PMDF V6.2-X26 #30874)
 with ESMTP id <5PEO08Q68Z0C79034C@smtp.BATTELLE.ORG> for
 java-user@lucene.apache.org; Fri,
 24 Jun 2005 15:59:04 -0400 (Eastern Daylight Time)
Date: Fri, 24 Jun 2005 15:57:52 -0400
From: Dan Funk <funkd@BATTELLE.ORG>
Subject: Re: IndexSearcher
In-reply-to: <d9himo$lqm$1@sea.gmane.org>
To: java-user@lucene.apache.org
Message-id: <42BC65C0.10409@battelle.org>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7bit
X-Accept-Language: en-us, en
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050317)
References: <d9himo$lqm$1@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Lucene uses a lock file to prevent simultaneous writes to index.  You 
can just delete the file at
C:\DOCUME~1\tom\LOCALS~1\Temp\Lucene-81022e186820264e5b78801c219b8e8b-commit.lock
and be on your way.


avrootshell wrote:

> Hi,
>
>   I'm using using lucene for full text search.
> It worked gr8.
> But now when i try to search,its throwing an error like this:
>
> .java.io.IOException: Lock obtain timed out: 
> Lock@C:\DOCUME~1\tom\LOCALS~1\Temp\lucene-81022e186820264e5b78801c219b8e8b-commit.lock 
>
>     at org.apache.lucene.store.Lock.obtain(Lock.java:58)
>     at org.apache.lucene.store.Lock$With.run(Lock.java:108)
>     at org.apache.lucene.index.IndexReader.open(IndexReader.java:152)
>     at org.apache.lucene.index.IndexReader.open(IndexReader.java:121)
>     at 
> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:39)
> ..............
>
> .........
> .....
> Can anyone help me to find why is this happenning.
>
> TIA.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 20:46:40 2005
Return-Path: <java-user-return-15137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30187 invoked from network); 24 Jun 2005 20:46:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 20:46:40 -0000
Received: (qmail 87621 invoked by uid 500); 24 Jun 2005 20:46:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87585 invoked by uid 500); 24 Jun 2005 20:46:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87572 invoked by uid 99); 24 Jun 2005 20:46:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 13:46:33 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_30_40,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of david.bohl@sourcemedia.com designates 207.241.10.34 as permitted sender)
Received: from [207.241.10.34] (HELO tmgate2.thomsonmedia.com) (207.241.10.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 13:46:33 -0700
Received: from tmskoex01.tm.thomsonmedia.com (ip-33.bankinfo.com [207.241.10.33])
	by tmgate2.thomsonmedia.com (Switch-3.1.7/Switch-3.1.7) with ESMTP id j5OKkToB021249
	for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 15:46:29 -0500 (CDT)
Received: by tmskoex01.tm.thomsonmedia.com with Internet Mail Service (5.5.2657.72)
	id <NL3KVQPB>; Fri, 24 Jun 2005 15:46:29 -0500
Message-ID: <4F8DDDFDAC9A864AAED5BB875129DF4B04D40BBF@tmskoex01.tm.thomsonmedia.com>
From: "Bohl, David" <david.bohl@SourceMedia.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Alternate Lucene Query Highlighter
Date: Fri, 24 Jun 2005 15:46:26 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C578FD.CA3CD094"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C578FD.CA3CD094
Content-Type: text/plain;
	charset="iso-8859-1"

I created a lucene query highlighter (borrowing some code from the one in
the sandbox) that my company is using.  It better handles phrase queries,
doesn't break HTML entities, and has the ability to either highlight terms
in an entire document or to highlight fragments from the document.  I would
like to make this available to anyone who wants it.  Where can I submit
this?

"This communication is intended solely for the addressee and is
confidential and not for third party unauthorized distribution."


------_=_NextPart_001_01C578FD.CA3CD094--

From java-user-return-15138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 20:59:21 2005
Return-Path: <java-user-return-15138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36469 invoked from network); 24 Jun 2005 20:59:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 20:59:21 -0000
Received: (qmail 1454 invoked by uid 500); 24 Jun 2005 20:59:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1424 invoked by uid 500); 24 Jun 2005 20:59:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1400 invoked by uid 99); 24 Jun 2005 20:59:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 13:59:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 13:59:17 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 93BA313E2006; Fri, 24 Jun 2005 16:59:11 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id E91CB13E2005
	for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 16:59:08 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <4F8DDDFDAC9A864AAED5BB875129DF4B04D40BBF@tmskoex01.tm.thomsonmedia.com>
References: <4F8DDDFDAC9A864AAED5BB875129DF4B04D40BBF@tmskoex01.tm.thomsonmedia.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EDDC96CB-1961-43D6-8AAB-B49C4CDAB555@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Alternate Lucene Query Highlighter
Date: Fri, 24 Jun 2005 16:59:08 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

David - please create a new issue in Lucene's Bugzilla system (see  
the Lucene website for a link) and then add your code to the newly  
created issue.

This sounds like a very valuable contribution!

     Erik


On Jun 24, 2005, at 4:46 PM, Bohl, David wrote:

> I created a lucene query highlighter (borrowing some code from the  
> one in
> the sandbox) that my company is using.  It better handles phrase  
> queries,
> doesn't break HTML entities, and has the ability to either  
> highlight terms
> in an entire document or to highlight fragments from the document.   
> I would
> like to make this available to anyone who wants it.  Where can I  
> submit
> this?
>
> "This communication is intended solely for the addressee and is
> confidential and not for third party unauthorized distribution."
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 24 23:13:09 2005
Return-Path: <java-user-return-15139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85162 invoked from network); 24 Jun 2005 23:13:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jun 2005 23:13:09 -0000
Received: (qmail 32135 invoked by uid 500); 24 Jun 2005 23:13:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32113 invoked by uid 500); 24 Jun 2005 23:13:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32100 invoked by uid 99); 24 Jun 2005 23:13:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 16:13:03 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=HTML_20_30,HTML_MESSAGE,HTML_SHORT_LENGTH,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rohitlodha@gmail.com designates 64.233.184.197 as permitted sender)
Received: from [64.233.184.197] (HELO wproxy.gmail.com) (64.233.184.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 16:13:04 -0700
Received: by wproxy.gmail.com with SMTP id 36so2714wra
        for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 16:13:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type;
        b=pXjJtsTm4vAH1bksrMld7+pBjFPnsGYQc0WWSVOZqn/jL2ZHcTgqElWzw37RgVTv5zA9mS5OortaPgCFzPxzf7yEbrRrDZNN3LTGjlqEB5xrthvF4CKmkENFiyJekLeXszky6L3j7h0aDkm9vUcv/p67tIO21s4y+S2G4EqwOwI=
Received: by 10.54.129.19 with SMTP id b19mr2098020wrd;
        Fri, 24 Jun 2005 16:13:00 -0700 (PDT)
Received: by 10.54.44.24 with HTTP; Fri, 24 Jun 2005 16:13:00 -0700 (PDT)
Message-ID: <c0edae7505062416131a3048d9@mail.gmail.com>
Date: Sat, 25 Jun 2005 04:43:00 +0530
From: Rohit Lodha <rohitlodha@gmail.com>
Reply-To: Rohit Lodha <rohitlodha@gmail.com>
To: java-user@lucene.apache.org
Subject: Make Document Class a Interface
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4386_22898686.1119654780617"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4386_22898686.1119654780617
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi all,

Why can we not make document class as interface?

-Rohit

------=_Part_4386_22898686.1119654780617--

From java-user-return-15140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 25 00:00:27 2005
Return-Path: <java-user-return-15140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97033 invoked from network); 25 Jun 2005 00:00:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jun 2005 00:00:27 -0000
Received: (qmail 81609 invoked by uid 500); 25 Jun 2005 00:00:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81460 invoked by uid 500); 25 Jun 2005 00:00:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81444 invoked by uid 99); 25 Jun 2005 00:00:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 17:00:21 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.148.212.185] (HELO w03.bloglines.com) (216.148.212.185)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 24 Jun 2005 17:00:21 -0700
Received: (qmail 32765 invoked by uid 99); 25 Jun 2005 00:00:18 -0000
Message-ID: <1119657618.1663020537.32764.sendItem@bloglines.com>
Date: 25 Jun 2005 00:00:18 -0000
From: yahootintin.11533894@bloglines.com
To: java-user@lucene.apache.org
Subject: Span query performance issue
MIME-Version: 1.0
Content-Type: text/plain;charset="utf-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I'm comparing SpanNearQuery to PhraseQuery results and noticing about
an 8x difference on Linux.  Is a SpanNearQuery doing 8x as much work?  


I'm considering diving into the code if the results sounds unusual to people.
 But if its really doing that much more work, I won't spend time optimizing
something that can't get much faster.

Thanks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 25 00:10:27 2005
Return-Path: <java-user-return-15141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1200 invoked from network); 25 Jun 2005 00:10:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jun 2005 00:10:27 -0000
Received: (qmail 94152 invoked by uid 500); 25 Jun 2005 00:10:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93277 invoked by uid 500); 25 Jun 2005 00:10:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93264 invoked by uid 99); 25 Jun 2005 00:10:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 17:10:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.218.93.40] (HELO web41207.mail.yahoo.com) (66.218.93.40)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 24 Jun 2005 17:10:21 -0700
Received: (qmail 59020 invoked by uid 60001); 25 Jun 2005 00:10:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=CmKQUpZpKSCxVa5tzbVfPoem8HxeEoxPgcxoGvQgZ+DxoJ/Gql8YLTIQ3L1OHgYjHik2jYT63x1J0vopG18ZVUxTDxh35dhIQmwaB7K7XrQFjXCEUkSsa4KYm6rgst/9nwhGqPX0Qo3cpzWoFsTYYqE78Y8hNFxSaqQYV5mJtlQ=  ;
Message-ID: <20050625001018.59018.qmail@web41207.mail.yahoo.com>
Received: from [67.94.92.138] by web41207.mail.yahoo.com via HTTP; Fri, 24 Jun 2005 17:10:18 PDT
Date: Fri, 24 Jun 2005 17:10:18 -0700 (PDT)
From: Lokesh Bajaj <lokesh_bajaj@yahoo.com>
Subject: issues building a large index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-858973527-1119658218=:57650"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-858973527-1119658218=:57650
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit


Hi;

I am a newcomer to this list and trying out Lucene for the first time. It looks really useful and I am evaluating it for a potentially very large index that my company might need to build.

 

As I was investigating using Lucene, I wanted to know what the performance of optimize/index merge would be as the index got large. I setup an initial index of size 10GB that I treat as my master index. I made a copy of this index as ind1.bak. Than, I keep looping by merging this 10GB ind1.bak into my master index. This gives me a good idea of my index merging/optimization cost as I merge the 10GB index into my master index. Each merge iteration is a separate Java process. I use the following API to merge in the 10GB index:

IndexWriter.addIndexes (Directory[] dirs)

 

I have plenty of disk space (1.7 TB). I am using JDK 1.5 on 64-bit Linux: 

$ uname -srvio

Linux 2.6.9-5.0.3.ELsmp #1 SMP Sat Feb 19 15:45:14 CST 2005 x86_64 GNU/Linux

 

I can get to an index of size 70GB where the merge process takes 142 minutes. And so far, I have observed a linear increase in the time needed for each merge iteration. But my index merging slows down to a crawl when going from 70GB to 80GB during the process of creating the compound file (*.cfs file). The process was writing to disk at a rate of 1401 MB/minute with the CPU being relatively free. After a while, the process changes to the CPU being bound at 100% and the disk being written at a rate of 9MB/minute. There is plenty of disk space available  so I dont believe thats an issue. I have also seen larger files created on disk than the size of the CFS file when the slowdown happens. I have also reproduced this twice when trying to go from 70GB to 80GB - so maybe its some size related issue? I took several stack trace dumps (using kill -3) and they all show only one runnable thread, which is trying to write out the compound file:

 

"main" prio=1 tid=0x0000000040115dc0 nid=0x48e5 runnable [0x0000007fbfffc000..0x0000007fbfffd400]

        at java.io.RandomAccessFile.writeBytes(Native Method)

        at java.io.RandomAccessFile.write(RandomAccessFile.java:456)

        at org.apache.lucene.store.FSOutputStream.flushBuffer(FSDirectory.java:466)

        at org.apache.lucene.store.OutputStream.flush(OutputStream.java:131)

        at org.apache.lucene.store.OutputStream.writeByte(OutputStream.java:38)

        at org.apache.lucene.store.OutputStream.writeBytes(OutputStream.java:49)

        at org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java:206)

        at org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java:163)

        at org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java:152)

        at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:100)

        at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:487)

        at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)

        - locked <0x0000002adf663e20> (a org.apache.lucene.index.IndexWriter)

        at org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:389)

-         locked <0x0000002adf663e20> (a org.apache.lucene.index.IndexWriter)

 

Besides wondering, what the heck is going on here, I guess my main questions are the following:

1] Does my test case seem valid? Any reason why adding the same data over and over into the index would cause this sort of weird or abnormal behavior?

2] Has anyone created a bigger size Lucene index when using the compound file format? Any reasons to believe that its a Lucene issue?

3] Does this seem like a JVM issue? Since its always pointing to a native method, I am not really sure what to look for or debug.

4] Anything on 64-bit Linux on AMD that might cause this issue?

 

Thanks for all suggestions and comments,

Lokesh

 

--0-858973527-1119658218=:57650--

From java-user-return-15142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 25 02:26:09 2005
Return-Path: <java-user-return-15142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42163 invoked from network); 25 Jun 2005 02:26:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jun 2005 02:26:09 -0000
Received: (qmail 76685 invoked by uid 500); 25 Jun 2005 02:26:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76645 invoked by uid 500); 25 Jun 2005 02:26:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76629 invoked by uid 99); 25 Jun 2005 02:26:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 19:26:04 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.202 as permitted sender)
Received: from [64.233.170.202] (HELO rproxy.gmail.com) (64.233.170.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 19:26:04 -0700
Received: by rproxy.gmail.com with SMTP id 1so137010rny
        for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 19:26:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=E5gAYP466Y6z4TXCbcpcadTU7mimhxGSotnMXyRIuP3eY2BRSeQDZ/Xcw9/iAkiKLXDsamiB2qDvqAIbIZQDYyFP60Ty8a890WPFgGhFWyrrGueh+6495WVPvfvAbEt5zgcKffDGgdh7Ue0dRRJ7SNeV4d+7X6m4bhb1chyfxMo=
Received: by 10.38.103.16 with SMTP id a16mr105580rnc;
        Fri, 24 Jun 2005 19:26:01 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Fri, 24 Jun 2005 19:26:01 -0700 (PDT)
Message-ID: <7ca1239105062419263266dc2b@mail.gmail.com>
Date: Fri, 24 Jun 2005 19:26:01 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Span query performance issue
In-Reply-To: <1119657618.1663020537.32764.sendItem@bloglines.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <1119657618.1663020537.32764.sendItem@bloglines.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I think Span query in general should do more work than simple Phrase
query. Phrase query, in its simplest form, should just try to find all
terms that are adjacent to each other. Meanwhile, Span query does not
necessary be adjacent to each other, but, with other words in between.

Therefore, I think Span query deserves to be slower than Phrase query.
This said, Span query is way more powerful than Phrase query.

Jian

On 25 Jun 2005 00:00:18 -0000, yahootintin.11533894@bloglines.com
<yahootintin.11533894@bloglines.com> wrote:
> Hi,
>=20
> I'm comparing SpanNearQuery to PhraseQuery results and noticing about
> an 8x difference on Linux.  Is a SpanNearQuery doing 8x as much work?
>=20
>=20
> I'm considering diving into the code if the results sounds unusual to peo=
ple.
>  But if its really doing that much more work, I won't spend time optimizi=
ng
> something that can't get much faster.
>=20
> Thanks.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 25 04:48:46 2005
Return-Path: <java-user-return-15143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81595 invoked from network); 25 Jun 2005 04:48:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jun 2005 04:48:46 -0000
Received: (qmail 50052 invoked by uid 500); 25 Jun 2005 04:48:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49864 invoked by uid 500); 25 Jun 2005 04:48:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49851 invoked by uid 99); 25 Jun 2005 04:48:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 21:48:40 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.192 as permitted sender)
Received: from [64.233.170.192] (HELO rproxy.gmail.com) (64.233.170.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jun 2005 21:48:40 -0700
Received: by rproxy.gmail.com with SMTP id 1so139781rny
        for <java-user@lucene.apache.org>; Fri, 24 Jun 2005 21:48:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=i4Q/mm8dLw2u/QLZiNeJ5aD6opF7qbL3CpX9jaEi5iIp7SFCPJ/7aW9upXQ7GfevKNr+useDylxhf4bOo7qGlDjEEuPQtZeKSaTs3DLTZ6jQAfviJWpCQ1jcj4WjhqcUEiU6qjGXRQDkVYucfkvUBMPZFQc4OlYfnAIdj9fJIDw=
Received: by 10.38.195.36 with SMTP id s36mr106842rnf;
        Fri, 24 Jun 2005 21:48:36 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Fri, 24 Jun 2005 21:48:36 -0700 (PDT)
Message-ID: <7ca123910506242148610a2f8d@mail.gmail.com>
Date: Fri, 24 Jun 2005 21:48:36 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: document ids in "cached" in Hits and index merge
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have a stupid question regarding the transient nature of the document ids=
.=20

As I understand, documents will obtain new doc ids during the index
merge. Suppose if you do a search and got the Hits object. When you
iterate through the documents by id, the index merge happens. How the
merge and new ids created do not mess up the retrieval of Hits
documents?

Could anyone please enlighten me on this synchronization issue?

Thanks a lot,

Jian

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 25 08:50:06 2005
Return-Path: <java-user-return-15144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46101 invoked from network); 25 Jun 2005 08:50:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jun 2005 08:50:06 -0000
Received: (qmail 61924 invoked by uid 500); 25 Jun 2005 08:50:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61025 invoked by uid 500); 25 Jun 2005 08:50:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61012 invoked by uid 99); 25 Jun 2005 08:50:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 01:50:01 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.32] (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 01:50:01 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr12.xs4all.nl (8.13.3/8.13.3) with ESMTP id j5P8nvxj038642
	for <java-user@lucene.apache.org>; Sat, 25 Jun 2005 10:49:57 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Span query performance issue
Date: Sat, 25 Jun 2005 10:49:56 +0200
User-Agent: KMail/1.5.4
References: <1119657618.1663020537.32764.sendItem@bloglines.com> <7ca1239105062419263266dc2b@mail.gmail.com>
In-Reply-To: <7ca1239105062419263266dc2b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506251049.56984.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Saturday 25 June 2005 04:26, jian chen wrote:
> Hi,
> 
> I think Span query in general should do more work than simple Phrase
> query. Phrase query, in its simplest form, should just try to find all
> terms that are adjacent to each other. Meanwhile, Span query does not
> necessary be adjacent to each other, but, with other words in between.
> 
> Therefore, I think Span query deserves to be slower than Phrase query.
> This said, Span query is way more powerful than Phrase query.
> 
> Jian
> 
> On 25 Jun 2005 00:00:18 -0000, yahootintin.11533894@bloglines.com
> <yahootintin.11533894@bloglines.com> wrote:
> > Hi,
> > 
> > I'm comparing SpanNearQuery to PhraseQuery results and noticing about
> > an 8x difference on Linux.  Is a SpanNearQuery doing 8x as much work?
> > 
> > 
> > I'm considering diving into the code if the results sounds unusual to 
people.
> >  But if its really doing that much more work, I won't spend time 
optimizing
> > something that can't get much faster.

The main difference is in the extra generality of Spans over positions.
Spans have a begin position and an end position.
Matching two Spans for  the terms of a phrase requires testing both
their begin positions and their end positions, even though they differ
only by a constant for the same term.
Spans also carry around their current document number and this may
involve some more redundancies when finding finding the matches
within a single document.
Also, for exact matches (zero slop) PhraseQuery uses a separate scorer
that takes full advantage of the special case.
So, when the generality of the Spans is not needed, one should always
try and use a PhraseQuery. 

I'm not surprised that SpanNearQuery is slower than PhraseQuery,
and I'd expect a factor 3-4 between them. The factor 8 might indicate that
there is some room for improvement in the span package.
(I'd expect the CellQueue in NearSpans to be the bottleneck.)

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 25 09:37:47 2005
Return-Path: <java-user-return-15145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53274 invoked from network); 25 Jun 2005 09:37:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jun 2005 09:37:47 -0000
Received: (qmail 81564 invoked by uid 500); 25 Jun 2005 09:37:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81518 invoked by uid 500); 25 Jun 2005 09:37:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81504 invoked by uid 99); 25 Jun 2005 09:37:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 02:37:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from [80.67.18.15] (HELO smtprelay03.ispgateway.de) (80.67.18.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 02:37:43 -0700
Received: (qmail 20316 invoked from network); 25 Jun 2005 09:37:37 -0000
Received: from unknown (HELO p5496D4C6.dip.t-dialin.net) ([pbs]695637@[84.150.212.198])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 25 Jun 2005 09:37:37 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: issues building a large index
Date: Sat, 25 Jun 2005 11:39:25 +0200
User-Agent: KMail/1.8
References: <20050625001018.59018.qmail@web41207.mail.yahoo.com>
In-Reply-To: <20050625001018.59018.qmail@web41207.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506251139.25088@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Saturday 25 June 2005 02:10, Lokesh Bajaj wrote:

> 3] Does this seem like a JVM issue? Since its always pointing to a
> native method, I am not really sure what to look for or debug.

Does you JVM have enough heap (e.g. -Xmx500M)? Java gets slow if it's busy 
with garbage collection.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 25 12:00:00 2005
Return-Path: <java-user-return-15146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77210 invoked from network); 25 Jun 2005 12:00:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jun 2005 12:00:00 -0000
Received: (qmail 53108 invoked by uid 500); 25 Jun 2005 11:59:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52768 invoked by uid 500); 25 Jun 2005 11:59:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52755 invoked by uid 99); 25 Jun 2005 11:59:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 04:59:54 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FORGED_RCVD_HELO,FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [132.236.56.38] (HELO postoffice8.mail.cornell.edu) (132.236.56.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 04:59:54 -0700
Received: from Zoodle.cornell.edu (cpe-69-202-76-159.twcny.res.rr.com [69.202.76.159])
	by postoffice8.mail.cornell.edu (8.12.10/8.12.6) with ESMTP id j5PBxm9h016743
	for <java-user@lucene.apache.org>; Sat, 25 Jun 2005 07:59:49 -0400 (EDT)
Message-Id: <5.2.1.1.2.20050625075609.00bf1c20@pop-server.twcny.rr.com>
X-Sender: jaf30@postoffice8.mail.cornell.edu (Unverified)
X-Mailer: QUALCOMM Windows Eudora Version 5.2.1
Date: Sat, 25 Jun 2005 07:59:46 -0400
To: java-user@lucene.apache.org
From: John Fereira <jaf30@cornell.edu>
Subject: Re: QueryParser implicit conjunction
In-Reply-To: <DE06FC18-B370-4468-9766-9E7461068A22@ehatchersolutions.com
 >
References: <6.2.1.2.2.20050624144520.027a9e10@postoffice8.mail.cornell.edu>
 <d9himo$lqm$1@sea.gmane.org>
 <6.2.1.2.2.20050624144520.027a9e10@postoffice8.mail.cornell.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-PMX-Version: 4.7.0.111621, Antispam-Engine: 2.0.2.0, Antispam-Data: 2005.6.25.8
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

At 03:42 PM 6/24/2005 -0400, you wrote:

>On Jun 24, 2005, at 2:54 PM, John Fereira wrote:
>
>>
>>Last month there was a brief thread about changing the implicit
>>conjuction for search terms from an OR to AND with a response that
>>the API provides a setOperator method for doing so.
>>
>>A site I am developing also required that "AND" be the implicit
>>conjuction so I've tried changing that using the
>>QueryParser.setOperator(1) method. I put in some logging to confirm
>>that the implicit operator is changing but the search results still
>>seem to be producing results using ORing the terms.  Here's what
>>the code looks like:
>>
>>QueryParser qp = new QueryParser( queryField, analyzer);
>>logger.info("operator before: "+qp.getOperator());
>>qp.setOperator(1);
>>logger.info("operator after: "+qp.getOperator());
>>query = qp.parse(searchterms, queryField, analyzer);
>>
>>In the log files it shows that the operator is 0 before the
>>setOperator(1) call has been made, and returns a 1 afterwords.
>>However, when the search is performed it still seems to OR the terms.
>>
>>As a workaround, we just changed the default operator setting in
>>QueryParser.java and rebuilt the jar file but I would prefer to use
>>an official release so that we can update without applying our patch.
>
>Aha!  Look at the method signature of your parse() call.  That is the
>culprit.  To call the non-static method so that you use the
>*instance* of QueryParser rather than the default settings, change to
>this:
>
>     query = qp.parse(searchterms);

Thanks, that fixed it.

   Was there someplace that I should have looked to determine that 
qp.parse(String) would call the non-static method but qp.parse(String, 
String, Analyzer) would not?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 25 12:41:19 2005
Return-Path: <java-user-return-15147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88318 invoked from network); 25 Jun 2005 12:41:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jun 2005 12:41:19 -0000
Received: (qmail 75492 invoked by uid 500); 25 Jun 2005 12:41:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74561 invoked by uid 500); 25 Jun 2005 12:41:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74548 invoked by uid 99); 25 Jun 2005 12:41:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 05:41:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 05:41:15 -0700
Received: (qmail 1122 invoked from network); 25 Jun 2005 12:41:07 -0000
Received: from unknown (HELO p5496DDF6.dip.t-dialin.net) ([pbs]695637@[84.150.221.246])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 25 Jun 2005 12:41:07 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: QueryParser implicit conjunction
Date: Sat, 25 Jun 2005 14:42:56 +0200
User-Agent: KMail/1.8
References: <6.2.1.2.2.20050624144520.027a9e10@postoffice8.mail.cornell.edu> <5.2.1.1.2.20050625075609.00bf1c20@pop-server.twcny.rr.com>
In-Reply-To: <5.2.1.1.2.20050625075609.00bf1c20@pop-server.twcny.rr.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200506251442.56349@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Saturday 25 June 2005 13:59, John Fereira wrote:

> Was there someplace that I should have looked to determine that
> qp.parse(String) would call the non-static method but qp.parse(String,
> String, Analyzer) would not?

Your IDE should have warned you about that. If it didn't, try Eclipse.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 25 15:52:45 2005
Return-Path: <java-user-return-15148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80954 invoked from network); 25 Jun 2005 15:52:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jun 2005 15:52:40 -0000
Received: (qmail 96492 invoked by uid 500); 25 Jun 2005 15:13:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96290 invoked by uid 500); 25 Jun 2005 15:13:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96148 invoked by uid 99); 25 Jun 2005 15:13:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 08:13:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 08:13:17 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DmCEh-0001LV-0n
	for java-user@lucene.apache.org; Sat, 25 Jun 2005 17:06:23 +0200
Received: from 209-6-140-168.c3-0.bkl-ubr2.sbo-bkl.ma.cable.rcn.com ([209.6.140.168])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 25 Jun 2005 17:06:23 +0200
Received: from rnewson by 209-6-140-168.c3-0.bkl-ubr2.sbo-bkl.ma.cable.rcn.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 25 Jun 2005 17:06:23 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Robert Newson <rnewson@connected.com>
Subject:  Re: document ids in "cached" in Hits and index merge
Date:  Sat, 25 Jun 2005 11:12:29 -0400
Lines: 29
Message-ID: <d9jrsa$8uf$1@sea.gmane.org>
References:  <7ca123910506242148610a2f8d@mail.gmail.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: 209-6-140-168.c3-0.bkl-ubr2.sbo-bkl.ma.cable.rcn.com
User-Agent: Debian Thunderbird 1.0.2 (X11/20050331)
X-Accept-Language: en-us, en
In-Reply-To: <7ca123910506242148610a2f8d@mail.gmail.com>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


As long as you use the same Searcher object, you shouldn't see document 
ids changing.

When you open a searcher you get a consistent view of the segments that 
existed at the time. Merging creates new segments which you won't see 
until you create a new searcher.

In short, retrieving hits while indexing and merging works correctly, no 
surprises.

B.

jian chen wrote:
> Hi,
> 
> I have a stupid question regarding the transient nature of the document ids. 
> 
> As I understand, documents will obtain new doc ids during the index
> merge. Suppose if you do a search and got the Hits object. When you
> iterate through the documents by id, the index merge happens. How the
> merge and new ids created do not mess up the retrieval of Hits
> documents?
> 
> Could anyone please enlighten me on this synchronization issue?
> 
> Thanks a lot,
> 
> Jian


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 25 15:57:54 2005
Return-Path: <java-user-return-15149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89494 invoked from network); 25 Jun 2005 15:57:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jun 2005 15:57:54 -0000
Received: (qmail 95196 invoked by uid 500); 25 Jun 2005 15:57:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95127 invoked by uid 500); 25 Jun 2005 15:57:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95109 invoked by uid 99); 25 Jun 2005 15:57:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 08:57:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 08:57:17 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9FDE213E2005; Sat, 25 Jun 2005 11:57:11 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id BFE3613E2005
	for <java-user@lucene.apache.org>; Sat, 25 Jun 2005 11:57:01 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <5.2.1.1.2.20050625075609.00bf1c20@pop-server.twcny.rr.com>
References: <6.2.1.2.2.20050624144520.027a9e10@postoffice8.mail.cornell.edu> <d9himo$lqm$1@sea.gmane.org> <6.2.1.2.2.20050624144520.027a9e10@postoffice8.mail.cornell.edu> <5.2.1.1.2.20050625075609.00bf1c20@pop-server.twcny.rr.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <09238CDC-F806-42A3-BFB8-D81C3EBFF7A9@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser implicit conjunction
Date: Sat, 25 Jun 2005 11:57:00 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 25, 2005, at 7:59 AM, John Fereira wrote:
>> Aha!  Look at the method signature of your parse() call.  That is the
>> culprit.  To call the non-static method so that you use the
>> *instance* of QueryParser rather than the default settings, change to
>> this:
>>
>>     query = qp.parse(searchterms);
>>
>
> Thanks, that fixed it.
>
>   Was there someplace that I should have looked to determine that  
> qp.parse(String) would call the non-static method but qp.parse 
> (String, String, Analyzer) would not?

Besides Daniel's comment about IDE's warning of this (calling a  
static method from an instance variable is usually a warning), you  
can also glean this information from Lucene's Javadocs.  The static  
parse method is more trouble than its worth, actually.  We should  
probably deprecate that for 1.9 and remove it in 2.0 and only allow  
QueryParser instances - this allows more flexibility with things like  
MultiFieldQueryParser and such too.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 25 16:36:35 2005
Return-Path: <java-user-return-15150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97825 invoked from network); 25 Jun 2005 16:36:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jun 2005 16:36:35 -0000
Received: (qmail 33316 invoked by uid 500); 25 Jun 2005 16:36:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33257 invoked by uid 500); 25 Jun 2005 16:36:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33244 invoked by uid 99); 25 Jun 2005 16:36:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 09:36:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 09:36:29 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DmDX7-0000wI-KP
	for java-user@lucene.apache.org; Sat, 25 Jun 2005 18:29:29 +0200
Received: from ip-176.net-82-216-240.rev.numericable.fr ([82.216.240.176])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 25 Jun 2005 18:29:29 +0200
Received: from sbailliez by ip-176.net-82-216-240.rev.numericable.fr with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 25 Jun 2005 18:29:29 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Stephane Bailliez <sbailliez@apache.org>
Subject:  Index Replication / Clustering
Date:  Sat, 25 Jun 2005 18:35:30 +0200
Lines: 51
Message-ID: <d9k0o1$p61$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: ip-176.net-82-216-240.rev.numericable.fr
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I have been browsing the archives concerning this particular topic.

I'm in the same boat and the customer has clustering requirements.

To give some background:
I have a constant flow of incoming messages flying over the network that 
need to be archived in db, indexed and dispatched to thousand of clients 
(rich client console).

the backend architecture needs to be clustered meaning that:
- the message broker needs to be clustered
- the database needs to be replicated and support failover
- the search engine index needs to be replicated

This is for a 24x7 operation.

My main problem is that there is a constant flow of write just about 
everywhere meaning that the lucene index keeps changing, and that I have 
a very small window available to replicate the data across the network.
(As of now, I have 2 messages / minute and should go over 50 in the 
medium-term).

Concerning the index, being able to replicate is cool, but if one node 
goes down, it must be able to resynchronize when you bring it up on the 
cluster...that's a hell of problem.

As it is acceptable to have downtime on the search engine, I was 
thinking it was much easier to:

1) rely on a shared index via NFS for each node.
2) dedicate a box to the search engine and access it via rpc from each node

Considering the messages I have seen in the archives, 1) seems to be a 
no-go.

Option 2) is generally not recommended but think it could fit my needs 
quite well. IMHO it should work quite well to bring the box in operation 
if it goes down. Synchronizing the index for me is just a matter of 
going through the database to reindex the archived content, this will 
take sometime but as I said, running in degraded mode is acceptable.

As anyone any suggestion/recommendation/experience/thoughts concerning 
the problems mentionned above ?

Cheers,

Stephane





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 25 17:50:02 2005
Return-Path: <java-user-return-15151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14639 invoked from network); 25 Jun 2005 17:50:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jun 2005 17:50:01 -0000
Received: (qmail 93994 invoked by uid 500); 25 Jun 2005 17:49:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93684 invoked by uid 500); 25 Jun 2005 17:49:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93671 invoked by uid 99); 25 Jun 2005 17:49:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 10:49:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.93.125.162] (HELO cpanel37.gzo.com) (69.93.125.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 10:49:56 -0700
Received: from [195.96.81.145] (helo=pb)
	by cpanel37.gzo.com with esmtpa (Exim 4.50)
	id 1DmEmq-0001dW-6u
	for java-user@lucene.apache.org; Sat, 25 Jun 2005 12:49:48 -0500
From: "Pasha Bizhan" <lucene-list@lucenedotnet.com>
To: <java-user@lucene.apache.org>
Subject: RE: Document ID
Date: Sat, 25 Jun 2005 21:55:08 +0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
In-Reply-To: <7101F1FB-7141-440F-BCB1-56CEFD697105@ehatchersolutions.com>
Thread-Index: AcV49WZi3d0O91EYRP6IV6lWqy0OVAAtgk3Q
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - cpanel37.gzo.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - lucenedotnet.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20050625174956.940F110FB2E8@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 

> From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 

> For a domain-centric identifier, use a custom field to store 
> (and index perhaps?) it.  Lucene's Document id's are internal 
> and not controllable.
 
Unfortunately Lucene contains API that strongly attached to internal id :(

For example - most of the TermVector API or IndexReader.delete()
The simple question - I have a document and I add it into index with
TermVector support.
How can I simply retrive the TermVector information for the document? 

	TermFreqVector vector = reader.getTermFreqVector(document)?
	reader.delete(document);
Etc..

It's not rise a claim. I don't know a good unified solution for this problem
:(

Pasha Bizhan



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 25 21:13:27 2005
Return-Path: <java-user-return-15152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64829 invoked from network); 25 Jun 2005 21:13:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jun 2005 21:13:27 -0000
Received: (qmail 40685 invoked by uid 500); 25 Jun 2005 21:13:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40658 invoked by uid 500); 25 Jun 2005 21:13:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40645 invoked by uid 99); 25 Jun 2005 21:13:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 14:13:21 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FORGED_RCVD_HELO,FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [132.236.56.38] (HELO postoffice8.mail.cornell.edu) (132.236.56.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 14:13:21 -0700
Received: from Zoodle.cornell.edu (cpe-69-202-76-159.twcny.res.rr.com [69.202.76.159])
	by postoffice8.mail.cornell.edu (8.12.10/8.12.6) with ESMTP id j5PLDHv9005123
	for <java-user@lucene.apache.org>; Sat, 25 Jun 2005 17:13:17 -0400 (EDT)
Message-Id: <5.2.1.1.2.20050625170942.00c51780@postoffice8.mail.cornell.edu>
X-Sender: jaf30@postoffice8.mail.cornell.edu (Unverified)
X-Mailer: QUALCOMM Windows Eudora Version 5.2.1
Date: Sat, 25 Jun 2005 17:13:12 -0400
To: java-user@lucene.apache.org
From: John Fereira <jaf30@cornell.edu>
Subject: Re: QueryParser implicit conjunction
In-Reply-To: <200506251442.56349@danielnaber.de>
References: <5.2.1.1.2.20050625075609.00bf1c20@pop-server.twcny.rr.com>
 <6.2.1.2.2.20050624144520.027a9e10@postoffice8.mail.cornell.edu>
 <5.2.1.1.2.20050625075609.00bf1c20@pop-server.twcny.rr.com>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-PMX-Version: 4.7.0.111621, Antispam-Engine: 2.0.2.0, Antispam-Data: 2005.6.25.19
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

At 02:42 PM 6/25/2005 +0200, Daniel Naber wrote:
>On Saturday 25 June 2005 13:59, John Fereira wrote:
>
> > Was there someplace that I should have looked to determine that
> > qp.parse(String) would call the non-static method but qp.parse(String,
> > String, Analyzer) would not?
>
>Your IDE should have warned you about that. If it didn't, try Eclipse.

I usually don't use an IDE and am familiar with Eclipse, IntelliJ, 
NetBeans, etc.   When I started programming on *nix systems 21 years ago we 
didn't have them so I just got used to working from a command shell.

John Fereira
jaf30@cornell.edu
Ithaca, NY


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 25 22:21:39 2005
Return-Path: <java-user-return-15153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73313 invoked from network); 25 Jun 2005 22:21:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jun 2005 22:21:39 -0000
Received: (qmail 76470 invoked by uid 500); 25 Jun 2005 22:21:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76435 invoked by uid 500); 25 Jun 2005 22:21:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76422 invoked by uid 99); 25 Jun 2005 22:21:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 15:21:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 15:21:33 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7E2BF5B789; Sat, 25 Jun 2005 15:21:25 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7B0597F45E
	for <java-user@lucene.apache.org>; Sat, 25 Jun 2005 15:21:25 -0700 (PDT)
Date: Sat, 25 Jun 2005 15:21:25 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Best way to index document page by page?
In-Reply-To: <000f01c5788e$63641640$54e11dbf@jma>
Message-ID: <Pine.LNX.4.58.0506251509590.21444@hal.rescomp.berkeley.edu>
References: <000f01c5788e$63641640$54e11dbf@jma>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Is this the best way to do this?  Is there a way to store location
: information associated with each term within a field?  Note that there can
: be thousands of documents containing thousands of pages.

It depends on what's important to you.

(FYI: i'm document with "file" in the rest of this mail, to avoid
confusion with lucene's Document concept)

if your goal is just to find files containing words and order those
files by date, or some other fixed attribute of the file -- then
making one Document per page is probably fine.

If you really want to take advantage of score *per file* then indexing
each page is going to make it hard for you to say which files matches a
particular search 'best'

Something to consider is a two pronged approach: one Document per
file (with a special doctype:file field), and one Document per page
(doctype:page).  Initial searches can be BooleanQueries with a mandatory
"doctype:file" clause, and then once you've got a list of fileIds
sorted by score, do a secondary BooleanSearch on: your initial search, the
fileIds from the first page of your results, "doctype:page".



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 25 22:29:41 2005
Return-Path: <java-user-return-15154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74937 invoked from network); 25 Jun 2005 22:29:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jun 2005 22:29:41 -0000
Received: (qmail 83724 invoked by uid 500); 25 Jun 2005 22:29:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83127 invoked by uid 500); 25 Jun 2005 22:29:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83102 invoked by uid 99); 25 Jun 2005 22:29:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 15:29:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 15:29:36 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id BCD7C5B789; Sat, 25 Jun 2005 15:29:32 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BA1117F467
	for <java-user@lucene.apache.org>; Sat, 25 Jun 2005 15:29:32 -0700 (PDT)
Date: Sat, 25 Jun 2005 15:29:32 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: RE: Document ID
In-Reply-To: <20050625174956.940F110FB2E8@asf.osuosl.org>
Message-ID: <Pine.LNX.4.58.0506251527280.21444@hal.rescomp.berkeley.edu>
References: <20050625174956.940F110FB2E8@asf.osuosl.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: The simple question - I have a document and I add it into index with
: TermVector support.
: How can I simply retrive the TermVector information for the document?
:
: 	TermFreqVector vector = reader.getTermFreqVector(document)?
: 	reader.delete(document);
: Etc..

Open an IndexReader, and either search for the document you want, or use a
TermEnum to seek to it (assuming you have a unique field containing your
own identifier for the data).  then use the same IndexReader to get the
TermVector information.

As long as you have that IndexReader open, the internal doc id will be
consistent (for that reader).


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 26 01:15:03 2005
Return-Path: <java-user-return-15155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98522 invoked from network); 26 Jun 2005 01:15:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2005 01:15:03 -0000
Received: (qmail 71447 invoked by uid 500); 26 Jun 2005 01:15:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70590 invoked by uid 500); 26 Jun 2005 01:14:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70563 invoked by uid 99); 26 Jun 2005 01:14:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 18:14:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jun 2005 18:14:57 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E724F13E2005; Sat, 25 Jun 2005 21:14:50 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 10B8213E2005
	for <java-user@lucene.apache.org>; Sat, 25 Jun 2005 21:14:49 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <5.2.1.1.2.20050625170942.00c51780@postoffice8.mail.cornell.edu>
References: <5.2.1.1.2.20050625075609.00bf1c20@pop-server.twcny.rr.com> <6.2.1.2.2.20050624144520.027a9e10@postoffice8.mail.cornell.edu> <5.2.1.1.2.20050625075609.00bf1c20@pop-server.twcny.rr.com> <5.2.1.1.2.20050625170942.00c51780@postoffice8.mail.cornell.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A8574054-1392-4C2C-8C62-878A32C1D61A@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser implicit conjunction
Date: Sat, 25 Jun 2005 21:14:49 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 25, 2005, at 5:13 PM, John Fereira wrote:

> At 02:42 PM 6/25/2005 +0200, Daniel Naber wrote:
>
>> On Saturday 25 June 2005 13:59, John Fereira wrote:
>>
>> > Was there someplace that I should have looked to determine that
>> > qp.parse(String) would call the non-static method but qp.parse 
>> (String,
>> > String, Analyzer) would not?
>>
>> Your IDE should have warned you about that. If it didn't, try  
>> Eclipse.
>>
>
> I usually don't use an IDE and am familiar with Eclipse, IntelliJ,  
> NetBeans, etc.   When I started programming on *nix systems 21  
> years ago we didn't have them so I just got used to working from a  
> command shell.

See what you're missing?!  :)

I really admire and respect the folks that do Java without an IDE.   
Doug wrote Lucene with emacs, and that is a skill in and of itself to  
be revered.  But I view Java source code as a rich interconnected  
web.  Surfing it with an IDE(A!) is definitely my preference.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 26 08:17:19 2005
Return-Path: <java-user-return-15156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3783 invoked from network); 26 Jun 2005 08:17:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2005 08:17:19 -0000
Received: (qmail 60870 invoked by uid 500); 26 Jun 2005 08:17:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60838 invoked by uid 500); 26 Jun 2005 08:17:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60825 invoked by uid 99); 26 Jun 2005 08:17:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2005 01:17:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2005 01:17:14 -0700
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id A73420810056; Sun, 26 Jun 2005 04:28:36 -0400
Message-ID: <42BE6484.6000907@bayt.net>
Date: Sun, 26 Jun 2005 12:17:08 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Index Replication / Clustering
References: <d9k0o1$p61$1@sea.gmane.org>
In-Reply-To: <d9k0o1$p61$1@sea.gmane.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Declude-Sender: nsh@bayt.net [192.168.1.24]
X-Declude-Spoolname: D673320810056B9C2.SMD
X-Declude-Note: Scanned by Declude 2.0.6.16 (http://www.declude.com/x-note.htm) for spam.
X-Declude-Scan: Score [0] at 04:28:37 on 26 Jun 2005
X-Declude-Tests: Whitelisted
X-Country-Chain: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Our setup is quite similar to yours, but in all honesty, you will need 
to do some for of batching on your updates simply because, you don't 
want to keep the Index Writter open all the time.

As for clustering, we went through three iterations, that keep x indexes 
parallelized on x servers all of this with fail over and index 
independent synchronization with your persistent store. There was a 
little discussion about this a few weeks back, and I mentioned that your 
biggest pain will be maintaining the integrity of parallel indexes that 
are updated/deleted autonomously (atomic updates and deletes) but there 
are ways of running iterative checks to make sure that your indecies 
stay clean.

Nader Henein

Stephane Bailliez wrote:

>
> I have been browsing the archives concerning this particular topic.
>
> I'm in the same boat and the customer has clustering requirements.
>
> To give some background:
> I have a constant flow of incoming messages flying over the network 
> that need to be archived in db, indexed and dispatched to thousand of 
> clients (rich client console).
>
> the backend architecture needs to be clustered meaning that:
> - the message broker needs to be clustered
> - the database needs to be replicated and support failover
> - the search engine index needs to be replicated
>
> This is for a 24x7 operation.
>
> My main problem is that there is a constant flow of write just about 
> everywhere meaning that the lucene index keeps changing, and that I 
> have a very small window available to replicate the data across the 
> network.
> (As of now, I have 2 messages / minute and should go over 50 in the 
> medium-term).
>
> Concerning the index, being able to replicate is cool, but if one node 
> goes down, it must be able to resynchronize when you bring it up on 
> the cluster...that's a hell of problem.
>
> As it is acceptable to have downtime on the search engine, I was 
> thinking it was much easier to:
>
> 1) rely on a shared index via NFS for each node.
> 2) dedicate a box to the search engine and access it via rpc from each 
> node
>
> Considering the messages I have seen in the archives, 1) seems to be a 
> no-go.
>
> Option 2) is generally not recommended but think it could fit my needs 
> quite well. IMHO it should work quite well to bring the box in 
> operation if it goes down. Synchronizing the index for me is just a 
> matter of going through the database to reindex the archived content, 
> this will take sometime but as I said, running in degraded mode is 
> acceptable.
>
> As anyone any suggestion/recommendation/experience/thoughts concerning 
> the problems mentionned above ?
>
> Cheers,
>
> Stephane
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---
>
>
>
>

-- 

Nader S. Henein
Senior Applications Architect

Bayt.com

---


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 26 08:49:11 2005
Return-Path: <java-user-return-15157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7881 invoked from network); 26 Jun 2005 08:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2005 08:49:11 -0000
Received: (qmail 75134 invoked by uid 500); 26 Jun 2005 08:49:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75104 invoked by uid 500); 26 Jun 2005 08:49:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75086 invoked by uid 99); 26 Jun 2005 08:49:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2005 01:49:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2005 01:49:07 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DmSiO-0005e7-JC
	for java-user@lucene.apache.org; Sun, 26 Jun 2005 10:42:08 +0200
Received: from ip-176.net-82-216-240.rev.numericable.fr ([82.216.240.176])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sun, 26 Jun 2005 10:42:08 +0200
Received: from sbailliez by ip-176.net-82-216-240.rev.numericable.fr with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sun, 26 Jun 2005 10:42:08 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Stephane Bailliez <sbailliez@apache.org>
Subject:  Re: Index Replication / Clustering
Date:  Sun, 26 Jun 2005 10:48:27 +0200
Lines: 29
Message-ID: <d9lpo3$2pc$1@sea.gmane.org>
References:  <d9k0o1$p61$1@sea.gmane.org> <42BE6484.6000907@bayt.net>
Mime-Version:  1.0
Content-Type:  text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: ip-176.net-82-216-240.rev.numericable.fr
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
In-Reply-To: <42BE6484.6000907@bayt.net>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Nader Henein wrote:
> Our setup is quite similar to yours, but in all honesty, you will need 
> to do some for of batching on your updates simply because, you don't 
> want to keep the Index Writter open all the time.

For now, the index writer is closed after each added document. It does 
not seem to have such a major overhead compared to keep it open, at most 
overhead is 2x in my tests, which is acceptable for now and in par with 
other commercial search engines they have been using. My constraint is 
basically that the mergeFactor must be 1, but I think honestly that it 
will need to be relaxed when the document rate will increase.

There were no tuning yet.

I have also a quite specific document lifecycle. Incoming documents are 
5-10KB xml where I'm only extracting 0.5-1KB data to be indexed. These 
documents NEVER change. They are not updated, nor deleted.

They are only deleted for archiving purposes because we keep only the 
last 6-months of data.

> As for clustering, we went through three iterations, that keep x indexes 
> parallelized on x servers all of this with fail over and index 
> independent synchronization with your persistent store. There was a 
> little discussion about this a few weeks back, and I mentioned that your 
> biggest pain will be maintaining the integrity of parallel indexes that 
> are updated/deleted autonomously (atomic updates and deletes) but there 
> are ways of running iterative checks to make sure that your indecies 
> stay clean.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 26 11:54:10 2005
Return-Path: <java-user-return-15158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63948 invoked from network); 26 Jun 2005 11:54:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2005 11:54:10 -0000
Received: (qmail 5368 invoked by uid 500); 26 Jun 2005 11:54:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5127 invoked by uid 500); 26 Jun 2005 11:54:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5111 invoked by uid 99); 26 Jun 2005 11:54:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2005 04:54:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2005 04:54:03 -0700
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id AA0641A2009E; Sun, 26 Jun 2005 08:05:26 -0400
Message-ID: <42BE9755.1090001@bayt.net>
Date: Sun, 26 Jun 2005 15:53:57 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Index Replication / Clustering
References: <d9k0o1$p61$1@sea.gmane.org> <42BE6484.6000907@bayt.net> <d9lpo3$2pc$1@sea.gmane.org>
In-Reply-To: <d9lpo3$2pc$1@sea.gmane.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Declude-Sender: nsh@bayt.net [192.168.1.24]
X-Declude-Spoolname: D9A0541A2009EC518.SMD
X-Declude-Note: Scanned by Declude 2.0.6.16 (http://www.declude.com/x-note.htm) for spam.
X-Declude-Scan: Score [0] at 08:05:27 on 26 Jun 2005
X-Declude-Tests: Whitelisted
X-Country-Chain: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

As far as indexing is concerned, a simple way of tracking a clustered 
system, is to create autonomous indecies that report to a central 
repository, creating a table in the DB with a row per document ( you 
have a unique document ID,  right? ) and then a column per server node 
(the columns act as an indexing flag P:pending I for indexed and F for 
failed) a row is added whenever a new document is added to the 
persistent store or tagged for indexing (trigger style) each node reads 
the persistent store using it's own scheduler and then proceeds to 
collect the XML file for indexing, modifying the server flag afterwards. 
Alternatively, and this one is much easier but you will have issues with 
atomicity, you can just rsync the xml files to a directory on each 
clustered server and then the servers can pick up the files and index 
them. quite simply one is a pull architecture and the other is a push 
architecture.

Does that help?

Nader Henein

Stephane Bailliez wrote:

> Nader Henein wrote:
>
>> Our setup is quite similar to yours, but in all honesty, you will 
>> need to do some for of batching on your updates simply because, you 
>> don't want to keep the Index Writter open all the time.
>
>
> For now, the index writer is closed after each added document. It does 
> not seem to have such a major overhead compared to keep it open, at 
> most overhead is 2x in my tests, which is acceptable for now and in 
> par with other commercial search engines they have been using. My 
> constraint is basically that the mergeFactor must be 1, but I think 
> honestly that it will need to be relaxed when the document rate will 
> increase.
>
> There were no tuning yet.
>
> I have also a quite specific document lifecycle. Incoming documents 
> are 5-10KB xml where I'm only extracting 0.5-1KB data to be indexed. 
> These documents NEVER change. They are not updated, nor deleted.
>
> They are only deleted for archiving purposes because we keep only the 
> last 6-months of data.
>
>> As for clustering, we went through three iterations, that keep x 
>> indexes parallelized on x servers all of this with fail over and 
>> index independent synchronization with your persistent store. There 
>> was a little discussion about this a few weeks back, and I mentioned 
>> that your biggest pain will be maintaining the integrity of parallel 
>> indexes that are updated/deleted autonomously (atomic updates and 
>> deletes) but there are ways of running iterative checks to make sure 
>> that your indecies stay clean.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---
>
>
>
>

-- 

Nader S. Henein
Senior Applications Architect

Bayt.com

---


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 26 19:59:44 2005
Return-Path: <java-user-return-15159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18104 invoked from network); 26 Jun 2005 19:59:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2005 19:59:44 -0000
Received: (qmail 81390 invoked by uid 500); 26 Jun 2005 19:59:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81359 invoked by uid 500); 26 Jun 2005 19:59:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81346 invoked by uid 99); 26 Jun 2005 19:59:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2005 12:59:39 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.206 as permitted sender)
Received: from [64.233.170.206] (HELO rproxy.gmail.com) (64.233.170.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2005 12:59:38 -0700
Received: by rproxy.gmail.com with SMTP id 1so181365rny
        for <java-user@lucene.apache.org>; Sun, 26 Jun 2005 12:59:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=mWiaKalVk0lz/K+B/f2AokyPkkXfWWeGmVTATIpABf2mcO76bT8Vif1F4hogRzavdq+Qmv3Wzq3q+3StmeDYXi0dS4J3wi3DHHCADjXHWFnXjy14/rzUatQ6Bq/MQ3mAmriijlLnAMdvj5ryUg/nzjnMVfGaDEOyYHfns5TFBmc=
Received: by 10.38.95.10 with SMTP id s10mr127817rnb;
        Sun, 26 Jun 2005 12:59:35 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Sun, 26 Jun 2005 12:59:35 -0700 (PDT)
Message-ID: <7ca123910506261259d9a5cdd@mail.gmail.com>
Date: Sun, 26 Jun 2005 12:59:35 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: when is the commit.lock released?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am looking at and trying to understand more about Lucene's
reader/writer synchronization. Does anyone know when the commit.lock
is release? I could not find it anywhere in the source code.

I did see the write.lock is released in IndexWriter.close().

Thanks,

Jian

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 26 22:21:45 2005
Return-Path: <java-user-return-15160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67173 invoked from network); 26 Jun 2005 22:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2005 22:21:45 -0000
Received: (qmail 73941 invoked by uid 500); 26 Jun 2005 22:21:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73804 invoked by uid 500); 26 Jun 2005 22:21:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73791 invoked by uid 99); 26 Jun 2005 22:21:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2005 15:21:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2005 15:21:37 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id 784AD159F80
	for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 08:21:32 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id 66C7A64007
	for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 08:21:32 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 20704-02-7 for <java-user@lucene.apache.org>;
 Mon, 27 Jun 2005 08:21:30 +1000 (EST)
Received: from [192.168.0.242] (unknown [192.168.0.242])
	by herald.aconex.com (Postfix) with ESMTP id B628064002
	for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 08:21:30 +1000 (EST)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <d9k0o1$p61$1@sea.gmane.org>
References: <d9k0o1$p61$1@sea.gmane.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BFA09644-571C-4142-A26D-E92414012EE4@aconex.com>
Content-Transfer-Encoding: 7bit
From: Paul Smith <psmith@aconex.com>
Subject: Re: Index Replication / Clustering
Date: Mon, 27 Jun 2005 08:21:28 +1000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Why not try using JMS messaging to send messages to the indexing  
server that Document X needs to be updated via a JMS queue?  This  
gives you the flexibility to have the indexing system down but not  
lose the message that it needs to be indexed, and also allows the  
indexing server to be 'busy' without affecting the application that  
is performing the updates from slowing down too.

If you use ActiveMQ for JMS, you can take advantage of it's Composite  
Destination feature and have a virtual Queue/Topic that is actually  
several Queues/Topics.  This is what we use to keep a mirror index  
server completely in sync.  The application sends an update message  
to a queue named "queue://index1, queue://index2", which becomes 2  
separate queues for the 2 servers, allowing them to process the same  
message whenever they can get around to it.

We then place Apache in front of these 2 mirrored Index/Search nodes  
so the application can use web-services to query the search node  
without actually being aware that there is 2 of them behind the  
scenes, leaving Apache to do the load-balancing and fail-over as the  
index/search nodes come up/down without the main application knowing  
anything about it.

Paul Smith

On 26/06/2005, at 2:35 AM, Stephane Bailliez wrote:

>
> I have been browsing the archives concerning this particular topic.
>
> I'm in the same boat and the customer has clustering requirements.
>
> To give some background:
> I have a constant flow of incoming messages flying over the network  
> that need to be archived in db, indexed and dispatched to thousand  
> of clients (rich client console).
>
> the backend architecture needs to be clustered meaning that:
> - the message broker needs to be clustered
> - the database needs to be replicated and support failover
> - the search engine index needs to be replicated
>
> This is for a 24x7 operation.
>
> My main problem is that there is a constant flow of write just  
> about everywhere meaning that the lucene index keeps changing, and  
> that I have a very small window available to replicate the data  
> across the network.
> (As of now, I have 2 messages / minute and should go over 50 in the  
> medium-term).
>
> Concerning the index, being able to replicate is cool, but if one  
> node goes down, it must be able to resynchronize when you bring it  
> up on the cluster...that's a hell of problem.
>
> As it is acceptable to have downtime on the search engine, I was  
> thinking it was much easier to:
>
> 1) rely on a shared index via NFS for each node.
> 2) dedicate a box to the search engine and access it via rpc from  
> each node
>
> Considering the messages I have seen in the archives, 1) seems to  
> be a no-go.
>
> Option 2) is generally not recommended but think it could fit my  
> needs quite well. IMHO it should work quite well to bring the box  
> in operation if it goes down. Synchronizing the index for me is  
> just a matter of going through the database to reindex the archived  
> content, this will take sometime but as I said, running in degraded  
> mode is acceptable.
>
> As anyone any suggestion/recommendation/experience/thoughts  
> concerning the problems mentionned above ?
>
> Cheers,
>
> Stephane
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 26 22:23:45 2005
Return-Path: <java-user-return-15161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67802 invoked from network); 26 Jun 2005 22:23:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jun 2005 22:23:44 -0000
Received: (qmail 75814 invoked by uid 500); 26 Jun 2005 22:23:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75678 invoked by uid 500); 26 Jun 2005 22:23:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75652 invoked by uid 99); 26 Jun 2005 22:23:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jun 2005 15:23:38 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=HTML_20_30,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.218.93.46] (HELO web41213.mail.yahoo.com) (66.218.93.46)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 26 Jun 2005 15:23:38 -0700
Received: (qmail 22702 invoked by uid 60001); 26 Jun 2005 22:23:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=NleFmUd9ewtSyLpkJTEma3n+kMZJ7H8hd9fcL+OcZZGP0Gn4GSVfq1eMU6Ll6Zq9P9m50FaO4GieNopKFIFvPK++/UGDt7Lh0ShEgqnRylRzRwMN7IZnsPIUs70HDeOFP1/gwwo6jGPn0cso27MWFLqVloDLRmlgPnh+WC85Phw=  ;
Message-ID: <20050626222335.22699.qmail@web41213.mail.yahoo.com>
Received: from [24.6.74.58] by web41213.mail.yahoo.com via HTTP; Sun, 26 Jun 2005 15:23:35 PDT
Date: Sun, 26 Jun 2005 15:23:35 -0700 (PDT)
From: Lokesh Bajaj <lokesh_bajaj@yahoo.com>
Subject: Re: issues building a large index
To: java-user@lucene.apache.org
In-Reply-To: <200506251139.25088@danielnaber.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-488234945-1119824615=:50231"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-488234945-1119824615=:50231
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thanks for the idea. I have tried with both 512m and 1024m with the same results. I also turned on verbose gc logging. Once I see this slowdown, the gc is running only once every 12 minutes or so and finishes in less than 0.005 seconds.
 
Its basically stuck at 100% cpu usage, but doesn't seem to be doing anything useful.
Lokesh
 


Daniel Naber <lucenelist@danielnaber.de> wrote:
On Saturday 25 June 2005 02:10, Lokesh Bajaj wrote:

> 3] Does this seem like a JVM issue? Since its always pointing to a
> native method, I am not really sure what to look for or debug.

Does you JVM have enough heap (e.g. -Xmx500M)? Java gets slow if it's busy 
with garbage collection.

Regards
Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


--0-488234945-1119824615=:50231--

From java-user-return-15162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 08:58:39 2005
Return-Path: <java-user-return-15162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22000 invoked from network); 27 Jun 2005 08:58:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 08:58:39 -0000
Received: (qmail 30794 invoked by uid 500); 27 Jun 2005 08:58:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30772 invoked by uid 500); 27 Jun 2005 08:58:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30744 invoked by uid 99); 27 Jun 2005 08:58:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 01:58:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 01:58:29 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DmpJz-00036k-TD
	for java-user@lucene.apache.org; Mon, 27 Jun 2005 10:50:27 +0200
Received: from linagora.net8.nerim.net ([213.41.176.138])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 10:50:27 +0200
Received: from sbailliez by linagora.net8.nerim.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 10:50:27 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Stephane Bailliez <sbailliez@apache.org>
Subject:  Re: Index Replication / Clustering
Date:  Mon, 27 Jun 2005 10:56:50 +0200
Lines: 39
Message-ID: <d9oejj$h8l$1@sea.gmane.org>
References:  <d9k0o1$p61$1@sea.gmane.org> <BFA09644-571C-4142-A26D-E92414012EE4@aconex.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: linagora.net8.nerim.net
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
In-Reply-To: <BFA09644-571C-4142-A26D-E92414012EE4@aconex.com>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Paul,

Thanks for the reply. Many interesting points.

Paul Smith wrote:
> Why not try using JMS messaging to send messages to the indexing  server 
> that Document X needs to be updated via a JMS queue?  This  gives you 
> the flexibility to have the indexing system down but not  lose the 
> message that it needs to be indexed, and also allows the  indexing 
> server to be 'busy' without affecting the application that  is 
> performing the updates from slowing down too.

Excellent idea.

> If you use ActiveMQ for JMS, you can take advantage of it's Composite  
> Destination feature and have a virtual Queue/Topic that is actually  
> several Queues/Topics.  This is what we use to keep a mirror index  
> server completely in sync.  The application sends an update message  to 
> a queue named "queue://index1, queue://index2", which becomes 2  
> separate queues for the 2 servers, allowing them to process the same  
> message whenever they can get around to it.

Ah, the composite topic, is indeed a good nice. But out of 
curiosity...did you put your 2 nodes (consumers) as embedded brokers or 
is the producer as the main broker ?

> We then place Apache in front of these 2 mirrored Index/Search nodes  so 
> the application can use web-services to query the search node  without 
> actually being aware that there is 2 of them behind the  scenes, leaving 
> Apache to do the load-balancing and fail-over as the  index/search nodes 
> come up/down without the main application knowing  anything about it.

Ideally, the 2 nodes have the same state when running.

What happens when a node fails and that you put it back online and that 
it needs to catch up with all missing messages in its queue ?
Is it considered 'offline' until it catches up ? If yes how do you do it 
? If no, I guess you don't mind that a search request may not give the 
same result depending on the node it is load-balanced, correct ?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 09:15:08 2005
Return-Path: <java-user-return-15163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29151 invoked from network); 27 Jun 2005 09:15:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 09:15:08 -0000
Received: (qmail 50087 invoked by uid 500); 27 Jun 2005 09:15:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49990 invoked by uid 500); 27 Jun 2005 09:14:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49972 invoked by uid 99); 27 Jun 2005 09:14:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 02:14:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 02:14:57 -0700
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id A63D206A00BA; Mon, 27 Jun 2005 05:26:21 -0400
Message-ID: <42BFC38B.1020108@bayt.net>
Date: Mon, 27 Jun 2005 13:14:51 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Index Replication / Clustering
References: <d9k0o1$p61$1@sea.gmane.org> <BFA09644-571C-4142-A26D-E92414012EE4@aconex.com> <d9oejj$h8l$1@sea.gmane.org>
In-Reply-To: <d9oejj$h8l$1@sea.gmane.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Declude-Sender: nsh@bayt.net [192.168.1.24]
X-Declude-Spoolname: DC63C206A00BAF3FB.SMD
X-Declude-Note: Scanned by Declude 2.0.6.16 (http://www.declude.com/x-note.htm) for spam.
X-Declude-Scan: Score [0] at 05:26:21 on 27 Jun 2005
X-Declude-Tests: Whitelisted
X-Country-Chain: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I implemented a JMS based solution about a year ago because I thought it 
would solve my atomicity problem and give me a centralized way of 
indexing, you'll have to use the pluggable persistence (if you use 
ActiveMQ) to be able to recover from a failure and you'll also need some 
way of maintaining which records have and haven't been indexed in a 
persistent store so you can run sanitization later on, assuming that 
every time you add a document to one of you clustered indecies 
everything goes well is a sure way of guaranteeing that you end up with 
n indecies with no two alike especially if you have a high volume 
indecies with high rates of change.

Nader Henein

Stephane Bailliez wrote:

> Hi Paul,
>
> Thanks for the reply. Many interesting points.
>
> Paul Smith wrote:
>
>> Why not try using JMS messaging to send messages to the indexing  
>> server that Document X needs to be updated via a JMS queue?  This  
>> gives you the flexibility to have the indexing system down but not  
>> lose the message that it needs to be indexed, and also allows the  
>> indexing server to be 'busy' without affecting the application that  
>> is performing the updates from slowing down too.
>
>
> Excellent idea.
>
>> If you use ActiveMQ for JMS, you can take advantage of it's 
>> Composite  Destination feature and have a virtual Queue/Topic that is 
>> actually  several Queues/Topics.  This is what we use to keep a 
>> mirror index  server completely in sync.  The application sends an 
>> update message  to a queue named "queue://index1, queue://index2", 
>> which becomes 2  separate queues for the 2 servers, allowing them to 
>> process the same  message whenever they can get around to it.
>
>
> Ah, the composite topic, is indeed a good nice. But out of 
> curiosity...did you put your 2 nodes (consumers) as embedded brokers 
> or is the producer as the main broker ?
>
>> We then place Apache in front of these 2 mirrored Index/Search nodes  
>> so the application can use web-services to query the search node  
>> without actually being aware that there is 2 of them behind the  
>> scenes, leaving Apache to do the load-balancing and fail-over as the  
>> index/search nodes come up/down without the main application knowing  
>> anything about it.
>
>
> Ideally, the 2 nodes have the same state when running.
>
> What happens when a node fails and that you put it back online and 
> that it needs to catch up with all missing messages in its queue ?
> Is it considered 'offline' until it catches up ? If yes how do you do 
> it ? If no, I guess you don't mind that a search request may not give 
> the same result depending on the node it is load-balanced, correct ?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---
>
>
>
>

-- 

Nader S. Henein
Senior Applications Architect

Bayt.com

---


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 11:19:21 2005
Return-Path: <java-user-return-15164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97622 invoked from network); 27 Jun 2005 11:19:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 11:19:21 -0000
Received: (qmail 70898 invoked by uid 500); 27 Jun 2005 11:19:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70880 invoked by uid 500); 27 Jun 2005 11:19:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70867 invoked by uid 99); 27 Jun 2005 11:19:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 04:19:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 04:19:11 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id 68B6D159F9B
	for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 21:19:02 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id 283DE64008
	for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 21:19:02 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 07574-02-5 for <java-user@lucene.apache.org>;
 Mon, 27 Jun 2005 21:19:00 +1000 (EST)
Received: from [192.168.1.101] (CPE-203-45-47-133.vic.bigpond.net.au [203.45.47.133])
	by herald.aconex.com (Postfix) with ESMTP id A517C64007
	for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 21:19:00 +1000 (EST)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <d9oejj$h8l$1@sea.gmane.org>
References: <d9k0o1$p61$1@sea.gmane.org> <BFA09644-571C-4142-A26D-E92414012EE4@aconex.com> <d9oejj$h8l$1@sea.gmane.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9BD479CB-1094-46EE-926A-5D936950EF9D@aconex.com>
Content-Transfer-Encoding: 7bit
From: Paul Smith <psmith@aconex.com>
Subject: Re: Index Replication / Clustering
Date: Mon, 27 Jun 2005 21:18:59 +1000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>
>
>> If you use ActiveMQ for JMS, you can take advantage of it's  
>> Composite  Destination feature and have a virtual Queue/Topic that  
>> is actually  several Queues/Topics.  This is what we use to keep a  
>> mirror index  server completely in sync.  The application sends an  
>> update message  to a queue named "queue://index1, queue://index2",  
>> which becomes 2  separate queues for the 2 servers, allowing them  
>> to process the same  message whenever they can get around to it.
>>
>
> Ah, the composite topic, is indeed a good nice. But out of  
> curiosity...did you put your 2 nodes (consumers) as embedded  
> brokers or is the producer as the main broker ?

Neither in our case, a central broker (albeit we plan to have a  
backup plan with ActiveMQ installed on all servers with the same  
config ready to roll, using zeroconf for discovery).

>
>
>> We then place Apache in front of these 2 mirrored Index/Search  
>> nodes  so the application can use web-services to query the search  
>> node  without actually being aware that there is 2 of them behind  
>> the  scenes, leaving Apache to do the load-balancing and fail-over  
>> as the  index/search nodes come up/down without the main  
>> application knowing  anything about it.
>>
>
> Ideally, the 2 nodes have the same state when running.

Ideally, reality is different.  We're going to be monitoring  
consistency of the pair closely, and should the fall out of sync with  
regularity, then one of them is just going to be the hot-spare for  
failure purposes only.
>
> What happens when a node fails and that you put it back online and  
> that it needs to catch up with all missing messages in its queue ?
> Is it considered 'offline' until it catches up ? If yes how do you  
> do it ? If no, I guess you don't mind that a search request may not  
> give the same result depending on the node it is load-balanced,  
> correct ?
>

In this case we will manually mark the node via Apache worker configs  
to be be disabled until it has caught up.

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 11:22:29 2005
Return-Path: <java-user-return-15165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1079 invoked from network); 27 Jun 2005 11:22:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 11:22:29 -0000
Received: (qmail 75869 invoked by uid 500); 27 Jun 2005 11:22:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75850 invoked by uid 500); 27 Jun 2005 11:22:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75837 invoked by uid 99); 27 Jun 2005 11:22:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 04:22:22 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_30_40,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 04:22:21 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id 7FEDB159FF8
	for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 21:22:18 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id 5946364007
	for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 21:22:18 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 07920-03-2 for <java-user@lucene.apache.org>;
 Mon, 27 Jun 2005 21:22:17 +1000 (EST)
Received: from [192.168.1.101] (CPE-203-45-47-133.vic.bigpond.net.au [203.45.47.133])
	by herald.aconex.com (Postfix) with ESMTP id 23F4A64002
	for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 21:22:17 +1000 (EST)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42BFC38B.1020108@bayt.net>
References: <d9k0o1$p61$1@sea.gmane.org> <BFA09644-571C-4142-A26D-E92414012EE4@aconex.com> <d9oejj$h8l$1@sea.gmane.org> <42BFC38B.1020108@bayt.net>
Content-Type: multipart/alternative; boundary=Apple-Mail-2--169784264
Message-Id: <6058B6CD-8943-4D6F-B23D-40B679806FB7@aconex.com>
From: Paul Smith <psmith@aconex.com>
Subject: Re: Index Replication / Clustering
Date: Mon, 27 Jun 2005 21:22:16 +1000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-2--169784264
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed


On 27/06/2005, at 7:14 PM, Nader Henein wrote:

> I implemented a JMS based solution about a year ago because I  
> thought it would solve my atomicity problem and give me a  
> centralized way of indexing, you'll have to use the pluggable  
> persistence (if you use ActiveMQ) to be able to recover from a  
> failure and you'll also need some way of maintaining which records  
> have and haven't been indexed in a persistent store so you can run  
> sanitization later on, assuming that every time you add a document  
> to one of you clustered indecies everything goes well is a sure way  
> of guaranteeing that you end up with n indecies with no two alike  
> especially if you have a high volume indecies with high rates of  
> change.

The rate of updates is actually quite low in our environment, so we  
are lucky, however we will be monitoring consistency closely.  Each  
node exposes statistics about the last item indexed etc so we can  
tell when things are out of sync.  Should a node consistently be out  
of sync we'll just remove it as a worker from Apache for searching  
purposes (still leaving it ready to be used as a hot spare).

We are fortunate that the volume of updates is relatively small (as  
fast as a human can upload things), so we are in a fortunate position  
in our case. Our guarantees are in the order of minutes rather than  
seconds.

Paul
--Apple-Mail-2--169784264--

From java-user-return-15166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 11:40:53 2005
Return-Path: <java-user-return-15166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9653 invoked from network); 27 Jun 2005 11:40:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 11:40:52 -0000
Received: (qmail 98776 invoked by uid 500); 27 Jun 2005 11:40:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98502 invoked by uid 500); 27 Jun 2005 11:40:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98399 invoked by uid 99); 27 Jun 2005 11:40:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 04:40:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 04:40:14 -0700
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id A8495ABD008C; Mon, 27 Jun 2005 07:51:37 -0400
Message-ID: <42BFE597.7020609@bayt.net>
Date: Mon, 27 Jun 2005 15:40:07 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Index Replication / Clustering
References: <d9k0o1$p61$1@sea.gmane.org> <BFA09644-571C-4142-A26D-E92414012EE4@aconex.com> <d9oejj$h8l$1@sea.gmane.org> <9BD479CB-1094-46EE-926A-5D936950EF9D@aconex.com>
In-Reply-To: <9BD479CB-1094-46EE-926A-5D936950EF9D@aconex.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Declude-Sender: nsh@bayt.net [192.168.1.24]
X-Declude-Spoolname: DE8485ABD008CFC6E.SMD
X-Declude-Note: Scanned by Declude 2.0.6.16 (http://www.declude.com/x-note.htm) for spam.
X-Declude-Scan: Score [0] at 07:51:38 on 27 Jun 2005
X-Declude-Tests: Whitelisted
X-Country-Chain: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Considerations that you may want to think about when sanitizing your 
clustered indecies:

1) Number of documents available vs. number of documents in the 
persistent store.
2) Are all the document up to date (involves comparing the existence and 
the last date updated of Lucene documents to persistent store)
3) Have all the documents that should have been deleted actually been 
deleted from the index, if you delete the documents from the persistent 
store this is not trivial, we're using an "is_deleted" flag so we can 
query the index for deleted documents, if we get any results, then 
there's a problem.

Sync issues will happen, welcome to the wonderful work of NDC, not by 
any fault of programming, but simply because this is the nature of 
network communication, and computing in demanding environments. Failing 
to provide for contingency and fail safes will give you some of the most 
intense headaches, ultimately, you want the system to fix itself (assume 
failures for day one) I've been monitoring the system from a distance 
for the past year with little or no interference (4 years in total), 
there is nothing better than knowing that I could take a tire iron to a 
few of our machines and that would not affect the site performance, I 
get to sleep at night.

My two cents.

Nader Henein



Paul Smith wrote:

>>
>>
>>> If you use ActiveMQ for JMS, you can take advantage of it's  
>>> Composite  Destination feature and have a virtual Queue/Topic that  
>>> is actually  several Queues/Topics.  This is what we use to keep a  
>>> mirror index  server completely in sync.  The application sends an  
>>> update message  to a queue named "queue://index1, queue://index2",  
>>> which becomes 2  separate queues for the 2 servers, allowing them  
>>> to process the same  message whenever they can get around to it.
>>>
>>
>> Ah, the composite topic, is indeed a good nice. But out of  
>> curiosity...did you put your 2 nodes (consumers) as embedded  brokers 
>> or is the producer as the main broker ?
>
>
> Neither in our case, a central broker (albeit we plan to have a  
> backup plan with ActiveMQ installed on all servers with the same  
> config ready to roll, using zeroconf for discovery).
>
>>
>>
>>> We then place Apache in front of these 2 mirrored Index/Search  
>>> nodes  so the application can use web-services to query the search  
>>> node  without actually being aware that there is 2 of them behind  
>>> the  scenes, leaving Apache to do the load-balancing and fail-over  
>>> as the  index/search nodes come up/down without the main  
>>> application knowing  anything about it.
>>>
>>
>> Ideally, the 2 nodes have the same state when running.
>
>
> Ideally, reality is different.  We're going to be monitoring  
> consistency of the pair closely, and should the fall out of sync with  
> regularity, then one of them is just going to be the hot-spare for  
> failure purposes only.
>
>>
>> What happens when a node fails and that you put it back online and  
>> that it needs to catch up with all missing messages in its queue ?
>> Is it considered 'offline' until it catches up ? If yes how do you  
>> do it ? If no, I guess you don't mind that a search request may not  
>> give the same result depending on the node it is load-balanced,  
>> correct ?
>>
>
> In this case we will manually mark the node via Apache worker configs  
> to be be disabled until it has caught up.
>
> Paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---
>
>
>
>

-- 

Nader S. Henein
Senior Applications Architect

Bayt.com

---


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 17:08:32 2005
Return-Path: <java-user-return-15167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74720 invoked from network); 27 Jun 2005 17:08:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 17:08:32 -0000
Received: (qmail 44652 invoked by uid 500); 27 Jun 2005 17:08:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44617 invoked by uid 500); 27 Jun 2005 17:08:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44604 invoked by uid 99); 27 Jun 2005 17:08:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 10:08:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.75] (HELO web31113.mail.mud.yahoo.com) (68.142.201.75)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 27 Jun 2005 10:08:22 -0700
Received: (qmail 16660 invoked by uid 60001); 27 Jun 2005 17:08:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=leZnDxWEaS8/H1DXTr5dy5iT4WVx5LufnAF7eZZD8HpEQwEvh4h8OnN9hoLtdeJ8VzwEPR80fXITgyo2Vz5HrYUnvUiDy21Cwyx8V3SDFbyEs5NhZGzjscEDFA4YkuJzOjFXwDLEJjAeK8puhZoBKVMNkaN2sHikxbi6DNWbGn4=  ;
Message-ID: <20050627170818.16658.qmail@web31113.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31113.mail.mud.yahoo.com via HTTP; Mon, 27 Jun 2005 10:08:18 PDT
Date: Mon, 27 Jun 2005 10:08:18 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: issues building a large index
To: java-user@lucene.apache.org
In-Reply-To: <20050626222335.22699.qmail@web41213.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Perhaps using hprof with cpu=samples may reveal more information about
what CPU is doing.  I think this is a valid use case.

Otis


--- Lokesh Bajaj <lokesh_bajaj@yahoo.com> wrote:

> Thanks for the idea. I have tried with both 512m and 1024m with the
> same results. I also turned on verbose gc logging. Once I see this
> slowdown, the gc is running only once every 12 minutes or so and
> finishes in less than 0.005 seconds.
>  
> Its basically stuck at 100% cpu usage, but doesn't seem to be doing
> anything useful.
> Lokesh
>  
> 
> 
> Daniel Naber <lucenelist@danielnaber.de> wrote:
> On Saturday 25 June 2005 02:10, Lokesh Bajaj wrote:
> 
> > 3] Does this seem like a JVM issue? Since its always pointing to a
> > native method, I am not really sure what to look for or debug.
> 
> Does you JVM have enough heap (e.g. -Xmx500M)? Java gets slow if it's
> busy 
> with garbage collection.
> 
> Regards
> Daniel



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 17:33:26 2005
Return-Path: <java-user-return-15168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82256 invoked from network); 27 Jun 2005 17:33:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 17:33:26 -0000
Received: (qmail 77859 invoked by uid 500); 27 Jun 2005 17:33:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77810 invoked by uid 500); 27 Jun 2005 17:33:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77796 invoked by uid 99); 27 Jun 2005 17:33:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 10:33:17 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of david.bohl@sourcemedia.com designates 207.241.10.61 as permitted sender)
Received: from [207.241.10.61] (HELO mta.thomsonmedia.com) (207.241.10.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 10:33:16 -0700
Received: from tmskoex01.tm.thomsonmedia.com (ip-33.bankinfo.com [207.241.10.33])
	by mta.thomsonmedia.com (Switch-3.1.7/Switch-3.1.7) with ESMTP id j5RHXDUg022049
	for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 12:33:13 -0500 (CDT)
Received: by tmskoex01.tm.thomsonmedia.com with Internet Mail Service (5.5.2657.72)
	id <NXZA5PAQ>; Mon, 27 Jun 2005 12:33:12 -0500
Message-ID: <4F8DDDFDAC9A864AAED5BB875129DF4B04D40BC4@tmskoex01.tm.thomsonmedia.com>
From: "Bohl, David" <david.bohl@SourceMedia.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Alternate Lucene Query Highlighter
Date: Mon, 27 Jun 2005 12:33:12 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C57B3E.3B2C6562"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C57B3E.3B2C6562
Content-Type: text/plain;
	charset="iso-8859-1"

I uploaded the class.  See bug#35518.

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Friday, June 24, 2005 3:59 PM
To: java-user@lucene.apache.org
Subject: Re: Alternate Lucene Query Highlighter


David - please create a new issue in Lucene's Bugzilla system (see  
the Lucene website for a link) and then add your code to the newly  
created issue.

This sounds like a very valuable contribution!

     Erik


On Jun 24, 2005, at 4:46 PM, Bohl, David wrote:

> I created a lucene query highlighter (borrowing some code from the  
> one in
> the sandbox) that my company is using.  It better handles phrase  
> queries,
> doesn't break HTML entities, and has the ability to either  
> highlight terms
> in an entire document or to highlight fragments from the document.   
> I would
> like to make this available to anyone who wants it.  Where can I  
> submit
> this?
>
> "This communication is intended solely for the addressee and is
> confidential and not for third party unauthorized distribution."
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

"This communication is intended solely for the addressee and is
confidential and not for third party unauthorized distribution."


------_=_NextPart_001_01C57B3E.3B2C6562--

From java-user-return-15169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 18:49:28 2005
Return-Path: <java-user-return-15169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37111 invoked from network); 27 Jun 2005 18:49:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 18:49:28 -0000
Received: (qmail 89573 invoked by uid 500); 27 Jun 2005 18:49:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89542 invoked by uid 500); 27 Jun 2005 18:49:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89525 invoked by uid 99); 27 Jun 2005 18:49:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 11:49:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yourabi@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 11:49:20 -0700
Received: by wproxy.gmail.com with SMTP id i14so422728wra
        for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 11:49:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=CVsUNETor5M5JKH7snnFDceVjioO9yvfO0L2MjJCW4PKQ2Nt//svyxxZW0bIxBEyk1K9ci0G2k+amun0jYbqDl7W3Sqx4OON150WKq1lUtDTY7+qP1LpqCt7113EZ042EnB3DiHQj1riTIdefm/ODIf/aedUyZ5OSNTelSRmCOA=
Received: by 10.54.29.41 with SMTP id c41mr3490959wrc;
        Mon, 27 Jun 2005 11:49:15 -0700 (PDT)
Received: by 10.54.14.63 with HTTP; Mon, 27 Jun 2005 11:49:14 -0700 (PDT)
Message-ID: <b13f3f0605062711497b68837f@mail.gmail.com>
Date: Mon, 27 Jun 2005 11:49:14 -0700
From: Yousef Ourabi <yourabi@gmail.com>
Reply-To: Yousef Ourabi <yourabi@gmail.com>
To: java-user@lucene.apache.org
Subject: Indexing Forums (Document & Field Paradigm)
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello:
Thanks for all the help so far it has been fantastic. I have a
question on the document and field paradigm, this works great for
flat-files, like a word document, or web-page but what about nested
forums (ala slashdot) where in theory a specifc chat thread is nested
or is nested inside another chat thread.  Is there a way to nest
lucene documents. IE Top level post in forum is one document, and any
branches off the main thred are nested inside that top level one? OR
is there a better mapping of lucene's paradigms to a slashdot like
forums paradigm?

Thanks for any help.

Best,
Yousef

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 19:38:36 2005
Return-Path: <java-user-return-15170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67668 invoked from network); 27 Jun 2005 19:38:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 19:38:36 -0000
Received: (qmail 68102 invoked by uid 500); 27 Jun 2005 19:38:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68041 invoked by uid 500); 27 Jun 2005 19:38:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67991 invoked by uid 99); 27 Jun 2005 19:38:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 12:38:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [131.167.253.61] (HELO ws-bco-smtp1.IM.BATTELLE.ORG) (131.167.253.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 12:38:24 -0700
Received: from [131.167.170.26] by smtp.BATTELLE.ORG (PMDF V6.2-X26 #30874)
 with ESMTP id <C33Y08QLK4W47H048K@smtp.BATTELLE.ORG> for
 java-user@lucene.apache.org; Mon,
 27 Jun 2005 15:11:05 -0400 (Eastern Daylight Time)
Date: Mon, 27 Jun 2005 15:09:58 -0400
From: Dan Funk <funkd@BATTELLE.ORG>
Subject: Re: Indexing Forums (Document & Field Paradigm)
In-reply-to: <b13f3f0605062711497b68837f@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id: <42C04F06.2020003@battelle.org>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7bit
X-Accept-Language: en-us, en
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050317)
References: <b13f3f0605062711497b68837f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You could have a parentId field in each document - which will give you a 
nice hierarchy.  You could also create a topicId (Linux, Microsoft, 
etc...) and a storyId.  At that point you can quickly identify the topic 
and story for the message - and you can also search within a specific 
thread (AND parentId=X)  or a particular topic, or a particular story.


Yousef Ourabi wrote:

>Hello:
>Thanks for all the help so far it has been fantastic. I have a
>question on the document and field paradigm, this works great for
>flat-files, like a word document, or web-page but what about nested
>forums (ala slashdot) where in theory a specifc chat thread is nested
>or is nested inside another chat thread.  Is there a way to nest
>lucene documents. IE Top level post in forum is one document, and any
>branches off the main thred are nested inside that top level one? OR
>is there a better mapping of lucene's paradigms to a slashdot like
>forums paradigm?
>
>Thanks for any help.
>
>Best,
>Yousef
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 21:06:41 2005
Return-Path: <java-user-return-15171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97022 invoked from network); 27 Jun 2005 21:06:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 21:06:40 -0000
Received: (qmail 31433 invoked by uid 500); 27 Jun 2005 21:06:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31407 invoked by uid 500); 27 Jun 2005 21:06:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31394 invoked by uid 99); 27 Jun 2005 21:06:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 14:06:33 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_30_40,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Rossen.Angelov@sourcemedia.com designates 207.241.10.61 as permitted sender)
Received: from [207.241.10.61] (HELO mta.thomsonmedia.com) (207.241.10.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 14:06:32 -0700
Received: from tmskoex01.tm.thomsonmedia.com (ip-33.bankinfo.com [207.241.10.33])
	by mta.thomsonmedia.com (Switch-3.1.7/Switch-3.1.7) with ESMTP id j5RL6T34023266
	for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 16:06:30 -0500 (CDT)
Received: by tmskoex01.tm.thomsonmedia.com with Internet Mail Service (5.5.2657.72)
	id <NXZA5VQH>; Mon, 27 Jun 2005 16:06:29 -0500
Message-ID: <4F8DDDFDAC9A864AAED5BB875129DF4B0690CD5F@tmskoex01.tm.thomsonmedia.com>
From: "Angelov, Rossen" <Rossen.Angelov@SourceMedia.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: proximity search not working when extending the QueryParser
Date: Mon, 27 Jun 2005 16:06:28 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C57B5C.162CB104"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C57B5C.162CB104
Content-Type: text/plain;
	charset="iso-8859-1"

When I'm using the QueryParser directly, the proximity search works fine and
getPhraseSlop() returns the correct slop int.

The problem is when I extend QueryParser. When extending it, getPhraseSlop
always returns the default value - 0. It's like setPhraseSlop is never
called.

Does anybody know if I have to parse the query, get the slop number and
explicitly call setPhraseSlop to have the proximity working or there is a
completely different way of doing it when extending the QueryParser?

Thanks,
Ross

"This communication is intended solely for the addressee and is
confidential and not for third party unauthorized distribution."


------_=_NextPart_001_01C57B5C.162CB104--

From java-user-return-15172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 21:38:17 2005
Return-Path: <java-user-return-15172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5815 invoked from network); 27 Jun 2005 21:38:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 21:38:17 -0000
Received: (qmail 69658 invoked by uid 500); 27 Jun 2005 21:34:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68747 invoked by uid 500); 27 Jun 2005 21:34:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63049 invoked by uid 99); 27 Jun 2005 21:32:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 14:32:25 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=HTML_20_30,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.207.220] (HELO web32510.mail.mud.yahoo.com) (68.142.207.220)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 27 Jun 2005 14:32:20 -0700
Received: (qmail 78140 invoked by uid 60001); 27 Jun 2005 21:32:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=zmm47Lfv6qI75btHP4hpE/gv4GzvP8ifISlIej/ap9MqZ8fBRJeeBOdzV/kCJOMiH1l7LF59F1faePHOGAbe0599ivZtzFJYbJYvj//aHchCbsQnnVEr03YjCxanMODBOs2BMiypLmuW+FwwELq7nTofgp6Qaj1VEOjll5cyEVo=  ;
Message-ID: <20050627213217.78138.qmail@web32510.mail.mud.yahoo.com>
Received: from [216.191.200.187] by web32510.mail.mud.yahoo.com via HTTP; Mon, 27 Jun 2005 14:32:17 PDT
Date: Mon, 27 Jun 2005 14:32:17 -0700 (PDT)
From: kambiz Afkhamian <kambizaf@yahoo.com>
Subject: How to filter search based on file path
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-545866440-1119907937=:78113"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-545866440-1119907937=:78113
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi 
 
I've indexed my website from the application root. When I run a query, it beasically searches all content below the application root folder.
 
I would like to create feature that would allow users to search specific folder/paths of this website. (i.e I would like to limit my query search to specific folders)
 
Could you please give me some tips as to do this?
 
Thanks
K
 

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-545866440-1119907937=:78113--

From java-user-return-15173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 22:58:40 2005
Return-Path: <java-user-return-15173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22826 invoked from network); 27 Jun 2005 22:58:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 22:58:40 -0000
Received: (qmail 11514 invoked by uid 500); 27 Jun 2005 22:58:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11489 invoked by uid 500); 27 Jun 2005 22:58:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11475 invoked by uid 99); 27 Jun 2005 22:58:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 15:58:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yourabi@gmail.com designates 64.233.184.205 as permitted sender)
Received: from [64.233.184.205] (HELO wproxy.gmail.com) (64.233.184.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 15:58:32 -0700
Received: by wproxy.gmail.com with SMTP id i14so461807wra
        for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 15:58:30 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=csQC1h89vF/NZdIFAgHS6rxh00VmFryiu3dj5XYML5uChYwrNIQlbi5cnXTrPh3A8e8HOUnAKNUjN+JbQ/ogdGEUs83eNbvvYgbpCpNmOa0sQlDisEfvbtU4LadJL4g2L0c3IdguETEcNSIZk9uV6w6qdlDPfGy7b9AdZAB6tUw=
Received: by 10.54.53.39 with SMTP id b39mr3606304wra;
        Mon, 27 Jun 2005 15:58:30 -0700 (PDT)
Received: by 10.54.14.63 with HTTP; Mon, 27 Jun 2005 15:58:30 -0700 (PDT)
Message-ID: <b13f3f06050627155822756e28@mail.gmail.com>
Date: Mon, 27 Jun 2005 15:58:30 -0700
From: Yousef Ourabi <yourabi@gmail.com>
Reply-To: Yousef Ourabi <yourabi@gmail.com>
To: java-user@lucene.apache.org
Subject: Lock File exceptions
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello:
I get this lock-file exception on both Windows and Linux, my app is
running inside tomcat 5.5.9, jvm 1.5.03...has anyone seen this before?

If I delete the LOCK file it works, but obviously I shouldn't do
that...Just wondering what's up?

IOException caught here: Lock obtain timed out:
Lock@/usr/local/java/jakarta-tomcat-5.5.9/temp/lucene-4f978fb745a946b4dbce8=
7bf411caa25-write.lock

Thanks in advance for any help.

-Yousef

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 23:08:21 2005
Return-Path: <java-user-return-15174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27684 invoked from network); 27 Jun 2005 23:08:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 23:08:20 -0000
Received: (qmail 23220 invoked by uid 500); 27 Jun 2005 23:08:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23194 invoked by uid 500); 27 Jun 2005 23:08:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23177 invoked by uid 99); 27 Jun 2005 23:08:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 16:08:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yourabi@gmail.com designates 64.233.184.194 as permitted sender)
Received: from [64.233.184.194] (HELO wproxy.gmail.com) (64.233.184.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 16:08:14 -0700
Received: by wproxy.gmail.com with SMTP id i5so474009wra
        for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 16:08:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=jRR4IlWc6wx4Imcd9lL+QWFFXcCu1OUn66o6N+pkxdd4DAU+O+DUvF6l90KsAdSMnUxPyfyqGLLwP7lKqW9SV0DmwiXt+J/oFTwKOAUHCI5SliWmAvqzOIPyE4Nkrwsz6Cro8quQiyXB2VB04ljeizxUPKu0ATIuJw5dqcfyGyY=
Received: by 10.54.11.64 with SMTP id 64mr1306084wrk;
        Mon, 27 Jun 2005 16:08:11 -0700 (PDT)
Received: by 10.54.14.63 with HTTP; Mon, 27 Jun 2005 16:08:11 -0700 (PDT)
Message-ID: <b13f3f0605062716086b8735fb@mail.gmail.com>
Date: Mon, 27 Jun 2005 16:08:11 -0700
From: Yousef Ourabi <yourabi@gmail.com>
Reply-To: Yousef Ourabi <yourabi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lock File exceptions
In-Reply-To: <b13f3f06050627155822756e28@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <b13f3f06050627155822756e28@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mini-Follow UP:
Wouldn't the parameter boolean create false create the segments if it
is not found? My understanding is that the create variable either
creates or doesn't the actual directory on startup...does this affect
key files as well?

IOException caught here: /var/jeteye/index/segments (No such file or direct=
ory)




On 6/27/05, Yousef Ourabi <yourabi@gmail.com> wrote:
> Hello:
> I get this lock-file exception on both Windows and Linux, my app is
> running inside tomcat 5.5.9, jvm 1.5.03...has anyone seen this before?
>=20
> If I delete the LOCK file it works, but obviously I shouldn't do
> that...Just wondering what's up?
>=20
> IOException caught here: Lock obtain timed out:
> Lock@/usr/local/java/jakarta-tomcat-5.5.9/temp/lucene-4f978fb745a946b4dbc=
e87bf411caa25-write.lock
>=20
> Thanks in advance for any help.
>=20
> -Yousef
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 23:30:14 2005
Return-Path: <java-user-return-15175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36375 invoked from network); 27 Jun 2005 23:30:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 23:30:14 -0000
Received: (qmail 44577 invoked by uid 500); 27 Jun 2005 23:30:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44547 invoked by uid 500); 27 Jun 2005 23:30:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44527 invoked by uid 99); 27 Jun 2005 23:30:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 16:30:06 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.194 as permitted sender)
Received: from [64.233.170.194] (HELO rproxy.gmail.com) (64.233.170.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 16:30:05 -0700
Received: by rproxy.gmail.com with SMTP id 1so229878rny
        for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 16:30:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=p2JXXcfp3VL5dXV2DGc8cA7w8DTGLvr78sOJiuna3oNxQtcXs9IswY9eywzWuV3bJ+fOtyUzYXNB2Sqr2+k2NjUZTKBFAI1MT6CtLA/7YYqr421+phyVuR1XkjJBlSHAL+mHsLjqdZpNvzaYoaw1PNuOwSF12jDjqOQlS1XhQNA=
Received: by 10.38.195.36 with SMTP id s36mr154093rnf;
        Mon, 27 Jun 2005 16:30:02 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Mon, 27 Jun 2005 16:30:02 -0700 (PDT)
Message-ID: <7ca1239105062716305eed37ef@mail.gmail.com>
Date: Mon, 27 Jun 2005 16:30:02 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org, Yousef Ourabi <yourabi@gmail.com>
Subject: Re: Lock File exceptions
In-Reply-To: <b13f3f06050627155822756e28@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <b13f3f06050627155822756e28@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Recently I looked at the locking mechanism of Lucene. If I am correct,
I think the process for grabbing the lock file will time out by
default in 10 seconds. When the process timed out, it will print out
the IOException.

The lucene locking mechanism is not within threads in the same JVM. It
uses lock files so that other processes (even perl program) could also
be synchronized in terms of accessing the index.

The implementation of the current Lucene locking mechanism uses
"polling" mechanism, i.e, constantly check if the lock file could be
obtained. It would be better that a wait/notify mechanism could be
used rather than polling.

If you don't care about other JVM or process access, maybe you can use
the Java 1.5 reader/writer lock mechanism for synchronizing between
multiple readers and one writers?

Cheers,

Jian

On 6/27/05, Yousef Ourabi <yourabi@gmail.com> wrote:
> Hello:
> I get this lock-file exception on both Windows and Linux, my app is
> running inside tomcat 5.5.9, jvm 1.5.03...has anyone seen this before?
>=20
> If I delete the LOCK file it works, but obviously I shouldn't do
> that...Just wondering what's up?
>=20
> IOException caught here: Lock obtain timed out:
> Lock@/usr/local/java/jakarta-tomcat-5.5.9/temp/lucene-4f978fb745a946b4dbc=
e87bf411caa25-write.lock
>=20
> Thanks in advance for any help.
>=20
> -Yousef
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 23:40:52 2005
Return-Path: <java-user-return-15176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39144 invoked from network); 27 Jun 2005 23:40:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 23:40:52 -0000
Received: (qmail 51803 invoked by uid 500); 27 Jun 2005 23:40:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51681 invoked by uid 500); 27 Jun 2005 23:40:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51667 invoked by uid 99); 27 Jun 2005 23:40:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 16:40:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 16:40:45 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E282613E2006; Mon, 27 Jun 2005 19:40:36 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 8C6B913E2005
	for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 19:40:19 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <4F8DDDFDAC9A864AAED5BB875129DF4B0690CD5F@tmskoex01.tm.thomsonmedia.com>
References: <4F8DDDFDAC9A864AAED5BB875129DF4B0690CD5F@tmskoex01.tm.thomsonmedia.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CE13AB9A-E0FF-4CC0-9047-F33C94B6C387@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: proximity search not working when extending the QueryParser
Date: Mon, 27 Jun 2005 19:40:23 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ross - could you please show us a bit of your code so we can see  
explicitly what you're doing and how it's not working as expected?   
set/getPhraseSlop are quite straightforward, so unless you're mixing  
up the static versus instance parse methods with QueryParser then I  
don't know what could be wrong at this point.

     Erik

On Jun 27, 2005, at 5:06 PM, Angelov, Rossen wrote:

> When I'm using the QueryParser directly, the proximity search works  
> fine and
> getPhraseSlop() returns the correct slop int.
>
> The problem is when I extend QueryParser. When extending it,  
> getPhraseSlop
> always returns the default value - 0. It's like setPhraseSlop is never
> called.
>
> Does anybody know if I have to parse the query, get the slop number  
> and
> explicitly call setPhraseSlop to have the proximity working or  
> there is a
> completely different way of doing it when extending the QueryParser?
>
> Thanks,
> Ross
>
> "This communication is intended solely for the addressee and is
> confidential and not for third party unauthorized distribution."
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 23:49:52 2005
Return-Path: <java-user-return-15177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40121 invoked from network); 27 Jun 2005 23:49:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 23:49:52 -0000
Received: (qmail 64645 invoked by uid 500); 27 Jun 2005 23:49:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64620 invoked by uid 500); 27 Jun 2005 23:49:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64605 invoked by uid 99); 27 Jun 2005 23:49:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 16:49:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.68.218.166] (HELO home.simpleobjects.com) (216.68.218.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 16:49:44 -0700
Received: from graphite (graphite.intranet [192.168.2.2])
	by home.simpleobjects.com (Postfix) with ESMTP id 04F8C33C42
	for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 19:49:40 -0400 (EDT)
From: "Tony Schwartz" <tony@simpleobjects.com>
To: <java-user@lucene.apache.org>
Subject: RE: How to filter search based on file path
Date: Mon, 27 Jun 2005 19:49:40 -0400
Message-ID: <00b201c57b72$e2e7afd0$0202a8c0@graphite>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
In-Reply-To: <20050627213217.78138.qmail@web32510.mail.mud.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have two ideas:
1.  wildcard query on the path field, but this only works if you have a
small number of elements in any path hierarchy.
2.  store each path component as a separate "term"
	a.  for instance:  /people/tony/property yields the following terms:
path:/people and path:/people/tony and text:property
	b.  now when someone wants to search for property in /people/tony,
you use the terms:  text:property and path:/people/tony



Tony Schwartz
tony@simpleobjects.com
"We're going to need a lot more cowbell."

-----Original Message-----
From: kambiz Afkhamian [mailto:kambizaf@yahoo.com] 
Sent: Monday, June 27, 2005 5:32 PM
To: java-user@lucene.apache.org
Subject: How to filter search based on file path

Hi 
 
I've indexed my website from the application root. When I run a query, it
beasically searches all content below the application root folder.
 
I would like to create feature that would allow users to search specific
folder/paths of this website. (i.e I would like to limit my query search to
specific folders)
 
Could you please give me some tips as to do this?
 
Thanks
K
 

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 23:55:08 2005
Return-Path: <java-user-return-15178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42347 invoked from network); 27 Jun 2005 23:55:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 23:55:08 -0000
Received: (qmail 69293 invoked by uid 500); 27 Jun 2005 23:55:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69267 invoked by uid 500); 27 Jun 2005 23:55:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69253 invoked by uid 99); 27 Jun 2005 23:55:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 16:55:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 16:55:02 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E3F9313E2007; Mon, 27 Jun 2005 19:54:55 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id A663613E2005
	for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 19:54:39 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42C04F06.2020003@battelle.org>
References: <b13f3f0605062711497b68837f@mail.gmail.com> <42C04F06.2020003@battelle.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FF823D8D-84AE-4576-B63F-2B4832D7BED1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Indexing Forums (Document & Field Paradigm)
Date: Mon, 27 Jun 2005 19:54:43 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Simply storing a parentId doesn't help query the hierarchy though -  
for example, search for all "lucene" containing documents in a  
specific forum thread, children and all.

One technique I've used to index hierarchy is to come up with a path  
string such as "/parent/child/grandchild" and index that as a non- 
tokenized field.  Querying for all documents under "/parent" is as  
simple as a PrefixQuery.

     Erik


On Jun 27, 2005, at 3:09 PM, Dan Funk wrote:

> You could have a parentId field in each document - which will give  
> you a nice hierarchy.  You could also create a topicId (Linux,  
> Microsoft, etc...) and a storyId.  At that point you can quickly  
> identify the topic and story for the message - and you can also  
> search within a specific thread (AND parentId=X)  or a particular  
> topic, or a particular story.
>
>
> Yousef Ourabi wrote:
>
>
>> Hello:
>> Thanks for all the help so far it has been fantastic. I have a
>> question on the document and field paradigm, this works great for
>> flat-files, like a word document, or web-page but what about nested
>> forums (ala slashdot) where in theory a specifc chat thread is nested
>> or is nested inside another chat thread.  Is there a way to nest
>> lucene documents. IE Top level post in forum is one document, and any
>> branches off the main thred are nested inside that top level one? OR
>> is there a better mapping of lucene's paradigms to a slashdot like
>> forums paradigm?
>>
>> Thanks for any help.
>>
>> Best,
>> Yousef
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 27 23:58:49 2005
Return-Path: <java-user-return-15179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42715 invoked from network); 27 Jun 2005 23:58:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jun 2005 23:58:49 -0000
Received: (qmail 72257 invoked by uid 500); 27 Jun 2005 23:58:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71385 invoked by uid 500); 27 Jun 2005 23:58:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71369 invoked by uid 99); 27 Jun 2005 23:58:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 16:58:44 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.194 as permitted sender)
Received: from [64.233.170.194] (HELO rproxy.gmail.com) (64.233.170.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 16:58:43 -0700
Received: by rproxy.gmail.com with SMTP id 1so230612rny
        for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 16:58:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=CQqzAh0zXV69oDjDV41WrJHxHr80hA9YZM/Hq+tg0DwryC0JkoMedhB/CosRx4aqZ8IJTcoqBLYjZMtgdt90Oj5d2jE2N/vexub1IPdedPCHnTjU17AzIDlioTmAgOFCjI9riJWQV3ZnjSA/yZoOewCNvqnKoXBA49GYRtkzhgY=
Received: by 10.38.195.36 with SMTP id s36mr154516rnf;
        Mon, 27 Jun 2005 16:58:41 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Mon, 27 Jun 2005 16:58:40 -0700 (PDT)
Message-ID: <7ca12391050627165860b71dd6@mail.gmail.com>
Date: Mon, 27 Jun 2005 16:58:40 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: when is the commit.lock released?
In-Reply-To: <7ca123910506261259d9a5cdd@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <7ca123910506261259d9a5cdd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,=20

I haven't heard anything back. Probably this email got lost on the way
or whatsoever.

Anyway, could anyone enlighten me on this?

Thanks,

Jian

---------- Forwarded message ----------
From: jian chen <chenjian1227@gmail.com>
Date: Jun 26, 2005 12:59 PM
Subject: when is the commit.lock released?
To: java-user@lucene.apache.org


Hi,

I am looking at and trying to understand more about Lucene's
reader/writer synchronization. Does anyone know when the commit.lock
is release? I could not find it anywhere in the source code.

I did see the write.lock is released in IndexWriter.close().

Thanks,

Jian

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 28 01:17:13 2005
Return-Path: <java-user-return-15180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73139 invoked from network); 28 Jun 2005 01:17:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2005 01:17:13 -0000
Received: (qmail 54722 invoked by uid 500); 28 Jun 2005 01:17:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54706 invoked by uid 500); 28 Jun 2005 01:17:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54693 invoked by uid 99); 28 Jun 2005 01:17:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 18:17:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yourabi@gmail.com designates 64.233.184.202 as permitted sender)
Received: from [64.233.184.202] (HELO wproxy.gmail.com) (64.233.184.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 18:17:04 -0700
Received: by wproxy.gmail.com with SMTP id 55so484540wri
        for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 18:17:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=ekZ84pCZbfyxw11lsBXO3YwvD2rTquPMmxQaYVlIjDHMIe+OKvCldsaZOXZpcB/ZAfYTuC9PiIM/jALsXJneiYxFiAPVP9IIWe1Dw9zEXt26KSQO9T5d0PqbMYqizjiGpntPetNpxzWzQ4pk25oy941WsPPCGF0NUa8DFn8DqK0=
Received: by 10.54.46.30 with SMTP id t30mr3663515wrt;
        Mon, 27 Jun 2005 18:17:02 -0700 (PDT)
Received: by 10.54.14.63 with HTTP; Mon, 27 Jun 2005 18:16:31 -0700 (PDT)
Message-ID: <b13f3f0605062718171386a2ea@mail.gmail.com>
Date: Mon, 27 Jun 2005 18:17:02 -0700
From: Yousef Ourabi <yourabi@gmail.com>
Reply-To: Yousef Ourabi <yourabi@gmail.com>
To: java-user@lucene.apache.org
Subject: Bad File Descriptor
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello:
I have yet another file-system related error, if I set the boolean
create to true on idex writer, I have no problems (other than never
getting more than one hit, because I create and close the idnexwriter
in one method to assure the class is the only instance)

However, if I set it to false, the number of hits matching the number
of items I have indexed perfectly, however I get this exception when I
search

2005-06-27 18:12:33,166 ERROR [jeteye] IOException caught
SearchByTerm:  Bad file descriptor


Has anyone else had this "Bad File descriptor problem?

Thanks,
Yousef

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 28 03:21:00 2005
Return-Path: <java-user-return-15181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12564 invoked from network); 28 Jun 2005 03:21:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2005 03:21:00 -0000
Received: (qmail 61381 invoked by uid 500); 28 Jun 2005 03:20:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61342 invoked by uid 500); 28 Jun 2005 03:20:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61329 invoked by uid 99); 28 Jun 2005 03:20:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 20:20:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO zproxy.gmail.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jun 2005 20:20:51 -0700
Received: by zproxy.gmail.com with SMTP id z6so280103nzd
        for <java-user@lucene.apache.org>; Mon, 27 Jun 2005 20:20:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=MnR5aER5s2hlwS4brfs9eRc24J5hK2HdOLP4kpM1nbizeoXfH8ndpvbtHn/1dkwfBnWa3qtVNIFK5i5qSIXY4YTdfOB2PH+BKXg+6DJMXlwem5CIcvoh8Cf6UEXtK3EPp9hxlbeKFs16+ZQduMiC7XEAZsbBJk5paokBFeDdpxo=
Received: by 10.36.41.11 with SMTP id o11mr3806532nzo;
        Mon, 27 Jun 2005 20:20:49 -0700 (PDT)
Received: from ?192.168.0.3? ([67.188.85.52])
        by mx.gmail.com with ESMTP id r15sm1813098nza.2005.06.27.20.20.46;
        Mon, 27 Jun 2005 20:20:49 -0700 (PDT)
Message-ID: <42C0C184.6080704@gmail.com>
Date: Mon, 27 Jun 2005 20:18:28 -0700
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Index Replication / Clustering
References: <d9k0o1$p61$1@sea.gmane.org>
In-Reply-To: <d9k0o1$p61$1@sea.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DBSight, a J2EE search engine on database, meets most of your requirements.
It has clustering support. Basically you can configure one DBSight 
server specially for indexing on database content. Another or several 
other DBSight servers devoted to search, and they subscribe to the 
indexing server. When indexing server has created a new index, all 
subscribers will get the same index.

It supports all databases with JDBC.Any contents on database, including 
BLOB/CLOB, can be full-text indexed.

And you can configure most of the components just be web UI.

Check it out:  http://www.dbsight.net
See the online active demo: http://search.dbsight.com

I personally run it on an bug database system of a big company, 60 
bugs/minutes.
And I scheduled the indexing every other 4 minutes. The index size is 
10G, and growing.
I guess it can meet your requirement.

Chris

Stephane Bailliez wrote:

>
> I have been browsing the archives concerning this particular topic.
>
> I'm in the same boat and the customer has clustering requirements.
>
> To give some background:
> I have a constant flow of incoming messages flying over the network 
> that need to be archived in db, indexed and dispatched to thousand of 
> clients (rich client console).
>
> the backend architecture needs to be clustered meaning that:
> - the message broker needs to be clustered
> - the database needs to be replicated and support failover
> - the search engine index needs to be replicated
>
> This is for a 24x7 operation.
>
> My main problem is that there is a constant flow of write just about 
> everywhere meaning that the lucene index keeps changing, and that I 
> have a very small window available to replicate the data across the 
> network.
> (As of now, I have 2 messages / minute and should go over 50 in the 
> medium-term).
>
> Concerning the index, being able to replicate is cool, but if one node 
> goes down, it must be able to resynchronize when you bring it up on 
> the cluster...that's a hell of problem.
>
> As it is acceptable to have downtime on the search engine, I was 
> thinking it was much easier to:
>
> 1) rely on a shared index via NFS for each node.
> 2) dedicate a box to the search engine and access it via rpc from each 
> node
>
> Considering the messages I have seen in the archives, 1) seems to be a 
> no-go.
>
> Option 2) is generally not recommended but think it could fit my needs 
> quite well. IMHO it should work quite well to bring the box in 
> operation if it goes down. Synchronizing the index for me is just a 
> matter of going through the database to reindex the archived content, 
> this will take sometime but as I said, running in degraded mode is 
> acceptable.
>
> As anyone any suggestion/recommendation/experience/thoughts concerning 
> the problems mentionned above ?
>
> Cheers,
>
> Stephane
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 28 14:55:35 2005
Return-Path: <java-user-return-15182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14415 invoked from network); 28 Jun 2005 14:55:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2005 14:55:34 -0000
Received: (qmail 27803 invoked by uid 500); 28 Jun 2005 14:55:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27699 invoked by uid 500); 28 Jun 2005 14:55:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27667 invoked by uid 99); 28 Jun 2005 14:55:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 07:55:16 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Rossen.Angelov@sourcemedia.com designates 207.241.10.61 as permitted sender)
Received: from [207.241.10.61] (HELO mta.thomsonmedia.com) (207.241.10.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 07:55:15 -0700
Received: from tmskoex01.tm.thomsonmedia.com (ip-33.bankinfo.com [207.241.10.33])
	by mta.thomsonmedia.com (Switch-3.1.7/Switch-3.1.7) with ESMTP id j5SEtBF4011404
	for <java-user@lucene.apache.org>; Tue, 28 Jun 2005 09:55:12 -0500 (CDT)
Received: by tmskoex01.tm.thomsonmedia.com with Internet Mail Service (5.5.2657.72)
	id <NXZA7F78>; Tue, 28 Jun 2005 09:55:06 -0500
Message-ID: <4F8DDDFDAC9A864AAED5BB875129DF4B0690CD60@tmskoex01.tm.thomsonmedia.com>
From: "Angelov, Rossen" <Rossen.Angelov@SourceMedia.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: proximity search not working when extending the QueryParser
Date: Tue, 28 Jun 2005 09:55:06 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C57BF1.5EE3C25C"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C57BF1.5EE3C25C
Content-Type: text/plain;
	charset="iso-8859-1"

Thanks for the response Erik.

I just realized that in my MultiFieldQueryParser that extends the
QueryParser I'm overwriting only getFieldQuery(String, String) and not
getFieldQuery(String, String, int). That will explain why getPhraseSlop
always returs 0.

May be I asked my question prematurely, so let me change the code, test it
and if there is still a problem I'll get back to the list for help.

Ross

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Monday, June 27, 2005 6:40 PM
To: java-user@lucene.apache.org
Subject: Re: proximity search not working when extending the QueryParser


Ross - could you please show us a bit of your code so we can see  
explicitly what you're doing and how it's not working as expected?   
set/getPhraseSlop are quite straightforward, so unless you're mixing  
up the static versus instance parse methods with QueryParser then I  
don't know what could be wrong at this point.

     Erik

On Jun 27, 2005, at 5:06 PM, Angelov, Rossen wrote:

> When I'm using the QueryParser directly, the proximity search works  
> fine and
> getPhraseSlop() returns the correct slop int.
>
> The problem is when I extend QueryParser. When extending it,  
> getPhraseSlop
> always returns the default value - 0. It's like setPhraseSlop is never
> called.
>
> Does anybody know if I have to parse the query, get the slop number  
> and
> explicitly call setPhraseSlop to have the proximity working or  
> there is a
> completely different way of doing it when extending the QueryParser?
>
> Thanks,
> Ross
>
> "This communication is intended solely for the addressee and is
> confidential and not for third party unauthorized distribution."
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

"This communication is intended solely for the addressee and is
confidential and not for third party unauthorized distribution."


------_=_NextPart_001_01C57BF1.5EE3C25C--

From java-user-return-15183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 28 15:02:43 2005
Return-Path: <java-user-return-15183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17683 invoked from network); 28 Jun 2005 15:02:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2005 15:02:43 -0000
Received: (qmail 42535 invoked by uid 500); 28 Jun 2005 15:02:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42511 invoked by uid 500); 28 Jun 2005 15:02:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42497 invoked by uid 99); 28 Jun 2005 15:02:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 08:02:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of brogar@gmail.com designates 64.233.184.207 as permitted sender)
Received: from [64.233.184.207] (HELO wproxy.gmail.com) (64.233.184.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 08:02:31 -0700
Received: by wproxy.gmail.com with SMTP id i5so603655wra
        for <java-user@lucene.apache.org>; Tue, 28 Jun 2005 08:02:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=snsjv+nHax2rnZYXJKcgWKcNKn8K/uMlWijp3HCcmv/g5XUEViG5bzaXPqvtGDTSQL93LI6hPhP7Uk5szkTEx9gSENopVmNFUDfZIt3T3PoCXL/2b4YTKqPB1rCSS3CIdd/nWQXp29/TsdPxlqVD26AbcXY+IP+lpqDiU8stZ5E=
Received: by 10.54.21.25 with SMTP id 25mr21938wru;
        Tue, 28 Jun 2005 08:02:27 -0700 (PDT)
Received: by 10.54.62.2 with HTTP; Tue, 28 Jun 2005 08:02:27 -0700 (PDT)
Message-ID: <34cc3b0a05062808022f76b2ce@mail.gmail.com>
Date: Tue, 28 Jun 2005 11:02:27 -0400
From: Chris D <brogar@gmail.com>
Reply-To: Chris D <brogar@gmail.com>
To: java-user@lucene.apache.org
Subject: Sorting on an occasionally empty field
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I'm indexing one lucene document in a couple of steps, For a short
period of time the sorted field (a date in this case) may be empty,
depending on the order the files are indexed. It's perfectly
acceptable (and likely ideal) for that document to not be returned.
There are other cases where I would like to sort on a field that isn't
always present.

This has been dicussed before in bug 34477
(http://issues.apache.org/bugzilla/show_bug.cgi?id=3D34477).
=20
I was wondering is this going to be implemented in 1.9/2.0?

I tried implementing the template patch to all of the places in
FieldCacheImpl to see how that works, and got snagged on getAuto().
(see starred lines)

  public Object getAuto (IndexReader reader, String field)
  throws IOException {
    field =3D field.intern();
    Object ret =3D lookup (reader, field, SortField.AUTO);
    if (ret =3D=3D null) {
      TermEnum enumerator =3D reader.terms (new Term (field, ""));
      try {
        Term term =3D enumerator.term();
        if (term =3D=3D null) {
          /*********I'm pretty sure this one doesn't matter*********/
          throw new RuntimeException ("no terms in field " + field + "
- cannot determine sort type");
        }
        if (term.field() =3D=3D field) {
          String termtext =3D term.text().trim();

          // Java 1.3 level code:
          try {
            Integer.parseInt (termtext);
            ret =3D getInts (reader, field);
          } catch (NumberFormatException nfe1) {
            try {
              Float.parseFloat (termtext);
              ret =3D getFloats (reader, field);
            } catch (NumberFormatException nfe2) {
              ret =3D getStringIndex (reader, field);
            }
          }
          if (ret !=3D null) {
            store (reader, field, SortField.AUTO, ret);
          }
        } else {
          throw new RuntimeException ("field \"" + field + "\" does
not appear to be indexed");
          /***************What should be returned here??******************/
        }
      } finally {
        enumerator.close();
      }

    }
    return ret;
  }


Any suggestions?

Thanks,
Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 28 17:10:08 2005
Return-Path: <java-user-return-15184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54352 invoked from network); 28 Jun 2005 17:10:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2005 17:10:08 -0000
Received: (qmail 14342 invoked by uid 500); 28 Jun 2005 17:06:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13741 invoked by uid 500); 28 Jun 2005 17:06:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12566 invoked by uid 99); 28 Jun 2005 17:06:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 10:06:19 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.117.150.145] (HELO mail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 10:06:18 -0700
Received: from webmail.controldocs.com (localhost [127.0.0.1])
	by mail.controldocs.com (8.12.11/8.12.11) with ESMTP id j5SH6Eo5025604
	for <java-user@lucene.apache.org>; Tue, 28 Jun 2005 12:06:14 -0500
Received: from 65.117.150.250
        (SquirrelMail authenticated user tareque);
        by webmail.controldocs.com with HTTP;
        Tue, 28 Jun 2005 12:06:14 -0500 (CDT)
Message-ID: <38032.65.117.150.250.1119978374.squirrel@65.117.150.250>
Date: Tue, 28 Jun 2005 12:06:14 -0500 (CDT)
Subject: wrong result returning
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3-RC1
X-Mailer: SquirrelMail/1.4.3-RC1
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I indexed a relatively large table and while doing search, it is returning
some wrong document names. Name of each of the docs that I have are some
integer number. but the result set is including some names those resemble
to the index files. For example one search returned, along with some valid
document names, '_h59.cfs', '_16v6.cfs' and '_1fft.cfs'. I have made sure
that the analyzers being used in indexing and searching is the same
(StopAnalyzer for this instance). More puzzling is that, it is not acting
so for all searches. Is there any setup issue?

Thanks
Tareque


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 28 17:18:53 2005
Return-Path: <java-user-return-15185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64534 invoked from network); 28 Jun 2005 17:18:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2005 17:18:53 -0000
Received: (qmail 47523 invoked by uid 500); 28 Jun 2005 17:18:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47432 invoked by uid 500); 28 Jun 2005 17:18:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47396 invoked by uid 99); 28 Jun 2005 17:18:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 10:18:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TAigner@wescodist.com designates 12.29.179.202 as permitted sender)
Received: from [12.29.179.202] (HELO mail01.wescodist.com) (12.29.179.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 10:18:40 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Indexing puncutation
Date: Tue, 28 Jun 2005 13:18:37 -0400
Message-ID: <14FBF41EF1411B45B2EC4ADEAC53D1310342B688@MAIL01.wescodist.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing puncutation
Thread-Index: AcV8BDzz7Aj9CCeORAqS/JdaXD73hQAAIZ/Q
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,

	I am VERY new to Lucene and we are trying out Lucene to see if
it will accomplish the vast majority of our search functions.

	I have a question about a good way to index some of our product
description codes.  We have description codes like 21-MA-GAB and other
punctuation.  Our users need to be able to search for "21 MA GAB" or=20
"21-MA_GAB" or "21MAGAB".  Is the best way to accomplish this by
creating synonyms for the 3 different ways when punctuation is in parts
to search for? I know I can stop punctuation in the index but what about
grouping the information together or with spaces?

Thanks all in advance,
Tom


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 28 18:23:24 2005
Return-Path: <java-user-return-15186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26719 invoked from network); 28 Jun 2005 18:23:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2005 18:23:23 -0000
Received: (qmail 45290 invoked by uid 500); 28 Jun 2005 18:23:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45065 invoked by uid 500); 28 Jun 2005 18:23:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45039 invoked by uid 99); 28 Jun 2005 18:23:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 11:23:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of brogar@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 11:23:14 -0700
Received: by wproxy.gmail.com with SMTP id i5so642588wra
        for <java-user@lucene.apache.org>; Tue, 28 Jun 2005 11:23:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=mlfSIdz9u7kaQ0XQ8Mwoi5b/6BPPJzBSwiQ/V8se62mcvX9IQbWMh2ZBkSpCQG9/05VW9C83I6Henuk0WTl+akHMEyqcXwk+xrF5dCaxK5pYCfHGCU5b5uZWtnG1gKIIjg9shChdRYJFtZgcd0gfB2S/EFhtA5YAJrFO28lpD4A=
Received: by 10.54.47.36 with SMTP id u36mr144444wru;
        Tue, 28 Jun 2005 11:23:11 -0700 (PDT)
Received: by 10.54.62.2 with HTTP; Tue, 28 Jun 2005 11:23:11 -0700 (PDT)
Message-ID: <34cc3b0a050628112314ff7140@mail.gmail.com>
Date: Tue, 28 Jun 2005 14:23:11 -0400
From: Chris D <brogar@gmail.com>
Reply-To: Chris D <brogar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: wrong result returning
In-Reply-To: <38032.65.117.150.250.1119978374.squirrel@65.117.150.250>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <38032.65.117.150.250.1119978374.squirrel@65.117.150.250>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/28/05, tareque@controldocs.com <tareque@controldocs.com> wrote:
> I indexed a relatively large table and while doing search, it is returnin=
g
> some wrong document names. Name of each of the docs that I have are some
> integer number. but the result set is including some names those resemble
> to the index files. For example one search returned, along with some vali=
d
> document names, '_h59.cfs', '_16v6.cfs' and '_1fft.cfs'. I have made sure
> that the analyzers being used in indexing and searching is the same
> (StopAnalyzer for this instance). More puzzling is that, it is not acting
> so for all searches. Is there any setup issue?
>=20
> Thanks
> Tareque

You'll probably have to provide a little more information, a little
bit of source will go a long way to being able to help.

But I can tell you that the _h59.cfs and such filenames are the index
files for lucene, so if you might want to make sure that you're not
doing am "index *" in the same directory you're storing the indexes.

Cheers,
Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 28 18:41:27 2005
Return-Path: <java-user-return-15187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49878 invoked from network); 28 Jun 2005 18:41:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2005 18:41:26 -0000
Received: (qmail 80672 invoked by uid 500); 28 Jun 2005 18:41:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80647 invoked by uid 500); 28 Jun 2005 18:41:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80634 invoked by uid 99); 28 Jun 2005 18:41:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 11:41:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of brogar@gmail.com designates 64.233.184.201 as permitted sender)
Received: from [64.233.184.201] (HELO wproxy.gmail.com) (64.233.184.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 11:41:17 -0700
Received: by wproxy.gmail.com with SMTP id i5so645775wra
        for <java-user@lucene.apache.org>; Tue, 28 Jun 2005 11:41:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kj/jVx+0OmHCZKnFYGYsWzDvNHFhNAA1290kJImXhkIsBaBm6AiETrFSi4pf4BRNIBsc9/Ba3xiH+jc7e5+aOB6MWUbBb2Cs2bkafTm2wxxqPxZAzvUQ2cUcz7PoI+JPWfP9rnjMyzyBzqLWMWR5WeUqSJRZMWX4xVUKQOtEodY=
Received: by 10.54.11.25 with SMTP id 25mr23162wrk;
        Tue, 28 Jun 2005 11:41:15 -0700 (PDT)
Received: by 10.54.62.2 with HTTP; Tue, 28 Jun 2005 11:41:14 -0700 (PDT)
Message-ID: <34cc3b0a05062811415ea18747@mail.gmail.com>
Date: Tue, 28 Jun 2005 14:41:14 -0400
From: Chris D <brogar@gmail.com>
Reply-To: Chris D <brogar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing puncutation
In-Reply-To: <14FBF41EF1411B45B2EC4ADEAC53D1310342B688@MAIL01.wescodist.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <14FBF41EF1411B45B2EC4ADEAC53D1310342B688@MAIL01.wescodist.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/28/05, Aigner, Thomas <TAigner@wescodist.com> wrote:
> Hello all,
>=20
>         I am VERY new to Lucene and we are trying out Lucene to see if
> it will accomplish the vast majority of our search functions.
>=20
>         I have a question about a good way to index some of our product
> description codes.  We have description codes like 21-MA-GAB and other
> punctuation.  Our users need to be able to search for "21 MA GAB" or
> "21-MA_GAB" or "21MAGAB".  Is the best way to accomplish this by
> creating synonyms for the 3 different ways when punctuation is in parts
> to search for? I know I can stop punctuation in the index but what about
> grouping the information together or with spaces?
>=20
> Thanks all in advance,
> Tom

There is a couple ways to do this, and I'm not sure which would be
best. (I'm also fairly new to lucene)

You can create a grammar that recognizes your product codes (see
StandardAnalyzer code for examples on how to do that) then use a
custom filter to normalize everything.

Forgive my poor lex but general idea

| <CODE: <NUM><NUM>  ("-"|"_"|""|" ") <ALPHA>+ ("-"|"_"|""|" ") <ALPHA>+ >

Then in the filter, normalize to strip out all of the punctuation.
This can be done with a regex or something faster but just for
reference.

   if (type =3D=3D CODE_TYPE) {
      return new org.apache.lucene.analysis.Token(text.replaceAll("-",
""), t.startOffset(), t.endOffset(), type);
   } ...=20

See StandardAnalyzer, it has a lot of code that would do what you need
and you can copy, paste and edit.

You could also do synonyms but that seems like it would be more overhead.

If you think of a better way, let me know, I have to do something similar.

Cheers,
Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 28 18:50:01 2005
Return-Path: <java-user-return-15188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58427 invoked from network); 28 Jun 2005 18:50:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2005 18:50:01 -0000
Received: (qmail 93123 invoked by uid 500); 28 Jun 2005 18:49:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93095 invoked by uid 500); 28 Jun 2005 18:49:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93082 invoked by uid 99); 28 Jun 2005 18:49:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 11:49:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.48] (HELO pop03.mail.atl.earthlink.net) (207.69.200.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 11:49:53 -0700
Received: from wamui-backed.atl.sa.earthlink.net ([209.86.224.25])
	by pop03.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1DnL9b-0001d0-00
	for java-user@lucene.apache.org; Tue, 28 Jun 2005 14:49:51 -0400
Message-ID: <33477747.1119984591552.JavaMail.root@wamui-backed.atl.sa.earthlink.net>
Date: Tue, 28 Jun 2005 13:49:51 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Phrase/Range Query Bug?
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,
  When I try to do a Range Query with Phrase as one of the end points I'm not getting the results I would expect.
Here is a JUnit that shows what I'm trying to do.  It fails on the last assertEquals

    public void testRangeBug(){
        try{
            RAMDirectory ramDir = new RAMDirectory();
            Analyzer stdAnalyzer = new StandardAnalyzer();
            QueryParser queryParser = new QueryParser("title", stdAnalyzer);

            org.apache.lucene.document.Document auburnDoc = new org.apache.lucene.document.Document();
            Field auburnTitle = new Field("title", "Auburn University",
                                          Field.Store.YES, Field.Index.TOKENIZED,
                                          Field.TermVector.WITH_POSITIONS_OFFSETS);

            org.apache.lucene.document.Document bamaDoc = new org.apache.lucene.document.Document();
            Field bamaTitle = new Field("title", "BAMA",
                                        Field.Store.YES, Field.Index.TOKENIZED,
                                        Field.TermVector.WITH_POSITIONS_OFFSETS);
            org.apache.lucene.document.Document uahDoc = new org.apache.lucene.document.Document();
            Field uahTitle = new Field("title", "UAH",
                                       Field.Store.YES, Field.Index.TOKENIZED,
                                       Field.TermVector.WITH_POSITIONS_OFFSETS);


            IndexWriter writer = new IndexWriter(ramDir, stdAnalyzer, true);
            auburnDoc.add(auburnTitle);
            bamaDoc.add(bamaTitle);
            uahDoc.add(uahTitle);

            writer.addDocument(auburnDoc);
            writer.addDocument(bamaDoc);
            writer.addDocument(uahDoc);
            writer.close();

            IndexSearcher searcher = new IndexSearcher(ramDir);

            Hits hits = searcher.search(queryParser.parse("\"Auburn University\""));
            assertEquals("Should get one hit back ", 1, hits.length());

            // Exclusive 
            hits = searcher.search(queryParser.parse("{\"Auburn University\" TO UAH}"));
            assertEquals("Should get one hit back ", 1, hits.length());
            
            // Inclusive 
            hits = searcher.search(queryParser.parse("[\"Auburn University\" TO UAH]"));
            assertEquals("Should get all three back ", 3, hits.length());  // <<<<< only returning 2

        } catch(Throwable e){
            e.printStackTrace();
        }

    }

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 28 18:56:07 2005
Return-Path: <java-user-return-15189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60148 invoked from network); 28 Jun 2005 18:56:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2005 18:56:07 -0000
Received: (qmail 7921 invoked by uid 500); 28 Jun 2005 18:55:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7888 invoked by uid 500); 28 Jun 2005 18:55:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7874 invoked by uid 99); 28 Jun 2005 18:55:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 11:55:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TAigner@wescodist.com designates 12.29.179.202 as permitted sender)
Received: from [12.29.179.202] (HELO mail01.wescodist.com) (12.29.179.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 11:55:57 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C57C13.0179D488"
Subject: RE: Indexing puncutation
Date: Tue, 28 Jun 2005 14:55:52 -0400
Message-ID: <14FBF41EF1411B45B2EC4ADEAC53D1310342B6FE@MAIL01.wescodist.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing puncutation
Thread-Index: AcV8EQdVPbfp4JXyTfCz8xidIXYBXgAAJ7HQ
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C57C13.0179D488
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Thanks for the info Chris.

=20

I'd thought I'd provide some more infomation.  One problem is the
descriptions are not easily formatted. In other words, the description
doesn't follow a certain set of rules (num num - alpha alpha etc).  They
are literally anything a supplier has put in for them. =20

=20

The example below (21-MA-GAB) is stored differently by these analyzers:

WhitespaceAnalyzer:     [21-MA-GAB]

SimpleAnalyzer:         [ma] [gab]

StopAnalyzer:           [ma] [gab]

StandardAnalyzer:       [21-ma] [gab]

SynonymAnalyzer:        [21-ma] [gab]

      (One I created for synonyms.. much like the standard one)

SnowballAnalyzer:       [21-ma] [gab]

=20

My problem is searching for 21magab returns nothing as well as 21ma*
etc..

     =20

This is just one of my punctuation problems.. there can be "" for inches
and 1/2 items etc..

=20

I am currently using my SynonymnAnalyzer for some aliases to build the
index and the SnowballAnalyzer to query the index (nice stemming in it)

=20

Tom

=20

-----Original Message-----
From: Chris D [mailto:brogar@gmail.com]=20
Sent: Tuesday, June 28, 2005 2:41 PM
To: java-user@lucene.apache.org
Subject: Re: Indexing puncutation

=20

On 6/28/05, Aigner, Thomas <TAigner@wescodist.com> wrote:

> Hello all,

>=20

>         I am VERY new to Lucene and we are trying out Lucene to see if

> it will accomplish the vast majority of our search functions.

>=20

>         I have a question about a good way to index some of our
product

> description codes.  We have description codes like 21-MA-GAB and other

> punctuation.  Our users need to be able to search for "21 MA GAB" or

> "21-MA_GAB" or "21MAGAB".  Is the best way to accomplish this by

> creating synonyms for the 3 different ways when punctuation is in
parts

> to search for? I know I can stop punctuation in the index but what
about

> grouping the information together or with spaces?

>=20

> Thanks all in advance,

> Tom

=20

There is a couple ways to do this, and I'm not sure which would be

best. (I'm also fairly new to lucene)

=20

You can create a grammar that recognizes your product codes (see

StandardAnalyzer code for examples on how to do that) then use a

custom filter to normalize everything.

=20

Forgive my poor lex but general idea

=20

| <CODE: <NUM><NUM>  ("-"|"_"|""|" ") <ALPHA>+ ("-"|"_"|""|" ") <ALPHA>+
>

=20

Then in the filter, normalize to strip out all of the punctuation.

This can be done with a regex or something faster but just for

reference.

=20

   if (type =3D=3D CODE_TYPE) {

      return new org.apache.lucene.analysis.Token(text.replaceAll("-",

""), t.startOffset(), t.endOffset(), type);

   } ...=20

=20

See StandardAnalyzer, it has a lot of code that would do what you need

and you can copy, paste and edit.

=20

You could also do synonyms but that seems like it would be more
overhead.

=20

If you think of a better way, let me know, I have to do something
similar.

=20

Cheers,

Chris

=20

---------------------------------------------------------------------

To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

For additional commands, e-mail: java-user-help@lucene.apache.org

=20


------_=_NextPart_001_01C57C13.0179D488--

From java-user-return-15190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 28 19:07:59 2005
Return-Path: <java-user-return-15190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65123 invoked from network); 28 Jun 2005 19:07:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2005 19:07:59 -0000
Received: (qmail 39245 invoked by uid 500); 28 Jun 2005 19:07:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39216 invoked by uid 500); 28 Jun 2005 19:07:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39202 invoked by uid 99); 28 Jun 2005 19:07:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 12:07:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 12:07:48 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 01ADE13E200A; Tue, 28 Jun 2005 15:07:40 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id ABFEE13E2006
	for <java-user@lucene.apache.org>; Tue, 28 Jun 2005 15:07:10 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <33477747.1119984591552.JavaMail.root@wamui-backed.atl.sa.earthlink.net>
References: <33477747.1119984591552.JavaMail.root@wamui-backed.atl.sa.earthlink.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D43B0985-7EBD-439A-9511-4CB08E1027C0@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Phrase/Range Query Bug?
Date: Tue, 28 Jun 2005 15:07:08 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

RangeQuery is for Term ranges, not phrase ranges.  With your data,  
you would be able to do a RangeQuery of [Auburn TO UAH], but "Auburn  
University" gets split into two terms by StandardAnalyzer.  If you  
set the fields to be untokenized (but still indexed) you'd be able to  
do a RangeQuery with "Auburn University" as the beginning term,  
though that might not work for your other searching needs.

     Erik



On Jun 28, 2005, at 2:49 PM, Andrew Boyd wrote:
> Hi All,
>   When I try to do a Range Query with Phrase as one of the end  
> points I'm not getting the results I would expect.
> Here is a JUnit that shows what I'm trying to do.  It fails on the  
> last assertEquals
>
>     public void testRangeBug(){
>         try{
>             RAMDirectory ramDir = new RAMDirectory();
>             Analyzer stdAnalyzer = new StandardAnalyzer();
>             QueryParser queryParser = new QueryParser("title",  
> stdAnalyzer);
>
>             org.apache.lucene.document.Document auburnDoc = new  
> org.apache.lucene.document.Document();
>             Field auburnTitle = new Field("title", "Auburn  
> University",
>                                           Field.Store.YES,  
> Field.Index.TOKENIZED,
>                                            
> Field.TermVector.WITH_POSITIONS_OFFSETS);
>
>             org.apache.lucene.document.Document bamaDoc = new  
> org.apache.lucene.document.Document();
>             Field bamaTitle = new Field("title", "BAMA",
>                                         Field.Store.YES,  
> Field.Index.TOKENIZED,
>                                          
> Field.TermVector.WITH_POSITIONS_OFFSETS);
>             org.apache.lucene.document.Document uahDoc = new  
> org.apache.lucene.document.Document();
>             Field uahTitle = new Field("title", "UAH",
>                                        Field.Store.YES,  
> Field.Index.TOKENIZED,
>                                         
> Field.TermVector.WITH_POSITIONS_OFFSETS);
>
>
>             IndexWriter writer = new IndexWriter(ramDir,  
> stdAnalyzer, true);
>             auburnDoc.add(auburnTitle);
>             bamaDoc.add(bamaTitle);
>             uahDoc.add(uahTitle);
>
>             writer.addDocument(auburnDoc);
>             writer.addDocument(bamaDoc);
>             writer.addDocument(uahDoc);
>             writer.close();
>
>             IndexSearcher searcher = new IndexSearcher(ramDir);
>
>             Hits hits = searcher.search(queryParser.parse("\"Auburn  
> University\""));
>             assertEquals("Should get one hit back ", 1, hits.length 
> ());
>
>             // Exclusive
>             hits = searcher.search(queryParser.parse("{\"Auburn  
> University\" TO UAH}"));
>             assertEquals("Should get one hit back ", 1, hits.length 
> ());
>
>             // Inclusive
>             hits = searcher.search(queryParser.parse("[\"Auburn  
> University\" TO UAH]"));
>             assertEquals("Should get all three back ", 3,  
> hits.length());  // <<<<< only returning 2
>
>         } catch(Throwable e){
>             e.printStackTrace();
>         }
>
>     }
>
> Andrew
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 28 19:37:34 2005
Return-Path: <java-user-return-15191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3840 invoked from network); 28 Jun 2005 19:37:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2005 19:37:33 -0000
Received: (qmail 96316 invoked by uid 500); 28 Jun 2005 19:37:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96286 invoked by uid 500); 28 Jun 2005 19:37:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96272 invoked by uid 99); 28 Jun 2005 19:37:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 12:37:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of brogar@gmail.com designates 64.233.184.199 as permitted sender)
Received: from [64.233.184.199] (HELO wproxy.gmail.com) (64.233.184.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 12:37:23 -0700
Received: by wproxy.gmail.com with SMTP id i5so655358wra
        for <java-user@lucene.apache.org>; Tue, 28 Jun 2005 12:37:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=my4Abi/SQY3oo5gi0MdUraOcC+56q7RbdKwktaFAm0scfFMuMFEkl7coSjF5zSfB/jOhF+SGXgVvE/nwldz5n8nUQZYsLwoO20v/EMlXgoZjtQ3BnhZ4O7dK0NJ0v7JN+6Czv9c0t1vRBh3k9V3r1AKEsy2jPvFdjAmfMl45k9c=
Received: by 10.54.29.62 with SMTP id c62mr50980wrc;
        Tue, 28 Jun 2005 12:37:20 -0700 (PDT)
Received: by 10.54.62.2 with HTTP; Tue, 28 Jun 2005 12:37:20 -0700 (PDT)
Message-ID: <34cc3b0a05062812372d08a050@mail.gmail.com>
Date: Tue, 28 Jun 2005 15:37:20 -0400
From: Chris D <brogar@gmail.com>
Reply-To: Chris D <brogar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing puncutation
In-Reply-To: <14FBF41EF1411B45B2EC4ADEAC53D1310342B6FE@MAIL01.wescodist.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <14FBF41EF1411B45B2EC4ADEAC53D1310342B6FE@MAIL01.wescodist.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/28/05, Aigner, Thomas <TAigner@wescodist.com> wrote:
> Thanks for the info Chris.
>=20
>=20
>=20
> I'd thought I'd provide some more infomation.  One problem is the
> descriptions are not easily formatted. In other words, the description
> doesn't follow a certain set of rules (num num - alpha alpha etc).  They
> are literally anything a supplier has put in for them.
>=20
>=20
>=20
> The example below (21-MA-GAB) is stored differently by these analyzers:
>=20
> WhitespaceAnalyzer:     [21-MA-GAB]
>=20
> SimpleAnalyzer:         [ma] [gab]
>=20
> StopAnalyzer:           [ma] [gab]
>=20
> StandardAnalyzer:       [21-ma] [gab]
>=20
> SynonymAnalyzer:        [21-ma] [gab]
>=20
>       (One I created for synonyms.. much like the standard one)
>=20
> SnowballAnalyzer:       [21-ma] [gab]
>=20
>=20
>=20
> My problem is searching for 21magab returns nothing as well as 21ma*
> etc..
>=20
>=20
>=20
> This is just one of my punctuation problems.. there can be "" for inches
> and 1/2 items etc..
>=20
>=20
>=20
> I am currently using my SynonymnAnalyzer for some aliases to build the
> index and the SnowballAnalyzer to query the index (nice stemming in it)
>=20
>=20
>=20
> Tom

You can write an analyzer to do your tokenizing so that you end up with=20
21-MA-GAB being stored as [21magab] in the index. Assuming the codes
are formatted mostly the same. That's what I was suggesting, not use a
different analyzer. (If they're not the same then it becomes more
difficult)

The other problems you're describing with the descriptions could also
be solved with a proper analyzer. Add a "FRACTION" type to the lexical
grammar, and don't strip punctuation like the quote. Or synonym "1/2"
to "half" I guess (I haven't done much work with synonyms).

Lastly, and someone should correct me if I'm wrong, but you should
always use the same analyzer to create and to query the index.
Otherwise queries that should return hits wont. For instance the
following.

   The canoist paddles

Could be indexed as [boater] [strokes]... And the query

   contents:paddles

would be parsed to [paddle] and likely would not get the hit you expect.

Cheers,
Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 28 19:49:15 2005
Return-Path: <java-user-return-15192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9408 invoked from network); 28 Jun 2005 19:49:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2005 19:49:15 -0000
Received: (qmail 15102 invoked by uid 500); 28 Jun 2005 19:49:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14999 invoked by uid 500); 28 Jun 2005 19:49:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14866 invoked by uid 99); 28 Jun 2005 19:49:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 12:49:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 12:49:04 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 24E0B13E2006; Tue, 28 Jun 2005 15:48:56 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 60A7913E2005
	for <java-user@lucene.apache.org>; Tue, 28 Jun 2005 15:48:48 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <34cc3b0a05062812372d08a050@mail.gmail.com>
References: <14FBF41EF1411B45B2EC4ADEAC53D1310342B6FE@MAIL01.wescodist.com> <34cc3b0a05062812372d08a050@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <54170632-B3BC-4C5D-8C8F-13B8B0AE956B@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Indexing puncutation
Date: Tue, 28 Jun 2005 15:48:47 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 28, 2005, at 3:37 PM, Chris D wrote:
> Lastly, and someone should correct me if I'm wrong, but you should
> always use the same analyzer to create and to query the index.
> Otherwise queries that should return hits wont. For instance the
> following.
>
>    The canoist paddles
>
> Could be indexed as [boater] [strokes]... And the query
>
>    contents:paddles
>
> would be parsed to [paddle] and likely would not get the hit you  
> expect.

Whether you use the *same* analyzer or not is a great question.  In  
most cases, yes, you should.  But the more correct answer is that you  
need to use compatible analyzers.

For example:
If you're injecting synonyms during indexing, there is no need to  
inject them during query parsing.  In that case, the analyzers would  
do the same processing steps except the indexing one would also  
inject synonyms.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 28 21:55:08 2005
Return-Path: <java-user-return-15193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44993 invoked from network); 28 Jun 2005 21:55:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2005 21:55:08 -0000
Received: (qmail 99266 invoked by uid 500); 28 Jun 2005 21:55:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99005 invoked by uid 500); 28 Jun 2005 21:54:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98992 invoked by uid 99); 28 Jun 2005 21:54:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 14:54:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [134.96.188.26] (HELO mail.dfki.de) (134.96.188.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 14:54:58 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 2A7B5E47CD
	for <java-user@lucene.apache.org>; Tue, 28 Jun 2005 23:54:53 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 0B3EDE47C4
	for <java-user@lucene.apache.org>; Tue, 28 Jun 2005 23:54:53 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
Content-Transfer-Encoding: 7bit
Message-Id: <b7fef32f0f54092d8f78191b50c90d87@activemath.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: java-user@lucene.apache.org
From: Paul Libbrecht <paul@activemath.org>
Subject: no EnglishAnalyzer ?
Date: Tue, 28 Jun 2005 23:54:51 +0200
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I've been looking around at analyzers for use in Lucene.

Among the contributions, the Snowball projects' output seem quite 
nicely usable.

However, right in the box of lucene-1.4.3.jar, there's a 
GermanAnalyzer, using a stemmer, and a RussianAnalyzer. Several other 
languages can be found in the contribs directory.
Any reason I cannot find an "EnglishAnalyzer" and an EnglishStemmer ?
I don't think the other analyzers I could find (e.g. StandardAnalyzer) 
are based on stemmers.

thanks

paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 28 22:58:07 2005
Return-Path: <java-user-return-15194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63665 invoked from network); 28 Jun 2005 22:58:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jun 2005 22:58:07 -0000
Received: (qmail 45076 invoked by uid 500); 28 Jun 2005 22:58:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44205 invoked by uid 500); 28 Jun 2005 22:58:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44174 invoked by uid 99); 28 Jun 2005 22:58:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 15:58:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 15:58:00 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EA45213E2006; Tue, 28 Jun 2005 18:57:55 -0400 (EDT)
Received: from [192.168.4.104] (va-67-76-171-205.sta.sprint-hsd.net [67.76.171.205])
	by ehatchersolutions.com (Postfix) with ESMTP id 1244F13E2005
	for <java-user@lucene.apache.org>; Tue, 28 Jun 2005 18:57:53 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <b7fef32f0f54092d8f78191b50c90d87@activemath.org>
References: <b7fef32f0f54092d8f78191b50c90d87@activemath.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <290E8A49-FA2C-440F-9EC7-06F05D448C56@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: no EnglishAnalyzer ?
Date: Tue, 28 Jun 2005 18:57:52 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 28, 2005, at 5:54 PM, Paul Libbrecht wrote:

> Hi,
>
> I've been looking around at analyzers for use in Lucene.
>
> Among the contributions, the Snowball projects' output seem quite  
> nicely usable.
>
> However, right in the box of lucene-1.4.3.jar, there's a  
> GermanAnalyzer, using a stemmer, and a RussianAnalyzer. Several  
> other languages can be found in the contribs directory.
> Any reason I cannot find an "EnglishAnalyzer" and an EnglishStemmer ?
> I don't think the other analyzers I could find (e.g.  
> StandardAnalyzer) are based on stemmers.

Paul - if stemming is what you're looking for, then grab the  
SnowballAnalyzer code from Subversion under contrib/snowball.  Or you  
could get a binary copy of the JAR from the source code distribution  
of Lucene in Action at http://www.lucenebook.com (and see examples of  
its use in the sample code there).  Lucene's JAR does have a built-in  
PorterStemFilter, but none of the built-in analyzers use it, and the  
SnowballAnalyzer is more commonly used anyway.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 00:07:13 2005
Return-Path: <java-user-return-15195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80831 invoked from network); 29 Jun 2005 00:07:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 00:07:12 -0000
Received: (qmail 5964 invoked by uid 500); 29 Jun 2005 00:07:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5943 invoked by uid 500); 29 Jun 2005 00:07:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5930 invoked by uid 99); 29 Jun 2005 00:07:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 17:07:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of nikhil.goel@gmail.com designates 64.233.184.200 as permitted sender)
Received: from [64.233.184.200] (HELO wproxy.gmail.com) (64.233.184.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 17:07:04 -0700
Received: by wproxy.gmail.com with SMTP id 70so739300wra
        for <java-user@lucene.apache.org>; Tue, 28 Jun 2005 17:07:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=R5CVYndD34ZPT5Y5vXVu6JBhllNEf2H4BVDSK33fs4F7xEVDqa+bo/+iHbUbe1z14CcNkKGT/FKoiB9qOhG+6TD7RQAYnJGbPjETqsQjoeEXNaT/MQpDO5kYFAVqiX7bmFZ/xZV6/o+ako+pHv+jf97PKCUtha2HCexImwjJ+5o=
Received: by 10.54.40.39 with SMTP id n39mr7432wrn;
        Tue, 28 Jun 2005 17:07:01 -0700 (PDT)
Received: by 10.54.10.45 with HTTP; Tue, 28 Jun 2005 17:07:01 -0700 (PDT)
Message-ID: <7f0c29930506281707638dede@mail.gmail.com>
Date: Tue, 28 Jun 2005 19:07:01 -0500
From: Nikhil Goel <nikhil.goel@gmail.com>
Reply-To: Nikhil Goel <nikhil.goel@gmail.com>
To: java-user@lucene.apache.org
Subject: strange error : read past EOF
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,=20

We have been using Lucene_1.3 for a while and suddenly it has started
giving us an error. I saw some posts earlier regarding to this but no
one has responded to it. Can someone please give us some insight into
the problem. We have tried all possible ways to debug it but not able
to find the reason why this start happening now. We do restart the
servers and i guess Lucene doesnt have a transactional approach, hence
it might corrupt Lucene index.

Any suggestions will be highly appreciated. Here is the stack trace:-

java.io.IOException: read past EOF
        at org.apache.lucene.store.InputStream.refill(InputStream.java:192)
        at org.apache.lucene.store.InputStream.readByte(InputStream.java:81=
)
        at org.apache.lucene.store.InputStream.readInt(InputStream.java:111=
)
        at org.apache.lucene.index.SegmentTermEnum.<init>(SegmentTermEnum.j=
ava:79)
        at org.apache.lucene.index.TermInfosReader.<init>(TermInfosReader.j=
ava:79)
        at org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:=
141)
        at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.ja=
va:423)
        at org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWrit=
er.java:401)
        at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java=
:260)
        at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java=
:244)


Thanks.
Nikhil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 01:09:25 2005
Return-Path: <java-user-return-15196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94895 invoked from network); 29 Jun 2005 01:09:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 01:09:25 -0000
Received: (qmail 63207 invoked by uid 500); 29 Jun 2005 01:09:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63180 invoked by uid 500); 29 Jun 2005 01:09:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63167 invoked by uid 99); 29 Jun 2005 01:09:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 18:09:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [205.152.59.64] (HELO imf16aec.mail.bellsouth.net) (205.152.59.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 18:09:18 -0700
Received: from ibm58aec.bellsouth.net ([65.12.150.225])
          by imf16aec.mail.bellsouth.net with ESMTP
          id <20050629010914.DTKE25080.imf16aec.mail.bellsouth.net@ibm58aec.bellsouth.net>
          for <java-user@lucene.apache.org>;
          Tue, 28 Jun 2005 21:09:14 -0400
Received: from w2ks.synernet.com ([65.12.150.225])
          by ibm58aec.bellsouth.net with ESMTP
          id <20050629010914.EHIR1856.ibm58aec.bellsouth.net@w2ks.synernet.com>
          for <java-user@lucene.apache.org>;
          Tue, 28 Jun 2005 21:09:14 -0400
Message-Id: <6.2.1.2.2.20050628210625.06519448@fast.synernet.com>
X-Mailer: QUALCOMM Windows Eudora Version 6.2.1.2
Date: Tue, 28 Jun 2005 21:09:54 -0400
To: java-user@lucene.apache.org
From: Fred Toth <ftoth@synernet.com>
Subject: Does highlighter highlight phrases only?
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I'm working with the highlighter and phrase queries and I'm seeing it 
highlight not
the phrase, but also the individual terms. So if the phrase query
is "heavy doses", we get that string highlighted, but also individual
occurrences of "heavy" and "doses".

I can't tell if that's because I'm doing something wrong or if that's
just the way it works.

Anybody know the answer to this one?

Thanks,

Fred Toth


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 01:26:51 2005
Return-Path: <java-user-return-15197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15491 invoked from network); 29 Jun 2005 01:26:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 01:26:51 -0000
Received: (qmail 80146 invoked by uid 500); 29 Jun 2005 01:26:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80122 invoked by uid 500); 29 Jun 2005 01:26:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80109 invoked by uid 99); 29 Jun 2005 01:26:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 18:26:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 18:26:41 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AACC513E2006; Tue, 28 Jun 2005 21:26:36 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 831D713E2005
	for <java-user@lucene.apache.org>; Tue, 28 Jun 2005 21:26:22 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <6.2.1.2.2.20050628210625.06519448@fast.synernet.com>
References: <6.2.1.2.2.20050628210625.06519448@fast.synernet.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BE81A15B-19A3-4FBB-933F-F23A73FB5BC0@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Does highlighter highlight phrases only?
Date: Tue, 28 Jun 2005 21:26:22 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 28, 2005, at 9:09 PM, Fred Toth wrote:

> Hi,
>
> I'm working with the highlighter and phrase queries and I'm seeing  
> it highlight not
> the phrase, but also the individual terms. So if the phrase query
> is "heavy doses", we get that string highlighted, but also individual
> occurrences of "heavy" and "doses".
>
> I can't tell if that's because I'm doing something wrong or if that's
> just the way it works.
>
> Anybody know the answer to this one?

That's just the way it works, currently.  There is a new piece of  
code just contributed residing in Bugzilla that (I think) highlights  
just the phrases - have a look at that and see if that helps.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 02:15:32 2005
Return-Path: <java-user-return-15198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30663 invoked from network); 29 Jun 2005 02:15:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 02:15:31 -0000
Received: (qmail 33950 invoked by uid 500); 29 Jun 2005 02:15:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33931 invoked by uid 500); 29 Jun 2005 02:15:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33918 invoked by uid 99); 29 Jun 2005 02:15:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 19:15:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [205.152.59.68] (HELO imf20aec.mail.bellsouth.net) (205.152.59.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 19:15:22 -0700
Received: from ibm62aec.bellsouth.net ([65.12.150.225])
          by imf20aec.mail.bellsouth.net with ESMTP
          id <20050629021519.JYIP1983.imf20aec.mail.bellsouth.net@ibm62aec.bellsouth.net>
          for <java-user@lucene.apache.org>;
          Tue, 28 Jun 2005 22:15:19 -0400
Received: from w2ks.synernet.com ([65.12.150.225])
          by ibm62aec.bellsouth.net with ESMTP
          id <20050629021518.MNNN8050.ibm62aec.bellsouth.net@w2ks.synernet.com>
          for <java-user@lucene.apache.org>;
          Tue, 28 Jun 2005 22:15:18 -0400
Message-Id: <6.2.1.2.2.20050628221512.065219a0@fast.synernet.com>
X-Mailer: QUALCOMM Windows Eudora Version 6.2.1.2
Date: Tue, 28 Jun 2005 22:15:59 -0400
To: java-user@lucene.apache.org
From: Fred Toth <ftoth@synernet.com>
Subject: Re: Does highlighter highlight phrases only?
In-Reply-To: <BE81A15B-19A3-4FBB-933F-F23A73FB5BC0@ehatchersolutions.com
 >
References: <6.2.1.2.2.20050628210625.06519448@fast.synernet.com>
 <BE81A15B-19A3-4FBB-933F-F23A73FB5BC0@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Erik! I think I found it.

For others who are interested:

http://issues.apache.org/bugzilla/show_bug.cgi?id=35518

Fred Toth

At 09:26 PM 6/28/2005, you wrote:

>On Jun 28, 2005, at 9:09 PM, Fred Toth wrote:
>
>>Hi,
>>
>>I'm working with the highlighter and phrase queries and I'm seeing
>>it highlight not
>>the phrase, but also the individual terms. So if the phrase query
>>is "heavy doses", we get that string highlighted, but also individual
>>occurrences of "heavy" and "doses".
>>
>>I can't tell if that's because I'm doing something wrong or if that's
>>just the way it works.
>>
>>Anybody know the answer to this one?
>
>That's just the way it works, currently.  There is a new piece of
>code just contributed residing in Bugzilla that (I think) highlights
>just the phrases - have a look at that and see if that helps.
>
>     Erik
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 04:19:18 2005
Return-Path: <java-user-return-15199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66628 invoked from network); 29 Jun 2005 04:19:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 04:19:17 -0000
Received: (qmail 32026 invoked by uid 500); 29 Jun 2005 04:19:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31170 invoked by uid 500); 29 Jun 2005 04:19:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31157 invoked by uid 99); 29 Jun 2005 04:19:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 21:19:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.154.210.214] (HELO rectangular.com) (12.154.210.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 21:19:10 -0700
Received: from c-24-21-47-23.hsd1.or.comcast.net ([24.21.47.23] helo=[10.0.1.3])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1DnU2r-0002Gj-RA
	for java-user@lucene.apache.org; Tue, 28 Jun 2005 21:19:29 -0700
Mime-Version: 1.0 (Apple Message framework v730)
Content-Transfer-Encoding: 7bit
Message-Id: <08E7517D-A931-4A7A-9595-559408A2556B@rectangular.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Error tolerant query parsing
Date: Tue, 28 Jun 2005 21:19:05 -0700
X-Mailer: Apple Mail (2.730)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Greetings,

Is it possible to have Lucene parse malformed queries?  For instance,  
is there a way to have this query...

art museums "new york city

... return results for ...

art museums "new york city"

... or is that just a parse error, end of story?

It's a DWIM* thing.

--
Marvin Humphrey

* DWIM: Do What I Mean


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 05:47:39 2005
Return-Path: <java-user-return-15200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87623 invoked from network); 29 Jun 2005 05:47:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 05:47:39 -0000
Received: (qmail 12845 invoked by uid 500); 29 Jun 2005 05:47:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12816 invoked by uid 500); 29 Jun 2005 05:47:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12801 invoked by uid 99); 29 Jun 2005 05:47:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 22:47:28 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.195 as permitted sender)
Received: from [64.233.170.195] (HELO rproxy.gmail.com) (64.233.170.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 22:47:27 -0700
Received: by rproxy.gmail.com with SMTP id 1so15060rny
        for <java-user@lucene.apache.org>; Tue, 28 Jun 2005 22:47:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=iZ96xcqx6tsBMj/4J1ZNs+Qoex3Cnos5ygEl2rMs4Jm+PCE5ry00wMTuCQMqx2ORzjv1PS6/U7TVPSgeZFSY1qqztF/r+cb/7ISZtCSefoRau3o/8mxjVktfziQH3j20nTsHW457lsJm7AgdpEKtuplQ2fFLoLqJGwvkySiLZL8=
Received: by 10.38.198.5 with SMTP id v5mr9209rnf;
        Tue, 28 Jun 2005 22:47:25 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Tue, 28 Jun 2005 22:47:25 -0700 (PDT)
Message-ID: <7ca1239105062822473d2edf0a@mail.gmail.com>
Date: Tue, 28 Jun 2005 22:47:25 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: when is the commit.lock released?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am looking at and trying to understand more about Lucene's
reader/writer synchronization. Does anyone know when the commit.lock
is release? I could not find it anywhere in the source code.

I did see the write.lock is released in IndexWriter.close().

Thanks,

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 06:26:27 2005
Return-Path: <java-user-return-15201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96735 invoked from network); 29 Jun 2005 06:26:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 06:26:26 -0000
Received: (qmail 51105 invoked by uid 500); 29 Jun 2005 06:26:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51015 invoked by uid 500); 29 Jun 2005 06:26:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51000 invoked by uid 99); 29 Jun 2005 06:26:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 23:26:17 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.196 as permitted sender)
Received: from [64.233.170.196] (HELO rproxy.gmail.com) (64.233.170.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 23:26:16 -0700
Received: by rproxy.gmail.com with SMTP id 1so15740rny
        for <java-user@lucene.apache.org>; Tue, 28 Jun 2005 23:26:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=R7uz3klEzg7YmZI2XRwIsbClYrWf4g1gs/oksOmoi4PGcscQM0oIHKoJZE/RtI0s6BCLsDWdOWbgM+wA6/hdqH5Da6jUodfsb1akzvzUyz1brqdLtD8GG4p7vfog/yn9Bu6TeGkRVAJrqRlmmVtnLgVIkXkwxDz0e0aRVLpsg6M=
Received: by 10.38.95.9 with SMTP id s9mr9489rnb;
        Tue, 28 Jun 2005 23:26:14 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Tue, 28 Jun 2005 23:26:14 -0700 (PDT)
Message-ID: <7ca1239105062823266c1d406f@mail.gmail.com>
Date: Tue, 28 Jun 2005 23:26:14 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: question regarding the "commit.lock"
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am looking at and trying to understand more about Lucene's
reader/writer synchronization. Does anyone know when the commit.lock
is release? I could not find it anywhere in the source code.

I did see the write.lock is released in IndexWriter.close().

Thanks,

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 06:46:46 2005
Return-Path: <java-user-return-15202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3998 invoked from network); 29 Jun 2005 06:46:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 06:46:46 -0000
Received: (qmail 72854 invoked by uid 500); 29 Jun 2005 06:46:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72657 invoked by uid 500); 29 Jun 2005 06:46:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72644 invoked by uid 99); 29 Jun 2005 06:46:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 23:46:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 23:46:37 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8DF7C5B781; Tue, 28 Jun 2005 23:46:34 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP
	id 842E27F45E; Tue, 28 Jun 2005 23:46:34 -0700 (PDT)
Date: Tue, 28 Jun 2005 23:46:34 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org, Chris D <brogar@gmail.com>
Subject: Re: Sorting on an occasionally empty field
In-Reply-To: <34cc3b0a05062808022f76b2ce@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0506282344420.7212@hal.rescomp.berkeley.edu>
References: <34cc3b0a05062808022f76b2ce@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


FYI: if there's only one fieled you have to (occasionally) worry about
being absent from all docs, you can circumvent the whole issue (and avoid
needing to patch) by using a TermEnum to check if you date field has any
values before doing the search, if not - sort on something else.


: Date: Tue, 28 Jun 2005 11:02:27 -0400
: From: Chris D <brogar@gmail.com>
: Reply-To: java-user@lucene.apache.org, Chris D <brogar@gmail.com>
: To: java-user@lucene.apache.org
: Subject: Sorting on an occasionally empty field
:
: Hello,
:
: I'm indexing one lucene document in a couple of steps, For a short
: period of time the sorted field (a date in this case) may be empty,
: depending on the order the files are indexed. It's perfectly
: acceptable (and likely ideal) for that document to not be returned.
: There are other cases where I would like to sort on a field that isn't
: always present.
:
: This has been dicussed before in bug 34477
: (http://issues.apache.org/bugzilla/show_bug.cgi?id=34477).
:
: I was wondering is this going to be implemented in 1.9/2.0?
:
: I tried implementing the template patch to all of the places in
: FieldCacheImpl to see how that works, and got snagged on getAuto().
: (see starred lines)
:
:   public Object getAuto (IndexReader reader, String field)
:   throws IOException {
:     field = field.intern();
:     Object ret = lookup (reader, field, SortField.AUTO);
:     if (ret == null) {
:       TermEnum enumerator = reader.terms (new Term (field, ""));
:       try {
:         Term term = enumerator.term();
:         if (term == null) {
:           /*********I'm pretty sure this one doesn't matter*********/
:           throw new RuntimeException ("no terms in field " + field + "
: - cannot determine sort type");
:         }
:         if (term.field() == field) {
:           String termtext = term.text().trim();
:
:           // Java 1.3 level code:
:           try {
:             Integer.parseInt (termtext);
:             ret = getInts (reader, field);
:           } catch (NumberFormatException nfe1) {
:             try {
:               Float.parseFloat (termtext);
:               ret = getFloats (reader, field);
:             } catch (NumberFormatException nfe2) {
:               ret = getStringIndex (reader, field);
:             }
:           }
:           if (ret != null) {
:             store (reader, field, SortField.AUTO, ret);
:           }
:         } else {
:           throw new RuntimeException ("field \"" + field + "\" does
: not appear to be indexed");
:           /***************What should be returned here??******************/
:         }
:       } finally {
:         enumerator.close();
:       }
:
:     }
:     return ret;
:   }
:
:
: Any suggestions?
:
: Thanks,
: Chris
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 06:57:53 2005
Return-Path: <java-user-return-15203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7424 invoked from network); 29 Jun 2005 06:57:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 06:57:53 -0000
Received: (qmail 89454 invoked by uid 500); 29 Jun 2005 06:57:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89435 invoked by uid 500); 29 Jun 2005 06:57:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89422 invoked by uid 99); 29 Jun 2005 06:57:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 23:57:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jun 2005 23:57:44 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 88A315B776; Tue, 28 Jun 2005 23:57:40 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 85E457F459
	for <java-user@lucene.apache.org>; Tue, 28 Jun 2005 23:57:40 -0700 (PDT)
Date: Tue, 28 Jun 2005 23:57:40 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Error tolerant query parsing
In-Reply-To: <08E7517D-A931-4A7A-9595-559408A2556B@rectangular.com>
Message-ID: <Pine.LNX.4.58.0506282355170.7212@hal.rescomp.berkeley.edu>
References: <08E7517D-A931-4A7A-9595-559408A2556B@rectangular.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


There's two ways you can make query parsing be more tolerant:

1) write a more tolerate parser that never throws exceptions

2) wrap the existing query parser in code that inspects any caught
ParseExceptions and ties to modifiy the string to fix it.

...I've never tried either, but a rule based approach for dealing with #2
should possible given the API of ParseException if the set of rules you
want to deal with is simple enough (ie: just close any open quotes)

http://lucene.apache.org/java/docs/api/org/apache/lucene/queryParser/ParseException.html


: Date: Tue, 28 Jun 2005 21:19:05 -0700
: From: Marvin Humphrey <marvin@rectangular.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Error tolerant query parsing
:
: Greetings,
:
: Is it possible to have Lucene parse malformed queries?  For instance,
: is there a way to have this query...
:
: art museums "new york city
:
: ... return results for ...
:
: art museums "new york city"
:
: ... or is that just a parse error, end of story?
:
: It's a DWIM* thing.
:
: --
: Marvin Humphrey
:
: * DWIM: Do What I Mean
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 08:03:27 2005
Return-Path: <java-user-return-15204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53695 invoked from network); 29 Jun 2005 08:03:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 08:03:27 -0000
Received: (qmail 51939 invoked by uid 500); 29 Jun 2005 08:03:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51863 invoked by uid 500); 29 Jun 2005 08:03:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51844 invoked by uid 99); 29 Jun 2005 08:03:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 01:03:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [134.96.188.26] (HELO mail.dfki.de) (134.96.188.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 01:03:16 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 51D5CE47E9
	for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 10:03:13 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 407AFE47E5
	for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 10:03:13 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <290E8A49-FA2C-440F-9EC7-06F05D448C56@ehatchersolutions.com>
References: <b7fef32f0f54092d8f78191b50c90d87@activemath.org> <290E8A49-FA2C-440F-9EC7-06F05D448C56@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <beaca38674711fe6572e45c1b7d232ba@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: no EnglishAnalyzer ?
Date: Wed, 29 Jun 2005 10:03:11 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Le 29 juin 05, =E0 00:57, Erik Hatcher a =E9crit :
> Paul - if stemming is what you're looking for, then grab the=20
> SnowballAnalyzer code from Subversion under contrib/snowball.  Or you=20=

> could get a binary copy of the JAR from the source code distribution=20=

> of Lucene in Action at http://www.lucenebook.com (and see examples of=20=

> its use in the sample code there).  Lucene's JAR does have a built-in=20=

> PorterStemFilter, but none of the built-in analyzers use it, and the=20=

> SnowballAnalyzer is more commonly used anyway.

What is the differences between, PorterStemFilter, GermanFilter and the=20=

filters in SnowballAnalyzers ?

thanks

paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 08:14:06 2005
Return-Path: <java-user-return-15205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56804 invoked from network); 29 Jun 2005 08:14:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 08:14:06 -0000
Received: (qmail 61523 invoked by uid 500); 29 Jun 2005 08:13:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61502 invoked by uid 500); 29 Jun 2005 08:13:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61489 invoked by uid 99); 29 Jun 2005 08:13:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 01:13:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.97] (HELO smtpout.mac.com) (17.250.248.97)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 01:13:56 -0700
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout06/MantshX 4.0) with ESMTP id j5T8Dt5r003678
	for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 01:13:55 -0700 (PDT)
Received: from [192.168.15.102] (24-205-146-135.mpk-mres.charterpipeline.net [24.205.146.135])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id j5T8DrF2011943
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 01:13:54 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v730)
Content-Transfer-Encoding: 7bit
Message-Id: <A90F23ED-AFBE-40E6-8487-5B3885A05927@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Xing Li <xing@mac.com>
Subject: newbie question on Mac OS X
Date: Wed, 29 Jun 2005 01:12:27 -0700
X-Mailer: Apple Mail (2.730)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


1) Downloaded 1.4.3 src

2) ran ant... everything builds

3) $ cd builds

4) $ java -jar lucene-1.5-rc1-dev.jar
Failed to load Main-Class manifest attribute from
lucene-1.5-rc1-dev.jar

I haven't build anything java for almost 5 years so not sure what it  
means. Did a good search online on the error and it just confused me  
even further.

Any help would be appreciated.

Xing


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 08:43:31 2005
Return-Path: <java-user-return-15206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67947 invoked from network); 29 Jun 2005 08:43:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 08:43:30 -0000
Received: (qmail 95336 invoked by uid 500); 29 Jun 2005 08:43:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95224 invoked by uid 500); 29 Jun 2005 08:43:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95162 invoked by uid 99); 29 Jun 2005 08:43:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [134.96.188.26] (HELO mail.dfki.de) (134.96.188.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 01:43:17 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 07DA3E4810
	for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 10:42:41 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id E8B7EE47E5
	for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 10:42:40 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <A90F23ED-AFBE-40E6-8487-5B3885A05927@mac.com>
References: <A90F23ED-AFBE-40E6-8487-5B3885A05927@mac.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <0765b1ed1baff192c13dc04c78406386@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: newbie question on Mac OS X
Date: Wed, 29 Jun 2005 10:42:38 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Which main class would you expect to run ?????
I don't think there's one.
Lucene is a library.

paul

PS: this has nothing MacOSX specific


Le 29 juin 05, =E0 10:12, Xing Li a =E9crit :

>
> 1) Downloaded 1.4.3 src
>
> 2) ran ant... everything builds
>
> 3) $ cd builds
>
> 4) $ java -jar lucene-1.5-rc1-dev.jar
> Failed to load Main-Class manifest attribute from
> lucene-1.5-rc1-dev.jar
>
> I haven't build anything java for almost 5 years so not sure what it=20=

> means. Did a good search online on the error and it just confused me=20=

> even further.
>
> Any help would be appreciated.
>
> Xing
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 09:18:47 2005
Return-Path: <java-user-return-15207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77145 invoked from network); 29 Jun 2005 09:18:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 09:18:47 -0000
Received: (qmail 22513 invoked by uid 500); 29 Jun 2005 09:18:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22493 invoked by uid 500); 29 Jun 2005 09:18:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22480 invoked by uid 99); 29 Jun 2005 09:18:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ian.lea@gmail.com designates 64.233.162.196 as permitted sender)
Received: from [64.233.162.196] (HELO zproxy.gmail.com) (64.233.162.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 02:18:36 -0700
Received: by zproxy.gmail.com with SMTP id n29so411841nzf
        for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 02:17:34 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=eNyUNxr9SqrdI9ksMZ0Boi+w6pYWxK0lWTxO3SoDmef4cgROfeSE/9EialBXviCiThnZnx85UCHNBzw4sHUWjCi1ygqRNMB9cWfHX5/9FOR+bpVaf4fkpW6gXjICR+Tq8gXaUfpd7D9QPeVW3/mCP6vC83pi4VrqAZp8MpvQTcU=
Received: by 10.36.3.6 with SMTP id 6mr102268nzc;
        Wed, 29 Jun 2005 02:17:34 -0700 (PDT)
Received: by 10.36.9.19 with HTTP; Wed, 29 Jun 2005 02:17:33 -0700 (PDT)
Message-ID: <8c4e6861050629021725e754dd@mail.gmail.com>
Date: Wed, 29 Jun 2005 10:17:33 +0100
From: Ian Lea <ian.lea@gmail.com>
Reply-To: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org, jian chen <chenjian1227@gmail.com>
Subject: Re: question regarding the "commit.lock"
In-Reply-To: <7ca1239105062823266c1d406f@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <7ca1239105062823266c1d406f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

http://lucene.apache.org/java/docs/api/org/apache/lucene/store/Lock.With.ht=
ml#run()

--
Ian.


On 29/06/05, jian chen <chenjian1227@gmail.com> wrote:
> Hi,
>=20
> I am looking at and trying to understand more about Lucene's
> reader/writer synchronization. Does anyone know when the commit.lock
> is release? I could not find it anywhere in the source code.
>=20
> I did see the write.lock is released in IndexWriter.close().
>=20
> Thanks,

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 11:25:14 2005
Return-Path: <java-user-return-15208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23953 invoked from network); 29 Jun 2005 11:25:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 11:25:14 -0000
Received: (qmail 85199 invoked by uid 500); 29 Jun 2005 11:25:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85181 invoked by uid 500); 29 Jun 2005 11:25:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 56983 invoked by uid 99); 29 Jun 2005 09:49:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Message-ID: <42C26ECF.8060404@semantico.com>
Date: Wed, 29 Jun 2005 10:50:07 +0100
From: Peter Pimley <peter.pimley@semantico.com>
User-Agent: Debian Thunderbird 1.0.2 (X11/20050602)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing puncutation
References: <14FBF41EF1411B45B2EC4ADEAC53D1310342B688@MAIL01.wescodist.com>
In-Reply-To: <14FBF41EF1411B45B2EC4ADEAC53D1310342B688@MAIL01.wescodist.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV using ClamSMTP
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I'm not sure how useful this reply is, but hey ;)

<aol>me too!</aol>

I do a vaguely similar thing;  I have to strip accents from characters 
such as e-acute out of both my input data and my incoming search queries 
to put them into a standard form.  I do this with a custom TokenFilter 
subclass.  I have an analyzer that includes this filter along with some 
of the standard ones (LowercaseFilter, etc).  I run the same analyzer on 
indexing and searching, which has been discussed in other posts.

My point is that I'm happy with this approach and I'd recommend you do a 
similar thing, at least as a first attempt.

Cheers,
Peter Pimley



Aigner, Thomas wrote:

>Hello all,
>
>	I am VERY new to Lucene and we are trying out Lucene to see if
>it will accomplish the vast majority of our search functions.
>
>	I have a question about a good way to index some of our product
>description codes.  We have description codes like 21-MA-GAB and other
>punctuation.  Our users need to be able to search for "21 MA GAB" or 
>"21-MA_GAB" or "21MAGAB".  Is the best way to accomplish this by
>creating synonyms for the 3 different ways when punctuation is in parts
>to search for? I know I can stop punctuation in the index but what about
>grouping the information together or with spaces?
>
>Thanks all in advance,
>Tom
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 13:18:40 2005
Return-Path: <java-user-return-15209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88292 invoked from network); 29 Jun 2005 13:18:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 13:18:39 -0000
Received: (qmail 78575 invoked by uid 500); 29 Jun 2005 13:18:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78530 invoked by uid 500); 29 Jun 2005 13:18:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78517 invoked by uid 99); 29 Jun 2005 13:18:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 06:18:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.81] (HELO web50505.mail.yahoo.com) (206.190.38.81)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jun 2005 06:18:27 -0700
Received: (qmail 59250 invoked by uid 60001); 29 Jun 2005 13:18:22 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=0qOEY9bXbu/WD/kyGZRh0oPADEEBBgM+NWr1vNcJXT8n0SNd2GVEmdZVEj9v0dEVk1BOWOaVgu9lDdWuA9tlgl7UeLUxRnfc1aUFu0KBphU3MWtoamgvTymXlO82raw4e43nu1sCMChilHReJSTHmmxKLEGErnMWBz4utQxoJps=  ;
Message-ID: <20050629131822.59248.qmail@web50505.mail.yahoo.com>
Received: from [217.118.45.90] by web50505.mail.yahoo.com via HTTP; Wed, 29 Jun 2005 15:18:22 CEST
Date: Wed, 29 Jun 2005 15:18:22 +0200 (CEST)
From: Naimdjon Takhirov <tnaim1@yahoo.com>
Subject: Design question [too many fields?]
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
We are porting our search functionality over to lucene
in our hotel solution which is java based. Today
search is done directly against the database.
There is a date search, i.e tourist would like to
search for free rooms fromDate and toDate.
The documents are added to the index pr hotel
room(product). Our customer wants availability info
for min. one year.
First I thought of having available date fields pr day
and value as true like this: 
"29062006:true"
"02072006:true"
...
...
...
"30122006:true"
and when searching we would search for every day
availability of the rooms the user wrote in from/to
input fields.
That would create a minimum of 390 fields pr document.
It doesn't look so elegant solution to me.
Has anybody had similar issues? What would be best
approach to fix it? Thanks in advance.

Naimdjon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 13:59:28 2005
Return-Path: <java-user-return-15210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14413 invoked from network); 29 Jun 2005 13:59:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 13:59:28 -0000
Received: (qmail 71018 invoked by uid 500); 29 Jun 2005 13:59:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70927 invoked by uid 500); 29 Jun 2005 13:59:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70827 invoked by uid 99); 29 Jun 2005 13:59:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 06:59:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.215] (HELO web26004.mail.ukl.yahoo.com) (217.12.10.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jun 2005 06:59:01 -0700
Received: (qmail 83267 invoked by uid 60001); 29 Jun 2005 13:58:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=zmQuDg8KNTd6eOTmY32sJ5K4NzIwsHOi6nAfwy+/tx0bFqLzWbuqh0Wbn8zLh7ZmXnlGhQQsHCzpbPfanIAk6Pbv4cuFsz+HshRLoF6dCZdJjJcLoXs9WRsirLpGgPVxa5+RY+Q4Ci13sIPM+CzODUOU4X2n6E3PSYRe1FnzVT0=  ;
Message-ID: <20050629135856.83265.qmail@web26004.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26004.mail.ukl.yahoo.com via HTTP; Wed, 29 Jun 2005 14:58:55 BST
Date: Wed, 29 Jun 2005 14:58:55 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Design question [too many fields?]
To: java-user@lucene.apache.org
In-Reply-To: <20050629131822.59248.qmail@web50505.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Presumably there is also a free-text element to the
search or you wouldn't be using Lucene.

Multiple fields is not the way to go.
A single Lucene field could contain multiple terms (
the available dates) but I still don't think that's
the best solution.
The availability info is likely to be pretty volatile
and you always want up-to-date info so I would prefer
to hit a database for this. If you keep a DB primary
key to Lucene doc id look-up cached in memory you can
quickly construct a Lucene filter from the database
results and therefore only show Lucene results for
available rooms. 

Cheers
Mark


		
___________________________________________________________ 
How much free photo storage do you get? Store your holiday 
snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 14:02:24 2005
Return-Path: <java-user-return-15211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15911 invoked from network); 29 Jun 2005 14:02:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 14:02:24 -0000
Received: (qmail 76637 invoked by uid 500); 29 Jun 2005 14:02:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76425 invoked by uid 500); 29 Jun 2005 14:02:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76370 invoked by uid 99); 29 Jun 2005 14:02:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 07:02:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 07:02:15 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 1D34513E2006; Wed, 29 Jun 2005 10:02:07 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id AFDDC13E2006
	for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 10:01:38 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050629131822.59248.qmail@web50505.mail.yahoo.com>
References: <20050629131822.59248.qmail@web50505.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9E7F9CD5-E4D0-4FBC-90F4-75B082A4DD2D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Design question [too many fields?]
Date: Wed, 29 Jun 2005 10:01:38 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 29, 2005, at 9:18 AM, Naimdjon Takhirov wrote:

> Hi,
> We are porting our search functionality over to lucene
> in our hotel solution which is java based. Today
> search is done directly against the database.
> There is a date search, i.e tourist would like to
> search for free rooms fromDate and toDate.
> The documents are added to the index pr hotel
> room(product). Our customer wants availability info
> for min. one year.
> First I thought of having available date fields pr day
> and value as true like this:
> "29062006:true"
> "02072006:true"
> ...
> ...
> ...
> "30122006:true"
> and when searching we would search for every day
> availability of the rooms the user wrote in from/to
> input fields.
> That would create a minimum of 390 fields pr document.
> It doesn't look so elegant solution to me.
> Has anybody had similar issues? What would be best
> approach to fix it? Thanks in advance.

Another option:
Rather than make fields for each date, create a "date" field.  For  
each date the room is available, add a term in the form "YYYYMMDD" to  
that field.  You can add multiple Field.Keyword("date", "<YYYYMMDD>")  
fields to a document.

For searching, use RangeQuery on the "date" field.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 14:04:31 2005
Return-Path: <java-user-return-15212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16699 invoked from network); 29 Jun 2005 14:04:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 14:04:30 -0000
Received: (qmail 79143 invoked by uid 500); 29 Jun 2005 14:04:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78997 invoked by uid 500); 29 Jun 2005 14:04:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78984 invoked by uid 99); 29 Jun 2005 14:04:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 07:04:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 07:04:25 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0484213E2008; Wed, 29 Jun 2005 10:04:17 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 9B54A13E2005
	for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 10:03:43 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050629135856.83265.qmail@web26004.mail.ukl.yahoo.com>
References: <20050629135856.83265.qmail@web26004.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AD48ECAA-83ED-49B3-945D-E7B4118451E3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Design question [too many fields?]
Date: Wed, 29 Jun 2005 10:03:06 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I second Mark's suggestion over the alternative I posted.  My  
alternative was merely to invert the field structure originally  
described, but using a Filter for the volatile information is wiser.

     Erik

On Jun 29, 2005, at 9:58 AM, mark harwood wrote:

> Presumably there is also a free-text element to the
> search or you wouldn't be using Lucene.
>
> Multiple fields is not the way to go.
> A single Lucene field could contain multiple terms (
> the available dates) but I still don't think that's
> the best solution.
> The availability info is likely to be pretty volatile
> and you always want up-to-date info so I would prefer
> to hit a database for this. If you keep a DB primary
> key to Lucene doc id look-up cached in memory you can
> quickly construct a Lucene filter from the database
> results and therefore only show Lucene results for
> available rooms.
>
> Cheers
> Mark
>
>
>
> ___________________________________________________________
> How much free photo storage do you get? Store your holiday
> snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 14:39:35 2005
Return-Path: <java-user-return-15213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29841 invoked from network); 29 Jun 2005 14:39:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 14:39:35 -0000
Received: (qmail 44491 invoked by uid 500); 29 Jun 2005 14:39:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44429 invoked by uid 500); 29 Jun 2005 14:39:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44403 invoked by uid 99); 29 Jun 2005 14:39:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 07:39:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 07:39:28 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 071C313E2005; Wed, 29 Jun 2005 10:39:21 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 028C213E2005
	for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 10:39:14 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <beaca38674711fe6572e45c1b7d232ba@activemath.org>
References: <b7fef32f0f54092d8f78191b50c90d87@activemath.org> <290E8A49-FA2C-440F-9EC7-06F05D448C56@ehatchersolutions.com> <beaca38674711fe6572e45c1b7d232ba@activemath.org>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <1384AEA7-38EC-4F49-959E-76304CFE846B@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: no EnglishAnalyzer ?
Date: Wed, 29 Jun 2005 10:39:12 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 29, 2005, at 4:03 AM, Paul Libbrecht wrote:

>
> Le 29 juin 05, =E0 00:57, Erik Hatcher a =E9crit :
>
>> Paul - if stemming is what you're looking for, then grab the =20
>> SnowballAnalyzer code from Subversion under contrib/snowball.  Or =20
>> you could get a binary copy of the JAR from the source code =20
>> distribution of Lucene in Action at http://www.lucenebook.com (and =20=

>> see examples of its use in the sample code there).  Lucene's JAR =20
>> does have a built-in PorterStemFilter, but none of the built-in =20
>> analyzers use it, and the SnowballAnalyzer is more commonly used =20
>> anyway.
>>
>
> What is the differences between, PorterStemFilter, GermanFilter and =20=

> the filters in SnowballAnalyzers ?

GermanStemFilter (not GermanFilter) is specific to German.  =20
PorterStemFilter is for English.  SnowballAnalyzer is an engine that =20
runs any of the available stemmers (there is German, a few different =20
English ones, and several other language-specific stemmers).

Your best bet would be to give each of them a try on some sample text =20=

and see which one fits best for your needs.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 14:51:05 2005
Return-Path: <java-user-return-15214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34153 invoked from network); 29 Jun 2005 14:51:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 14:51:04 -0000
Received: (qmail 67695 invoked by uid 500); 29 Jun 2005 14:50:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67674 invoked by uid 500); 29 Jun 2005 14:50:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67661 invoked by uid 99); 29 Jun 2005 14:50:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 07:50:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [68.142.198.211] (HELO smtp112.sbc.mail.mud.yahoo.com) (68.142.198.211)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jun 2005 07:50:58 -0700
Received: (qmail 4392 invoked from network); 29 Jun 2005 14:50:53 -0000
Received: from unknown (HELO ?192.168.1.102?) (kkrugler@pacbell.net@63.200.72.125 with plain)
  by smtp112.sbc.mail.mud.yahoo.com with SMTP; 29 Jun 2005 14:50:52 -0000
Mime-Version: 1.0
Message-Id: <p06210206bee85eceaa8c@[192.168.1.102]>
In-Reply-To: <42C26ECF.8060404@semantico.com>
References:
 <14FBF41EF1411B45B2EC4ADEAC53D1310342B688@MAIL01.wescodist.com>
 <42C26ECF.8060404@semantico.com>
Date: Wed, 29 Jun 2005 07:39:13 -0700
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: Indexing puncutation
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>I do a vaguely similar thing;  I have to strip accents from 
>characters such as e-acute out of both my input data and my incoming 
>search queries to put them into a standard form.  I do this with a 
>custom TokenFilter subclass.  I have an analyzer that includes this 
>filter along with some of the standard ones (LowercaseFilter, etc). 
>I run the same analyzer on indexing and searching, which has been 
>discussed in other posts.

For a hard-core approach to this problem, you could try converting 
all text to Unicode first, then use the ICU package to create a level 
0 "sort key" (the C API is col_getSortKey). This will be a string 
suitable for comparison to determine weak equality, but you can also 
just index it as a regular token.

There are some subtle issues w/locale-specific behavior of the sort 
key generation step, where you could guess at the right locale to use 
for the conversion, but in general that shouldn't matter.

Two other issues are code/data size (ICU can be big) and the 
performance hit while indexing documents.

-- Ken



>Aigner, Thomas wrote:
>
>>Hello all,
>>
>>	I am VERY new to Lucene and we are trying out Lucene to see if
>>it will accomplish the vast majority of our search functions.
>>
>>	I have a question about a good way to index some of our product
>>description codes.  We have description codes like 21-MA-GAB and other
>>punctuation.  Our users need to be able to search for "21 MA GAB" 
>>or "21-MA_GAB" or "21MAGAB".  Is the best way to accomplish this by
>>creating synonyms for the 3 different ways when punctuation is in parts
>>to search for? I know I can stop punctuation in the index but what about
>>grouping the information together or with spaces?
>>
>>Thanks all in advance,
>>Tom


-- 
Ken Krugler
TransPac Software, Inc.
<http://www.transpac.com>
+1 530-470-9200

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 15:01:04 2005
Return-Path: <java-user-return-15215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39749 invoked from network); 29 Jun 2005 15:01:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 15:01:03 -0000
Received: (qmail 96591 invoked by uid 500); 29 Jun 2005 15:00:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96572 invoked by uid 500); 29 Jun 2005 15:00:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96546 invoked by uid 99); 29 Jun 2005 15:00:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 08:00:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of radomirml@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 08:00:57 -0700
Received: by wproxy.gmail.com with SMTP id i5so789870wra
        for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 08:00:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=f2b+M58cTEb8VxESCEHeug8S+vkgWgph0RUIXLgTBh+x7Znwab8/w235zxZWFK6+TCMG7VBPY3v3h2MfL8trORcolSAOOYUhhfNPiun2vSLnm9cIzbbfKtmVdCQessVCxpr26bJgqHoWvsHW3y1UiHj15V5b146Psfq28EC8T+k=
Received: by 10.54.6.16 with SMTP id 16mr116013wrf;
        Wed, 29 Jun 2005 08:00:53 -0700 (PDT)
Received: by 10.54.133.9 with HTTP; Wed, 29 Jun 2005 08:00:53 -0700 (PDT)
Message-ID: <4ed277ec050629080043a7b8ab@mail.gmail.com>
Date: Wed, 29 Jun 2005 17:00:53 +0200
From: Radomir Mladenovic <radomirml@gmail.com>
Reply-To: Radomir Mladenovic <radomirml@gmail.com>
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Subject: [ANN] naisQuest 1.0 search engine and fireQuest extension for Firefox released
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

EVERSOFT is pleased to announce availability of the first tools from its=20
naisQuest product line:

  http://www.naisquest.com

* naisQuest is a Java based (J2EE) search engine designed for web sites and=
=20
corporate networks. It collects and index full text and Meta data from the=
=20
most popular document formats.
naisQuest is available for FREE download and evaluation and with free=20
license for personal and non-commercial use.
http://www.naisquest.com/naisquest

* fireQuest is an extension for Mozilla Firefox browser that works as a=20
naisQuest client, offering "search experience" similar to plain web search=
=20
interface but also allows user to open and edit found document from
its original location.
http://www.naisquest.com/firequest

Have fun.

Radomir

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 15:36:56 2005
Return-Path: <java-user-return-15216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65533 invoked from network); 29 Jun 2005 15:36:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 15:36:55 -0000
Received: (qmail 81071 invoked by uid 500); 29 Jun 2005 15:36:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81042 invoked by uid 500); 29 Jun 2005 15:36:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80900 invoked by uid 99); 29 Jun 2005 15:36:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 08:36:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.86.89.61] (HELO smtpauth01.mail.atl.earthlink.net) (209.86.89.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 08:36:45 -0700
Received: from [69.235.209.227] (helo=[172.16.1.2])
	by smtpauth01.mail.atl.earthlink.net with asmtp (TLSv1:RC4-SHA:128)
	(Exim 4.34)
	id 1DnecC-0005iE-N6
	for java-user@lucene.apache.org; Wed, 29 Jun 2005 11:36:40 -0400
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <A90F23ED-AFBE-40E6-8487-5B3885A05927@mac.com>
References: <A90F23ED-AFBE-40E6-8487-5B3885A05927@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C0F7CCB2-A6E8-4476-9067-9A44DF1A17B3@corp.earthlink.net>
Content-Transfer-Encoding: 7bit
From: "Peter A. Friend" <octavian@corp.earthlink.net>
Subject: Re: newbie question on Mac OS X
Date: Wed, 29 Jun 2005 08:36:38 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-ELNK-Trace: e38a400786bfeea01aa676d7e74259b7b3291a7d08dfec792dc521ffc5f90af4a58028027cdc5423350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 69.235.209.227
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 29, 2005, at 1:12 AM, Xing Li wrote:

>
> 1) Downloaded 1.4.3 src
>
> 2) ran ant... everything builds
>
> 3) $ cd builds
>
> 4) $ java -jar lucene-1.5-rc1-dev.jar
> Failed to load Main-Class manifest attribute from
> lucene-1.5-rc1-dev.jar
>
> I haven't build anything java for almost 5 years so not sure what  
> it means. Did a good search online on the error and it just  
> confused me even further.

Make sure you run "ant dist" so that everything gets built. There are  
demo source files that do basic things like index and search files.  
Add the lucene-demos jar to your classpath, (or specify on your  
command line) then run:

java org.apache.lucene.demo.IndexFiles   <directory containing your  
files to index>

I'd recommend the "Lucene In Action" book, I found it very helpful  
for getting started.

Peter

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 17:28:46 2005
Return-Path: <java-user-return-15217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9261 invoked from network); 29 Jun 2005 17:28:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 17:28:46 -0000
Received: (qmail 85319 invoked by uid 500); 29 Jun 2005 17:28:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85296 invoked by uid 500); 29 Jun 2005 17:28:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85281 invoked by uid 99); 29 Jun 2005 17:28:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 10:28:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.218.78.211] (HELO web40914.mail.yahoo.com) (66.218.78.211)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jun 2005 10:28:41 -0700
Received: (qmail 63791 invoked by uid 60001); 29 Jun 2005 17:28:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Ttgmpnp7EhfWxdGRAVsYA4QE/wTqLm84joFrsJSkw9dgQn3ylL2kC8y/f2jBgQilw8GtiHGA6nqKzMwZBkl/o5kwchQS2y5ZGzGVQy9KeVBMdtDbqKkaOWgpkYROlhMsZlYJGqAPifO+d8VegnBjjFinPcAV2+12cdCPuYei1+c=  ;
Message-ID: <20050629172837.63789.qmail@web40914.mail.yahoo.com>
Received: from [67.170.225.214] by web40914.mail.yahoo.com via HTTP; Wed, 29 Jun 2005 10:28:37 PDT
Date: Wed, 29 Jun 2005 10:28:37 -0700 (PDT)
From: eshwari pss <psseshwari@yahoo.com>
Subject: lucene query
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does Lucene support XML searching? - I mean not
treating the xml file as text file.

thanks,
Eshwari


		
____________________________________________________ 
Yahoo! Sports 
Rekindle the Rivalries. Sign up for Fantasy Football 
http://football.fantasysports.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 17:34:00 2005
Return-Path: <java-user-return-15218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11931 invoked from network); 29 Jun 2005 17:34:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 17:34:00 -0000
Received: (qmail 96203 invoked by uid 500); 29 Jun 2005 17:33:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96119 invoked by uid 500); 29 Jun 2005 17:33:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96058 invoked by uid 99); 29 Jun 2005 17:33:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 10:33:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TAigner@wescodist.com designates 12.29.179.202 as permitted sender)
Received: from [12.29.179.202] (HELO mail01.wescodist.com) (12.29.179.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 10:33:46 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Indexing puncutation
Date: Wed, 29 Jun 2005 13:33:42 -0400
Message-ID: <14FBF41EF1411B45B2EC4ADEAC53D1310350AD8F@MAIL01.wescodist.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing puncutation
Thread-Index: AcV8ugfG0zzysKJAR9i+X7A1ms7h5AAFmFnQ
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the advice.  I have replaced punctuation before the index is
built and then queried on the same lack of punctuation.  I had to create
a separate index for this as well so I have the original information,
but I think I will take your advice and build a custom token to filter
out the punctuation but keep the contents the original.

Tom

-----Original Message-----
From: Ken Krugler [mailto:kkrugler_lists@transpac.com]=20
Sent: Wednesday, June 29, 2005 10:39 AM
To: java-user@lucene.apache.org
Subject: Re: Indexing puncutation

>I do a vaguely similar thing;  I have to strip accents from=20
>characters such as e-acute out of both my input data and my incoming=20
>search queries to put them into a standard form.  I do this with a=20
>custom TokenFilter subclass.  I have an analyzer that includes this=20
>filter along with some of the standard ones (LowercaseFilter, etc).=20
>I run the same analyzer on indexing and searching, which has been=20
>discussed in other posts.

For a hard-core approach to this problem, you could try converting=20
all text to Unicode first, then use the ICU package to create a level=20
0 "sort key" (the C API is col_getSortKey). This will be a string=20
suitable for comparison to determine weak equality, but you can also=20
just index it as a regular token.

There are some subtle issues w/locale-specific behavior of the sort=20
key generation step, where you could guess at the right locale to use=20
for the conversion, but in general that shouldn't matter.

Two other issues are code/data size (ICU can be big) and the=20
performance hit while indexing documents.

-- Ken



>Aigner, Thomas wrote:
>
>>Hello all,
>>
>>	I am VERY new to Lucene and we are trying out Lucene to see if
>>it will accomplish the vast majority of our search functions.
>>
>>	I have a question about a good way to index some of our product
>>description codes.  We have description codes like 21-MA-GAB and other
>>punctuation.  Our users need to be able to search for "21 MA GAB"=20
>>or "21-MA_GAB" or "21MAGAB".  Is the best way to accomplish this by
>>creating synonyms for the 3 different ways when punctuation is in
parts
>>to search for? I know I can stop punctuation in the index but what
about
>>grouping the information together or with spaces?
>>
>>Thanks all in advance,
>>Tom


--=20
Ken Krugler
TransPac Software, Inc.
<http://www.transpac.com>
+1 530-470-9200

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 17:37:49 2005
Return-Path: <java-user-return-15219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13266 invoked from network); 29 Jun 2005 17:37:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 17:37:49 -0000
Received: (qmail 5488 invoked by uid 500); 29 Jun 2005 17:37:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5468 invoked by uid 500); 29 Jun 2005 17:37:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5455 invoked by uid 99); 29 Jun 2005 17:37:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 10:37:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alexs-csl@yandex.ru designates 213.180.200.36 as permitted sender)
Received: from [213.180.200.36] (HELO soapbox.yandex.ru) (213.180.200.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 10:37:44 -0700
Received: from YAMAIL (soapbox.yandex.ru) by mail.yandex.ru
	id <S1156941AbVF2Rha>; Wed, 29 Jun 2005 21:37:30 +0400
Date:	Wed, 29 Jun 2005 21:37:30 +0400 (MSD)
From:	"Sergeev Alexey" <alexs-csl@yandex.ru>
Sender:	alexs-csl@yandex.ru
Message-Id: <42C2DC5A.000004.26645@soapbox.yandex.ru>
MIME-Version: 1.0
X-Mailer: Yamail [ http://yandex.ru ]
Errors-To: alexs-csl@yandex.ru
To:	java-user@lucene.apache.org
Subject: Index comparison
Reply-To: alexs-csl@yandex.ru
X-Source-Ip: 81.25.37.117
Content-Type: text/plain;
  charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am building the same index using different ways:
1) Whole index at once;
2) Step by step and then merging all parts together;

When I compare index files I see that they have different sizes, that's why I'm not sure whether indexes has the same content or I've made any mistake in my index building logic or not.

So, the questions are: 
- Should the both indexes be equal (the same file amount and sizes)?
- Does anyone know the best way how to compare content of two indexs for equality? (may be already existed tool or only manual checking of all documents, terms and so on using Lucene api)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 17:53:48 2005
Return-Path: <java-user-return-15220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18454 invoked from network); 29 Jun 2005 17:53:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 17:53:48 -0000
Received: (qmail 33244 invoked by uid 500); 29 Jun 2005 17:53:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33222 invoked by uid 500); 29 Jun 2005 17:53:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33209 invoked by uid 99); 29 Jun 2005 17:53:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 10:53:40 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.198 as permitted sender)
Received: from [64.233.170.198] (HELO rproxy.gmail.com) (64.233.170.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 10:53:42 -0700
Received: by rproxy.gmail.com with SMTP id 1so35042rny
        for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 10:53:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ZQcLrOJDJn1YxgMbYYmUgNpyU71cYPnmfeBqEednisWoiyIC4jvvYv5ZDeh7sUC2uc6UBtkBtdWGUR9wBRrnkTbiWVqe1V8CuGqdUwbl6g0zWy4uJGeeByWuSdIH/xr6ieKsCXl8meiI2nMjn6jxs3oa5obzJCltGHQV9w71Pu0=
Received: by 10.38.8.23 with SMTP id 23mr20310rnh;
        Wed, 29 Jun 2005 10:53:39 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Wed, 29 Jun 2005 10:53:38 -0700 (PDT)
Message-ID: <7ca1239105062910536617626@mail.gmail.com>
Date: Wed, 29 Jun 2005 10:53:38 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design question [too many fields?]
In-Reply-To: <AD48ECAA-83ED-49B3-945D-E7B4118451E3@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20050629135856.83265.qmail@web26004.mail.ukl.yahoo.com>
	 <AD48ECAA-83ED-49B3-945D-E7B4118451E3@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, Naimdjon,

I have some suggestions as well along the lines of Mark Harwood.=20

As an example, suppose for each hotel room there is a description, and
you want the user to  do free text search on the description field.
You could do the following:

1) store hotel room reservation info as rows in a relational database
create table reservation (
id int,
room_no int,
reservation_start_date timestamp,
reservation_end_date timestamp,
primary key (id)
)

2) store description for each hotel room in Lucene index with two
fields, i.e., room_no, description

3) provide the user with free text search in room description as well
as availability info like the following:
--do full text search on description using the Lucene index
--get the room numbers from the search result documents
--using these room numbers, look up in the reservation table to see if
the user specified start date and end date is not already reserved.
--The top serveral rooms that are high on the free text search result
and also not reserved will be returned to the user

How does this sound?

Jian

On 6/29/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> I second Mark's suggestion over the alternative I posted.  My
> alternative was merely to invert the field structure originally
> described, but using a Filter for the volatile information is wiser.
>=20
>      Erik
>=20
> On Jun 29, 2005, at 9:58 AM, mark harwood wrote:
>=20
> > Presumably there is also a free-text element to the
> > search or you wouldn't be using Lucene.
> >
> > Multiple fields is not the way to go.
> > A single Lucene field could contain multiple terms (
> > the available dates) but I still don't think that's
> > the best solution.
> > The availability info is likely to be pretty volatile
> > and you always want up-to-date info so I would prefer
> > to hit a database for this. If you keep a DB primary
> > key to Lucene doc id look-up cached in memory you can
> > quickly construct a Lucene filter from the database
> > results and therefore only show Lucene results for
> > available rooms.
> >
> > Cheers
> > Mark
> >
> >
> >
> > ___________________________________________________________
> > How much free photo storage do you get? Store your holiday
> > snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 18:29:08 2005
Return-Path: <java-user-return-15221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31303 invoked from network); 29 Jun 2005 18:29:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 18:29:08 -0000
Received: (qmail 9635 invoked by uid 500); 29 Jun 2005 18:29:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9613 invoked by uid 500); 29 Jun 2005 18:29:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9599 invoked by uid 99); 29 Jun 2005 18:29:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 11:29:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 11:29:03 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 564CE13E2006; Wed, 29 Jun 2005 14:28:55 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 1651713E2005
	for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 14:28:38 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050629172837.63789.qmail@web40914.mail.yahoo.com>
References: <20050629172837.63789.qmail@web40914.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3440EA95-D9BC-41BD-897E-16D52C254D13@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: lucene query
Date: Wed, 29 Jun 2005 13:54:26 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 29, 2005, at 1:28 PM, eshwari pss wrote:
> Does Lucene support XML searching? - I mean not
> treating the xml file as text file.

The short answer is yes.  http://www.lucenebook.com/search?query=xml

The longer response is more involved - what are your needs?

I built a search engine for the Rossetti Archive.  All of the data  
originated in XML files that I read with JDOM and indexed in some  
sophisticated ways.  The main search page is here (showing a bit of  
the structural information that was indexed):

     http://www.rossettiarchive.org/rose

Here is an example search result: http://www.rossettiarchive.org/ 
rose/?query=%2Bblessed+%2Bdamozel

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 18:34:04 2005
Return-Path: <java-user-return-15222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32360 invoked from network); 29 Jun 2005 18:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 18:34:04 -0000
Received: (qmail 16045 invoked by uid 500); 29 Jun 2005 18:33:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16013 invoked by uid 500); 29 Jun 2005 18:33:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15968 invoked by uid 99); 29 Jun 2005 18:33:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 11:33:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.228.50] (HELO web50511.mail.yahoo.com) (68.142.228.50)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jun 2005 11:33:58 -0700
Received: (qmail 15621 invoked by uid 60001); 29 Jun 2005 18:33:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=XkYwk0C8Bk6sNOU+BcdyMPNlpYaUSw9B9x0uN5zbUZe20BQIhUqr8kASFeJ2RYXhlU0fQUlQOoKm9nR3w2hYQrK09kOvvyjwP+gvRXctMHyVtRGOo2jVD6huEIzBdeVkFuG3kYZKLtLkv/rlQ7TGCrervv4Hnza2x/5zPv7pMZE=  ;
Message-ID: <20050629183354.15616.qmail@web50511.mail.yahoo.com>
Received: from [85.165.57.81] by web50511.mail.yahoo.com via HTTP; Wed, 29 Jun 2005 20:33:54 CEST
Date: Wed, 29 Jun 2005 20:33:54 +0200 (CEST)
From: Naimdjon Takhirov <tnaim1@yahoo.com>
Subject: Vedr. Re: Design question [too many fields?]
To: java-user@lucene.apache.org, jian chen <chenjian1227@gmail.com>
In-Reply-To: <7ca1239105062910536617626@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Jian,

Thanks for your inputs. The (DB) datamodel is quite
complex with rooms and room units (I skipped it to
make the case easier to understand), so I guess the
easiest and actually best way to do it is with the
filter.

Mark: yes, there are a lot of text fields the user
should be able to search amoung other fields(like
facilities etc.).

The final question here: Should I use the QueryFilter
with query which contains roomId's and filter
documents by that those roomId's that are
available(for the selected dates)? Or create a filter
which extends the Filter class and returns Bits of
documents to be searched, in this case the filtering
should be done manually document by document. Not sure
which solution would show best performance? What do
you guys think?

Anyways, I am thankfull to Mark, Erik and Jian for
inputs.

Naimdjon




--- jian chen <chenjian1227@gmail.com> skrev:

> Hi, Naimdjon,
> 
> I have some suggestions as well along the lines of
> Mark Harwood. 
> 
> As an example, suppose for each hotel room there is
> a description, and
> you want the user to  do free text search on the
> description field.
> You could do the following:
> 
> 1) store hotel room reservation info as rows in a
> relational database
> create table reservation (
> id int,
> room_no int,
> reservation_start_date timestamp,
> reservation_end_date timestamp,
> primary key (id)
> )
> 
> 2) store description for each hotel room in Lucene
> index with two
> fields, i.e., room_no, description
> 
> 3) provide the user with free text search in room
> description as well
> as availability info like the following:
> --do full text search on description using the
> Lucene index
> --get the room numbers from the search result
> documents
> --using these room numbers, look up in the
> reservation table to see if
> the user specified start date and end date is not
> already reserved.
> --The top serveral rooms that are high on the free
> text search result
> and also not reserved will be returned to the user
> 
> How does this sound?
> 
> Jian
> 
> On 6/29/05, Erik Hatcher
> <erik@ehatchersolutions.com> wrote:
> > I second Mark's suggestion over the alternative I
> posted.  My
> > alternative was merely to invert the field
> structure originally
> > described, but using a Filter for the volatile
> information is wiser.
> > 
> >      Erik
> > 
> > On Jun 29, 2005, at 9:58 AM, mark harwood wrote:
> > 
> > > Presumably there is also a free-text element to
> the
> > > search or you wouldn't be using Lucene.
> > >
> > > Multiple fields is not the way to go.
> > > A single Lucene field could contain multiple
> terms (
> > > the available dates) but I still don't think
> that's
> > > the best solution.
> > > The availability info is likely to be pretty
> volatile
> > > and you always want up-to-date info so I would
> prefer
> > > to hit a database for this. If you keep a DB
> primary
> > > key to Lucene doc id look-up cached in memory
> you can
> > > quickly construct a Lucene filter from the
> database
> > > results and therefore only show Lucene results
> for
> > > available rooms.
> > >
> > > Cheers
> > > Mark
> > >
> > >
> > >
> > >
>
___________________________________________________________
> > > How much free photo storage do you get? Store
> your holiday
> > > snaps for FREE with Yahoo! Photos
> http://uk.photos.yahoo.com
> > >
> > >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > >
> > 
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > 
> >
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 18:48:28 2005
Return-Path: <java-user-return-15223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37922 invoked from network); 29 Jun 2005 18:48:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 18:48:28 -0000
Received: (qmail 41729 invoked by uid 500); 29 Jun 2005 18:48:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41702 invoked by uid 500); 29 Jun 2005 18:48:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41689 invoked by uid 99); 29 Jun 2005 18:48:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 11:48:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 11:48:24 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 203895B776; Wed, 29 Jun 2005 11:48:19 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1DAC27F45C
	for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 11:48:19 -0700 (PDT)
Date: Wed, 29 Jun 2005 11:48:19 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: RE: Indexing puncutation
In-Reply-To: <14FBF41EF1411B45B2EC4ADEAC53D1310350AD8F@MAIL01.wescodist.com>
Message-ID: <Pine.LNX.4.58.0506291146300.25246@hal.rescomp.berkeley.edu>
References: <14FBF41EF1411B45B2EC4ADEAC53D1310350AD8F@MAIL01.wescodist.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



keep in mind, you can "store" the raw field for display purposes and
"index" many different token sequences that represent the same orriginal
data parsed in several ways -- all using the same field name.


: Date: Wed, 29 Jun 2005 13:33:42 -0400
: From: "Aigner, Thomas" <TAigner@WescoDist.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: RE: Indexing puncutation
:
: Thanks for the advice.  I have replaced punctuation before the index is
: built and then queried on the same lack of punctuation.  I had to create
: a separate index for this as well so I have the original information,
: but I think I will take your advice and build a custom token to filter
: out the punctuation but keep the contents the original.
:
: Tom
:
: -----Original Message-----
: From: Ken Krugler [mailto:kkrugler_lists@transpac.com]
: Sent: Wednesday, June 29, 2005 10:39 AM
: To: java-user@lucene.apache.org
: Subject: Re: Indexing puncutation
:
: >I do a vaguely similar thing;  I have to strip accents from
: >characters such as e-acute out of both my input data and my incoming
: >search queries to put them into a standard form.  I do this with a
: >custom TokenFilter subclass.  I have an analyzer that includes this
: >filter along with some of the standard ones (LowercaseFilter, etc).
: >I run the same analyzer on indexing and searching, which has been
: >discussed in other posts.
:
: For a hard-core approach to this problem, you could try converting
: all text to Unicode first, then use the ICU package to create a level
: 0 "sort key" (the C API is col_getSortKey). This will be a string
: suitable for comparison to determine weak equality, but you can also
: just index it as a regular token.
:
: There are some subtle issues w/locale-specific behavior of the sort
: key generation step, where you could guess at the right locale to use
: for the conversion, but in general that shouldn't matter.
:
: Two other issues are code/data size (ICU can be big) and the
: performance hit while indexing documents.
:
: -- Ken
:
:
:
: >Aigner, Thomas wrote:
: >
: >>Hello all,
: >>
: >>	I am VERY new to Lucene and we are trying out Lucene to see if
: >>it will accomplish the vast majority of our search functions.
: >>
: >>	I have a question about a good way to index some of our product
: >>description codes.  We have description codes like 21-MA-GAB and other
: >>punctuation.  Our users need to be able to search for "21 MA GAB"
: >>or "21-MA_GAB" or "21MAGAB".  Is the best way to accomplish this by
: >>creating synonyms for the 3 different ways when punctuation is in
: parts
: >>to search for? I know I can stop punctuation in the index but what
: about
: >>grouping the information together or with spaces?
: >>
: >>Thanks all in advance,
: >>Tom
:
:
: --
: Ken Krugler
: TransPac Software, Inc.
: <http://www.transpac.com>
: +1 530-470-9200
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 19:15:42 2005
Return-Path: <java-user-return-15224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56175 invoked from network); 29 Jun 2005 19:15:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 19:15:42 -0000
Received: (qmail 79515 invoked by uid 500); 29 Jun 2005 19:15:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79495 invoked by uid 500); 29 Jun 2005 19:15:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79479 invoked by uid 99); 29 Jun 2005 19:15:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 12:15:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.11.32] (HELO smtp001.mail.ukl.yahoo.com) (217.12.11.32)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jun 2005 12:15:36 -0700
Received: (qmail 2334 invoked from network); 29 Jun 2005 19:15:32 -0000
Received: from unknown (HELO ?10.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp001.mail.ukl.yahoo.com with SMTP; 29 Jun 2005 19:15:31 -0000
Message-ID: <42C2F362.3080704@yahoo.co.uk>
Date: Wed, 29 Jun 2005 20:15:46 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Vedr. Re: Design question [too many fields?]
References: <20050629183354.15616.qmail@web50511.mail.yahoo.com>
In-Reply-To: <20050629183354.15616.qmail@web50511.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I suspect the most performant is as follows (but could require bags of 
RAM) :
Heres the pseudo code .....

[on IndexReader open, initialize map]
int []luceneDocIdsByDbKey=new int [largestDbKey]; //could be large array!
for (int i=0;i;<reader.maxDocs;i++)
{
    int dbKey=Integer.parseInt(reader.doc(i).get("dbKey"));
    luceneDocIdsByDbKey[dbKey]=i;
}

[on search, use map]
results=dbConn.executeQuery(select dbKey from db where ........)
BitSet bits=new BitSet(reader.maxDocs);
for( all dbKey in resultset)
{
    bits.set(luceneDocIdsByDbKey[dbKey];
}
MyBitSetFilter filter=new MyBitSetFilter(bits);

Should be super-quick but requires (int size* num db records) memory for 
the map.


Cheers
Mark

	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 20:30:57 2005
Return-Path: <java-user-return-15225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91698 invoked from network); 29 Jun 2005 20:30:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 20:30:57 -0000
Received: (qmail 28753 invoked by uid 500); 29 Jun 2005 20:30:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28715 invoked by uid 500); 29 Jun 2005 20:30:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28702 invoked by uid 99); 29 Jun 2005 20:30:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 13:30:49 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.148.252.101] (HELO w10.bloglines.com) (216.148.252.101)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jun 2005 13:30:52 -0700
Received: (qmail 10552 invoked by uid 99); 29 Jun 2005 20:30:49 -0000
Message-ID: <1120077049.3068134216.10551.sendItem@bloglines.com>
Date: 29 Jun 2005 20:30:49 -0000
From: yahootintin.11533894@bloglines.com
To: java-user@lucene.apache.org
Subject: Strategy for making short documents not bubble to the top?
MIME-Version: 1.0
Content-Type: text/plain;charset="utf-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Short documents bubble to the top of the results because the field
length is short.  Does anyone have a good strategy for working around this?
 Will doing something like log(document length) flatten out my results while
still making them meaningful?  I'm going to try some different approaches
but any advice is appreciated.

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 20:40:02 2005
Return-Path: <java-user-return-15226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94129 invoked from network); 29 Jun 2005 20:40:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 20:40:02 -0000
Received: (qmail 47483 invoked by uid 500); 29 Jun 2005 20:39:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47464 invoked by uid 500); 29 Jun 2005 20:39:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47451 invoked by uid 99); 29 Jun 2005 20:39:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 13:39:55 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.192 as permitted sender)
Received: from [64.233.170.192] (HELO rproxy.gmail.com) (64.233.170.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 13:39:58 -0700
Received: by rproxy.gmail.com with SMTP id 1so1350rny
        for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 13:39:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=J4IIior56N30qCqaTRkrieQuBZFTa4kmL+MJI8aDdRobCrwkC/4K8s0r0tGx1WoSfR7nDAfa99b7vnBzoyYpLc4TUuT48d8Jyc0Msl1+Pfd2Qd7jWxbgYAI1T/Vd5KAu0+nAw9Bbtj75ojfE74ZiTjAqmiBmTicMR1ZHQTNUZJw=
Received: by 10.38.198.5 with SMTP id v5mr23823rnf;
        Wed, 29 Jun 2005 13:39:54 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Wed, 29 Jun 2005 13:39:54 -0700 (PDT)
Message-ID: <7ca123910506291339373f68a7@mail.gmail.com>
Date: Wed, 29 Jun 2005 13:39:54 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Strategy for making short documents not bubble to the top?
In-Reply-To: <1120077049.3068134216.10551.sendItem@bloglines.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <1120077049.3068134216.10551.sendItem@bloglines.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I would use pure span or cover density based ranking algorithm which
do not take document length into consideration. (tweaking whatever
currently in the standard Lucene distribution?)

For example, searching for the keywords "beautiful house", span/cover
ranking will treat a long document and a short document the same
ranking as long as they have the same number of spans/covers (for
example, "beautiful xxxxxx house" is one cover), and with each
span/cover, the editing distance between the keywords is the same.

Just my 2 cents,=20

Cheers,

Jian

On 29 Jun 2005 20:30:49 -0000, yahootintin.11533894@bloglines.com
<yahootintin.11533894@bloglines.com> wrote:
> Hi,
>=20
> Short documents bubble to the top of the results because the field
> length is short.  Does anyone have a good strategy for working around thi=
s?
>  Will doing something like log(document length) flatten out my results wh=
ile
> still making them meaningful?  I'm going to try some different approaches
> but any advice is appreciated.
>=20
> Thanks.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 20:54:53 2005
Return-Path: <java-user-return-15227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 164 invoked from network); 29 Jun 2005 20:54:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 20:54:53 -0000
Received: (qmail 78619 invoked by uid 500); 29 Jun 2005 20:54:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78593 invoked by uid 500); 29 Jun 2005 20:54:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78580 invoked by uid 99); 29 Jun 2005 20:54:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 13:54:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.152.184.150] (HELO lists.vasoftware.com) (12.152.184.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 13:54:49 -0700
Received: from netblock-66-159-223-11.dslextreme.com ([66.159.223.11]:56690 helo=[192.168.1.74])
	by lists.vasoftware.com with asmtp 
	(Cipher TLSv1:RC4-SHA:128) (Exim 4.20 #1 (Debian))
	id 1DnjZV-00063o-S9 by VAauthid <cconrad> with fixed_plain
	for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 13:54:13 -0700
Mime-Version: 1.0 (Apple Message framework v730)
Content-Transfer-Encoding: 7bit
Message-Id: <B2C6C2CE-EB47-480D-9BE3-E444938D5B64@vasoftware.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Chris Conrad <cconrad@vasoftware.com>
Subject: SF.net search system
Date: Wed, 29 Jun 2005 13:54:12 -0700
X-Mailer: Apple Mail (2.730)
X-EA-Verified: lists.vasoftware.com 1DnjZV-00063o-S9 eb57c9e0d54cdad08d45fb77821a9bbd
X-Spam-Score: -97.0 (---------------------------------------------------)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I know I've been asked before for a description of how  
SourceForge.net is using Lucene.  I wrote a blog entry about it and  
thought people might be interested in seeing at a high level how it  
was designed.  Take a look at http://blog.dev.sf.net.  Any comments  
are welcome.

--Chris Conrad
SourceForge.net Engineer


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 20:56:27 2005
Return-Path: <java-user-return-15228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1111 invoked from network); 29 Jun 2005 20:56:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 20:56:27 -0000
Received: (qmail 85396 invoked by uid 500); 29 Jun 2005 20:56:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85375 invoked by uid 500); 29 Jun 2005 20:56:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 71143 invoked by uid 99); 29 Jun 2005 20:52:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Reply-To: <lokesh@accelovation.com>
From: "Lokesh Bajaj" <lokesh@accelovation.com>
To: <java-user@lucene.apache.org>
Subject: RE: issues building a large index
Date: Wed, 29 Jun 2005 13:52:12 -0700
Message-ID: <000e01c57cec$6f950390$0700a8c0@Lokesh>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <20050627170818.16658.qmail@web31113.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


We ran into some disk issues that have delayed my testing. We are not
sure, but it might also have been causing the problem that we saw when
running the large Lucene merges. I will send out another note once our
disk problems are fixed.
Lokesh

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Monday, June 27, 2005 10:08 AM
To: java-user@lucene.apache.org
Subject: Re: issues building a large index


Hi,

Perhaps using hprof with cpu=samples may reveal more information about
what CPU is doing.  I think this is a valid use case.

Otis


--- Lokesh Bajaj <lokesh_bajaj@yahoo.com> wrote:

> Thanks for the idea. I have tried with both 512m and 1024m with the 
> same results. I also turned on verbose gc logging. Once I see this 
> slowdown, the gc is running only once every 12 minutes or so and 
> finishes in less than 0.005 seconds.
>  
> Its basically stuck at 100% cpu usage, but doesn't seem to be doing 
> anything useful. Lokesh
>  
> 
> 
> Daniel Naber <lucenelist@danielnaber.de> wrote:
> On Saturday 25 June 2005 02:10, Lokesh Bajaj wrote:
> 
> > 3] Does this seem like a JVM issue? Since its always pointing to a 
> > native method, I am not really sure what to look for or debug.
> 
> Does you JVM have enough heap (e.g. -Xmx500M)? Java gets slow if it's 
> busy with garbage collection.
> 
> Regards
> Daniel



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 22:39:14 2005
Return-Path: <java-user-return-15229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48290 invoked from network); 29 Jun 2005 22:39:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 22:39:14 -0000
Received: (qmail 87451 invoked by uid 500); 29 Jun 2005 22:39:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87427 invoked by uid 500); 29 Jun 2005 22:39:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87414 invoked by uid 99); 29 Jun 2005 22:39:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 15:39:07 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.148.252.100] (HELO w09.bloglines.com) (216.148.252.100)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jun 2005 15:39:09 -0700
Received: (qmail 1145 invoked by uid 99); 29 Jun 2005 22:39:06 -0000
Message-ID: <1120084746.2484842205.1143.sendItem@bloglines.com>
Date: 29 Jun 2005 22:39:06 -0000
From: yahootintin.11533894@bloglines.com
To: java-user@lucene.apache.org
Subject: Re: Strategy for making short documents not bubble to the top?
MIME-Version: 1.0
Content-Type: text/plain;charset="utf-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Jian,

Thanks for the reply.  The problem with that is it completely
ignores document length.  A book that mentions "frog" 5 times in its 2,000
pages should be less relevant than a book that mentions "frog" 4 times in
its 4 pages.

I really want to lower the document length weight instead
of removing it completely.  Any ideas how to do that?

Thanks.

--- java-user@lucene.apache.org
wrote:
Hi,
> 
> I would use pure span or cover density based ranking algorithm
which
> do not take document length into consideration. (tweaking whatever

> currently in the standard Lucene distribution?)
> 
> For example, searching
for the keywords "beautiful house", span/cover
> ranking will treat a long
document and a short document the same
> ranking as long as they have the
same number of spans/covers (for
> example, "beautiful xxxxxx house" is one
cover), and with each
> span/cover, the editing distance between the keywords
is the same.
> 
> Just my 2 cents, 
> 
> Cheers,
> 
> Jian
> 
> On
29 Jun 2005 20:30:49 -0000, yahootintin.11533894@bloglines.com
> <yahootintin.11533894@bloglines.com>
wrote:
> > Hi,
> > 
> > Short documents bubble to the top of the results
because the field
> > length is short.  Does anyone have a good strategy
for working around this?
> >  Will doing something like log(document length)
flatten out my results while
> > still making them meaningful?  I'm going
to try some different approaches
> > but any advice is appreciated.
> >

> > Thanks.
> > 
> > ---------------------------------------------------------------------

> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >
For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
>
>
> 
> ---------------------------------------------------------------------

> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For
additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 23:25:35 2005
Return-Path: <java-user-return-15230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56410 invoked from network); 29 Jun 2005 23:25:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 23:25:35 -0000
Received: (qmail 39434 invoked by uid 500); 29 Jun 2005 23:25:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39190 invoked by uid 500); 29 Jun 2005 23:25:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39176 invoked by uid 99); 29 Jun 2005 23:25:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 16:25:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 16:25:31 -0700
Received: (qmail 22062 invoked by uid 532); 29 Jun 2005 23:21:29 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 3.0.2.  Clear:. 
 Processed in 0.034667 secs); 29 Jun 2005 23:21:29 -0000
Received: from unknown (HELO ?172.31.1.2?) (127.0.0.1)
  by 0 with SMTP; 29 Jun 2005 23:21:28 -0000
Message-ID: <42C32DDE.3060703@tropo.com>
Date: Wed, 29 Jun 2005 16:25:18 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041217
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
CC:  cconrad@vasoftware.com
Subject: Re: SF.net search system
References: <B2C6C2CE-EB47-480D-9BE3-E444938D5B64@vasoftware.com>
In-Reply-To: <B2C6C2CE-EB47-480D-9BE3-E444938D5B64@vasoftware.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Conrad wrote:
> I know I've been asked before for a description of how  SourceForge.net 
> is using Lucene.  I wrote a blog entry about it and  thought people 
> might be interested in seeing at a high level how it  was designed.  
> Take a look at http://blog.dev.sf.net.  Any comments  are welcome.

Thanks for the writeup and nice to see that you guys are using Lucene.

It would be interesting to know what Analyzer you're using, and as your 
blog entry says you're having some wierd problem, well, I suspect the 
most common source of strange Lucene behavior is that the "wrong" 
Analyzer is used.

Also, out of curiosity: what's the peak load the search system gets?

thx,
  Dave

> 
> --Chris Conrad
> SourceForge.net Engineer
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 23:37:59 2005
Return-Path: <java-user-return-15231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59477 invoked from network); 29 Jun 2005 23:37:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 23:37:59 -0000
Received: (qmail 52068 invoked by uid 500); 29 Jun 2005 23:37:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52048 invoked by uid 500); 29 Jun 2005 23:37:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52035 invoked by uid 99); 29 Jun 2005 23:37:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 16:37:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.199 as permitted sender)
Received: from [64.233.184.199] (HELO wproxy.gmail.com) (64.233.184.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 16:37:55 -0700
Received: by wproxy.gmail.com with SMTP id 71so7001wri
        for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 16:37:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=O98WFxrqmRmXtVSdw64ENtNiO4syIgEVNhAWuhsM7wsovjOdIErA38F0bCymGSLFAuz9p2+gNnEEtoHEqGsJnkOp41oLAvD1nAqyYE+dXoFud04/XFZQvYB0rOqZ8Id71Sg6rELnSdBKJpZMPO2kVgKlwKmNifyfqjIamCFJ8s4=
Received: by 10.54.26.45 with SMTP id 45mr64282wrz;
        Wed, 29 Jun 2005 16:37:51 -0700 (PDT)
Received: by 10.54.24.60 with HTTP; Wed, 29 Jun 2005 16:37:51 -0700 (PDT)
Message-ID: <6e3ae631050629163723ff1e76@mail.gmail.com>
Date: Wed, 29 Jun 2005 16:37:51 -0700
From: Chris Lu <chris.lu@gmail.com>
Reply-To: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: SF.net search system
In-Reply-To: <42C32DDE.3060703@tropo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <B2C6C2CE-EB47-480D-9BE3-E444938D5B64@vasoftware.com>
	 <42C32DDE.3060703@tropo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How is your crawler is done?
I saw SF.net searches several types of documents, like "People",
"Freshmeet.net", "Site Doc". Are they all from database?

A little bit marketing here:
I am working on an off-the-shelf product called DBSight. It's
basically Database+Lucene+Query Display. It can do most of the things
you mentioned(no offense to your great work). And it is scalable to
enterprise level database. Basically it can be attached to any
database and create a search engine rapidly.

It can even support subscriber(s)+publisher mode. So instead of a
powerful machine, you can use several ordinary computer to create a
search farm.

Configurations, inlucding Analyzers, are configurable through web UI.

check out this demo:
http://search.dbsight.com

Chris Lu

On 6/29/05, David Spencer <dave-lucene-user@tropo.com> wrote:
> Chris Conrad wrote:
> > I know I've been asked before for a description of how  SourceForge.net
> > is using Lucene.  I wrote a blog entry about it and  thought people
> > might be interested in seeing at a high level how it  was designed.
> > Take a look at http://blog.dev.sf.net.  Any comments  are welcome.
>=20
> Thanks for the writeup and nice to see that you guys are using Lucene.
>=20
> It would be interesting to know what Analyzer you're using, and as your
> blog entry says you're having some wierd problem, well, I suspect the
> most common source of strange Lucene behavior is that the "wrong"
> Analyzer is used.
>=20
> Also, out of curiosity: what's the peak load the search system gets?
>=20
> thx,
>   Dave
>=20
> >
> > --Chris Conrad
> > SourceForge.net Engineer
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 29 23:47:11 2005
Return-Path: <java-user-return-15232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60831 invoked from network); 29 Jun 2005 23:47:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jun 2005 23:47:11 -0000
Received: (qmail 61079 invoked by uid 500); 29 Jun 2005 23:47:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60949 invoked by uid 500); 29 Jun 2005 23:47:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60936 invoked by uid 99); 29 Jun 2005 23:47:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 16:47:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 16:47:07 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 31D605B77C; Wed, 29 Jun 2005 16:47:03 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2867C7F45E
	for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 16:47:03 -0700 (PDT)
Date: Wed, 29 Jun 2005 16:47:03 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Strategy for making short documents not bubble to the top?
In-Reply-To: <1120084746.2484842205.1143.sendItem@bloglines.com>
Message-ID: <Pine.LNX.4.58.0506291643460.20887@hal.rescomp.berkeley.edu>
References: <1120084746.2484842205.1143.sendItem@bloglines.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I beleve what you want to do is write your own custom Scorer class, and
override lengthNorm.

I've never done this myself, but i'm basing this guess on previous
discussions i've seen regarding this method...

http://www.google.com/search?q=lengthNorm+site%3Amail-archive.com+lucene

: Date: 29 Jun 2005 22:39:06 -0000
: From: yahootintin.11533894@bloglines.com
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Re: Strategy for making short documents not bubble to the top?
:
: Hi Jian,
:
: Thanks for the reply.  The problem with that is it completely
: ignores document length.  A book that mentions "frog" 5 times in its 2,000
: pages should be less relevant than a book that mentions "frog" 4 times in
: its 4 pages.
:
: I really want to lower the document length weight instead
: of removing it completely.  Any ideas how to do that?
:
: Thanks.
:
: --- java-user@lucene.apache.org
: wrote:
: Hi,
: >
: > I would use pure span or cover density based ranking algorithm
: which
: > do not take document length into consideration. (tweaking whatever
:
: > currently in the standard Lucene distribution?)
: >
: > For example, searching
: for the keywords "beautiful house", span/cover
: > ranking will treat a long
: document and a short document the same
: > ranking as long as they have the
: same number of spans/covers (for
: > example, "beautiful xxxxxx house" is one
: cover), and with each
: > span/cover, the editing distance between the keywords
: is the same.
: >
: > Just my 2 cents,
: >
: > Cheers,
: >
: > Jian
: >
: > On
: 29 Jun 2005 20:30:49 -0000, yahootintin.11533894@bloglines.com
: > <yahootintin.11533894@bloglines.com>
: wrote:
: > > Hi,
: > >
: > > Short documents bubble to the top of the results
: because the field
: > > length is short.  Does anyone have a good strategy
: for working around this?
: > >  Will doing something like log(document length)
: flatten out my results while
: > > still making them meaningful?  I'm going
: to try some different approaches
: > > but any advice is appreciated.
: > >
:
: > > Thanks.
: > >
: > > ---------------------------------------------------------------------
:
: > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > >
: For additional commands, e-mail: java-user-help@lucene.apache.org
: > >
: >
: >
: >
: > ---------------------------------------------------------------------
:
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For
: additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 00:00:55 2005
Return-Path: <java-user-return-15233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63997 invoked from network); 30 Jun 2005 00:00:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 00:00:55 -0000
Received: (qmail 74754 invoked by uid 500); 30 Jun 2005 00:00:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74640 invoked by uid 500); 30 Jun 2005 00:00:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74627 invoked by uid 99); 30 Jun 2005 00:00:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 17:00:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 17:00:51 -0700
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j5U015j01038
	for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 19:01:05 -0500
Message-ID: <42C3362D.2030700@getopt.org>
Date: Thu, 30 Jun 2005 02:00:45 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Strategy for making short documents not bubble to the top?
References: <1120084746.2484842205.1143.sendItem@bloglines.com> <Pine.LNX.4.58.0506291643460.20887@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0506291643460.20887@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Hostetter wrote:
> I beleve what you want to do is write your own custom Scorer class, and
> override lengthNorm.
> 
> I've never done this myself, but i'm basing this guess on previous
> discussions i've seen regarding this method...
> 
> http://www.google.com/search?q=lengthNorm+site%3Amail-archive.com+lucene

Actually, you can do it with custom Similarity class. You can test this 
in Luke (http://www.getopt.org/luke), in the CustomSimilarity plugin 
(note: you have to run a local copy, not Java WebStart).


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 00:55:12 2005
Return-Path: <java-user-return-15234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84133 invoked from network); 30 Jun 2005 00:55:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 00:55:12 -0000
Received: (qmail 28643 invoked by uid 500); 30 Jun 2005 00:55:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28579 invoked by uid 500); 30 Jun 2005 00:55:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28559 invoked by uid 99); 30 Jun 2005 00:55:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 17:55:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.218.78.199] (HELO web40902.mail.yahoo.com) (66.218.78.199)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jun 2005 17:55:03 -0700
Received: (qmail 3061 invoked by uid 60001); 30 Jun 2005 00:54:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=vRTuprUFgdQquvw4KCznUlsz4LaJXJz5NNihkcBUJq5I88NxVCMgB4KesxtNTZhRq0NVHBKjMOD4lraUElyMBMXvwyVInET8DhDrbgQyhC4A0txto3JtKTYd7TXzU0w2JQeLaEdXEq+T4uLCoWUQiWP8pASD4pcGbLplvMEPQp4=  ;
Message-ID: <20050630005459.3059.qmail@web40902.mail.yahoo.com>
Received: from [130.65.159.252] by web40902.mail.yahoo.com via HTTP; Wed, 29 Jun 2005 17:54:59 PDT
Date: Wed, 29 Jun 2005 17:54:59 -0700 (PDT)
From: eshwari pss <psseshwari@yahoo.com>
Subject: Re: lucene query
To: java-user@lucene.apache.org
In-Reply-To: <3440EA95-D9BC-41BD-897E-16D52C254D13@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the reply.

-Eshwari

--- Erik Hatcher <erik@ehatchersolutions.com> wrote:

> 
> On Jun 29, 2005, at 1:28 PM, eshwari pss wrote:
> > Does Lucene support XML searching? - I mean not
> > treating the xml file as text file.
> 
> The short answer is yes. 
> http://www.lucenebook.com/search?query=xml
> 
> The longer response is more involved - what are your
> needs?
> 
> I built a search engine for the Rossetti Archive. 
> All of the data  
> originated in XML files that I read with JDOM and
> indexed in some  
> sophisticated ways.  The main search page is here
> (showing a bit of  
> the structural information that was indexed):
> 
>      http://www.rossettiarchive.org/rose
> 
> Here is an example search result:
> http://www.rossettiarchive.org/ 
> rose/?query=%2Bblessed+%2Bdamozel
> 
>      Erik
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



		
____________________________________________________ 
Yahoo! Sports 
Rekindle the Rivalries. Sign up for Fantasy Football 
http://football.fantasysports.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 04:07:21 2005
Return-Path: <java-user-return-15235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61765 invoked from network); 30 Jun 2005 04:07:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 04:07:19 -0000
Received: (qmail 20089 invoked by uid 500); 30 Jun 2005 04:07:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19958 invoked by uid 500); 30 Jun 2005 04:07:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19843 invoked by uid 99); 30 Jun 2005 04:07:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 21:07:06 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.225] (HELO web31208.mail.mud.yahoo.com) (68.142.200.225)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jun 2005 21:07:08 -0700
Received: (qmail 2000 invoked by uid 60001); 30 Jun 2005 04:07:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=CHBLwXQQoFCX1yIDzbusnNTsrk/bT6+GcOJHJRjb0gVkH9MMNyFilpFV57Ydk40zSo2aBefuHp89EdR/ONXj7GFn2cSoveO+lmH+mIe4Hy3r/wMlWEOEPi944D29e9A63UABBXpeOZVv0Tuspxz0sj8Iv8Y3CLiH3Di4FCC4Dcs=  ;
Message-ID: <20050630040704.1998.qmail@web31208.mail.mud.yahoo.com>
Received: from [209.128.105.41] by web31208.mail.mud.yahoo.com via HTTP; Wed, 29 Jun 2005 21:07:04 PDT
Date: Wed, 29 Jun 2005 21:07:04 -0700 (PDT)
From: bib_lucene bib <bib_lucene@yahoo.com>
Subject: No.of Files in Directory
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1901672754-1120104424=:99156"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1901672754-1120104424=:99156
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi All
 
In my webapp i have people uploading their documents. My server is windows/tomcat. I am thinking there will be a limit on the no of files in a directory. Typically apllication users will load 3-5 page word docs.
 
1. How does one design the system such that there will not be any problem as the users keep uploading their files, even if a million files are reached.
2. Is there a sample application that does this.
3. Should I have lucene update index after each upload or should I do it like once a day.
 
Thanks
Bib

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-1901672754-1120104424=:99156--

From java-user-return-15236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 04:39:33 2005
Return-Path: <java-user-return-15236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69168 invoked from network); 30 Jun 2005 04:39:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 04:39:31 -0000
Received: (qmail 45387 invoked by uid 500); 30 Jun 2005 04:39:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45201 invoked by uid 500); 30 Jun 2005 04:39:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45143 invoked by uid 99); 30 Jun 2005 04:39:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 21:39:20 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.197 as permitted sender)
Received: from [64.233.170.197] (HELO rproxy.gmail.com) (64.233.170.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 21:38:46 -0700
Received: by rproxy.gmail.com with SMTP id 1so12236rny
        for <java-user@lucene.apache.org>; Wed, 29 Jun 2005 21:38:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=oL35tqQv7+t/BZKWtxgCOm9qJ0324yStgkWMh6odhkY0lXlKXdhcU0sttv4NqXVO7M3PZRq2VRUqNTRdIV6C2te3k0sVW2wCN2uSy5SJ9Q/sqMALjCeF4Bm1whClsrTq1tabYKnL7PhpnZa0PfAtBHuMdEICh+HCvsd52qq/UBY=
Received: by 10.38.8.23 with SMTP id 23mr30111rnh;
        Wed, 29 Jun 2005 21:38:42 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Wed, 29 Jun 2005 21:38:42 -0700 (PDT)
Message-ID: <7ca1239105062921382f1eacbc@mail.gmail.com>
Date: Wed, 29 Jun 2005 21:38:42 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: No.of Files in Directory
In-Reply-To: <20050630040704.1998.qmail@web31208.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20050630040704.1998.qmail@web31208.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Depending on the operating system, there might be a hard limit on the
number of files in one directory (windoze versions). Even with
operating systems that don't have a hard limit, it is still better not
to put too many files  in one directory (linux).

Typically, the file system won't be very efficient in terms of file
retrieval if there are nore than couple thousand files in one
directory.

There are some ways to tackle this issue.

1) Use a hash function to distribute the files to different sub
directories based on the file name. For example, use the MD5 algorithm
in Java or CRC algorithm in java, hash the file name to a number, use
this number to construct directory. For example, if the number you
hashed is 123456, then, you can make 123 as a sub-dir name, and 456 as
the sub-sub dir name, so forth.

I think the SQUID web proxy server uses this approach to do the file cachin=
g.

2) Why not use Lucene's indexing algorithm and store binary files with
lucene index?! I love the indexing algorithm, in that, you don't need
to manage the free space like that in a typical file system. Because
the merge process will take care of reclaiming the free space
automatically.

Should these two advices be good?

Jian

On 6/29/05, bib_lucene bib <bib_lucene@yahoo.com> wrote:
> Hi All
>=20
> In my webapp i have people uploading their documents. My server is window=
s/tomcat. I am thinking there will be a limit on the no of files in a direc=
tory. Typically apllication users will load 3-5 page word docs.
>=20
> 1. How does one design the system such that there will not be any problem=
 as the users keep uploading their files, even if a million files are reach=
ed.
> 2. Is there a sample application that does this.
> 3. Should I have lucene update index after each upload or should I do it =
like once a day.
>=20
> Thanks
> Bib
>=20
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 06:09:05 2005
Return-Path: <java-user-return-15237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88964 invoked from network); 30 Jun 2005 06:09:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 06:09:05 -0000
Received: (qmail 30023 invoked by uid 500); 30 Jun 2005 06:08:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29978 invoked by uid 500); 30 Jun 2005 06:08:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29918 invoked by uid 99); 30 Jun 2005 06:08:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 23:08:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 23:08:56 -0700
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id AF2525580068; Thu, 30 Jun 2005 02:20:21 -0400
Message-ID: <42C38C71.5060202@bayt.net>
Date: Thu, 30 Jun 2005 10:08:49 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Index comparison
References: <42C2DC5A.000004.26645@soapbox.yandex.ru>
In-Reply-To: <42C2DC5A.000004.26645@soapbox.yandex.ru>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Declude-Sender: nsh@bayt.net [192.168.1.24]
X-Declude-Spoolname: D8F242558006846F4.SMD
X-Declude-Note: Scanned by Declude 2.0.6.16 (http://www.declude.com/x-note.htm) for spam.
X-Declude-Scan: Score [0] at 02:20:22 on 30 Jun 2005
X-Declude-Tests: Whitelisted
X-Country-Chain: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am as interested in the answer to the first question as you, so we'll 
have to wait on an answer from one of the senior guys, I imagine in a 
perfect world both indecies should be the same if the same data is fed 
in assuming no errors occurred during indexing.

As for the second question, if you as merely comparing if the documents 
exist/ or not from one index to the next, you could compare one index to 
the other taking on as your primary using range queries to retrieve 
collections of IDs and then using the Java collection API to do Union 
and Difference comparisons, at least that's how I did it, or 
alternatively you could compare both indecies to the persistent core / 
or set of files that you created the index from in the first place.

Hope this helps

Nader Henein



Sergeev Alexey wrote:

>I am building the same index using different ways:
>1) Whole index at once;
>2) Step by step and then merging all parts together;
>
>When I compare index files I see that they have different sizes, that's why I'm not sure whether indexes has the same content or I've made any mistake in my index building logic or not.
>
>So, the questions are: 
>- Should the both indexes be equal (the same file amount and sizes)?
>- Does anyone know the best way how to compare content of two indexs for equality? (may be already existed tool or only manual checking of all documents, terms and so on using Lucene api)
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>  
>

-- 

Nader S. Henein
Senior Applications Architect

Bayt.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 06:11:37 2005
Return-Path: <java-user-return-15238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89663 invoked from network); 30 Jun 2005 06:11:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 06:11:37 -0000
Received: (qmail 33130 invoked by uid 500); 30 Jun 2005 06:11:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33104 invoked by uid 500); 30 Jun 2005 06:11:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33075 invoked by uid 99); 30 Jun 2005 06:11:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 23:11:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jun 2005 23:11:29 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IIVWRR00.7LG for <java-user@lucene.apache.org>; Thu, 30
          Jun 2005 12:01:03 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: No.of Files in Directory
Date: Thu, 30 Jun 2005 11:53:08 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKGEBGCEAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
In-Reply-To: <20050630040704.1998.qmail@web31208.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

Apologies.....

With my Experience of Lucene since 2004,I can say that u need to update the
Index Once in a day (rather then doing it for every upload),But if u'r
requirement say's u have to make the Doc avaliable on the run then u may do
so.....

with regards
Karthik

-----Original Message-----
From: bib_lucene bib [mailto:bib_lucene@yahoo.com]
Sent: Thursday, June 30, 2005 9:37 AM
To: java-user@lucene.apache.org
Subject: No.of Files in Directory


Hi All

In my webapp i have people uploading their documents. My server is
windows/tomcat. I am thinking there will be a limit on the no of files in a
directory. Typically apllication users will load 3-5 page word docs.

1. How does one design the system such that there will not be any problem as
the users keep uploading their files, even if a million files are reached.
2. Is there a sample application that does this.
3. Should I have lucene update index after each upload or should I do it
like once a day.

Thanks
Bib

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around
http://mail.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 06:30:06 2005
Return-Path: <java-user-return-15239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95355 invoked from network); 30 Jun 2005 06:30:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 06:30:06 -0000
Received: (qmail 52341 invoked by uid 500); 30 Jun 2005 06:29:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52320 invoked by uid 500); 30 Jun 2005 06:29:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52306 invoked by uid 99); 30 Jun 2005 06:29:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jun 2005 23:29:53 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.79] (HELO web31213.mail.mud.yahoo.com) (68.142.201.79)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jun 2005 23:29:55 -0700
Received: (qmail 14375 invoked by uid 60001); 30 Jun 2005 06:29:52 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=wg3RBDn1LK8Zkx5qKgANx5OscGQb+WIHuT1IgHrZQRax/XHjRtFUfG2lZ41c0+jPZQQXgMB4jw5jrDoHmskzrAcn8bGLed3l46R0wpNlnNH18zsSdtnZjOxDBr79Cnq+chnmSo9KG5JUcYB5rPTT+TrFlqLQc5cEi4bOvlj1BA4=  ;
Message-ID: <20050630062952.14373.qmail@web31213.mail.mud.yahoo.com>
Received: from [137.69.85.129] by web31213.mail.mud.yahoo.com via HTTP; Wed, 29 Jun 2005 23:29:51 PDT
Date: Wed, 29 Jun 2005 23:29:51 -0700 (PDT)
From: bib_lucene bib <bib_lucene@yahoo.com>
Subject: Re: No.of Files in Directory
To: java-user@lucene.apache.org, jian chen <chenjian1227@gmail.com>
In-Reply-To: <7ca1239105062921382f1eacbc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-241947158-1120112991=:13699"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-241947158-1120112991=:13699
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thanks Jian
 
I need to retrive the original document sometimes. I did not quite understand your second suggestion.
Can you please help me understand better, a pointer to some web resource will also help.

jian chen <chenjian1227@gmail.com> wrote:
Hi,

Depending on the operating system, there might be a hard limit on the
number of files in one directory (windoze versions). Even with
operating systems that don't have a hard limit, it is still better not
to put too many files in one directory (linux).

Typically, the file system won't be very efficient in terms of file
retrieval if there are nore than couple thousand files in one
directory.

There are some ways to tackle this issue.

1) Use a hash function to distribute the files to different sub
directories based on the file name. For example, use the MD5 algorithm
in Java or CRC algorithm in java, hash the file name to a number, use
this number to construct directory. For example, if the number you
hashed is 123456, then, you can make 123 as a sub-dir name, and 456 as
the sub-sub dir name, so forth.

I think the SQUID web proxy server uses this approach to do the file caching.

2) Why not use Lucene's indexing algorithm and store binary files with
lucene index?! I love the indexing algorithm, in that, you don't need
to manage the free space like that in a typical file system. Because
the merge process will take care of reclaiming the free space
automatically.

Should these two advices be good?

Jian

On 6/29/05, bib_lucene bib wrote:
> Hi All
> 
> In my webapp i have people uploading their documents. My server is windows/tomcat. I am thinking there will be a limit on the no of files in a directory. Typically apllication users will load 3-5 page word docs.
> 
> 1. How does one design the system such that there will not be any problem as the users keep uploading their files, even if a million files are reached.
> 2. Is there a sample application that does this.
> 3. Should I have lucene update index after each upload or should I do it like once a day.
> 
> Thanks
> Bib
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam? Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-241947158-1120112991=:13699--

From java-user-return-15240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 07:58:21 2005
Return-Path: <java-user-return-15240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48264 invoked from network); 30 Jun 2005 07:58:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 07:58:21 -0000
Received: (qmail 47721 invoked by uid 500); 30 Jun 2005 07:58:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47698 invoked by uid 500); 30 Jun 2005 07:58:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47681 invoked by uid 99); 30 Jun 2005 07:58:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 00:58:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 00:58:13 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DntoP-0001SA-PS
	for java-user@lucene.apache.org; Thu, 30 Jun 2005 09:50:17 +0200
Received: from linagora.net8.nerim.net ([213.41.176.138])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 30 Jun 2005 09:50:17 +0200
Received: from sbailliez by linagora.net8.nerim.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 30 Jun 2005 09:50:17 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Stephane Bailliez <sbailliez@apache.org>
Subject:  Re: Index Replication / Clustering
Date:  Thu, 30 Jun 2005 09:57:17 +0200
Lines: 35
Message-ID: <da0875$7j0$1@sea.gmane.org>
References:  <d9k0o1$p61$1@sea.gmane.org> <BFA09644-571C-4142-A26D-E92414012EE4@aconex.com> <d9oejj$h8l$1@sea.gmane.org> <9BD479CB-1094-46EE-926A-5D936950EF9D@aconex.com> <42BFE597.7020609@bayt.net>
Mime-Version:  1.0
Content-Type:  text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: linagora.net8.nerim.net
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
In-Reply-To: <42BFE597.7020609@bayt.net>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Nader Henein wrote:
> Considerations that you may want to think about when sanitizing your 
> clustered indecies:
> 
> 1) Number of documents available vs. number of documents in the 
> persistent store.
> 2) Are all the document up to date (involves comparing the existence and 
> the last date updated of Lucene documents to persistent store)
> 3) Have all the documents that should have been deleted actually been 
> deleted from the index, if you delete the documents from the persistent 
> store this is not trivial, we're using an "is_deleted" flag so we can 
> query the index for deleted documents, if we get any results, then 
> there's a problem.
> 
> Sync issues will happen, welcome to the wonderful work of NDC, not by 
> any fault of programming, but simply because this is the nature of 
> network communication, and computing in demanding environments. Failing 
> to provide for contingency and fail safes will give you some of the most 
> intense headaches, ultimately, you want the system to fix itself (assume 
> failures for day one) I've been monitoring the system from a distance 
> for the past year with little or no interference (4 years in total), 
> there is nothing better than knowing that I could take a tire iron to a 
> few of our machines and that would not affect the site performance, I 
> get to sleep at night.

No worries, I'm already banging my head because there are 2 'different' 
incoming sources of messages (the sources of messages are redundant 
satellites connections on 2 different satellites), one is supposed to be 
a live backup, the 2 are running in parallel and the broker must ideally 
wait for a message to come from the 2 sources.

If the wait goes beyond a certain threshold, trigger an alert, put the 
failed node, ...

That's the easy part :)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 08:07:07 2005
Return-Path: <java-user-return-15241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50919 invoked from network); 30 Jun 2005 08:07:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 08:07:07 -0000
Received: (qmail 59924 invoked by uid 500); 30 Jun 2005 08:06:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59907 invoked by uid 500); 30 Jun 2005 08:06:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59894 invoked by uid 99); 30 Jun 2005 08:06:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 01:06:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [134.96.188.26] (HELO mail.dfki.de) (134.96.188.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 01:06:59 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 34657E481C
	for <java-user@lucene.apache.org>; Thu, 30 Jun 2005 10:06:53 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 1F395E4818
	for <java-user@lucene.apache.org>; Thu, 30 Jun 2005 10:06:53 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <20050630005459.3059.qmail@web40902.mail.yahoo.com>
References: <20050630005459.3059.qmail@web40902.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <665c5633266924adc6de74ee4a759e4f@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: lucene query
Date: Thu, 30 Jun 2005 10:06:50 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

'not treating xml file as text file' is quite fuzzy it doesn't say how=20=

you treat the files that you wish to perform retrieval on.
It may be of interest to you that I am in the process of allowing=20
search for mathematical formulae based on lucene-index built from OMDoc=20=

encoded documents (an XML syntax extending OpenMath). There, the XML=20
nature is tokenized appropriately so that we can match formulae. I can=20=

manage to search sin(X) where X can be any sub-term, I cannot, yet=20
search with joins, i.e. search terms such as f(A,B)=3Df(B,A) where the=20=

first and second occurrences of A and B are equal XML trees.

But maybe there's something else in your XML that you wish to=20
retrieve...

paul


Le 30 juin 05, =E0 02:54, eshwari pss a =E9crit :

>>> Does Lucene support XML searching? - I mean not
>>> treating the xml file as text file.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 10:44:11 2005
Return-Path: <java-user-return-15242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2567 invoked from network); 30 Jun 2005 10:44:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 10:44:10 -0000
Received: (qmail 93244 invoked by uid 500); 30 Jun 2005 10:44:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93061 invoked by uid 500); 30 Jun 2005 10:44:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93048 invoked by uid 99); 30 Jun 2005 10:44:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 03:44:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 03:44:05 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C693013E2006; Thu, 30 Jun 2005 06:43:55 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id C0C4013E2005
	for <java-user@lucene.apache.org>; Thu, 30 Jun 2005 06:43:40 -0400 (EDT)
In-Reply-To: <OBELINLGKPEMCIEIJJNKGEBGCEAA.karthik@controlnet.co.in>
References: <OBELINLGKPEMCIEIJJNKGEBGCEAA.karthik@controlnet.co.in>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <992BB1D1-6344-4F8D-B982-B56E3149B81E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: No.of Files in Directory
Date: Thu, 30 Jun 2005 06:43:40 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 30, 2005, at 2:23 AM, Karthik N S wrote:
> With my Experience of Lucene since 2004,I can say that u need to  
> update the
> Index Once in a day (rather then doing it for every upload),But if u'r
> requirement say's u have to make the Doc avaliable on the run then  
> u may do
> so.....

Karthik - I'm concerned that folks will get the wrong idea about  
Lucene based on your advice about indexing once per day.  Lucene does  
very well with incremental indexing, and it really depends on the  
nature of the application on the granularity of indexing.  There  
would be no problem for most normal use applications to index when a  
document is uploaded - especially given that they will be 3-5 page  
Word documents and not massive PDF files or something that needs to  
be done in a background process.

     Erik


>
> with regards
> Karthik
>
> -----Original Message-----
> From: bib_lucene bib [mailto:bib_lucene@yahoo.com]
> Sent: Thursday, June 30, 2005 9:37 AM
> To: java-user@lucene.apache.org
> Subject: No.of Files in Directory
>
>
> Hi All
>
> In my webapp i have people uploading their documents. My server is
> windows/tomcat. I am thinking there will be a limit on the no of  
> files in a
> directory. Typically apllication users will load 3-5 page word docs.
>
> 1. How does one design the system such that there will not be any  
> problem as
> the users keep uploading their files, even if a million files are  
> reached.
> 2. Is there a sample application that does this.
> 3. Should I have lucene update index after each upload or should I  
> do it
> like once a day.
>
> Thanks
> Bib
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 11:41:44 2005
Return-Path: <java-user-return-15243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25976 invoked from network); 30 Jun 2005 11:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 11:41:44 -0000
Received: (qmail 66589 invoked by uid 500); 30 Jun 2005 11:41:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66547 invoked by uid 500); 30 Jun 2005 11:41:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66534 invoked by uid 500); 30 Jun 2005 11:41:34 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 66531 invoked by uid 99); 30 Jun 2005 11:41:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 04:41:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [147.83.41.105] (HELO mail.fib.upc.es) (147.83.41.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 04:41:37 -0700
Received: from [147.83.58.160] (tarragona.fib.upc.es [147.83.58.160])
	by mail.fib.upc.es (Postfix) with ESMTP id B97B2C9AC9
	for <lucene-user@jakarta.apache.org>; Thu, 30 Jun 2005 13:41:25 +0200 (CEST)
Message-ID: <42C3DA63.4020500@fib.upc.edu>
Date: Thu, 30 Jun 2005 13:41:23 +0200
From: Daniel Cortes <dcortes@fib.upc.edu>
Organization: FIB
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: A query in multipleFields
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scaned-FIB: AntiVirus/AntiSpam en fib.upc.es
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have 2 indexs and the structure of the elements in this index are 
equals what in one index I have a field.Keyword "type" with value 
"forum" and  the other index with a value "blog".
How have I do to search in two indexs at same time?
How can I restrict the results with only "forum" or "blog" type?

For exeample:
* I want search dog blue in forums and blogs
* I want search dog blue only in forums


Thks and excuse me if this question is solved yet.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 12:35:28 2005
Return-Path: <java-user-return-15244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45017 invoked from network); 30 Jun 2005 12:35:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 12:35:28 -0000
Received: (qmail 57186 invoked by uid 500); 30 Jun 2005 12:35:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57160 invoked by uid 500); 30 Jun 2005 12:35:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57147 invoked by uid 99); 30 Jun 2005 12:35:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 05:35:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 05:35:21 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8D77A13E2005; Thu, 30 Jun 2005 08:35:14 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id CE41B13E2005
	for <java-user@lucene.apache.org>; Thu, 30 Jun 2005 08:35:10 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42C3DA63.4020500@fib.upc.edu>
References: <42C3DA63.4020500@fib.upc.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1C3F9ADD-462A-4E22-8DCC-2583563D4305@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: A query in multipleFields
Date: Thu, 30 Jun 2005 08:35:12 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Jun 30, 2005, at 7:41 AM, Daniel Cortes wrote:
> I have 2 indexs and the structure of the elements in this index are  
> equals what in one index I have a field.Keyword "type" with value  
> "forum" and  the other index with a value "blog".
> How have I do to search in two indexs at same time?

Use MultiSearcher.  Instantiate IndexReader's for each index, and  
then construct a MultiSearcher using those two readers.  This is  
exactly how lucenebook.com works - one index for blog content, one  
for book content.

> How can I restrict the results with only "forum" or "blog" type?

Two options :

     1) Only use an IndexSearcher to the index you want to query if  
you are isolating it to only one type.
     2) Tack on a TermQuery for field "type" to the query (wrap the  
original query with BooleanQuery and add a required TermQuery clause  
for the type).

Personally I'd opt for #1 just to keep things simpler.

> For exeample:
> * I want search dog blue in forums and blogs

MultiSearcher across both indexes.

> * I want search dog blue only in forums

See above.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 16:56:00 2005
Return-Path: <java-user-return-15245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14669 invoked from network); 30 Jun 2005 16:56:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 16:56:00 -0000
Received: (qmail 54778 invoked by uid 500); 30 Jun 2005 16:55:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54748 invoked by uid 500); 30 Jun 2005 16:55:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54735 invoked by uid 99); 30 Jun 2005 16:55:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 09:55:51 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.205 as permitted sender)
Received: from [64.233.170.205] (HELO rproxy.gmail.com) (64.233.170.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 09:55:53 -0700
Received: by rproxy.gmail.com with SMTP id 1so28856rny
        for <java-user@lucene.apache.org>; Thu, 30 Jun 2005 09:55:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Ps0UkNqN/rPh+E9QON8dN0IQICvaxylHpYhUk0FyuWbMEKsbPrSmmwt+AnNBdZscFbZqY/vIVnERSXruysWv4JDOMA5scS2ZkJCeRJBn/u7Bqb8gunNgAvOGeAnYSKRrV+hIMDFJ7IMMD3rlAU2TLSnyuaBmT7dgG19Y0K5v8K8=
Received: by 10.38.8.23 with SMTP id 23mr39678rnh;
        Thu, 30 Jun 2005 09:55:49 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Thu, 30 Jun 2005 09:55:49 -0700 (PDT)
Message-ID: <7ca1239105063009553425b89c@mail.gmail.com>
Date: Thu, 30 Jun 2005 09:55:49 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: No.of Files in Directory
In-Reply-To: <20050630062952.14373.qmail@web31213.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <7ca1239105062921382f1eacbc@mail.gmail.com>
	 <20050630062952.14373.qmail@web31213.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

My second suggestion is basically to store the user documents (word
docs) directly in lucene index.

1) If you are using Lucene 1.4.3, you can do something like this:

// suppose the word docs are now in byte array
byte[] wordDoc =3D getUploadedWordDoc();

// add the byte array to lucene index
Document doc =3D new Document();
doc.add(Field.UnIndexed("originalDoc", getBase64(wordDoc)));

The getBase64 method basically transforms the bytes into ASCII text, as fol=
lows:
String getBase64(byte[] wordDoc)
{
      byte[] chars =3D Base64.encodeBase64(wordDoc);
      String encodedStr =3D new String(chars, "US-ASCII");
      return encodedStr;
}

You can get the Base64.java from=20
http://jakarta.apache.org/commons/codec/apidocs/org/apache/commons/codec/bi=
nary/Base64.html

2) Correct me if I am wrong, I think the latest Lucene dev base has
the capability to direct add binary content to the Lucene index.

Looking at=20
http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/java/org/apache/luc=
ene/document/Field.java?view=3Dmarkup
It has:
/**
   * Create a stored field with binary value. Optionally the value may
be compressed.
   *=20
   * @param name The name of the field
   * @param value The binary value
   * @param store How <code>value</code> should be stored (compressed or no=
t.)
   */
  public Field(String name, byte[] value, Store store) {
.....

So, I guess if you use the lastest Lucene dev base, you can do:
byte[] wordDoc =3D getUploadedWordDoc();
Document doc =3D new Document();
doc.add(new Field("originalDoc", wordDoc(), Store.YES);

I think Lucene index is pretty good in terms of storing millions of
small documents. However, there are two concerns that you might
address:

1) no transaction support for the index manipulation. I am not sure
what happens when the program is storing the original word document
meanwhile the machine gets shut down. Will the index be corrupted?

2) Since Lucene index is basically files in a physical directory, the
index file size could eventually hit a hard limit and then you have to
have another way to get around it. (Split up the index into two
indexes, or, you could configure Lucene for the
IndexWriter.DEFAULT_MAX_MERGE_DOCS?)

For example, I think some version of windoze (e.g., using FAT file
system), has a file size limit of 2GB.

Let me know if this helps.

Cheers,

Jian


On 6/29/05, bib_lucene bib <bib_lucene@yahoo.com> wrote:
> Thanks Jian
>=20
> I need to retrive the original document sometimes. I did not quite unders=
tand your second suggestion.
> Can you please help me understand better, a pointer to some web resource =
will also help.
>=20
> jian chen <chenjian1227@gmail.com> wrote:
> Hi,
>=20
> Depending on the operating system, there might be a hard limit on the
> number of files in one directory (windoze versions). Even with
> operating systems that don't have a hard limit, it is still better not
> to put too many files in one directory (linux).
>=20
> Typically, the file system won't be very efficient in terms of file
> retrieval if there are nore than couple thousand files in one
> directory.
>=20
> There are some ways to tackle this issue.
>=20
> 1) Use a hash function to distribute the files to different sub
> directories based on the file name. For example, use the MD5 algorithm
> in Java or CRC algorithm in java, hash the file name to a number, use
> this number to construct directory. For example, if the number you
> hashed is 123456, then, you can make 123 as a sub-dir name, and 456 as
> the sub-sub dir name, so forth.
>=20
> I think the SQUID web proxy server uses this approach to do the file cach=
ing.
>=20
> 2) Why not use Lucene's indexing algorithm and store binary files with
> lucene index?! I love the indexing algorithm, in that, you don't need
> to manage the free space like that in a typical file system. Because
> the merge process will take care of reclaiming the free space
> automatically.
>=20
> Should these two advices be good?
>=20
> Jian
>=20
> On 6/29/05, bib_lucene bib wrote:
> > Hi All
> >
> > In my webapp i have people uploading their documents. My server is wind=
ows/tomcat. I am thinking there will be a limit on the no of files in a dir=
ectory. Typically apllication users will load 3-5 page word docs.
> >
> > 1. How does one design the system such that there will not be any probl=
em as the users keep uploading their files, even if a million files are rea=
ched.
> > 2. Is there a sample application that does this.
> > 3. Should I have lucene update index after each upload or should I do i=
t like once a day.
> >
> > Thanks
> > Bib
> >
> > __________________________________________________
> > Do You Yahoo!?
> > Tired of spam? Yahoo! Mail has the best spam protection around
> > http://mail.yahoo.com
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 20:13:11 2005
Return-Path: <java-user-return-15246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15288 invoked from network); 30 Jun 2005 20:13:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 20:13:11 -0000
Received: (qmail 3317 invoked by uid 500); 30 Jun 2005 20:13:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3286 invoked by uid 500); 30 Jun 2005 20:13:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3273 invoked by uid 99); 30 Jun 2005 20:13:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 13:13:03 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_RCVD_HELO,HTML_40_50,HTML_MESSAGE,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of david.bohl@sourcemedia.com designates 207.241.10.34 as permitted sender)
Received: from [207.241.10.34] (HELO tmgate2.thomsonmedia.com) (207.241.10.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 13:13:06 -0700
Received: from tmskoex01.tm.thomsonmedia.com (ip-33.bankinfo.com [207.241.10.33])
	by tmgate2.thomsonmedia.com (Switch-3.1.7/Switch-3.1.7) with ESMTP id j5UKD1nu029816
	for <java-user@lucene.apache.org>; Thu, 30 Jun 2005 15:13:01 -0500 (CDT)
Received: by tmskoex01.tm.thomsonmedia.com with Internet Mail Service (5.5.2657.72)
	id <NXZBABYC>; Thu, 30 Jun 2005 15:13:01 -0500
Message-ID: <4F8DDDFDAC9A864AAED5BB875129DF4B04D40BD2@tmskoex01.tm.thomsonmedia.com>
From: "Bohl, David" <david.bohl@SourceMedia.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Does highlighter highlight phrases only?
Date: Thu, 30 Jun 2005 15:12:51 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C57DB0.17D4FACE"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C57DB0.17D4FACE
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 7bit

FYI, I made an update to this (I'm the author) to handle span queries.  I
uploaded the updated code to the same bugzilla link.  The code doesn't treat
span queries like phrases - it just highlights the terms individually (if
someone can find a way to highlight it as a phrase, feel free to update it).

-----Original Message-----
From: Fred Toth [mailto:ftoth@synernet.com]
Sent: Tuesday, June 28, 2005 9:16 PM
To: java-user@lucene.apache.org
Subject: Re: Does highlighter highlight phrases only?


Thanks Erik! I think I found it.

For others who are interested:

http://issues.apache.org/bugzilla/show_bug.cgi?id=35518

Fred Toth

At 09:26 PM 6/28/2005, you wrote:

>On Jun 28, 2005, at 9:09 PM, Fred Toth wrote:
>
>>Hi,
>>
>>I'm working with the highlighter and phrase queries and I'm seeing
>>it highlight not
>>the phrase, but also the individual terms. So if the phrase query
>>is "heavy doses", we get that string highlighted, but also individual
>>occurrences of "heavy" and "doses".
>>
>>I can't tell if that's because I'm doing something wrong or if that's
>>just the way it works.
>>
>>Anybody know the answer to this one?
>
>That's just the way it works, currently.  There is a new piece of
>code just contributed residing in Bugzilla that (I think) highlights
>just the phrases - have a look at that and see if that helps.
>
>     Erik
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

"This communication is intended solely for the addressee and is confidential and not for third party unauthorized distribution"
------_=_NextPart_001_01C57DB0.17D4FACE--

From java-user-return-15247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 20:27:02 2005
Return-Path: <java-user-return-15247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19902 invoked from network); 30 Jun 2005 20:27:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 20:27:01 -0000
Received: (qmail 19715 invoked by uid 500); 30 Jun 2005 20:26:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19694 invoked by uid 500); 30 Jun 2005 20:26:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19681 invoked by uid 99); 30 Jun 2005 20:26:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 13:26:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 13:26:57 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5F68213E2007; Thu, 30 Jun 2005 16:26:47 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 5FC6613E2005
	for <java-user@lucene.apache.org>; Thu, 30 Jun 2005 16:26:30 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <4F8DDDFDAC9A864AAED5BB875129DF4B04D40BD2@tmskoex01.tm.thomsonmedia.com>
References: <4F8DDDFDAC9A864AAED5BB875129DF4B04D40BD2@tmskoex01.tm.thomsonmedia.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F42833D6-C751-4424-8E60-39E42E44951C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Does highlighter highlight phrases only?
Date: Thu, 30 Jun 2005 16:26:31 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 30, 2005, at 4:12 PM, Bohl, David wrote:

> FYI, I made an update to this (I'm the author) to handle span  
> queries.  I
> uploaded the updated code to the same bugzilla link.  The code  
> doesn't treat
> span queries like phrases - it just highlights the terms  
> individually (if
> someone can find a way to highlight it as a phrase, feel free to  
> update it).

I'm not sure, at the moment, how this could integrate with the  
Highlighter, but I wrote some code for Lucene in Action that displays  
spans like this:

spanOr([f:quick, f:fox]):
    the <quick> brown fox jumps over the lazy dog (0.37158427)
    the quick brown <fox> jumps over the lazy dog (0.37158427)
    the <quick> red fox jumps over the sleepy cat (0.37158427)
    the quick red <fox> jumps over the sleepy cat (0.37158427)

spanFirst(spanNear([f:quick, f:fox], 1, true), 4):
    the <quick brown fox> jumps over the lazy dog (0.18579213)
    the <quick red fox> jumps over the sleepy cat (0.18579213)

f:the:
    <the> quick brown fox jumps over the lazy dog (0.18579213)
    the quick brown fox jumps over <the> lazy dog (0.18579213)
    <the> quick red fox jumps over the sleepy cat (0.18579213)
    the quick red fox jumps over <the> sleepy cat (0.18579213)

spanNear([f:quick, f:brown], 0, false):
    the <quick brown> fox jumps over the lazy dog (0.2876891)


The relevant code is pasted below (and found in SpanQueryTest.java in  
the Lucene in Action code):

   private void dumpSpans(SpanQuery query) throws IOException {
     Spans spans = query.getSpans(reader);
     System.out.println(query + ":");
     int numSpans = 0;

     Hits hits = searcher.search(query);
     float[] scores = new float[2];
     for (int i = 0; i < hits.length(); i++) {
       scores[hits.id(i)] = hits.score(i);
     }

     while (spans.next()) {
       numSpans++;

       int id = spans.doc();
       Document doc = reader.document(id);

       // for simplicity - assume tokens are in sequential,
       // positions, starting from 0
       Token[] tokens = AnalyzerUtils.tokensFromAnalysis(
           analyzer, doc.get("f"));
       StringBuffer buffer = new StringBuffer();
       buffer.append("   ");
       for (int i = 0; i < tokens.length; i++) {
         if (i == spans.start()) {
           buffer.append("<");
         }
         buffer.append(tokens[i].termText());
         if (i + 1 == spans.end()) {
           buffer.append(">");
         }
         buffer.append(" ");
       }
       buffer.append("(" + scores[id] + ") ");
       System.out.println(buffer);
     }

     if (numSpans == 0) {
       System.out.println("   No spans");
     }
     System.out.println();
   }

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 20:35:05 2005
Return-Path: <java-user-return-15248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22128 invoked from network); 30 Jun 2005 20:35:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 20:35:05 -0000
Received: (qmail 31281 invoked by uid 500); 30 Jun 2005 20:34:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31248 invoked by uid 500); 30 Jun 2005 20:34:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31231 invoked by uid 99); 30 Jun 2005 20:34:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 13:34:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.11.36] (HELO smtp005.mail.ukl.yahoo.com) (217.12.11.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 30 Jun 2005 13:35:01 -0700
Received: (qmail 2049 invoked from network); 30 Jun 2005 20:34:56 -0000
Received: from unknown (HELO ?10.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp005.mail.ukl.yahoo.com with SMTP; 30 Jun 2005 20:34:56 -0000
Message-ID: <42C45781.2080606@yahoo.co.uk>
Date: Thu, 30 Jun 2005 21:35:13 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Does highlighter highlight phrases only?
References: <4F8DDDFDAC9A864AAED5BB875129DF4B04D40BD2@tmskoex01.tm.thomsonmedia.com> <F42833D6-C751-4424-8E60-39E42E44951C@ehatchersolutions.com>
In-Reply-To: <F42833D6-C751-4424-8E60-39E42E44951C@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik,
Yes I was thinking that code could form the basis of a new highlighter.

I've just attached a QuerySpansExtractor to the bugzilla entry for the 
new highlighter. This class produces Spans from queries other than 
SpanXxxxQueries eg phrase, term and booleans.
I'm thinking you can throw the text to be highligted  as a single doc 
into a MemIndex , extracts the spans using the QuerySpansExtractor and 
the  MemIndex's reader (need to expose a getReader method on this - I'm 
working on it), then use some new highlighting logic on the Spans.

Sound reasonable?


	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 30 23:44:00 2005
Return-Path: <java-user-return-15249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72286 invoked from network); 30 Jun 2005 23:44:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jun 2005 23:44:00 -0000
Received: (qmail 64668 invoked by uid 500); 30 Jun 2005 23:43:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64634 invoked by uid 500); 30 Jun 2005 23:43:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64621 invoked by uid 99); 30 Jun 2005 23:43:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 16:43:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yourabi@gmail.com designates 64.233.184.203 as permitted sender)
Received: from [64.233.184.203] (HELO wproxy.gmail.com) (64.233.184.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 16:43:55 -0700
Received: by wproxy.gmail.com with SMTP id i5so218287wra
        for <java-user@lucene.apache.org>; Thu, 30 Jun 2005 16:43:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=knlL5KWIEGNOHz/w2n041c9A+UyAJCApZR0Yp6jUTgbrJkCazmeLbuLQZU+kszvrVDhKtZsHmnbmoJ5HGuiSRNLnQFrwTqzkEqomonOv8JaZZnsDts9cQVGICnq3XuED4/xllgKe0qzxc25Wio3moPEGkVKj2WktGc4e5tehqRg=
Received: by 10.54.47.41 with SMTP id u41mr808258wru;
        Thu, 30 Jun 2005 16:43:51 -0700 (PDT)
Received: by 10.54.14.63 with HTTP; Thu, 30 Jun 2005 16:43:51 -0700 (PDT)
Message-ID: <b13f3f06050630164356cae23c@mail.gmail.com>
Date: Thu, 30 Jun 2005 16:43:51 -0700
From: Yousef Ourabi <yourabi@gmail.com>
Reply-To: Yousef Ourabi <yourabi@gmail.com>
To: java-user@lucene.apache.org
Subject: Nested Boolean Query
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello:
I have two fields in my document a title, term and content. I want to
programatically create a query that will return all documents that has
both title AND content. I created a boolean query that looks like
this. The logican return I want are any documents that Must have the
alias passed to AliasQuery, and the query passed also shows up in a
field that has that alias. Basically filtering all documents of
alias=3DX with term =3D Y. Does this look right?

What I am getting are all documents by the alias (aliasQuery) orderd
by the search term, but also documents that don't have the query.

BooleanQuery termSearch =3D new BooleanQuery();
BooleanQuery combinedQuery =3D new BooleanQuery();
=09=09=09
=09=09=09
termSearch.add(termQuery, false, false);
termSearch.add(tittleQuery, false, false);
=09=09=09
combinedQuery.add(aliasQuery, true, false);
combinedQuery.add(termSearch,false,false);


Best,
Yousef

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 03:30:35 2005
Return-Path: <java-user-return-15250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40070 invoked from network); 1 Jul 2005 03:30:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 03:30:34 -0000
Received: (qmail 74246 invoked by uid 500); 1 Jul 2005 03:30:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74172 invoked by uid 500); 1 Jul 2005 03:30:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74158 invoked by uid 99); 1 Jul 2005 03:30:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 20:30:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.200 as permitted sender)
Received: from [64.233.184.200] (HELO wproxy.gmail.com) (64.233.184.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 20:30:21 -0700
Received: by wproxy.gmail.com with SMTP id i5so248870wra
        for <java-user@lucene.apache.org>; Thu, 30 Jun 2005 20:30:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=U2yTZdbzDAq0lZRmM1S5KV0jqHlqzATUhn+Pb0uTdE/jHgZvE79uWv3dpAPX0CHzC3ngLWD+BapQqncZ6OjLkhaAl9Cq1XBzQaVLbHIzxp54gtfphaIlQGMJbMt9hKPh3NZ6eR2tJg8Y4DB668/JCvf6YUwYCoU0GSz1RWEmJsY=
Received: by 10.54.3.17 with SMTP id 17mr990271wrc;
        Thu, 30 Jun 2005 20:30:17 -0700 (PDT)
Received: from ?192.168.0.3? ([67.188.85.52])
        by mx.gmail.com with ESMTP id 13sm822180wrl.2005.06.30.20.30.17;
        Thu, 30 Jun 2005 20:30:17 -0700 (PDT)
Message-ID: <42C4B835.6010703@gmail.com>
Date: Thu, 30 Jun 2005 20:27:49 -0700
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Design question [too many fields?]
References: <20050629135856.83265.qmail@web26004.mail.ukl.yahoo.com> <AD48ECAA-83ED-49B3-945D-E7B4118451E3@ehatchersolutions.com>
In-Reply-To: <AD48ECAA-83ED-49B3-945D-E7B4118451E3@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mark, your suggestion will incur another trip to the database. And if 
the search results is large, filtering in DB by pk is not really good.

Erik, your original "date" field is good when there is not many 
dates(<1024) in the database. Otherwise, Range Query can not handle it.

My suggestion is, use "year" + "month" + "day" three fields to store 
date. And when searching, for example, any date that's greater than 
2005-06-30, you can use this query to search: ( year > 2005 ) or  ( 
year=2005 and month>=6) or ( year=2005 and month=6 and day > 30 ).
It's a combination of BooleanQuery, TermQuery, and RangeQuery.

This may seem cumbersome, but it can save one trip to database, and 
circumvent Lucene's limitation.

Chris Lu
http://www.dbsight.net

Erik Hatcher wrote:

> I second Mark's suggestion over the alternative I posted.  My  
> alternative was merely to invert the field structure originally  
> described, but using a Filter for the volatile information is wiser.
>
>     Erik
>
> On Jun 29, 2005, at 9:58 AM, mark harwood wrote:
>
>> Presumably there is also a free-text element to the
>> search or you wouldn't be using Lucene.
>>
>> Multiple fields is not the way to go.
>> A single Lucene field could contain multiple terms (
>> the available dates) but I still don't think that's
>> the best solution.
>> The availability info is likely to be pretty volatile
>> and you always want up-to-date info so I would prefer
>> to hit a database for this. If you keep a DB primary
>> key to Lucene doc id look-up cached in memory you can
>> quickly construct a Lucene filter from the database
>> results and therefore only show Lucene results for
>> available rooms.
>>
>> Cheers
>> Mark
>>
>>
>>
>> ___________________________________________________________
>> How much free photo storage do you get? Store your holiday
>> snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 06:57:24 2005
Return-Path: <java-user-return-15251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98701 invoked from network); 1 Jul 2005 06:57:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 06:57:24 -0000
Received: (qmail 88645 invoked by uid 500); 1 Jul 2005 06:57:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88625 invoked by uid 500); 1 Jul 2005 06:57:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88612 invoked by uid 99); 1 Jul 2005 06:57:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jun 2005 23:57:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.82] (HELO web50506.mail.yahoo.com) (206.190.38.82)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 30 Jun 2005 23:57:17 -0700
Received: (qmail 8699 invoked by uid 60001); 1 Jul 2005 06:57:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=r8I4oRQGCrUQgSOiWVtcEbm5TB9pZuZCsyopG9NBuRmUmuKiucPcRjOnsGIQYHT/zBLeYyuUTcUwO+T187Gtm2lWGDj593TiVipTZ5FvFjObr4MUOncn6LiWOJEgr8jMb5gjaNCP6Q+81JtKvgvjBv7KQy95UFcSZVcKnHt+5eM=  ;
Message-ID: <20050701065713.8697.qmail@web50506.mail.yahoo.com>
Received: from [217.118.45.90] by web50506.mail.yahoo.com via HTTP; Fri, 01 Jul 2005 08:57:13 CEST
Date: Fri, 1 Jul 2005 08:57:13 +0200 (CEST)
From: Naimdjon Takhirov <tnaim1@yahoo.com>
Subject: Vedr. Re: Design question [too many fields?]
To: java-user@lucene.apache.org
In-Reply-To: <42C4B835.6010703@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Chris,

It is anyway going to be too many fields then? Days of
year for the whole year ahead? Since the fromDate and
toDate can be across two months and the customer wants
the data be available for one year.

Naimdjon

--- Chris Lu <chris.lu@gmail.com> skrev:

> Mark, your suggestion will incur another trip to the
> database. And if 
> the search results is large, filtering in DB by pk
> is not really good.
> 
> Erik, your original "date" field is good when there
> is not many 
> dates(<1024) in the database. Otherwise, Range Query
> can not handle it.
> 
> My suggestion is, use "year" + "month" + "day" three
> fields to store 
> date. And when searching, for example, any date
> that's greater than 
> 2005-06-30, you can use this query to search: ( year
> > 2005 ) or  ( 
> year=2005 and month>=6) or ( year=2005 and month=6
> and day > 30 ).
> It's a combination of BooleanQuery, TermQuery, and
> RangeQuery.
> 
> This may seem cumbersome, but it can save one trip
> to database, and 
> circumvent Lucene's limitation.
> 
> Chris Lu
> http://www.dbsight.net
> 
> Erik Hatcher wrote:
> 
> > I second Mark's suggestion over the alternative I
> posted.  My  
> > alternative was merely to invert the field
> structure originally  
> > described, but using a Filter for the volatile
> information is wiser.
> >
> >     Erik
> >
> > On Jun 29, 2005, at 9:58 AM, mark harwood wrote:
> >
> >> Presumably there is also a free-text element to
> the
> >> search or you wouldn't be using Lucene.
> >>
> >> Multiple fields is not the way to go.
> >> A single Lucene field could contain multiple
> terms (
> >> the available dates) but I still don't think
> that's
> >> the best solution.
> >> The availability info is likely to be pretty
> volatile
> >> and you always want up-to-date info so I would
> prefer
> >> to hit a database for this. If you keep a DB
> primary
> >> key to Lucene doc id look-up cached in memory you
> can
> >> quickly construct a Lucene filter from the
> database
> >> results and therefore only show Lucene results
> for
> >> available rooms.
> >>
> >> Cheers
> >> Mark
> >>
> >>
> >>
> >>
>
___________________________________________________________
> >> How much free photo storage do you get? Store
> your holiday
> >> snaps for FREE with Yahoo! Photos
> http://uk.photos.yahoo.com
> >>
> >>
>
---------------------------------------------------------------------
> >> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >>
> >
> >
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


